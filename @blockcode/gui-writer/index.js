import{addLocalesMessages as v}from"@blockcode/core";var a={"writer.name":"Markdown Writer","writer.menus.edit.openOutline":"Turn on Outline","writer.menus.edit.closeOutline":"Turn off Outline","writer.menus.edit.openAdvanced":"Turn on Advanced Mode","writer.menus.edit.closeAdvanced":"Turn off Advanced Mode"};var i={"writer.name":"Markdown 编辑器","writer.menus.edit.openOutline":"打开大纲","writer.menus.edit.closeOutline":"关闭大纲","writer.menus.edit.openAdvanced":"打开专业模式","writer.menus.edit.closeAdvanced":"关闭专业模式"};var c={"writer.name":"Markdown 編輯器","writer.menus.edit.openOutline":"打開大綱","writer.menus.edit.closeOutline":"關閉大綱","writer.menus.edit.openAdvanced":"打開專業模式","writer.menus.edit.closeAdvanced":"關閉專業模式"};v({en:a,"zh-Hans":i,"zh-Hant":c});import{html2canvas as T}from"@blockcode/utils";import{MarkdownEditor as g,markdownTab as h}from"@blockcode/write";import{useEffect as M,useCallback as l}from"preact/hooks";import{useAppContext as f,setAppState as r,Text as u,MenuSection as A,MenuItem as m}from"@blockcode/core";import{jsx as t,jsxs as O}from"preact/jsx-runtime";function s({itemClassName:e}){let{appState:n}=f();M(()=>{if(n.value?.outline==null)r({outline:!1,advancedMode:!1})},[]);let d=l(()=>{let o=!n.value.outline;r({outline:o})},[]),p=l(()=>{let o=!n.value.advancedMode;if(o)document.querySelector('[data-mode="ir"]').dispatchEvent(new CustomEvent("click"));else document.querySelector('[data-mode="wysiwyg"]').dispatchEvent(new CustomEvent("click"));r({advancedMode:o})},[]);return O(A,{children:[t(m,{className:e,onClick:d,children:n.value?.outline!==!0?t(u,{id:"writer.menus.edit.openOutline",defaultMessage:"Turn on Outline"}):t(u,{id:"writer.menus.edit.closeOutline",defaultMessage:"Turn off Outline"})}),t(m,{className:e,onClick:p,children:n.value?.advancedMode!==!0?t(u,{id:"writer.menus.edit.openAdvanced",defaultMessage:"Turn on Advanced Mode"}):t(u,{id:"writer.menus.edit.closeAdvanced",defaultMessage:"Turn off Advanced Mode"})})]})}var w={files:[{id:"markdown",content:`# Hello!
`}]};var K={onNew(){return w},onSave(e,n){return e=e.map((d)=>{return{id:d.id,content:d.content}}),{files:e,assets:n}},async onThumb(){let e=window.currentVditor.getCurrentMode(),n=window.currentVditor.vditor[e].element;return(await T(n))?.toDataURL()},onUndo(e){if(e instanceof MouseEvent){let{vditor:n}=window.currentVditor;n.undo.undo(n)}},onRedo(e){if(e instanceof MouseEvent){let{vditor:n}=window.currentVditor;n.undo.redo(n)}},onEnableUndo(){let e=document.querySelector('[data-type="undo"].vditor-menu--disabled');return window.currentVditor&&!e},onEnableRedo(){let e=document.querySelector('[data-type="redo"].vditor-menu--disabled');return window.currentVditor&&!e},menuItems:[{id:"edit",Menu:s}],tabs:[{...h,Content:g}]};export{K as default};
