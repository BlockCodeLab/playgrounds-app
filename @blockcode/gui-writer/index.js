import{addLocalesMessages as M}from"@blockcode/core";var s={"writer.name":"Markdown Writer","writer.menus.edit.openOutline":"Turn on Outline","writer.menus.edit.closeOutline":"Turn off Outline","writer.menus.edit.openAdvanced":"Turn on Advanced Mode","writer.menus.edit.closeAdvanced":"Turn off Advanced Mode","writer.menus.edit.openProfessional":"Turn on Professiona Mode","writer.menus.edit.closeProfessional":"Turn off Professiona Mode"};var l={"writer.name":"Markdown 编辑器","writer.menus.edit.openOutline":"打开大纲","writer.menus.edit.closeOutline":"关闭大纲","writer.menus.edit.openAdvanced":"打开高级模式","writer.menus.edit.closeAdvanced":"关闭高级模式","writer.menus.edit.openProfessional":"打开专业模式","writer.menus.edit.closeProfessional":"关闭专业模式"};var c={"writer.name":"Markdown 編輯器","writer.menus.edit.openOutline":"打開大綱","writer.menus.edit.closeOutline":"關閉大綱","writer.menus.edit.openAdvanced":"打開高級模式","writer.menus.edit.closeAdvanced":"關閉高級模式","writer.menus.edit.openProfessional":"打開專家模式","writer.menus.edit.closeProfessional":"關閉專家模式"};M({en:s,"zh-Hans":l,"zh-Hant":c});import{html2canvas as T}from"@blockcode/utils";import{MarkdownEditor as P,markdownTab as g}from"@blockcode/write";import{useEffect as p,useCallback as m}from"preact/hooks";import{useAppContext as v,setAppState as d,Text as r,MenuSection as A,MenuItem as u}from"@blockcode/core";import{jsx as o,jsxs as O}from"preact/jsx-runtime";function f({itemClassName:e}){let{appState:n}=v();p(()=>{if(n.value?.outline==null)d({outline:!1,advancedMode:"wysiwyg"})},[]);let i=m(()=>{let t=!n.value.outline;d({outline:t})},[]),a=m((t)=>()=>{if(t===n.value.advancedMode)t="wysiwyg";document.querySelector(`[data-mode="${t}"]`).dispatchEvent(new CustomEvent("click")),d({advancedMode:t})},[]);return O(A,{children:[o(u,{className:e,onClick:i,children:n.value?.outline!==!0?o(r,{id:"writer.menus.edit.openOutline",defaultMessage:"Turn on Outline"}):o(r,{id:"writer.menus.edit.closeOutline",defaultMessage:"Turn off Outline"})}),o(u,{className:e,onClick:a("ir"),children:n.value?.advancedMode!=="ir"?o(r,{id:"writer.menus.edit.openAdvanced",defaultMessage:"Turn on Advanced Mode"}):o(r,{id:"writer.menus.edit.closeAdvanced",defaultMessage:"Turn off Advanced Mode"})}),o(u,{className:e,onClick:a("sv"),children:n.value?.advancedMode!=="sv"?o(r,{id:"writer.menus.edit.openProfessional",defaultMessage:"Turn on Professional Mode"}):o(r,{id:"writer.menus.edit.closeProfessional",defaultMessage:"Turn off Professional Mode"})})]})}var w={files:[{id:"markdown",content:`# Hello!
`}]};var G={onNew(){return w},onSave(e,n){return e=e.map((i)=>{return{id:i.id,content:i.content}}),{files:e,assets:n}},async onThumb(){let e=window.currentVditor.getCurrentMode(),n=window.currentVditor.vditor[e].element;return(await T(n))?.toDataURL()},onUndo(e){if(e instanceof MouseEvent){let{vditor:n}=window.currentVditor;n.undo.undo(n)}},onRedo(e){if(e instanceof MouseEvent){let{vditor:n}=window.currentVditor;n.undo.redo(n)}},onEnableUndo(){let e=document.querySelector('[data-type="undo"].vditor-menu--disabled');return window.currentVditor&&!e},onEnableRedo(){let e=document.querySelector('[data-type="redo"].vditor-menu--disabled');return window.currentVditor&&!e},menuItems:[{id:"edit",Menu:f,disabledCoding:!0},{id:"view",disabled:!0}],tabs:[{...g,Content:P}]};export{G as default};
