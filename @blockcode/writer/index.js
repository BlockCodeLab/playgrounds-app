var h4=Object.create;var{getPrototypeOf:k4,defineProperty:p5,getOwnPropertyNames:_4}=Object;var b4=Object.prototype.hasOwnProperty;var u4=(U0,O0,i)=>{i=U0!=null?h4(k4(U0)):{};let b0=O0||!U0||!U0.__esModule?p5(i,"default",{value:U0,enumerable:!0}):i;for(let v of _4(U0))if(!b4.call(b0,v))p5(b0,v,{get:()=>U0[v],enumerable:!0});return b0};var g4=(U0,O0)=>()=>(O0||U0((O0={exports:{}}).exports,O0),O0.exports);var l5=g4((V1,i1)=>{/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */(function(O0,i){if(typeof V1==="object"&&typeof i1==="object")i1.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else if(typeof V1==="object")V1.Vditor=i();else O0.Vditor=i()})(V1,function(){return(()=>{var U0={173:(v)=>{var P=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=0.5,this.Match_Distance=1000,this.Patch_DeleteThreshold=0.5,this.Patch_Margin=4,this.Match_MaxBits=32},N=-1,I=1,M=0;P.Diff=function(Y,J){return[Y,J]},P.prototype.diff_main=function(Y,J,O,F){if(typeof F>"u")if(this.Diff_Timeout<=0)F=Number.MAX_VALUE;else F=new Date().getTime()+this.Diff_Timeout*1000;var K=F;if(Y==null||J==null)throw Error("Null input. (diff_main)");if(Y==J){if(Y)return[new P.Diff(M,Y)];return[]}if(typeof O>"u")O=!0;var j=O,S=this.diff_commonPrefix(Y,J),H=Y.substring(0,S);Y=Y.substring(S),J=J.substring(S),S=this.diff_commonSuffix(Y,J);var D=Y.substring(Y.length-S);Y=Y.substring(0,Y.length-S),J=J.substring(0,J.length-S);var W=this.diff_compute_(Y,J,j,K);if(H)W.unshift(new P.Diff(M,H));if(D)W.push(new P.Diff(M,D));return this.diff_cleanupMerge(W),W},P.prototype.diff_compute_=function(Y,J,O,F){var K;if(!Y)return[new P.Diff(I,J)];if(!J)return[new P.Diff(N,Y)];var j=Y.length>J.length?Y:J,S=Y.length>J.length?J:Y,H=j.indexOf(S);if(H!=-1){if(K=[new P.Diff(I,j.substring(0,H)),new P.Diff(M,S),new P.Diff(I,j.substring(H+S.length))],Y.length>J.length)K[0][0]=K[2][0]=N;return K}if(S.length==1)return[new P.Diff(N,Y),new P.Diff(I,J)];var D=this.diff_halfMatch_(Y,J);if(D){var W=D[0],U=D[1],B=D[2],R=D[3],C=D[4],L=this.diff_main(W,B,O,F),u=this.diff_main(U,R,O,F);return L.concat([new P.Diff(M,C)],u)}if(O&&Y.length>100&&J.length>100)return this.diff_lineMode_(Y,J,F);return this.diff_bisect_(Y,J,F)},P.prototype.diff_lineMode_=function(Y,J,O){var F=this.diff_linesToChars_(Y,J);Y=F.chars1,J=F.chars2;var K=F.lineArray,j=this.diff_main(Y,J,!1,O);this.diff_charsToLines_(j,K),this.diff_cleanupSemantic(j),j.push(new P.Diff(M,""));var S=0,H=0,D=0,W="",U="";while(S<j.length){switch(j[S][0]){case I:D++,U+=j[S][1];break;case N:H++,W+=j[S][1];break;case M:if(H>=1&&D>=1){j.splice(S-H-D,H+D),S=S-H-D;var B=this.diff_main(W,U,!1,O);for(var R=B.length-1;R>=0;R--)j.splice(S,0,B[R]);S=S+B.length}D=0,H=0,W="",U="";break}S++}return j.pop(),j},P.prototype.diff_bisect_=function(Y,J,O){var F=Y.length,K=J.length,j=Math.ceil((F+K)/2),S=j,H=2*j,D=Array(H),W=Array(H);for(var U=0;U<H;U++)D[U]=-1,W[U]=-1;D[S+1]=0,W[S+1]=0;var B=F-K,R=B%2!=0,C=0,L=0,u=0,a=0;for(var m=0;m<j;m++){if(new Date().getTime()>O)break;for(var t=-m+C;t<=m-L;t+=2){var z0=S+t,J0;if(t==-m||t!=m&&D[z0-1]<D[z0+1])J0=D[z0+1];else J0=D[z0-1]+1;var D0=J0-t;while(J0<F&&D0<K&&Y.charAt(J0)==J.charAt(D0))J0++,D0++;if(D[z0]=J0,J0>F)L+=2;else if(D0>K)C+=2;else if(R){var j0=S+B-t;if(j0>=0&&j0<H&&W[j0]!=-1){var Y0=F-W[j0];if(J0>=Y0)return this.diff_bisectSplit_(Y,J,J0,D0,O)}}}for(var P0=-m+u;P0<=m-a;P0+=2){var j0=S+P0,Y0;if(P0==-m||P0!=m&&W[j0-1]<W[j0+1])Y0=W[j0+1];else Y0=W[j0-1]+1;var y0=Y0-P0;while(Y0<F&&y0<K&&Y.charAt(F-Y0-1)==J.charAt(K-y0-1))Y0++,y0++;if(W[j0]=Y0,Y0>F)a+=2;else if(y0>K)u+=2;else if(!R){var z0=S+B-P0;if(z0>=0&&z0<H&&D[z0]!=-1){var J0=D[z0],D0=S+J0-z0;if(Y0=F-Y0,J0>=Y0)return this.diff_bisectSplit_(Y,J,J0,D0,O)}}}}return[new P.Diff(N,Y),new P.Diff(I,J)]},P.prototype.diff_bisectSplit_=function(Y,J,O,F,K){var j=Y.substring(0,O),S=J.substring(0,F),H=Y.substring(O),D=J.substring(F),W=this.diff_main(j,S,!1,K),U=this.diff_main(H,D,!1,K);return W.concat(U)},P.prototype.diff_linesToChars_=function(Y,J){var O=[],F={};O[0]="";function K(D){var W="",U=0,B=-1,R=O.length;while(B<D.length-1){if(B=D.indexOf(`
`,U),B==-1)B=D.length-1;var C=D.substring(U,B+1);if(F.hasOwnProperty?F.hasOwnProperty(C):F[C]!==void 0)W+=String.fromCharCode(F[C]);else{if(R==j)C=D.substring(U),B=D.length;W+=String.fromCharCode(R),F[C]=R,O[R++]=C}U=B+1}return W}var j=40000,S=K(Y);j=65535;var H=K(J);return{chars1:S,chars2:H,lineArray:O}},P.prototype.diff_charsToLines_=function(Y,J){for(var O=0;O<Y.length;O++){var F=Y[O][1],K=[];for(var j=0;j<F.length;j++)K[j]=J[F.charCodeAt(j)];Y[O][1]=K.join("")}},P.prototype.diff_commonPrefix=function(Y,J){if(!Y||!J||Y.charAt(0)!=J.charAt(0))return 0;var O=0,F=Math.min(Y.length,J.length),K=F,j=0;while(O<K){if(Y.substring(j,K)==J.substring(j,K))O=K,j=O;else F=K;K=Math.floor((F-O)/2+O)}return K},P.prototype.diff_commonSuffix=function(Y,J){if(!Y||!J||Y.charAt(Y.length-1)!=J.charAt(J.length-1))return 0;var O=0,F=Math.min(Y.length,J.length),K=F,j=0;while(O<K){if(Y.substring(Y.length-K,Y.length-j)==J.substring(J.length-K,J.length-j))O=K,j=O;else F=K;K=Math.floor((F-O)/2+O)}return K},P.prototype.diff_commonOverlap_=function(Y,J){var O=Y.length,F=J.length;if(O==0||F==0)return 0;if(O>F)Y=Y.substring(O-F);else if(O<F)J=J.substring(0,O);var K=Math.min(O,F);if(Y==J)return K;var j=0,S=1;while(!0){var H=Y.substring(K-S),D=J.indexOf(H);if(D==-1)return j;if(S+=D,D==0||Y.substring(K-S)==J.substring(0,S))j=S,S++}},P.prototype.diff_halfMatch_=function(Y,J){if(this.Diff_Timeout<=0)return null;var O=Y.length>J.length?Y:J,F=Y.length>J.length?J:Y;if(O.length<4||F.length*2<O.length)return null;var K=this;function j(L,u,a){var m=L.substring(a,a+Math.floor(L.length/4)),t=-1,z0="",J0,D0,j0,Y0;while((t=u.indexOf(m,t+1))!=-1){var P0=K.diff_commonPrefix(L.substring(a),u.substring(t)),y0=K.diff_commonSuffix(L.substring(0,a),u.substring(0,t));if(z0.length<y0+P0)z0=u.substring(t-y0,t)+u.substring(t,t+P0),J0=L.substring(0,a-y0),D0=L.substring(a+P0),j0=u.substring(0,t-y0),Y0=u.substring(t+P0)}if(z0.length*2>=L.length)return[J0,D0,j0,Y0,z0];else return null}var S=j(O,F,Math.ceil(O.length/4)),H=j(O,F,Math.ceil(O.length/2)),D;if(!S&&!H)return null;else if(!H)D=S;else if(!S)D=H;else D=S[4].length>H[4].length?S:H;var W,U,B,R;if(Y.length>J.length)W=D[0],U=D[1],B=D[2],R=D[3];else B=D[0],R=D[1],W=D[2],U=D[3];var C=D[4];return[W,U,B,R,C]},P.prototype.diff_cleanupSemantic=function(Y){var J=!1,O=[],F=0,K=null,j=0,S=0,H=0,D=0,W=0;while(j<Y.length){if(Y[j][0]==M)O[F++]=j,S=D,H=W,D=0,W=0,K=Y[j][1];else{if(Y[j][0]==I)D+=Y[j][1].length;else W+=Y[j][1].length;if(K&&K.length<=Math.max(S,H)&&K.length<=Math.max(D,W))Y.splice(O[F-1],0,new P.Diff(N,K)),Y[O[F-1]+1][0]=I,F--,F--,j=F>0?O[F-1]:-1,S=0,H=0,D=0,W=0,K=null,J=!0}j++}if(J)this.diff_cleanupMerge(Y);this.diff_cleanupSemanticLossless(Y),j=1;while(j<Y.length){if(Y[j-1][0]==N&&Y[j][0]==I){var U=Y[j-1][1],B=Y[j][1],R=this.diff_commonOverlap_(U,B),C=this.diff_commonOverlap_(B,U);if(R>=C){if(R>=U.length/2||R>=B.length/2)Y.splice(j,0,new P.Diff(M,B.substring(0,R))),Y[j-1][1]=U.substring(0,U.length-R),Y[j+1][1]=B.substring(R),j++}else if(C>=U.length/2||C>=B.length/2)Y.splice(j,0,new P.Diff(M,U.substring(0,C))),Y[j-1][0]=I,Y[j-1][1]=B.substring(0,B.length-C),Y[j+1][0]=N,Y[j+1][1]=U.substring(C),j++;j++}j++}},P.prototype.diff_cleanupSemanticLossless=function(Y){function J(C,L){if(!C||!L)return 6;var u=C.charAt(C.length-1),a=L.charAt(0),m=u.match(P.nonAlphaNumericRegex_),t=a.match(P.nonAlphaNumericRegex_),z0=m&&u.match(P.whitespaceRegex_),J0=t&&a.match(P.whitespaceRegex_),D0=z0&&u.match(P.linebreakRegex_),j0=J0&&a.match(P.linebreakRegex_),Y0=D0&&C.match(P.blanklineEndRegex_),P0=j0&&L.match(P.blanklineStartRegex_);if(Y0||P0)return 5;else if(D0||j0)return 4;else if(m&&!z0&&J0)return 3;else if(z0||J0)return 2;else if(m||t)return 1;return 0}var O=1;while(O<Y.length-1){if(Y[O-1][0]==M&&Y[O+1][0]==M){var F=Y[O-1][1],K=Y[O][1],j=Y[O+1][1],S=this.diff_commonSuffix(F,K);if(S){var H=K.substring(K.length-S);F=F.substring(0,F.length-S),K=H+K.substring(0,K.length-S),j=H+j}var D=F,W=K,U=j,B=J(F,K)+J(K,j);while(K.charAt(0)===j.charAt(0)){F+=K.charAt(0),K=K.substring(1)+j.charAt(0),j=j.substring(1);var R=J(F,K)+J(K,j);if(R>=B)B=R,D=F,W=K,U=j}if(Y[O-1][1]!=D){if(D)Y[O-1][1]=D;else Y.splice(O-1,1),O--;if(Y[O][1]=W,U)Y[O+1][1]=U;else Y.splice(O+1,1),O--}}O++}},P.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,P.whitespaceRegex_=/\s/,P.linebreakRegex_=/[\r\n]/,P.blanklineEndRegex_=/\n\r?\n$/,P.blanklineStartRegex_=/^\r?\n\r?\n/,P.prototype.diff_cleanupEfficiency=function(Y){var J=!1,O=[],F=0,K=null,j=0,S=!1,H=!1,D=!1,W=!1;while(j<Y.length){if(Y[j][0]==M){if(Y[j][1].length<this.Diff_EditCost&&(D||W))O[F++]=j,S=D,H=W,K=Y[j][1];else F=0,K=null;D=W=!1}else{if(Y[j][0]==N)W=!0;else D=!0;if(K&&(S&&H&&D&&W||K.length<this.Diff_EditCost/2&&S+H+D+W==3)){if(Y.splice(O[F-1],0,new P.Diff(N,K)),Y[O[F-1]+1][0]=I,F--,K=null,S&&H)D=W=!0,F=0;else F--,j=F>0?O[F-1]:-1,D=W=!1;J=!0}}j++}if(J)this.diff_cleanupMerge(Y)},P.prototype.diff_cleanupMerge=function(Y){Y.push(new P.Diff(M,""));var J=0,O=0,F=0,K="",j="",S;while(J<Y.length)switch(Y[J][0]){case I:F++,j+=Y[J][1],J++;break;case N:O++,K+=Y[J][1],J++;break;case M:if(O+F>1){if(O!==0&&F!==0){if(S=this.diff_commonPrefix(j,K),S!==0){if(J-O-F>0&&Y[J-O-F-1][0]==M)Y[J-O-F-1][1]+=j.substring(0,S);else Y.splice(0,0,new P.Diff(M,j.substring(0,S))),J++;j=j.substring(S),K=K.substring(S)}if(S=this.diff_commonSuffix(j,K),S!==0)Y[J][1]=j.substring(j.length-S)+Y[J][1],j=j.substring(0,j.length-S),K=K.substring(0,K.length-S)}if(J-=O+F,Y.splice(J,O+F),K.length)Y.splice(J,0,new P.Diff(N,K)),J++;if(j.length)Y.splice(J,0,new P.Diff(I,j)),J++;J++}else if(J!==0&&Y[J-1][0]==M)Y[J-1][1]+=Y[J][1],Y.splice(J,1);else J++;F=0,O=0,K="",j="";break}if(Y[Y.length-1][1]==="")Y.pop();var H=!1;J=1;while(J<Y.length-1){if(Y[J-1][0]==M&&Y[J+1][0]==M){if(Y[J][1].substring(Y[J][1].length-Y[J-1][1].length)==Y[J-1][1])Y[J][1]=Y[J-1][1]+Y[J][1].substring(0,Y[J][1].length-Y[J-1][1].length),Y[J+1][1]=Y[J-1][1]+Y[J+1][1],Y.splice(J-1,1),H=!0;else if(Y[J][1].substring(0,Y[J+1][1].length)==Y[J+1][1])Y[J-1][1]+=Y[J+1][1],Y[J][1]=Y[J][1].substring(Y[J+1][1].length)+Y[J+1][1],Y.splice(J+1,1),H=!0}J++}if(H)this.diff_cleanupMerge(Y)},P.prototype.diff_xIndex=function(Y,J){var O=0,F=0,K=0,j=0,S;for(S=0;S<Y.length;S++){if(Y[S][0]!==I)O+=Y[S][1].length;if(Y[S][0]!==N)F+=Y[S][1].length;if(O>J)break;K=O,j=F}if(Y.length!=S&&Y[S][0]===N)return j;return j+(J-K)},P.prototype.diff_prettyHtml=function(Y){var J=[],O=/&/g,F=/</g,K=/>/g,j=/\n/g;for(var S=0;S<Y.length;S++){var H=Y[S][0],D=Y[S][1],W=D.replace(O,"&amp;").replace(F,"&lt;").replace(K,"&gt;").replace(j,"&para;<br>");switch(H){case I:J[S]='<ins style="background:#e6ffe6;">'+W+"</ins>";break;case N:J[S]='<del style="background:#ffe6e6;">'+W+"</del>";break;case M:J[S]="<span>"+W+"</span>";break}}return J.join("")},P.prototype.diff_text1=function(Y){var J=[];for(var O=0;O<Y.length;O++)if(Y[O][0]!==I)J[O]=Y[O][1];return J.join("")},P.prototype.diff_text2=function(Y){var J=[];for(var O=0;O<Y.length;O++)if(Y[O][0]!==N)J[O]=Y[O][1];return J.join("")},P.prototype.diff_levenshtein=function(Y){var J=0,O=0,F=0;for(var K=0;K<Y.length;K++){var j=Y[K][0],S=Y[K][1];switch(j){case I:O+=S.length;break;case N:F+=S.length;break;case M:J+=Math.max(O,F),O=0,F=0;break}}return J+=Math.max(O,F),J},P.prototype.diff_toDelta=function(Y){var J=[];for(var O=0;O<Y.length;O++)switch(Y[O][0]){case I:J[O]="+"+encodeURI(Y[O][1]);break;case N:J[O]="-"+Y[O][1].length;break;case M:J[O]="="+Y[O][1].length;break}return J.join("\t").replace(/%20/g," ")},P.prototype.diff_fromDelta=function(Y,J){var O=[],F=0,K=0,j=J.split(/\t/g);for(var S=0;S<j.length;S++){var H=j[S].substring(1);switch(j[S].charAt(0)){case"+":try{O[F++]=new P.Diff(I,decodeURI(H))}catch(U){throw Error("Illegal escape in diff_fromDelta: "+H)}break;case"-":case"=":var D=parseInt(H,10);if(isNaN(D)||D<0)throw Error("Invalid number in diff_fromDelta: "+H);var W=Y.substring(K,K+=D);if(j[S].charAt(0)=="=")O[F++]=new P.Diff(M,W);else O[F++]=new P.Diff(N,W);break;default:if(j[S])throw Error("Invalid diff operation in diff_fromDelta: "+j[S])}}if(K!=Y.length)throw Error("Delta length ("+K+") does not equal source text length ("+Y.length+").");return O},P.prototype.match_main=function(Y,J,O){if(Y==null||J==null||O==null)throw Error("Null input. (match_main)");if(O=Math.max(0,Math.min(O,Y.length)),Y==J)return 0;else if(!Y.length)return-1;else if(Y.substring(O,O+J.length)==J)return O;else return this.match_bitap_(Y,J,O)},P.prototype.match_bitap_=function(Y,J,O){if(J.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var F=this.match_alphabet_(J),K=this;function j(J0,D0){var j0=J0/J.length,Y0=Math.abs(O-D0);if(!K.Match_Distance)return Y0?1:j0;return j0+Y0/K.Match_Distance}var S=this.Match_Threshold,H=Y.indexOf(J,O);if(H!=-1){if(S=Math.min(j(0,H),S),H=Y.lastIndexOf(J,O+J.length),H!=-1)S=Math.min(j(0,H),S)}var D=1<<J.length-1;H=-1;var W,U,B=J.length+Y.length,R;for(var C=0;C<J.length;C++){W=0,U=B;while(W<U){if(j(C,O+U)<=S)W=U;else B=U;U=Math.floor((B-W)/2+W)}B=U;var L=Math.max(1,O-U+1),u=Math.min(O+U,Y.length)+J.length,a=Array(u+2);a[u+1]=(1<<C)-1;for(var m=u;m>=L;m--){var t=F[Y.charAt(m-1)];if(C===0)a[m]=(a[m+1]<<1|1)&t;else a[m]=(a[m+1]<<1|1)&t|((R[m+1]|R[m])<<1|1)|R[m+1];if(a[m]&D){var z0=j(C,m-1);if(z0<=S)if(S=z0,H=m-1,H>O)L=Math.max(1,2*O-H);else break}}if(j(C+1,O)>S)break;R=a}return H},P.prototype.match_alphabet_=function(Y){var J={};for(var O=0;O<Y.length;O++)J[Y.charAt(O)]=0;for(var O=0;O<Y.length;O++)J[Y.charAt(O)]|=1<<Y.length-O-1;return J},P.prototype.patch_addContext_=function(Y,J){if(J.length==0)return;if(Y.start2===null)throw Error("patch not initialized");var O=J.substring(Y.start2,Y.start2+Y.length1),F=0;while(J.indexOf(O)!=J.lastIndexOf(O)&&O.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)F+=this.Patch_Margin,O=J.substring(Y.start2-F,Y.start2+Y.length1+F);F+=this.Patch_Margin;var K=J.substring(Y.start2-F,Y.start2);if(K)Y.diffs.unshift(new P.Diff(M,K));var j=J.substring(Y.start2+Y.length1,Y.start2+Y.length1+F);if(j)Y.diffs.push(new P.Diff(M,j));Y.start1-=K.length,Y.start2-=K.length,Y.length1+=K.length+j.length,Y.length2+=K.length+j.length},P.prototype.patch_make=function(Y,J,O){var F,K;if(typeof Y=="string"&&typeof J=="string"&&typeof O>"u"){if(F=Y,K=this.diff_main(F,J,!0),K.length>2)this.diff_cleanupSemantic(K),this.diff_cleanupEfficiency(K)}else if(Y&&typeof Y=="object"&&typeof J>"u"&&typeof O>"u")K=Y,F=this.diff_text1(K);else if(typeof Y=="string"&&J&&typeof J=="object"&&typeof O>"u")F=Y,K=J;else if(typeof Y=="string"&&typeof J=="string"&&O&&typeof O=="object")F=Y,K=O;else throw Error("Unknown call format to patch_make.");if(K.length===0)return[];var j=[],S=new P.patch_obj,H=0,D=0,W=0,U=F,B=F;for(var R=0;R<K.length;R++){var C=K[R][0],L=K[R][1];if(!H&&C!==M)S.start1=D,S.start2=W;switch(C){case I:S.diffs[H++]=K[R],S.length2+=L.length,B=B.substring(0,W)+L+B.substring(W);break;case N:S.length1+=L.length,S.diffs[H++]=K[R],B=B.substring(0,W)+B.substring(W+L.length);break;case M:if(L.length<=2*this.Patch_Margin&&H&&K.length!=R+1)S.diffs[H++]=K[R],S.length1+=L.length,S.length2+=L.length;else if(L.length>=2*this.Patch_Margin){if(H)this.patch_addContext_(S,U),j.push(S),S=new P.patch_obj,H=0,U=B,D=W}break}if(C!==I)D+=L.length;if(C!==N)W+=L.length}if(H)this.patch_addContext_(S,U),j.push(S);return j},P.prototype.patch_deepCopy=function(Y){var J=[];for(var O=0;O<Y.length;O++){var F=Y[O],K=new P.patch_obj;K.diffs=[];for(var j=0;j<F.diffs.length;j++)K.diffs[j]=new P.Diff(F.diffs[j][0],F.diffs[j][1]);K.start1=F.start1,K.start2=F.start2,K.length1=F.length1,K.length2=F.length2,J[O]=K}return J},P.prototype.patch_apply=function(Y,J){if(Y.length==0)return[J,[]];Y=this.patch_deepCopy(Y);var O=this.patch_addPadding(Y);J=O+J+O,this.patch_splitMax(Y);var F=0,K=[];for(var j=0;j<Y.length;j++){var S=Y[j].start2+F,H=this.diff_text1(Y[j].diffs),D,W=-1;if(H.length>this.Match_MaxBits){if(D=this.match_main(J,H.substring(0,this.Match_MaxBits),S),D!=-1){if(W=this.match_main(J,H.substring(H.length-this.Match_MaxBits),S+H.length-this.Match_MaxBits),W==-1||D>=W)D=-1}}else D=this.match_main(J,H,S);if(D==-1)K[j]=!1,F-=Y[j].length2-Y[j].length1;else{K[j]=!0,F=D-S;var U;if(W==-1)U=J.substring(D,D+H.length);else U=J.substring(D,W+this.Match_MaxBits);if(H==U)J=J.substring(0,D)+this.diff_text2(Y[j].diffs)+J.substring(D+H.length);else{var B=this.diff_main(H,U,!1);if(H.length>this.Match_MaxBits&&this.diff_levenshtein(B)/H.length>this.Patch_DeleteThreshold)K[j]=!1;else{this.diff_cleanupSemanticLossless(B);var R=0,C;for(var L=0;L<Y[j].diffs.length;L++){var u=Y[j].diffs[L];if(u[0]!==M)C=this.diff_xIndex(B,R);if(u[0]===I)J=J.substring(0,D+C)+u[1]+J.substring(D+C);else if(u[0]===N)J=J.substring(0,D+C)+J.substring(D+this.diff_xIndex(B,R+u[1].length));if(u[0]!==N)R+=u[1].length}}}}}return J=J.substring(O.length,J.length-O.length),[J,K]},P.prototype.patch_addPadding=function(Y){var J=this.Patch_Margin,O="";for(var F=1;F<=J;F++)O+=String.fromCharCode(F);for(var F=0;F<Y.length;F++)Y[F].start1+=J,Y[F].start2+=J;var K=Y[0],j=K.diffs;if(j.length==0||j[0][0]!=M)j.unshift(new P.Diff(M,O)),K.start1-=J,K.start2-=J,K.length1+=J,K.length2+=J;else if(J>j[0][1].length){var S=J-j[0][1].length;j[0][1]=O.substring(j[0][1].length)+j[0][1],K.start1-=S,K.start2-=S,K.length1+=S,K.length2+=S}if(K=Y[Y.length-1],j=K.diffs,j.length==0||j[j.length-1][0]!=M)j.push(new P.Diff(M,O)),K.length1+=J,K.length2+=J;else if(J>j[j.length-1][1].length){var S=J-j[j.length-1][1].length;j[j.length-1][1]+=O.substring(0,S),K.length1+=S,K.length2+=S}return O},P.prototype.patch_splitMax=function(Y){var J=this.Match_MaxBits;for(var O=0;O<Y.length;O++){if(Y[O].length1<=J)continue;var F=Y[O];Y.splice(O--,1);var{start1:K,start2:j}=F,S="";while(F.diffs.length!==0){var H=new P.patch_obj,D=!0;if(H.start1=K-S.length,H.start2=j-S.length,S!=="")H.length1=H.length2=S.length,H.diffs.push(new P.Diff(M,S));while(F.diffs.length!==0&&H.length1<J-this.Patch_Margin){var W=F.diffs[0][0],U=F.diffs[0][1];if(W===I)H.length2+=U.length,j+=U.length,H.diffs.push(F.diffs.shift()),D=!1;else if(W===N&&H.diffs.length==1&&H.diffs[0][0]==M&&U.length>2*J)H.length1+=U.length,K+=U.length,D=!1,H.diffs.push(new P.Diff(W,U)),F.diffs.shift();else{if(U=U.substring(0,J-H.length1-this.Patch_Margin),H.length1+=U.length,K+=U.length,W===M)H.length2+=U.length,j+=U.length;else D=!1;if(H.diffs.push(new P.Diff(W,U)),U==F.diffs[0][1])F.diffs.shift();else F.diffs[0][1]=F.diffs[0][1].substring(U.length)}}S=this.diff_text2(H.diffs),S=S.substring(S.length-this.Patch_Margin);var B=this.diff_text1(F.diffs).substring(0,this.Patch_Margin);if(B!=="")if(H.length1+=B.length,H.length2+=B.length,H.diffs.length!==0&&H.diffs[H.diffs.length-1][0]===M)H.diffs[H.diffs.length-1][1]+=B;else H.diffs.push(new P.Diff(M,B));if(!D)Y.splice(++O,0,H)}}},P.prototype.patch_toText=function(Y){var J=[];for(var O=0;O<Y.length;O++)J[O]=Y[O];return J.join("")},P.prototype.patch_fromText=function(Y){var J=[];if(!Y)return J;var O=Y.split(`
`),F=0,K=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(F<O.length){var j=O[F].match(K);if(!j)throw Error("Invalid patch string: "+O[F]);var S=new P.patch_obj;if(J.push(S),S.start1=parseInt(j[1],10),j[2]==="")S.start1--,S.length1=1;else if(j[2]=="0")S.length1=0;else S.start1--,S.length1=parseInt(j[2],10);if(S.start2=parseInt(j[3],10),j[4]==="")S.start2--,S.length2=1;else if(j[4]=="0")S.length2=0;else S.start2--,S.length2=parseInt(j[4],10);F++;while(F<O.length){var H=O[F].charAt(0);try{var D=decodeURI(O[F].substring(1))}catch(W){throw Error("Illegal escape in patch_fromText: "+D)}if(H=="-")S.diffs.push(new P.Diff(N,D));else if(H=="+")S.diffs.push(new P.Diff(I,D));else if(H==" ")S.diffs.push(new P.Diff(M,D));else if(H=="@")break;else if(H==="");else throw Error('Invalid patch mode "'+H+'" in: '+D);F++}}return J},P.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},P.patch_obj.prototype.toString=function(){var Y,J;if(this.length1===0)Y=this.start1+",0";else if(this.length1==1)Y=this.start1+1;else Y=this.start1+1+","+this.length1;if(this.length2===0)J=this.start2+",0";else if(this.length2==1)J=this.start2+1;else J=this.start2+1+","+this.length2;var O=["@@ -"+Y+" +"+J+` @@
`],F;for(var K=0;K<this.diffs.length;K++){switch(this.diffs[K][0]){case I:F="+";break;case N:F="-";break;case M:F=" ";break}O[K+1]=F+encodeURI(this.diffs[K][1])+`
`}return O.join("").replace(/%20/g," ")},v.exports=P,v.exports.diff_match_patch=P,v.exports.DIFF_DELETE=N,v.exports.DIFF_INSERT=I,v.exports.DIFF_EQUAL=M},408:(v,P,N)=>{N.d(P,{default:()=>o0});var I=N(135),M=N(840),Y=N(775),J=N(428),O=N(325),F=N(483),K=N(999),j=function(_){if(_===void 0)_=document;var $0=function(E){var c=document.createElement("img");c.src=E.getAttribute("data-src"),c.addEventListener("load",function(){if(!E.getAttribute("style")&&!E.getAttribute("class")&&!E.getAttribute("width")&&!E.getAttribute("height")){if(c.naturalHeight>c.naturalWidth&&c.naturalWidth/c.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&c.naturalHeight>window.innerHeight-40)E.style.height=window.innerHeight-40+"px"}E.src=c.src}),E.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return _.querySelectorAll("img").forEach(function(E){if(E.getAttribute("data-src"))$0(E)}),!1;if(window.vditorImageIntersectionObserver)window.vditorImageIntersectionObserver.disconnect(),_.querySelectorAll("img").forEach(function(E){window.vditorImageIntersectionObserver.observe(E)});else window.vditorImageIntersectionObserver=new IntersectionObserver(function(E){E.forEach(function(c){if((typeof c.isIntersecting>"u"?c.intersectionRatio!==0:c.isIntersecting)&&c.target.getAttribute("data-src"))$0(c.target)})}),_.querySelectorAll("img").forEach(function(E){window.vditorImageIntersectionObserver.observe(E)})},S=N(472),H=N(280),D=N(637),W=N(825),U=N(11),B=N(194),R=N(436),C=N(229),L=N(145),u=N(538),a=N(413),m=N(106),t=N(673),z0=function(_){document.querySelectorAll(".vditor-anchor").forEach(function($0){if(_===1)$0.classList.add("vditor-anchor--left");$0.onclick=function(){var E=$0.getAttribute("href").substr(1),c=document.getElementById("vditorAnchor-"+E).offsetTop;document.querySelector("html").scrollTop=c}}),window.onhashchange=function(){var $0=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));if($0)document.querySelector("html").scrollTop=$0.offsetTop}},J0=N(214),D0=N(810),j0=function(_,$0){if($0===void 0)$0="zh_CN";if(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")return;var E=function(){var N0=speechSynthesis.getVoices(),n,F0;if(N0.forEach(function(T0){if(T0.lang===$0.replace("_","-"))n=T0;if(T0.default)F0=T0}),!n)n=F0;return n},c='<svg><use xlink:href="#vditor-icon-play"></use></svg>',V0='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';if(!document.getElementById("vditorIconScript"))c='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',V0='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>';var d=document.querySelector(".vditor-speech");if(!d){if(d=document.createElement("button"),d.className="vditor-speech",_.insertAdjacentElement("beforeend",d),speechSynthesis.onvoiceschanged!==void 0)speechSynthesis.onvoiceschanged=E}var W0=E(),Q0=new SpeechSynthesisUtterance;Q0.voice=W0,Q0.onend=Q0.onerror=function(){d.style.display="none",speechSynthesis.cancel(),d.classList.remove("vditor-speech--current"),d.innerHTML=c},_.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(N0){var n=N0.target;if(n.classList.contains("vditor-speech")||n.parentElement.classList.contains("vditor-speech")){if(!d.classList.contains("vditor-speech--current"))Q0.text=d.getAttribute("data-text"),speechSynthesis.speak(Q0),d.classList.add("vditor-speech--current"),d.innerHTML=V0;else if(speechSynthesis.speaking)if(speechSynthesis.paused)speechSynthesis.resume(),d.innerHTML=V0;else speechSynthesis.pause(),d.innerHTML=c;(0,D0.Hc)(window.vditorSpeechRange),_.focus();return}if(d.style.display="none",speechSynthesis.cancel(),d.classList.remove("vditor-speech--current"),d.innerHTML=c,getSelection().rangeCount===0)return;var F0=getSelection().getRangeAt(0),T0=F0.toString().trim();if(!T0)return;window.vditorSpeechRange=F0.cloneRange();var u0=F0.getBoundingClientRect();if(d.innerHTML=c,d.style.display="block",d.style.top=u0.top+u0.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0)d.style.left=N0.changedTouches[N0.changedTouches.length-1].pageX+2+"px";else d.style.left=N0.clientX+2+"px";d.setAttribute("data-text",T0)})},Y0=function(_,$0,E,c){function V0(d){return d instanceof E?d:new E(function(W0){W0(d)})}return new(E||(E=Promise))(function(d,W0){function Q0(F0){try{n(c.next(F0))}catch(T0){W0(T0)}}function N0(F0){try{n(c.throw(F0))}catch(T0){W0(T0)}}function n(F0){F0.done?d(F0.value):V0(F0.value).then(Q0,N0)}n((c=c.apply(_,$0||[])).next())})},P0=function(_,$0){var E={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,V0,d,W0;return W0={next:Q0(0),throw:Q0(1),return:Q0(2)},typeof Symbol==="function"&&(W0[Symbol.iterator]=function(){return this}),W0;function Q0(n){return function(F0){return N0([n,F0])}}function N0(n){if(c)throw TypeError("Generator is already executing.");while(W0&&(W0=0,n[0]&&(E=0)),E)try{if(c=1,V0&&(d=n[0]&2?V0.return:n[0]?V0.throw||((d=V0.return)&&d.call(V0),0):V0.next)&&!(d=d.call(V0,n[1])).done)return d;if(V0=0,d)n=[n[0]&2,d.value];switch(n[0]){case 0:case 1:d=n;break;case 4:return E.label++,{value:n[1],done:!1};case 5:E.label++,V0=n[1],n=[0];continue;case 7:n=E.ops.pop(),E.trys.pop();continue;default:if((d=E.trys,!(d=d.length>0&&d[d.length-1]))&&(n[0]===6||n[0]===2)){E=0;continue}if(n[0]===3&&(!d||n[1]>d[0]&&n[1]<d[3])){E.label=n[1];break}if(n[0]===6&&E.label<d[1]){E.label=d[1],d=n;break}if(d&&E.label<d[2]){E.label=d[2],E.ops.push(n);break}if(d[2])E.ops.pop();E.trys.pop();continue}n=$0.call(_,E)}catch(F0){n=[6,F0],V0=0}finally{c=d=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y0=function(_){var $0,E={anchor:0,cdn:L.g.CDN,customEmoji:{},emojiPath:"".concat(L.g.CDN,"/dist/images/emoji"),hljs:L.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:L.g.MARKDOWN_OPTIONS,math:L.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:L.g.THEME_OPTIONS};if(_.cdn){if(!(($0=_.theme)===null||$0===void 0?void 0:$0.path))E.theme.path="".concat(_.cdn,"/dist/css/content-theme");if(!_.emojiPath)E.emojiPath="".concat(_.cdn,"/dist/images/emoji")}return(0,t.T)(E,_)},B0=function(_,$0){var E=y0($0);return(0,a.G)("".concat(E.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){var c=(0,J0.X)({autoSpace:E.markdown.autoSpace,gfmAutoLink:E.markdown.gfmAutoLink,codeBlockPreview:E.markdown.codeBlockPreview,emojiSite:E.emojiPath,emojis:E.customEmoji,fixTermTypo:E.markdown.fixTermTypo,footnotes:E.markdown.footnotes,headingAnchor:E.anchor!==0,inlineMathDigit:E.math.inlineDigit,lazyLoadImage:E.lazyLoadImage,linkBase:E.markdown.linkBase,linkPrefix:E.markdown.linkPrefix,listStyle:E.markdown.listStyle,mark:E.markdown.mark,mathBlockPreview:E.markdown.mathBlockPreview,paragraphBeginningSpace:E.markdown.paragraphBeginningSpace,sanitize:E.markdown.sanitize,toc:E.markdown.toc});if($0===null||$0===void 0?void 0:$0.renderers)c.SetJSRenderers({renderers:{Md2HTML:$0.renderers}});return c.SetHeadingID(!0),c.Md2HTML(_)})},y=function(_,$0,E){return Y0(void 0,void 0,void 0,function(){var c,V0,d,W0;return P0(this,function(Q0){switch(Q0.label){case 0:return c=y0(E),[4,B0($0,c)];case 1:if(V0=Q0.sent(),c.transform)V0=c.transform(V0);if(_.innerHTML=V0,_.classList.add("vditor-reset"),c.i18n)return[3,5];if(["de_DE","en_US","es_ES","fr_FR","ja_JP","ko_KR","pt_BR","ru_RU","sv_SE","vi_VN","zh_CN","zh_TW"].includes(c.lang))return[3,2];throw Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return d="vditorI18nScript",W0=d+c.lang,document.querySelectorAll('head script[id^="'.concat(d,'"]')).forEach(function(N0){if(N0.id!==W0)document.head.removeChild(N0)}),[4,(0,a.G)("".concat(c.cdn,"/dist/js/i18n/").concat(c.lang,".js"),W0)];case 3:Q0.sent(),Q0.label=4;case 4:return[3,6];case 5:window.VditorI18n=c.i18n,Q0.label=6;case 6:if(!c.icon)return[3,8];return[4,(0,a.G)("".concat(c.cdn,"/dist/js/icons/").concat(c.icon,".js"),"vditorIconScript")];case 7:Q0.sent(),Q0.label=8;case 8:if((0,u.Z)(c.theme.current,c.theme.path),c.anchor===1)_.classList.add("vditor-reset--anchor");if((0,J.O)(_,c.hljs),(0,K.s)(c.hljs,_,c.cdn),(0,S.H)(_,{cdn:c.cdn,math:c.math}),(0,D.i)(_,c.cdn,c.mode),(0,W.J)(_,c.cdn,c.mode),(0,U.K)(_,c.cdn),(0,O.P)(_,c.cdn),(0,F.v)(_,c.cdn),(0,Y.p)(_,c.cdn,c.mode),(0,B.P)(_,c.cdn,c.mode),(0,C.B)(_,c.cdn),(0,I.Q)(_,c.cdn),c.render.media.enable)(0,H.Y)(_);if(c.speech.enable)j0(_);if(c.anchor!==0)z0(c.anchor);if(c.after)c.after();if(c.lazyLoadImage)j(_);return _.addEventListener("click",function(N0){var n=(0,m.lG)(N0.target,"SPAN");if(n&&(0,m.fb)(n,"vditor-toc")){var F0=_.querySelector("#"+n.getAttribute("data-target-id"));if(F0)window.scrollTo(window.scrollX,F0.offsetTop);return}}),[2]}})})},s0=N(190),O1=N(580),D1=function(){function _(){}return _.adapterRender=M,_.previewImage=s0.E,_.codeRender=J.O,_.graphvizRender=F.v,_.highlightRender=K.s,_.mathRender=S.H,_.mermaidRender=D.i,_.SMILESRender=W.J,_.markmapRender=U.K,_.flowchartRender=O.P,_.chartRender=Y.p,_.abcRender=I.Q,_.mindmapRender=B.P,_.plantumlRender=C.B,_.outlineRender=R.k,_.mediaRender=H.Y,_.speechRender=j0,_.lazyLoadImageRender=j,_.md2html=B0,_.preview=y,_.setCodeTheme=O1.Y,_.setContentTheme=u.Z,_}();let o0=D1},145:(v,P,N)=>{N.d(P,{H:()=>I,g:()=>M});var I="3.11.2",M=function(){function Y(){}return Y.ZWSP="​",Y.DROP_EDITOR="application/editor",Y.MOBILE_WIDTH=520,Y.CLASS_MENU_DISABLED="vditor-menu--disabled",Y.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],Y.CODE_THEME=["a11y-dark","agate","an-old-hope","androidstudio","arta","atom-one-dark","atom-one-dark-reasonable","base16/3024","base16/apathy","base16/apprentice","base16/ashes","base16/atelier-cave","base16/atelier-dune","base16/atelier-estuary","base16/atelier-forest","base16/atelier-heath","base16/atelier-lakeside","base16/atelier-plateau","base16/atelier-savanna","base16/atelier-seaside","base16/atelier-sulphurpool","base16/atlas","base16/bespin","base16/black-metal","base16/black-metal-bathory","base16/black-metal-burzum","base16/black-metal-dark-funeral","base16/black-metal-gorgoroth","base16/black-metal-immortal","base16/black-metal-khold","base16/black-metal-marduk","base16/black-metal-mayhem","base16/black-metal-nile","base16/black-metal-venom","base16/brewer","base16/bright","base16/brogrammer","base16/brush-trees-dark","base16/chalk","base16/circus","base16/classic-dark","base16/codeschool","base16/colors","base16/danqing","base16/darcula","base16/dark-violet","base16/darkmoss","base16/darktooth","base16/decaf","base16/default-dark","base16/dracula","base16/edge-dark","base16/eighties","base16/embers","base16/equilibrium-dark","base16/equilibrium-gray-dark","base16/espresso","base16/eva","base16/eva-dim","base16/flat","base16/framer","base16/gigavolt","base16/google-dark","base16/grayscale-dark","base16/green-screen","base16/gruvbox-dark-hard","base16/gruvbox-dark-medium","base16/gruvbox-dark-pale","base16/gruvbox-dark-soft","base16/hardcore","base16/harmonic16-dark","base16/heetch-dark","base16/helios","base16/hopscotch","base16/horizon-dark","base16/humanoid-dark","base16/ia-dark","base16/icy-dark","base16/ir-black","base16/isotope","base16/kimber","base16/london-tube","base16/macintosh","base16/marrakesh","base16/materia","base16/material","base16/material-darker","base16/material-palenight","base16/material-vivid","base16/mellow-purple","base16/mocha","base16/monokai","base16/nebula","base16/nord","base16/nova","base16/ocean","base16/oceanicnext","base16/onedark","base16/outrun-dark","base16/papercolor-dark","base16/paraiso","base16/pasque","base16/phd","base16/pico","base16/pop","base16/porple","base16/qualia","base16/railscasts","base16/rebecca","base16/ros-pine","base16/ros-pine-moon","base16/sandcastle","base16/seti-ui","base16/silk-dark","base16/snazzy","base16/solar-flare","base16/solarized-dark","base16/spacemacs","base16/summercamp","base16/summerfruit-dark","base16/synth-midnight-terminal-dark","base16/tango","base16/tender","base16/tomorrow-night","base16/twilight","base16/unikitty-dark","base16/vulcan","base16/windows-10","base16/windows-95","base16/windows-high-contrast","base16/windows-nt","base16/woodland","base16/xcode-dusk","base16/zenburn","codepen-embed","dark","devibeans","far","felipec","github-dark","github-dark-dimmed","gml","gradient-dark","hybrid","ir-black","isbl-editor-dark","kimbie-dark","lioshi","monokai","monokai-sublime","night-owl","nnfx-dark","nord","obsidian","panda-syntax-dark","paraiso-dark","pojoaque","qtcreator-dark","rainbow","shades-of-purple","srcery","stackoverflow-dark","sunburst","tomorrow-night-blue","tomorrow-night-bright","tokyo-night-dark","vs2015","xt256","ant-design","a11y-light","arduino-light","ascetic","atom-one-light","base16/atelier-cave-light","base16/atelier-dune-light","base16/atelier-estuary-light","base16/atelier-forest-light","base16/atelier-heath-light","base16/atelier-lakeside-light","base16/atelier-plateau-light","base16/atelier-savanna-light","base16/atelier-seaside-light","base16/atelier-sulphurpool-light","base16/brush-trees","base16/classic-light","base16/cupcake","base16/cupertino","base16/default-light","base16/dirtysea","base16/edge-light","base16/equilibrium-gray-light","base16/equilibrium-light","base16/fruit-soda","base16/github","base16/google-light","base16/grayscale-light","base16/gruvbox-light-hard","base16/gruvbox-light-medium","base16/gruvbox-light-soft","base16/harmonic16-light","base16/heetch-light","base16/humanoid-light","base16/horizon-light","base16/ia-light","base16/material-lighter","base16/mexico-light","base16/one-light","base16/papercolor-light","base16/ros-pine-dawn","base16/sagelight","base16/shapeshifter","base16/silk-light","base16/solar-flare-light","base16/solarized-light","base16/summerfruit-light","base16/synth-midnight-terminal-light","base16/tomorrow","base16/unikitty-light","base16/windows-10-light","base16/windows-95-light","base16/windows-high-contrast-light","brown-paper","base16/windows-nt-light","color-brewer","docco","foundation","github","googlecode","gradient-light","grayscale","idea","intellij-light","isbl-editor-light","kimbie-light","lightfair","magula","mono-blue","nnfx-light","panda-syntax-light","paraiso-light","purebasic","qtcreator-light","routeros","school-book","stackoverflow-light","tokyo-night-light","vs","xcode","default"],Y.ALIAS_CODE_LANGUAGES=["abc","plantuml","mermaid","flowchart","echarts","mindmap","graphviz","math","markmap","smiles","js","ts","html","toml","c#","bat"],Y.CDN="https://unpkg.com/vditor@".concat("3.11.2"),Y.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},Y.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},Y.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},Y.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:"".concat(Y.CDN,"/dist/css/content-theme")},Y}()},825:(v,P,N)=>{N.d(P,{J:()=>O});var I=N(145),M=N(413),Y=N(840),J=N(494),O=function(F,K,j){if(F===void 0)F=document;if(K===void 0)K=I.g.CDN;var S=Y.SMILESRenderAdapter.getElements(F);if(S.length>0)(0,M.G)("".concat(K,"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7"),"vditorAbcjsScript").then(function(){var H=new SmiDrawer({},{});S.forEach(function(D){var W=Y.SMILESRenderAdapter.getCode(D).trim();if(D.getAttribute("data-processed")==="true"||W.trim()==="")return;var U="smiles"+(0,J.Wb)();D.innerHTML='<svg id="'.concat(U,'"></svg>'),H.draw(W,"#"+U,j==="dark"?"dark":void 0),D.setAttribute("data-processed","true")})})}},135:(v,P,N)=>{N.d(P,{Q:()=>J});var I=N(145),M=N(413),Y=N(840),J=function(O,F){if(O===void 0)O=document;if(F===void 0)F=I.g.CDN;var K=Y.abcRenderAdapter.getElements(O);if(K.length>0)(0,M.G)("".concat(F,"/dist/js/abcjs/abcjs_basic.min.js"),"vditorAbcjsScript").then(function(){K.forEach(function(j){if(j.parentElement.classList.contains("vditor-wysiwyg__pre")||j.parentElement.classList.contains("vditor-ir__marker--pre"))return;if(j.getAttribute("data-processed")==="true")return;ABCJS.renderAbc(j,Y.abcRenderAdapter.getCode(j).trim()),j.style.overflowX="auto",j.setAttribute("data-processed","true")})})}},840:(v,P,N)=>{N.r(P),N.d(P,{mathRenderAdapter:()=>I,SMILESRenderAdapter:()=>M,mermaidRenderAdapter:()=>Y,markmapRenderAdapter:()=>J,mindmapRenderAdapter:()=>O,chartRenderAdapter:()=>F,abcRenderAdapter:()=>K,graphvizRenderAdapter:()=>j,flowchartRenderAdapter:()=>S,plantumlRenderAdapter:()=>H});var I={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-math")}},M={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-smiles")}},Y={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-mermaid")}},J={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-markmap")}},O={getCode:function(D){return D.getAttribute("data-code")},getElements:function(D){return D.querySelectorAll(".language-mindmap")}},F={getCode:function(D){return D.innerText},getElements:function(D){return D.querySelectorAll(".language-echarts")}},K={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-abc")}},j={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-graphviz")}},S={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-flowchart")}},H={getCode:function(D){return D.textContent},getElements:function(D){return D.querySelectorAll(".language-plantuml")}}},775:(v,P,N)=>{N.d(P,{p:()=>K});var I=N(145),M=N(413),Y=N(840),J=N(494),O=function(j,S,H,D){function W(U){return U instanceof H?U:new H(function(B){B(U)})}return new(H||(H=Promise))(function(U,B){function R(u){try{L(D.next(u))}catch(a){B(a)}}function C(u){try{L(D.throw(u))}catch(a){B(a)}}function L(u){u.done?U(u.value):W(u.value).then(R,C)}L((D=D.apply(j,S||[])).next())})},F=function(j,S){var H={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},D,W,U,B;return B={next:R(0),throw:R(1),return:R(2)},typeof Symbol==="function"&&(B[Symbol.iterator]=function(){return this}),B;function R(L){return function(u){return C([L,u])}}function C(L){if(D)throw TypeError("Generator is already executing.");while(B&&(B=0,L[0]&&(H=0)),H)try{if(D=1,W&&(U=L[0]&2?W.return:L[0]?W.throw||((U=W.return)&&U.call(W),0):W.next)&&!(U=U.call(W,L[1])).done)return U;if(W=0,U)L=[L[0]&2,U.value];switch(L[0]){case 0:case 1:U=L;break;case 4:return H.label++,{value:L[1],done:!1};case 5:H.label++,W=L[1],L=[0];continue;case 7:L=H.ops.pop(),H.trys.pop();continue;default:if((U=H.trys,!(U=U.length>0&&U[U.length-1]))&&(L[0]===6||L[0]===2)){H=0;continue}if(L[0]===3&&(!U||L[1]>U[0]&&L[1]<U[3])){H.label=L[1];break}if(L[0]===6&&H.label<U[1]){H.label=U[1],U=L;break}if(U&&H.label<U[2]){H.label=U[2],H.ops.push(L);break}if(U[2])H.ops.pop();H.trys.pop();continue}L=S.call(j,H)}catch(u){L=[6,u],W=0}finally{D=U=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},K=function(j,S,H){if(j===void 0)j=document;if(S===void 0)S=I.g.CDN;var D=Y.chartRenderAdapter.getElements(j);if(D.length>0)(0,M.G)("".concat(S,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){D.forEach(function(W){return O(void 0,void 0,void 0,function(){var U,B,R;return F(this,function(C){switch(C.label){case 0:if(W.parentElement.classList.contains("vditor-wysiwyg__pre")||W.parentElement.classList.contains("vditor-ir__marker--pre"))return[2];if(U=Y.chartRenderAdapter.getCode(W).trim(),!U)return[2];C.label=1;case 1:if(C.trys.push([1,3,,4]),W.getAttribute("data-processed")==="true")return[2];return[4,(0,J.Qf)(U)];case 2:return B=C.sent(),echarts.init(W,H==="dark"?"dark":void 0).setOption(B),W.setAttribute("data-processed","true"),[3,4];case 3:return R=C.sent(),W.className="vditor-reset--error",W.innerHTML="echarts render error: <br>".concat(R),[3,4];case 4:return[2]}})})})})}},428:(v,P,N)=>{N.d(P,{O:()=>Y});var I=N(105),M=N(145),Y=function(J,O){Array.from(J.querySelectorAll("pre > code")).filter(function(F,K){if(F.parentElement.classList.contains("vditor-wysiwyg__pre")||F.parentElement.classList.contains("vditor-ir__marker--pre"))return!1;if(F.classList.contains("language-mermaid")||F.classList.contains("language-flowchart")||F.classList.contains("language-echarts")||F.classList.contains("language-mindmap")||F.classList.contains("language-plantuml")||F.classList.contains("language-markmap")||F.classList.contains("language-abc")||F.classList.contains("language-graphviz")||F.classList.contains("language-math")||F.classList.contains("language-smiles"))return!1;if(F.style.maxHeight.indexOf("px")>-1)return!1;if(J.classList.contains("vditor-preview")&&K>5)return!1;return!0}).forEach(function(F){var K,j,S,H=F.innerText;if(F.classList.contains("highlight-chroma")){var D=F.cloneNode(!0);D.querySelectorAll(".highlight-ln").forEach(function(R){R.remove()}),H=D.innerText}else if(H.endsWith(`
`))H=H.substr(0,H.length-1);var W='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';if(!document.getElementById("vditorIconScript"))W='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>';var U=document.createElement("div");U.className="vditor-copy",U.innerHTML='<span aria-label="'.concat(((K=window.VditorI18n)===null||K===void 0?void 0:K.copy)||"复制",`"
onmouseover="this.setAttribute('aria-label', '`).concat(((j=window.VditorI18n)===null||j===void 0?void 0:j.copy)||"复制",`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="event.stopPropagation();this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`).concat(((S=window.VditorI18n)===null||S===void 0?void 0:S.copied)||"已复制",`');this.previousElementSibling.blur()">`).concat(W,"</span>");var B=document.createElement("textarea");if(B.value=(0,I.X)(H),U.insertAdjacentElement("afterbegin",B),O&&O.renderMenu)O.renderMenu(F,U);F.before(U),F.style.maxHeight=window.outerHeight-40+"px",F.insertAdjacentHTML("afterend",'<span style="position: absolute">'.concat(M.g.ZWSP,"</span>"))})}},325:(v,P,N)=>{N.d(P,{P:()=>J});var I=N(145),M=N(413),Y=N(840),J=function(O,F){if(F===void 0)F=I.g.CDN;var K=Y.flowchartRenderAdapter.getElements(O);if(K.length===0)return;(0,M.G)("".concat(F,"/dist/js/flowchart.js/flowchart.min.js"),"vditorFlowchartScript").then(function(){K.forEach(function(j){if(j.getAttribute("data-processed")==="true")return;var S=flowchart.parse(Y.flowchartRenderAdapter.getCode(j));j.innerHTML="",S.drawSVG(j),j.setAttribute("data-processed","true")})})}},483:(v,P,N)=>{N.d(P,{v:()=>J});var I=N(145),M=N(413),Y=N(840),J=function(O,F){if(F===void 0)F=I.g.CDN;var K=Y.graphvizRenderAdapter.getElements(O);if(K.length===0)return;(0,M.G)("".concat(F,"/dist/js/graphviz/viz.js"),"vditorGraphVizScript").then(function(){K.forEach(function(j){var S=Y.graphvizRenderAdapter.getCode(j);if(j.parentElement.classList.contains("vditor-wysiwyg__pre")||j.parentElement.classList.contains("vditor-ir__marker--pre"))return;if(j.getAttribute("data-processed")==="true"||S.trim()==="")return;try{var H=new Blob(["importScripts('".concat(document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js"),"');")],{type:"application/javascript"}),D=window.URL||window.webkitURL,W=D.createObjectURL(H),U=new Worker(W);new Viz({worker:U}).renderSVGElement(S).then(function(B){j.innerHTML=B.outerHTML}).catch(function(B){j.innerHTML="graphviz render error: <br>".concat(B),j.className="vditor-reset--error"})}catch(B){console.error("graphviz error",B)}j.setAttribute("data-processed","true")})})}},999:(v,P,N)=>{N.d(P,{s:()=>J});var I=N(145),M=N(413),Y=N(290),J=function(O,F,K){if(F===void 0)F=document;if(K===void 0)K=I.g.CDN;var j=O.style;if(!I.g.CODE_THEME.includes(j))j="github";var S=document.getElementById("vditorHljsStyle"),H="".concat(K,"/dist/js/highlight.js/styles/").concat(j,".min.css");if(S&&S.getAttribute("href")!==H)S.remove();if((0,Y.c)("".concat(K,"/dist/js/highlight.js/styles/").concat(j,".min.css"),"vditorHljsStyle"),O.enable===!1)return;var D=F.querySelectorAll("pre > code");if(D.length===0)return;(0,M.G)("".concat(K,"/dist/js/highlight.js/highlight.min.js?v=11.7.0"),"vditorHljsScript").then(function(){(0,M.G)("".concat(K,"/dist/js/highlight.js/third-languages.js?v=1.0.1"),"vditorHljsThirdScript").then(function(){F.querySelectorAll("pre > code").forEach(function(W){if(W.parentElement.classList.contains("vditor-ir__marker--pre")||W.parentElement.classList.contains("vditor-wysiwyg__pre"))return;if(W.classList.contains("language-mermaid")||W.classList.contains("language-flowchart")||W.classList.contains("language-echarts")||W.classList.contains("language-mindmap")||W.classList.contains("language-plantuml")||W.classList.contains("language-smiles")||W.classList.contains("language-abc")||W.classList.contains("language-graphviz")||W.classList.contains("language-math"))return;if(O.defaultLang!==""&&W.className.indexOf("language-")===-1)W.classList.add("language-"+O.defaultLang);var U=W.className.replace("language-","");if(!window.hljs.getLanguage(U))U="plaintext";if(W.innerHTML=window.hljs.highlight(W.textContent,{language:U,ignoreIllegals:!0}).value,W.classList.add("hljs"),!O.lineNumber)return;W.classList.add("vditor-linenumber");var B=W.querySelector(".vditor-linenumber__temp");if(!B)B=document.createElement("div"),B.className="vditor-linenumber__temp",W.insertAdjacentElement("beforeend",B);var R=getComputedStyle(W).whiteSpace,C=!1;if(R==="pre-wrap"||R==="pre-line")C=!0;var L="",u=W.textContent.split(/\r\n|\r|\n/g);u.pop(),u.map(function(a){var m="";if(C)B.textContent=a||`
`,m=' style="height:'.concat(B.getBoundingClientRect().height,'px"');L+="<span".concat(m,"></span>")}),B.style.display="none",L='<span class="vditor-linenumber__rows">'.concat(L,"</span>"),W.insertAdjacentHTML("beforeend",L)})})})}},11:(v,P,N)=>{N.d(P,{K:()=>K});var I=N(145),M=N(413),Y=N(840),J={},O=function(j,S){var H=j.transform(S),D=Object.keys(H.features).filter(function(C){return!J[C]});D.forEach(function(C){J[C]=!0});var W=j.getAssets(D),U=W.styles,B=W.scripts,R=window.markmap;if(U)R.loadCSS(U);if(B)R.loadJS(B);return H},F=function(j,S){var H=window.markmap,D=H.Transformer,W=H.Markmap,U=H.deriveOptions,B=H.globalCSS,R=new D;j.innerHTML='<svg style="width:100%"></svg>';var C=j.firstChild,L=W.create(C,null),u=O(R,S),a=u.root,m=u.frontmatter,t=m===null||m===void 0?void 0:m.markmap,z0=U(t);L.setData(a,z0),L.fit()},K=function(j,S){if(j===void 0)j=document;if(S===void 0)S=I.g.CDN;var H=Y.markmapRenderAdapter.getElements(j);if(H.length===0)return;(0,M.G)("".concat(S,"/dist/js/markmap/markmap.min.js"),"vditorMarkerScript").then(function(){H.forEach(function(D){var W=Y.markmapRenderAdapter.getCode(D);if(D.getAttribute("data-processed")==="true"||W.trim()==="")return;var U=document.createElement("div");if(U.className="language-markmap",D.parentNode.appendChild(U),F(U,W),D.parentNode.childNodes[0].nodeName=="CODE")D.parentNode.removeChild(D.parentNode.childNodes[0])})})}},472:(v,P,N)=>{N.d(P,{H:()=>F});var I=N(145),M=N(413),Y=N(290),J=N(105),O=N(840),F=function(K,j){if(K===void 0)K=document;var S=O.mathRenderAdapter.getElements(K);if(S.length===0)return;var H={cdn:I.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(j&&j.math)j.math=Object.assign({},H.math,j.math);if(j=Object.assign({},H,j),j.math.engine==="KaTeX")(0,Y.c)("".concat(j.cdn,"/dist/js/katex/katex.min.css?v=0.16.9"),"vditorKatexStyle"),(0,M.G)("".concat(j.cdn,"/dist/js/katex/katex.min.js?v=0.16.9"),"vditorKatexScript").then(function(){(0,M.G)("".concat(j.cdn,"/dist/js/katex/mhchem.min.js?v=0.16.9"),"vditorKatexChemScript").then(function(){S.forEach(function(U){if(U.parentElement.classList.contains("vditor-wysiwyg__pre")||U.parentElement.classList.contains("vditor-ir__marker--pre"))return;if(U.getAttribute("data-math"))return;var B=(0,J.X)(O.mathRenderAdapter.getCode(U));U.setAttribute("data-math",B);try{U.innerHTML=katex.renderToString(B,{displayMode:U.tagName==="DIV",output:"html",macros:j.math.macros})}catch(R){U.innerHTML=R.message,U.className="language-math vditor-reset--error"}U.addEventListener("copy",function(R){R.stopPropagation(),R.preventDefault();var C=R.currentTarget.closest(".language-math");R.clipboardData.setData("text/html",C.innerHTML),R.clipboardData.setData("text/plain",C.getAttribute("data-math"))})})})});else if(j.math.engine==="MathJax"){var D=function(U){if(U.length===0)return;var B=0,R=U[U.length-1],C=function(){var L=U[B++];L===R?L():L(C)};C()};if(!window.MathJax)window.MathJax={loader:{paths:{mathjax:"".concat(j.cdn,"/dist/js/mathjax")}},startup:{typeset:!1},tex:{macros:j.math.macros}},Object.assign(window.MathJax,j.math.mathJaxOptions);(0,M.J)("".concat(j.cdn,"/dist/js/mathjax/tex-svg-full.js"),"protyleMathJaxScript");var W=function(U,B){var R=(0,J.X)(U.textContent).trim(),C=window.MathJax.getMetricsFor(U);C.display=U.tagName==="DIV",window.MathJax.tex2svgPromise(R,C).then(function(L){U.innerHTML="",U.setAttribute("data-math",R),U.append(L),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var u=L.querySelector('[data-mml-node="merror"]');if(u&&u.textContent.trim()!=="")U.innerHTML=u.textContent.trim(),U.className="vditor-reset--error";if(B)B()})};window.MathJax.startup.promise.then(function(){var U=[],B=function(C){var L=S[C];if(!L.parentElement.classList.contains("vditor-wysiwyg__pre")&&!L.parentElement.classList.contains("vditor-ir__marker--pre")&&!L.getAttribute("data-math")&&(0,J.X)(L.textContent).trim())U.push(function(u){if(C===S.length-1)W(L);else W(L,u)})};for(var R=0;R<S.length;R++)B(R);D(U)})}}},280:(v,P,N)=>{N.d(P,{Y:()=>O});var I=N(494),M=function(F,K){F.insertAdjacentHTML("afterend",'<video controls="controls" src="'.concat(K,'"></video>')),F.remove()},Y=function(F,K){F.insertAdjacentHTML("afterend",'<audio controls="controls" src="'.concat(K,'"></audio>')),F.remove()},J=function(F,K){var j=K.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),S=K.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),H=K.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),D=K.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),W=K.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),U=K.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),B=K.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),R=K.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(j&&j[1].length===11)F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'.concat(j[1]+(j[2]?"?start="+j[2]:""),'"></iframe>')),F.remove();else if(S&&S[1])F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'.concat(S[1],'"></iframe>')),F.remove();else if(H&&H[1])F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='.concat(H[1],'"></iframe>')),F.remove();else if(D&&D[1])F.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`.concat(D[1],'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>')),F.remove();else if(W&&W[0])F.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`.concat(encodeURIComponent(W[0]),'"></iframe>')),F.remove();else if(U&&U[2])F.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`.concat(U[2],'"></iframe>')),F.remove();else if(K.indexOf("bilibili.com")>-1&&(K.indexOf("bvid=")>-1||B&&B[1])){var C={bvid:(0,I.on)("bvid",K)||B&&B[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(K.startsWith("http")?K:"https:"+K).search.split("&").forEach(function(a,m){if(!a)return;if(m===0)a=a.substr(1);var t=a.split("=");C[t[0]]=t[1]});var L="https://player.bilibili.com/player.html?",u=Object.keys(C);u.forEach(function(a,m){if(L+="".concat(a,"=").concat(C[a]),m<u.length-1)L+="&"}),F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'.concat(L,'"></iframe>')),F.remove()}else if(R&&R[1])F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'.concat(R[1],'"></iframe>')),F.remove()},O=function(F){if(!F)return;F.querySelectorAll("a").forEach(function(K){var j=K.getAttribute("href");if(!j)return;if(j.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/))M(K,j);else if(j.match(/^.+.(mp3|wav|flac)$/))Y(K,j);else J(K,j)})}},637:(v,P,N)=>{N.d(P,{i:()=>K});var I=N(145),M=N(413),Y=N(840),J=N(494),O=function(j,S,H,D){function W(U){return U instanceof H?U:new H(function(B){B(U)})}return new(H||(H=Promise))(function(U,B){function R(u){try{L(D.next(u))}catch(a){B(a)}}function C(u){try{L(D.throw(u))}catch(a){B(a)}}function L(u){u.done?U(u.value):W(u.value).then(R,C)}L((D=D.apply(j,S||[])).next())})},F=function(j,S){var H={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},D,W,U,B;return B={next:R(0),throw:R(1),return:R(2)},typeof Symbol==="function"&&(B[Symbol.iterator]=function(){return this}),B;function R(L){return function(u){return C([L,u])}}function C(L){if(D)throw TypeError("Generator is already executing.");while(B&&(B=0,L[0]&&(H=0)),H)try{if(D=1,W&&(U=L[0]&2?W.return:L[0]?W.throw||((U=W.return)&&U.call(W),0):W.next)&&!(U=U.call(W,L[1])).done)return U;if(W=0,U)L=[L[0]&2,U.value];switch(L[0]){case 0:case 1:U=L;break;case 4:return H.label++,{value:L[1],done:!1};case 5:H.label++,W=L[1],L=[0];continue;case 7:L=H.ops.pop(),H.trys.pop();continue;default:if((U=H.trys,!(U=U.length>0&&U[U.length-1]))&&(L[0]===6||L[0]===2)){H=0;continue}if(L[0]===3&&(!U||L[1]>U[0]&&L[1]<U[3])){H.label=L[1];break}if(L[0]===6&&H.label<U[1]){H.label=U[1],U=L;break}if(U&&H.label<U[2]){H.label=U[2],H.ops.push(L);break}if(U[2])H.ops.pop();H.trys.pop();continue}L=S.call(j,H)}catch(u){L=[6,u],W=0}finally{D=U=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},K=function(j,S,H){if(j===void 0)j=document;if(S===void 0)S=I.g.CDN;var D=Y.mermaidRenderAdapter.getElements(j);if(D.length===0)return;(0,M.G)("".concat(S,"/dist/js/mermaid/mermaid.min.js?v=11.6.0"),"vditorMermaidScript").then(function(){var W={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};if(H==="dark")W.theme="dark";mermaid.initialize(W),D.forEach(function(U){return O(void 0,void 0,void 0,function(){var B,R,C,L,u;return F(this,function(a){switch(a.label){case 0:if(B=Y.mermaidRenderAdapter.getCode(U),U.getAttribute("data-processed")==="true"||B.trim()==="")return[2];R="mermaid"+(0,J.Wb)(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,mermaid.render(R,U.textContent)];case 2:return C=a.sent(),U.innerHTML=C.svg,[3,4];case 3:return L=a.sent(),u=document.querySelector("#"+R),U.innerHTML="".concat(u.outerHTML,`<br>
<div style="text-align: left"><small>`).concat(L.message.replace(/\n/,"<br>"),"</small></div>"),u.parentElement.remove(),[3,4];case 4:return U.setAttribute("data-processed","true"),[2]}})})})})}},194:(v,P,N)=>{N.d(P,{P:()=>J});var I=N(145),M=N(413),Y=N(840),J=function(O,F,K){if(O===void 0)O=document;if(F===void 0)F=I.g.CDN;var j=Y.mindmapRenderAdapter.getElements(O);if(j.length>0)(0,M.G)("".concat(F,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){j.forEach(function(S){if(S.parentElement.classList.contains("vditor-wysiwyg__pre")||S.parentElement.classList.contains("vditor-ir__marker--pre"))return;var H=Y.mindmapRenderAdapter.getCode(S);if(!H)return;try{if(S.getAttribute("data-processed")==="true")return;echarts.init(S,K==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(H))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:0.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(D,W){var U;if((U=W===null||W===void 0?void 0:W.data)===null||U===void 0?void 0:U.children)return"circle";else return"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),S.setAttribute("data-processed","true")}catch(D){S.className="vditor-reset--error",S.innerHTML="mindmap render error: <br>".concat(D)}})})}},436:(v,P,N)=>{N.d(P,{k:()=>Y});var I=N(771),M=N(472),Y=function(J,O,F){var K="",j=[];if(Array.from(J.children).forEach(function(W,U){if((0,I.W)(W)){if(F){var B=W.id.lastIndexOf("_");W.id=W.id.substring(0,B===-1?void 0:B)+"_"+U}j.push(W.id),K+=W.outerHTML.replace("<wbr>","")}}),K==="")return O.innerHTML="","";var S=document.createElement("div");if(F){if(F.lute.SetToC(!0),F.currentMode==="wysiwyg"&&!F.preview.element.contains(J))S.innerHTML=F.lute.SpinVditorDOM("<p>[ToC]</p>"+K);else if(F.currentMode==="ir"&&!F.preview.element.contains(J))S.innerHTML=F.lute.SpinVditorIRDOM("<p>[ToC]</p>"+K);else S.innerHTML=F.lute.HTML2VditorDOM("<p>[ToC]</p>"+K);F.lute.SetToC(F.options.preview.markdown.toc)}else{O.classList.add("vditor-outline");var H=Lute.New();H.SetToC(!0),S.innerHTML=H.HTML2VditorDOM("<p>[ToC]</p>"+K)}var D=S.firstElementChild.querySelectorAll("li > span[data-target-id]");if(D.forEach(function(W,U){if(W.nextElementSibling&&W.nextElementSibling.tagName==="UL"){var B="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";if(!document.getElementById("vditorIconScript"))B='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>';W.innerHTML="".concat(B,"<span>").concat(W.innerHTML,"</span>")}else W.innerHTML="<svg></svg><span>".concat(W.innerHTML,"</span>");W.setAttribute("data-target-id",j[U])}),K=S.firstElementChild.innerHTML,D.length===0)return O.innerHTML="",K;if(O.innerHTML=K,F)(0,M.H)(O,{cdn:F.options.cdn,math:F.options.preview.math});return O.firstElementChild.addEventListener("click",function(W){var U=W.target;while(U&&!U.isEqualNode(O)){if(U.classList.contains("vditor-outline__action")){if(U.classList.contains("vditor-outline__action--close"))U.classList.remove("vditor-outline__action--close"),U.parentElement.nextElementSibling.setAttribute("style","display:block");else U.classList.add("vditor-outline__action--close"),U.parentElement.nextElementSibling.setAttribute("style","display:none");W.preventDefault(),W.stopPropagation();break}else if(U.getAttribute("data-target-id")){W.preventDefault(),W.stopPropagation();var B=document.getElementById(U.getAttribute("data-target-id"));if(!B)return;if(F)if(F.options.height==="auto"){var R=B.offsetTop+F.element.offsetTop;if(!F.options.toolbarConfig.pin)R+=F.toolbar.element.offsetHeight;window.scrollTo(window.scrollX,R)}else{if(F.element.offsetTop<window.scrollY)window.scrollTo(window.scrollX,F.element.offsetTop);if(F.preview.element.contains(J))J.parentElement.scrollTop=B.offsetTop;else J.scrollTop=B.offsetTop}else window.scrollTo(window.scrollX,B.offsetTop);break}U=U.parentElement}}),K}},229:(v,P,N)=>{N.d(P,{B:()=>J});var I=N(145),M=N(413),Y=N(840),J=function(O,F){if(O===void 0)O=document;if(F===void 0)F=I.g.CDN;var K=Y.plantumlRenderAdapter.getElements(O);if(K.length===0)return;(0,M.G)("".concat(F,"/dist/js/plantuml/plantuml-encoder.min.js"),"vditorPlantumlScript").then(function(){K.forEach(function(j){if(j.parentElement.classList.contains("vditor-wysiwyg__pre")||j.parentElement.classList.contains("vditor-ir__marker--pre"))return;var S=Y.plantumlRenderAdapter.getCode(j).trim();if(!S)return;try{j.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'.concat(plantumlEncoder.encode(S),'"/>')}catch(H){j.className="vditor-reset--error",j.innerHTML="plantuml render error: <br>".concat(H)}})})}},214:(v,P,N)=>{N.d(P,{X:()=>I});var I=function(M){var Y=Lute.New();if(Y.PutEmojis(M.emojis),Y.SetEmojiSite(M.emojiSite),Y.SetHeadingAnchor(M.headingAnchor),Y.SetInlineMathAllowDigitAfterOpenMarker(M.inlineMathDigit),Y.SetAutoSpace(M.autoSpace),Y.SetToC(M.toc),Y.SetFootnotes(M.footnotes),Y.SetFixTermTypo(M.fixTermTypo),Y.SetVditorCodeBlockPreview(M.codeBlockPreview),Y.SetVditorMathBlockPreview(M.mathBlockPreview),Y.SetSanitize(M.sanitize),Y.SetChineseParagraphBeginningSpace(M.paragraphBeginningSpace),Y.SetRenderListStyle(M.listStyle),Y.SetLinkBase(M.linkBase),Y.SetLinkPrefix(M.linkPrefix),Y.SetMark(M.mark),Y.SetGFMAutoLink(M.gfmAutoLink),M.lazyLoadImage)Y.SetImageLazyLoading(M.lazyLoadImage);return Y}},190:(v,P,N)=>{N.d(P,{E:()=>I});var I=function(M,Y,J){if(Y===void 0)Y="zh_CN";if(J===void 0)J="classic";var O=M.getBoundingClientRect(),F=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'.concat(J==="dark"?" vditor--dark":"",`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `).concat(window.VditorI18n.spin,`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`).concat(window.VditorI18n.close,`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `).concat(M.width,"px;height:").concat(M.height,"px;transform: translate3d(").concat(O.left,"px, ").concat(O.top-F,'px, 0)" src="').concat(M.getAttribute("src"),`">
    </div>
</div>`)),document.body.style.overflow="hidden";var K=document.querySelector(".vditor-img img"),j="translate3d(".concat(Math.max(0,window.innerWidth-M.naturalWidth)/2,"px, ").concat(Math.max(0,window.innerHeight-F-M.naturalHeight)/2,"px, 0)");setTimeout(function(){K.setAttribute("style","transition: transform .3s ease-in-out;transform: ".concat(j)),setTimeout(function(){K.parentElement.scrollTo((K.parentElement.scrollWidth-K.parentElement.clientWidth)/2,(K.parentElement.scrollHeight-K.parentElement.clientHeight)/2)},400)});var S=document.querySelector(".vditor-img__btn");S.addEventListener("click",function(){var H=parseInt(S.getAttribute("data-deg"),10)+90;if(H/90%2===1&&M.naturalWidth>K.parentElement.clientHeight)K.style.transform="translate3d(".concat(Math.max(0,window.innerWidth-M.naturalWidth)/2,"px, ").concat(M.naturalWidth/2-M.naturalHeight/2,"px, 0) rotateZ(").concat(H,"deg)");else K.style.transform="".concat(j," rotateZ(").concat(H,"deg)");S.setAttribute("data-deg",H.toString()),setTimeout(function(){K.parentElement.scrollTo((K.parentElement.scrollWidth-K.parentElement.clientWidth)/2,(K.parentElement.scrollHeight-K.parentElement.clientHeight)/2)},400)})}},580:(v,P,N)=>{N.d(P,{Y:()=>Y});var I=N(145),M=N(290),Y=function(J,O){if(O===void 0)O=I.g.CDN;if(!I.g.CODE_THEME.includes(J))J="github";var F=document.getElementById("vditorHljsStyle"),K="".concat(O,"/dist/js/highlight.js/styles/").concat(J,".min.css");if(!F)(0,M.c)(K,"vditorHljsStyle");else if(F.getAttribute("href")!==K)F.remove(),(0,M.c)(K,"vditorHljsStyle")}},538:(v,P,N)=>{N.d(P,{Z:()=>M});var I=N(290),M=function(Y,J){if(!Y||!J)return;var O=document.getElementById("vditorContentTheme"),F="".concat(J,"/").concat(Y,".css");if(!O)(0,I.c)(F,"vditorContentTheme");else if(O.getAttribute("href")!==F)O.remove(),(0,I.c)(F,"vditorContentTheme")}},413:(v,P,N)=>{N.d(P,{J:()=>I,G:()=>M});var I=function(Y,J){if(document.getElementById(J))return!1;var O=new XMLHttpRequest;O.open("GET",Y,!1),O.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),O.send("");var F=document.createElement("script");F.type="text/javascript",F.text=O.responseText,F.id=J,document.head.appendChild(F)},M=function(Y,J){return new Promise(function(O,F){if(document.getElementById(J))return O(!0),!1;var K=document.createElement("script");K.src=Y,K.async=!0,document.head.appendChild(K),K.onerror=function(j){F(j)},K.onload=function(){if(document.getElementById(J))return K.remove(),O(!0),!1;K.id=J,O(!0)}})}},290:(v,P,N)=>{N.d(P,{c:()=>I});var I=function(M,Y){if(!document.getElementById(Y)){var J=document.createElement("link");J.id=Y,J.rel="stylesheet",J.type="text/css",J.href=M,document.getElementsByTagName("head")[0].appendChild(J)}}},105:(v,P,N)=>{N.d(P,{X:()=>I});var I=function(M){return M.replace(/\u00a0/g," ")}},410:(v,P,N)=>{N.d(P,{G6:()=>I,vU:()=>M,pK:()=>Y,Le:()=>J,yl:()=>O,ns:()=>F,i7:()=>K});var I=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},M=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},Y=function(){try{return typeof localStorage<"u"}catch(j){return!1}},J=function(){if(navigator.userAgent.indexOf("iPhone")>-1)return"touchstart";else return"click"},O=function(j){if(navigator.platform.toUpperCase().indexOf("MAC")>=0){if(j.metaKey&&!j.ctrlKey)return!0;return!1}else{if(!j.metaKey&&j.ctrlKey)return!0;return!1}},F=function(j){if(/Mac/.test(navigator.platform)||navigator.platform==="iPhone"){if(j.indexOf("⇧")>-1&&M())j=j.replace(";",":").replace("=","+").replace("-","_")}else{if(j.startsWith("⌘"))j=j.replace("⌘","⌘+");else if(j.startsWith("⌥")&&j.substr(1,1)!=="⌘")j=j.replace("⌥","⌥+");else j=j.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+");if(j=j.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt"),j.indexOf("Shift")>-1)j=j.replace(";",":").replace("=","+").replace("-","_")}return j},K=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},494:(v,P,N)=>{N.d(P,{Wb:()=>I,on:()=>M,Qf:()=>Y});var I=function(){return([1e7].toString()+-1000+-4000+-8000+-100000000000).replace(/[018]/g,function(J){return(parseInt(J,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(J,10)/4).toString(16)})},M=function(J,O){if(O===void 0)O=window.location.search;var F=O.substring(O.indexOf("?")),K=F.indexOf("#"),j=new URLSearchParams(F.substring(0,K>=0?K:void 0));return j.get(J)},Y=function(J){return Function('"use strict";return ('.concat(J,")"))()}},106:(v,P,N)=>{N.d(P,{JQ:()=>M,E2:()=>J,O9:()=>O,a1:()=>F,F9:()=>K,lG:()=>j,fb:()=>S,DX:()=>H});var I=N(771),M=function(D,W){var U=S(D,W),B=!1,R=!1;while(U&&!U.classList.contains("vditor-reset")&&!R)if(B=S(U.parentElement,W),B)U=B;else R=!0;return U||!1},Y=function(D,W,U){var B=F(D,W,U),R=!1,C=!1;while(B&&!B.classList.contains("vditor-reset")&&!C)if(R=F(B.parentElement,W,U),R)B=R;else C=!0;return B||!1},J=function(D,W){var U=(0,I.S)(D,W),B=!1,R=!1;while(U&&!U.classList.contains("vditor-reset")&&!R)if(B=(0,I.S)(U.parentElement,W),B)U=B;else R=!0;return U||!1},O=function(D){var W=J(D,"UL"),U=J(D,"OL"),B=W;if(U&&(!W||W&&U.contains(W)))B=U;return B},F=function(D,W,U){if(!D)return!1;if(D.nodeType===3)D=D.parentElement;var B=D,R=!1;while(B&&!R&&!B.classList.contains("vditor-reset"))if(B.getAttribute(W)===U)R=!0;else B=B.parentElement;return R&&B},K=function(D){if(!D)return!1;if(D.nodeType===3)D=D.parentElement;var W=D,U=!1,B=F(D,"data-block","0");if(B)return B;while(W&&!U&&!W.classList.contains("vditor-reset"))if(W.tagName==="H1"||W.tagName==="H2"||W.tagName==="H3"||W.tagName==="H4"||W.tagName==="H5"||W.tagName==="H6"||W.tagName==="P"||W.tagName==="BLOCKQUOTE"||W.tagName==="OL"||W.tagName==="UL")U=!0;else W=W.parentElement;return U&&W},j=function(D,W){if(!D)return!1;if(D.nodeType===3)D=D.parentElement;var U=D,B=!1;while(U&&!B&&!U.classList.contains("vditor-reset"))if(U.nodeName===W)B=!0;else U=U.parentElement;return B&&U},S=function(D,W){if(!D)return!1;if(D.nodeType===3)D=D.parentElement;var U=D,B=!1;while(U&&!B&&!U.classList.contains("vditor-reset"))if(U.classList.contains(W))B=!0;else U=U.parentElement;return B&&U},H=function(D){while(D&&D.lastChild)D=D.lastChild;return D}},771:(v,P,N)=>{N.d(P,{S:()=>I,W:()=>M});var I=function(Y,J){if(!Y)return!1;if(Y.nodeType===3)Y=Y.parentElement;var O=Y,F=!1;while(O&&!F&&!O.classList.contains("vditor-reset"))if(O.nodeName.indexOf(J)===0)F=!0;else O=O.parentElement;return F&&O},M=function(Y){var J=I(Y,"H");if(J&&J.tagName.length===2&&J.tagName!=="HR")return J;return!1}},673:(v,P,N)=>{N.d(P,{T:()=>I});var I=function(){var M=[];for(var Y=0;Y<arguments.length;Y++)M[Y]=arguments[Y];var J={},O=function(K){for(var j in K)if(K.hasOwnProperty(j))if(Object.prototype.toString.call(K[j])==="[object Object]")J[j]=I(J[j],K[j]);else J[j]=K[j]};for(var F=0;F<M.length;F++)O(M[F]);return J}},810:(v,P,N)=>{N.d(P,{zh:()=>J,Ny:()=>O,Gb:()=>F,Hc:()=>K,im:()=>j,$j:()=>S,ib:()=>H,oC:()=>D});var I=N(145),M=N(410),Y=N(106),J=function(W){var U,B=W[W.currentMode].element;if(getSelection().rangeCount>0){if(U=getSelection().getRangeAt(0),B.isEqualNode(U.startContainer)||B.contains(U.startContainer))return U}if(W[W.currentMode].range)return W[W.currentMode].range;return B.focus(),U=B.ownerDocument.createRange(),U.setStart(B,0),U.collapse(!0),U},O=function(W){var U=window.getSelection().getRangeAt(0);if(!W.contains(U.startContainer)&&!(0,Y.fb)(U.startContainer,"vditor-panel--none"))return{left:0,top:0};var B=W.parentElement.getBoundingClientRect(),R;if(U.getClientRects().length===0)if(U.startContainer.nodeType===3){var C=U.startContainer.parentElement;if(C&&C.getClientRects().length>0)R=C.getClientRects()[0];else return{left:0,top:0}}else{var L=U.startContainer.children;if(L[U.startOffset]&&L[U.startOffset].getClientRects().length>0)R=L[U.startOffset].getClientRects()[0];else if(U.startContainer.childNodes.length>0){var u=U.cloneRange();U.selectNode(U.startContainer.childNodes[Math.max(0,U.startOffset-1)]),R=U.getClientRects()[0],U.setEnd(u.endContainer,u.endOffset),U.setStart(u.startContainer,u.startOffset)}else R=U.startContainer.getClientRects()[0];if(!R){var a=U.startContainer.childNodes[U.startOffset];while(!a.getClientRects||a.getClientRects&&a.getClientRects().length===0)a=a.parentElement;R=a.getClientRects()[0]}}else R=U.getClientRects()[0];return{left:R.left-B.left,top:R.top-B.top}},F=function(W,U){if(!U)if(getSelection().rangeCount===0)return!1;else U=getSelection().getRangeAt(0);var B=U.commonAncestorContainer;return W.isEqualNode(B)||W.contains(B)},K=function(W){var U=window.getSelection();U.removeAllRanges(),U.addRange(W)},j=function(W,U,B){var R={end:0,start:0};if(!B){if(getSelection().rangeCount===0)return R;B=window.getSelection().getRangeAt(0)}if(F(U,B)){var C=B.cloneRange();if(W.childNodes[0]&&W.childNodes[0].childNodes[0])C.setStart(W.childNodes[0].childNodes[0],0);else C.selectNodeContents(W);C.setEnd(B.startContainer,B.startOffset),R.start=C.toString().length,R.end=R.start+B.toString().length}return R},S=function(W,U,B){var R=0,C=0,L=B.childNodes[C],u=!1,a=!1;W=Math.max(0,W),U=Math.max(0,U);var m=B.ownerDocument.createRange();m.setStart(L||B,0),m.collapse(!0);while(!a&&L){var t=R+L.textContent.length;if(!u&&W>=R&&W<=t){if(W===0)m.setStart(L,0);else if(L.childNodes[0].nodeType===3)m.setStart(L.childNodes[0],W-R);else if(L.nextSibling)m.setStartBefore(L.nextSibling);else m.setStartAfter(L);if(u=!0,W===U){a=!0;break}}if(u&&U>=R&&U<=t){if(U===0)m.setEnd(L,0);else if(L.childNodes[0].nodeType===3)m.setEnd(L.childNodes[0],U-R);else if(L.nextSibling)m.setEndBefore(L.nextSibling);else m.setEndAfter(L);a=!0}R=t,L=B.childNodes[++C]}if(!a&&B.childNodes[C-1])m.setStartBefore(B.childNodes[C-1]);return K(m),m},H=function(W,U){var B=W.querySelector("wbr");if(!B)return;if(!B.previousElementSibling)if(B.previousSibling)U.setStart(B.previousSibling,B.previousSibling.textContent.length);else if(B.nextSibling)if(B.nextSibling.nodeType===3)U.setStart(B.nextSibling,0);else U.setStartBefore(B.nextSibling);else U.setStart(B.parentElement,0);else if(B.previousElementSibling.isSameNode(B.previousSibling))if(B.previousElementSibling.lastChild){if(U.setStartBefore(B),U.collapse(!0),K(U),(0,M.i7)()&&(B.previousElementSibling.tagName==="EM"||B.previousElementSibling.tagName==="STRONG"||B.previousElementSibling.tagName==="S"))U.insertNode(document.createTextNode(I.g.ZWSP)),U.collapse(!1);B.remove();return}else U.setStartAfter(B.previousElementSibling);else U.setStart(B.previousSibling,B.previousSibling.textContent.length);U.collapse(!0),B.remove(),K(U)},D=function(W,U){var B=document.createElement("div");B.innerHTML=W;var R=B.querySelectorAll("p");if(R.length===1&&!R[0].previousSibling&&!R[0].nextSibling&&U[U.currentMode].element.children.length>0&&B.firstElementChild.tagName==="P")W=R[0].innerHTML.trim();var C=document.createElement("div");C.innerHTML=W;var L=J(U);if(L.toString()!=="")U[U.currentMode].preventInput=!0,document.execCommand("delete",!1,"");if(C.firstElementChild&&C.firstElementChild.getAttribute("data-block")==="0"){C.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var u=(0,Y.F9)(L.startContainer);if(!u)U[U.currentMode].element.insertAdjacentHTML("beforeend",C.innerHTML);else{var a=(0,Y.lG)(L.startContainer,"LI");if(a&&C.firstElementChild.tagName==="UL")a.insertAdjacentHTML("afterend",C.firstElementChild.innerHTML);else u.insertAdjacentHTML("afterend",C.innerHTML)}H(U[U.currentMode].element,L)}else{var m=document.createElement("template");m.innerHTML=W,L.insertNode(m.content.cloneNode(!0)),L.collapse(!1),K(L)}}}},O0={};function i(v){var P=O0[v];if(P!==void 0)return P.exports;var N=O0[v]={exports:{}};return U0[v](N,N.exports,i),N.exports}(()=>{i.d=(v,P)=>{for(var N in P)if(i.o(P,N)&&!i.o(v,N))Object.defineProperty(v,N,{enumerable:!0,get:P[N]})}})(),(()=>{i.o=(v,P)=>Object.prototype.hasOwnProperty.call(v,P)})(),(()=>{i.r=(v)=>{if(typeof Symbol<"u"&&Symbol.toStringTag)Object.defineProperty(v,Symbol.toStringTag,{value:"Module"});Object.defineProperty(v,"__esModule",{value:!0})}})();var b0={};return(()=>{i.d(b0,{default:()=>T4});var v=i(408),P=i(145),N=i(105),I=function(z){if(z.currentMode==="sv")return(0,N.X)("".concat(z.sv.element.textContent,`
`).replace(/\n\n$/,`
`));else if(z.currentMode==="wysiwyg")return z.lute.VditorDOM2Md(z.wysiwyg.element.innerHTML);else if(z.currentMode==="ir")return z.lute.VditorIRDOM2Md(z.ir.element.innerHTML);return""},M=i(413),Y=function(){function z(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return z.prototype.renderEchart=function(w){var Z=this;if(w.devtools.element.style.display!=="block")return;(0,M.G)("".concat(w.options.cdn,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){if(!Z.ASTChart)Z.ASTChart=echarts.init(w.devtools.element.lastElementChild);try{Z.element.lastElementChild.style.display="block",Z.element.firstElementChild.innerHTML="",Z.ASTChart.setOption({series:[{data:JSON.parse(w.lute.RenderEChartsJSON(I(w))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),Z.ASTChart.resize()}catch(X){Z.element.lastElementChild.style.display="none",Z.element.firstElementChild.innerHTML=X}})},z}(),J=i(410),O=function(z,w){w.forEach(function(Z){if(!z[Z])return;var X=z[Z].children[0];if(X&&X.classList.contains("vditor-menu--current"))X.classList.remove("vditor-menu--current")})},F=function(z,w){w.forEach(function(Z){if(!z[Z])return;var X=z[Z].children[0];if(X&&!X.classList.contains("vditor-menu--current"))X.classList.add("vditor-menu--current")})},K=function(z,w){w.forEach(function(Z){if(!z[Z])return;var X=z[Z].children[0];if(X&&X.classList.contains(P.g.CLASS_MENU_DISABLED))X.classList.remove(P.g.CLASS_MENU_DISABLED)})},j=function(z,w){w.forEach(function(Z){if(!z[Z])return;var X=z[Z].children[0];if(X&&!X.classList.contains(P.g.CLASS_MENU_DISABLED))X.classList.add(P.g.CLASS_MENU_DISABLED)})},S=function(z,w){w.forEach(function(Z){if(!z[Z])return;if(z[Z])z[Z].style.display="none"})},H=function(z,w){w.forEach(function(Z){if(!z[Z])return;if(z[Z])z[Z].style.display="block"})},D=function(z,w,Z){if(w.includes("subToolbar")){if(z.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(X){if(Z&&X.isEqualNode(Z))return;X.style.display="none"}),z.toolbar.elements.emoji)z.toolbar.elements.emoji.lastElementChild.style.display="none"}if(w.includes("hint"))z.hint.element.style.display="none";if(z.wysiwyg.popover&&w.includes("popover"))z.wysiwyg.popover.style.display="none"},W=function(z,w,Z,X){Z.addEventListener((0,J.Le)(),function($){if($.preventDefault(),$.stopPropagation(),Z.classList.contains(P.g.CLASS_MENU_DISABLED))return;if(z.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(G){G.classList.remove("vditor-hint--current")}),w.style.display==="block")w.style.display="none";else{if(D(z,["subToolbar","hint","popover"],Z.parentElement.parentElement),!Z.classList.contains("vditor-tooltipped"))Z.classList.add("vditor-hint--current");if(w.style.display="block",z.toolbar.element.getBoundingClientRect().right-Z.getBoundingClientRect().right<250)w.classList.add("vditor-panel--left");else w.classList.remove("vditor-panel--left")}})},U=i(106),B=i(771),R=function(z,w,Z,X){if(X)console.log("".concat(z," - ").concat(Z,": ").concat(w))},C=i(135),L=i(775),u=i(428),a=i(325),m=i(483),t=i(999),z0=i(472),J0=i(637),D0=i(11),j0=i(194),Y0=i(229),P0=i(825),y0=function(z,w,Z){if(Z===void 0)Z="sv";var X=document.createElement("div");X.innerHTML=z;var $=!1;if(X.childElementCount===1&&X.lastElementChild.style.fontFamily.indexOf("monospace")>-1)$=!0;var G=X.querySelectorAll("pre");if(X.childElementCount===1&&G.length===1&&G[0].className!=="vditor-wysiwyg"&&G[0].className!=="vditor-sv")$=!0;if(z.indexOf(`
<p class="p1">`)===0)$=!0;if(X.childElementCount===1&&X.firstElementChild.tagName==="TABLE"&&X.querySelector(".line-number")&&X.querySelector(".line-content"))$=!0;if($){var Q=w||z;if(/\n/.test(Q)||G.length===1){if(Z==="wysiwyg")return'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'.concat(Q.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"<wbr></code></pre></div>");return"\n```\n"+Q.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```"}else{if(Z==="wysiwyg")return"<code>".concat(Q.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"</code><wbr>");return"`".concat(Q,"`")}}return!1},B0=function(z,w){if(!z)return;if(z.parentElement.getAttribute("data-type")==="html-block"){z.setAttribute("data-render","1");return}var Z=z.firstElementChild.className.replace("language-","");if(Z==="abc")(0,C.Q)(z,w.options.cdn);else if(Z==="mermaid")(0,J0.i)(z,w.options.cdn,w.options.theme);else if(Z==="smiles")(0,P0.J)(z,w.options.cdn,w.options.theme);else if(Z==="markmap")(0,D0.K)(z,w.options.cdn);else if(Z==="flowchart")(0,a.P)(z,w.options.cdn);else if(Z==="echarts")(0,L.p)(z,w.options.cdn,w.options.theme);else if(Z==="mindmap")(0,j0.P)(z,w.options.cdn,w.options.theme);else if(Z==="plantuml")(0,Y0.B)(z,w.options.cdn);else if(Z==="graphviz")(0,m.v)(z,w.options.cdn);else if(Z==="math")(0,z0.H)(z,{cdn:w.options.cdn,math:w.options.preview.math});else{var X=w.options.customRenders.find(function($){if($.language===Z)return $.render(z,w),!0});if(!X)(0,t.s)(Object.assign({},w.options.preview.hljs),z,w.options.cdn),(0,u.O)(z,w.options.preview.hljs)}z.setAttribute("data-render","1")},y=i(810),s0=function(z){if(z.currentMode==="sv")return;var w=z[z.currentMode].element,Z=z.outline.render(z);if(Z==="")Z="[ToC]";w.querySelectorAll('[data-type="toc-block"]').forEach(function(X){X.innerHTML=Z,(0,z0.H)(X,{cdn:z.options.cdn,math:z.options.preview.math})})},O1=function(z,w){var Z=(0,U.lG)(z.target,"SPAN");if(Z&&(0,U.fb)(Z,"vditor-toc")){var X=w[w.currentMode].element.querySelector("#"+Z.getAttribute("data-target-id"));if(X)if(w.options.height==="auto"){var $=X.offsetTop+w.element.offsetTop;if(!w.options.toolbarConfig.pin)$+=w.toolbar.element.offsetHeight;window.scrollTo(window.scrollX,$)}else{if(w.element.offsetTop<window.scrollY)window.scrollTo(window.scrollX,w.element.offsetTop);w[w.currentMode].element.scrollTop=X.offsetTop}return}},D1=function(z,w,Z,X){if(z.previousElementSibling&&z.previousElementSibling.classList.contains("vditor-toc")){if(Z.key==="Backspace"&&(0,y.im)(z,w[w.currentMode].element,X).start===0)return z.previousElementSibling.remove(),e(w),!0;if(w1(w,Z,X,z,z.previousElementSibling))return!0}if(z.nextElementSibling&&z.nextElementSibling.classList.contains("vditor-toc")){if(Z.key==="Delete"&&(0,y.im)(z,w[w.currentMode].element,X).start>=z.textContent.trimRight().length)return z.nextElementSibling.remove(),e(w),!0;if(A1(w,Z,X,z,z.nextElementSibling))return!0}if(Z.key==="Backspace"||Z.key==="Delete"){var $=(0,U.fb)(X.startContainer,"vditor-toc");if($)return $.remove(),e(w),!0}},o0=function(z,w,Z,X){if(Z===void 0)Z=!1;var $=(0,U.F9)(w.startContainer);if($&&!Z&&$.getAttribute("data-type")!=="code-block"){if(s1($.innerHTML)&&$.previousElementSibling||a1($.innerHTML))return;var G=(0,y.im)($,z.ir.element,w).start,Q=!0;for(var q=G-1;q>$.textContent.substr(0,G).lastIndexOf(`
`);q--)if($.textContent.charAt(q)!==" "&&$.textContent.charAt(q)!=="\t"){Q=!1;break}if(G===0)Q=!1;var V=!0;for(var q=G-1;q<$.textContent.length;q++)if($.textContent.charAt(q)!==" "&&$.textContent.charAt(q)!==`
`){V=!1;break}if(Q){if(typeof z.options.input==="function")z.options.input(I(z));return}if(V&&/^#{1,6} $/.test($.textContent))V=!1;if(V){var A=(0,U.fb)(w.startContainer,"vditor-ir__marker");if(A);else{var f=w.startContainer.previousSibling;if(f&&f.nodeType!==3&&f.classList.contains("vditor-ir__node--expand"))f.classList.remove("vditor-ir__node--expand");if(typeof z.options.input==="function")z.options.input(I(z));return}}}if(z.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(w0){w0.classList.remove("vditor-ir__node--expand")}),!$)$=z.ir.element;if(!$.querySelector("wbr")){var x=(0,U.fb)(w.startContainer,"vditor-ir__preview");if(x)x.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>");else w.insertNode(document.createElement("wbr"))}if($.querySelectorAll("[style]").forEach(function(w0){w0.removeAttribute("style")}),$.getAttribute("data-type")==="link-ref-defs-block")$=z.ir.element;var b=$.isEqualNode(z.ir.element),h=(0,U.a1)($,"data-type","footnotes-block"),T="";if(!b){var p=(0,B.S)(w.startContainer,"BLOCKQUOTE"),g=(0,U.O9)(w.startContainer);if(g)$=g;if(p&&(!g||g&&!p.contains(g)))$=p;if(h)$=h;if(T=$.outerHTML,$.tagName==="UL"||$.tagName==="OL"){var{previousElementSibling:k,nextElementSibling:r}=$;if(k&&(k.tagName==="UL"||k.tagName==="OL"))T=k.outerHTML+T,k.remove();if(r&&(r.tagName==="UL"||r.tagName==="OL"))T=T+r.outerHTML,r.remove();T=T.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else if($.previousElementSibling&&$.previousElementSibling.textContent.replace(P.g.ZWSP,"")!==""&&X&&X.inputType==="insertParagraph")T=$.previousElementSibling.outerHTML+T,$.previousElementSibling.remove();if(!$.innerText.startsWith("```"))z.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(w0){if(w0&&!$.isEqualNode(w0))T+=w0.outerHTML,w0.remove()}),z.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(w0){if(w0&&!$.isEqualNode(w0))T+=w0.outerHTML,w0.remove()})}else T=$.innerHTML;if(R("SpinVditorIRDOM",T,"argument",z.options.debugger),T=z.lute.SpinVditorIRDOM(T),R("SpinVditorIRDOM",T,"result",z.options.debugger),b)$.innerHTML=T;else if($.outerHTML=T,h){var s=(0,U.a1)(z.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(s){var o=s.textContent,G0=o.substring(1,o.indexOf("]:")),X0=z.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(G0,'"]'));if(X0)X0.setAttribute("aria-label",o.substr(G0.length+3).trim().substr(0,24))}}var q0,R0=z.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");if(R0.forEach(function(w0,I0){if(I0===0)q0=w0;else q0.insertAdjacentHTML("beforeend",w0.innerHTML),w0.remove()}),R0.length>0)z.ir.element.insertAdjacentElement("beforeend",R0[0]);var L0,M0=z.ir.element.querySelectorAll("[data-type='footnotes-block']");if(M0.forEach(function(w0,I0){if(I0===0)L0=w0;else L0.insertAdjacentHTML("beforeend",w0.innerHTML),w0.remove()}),M0.length>0)z.ir.element.insertAdjacentElement("beforeend",M0[0]);(0,y.ib)(z.ir.element,w),z.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(w0){B0(w0,z)}),s0(z),m0(z,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},_=function(z,w){if(z==="")return!1;if(z.indexOf("⇧")===-1&&z.indexOf("⌘")===-1&&z.indexOf("⌥")===-1){if(!(0,J.yl)(w)&&!w.altKey&&!w.shiftKey&&w.code===z)return!0;return!1}if(z==="⇧Tab"){if(!(0,J.yl)(w)&&!w.altKey&&w.shiftKey&&w.code==="Tab")return!0;return!1}var Z=z.split("");if(z.startsWith("⌥")){var X=Z.length===3?Z[2]:Z[1];if((Z.length===3?(0,J.yl)(w):!(0,J.yl)(w))&&w.altKey&&!w.shiftKey&&w.code===(/^[0-9]$/.test(X)?"Digit":"Key")+X)return!0;return!1}if(z==="⌘Enter")Z=["⌘","Enter"];var $=Z.length>2&&Z[0]==="⇧",G=$?Z[2]:Z[1];if($&&((0,J.vU)()||!/Mac/.test(navigator.platform))){if(G==="-")G="_";else if(G==="=")G="+"}if((0,J.yl)(w)&&w.key.toLowerCase()===G.toLowerCase()&&!w.altKey&&(!$&&!w.shiftKey||$&&w.shiftKey))return!0;return!1},$0=function(z){var w=z.startContainer;if(w.nodeType===3&&w.nodeValue.length!==z.startOffset)return!1;var Z=w.nextSibling;while(Z&&Z.textContent==="")Z=Z.nextSibling;if(!Z){var X=(0,U.fb)(w,"vditor-ir__marker");if(X&&!X.nextSibling){var $=w.parentElement.parentElement.nextSibling;if($&&$.nodeType!==3&&$.classList.contains("vditor-ir__node"))return $}return!1}else if(Z&&Z.nodeType!==3&&Z.classList.contains("vditor-ir__node")&&!Z.getAttribute("data-block"))return Z;return!1},E=function(z){var w=z.startContainer,Z=w.previousSibling;if(w.nodeType===3&&z.startOffset===0&&Z&&Z.nodeType!==3&&Z.classList.contains("vditor-ir__node")&&!Z.getAttribute("data-block"))return Z;return!1},c=function(z,w){w.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(Q){Q.classList.remove("vditor-ir__node--expand")});var Z=(0,U.JQ)(z.startContainer,"vditor-ir__node"),X=!z.collapsed&&(0,U.JQ)(z.endContainer,"vditor-ir__node");if(!z.collapsed&&(!Z||Z!==X))return;if(Z)Z.classList.add("vditor-ir__node--expand"),Z.classList.remove("vditor-ir__node--hidden"),(0,y.Hc)(z);var $=$0(z);if($){$.classList.add("vditor-ir__node--expand"),$.classList.remove("vditor-ir__node--hidden");return}var G=E(z);if(G){G.classList.add("vditor-ir__node--expand"),G.classList.remove("vditor-ir__node--hidden");return}},V0=function(z,w){if(z.ir.composingLock=w.isComposing,w.isComposing)return!1;if(w.key.indexOf("Arrow")===-1&&w.key!=="Meta"&&w.key!=="Control"&&w.key!=="Alt"&&w.key!=="Shift"&&w.key!=="CapsLock"&&w.key!=="Escape"&&!/^F\d{1,2}$/.test(w.key))z.undo.recordFirstPosition(z,w);var Z=(0,y.zh)(z),X=Z.startContainer;if(!A5(w,z,X))return!1;if(q5(Z,z,w),y5(Z),w.key!=="Enter"&&w.key!=="Tab"&&w.key!=="Backspace"&&w.key.indexOf("Arrow")===-1&&!(0,J.yl)(w)&&w.key!=="Escape"&&w.key!=="Delete")return!1;var $=(0,U.a1)(X,"data-newline","1");if(!(0,J.yl)(w)&&!w.altKey&&!w.shiftKey&&w.key==="Enter"&&$&&Z.startOffset<$.textContent.length){var G=$.previousElementSibling;if(G)Z.insertNode(document.createTextNode(G.textContent)),Z.collapse(!1);var Q=$.nextSibling;if(Q)Z.insertNode(document.createTextNode(Q.textContent)),Z.collapse(!0)}var q=(0,U.lG)(X,"P");if(O5(w,z,q,Z))return!0;if(K5(Z,z,q,w))return!0;if(H5(z,Z,w,q))return!0;var V=(0,U.fb)(X,"vditor-ir__marker--pre");if(V&&V.tagName==="PRE"){var A=V.firstChild;if(f5(z,w,V,Z))return!0;if((A.getAttribute("data-type")==="math-block"||A.getAttribute("data-type")==="html-block")&&w1(z,w,Z,A,V.parentElement))return!0;if(A1(z,w,Z,A,V.parentElement))return!0}var f=(0,U.a1)(X,"data-type","code-block-info");if(f){if(w.key==="Enter"||w.key==="Tab")return Z.selectNodeContents(f.nextElementSibling.firstChild),Z.collapse(!0),w.preventDefault(),D(z,["hint"]),!0;if(w.key==="Backspace"){var x=(0,y.im)(f,z.ir.element).start;if(x===1)Z.setStart(X,0);if(x===2)z.hint.recentLanguage=""}if(w1(z,w,Z,f,f.parentElement))return D(z,["hint"]),!0}var b=(0,U.lG)(X,"TD")||(0,U.lG)(X,"TH");if(w.key.indexOf("Arrow")>-1&&b){var h=K8(b);if(h&&w1(z,w,Z,b,h))return!0;var T=O8(b);if(T&&A1(z,w,Z,b,T))return!0}if(B5(z,w,Z))return!0;if(N5(z,Z,w))return!0;if(l1(z,Z,w))return!0;var p=(0,B.W)(X);if(p){if(_("⌘=",w)){var g=p.querySelector(".vditor-ir__marker--heading");if(g&&g.textContent.trim().length>1)q1(z,g.textContent.substr(1));return w.preventDefault(),!0}if(_("⌘-",w)){var g=p.querySelector(".vditor-ir__marker--heading");if(g&&g.textContent.trim().length<6)q1(z,g.textContent.trim()+"# ");return w.preventDefault(),!0}}var k=(0,U.F9)(X);if(w.key==="Backspace"&&!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey&&Z.toString()===""){if(L5(z,Z,w,q))return!0;if(k&&k.previousElementSibling&&k.tagName!=="UL"&&k.tagName!=="OL"&&(k.previousElementSibling.getAttribute("data-type")==="code-block"||k.previousElementSibling.getAttribute("data-type")==="math-block")){var r=(0,y.im)(k,z.ir.element,Z).start;if(r===0||r===1&&k.innerText.startsWith(P.g.ZWSP)){if(Z.selectNodeContents(k.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),Z.collapse(!1),c(Z,z),k.textContent.trim().replace(P.g.ZWSP,"")==="")k.remove(),m0(z);return w.preventDefault(),!0}}if(p){var s=p.firstElementChild.textContent.length;if((0,y.im)(p,z.ir.element).start===s&&s!==0)Z.setStart(p.firstElementChild.firstChild,s-1),Z.collapse(!0),(0,y.Hc)(Z)}}if((w.key==="ArrowUp"||w.key==="ArrowDown")&&k){if(k.querySelectorAll(".vditor-ir__node").forEach(function(o){if(!o.contains(X))o.classList.add("vditor-ir__node--hidden")}),x5(w,k,Z))return!0}if(j5(Z,w.key),k&&D1(k,z,w,Z))return w.preventDefault(),!0;return!1},d=i(190),W0=function(z,w){z.querySelectorAll("[data-type=footnotes-link]").forEach(function(Z){var X=Z.parentElement,$=X.nextSibling;while($)if($.textContent.startsWith("    ")){var G=$;G.childNodes.forEach(function(Q){X.append(Q.cloneNode(!0))}),$=$.nextSibling,G.remove()}else break;w&&w(X)})},Q0=function(z,w){var Z,X=getSelection().getRangeAt(0).cloneRange(),$=X.startContainer;if(X.startContainer.nodeType!==3&&X.startContainer.tagName==="DIV")$=X.startContainer.childNodes[X.startOffset-1];var G=(0,U.a1)($,"data-block","0");if(G&&w&&(w.inputType==="deleteContentBackward"||w.data===" ")){var Q=(0,y.im)(G,z.sv.element,X).start,q=!0;for(var V=Q-1;V>G.textContent.substr(0,Q).lastIndexOf(`
`);V--)if(G.textContent.charAt(V)!==" "&&G.textContent.charAt(V)!=="\t"){q=!1;break}if(Q===0)q=!1;if(q){f0(z);return}if(w.inputType==="deleteContentBackward"){var A=(0,U.a1)($,"data-type","code-block-open-marker")||(0,U.a1)($,"data-type","code-block-close-marker");if(A){if(A.getAttribute("data-type")==="code-block-close-marker"){var f=P1($,"code-block-open-marker");if(f){f.textContent=A.textContent,f0(z);return}}if(A.getAttribute("data-type")==="code-block-open-marker"){var f=P1($,"code-block-close-marker",!1);if(f){f.textContent=A.textContent,f0(z);return}}}var x=(0,U.a1)($,"data-type","math-block-open-marker");if(x){var b=x.nextElementSibling.nextElementSibling;if(b&&b.getAttribute("data-type")==="math-block-close-marker")b.remove(),f0(z);return}G.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(k){if(k.textContent.length===1)k.remove()}),G.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(k){if(k.textContent.length===1)k.remove()});var h=(0,U.a1)($,"data-type","heading-marker");if(h&&h.textContent.indexOf("#")===-1){f0(z);return}}if((w.data===" "||w.inputType==="deleteContentBackward")&&((0,U.a1)($,"data-type","padding")||(0,U.a1)($,"data-type","li-marker")||(0,U.a1)($,"data-type","task-marker")||(0,U.a1)($,"data-type","blockquote-marker"))){f0(z);return}}if(G&&G.textContent.trimRight()==="$$"){f0(z);return}if(!G)G=z.sv.element;if(((Z=G.firstElementChild)===null||Z===void 0?void 0:Z.getAttribute("data-type"))==="link-ref-defs-block")G=z.sv.element;if((0,U.a1)($,"data-type","footnotes-link"))G=z.sv.element;if(G.textContent.indexOf(Lute.Caret)===-1)X.insertNode(document.createTextNode(Lute.Caret));G.querySelectorAll("[style]").forEach(function(k){k.removeAttribute("style")}),G.querySelectorAll("font").forEach(function(k){k.outerHTML=k.innerHTML});var T=G.textContent,p=G.isEqualNode(z.sv.element);if(p)T=G.textContent;else{if(G.previousElementSibling)T=G.previousElementSibling.textContent+T,G.previousElementSibling.remove();if(G.previousElementSibling&&T.indexOf(`---
`)===0)T=G.previousElementSibling.textContent+T,G.previousElementSibling.remove();var g="";z.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(k,r){if(k&&!G.isEqualNode(k.parentElement))g+=k.parentElement.textContent+`
`,k.parentElement.remove()}),z.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(k,r){if(k&&!G.isEqualNode(k.parentElement))g+=k.parentElement.textContent+`
`,k.parentElement.remove()}),T=g+T}if(T=$5(T,z),p)G.innerHTML=T;else G.outerHTML=T;z.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(k){z.sv.element.insertAdjacentElement("beforeend",k.parentElement)}),W0(z.sv.element,function(k){z.sv.element.insertAdjacentElement("beforeend",k)}),(0,y.ib)(z.sv.element,X),S0(z),f0(z,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},N0=function(z,w){var Z,X,$,G,Q;if(z.sv.composingLock=w.isComposing,w.isComposing)return!1;if(w.key.indexOf("Arrow")===-1&&w.key!=="Meta"&&w.key!=="Control"&&w.key!=="Alt"&&w.key!=="Shift"&&w.key!=="CapsLock"&&w.key!=="Escape"&&!/^F\d{1,2}$/.test(w.key))z.undo.recordFirstPosition(z,w);if(w.key!=="Enter"&&w.key!=="Tab"&&w.key!=="Backspace"&&w.key.indexOf("Arrow")===-1&&!(0,J.yl)(w)&&w.key!=="Escape")return!1;var q=(0,y.zh)(z),V=q.startContainer;if(q.startContainer.nodeType!==3&&q.startContainer.tagName==="DIV")V=q.startContainer.childNodes[q.startOffset-1];var A=(0,U.a1)(V,"data-type","text"),f=(0,U.a1)(V,"data-type","blockquote-marker");if(!f&&q.startOffset===0&&A&&A.previousElementSibling&&A.previousElementSibling.getAttribute("data-type")==="blockquote-marker")f=A.previousElementSibling;if(f){if(w.key==="Enter"&&!(0,J.yl)(w)&&!w.altKey&&f.nextElementSibling.textContent.trim()===""&&(0,y.im)(f,z.sv.element,q).start===f.textContent.length){if(((Z=f.previousElementSibling)===null||Z===void 0?void 0:Z.getAttribute("data-type"))==="padding")f.previousElementSibling.setAttribute("data-action","enter-remove");return f.remove(),f0(z),w.preventDefault(),!0}}var x=(0,U.a1)(V,"data-type","li-marker"),b=(0,U.a1)(V,"data-type","task-marker"),h=x;if(!h){if(b&&b.nextElementSibling.getAttribute("data-type")!=="task-marker")h=b}if(!h&&q.startOffset===0&&A&&A.previousElementSibling&&(A.previousElementSibling.getAttribute("data-type")==="li-marker"||A.previousElementSibling.getAttribute("data-type")==="task-marker"))h=A.previousElementSibling;if(h){var T=(0,y.im)(h,z.sv.element,q).start,p=h.getAttribute("data-type")==="task-marker",g=h;if(p)g=h.previousElementSibling.previousElementSibling.previousElementSibling;if(T===h.textContent.length){if(w.key==="Enter"&&!(0,J.yl)(w)&&!w.altKey&&!w.shiftKey&&h.nextElementSibling.textContent.trim()===""){if(((X=g.previousElementSibling)===null||X===void 0?void 0:X.getAttribute("data-type"))==="padding")g.previousElementSibling.remove(),Q0(z);else{if(p)g.remove(),h.previousElementSibling.previousElementSibling.remove(),h.previousElementSibling.remove();h.nextElementSibling.remove(),h.remove(),f0(z)}return w.preventDefault(),!0}if(w.key==="Tab"){if(w.shiftKey){if(g.previousElementSibling.getAttribute("data-type")==="padding")g.previousElementSibling.remove()}else g.insertAdjacentHTML("beforebegin",'<span data-type="padding">'.concat(g.textContent.replace(/\S/g," "),"</span>"));if(/^\d/.test(g.textContent))g.textContent=g.textContent.replace(/^\d{1,}/,"1"),q.selectNodeContents(h.firstChild),q.collapse(!1);return Q0(z),w.preventDefault(),!0}}}if(l1(z,q,w))return!0;var k=(0,U.a1)(V,"data-block","0"),r=(0,B.S)(V,"SPAN");if(w.key==="Enter"&&!(0,J.yl)(w)&&!w.altKey&&!w.shiftKey&&k){var s=!1,o=k.textContent.match(/^\n+/);if((0,y.im)(k,z.sv.element).start<=(o?o[0].length:0))s=!0;var G0=`
`;if(r)if((($=r.previousElementSibling)===null||$===void 0?void 0:$.getAttribute("data-action"))==="enter-remove")return r.previousElementSibling.remove(),f0(z),w.preventDefault(),!0;else G0+=U8(r);if(q.insertNode(document.createTextNode(G0)),q.collapse(!1),k&&k.textContent.trim()!==""&&!s)Q0(z);else f0(z);return w.preventDefault(),!0}if(w.key==="Backspace"&&!(0,J.yl)(w)&&!w.altKey&&!w.shiftKey){if(r&&((G=r.previousElementSibling)===null||G===void 0?void 0:G.getAttribute("data-type"))==="newline"&&(0,y.im)(r,z.sv.element,q).start===1&&r.getAttribute("data-type").indexOf("code-block-")===-1){if(q.setStart(r,0),q.extractContents(),r.textContent.trim()!=="")Q0(z);else f0(z);return w.preventDefault(),!0}if(k&&(0,y.im)(k,z.sv.element,q).start===0&&k.previousElementSibling){q.extractContents();var X0=k.previousElementSibling.lastElementChild;if(X0.getAttribute("data-type")==="newline")X0.remove(),X0=k.previousElementSibling.lastElementChild;if(X0.getAttribute("data-type")!=="newline")X0.insertAdjacentHTML("afterend",k.innerHTML),k.remove();if(k.textContent.trim()!==""&&!((Q=k.previousElementSibling)===null||Q===void 0?void 0:Q.querySelector('[data-type="code-block-open-marker"]')))Q0(z);else{if(X0.getAttribute("data-type")!=="newline")q.selectNodeContents(X0.lastChild),q.collapse(!1);f0(z)}return w.preventDefault(),!0}}return!1},n=i(538),F0=function(z){if(z.options.theme==="dark")z.element.classList.add("vditor--dark");else z.element.classList.remove("vditor--dark")},T0=function(z){if(z.element.innerHTML="",z.element.classList.add("vditor"),z.options.rtl)z.element.setAttribute("dir","rtl");if(F0(z),(0,n.Z)(z.options.preview.theme.current,z.options.preview.theme.path),typeof z.options.height==="number")z.element.style.height=z.options.height+"px";else z.element.style.height=z.options.height;if(typeof z.options.minHeight==="number")z.element.style.minHeight=z.options.minHeight+"px";if(typeof z.options.width==="number")z.element.style.width=z.options.width+"px";else z.element.style.width=z.options.width;z.element.appendChild(z.toolbar.element);var w=document.createElement("div");if(w.className="vditor-content",z.options.outline.position==="left")w.appendChild(z.outline.element);if(w.appendChild(z.wysiwyg.element.parentElement),w.appendChild(z.sv.element),w.appendChild(z.ir.element.parentElement),w.appendChild(z.preview.element),z.toolbar.elements.devtools)w.appendChild(z.devtools.element);if(z.options.outline.position==="right")z.outline.element.classList.add("vditor-outline--right"),w.appendChild(z.outline.element);if(z.upload)w.appendChild(z.upload.element);if(z.options.resize.enable)w.appendChild(z.resize.element);if(w.appendChild(z.hint.element),w.appendChild(z.tip.element),z.element.appendChild(w),w.addEventListener("click",function(){D(z,["subToolbar"])}),z.toolbar.elements.export)z.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>');if(n0(z,z.options.mode,i5(z)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var Z=!1,X=function($){if(Z)return;Z=!0,requestAnimationFrame(function(){Z=!1;var G=z.toolbar.element;if(G.style.transform="none",G.getBoundingClientRect().top<0)G.style.transform="translate(0, ".concat(-G.getBoundingClientRect().top,"px)")})};window.visualViewport.addEventListener("scroll",X),window.visualViewport.addEventListener("resize",X)}},u0=function(z){var w=window.innerWidth<=P.g.MOBILE_WIDTH?10:35;if(z.wysiwyg.element.parentElement.style.display!=="none"){var Z=(z.wysiwyg.element.parentElement.clientWidth-z.options.preview.maxWidth)/2;z.wysiwyg.element.style.padding="10px ".concat(Math.max(w,Z),"px")}if(z.ir.element.parentElement.style.display!=="none"){var Z=(z.ir.element.parentElement.clientWidth-z.options.preview.maxWidth)/2;z.ir.element.style.padding="10px ".concat(Math.max(w,Z),"px")}if(z.preview.element.style.display!=="block")z.toolbar.element.style.paddingLeft=Math.max(5,parseInt(z[z.currentMode].element.style.paddingLeft||"0",10)+(z.options.outline.position==="left"?z.outline.element.offsetWidth:0))+"px";else z.toolbar.element.style.paddingLeft=5+(z.options.outline.position==="left"?z.outline.element.offsetWidth:0)+"px"},W1=function(z){if(!z.options.typewriterMode)return;var w=window.innerHeight;if(typeof z.options.height==="number"){if(w=z.options.height,typeof z.options.minHeight==="number")w=Math.max(w,z.options.minHeight);w=Math.min(window.innerHeight,w)}else w=z.element.clientHeight;if(z.element.classList.contains("vditor--fullscreen"))w=window.innerHeight;z[z.currentMode].element.style.setProperty("--editor-bottom",(w-z.toolbar.element.offsetHeight)/2+"px")},n1;function t1(){window.removeEventListener("resize",n1)}var i5=function(z){W1(z),t1(),window.addEventListener("resize",n1=function(){u0(z),W1(z)});var w=(0,J.pK)()&&localStorage.getItem(z.options.cache.id);if(!z.options.cache.enable||!w){if(z.options.value)w=z.options.value;else if(z.originalInnerHTML)w=z.lute.HTML2Md(z.originalInnerHTML);else if(!z.options.cache.enable)w=""}return w||""},G1=function(z){clearTimeout(z[z.currentMode].hlToolbarTimeoutId),z[z.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(z[z.currentMode].element.getAttribute("contenteditable")==="false")return;if(!(0,y.Gb)(z[z.currentMode].element))return;O(z.toolbar.elements,P.g.EDIT_TOOLBARS),K(z.toolbar.elements,P.g.EDIT_TOOLBARS);var w=(0,y.zh)(z),Z=w.startContainer;if(w.startContainer.nodeType===3)Z=w.startContainer.parentElement;if(Z.classList.contains("vditor-reset"))Z=Z.childNodes[w.startOffset];var X=z.currentMode==="sv"?(0,U.a1)(Z,"data-type","heading"):(0,B.W)(Z);if(X)F(z.toolbar.elements,["headings"]);var $=z.currentMode==="sv"?(0,U.a1)(Z,"data-type","blockquote"):(0,U.lG)(Z,"BLOCKQUOTE");if($)F(z.toolbar.elements,["quote"]);var G=(0,U.a1)(Z,"data-type","strong");if(G)F(z.toolbar.elements,["bold"]);var Q=(0,U.a1)(Z,"data-type","em");if(Q)F(z.toolbar.elements,["italic"]);var q=(0,U.a1)(Z,"data-type","s");if(q)F(z.toolbar.elements,["strike"]);var V=(0,U.a1)(Z,"data-type","a");if(V)F(z.toolbar.elements,["link"]);var A=(0,U.lG)(Z,"LI");if(A){if(A.classList.contains("vditor-task"))F(z.toolbar.elements,["check"]);else if(A.parentElement.tagName==="OL")F(z.toolbar.elements,["ordered-list"]);else if(A.parentElement.tagName==="UL")F(z.toolbar.elements,["list"]);K(z.toolbar.elements,["outdent","indent"])}else j(z.toolbar.elements,["outdent","indent"]);var f=(0,U.a1)(Z,"data-type","code-block");if(f)j(z.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),F(z.toolbar.elements,["code"]);var x=(0,U.a1)(Z,"data-type","code");if(x)j(z.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),F(z.toolbar.elements,["inline-code"]);var b=(0,U.a1)(Z,"data-type","table");if(b)j(z.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])},200)},A0=function(z,w){if(w===void 0)w={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(w.enableHint)z.hint.render(z);clearTimeout(z.wysiwyg.afterRenderTimeoutId),z.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(z.wysiwyg.composingLock)return;var Z=I(z);if(typeof z.options.input==="function"&&w.enableInput)z.options.input(Z);if(z.options.counter.enable)z.counter.render(z,Z);if(z.options.cache.enable&&(0,J.pK)()){if(localStorage.setItem(z.options.cache.id,Z),z.options.cache.after)z.options.cache.after(Z)}if(z.devtools)z.devtools.renderEchart(z);if(w.enableAddUndoStack)z.undo.addToUndoStack(z)},z.options.undoDelay)},n5=function(z){var w=z.previousSibling;while(w){if(w.nodeType!==3&&w.tagName==="A"&&!w.previousSibling&&w.innerHTML.replace(P.g.ZWSP,"")===""&&w.nextSibling)return w;w=w.previousSibling}return!1},t5=function(z){var w=z.startContainer.nextSibling;while(w&&w.textContent==="")w=w.nextSibling;if(w&&w.nodeType!==3&&(w.tagName==="CODE"||w.getAttribute("data-type")==="math-inline"||w.getAttribute("data-type")==="html-entity"||w.getAttribute("data-type")==="html-inline"))return!0;return!1},e1=function(z){var w="",Z=z.nextSibling;while(Z){if(Z.nodeType===3)w+=Z.textContent;else w+=Z.outerHTML;Z=Z.nextSibling}return w},z5=function(z){var w="",Z=z.previousSibling;while(Z){if(Z.nodeType===3)w=Z.textContent+w;else w=Z.outerHTML+w;Z=Z.previousSibling}return w},e5=function(z){var w=z;while(w&&!w.nextSibling)w=w.parentElement;return w.nextSibling},z8=function(z){var w=z5(z.startContainer),Z=e1(z.startContainer),X=z.startContainer.textContent,$=z.startOffset,G="",Q="";if(X.substr(0,$)!==""&&X.substr(0,$)!==P.g.ZWSP||w)G="".concat(w).concat(X.substr(0,$));if(X.substr($)!==""&&X.substr($)!==P.g.ZWSP||Z)Q="".concat(X.substr($)).concat(Z);return{afterHTML:Q,beforeHTML:G}},M1=function(z,w){Array.from(z.wysiwyg.element.childNodes).find(function(Z){if(Z.nodeType===3){var X=document.createElement("p");X.setAttribute("data-block","0"),X.textContent=Z.textContent;var $=w.startContainer.nodeType===3?w.startOffset:Z.textContent.length;return Z.parentNode.insertBefore(X,Z),Z.remove(),w.setStart(X.firstChild,Math.min(X.firstChild.textContent.length,$)),w.collapse(!0),(0,y.Hc)(w),!0}else if(!Z.getAttribute("data-block")){if(Z.tagName==="P")Z.remove();else{if(Z.tagName==="DIV")w.insertNode(document.createElement("wbr")),Z.outerHTML='<p data-block="0">'.concat(Z.innerHTML,"</p>");else if(Z.tagName==="BR")Z.outerHTML='<p data-block="0">'.concat(Z.outerHTML,"<wbr></p>");else w.insertNode(document.createElement("wbr")),Z.outerHTML='<p data-block="0">'.concat(Z.outerHTML,"</p>");(0,y.ib)(z.wysiwyg.element,w),w=getSelection().getRangeAt(0)}return!0}})},S1=function(z,w){var Z=(0,y.zh)(z),X=(0,U.F9)(Z.startContainer);if(!X)X=Z.startContainer.childNodes[Z.startOffset];if(!X&&z.wysiwyg.element.children.length===0)X=z.wysiwyg.element;if(X&&!X.classList.contains("vditor-wysiwyg__block")){if(Z.insertNode(document.createElement("wbr")),X.innerHTML.trim()==="<wbr>")X.innerHTML="<wbr><br>";if(X.tagName==="BLOCKQUOTE"||X.classList.contains("vditor-reset"))X.innerHTML="<".concat(w,' data-block="0">').concat(X.innerHTML.trim(),"</").concat(w,">");else X.outerHTML="<".concat(w,' data-block="0">').concat(X.innerHTML.trim(),"</").concat(w,">");(0,y.ib)(z.wysiwyg.element,Z),s0(z)}},I1=function(z){var w=getSelection().getRangeAt(0),Z=(0,U.F9)(w.startContainer);if(!Z)Z=w.startContainer.childNodes[w.startOffset];if(Z)w.insertNode(document.createElement("wbr")),Z.outerHTML='<p data-block="0">'.concat(Z.innerHTML,"</p>"),(0,y.ib)(z.wysiwyg.element,w);z.wysiwyg.popover.style.display="none"},Q1=function(z,w,Z){if(Z===void 0)Z=!0;var X=z.previousElementSibling,$=X.ownerDocument.createRange();if(X.tagName==="CODE")if(X.style.display="inline-block",Z)$.setStart(X.firstChild,1);else $.selectNodeContents(X);else{if(X.style.display="block",!X.firstChild.firstChild)X.firstChild.appendChild(document.createTextNode(""));$.selectNodeContents(X.firstChild)}if(Z)$.collapse(!0);else $.collapse(!1);if((0,y.Hc)($),z.firstElementChild.classList.contains("language-mindmap"))return;S0(w)},w8=function(z,w){if(z.wysiwyg.composingLock=w.isComposing,w.isComposing)return!1;if(w.key.indexOf("Arrow")===-1&&w.key!=="Meta"&&w.key!=="Control"&&w.key!=="Alt"&&w.key!=="Shift"&&w.key!=="CapsLock"&&w.key!=="Escape"&&!/^F\d{1,2}$/.test(w.key))z.undo.recordFirstPosition(z,w);var Z=(0,y.zh)(z),X=Z.startContainer;if(!A5(w,z,X))return!1;if(q5(Z,z,w),y5(Z),w.key!=="Enter"&&w.key!=="Tab"&&w.key!=="Backspace"&&w.key.indexOf("Arrow")===-1&&!(0,J.yl)(w)&&w.key!=="Escape"&&w.key!=="Delete")return!1;var $=(0,U.F9)(X),G=(0,U.lG)(X,"P");if(O5(w,z,G,Z))return!0;if(K5(Z,z,G,w))return!0;if(B5(z,w,Z))return!0;var Q=(0,U.fb)(X,"vditor-wysiwyg__block");if(Q){if(w.key==="Escape"&&Q.children.length===2)return z.wysiwyg.popover.style.display="none",Q.firstElementChild.style.display="none",z.wysiwyg.element.blur(),w.preventDefault(),!0;if(!(0,J.yl)(w)&&!w.shiftKey&&w.altKey&&w.key==="Enter"&&Q.getAttribute("data-type")==="code-block"){var q=z.wysiwyg.popover.querySelector(".vditor-input");return q.focus(),q.select(),w.preventDefault(),!0}if(Q.getAttribute("data-block")==="0"){if(f5(z,w,Q.firstElementChild,Z))return!0;if(A1(z,w,Z,Q.firstElementChild,Q))return!0;if(Q.getAttribute("data-type")!=="yaml-front-matter"&&w1(z,w,Z,Q.firstElementChild,Q))return!0}}if(H5(z,Z,w,G))return!0;var V=(0,U.E2)(X,"BLOCKQUOTE");if(V){if(!w.shiftKey&&w.altKey&&w.key==="Enter"){if(!(0,J.yl)(w))Z.setStartAfter(V);else Z.setStartBefore(V);(0,y.Hc)(Z);var A=document.createElement("p");return A.setAttribute("data-block","0"),A.innerHTML=`
`,Z.insertNode(A),Z.collapse(!0),(0,y.Hc)(Z),A0(z),S0(z),w.preventDefault(),!0}}var f=(0,B.W)(X);if(f){if(f.tagName==="H6"&&X.textContent.length===Z.startOffset&&!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey&&w.key==="Enter"){var x=document.createElement("p");return x.textContent=`
`,x.setAttribute("data-block","0"),X.parentElement.insertAdjacentElement("afterend",x),Z.setStart(x,0),(0,y.Hc)(Z),A0(z),S0(z),w.preventDefault(),!0}if(_("⌘=",w)){var b=parseInt(f.tagName.substr(1),10)-1;if(b>0)S1(z,"h".concat(b)),A0(z);return w.preventDefault(),!0}if(_("⌘-",w)){var b=parseInt(f.tagName.substr(1),10)+1;if(b<7)S1(z,"h".concat(b)),A0(z);return w.preventDefault(),!0}if(w.key==="Backspace"&&!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey&&f.textContent.length===1)I1(z)}if(N5(z,Z,w))return!0;if(w.altKey&&w.key==="Enter"&&!(0,J.yl)(w)&&!w.shiftKey){var h=(0,U.lG)(X,"A"),T=(0,U.a1)(X,"data-type","link-ref"),p=(0,U.a1)(X,"data-type","footnotes-ref");if(h||T||p||f&&f.tagName.length===2){var g=z.wysiwyg.popover.querySelector("input");g.focus(),g.select()}}if(x0(z,w))return!0;if(_("⇧⌘U",w)){var k=z.wysiwyg.popover.querySelector('[data-type="up"]');if(k)return k.click(),w.preventDefault(),!0}if(_("⇧⌘D",w)){var k=z.wysiwyg.popover.querySelector('[data-type="down"]');if(k)return k.click(),w.preventDefault(),!0}if(l1(z,Z,w))return!0;if(!(0,J.yl)(w)&&w.shiftKey&&!w.altKey&&w.key==="Enter"&&X.parentElement.tagName!=="LI"&&X.parentElement.tagName!=="P"){if(["STRONG","STRIKE","S","I","EM","B"].includes(X.parentElement.tagName))Z.insertNode(document.createTextNode(`
`+P.g.ZWSP));else Z.insertNode(document.createTextNode(`
`));return Z.collapse(!1),(0,y.Hc)(Z),A0(z),S0(z),w.preventDefault(),!0}if(w.key==="Backspace"&&!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey&&Z.toString()===""){if(L5(z,Z,w,G))return!0;if($){if($.previousElementSibling&&$.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&$.previousElementSibling.getAttribute("data-block")==="0"&&$.tagName!=="UL"&&$.tagName!=="OL"){var r=(0,y.im)($,z.wysiwyg.element,Z).start;if(r===0&&Z.startOffset===0||r===1&&$.innerText.startsWith(P.g.ZWSP)){if(Q1($.previousElementSibling.lastElementChild,z,!1),$.innerHTML.trim().replace(P.g.ZWSP,"")==="")$.remove(),A0(z);return w.preventDefault(),!0}}var s=Z.startOffset;if(Z.toString()===""&&X.nodeType===3&&X.textContent.charAt(s-2)===`
`&&X.textContent.charAt(s-1)!==P.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(X.parentElement.tagName))return X.textContent=X.textContent.substring(0,s-1)+P.g.ZWSP,Z.setStart(X,s),Z.collapse(!0),A0(z),w.preventDefault(),!0;if(X.textContent===P.g.ZWSP&&Z.startOffset===1&&!X.previousSibling&&t5(Z))X.textContent="";$.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(G0){G0.firstElementChild.style.display="inline",G0.lastElementChild.style.display="none"}),$.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(G0){G0.firstElementChild.style.display="inline",G0.lastElementChild.style.display="none"})}}if((0,J.vU)()&&Z.startOffset===1&&X.textContent.indexOf(P.g.ZWSP)>-1&&X.previousSibling&&X.previousSibling.nodeType!==3&&X.previousSibling.tagName==="CODE"&&(w.key==="Backspace"||w.key==="ArrowLeft"))return Z.selectNodeContents(X.previousSibling),Z.collapse(!1),w.preventDefault(),!0;if(x5(w,$,Z))return w.preventDefault(),!0;if(j5(Z,w.key),w.key==="ArrowDown"){var o=X.nextSibling;if(o&&o.nodeType!==3&&o.getAttribute("data-type")==="math-inline")Z.setStartAfter(o)}if($&&D1($,z,w,Z))return w.preventDefault(),!0;return!1},x0=function(z,w){if(_("⇧⌘X",w)){var Z=z.wysiwyg.popover.querySelector('[data-type="remove"]');if(Z)Z.click();return w.preventDefault(),!0}},i0=function(z){clearTimeout(z.wysiwyg.hlToolbarTimeoutId),z.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(z.wysiwyg.element.getAttribute("contenteditable")==="false")return;if(!(0,y.Gb)(z.wysiwyg.element))return;O(z.toolbar.elements,P.g.EDIT_TOOLBARS),K(z.toolbar.elements,P.g.EDIT_TOOLBARS);var w=getSelection().getRangeAt(0),Z=w.startContainer;if(w.startContainer.nodeType===3)Z=w.startContainer.parentElement;else Z=Z.childNodes[w.startOffset>=Z.childNodes.length?Z.childNodes.length-1:w.startOffset];var X=(0,U.a1)(Z,"data-type","footnotes-block");if(X){z.wysiwyg.popover.innerHTML="",c0(X,z),h0(z,"footnotes-block"),g0(z,X);return}var $=(0,U.lG)(Z,"LI");if($){if($.classList.contains("vditor-task"))F(z.toolbar.elements,["check"]);else if($.parentElement.tagName==="OL")F(z.toolbar.elements,["ordered-list"]);else if($.parentElement.tagName==="UL")F(z.toolbar.elements,["list"]);K(z.toolbar.elements,["outdent","indent"])}else j(z.toolbar.elements,["outdent","indent"]);if((0,U.lG)(Z,"BLOCKQUOTE"))F(z.toolbar.elements,["quote"]);if((0,U.lG)(Z,"B")||(0,U.lG)(Z,"STRONG"))F(z.toolbar.elements,["bold"]);if((0,U.lG)(Z,"I")||(0,U.lG)(Z,"EM"))F(z.toolbar.elements,["italic"]);if((0,U.lG)(Z,"STRIKE")||(0,U.lG)(Z,"S"))F(z.toolbar.elements,["strike"]);z.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(l){l.classList.remove("vditor-comment--focus")});var G=(0,U.fb)(Z,"vditor-comment");if(G){var Q=G.getAttribute("data-cmtids").split(" ");if(Q.length>1&&G.nextSibling.isSameNode(G.nextElementSibling)){var q=G.nextElementSibling.getAttribute("data-cmtids").split(" ");Q.find(function(l){if(q.includes(l))return Q=[l],!0})}z.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(l){if(l.getAttribute("data-cmtids").indexOf(Q[0])>-1)l.classList.add("vditor-comment--focus")})}var V=(0,U.lG)(Z,"A");if(V)F(z.toolbar.elements,["link"]);var A=(0,U.lG)(Z,"TABLE"),f=(0,B.W)(Z);if((0,U.lG)(Z,"CODE"))if((0,U.lG)(Z,"PRE"))j(z.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),F(z.toolbar.elements,["code"]);else j(z.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),F(z.toolbar.elements,["inline-code"]);else if(f)j(z.toolbar.elements,["bold"]),F(z.toolbar.elements,["headings"]);else if(A)j(z.toolbar.elements,["table"]);var x=(0,U.fb)(Z,"vditor-toc");if(x){z.wysiwyg.popover.innerHTML="",c0(x,z),h0(z,"vditor-toc"),g0(z,x);return}var b=(0,B.S)(Z,"BLOCKQUOTE");if(b)z.wysiwyg.popover.innerHTML="",t0(w,b,z),e0(w,b,z),c0(b,z),h0(z,"blockquote"),g0(z,b);if($)z.wysiwyg.popover.innerHTML="",t0(w,$,z),e0(w,$,z),c0($,z),h0(z,"li"),g0(z,$);if(A){var h=z.options.lang,T=z.options;z.wysiwyg.popover.innerHTML="";var p=function(){var l=A.rows.length,Z0=A.rows[0].cells.length,r0=parseInt(k0.value,10)||l,p0=parseInt(_0.value,10)||Z0;if(r0===l&&Z0===p0)return;if(Z0!==p0){var F1=p0-Z0;for(var l0=0;l0<A.rows.length;l0++)if(F1>0)for(var u5=0;u5<F1;u5++)if(l0===0)A.rows[l0].lastElementChild.insertAdjacentHTML("afterend","<th> </th>");else A.rows[l0].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var v1=Z0-1;v1>=p0;v1--)A.rows[l0].cells[v1].remove()}if(l!==r0){var g5=r0-l;if(g5>0){var r1="<tr>";for(var $1=0;$1<p0;$1++)r1+="<td> </td>";for(var c5=0;c5<g5;c5++)if(A.querySelector("tbody"))A.querySelector("tbody").insertAdjacentHTML("beforeend",r1);else A.querySelector("thead").insertAdjacentHTML("afterend",r1+"</tr>")}else for(var $1=l-1;$1>=r0;$1--)if(A.rows[$1].remove(),A.rows.length===1)A.querySelector("tbody").remove()}if(typeof z.options.input==="function")z.options.input(I(z))},g=function(l){if(H1(A,l),l==="right")o.classList.remove("vditor-icon--current"),G0.classList.remove("vditor-icon--current"),X0.classList.add("vditor-icon--current");else if(l==="center")o.classList.remove("vditor-icon--current"),X0.classList.remove("vditor-icon--current"),G0.classList.add("vditor-icon--current");else G0.classList.remove("vditor-icon--current"),X0.classList.remove("vditor-icon--current"),o.classList.add("vditor-icon--current");(0,y.Hc)(w),A0(z)},k=(0,U.lG)(Z,"TD"),r=(0,U.lG)(Z,"TH"),s="left";if(k)s=k.getAttribute("align")||"left";else if(r)s=r.getAttribute("align")||"center";var o=document.createElement("button");o.setAttribute("type","button"),o.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,J.ns)("⇧⌘L")+">"),o.setAttribute("data-type","left"),o.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',o.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(s==="left"?" vditor-icon--current":""),o.onclick=function(){g("left")};var G0=document.createElement("button");G0.setAttribute("type","button"),G0.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,J.ns)("⇧⌘C")+">"),G0.setAttribute("data-type","center"),G0.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',G0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(s==="center"?" vditor-icon--current":""),G0.onclick=function(){g("center")};var X0=document.createElement("button");X0.setAttribute("type","button"),X0.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,J.ns)("⇧⌘R")+">"),X0.setAttribute("data-type","right"),X0.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',X0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(s==="right"?" vditor-icon--current":""),X0.onclick=function(){g("right")};var q0=document.createElement("button");q0.setAttribute("type","button"),q0.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,J.ns)("⌘=")+">"),q0.setAttribute("data-type","insertRow"),q0.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',q0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",q0.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,Z0=(0,U.lG)(l,"TD")||(0,U.lG)(l,"TH");if(Z0)D5(z,w,Z0)};var R0=document.createElement("button");R0.setAttribute("type","button"),R0.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,J.ns)("⇧⌘F")+">"),R0.setAttribute("data-type","insertRow"),R0.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',R0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",R0.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,Z0=(0,U.lG)(l,"TD")||(0,U.lG)(l,"TH");if(Z0)W5(z,w,Z0)};var L0=document.createElement("button");L0.setAttribute("type","button"),L0.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,J.ns)("⇧⌘=")+">"),L0.setAttribute("data-type","insertColumn"),L0.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',L0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",L0.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,Z0=(0,U.lG)(l,"TD")||(0,U.lG)(l,"TH");if(Z0)N1(z,A,Z0)};var M0=document.createElement("button");M0.setAttribute("type","button"),M0.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,J.ns)("⇧⌘G")+">"),M0.setAttribute("data-type","insertColumn"),M0.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',M0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",M0.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,Z0=(0,U.lG)(l,"TD")||(0,U.lG)(l,"TH");if(Z0)N1(z,A,Z0,"beforebegin")};var w0=document.createElement("button");w0.setAttribute("type","button"),w0.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,J.ns)("⌘-")+">"),w0.setAttribute("data-type","deleteRow"),w0.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',w0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",w0.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,Z0=(0,U.lG)(l,"TD")||(0,U.lG)(l,"TH");if(Z0)S5(z,w,Z0)};var I0=document.createElement("button");I0.setAttribute("type","button"),I0.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,J.ns)("⇧⌘-")+">"),I0.setAttribute("data-type","deleteColumn"),I0.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',I0.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",I0.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,Z0=(0,U.lG)(l,"TD")||(0,U.lG)(l,"TH");if(Z0)P5(z,w,A,Z0)};var C0=document.createElement("span");C0.setAttribute("aria-label",window.VditorI18n.row),C0.className="vditor-tooltipped vditor-tooltipped__n";var k0=document.createElement("input");C0.appendChild(k0),k0.type="number",k0.min="1",k0.className="vditor-input",k0.style.width="42px",k0.style.textAlign="center",k0.setAttribute("placeholder",window.VditorI18n.row),k0.value=A.rows.length.toString(),k0.oninput=function(){p()},k0.onkeydown=function(l){if(l.isComposing)return;if(l.key==="Tab"){_0.focus(),_0.select(),l.preventDefault();return}if(x0(z,l))return;if(a0(l,w))return};var x1=document.createElement("span");x1.setAttribute("aria-label",window.VditorI18n.column),x1.className="vditor-tooltipped vditor-tooltipped__n";var _0=document.createElement("input");x1.appendChild(_0),_0.type="number",_0.min="1",_0.className="vditor-input",_0.style.width="42px",_0.style.textAlign="center",_0.setAttribute("placeholder",window.VditorI18n.column),_0.value=A.rows[0].cells.length.toString(),_0.oninput=function(){p()},_0.onkeydown=function(l){if(l.isComposing)return;if(l.key==="Tab"){k0.focus(),k0.select(),l.preventDefault();return}if(x0(z,l))return;if(a0(l,w))return},t0(w,A,z),e0(w,A,z),c0(A,z),z.wysiwyg.popover.insertAdjacentElement("beforeend",o),z.wysiwyg.popover.insertAdjacentElement("beforeend",G0),z.wysiwyg.popover.insertAdjacentElement("beforeend",X0),z.wysiwyg.popover.insertAdjacentElement("beforeend",R0),z.wysiwyg.popover.insertAdjacentElement("beforeend",q0),z.wysiwyg.popover.insertAdjacentElement("beforeend",M0),z.wysiwyg.popover.insertAdjacentElement("beforeend",L0),z.wysiwyg.popover.insertAdjacentElement("beforeend",w0),z.wysiwyg.popover.insertAdjacentElement("beforeend",I0),z.wysiwyg.popover.insertAdjacentElement("beforeend",C0),z.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),z.wysiwyg.popover.insertAdjacentElement("beforeend",x1),h0(z,"table"),g0(z,A)}var o1=(0,U.a1)(Z,"data-type","link-ref");if(o1)w5(z,o1,w);var Z1=(0,U.a1)(Z,"data-type","footnotes-ref");if(Z1){var h=z.options.lang,T=z.options;z.wysiwyg.popover.innerHTML="";var C0=document.createElement("span");C0.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,J.ns)("⌥Enter")+">"),C0.className="vditor-tooltipped vditor-tooltipped__n";var d0=document.createElement("input");C0.appendChild(d0),d0.className="vditor-input",d0.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,J.ns)("⌥Enter")+">"),d0.style.width="120px",d0.value=Z1.getAttribute("data-footnotes-label"),d0.oninput=function(){if(d0.value.trim()!=="")Z1.setAttribute("data-footnotes-label",d0.value);if(typeof z.options.input==="function")z.options.input(I(z))},d0.onkeydown=function(p0){if(p0.isComposing)return;if(x0(z,p0))return;if(a0(p0,w))return},c0(Z1,z),z.wysiwyg.popover.insertAdjacentElement("beforeend",C0),h0(z,"footnotes-ref"),g0(z,Z1)}var H0=(0,U.fb)(Z,"vditor-wysiwyg__block"),_5=H0?H0.getAttribute("data-type").indexOf("block")>-1:!1;if(z.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(l){if(!H0||H0&&_5&&!H0.contains(l)){var Z0=l.previousElementSibling;Z0.style.display="none"}}),H0&&_5){if(z.wysiwyg.popover.innerHTML="",t0(w,H0,z),e0(w,H0,z),c0(H0,z),H0.getAttribute("data-type")==="code-block"){var R1=document.createElement("span");R1.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,J.ns)("⌥Enter")+">"),R1.className="vditor-tooltipped vditor-tooltipped__n";var E0=document.createElement("input");R1.appendChild(E0);var j1=H0.firstElementChild.firstElementChild;E0.className="vditor-input",E0.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,J.ns)("⌥Enter")+">"),E0.value=j1.className.indexOf("language-")>-1?j1.className.split("-")[1].split(" ")[0]:"",E0.oninput=function(l){if(E0.value.trim()!=="")j1.className="language-".concat(E0.value);else j1.className="",z.hint.recentLanguage="";if(H0.lastElementChild.classList.contains("vditor-wysiwyg__preview"))H0.lastElementChild.innerHTML=H0.firstElementChild.innerHTML,B0(H0.lastElementChild,z);if(A0(z),l.detail===1)w.setStart(j1.firstChild,0),w.collapse(!0),(0,y.Hc)(w)},E0.onkeydown=function(l){if(l.isComposing)return;if(x0(z,l))return;if(l.key==="Escape"&&z.hint.element.style.display==="block"){z.hint.element.style.display="none",l.preventDefault();return}z.hint.select(l,z),a0(l,w)},E0.onkeyup=function(l){var Z0,r0;if(l.isComposing||l.key==="Enter"||l.key==="ArrowUp"||l.key==="Escape"||l.key==="ArrowDown")return;var p0=[],F1=E0.value.substring(0,E0.selectionStart);(z.options.preview.hljs.langs||P.g.ALIAS_CODE_LANGUAGES.concat(((r0=(Z0=window.hljs)===null||Z0===void 0?void 0:Z0.listLanguages())!==null&&r0!==void 0?r0:[]).sort())).forEach(function(l0){if(l0.indexOf(F1.toLowerCase())>-1)p0.push({html:l0,value:l0})}),z.hint.genHTML(p0,F1,z),l.preventDefault()},z.wysiwyg.popover.insertAdjacentElement("beforeend",R1),h0(z,"code-block")}else h0(z,"block");g0(z,H0)}else H0=void 0;if(f){z.wysiwyg.popover.innerHTML="";var C0=document.createElement("span");C0.setAttribute("aria-label","ID<"+(0,J.ns)("⌥Enter")+">"),C0.className="vditor-tooltipped vditor-tooltipped__n";var v0=document.createElement("input");C0.appendChild(v0),v0.className="vditor-input",v0.setAttribute("placeholder","ID<"+(0,J.ns)("⌥Enter")+">"),v0.style.width="120px",v0.value=f.getAttribute("data-id")||"",v0.oninput=function(){if(f.setAttribute("data-id",v0.value),typeof z.options.input==="function")z.options.input(I(z))},v0.onkeydown=function(Z0){if(Z0.isComposing)return;if(x0(z,Z0))return;if(a0(Z0,w))return},t0(w,f,z),e0(w,f,z),c0(f,z),z.wysiwyg.popover.insertAdjacentElement("beforeend",C0),h0(z,"heading"),g0(z,f)}if(V)C1(z,V,w);if(!b&&!$&&!A&&!H0&&!V&&!o1&&!Z1&&!f&&!x){var X1=(0,U.a1)(Z,"data-block","0");if(X1&&X1.parentElement.isEqualNode(z.wysiwyg.element))z.wysiwyg.popover.innerHTML="",t0(w,X1,z),e0(w,X1,z),c0(X1,z),h0(z,"block"),g0(z,X1);else z.wysiwyg.popover.style.display="none"}z.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(l){l.style.display="none"});var b5=(0,U.a1)(w.startContainer,"data-type","backslash");if(b5)b5.querySelector("span").style.display="inline"},200)},g0=function(z,w){var Z=w,X=(0,U.lG)(w,"TABLE");if(X)Z=X;z.wysiwyg.popover.style.left="0",z.wysiwyg.popover.style.display="block",z.wysiwyg.popover.style.top=Math.max(-8,Z.offsetTop-21-z.wysiwyg.element.scrollTop)+"px",z.wysiwyg.popover.style.left=Math.min(Z.offsetLeft,z.wysiwyg.element.clientWidth-z.wysiwyg.popover.clientWidth)+"px",z.wysiwyg.popover.setAttribute("data-top",(Z.offsetTop-21).toString())},w5=function(z,w,Z){if(Z===void 0)Z=getSelection().getRangeAt(0);z.wysiwyg.popover.innerHTML="";var X=function(){if(G.value.trim()!=="")if(w.tagName==="IMG")w.setAttribute("alt",G.value);else w.textContent=G.value;if(q.value.trim()!=="")w.setAttribute("data-link-label",q.value);if(typeof z.options.input==="function")z.options.input(I(z))},$=document.createElement("span");$.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),$.className="vditor-tooltipped vditor-tooltipped__n";var G=document.createElement("input");$.appendChild(G),G.className="vditor-input",G.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),G.style.width="120px",G.value=w.getAttribute("alt")||w.textContent,G.oninput=function(){X()},G.onkeydown=function(V){if(x0(z,V))return;if(a0(V,Z))return;U1(z,w,V,q)};var Q=document.createElement("span");Q.setAttribute("aria-label",window.VditorI18n.linkRef),Q.className="vditor-tooltipped vditor-tooltipped__n";var q=document.createElement("input");Q.appendChild(q),q.className="vditor-input",q.setAttribute("placeholder",window.VditorI18n.linkRef),q.value=w.getAttribute("data-link-label"),q.oninput=function(){X()},q.onkeydown=function(V){if(x0(z,V))return;if(a0(V,Z))return;U1(z,w,V,G)},c0(w,z),z.wysiwyg.popover.insertAdjacentElement("beforeend",$),z.wysiwyg.popover.insertAdjacentElement("beforeend",Q),h0(z,"link-ref"),g0(z,w)},t0=function(z,w,Z){var X=w.previousElementSibling;if(!X||!w.parentElement.isEqualNode(Z.wysiwyg.element)&&w.tagName!=="LI")return;var $=document.createElement("button");$.setAttribute("type","button"),$.setAttribute("data-type","up"),$.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,J.ns)("⇧⌘U")+">"),$.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',$.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",$.onclick=function(){z.insertNode(document.createElement("wbr")),X.insertAdjacentElement("beforebegin",w),(0,y.ib)(Z.wysiwyg.element,z),A0(Z),i0(Z),S0(Z)},Z.wysiwyg.popover.insertAdjacentElement("beforeend",$)},e0=function(z,w,Z){var X=w.nextElementSibling;if(!X||!w.parentElement.isEqualNode(Z.wysiwyg.element)&&w.tagName!=="LI")return;var $=document.createElement("button");$.setAttribute("type","button"),$.setAttribute("data-type","down"),$.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,J.ns)("⇧⌘D")+">"),$.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',$.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",$.onclick=function(){z.insertNode(document.createElement("wbr")),X.insertAdjacentElement("afterend",w),(0,y.ib)(Z.wysiwyg.element,z),A0(Z),i0(Z),S0(Z)},Z.wysiwyg.popover.insertAdjacentElement("beforeend",$)},c0=function(z,w){var Z=document.createElement("button");Z.setAttribute("type","button"),Z.setAttribute("data-type","remove"),Z.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,J.ns)("⇧⌘X")+">"),Z.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',Z.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Z.onclick=function(){var X=(0,y.zh)(w);if(X.setStartAfter(z),(0,y.Hc)(X),z.remove(),A0(w),i0(w),["H1","H2","H3","H4","H5","H6"].includes(z.tagName))s0(w)},w.wysiwyg.popover.insertAdjacentElement("beforeend",Z)},U1=function(z,w,Z,X){if(Z.isComposing)return;if(Z.key==="Tab"){X.focus(),X.select(),Z.preventDefault();return}if(!(0,J.yl)(Z)&&!Z.shiftKey&&Z.altKey&&Z.key==="Enter"){var $=(0,y.zh)(z);w.insertAdjacentHTML("afterend",P.g.ZWSP),$.setStartAfter(w.nextSibling),$.collapse(!0),(0,y.Hc)($),Z.preventDefault()}},C1=function(z,w,Z){z.wysiwyg.popover.innerHTML="";var X=function(){if(G.value.trim()!=="")w.innerHTML=G.value;w.setAttribute("href",q.value),w.setAttribute("title",A.value),A0(z)};w.querySelectorAll("[data-marker]").forEach(function(f){f.removeAttribute("data-marker")});var $=document.createElement("span");$.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),$.className="vditor-tooltipped vditor-tooltipped__n";var G=document.createElement("input");$.appendChild(G),G.className="vditor-input",G.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),G.style.width="120px",G.value=w.innerHTML||"",G.oninput=function(){X()},G.onkeydown=function(f){if(x0(z,f))return;if(a0(f,Z))return;U1(z,w,f,q)};var Q=document.createElement("span");Q.setAttribute("aria-label",window.VditorI18n.link),Q.className="vditor-tooltipped vditor-tooltipped__n";var q=document.createElement("input");Q.appendChild(q),q.className="vditor-input",q.setAttribute("placeholder",window.VditorI18n.link),q.value=w.getAttribute("href")||"",q.oninput=function(){X()},q.onkeydown=function(f){if(x0(z,f))return;if(a0(f,Z))return;U1(z,w,f,A)};var V=document.createElement("span");V.setAttribute("aria-label",window.VditorI18n.tooltipText),V.className="vditor-tooltipped vditor-tooltipped__n";var A=document.createElement("input");V.appendChild(A),A.className="vditor-input",A.setAttribute("placeholder",window.VditorI18n.tooltipText),A.style.width="60px",A.value=w.getAttribute("title")||"",A.oninput=function(){X()},A.onkeydown=function(f){if(x0(z,f))return;if(a0(f,Z))return;U1(z,w,f,G)},c0(w,z),z.wysiwyg.popover.insertAdjacentElement("beforeend",$),z.wysiwyg.popover.insertAdjacentElement("beforeend",Q),z.wysiwyg.popover.insertAdjacentElement("beforeend",V),h0(z,"a"),g0(z,w)},Z8=function(z,w){var Z=z.target;w.wysiwyg.popover.innerHTML="";var X=function(){if(Z.setAttribute("src",G.value),Z.setAttribute("alt",q.value),Z.setAttribute("title",A.value),typeof w.options.input==="function")w.options.input(I(w))},$=document.createElement("span");$.setAttribute("aria-label",window.VditorI18n.imageURL),$.className="vditor-tooltipped vditor-tooltipped__n";var G=document.createElement("input");$.appendChild(G),G.className="vditor-input",G.setAttribute("placeholder",window.VditorI18n.imageURL),G.value=Z.getAttribute("src")||"",G.oninput=function(){X()},G.onkeydown=function(f){x0(w,f)};var Q=document.createElement("span");Q.setAttribute("aria-label",window.VditorI18n.alternateText),Q.className="vditor-tooltipped vditor-tooltipped__n";var q=document.createElement("input");Q.appendChild(q),q.className="vditor-input",q.setAttribute("placeholder",window.VditorI18n.alternateText),q.style.width="52px",q.value=Z.getAttribute("alt")||"",q.oninput=function(){X()},q.onkeydown=function(f){x0(w,f)};var V=document.createElement("span");V.setAttribute("aria-label",window.VditorI18n.title),V.className="vditor-tooltipped vditor-tooltipped__n";var A=document.createElement("input");V.appendChild(A),A.className="vditor-input",A.setAttribute("placeholder",window.VditorI18n.title),A.value=Z.getAttribute("title")||"",A.oninput=function(){X()},A.onkeydown=function(f){x0(w,f)},c0(Z,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",$),w.wysiwyg.popover.insertAdjacentElement("beforeend",Q),w.wysiwyg.popover.insertAdjacentElement("beforeend",V),h0(w,"image"),g0(w,Z)},a0=function(z,w){if(!(0,J.yl)(z)&&!z.shiftKey&&z.key==="Enter"||z.key==="Escape"){if(w)(0,y.Hc)(w);return z.preventDefault(),z.stopPropagation(),!0}},h0=function(z,w){z.options.customWysiwygToolbar(w,z.wysiwyg.popover)},z1=function(z){if(z.currentMode==="wysiwyg")i0(z);else if(z.currentMode==="ir")G1(z)},Z5=function(z,w,Z){if(Z===void 0)Z={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};var X=z.wysiwyg.element;X.innerHTML=z.lute.Md2VditorDOM(w),X.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function($){B0($,z),$.previousElementSibling.setAttribute("style","display:none")}),A0(z,Z)},X8=function(z,w,Z){var X=z.startContainer.parentElement,$=!1,G="",Q="",q=z8(z),V=q.beforeHTML,A=q.afterHTML;while(X&&!$){var f=X.tagName;if(f==="STRIKE")f="S";if(f==="I")f="EM";if(f==="B")f="STRONG";if(f==="S"||f==="STRONG"||f==="EM"){var x="",b="",h="";if(X.parentElement.getAttribute("data-block")!=="0")b=z5(X),h=e1(X);if(V||b)x="".concat(b,"<").concat(f,">").concat(V,"</").concat(f,">"),V=x;if(Z==="bold"&&f==="STRONG"||Z==="italic"&&f==="EM"||Z==="strikeThrough"&&f==="S")x+="".concat(G).concat(P.g.ZWSP,"<wbr>").concat(Q),$=!0;if(A||h)A="<".concat(f,">").concat(A,"</").concat(f,">").concat(h),x+=A;if(X.parentElement.getAttribute("data-block")!=="0")X=X.parentElement,X.innerHTML=x;else X.outerHTML=x,X=X.parentElement;G="<".concat(f,">")+G,Q="</".concat(f,">")+Q}else $=!0}(0,y.ib)(w.wysiwyg.element,z)},$8=function(z,w,Z){if(z.wysiwyg.composingLock&&Z instanceof CustomEvent)return;var X=!0,$=!0;if(z.wysiwyg.element.querySelector("wbr"))z.wysiwyg.element.querySelector("wbr").remove();var G=(0,y.zh)(z),Q=w.getAttribute("data-type");if(w.classList.contains("vditor-menu--current")){if(Q==="strike")Q="strikeThrough";if(Q==="quote"){var q=(0,U.lG)(G.startContainer,"BLOCKQUOTE");if(!q)q=G.startContainer.childNodes[G.startOffset];if(q)X=!1,w.classList.remove("vditor-menu--current"),G.insertNode(document.createElement("wbr")),q.outerHTML=q.innerHTML.trim()===""?'<p data-block="0">'.concat(q.innerHTML,"</p>"):q.innerHTML,(0,y.ib)(z.wysiwyg.element,G)}else if(Q==="inline-code"){var V=(0,U.lG)(G.startContainer,"CODE");if(!V)V=G.startContainer.childNodes[G.startOffset];if(V)V.outerHTML=V.innerHTML.replace(P.g.ZWSP,"")+"<wbr>",(0,y.ib)(z.wysiwyg.element,G)}else if(Q==="link")if(!G.collapsed)document.execCommand("unlink",!1,"");else G.selectNode(G.startContainer.parentElement),document.execCommand("unlink",!1,"");else if(Q==="check"||Q==="list"||Q==="ordered-list")f1(z,G,Q),(0,y.ib)(z.wysiwyg.element,G),X=!1,w.classList.remove("vditor-menu--current");else if(X=!1,w.classList.remove("vditor-menu--current"),G.toString()==="")X8(G,z,Q);else document.execCommand(Q,!1,"")}else{if(z.wysiwyg.element.childNodes.length===0)z.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,y.ib)(z.wysiwyg.element,G);var A=(0,U.F9)(G.startContainer);if(Q==="quote"){if(!A)A=G.startContainer.childNodes[G.startOffset];if(A){X=!1,w.classList.add("vditor-menu--current"),G.insertNode(document.createElement("wbr"));var f=(0,U.lG)(G.startContainer,"LI");if(f&&A.contains(f))f.innerHTML='<blockquote data-block="0">'.concat(f.innerHTML,"</blockquote>");else A.outerHTML='<blockquote data-block="0">'.concat(A.outerHTML,"</blockquote>");(0,y.ib)(z.wysiwyg.element,G)}}else if(Q==="check"||Q==="list"||Q==="ordered-list")f1(z,G,Q,!1),(0,y.ib)(z.wysiwyg.element,G),X=!1,O(z.toolbar.elements,["check","list","ordered-list"]),w.classList.add("vditor-menu--current");else if(Q==="inline-code"){if(G.toString()===""){var x=document.createElement("code");x.textContent=P.g.ZWSP,G.insertNode(x),G.setStart(x.firstChild,1),G.collapse(!0),(0,y.Hc)(G)}else if(G.startContainer.nodeType===3){var x=document.createElement("code");G.surroundContents(x),G.insertNode(x),(0,y.Hc)(G)}w.classList.add("vditor-menu--current")}else if(Q==="code"){var x=document.createElement("div");if(x.className="vditor-wysiwyg__block",x.setAttribute("data-type","code-block"),x.setAttribute("data-block","0"),x.setAttribute("data-marker","```"),G.toString()==="")x.innerHTML=`<pre><code><wbr>
</code></pre>`;else x.innerHTML="<pre><code>".concat(G.toString(),"<wbr></code></pre>"),G.deleteContents();if(G.insertNode(x),A)A.outerHTML=z.lute.SpinVditorDOM(A.outerHTML);(0,y.ib)(z.wysiwyg.element,G),z.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(G0){B0(G0,z)}),w.classList.add("vditor-menu--disabled")}else if(Q==="link"){if(G.toString()===""){var b=document.createElement("a");b.innerText=P.g.ZWSP,G.insertNode(b),G.setStart(b.firstChild,1),G.collapse(!0),C1(z,b,G);var h=z.wysiwyg.popover.querySelector("input");h.value="",h.focus(),$=!1}else{var x=document.createElement("a");x.setAttribute("href",""),x.innerHTML=G.toString(),G.surroundContents(x),G.insertNode(x),(0,y.Hc)(G),C1(z,x,G);var T=z.wysiwyg.popover.querySelectorAll("input");T[0].value=x.innerText,T[1].focus()}X=!1,w.classList.add("vditor-menu--current")}else if(Q==="table"){var p='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(G.toString().trim()===""){if(A&&A.innerHTML.trim().replace(P.g.ZWSP,"")==="")A.outerHTML=p;else document.execCommand("insertHTML",!1,p);G.selectNode(z.wysiwyg.element.querySelector("wbr").previousSibling),z.wysiwyg.element.querySelector("wbr").remove(),(0,y.Hc)(G)}else{p='<table data-block="0"><thead><tr>';var g=G.toString().split(`
`),k=g[0].split(",").length>g[0].split("\t").length?",":"\t";g.forEach(function(o,G0){if(G0===0)o.split(k).forEach(function(X0,q0){if(q0===0)p+="<th>".concat(X0,"<wbr></th>");else p+="<th>".concat(X0,"</th>")}),p+="</tr></thead>";else{if(G0===1)p+="<tbody><tr>";else p+="<tr>";o.split(k).forEach(function(X0){p+="<td>".concat(X0,"</td>")}),p+="</tr>"}}),p+="</tbody></table>",document.execCommand("insertHTML",!1,p),(0,y.ib)(z.wysiwyg.element,G)}X=!1,w.classList.add("vditor-menu--disabled")}else if(Q==="line"){if(A){var r=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;if(A.innerHTML.trim()==="")A.outerHTML=r;else A.insertAdjacentHTML("afterend",r);(0,y.ib)(z.wysiwyg.element,G)}}else{if(X=!1,w.classList.add("vditor-menu--current"),Q==="strike")Q="strikeThrough";if(G.toString()===""&&(Q==="bold"||Q==="italic"||Q==="strikeThrough")){var s="strong";if(Q==="italic")s="em";else if(Q==="strikeThrough")s="s";var x=document.createElement(s);if(x.textContent=P.g.ZWSP,G.insertNode(x),x.previousSibling&&x.previousSibling.textContent===P.g.ZWSP)x.previousSibling.textContent="";G.setStart(x.firstChild,1),G.collapse(!0),(0,y.Hc)(G)}else document.execCommand(Q,!1,"")}}if(X)i0(z);if($)A0(z)},K0=function(){function z(w,Z){var X,$=this;if(this.element=document.createElement("div"),Z.className)(X=this.element.classList).add.apply(X,Z.className.split(" "));var G=Z.hotkey?" <".concat((0,J.ns)(Z.hotkey),">"):"";if(Z.level===2)G=Z.hotkey?" &lt;".concat((0,J.ns)(Z.hotkey),"&gt;"):"";var Q=Z.tip?Z.tip+G:"".concat(window.VditorI18n[Z.name]).concat(G),q=Z.name==="upload"?"div":"button";if(Z.level===2)this.element.innerHTML="<".concat(q,' data-type="').concat(Z.name,'">').concat(Q,"</").concat(q,">");else{this.element.classList.add("vditor-toolbar__item");var V=document.createElement(q);V.setAttribute("data-type",Z.name),V.className="vditor-tooltipped vditor-tooltipped__".concat(Z.tipPosition),V.setAttribute("aria-label",Q),V.innerHTML=Z.icon,this.element.appendChild(V)}if(!Z.prefix)return;this.element.children[0].addEventListener((0,J.Le)(),function(A){if(A.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED))return;if(w.currentMode==="wysiwyg")$8(w,$.element.children[0],A);else if(w.currentMode==="ir")W8(w,$.element.children[0],Z.prefix||"",Z.suffix||"");else J8(w,$.element.children[0],Z.prefix||"",Z.suffix||"")})}return z}(),G8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),n0=function(z,w,Z){var X;if(typeof Z!=="string")D(z,["subToolbar","hint"]),Z.preventDefault(),X=I(z);else X=Z;if(z.currentMode===w&&typeof Z!=="string")return;if(z.devtools)z.devtools.renderEchart(z);if(z.options.preview.mode==="both"&&w==="sv")z.preview.element.style.display="block";else z.preview.element.style.display="none";if(K(z.toolbar.elements,P.g.EDIT_TOOLBARS),O(z.toolbar.elements,P.g.EDIT_TOOLBARS),j(z.toolbar.elements,["outdent","indent"]),w==="ir")S(z.toolbar.elements,["both"]),H(z.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),z.sv.element.style.display="none",z.wysiwyg.element.parentElement.style.display="none",z.ir.element.parentElement.style.display="block",z.lute.SetVditorIR(!0),z.lute.SetVditorWYSIWYG(!1),z.lute.SetVditorSV(!1),z.currentMode="ir",z.ir.element.innerHTML=z.lute.Md2VditorIRDOM(X),m0(z,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),u0(z),z.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(G){B0(G,z)}),z.ir.element.querySelectorAll(".vditor-toc").forEach(function(G){(0,z0.H)(G,{cdn:z.options.cdn,math:z.options.preview.math})});else if(w==="wysiwyg")S(z.toolbar.elements,["both"]),H(z.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),z.sv.element.style.display="none",z.wysiwyg.element.parentElement.style.display="block",z.ir.element.parentElement.style.display="none",z.lute.SetVditorIR(!1),z.lute.SetVditorWYSIWYG(!0),z.lute.SetVditorSV(!1),z.currentMode="wysiwyg",u0(z),Z5(z,X,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),z.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(G){(0,z0.H)(G,{cdn:z.options.cdn,math:z.options.preview.math})}),z.wysiwyg.popover.style.display="none";else if(w==="sv"){if(H(z.toolbar.elements,["both"]),S(z.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),z.wysiwyg.element.parentElement.style.display="none",z.ir.element.parentElement.style.display="none",z.options.preview.mode==="both")z.sv.element.style.display="block";else if(z.options.preview.mode==="editor")z.sv.element.style.display="block";z.lute.SetVditorIR(!1),z.lute.SetVditorWYSIWYG(!1),z.lute.SetVditorSV(!0),z.currentMode="sv";var $=$5(X,z);if($==="<div data-block='0'></div>")$="";z.sv.element.innerHTML=$,W0(z.sv.element),f0(z,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),u0(z)}if(z.undo.resetIcon(z),typeof Z!=="string")z[z.currentMode].element.focus(),z1(z);if(s0(z),W1(z),z.toolbar.elements["edit-mode"])z.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(G){G.classList.remove("vditor-menu--current")}),z.toolbar.elements["edit-mode"].querySelector('button[data-mode="'.concat(z.currentMode,'"]')).classList.add("vditor-menu--current");z.outline.toggle(z,z.currentMode!=="sv"&&z.options.outline.enable,typeof Z!=="string")},Q8=function(z){G8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G=document.createElement("div");return G.className="vditor-hint".concat(X.level===2?"":" vditor-panel--arrow"),G.innerHTML='<button data-mode="wysiwyg">'.concat(window.VditorI18n.wysiwyg," &lt;").concat((0,J.ns)("⌥⌘7"),`></button>
<button data-mode="ir">`).concat(window.VditorI18n.instantRendering," &lt;").concat((0,J.ns)("⌥⌘8"),`></button>
<button data-mode="sv">`).concat(window.VditorI18n.splitView," &lt;").concat((0,J.ns)("⌥⌘9"),"></button>"),$.element.appendChild(G),$._bindEvent(Z,G,X),$}return w.prototype._bindEvent=function(Z,X,$){var G=this.element.children[0];W(Z,X,G,$.level),X.children.item(0).addEventListener((0,J.Le)(),function(Q){n0(Z,"wysiwyg",Q),Q.preventDefault(),Q.stopPropagation()}),X.children.item(1).addEventListener((0,J.Le)(),function(Q){n0(Z,"ir",Q),Q.preventDefault(),Q.stopPropagation()}),X.children.item(2).addEventListener((0,J.Le)(),function(Q){n0(Z,"sv",Q),Q.preventDefault(),Q.stopPropagation()})},w}(K0),J1=function(z,w){if((0,y.Gb)(z,w))return getSelection().toString();return""},T1=function(z,w){w.addEventListener("focus",function(){if(z.options.focus)z.options.focus(I(z));D(z,["subToolbar","hint"])})},X5=function(z,w){w.addEventListener("dblclick",function(Z){if(Z.target.tagName==="IMG"){if(z.options.image.preview)z.options.image.preview(Z.target);else if(z.options.image.isPreview)(0,d.E)(Z.target,z.options.lang,z.options.theme)}})},h1=function(z,w){w.addEventListener("blur",function(Z){if(z.currentMode==="ir"){var X=z.ir.element.querySelector(".vditor-ir__node--expand");if(X)X.classList.remove("vditor-ir__node--expand")}else if(z.currentMode==="wysiwyg"&&!z.wysiwyg.selectPopover.contains(Z.relatedTarget))z.wysiwyg.hideComment();if(z[z.currentMode].range=(0,y.zh)(z),z.options.blur)z.options.blur(I(z))})},k1=function(z,w){w.addEventListener("dragstart",function(Z){Z.dataTransfer.setData(P.g.DROP_EDITOR,P.g.DROP_EDITOR)}),w.addEventListener("drop",function(Z){if(Z.dataTransfer.getData(P.g.DROP_EDITOR))e(z);else if(Z.dataTransfer.types.includes("Files")||Z.dataTransfer.types.includes("text/html"))L1(z,Z,{pasteCode:function(X){document.execCommand("insertHTML",!1,X)}})})},_1=function(z,w,Z){w.addEventListener("copy",function(X){return Z(X,z)})},b1=function(z,w,Z){w.addEventListener("cut",function(X){if(Z(X,z),z.options.comment.enable&&z.currentMode==="wysiwyg")z.wysiwyg.getComments(z);document.execCommand("delete")})},S0=function(z){if(z.currentMode==="wysiwyg"&&z.options.comment.enable)z.options.comment.adjustTop(z.wysiwyg.getComments(z,!0));if(!z.options.typewriterMode)return;var w=z[z.currentMode].element,Z=(0,y.Ny)(w).top;if(z.options.height==="auto"&&!z.element.classList.contains("vditor--fullscreen"))window.scrollTo(window.scrollX,Z+z.element.offsetTop+z.toolbar.element.offsetHeight-window.innerHeight/2+10);if(z.options.height!=="auto"||z.element.classList.contains("vditor--fullscreen"))w.scrollTop=Z+w.scrollTop-w.clientHeight/2+10},u1=function(z,w){w.addEventListener("keydown",function(Z){if(!Z.isComposing&&z.options.keydown)z.options.keydown(Z);if((z.options.hint.extend.length>1||z.toolbar.elements.emoji)&&z.hint.select(Z,z))return;if(z.options.comment.enable&&z.currentMode==="wysiwyg"&&(Z.key==="Backspace"||_("⌘X",Z)))z.wysiwyg.getComments(z);if(z.currentMode==="sv"){if(N0(z,Z))return}else if(z.currentMode==="wysiwyg"){if(w8(z,Z))return}else if(z.currentMode==="ir"){if(V0(z,Z))return}if(z.options.ctrlEnter&&_("⌘Enter",Z)){z.options.ctrlEnter(I(z)),Z.preventDefault();return}if(_("⌘Z",Z)&&!z.toolbar.elements.undo){z.undo.undo(z),Z.preventDefault();return}if(_("⌘Y",Z)&&!z.toolbar.elements.redo){z.undo.redo(z),Z.preventDefault();return}if(Z.key==="Escape"){if(z.hint.element.style.display==="block")z.hint.element.style.display="none";else if(z.options.esc&&!Z.isComposing)z.options.esc(I(z));Z.preventDefault();return}if((0,J.yl)(Z)&&Z.altKey&&!Z.shiftKey&&/^Digit[1-6]$/.test(Z.code)){if(z.currentMode==="wysiwyg"){var X=Z.code.replace("Digit","H");if((0,U.lG)(getSelection().getRangeAt(0).startContainer,X))I1(z);else S1(z,X);A0(z)}else if(z.currentMode==="sv")G5(z,"#".repeat(parseInt(Z.code.replace("Digit",""),10))+" ");else if(z.currentMode==="ir")q1(z,"#".repeat(parseInt(Z.code.replace("Digit",""),10))+" ");return Z.preventDefault(),!0}if((0,J.yl)(Z)&&Z.altKey&&!Z.shiftKey&&/^Digit[7-9]$/.test(Z.code)){if(Z.code==="Digit7")n0(z,"wysiwyg",Z);else if(Z.code==="Digit8")n0(z,"ir",Z);else if(Z.code==="Digit9")n0(z,"sv",Z);return!0}z.options.toolbar.find(function($){if(!$.hotkey||$.toolbar){if($.toolbar){var G=$.toolbar.find(function(Q){if(!Q.hotkey)return!1;if(_(Q.hotkey,Z))return z.toolbar.elements[Q.name].children[0].dispatchEvent(new CustomEvent((0,J.Le)())),Z.preventDefault(),!0});return G?!0:!1}return!1}if(_($.hotkey,Z))return z.toolbar.elements[$.name].children[0].dispatchEvent(new CustomEvent((0,J.Le)())),Z.preventDefault(),!0})})},g1=function(z,w){w.addEventListener("selectstart",function(Z){w.onmouseup=function(){setTimeout(function(){var X=J1(z[z.currentMode].element);if(X.trim()){if(z.currentMode==="wysiwyg"&&z.options.comment.enable)if(!(0,U.a1)(Z.target,"data-type","footnotes-block")&&!(0,U.a1)(Z.target,"data-type","link-ref-defs-block"))z.wysiwyg.showComment();else z.wysiwyg.hideComment();if(z.options.select)z.options.select(X)}else{if(z.currentMode==="wysiwyg"&&z.options.comment.enable)z.wysiwyg.hideComment();if(typeof z.options.unSelect==="function")z.options.unSelect()}})}})},c1=function(z,w){var Z=(0,y.zh)(z);Z.extractContents(),Z.insertNode(document.createTextNode(Lute.Caret)),Z.insertNode(document.createTextNode(w));var X=(0,U.a1)(Z.startContainer,"data-block","0");if(!X)X=z.sv.element;var $=z.lute.SpinVditorSVDOM(X.textContent);if($="<div data-block='0'>"+$.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",X.isEqualNode(z.sv.element))X.innerHTML=$;else X.outerHTML=$;W0(z.sv.element),(0,y.ib)(z.sv.element,Z),S0(z)},P1=function(z,w,Z){if(Z===void 0)Z=!0;var X=z;if(X.nodeType===3)X=X.parentElement;while(X){if(X.getAttribute("data-type")===w)return X;if(Z)X=X.previousElementSibling;else X=X.nextElementSibling}return!1},$5=function(z,w){R("SpinVditorSVDOM",z,"argument",w.options.debugger);var Z=w.lute.SpinVditorSVDOM(z);return z="<div data-block='0'>"+Z.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",R("SpinVditorSVDOM",z,"result",w.options.debugger),z},U8=function(z){var w=z.getAttribute("data-type"),Z=z.previousElementSibling,X=w&&w!=="text"&&w!=="table"&&w!=="heading-marker"&&w!=="newline"&&w!=="yaml-front-matter-open-marker"&&w!=="yaml-front-matter-close-marker"&&w!=="code-block-info"&&w!=="code-block-close-marker"&&w!=="code-block-open-marker"?z.textContent:"",$=!1;if(w==="newline")$=!0;while(Z&&!$){var G=Z.getAttribute("data-type");if(G==="li-marker"||G==="blockquote-marker"||G==="task-marker"||G==="padding"){var Q=Z.textContent;if(G==="li-marker"&&(w==="code-block-open-marker"||w==="code-block-info"))X=Q.replace(/\S/g," ")+X;else if(w==="code-block-close-marker"&&Z.nextElementSibling.isSameNode(z)){var q=P1(z,"code-block-open-marker");if(q&&q.previousElementSibling)Z=q.previousElementSibling,X=Q+X}else X=Q+X}else if(G==="newline")$=!0;Z=Z.previousElementSibling}return X},f0=function(z,w){if(w===void 0)w={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(w.enableHint)z.hint.render(z);z.preview.render(z);var Z=I(z);if(typeof z.options.input==="function"&&w.enableInput)z.options.input(Z);if(z.options.counter.enable)z.counter.render(z,Z);if(z.options.cache.enable&&(0,J.pK)()){if(localStorage.setItem(z.options.cache.id,Z),z.options.cache.after)z.options.cache.after(Z)}if(z.devtools)z.devtools.renderEchart(z);clearTimeout(z.sv.processTimeoutId),z.sv.processTimeoutId=window.setTimeout(function(){if(w.enableAddUndoStack&&!z.sv.composingLock)z.undo.addToUndoStack(z)},z.options.undoDelay)},G5=function(z,w){var Z=(0,y.zh)(z),X=(0,B.S)(Z.startContainer,"SPAN");if(X&&X.textContent.trim()!=="")w=`
`+w;Z.collapse(!0),document.execCommand("insertHTML",!1,w)},J8=function(z,w,Z,X){var $=(0,y.zh)(z),G=w.getAttribute("data-type");if(z.sv.element.childNodes.length===0)z.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,y.ib)(z.sv.element,$);var Q=(0,U.F9)($.startContainer),q=(0,B.S)($.startContainer,"SPAN");if(!Q)return;if(G==="link"){var V=void 0;if($.toString()==="")V="".concat(Z).concat(Lute.Caret).concat(X);else V="".concat(Z).concat($.toString()).concat(X.replace(")",Lute.Caret+")"));document.execCommand("insertHTML",!1,V);return}else if(G==="italic"||G==="bold"||G==="strike"||G==="inline-code"||G==="code"||G==="table"||G==="line"){var V=void 0;if($.toString()==="")V="".concat(Z).concat(Lute.Caret).concat(G==="code"?"":X);else V="".concat(Z).concat($.toString()).concat(Lute.Caret).concat(G==="code"?"":X);if(G==="table"||G==="code"&&q&&q.textContent!=="")V=`

`+V;else if(G==="line")V=`

`.concat(Z,`
`).concat(Lute.Caret);document.execCommand("insertHTML",!1,V);return}else if(G==="check"||G==="list"||G==="ordered-list"||G==="quote"){if(q){var A="* ";if(G==="check")A="* [ ] ";else if(G==="ordered-list")A="1. ";else if(G==="quote")A="> ";var f=P1(q,"newline");if(f)f.insertAdjacentText("afterend",A);else Q.insertAdjacentText("afterbegin",A);Q0(z);return}}(0,y.ib)(z.sv.element,$),f0(z)},Q5=function(z){switch(z.currentMode){case"ir":return z.ir.element;case"wysiwyg":return z.wysiwyg.element;case"sv":return z.sv.element}},U5=function(z,w){if(z.options.upload.setHeaders)z.options.upload.headers=z.options.upload.setHeaders();if(z.options.upload.headers)Object.keys(z.options.upload.headers).forEach(function(Z){w.setRequestHeader(Z,z.options.upload.headers[Z])})},Y8=function(z,w,Z,X){function $(G){return G instanceof Z?G:new Z(function(Q){Q(G)})}return new(Z||(Z=Promise))(function(G,Q){function q(f){try{A(X.next(f))}catch(x){Q(x)}}function V(f){try{A(X.throw(f))}catch(x){Q(x)}}function A(f){f.done?G(f.value):$(f.value).then(q,V)}A((X=X.apply(z,w||[])).next())})},A8=function(z,w){var Z={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},X,$,G,Q;return Q={next:q(0),throw:q(1),return:q(2)},typeof Symbol==="function"&&(Q[Symbol.iterator]=function(){return this}),Q;function q(A){return function(f){return V([A,f])}}function V(A){if(X)throw TypeError("Generator is already executing.");while(Q&&(Q=0,A[0]&&(Z=0)),Z)try{if(X=1,$&&(G=A[0]&2?$.return:A[0]?$.throw||((G=$.return)&&G.call($),0):$.next)&&!(G=G.call($,A[1])).done)return G;if($=0,G)A=[A[0]&2,G.value];switch(A[0]){case 0:case 1:G=A;break;case 4:return Z.label++,{value:A[1],done:!1};case 5:Z.label++,$=A[1],A=[0];continue;case 7:A=Z.ops.pop(),Z.trys.pop();continue;default:if((G=Z.trys,!(G=G.length>0&&G[G.length-1]))&&(A[0]===6||A[0]===2)){Z=0;continue}if(A[0]===3&&(!G||A[1]>G[0]&&A[1]<G[3])){Z.label=A[1];break}if(A[0]===6&&Z.label<G[1]){Z.label=G[1],G=A;break}if(G&&Z.label<G[2]){Z.label=G[2],Z.ops.push(A);break}if(G[2])Z.ops.pop();Z.trys.pop();continue}A=w.call(z,Z)}catch(f){A=[6,f],$=0}finally{X=G=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},q8=function(){function z(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return z}(),j8=function(z,w){z.tip.hide();var Z=[],X="",$="",G=z.options.lang,Q=z.options,q=function(x,b){var h=w[b],T=!0;if(!h.name)X+="<li>".concat(window.VditorI18n.nameEmpty,"</li>"),T=!1;if(h.size>z.options.upload.max)X+="<li>".concat(h.name," ").concat(window.VditorI18n.over," ").concat(z.options.upload.max/1024/1024,"M</li>"),T=!1;var p=h.name.lastIndexOf("."),g=h.name.substr(p),k=z.options.upload.filename(h.name.substr(0,p))+g;if(z.options.upload.accept){var r=z.options.upload.accept.split(",").some(function(s){var o=s.trim();if(o.indexOf(".")===0){if(g.toLowerCase()===o.toLowerCase())return!0}else if(h.type.split("/")[0]===o.split("/")[0])return!0;return!1});if(!r)X+="<li>".concat(h.name," ").concat(window.VditorI18n.fileTypeError,"</li>"),T=!1}if(T)Z.push(h),$+="<li>".concat(k," ").concat(window.VditorI18n.uploading,' <a class="vditorCancelUpload" href="javascript:void(0)">').concat(window.VditorI18n.cancelUpload,"</a></li>")};for(var V=w.length,A=0;A<V;A++)q(V,A);if(z.tip.show("<ul>".concat(X).concat($,"</ul>")),z.options.upload.cancel){var f=z.tip.element.querySelector(".vditorCancelUpload");if(f)f.addEventListener("click",function(){z.options.upload.cancel(Z),z.tip.hide(),z.upload.isUploading=!1})}return Z},F8=function(z,w){var Z=Q5(w);Z.focus();var X=JSON.parse(z),$="";if(X.code===1)$="".concat(X.msg);if(X.data.errFiles&&X.data.errFiles.length>0)$="<ul><li>".concat($,"</li>"),X.data.errFiles.forEach(function(Q){var q=Q.lastIndexOf("."),V=w.options.upload.filename(Q.substr(0,q))+Q.substr(q);$+="<li>".concat(V," ").concat(window.VditorI18n.uploadError,"</li>")}),$+="</ul>";if($)w.tip.show($);else w.tip.hide();var G="";Object.keys(X.data.succMap).forEach(function(Q){var q=X.data.succMap[Q],V=Q.lastIndexOf("."),A=Q.substr(V),f=w.options.upload.filename(Q.substr(0,V))+A;if(A=A.toLowerCase(),A.indexOf(".wav")===0||A.indexOf(".mp3")===0||A.indexOf(".ogg")===0)if(w.currentMode==="wysiwyg")G+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`.concat(q,'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="').concat(q,`"></audio></pre></div>
`);else if(w.currentMode==="ir")G+='<audio controls="controls" src="'.concat(q,`"></audio>
`);else G+="[".concat(f,"](").concat(q,`)
`);else if(A.indexOf(".apng")===0||A.indexOf(".bmp")===0||A.indexOf(".gif")===0||A.indexOf(".ico")===0||A.indexOf(".cur")===0||A.indexOf(".jpg")===0||A.indexOf(".jpeg")===0||A.indexOf(".jfif")===0||A.indexOf(".pjp")===0||A.indexOf(".pjpeg")===0||A.indexOf(".png")===0||A.indexOf(".svg")===0||A.indexOf(".webp")===0)if(w.currentMode==="wysiwyg")G+='<img alt="'.concat(f,'" src="').concat(q,`">
`);else G+="![".concat(f,"](").concat(q,`)
`);else if(w.currentMode==="wysiwyg")G+='<a href="'.concat(q,'">').concat(f,`</a>
`);else G+="[".concat(f,"](").concat(q,`)
`)}),(0,y.Hc)(w.upload.range),document.execCommand("insertHTML",!1,G),w.upload.range=getSelection().getRangeAt(0).cloneRange()},p1=function(z,w,Z){return Y8(void 0,void 0,void 0,function(){var X,$,T,G,Q,Q,q,V,A,f,x,b,h,T,p,g;return A8(this,function(k){switch(k.label){case 0:X=[],$=z.options.upload.multiple===!0?w.length:1;for(T=0;T<$;T++){if(G=w[T],G instanceof DataTransferItem)G=G.getAsFile();X.push(G)}if(!z.options.upload.handler)return[3,2];return[4,z.options.upload.handler(X)];case 1:if(Q=k.sent(),Z)Z.value="";if(typeof Q==="string")return z.tip.show(Q),[2];return[2];case 2:if(!z.options.upload.url||!z.upload){if(Z)Z.value="";return z.tip.show("please config: options.upload.url"),[2]}if(!z.options.upload.file)return[3,4];return[4,z.options.upload.file(X)];case 3:X=k.sent(),k.label=4;case 4:if(z.options.upload.validate){if(Q=z.options.upload.validate(X),typeof Q==="string")return z.tip.show(Q),[2]}if(q=Q5(z),z.upload.range=(0,y.zh)(z),V=j8(z,X),V.length===0){if(Z)Z.value="";return[2]}A=new FormData,f=z.options.upload.extraData;for(x=0,b=Object.keys(f);x<b.length;x++)h=b[x],A.append(h,f[h]);for(T=0,p=V.length;T<p;T++)A.append(z.options.upload.fieldName,V[T]);if(g=new XMLHttpRequest,z.upload.xhr=g,g.open("POST",z.options.upload.url),z.options.upload.token)g.setRequestHeader("X-Upload-Token",z.options.upload.token);if(z.options.upload.withCredentials)g.withCredentials=!0;return U5(z,g),z.upload.isUploading=!0,q.setAttribute("contenteditable","false"),g.onreadystatechange=function(){if(g.readyState===XMLHttpRequest.DONE){if(z.upload.isUploading=!1,q.setAttribute("contenteditable","true"),g.status>=200&&g.status<300)if(z.options.upload.success)z.options.upload.success(q,g.responseText);else{var r=g.responseText;if(z.options.upload.format)r=z.options.upload.format(w,g.responseText);F8(r,z)}else if(z.options.upload.error)z.options.upload.error(g.responseText);else z.tip.show(g.responseText);if(Z)Z.value="";z.upload.element.style.display="none",z.upload.xhr=void 0}},g.upload.onprogress=function(r){if(!r.lengthComputable)return;var s=r.loaded/r.total*100;z.upload.element.style.display="block";var o=z.upload.element;o.style.width=s+"%"},g.send(A),[2]}})})},B1=function(z,w,Z){var X,$=(0,U.F9)(w.startContainer);if(!$)$=z.wysiwyg.element;if(Z&&Z.inputType!=="formatItalic"&&Z.inputType!=="deleteByDrag"&&Z.inputType!=="insertFromDrop"&&Z.inputType!=="formatBold"&&Z.inputType!=="formatRemove"&&Z.inputType!=="formatStrikeThrough"&&Z.inputType!=="insertUnorderedList"&&Z.inputType!=="insertOrderedList"&&Z.inputType!=="formatOutdent"&&Z.inputType!=="formatIndent"&&Z.inputType!==""||!Z){var G=n5(w.startContainer);if(G)G.remove();z.wysiwyg.element.querySelectorAll("wbr").forEach(function(s){s.remove()}),w.insertNode(document.createElement("wbr")),$.querySelectorAll("[style]").forEach(function(s){s.removeAttribute("style")}),$.querySelectorAll(".vditor-comment").forEach(function(s){if(s.textContent.trim()==="")s.classList.remove("vditor-comment","vditor-comment--focus"),s.removeAttribute("data-cmtids")}),(X=$.previousElementSibling)===null||X===void 0||X.querySelectorAll(".vditor-comment").forEach(function(s){if(s.textContent.trim()==="")s.classList.remove("vditor-comment","vditor-comment--focus"),s.removeAttribute("data-cmtids")});var Q="";if($.getAttribute("data-type")==="link-ref-defs-block")$=z.wysiwyg.element;var q=$.isEqualNode(z.wysiwyg.element),V=(0,U.a1)($,"data-type","footnotes-block");if(!q){var A=(0,U.O9)(w.startContainer);if(A&&!V){var f=(0,B.S)(w.startContainer,"BLOCKQUOTE");if(f)$=(0,U.F9)(w.startContainer)||$;else $=A}if(V)$=V;if(Q=$.outerHTML,$.tagName==="UL"||$.tagName==="OL"){var{previousElementSibling:x,nextElementSibling:b}=$;if(x&&(x.tagName==="UL"||x.tagName==="OL"))Q=x.outerHTML+Q,x.remove();if(b&&(b.tagName==="UL"||b.tagName==="OL"))Q=Q+b.outerHTML,b.remove();Q=Q.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}if(!$.innerText.startsWith("```"))z.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(s){if(s&&!$.isEqualNode(s))Q+=s.outerHTML,s.remove()}),z.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(s){if(s&&!$.isEqualNode(s))Q+=s.outerHTML,s.remove()})}else Q=$.innerHTML;if(Q=Q.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),Q==='<p data-block="0">```<wbr></p>'&&z.hint.recentLanguage)Q='<p data-block="0">```<wbr></p>'.replace("```","```"+z.hint.recentLanguage);if(R("SpinVditorDOM",Q,"argument",z.options.debugger),Q=z.lute.SpinVditorDOM(Q),R("SpinVditorDOM",Q,"result",z.options.debugger),q)$.innerHTML=Q;else if($.outerHTML=Q,V){var h=(0,U.E2)(z.wysiwyg.element.querySelector("wbr"),"LI");if(h){var T=z.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(h.getAttribute("data-marker"),'"]'));if(T)T.setAttribute("aria-label",h.textContent.trim().substr(0,24))}}var p,g=z.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");if(g.forEach(function(s,o){if(o===0)p=s;else p.insertAdjacentHTML("beforeend",s.innerHTML),s.remove()}),g.length>0)z.wysiwyg.element.insertAdjacentElement("beforeend",g[0]);var k,r=z.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");if(r.forEach(function(s,o){if(o===0)k=s;else k.insertAdjacentHTML("beforeend",s.innerHTML),s.remove()}),r.length>0)z.wysiwyg.element.insertAdjacentElement("beforeend",r[0]);if((0,y.ib)(z.wysiwyg.element,w),z.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(s){B0(s,z)}),Z&&(Z.inputType==="deleteContentBackward"||Z.inputType==="deleteContentForward")&&z.options.comment.enable)z.wysiwyg.triggerRemoveComment(z),z.options.comment.adjustTop(z.wysiwyg.getComments(z,!0))}s0(z),A0(z,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},V8=function(z,w){if(Object.defineProperty)Object.defineProperty(z,"raw",{value:w});else z.raw=w;return z},J5=function(z,w,Z,X){function $(G){return G instanceof Z?G:new Z(function(Q){Q(G)})}return new(Z||(Z=Promise))(function(G,Q){function q(f){try{A(X.next(f))}catch(x){Q(x)}}function V(f){try{A(X.throw(f))}catch(x){Q(x)}}function A(f){f.done?G(f.value):$(f.value).then(q,V)}A((X=X.apply(z,w||[])).next())})},Y5=function(z,w){var Z={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},X,$,G,Q;return Q={next:q(0),throw:q(1),return:q(2)},typeof Symbol==="function"&&(Q[Symbol.iterator]=function(){return this}),Q;function q(A){return function(f){return V([A,f])}}function V(A){if(X)throw TypeError("Generator is already executing.");while(Q&&(Q=0,A[0]&&(Z=0)),Z)try{if(X=1,$&&(G=A[0]&2?$.return:A[0]?$.throw||((G=$.return)&&G.call($),0):$.next)&&!(G=G.call($,A[1])).done)return G;if($=0,G)A=[A[0]&2,G.value];switch(A[0]){case 0:case 1:G=A;break;case 4:return Z.label++,{value:A[1],done:!1};case 5:Z.label++,$=A[1],A=[0];continue;case 7:A=Z.ops.pop(),Z.trys.pop();continue;default:if((G=Z.trys,!(G=G.length>0&&G[G.length-1]))&&(A[0]===6||A[0]===2)){Z=0;continue}if(A[0]===3&&(!G||A[1]>G[0]&&A[1]<G[3])){Z.label=A[1];break}if(A[0]===6&&Z.label<G[1]){Z.label=G[1],G=A;break}if(G&&Z.label<G[2]){Z.label=G[2],Z.ops.push(A);break}if(G[2])Z.ops.pop();Z.trys.pop();continue}A=w.call(z,Z)}catch(f){A=[6,f],$=0}finally{X=G=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},A5=function(z,w,Z){if(z.keyCode===229&&z.code===""&&z.key==="Unidentified"&&w.currentMode!=="sv"){var X=(0,U.F9)(Z);if(X&&X.textContent.trim()==="")return w[w.currentMode].composingLock=!0,!1}return!0},q5=function(z,w,Z){if(Z.key==="Enter"||Z.key==="Tab"||Z.key==="Backspace"||Z.key.indexOf("Arrow")>-1||(0,J.yl)(Z)||Z.key==="Escape"||Z.shiftKey||Z.altKey)return;var X=(0,U.lG)(z.startContainer,"P")||(0,U.lG)(z.startContainer,"LI");if(X&&(0,y.im)(X,w[w.currentMode].element,z).start===0){if(X.nodeValue)X.nodeValue=X.nodeValue.replace(/\u2006/g,"");var $=document.createTextNode(P.g.ZWSP);z.insertNode($),z.setStartAfter($)}},j5=function(z,w){if(w==="ArrowDown"||w==="ArrowUp"){var Z=(0,U.a1)(z.startContainer,"data-type","math-inline")||(0,U.a1)(z.startContainer,"data-type","html-entity")||(0,U.a1)(z.startContainer,"data-type","html-inline");if(Z){if(w==="ArrowDown")z.setStartAfter(Z.parentElement);if(w==="ArrowUp")z.setStartBefore(Z.parentElement)}}},Y1=function(z,w){var Z=(0,y.zh)(z),X=(0,U.F9)(Z.startContainer);if(X)X.insertAdjacentHTML(w,'<p data-block="0">'.concat(P.g.ZWSP,`<wbr>
</p>`)),(0,y.ib)(z[z.currentMode].element,Z),z1(z),e(z)},K8=function(z){var w=(0,U.lG)(z,"TABLE");if(w&&w.rows[0].cells[0].isSameNode(z))return w;return!1},O8=function(z){var w=(0,U.lG)(z,"TABLE");if(w&&w.lastElementChild.lastElementChild.lastElementChild.isSameNode(z))return w;return!1},F5=function(z,w,Z){if(Z===void 0)Z=!0;var X=z.previousElementSibling;if(!X)if(z.parentElement.previousElementSibling)X=z.parentElement.previousElementSibling.lastElementChild;else if(z.parentElement.parentElement.tagName==="TBODY"&&z.parentElement.parentElement.previousElementSibling)X=z.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild;else X=null;if(X){if(w.selectNodeContents(X),!Z)w.collapse(!1);(0,y.Hc)(w)}return X},A1=function(z,w,Z,X,$){var G=(0,y.im)(X,z[z.currentMode].element,Z);if(w.key==="ArrowDown"&&X.textContent.trimRight().substr(G.start).indexOf(`
`)===-1||w.key==="ArrowRight"&&G.start>=X.textContent.trimRight().length){var Q=$.nextElementSibling;if(!Q||Q&&(Q.tagName==="TABLE"||Q.getAttribute("data-type")))$.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(P.g.ZWSP,"<wbr></p>")),(0,y.ib)(z[z.currentMode].element,Z);else Z.selectNodeContents(Q),Z.collapse(!0),(0,y.Hc)(Z);return w.preventDefault(),!0}return!1},w1=function(z,w,Z,X,$){var G=(0,y.im)(X,z[z.currentMode].element,Z);if(w.key==="ArrowUp"&&X.textContent.substr(0,G.start).indexOf(`
`)===-1||(w.key==="ArrowLeft"||w.key==="Backspace"&&Z.toString()==="")&&G.start===0){var Q=$.previousElementSibling;if(!Q||Q&&(Q.tagName==="TABLE"||Q.getAttribute("data-type")))$.insertAdjacentHTML("beforebegin",'<p data-block="0">'.concat(P.g.ZWSP,"<wbr></p>")),(0,y.ib)(z[z.currentMode].element,Z);else Z.selectNodeContents(Q),Z.collapse(!1),(0,y.Hc)(Z);return w.preventDefault(),!0}return!1},f1=function(z,w,Z,X){if(X===void 0)X=!0;var $=(0,U.lG)(w.startContainer,"LI");if(z[z.currentMode].element.querySelectorAll("wbr").forEach(function(f){f.remove()}),w.insertNode(document.createElement("wbr")),X&&$){var G="";for(var Q=0;Q<$.parentElement.childElementCount;Q++){var q=$.parentElement.children[Q].querySelector("input");if(q)q.remove();G+='<p data-block="0">'.concat($.parentElement.children[Q].innerHTML.trimLeft(),"</p>")}$.parentElement.insertAdjacentHTML("beforebegin",G),$.parentElement.remove()}else if(!$){var V=(0,U.a1)(w.startContainer,"data-block","0");if(!V)z[z.currentMode].element.querySelector("wbr").remove(),V=z[z.currentMode].element.querySelector("p"),V.innerHTML="<wbr>";if(Z==="check")V.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '.concat(V.innerHTML,"</li></ul>")),V.remove();else if(Z==="list")V.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'.concat(V.innerHTML,"</li></ul>")),V.remove();else if(Z==="ordered-list")V.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'.concat(V.innerHTML,"</li></ol>")),V.remove()}else if(Z==="check")$.parentElement.querySelectorAll("li").forEach(function(f){f.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'.concat(f.textContent.indexOf(" ")===0?"":" ")),f.classList.add("vditor-task")});else{if($.querySelector("input"))$.parentElement.querySelectorAll("li").forEach(function(f){f.querySelector("input").remove(),f.classList.remove("vditor-task")});var A=void 0;if(Z==="list")A=document.createElement("ul"),A.setAttribute("data-marker","*");else A=document.createElement("ol"),A.setAttribute("data-marker","1.");A.setAttribute("data-block","0"),A.setAttribute("data-tight",$.parentElement.getAttribute("data-tight")),A.innerHTML=$.parentElement.innerHTML,$.parentElement.parentNode.replaceChild(A,$.parentElement)}},V5=function(z,w,Z){var X=w.previousElementSibling;if(w&&X){var $=[w];Array.from(Z.cloneContents().children).forEach(function(V,A){if(V.nodeType!==3&&w&&V.textContent.trim()!==""&&w.getAttribute("data-node-id")===V.getAttribute("data-node-id")){if(A!==0)$.push(w);w=w.nextElementSibling}}),z[z.currentMode].element.querySelectorAll("wbr").forEach(function(V){V.remove()}),Z.insertNode(document.createElement("wbr"));var G=X.parentElement,Q="";if($.forEach(function(V){var A=V.getAttribute("data-marker");if(A.length!==1)A="1".concat(A.slice(-1));Q+='<li data-node-id="'.concat(V.getAttribute("data-node-id"),'" data-marker="').concat(A,'">').concat(V.innerHTML,"</li>"),V.remove()}),X.insertAdjacentHTML("beforeend","<".concat(G.tagName,' data-block="0">').concat(Q,"</").concat(G.tagName,">")),z.currentMode==="wysiwyg")G.outerHTML=z.lute.SpinVditorDOM(G.outerHTML);else G.outerHTML=z.lute.SpinVditorIRDOM(G.outerHTML);(0,y.ib)(z[z.currentMode].element,Z);var q=(0,U.O9)(Z.startContainer);if(q)q.querySelectorAll(".vditor-".concat(z.currentMode,"__preview[data-render='2']")).forEach(function(V){if(B0(V,z),z.currentMode==="wysiwyg")V.previousElementSibling.setAttribute("style","display:none")});e(z),z1(z)}else z[z.currentMode].element.focus()},E1=function(z,w,Z,X){var $=(0,U.lG)(w.parentElement,"LI");if($){z[z.currentMode].element.querySelectorAll("wbr").forEach(function(x){x.remove()}),Z.insertNode(document.createElement("wbr"));var G=w.parentElement,Q=G.cloneNode(),q=[w];Array.from(Z.cloneContents().children).forEach(function(x,b){if(x.nodeType!==3&&w&&x.textContent.trim()!==""&&w.getAttribute("data-node-id")===x.getAttribute("data-node-id")){if(b!==0)q.push(w);w=w.nextElementSibling}});var V=!1,A="";if(G.querySelectorAll("li").forEach(function(x){if(V)if(A+=x.outerHTML,!x.nextElementSibling&&!x.previousElementSibling)x.parentElement.remove();else x.remove();if(x.isSameNode(q[q.length-1]))V=!0}),q.reverse().forEach(function(x){$.insertAdjacentElement("afterend",x)}),A)Q.innerHTML=A,q[0].insertAdjacentElement("beforeend",Q);if(z.currentMode==="wysiwyg")X.outerHTML=z.lute.SpinVditorDOM(X.outerHTML);else X.outerHTML=z.lute.SpinVditorIRDOM(X.outerHTML);(0,y.ib)(z[z.currentMode].element,Z);var f=(0,U.O9)(Z.startContainer);if(f)f.querySelectorAll(".vditor-".concat(z.currentMode,"__preview[data-render='2']")).forEach(function(x){if(B0(x,z),z.currentMode==="wysiwyg")x.previousElementSibling.setAttribute("style","display:none")});e(z),z1(z)}else z[z.currentMode].element.focus()},H1=function(z,w){var Z=getSelection().getRangeAt(0).startContainer.parentElement,X=z.rows[0].cells.length,$=z.rows.length,G=0;for(var Q=0;Q<$;Q++)for(var q=0;q<X;q++)if(z.rows[Q].cells[q].isSameNode(Z)){G=q;break}for(var V=0;V<$;V++)z.rows[V].cells[G].setAttribute("align",w)},s1=function(z){var w=z.trimRight().split(`
`).pop();if(w==="")return!1;if(w.replace(/ |-/g,"")===""||w.replace(/ |_/g,"")===""||w.replace(/ |\*/g,"")===""){if(w.replace(/ /g,"").length>2){if(w.indexOf("-")>-1&&w.trimLeft().indexOf(" ")===-1&&z.trimRight().split(`
`).length>1)return!1;if(w.indexOf("    ")===0||w.indexOf("\t")===0)return!1;return!0}return!1}return!1},a1=function(z){var w=z.trimRight().split(`
`);if(z=w.pop(),z.indexOf("    ")===0||z.indexOf("\t")===0)return!1;if(z=z.trimLeft(),z===""||w.length===0)return!1;if(z.replace(/-/g,"")===""||z.replace(/=/g,"")==="")return!0;return!1},e=function(z,w){if(w===void 0)w={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(z.currentMode==="wysiwyg")A0(z,w);else if(z.currentMode==="ir")m0(z,w);else if(z.currentMode==="sv")f0(z,w)},K5=function(z,w,Z,X){var $,G=z.startContainer,Q=(0,U.lG)(G,"LI");if(Q){if(!(0,J.yl)(X)&&!X.altKey&&X.key==="Enter"&&(!X.shiftKey&&Z&&Q.contains(Z)&&Z.nextElementSibling)){if(Q&&!Q.textContent.endsWith(`
`))Q.insertAdjacentText("beforeend",`
`);return z.insertNode(document.createTextNode(`

`)),z.collapse(!1),e(w),X.preventDefault(),!0}if(!(0,J.yl)(X)&&!X.shiftKey&&!X.altKey&&X.key==="Backspace"&&!Q.previousElementSibling&&z.toString()===""&&(0,y.im)(Q,w[w.currentMode].element,z).start===0){if(Q.nextElementSibling)Q.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(Q.innerHTML,"</p>")),Q.remove();else Q.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(Q.innerHTML,"</p>");return(0,y.ib)(w[w.currentMode].element,z),e(w),X.preventDefault(),!0}if(!(0,J.yl)(X)&&!X.shiftKey&&!X.altKey&&X.key==="Backspace"&&Q.textContent.trim().replace(P.g.ZWSP,"")===""&&z.toString()===""&&(($=Q.previousElementSibling)===null||$===void 0?void 0:$.tagName)==="LI")return Q.previousElementSibling.insertAdjacentText("beforeend",`

`),z.selectNodeContents(Q.previousElementSibling),z.collapse(!1),Q.remove(),(0,y.ib)(w[w.currentMode].element,z),e(w),X.preventDefault(),!0;if(!(0,J.yl)(X)&&!X.altKey&&X.key==="Tab"){var q=!1;if(z.startOffset===0&&(G.nodeType===3&&!G.previousSibling||G.nodeType!==3&&G.nodeName==="LI"))q=!0;else if(Q.classList.contains("vditor-task")&&z.startOffset===1&&G.previousSibling.nodeType!==3&&G.previousSibling.tagName==="INPUT")q=!0;if(q||z.toString()!==""){if(X.shiftKey)E1(w,Q,z,Q.parentElement);else V5(w,Q,z);return X.preventDefault(),!0}}}return!1},l1=function(z,w,Z){if(z.options.tab&&Z.key==="Tab"){if(Z.shiftKey);else if(w.toString()==="")w.insertNode(document.createTextNode(z.options.tab)),w.collapse(!1);else w.extractContents(),w.insertNode(document.createTextNode(z.options.tab)),w.collapse(!1);return(0,y.Hc)(w),e(z),Z.preventDefault(),!0}},O5=function(z,w,Z,X){if(!Z)return;if(!(0,J.yl)(z)&&!z.altKey&&z.key==="Enter"){var $=String.raw(R5||(R5=V8(["",""],["",""])),Z.textContent).replace(/\\\|/g,"").trim(),G=$.split("|");if($.startsWith("|")&&$.endsWith("|")&&G.length>3){var Q=G.map(function(){return"---"}).join("|");return Q=Z.textContent+`
`+Q.substring(3,Q.length-3)+`
|<wbr>`,Z.outerHTML=w.lute.SpinVditorDOM(Q),(0,y.ib)(w[w.currentMode].element,X),e(w),S0(w),z.preventDefault(),!0}if(s1(Z.innerHTML)&&Z.previousElementSibling){var q="",V=Z.innerHTML.trimRight().split(`
`);if(V.length>1)V.pop(),q='<p data-block="0">'.concat(V.join(`
`),"</p>");return Z.insertAdjacentHTML("afterend","".concat(q,`<hr data-block="0"><p data-block="0"><wbr>
</p>`)),Z.remove(),(0,y.ib)(w[w.currentMode].element,X),e(w),S0(w),z.preventDefault(),!0}if(a1(Z.innerHTML)){if(w.currentMode==="wysiwyg")Z.outerHTML=w.lute.SpinVditorDOM(Z.innerHTML+`<p data-block="0"><wbr>
</p>`);else Z.outerHTML=w.lute.SpinVditorIRDOM(Z.innerHTML+`<p data-block="0"><wbr>
</p>`);return(0,y.ib)(w[w.currentMode].element,X),e(w),S0(w),z.preventDefault(),!0}}if(X.collapsed&&Z.previousElementSibling&&z.key==="Backspace"&&!(0,J.yl)(z)&&!z.altKey&&!z.shiftKey&&Z.textContent.trimRight().split(`
`).length>1&&(0,y.im)(Z,w[w.currentMode].element,X).start===0){var A=(0,U.DX)(Z.previousElementSibling);if(!A.textContent.endsWith(`
`))A.textContent=A.textContent+`
`;return A.parentElement.insertAdjacentHTML("beforeend","<wbr>".concat(Z.innerHTML)),Z.remove(),(0,y.ib)(w[w.currentMode].element,X),!1}return!1},D5=function(z,w,Z){var X="";for(var $=0;$<Z.parentElement.childElementCount;$++)X+='<td align="'.concat(Z.parentElement.children[$].getAttribute("align"),'"> </td>');if(Z.tagName==="TH")Z.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>".concat(X,"</tr></tbody>"));else Z.parentElement.insertAdjacentHTML("afterend","<tr>".concat(X,"</tr>"));e(z)},W5=function(z,w,Z){var X="";for(var $=0;$<Z.parentElement.childElementCount;$++)if(Z.tagName==="TH")X+='<th align="'.concat(Z.parentElement.children[$].getAttribute("align"),'"> </th>');else X+='<td align="'.concat(Z.parentElement.children[$].getAttribute("align"),'"> </td>');if(Z.tagName==="TH"){Z.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>".concat(X,"</tr></thead>")),w.insertNode(document.createElement("wbr"));var G=Z.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");Z.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",G),Z.parentElement.parentElement.remove(),(0,y.ib)(z.ir.element,w)}else Z.parentElement.insertAdjacentHTML("beforebegin","<tr>".concat(X,"</tr>"));e(z)},N1=function(z,w,Z,X){if(X===void 0)X="afterend";var $=0,G=Z.previousElementSibling;while(G)$++,G=G.previousElementSibling;for(var Q=0;Q<w.rows.length;Q++)if(Q===0)w.rows[Q].cells[$].insertAdjacentHTML(X,"<th> </th>");else w.rows[Q].cells[$].insertAdjacentHTML(X,"<td> </td>");e(z)},S5=function(z,w,Z){if(Z.tagName==="TD"){var X=Z.parentElement.parentElement;if(Z.parentElement.previousElementSibling)w.selectNodeContents(Z.parentElement.previousElementSibling.lastElementChild);else w.selectNodeContents(X.previousElementSibling.lastElementChild.lastElementChild);if(X.childElementCount===1)X.remove();else Z.parentElement.remove();w.collapse(!1),(0,y.Hc)(w),e(z)}},P5=function(z,w,Z,X){var $=0,G=X.previousElementSibling;while(G)$++,G=G.previousElementSibling;if(X.previousElementSibling||X.nextElementSibling)w.selectNodeContents(X.previousElementSibling||X.nextElementSibling),w.collapse(!0);for(var Q=0;Q<Z.rows.length;Q++){var q=Z.rows[Q].cells;if(q.length===1){Z.remove(),z1(z);break}q[$].remove()}(0,y.Hc)(w),e(z)},B5=function(z,w,Z){var X=Z.startContainer,$=(0,U.lG)(X,"TD")||(0,U.lG)(X,"TH");if($){if(!(0,J.yl)(w)&&!w.altKey&&w.key==="Enter"){if(!$.lastElementChild||$.lastElementChild&&(!$.lastElementChild.isSameNode($.lastChild)||$.lastElementChild.tagName!=="BR"))$.insertAdjacentHTML("beforeend","<br>");var G=document.createElement("br");return Z.insertNode(G),Z.setStartAfter(G),e(z),S0(z),w.preventDefault(),!0}if(w.key==="Tab"){if(w.shiftKey)return F5($,Z),w.preventDefault(),!0;var Q=$.nextElementSibling;if(!Q)if($.parentElement.nextElementSibling)Q=$.parentElement.nextElementSibling.firstElementChild;else if($.parentElement.parentElement.tagName==="THEAD"&&$.parentElement.parentElement.nextElementSibling)Q=$.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;else Q=null;if(Q)Z.selectNodeContents(Q),(0,y.Hc)(Z);return w.preventDefault(),!0}var q=$.parentElement.parentElement.parentElement;if(w.key==="ArrowUp"){if(w.preventDefault(),$.tagName==="TH"){if(q.previousElementSibling)Z.selectNodeContents(q.previousElementSibling),Z.collapse(!1),(0,y.Hc)(Z);else Y1(z,"beforebegin");return!0}var V=0,A=$.parentElement;for(;V<A.cells.length;V++)if(A.cells[V].isSameNode($))break;var f=A.previousElementSibling;if(!f)f=A.parentElement.previousElementSibling.firstChild;return Z.selectNodeContents(f.cells[V]),Z.collapse(!1),(0,y.Hc)(Z),!0}if(w.key==="ArrowDown"){w.preventDefault();var A=$.parentElement;if(!A.nextElementSibling&&$.tagName==="TD"){if(q.nextElementSibling)Z.selectNodeContents(q.nextElementSibling),Z.collapse(!0),(0,y.Hc)(Z);else Y1(z,"afterend");return!0}var V=0;for(;V<A.cells.length;V++)if(A.cells[V].isSameNode($))break;var Q=A.nextElementSibling;if(!Q)Q=A.parentElement.nextElementSibling.firstChild;return Z.selectNodeContents(Q.cells[V]),Z.collapse(!0),(0,y.Hc)(Z),!0}if(z.currentMode==="wysiwyg"&&!(0,J.yl)(w)&&w.key==="Enter"&&!w.shiftKey&&w.altKey){var x=z.wysiwyg.popover.querySelector(".vditor-input");return x.focus(),x.select(),w.preventDefault(),!0}if(!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey&&w.key==="Backspace"&&Z.startOffset===0&&Z.toString()===""){var b=F5($,Z,!1);if(!b&&q){if(q.textContent.trim()==="")q.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,y.ib)(z[z.currentMode].element,Z);else Z.setStartBefore(q),Z.collapse(!0);e(z)}return w.preventDefault(),!0}if(_("⇧⌘F",w))return W5(z,Z,$),w.preventDefault(),!0;if(_("⌘=",w))return D5(z,Z,$),w.preventDefault(),!0;if(_("⇧⌘G",w))return N1(z,q,$,"beforebegin"),w.preventDefault(),!0;if(_("⇧⌘=",w))return N1(z,q,$),w.preventDefault(),!0;if(_("⌘-",w))return S5(z,Z,$),w.preventDefault(),!0;if(_("⇧⌘-",w))return P5(z,Z,q,$),w.preventDefault(),!0;if(_("⇧⌘L",w))if(z.currentMode==="ir")return H1(q,"left"),e(z),w.preventDefault(),!0;else{var h=z.wysiwyg.popover.querySelector('[data-type="left"]');if(h)return h.click(),w.preventDefault(),!0}if(_("⇧⌘C",w))if(z.currentMode==="ir")return H1(q,"center"),e(z),w.preventDefault(),!0;else{var h=z.wysiwyg.popover.querySelector('[data-type="center"]');if(h)return h.click(),w.preventDefault(),!0}if(_("⇧⌘R",w))if(z.currentMode==="ir")return H1(q,"right"),e(z),w.preventDefault(),!0;else{var h=z.wysiwyg.popover.querySelector('[data-type="right"]');if(h)return h.click(),w.preventDefault(),!0}}return!1},f5=function(z,w,Z,X){if(Z.tagName==="PRE"&&_("⌘A",w))return X.selectNodeContents(Z.firstElementChild),w.preventDefault(),!0;if(z.options.tab&&w.key==="Tab"&&!w.shiftKey&&X.toString()==="")return X.insertNode(document.createTextNode(z.options.tab)),X.collapse(!1),e(z),w.preventDefault(),!0;if(w.key==="Backspace"&&!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey){var $=(0,y.im)(Z,z[z.currentMode].element,X);if(($.start===0||$.start===1&&Z.innerText===`
`)&&X.toString()==="")return Z.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(Z.firstElementChild.innerHTML,"</p>"),(0,y.ib)(z[z.currentMode].element,X),e(z),w.preventDefault(),!0}if(!(0,J.yl)(w)&&!w.altKey&&w.key==="Enter"){if(!Z.firstElementChild.textContent.endsWith(`
`))Z.firstElementChild.insertAdjacentText("beforeend",`
`);if(X.extractContents(),X.insertNode(document.createTextNode(`
`)),X.collapse(!1),(0,y.Hc)(X),!(0,J.vU)())if(z.currentMode==="wysiwyg")B1(z,X);else o0(z,X);return S0(z),w.preventDefault(),!0}return!1},H5=function(z,w,Z,X){var $=w.startContainer,G=(0,U.lG)($,"BLOCKQUOTE");if(G&&w.toString()===""){if(Z.key==="Backspace"&&!(0,J.yl)(Z)&&!Z.shiftKey&&!Z.altKey&&(0,y.im)(G,z[z.currentMode].element,w).start===0)return w.insertNode(document.createElement("wbr")),G.outerHTML=G.innerHTML,(0,y.ib)(z[z.currentMode].element,w),e(z),Z.preventDefault(),!0;if(X&&Z.key==="Enter"&&!(0,J.yl)(Z)&&!Z.shiftKey&&!Z.altKey&&X.parentElement.tagName==="BLOCKQUOTE"){var Q=!1;if(X.innerHTML.replace(P.g.ZWSP,"")===`
`||X.innerHTML.replace(P.g.ZWSP,"")==="")Q=!0,X.remove();else if(X.innerHTML.endsWith(`

`)&&(0,y.im)(X,z[z.currentMode].element,w).start===X.textContent.length-1)X.innerHTML=X.innerHTML.substr(0,X.innerHTML.length-2),Q=!0;if(Q)return G.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(P.g.ZWSP,`<wbr>
</p>`)),(0,y.ib)(z[z.currentMode].element,w),e(z),Z.preventDefault(),!0}var q=(0,U.F9)($);if(z.currentMode==="wysiwyg"&&q&&_("⇧⌘;",Z))return w.insertNode(document.createElement("wbr")),q.outerHTML='<blockquote data-block="0">'.concat(q.outerHTML,"</blockquote>"),(0,y.ib)(z.wysiwyg.element,w),A0(z),Z.preventDefault(),!0;if(A1(z,Z,w,G,G))return!0;if(w1(z,Z,w,G,G))return!0}return!1},N5=function(z,w,Z){var X=w.startContainer,$=(0,U.lG)(X,"LI");if($&&$.classList.contains("vditor-task")){if(_("⇧⌘J",Z)){var G=$.firstElementChild;if(G.checked)G.removeAttribute("checked");else G.setAttribute("checked","checked");return e(z),Z.preventDefault(),!0}if(Z.key==="Backspace"&&!(0,J.yl)(Z)&&!Z.shiftKey&&!Z.altKey&&w.toString()===""&&w.startOffset===1&&(X.nodeType===3&&X.previousSibling&&X.previousSibling.tagName==="INPUT"||X.nodeType!==3)){var Q=$.previousElementSibling;if($.querySelector("input").remove(),Q){var q=(0,U.DX)(Q);q.parentElement.insertAdjacentHTML("beforeend","<wbr>"+$.innerHTML.trim()),$.remove()}else if($.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat($.innerHTML.trim()||`
`,"</p>")),$.nextElementSibling)$.remove();else $.parentElement.remove();return(0,y.ib)(z[z.currentMode].element,w),e(z),Z.preventDefault(),!0}if(Z.key==="Enter"&&!(0,J.yl)(Z)&&!Z.shiftKey&&!Z.altKey){if($.textContent.trim()==="")if((0,U.fb)($.parentElement,"vditor-task")){var V=(0,U.O9)(X);if(V)E1(z,$,w,V)}else if($.nextElementSibling){var A="",f="",x=!1;Array.from($.parentElement.children).forEach(function(p){if($.isSameNode(p))x=!0;else if(x)A+=p.outerHTML;else f+=p.outerHTML});var b=$.parentElement.tagName,h=$.parentElement.tagName==="OL"?"":' data-marker="'.concat($.parentElement.getAttribute("data-marker"),'"'),T="";if(f)T=$.parentElement.tagName==="UL"?"":' start="1"',f="<".concat(b,' data-tight="true"').concat(h,' data-block="0">').concat(f,"</").concat(b,">");$.parentElement.outerHTML="".concat(f,`<p data-block="0"><wbr>
</p><`).concat(b,`
 data-tight="true"`).concat(h,' data-block="0"').concat(T,">").concat(A,"</").concat(b,">")}else if($.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),$.parentElement.querySelectorAll("li").length===1)$.parentElement.remove();else $.remove();else if(X.nodeType!==3&&w.startOffset===0&&X.firstChild.tagName==="INPUT")w.setStart(X.childNodes[1],1);else w.setEndAfter($.lastChild),$.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'.concat($.getAttribute("data-marker"),'"><input type="checkbox"> <wbr></li>')),document.querySelector("wbr").after(w.extractContents());return(0,y.ib)(z[z.currentMode].element,w),e(z),S0(z),Z.preventDefault(),!0}}return!1},L5=function(z,w,Z,X){if(w.startContainer.nodeType!==3){var $=w.startContainer.children[w.startOffset];if($&&$.tagName==="HR")return w.selectNodeContents($.previousElementSibling),w.collapse(!1),Z.preventDefault(),!0}if(X){var G=X.previousElementSibling;if(G&&(0,y.im)(X,z[z.currentMode].element,w).start===0&&((0,J.vU)()&&G.tagName==="HR"||G.tagName==="TABLE")){if(G.tagName==="TABLE"){var Q=G.lastElementChild.lastElementChild.lastElementChild;Q.innerHTML=Q.innerHTML.trimLeft()+"<wbr>"+X.textContent.trim(),X.remove()}else G.remove();return(0,y.ib)(z[z.currentMode].element,w),e(z),Z.preventDefault(),!0}}return!1},y5=function(z){if((0,J.vU)()&&z.startContainer.nodeType!==3&&z.startContainer.tagName==="HR")z.setStartBefore(z.startContainer)},x5=function(z,w,Z){var X,$;if(!(0,J.vU)())return!1;if(z.key==="ArrowUp"&&w&&((X=w.previousElementSibling)===null||X===void 0?void 0:X.tagName)==="TABLE"){var G=w.previousElementSibling;return Z.selectNodeContents(G.rows[G.rows.length-1].lastElementChild),Z.collapse(!1),z.preventDefault(),!0}if(z.key==="ArrowDown"&&w&&(($=w.nextElementSibling)===null||$===void 0?void 0:$.tagName)==="TABLE")return Z.selectNodeContents(w.nextElementSibling.rows[0].cells[0]),Z.collapse(!0),z.preventDefault(),!0;return!1},L1=function(z,w,Z){return J5(void 0,void 0,void 0,function(){var X,$,G,Q,q,V,A,f,x,b,h,T,p,k,g,k,r;return Y5(this,function(s){switch(s.label){case 0:if(z[z.currentMode].element.getAttribute("contenteditable")!=="true")return[2];if(w.stopPropagation(),w.preventDefault(),"clipboardData"in w)X=w.clipboardData.getData("text/html"),$=w.clipboardData.getData("text/plain"),G=w.clipboardData.files;else if(X=w.dataTransfer.getData("text/html"),$=w.dataTransfer.getData("text/plain"),w.dataTransfer.types.includes("Files"))G=w.dataTransfer.items;if(Q={},q=function(o,G0){if(!G0)return["",Lute.WalkContinue];if(z.options.upload.renderLinkDest)return z.options.upload.renderLinkDest(z,o,G0);var X0=o.TokensStr();if(o.__internal_object__.Parent.Type===34&&X0&&X0.indexOf("file://")===-1&&z.options.upload.linkToImgUrl){var q0=new XMLHttpRequest;if(q0.open("POST",z.options.upload.linkToImgUrl),z.options.upload.token)q0.setRequestHeader("X-Upload-Token",z.options.upload.token);if(z.options.upload.withCredentials)q0.withCredentials=!0;U5(z,q0),q0.setRequestHeader("Content-Type","application/json; charset=utf-8"),q0.onreadystatechange=function(){if(q0.readyState===XMLHttpRequest.DONE){if(q0.status===200){var R0=q0.responseText;if(z.options.upload.linkToImgFormat)R0=z.options.upload.linkToImgFormat(q0.responseText);var L0=JSON.parse(R0);if(L0.code!==0){z.tip.show(L0.msg);return}var M0=L0.data.originalURL;if(z.currentMode==="sv")z.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(I0){if(I0.textContent===M0)I0.textContent=L0.data.url});else{var w0=z[z.currentMode].element.querySelector('img[src="'.concat(M0,'"]'));if(w0.src=L0.data.url,z.currentMode==="ir")w0.previousElementSibling.previousElementSibling.innerHTML=L0.data.url}e(z)}else z.tip.show(q0.responseText);if(z.options.upload.linkToImgCallback)z.options.upload.linkToImgCallback(q0.responseText)}},q0.send(JSON.stringify({url:X0}))}if(z.currentMode==="ir")return['<span class="vditor-ir__marker vditor-ir__marker--link">'.concat(Lute.EscapeHTMLStr(X0),"</span>"),Lute.WalkContinue];else if(z.currentMode==="wysiwyg")return["",Lute.WalkContinue];else return['<span class="vditor-sv__marker--link">'.concat(Lute.EscapeHTMLStr(X0),"</span>"),Lute.WalkContinue]},X.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'.concat($,'">').concat($,"</a>")||X.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'.concat($,'">').concat($,"</a><!--EndFragment-->"))X="";if(V=new DOMParser().parseFromString(X,"text/html"),V.body)X=V.body.innerHTML;if(X=Lute.Sanitize(X),z.wysiwyg.getComments(z),A=z[z.currentMode].element.scrollHeight,f=y0(X,$,z.currentMode),x=z.currentMode==="sv"?(0,U.a1)(w.target,"data-type","code-block"):(0,U.lG)(w.target,"CODE"),!x)return[3,1];if(z.currentMode==="sv")document.execCommand("insertHTML",!1,$.replace(/&/g,"&amp;").replace(/</g,"&lt;"));else{if(b=(0,y.im)(w.target,z[z.currentMode].element),x.parentElement.tagName!=="PRE")$+=P.g.ZWSP;if(x.textContent=x.textContent.substring(0,b.start)+$+x.textContent.substring(b.end),(0,y.$j)(b.start+$.length,b.start+$.length,x.parentElement),(r=x.parentElement)===null||r===void 0?void 0:r.nextElementSibling.classList.contains("vditor-".concat(z.currentMode,"__preview")))x.parentElement.nextElementSibling.innerHTML=x.outerHTML,B0(x.parentElement.nextElementSibling,z)}return[3,10];case 1:if(!f)return[3,2];return Z.pasteCode(f),[3,10];case 2:if(X.trim()==="")return[3,5];if(h=document.createElement("div"),h.innerHTML=X,z.options.upload.base64ToLink)return[3,4];return[4,D8(z,h,("clipboardData"in w?w.clipboardData:w.dataTransfer).getData("text/rtf"))];case 3:s.sent(),s.label=4;case 4:if(h.querySelectorAll("[style]").forEach(function(o){o.removeAttribute("style")}),h.querySelectorAll(".vditor-copy").forEach(function(o){o.remove()}),z.currentMode==="ir")Q.HTML2VditorIRDOM={renderLinkDest:q},z.lute.SetJSRenderers({renderers:Q}),(0,y.oC)(z.lute.HTML2VditorIRDOM(h.innerHTML),z);else if(z.currentMode==="wysiwyg")Q.HTML2VditorDOM={renderLinkDest:q},z.lute.SetJSRenderers({renderers:Q}),(0,y.oC)(z.lute.HTML2VditorDOM(h.innerHTML),z);else Q.Md2VditorSVDOM={renderLinkDest:q},z.lute.SetJSRenderers({renderers:Q}),c1(z,z.lute.HTML2Md(h.innerHTML).trimRight());return z.outline.render(z),[3,10];case 5:if(!(G.length>0))return[3,9];if(!(z.options.upload.url||z.options.upload.handler))return[3,7];return[4,p1(z,G)];case 6:return s.sent(),[3,8];case 7:if(T=new FileReader,"clipboardData"in w)G=w.clipboardData.files,p=G[0];else if(w.dataTransfer.types.includes("Files"))G=w.dataTransfer.items,p=G[0].getAsFile();if(p&&p.type.startsWith("image"))T.readAsDataURL(p),T.onload=function(){var o="";if(z.currentMode==="wysiwyg")o+='<img alt="'.concat(p.name,'" src="').concat(T.result.toString(),`">
`);else o+="![".concat(p.name,"](").concat(T.result.toString(),`)
`);document.execCommand("insertHTML",!1,o)};s.label=8;case 8:return[3,10];case 9:if($.trim()!==""&&G.length===0){if(k=(0,y.zh)(z),k.toString()!==""&&z.lute.IsValidLinkDest($))$="[".concat(k.toString(),"](").concat($,")");if(z.currentMode==="ir")Q.Md2VditorIRDOM={renderLinkDest:q},z.lute.SetJSRenderers({renderers:Q}),(0,y.oC)(Lute.Sanitize(z.lute.Md2VditorIRDOM($)),z);else if(z.currentMode==="wysiwyg")Q.Md2VditorDOM={renderLinkDest:q},z.lute.SetJSRenderers({renderers:Q}),(0,y.oC)(Lute.Sanitize(z.lute.Md2VditorDOM($)),z);else Q.Md2VditorSVDOM={renderLinkDest:q},z.lute.SetJSRenderers({renderers:Q}),c1(z,$);z.outline.render(z)}s.label=10;case 10:if(z.currentMode!=="sv"){if(g=(0,U.F9)((0,y.zh)(z).startContainer),g){if(k=(0,y.zh)(z),z[z.currentMode].element.querySelectorAll("wbr").forEach(function(o){o.remove()}),k.insertNode(document.createElement("wbr")),z.currentMode==="wysiwyg")g.outerHTML=z.lute.SpinVditorDOM(g.outerHTML);else g.outerHTML=z.lute.SpinVditorIRDOM(g.outerHTML);(0,y.ib)(z[z.currentMode].element,k)}z[z.currentMode].element.querySelectorAll(".vditor-".concat(z.currentMode,"__preview[data-render='2']")).forEach(function(o){B0(o,z)})}if(z.wysiwyg.triggerRemoveComment(z),e(z),z[z.currentMode].element.scrollHeight-A>Math.min(z[z.currentMode].element.clientHeight,window.innerHeight)/2)S0(z);return[2]}})})},D8=function(z,w,Z){return J5(void 0,void 0,void 0,function(){var X,$,G,Q,q,V,A,f,x,p,b,h,T,p,g,k;return Y5(this,function(r){switch(r.label){case 0:if(!Z)return[2];if(X=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,$=new RegExp("(?:("+X.source+"))([\\da-fA-F\\s]+)\\}","g"),G=Z.match($),Q=[],G)for(q=0,V=G;q<V.length;q++){if(A=V[q],f=void 0,A.includes("\\pngblip"))f="image/png";else if(A.includes("\\jpegblip"))f="image/jpeg";if(f)Q.push({hex:A.replace(X,"").replace(/[^\da-fA-F]/g,""),type:f})}x=[],m1(w,function(s){if(s.tagName==="V:SHAPE")return m1(s,function(o){if(o.tagName==="V:IMAGEDATA")x.push({shape:s,img:o})}),!1});for(p=0;p<x.length;p++)b=document.createElement("img"),h="data:"+Q[p].type+";base64,"+btoa((Q[p].hex.match(/\w{2}/g)||[]).map(function(s){return String.fromCharCode(parseInt(s,16))}).join("")),b.src=h,b.title=x[p].img.getAttribute("title"),x[p].shape.parentNode.replaceChild(b,x[p].shape);T=w.querySelectorAll("img"),p=0,r.label=1;case 1:if(!(p<T.length))return[3,4];if(g=T[p].src||"",!g)return[3,3];return k=T[p],[4,z.options.upload.base64ToLink(g)];case 2:k.src=r.sent(),r.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},m1=function(z,w){var Z=w(z);if(Z!==!1)for(var X=0;X<z.children.length;X++)m1(z.children[X],w)},R5,M5=function(z){var w,Z;z.hint.render(z);var X=(0,y.zh)(z).startContainer,$=(0,U.a1)(X,"data-type","code-block-info");if($)if($.textContent.replace(P.g.ZWSP,"")===""&&z.hint.recentLanguage){$.textContent=P.g.ZWSP+z.hint.recentLanguage;var G=(0,y.zh)(z);G.selectNodeContents($)}else{var Q=[],q=$.textContent.substring(0,(0,y.im)($,z.ir.element).start).replace(P.g.ZWSP,"");(z.options.preview.hljs.langs||P.g.ALIAS_CODE_LANGUAGES.concat(((Z=(w=window.hljs)===null||w===void 0?void 0:w.listLanguages())!==null&&Z!==void 0?Z:[]).sort())).forEach(function(V){if(V.indexOf(q.toLowerCase())>-1)Q.push({html:V,value:V})}),z.hint.genHTML(Q,q,z)}},m0=function(z,w){if(w===void 0)w={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(w.enableHint)M5(z);clearTimeout(z.ir.processTimeoutId),z.ir.processTimeoutId=window.setTimeout(function(){if(z.ir.composingLock)return;var Z=I(z);if(typeof z.options.input==="function"&&w.enableInput)z.options.input(Z);if(z.options.counter.enable)z.counter.render(z,Z);if(z.options.cache.enable&&(0,J.pK)()){if(localStorage.setItem(z.options.cache.id,Z),z.options.cache.after)z.options.cache.after(Z)}if(z.devtools)z.devtools.renderEchart(z);if(w.enableAddUndoStack)z.undo.addToUndoStack(z)},z.options.undoDelay)},q1=function(z,w){var Z=(0,y.zh)(z),X=(0,U.F9)(Z.startContainer)||Z.startContainer;if(X){var $=X.querySelector(".vditor-ir__marker--heading");if($)$.innerHTML=w;else X.insertAdjacentText("afterbegin",w),Z.selectNodeContents(X),Z.collapse(!1);o0(z,Z.cloneRange()),G1(z)}},y1=function(z,w,Z){var X=(0,U.a1)(z.startContainer,"data-type",Z);if(X){X.firstElementChild.remove(),X.lastElementChild.remove(),z.insertNode(document.createElement("wbr"));var $=document.createElement("div");$.innerHTML=w.lute.SpinVditorIRDOM(X.outerHTML),X.outerHTML=$.firstElementChild.innerHTML.trim()}},W8=function(z,w,Z,X){var $=(0,y.zh)(z),G=w.getAttribute("data-type"),Q=$.startContainer;if(Q.nodeType===3)Q=Q.parentElement;var q=!0;if(w.classList.contains("vditor-menu--current")){if(G==="quote"){var V=(0,U.lG)(Q,"BLOCKQUOTE");if(V)$.insertNode(document.createElement("wbr")),V.outerHTML=V.innerHTML.trim()===""?'<p data-block="0">'.concat(V.innerHTML,"</p>"):V.innerHTML}else if(G==="link"){var A=(0,U.a1)($.startContainer,"data-type","a");if(A){var f=(0,U.fb)($.startContainer,"vditor-ir__link");if(f)$.insertNode(document.createElement("wbr")),A.outerHTML=f.innerHTML;else A.outerHTML=A.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else if(G==="italic")y1($,z,"em");else if(G==="bold")y1($,z,"strong");else if(G==="strike")y1($,z,"s");else if(G==="inline-code")y1($,z,"code");else if(G==="check"||G==="list"||G==="ordered-list")f1(z,$,G),q=!1,w.classList.remove("vditor-menu--current")}else{if(z.ir.element.childNodes.length===0)z.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,y.ib)(z.ir.element,$);var x=(0,U.F9)($.startContainer);if(G==="line"){if(x){var b=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;if(x.innerHTML.trim()==="")x.outerHTML=b;else x.insertAdjacentHTML("afterend",b)}}else if(G==="quote"){if(x)$.insertNode(document.createElement("wbr")),x.outerHTML='<blockquote data-block="0">'.concat(x.outerHTML,"</blockquote>"),q=!1,w.classList.add("vditor-menu--current")}else if(G==="link"){var h=void 0;if($.toString()==="")h="".concat(Z,"<wbr>").concat(X);else h="".concat(Z).concat($.toString()).concat(X.replace(")","<wbr>)"));document.execCommand("insertHTML",!1,h),q=!1,w.classList.add("vditor-menu--current")}else if(G==="italic"||G==="bold"||G==="strike"||G==="inline-code"||G==="code"||G==="table"){var h=void 0;if($.toString()==="")h="".concat(Z,"<wbr>").concat(X);else{if(G==="code")h="".concat(Z,`
`).concat($.toString(),"<wbr>").concat(X);else if(G==="table")h="".concat(Z).concat($.toString(),"<wbr>").concat(X);else h="".concat(Z).concat($.toString()).concat(X,"<wbr>");$.deleteContents()}if(G==="table"||G==="code")h=`
`+h+`

`;var T=document.createElement("span");if(T.innerHTML=h,$.insertNode(T),o0(z,$),G==="table")$.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,y.Hc)($)}else if(G==="check"||G==="list"||G==="ordered-list")f1(z,$,G,!1),q=!1,O(z.toolbar.elements,["check","list","ordered-list"]),w.classList.add("vditor-menu--current")}if((0,y.ib)(z.ir.element,$),m0(z),q)G1(z)},S8=function(z,w,Z,X){function $(G){return G instanceof Z?G:new Z(function(Q){Q(G)})}return new(Z||(Z=Promise))(function(G,Q){function q(f){try{A(X.next(f))}catch(x){Q(x)}}function V(f){try{A(X.throw(f))}catch(x){Q(x)}}function A(f){f.done?G(f.value):$(f.value).then(q,V)}A((X=X.apply(z,w||[])).next())})},P8=function(z,w){var Z={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},X,$,G,Q;return Q={next:q(0),throw:q(1),return:q(2)},typeof Symbol==="function"&&(Q[Symbol.iterator]=function(){return this}),Q;function q(A){return function(f){return V([A,f])}}function V(A){if(X)throw TypeError("Generator is already executing.");while(Q&&(Q=0,A[0]&&(Z=0)),Z)try{if(X=1,$&&(G=A[0]&2?$.return:A[0]?$.throw||((G=$.return)&&G.call($),0):$.next)&&!(G=G.call($,A[1])).done)return G;if($=0,G)A=[A[0]&2,G.value];switch(A[0]){case 0:case 1:G=A;break;case 4:return Z.label++,{value:A[1],done:!1};case 5:Z.label++,$=A[1],A=[0];continue;case 7:A=Z.ops.pop(),Z.trys.pop();continue;default:if((G=Z.trys,!(G=G.length>0&&G[G.length-1]))&&(A[0]===6||A[0]===2)){Z=0;continue}if(A[0]===3&&(!G||A[1]>G[0]&&A[1]<G[3])){Z.label=A[1];break}if(A[0]===6&&Z.label<G[1]){Z.label=G[1],G=A;break}if(G&&Z.label<G[2]){Z.label=G[2],Z.ops.push(A);break}if(G[2])Z.ops.pop();Z.trys.pop();continue}A=w.call(z,Z)}catch(f){A=[6,f],$=0}finally{X=G=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},B8=function(){function z(w){var Z=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(X,$){Z.element.style.display="none";var G=decodeURIComponent(X.getAttribute("data-value")),Q=window.getSelection().getRangeAt(0);if($.currentMode==="ir"){var q=(0,U.a1)(Q.startContainer,"data-type","code-block-info");if(q){q.textContent=P.g.ZWSP+G.trimRight(),Q.selectNodeContents(q),Q.collapse(!1),m0($),q.parentElement.querySelectorAll("code").forEach(function(x){x.className="language-"+G.trimRight()}),B0(q.parentElement.querySelector(".vditor-ir__preview"),$),Z.recentLanguage=G.trimRight();return}}if($.currentMode==="wysiwyg"&&Q.startContainer.nodeType!==3){var V=Q.startContainer,A=void 0;if(V.classList.contains("vditor-input"))A=V;else A=V.firstElementChild;if(A&&A.classList.contains("vditor-input")){A.value=G.trimRight(),Q.selectNodeContents(A),Q.collapse(!1),A.dispatchEvent(new CustomEvent("input",{detail:1})),Z.recentLanguage=G.trimRight();return}}if(Q.setStart(Q.startContainer,Z.lastIndex),Q.deleteContents(),$.options.hint.parse)if($.currentMode==="sv")(0,y.oC)($.lute.SpinVditorSVDOM(G),$);else if($.currentMode==="wysiwyg")(0,y.oC)($.lute.SpinVditorDOM(G),$);else(0,y.oC)($.lute.SpinVditorIRDOM(G),$);else(0,y.oC)(G,$);if(Z.splitChar===":"&&G.indexOf(":")>-1&&$.currentMode!=="sv")Q.insertNode(document.createTextNode(" "));if(Q.collapse(!1),(0,y.Hc)(Q),$.currentMode==="wysiwyg"){var f=(0,U.fb)(Q.startContainer,"vditor-wysiwyg__block");if(f&&f.lastElementChild.classList.contains("vditor-wysiwyg__preview"))f.lastElementChild.innerHTML=f.firstElementChild.innerHTML,B0(f.lastElementChild,$)}else if($.currentMode==="ir"){var f=(0,U.fb)(Q.startContainer,"vditor-ir__marker--pre");if(f&&f.nextElementSibling.classList.contains("vditor-ir__preview"))f.nextElementSibling.innerHTML=f.innerHTML,B0(f.nextElementSibling,$)}e($)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",w.push({key:":"})}return z.prototype.render=function(w){var Z=this;if(!window.getSelection().focusNode)return;var X,$=getSelection().getRangeAt(0);X=$.startContainer.textContent.substring(0,$.startOffset)||"";var G=this.getKey(X,w.options.hint.extend);if(typeof G>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var Q=G===""?w.options.hint.emoji:w.lute.GetEmojis(),q=[];Object.keys(Q).forEach(function(V){if(V.indexOf(G.toLowerCase())===0)if(Q[V].indexOf(".")>-1)q.push({html:'<img src="'.concat(Q[V],'" title=":').concat(V,':"/> :').concat(V,":"),value:":".concat(V,":")});else q.push({html:'<span class="vditor-hint__emoji">'.concat(Q[V],"</span>").concat(V),value:Q[V]})}),this.genHTML(q,G,w)}else w.options.hint.extend.forEach(function(V){if(V.key===Z.splitChar)clearTimeout(Z.timeId),Z.timeId=window.setTimeout(function(){return S8(Z,void 0,void 0,function(){var A;return P8(this,function(f){switch(f.label){case 0:return A=this.genHTML,[4,V.hint(G)];case 1:return A.apply(this,[f.sent(),G,w]),[2]}})})},w.options.hint.delay)})},z.prototype.genHTML=function(w,Z,X){var $=this;if(w.length===0){this.element.style.display="none";return}var G=X[X.currentMode].element,Q=(0,y.Ny)(G),q=Q.left+(X.options.outline.position==="left"?X.outline.element.offsetWidth:0),V=Q.top,A="";w.forEach(function(x,b){if(b>7)return;var h=x.html;if(Z!==""){var T=h.lastIndexOf(">")+1,p=h.substr(T),g=p.toLowerCase().indexOf(Z.toLowerCase());if(g>-1)p=p.substring(0,g)+"<b>"+p.substring(g,g+Z.length)+"</b>"+p.substring(g+Z.length),h=h.substr(0,T)+p}A+='<button type="button" data-value="'.concat(encodeURIComponent(x.value),` "
`).concat(b===0?"class='vditor-hint--current'":"","> ").concat(h,"</button>")}),this.element.innerHTML=A;var f=parseInt(document.defaultView.getComputedStyle(G,null).getPropertyValue("line-height"),10);if(this.element.style.top="".concat(V+(f||22),"px"),this.element.style.left="".concat(q,"px"),this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(x){x.addEventListener("click",function(b){$.fillEmoji(x,X),b.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight)this.element.style.top="".concat(V-this.element.offsetHeight,"px");if(this.element.getBoundingClientRect().right>window.innerWidth)this.element.style.left="auto",this.element.style.right="0"},z.prototype.select=function(w,Z){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var X=this.element.querySelector(".vditor-hint--current");if(w.key==="ArrowDown"){if(w.preventDefault(),w.stopPropagation(),X.removeAttribute("class"),!X.nextElementSibling)this.element.children[0].className="vditor-hint--current";else X.nextElementSibling.className="vditor-hint--current";return!0}else if(w.key==="ArrowUp"){if(w.preventDefault(),w.stopPropagation(),X.removeAttribute("class"),!X.previousElementSibling){var $=this.element.children.length;this.element.children[$-1].className="vditor-hint--current"}else X.previousElementSibling.className="vditor-hint--current";return!0}else if(!(0,J.yl)(w)&&!w.shiftKey&&!w.altKey&&w.key==="Enter"&&!w.isComposing)return w.preventDefault(),w.stopPropagation(),this.fillEmoji(X,Z),!0;return!1},z.prototype.getKey=function(w,Z){var X=this;this.lastIndex=-1,this.splitChar="",Z.forEach(function(A){var f=w.lastIndexOf(A.key);if(X.lastIndex<f)X.splitChar=A.key,X.lastIndex=f});var $;if(this.lastIndex===-1)return $;var G=w.split(this.splitChar),Q=G[G.length-1],q=32;if(G.length>1&&Q.trim()===Q)if(G.length===2&&G[0]===""&&G[1].length<q)$=G[1];else{var V=G[G.length-2].slice(-1);if((0,N.X)(V)===" "&&Q.length<q)$=Q}return $},z}(),f8=function(){function z(w){this.composingLock=!1;var Z=document.createElement("div");Z.className="vditor-ir",Z.innerHTML='<pre class="vditor-reset" placeholder="'.concat(w.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>`),this.element=Z.firstElementChild,this.bindEvent(w),T1(w,this.element),X5(w,this.element),h1(w,this.element),u1(w,this.element),g1(w,this.element),k1(w,this.element),_1(w,this.element,this.copy),b1(w,this.element,this.copy)}return z.prototype.copy=function(w,Z){var X=getSelection().getRangeAt(0);if(X.toString()==="")return;w.stopPropagation(),w.preventDefault();var $=document.createElement("div");$.appendChild(X.cloneContents()),w.clipboardData.setData("text/plain",Z.lute.VditorIRDOM2Md($.innerHTML).trim()),w.clipboardData.setData("text/html","")},z.prototype.bindEvent=function(w){var Z=this;this.element.addEventListener("paste",function(X){L1(w,X,{pasteCode:function($){document.execCommand("insertHTML",!1,$)}})}),this.element.addEventListener("scroll",function(){D(w,["hint"])}),this.element.addEventListener("compositionstart",function(X){Z.composingLock=!0}),this.element.addEventListener("compositionend",function(X){if(!(0,J.vU)())o0(w,getSelection().getRangeAt(0).cloneRange());Z.composingLock=!1}),this.element.addEventListener("input",function(X){if(X.inputType==="deleteByDrag"||X.inputType==="insertFromDrop")return;if(Z.preventInput){Z.preventInput=!1,m0(w,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}if(Z.composingLock||X.data==="‘"||X.data==="“"||X.data==="《")return;o0(w,getSelection().getRangeAt(0).cloneRange(),!1,X)}),this.element.addEventListener("click",function(X){if(X.target.tagName==="INPUT"){if(X.target.checked)X.target.setAttribute("checked","checked");else X.target.removeAttribute("checked");Z.preventInput=!0,m0(w);return}var $=(0,y.zh)(w),G=(0,U.fb)(X.target,"vditor-ir__preview");if(!G)G=(0,U.fb)($.startContainer,"vditor-ir__preview");if(G){if(G.previousElementSibling.firstElementChild)$.selectNodeContents(G.previousElementSibling.firstElementChild);else $.selectNodeContents(G.previousElementSibling);$.collapse(!0),(0,y.Hc)($),S0(w)}if(X.target.tagName==="IMG"){var Q=X.target.parentElement.querySelector(".vditor-ir__marker--link");if(Q)$.selectNode(Q),(0,y.Hc)($)}var q=(0,U.a1)(X.target,"data-type","a");if(q&&!q.classList.contains("vditor-ir__node--expand")){if(w.options.link.click)w.options.link.click(q.querySelector(":scope > .vditor-ir__marker--link"));else if(w.options.link.isOpen)window.open(q.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(X.target.isEqualNode(Z.element)&&Z.element.lastElementChild&&$.collapsed){var V=Z.element.lastElementChild.getBoundingClientRect();if(X.y>V.top+V.height)if(Z.element.lastElementChild.tagName==="P"&&Z.element.lastElementChild.textContent.trim().replace(P.g.ZWSP,"")==="")$.selectNodeContents(Z.element.lastElementChild),$.collapse(!1);else Z.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(P.g.ZWSP,"<wbr></p>")),(0,y.ib)(Z.element,$)}if($.toString()==="")c($,w);else setTimeout(function(){c((0,y.zh)(w),w)});O1(X,w),G1(w)}),this.element.addEventListener("keyup",function(X){if(X.isComposing||(0,J.yl)(X))return;if(X.key==="Enter")S0(w);if(G1(w),(X.key==="Backspace"||X.key==="Delete")&&w.ir.element.innerHTML!==""&&w.ir.element.childNodes.length===1&&w.ir.element.firstElementChild&&w.ir.element.firstElementChild.tagName==="P"&&w.ir.element.firstElementChild.childElementCount===0&&(w.ir.element.textContent===""||w.ir.element.textContent===`
`)){w.ir.element.innerHTML="";return}var $=(0,y.zh)(w);if(X.key==="Backspace"){if((0,J.vU)()&&$.startContainer.textContent===`
`&&$.startOffset===1)$.startContainer.textContent="",c($,w);Z.element.querySelectorAll(".language-math").forEach(function(Q){var q=Q.querySelector("br");if(q)q.remove()})}else if(X.key.indexOf("Arrow")>-1){if(X.key==="ArrowLeft"||X.key==="ArrowRight")M5(w);c($,w)}else if(X.keyCode===229&&X.code===""&&X.key==="Unidentified")c($,w);var G=(0,U.fb)($.startContainer,"vditor-ir__preview");if(G){if(X.key==="ArrowUp"||X.key==="ArrowLeft"){if(G.previousElementSibling.firstElementChild)$.selectNodeContents(G.previousElementSibling.firstElementChild);else $.selectNodeContents(G.previousElementSibling);return $.collapse(!1),X.preventDefault(),!0}if(G.tagName==="SPAN"&&(X.key==="ArrowDown"||X.key==="ArrowRight")){if(G.parentElement.getAttribute("data-type")==="html-entity")G.parentElement.insertAdjacentText("afterend",P.g.ZWSP),$.setStart(G.parentElement.nextSibling,1);else $.selectNodeContents(G.parentElement.lastElementChild);return $.collapse(!1),X.preventDefault(),!0}}})},z}(),I5=function(z){if(z.currentMode==="sv")return z.lute.Md2HTML(I(z));else if(z.currentMode==="wysiwyg")return z.lute.VditorDOM2HTML(z.wysiwyg.element.innerHTML);else if(z.currentMode==="ir")return z.lute.VditorIRDOM2HTML(z.ir.element.innerHTML)},H8=i(214),C5=i(436),N8=function(){function z(w){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'.concat(w,`</div>
<div class="vditor-outline__content"></div>`)}return z.prototype.render=function(w){var Z="";if(w.preview.element.style.display==="block")Z=(0,C5.k)(w.preview.previewElement,this.element.lastElementChild,w);else Z=(0,C5.k)(w[w.currentMode].element,this.element.lastElementChild,w);return Z},z.prototype.toggle=function(w,Z,X){var $;if(Z===void 0)Z=!0;if(X===void 0)X=!0;var G=($=w.toolbar.elements.outline)===null||$===void 0?void 0:$.firstElementChild;if(Z&&window.innerWidth>=P.g.MOBILE_WIDTH)this.element.style.display="block",this.render(w),G===null||G===void 0||G.classList.add("vditor-menu--current");else this.element.style.display="none",G===null||G===void 0||G.classList.remove("vditor-menu--current");if(X&&getSelection().rangeCount>0){var Q=getSelection().getRangeAt(0);if(w[w.currentMode].element.contains(Q.startContainer))(0,y.Hc)(Q)}u0(w)},z}(),L8=i(280),y8=function(){function z(w){var Z=this;if(this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",w.options.classes.preview)this.previewElement.classList.add(w.options.classes.preview);this.previewElement.style.maxWidth=w.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(V){if(V.target.tagName==="TEXTAREA")return;var A=document.createElement("div");A.className="vditor-reset",A.appendChild(getSelection().getRangeAt(0).cloneContents()),Z.copyToX(w,A,"default"),V.preventDefault()}),this.previewElement.addEventListener("click",function(V){var A=(0,U.lG)(V.target,"SPAN");if(A&&(0,U.fb)(A,"vditor-toc")){var f=Z.previewElement.querySelector("#"+A.getAttribute("data-target-id"));if(f)Z.element.scrollTop=f.offsetTop;return}if(V.target.tagName==="A"){if(w.options.link.click)w.options.link.click(V.target);else if(w.options.link.isOpen)window.open(V.target.getAttribute("href"));V.preventDefault();return}if(V.target.tagName==="IMG"){if(w.options.image.preview)w.options.image.preview(V.target);else if(w.options.image.isPreview)(0,d.E)(V.target,w.options.lang,w.options.theme)}}),this.element.appendChild(this.previewElement);var X=w.options.preview.actions;if(X.length===0)return;var $=document.createElement("div");$.className="vditor-preview__action";var G=[];for(var Q=0;Q<X.length;Q++){var q=X[Q];if(typeof q==="object"){G.push('<button type="button" data-type="'.concat(q.key,'" class="').concat(q.className,'"').concat(q.tooltip?' aria-label="'.concat(q.tooltip,'"'):"",'">').concat(q.text,"</button>"));continue}switch(q){case"desktop":G.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":G.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":G.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":G.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":G.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}$.innerHTML=G.join(""),$.addEventListener((0,J.Le)(),function(V){var A=(0,B.S)(V.target,"BUTTON");if(!A)return;var f=A.getAttribute("data-type"),x=X.find(function(b){return(b===null||b===void 0?void 0:b.key)===f});if(x){x.click(f);return}if(f==="mp-wechat"||f==="zhihu"){Z.copyToX(w,Z.previewElement.cloneNode(!0),f);return}if(f==="desktop")Z.previewElement.style.width="auto";else if(f==="tablet")Z.previewElement.style.width="780px";else Z.previewElement.style.width="360px";if(Z.previewElement.scrollWidth>Z.previewElement.parentElement.clientWidth)Z.previewElement.style.width="auto";Z.render(w),$.querySelectorAll("button").forEach(function(b){b.classList.remove("vditor-preview__action--current")}),A.classList.add("vditor-preview__action--current")}),this.element.insertBefore($,this.previewElement)}return z.prototype.render=function(w,Z){var X=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){if(this.element.getAttribute("data-type")==="renderPerformance")w.tip.hide();return}if(Z){this.previewElement.innerHTML=Z;return}if(I(w).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var $=new Date().getTime(),G=I(w);this.mdTimeoutId=window.setTimeout(function(){if(w.options.preview.url){var Q=new XMLHttpRequest;Q.open("POST",w.options.preview.url),Q.setRequestHeader("Content-Type","application/json;charset=UTF-8"),Q.onreadystatechange=function(){if(Q.readyState===XMLHttpRequest.DONE)if(Q.status===200){var V=JSON.parse(Q.responseText);if(V.code!==0){w.tip.show(V.msg);return}if(w.options.preview.transform)V.data=w.options.preview.transform(V.data);X.previewElement.innerHTML=V.data,X.afterRender(w,$)}else{var A=w.lute.Md2HTML(G);if(w.options.preview.transform)A=w.options.preview.transform(A);X.previewElement.innerHTML=A,X.afterRender(w,$)}},Q.send(JSON.stringify({markdownText:G}))}else{var q=w.lute.Md2HTML(G);if(w.options.preview.transform)q=w.options.preview.transform(q);X.previewElement.innerHTML=q,X.afterRender(w,$)}},w.options.preview.delay)},z.prototype.afterRender=function(w,Z){if(w.options.preview.parse)w.options.preview.parse(this.element);var X=new Date().getTime()-Z;if(new Date().getTime()-Z>2600)w.tip.show(window.VditorI18n.performanceTip.replace("${x}",X.toString())),w.preview.element.setAttribute("data-type","renderPerformance");else if(w.preview.element.getAttribute("data-type")==="renderPerformance")w.tip.hide(),w.preview.element.removeAttribute("data-type");var $=w.preview.element.querySelector(".vditor-comment--focus");if($)$.classList.remove("vditor-comment--focus");if((0,u.O)(w.preview.previewElement,w.options.preview.hljs),(0,t.s)(w.options.preview.hljs,w.preview.previewElement,w.options.cdn),(0,J0.i)(w.preview.previewElement,w.options.cdn,w.options.theme),(0,D0.K)(w.preview.previewElement,w.options.cdn),(0,P0.J)(w.preview.previewElement,w.options.cdn,w.options.theme),(0,a.P)(w.preview.previewElement,w.options.cdn),(0,m.v)(w.preview.previewElement,w.options.cdn),(0,L.p)(w.preview.previewElement,w.options.cdn,w.options.theme),(0,j0.P)(w.preview.previewElement,w.options.cdn,w.options.theme),(0,Y0.B)(w.preview.previewElement,w.options.cdn),(0,C.Q)(w.preview.previewElement,w.options.cdn),w.options.preview.render.media.enable)(0,L8.Y)(w.preview.previewElement);w.options.customRenders.forEach(function(q){q.render(w.preview.previewElement,w)});var G=w.preview.element,Q=w.outline.render(w);if(Q==="")Q="[ToC]";G.querySelectorAll('[data-type="toc-block"]').forEach(function(q){q.innerHTML=Q,(0,z0.H)(q,{cdn:w.options.cdn,math:w.options.preview.math})}),(0,z0.H)(w.preview.previewElement,{cdn:w.options.cdn,math:w.options.preview.math})},z.prototype.copyToX=function(w,Z,X){if(X===void 0)X="mp-wechat";if(X!=="zhihu")Z.querySelectorAll(".katex-html .base").forEach(function(G){G.style.display="initial"});else Z.querySelectorAll(".language-math").forEach(function(G){G.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'.concat(G.getAttribute("data-math"),'\\" style="display: block; margin: 0 auto; max-width: 100%;">')});Z.style.backgroundColor="#fff",Z.querySelectorAll("code").forEach(function(G){G.style.backgroundImage="none"}),this.element.append(Z);var $=Z.ownerDocument.createRange();$.selectNode(Z),(0,y.Hc)($),document.execCommand("copy"),Z.remove(),w.tip.show(["zhihu","mp-wechat"].includes(X)?"已复制，可到".concat(X==="zhihu"?"知乎":"微信公众号平台","进行粘贴"):"已复制到剪切板")},z}(),x8=function(){function z(w){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--".concat(w.options.resize.position),this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(w)}return z.prototype.bindEvent=function(w){var Z=this;this.element.addEventListener("mousedown",function(X){var $=document,G=X.clientY,Q=w.element.offsetHeight,q=63+w.element.querySelector(".vditor-toolbar").clientHeight;if($.ondragstart=function(){return!1},window.captureEvents)window.captureEvents();Z.element.classList.add("vditor-resize--selected"),$.onmousemove=function(V){if(w.options.resize.position==="top")w.element.style.height=Math.max(q,Q+(G-V.clientY))+"px";else w.element.style.height=Math.max(q,Q+(V.clientY-G))+"px";if(w.options.typewriterMode)w.sv.element.style.paddingBottom=w.sv.element.parentElement.offsetHeight/2+"px"},$.onmouseup=function(){if(w.options.resize.after)w.options.resize.after(w.element.offsetHeight-Q);if(window.captureEvents)window.captureEvents();$.onmousemove=null,$.onmouseup=null,$.ondragstart=null,$.onselectstart=null,$.onselect=null,Z.element.classList.remove("vditor-resize--selected")}})},z}(),R8=function(){function z(w){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",w.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(w),T1(w,this.element),h1(w,this.element),u1(w,this.element),g1(w,this.element),k1(w,this.element),_1(w,this.element,this.copy),b1(w,this.element,this.copy)}return z.prototype.copy=function(w,Z){w.stopPropagation(),w.preventDefault(),w.clipboardData.setData("text/plain",J1(Z[Z.currentMode].element))},z.prototype.bindEvent=function(w){var Z=this;this.element.addEventListener("paste",function(X){L1(w,X,{pasteCode:function($){document.execCommand("insertHTML",!1,$)}})}),this.element.addEventListener("scroll",function(){if(w.preview.element.style.display!=="block")return;var X=Z.element.scrollTop,$=Z.element.clientHeight,G=Z.element.scrollHeight-parseFloat(Z.element.style.paddingBottom||"0"),Q=w.preview.element;if(X/$>0.5)Q.scrollTop=(X+$)*Q.scrollHeight/G-$;else Q.scrollTop=X*Q.scrollHeight/G}),this.element.addEventListener("compositionstart",function(X){Z.composingLock=!0}),this.element.addEventListener("compositionend",function(X){if(!(0,J.vU)())Q0(w,X);Z.composingLock=!1}),this.element.addEventListener("input",function(X){if(X.inputType==="deleteByDrag"||X.inputType==="insertFromDrop")return;if(Z.composingLock||X.data==="‘"||X.data==="“"||X.data==="《")return;if(Z.preventInput){Z.preventInput=!1,f0(w,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}Q0(w,X)}),this.element.addEventListener("keyup",function(X){if(X.isComposing||(0,J.yl)(X))return;if((X.key==="Backspace"||X.key==="Delete")&&w.sv.element.innerHTML!==""&&w.sv.element.childNodes.length===1&&w.sv.element.firstElementChild&&w.sv.element.firstElementChild.tagName==="DIV"&&w.sv.element.firstElementChild.childElementCount===2&&(w.sv.element.firstElementChild.textContent===""||w.sv.element.textContent===`
`)){w.sv.element.innerHTML="";return}if(X.key==="Enter")S0(w)})},z}(),T5=function(){function z(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return z.prototype.show=function(w,Z){var X=this;if(Z===void 0)Z=6000;if(this.element.className="vditor-tip vditor-tip--show",Z===0)this.element.innerHTML='<div class="vditor-tip__content">'.concat(w,`
<div class="vditor-tip__close">X</div></div>`),this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){X.hide()});else this.element.innerHTML='<div class="vditor-tip__content">'.concat(w,"</div>"),setTimeout(function(){X.hide()},Z);this.element.removeAttribute("style"),setTimeout(function(){var $=X.element.getBoundingClientRect();if($.top<46)X.element.style.position="fixed",X.element.style.top="46px"},150)},z.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},z}(),d1=function(z,w){if(w.options.preview.mode===z)return;switch(w.options.preview.mode=z,z){case"both":w.sv.element.style.display="block",w.preview.element.style.display="block",w.preview.render(w),F(w.toolbar.elements,["both"]);break;case"editor":w.sv.element.style.display="block",w.preview.element.style.display="none",O(w.toolbar.elements,["both"]);break;default:break}if(w.devtools)w.devtools.renderEchart(w)},M8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),I8=function(z){M8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;if(Z.options.preview.mode==="both")$.element.children[0].classList.add("vditor-menu--current");return $.element.children[0].addEventListener((0,J.Le)(),function(G){var Q=$.element.firstElementChild;if(Q.classList.contains(P.g.CLASS_MENU_DISABLED))return;if(G.preventDefault(),Z.currentMode!=="sv")return;if(Z.options.preview.mode==="both")d1("editor",Z);else d1("both",Z)}),$}return w}(K0),C8=function(){function z(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return z}(),h5=i(580),T8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),h8=function(z){T8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G=$.element.children[0],Q=document.createElement("div");Q.className="vditor-hint".concat(X.level===2?"":" vditor-panel--arrow");var q="";return P.g.CODE_THEME.forEach(function(V){q+="<button>".concat(V,"</button>")}),Q.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(q,"</div>"),Q.addEventListener((0,J.Le)(),function(V){if(V.target.tagName==="BUTTON")D(Z,["subToolbar"]),Z.options.preview.hljs.style=V.target.textContent,(0,h5.Y)(V.target.textContent,Z.options.cdn),V.preventDefault(),V.stopPropagation()}),$.element.appendChild(Q),W(Z,Q,G,X.level),$}return w}(K0),k8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),_8=function(z){k8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G=$.element.children[0],Q=document.createElement("div");Q.className="vditor-hint".concat(X.level===2?"":" vditor-panel--arrow");var q="";return Object.keys(Z.options.preview.theme.list).forEach(function(V){q+='<button data-type="'.concat(V,'">').concat(Z.options.preview.theme.list[V],"</button>")}),Q.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(q,"</div>"),Q.addEventListener((0,J.Le)(),function(V){if(V.target.tagName==="BUTTON")D(Z,["subToolbar"]),Z.options.preview.theme.current=V.target.getAttribute("data-type"),(0,n.Z)(Z.options.preview.theme.current,Z.options.preview.theme.path),V.preventDefault(),V.stopPropagation()}),$.element.appendChild(Q),W(Z,Q,G,X.level),$}return w}(K0),b8=function(){function z(w){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(w,"")}return z.prototype.render=function(w,Z){var X=Z.endsWith(`
`)?Z.length-1:Z.length;if(w.options.counter.type==="text"&&w[w.currentMode]){var $=w[w.currentMode].element.cloneNode(!0);$.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(G){G.remove()}),X=$.textContent.length}if(typeof w.options.counter.max==="number"){if(X>w.options.counter.max)this.element.className="vditor-counter vditor-counter--error";else this.element.className="vditor-counter";this.element.innerHTML="".concat(X,"/").concat(w.options.counter.max)}else this.element.innerHTML="".concat(X);if(this.element.setAttribute("aria-label",w.options.counter.type),w.options.counter.after)w.options.counter.after(X,{enable:w.options.counter.enable,max:w.options.counter.max,type:w.options.counter.type})},z}(),u8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),g8=function(z){u8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].innerHTML=X.icon,$.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),G.currentTarget.classList.contains(P.g.CLASS_MENU_DISABLED))return;X.click(G,Z)}),$}return w}(K0),c8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),p8=function(z){c8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.firstElementChild.addEventListener((0,J.Le)(),function(G){var Q=$.element.firstElementChild;if(Q.classList.contains(P.g.CLASS_MENU_DISABLED))return;if(G.preventDefault(),Q.classList.contains("vditor-menu--current"))Q.classList.remove("vditor-menu--current"),Z.devtools.element.style.display="none",u0(Z);else Q.classList.add("vditor-menu--current"),Z.devtools.element.style.display="block",u0(Z),Z.devtools.renderEchart(Z)}),$}return w}(K0),E8=function(){function z(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return z}(),s8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),a8=function(z){s8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G=document.createElement("div");G.className="vditor-panel vditor-panel--arrow";var Q="";return Object.keys(Z.options.hint.emoji).forEach(function(q){var V=Z.options.hint.emoji[q];if(V.indexOf(".")>-1)Q+='<button data-value=":'.concat(q,': " data-key=":').concat(q,`:"><img
data-value=":`).concat(q,': " data-key=":').concat(q,':" class="vditor-emojis__icon" src="').concat(V,'"/></button>');else Q+='<button data-value="'.concat(V,` "
 data-key="`).concat(q,'"><span class="vditor-emojis__icon">').concat(V,"</span></button>")}),G.innerHTML='<div class="vditor-emojis" style="max-height: '.concat(Z.options.height==="auto"?"auto":Z.options.height-80,'px">').concat(Q,`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`).concat(Z.options.hint.emojiTail||"",`</span>
</div>`),$.element.appendChild(G),W(Z,G,$.element.firstElementChild,X.level),$.bindEvent(Z),$}return w.prototype.bindEvent=function(Z){var X=this;this.element.lastElementChild.addEventListener((0,J.Le)(),function($){var G=(0,B.S)($.target,"BUTTON");if(G){$.preventDefault();var Q=G.getAttribute("data-value"),q=(0,y.zh)(Z),V=Q;if(Z.currentMode==="wysiwyg")V=Z.lute.SpinVditorDOM(Q);else if(Z.currentMode==="ir")V=Z.lute.SpinVditorIRDOM(Q);if(Q.indexOf(":")>-1&&Z.currentMode!=="sv"){var A=document.createElement("div");A.innerHTML=V,V=A.firstElementChild.firstElementChild.outerHTML+" ",(0,y.oC)(V,Z)}else if(q.extractContents(),q.insertNode(document.createTextNode(Q)),!(0,U.F9)(q.startContainer))M1(Z,q);q.collapse(!1),(0,y.Hc)(q),X.element.lastElementChild.style.display="none",e(Z)}}),this.element.lastElementChild.addEventListener("mouseover",function($){var G=(0,B.S)($.target,"BUTTON");if(G)X.element.querySelector(".vditor-emojis__tip").innerHTML=G.getAttribute("data-key")})},w}(K0),k5=function(z,w,Z){var X=document.createElement("a");if("download"in X)X.download=Z,X.style.display="none",X.href=URL.createObjectURL(new Blob([w])),document.body.appendChild(X),X.click(),X.remove();else z.tip.show(window.VditorI18n.downloadTip,0)},l8=function(z){var w=I(z);k5(z,w,w.substr(0,10)+".md")},m8=function(z){z.tip.show(window.VditorI18n.generate,3800);var w=document.querySelector("#vditorExportIframe");w.contentDocument.open(),w.contentDocument.write('<link rel="stylesheet" href="'.concat(z.options.cdn,`/dist/index.css"/>
<script src="`).concat(z.options.cdn,`/dist/method.min.js"></script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`).concat(z.options.cdn,`",
    markdown: {
      theme: `).concat(JSON.stringify(z.options.preview.theme),`
    },
    hljs: {
      style: "`).concat(z.options.preview.hljs.style,`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
</script>`)),w.contentDocument.close(),setTimeout(function(){w.contentWindow.postMessage(I(z),"*")},200)},d8=function(z){var w=I5(z),Z='<html><head><link rel="stylesheet" type="text/css" href="'.concat(z.options.cdn,`/dist/index.css"/>
<script src="`).concat(z.options.cdn,"/dist/js/i18n/").concat(z.options.lang,`.js"></script>
<script src="`).concat(z.options.cdn,`/dist/method.min.js"></script></head>
<body><div class="vditor-reset" id="preview">`).concat(w,`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`).concat(z.options.preview.theme.current,"', '").concat(z.options.preview.theme.path,`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`).concat(JSON.stringify(z.options.preview.hljs),", previewElement, '").concat(z.options.cdn,`');
    Vditor.mathRender(previewElement, {
        cdn: '`).concat(z.options.cdn,`',
        math: `).concat(JSON.stringify(z.options.preview.math),`,
    });
    Vditor.mermaidRender(previewElement, '`).concat(z.options.cdn,"', '").concat(z.options.theme,`');
    Vditor.SMILESRender(previewElement, '`).concat(z.options.cdn,"', '").concat(z.options.theme,`');
    Vditor.markmapRender(previewElement, '`).concat(z.options.cdn,`');
    Vditor.flowchartRender(previewElement, '`).concat(z.options.cdn,`');
    Vditor.graphvizRender(previewElement, '`).concat(z.options.cdn,`');
    Vditor.chartRender(previewElement, '`).concat(z.options.cdn,"', '").concat(z.options.theme,`');
    Vditor.mindmapRender(previewElement, '`).concat(z.options.cdn,"', '").concat(z.options.theme,`');
    Vditor.abcRender(previewElement, '`).concat(z.options.cdn,`');
    `).concat(z.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"",`
    Vditor.speechRender(previewElement);
</script>
<script src="`).concat(z.options.cdn,"/dist/js/icons/").concat(z.options.icon,'.js"></script></body></html>');k5(z,Z,w.substr(0,10)+".html")},o8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),v8=function(z){o8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G=$.element.children[0],Q=document.createElement("div");return Q.className="vditor-hint".concat(X.level===2?"":" vditor-panel--arrow"),Q.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,Q.addEventListener((0,J.Le)(),function(q){var V=q.target;if(V.tagName==="BUTTON"){switch(V.getAttribute("data-type")){case"markdown":l8(Z);break;case"pdf":m8(Z);break;case"html":d8(Z);break;default:break}D(Z,["subToolbar"]),q.preventDefault(),q.stopPropagation()}}),$.element.appendChild(Q),W(Z,Q,G,X.level),$}return w}(K0),r8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),i8=function(z){r8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $._bindEvent(Z,X),$}return w.prototype._bindEvent=function(Z,X){this.element.children[0].addEventListener((0,J.Le)(),function($){if($.preventDefault(),Z.element.className.includes("vditor--fullscreen")){if(!X.level)this.innerHTML=X.icon;if(Z.element.style.zIndex="",document.body.style.overflow="",Z.element.classList.remove("vditor--fullscreen"),Object.keys(Z.toolbar.elements).forEach(function(G){var Q=Z.toolbar.elements[G].firstChild;if(Q)Q.className=Q.className.replace("__s","__n"),Z.options.toolbar.forEach(function(q){if(typeof q!=="string"&&q.tipPosition&&q.name===Q.dataset.type)Q.className="vditor-tooltipped vditor-tooltipped__".concat(q.tipPosition)})}),Z.counter)Z.counter.element.className=Z.counter.element.className.replace("__s","__n")}else{if(!X.level)this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>';if(Z.element.style.zIndex=Z.options.fullscreen.index.toString(),document.body.style.overflow="hidden",Z.element.classList.add("vditor--fullscreen"),Object.keys(Z.toolbar.elements).forEach(function(G){var Q=Z.toolbar.elements[G].firstChild;if(Q)Q.className=Q.className.replace("__n","__s")}),Z.counter)Z.counter.element.className=Z.counter.element.className.replace("__n","__s")}if(Z.devtools)Z.devtools.renderEchart(Z);if(X.click)X.click($,Z);u0(Z),W1(Z)})},w}(K0),n8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),t8=function(z){n8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G=document.createElement("div");return G.className="vditor-hint vditor-panel--arrow",G.innerHTML='<button data-tag="h1" data-value="# ">'.concat(window.VditorI18n.heading1," ").concat((0,J.ns)("&lt;⌥⌘1>"),`</button>
<button data-tag="h2" data-value="## ">`).concat(window.VditorI18n.heading2," &lt;").concat((0,J.ns)("⌥⌘2"),`></button>
<button data-tag="h3" data-value="### ">`).concat(window.VditorI18n.heading3," &lt;").concat((0,J.ns)("⌥⌘3"),`></button>
<button data-tag="h4" data-value="#### ">`).concat(window.VditorI18n.heading4," &lt;").concat((0,J.ns)("⌥⌘4"),`></button>
<button data-tag="h5" data-value="##### ">`).concat(window.VditorI18n.heading5," &lt;").concat((0,J.ns)("⌥⌘5"),`></button>
<button data-tag="h6" data-value="###### ">`).concat(window.VditorI18n.heading6," &lt;").concat((0,J.ns)("⌥⌘6"),"></button>"),$.element.appendChild(G),$._bindEvent(Z,G),$}return w.prototype._bindEvent=function(Z,X){var $=this.element.children[0];$.addEventListener((0,J.Le)(),function(Q){if(Q.preventDefault(),clearTimeout(Z.wysiwyg.afterRenderTimeoutId),clearTimeout(Z.ir.processTimeoutId),clearTimeout(Z.sv.processTimeoutId),$.classList.contains(P.g.CLASS_MENU_DISABLED))return;if($.blur(),$.classList.contains("vditor-menu--current")){if(Z.currentMode==="wysiwyg")I1(Z),A0(Z);else if(Z.currentMode==="ir")q1(Z,"");$.classList.remove("vditor-menu--current")}else D(Z,["subToolbar"]),X.style.display="block"});for(var G=0;G<6;G++)X.children.item(G).addEventListener((0,J.Le)(),function(Q){if(Q.preventDefault(),Z.currentMode==="wysiwyg")S1(Z,Q.target.getAttribute("data-tag")),A0(Z),$.classList.add("vditor-menu--current");else if(Z.currentMode==="ir")q1(Z,Q.target.getAttribute("data-value")),$.classList.add("vditor-menu--current");else G5(Z,Q.target.getAttribute("data-value"));X.style.display="none"})},w}(K0),e8=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),z4=function(z){e8(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].addEventListener((0,J.Le)(),function(G){G.preventDefault(),Z.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),$}return w}(K0),w4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),Z4=function(z){w4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||Z.currentMode==="sv")return;var Q=(0,y.zh)(Z),q=(0,U.lG)(Q.startContainer,"LI");if(q)V5(Z,q,Q)}),$}return w}(K0),X4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),$4=function(z){X4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].addEventListener((0,J.Le)(),function(G){G.preventDefault(),Z.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`.concat(P.H," / Lute v").concat(Lute.Version,`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`),0)}),$}return w}(K0),G4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),Q4=function(z){G4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||Z.currentMode==="sv")return;Y1(Z,"afterend")}),$}return w}(K0),U4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),J4=function(z){U4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||Z.currentMode==="sv")return;Y1(Z,"beforebegin")}),$}return w}(K0),Y4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),A4=function(z){Y4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||Z.currentMode==="sv")return;var Q=(0,y.zh)(Z),q=(0,U.lG)(Q.startContainer,"LI");if(q)E1(Z,q,Q,q.parentElement)}),$}return w}(K0),q4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),j4=function(z){q4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;if(Z.options.outline)$.element.firstElementChild.classList.add("vditor-menu--current");return $.element.children[0].addEventListener((0,J.Le)(),function(G){G.preventDefault();var Q=Z.toolbar.elements.outline.firstElementChild;if(Q.classList.contains(P.g.CLASS_MENU_DISABLED))return;Z.options.outline.enable=!$.element.firstElementChild.classList.contains("vditor-menu--current"),Z.outline.toggle(Z,Z.options.outline.enable)}),$}return w}(K0),F4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),V4=function(z){F4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $._bindEvent(Z),$}return w.prototype._bindEvent=function(Z){var X=this;this.element.children[0].addEventListener((0,J.Le)(),function($){$.preventDefault();var G=X.element.firstElementChild;if(G.classList.contains(P.g.CLASS_MENU_DISABLED))return;var Q=P.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);if(G.classList.contains("vditor-menu--current")){if(G.classList.remove("vditor-menu--current"),Z.currentMode==="sv")if(Z.sv.element.style.display="block",Z.options.preview.mode==="both")Z.preview.element.style.display="block";else Z.preview.element.style.display="none";else Z[Z.currentMode].element.parentElement.style.display="block",Z.preview.element.style.display="none";K(Z.toolbar.elements,Q),Z.outline.render(Z)}else{if(j(Z.toolbar.elements,Q),Z.preview.element.style.display="block",Z.currentMode==="sv")Z.sv.element.style.display="none";else Z[Z.currentMode].element.parentElement.style.display="none";Z.preview.render(Z),G.classList.add("vditor-menu--current"),D(Z,["subToolbar","hint","popover"]),setTimeout(function(){Z.outline.render(Z)},Z.options.preview.delay+10)}u0(Z)})},w}(K0),K4=function(){function z(w){this.SAMPLE_RATE=5000,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var Z;if(typeof AudioContext<"u")Z=new AudioContext;else if(webkitAudioContext)Z=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=Z.sampleRate;var X=Z.createGain(),$=Z.createMediaStreamSource(w);$.connect(X),this.recorder=Z.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,X.connect(this.recorder),this.recorder.connect(Z.destination),this.readyFlag=!0}return z.prototype.cloneChannelData=function(w,Z){this.leftChannel.push(new Float32Array(w)),this.rightChannel.push(new Float32Array(Z)),this.recordingLength+=2048},z.prototype.startRecordingNewWavFile=function(){if(this.readyFlag)this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0},z.prototype.stopRecording=function(){this.isRecording=!1},z.prototype.buildWavFileBlob=function(){var w=this.mergeBuffers(this.leftChannel),Z=this.mergeBuffers(this.rightChannel),X=new Float32Array(w.length);for(var $=0;$<w.length;++$)X[$]=0.5*(w[$]+Z[$]);if(this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE)X=this.downSampleBuffer(X,this.SAMPLE_RATE);var G=44+X.length*2,Q=new ArrayBuffer(G),q=new DataView(Q);this.writeUTFBytes(q,0,"RIFF"),q.setUint32(4,G,!0),this.writeUTFBytes(q,8,"WAVE"),this.writeUTFBytes(q,12,"fmt "),q.setUint32(16,16,!0),q.setUint16(20,1,!0),q.setUint16(22,1,!0),q.setUint32(24,this.SAMPLE_RATE,!0),q.setUint32(28,this.SAMPLE_RATE*2,!0),q.setUint16(32,2,!0),q.setUint16(34,16,!0);var V=X.length*2;this.writeUTFBytes(q,36,"data"),q.setUint32(40,V,!0);var A=X.length,f=44,x=1;for(var b=0;b<A;b++)q.setInt16(f,X[b]*(32767*x),!0),f+=2;return new Blob([q],{type:"audio/wav"})},z.prototype.downSampleBuffer=function(w,Z){if(Z===this.DEFAULT_SAMPLE_RATE)return w;if(Z>this.DEFAULT_SAMPLE_RATE)return w;var X=this.DEFAULT_SAMPLE_RATE/Z,$=Math.round(w.length/X),G=new Float32Array($),Q=0,q=0;while(Q<G.length){var V=Math.round((Q+1)*X),A=0,f=0;for(var x=q;x<V&&x<w.length;x++)A+=w[x],f++;G[Q]=A/f,Q++,q=V}return G},z.prototype.mergeBuffers=function(w){var Z=new Float32Array(this.recordingLength),X=0,$=w.length;for(var G=0;G<$;++G){var Q=w[G];Z.set(Q,X),X+=Q.length}return Z},z.prototype.writeUTFBytes=function(w,Z,X){var $=X.length;for(var G=0;G<$;G++)w.setUint8(Z+G,X.charCodeAt(G))},z}(),O4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),D4=function(z){O4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return $._bindEvent(Z),$}return w.prototype._bindEvent=function(Z){var X=this,$;this.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),X.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED))return;var Q=Z[Z.currentMode].element;if(!$){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(V){$=new K4(V),$.recorder.onaudioprocess=function(A){if(!$.isRecording)return;var f=A.inputBuffer.getChannelData(0),x=A.inputBuffer.getChannelData(1);$.cloneChannelData(f,x)},$.startRecordingNewWavFile(),Z.tip.show(window.VditorI18n.recording),Q.setAttribute("contenteditable","false"),X.element.children[0].classList.add("vditor-menu--current")}).catch(function(){Z.tip.show(window.VditorI18n["record-tip"])});return}if($.isRecording){$.stopRecording(),Z.tip.hide();var q=new File([$.buildWavFileBlob()],"record".concat(new Date().getTime(),".wav"),{type:"video/webm"});p1(Z,[q]),X.element.children[0].classList.remove("vditor-menu--current")}else Z.tip.show(window.VditorI18n.recording),Q.setAttribute("contenteditable","false"),$.startRecordingNewWavFile(),X.element.children[0].classList.add("vditor-menu--current")})},w}(K0),W4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),S4=function(z){W4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return j({redo:$.element},["redo"]),$.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED))return;Z.undo.redo(Z)}),$}return w}(K0),P4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),B4=function(z){P4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this;return j({undo:$.element},["undo"]),$.element.children[0].addEventListener((0,J.Le)(),function(G){if(G.preventDefault(),$.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED))return;Z.undo.undo(Z)}),$}return w}(K0),f4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),H4=function(z){f4(w,z);function w(Z,X){var $=z.call(this,Z,X)||this,G='<input type="file"';if(Z.options.upload.multiple)G+=' multiple="multiple"';if(Z.options.upload.accept)G+=' accept="'.concat(Z.options.upload.accept,'"');return $.element.children[0].innerHTML="".concat(X.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>').concat(G,">"),$._bindEvent(Z),$}return w.prototype._bindEvent=function(Z){var X=this;this.element.children[0].addEventListener((0,J.Le)(),function($){if(X.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)){$.stopPropagation(),$.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function($){if(X.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)){$.stopPropagation(),$.preventDefault();return}if($.target.files.length===0)return;p1(Z,$.target.files,$.target)})},w}(K0),N4=function(){function z(w){var Z=this,X=w.options;if(this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",X.toolbar.forEach(function($,G){var Q=Z.genItem(w,$,G);if(Z.element.appendChild(Q),$.toolbar){var q=document.createElement("div");q.className="vditor-hint vditor-panel--arrow",q.addEventListener((0,J.Le)(),function(V){q.style.display="none"}),$.toolbar.forEach(function(V,A){V.level=2,q.appendChild(Z.genItem(w,V,G+A))}),Q.appendChild(q),W(w,q,Q.children[0],2)}}),w.options.toolbarConfig.hide)this.element.classList.add("vditor-toolbar--hide");if(w.options.toolbarConfig.pin)this.element.classList.add("vditor-toolbar--pin");if(w.options.counter.enable)w.counter=new b8(w),this.element.appendChild(w.counter.element)}return z.prototype.updateConfig=function(w,Z){if(w.options.toolbarConfig=Object.assign({hide:!1,pin:!1},Z),w.options.toolbarConfig.hide)this.element.classList.add("vditor-toolbar--hide");else this.element.classList.remove("vditor-toolbar--hide");if(w.options.toolbarConfig.pin)this.element.classList.add("vditor-toolbar--pin");else this.element.classList.remove("vditor-toolbar--pin")},z.prototype.genItem=function(w,Z,X){var $;switch(Z.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":$=new K0(w,Z);break;case"emoji":$=new a8(w,Z);break;case"headings":$=new t8(w,Z);break;case"|":$=new E8;break;case"br":$=new C8;break;case"undo":$=new B4(w,Z);break;case"redo":$=new S4(w,Z);break;case"help":$=new z4(w,Z);break;case"both":$=new I8(w,Z);break;case"preview":$=new V4(w,Z);break;case"fullscreen":$=new i8(w,Z);break;case"upload":$=new H4(w,Z);break;case"record":$=new D4(w,Z);break;case"info":$=new $4(w,Z);break;case"edit-mode":$=new Q8(w,Z);break;case"devtools":$=new p8(w,Z);break;case"outdent":$=new A4(w,Z);break;case"indent":$=new Z4(w,Z);break;case"outline":$=new j4(w,Z);break;case"insert-after":$=new Q4(w,Z);break;case"insert-before":$=new J4(w,Z);break;case"code-theme":$=new h8(w,Z);break;case"content-theme":$=new _8(w,Z);break;case"export":$=new v8(w,Z);break;default:$=new g8(w,Z);break}if(!$)return;var G=Z.name;if(G==="br"||G==="|")G=G+X;return this.elements[G]=$.element,$.element},z}(),L4=i(173),y4=function(){function z(){this.stackSize=50,this.resetStack(),this.dmp=new L4}return z.prototype.clearStack=function(w){this.resetStack(),this.resetIcon(w)},z.prototype.resetIcon=function(w){if(!w.toolbar)return;if(this[w.currentMode].undoStack.length>1)K(w.toolbar.elements,["undo"]);else j(w.toolbar.elements,["undo"]);if(this[w.currentMode].redoStack.length!==0)K(w.toolbar.elements,["redo"]);else j(w.toolbar.elements,["redo"])},z.prototype.undo=function(w){if(w[w.currentMode].element.getAttribute("contenteditable")==="false")return;if(this[w.currentMode].undoStack.length<2)return;var Z=this[w.currentMode].undoStack.pop();if(!Z)return;this[w.currentMode].redoStack.push(Z),this.renderDiff(Z,w),this[w.currentMode].hasUndo=!0,D(w,["hint"])},z.prototype.redo=function(w){if(w[w.currentMode].element.getAttribute("contenteditable")==="false")return;var Z=this[w.currentMode].redoStack.pop();if(!Z)return;this[w.currentMode].undoStack.push(Z),this.renderDiff(Z,w,!0)},z.prototype.recordFirstPosition=function(w,Z){if(getSelection().rangeCount===0)return;if(this[w.currentMode].undoStack.length!==1||this[w.currentMode].undoStack[0].length===0||this[w.currentMode].redoStack.length>0)return;if((0,J.vU)()&&Z.key==="Backspace")return;if((0,J.G6)())return;var X=this.addCaret(w);if(X.replace("<wbr>","").replace(" vditor-ir__node--expand","")!==this[w.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>",""))return;this[w.currentMode].undoStack[0][0].diffs[0][1]=X,this[w.currentMode].lastText=X},z.prototype.addToUndoStack=function(w){var Z=this.addCaret(w,!0),X=this.dmp.diff_main(Z,this[w.currentMode].lastText,!0),$=this.dmp.patch_make(Z,this[w.currentMode].lastText,X);if($.length===0&&this[w.currentMode].undoStack.length>0)return;if(this[w.currentMode].lastText=Z,this[w.currentMode].undoStack.push($),this[w.currentMode].undoStack.length>this.stackSize)this[w.currentMode].undoStack.shift();if(this[w.currentMode].hasUndo)this[w.currentMode].redoStack=[],this[w.currentMode].hasUndo=!1,j(w.toolbar.elements,["redo"]);if(this[w.currentMode].undoStack.length>1)K(w.toolbar.elements,["undo"])},z.prototype.renderDiff=function(w,Z,X){if(X===void 0)X=!1;var $;if(X){var G=this.dmp.patch_deepCopy(w).reverse();G.forEach(function(q){q.diffs.forEach(function(V){V[0]=-V[0]})}),$=this.dmp.patch_apply(G,this[Z.currentMode].lastText)[0]}else $=this.dmp.patch_apply(w,this[Z.currentMode].lastText)[0];if(this[Z.currentMode].lastText=$,Z[Z.currentMode].element.innerHTML=$,Z.currentMode!=="sv")Z[Z.currentMode].element.querySelectorAll(".vditor-".concat(Z.currentMode,"__preview")).forEach(function(q){if(q.parentElement.querySelector(".language-echarts"))if(Z.currentMode==="ir")q.parentElement.outerHTML=Z.lute.SpinVditorIRDOM(q.parentElement.outerHTML);else q.parentElement.outerHTML=Z.lute.SpinVditorDOM(q.parentElement.outerHTML)}),Z[Z.currentMode].element.querySelectorAll(".vditor-".concat(Z.currentMode,"__preview[data-render='2']")).forEach(function(q){B0(q,Z)});if(!Z[Z.currentMode].element.querySelector("wbr")){var Q=getSelection().getRangeAt(0);Q.setEndBefore(Z[Z.currentMode].element),Q.collapse(!1)}else(0,y.ib)(Z[Z.currentMode].element,Z[Z.currentMode].element.ownerDocument.createRange()),S0(Z);if(s0(Z),e(Z,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),z1(Z),Z[Z.currentMode].element.querySelectorAll(".vditor-".concat(Z.currentMode,"__preview[data-render='2']")).forEach(function(q){B0(q,Z)}),this[Z.currentMode].undoStack.length>1)K(Z.toolbar.elements,["undo"]);else j(Z.toolbar.elements,["undo"]);if(this[Z.currentMode].redoStack.length!==0)K(Z.toolbar.elements,["redo"]);else j(Z.toolbar.elements,["redo"])},z.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},z.prototype.addCaret=function(w,Z){if(Z===void 0)Z=!1;var X;if(getSelection().rangeCount!==0&&!w[w.currentMode].element.querySelector("wbr")){var $=getSelection().getRangeAt(0);if(w[w.currentMode].element.contains($.startContainer)){X=$.cloneRange();var G=document.createElement("span");G.className="vditor-wbr",$.insertNode(G)}}var Q=w[w.currentMode].element.cloneNode(!0);Q.querySelectorAll(".vditor-".concat(w.currentMode,"__preview[data-render='1']")).forEach(function(V){if(!V.firstElementChild)return;if(V.firstElementChild.classList.contains("language-echarts")||V.firstElementChild.classList.contains("language-plantuml")||V.firstElementChild.classList.contains("language-mindmap"))V.firstElementChild.removeAttribute("_echarts_instance_"),V.firstElementChild.removeAttribute("data-processed"),V.firstElementChild.innerHTML=V.previousElementSibling.firstElementChild.innerHTML,V.setAttribute("data-render","2");else if(V.firstElementChild.classList.contains("language-math"))V.setAttribute("data-render","2"),V.firstElementChild.textContent=V.firstElementChild.getAttribute("data-math"),V.firstElementChild.removeAttribute("data-math")});var q=Q.innerHTML;if(w[w.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(V){V.remove()}),Z&&X)(0,y.Hc)(X);return q.replace('<span class="vditor-wbr"></span>',"<wbr>")},z}(),x4=i(673),R4=function(){function z(w){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:P.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"\uD83D\uDC4D","-1":"\uD83D\uDC4E",confused:"\uD83D\uDE15",eyes:"\uD83D\uDC40️",heart:"❤️",rocket:"\uD83D\uDE80️",smile:"\uD83D\uDE04",tada:"\uD83C\uDF89️"},emojiPath:"".concat(P.g.CDN,"/dist/images/emoji"),extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1000,hljs:P.g.HLJS_OPTIONS,markdown:P.g.MARKDOWN_OPTIONS,math:P.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:P.g.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(Z){return Z.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=w}return z.prototype.merge=function(){var w,Z,X,$,G,Q,q,V,A;if(this.options){if(this.options.toolbar)this.options.toolbar=this.mergeToolbar(this.options.toolbar);else this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar);if((Z=(w=this.options.preview)===null||w===void 0?void 0:w.theme)===null||Z===void 0?void 0:Z.list)this.defaultOptions.preview.theme.list=this.options.preview.theme.list;if((G=($=(X=this.options.preview)===null||X===void 0?void 0:X.render)===null||$===void 0?void 0:$.media)===null||G===void 0?void 0:G.enable)this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable;if((Q=this.options.hint)===null||Q===void 0?void 0:Q.emoji)this.defaultOptions.hint.emoji=this.options.hint.emoji;if(this.options.comment)this.defaultOptions.comment=this.options.comment;if(this.options.cdn){if(!((V=(q=this.options.preview)===null||q===void 0?void 0:q.theme)===null||V===void 0?void 0:V.path))this.defaultOptions.preview.theme.path="".concat(this.options.cdn,"/dist/css/content-theme");if(!((A=this.options.hint)===null||A===void 0?void 0:A.emojiPath))this.defaultOptions.hint.emojiPath="".concat(this.options.cdn,"/dist/images/emoji")}}var f=(0,x4.T)(this.defaultOptions,this.options);if(f.cache.enable&&!f.cache.id)throw Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return f},z.prototype.mergeToolbar=function(w){var Z=this,X=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],$=[];return w.forEach(function(G){var Q=G;if(X.forEach(function(q){if(typeof G==="string"&&q.name===G)Q=q;if(typeof G==="object"&&q.name===G.name)Q=Object.assign({},q,G)}),G.toolbar)Q.toolbar=Z.mergeToolbar(G.toolbar);$.push(Q)}),$},z}(),M4=function(){function z(w){var Z=this;this.composingLock=!1,this.commentIds=[];var X=document.createElement("div");if(X.className="vditor-wysiwyg",X.innerHTML='<pre class="vditor-reset" placeholder="'.concat(w.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`).concat(window.VditorI18n.comment,`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`),this.element=X.firstElementChild,this.popover=X.firstElementChild.nextElementSibling,this.selectPopover=X.lastElementChild,this.bindEvent(w),T1(w,this.element),X5(w,this.element),h1(w,this.element),u1(w,this.element),g1(w,this.element),k1(w,this.element),_1(w,this.element,this.copy),b1(w,this.element,this.copy),w.options.comment.enable)this.selectPopover.querySelector("button").onclick=function(){var $=Lute.NewNodeID(),G=getSelection().getRangeAt(0),Q=G.cloneRange(),q=G.extractContents(),V,A,f=!1,x=!1;q.childNodes.forEach(function(T,p){var g=!1;if(T.nodeType===3)g=!0;else if(!T.classList.contains("vditor-comment"))g=!0;else if(T.classList.contains("vditor-comment"))T.setAttribute("data-cmtids",T.getAttribute("data-cmtids")+" "+$);if(g)if(T.nodeType!==3&&T.getAttribute("data-block")==="0"&&p===0&&Q.startOffset>0)T.innerHTML='<span class="vditor-comment" data-cmtids="'.concat($,'">').concat(T.innerHTML,"</span>"),V=T;else if(T.nodeType!==3&&T.getAttribute("data-block")==="0"&&p===q.childNodes.length-1&&Q.endOffset<Q.endContainer.textContent.length)T.innerHTML='<span class="vditor-comment" data-cmtids="'.concat($,'">').concat(T.innerHTML,"</span>"),A=T;else if(T.nodeType!==3&&T.getAttribute("data-block")==="0"){if(p===0)f=!0;else if(p===q.childNodes.length-1)x=!0;T.innerHTML='<span class="vditor-comment" data-cmtids="'.concat($,'">').concat(T.innerHTML,"</span>")}else{var k=document.createElement("span");k.classList.add("vditor-comment"),k.setAttribute("data-cmtids",$),T.parentNode.insertBefore(k,T),k.appendChild(T)}});var b=(0,U.F9)(Q.startContainer);if(b){if(V)b.insertAdjacentHTML("beforeend",V.innerHTML),V.remove();else if(b.textContent.trim().replace(P.g.ZWSP,"")===""&&f)b.remove()}var h=(0,U.F9)(Q.endContainer);if(h){if(A)h.insertAdjacentHTML("afterbegin",A.innerHTML),A.remove();else if(h.textContent.trim().replace(P.g.ZWSP,"")===""&&x)h.remove()}G.insertNode(q),w.options.comment.add($,G.toString(),Z.getComments(w,!0)),A0(w,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Z.hideComment()}}return z.prototype.getComments=function(w,Z){var X=this;if(Z===void 0)Z=!1;if(w.currentMode==="wysiwyg"&&w.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(G){X.commentIds=X.commentIds.concat(G.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var $=[];if(Z)return this.commentIds.forEach(function(G){$.push({id:G,top:X.element.querySelector('.vditor-comment[data-cmtids="'.concat(G,'"]')).offsetTop})}),$}else return[]},z.prototype.triggerRemoveComment=function(w){var Z=function(G,Q){var q=new Set(Q);return G.filter(function(V){return!q.has(V)})};if(w.currentMode==="wysiwyg"&&w.options.comment.enable&&w.wysiwyg.commentIds.length>0){var X=JSON.parse(JSON.stringify(this.commentIds));this.getComments(w);var $=Z(X,this.commentIds);if($.length>0)w.options.comment.remove($)}},z.prototype.showComment=function(){var w=(0,y.Ny)(this.element);this.selectPopover.setAttribute("style","left:".concat(w.left,"px;display:block;top:").concat(Math.max(-8,w.top-21),"px"))},z.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},z.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},z.prototype.copy=function(w,Z){var X=getSelection().getRangeAt(0);if(X.toString()==="")return;w.stopPropagation(),w.preventDefault();var $=(0,U.lG)(X.startContainer,"CODE"),G=(0,U.lG)(X.endContainer,"CODE");if($&&G&&G.isSameNode($)){var Q="";if($.parentElement.tagName==="PRE")Q=X.toString();else Q="`"+X.toString()+"`";w.clipboardData.setData("text/plain",Q),w.clipboardData.setData("text/html","");return}var q=(0,U.lG)(X.startContainer,"A"),V=(0,U.lG)(X.endContainer,"A");if(q&&V&&V.isSameNode(q)){var A=q.getAttribute("title")||"";if(A)A=' "'.concat(A,'"');w.clipboardData.setData("text/plain","[".concat(X.toString(),"](").concat(q.getAttribute("href")).concat(A,")")),w.clipboardData.setData("text/html","");return}var f=document.createElement("div");f.appendChild(X.cloneContents()),w.clipboardData.setData("text/plain",Z.lute.VditorDOM2Md(f.innerHTML).trim()),w.clipboardData.setData("text/html","")},z.prototype.bindEvent=function(w){var Z=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(D(w,["hint"]),Z.popover.style.display!=="block"||Z.selectPopover.style.display!=="block")return;var X=parseInt(Z.popover.getAttribute("data-top"),10);if(w.options.height!=="auto"){if(w.options.toolbarConfig.pin&&w.toolbar.element.getBoundingClientRect().top===0){var $=Math.max(window.scrollY-w.element.offsetTop-8,Math.min(X-w.wysiwyg.element.scrollTop,Z.element.clientHeight-21))+"px";if(Z.popover.style.display==="block")Z.popover.style.top=$;if(Z.selectPopover.style.display==="block")Z.selectPopover.style.top=$}return}else if(!w.options.toolbarConfig.pin)return;var G=Math.max(X,window.scrollY-w.element.offsetTop-8)+"px";if(Z.popover.style.display==="block")Z.popover.style.top=G;if(Z.selectPopover.style.display==="block")Z.selectPopover.style.top=G}),this.element.addEventListener("scroll",function(){if(D(w,["hint"]),w.options.comment&&w.options.comment.enable&&w.options.comment.scroll)w.options.comment.scroll(w.wysiwyg.element.scrollTop);if(Z.popover.style.display!=="block")return;var X=parseInt(Z.popover.getAttribute("data-top"),10)-w.wysiwyg.element.scrollTop,$=-8;if(w.options.toolbarConfig.pin&&w.toolbar.element.getBoundingClientRect().top===0)$=window.scrollY-w.element.offsetTop+$;var G=Math.max($,Math.min(X,Z.element.clientHeight-21))+"px";Z.popover.style.top=G,Z.selectPopover.style.top=G}),this.element.addEventListener("paste",function(X){L1(w,X,{pasteCode:function($){var G=(0,y.zh)(w),Q=document.createElement("template");Q.innerHTML=$,G.insertNode(Q.content.cloneNode(!0));var q=(0,U.a1)(G.startContainer,"data-block","0");if(q)q.outerHTML=w.lute.SpinVditorDOM(q.outerHTML);else w.wysiwyg.element.innerHTML=w.lute.SpinVditorDOM(w.wysiwyg.element.innerHTML);(0,y.ib)(w.wysiwyg.element,G)}})}),this.element.addEventListener("compositionstart",function(){Z.composingLock=!0}),this.element.addEventListener("compositionend",function(X){var $=(0,B.W)(getSelection().getRangeAt(0).startContainer);if($&&$.textContent===""){s0(w);return}if(!(0,J.vU)())B1(w,getSelection().getRangeAt(0).cloneRange(),X);Z.composingLock=!1}),this.element.addEventListener("input",function(X){if(X.inputType==="deleteByDrag"||X.inputType==="insertFromDrop")return;if(Z.preventInput){Z.preventInput=!1,A0(w);return}if(Z.composingLock||X.data==="‘"||X.data==="“"||X.data==="《"){A0(w);return}var $=getSelection().getRangeAt(0),G=(0,U.F9)($.startContainer);if(!G)M1(w,$),G=(0,U.F9)($.startContainer);if(!G)return;var Q=(0,y.im)(G,w.wysiwyg.element,$).start,q=!0;for(var V=Q-1;V>G.textContent.substr(0,Q).lastIndexOf(`
`);V--)if(G.textContent.charAt(V)!==" "&&G.textContent.charAt(V)!=="\t"){q=!1;break}if(Q===0)q=!1;var A=!0;for(var V=Q-1;V<G.textContent.length;V++)if(G.textContent.charAt(V)!==" "&&G.textContent.charAt(V)!==`
`){A=!1;break}if(A&&/^#{1,6} $/.test(G.textContent))A=!1;var f=(0,B.W)(getSelection().getRangeAt(0).startContainer);if(f&&f.textContent==="")s0(w),f.remove();if(q&&G.getAttribute("data-type")!=="code-block"||A||a1(G.innerHTML)||s1(G.innerHTML)&&G.previousElementSibling){if(typeof w.options.input==="function")w.options.input(I(w));return}if(X.inputType==="insertParagraph"&&Z.element.innerHTML==="<p><br></p><p><br></p>")G.previousElementSibling.remove();B1(w,$,X)}),this.element.addEventListener("click",function(X){if(X.target.tagName==="INPUT"){var $=X.target;if($.checked)$.setAttribute("checked","checked");else $.removeAttribute("checked");if(Z.preventInput=!0,getSelection().rangeCount>0)(0,y.Hc)(getSelection().getRangeAt(0));A0(w);return}if(X.target.tagName==="IMG"&&!X.target.parentElement.classList.contains("vditor-wysiwyg__preview")){if(X.target.getAttribute("data-type")==="link-ref")w5(w,X.target);else Z8(X,w);return}var G=(0,U.lG)(X.target,"A");if(G){if(w.options.link.click)w.options.link.click(G);else if(w.options.link.isOpen)window.open(G.getAttribute("href"));X.preventDefault();return}var Q=(0,y.zh)(w);if(X.target.isEqualNode(Z.element)&&Z.element.lastElementChild&&Q.collapsed){var q=Z.element.lastElementChild.getBoundingClientRect();if(X.y>q.top+q.height)if(Z.element.lastElementChild.tagName==="P"&&Z.element.lastElementChild.textContent.trim().replace(P.g.ZWSP,"")==="")Q.selectNodeContents(Z.element.lastElementChild),Q.collapse(!1);else Z.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(P.g.ZWSP,"<wbr></p>")),(0,y.ib)(Z.element,Q)}i0(w);var V=(0,U.fb)(X.target,"vditor-wysiwyg__preview");if(!V)V=(0,U.fb)((0,y.zh)(w).startContainer,"vditor-wysiwyg__preview");if(V)Q1(V,w);O1(X,w)}),this.element.addEventListener("keyup",function(X){if(X.isComposing||(0,J.yl)(X))return;if(X.key==="Enter")S0(w);if((X.key==="Backspace"||X.key==="Delete")&&w.wysiwyg.element.innerHTML!==""&&w.wysiwyg.element.childNodes.length===1&&w.wysiwyg.element.firstElementChild&&w.wysiwyg.element.firstElementChild.tagName==="P"&&w.wysiwyg.element.firstElementChild.childElementCount===0&&(w.wysiwyg.element.textContent===""||w.wysiwyg.element.textContent===`
`))w.wysiwyg.element.innerHTML="";var $=(0,y.zh)(w);if(X.key==="Backspace"){if((0,J.vU)()&&$.startContainer.textContent===`
`&&$.startOffset===1)$.startContainer.textContent=""}if(M1(w,$),i0(w),X.key!=="ArrowDown"&&X.key!=="ArrowRight"&&X.key!=="Backspace"&&X.key!=="ArrowLeft"&&X.key!=="ArrowUp")return;if(X.key==="ArrowLeft"||X.key==="ArrowRight")w.hint.render(w);var G=(0,U.fb)($.startContainer,"vditor-wysiwyg__preview");if(!G&&$.startContainer.nodeType!==3&&$.startOffset>0){var Q=$.startContainer;if(Q.classList.contains("vditor-wysiwyg__block"))G=Q.lastElementChild}if(!G)return;var q=G.previousElementSibling;if(q.style.display==="none"){if(X.key==="ArrowDown"||X.key==="ArrowRight")Q1(G,w);else Q1(G,w,!1);return}var V=G.previousElementSibling;if(V.tagName==="PRE")V=V.firstElementChild;if(X.key==="ArrowDown"||X.key==="ArrowRight"){var Q=G.parentElement,A=e5(Q);if(A&&A.nodeType!==3){var f=A.querySelector(".vditor-wysiwyg__preview");if(f){Q1(f,w);return}}if(A.nodeType===3){while(A.textContent.length===0&&A.nextSibling)A=A.nextSibling;$.setStart(A,1)}else $.setStart(A.firstChild,0)}else $.selectNodeContents(V),$.collapse(!1)})},z}(),I4=function(){var z=function(w,Z){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var G in $)if(Object.prototype.hasOwnProperty.call($,G))X[G]=$[G]},z(w,Z)};return function(w,Z){if(typeof Z!=="function"&&Z!==null)throw TypeError("Class extends value "+String(Z)+" is not a constructor or null");z(w,Z);function X(){this.constructor=w}w.prototype=Z===null?Object.create(Z):(X.prototype=Z.prototype,new X)}}(),C4=function(z){I4(w,z);function w(Z,X){var $=z.call(this)||this;if($.isDestroyed=!1,$.version=P.H,typeof Z==="string"){if(!X)X={cache:{id:"vditor".concat(Z)}};else if(!X.cache)X.cache={id:"vditor".concat(Z)};else if(!X.cache.id)X.cache.id="vditor".concat(Z);if(!document.getElementById(Z))return $.showErrorTip("Failed to get element by id: ".concat(Z)),$;Z=document.getElementById(Z)}var G=new R4(X),Q=G.merge();if(!Q.i18n)if(!["de_DE","en_US","es_ES","fr_FR","ja_JP","ko_KR","pt_BR","ru_RU","sv_SE","vi_VN","zh_CN","zh_TW"].includes(Q.lang))throw Error("options.lang error, see https://ld246.com/article/1549638745630#options");else{var q="vditorI18nScript",V=q+Q.lang;document.querySelectorAll('head script[id^="'.concat(q,'"]')).forEach(function(A){if(A.id!==V)document.head.removeChild(A)}),(0,M.G)("".concat(Q.cdn,"/dist/js/i18n/").concat(Q.lang,".js"),V).then(function(){$.init(Z,Q)}).catch(function(A){$.showErrorTip("GET ".concat(Q.cdn,"/dist/js/i18n/").concat(Q.lang,".js net::ERR_ABORTED 404 (Not Found)"))})}else window.VditorI18n=Q.i18n,$.init(Z,Q);return $}return w.prototype.showErrorTip=function(Z){var X=new T5;document.body.appendChild(X.element),X.show(Z,0)},w.prototype.updateToolbarConfig=function(Z){this.vditor.toolbar.updateConfig(this.vditor,Z)},w.prototype.setTheme=function(Z,X,$,G){if(this.vditor.options.theme=Z,F0(this.vditor),X)this.vditor.options.preview.theme.current=X,(0,n.Z)(X,G||this.vditor.options.preview.theme.path);if($)this.vditor.options.preview.hljs.style=$,(0,h5.Y)($,this.vditor.options.cdn)},w.prototype.getValue=function(){return I(this.vditor)},w.prototype.getCurrentMode=function(){return this.vditor.currentMode},w.prototype.focus=function(){if(this.vditor.currentMode==="sv")this.vditor.sv.element.focus();else if(this.vditor.currentMode==="wysiwyg")this.vditor.wysiwyg.element.focus();else if(this.vditor.currentMode==="ir")this.vditor.ir.element.focus()},w.prototype.blur=function(){if(this.vditor.currentMode==="sv")this.vditor.sv.element.blur();else if(this.vditor.currentMode==="wysiwyg")this.vditor.wysiwyg.element.blur();else if(this.vditor.currentMode==="ir")this.vditor.ir.element.blur()},w.prototype.disabled=function(){D(this.vditor,["subToolbar","hint","popover"]),j(this.vditor.toolbar.elements,P.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},w.prototype.enable=function(){K(this.vditor.toolbar.elements,P.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},w.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return J1(this.vditor.wysiwyg.element);else if(this.vditor.currentMode==="sv")return J1(this.vditor.sv.element);else if(this.vditor.currentMode==="ir")return J1(this.vditor.ir.element)},w.prototype.renderPreview=function(Z){this.vditor.preview.render(this.vditor,Z)},w.prototype.getCursorPosition=function(){return(0,y.Ny)(this.vditor[this.vditor.currentMode].element)},w.prototype.isUploading=function(){return this.vditor.upload.isUploading},w.prototype.clearCache=function(){if(this.vditor.options.cache.enable&&(0,J.pK)())localStorage.removeItem(this.vditor.options.cache.id)},w.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},w.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},w.prototype.html2md=function(Z){return this.vditor.lute.HTML2Md(Z)},w.prototype.exportJSON=function(Z){return this.vditor.lute.RenderJSON(Z)},w.prototype.getHTML=function(){return I5(this.vditor)},w.prototype.tip=function(Z,X){this.vditor.tip.show(Z,X)},w.prototype.setPreviewMode=function(Z){d1(Z,this.vditor)},w.prototype.deleteValue=function(){if(window.getSelection().isCollapsed)return;document.execCommand("delete",!1)},w.prototype.updateValue=function(Z){document.execCommand("insertHTML",!1,Z)},w.prototype.insertValue=function(Z,X){if(X===void 0)X=!0;var $=(0,y.zh)(this.vditor);$.collapse(!0);var G=document.createElement("template");if(G.innerHTML=Z,$.insertNode(G.content.cloneNode(!0)),$.collapse(!1),this.vditor.currentMode==="sv"){if(this.vditor.sv.preventInput=!0,X)Q0(this.vditor)}else if(this.vditor.currentMode==="wysiwyg"){if(X)B1(this.vditor,getSelection().getRangeAt(0))}else if(this.vditor.currentMode==="ir"){if(this.vditor.ir.preventInput=!0,X)o0(this.vditor,getSelection().getRangeAt(0),!0)}},w.prototype.insertMD=function(Z){if(this.vditor.currentMode==="ir")(0,y.oC)(this.vditor.lute.Md2VditorIRDOM(Z),this.vditor);else if(this.vditor.currentMode==="wysiwyg")(0,y.oC)(this.vditor.lute.Md2VditorDOM(Z),this.vditor);else c1(this.vditor,Z);this.vditor.outline.render(this.vditor),e(this.vditor)},w.prototype.setValue=function(Z,X){var $=this;if(X===void 0)X=!1;if(this.vditor.currentMode==="sv")this.vditor.sv.element.innerHTML="<div data-block='0'>".concat(this.vditor.lute.SpinVditorSVDOM(Z),"</div>"),f0(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1});else if(this.vditor.currentMode==="wysiwyg")Z5(this.vditor,Z,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1});else this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(Z),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(G){B0(G,$.vditor)}),m0(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1});if(this.vditor.outline.render(this.vditor),!Z){if(D(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover)this.vditor.wysiwyg.popover.style.display="none";this.clearCache()}if(X)this.clearStack()},w.prototype.insertEmptyBlock=function(Z){Y1(this.vditor,Z)},w.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},w.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var Z=document.getElementById("vditorIconScript");if(Z)Z.remove();this.clearCache(),t1(),this.vditor.wysiwyg.unbindListener(),this.vditor.options.after=void 0,this.isDestroyed=!0},w.prototype.getCommentIds=function(){if(this.vditor.currentMode!=="wysiwyg")return[];return this.vditor.wysiwyg.getComments(this.vditor,!0)},w.prototype.hlCommentIds=function(Z){if(this.vditor.currentMode!=="wysiwyg")return;var X=function($){$.classList.remove("vditor-comment--hover"),Z.forEach(function(G){if($.getAttribute("data-cmtids").indexOf(G)>-1)$.classList.add("vditor-comment--hover")})};if(this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function($){X($)}),this.vditor.preview.element.style.display!=="none")this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function($){X($)})},w.prototype.unHlCommentIds=function(Z){if(this.vditor.currentMode!=="wysiwyg")return;var X=function($){Z.forEach(function(G){if($.getAttribute("data-cmtids").indexOf(G)>-1)$.classList.remove("vditor-comment--hover")})};if(this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function($){X($)}),this.vditor.preview.element.style.display!=="none")this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function($){X($)})},w.prototype.removeCommentIds=function(Z){var X=this;if(this.vditor.currentMode!=="wysiwyg")return;var $=function(G,Q){var q=G.getAttribute("data-cmtids").split(" ");if(q.find(function(V,A){if(V===Q)return q.splice(A,1),!0}),q.length===0)G.outerHTML=G.innerHTML,(0,y.zh)(X.vditor).collapse(!0);else G.setAttribute("data-cmtids",q.join(" "))};Z.forEach(function(G){if(X.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(Q){$(Q,G)}),X.vditor.preview.element.style.display!=="none")X.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(Q){$(Q,G)})}),A0(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})},w.prototype.init=function(Z,X){var $=this;if(this.isDestroyed)return;if(this.vditor={currentMode:X.mode,element:Z,hint:new B8(X.hint.extend),lute:void 0,options:X,originalInnerHTML:Z.innerHTML,outline:new N8(window.VditorI18n.outline),tip:new T5},this.vditor.sv=new R8(this.vditor),this.vditor.undo=new y4,this.vditor.wysiwyg=new M4(this.vditor),this.vditor.ir=new f8(this.vditor),this.vditor.toolbar=new N4(this.vditor),X.resize.enable)this.vditor.resize=new x8(this.vditor);if(this.vditor.toolbar.elements.devtools)this.vditor.devtools=new Y;if(X.upload.url||X.upload.handler)this.vditor.upload=new q8;(0,M.G)(X._lutePath||"".concat(X.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){if($.vditor.lute=(0,H8.X)({autoSpace:$.vditor.options.preview.markdown.autoSpace,gfmAutoLink:$.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:$.vditor.options.preview.markdown.codeBlockPreview,emojiSite:$.vditor.options.hint.emojiPath,emojis:$.vditor.options.hint.emoji,fixTermTypo:$.vditor.options.preview.markdown.fixTermTypo,footnotes:$.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:$.vditor.options.preview.math.inlineDigit,linkBase:$.vditor.options.preview.markdown.linkBase,linkPrefix:$.vditor.options.preview.markdown.linkPrefix,listStyle:$.vditor.options.preview.markdown.listStyle,mark:$.vditor.options.preview.markdown.mark,mathBlockPreview:$.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:$.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:$.vditor.options.preview.markdown.sanitize,toc:$.vditor.options.preview.markdown.toc}),$.vditor.preview=new y8($.vditor),T0($.vditor),X.after)X.after();if(X.icon)(0,M.J)("".concat(X.cdn,"/dist/js/icons/").concat(X.icon,".js"),"vditorIconScript")})},w}(v.default);let T4=C4})(),b0=b0.default,b0})()})});import{addLocalesMessages as c4}from"@blockcode/core";var E5={"writer.name":"Markdown Writer","writer.tabs.editor":"Writer"};var s5={"writer.name":"Markdown 编辑器","writer.tabs.editor":"写作"};var a5={"writer.name":"Markdown 編輯器","writer.tabs.editor":"撰寫"};c4({en:E5,"zh-Hans":s5,"zh-Hant":a5});import{svgAsDataUri as S6}from"@blockcode/utils";import{Text as v4}from"@blockcode/core";var d5=u4(l5(),1);import{useRef as p4,useEffect as E4}from"preact/hooks";import{useProjectContext as s4,hideSplash as a4}from"@blockcode/core";function K1(U0){let O0=globalThis.document,i=O0.createElement("style");i.appendChild(O0.createTextNode(U0)),O0.head.append(i)}K1(".H-I5jq_markdown-wrapper{flex:1;border:0!important}.H-I5jq_markdown-wrapper .vditor-toolbar--hide{display:none}");var m5={markdownWrapper:"H-I5jq_markdown-wrapper"};K1(`/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
.vditor{--border-color:#d1d5da;--second-color:#5860695c;--panel-background-color:#fff;--panel-shadow:0 1px 2px #0003;--toolbar-background-color:#f6f8fa;--toolbar-icon-color:#586069;--toolbar-icon-hover-color:#4285f4;--toolbar-height:35px;--toolbar-divider-margin-top:8px;--textarea-background-color:#fafbfc;--textarea-text-color:#24292e;--resize-icon-color:var(--toolbar-icon-color);--resize-background-color:var(--toolbar-background-color);--resize-hover-icon-color:var(--panel-background-color);--resize-hover-background-color:var(--toolbar-icon-hover-color);--count-background-color:#1b1f230d;--heading-border-color:#eaecef;--blockquote-color:#6a737d;--ir-heading-color:#660e7a;--ir-title-color:gray;--ir-bi-color:#0033b3;--ir-link-color:green;--ir-bracket-color:#00f;--ir-paren-color:green}.vditor--dark{--border-color:#141414;--second-color:#b9b9b95c;--panel-background-color:#24292e;--panel-shadow:0 1px 2px #fff3;--toolbar-background-color:#1d2125;--toolbar-icon-color:#b9b9b9;--toolbar-icon-hover-color:#fff;--textarea-background-color:#2f363d;--textarea-text-color:#d1d5da;--resize-icon-color:var(--border-color);--resize-background-color:var(--second-color);--resize-hover-icon-color:var(--toolbar-icon-hover-color);--resize-hover-background-color:#b9b9b9db;--count-background-color:#4285f45c;--heading-border-color:var(--textarea-text-color);--blockquote-color:var(--toolbar-icon-color);--ir-heading-color:#9876aa;--ir-title-color:gray;--ir-bi-color:#cc7832;--ir-link-color:#ffc66d;--ir-bracket-color:#287bde;--ir-paren-color:#6a8759}@keyframes tooltip-appear{0%{opacity:0}to{opacity:1}}.vditor-tooltipped{cursor:pointer;position:relative}.vditor-tooltipped:after{z-index:1000000;-webkit-font-smoothing:subpixel-antialiased;color:#fff;text-align:center;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(aria-label);opacity:0;background:#3b3e43;border-radius:3px;padding:5px 8px;font-size:11px;font-weight:400;line-height:16px;text-decoration:none;display:none;position:absolute}.vditor-tooltipped:before{z-index:1000001;color:#3b3e43;pointer-events:none;content:"";opacity:0;border:5px solid #0000;width:0;height:0;display:none;position:absolute}.vditor-tooltipped--hover:before,.vditor-tooltipped--hover:after,.vditor-tooltipped:hover:before,.vditor-tooltipped:hover:after,.vditor-tooltipped:active:before,.vditor-tooltipped:active:after,.vditor-tooltipped:focus:before,.vditor-tooltipped:focus:after{text-decoration:none;animation-name:tooltip-appear;animation-duration:.15s;animation-timing-function:ease-in;animation-fill-mode:forwards;display:inline-block}.vditor-tooltipped__s:after,.vditor-tooltipped__se:after,.vditor-tooltipped__sw:after{margin-top:5px;top:100%;right:50%}.vditor-tooltipped__s:before,.vditor-tooltipped__se:before,.vditor-tooltipped__sw:before{border-bottom-color:#3b3e43;margin-right:-5px;top:auto;bottom:-5px;right:50%}.vditor-tooltipped__se:after{margin-left:-15px;left:50%;right:auto}.vditor-tooltipped__sw:after{margin-right:-15px}.vditor-tooltipped__n:after,.vditor-tooltipped__ne:after,.vditor-tooltipped__nw:after{margin-bottom:5px;bottom:100%;right:50%}.vditor-tooltipped__n:before,.vditor-tooltipped__ne:before,.vditor-tooltipped__nw:before{border-top-color:#3b3e43;margin-right:-5px;top:-5px;bottom:auto;right:50%}.vditor-tooltipped__ne:after{margin-left:-15px;left:50%;right:auto}.vditor-tooltipped__nw:after{margin-right:-15px}.vditor-tooltipped__s:after,.vditor-tooltipped__n:after{transform:translate(50%)}.vditor-tooltipped__w:after{margin-right:5px;bottom:50%;right:100%;transform:translateY(50%)}.vditor-tooltipped__w:before{border-left-color:#3b3e43;margin-top:-5px;top:50%;bottom:50%;left:-5px}.vditor-tooltipped__e:after{margin-left:5px;bottom:50%;left:100%;transform:translateY(50%)}.vditor-tooltipped__e:before{border-right-color:#3b3e43;margin-top:-5px;top:50%;bottom:50%;right:-5px}@media screen and (width<=520px){.vditor-tooltipped:before,.vditor-tooltipped:after{content:none}}@keyframes scale-in{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.vditor-panel{background-color:var(--panel-background-color);box-shadow:var(--panel-shadow);z-index:3;-webkit-user-select:none;-moz-user-select:none;user-select:none;min-width:80px;max-width:320px;color:var(--toolbar-icon-color);border-radius:3px;padding:5px;font-size:14px;animation-name:scale-in;animation-duration:.15s;animation-timing-function:cubic-bezier(.2,0,.13,1.5);display:none;position:absolute}.vditor-panel--none{white-space:nowrap;opacity:.86;min-width:auto;max-width:none;padding:0;animation:none}.vditor-panel--arrow:before{pointer-events:none;content:" ";border:7px solid #0000;border-bottom-color:var(--panel-background-color);width:0;height:0;position:absolute;top:-14px;left:5px}.vditor-panel--left{right:0}.vditor-panel--left.vditor-panel--arrow:before{left:auto;right:5px}.vditor-input{background-color:var(--panel-background-color);color:var(--textarea-text-color);border:0;padding:3px 5px;font-size:12px}.vditor-input:focus{background-color:var(--toolbar-background-color);outline:none}.vditor-icon{color:var(--toolbar-icon-color);cursor:pointer;float:left;box-sizing:border-box;background-color:#0000;border:0;width:23px;height:21px;padding:4px 5px}.vditor-icon:hover,.vditor-icon--current{color:var(--toolbar-icon-hover-color);background-color:#0000}.vditor-icon:focus{outline:none}.vditor-icon svg{float:left;fill:currentColor;pointer-events:none;width:13px!important;height:13px!important}.vditor-toolbar{background-color:var(--toolbar-background-color);border-bottom:1px solid var(--border-color);padding:0 5px;line-height:1}.vditor-toolbar--pin{z-index:1;position:sticky;top:0}.vditor-toolbar--hide{height:5px;transition:all .15s ease-in-out;overflow:hidden}.vditor-toolbar--hide:hover{background-color:var(--toolbar-background-color);height:auto;overflow:visible}.vditor-toolbar__item{float:left;position:relative}.vditor-toolbar__item .vditor-tooltipped{color:var(--toolbar-icon-color);height:var(--toolbar-height);box-sizing:border-box;background-color:#0000;border:0;width:25px;padding:10px 5px;font-size:0}.vditor-toolbar__item .vditor-tooltipped:focus{cursor:pointer;color:var(--toolbar-icon-hover-color);outline:none}.vditor-toolbar__item svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:15px;height:15px;display:inline-block}.vditor-toolbar__item input{width:25px;height:var(--toolbar-height);cursor:pointer;opacity:.001;position:absolute;top:0;left:0;overflow:hidden}.vditor-toolbar__divider{float:left;height:calc(var(--toolbar-height) - (var(--toolbar-divider-margin-top)*2));border-left:1px solid var(--second-color);margin:var(--toolbar-divider-margin-top)8px}.vditor-toolbar__br{width:100%;height:0!important;padding:0!important}.vditor-menu--current{color:var(--toolbar-icon-hover-color)!important}.vditor-menu--disabled{color:var(--second-color)!important;cursor:not-allowed!important}.vditor-emojis{display:inline-block;overflow:auto}.vditor-emojis::-webkit-scrollbar{display:none}.vditor-emojis__tip{width:200px;min-width:1px;color:var(--toolbar-icon-color);white-space:nowrap;text-overflow:ellipsis;flex:1;margin-right:10px;overflow:hidden}.vditor-emojis__tail{color:var(--toolbar-icon-color);margin-top:5px;font-size:12px;display:flex}.vditor-emojis__tail a{color:var(--toolbar-icon-color);text-decoration:none}.vditor-emojis__tail a:hover{color:var(--toolbar-icon-hover-color)}.vditor-emojis button{cursor:pointer;float:left;text-align:center;box-sizing:border-box;background-color:#0000;border:0;border-radius:3px;width:30px;height:30px;margin:0;padding:3px;font-size:16px;line-height:26px;transition:all .15s ease-in-out;overflow:hidden}.vditor-emojis button:focus{outline:none}.vditor-emojis button:hover .vditor-emojis__icon{display:inline-block;transform:scale(1.2)}.vditor-emojis img{float:left;width:20px;height:20px;margin:3px 0 0 3px}@media screen and (width<=520px){.vditor-toolbar__item{padding:0 12px}.vditor-panel--left.vditor-panel--arrow:before{right:17px}}@media (hover:hover) and (pointer:fine){.vditor-toolbar__item .vditor-tooltipped:hover{color:var(--toolbar-icon-hover-color)}}@keyframes slideInDown{0%{visibility:visible;transform:translateY(-100%)}to{transform:translate(0,0)}}.vditor{border:1px solid var(--border-color);box-sizing:border-box;border-radius:3px;flex-direction:column;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;display:flex}.vditor--fullscreen{z-index:90;border-radius:0;position:fixed;top:0;left:0;width:100%!important;height:100vh!important}.vditor-content{flex:1;min-width:1px;min-height:60px;display:flex;position:relative}.vditor-preview{border-left:1px solid var(--border-color);box-sizing:border-box;background-color:var(--textarea-background-color);border-radius:0 0 3px;flex:1;min-width:1px;margin-left:-1px;overflow:auto}.vditor-preview::-webkit-scrollbar{display:none}.vditor-preview__action{text-align:center;background-color:var(--toolbar-background-color);padding:10px}.vditor-preview__action button{background-color:var(--toolbar-background-color);color:var(--toolbar-icon-color);cursor:pointer;border:0;margin:0 10px;padding:0 7px;font-size:12px;line-height:20px}.vditor-preview__action button.vditor-preview__action--current,.vditor-preview__action button:hover{color:var(--toolbar-icon-hover-color);background-color:var(--toolbar-background-color)}.vditor-preview__action button:focus{outline:none}.vditor-preview__action button svg{fill:currentColor;vertical-align:middle;width:15px;height:15px}.vditor-preview>.vditor-reset{margin:0 auto;padding:10px}.vditor-preview img:not(.emoji){cursor:pointer}.vditor-devtools{background-color:var(--textarea-background-color);min-width:1px;box-shadow:inset 1px 0 var(--border-color);box-sizing:border-box;border-radius:0 0 3px;flex:1;padding:10px;display:none;overflow:auto}.vditor-counter{color:var(--toolbar-icon-color);background-color:var(--count-background-color);-webkit-user-select:none;-moz-user-select:none;user-select:none;float:right;border-radius:3px;margin:8px 3px 0 0;padding:3px;font-size:12px}.vditor-counter--error{color:#d23f31;background-color:#d23f311a}.vditor-resize{cursor:row-resize;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;padding:3px 0;position:absolute}.vditor-resize--top{top:-3px}.vditor-resize--bottom{bottom:-3px}.vditor-resize>div{background-color:var(--resize-background-color);height:3px;transition:all .15s ease-in-out}.vditor-resize:hover>div,.vditor-resize--selected>div{background-color:var(--resize-hover-background-color)}.vditor-resize:hover svg,.vditor-resize--selected svg{color:var(--resize-hover-icon-color)}.vditor-resize svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:13px;height:3px;color:var(--resize-icon-color);margin:0 auto;display:block}.vditor-upload{background-color:#4285f4;height:3px;transition:all .15s ease-in-out;position:absolute;top:-2px;left:0}.vditor-tip{z-index:5;font-size:12px;animation-duration:.15s;animation-fill-mode:both;position:absolute;top:10px;left:50%}.vditor-tip--show{animation-name:slideInDown;display:block}.vditor-tip__content{text-align:left;background:var(--toolbar-background-color);color:var(--toolbar-icon-color);max-width:100%;box-shadow:var(--panel-shadow);border-radius:3px;margin-left:-50%;padding:3px 10px;line-height:16px;display:inline-block;position:relative}.vditor-tip__content ul{margin:2px 0;padding:0 0 0 18px}.vditor-tip__content a{color:#4285f4}.vditor-tip__close{color:var(--toolbar-icon-color);cursor:pointer;font-weight:700;position:absolute;top:-7px;right:-15px}.vditor-tip__close:hover{color:var(--toolbar-icon-hover-color)}.vditor-img{z-index:100;flex-direction:column;display:flex;position:fixed;inset:0}.vditor-img__bar{border-bottom:1px solid var(--border-color);background-color:var(--toolbar-background-color);text-align:center;box-sizing:border-box;justify-content:center;align-items:center;height:36px;display:flex}.vditor-img__btn{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:var(--toolbar-icon-color);align-items:center;margin-left:24px;display:flex}.vditor-img__btn:hover{color:var(--toolbar-icon-hover-color)}.vditor-img__btn svg{fill:currentColor;width:14px;height:14px;margin-right:8px}.vditor-img__img{background-color:var(--textarea-background-color);cursor:zoom-out;flex:1;overflow:auto}.vditor-img__img img{max-width:none}.vditor-hint{background-color:var(--panel-background-color);box-shadow:var(--panel-shadow);z-index:4;border-radius:3px;min-width:80px;max-width:250px;margin:0;padding:5px 0;font-size:12px;line-height:20px;list-style:none;display:none;position:absolute}.vditor-hint .vditor-hint{margin-top:-31px;left:100%;right:auto}.vditor-hint .vditor-hint.vditor-panel--left{left:auto;right:100%}.vditor-hint button{color:var(--toolbar-icon-color);box-sizing:border-box;text-align:left;cursor:pointer;white-space:nowrap;text-overflow:ellipsis;background-color:#0000;border:0;border-radius:0;width:100%;margin:0;padding:3px 10px;line-height:20px;display:block;overflow:hidden}.vditor-hint button:focus{outline:none}.vditor-hint--current,.vditor-hint button:not(.vditor-menu--disabled):hover{background-color:var(--toolbar-background-color)!important;color:var(--toolbar-icon-hover-color)!important}.vditor-hint__emoji{float:left;margin-right:3px;font-size:16px}.vditor-hint img{float:left;width:20px;height:20px;margin-right:3px}.vditor-reset{color:#24292e;font-variant-ligatures:no-common-ligatures;word-wrap:break-word;word-break:break-word;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:16px;line-height:1.5;overflow:auto}.vditor-reset--anchor{padding-left:20px}.vditor-reset--error{color:#d23f31;font-size:12px;line-height:16px;display:block}.vditor-reset ul ul ul{list-style-type:square}.vditor-reset ul ul{list-style-type:circle}.vditor-reset ul{list-style-type:disc}.vditor-reset ul,.vditor-reset ol{margin-top:0;margin-bottom:16px;padding-left:2em}.vditor-reset li+li{margin-top:.25em}.vditor-reset li p{margin-top:16px}.vditor-reset audio{max-width:100%}.vditor-reset audio:focus{outline:none}.vditor-reset video{max-width:100%;max-height:90vh}.vditor-reset img{max-width:100%}.vditor-reset img.emoji{cursor:auto;vertical-align:sub;max-width:20px}.vditor-reset h1,.vditor-reset h2,.vditor-reset h3,.vditor-reset h4,.vditor-reset h5,.vditor-reset h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.vditor-reset h1:hover .vditor-anchor svg,.vditor-reset h2:hover .vditor-anchor svg,.vditor-reset h3:hover .vditor-anchor svg,.vditor-reset h4:hover .vditor-anchor svg,.vditor-reset h5:hover .vditor-anchor svg,.vditor-reset h6:hover .vditor-anchor svg{visibility:visible}.vditor-reset h1{font-size:1.75em}.vditor-reset h2{font-size:1.55em}.vditor-reset h3{font-size:1.38em}.vditor-reset h4{font-size:1.25em}.vditor-reset h5{font-size:1.13em}.vditor-reset h6{font-size:1em}.vditor-reset hr{background-color:#eaecef;border:0;height:2px;margin:24px 0;padding:0}.vditor-reset p{margin-top:0;margin-bottom:16px}.vditor-reset blockquote{color:#6a737d;border-left:.25em solid #eaecef;margin:0 0 16px;padding:0 1em}.vditor-reset blockquote>:first-child{margin-top:0}.vditor-reset blockquote>:last-child{margin-bottom:0}.vditor-reset ins>iframe{border:0}.vditor-reset iframe{box-sizing:border-box;border:1px solid #d1d5da;max-width:100%}.vditor-reset iframe.iframe__video{min-width:80%;min-height:36vh}.vditor-reset table{border-collapse:collapse;empty-cells:show;border-spacing:0;word-break:keep-all;width:100%;margin-bottom:16px;display:block;overflow:auto}.vditor-reset table tr{background-color:#fafbfc;border-top:1px solid #c6cbd1}.vditor-reset table td,.vditor-reset table th{word-break:normal;white-space:nowrap;border:1px solid #dfe2e5;padding:6px 13px}.vditor-reset table td:first-child:after,.vditor-reset table th:first-child:after{content:"";vertical-align:top;min-height:24px;display:inline-block}.vditor-reset table th{font-weight:600}.vditor-reset table tbody tr:nth-child(2n){background-color:#fff}.vditor-reset code:not(.hljs):not(.highlight-chroma){word-break:break-word;white-space:pre-wrap;background-size:20px 20px;border-radius:3px;margin:0;padding:.2em .4em;font-family:mononoki,Consolas,Liberation Mono,Menlo,Courier,monospace,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:85%}.vditor-reset pre{margin:1em 0}.vditor-reset pre>code{white-space:pre;word-break:initial;word-wrap:normal;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AgMAAABHkjHhAAAACVBMVEWAgIBaWlo+Pj7rTFvWAAAAA3RSTlMHCAw+VhR4AAAA+klEQVQoz4WSMW7EQAhFPxKWNh2FCx+HkaZI6RRb5DYbyVfIJXLKDCFoMbaTKSw/8ZnPAPjaH2xgZcUNUDADD7D9LtDBCLZ45fbkvo/30K8yeI64pPwl6znd/3n/Oe93P3ho9qeh72btTFzqkz0rsJle8Zr81OLEwZ1dv/713uWqvu2pl+k0fy7MWtj9r/tN5q/02z89qa/L4Dc2LvM93kezPfXlME/O86EbY/V9GB9ePX8G1/6W+/9h1dq/HGfTfzT3j/xNo7522Bfnqe5jO/fvhVthlfk434v3iO9zG/UOphyPeinPl1J8Gtaa7xPTa/Dk+RIs4deMvwGvcGsmsCvJ0AAAAABJRU5ErkJggg==);background-size:20px 20px;border-radius:5px;margin:0;padding:.5em;font-family:mononoki,Consolas,Liberation Mono,Menlo,Courier,monospace,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:85%;display:block;overflow:auto}.vditor-reset pre:hover div.vditor-copy{display:block}.vditor-reset .language-math,.vditor-reset .language-echarts,.vditor-reset .language-mindmap,.vditor-reset .language-plantuml,.vditor-reset .language-mermaid,.vditor-reset .language-smiles,.vditor-reset .language-markmap,.vditor-reset .language-abc,.vditor-reset .language-flowchart,.vditor-reset .language-graphviz{margin-bottom:16px}.vditor-reset .language-math mjx-container:focus{cursor:context-menu;outline:none}.vditor-reset .language-math .katex-display>.katex>.katex-html>.tag{font-size:1.21rem;display:inline-block;right:2px}.vditor-reset .language-echarts,.vditor-reset .language-mindmap{height:420px;overflow:hidden}.vditor-reset .language-mermaid,.vditor-reset .language-markmap,.vditor-reset .language-flowchart,.vditor-reset .language-graphviz{text-align:center}.vditor-reset .language-graphviz parsererror{overflow:auto}.vditor-reset kbd{color:#24292e;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;padding:3px 5px;font:11px/10px Consolas,Liberation Mono,Menlo,Courier,monospace;display:inline-block;box-shadow:inset 0 -1px #d1d5da}.vditor-reset summary{cursor:pointer}.vditor-reset summary:focus{outline:none}.vditor-reset svg{width:auto;height:auto;stroke-width:initial}.vditor-reset p:last-child,.vditor-reset blockquote:last-child,.vditor-reset pre:last-child,.vditor-reset ul:last-child,.vditor-reset ol:last-child,.vditor-reset hr:last-child{margin-bottom:0}.vditor-comment{border-bottom:2px solid #f8e6ab}.vditor-comment--focus,.vditor-comment--hover{background-color:#faf1d1;border-bottom:2px solid #ffc60a}.vditor-comment--focus .vditor-comment,.vditor-comment--hover .vditor-comment{border-bottom:2px solid #ffc60a}.vditor-task{word-break:break-all;list-style:none!important}.vditor-task input{vertical-align:middle;margin:0 .2em .25em -1.6em;font-size:12px}.vditor-copy{z-index:1;display:none;position:relative}.vditor-copy textarea{height:10px;position:absolute;left:-100000px}.vditor-copy span{cursor:pointer;position:absolute;top:.5em;right:15px}.vditor-copy svg{color:#586069;fill:currentColor;height:14px;display:block;width:14px!important}.vditor-linenumber{position:relative;padding-left:4em!important}.vditor-linenumber__rows{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;counter-reset:linenumber;width:3em;position:absolute;top:1em;left:0}.vditor-linenumber__rows>span{pointer-events:none;display:block}.vditor-linenumber__rows>span:before{counter-increment:linenumber;content:counter(linenumber);color:#9e969661;text-align:right;padding-right:1em;display:block}.vditor-speech{cursor:pointer;color:#586069;background-color:#f6f8fa;border:1px solid #d1d5da;border-radius:3px;padding:3px;display:none;position:absolute}.vditor-speech:hover,.vditor-speech--current{color:#4285f4}.vditor-speech svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:14px;height:14px;display:block}.vditor-anchor{margin-left:5px}.vditor-anchor--left{float:left;margin-left:-20px;padding-right:4px}.vditor-anchor svg{visibility:hidden}.vditor-anchor:hover svg{visibility:visible}.vditor-anchor:focus{outline:none}.vditor-linkcard{cursor:pointer;max-width:768px;margin:31px auto 16px;padding:0 10px;transition:all .15s ease-in-out}.vditor-linkcard a{background-color:#f6f8fa;border-radius:3px;flex-wrap:wrap-reverse;max-height:250px;text-decoration:none;display:flex;overflow:hidden;box-shadow:0 1px 2px #0003}.vditor-linkcard a:hover{text-decoration:none;box-shadow:0 0 3px #00000021,0 3px 6px #00000042}.vditor-linkcard a:visited .vditor-linkcard__abstract{color:#5860695c}.vditor-linkcard__info{box-sizing:border-box;flex:1;min-width:200px;padding:10px}.vditor-linkcard__title{color:#24292e;align-items:center;font-size:14px;font-weight:400;display:flex}.vditor-linkcard__title img{cursor:pointer;border-radius:3px;flex-shrink:0;width:20px;height:20px;margin-right:5px}.vditor-linkcard__abstract{word-wrap:break-word;word-break:break-all;-webkit-line-clamp:2;text-overflow:ellipsis;color:#586069;-webkit-box-orient:vertical;margin:5px 0;font-size:13px;display:-webkit-box;overflow:hidden}.vditor-linkcard__site{color:#4285f4;font-size:12px}.vditor-linkcard__image{cursor:pointer;background-color:#5860695c;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:126px;max-width:250px}.vditor-footnotes__goto-ref{text-decoration:none}.vditor-toc{-webkit-user-select:text;-moz-user-select:text;user-select:text;color:#4285f4;margin-bottom:16px}.vditor-toc .vditor-outline__action{display:none}.vditor-toc ul{padding-left:1em;list-style:none!important}.vditor-toc>ul{padding-left:0}.vditor-toc span{cursor:pointer}.vditor-toc li>span>svg{width:0;height:0}.vditor-outline{border-right:1px solid var(--border-color);background-color:var(--panel-background-color);width:250px;display:none;overflow:auto}.vditor-outline--right{border-right:0;border-left:1px solid var(--border-color)}.vditor-outline::-webkit-scrollbar{display:none}.vditor-outline ul{margin:0;padding-left:1em;list-style:none!important}.vditor-outline__content>ul{padding-left:0}.vditor-outline li>span{cursor:pointer;color:var(--textarea-text-color);align-items:center;padding:5px 10px;display:flex}.vditor-outline li>span>svg{flex-shrink:0;width:10px;height:10px}.vditor-outline li>span:hover{color:var(--toolbar-icon-hover-color)}.vditor-outline li>span>span{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.vditor-outline__title{border-bottom:1px dashed var(--border-color);color:var(--toolbar-icon-color);padding:5px 10px;font-size:12px}.vditor-outline__action{fill:currentColor;flex-shrink:0;margin-right:5px;transition:all .15s ease-in-out}.vditor-outline__action--close{transform:rotate(-90deg)}.vditor-wysiwyg{box-sizing:border-box;flex:1;width:100%;min-width:1px;position:relative}.vditor-wysiwyg pre.vditor-reset{background-color:var(--panel-background-color);white-space:pre-wrap;box-sizing:border-box;height:100%;margin:0}.vditor-wysiwyg pre.vditor-reset[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-wysiwyg pre.vditor-reset:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-wysiwyg pre.vditor-reset:focus{background-color:var(--textarea-background-color);outline:none}.vditor-wysiwyg pre.vditor-reset:after{content:"";height:var(--editor-bottom);display:block}.vditor-wysiwyg blockquote:empty:before,.vditor-wysiwyg pre>code:empty:before,.vditor-wysiwyg p:empty:before,.vditor-wysiwyg h1:empty:after,.vditor-wysiwyg h2:empty:after,.vditor-wysiwyg h3:empty:after,.vditor-wysiwyg h4:empty:after,.vditor-wysiwyg h5:empty:after,.vditor-wysiwyg h6:empty:after{content:" "}.vditor-wysiwyg code[data-marker=\\\`]{padding-left:0!important;padding-right:0!important}.vditor-wysiwyg__block pre:first-child{margin-bottom:-1em}.vditor-wysiwyg__block pre:first-child code{color:var(--textarea-text-color);text-align:left;height:auto}.vditor-wysiwyg__block pre:last-child{margin-bottom:1em}.vditor-wysiwyg__preview{cursor:pointer;white-space:initial;min-height:27px}.vditor-wysiwyg>.vditor-reset>h1:before,.vditor-wysiwyg>.vditor-reset>h2:before,.vditor-wysiwyg>.vditor-reset>h3:before,.vditor-wysiwyg>.vditor-reset>h4:before,.vditor-wysiwyg>.vditor-reset>h5:before,.vditor-wysiwyg>.vditor-reset>h6:before,.vditor-wysiwyg div.vditor-wysiwyg__block:before,.vditor-wysiwyg div[data-type=link-ref-defs-block]:before,.vditor-wysiwyg div[data-type=footnotes-block]:before,.vditor-wysiwyg .vditor-toc:before{float:left;content:"H1";color:var(--second-color);margin-left:-29px;padding-right:4px;font-size:.85rem;font-weight:400}.vditor-wysiwyg>.vditor-reset>h2:before{content:"H2"}.vditor-wysiwyg>.vditor-reset>h3:before{content:"H3"}.vditor-wysiwyg>.vditor-reset>h4:before{content:"H4"}.vditor-wysiwyg>.vditor-reset>h5:before{content:"H5"}.vditor-wysiwyg>.vditor-reset>h6:before{content:"H6"}.vditor-wysiwyg div[data-type=link-ref-defs-block]:before{content:"\\"A\\""}.vditor-wysiwyg div[data-type=footnotes-block]:before{content:"^F"}.vditor-wysiwyg div.vditor-wysiwyg__block:before{content:"</>"}.vditor-wysiwyg div.vditor-wysiwyg__block[data-type=yaml-front-matter]:before{content:"F"}.vditor-wysiwyg div.vditor-wysiwyg__block[data-type=math-block]:before{content:"$$"}.vditor-wysiwyg .vditor-toc:before{content:"ToC"}.vditor-wysiwyg hr{width:100%;margin:12px 0;display:inline-block}.vditor-wysiwyg details{white-space:initial}.vditor-wysiwyg a{cursor:pointer}.vditor-wysiwyg span[data-type=backslash]>span{color:var(--second-color);display:none}.vditor-wysiwyg span[data-type=link-ref],.vditor-wysiwyg sup[data-type=footnotes-ref]{color:#4285f4}.vditor-wysiwyg span[data-type=toc-h]{color:#4285f4;text-decoration:underline}.vditor-wysiwyg div[data-type=footnotes-block]{border-top:2px solid var(--heading-border-color);margin-top:24px;padding-top:24px}.vditor-wysiwyg div[data-type=link-ref-defs-block]{color:var(--blockquote-color)}@media screen and (width<=520px){.vditor-wysiwyg h1:before,.vditor-wysiwyg h2:before,.vditor-wysiwyg h3:before,.vditor-wysiwyg h4:before,.vditor-wysiwyg h5:before,.vditor-wysiwyg h6:before,.vditor-wysiwyg div.vditor-wysiwyg__block:before,.vditor-wysiwyg div[data-type=link-ref-defs-block]:before,.vditor-wysiwyg div[data-type=footnotes-block]:before,.vditor-wysiwyg .vditor-toc:before{content:none}}.vditor-ir{box-sizing:border-box;flex:1;width:100%;min-width:1px;position:relative}.vditor-ir__node[data-type=code-block]:before,.vditor-ir__node[data-type=code-block]:after,.vditor-ir__node[data-type=yaml-front-matter]:before,.vditor-ir__node[data-type=yaml-front-matter]:after,.vditor-ir__node[data-type=math-block]:before,.vditor-ir__node[data-type=math-block]:after{content:" ";color:var(--second-color)}.vditor-ir__node:not(.vditor-ir__node--expand) .vditor-ir__marker{padding:0!important}.vditor-ir__node:not(.vditor-ir__node--expand)[data-type=a]{cursor:pointer}.vditor-ir__node[data-type=link-ref],.vditor-ir__node[data-type=footnotes-ref]{color:#4285f4}.vditor-ir__node[data-type=html-block]{margin-bottom:1em}.vditor-ir__node .vditor-ir__marker{width:0;height:0;transition:all .15s ease-in-out;display:inline-block;overflow:hidden}.vditor-ir__node--hidden .vditor-ir__marker{visibility:hidden}.vditor-ir__node--expand .vditor-ir__marker{color:var(--second-color);width:auto;height:auto;display:inline}.vditor-ir__node--expand .vditor-ir__marker--hide{display:none}.vditor-ir__node--expand .vditor-ir__marker--heading{color:var(--ir-heading-color)}.vditor-ir__node--expand .vditor-ir__marker--bi{color:var(--ir-bi-color)}.vditor-ir__node--expand .vditor-ir__marker--link{color:var(--ir-link-color)}.vditor-ir__node--expand .vditor-ir__marker--title{color:var(--ir-title-color)}.vditor-ir__node--expand .vditor-ir__marker--bracket{color:var(--ir-bracket-color);text-decoration:underline}.vditor-ir__node--expand .vditor-ir__marker--paren{color:var(--ir-paren-color)}.vditor-ir__node--expand .vditor-ir__marker--info{color:var(--ir-heading-color)}.vditor-ir__node--expand .vditor-ir__marker--pre code{color:var(--textarea-text-color);text-align:left;height:auto}.vditor-ir__node--expand[data-type=code-block]:before,.vditor-ir__node--expand[data-type=code-block]:after{content:"\`\`\`"}.vditor-ir__node--expand[data-type=yaml-front-matter]:before,.vditor-ir__node--expand[data-type=yaml-front-matter]:after{content:"---"}.vditor-ir__node--expand[data-type=math-block]:before,.vditor-ir__node--expand[data-type=math-block]:after{content:"$$"}.vditor-ir__node span[data-type=code-block-open-marker],.vditor-ir__node span[data-type=code-block-close-marker],.vditor-ir__node span[data-type=yaml-front-matter-open-marker],.vditor-ir__node span[data-type=yaml-front-matter-close-marker],.vditor-ir__node span[data-type=math-block-open-marker],.vditor-ir__node span[data-type=math-block-close-marker]{display:none}.vditor-ir__preview{cursor:pointer;white-space:initial;min-height:27px}.vditor-ir__link{color:var(--ir-bracket-color);text-decoration:underline}.vditor-ir pre.vditor-reset{background-color:var(--panel-background-color);white-space:pre-wrap;box-sizing:border-box;height:100%;margin:0}.vditor-ir pre.vditor-reset[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-ir pre.vditor-reset:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-ir pre.vditor-reset:focus{background-color:var(--textarea-background-color);outline:none}.vditor-ir pre.vditor-reset:after{content:"";height:var(--editor-bottom);display:block}.vditor-ir pre.vditor-reset pre{margin:0}.vditor-ir hr{width:100%;margin:12px 0;display:inline-block}.vditor-ir blockquote:empty:before,.vditor-ir pre>code:empty:before,.vditor-ir p:empty:before,.vditor-ir h1:empty:after,.vditor-ir h2:empty:after,.vditor-ir h3:empty:after,.vditor-ir h4:empty:after,.vditor-ir h5:empty:after,.vditor-ir h6:empty:after{content:" "}.vditor-ir .vditor-reset>h1:before,.vditor-ir .vditor-reset>h2:before,.vditor-ir .vditor-reset>h3:before,.vditor-ir .vditor-reset>h4:before,.vditor-ir .vditor-reset>h5:before,.vditor-ir .vditor-reset>h6:before,.vditor-ir div[data-type=link-ref-defs-block]:before,.vditor-ir div[data-type=footnotes-block]:before,.vditor-ir .vditor-toc:before{float:left;content:"H1";color:var(--second-color);margin-left:-29px;padding-right:4px;font-size:.85rem;font-weight:400}.vditor-ir .vditor-reset>h2:before{content:"H2"}.vditor-ir .vditor-reset>h3:before{content:"H3"}.vditor-ir .vditor-reset>h4:before{content:"H4"}.vditor-ir .vditor-reset>h5:before{content:"H5"}.vditor-ir .vditor-reset>h6:before{content:"H6"}.vditor-ir div[data-type=link-ref-defs-block]{color:var(--blockquote-color)}.vditor-ir div[data-type=link-ref-defs-block]:before{content:"\\"A\\""}.vditor-ir div[data-type=footnotes-block]{border-top:2px solid var(--heading-border-color);margin-top:24px;padding-top:24px}.vditor-ir div[data-type=footnotes-block]:before{content:"^F"}.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>ul,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>ol,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>p,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>blockquote,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>pre,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>table,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>hr{margin-left:8px}.vditor-ir .vditor-toc:before{content:"ToC"}.vditor-ir .vditor-toc span[data-type=toc-h]{color:#4285f4;text-decoration:underline}@media screen and (width<=520px){.vditor-ir h1:before,.vditor-ir h2:before,.vditor-ir h3:before,.vditor-ir h4:before,.vditor-ir h5:before,.vditor-ir h6:before,.vditor-ir div[data-type=link-ref-defs-block]:before,.vditor-ir div[data-type=footnotes-block]:before,.vditor-ir .vditor-toc:before{content:none}}.vditor-sv{resize:none;box-sizing:border-box;background-color:var(--panel-background-color);width:100%;min-width:1px;color:var(--textarea-text-color);font-variant-ligatures:no-common-ligatures;white-space:pre-wrap;word-break:break-word;word-wrap:break-word;border:0;border-radius:0 0 3px 3px;outline:0;flex:1;margin:0 1px 0 0;padding:10px 9px 10px 10px;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:16px;line-height:22px;overflow:auto}.vditor-sv[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-sv:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-sv:focus{background-color:var(--textarea-background-color)}.vditor-sv:after{content:"";height:var(--editor-bottom);display:block}.vditor-sv span[data-type=newline]+span[data-type=text]:empty{display:inherit}.vditor-sv .sup{vertical-align:super;font-size:smaller}.vditor-sv .strong{font-weight:700}.vditor-sv .em{font-style:italic}.vditor-sv .s{text-decoration:line-through}.vditor-sv .mark:not(.vditor-sv__marker){color:#000;background-color:#ff0}.vditor-sv .h1{font-size:1.75em;line-height:44px}.vditor-sv .h2{font-size:1.55em;line-height:38px}.vditor-sv .h3{font-size:1.38em;line-height:27px}.vditor-sv .h4{font-size:1.25em;line-height:25px}.vditor-sv .h5{font-size:1.13em}.vditor-sv .h6{font-size:1em}.vditor-sv__marker{color:var(--second-color)}.vditor-sv__marker--heading{color:var(--ir-heading-color)}.vditor-sv__marker--bi{color:var(--ir-bi-color)}.vditor-sv__marker--link{color:var(--ir-link-color)}.vditor-sv__marker--title{color:var(--ir-title-color)}.vditor-sv__marker--bracket{color:var(--ir-bracket-color)}.vditor-sv__marker--paren{color:var(--ir-paren-color)}.vditor-sv__marker--info{color:var(--ir-heading-color)}.vditor-sv__marker--strong{font-weight:700}`);import{jsx as m4}from"preact/jsx-runtime";var l4={icon:"material",mode:"wysiwyg",toolbar:[],toolbarConfig:{hide:!0},preview:{hljs:{lineNumber:!0},theme:{current:"ant-design"}},outline:{position:"right"}};function o5(){let U0=p4(),{file:O0}=s4();return E4(()=>{if(U0.current){let i=new d5.default(U0.current,{...l4,cache:{id:`vditor-${O0.value.id}`},customWysiwygToolbar(b0,v){},after(){i.setValue(O0.value.content),a4()}});U0.vditor=i}return()=>{U0.vditor?.destroy(),U0.vditor=null}},[U0]),m4("div",{ref:U0,className:m5.markdownWrapper})}import{nanoid as d4}from"@blockcode/utils";var v5={assets:[],files:[{id:d4(),content:`# Hello!
`}]};var r5="./assets/icon-markdown-3g5ex15e.svg";import{jsx as r4}from"preact/jsx-runtime";var N6={onNew(){return v5},onSave(U0,O0){return U0=U0.map((b0)=>{return{id:b0.id,content:b0.content}}),{meta:{},files:U0,assets:O0}},async onThumb(){},onUndo(U0){},onRedo(U0){},onEnableUndo(){},onEnableRedo(){},tabs:[{icon:r5,label:r4(v4,{id:"writer.tabs.editor",defaultMessage:"Writer"}),Content:o5}]};export{N6 as default};
