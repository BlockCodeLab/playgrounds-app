var jw=Object.create;var{getPrototypeOf:Ww,defineProperty:o5,getOwnPropertyNames:fw}=Object;var Sw=Object.prototype.hasOwnProperty;var Bw=(W1,K1,v)=>{v=W1!=null?jw(Ww(W1)):{};let L1=K1||!W1||!W1.__esModule?o5(v,"default",{value:W1,enumerable:!0}):v;for(let m of fw(W1))if(!Sw.call(L1,m))o5(L1,m,{get:()=>W1[m],enumerable:!0});return L1};var Hw=(W1,K1)=>()=>(K1||W1((K1={exports:{}}).exports,K1),K1.exports);var n5=Hw((j0,z5)=>{/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */(function(K1,v){if(typeof j0==="object"&&typeof z5==="object")z5.exports=v();else if(typeof define==="function"&&define.amd)define([],v);else if(typeof j0==="object")j0.Vditor=v();else K1.Vditor=v()})(j0,function(){return(()=>{var W1={173:(m)=>{var W=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=0.5,this.Match_Distance=1000,this.Patch_DeleteThreshold=0.5,this.Patch_Margin=4,this.Match_MaxBits=32},N=-1,M=1,I=0;W.Diff=function(q,$){return[q,$]},W.prototype.diff_main=function(q,$,V,F){if(typeof F>"u")if(this.Diff_Timeout<=0)F=Number.MAX_VALUE;else F=new Date().getTime()+this.Diff_Timeout*1000;var O=F;if(q==null||$==null)throw Error("Null input. (diff_main)");if(q==$){if(q)return[new W.Diff(I,q)];return[]}if(typeof V>"u")V=!0;var U=V,f=this.diff_commonPrefix(q,$),H=q.substring(0,f);q=q.substring(f),$=$.substring(f),f=this.diff_commonSuffix(q,$);var P=q.substring(q.length-f);q=q.substring(0,q.length-f),$=$.substring(0,$.length-f);var j=this.diff_compute_(q,$,U,O);if(H)j.unshift(new W.Diff(I,H));if(P)j.push(new W.Diff(I,P));return this.diff_cleanupMerge(j),j},W.prototype.diff_compute_=function(q,$,V,F){var O;if(!q)return[new W.Diff(M,$)];if(!$)return[new W.Diff(N,q)];var U=q.length>$.length?q:$,f=q.length>$.length?$:q,H=U.indexOf(f);if(H!=-1){if(O=[new W.Diff(M,U.substring(0,H)),new W.Diff(I,f),new W.Diff(M,U.substring(H+f.length))],q.length>$.length)O[0][0]=O[2][0]=N;return O}if(f.length==1)return[new W.Diff(N,q),new W.Diff(M,$)];var P=this.diff_halfMatch_(q,$);if(P){var j=P[0],Z=P[1],S=P[2],R=P[3],h=P[4],y=this.diff_main(j,S,V,F),b=this.diff_main(Z,R,V,F);return y.concat([new W.Diff(I,h)],b)}if(V&&q.length>100&&$.length>100)return this.diff_lineMode_(q,$,F);return this.diff_bisect_(q,$,F)},W.prototype.diff_lineMode_=function(q,$,V){var F=this.diff_linesToChars_(q,$);q=F.chars1,$=F.chars2;var O=F.lineArray,U=this.diff_main(q,$,!1,V);this.diff_charsToLines_(U,O),this.diff_cleanupSemantic(U),U.push(new W.Diff(I,""));var f=0,H=0,P=0,j="",Z="";while(f<U.length){switch(U[f][0]){case M:P++,Z+=U[f][1];break;case N:H++,j+=U[f][1];break;case I:if(H>=1&&P>=1){U.splice(f-H-P,H+P),f=f-H-P;var S=this.diff_main(j,Z,!1,V);for(var R=S.length-1;R>=0;R--)U.splice(f,0,S[R]);f=f+S.length}P=0,H=0,j="",Z="";break}f++}return U.pop(),U},W.prototype.diff_bisect_=function(q,$,V){var F=q.length,O=$.length,U=Math.ceil((F+O)/2),f=U,H=2*U,P=Array(H),j=Array(H);for(var Z=0;Z<H;Z++)P[Z]=-1,j[Z]=-1;P[f+1]=0,j[f+1]=0;var S=F-O,R=S%2!=0,h=0,y=0,b=0,E=0;for(var d=0;d<U;d++){if(new Date().getTime()>V)break;for(var t=-d+h;t<=d-y;t+=2){var w1=f+t,Z1;if(t==-d||t!=d&&P[w1-1]<P[w1+1])Z1=P[w1+1];else Z1=P[w1-1]+1;var f1=Z1-t;while(Z1<F&&f1<O&&q.charAt(Z1)==$.charAt(f1))Z1++,f1++;if(P[w1]=Z1,Z1>F)y+=2;else if(f1>O)h+=2;else if(R){var O1=f+S-t;if(O1>=0&&O1<H&&j[O1]!=-1){var q1=F-j[O1];if(Z1>=q1)return this.diff_bisectSplit_(q,$,Z1,f1,V)}}}for(var H1=-d+b;H1<=d-E;H1+=2){var O1=f+H1,q1;if(H1==-d||H1!=d&&j[O1-1]<j[O1+1])q1=j[O1+1];else q1=j[O1-1]+1;var M1=q1-H1;while(q1<F&&M1<O&&q.charAt(F-q1-1)==$.charAt(O-M1-1))q1++,M1++;if(j[O1]=q1,q1>F)E+=2;else if(M1>O)b+=2;else if(!R){var w1=f+S-H1;if(w1>=0&&w1<H&&P[w1]!=-1){var Z1=P[w1],f1=f+Z1-w1;if(q1=F-q1,Z1>=q1)return this.diff_bisectSplit_(q,$,Z1,f1,V)}}}}return[new W.Diff(N,q),new W.Diff(M,$)]},W.prototype.diff_bisectSplit_=function(q,$,V,F,O){var U=q.substring(0,V),f=$.substring(0,F),H=q.substring(V),P=$.substring(F),j=this.diff_main(U,f,!1,O),Z=this.diff_main(H,P,!1,O);return j.concat(Z)},W.prototype.diff_linesToChars_=function(q,$){var V=[],F={};V[0]="";function O(P){var j="",Z=0,S=-1,R=V.length;while(S<P.length-1){if(S=P.indexOf(`
`,Z),S==-1)S=P.length-1;var h=P.substring(Z,S+1);if(F.hasOwnProperty?F.hasOwnProperty(h):F[h]!==void 0)j+=String.fromCharCode(F[h]);else{if(R==U)h=P.substring(Z),S=P.length;j+=String.fromCharCode(R),F[h]=R,V[R++]=h}Z=S+1}return j}var U=40000,f=O(q);U=65535;var H=O($);return{chars1:f,chars2:H,lineArray:V}},W.prototype.diff_charsToLines_=function(q,$){for(var V=0;V<q.length;V++){var F=q[V][1],O=[];for(var U=0;U<F.length;U++)O[U]=$[F.charCodeAt(U)];q[V][1]=O.join("")}},W.prototype.diff_commonPrefix=function(q,$){if(!q||!$||q.charAt(0)!=$.charAt(0))return 0;var V=0,F=Math.min(q.length,$.length),O=F,U=0;while(V<O){if(q.substring(U,O)==$.substring(U,O))V=O,U=V;else F=O;O=Math.floor((F-V)/2+V)}return O},W.prototype.diff_commonSuffix=function(q,$){if(!q||!$||q.charAt(q.length-1)!=$.charAt($.length-1))return 0;var V=0,F=Math.min(q.length,$.length),O=F,U=0;while(V<O){if(q.substring(q.length-O,q.length-U)==$.substring($.length-O,$.length-U))V=O,U=V;else F=O;O=Math.floor((F-V)/2+V)}return O},W.prototype.diff_commonOverlap_=function(q,$){var V=q.length,F=$.length;if(V==0||F==0)return 0;if(V>F)q=q.substring(V-F);else if(V<F)$=$.substring(0,V);var O=Math.min(V,F);if(q==$)return O;var U=0,f=1;while(!0){var H=q.substring(O-f),P=$.indexOf(H);if(P==-1)return U;if(f+=P,P==0||q.substring(O-f)==$.substring(0,f))U=f,f++}},W.prototype.diff_halfMatch_=function(q,$){if(this.Diff_Timeout<=0)return null;var V=q.length>$.length?q:$,F=q.length>$.length?$:q;if(V.length<4||F.length*2<V.length)return null;var O=this;function U(y,b,E){var d=y.substring(E,E+Math.floor(y.length/4)),t=-1,w1="",Z1,f1,O1,q1;while((t=b.indexOf(d,t+1))!=-1){var H1=O.diff_commonPrefix(y.substring(E),b.substring(t)),M1=O.diff_commonSuffix(y.substring(0,E),b.substring(0,t));if(w1.length<M1+H1)w1=b.substring(t-M1,t)+b.substring(t,t+H1),Z1=y.substring(0,E-M1),f1=y.substring(E+H1),O1=b.substring(0,t-M1),q1=b.substring(t+H1)}if(w1.length*2>=y.length)return[Z1,f1,O1,q1,w1];else return null}var f=U(V,F,Math.ceil(V.length/4)),H=U(V,F,Math.ceil(V.length/2)),P;if(!f&&!H)return null;else if(!H)P=f;else if(!f)P=H;else P=f[4].length>H[4].length?f:H;var j,Z,S,R;if(q.length>$.length)j=P[0],Z=P[1],S=P[2],R=P[3];else S=P[0],R=P[1],j=P[2],Z=P[3];var h=P[4];return[j,Z,S,R,h]},W.prototype.diff_cleanupSemantic=function(q){var $=!1,V=[],F=0,O=null,U=0,f=0,H=0,P=0,j=0;while(U<q.length){if(q[U][0]==I)V[F++]=U,f=P,H=j,P=0,j=0,O=q[U][1];else{if(q[U][0]==M)P+=q[U][1].length;else j+=q[U][1].length;if(O&&O.length<=Math.max(f,H)&&O.length<=Math.max(P,j))q.splice(V[F-1],0,new W.Diff(N,O)),q[V[F-1]+1][0]=M,F--,F--,U=F>0?V[F-1]:-1,f=0,H=0,P=0,j=0,O=null,$=!0}U++}if($)this.diff_cleanupMerge(q);this.diff_cleanupSemanticLossless(q),U=1;while(U<q.length){if(q[U-1][0]==N&&q[U][0]==M){var Z=q[U-1][1],S=q[U][1],R=this.diff_commonOverlap_(Z,S),h=this.diff_commonOverlap_(S,Z);if(R>=h){if(R>=Z.length/2||R>=S.length/2)q.splice(U,0,new W.Diff(I,S.substring(0,R))),q[U-1][1]=Z.substring(0,Z.length-R),q[U+1][1]=S.substring(R),U++}else if(h>=Z.length/2||h>=S.length/2)q.splice(U,0,new W.Diff(I,Z.substring(0,h))),q[U-1][0]=M,q[U-1][1]=S.substring(0,S.length-h),q[U+1][0]=N,q[U+1][1]=Z.substring(h),U++;U++}U++}},W.prototype.diff_cleanupSemanticLossless=function(q){function $(h,y){if(!h||!y)return 6;var b=h.charAt(h.length-1),E=y.charAt(0),d=b.match(W.nonAlphaNumericRegex_),t=E.match(W.nonAlphaNumericRegex_),w1=d&&b.match(W.whitespaceRegex_),Z1=t&&E.match(W.whitespaceRegex_),f1=w1&&b.match(W.linebreakRegex_),O1=Z1&&E.match(W.linebreakRegex_),q1=f1&&h.match(W.blanklineEndRegex_),H1=O1&&y.match(W.blanklineStartRegex_);if(q1||H1)return 5;else if(f1||O1)return 4;else if(d&&!w1&&Z1)return 3;else if(w1||Z1)return 2;else if(d||t)return 1;return 0}var V=1;while(V<q.length-1){if(q[V-1][0]==I&&q[V+1][0]==I){var F=q[V-1][1],O=q[V][1],U=q[V+1][1],f=this.diff_commonSuffix(F,O);if(f){var H=O.substring(O.length-f);F=F.substring(0,F.length-f),O=H+O.substring(0,O.length-f),U=H+U}var P=F,j=O,Z=U,S=$(F,O)+$(O,U);while(O.charAt(0)===U.charAt(0)){F+=O.charAt(0),O=O.substring(1)+U.charAt(0),U=U.substring(1);var R=$(F,O)+$(O,U);if(R>=S)S=R,P=F,j=O,Z=U}if(q[V-1][1]!=P){if(P)q[V-1][1]=P;else q.splice(V-1,1),V--;if(q[V][1]=j,Z)q[V+1][1]=Z;else q.splice(V+1,1),V--}}V++}},W.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,W.whitespaceRegex_=/\s/,W.linebreakRegex_=/[\r\n]/,W.blanklineEndRegex_=/\n\r?\n$/,W.blanklineStartRegex_=/^\r?\n\r?\n/,W.prototype.diff_cleanupEfficiency=function(q){var $=!1,V=[],F=0,O=null,U=0,f=!1,H=!1,P=!1,j=!1;while(U<q.length){if(q[U][0]==I){if(q[U][1].length<this.Diff_EditCost&&(P||j))V[F++]=U,f=P,H=j,O=q[U][1];else F=0,O=null;P=j=!1}else{if(q[U][0]==N)j=!0;else P=!0;if(O&&(f&&H&&P&&j||O.length<this.Diff_EditCost/2&&f+H+P+j==3)){if(q.splice(V[F-1],0,new W.Diff(N,O)),q[V[F-1]+1][0]=M,F--,O=null,f&&H)P=j=!0,F=0;else F--,U=F>0?V[F-1]:-1,P=j=!1;$=!0}}U++}if($)this.diff_cleanupMerge(q)},W.prototype.diff_cleanupMerge=function(q){q.push(new W.Diff(I,""));var $=0,V=0,F=0,O="",U="",f;while($<q.length)switch(q[$][0]){case M:F++,U+=q[$][1],$++;break;case N:V++,O+=q[$][1],$++;break;case I:if(V+F>1){if(V!==0&&F!==0){if(f=this.diff_commonPrefix(U,O),f!==0){if($-V-F>0&&q[$-V-F-1][0]==I)q[$-V-F-1][1]+=U.substring(0,f);else q.splice(0,0,new W.Diff(I,U.substring(0,f))),$++;U=U.substring(f),O=O.substring(f)}if(f=this.diff_commonSuffix(U,O),f!==0)q[$][1]=U.substring(U.length-f)+q[$][1],U=U.substring(0,U.length-f),O=O.substring(0,O.length-f)}if($-=V+F,q.splice($,V+F),O.length)q.splice($,0,new W.Diff(N,O)),$++;if(U.length)q.splice($,0,new W.Diff(M,U)),$++;$++}else if($!==0&&q[$-1][0]==I)q[$-1][1]+=q[$][1],q.splice($,1);else $++;F=0,V=0,O="",U="";break}if(q[q.length-1][1]==="")q.pop();var H=!1;$=1;while($<q.length-1){if(q[$-1][0]==I&&q[$+1][0]==I){if(q[$][1].substring(q[$][1].length-q[$-1][1].length)==q[$-1][1])q[$][1]=q[$-1][1]+q[$][1].substring(0,q[$][1].length-q[$-1][1].length),q[$+1][1]=q[$-1][1]+q[$+1][1],q.splice($-1,1),H=!0;else if(q[$][1].substring(0,q[$+1][1].length)==q[$+1][1])q[$-1][1]+=q[$+1][1],q[$][1]=q[$][1].substring(q[$+1][1].length)+q[$+1][1],q.splice($+1,1),H=!0}$++}if(H)this.diff_cleanupMerge(q)},W.prototype.diff_xIndex=function(q,$){var V=0,F=0,O=0,U=0,f;for(f=0;f<q.length;f++){if(q[f][0]!==M)V+=q[f][1].length;if(q[f][0]!==N)F+=q[f][1].length;if(V>$)break;O=V,U=F}if(q.length!=f&&q[f][0]===N)return U;return U+($-O)},W.prototype.diff_prettyHtml=function(q){var $=[],V=/&/g,F=/</g,O=/>/g,U=/\n/g;for(var f=0;f<q.length;f++){var H=q[f][0],P=q[f][1],j=P.replace(V,"&amp;").replace(F,"&lt;").replace(O,"&gt;").replace(U,"&para;<br>");switch(H){case M:$[f]='<ins style="background:#e6ffe6;">'+j+"</ins>";break;case N:$[f]='<del style="background:#ffe6e6;">'+j+"</del>";break;case I:$[f]="<span>"+j+"</span>";break}}return $.join("")},W.prototype.diff_text1=function(q){var $=[];for(var V=0;V<q.length;V++)if(q[V][0]!==M)$[V]=q[V][1];return $.join("")},W.prototype.diff_text2=function(q){var $=[];for(var V=0;V<q.length;V++)if(q[V][0]!==N)$[V]=q[V][1];return $.join("")},W.prototype.diff_levenshtein=function(q){var $=0,V=0,F=0;for(var O=0;O<q.length;O++){var U=q[O][0],f=q[O][1];switch(U){case M:V+=f.length;break;case N:F+=f.length;break;case I:$+=Math.max(V,F),V=0,F=0;break}}return $+=Math.max(V,F),$},W.prototype.diff_toDelta=function(q){var $=[];for(var V=0;V<q.length;V++)switch(q[V][0]){case M:$[V]="+"+encodeURI(q[V][1]);break;case N:$[V]="-"+q[V][1].length;break;case I:$[V]="="+q[V][1].length;break}return $.join("\t").replace(/%20/g," ")},W.prototype.diff_fromDelta=function(q,$){var V=[],F=0,O=0,U=$.split(/\t/g);for(var f=0;f<U.length;f++){var H=U[f].substring(1);switch(U[f].charAt(0)){case"+":try{V[F++]=new W.Diff(M,decodeURI(H))}catch(Z){throw Error("Illegal escape in diff_fromDelta: "+H)}break;case"-":case"=":var P=parseInt(H,10);if(isNaN(P)||P<0)throw Error("Invalid number in diff_fromDelta: "+H);var j=q.substring(O,O+=P);if(U[f].charAt(0)=="=")V[F++]=new W.Diff(I,j);else V[F++]=new W.Diff(N,j);break;default:if(U[f])throw Error("Invalid diff operation in diff_fromDelta: "+U[f])}}if(O!=q.length)throw Error("Delta length ("+O+") does not equal source text length ("+q.length+").");return V},W.prototype.match_main=function(q,$,V){if(q==null||$==null||V==null)throw Error("Null input. (match_main)");if(V=Math.max(0,Math.min(V,q.length)),q==$)return 0;else if(!q.length)return-1;else if(q.substring(V,V+$.length)==$)return V;else return this.match_bitap_(q,$,V)},W.prototype.match_bitap_=function(q,$,V){if($.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var F=this.match_alphabet_($),O=this;function U(Z1,f1){var O1=Z1/$.length,q1=Math.abs(V-f1);if(!O.Match_Distance)return q1?1:O1;return O1+q1/O.Match_Distance}var f=this.Match_Threshold,H=q.indexOf($,V);if(H!=-1){if(f=Math.min(U(0,H),f),H=q.lastIndexOf($,V+$.length),H!=-1)f=Math.min(U(0,H),f)}var P=1<<$.length-1;H=-1;var j,Z,S=$.length+q.length,R;for(var h=0;h<$.length;h++){j=0,Z=S;while(j<Z){if(U(h,V+Z)<=f)j=Z;else S=Z;Z=Math.floor((S-j)/2+j)}S=Z;var y=Math.max(1,V-Z+1),b=Math.min(V+Z,q.length)+$.length,E=Array(b+2);E[b+1]=(1<<h)-1;for(var d=b;d>=y;d--){var t=F[q.charAt(d-1)];if(h===0)E[d]=(E[d+1]<<1|1)&t;else E[d]=(E[d+1]<<1|1)&t|((R[d+1]|R[d])<<1|1)|R[d+1];if(E[d]&P){var w1=U(h,d-1);if(w1<=f)if(f=w1,H=d-1,H>V)y=Math.max(1,2*V-H);else break}}if(U(h+1,V)>f)break;R=E}return H},W.prototype.match_alphabet_=function(q){var $={};for(var V=0;V<q.length;V++)$[q.charAt(V)]=0;for(var V=0;V<q.length;V++)$[q.charAt(V)]|=1<<q.length-V-1;return $},W.prototype.patch_addContext_=function(q,$){if($.length==0)return;if(q.start2===null)throw Error("patch not initialized");var V=$.substring(q.start2,q.start2+q.length1),F=0;while($.indexOf(V)!=$.lastIndexOf(V)&&V.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)F+=this.Patch_Margin,V=$.substring(q.start2-F,q.start2+q.length1+F);F+=this.Patch_Margin;var O=$.substring(q.start2-F,q.start2);if(O)q.diffs.unshift(new W.Diff(I,O));var U=$.substring(q.start2+q.length1,q.start2+q.length1+F);if(U)q.diffs.push(new W.Diff(I,U));q.start1-=O.length,q.start2-=O.length,q.length1+=O.length+U.length,q.length2+=O.length+U.length},W.prototype.patch_make=function(q,$,V){var F,O;if(typeof q=="string"&&typeof $=="string"&&typeof V>"u"){if(F=q,O=this.diff_main(F,$,!0),O.length>2)this.diff_cleanupSemantic(O),this.diff_cleanupEfficiency(O)}else if(q&&typeof q=="object"&&typeof $>"u"&&typeof V>"u")O=q,F=this.diff_text1(O);else if(typeof q=="string"&&$&&typeof $=="object"&&typeof V>"u")F=q,O=$;else if(typeof q=="string"&&typeof $=="string"&&V&&typeof V=="object")F=q,O=V;else throw Error("Unknown call format to patch_make.");if(O.length===0)return[];var U=[],f=new W.patch_obj,H=0,P=0,j=0,Z=F,S=F;for(var R=0;R<O.length;R++){var h=O[R][0],y=O[R][1];if(!H&&h!==I)f.start1=P,f.start2=j;switch(h){case M:f.diffs[H++]=O[R],f.length2+=y.length,S=S.substring(0,j)+y+S.substring(j);break;case N:f.length1+=y.length,f.diffs[H++]=O[R],S=S.substring(0,j)+S.substring(j+y.length);break;case I:if(y.length<=2*this.Patch_Margin&&H&&O.length!=R+1)f.diffs[H++]=O[R],f.length1+=y.length,f.length2+=y.length;else if(y.length>=2*this.Patch_Margin){if(H)this.patch_addContext_(f,Z),U.push(f),f=new W.patch_obj,H=0,Z=S,P=j}break}if(h!==M)P+=y.length;if(h!==N)j+=y.length}if(H)this.patch_addContext_(f,Z),U.push(f);return U},W.prototype.patch_deepCopy=function(q){var $=[];for(var V=0;V<q.length;V++){var F=q[V],O=new W.patch_obj;O.diffs=[];for(var U=0;U<F.diffs.length;U++)O.diffs[U]=new W.Diff(F.diffs[U][0],F.diffs[U][1]);O.start1=F.start1,O.start2=F.start2,O.length1=F.length1,O.length2=F.length2,$[V]=O}return $},W.prototype.patch_apply=function(q,$){if(q.length==0)return[$,[]];q=this.patch_deepCopy(q);var V=this.patch_addPadding(q);$=V+$+V,this.patch_splitMax(q);var F=0,O=[];for(var U=0;U<q.length;U++){var f=q[U].start2+F,H=this.diff_text1(q[U].diffs),P,j=-1;if(H.length>this.Match_MaxBits){if(P=this.match_main($,H.substring(0,this.Match_MaxBits),f),P!=-1){if(j=this.match_main($,H.substring(H.length-this.Match_MaxBits),f+H.length-this.Match_MaxBits),j==-1||P>=j)P=-1}}else P=this.match_main($,H,f);if(P==-1)O[U]=!1,F-=q[U].length2-q[U].length1;else{O[U]=!0,F=P-f;var Z;if(j==-1)Z=$.substring(P,P+H.length);else Z=$.substring(P,j+this.Match_MaxBits);if(H==Z)$=$.substring(0,P)+this.diff_text2(q[U].diffs)+$.substring(P+H.length);else{var S=this.diff_main(H,Z,!1);if(H.length>this.Match_MaxBits&&this.diff_levenshtein(S)/H.length>this.Patch_DeleteThreshold)O[U]=!1;else{this.diff_cleanupSemanticLossless(S);var R=0,h;for(var y=0;y<q[U].diffs.length;y++){var b=q[U].diffs[y];if(b[0]!==I)h=this.diff_xIndex(S,R);if(b[0]===M)$=$.substring(0,P+h)+b[1]+$.substring(P+h);else if(b[0]===N)$=$.substring(0,P+h)+$.substring(P+this.diff_xIndex(S,R+b[1].length));if(b[0]!==N)R+=b[1].length}}}}}return $=$.substring(V.length,$.length-V.length),[$,O]},W.prototype.patch_addPadding=function(q){var $=this.Patch_Margin,V="";for(var F=1;F<=$;F++)V+=String.fromCharCode(F);for(var F=0;F<q.length;F++)q[F].start1+=$,q[F].start2+=$;var O=q[0],U=O.diffs;if(U.length==0||U[0][0]!=I)U.unshift(new W.Diff(I,V)),O.start1-=$,O.start2-=$,O.length1+=$,O.length2+=$;else if($>U[0][1].length){var f=$-U[0][1].length;U[0][1]=V.substring(U[0][1].length)+U[0][1],O.start1-=f,O.start2-=f,O.length1+=f,O.length2+=f}if(O=q[q.length-1],U=O.diffs,U.length==0||U[U.length-1][0]!=I)U.push(new W.Diff(I,V)),O.length1+=$,O.length2+=$;else if($>U[U.length-1][1].length){var f=$-U[U.length-1][1].length;U[U.length-1][1]+=V.substring(0,f),O.length1+=f,O.length2+=f}return V},W.prototype.patch_splitMax=function(q){var $=this.Match_MaxBits;for(var V=0;V<q.length;V++){if(q[V].length1<=$)continue;var F=q[V];q.splice(V--,1);var{start1:O,start2:U}=F,f="";while(F.diffs.length!==0){var H=new W.patch_obj,P=!0;if(H.start1=O-f.length,H.start2=U-f.length,f!=="")H.length1=H.length2=f.length,H.diffs.push(new W.Diff(I,f));while(F.diffs.length!==0&&H.length1<$-this.Patch_Margin){var j=F.diffs[0][0],Z=F.diffs[0][1];if(j===M)H.length2+=Z.length,U+=Z.length,H.diffs.push(F.diffs.shift()),P=!1;else if(j===N&&H.diffs.length==1&&H.diffs[0][0]==I&&Z.length>2*$)H.length1+=Z.length,O+=Z.length,P=!1,H.diffs.push(new W.Diff(j,Z)),F.diffs.shift();else{if(Z=Z.substring(0,$-H.length1-this.Patch_Margin),H.length1+=Z.length,O+=Z.length,j===I)H.length2+=Z.length,U+=Z.length;else P=!1;if(H.diffs.push(new W.Diff(j,Z)),Z==F.diffs[0][1])F.diffs.shift();else F.diffs[0][1]=F.diffs[0][1].substring(Z.length)}}f=this.diff_text2(H.diffs),f=f.substring(f.length-this.Patch_Margin);var S=this.diff_text1(F.diffs).substring(0,this.Patch_Margin);if(S!=="")if(H.length1+=S.length,H.length2+=S.length,H.diffs.length!==0&&H.diffs[H.diffs.length-1][0]===I)H.diffs[H.diffs.length-1][1]+=S;else H.diffs.push(new W.Diff(I,S));if(!P)q.splice(++V,0,H)}}},W.prototype.patch_toText=function(q){var $=[];for(var V=0;V<q.length;V++)$[V]=q[V];return $.join("")},W.prototype.patch_fromText=function(q){var $=[];if(!q)return $;var V=q.split(`
`),F=0,O=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(F<V.length){var U=V[F].match(O);if(!U)throw Error("Invalid patch string: "+V[F]);var f=new W.patch_obj;if($.push(f),f.start1=parseInt(U[1],10),U[2]==="")f.start1--,f.length1=1;else if(U[2]=="0")f.length1=0;else f.start1--,f.length1=parseInt(U[2],10);if(f.start2=parseInt(U[3],10),U[4]==="")f.start2--,f.length2=1;else if(U[4]=="0")f.length2=0;else f.start2--,f.length2=parseInt(U[4],10);F++;while(F<V.length){var H=V[F].charAt(0);try{var P=decodeURI(V[F].substring(1))}catch(j){throw Error("Illegal escape in patch_fromText: "+P)}if(H=="-")f.diffs.push(new W.Diff(N,P));else if(H=="+")f.diffs.push(new W.Diff(M,P));else if(H==" ")f.diffs.push(new W.Diff(I,P));else if(H=="@")break;else if(H==="");else throw Error('Invalid patch mode "'+H+'" in: '+P);F++}}return $},W.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},W.patch_obj.prototype.toString=function(){var q,$;if(this.length1===0)q=this.start1+",0";else if(this.length1==1)q=this.start1+1;else q=this.start1+1+","+this.length1;if(this.length2===0)$=this.start2+",0";else if(this.length2==1)$=this.start2+1;else $=this.start2+1+","+this.length2;var V=["@@ -"+q+" +"+$+` @@
`],F;for(var O=0;O<this.diffs.length;O++){switch(this.diffs[O][0]){case M:F="+";break;case N:F="-";break;case I:F=" ";break}V[O+1]=F+encodeURI(this.diffs[O][1])+`
`}return V.join("").replace(/%20/g," ")},m.exports=W,m.exports.diff_match_patch=W,m.exports.DIFF_DELETE=N,m.exports.DIFF_INSERT=M,m.exports.DIFF_EQUAL=I},408:(m,W,N)=>{N.d(W,{default:()=>i1});var M=N(135),I=N(840),q=N(775),$=N(428),V=N(325),F=N(483),O=N(999),U=function(c){if(c===void 0)c=document;var Q1=function(s){var g=document.createElement("img");g.src=s.getAttribute("data-src"),g.addEventListener("load",function(){if(!s.getAttribute("style")&&!s.getAttribute("class")&&!s.getAttribute("width")&&!s.getAttribute("height")){if(g.naturalHeight>g.naturalWidth&&g.naturalWidth/g.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&g.naturalHeight>window.innerHeight-40)s.style.height=window.innerHeight-40+"px"}s.src=g.src}),s.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return c.querySelectorAll("img").forEach(function(s){if(s.getAttribute("data-src"))Q1(s)}),!1;if(window.vditorImageIntersectionObserver)window.vditorImageIntersectionObserver.disconnect(),c.querySelectorAll("img").forEach(function(s){window.vditorImageIntersectionObserver.observe(s)});else window.vditorImageIntersectionObserver=new IntersectionObserver(function(s){s.forEach(function(g){if((typeof g.isIntersecting>"u"?g.intersectionRatio!==0:g.isIntersecting)&&g.target.getAttribute("data-src"))Q1(g.target)})}),c.querySelectorAll("img").forEach(function(s){window.vditorImageIntersectionObserver.observe(s)})},f=N(472),H=N(280),P=N(637),j=N(825),Z=N(11),S=N(194),R=N(436),h=N(229),y=N(145),b=N(538),E=N(413),d=N(106),t=N(673),w1=function(c){document.querySelectorAll(".vditor-anchor").forEach(function(Q1){if(c===1)Q1.classList.add("vditor-anchor--left");Q1.onclick=function(){var s=Q1.getAttribute("href").substr(1),g=document.getElementById("vditorAnchor-"+s).offsetTop;document.querySelector("html").scrollTop=g}}),window.onhashchange=function(){var Q1=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));if(Q1)document.querySelector("html").scrollTop=Q1.offsetTop}},Z1=N(214),f1=N(810),O1=function(c,Q1){if(Q1===void 0)Q1="zh_CN";if(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")return;var s=function(){var I1=speechSynthesis.getVoices(),n,V1;if(I1.forEach(function(_1){if(_1.lang===Q1.replace("_","-"))n=_1;if(_1.default)V1=_1}),!n)n=V1;return n},g='<svg><use xlink:href="#vditor-icon-play"></use></svg>',P1='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';if(!document.getElementById("vditorIconScript"))g='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',P1='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>';var o=document.querySelector(".vditor-speech");if(!o){if(o=document.createElement("button"),o.className="vditor-speech",c.insertAdjacentElement("beforeend",o),speechSynthesis.onvoiceschanged!==void 0)speechSynthesis.onvoiceschanged=s}var S1=s(),X1=new SpeechSynthesisUtterance;X1.voice=S1,X1.onend=X1.onerror=function(){o.style.display="none",speechSynthesis.cancel(),o.classList.remove("vditor-speech--current"),o.innerHTML=g},c.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(I1){var n=I1.target;if(n.classList.contains("vditor-speech")||n.parentElement.classList.contains("vditor-speech")){if(!o.classList.contains("vditor-speech--current"))X1.text=o.getAttribute("data-text"),speechSynthesis.speak(X1),o.classList.add("vditor-speech--current"),o.innerHTML=P1;else if(speechSynthesis.speaking)if(speechSynthesis.paused)speechSynthesis.resume(),o.innerHTML=P1;else speechSynthesis.pause(),o.innerHTML=g;(0,f1.Hc)(window.vditorSpeechRange),c.focus();return}if(o.style.display="none",speechSynthesis.cancel(),o.classList.remove("vditor-speech--current"),o.innerHTML=g,getSelection().rangeCount===0)return;var V1=getSelection().getRangeAt(0),_1=V1.toString().trim();if(!_1)return;window.vditorSpeechRange=V1.cloneRange();var p1=V1.getBoundingClientRect();if(o.innerHTML=g,o.style.display="block",o.style.top=p1.top+p1.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0)o.style.left=I1.changedTouches[I1.changedTouches.length-1].pageX+2+"px";else o.style.left=I1.clientX+2+"px";o.setAttribute("data-text",_1)})},q1=function(c,Q1,s,g){function P1(o){return o instanceof s?o:new s(function(S1){S1(o)})}return new(s||(s=Promise))(function(o,S1){function X1(V1){try{n(g.next(V1))}catch(_1){S1(_1)}}function I1(V1){try{n(g.throw(V1))}catch(_1){S1(_1)}}function n(V1){V1.done?o(V1.value):P1(V1.value).then(X1,I1)}n((g=g.apply(c,Q1||[])).next())})},H1=function(c,Q1){var s={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},g,P1,o,S1;return S1={next:X1(0),throw:X1(1),return:X1(2)},typeof Symbol==="function"&&(S1[Symbol.iterator]=function(){return this}),S1;function X1(n){return function(V1){return I1([n,V1])}}function I1(n){if(g)throw TypeError("Generator is already executing.");while(S1&&(S1=0,n[0]&&(s=0)),s)try{if(g=1,P1&&(o=n[0]&2?P1.return:n[0]?P1.throw||((o=P1.return)&&o.call(P1),0):P1.next)&&!(o=o.call(P1,n[1])).done)return o;if(P1=0,o)n=[n[0]&2,o.value];switch(n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,P1=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if((o=s.trys,!(o=o.length>0&&o[o.length-1]))&&(n[0]===6||n[0]===2)){s=0;continue}if(n[0]===3&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(n[0]===6&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}if(o[2])s.ops.pop();s.trys.pop();continue}n=Q1.call(c,s)}catch(V1){n=[6,V1],P1=0}finally{g=o=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},M1=function(c){var Q1,s={anchor:0,cdn:y.g.CDN,customEmoji:{},emojiPath:"".concat(y.g.CDN,"/dist/images/emoji"),hljs:y.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:y.g.MARKDOWN_OPTIONS,math:y.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:y.g.THEME_OPTIONS};if(c.cdn){if(!((Q1=c.theme)===null||Q1===void 0?void 0:Q1.path))s.theme.path="".concat(c.cdn,"/dist/css/content-theme");if(!c.emojiPath)s.emojiPath="".concat(c.cdn,"/dist/images/emoji")}return(0,t.T)(s,c)},N1=function(c,Q1){var s=M1(Q1);return(0,E.G)("".concat(s.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){var g=(0,Z1.X)({autoSpace:s.markdown.autoSpace,gfmAutoLink:s.markdown.gfmAutoLink,codeBlockPreview:s.markdown.codeBlockPreview,emojiSite:s.emojiPath,emojis:s.customEmoji,fixTermTypo:s.markdown.fixTermTypo,footnotes:s.markdown.footnotes,headingAnchor:s.anchor!==0,inlineMathDigit:s.math.inlineDigit,lazyLoadImage:s.lazyLoadImage,linkBase:s.markdown.linkBase,linkPrefix:s.markdown.linkPrefix,listStyle:s.markdown.listStyle,mark:s.markdown.mark,mathBlockPreview:s.markdown.mathBlockPreview,paragraphBeginningSpace:s.markdown.paragraphBeginningSpace,sanitize:s.markdown.sanitize,toc:s.markdown.toc});if(Q1===null||Q1===void 0?void 0:Q1.renderers)g.SetJSRenderers({renderers:{Md2HTML:Q1.renderers}});return g.SetHeadingID(!0),g.Md2HTML(c)})},L=function(c,Q1,s){return q1(void 0,void 0,void 0,function(){var g,P1,o,S1;return H1(this,function(X1){switch(X1.label){case 0:return g=M1(s),[4,N1(Q1,g)];case 1:if(P1=X1.sent(),g.transform)P1=g.transform(P1);if(c.innerHTML=P1,c.classList.add("vditor-reset"),g.i18n)return[3,5];if(["de_DE","en_US","es_ES","fr_FR","ja_JP","ko_KR","pt_BR","ru_RU","sv_SE","vi_VN","zh_CN","zh_TW"].includes(g.lang))return[3,2];throw Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return o="vditorI18nScript",S1=o+g.lang,document.querySelectorAll('head script[id^="'.concat(o,'"]')).forEach(function(I1){if(I1.id!==S1)document.head.removeChild(I1)}),[4,(0,E.G)("".concat(g.cdn,"/dist/js/i18n/").concat(g.lang,".js"),S1)];case 3:X1.sent(),X1.label=4;case 4:return[3,6];case 5:window.VditorI18n=g.i18n,X1.label=6;case 6:if(!g.icon)return[3,8];return[4,(0,E.G)("".concat(g.cdn,"/dist/js/icons/").concat(g.icon,".js"),"vditorIconScript")];case 7:X1.sent(),X1.label=8;case 8:if((0,b.Z)(g.theme.current,g.theme.path),g.anchor===1)c.classList.add("vditor-reset--anchor");if((0,$.O)(c,g.hljs),(0,O.s)(g.hljs,c,g.cdn),(0,f.H)(c,{cdn:g.cdn,math:g.math}),(0,P.i)(c,g.cdn,g.mode),(0,j.J)(c,g.cdn,g.mode),(0,Z.K)(c,g.cdn),(0,V.P)(c,g.cdn),(0,F.v)(c,g.cdn),(0,q.p)(c,g.cdn,g.mode),(0,S.P)(c,g.cdn,g.mode),(0,h.B)(c,g.cdn),(0,M.Q)(c,g.cdn),g.render.media.enable)(0,H.Y)(c);if(g.speech.enable)O1(c);if(g.anchor!==0)w1(g.anchor);if(g.after)g.after();if(g.lazyLoadImage)U(c);return c.addEventListener("click",function(I1){var n=(0,d.lG)(I1.target,"SPAN");if(n&&(0,d.fb)(n,"vditor-toc")){var V1=c.querySelector("#"+n.getAttribute("data-target-id"));if(V1)window.scrollTo(window.scrollX,V1.offsetTop);return}}),[2]}})})},m1=N(190),W0=N(580),f0=function(){function c(){}return c.adapterRender=I,c.previewImage=m1.E,c.codeRender=$.O,c.graphvizRender=F.v,c.highlightRender=O.s,c.mathRender=f.H,c.mermaidRender=P.i,c.SMILESRender=j.J,c.markmapRender=Z.K,c.flowchartRender=V.P,c.chartRender=q.p,c.abcRender=M.Q,c.mindmapRender=S.P,c.plantumlRender=h.B,c.outlineRender=R.k,c.mediaRender=H.Y,c.speechRender=O1,c.lazyLoadImageRender=U,c.md2html=N1,c.preview=L,c.setCodeTheme=W0.Y,c.setContentTheme=b.Z,c}();let i1=f0},145:(m,W,N)=>{N.d(W,{H:()=>M,g:()=>I});var M="3.11.2",I=function(){function q(){}return q.ZWSP="​",q.DROP_EDITOR="application/editor",q.MOBILE_WIDTH=520,q.CLASS_MENU_DISABLED="vditor-menu--disabled",q.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],q.CODE_THEME=["a11y-dark","agate","an-old-hope","androidstudio","arta","atom-one-dark","atom-one-dark-reasonable","base16/3024","base16/apathy","base16/apprentice","base16/ashes","base16/atelier-cave","base16/atelier-dune","base16/atelier-estuary","base16/atelier-forest","base16/atelier-heath","base16/atelier-lakeside","base16/atelier-plateau","base16/atelier-savanna","base16/atelier-seaside","base16/atelier-sulphurpool","base16/atlas","base16/bespin","base16/black-metal","base16/black-metal-bathory","base16/black-metal-burzum","base16/black-metal-dark-funeral","base16/black-metal-gorgoroth","base16/black-metal-immortal","base16/black-metal-khold","base16/black-metal-marduk","base16/black-metal-mayhem","base16/black-metal-nile","base16/black-metal-venom","base16/brewer","base16/bright","base16/brogrammer","base16/brush-trees-dark","base16/chalk","base16/circus","base16/classic-dark","base16/codeschool","base16/colors","base16/danqing","base16/darcula","base16/dark-violet","base16/darkmoss","base16/darktooth","base16/decaf","base16/default-dark","base16/dracula","base16/edge-dark","base16/eighties","base16/embers","base16/equilibrium-dark","base16/equilibrium-gray-dark","base16/espresso","base16/eva","base16/eva-dim","base16/flat","base16/framer","base16/gigavolt","base16/google-dark","base16/grayscale-dark","base16/green-screen","base16/gruvbox-dark-hard","base16/gruvbox-dark-medium","base16/gruvbox-dark-pale","base16/gruvbox-dark-soft","base16/hardcore","base16/harmonic16-dark","base16/heetch-dark","base16/helios","base16/hopscotch","base16/horizon-dark","base16/humanoid-dark","base16/ia-dark","base16/icy-dark","base16/ir-black","base16/isotope","base16/kimber","base16/london-tube","base16/macintosh","base16/marrakesh","base16/materia","base16/material","base16/material-darker","base16/material-palenight","base16/material-vivid","base16/mellow-purple","base16/mocha","base16/monokai","base16/nebula","base16/nord","base16/nova","base16/ocean","base16/oceanicnext","base16/onedark","base16/outrun-dark","base16/papercolor-dark","base16/paraiso","base16/pasque","base16/phd","base16/pico","base16/pop","base16/porple","base16/qualia","base16/railscasts","base16/rebecca","base16/ros-pine","base16/ros-pine-moon","base16/sandcastle","base16/seti-ui","base16/silk-dark","base16/snazzy","base16/solar-flare","base16/solarized-dark","base16/spacemacs","base16/summercamp","base16/summerfruit-dark","base16/synth-midnight-terminal-dark","base16/tango","base16/tender","base16/tomorrow-night","base16/twilight","base16/unikitty-dark","base16/vulcan","base16/windows-10","base16/windows-95","base16/windows-high-contrast","base16/windows-nt","base16/woodland","base16/xcode-dusk","base16/zenburn","codepen-embed","dark","devibeans","far","felipec","github-dark","github-dark-dimmed","gml","gradient-dark","hybrid","ir-black","isbl-editor-dark","kimbie-dark","lioshi","monokai","monokai-sublime","night-owl","nnfx-dark","nord","obsidian","panda-syntax-dark","paraiso-dark","pojoaque","qtcreator-dark","rainbow","shades-of-purple","srcery","stackoverflow-dark","sunburst","tomorrow-night-blue","tomorrow-night-bright","tokyo-night-dark","vs2015","xt256","ant-design","a11y-light","arduino-light","ascetic","atom-one-light","base16/atelier-cave-light","base16/atelier-dune-light","base16/atelier-estuary-light","base16/atelier-forest-light","base16/atelier-heath-light","base16/atelier-lakeside-light","base16/atelier-plateau-light","base16/atelier-savanna-light","base16/atelier-seaside-light","base16/atelier-sulphurpool-light","base16/brush-trees","base16/classic-light","base16/cupcake","base16/cupertino","base16/default-light","base16/dirtysea","base16/edge-light","base16/equilibrium-gray-light","base16/equilibrium-light","base16/fruit-soda","base16/github","base16/google-light","base16/grayscale-light","base16/gruvbox-light-hard","base16/gruvbox-light-medium","base16/gruvbox-light-soft","base16/harmonic16-light","base16/heetch-light","base16/humanoid-light","base16/horizon-light","base16/ia-light","base16/material-lighter","base16/mexico-light","base16/one-light","base16/papercolor-light","base16/ros-pine-dawn","base16/sagelight","base16/shapeshifter","base16/silk-light","base16/solar-flare-light","base16/solarized-light","base16/summerfruit-light","base16/synth-midnight-terminal-light","base16/tomorrow","base16/unikitty-light","base16/windows-10-light","base16/windows-95-light","base16/windows-high-contrast-light","brown-paper","base16/windows-nt-light","color-brewer","docco","foundation","github","googlecode","gradient-light","grayscale","idea","intellij-light","isbl-editor-light","kimbie-light","lightfair","magula","mono-blue","nnfx-light","panda-syntax-light","paraiso-light","purebasic","qtcreator-light","routeros","school-book","stackoverflow-light","tokyo-night-light","vs","xcode","default"],q.ALIAS_CODE_LANGUAGES=["abc","plantuml","mermaid","flowchart","echarts","mindmap","graphviz","math","markmap","smiles","js","ts","html","toml","c#","bat"],q.CDN="https://unpkg.com/vditor@".concat("3.11.2"),q.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},q.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},q.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},q.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:"".concat(q.CDN,"/dist/css/content-theme")},q}()},825:(m,W,N)=>{N.d(W,{J:()=>V});var M=N(145),I=N(413),q=N(840),$=N(494),V=function(F,O,U){if(F===void 0)F=document;if(O===void 0)O=M.g.CDN;var f=q.SMILESRenderAdapter.getElements(F);if(f.length>0)(0,I.G)("".concat(O,"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7"),"vditorAbcjsScript").then(function(){var H=new SmiDrawer({},{});f.forEach(function(P){var j=q.SMILESRenderAdapter.getCode(P).trim();if(P.getAttribute("data-processed")==="true"||j.trim()==="")return;var Z="smiles"+(0,$.Wb)();P.innerHTML='<svg id="'.concat(Z,'"></svg>'),H.draw(j,"#"+Z,U==="dark"?"dark":void 0),P.setAttribute("data-processed","true")})})}},135:(m,W,N)=>{N.d(W,{Q:()=>$});var M=N(145),I=N(413),q=N(840),$=function(V,F){if(V===void 0)V=document;if(F===void 0)F=M.g.CDN;var O=q.abcRenderAdapter.getElements(V);if(O.length>0)(0,I.G)("".concat(F,"/dist/js/abcjs/abcjs_basic.min.js"),"vditorAbcjsScript").then(function(){O.forEach(function(U){if(U.parentElement.classList.contains("vditor-wysiwyg__pre")||U.parentElement.classList.contains("vditor-ir__marker--pre"))return;if(U.getAttribute("data-processed")==="true")return;ABCJS.renderAbc(U,q.abcRenderAdapter.getCode(U).trim()),U.style.overflowX="auto",U.setAttribute("data-processed","true")})})}},840:(m,W,N)=>{N.r(W),N.d(W,{mathRenderAdapter:()=>M,SMILESRenderAdapter:()=>I,mermaidRenderAdapter:()=>q,markmapRenderAdapter:()=>$,mindmapRenderAdapter:()=>V,chartRenderAdapter:()=>F,abcRenderAdapter:()=>O,graphvizRenderAdapter:()=>U,flowchartRenderAdapter:()=>f,plantumlRenderAdapter:()=>H});var M={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-math")}},I={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-smiles")}},q={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-mermaid")}},$={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-markmap")}},V={getCode:function(P){return P.getAttribute("data-code")},getElements:function(P){return P.querySelectorAll(".language-mindmap")}},F={getCode:function(P){return P.innerText},getElements:function(P){return P.querySelectorAll(".language-echarts")}},O={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-abc")}},U={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-graphviz")}},f={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-flowchart")}},H={getCode:function(P){return P.textContent},getElements:function(P){return P.querySelectorAll(".language-plantuml")}}},775:(m,W,N)=>{N.d(W,{p:()=>O});var M=N(145),I=N(413),q=N(840),$=N(494),V=function(U,f,H,P){function j(Z){return Z instanceof H?Z:new H(function(S){S(Z)})}return new(H||(H=Promise))(function(Z,S){function R(b){try{y(P.next(b))}catch(E){S(E)}}function h(b){try{y(P.throw(b))}catch(E){S(E)}}function y(b){b.done?Z(b.value):j(b.value).then(R,h)}y((P=P.apply(U,f||[])).next())})},F=function(U,f){var H={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},P,j,Z,S;return S={next:R(0),throw:R(1),return:R(2)},typeof Symbol==="function"&&(S[Symbol.iterator]=function(){return this}),S;function R(y){return function(b){return h([y,b])}}function h(y){if(P)throw TypeError("Generator is already executing.");while(S&&(S=0,y[0]&&(H=0)),H)try{if(P=1,j&&(Z=y[0]&2?j.return:y[0]?j.throw||((Z=j.return)&&Z.call(j),0):j.next)&&!(Z=Z.call(j,y[1])).done)return Z;if(j=0,Z)y=[y[0]&2,Z.value];switch(y[0]){case 0:case 1:Z=y;break;case 4:return H.label++,{value:y[1],done:!1};case 5:H.label++,j=y[1],y=[0];continue;case 7:y=H.ops.pop(),H.trys.pop();continue;default:if((Z=H.trys,!(Z=Z.length>0&&Z[Z.length-1]))&&(y[0]===6||y[0]===2)){H=0;continue}if(y[0]===3&&(!Z||y[1]>Z[0]&&y[1]<Z[3])){H.label=y[1];break}if(y[0]===6&&H.label<Z[1]){H.label=Z[1],Z=y;break}if(Z&&H.label<Z[2]){H.label=Z[2],H.ops.push(y);break}if(Z[2])H.ops.pop();H.trys.pop();continue}y=f.call(U,H)}catch(b){y=[6,b],j=0}finally{P=Z=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},O=function(U,f,H){if(U===void 0)U=document;if(f===void 0)f=M.g.CDN;var P=q.chartRenderAdapter.getElements(U);if(P.length>0)(0,I.G)("".concat(f,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){P.forEach(function(j){return V(void 0,void 0,void 0,function(){var Z,S,R;return F(this,function(h){switch(h.label){case 0:if(j.parentElement.classList.contains("vditor-wysiwyg__pre")||j.parentElement.classList.contains("vditor-ir__marker--pre"))return[2];if(Z=q.chartRenderAdapter.getCode(j).trim(),!Z)return[2];h.label=1;case 1:if(h.trys.push([1,3,,4]),j.getAttribute("data-processed")==="true")return[2];return[4,(0,$.Qf)(Z)];case 2:return S=h.sent(),echarts.init(j,H==="dark"?"dark":void 0).setOption(S),j.setAttribute("data-processed","true"),[3,4];case 3:return R=h.sent(),j.className="vditor-reset--error",j.innerHTML="echarts render error: <br>".concat(R),[3,4];case 4:return[2]}})})})})}},428:(m,W,N)=>{N.d(W,{O:()=>q});var M=N(105),I=N(145),q=function($,V){Array.from($.querySelectorAll("pre > code")).filter(function(F,O){if(F.parentElement.classList.contains("vditor-wysiwyg__pre")||F.parentElement.classList.contains("vditor-ir__marker--pre"))return!1;if(F.classList.contains("language-mermaid")||F.classList.contains("language-flowchart")||F.classList.contains("language-echarts")||F.classList.contains("language-mindmap")||F.classList.contains("language-plantuml")||F.classList.contains("language-markmap")||F.classList.contains("language-abc")||F.classList.contains("language-graphviz")||F.classList.contains("language-math")||F.classList.contains("language-smiles"))return!1;if(F.style.maxHeight.indexOf("px")>-1)return!1;if($.classList.contains("vditor-preview")&&O>5)return!1;return!0}).forEach(function(F){var O,U,f,H=F.innerText;if(F.classList.contains("highlight-chroma")){var P=F.cloneNode(!0);P.querySelectorAll(".highlight-ln").forEach(function(R){R.remove()}),H=P.innerText}else if(H.endsWith(`
`))H=H.substr(0,H.length-1);var j='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';if(!document.getElementById("vditorIconScript"))j='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>';var Z=document.createElement("div");Z.className="vditor-copy",Z.innerHTML='<span aria-label="'.concat(((O=window.VditorI18n)===null||O===void 0?void 0:O.copy)||"复制",`"
onmouseover="this.setAttribute('aria-label', '`).concat(((U=window.VditorI18n)===null||U===void 0?void 0:U.copy)||"复制",`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="event.stopPropagation();this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`).concat(((f=window.VditorI18n)===null||f===void 0?void 0:f.copied)||"已复制",`');this.previousElementSibling.blur()">`).concat(j,"</span>");var S=document.createElement("textarea");if(S.value=(0,M.X)(H),Z.insertAdjacentElement("afterbegin",S),V&&V.renderMenu)V.renderMenu(F,Z);F.before(Z),F.style.maxHeight=window.outerHeight-40+"px",F.insertAdjacentHTML("afterend",'<span style="position: absolute">'.concat(I.g.ZWSP,"</span>"))})}},325:(m,W,N)=>{N.d(W,{P:()=>$});var M=N(145),I=N(413),q=N(840),$=function(V,F){if(F===void 0)F=M.g.CDN;var O=q.flowchartRenderAdapter.getElements(V);if(O.length===0)return;(0,I.G)("".concat(F,"/dist/js/flowchart.js/flowchart.min.js"),"vditorFlowchartScript").then(function(){O.forEach(function(U){if(U.getAttribute("data-processed")==="true")return;var f=flowchart.parse(q.flowchartRenderAdapter.getCode(U));U.innerHTML="",f.drawSVG(U),U.setAttribute("data-processed","true")})})}},483:(m,W,N)=>{N.d(W,{v:()=>$});var M=N(145),I=N(413),q=N(840),$=function(V,F){if(F===void 0)F=M.g.CDN;var O=q.graphvizRenderAdapter.getElements(V);if(O.length===0)return;(0,I.G)("".concat(F,"/dist/js/graphviz/viz.js"),"vditorGraphVizScript").then(function(){O.forEach(function(U){var f=q.graphvizRenderAdapter.getCode(U);if(U.parentElement.classList.contains("vditor-wysiwyg__pre")||U.parentElement.classList.contains("vditor-ir__marker--pre"))return;if(U.getAttribute("data-processed")==="true"||f.trim()==="")return;try{var H=new Blob(["importScripts('".concat(document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js"),"');")],{type:"application/javascript"}),P=window.URL||window.webkitURL,j=P.createObjectURL(H),Z=new Worker(j);new Viz({worker:Z}).renderSVGElement(f).then(function(S){U.innerHTML=S.outerHTML}).catch(function(S){U.innerHTML="graphviz render error: <br>".concat(S),U.className="vditor-reset--error"})}catch(S){console.error("graphviz error",S)}U.setAttribute("data-processed","true")})})}},999:(m,W,N)=>{N.d(W,{s:()=>$});var M=N(145),I=N(413),q=N(290),$=function(V,F,O){if(F===void 0)F=document;if(O===void 0)O=M.g.CDN;var U=V.style;if(!M.g.CODE_THEME.includes(U))U="github";var f=document.getElementById("vditorHljsStyle"),H="".concat(O,"/dist/js/highlight.js/styles/").concat(U,".min.css");if(f&&f.getAttribute("href")!==H)f.remove();if((0,q.c)("".concat(O,"/dist/js/highlight.js/styles/").concat(U,".min.css"),"vditorHljsStyle"),V.enable===!1)return;var P=F.querySelectorAll("pre > code");if(P.length===0)return;(0,I.G)("".concat(O,"/dist/js/highlight.js/highlight.min.js?v=11.7.0"),"vditorHljsScript").then(function(){(0,I.G)("".concat(O,"/dist/js/highlight.js/third-languages.js?v=1.0.1"),"vditorHljsThirdScript").then(function(){F.querySelectorAll("pre > code").forEach(function(j){if(j.parentElement.classList.contains("vditor-ir__marker--pre")||j.parentElement.classList.contains("vditor-wysiwyg__pre"))return;if(j.classList.contains("language-mermaid")||j.classList.contains("language-flowchart")||j.classList.contains("language-echarts")||j.classList.contains("language-mindmap")||j.classList.contains("language-plantuml")||j.classList.contains("language-smiles")||j.classList.contains("language-abc")||j.classList.contains("language-graphviz")||j.classList.contains("language-math"))return;if(V.defaultLang!==""&&j.className.indexOf("language-")===-1)j.classList.add("language-"+V.defaultLang);var Z=j.className.replace("language-","");if(!window.hljs.getLanguage(Z))Z="plaintext";if(j.innerHTML=window.hljs.highlight(j.textContent,{language:Z,ignoreIllegals:!0}).value,j.classList.add("hljs"),!V.lineNumber)return;j.classList.add("vditor-linenumber");var S=j.querySelector(".vditor-linenumber__temp");if(!S)S=document.createElement("div"),S.className="vditor-linenumber__temp",j.insertAdjacentElement("beforeend",S);var R=getComputedStyle(j).whiteSpace,h=!1;if(R==="pre-wrap"||R==="pre-line")h=!0;var y="",b=j.textContent.split(/\r\n|\r|\n/g);b.pop(),b.map(function(E){var d="";if(h)S.textContent=E||`
`,d=' style="height:'.concat(S.getBoundingClientRect().height,'px"');y+="<span".concat(d,"></span>")}),S.style.display="none",y='<span class="vditor-linenumber__rows">'.concat(y,"</span>"),j.insertAdjacentHTML("beforeend",y)})})})}},11:(m,W,N)=>{N.d(W,{K:()=>O});var M=N(145),I=N(413),q=N(840),$={},V=function(U,f){var H=U.transform(f),P=Object.keys(H.features).filter(function(h){return!$[h]});P.forEach(function(h){$[h]=!0});var j=U.getAssets(P),Z=j.styles,S=j.scripts,R=window.markmap;if(Z)R.loadCSS(Z);if(S)R.loadJS(S);return H},F=function(U,f){var H=window.markmap,P=H.Transformer,j=H.Markmap,Z=H.deriveOptions,S=H.globalCSS,R=new P;U.innerHTML='<svg style="width:100%"></svg>';var h=U.firstChild,y=j.create(h,null),b=V(R,f),E=b.root,d=b.frontmatter,t=d===null||d===void 0?void 0:d.markmap,w1=Z(t);y.setData(E,w1),y.fit()},O=function(U,f){if(U===void 0)U=document;if(f===void 0)f=M.g.CDN;var H=q.markmapRenderAdapter.getElements(U);if(H.length===0)return;(0,I.G)("".concat(f,"/dist/js/markmap/markmap.min.js"),"vditorMarkerScript").then(function(){H.forEach(function(P){var j=q.markmapRenderAdapter.getCode(P);if(P.getAttribute("data-processed")==="true"||j.trim()==="")return;var Z=document.createElement("div");if(Z.className="language-markmap",P.parentNode.appendChild(Z),F(Z,j),P.parentNode.childNodes[0].nodeName=="CODE")P.parentNode.removeChild(P.parentNode.childNodes[0])})})}},472:(m,W,N)=>{N.d(W,{H:()=>F});var M=N(145),I=N(413),q=N(290),$=N(105),V=N(840),F=function(O,U){if(O===void 0)O=document;var f=V.mathRenderAdapter.getElements(O);if(f.length===0)return;var H={cdn:M.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(U&&U.math)U.math=Object.assign({},H.math,U.math);if(U=Object.assign({},H,U),U.math.engine==="KaTeX")(0,q.c)("".concat(U.cdn,"/dist/js/katex/katex.min.css?v=0.16.9"),"vditorKatexStyle"),(0,I.G)("".concat(U.cdn,"/dist/js/katex/katex.min.js?v=0.16.9"),"vditorKatexScript").then(function(){(0,I.G)("".concat(U.cdn,"/dist/js/katex/mhchem.min.js?v=0.16.9"),"vditorKatexChemScript").then(function(){f.forEach(function(Z){if(Z.parentElement.classList.contains("vditor-wysiwyg__pre")||Z.parentElement.classList.contains("vditor-ir__marker--pre"))return;if(Z.getAttribute("data-math"))return;var S=(0,$.X)(V.mathRenderAdapter.getCode(Z));Z.setAttribute("data-math",S);try{Z.innerHTML=katex.renderToString(S,{displayMode:Z.tagName==="DIV",output:"html",macros:U.math.macros})}catch(R){Z.innerHTML=R.message,Z.className="language-math vditor-reset--error"}Z.addEventListener("copy",function(R){R.stopPropagation(),R.preventDefault();var h=R.currentTarget.closest(".language-math");R.clipboardData.setData("text/html",h.innerHTML),R.clipboardData.setData("text/plain",h.getAttribute("data-math"))})})})});else if(U.math.engine==="MathJax"){var P=function(Z){if(Z.length===0)return;var S=0,R=Z[Z.length-1],h=function(){var y=Z[S++];y===R?y():y(h)};h()};if(!window.MathJax)window.MathJax={loader:{paths:{mathjax:"".concat(U.cdn,"/dist/js/mathjax")}},startup:{typeset:!1},tex:{macros:U.math.macros}},Object.assign(window.MathJax,U.math.mathJaxOptions);(0,I.J)("".concat(U.cdn,"/dist/js/mathjax/tex-svg-full.js"),"protyleMathJaxScript");var j=function(Z,S){var R=(0,$.X)(Z.textContent).trim(),h=window.MathJax.getMetricsFor(Z);h.display=Z.tagName==="DIV",window.MathJax.tex2svgPromise(R,h).then(function(y){Z.innerHTML="",Z.setAttribute("data-math",R),Z.append(y),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var b=y.querySelector('[data-mml-node="merror"]');if(b&&b.textContent.trim()!=="")Z.innerHTML=b.textContent.trim(),Z.className="vditor-reset--error";if(S)S()})};window.MathJax.startup.promise.then(function(){var Z=[],S=function(h){var y=f[h];if(!y.parentElement.classList.contains("vditor-wysiwyg__pre")&&!y.parentElement.classList.contains("vditor-ir__marker--pre")&&!y.getAttribute("data-math")&&(0,$.X)(y.textContent).trim())Z.push(function(b){if(h===f.length-1)j(y);else j(y,b)})};for(var R=0;R<f.length;R++)S(R);P(Z)})}}},280:(m,W,N)=>{N.d(W,{Y:()=>V});var M=N(494),I=function(F,O){F.insertAdjacentHTML("afterend",'<video controls="controls" src="'.concat(O,'"></video>')),F.remove()},q=function(F,O){F.insertAdjacentHTML("afterend",'<audio controls="controls" src="'.concat(O,'"></audio>')),F.remove()},$=function(F,O){var U=O.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),f=O.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),H=O.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),P=O.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),j=O.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),Z=O.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),S=O.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),R=O.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(U&&U[1].length===11)F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'.concat(U[1]+(U[2]?"?start="+U[2]:""),'"></iframe>')),F.remove();else if(f&&f[1])F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'.concat(f[1],'"></iframe>')),F.remove();else if(H&&H[1])F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='.concat(H[1],'"></iframe>')),F.remove();else if(P&&P[1])F.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`.concat(P[1],'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>')),F.remove();else if(j&&j[0])F.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`.concat(encodeURIComponent(j[0]),'"></iframe>')),F.remove();else if(Z&&Z[2])F.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`.concat(Z[2],'"></iframe>')),F.remove();else if(O.indexOf("bilibili.com")>-1&&(O.indexOf("bvid=")>-1||S&&S[1])){var h={bvid:(0,M.on)("bvid",O)||S&&S[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(O.startsWith("http")?O:"https:"+O).search.split("&").forEach(function(E,d){if(!E)return;if(d===0)E=E.substr(1);var t=E.split("=");h[t[0]]=t[1]});var y="https://player.bilibili.com/player.html?",b=Object.keys(h);b.forEach(function(E,d){if(y+="".concat(E,"=").concat(h[E]),d<b.length-1)y+="&"}),F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'.concat(y,'"></iframe>')),F.remove()}else if(R&&R[1])F.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'.concat(R[1],'"></iframe>')),F.remove()},V=function(F){if(!F)return;F.querySelectorAll("a").forEach(function(O){var U=O.getAttribute("href");if(!U)return;if(U.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/))I(O,U);else if(U.match(/^.+.(mp3|wav|flac)$/))q(O,U);else $(O,U)})}},637:(m,W,N)=>{N.d(W,{i:()=>O});var M=N(145),I=N(413),q=N(840),$=N(494),V=function(U,f,H,P){function j(Z){return Z instanceof H?Z:new H(function(S){S(Z)})}return new(H||(H=Promise))(function(Z,S){function R(b){try{y(P.next(b))}catch(E){S(E)}}function h(b){try{y(P.throw(b))}catch(E){S(E)}}function y(b){b.done?Z(b.value):j(b.value).then(R,h)}y((P=P.apply(U,f||[])).next())})},F=function(U,f){var H={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},P,j,Z,S;return S={next:R(0),throw:R(1),return:R(2)},typeof Symbol==="function"&&(S[Symbol.iterator]=function(){return this}),S;function R(y){return function(b){return h([y,b])}}function h(y){if(P)throw TypeError("Generator is already executing.");while(S&&(S=0,y[0]&&(H=0)),H)try{if(P=1,j&&(Z=y[0]&2?j.return:y[0]?j.throw||((Z=j.return)&&Z.call(j),0):j.next)&&!(Z=Z.call(j,y[1])).done)return Z;if(j=0,Z)y=[y[0]&2,Z.value];switch(y[0]){case 0:case 1:Z=y;break;case 4:return H.label++,{value:y[1],done:!1};case 5:H.label++,j=y[1],y=[0];continue;case 7:y=H.ops.pop(),H.trys.pop();continue;default:if((Z=H.trys,!(Z=Z.length>0&&Z[Z.length-1]))&&(y[0]===6||y[0]===2)){H=0;continue}if(y[0]===3&&(!Z||y[1]>Z[0]&&y[1]<Z[3])){H.label=y[1];break}if(y[0]===6&&H.label<Z[1]){H.label=Z[1],Z=y;break}if(Z&&H.label<Z[2]){H.label=Z[2],H.ops.push(y);break}if(Z[2])H.ops.pop();H.trys.pop();continue}y=f.call(U,H)}catch(b){y=[6,b],j=0}finally{P=Z=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},O=function(U,f,H){if(U===void 0)U=document;if(f===void 0)f=M.g.CDN;var P=q.mermaidRenderAdapter.getElements(U);if(P.length===0)return;(0,I.G)("".concat(f,"/dist/js/mermaid/mermaid.min.js?v=11.6.0"),"vditorMermaidScript").then(function(){var j={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};if(H==="dark")j.theme="dark";mermaid.initialize(j),P.forEach(function(Z){return V(void 0,void 0,void 0,function(){var S,R,h,y,b;return F(this,function(E){switch(E.label){case 0:if(S=q.mermaidRenderAdapter.getCode(Z),Z.getAttribute("data-processed")==="true"||S.trim()==="")return[2];R="mermaid"+(0,$.Wb)(),E.label=1;case 1:return E.trys.push([1,3,,4]),[4,mermaid.render(R,Z.textContent)];case 2:return h=E.sent(),Z.innerHTML=h.svg,[3,4];case 3:return y=E.sent(),b=document.querySelector("#"+R),Z.innerHTML="".concat(b.outerHTML,`<br>
<div style="text-align: left"><small>`).concat(y.message.replace(/\n/,"<br>"),"</small></div>"),b.parentElement.remove(),[3,4];case 4:return Z.setAttribute("data-processed","true"),[2]}})})})})}},194:(m,W,N)=>{N.d(W,{P:()=>$});var M=N(145),I=N(413),q=N(840),$=function(V,F,O){if(V===void 0)V=document;if(F===void 0)F=M.g.CDN;var U=q.mindmapRenderAdapter.getElements(V);if(U.length>0)(0,I.G)("".concat(F,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){U.forEach(function(f){if(f.parentElement.classList.contains("vditor-wysiwyg__pre")||f.parentElement.classList.contains("vditor-ir__marker--pre"))return;var H=q.mindmapRenderAdapter.getCode(f);if(!H)return;try{if(f.getAttribute("data-processed")==="true")return;echarts.init(f,O==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(H))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:0.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(P,j){var Z;if((Z=j===null||j===void 0?void 0:j.data)===null||Z===void 0?void 0:Z.children)return"circle";else return"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),f.setAttribute("data-processed","true")}catch(P){f.className="vditor-reset--error",f.innerHTML="mindmap render error: <br>".concat(P)}})})}},436:(m,W,N)=>{N.d(W,{k:()=>q});var M=N(771),I=N(472),q=function($,V,F){var O="",U=[];if(Array.from($.children).forEach(function(j,Z){if((0,M.W)(j)){if(F){var S=j.id.lastIndexOf("_");j.id=j.id.substring(0,S===-1?void 0:S)+"_"+Z}U.push(j.id),O+=j.outerHTML.replace("<wbr>","")}}),O==="")return V.innerHTML="","";var f=document.createElement("div");if(F){if(F.lute.SetToC(!0),F.currentMode==="wysiwyg"&&!F.preview.element.contains($))f.innerHTML=F.lute.SpinVditorDOM("<p>[ToC]</p>"+O);else if(F.currentMode==="ir"&&!F.preview.element.contains($))f.innerHTML=F.lute.SpinVditorIRDOM("<p>[ToC]</p>"+O);else f.innerHTML=F.lute.HTML2VditorDOM("<p>[ToC]</p>"+O);F.lute.SetToC(F.options.preview.markdown.toc)}else{V.classList.add("vditor-outline");var H=Lute.New();H.SetToC(!0),f.innerHTML=H.HTML2VditorDOM("<p>[ToC]</p>"+O)}var P=f.firstElementChild.querySelectorAll("li > span[data-target-id]");if(P.forEach(function(j,Z){if(j.nextElementSibling&&j.nextElementSibling.tagName==="UL"){var S="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";if(!document.getElementById("vditorIconScript"))S='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>';j.innerHTML="".concat(S,"<span>").concat(j.innerHTML,"</span>")}else j.innerHTML="<svg></svg><span>".concat(j.innerHTML,"</span>");j.setAttribute("data-target-id",U[Z])}),O=f.firstElementChild.innerHTML,P.length===0)return V.innerHTML="",O;if(V.innerHTML=O,F)(0,I.H)(V,{cdn:F.options.cdn,math:F.options.preview.math});return V.firstElementChild.addEventListener("click",function(j){var Z=j.target;while(Z&&!Z.isEqualNode(V)){if(Z.classList.contains("vditor-outline__action")){if(Z.classList.contains("vditor-outline__action--close"))Z.classList.remove("vditor-outline__action--close"),Z.parentElement.nextElementSibling.setAttribute("style","display:block");else Z.classList.add("vditor-outline__action--close"),Z.parentElement.nextElementSibling.setAttribute("style","display:none");j.preventDefault(),j.stopPropagation();break}else if(Z.getAttribute("data-target-id")){j.preventDefault(),j.stopPropagation();var S=document.getElementById(Z.getAttribute("data-target-id"));if(!S)return;if(F)if(F.options.height==="auto"){var R=S.offsetTop+F.element.offsetTop;if(!F.options.toolbarConfig.pin)R+=F.toolbar.element.offsetHeight;window.scrollTo(window.scrollX,R)}else{if(F.element.offsetTop<window.scrollY)window.scrollTo(window.scrollX,F.element.offsetTop);if(F.preview.element.contains($))$.parentElement.scrollTop=S.offsetTop;else $.scrollTop=S.offsetTop}else window.scrollTo(window.scrollX,S.offsetTop);break}Z=Z.parentElement}}),O}},229:(m,W,N)=>{N.d(W,{B:()=>$});var M=N(145),I=N(413),q=N(840),$=function(V,F){if(V===void 0)V=document;if(F===void 0)F=M.g.CDN;var O=q.plantumlRenderAdapter.getElements(V);if(O.length===0)return;(0,I.G)("".concat(F,"/dist/js/plantuml/plantuml-encoder.min.js"),"vditorPlantumlScript").then(function(){O.forEach(function(U){if(U.parentElement.classList.contains("vditor-wysiwyg__pre")||U.parentElement.classList.contains("vditor-ir__marker--pre"))return;var f=q.plantumlRenderAdapter.getCode(U).trim();if(!f)return;try{U.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'.concat(plantumlEncoder.encode(f),'"/>')}catch(H){U.className="vditor-reset--error",U.innerHTML="plantuml render error: <br>".concat(H)}})})}},214:(m,W,N)=>{N.d(W,{X:()=>M});var M=function(I){var q=Lute.New();if(q.PutEmojis(I.emojis),q.SetEmojiSite(I.emojiSite),q.SetHeadingAnchor(I.headingAnchor),q.SetInlineMathAllowDigitAfterOpenMarker(I.inlineMathDigit),q.SetAutoSpace(I.autoSpace),q.SetToC(I.toc),q.SetFootnotes(I.footnotes),q.SetFixTermTypo(I.fixTermTypo),q.SetVditorCodeBlockPreview(I.codeBlockPreview),q.SetVditorMathBlockPreview(I.mathBlockPreview),q.SetSanitize(I.sanitize),q.SetChineseParagraphBeginningSpace(I.paragraphBeginningSpace),q.SetRenderListStyle(I.listStyle),q.SetLinkBase(I.linkBase),q.SetLinkPrefix(I.linkPrefix),q.SetMark(I.mark),q.SetGFMAutoLink(I.gfmAutoLink),I.lazyLoadImage)q.SetImageLazyLoading(I.lazyLoadImage);return q}},190:(m,W,N)=>{N.d(W,{E:()=>M});var M=function(I,q,$){if(q===void 0)q="zh_CN";if($===void 0)$="classic";var V=I.getBoundingClientRect(),F=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'.concat($==="dark"?" vditor--dark":"",`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `).concat(window.VditorI18n.spin,`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`).concat(window.VditorI18n.close,`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `).concat(I.width,"px;height:").concat(I.height,"px;transform: translate3d(").concat(V.left,"px, ").concat(V.top-F,'px, 0)" src="').concat(I.getAttribute("src"),`">
    </div>
</div>`)),document.body.style.overflow="hidden";var O=document.querySelector(".vditor-img img"),U="translate3d(".concat(Math.max(0,window.innerWidth-I.naturalWidth)/2,"px, ").concat(Math.max(0,window.innerHeight-F-I.naturalHeight)/2,"px, 0)");setTimeout(function(){O.setAttribute("style","transition: transform .3s ease-in-out;transform: ".concat(U)),setTimeout(function(){O.parentElement.scrollTo((O.parentElement.scrollWidth-O.parentElement.clientWidth)/2,(O.parentElement.scrollHeight-O.parentElement.clientHeight)/2)},400)});var f=document.querySelector(".vditor-img__btn");f.addEventListener("click",function(){var H=parseInt(f.getAttribute("data-deg"),10)+90;if(H/90%2===1&&I.naturalWidth>O.parentElement.clientHeight)O.style.transform="translate3d(".concat(Math.max(0,window.innerWidth-I.naturalWidth)/2,"px, ").concat(I.naturalWidth/2-I.naturalHeight/2,"px, 0) rotateZ(").concat(H,"deg)");else O.style.transform="".concat(U," rotateZ(").concat(H,"deg)");f.setAttribute("data-deg",H.toString()),setTimeout(function(){O.parentElement.scrollTo((O.parentElement.scrollWidth-O.parentElement.clientWidth)/2,(O.parentElement.scrollHeight-O.parentElement.clientHeight)/2)},400)})}},580:(m,W,N)=>{N.d(W,{Y:()=>q});var M=N(145),I=N(290),q=function($,V){if(V===void 0)V=M.g.CDN;if(!M.g.CODE_THEME.includes($))$="github";var F=document.getElementById("vditorHljsStyle"),O="".concat(V,"/dist/js/highlight.js/styles/").concat($,".min.css");if(!F)(0,I.c)(O,"vditorHljsStyle");else if(F.getAttribute("href")!==O)F.remove(),(0,I.c)(O,"vditorHljsStyle")}},538:(m,W,N)=>{N.d(W,{Z:()=>I});var M=N(290),I=function(q,$){if(!q||!$)return;var V=document.getElementById("vditorContentTheme"),F="".concat($,"/").concat(q,".css");if(!V)(0,M.c)(F,"vditorContentTheme");else if(V.getAttribute("href")!==F)V.remove(),(0,M.c)(F,"vditorContentTheme")}},413:(m,W,N)=>{N.d(W,{J:()=>M,G:()=>I});var M=function(q,$){if(document.getElementById($))return!1;var V=new XMLHttpRequest;V.open("GET",q,!1),V.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),V.send("");var F=document.createElement("script");F.type="text/javascript",F.text=V.responseText,F.id=$,document.head.appendChild(F)},I=function(q,$){return new Promise(function(V,F){if(document.getElementById($))return V(!0),!1;var O=document.createElement("script");O.src=q,O.async=!0,document.head.appendChild(O),O.onerror=function(U){F(U)},O.onload=function(){if(document.getElementById($))return O.remove(),V(!0),!1;O.id=$,V(!0)}})}},290:(m,W,N)=>{N.d(W,{c:()=>M});var M=function(I,q){if(!document.getElementById(q)){var $=document.createElement("link");$.id=q,$.rel="stylesheet",$.type="text/css",$.href=I,document.getElementsByTagName("head")[0].appendChild($)}}},105:(m,W,N)=>{N.d(W,{X:()=>M});var M=function(I){return I.replace(/\u00a0/g," ")}},410:(m,W,N)=>{N.d(W,{G6:()=>M,vU:()=>I,pK:()=>q,Le:()=>$,yl:()=>V,ns:()=>F,i7:()=>O});var M=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},I=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},q=function(){try{return typeof localStorage<"u"}catch(U){return!1}},$=function(){if(navigator.userAgent.indexOf("iPhone")>-1)return"touchstart";else return"click"},V=function(U){if(navigator.platform.toUpperCase().indexOf("MAC")>=0){if(U.metaKey&&!U.ctrlKey)return!0;return!1}else{if(!U.metaKey&&U.ctrlKey)return!0;return!1}},F=function(U){if(/Mac/.test(navigator.platform)||navigator.platform==="iPhone"){if(U.indexOf("⇧")>-1&&I())U=U.replace(";",":").replace("=","+").replace("-","_")}else{if(U.startsWith("⌘"))U=U.replace("⌘","⌘+");else if(U.startsWith("⌥")&&U.substr(1,1)!=="⌘")U=U.replace("⌥","⌥+");else U=U.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+");if(U=U.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt"),U.indexOf("Shift")>-1)U=U.replace(";",":").replace("=","+").replace("-","_")}return U},O=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},494:(m,W,N)=>{N.d(W,{Wb:()=>M,on:()=>I,Qf:()=>q});var M=function(){return([1e7].toString()+-1000+-4000+-8000+-100000000000).replace(/[018]/g,function($){return(parseInt($,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt($,10)/4).toString(16)})},I=function($,V){if(V===void 0)V=window.location.search;var F=V.substring(V.indexOf("?")),O=F.indexOf("#"),U=new URLSearchParams(F.substring(0,O>=0?O:void 0));return U.get($)},q=function($){return Function('"use strict";return ('.concat($,")"))()}},106:(m,W,N)=>{N.d(W,{JQ:()=>I,E2:()=>$,O9:()=>V,a1:()=>F,F9:()=>O,lG:()=>U,fb:()=>f,DX:()=>H});var M=N(771),I=function(P,j){var Z=f(P,j),S=!1,R=!1;while(Z&&!Z.classList.contains("vditor-reset")&&!R)if(S=f(Z.parentElement,j),S)Z=S;else R=!0;return Z||!1},q=function(P,j,Z){var S=F(P,j,Z),R=!1,h=!1;while(S&&!S.classList.contains("vditor-reset")&&!h)if(R=F(S.parentElement,j,Z),R)S=R;else h=!0;return S||!1},$=function(P,j){var Z=(0,M.S)(P,j),S=!1,R=!1;while(Z&&!Z.classList.contains("vditor-reset")&&!R)if(S=(0,M.S)(Z.parentElement,j),S)Z=S;else R=!0;return Z||!1},V=function(P){var j=$(P,"UL"),Z=$(P,"OL"),S=j;if(Z&&(!j||j&&Z.contains(j)))S=Z;return S},F=function(P,j,Z){if(!P)return!1;if(P.nodeType===3)P=P.parentElement;var S=P,R=!1;while(S&&!R&&!S.classList.contains("vditor-reset"))if(S.getAttribute(j)===Z)R=!0;else S=S.parentElement;return R&&S},O=function(P){if(!P)return!1;if(P.nodeType===3)P=P.parentElement;var j=P,Z=!1,S=F(P,"data-block","0");if(S)return S;while(j&&!Z&&!j.classList.contains("vditor-reset"))if(j.tagName==="H1"||j.tagName==="H2"||j.tagName==="H3"||j.tagName==="H4"||j.tagName==="H5"||j.tagName==="H6"||j.tagName==="P"||j.tagName==="BLOCKQUOTE"||j.tagName==="OL"||j.tagName==="UL")Z=!0;else j=j.parentElement;return Z&&j},U=function(P,j){if(!P)return!1;if(P.nodeType===3)P=P.parentElement;var Z=P,S=!1;while(Z&&!S&&!Z.classList.contains("vditor-reset"))if(Z.nodeName===j)S=!0;else Z=Z.parentElement;return S&&Z},f=function(P,j){if(!P)return!1;if(P.nodeType===3)P=P.parentElement;var Z=P,S=!1;while(Z&&!S&&!Z.classList.contains("vditor-reset"))if(Z.classList.contains(j))S=!0;else Z=Z.parentElement;return S&&Z},H=function(P){while(P&&P.lastChild)P=P.lastChild;return P}},771:(m,W,N)=>{N.d(W,{S:()=>M,W:()=>I});var M=function(q,$){if(!q)return!1;if(q.nodeType===3)q=q.parentElement;var V=q,F=!1;while(V&&!F&&!V.classList.contains("vditor-reset"))if(V.nodeName.indexOf($)===0)F=!0;else V=V.parentElement;return F&&V},I=function(q){var $=M(q,"H");if($&&$.tagName.length===2&&$.tagName!=="HR")return $;return!1}},673:(m,W,N)=>{N.d(W,{T:()=>M});var M=function(){var I=[];for(var q=0;q<arguments.length;q++)I[q]=arguments[q];var $={},V=function(O){for(var U in O)if(O.hasOwnProperty(U))if(Object.prototype.toString.call(O[U])==="[object Object]")$[U]=M($[U],O[U]);else $[U]=O[U]};for(var F=0;F<I.length;F++)V(I[F]);return $}},810:(m,W,N)=>{N.d(W,{zh:()=>$,Ny:()=>V,Gb:()=>F,Hc:()=>O,im:()=>U,$j:()=>f,ib:()=>H,oC:()=>P});var M=N(145),I=N(410),q=N(106),$=function(j){var Z,S=j[j.currentMode].element;if(getSelection().rangeCount>0){if(Z=getSelection().getRangeAt(0),S.isEqualNode(Z.startContainer)||S.contains(Z.startContainer))return Z}if(j[j.currentMode].range)return j[j.currentMode].range;return S.focus(),Z=S.ownerDocument.createRange(),Z.setStart(S,0),Z.collapse(!0),Z},V=function(j){var Z=window.getSelection().getRangeAt(0);if(!j.contains(Z.startContainer)&&!(0,q.fb)(Z.startContainer,"vditor-panel--none"))return{left:0,top:0};var S=j.parentElement.getBoundingClientRect(),R;if(Z.getClientRects().length===0)if(Z.startContainer.nodeType===3){var h=Z.startContainer.parentElement;if(h&&h.getClientRects().length>0)R=h.getClientRects()[0];else return{left:0,top:0}}else{var y=Z.startContainer.children;if(y[Z.startOffset]&&y[Z.startOffset].getClientRects().length>0)R=y[Z.startOffset].getClientRects()[0];else if(Z.startContainer.childNodes.length>0){var b=Z.cloneRange();Z.selectNode(Z.startContainer.childNodes[Math.max(0,Z.startOffset-1)]),R=Z.getClientRects()[0],Z.setEnd(b.endContainer,b.endOffset),Z.setStart(b.startContainer,b.startOffset)}else R=Z.startContainer.getClientRects()[0];if(!R){var E=Z.startContainer.childNodes[Z.startOffset];while(!E.getClientRects||E.getClientRects&&E.getClientRects().length===0)E=E.parentElement;R=E.getClientRects()[0]}}else R=Z.getClientRects()[0];return{left:R.left-S.left,top:R.top-S.top}},F=function(j,Z){if(!Z)if(getSelection().rangeCount===0)return!1;else Z=getSelection().getRangeAt(0);var S=Z.commonAncestorContainer;return j.isEqualNode(S)||j.contains(S)},O=function(j){var Z=window.getSelection();Z.removeAllRanges(),Z.addRange(j)},U=function(j,Z,S){var R={end:0,start:0};if(!S){if(getSelection().rangeCount===0)return R;S=window.getSelection().getRangeAt(0)}if(F(Z,S)){var h=S.cloneRange();if(j.childNodes[0]&&j.childNodes[0].childNodes[0])h.setStart(j.childNodes[0].childNodes[0],0);else h.selectNodeContents(j);h.setEnd(S.startContainer,S.startOffset),R.start=h.toString().length,R.end=R.start+S.toString().length}return R},f=function(j,Z,S){var R=0,h=0,y=S.childNodes[h],b=!1,E=!1;j=Math.max(0,j),Z=Math.max(0,Z);var d=S.ownerDocument.createRange();d.setStart(y||S,0),d.collapse(!0);while(!E&&y){var t=R+y.textContent.length;if(!b&&j>=R&&j<=t){if(j===0)d.setStart(y,0);else if(y.childNodes[0].nodeType===3)d.setStart(y.childNodes[0],j-R);else if(y.nextSibling)d.setStartBefore(y.nextSibling);else d.setStartAfter(y);if(b=!0,j===Z){E=!0;break}}if(b&&Z>=R&&Z<=t){if(Z===0)d.setEnd(y,0);else if(y.childNodes[0].nodeType===3)d.setEnd(y.childNodes[0],Z-R);else if(y.nextSibling)d.setEndBefore(y.nextSibling);else d.setEndAfter(y);E=!0}R=t,y=S.childNodes[++h]}if(!E&&S.childNodes[h-1])d.setStartBefore(S.childNodes[h-1]);return O(d),d},H=function(j,Z){var S=j.querySelector("wbr");if(!S)return;if(!S.previousElementSibling)if(S.previousSibling)Z.setStart(S.previousSibling,S.previousSibling.textContent.length);else if(S.nextSibling)if(S.nextSibling.nodeType===3)Z.setStart(S.nextSibling,0);else Z.setStartBefore(S.nextSibling);else Z.setStart(S.parentElement,0);else if(S.previousElementSibling.isSameNode(S.previousSibling))if(S.previousElementSibling.lastChild){if(Z.setStartBefore(S),Z.collapse(!0),O(Z),(0,I.i7)()&&(S.previousElementSibling.tagName==="EM"||S.previousElementSibling.tagName==="STRONG"||S.previousElementSibling.tagName==="S"))Z.insertNode(document.createTextNode(M.g.ZWSP)),Z.collapse(!1);S.remove();return}else Z.setStartAfter(S.previousElementSibling);else Z.setStart(S.previousSibling,S.previousSibling.textContent.length);Z.collapse(!0),S.remove(),O(Z)},P=function(j,Z){var S=document.createElement("div");S.innerHTML=j;var R=S.querySelectorAll("p");if(R.length===1&&!R[0].previousSibling&&!R[0].nextSibling&&Z[Z.currentMode].element.children.length>0&&S.firstElementChild.tagName==="P")j=R[0].innerHTML.trim();var h=document.createElement("div");h.innerHTML=j;var y=$(Z);if(y.toString()!=="")Z[Z.currentMode].preventInput=!0,document.execCommand("delete",!1,"");if(h.firstElementChild&&h.firstElementChild.getAttribute("data-block")==="0"){h.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var b=(0,q.F9)(y.startContainer);if(!b)Z[Z.currentMode].element.insertAdjacentHTML("beforeend",h.innerHTML);else{var E=(0,q.lG)(y.startContainer,"LI");if(E&&h.firstElementChild.tagName==="UL")E.insertAdjacentHTML("afterend",h.firstElementChild.innerHTML);else b.insertAdjacentHTML("afterend",h.innerHTML)}H(Z[Z.currentMode].element,y)}else{var d=document.createElement("template");d.innerHTML=j,y.insertNode(d.content.cloneNode(!0)),y.collapse(!1),O(y)}}}},K1={};function v(m){var W=K1[m];if(W!==void 0)return W.exports;var N=K1[m]={exports:{}};return W1[m](N,N.exports,v),N.exports}(()=>{v.d=(m,W)=>{for(var N in W)if(v.o(W,N)&&!v.o(m,N))Object.defineProperty(m,N,{enumerable:!0,get:W[N]})}})(),(()=>{v.o=(m,W)=>Object.prototype.hasOwnProperty.call(m,W)})(),(()=>{v.r=(m)=>{if(typeof Symbol<"u"&&Symbol.toStringTag)Object.defineProperty(m,Symbol.toStringTag,{value:"Module"});Object.defineProperty(m,"__esModule",{value:!0})}})();var L1={};return(()=>{v.d(L1,{default:()=>Pw});var m=v(408),W=v(145),N=v(105),M=function(w){if(w.currentMode==="sv")return(0,N.X)("".concat(w.sv.element.textContent,`
`).replace(/\n\n$/,`
`));else if(w.currentMode==="wysiwyg")return w.lute.VditorDOM2Md(w.wysiwyg.element.innerHTML);else if(w.currentMode==="ir")return w.lute.VditorIRDOM2Md(w.ir.element.innerHTML);return""},I=v(413),q=function(){function w(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return w.prototype.renderEchart=function(z){var A=this;if(z.devtools.element.style.display!=="block")return;(0,I.G)("".concat(z.options.cdn,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){if(!A.ASTChart)A.ASTChart=echarts.init(z.devtools.element.lastElementChild);try{A.element.lastElementChild.style.display="block",A.element.firstElementChild.innerHTML="",A.ASTChart.setOption({series:[{data:JSON.parse(z.lute.RenderEChartsJSON(M(z))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),A.ASTChart.resize()}catch(G){A.element.lastElementChild.style.display="none",A.element.firstElementChild.innerHTML=G}})},w}(),$=v(410),V=function(w,z){z.forEach(function(A){if(!w[A])return;var G=w[A].children[0];if(G&&G.classList.contains("vditor-menu--current"))G.classList.remove("vditor-menu--current")})},F=function(w,z){z.forEach(function(A){if(!w[A])return;var G=w[A].children[0];if(G&&!G.classList.contains("vditor-menu--current"))G.classList.add("vditor-menu--current")})},O=function(w,z){z.forEach(function(A){if(!w[A])return;var G=w[A].children[0];if(G&&G.classList.contains(W.g.CLASS_MENU_DISABLED))G.classList.remove(W.g.CLASS_MENU_DISABLED)})},U=function(w,z){z.forEach(function(A){if(!w[A])return;var G=w[A].children[0];if(G&&!G.classList.contains(W.g.CLASS_MENU_DISABLED))G.classList.add(W.g.CLASS_MENU_DISABLED)})},f=function(w,z){z.forEach(function(A){if(!w[A])return;if(w[A])w[A].style.display="none"})},H=function(w,z){z.forEach(function(A){if(!w[A])return;if(w[A])w[A].style.display="block"})},P=function(w,z,A){if(z.includes("subToolbar")){if(w.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(G){if(A&&G.isEqualNode(A))return;G.style.display="none"}),w.toolbar.elements.emoji)w.toolbar.elements.emoji.lastElementChild.style.display="none"}if(z.includes("hint"))w.hint.element.style.display="none";if(w.wysiwyg.popover&&z.includes("popover"))w.wysiwyg.popover.style.display="none"},j=function(w,z,A,G){A.addEventListener((0,$.Le)(),function(Q){if(Q.preventDefault(),Q.stopPropagation(),A.classList.contains(W.g.CLASS_MENU_DISABLED))return;if(w.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(D){D.classList.remove("vditor-hint--current")}),z.style.display==="block")z.style.display="none";else{if(P(w,["subToolbar","hint","popover"],A.parentElement.parentElement),!A.classList.contains("vditor-tooltipped"))A.classList.add("vditor-hint--current");if(z.style.display="block",w.toolbar.element.getBoundingClientRect().right-A.getBoundingClientRect().right<250)z.classList.add("vditor-panel--left");else z.classList.remove("vditor-panel--left")}})},Z=v(106),S=v(771),R=function(w,z,A,G){if(G)console.log("".concat(w," - ").concat(A,": ").concat(z))},h=v(135),y=v(775),b=v(428),E=v(325),d=v(483),t=v(999),w1=v(472),Z1=v(637),f1=v(11),O1=v(194),q1=v(229),H1=v(825),M1=function(w,z,A){if(A===void 0)A="sv";var G=document.createElement("div");G.innerHTML=w;var Q=!1;if(G.childElementCount===1&&G.lastElementChild.style.fontFamily.indexOf("monospace")>-1)Q=!0;var D=G.querySelectorAll("pre");if(G.childElementCount===1&&D.length===1&&D[0].className!=="vditor-wysiwyg"&&D[0].className!=="vditor-sv")Q=!0;if(w.indexOf(`
<p class="p1">`)===0)Q=!0;if(G.childElementCount===1&&G.firstElementChild.tagName==="TABLE"&&G.querySelector(".line-number")&&G.querySelector(".line-content"))Q=!0;if(Q){var X=z||w;if(/\n/.test(X)||D.length===1){if(A==="wysiwyg")return'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'.concat(X.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"<wbr></code></pre></div>");return"\n```\n"+X.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```"}else{if(A==="wysiwyg")return"<code>".concat(X.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"</code><wbr>");return"`".concat(X,"`")}}return!1},N1=function(w,z){if(!w)return;if(w.parentElement.getAttribute("data-type")==="html-block"){w.setAttribute("data-render","1");return}var A=w.firstElementChild.className.replace("language-","");if(A==="abc")(0,h.Q)(w,z.options.cdn);else if(A==="mermaid")(0,Z1.i)(w,z.options.cdn,z.options.theme);else if(A==="smiles")(0,H1.J)(w,z.options.cdn,z.options.theme);else if(A==="markmap")(0,f1.K)(w,z.options.cdn);else if(A==="flowchart")(0,E.P)(w,z.options.cdn);else if(A==="echarts")(0,y.p)(w,z.options.cdn,z.options.theme);else if(A==="mindmap")(0,O1.P)(w,z.options.cdn,z.options.theme);else if(A==="plantuml")(0,q1.B)(w,z.options.cdn);else if(A==="graphviz")(0,d.v)(w,z.options.cdn);else if(A==="math")(0,w1.H)(w,{cdn:z.options.cdn,math:z.options.preview.math});else{var G=z.options.customRenders.find(function(Q){if(Q.language===A)return Q.render(w,z),!0});if(!G)(0,t.s)(Object.assign({},z.options.preview.hljs),w,z.options.cdn),(0,b.O)(w,z.options.preview.hljs)}w.setAttribute("data-render","1")},L=v(810),m1=function(w){if(w.currentMode==="sv")return;var z=w[w.currentMode].element,A=w.outline.render(w);if(A==="")A="[ToC]";z.querySelectorAll('[data-type="toc-block"]').forEach(function(G){G.innerHTML=A,(0,w1.H)(G,{cdn:w.options.cdn,math:w.options.preview.math})})},W0=function(w,z){var A=(0,Z.lG)(w.target,"SPAN");if(A&&(0,Z.fb)(A,"vditor-toc")){var G=z[z.currentMode].element.querySelector("#"+A.getAttribute("data-target-id"));if(G)if(z.options.height==="auto"){var Q=G.offsetTop+z.element.offsetTop;if(!z.options.toolbarConfig.pin)Q+=z.toolbar.element.offsetHeight;window.scrollTo(window.scrollX,Q)}else{if(z.element.offsetTop<window.scrollY)window.scrollTo(window.scrollX,z.element.offsetTop);z[z.currentMode].element.scrollTop=G.offsetTop}return}},f0=function(w,z,A,G){if(w.previousElementSibling&&w.previousElementSibling.classList.contains("vditor-toc")){if(A.key==="Backspace"&&(0,L.im)(w,z[z.currentMode].element,G).start===0)return w.previousElementSibling.remove(),e(z),!0;if(D0(z,A,G,w,w.previousElementSibling))return!0}if(w.nextElementSibling&&w.nextElementSibling.classList.contains("vditor-toc")){if(A.key==="Delete"&&(0,L.im)(w,z[z.currentMode].element,G).start>=w.textContent.trimRight().length)return w.nextElementSibling.remove(),e(z),!0;if(K0(z,A,G,w,w.nextElementSibling))return!0}if(A.key==="Backspace"||A.key==="Delete"){var Q=(0,Z.fb)(G.startContainer,"vditor-toc");if(Q)return Q.remove(),e(z),!0}},i1=function(w,z,A,G){if(A===void 0)A=!1;var Q=(0,Z.F9)(z.startContainer);if(Q&&!A&&Q.getAttribute("data-type")!=="code-block"){if(o0(Q.innerHTML)&&Q.previousElementSibling||r0(Q.innerHTML))return;var D=(0,L.im)(Q,w.ir.element,z).start,X=!0;for(var Y=D-1;Y>Q.textContent.substr(0,D).lastIndexOf(`
`);Y--)if(Q.textContent.charAt(Y)!==" "&&Q.textContent.charAt(Y)!=="\t"){X=!1;break}if(D===0)X=!1;var K=!0;for(var Y=D-1;Y<Q.textContent.length;Y++)if(Q.textContent.charAt(Y)!==" "&&Q.textContent.charAt(Y)!==`
`){K=!1;break}if(X){if(typeof w.options.input==="function")w.options.input(M(w));return}if(K&&/^#{1,6} $/.test(Q.textContent))K=!1;if(K){var J=(0,Z.fb)(z.startContainer,"vditor-ir__marker");if(J);else{var B=z.startContainer.previousSibling;if(B&&B.nodeType!==3&&B.classList.contains("vditor-ir__node--expand"))B.classList.remove("vditor-ir__node--expand");if(typeof w.options.input==="function")w.options.input(M(w));return}}}if(w.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(z1){z1.classList.remove("vditor-ir__node--expand")}),!Q)Q=w.ir.element;if(!Q.querySelector("wbr")){var x=(0,Z.fb)(z.startContainer,"vditor-ir__preview");if(x)x.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>");else z.insertNode(document.createElement("wbr"))}if(Q.querySelectorAll("[style]").forEach(function(z1){z1.removeAttribute("style")}),Q.getAttribute("data-type")==="link-ref-defs-block")Q=w.ir.element;var _=Q.isEqualNode(w.ir.element),C=(0,Z.a1)(Q,"data-type","footnotes-block"),T="";if(!_){var p=(0,S.S)(z.startContainer,"BLOCKQUOTE"),u=(0,Z.O9)(z.startContainer);if(u)Q=u;if(p&&(!u||u&&!p.contains(u)))Q=p;if(C)Q=C;if(T=Q.outerHTML,Q.tagName==="UL"||Q.tagName==="OL"){var{previousElementSibling:k,nextElementSibling:i}=Q;if(k&&(k.tagName==="UL"||k.tagName==="OL"))T=k.outerHTML+T,k.remove();if(i&&(i.tagName==="UL"||i.tagName==="OL"))T=T+i.outerHTML,i.remove();T=T.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else if(Q.previousElementSibling&&Q.previousElementSibling.textContent.replace(W.g.ZWSP,"")!==""&&G&&G.inputType==="insertParagraph")T=Q.previousElementSibling.outerHTML+T,Q.previousElementSibling.remove();if(!Q.innerText.startsWith("```"))w.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(z1){if(z1&&!Q.isEqualNode(z1))T+=z1.outerHTML,z1.remove()}),w.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(z1){if(z1&&!Q.isEqualNode(z1))T+=z1.outerHTML,z1.remove()})}else T=Q.innerHTML;if(R("SpinVditorIRDOM",T,"argument",w.options.debugger),T=w.lute.SpinVditorIRDOM(T),R("SpinVditorIRDOM",T,"result",w.options.debugger),_)Q.innerHTML=T;else if(Q.outerHTML=T,C){var a=(0,Z.a1)(w.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(a){var r=a.textContent,D1=r.substring(1,r.indexOf("]:")),G1=w.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(D1,'"]'));if(G1)G1.setAttribute("aria-label",r.substr(D1.length+3).trim().substr(0,24))}}var Y1,T1=w.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");if(T1.forEach(function(z1,k1){if(k1===0)Y1=z1;else Y1.insertAdjacentHTML("beforeend",z1.innerHTML),z1.remove()}),T1.length>0)w.ir.element.insertAdjacentElement("beforeend",T1[0]);var R1,C1=w.ir.element.querySelectorAll("[data-type='footnotes-block']");if(C1.forEach(function(z1,k1){if(k1===0)R1=z1;else R1.insertAdjacentHTML("beforeend",z1.innerHTML),z1.remove()}),C1.length>0)w.ir.element.insertAdjacentElement("beforeend",C1[0]);(0,L.ib)(w.ir.element,z),w.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(z1){N1(z1,w)}),m1(w),r1(w,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},c=function(w,z){if(w==="")return!1;if(w.indexOf("⇧")===-1&&w.indexOf("⌘")===-1&&w.indexOf("⌥")===-1){if(!(0,$.yl)(z)&&!z.altKey&&!z.shiftKey&&z.code===w)return!0;return!1}if(w==="⇧Tab"){if(!(0,$.yl)(z)&&!z.altKey&&z.shiftKey&&z.code==="Tab")return!0;return!1}var A=w.split("");if(w.startsWith("⌥")){var G=A.length===3?A[2]:A[1];if((A.length===3?(0,$.yl)(z):!(0,$.yl)(z))&&z.altKey&&!z.shiftKey&&z.code===(/^[0-9]$/.test(G)?"Digit":"Key")+G)return!0;return!1}if(w==="⌘Enter")A=["⌘","Enter"];var Q=A.length>2&&A[0]==="⇧",D=Q?A[2]:A[1];if(Q&&((0,$.vU)()||!/Mac/.test(navigator.platform))){if(D==="-")D="_";else if(D==="=")D="+"}if((0,$.yl)(z)&&z.key.toLowerCase()===D.toLowerCase()&&!z.altKey&&(!Q&&!z.shiftKey||Q&&z.shiftKey))return!0;return!1},Q1=function(w){var z=w.startContainer;if(z.nodeType===3&&z.nodeValue.length!==w.startOffset)return!1;var A=z.nextSibling;while(A&&A.textContent==="")A=A.nextSibling;if(!A){var G=(0,Z.fb)(z,"vditor-ir__marker");if(G&&!G.nextSibling){var Q=z.parentElement.parentElement.nextSibling;if(Q&&Q.nodeType!==3&&Q.classList.contains("vditor-ir__node"))return Q}return!1}else if(A&&A.nodeType!==3&&A.classList.contains("vditor-ir__node")&&!A.getAttribute("data-block"))return A;return!1},s=function(w){var z=w.startContainer,A=z.previousSibling;if(z.nodeType===3&&w.startOffset===0&&A&&A.nodeType!==3&&A.classList.contains("vditor-ir__node")&&!A.getAttribute("data-block"))return A;return!1},g=function(w,z){z.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(X){X.classList.remove("vditor-ir__node--expand")});var A=(0,Z.JQ)(w.startContainer,"vditor-ir__node"),G=!w.collapsed&&(0,Z.JQ)(w.endContainer,"vditor-ir__node");if(!w.collapsed&&(!A||A!==G))return;if(A)A.classList.add("vditor-ir__node--expand"),A.classList.remove("vditor-ir__node--hidden"),(0,L.Hc)(w);var Q=Q1(w);if(Q){Q.classList.add("vditor-ir__node--expand"),Q.classList.remove("vditor-ir__node--hidden");return}var D=s(w);if(D){D.classList.add("vditor-ir__node--expand"),D.classList.remove("vditor-ir__node--hidden");return}},P1=function(w,z){if(w.ir.composingLock=z.isComposing,z.isComposing)return!1;if(z.key.indexOf("Arrow")===-1&&z.key!=="Meta"&&z.key!=="Control"&&z.key!=="Alt"&&z.key!=="Shift"&&z.key!=="CapsLock"&&z.key!=="Escape"&&!/^F\d{1,2}$/.test(z.key))w.undo.recordFirstPosition(w,z);var A=(0,L.zh)(w),G=A.startContainer;if(!P5(z,w,G))return!1;if(j5(A,w,z),C5(A),z.key!=="Enter"&&z.key!=="Tab"&&z.key!=="Backspace"&&z.key.indexOf("Arrow")===-1&&!(0,$.yl)(z)&&z.key!=="Escape"&&z.key!=="Delete")return!1;var Q=(0,Z.a1)(G,"data-newline","1");if(!(0,$.yl)(z)&&!z.altKey&&!z.shiftKey&&z.key==="Enter"&&Q&&A.startOffset<Q.textContent.length){var D=Q.previousElementSibling;if(D)A.insertNode(document.createTextNode(D.textContent)),A.collapse(!1);var X=Q.nextSibling;if(X)A.insertNode(document.createTextNode(X.textContent)),A.collapse(!0)}var Y=(0,Z.lG)(G,"P");if(H5(z,w,Y,A))return!0;if(B5(A,w,Y,z))return!0;if(M5(w,A,z,Y))return!0;var K=(0,Z.fb)(G,"vditor-ir__marker--pre");if(K&&K.tagName==="PRE"){var J=K.firstChild;if(R5(w,z,K,A))return!0;if((J.getAttribute("data-type")==="math-block"||J.getAttribute("data-type")==="html-block")&&D0(w,z,A,J,K.parentElement))return!0;if(K0(w,z,A,J,K.parentElement))return!0}var B=(0,Z.a1)(G,"data-type","code-block-info");if(B){if(z.key==="Enter"||z.key==="Tab")return A.selectNodeContents(B.nextElementSibling.firstChild),A.collapse(!0),z.preventDefault(),P(w,["hint"]),!0;if(z.key==="Backspace"){var x=(0,L.im)(B,w.ir.element).start;if(x===1)A.setStart(G,0);if(x===2)w.hint.recentLanguage=""}if(D0(w,z,A,B,B.parentElement))return P(w,["hint"]),!0}var _=(0,Z.lG)(G,"TD")||(0,Z.lG)(G,"TH");if(z.key.indexOf("Arrow")>-1&&_){var C=w8(_);if(C&&D0(w,z,A,_,C))return!0;var T=z8(_);if(T&&K0(w,z,A,_,T))return!0}if(I5(w,z,A))return!0;if(h5(w,A,z))return!0;if(v0(w,A,z))return!0;var p=(0,S.W)(G);if(p){if(c("⌘=",z)){var u=p.querySelector(".vditor-ir__marker--heading");if(u&&u.textContent.trim().length>1)O0(w,u.textContent.substr(1));return z.preventDefault(),!0}if(c("⌘-",z)){var u=p.querySelector(".vditor-ir__marker--heading");if(u&&u.textContent.trim().length<6)O0(w,u.textContent.trim()+"# ");return z.preventDefault(),!0}}var k=(0,Z.F9)(G);if(z.key==="Backspace"&&!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey&&A.toString()===""){if(T5(w,A,z,Y))return!0;if(k&&k.previousElementSibling&&k.tagName!=="UL"&&k.tagName!=="OL"&&(k.previousElementSibling.getAttribute("data-type")==="code-block"||k.previousElementSibling.getAttribute("data-type")==="math-block")){var i=(0,L.im)(k,w.ir.element,A).start;if(i===0||i===1&&k.innerText.startsWith(W.g.ZWSP)){if(A.selectNodeContents(k.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),A.collapse(!1),g(A,w),k.textContent.trim().replace(W.g.ZWSP,"")==="")k.remove(),r1(w);return z.preventDefault(),!0}}if(p){var a=p.firstElementChild.textContent.length;if((0,L.im)(p,w.ir.element).start===a&&a!==0)A.setStart(p.firstElementChild.firstChild,a-1),A.collapse(!0),(0,L.Hc)(A)}}if((z.key==="ArrowUp"||z.key==="ArrowDown")&&k){if(k.querySelectorAll(".vditor-ir__node").forEach(function(r){if(!r.contains(G))r.classList.add("vditor-ir__node--hidden")}),k5(z,k,A))return!0}if(W5(A,z.key),k&&f0(k,w,z,A))return z.preventDefault(),!0;return!1},o=v(190),S1=function(w,z){w.querySelectorAll("[data-type=footnotes-link]").forEach(function(A){var G=A.parentElement,Q=G.nextSibling;while(Q)if(Q.textContent.startsWith("    ")){var D=Q;D.childNodes.forEach(function(X){G.append(X.cloneNode(!0))}),Q=Q.nextSibling,D.remove()}else break;z&&z(G)})},X1=function(w,z){var A,G=getSelection().getRangeAt(0).cloneRange(),Q=G.startContainer;if(G.startContainer.nodeType!==3&&G.startContainer.tagName==="DIV")Q=G.startContainer.childNodes[G.startOffset-1];var D=(0,Z.a1)(Q,"data-block","0");if(D&&z&&(z.inputType==="deleteContentBackward"||z.data===" ")){var X=(0,L.im)(D,w.sv.element,G).start,Y=!0;for(var K=X-1;K>D.textContent.substr(0,X).lastIndexOf(`
`);K--)if(D.textContent.charAt(K)!==" "&&D.textContent.charAt(K)!=="\t"){Y=!1;break}if(X===0)Y=!1;if(Y){y1(w);return}if(z.inputType==="deleteContentBackward"){var J=(0,Z.a1)(Q,"data-type","code-block-open-marker")||(0,Z.a1)(Q,"data-type","code-block-close-marker");if(J){if(J.getAttribute("data-type")==="code-block-close-marker"){var B=H0(Q,"code-block-open-marker");if(B){B.textContent=J.textContent,y1(w);return}}if(J.getAttribute("data-type")==="code-block-open-marker"){var B=H0(Q,"code-block-close-marker",!1);if(B){B.textContent=J.textContent,y1(w);return}}}var x=(0,Z.a1)(Q,"data-type","math-block-open-marker");if(x){var _=x.nextElementSibling.nextElementSibling;if(_&&_.getAttribute("data-type")==="math-block-close-marker")_.remove(),y1(w);return}D.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(k){if(k.textContent.length===1)k.remove()}),D.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(k){if(k.textContent.length===1)k.remove()});var C=(0,Z.a1)(Q,"data-type","heading-marker");if(C&&C.textContent.indexOf("#")===-1){y1(w);return}}if((z.data===" "||z.inputType==="deleteContentBackward")&&((0,Z.a1)(Q,"data-type","padding")||(0,Z.a1)(Q,"data-type","li-marker")||(0,Z.a1)(Q,"data-type","task-marker")||(0,Z.a1)(Q,"data-type","blockquote-marker"))){y1(w);return}}if(D&&D.textContent.trimRight()==="$$"){y1(w);return}if(!D)D=w.sv.element;if(((A=D.firstElementChild)===null||A===void 0?void 0:A.getAttribute("data-type"))==="link-ref-defs-block")D=w.sv.element;if((0,Z.a1)(Q,"data-type","footnotes-link"))D=w.sv.element;if(D.textContent.indexOf(Lute.Caret)===-1)G.insertNode(document.createTextNode(Lute.Caret));D.querySelectorAll("[style]").forEach(function(k){k.removeAttribute("style")}),D.querySelectorAll("font").forEach(function(k){k.outerHTML=k.innerHTML});var T=D.textContent,p=D.isEqualNode(w.sv.element);if(p)T=D.textContent;else{if(D.previousElementSibling)T=D.previousElementSibling.textContent+T,D.previousElementSibling.remove();if(D.previousElementSibling&&T.indexOf(`---
`)===0)T=D.previousElementSibling.textContent+T,D.previousElementSibling.remove();var u="";w.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(k,i){if(k&&!D.isEqualNode(k.parentElement))u+=k.parentElement.textContent+`
`,k.parentElement.remove()}),w.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(k,i){if(k&&!D.isEqualNode(k.parentElement))u+=k.parentElement.textContent+`
`,k.parentElement.remove()}),T=u+T}if(T=Y5(T,w),p)D.innerHTML=T;else D.outerHTML=T;w.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(k){w.sv.element.insertAdjacentElement("beforeend",k.parentElement)}),S1(w.sv.element,function(k){w.sv.element.insertAdjacentElement("beforeend",k)}),(0,L.ib)(w.sv.element,G),B1(w),y1(w,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},I1=function(w,z){var A,G,Q,D,X;if(w.sv.composingLock=z.isComposing,z.isComposing)return!1;if(z.key.indexOf("Arrow")===-1&&z.key!=="Meta"&&z.key!=="Control"&&z.key!=="Alt"&&z.key!=="Shift"&&z.key!=="CapsLock"&&z.key!=="Escape"&&!/^F\d{1,2}$/.test(z.key))w.undo.recordFirstPosition(w,z);if(z.key!=="Enter"&&z.key!=="Tab"&&z.key!=="Backspace"&&z.key.indexOf("Arrow")===-1&&!(0,$.yl)(z)&&z.key!=="Escape")return!1;var Y=(0,L.zh)(w),K=Y.startContainer;if(Y.startContainer.nodeType!==3&&Y.startContainer.tagName==="DIV")K=Y.startContainer.childNodes[Y.startOffset-1];var J=(0,Z.a1)(K,"data-type","text"),B=(0,Z.a1)(K,"data-type","blockquote-marker");if(!B&&Y.startOffset===0&&J&&J.previousElementSibling&&J.previousElementSibling.getAttribute("data-type")==="blockquote-marker")B=J.previousElementSibling;if(B){if(z.key==="Enter"&&!(0,$.yl)(z)&&!z.altKey&&B.nextElementSibling.textContent.trim()===""&&(0,L.im)(B,w.sv.element,Y).start===B.textContent.length){if(((A=B.previousElementSibling)===null||A===void 0?void 0:A.getAttribute("data-type"))==="padding")B.previousElementSibling.setAttribute("data-action","enter-remove");return B.remove(),y1(w),z.preventDefault(),!0}}var x=(0,Z.a1)(K,"data-type","li-marker"),_=(0,Z.a1)(K,"data-type","task-marker"),C=x;if(!C){if(_&&_.nextElementSibling.getAttribute("data-type")!=="task-marker")C=_}if(!C&&Y.startOffset===0&&J&&J.previousElementSibling&&(J.previousElementSibling.getAttribute("data-type")==="li-marker"||J.previousElementSibling.getAttribute("data-type")==="task-marker"))C=J.previousElementSibling;if(C){var T=(0,L.im)(C,w.sv.element,Y).start,p=C.getAttribute("data-type")==="task-marker",u=C;if(p)u=C.previousElementSibling.previousElementSibling.previousElementSibling;if(T===C.textContent.length){if(z.key==="Enter"&&!(0,$.yl)(z)&&!z.altKey&&!z.shiftKey&&C.nextElementSibling.textContent.trim()===""){if(((G=u.previousElementSibling)===null||G===void 0?void 0:G.getAttribute("data-type"))==="padding")u.previousElementSibling.remove(),X1(w);else{if(p)u.remove(),C.previousElementSibling.previousElementSibling.remove(),C.previousElementSibling.remove();C.nextElementSibling.remove(),C.remove(),y1(w)}return z.preventDefault(),!0}if(z.key==="Tab"){if(z.shiftKey){if(u.previousElementSibling.getAttribute("data-type")==="padding")u.previousElementSibling.remove()}else u.insertAdjacentHTML("beforebegin",'<span data-type="padding">'.concat(u.textContent.replace(/\S/g," "),"</span>"));if(/^\d/.test(u.textContent))u.textContent=u.textContent.replace(/^\d{1,}/,"1"),Y.selectNodeContents(C.firstChild),Y.collapse(!1);return X1(w),z.preventDefault(),!0}}}if(v0(w,Y,z))return!0;var k=(0,Z.a1)(K,"data-block","0"),i=(0,S.S)(K,"SPAN");if(z.key==="Enter"&&!(0,$.yl)(z)&&!z.altKey&&!z.shiftKey&&k){var a=!1,r=k.textContent.match(/^\n+/);if((0,L.im)(k,w.sv.element).start<=(r?r[0].length:0))a=!0;var D1=`
`;if(i)if(((Q=i.previousElementSibling)===null||Q===void 0?void 0:Q.getAttribute("data-action"))==="enter-remove")return i.previousElementSibling.remove(),y1(w),z.preventDefault(),!0;else D1+=d4(i);if(Y.insertNode(document.createTextNode(D1)),Y.collapse(!1),k&&k.textContent.trim()!==""&&!a)X1(w);else y1(w);return z.preventDefault(),!0}if(z.key==="Backspace"&&!(0,$.yl)(z)&&!z.altKey&&!z.shiftKey){if(i&&((D=i.previousElementSibling)===null||D===void 0?void 0:D.getAttribute("data-type"))==="newline"&&(0,L.im)(i,w.sv.element,Y).start===1&&i.getAttribute("data-type").indexOf("code-block-")===-1){if(Y.setStart(i,0),Y.extractContents(),i.textContent.trim()!=="")X1(w);else y1(w);return z.preventDefault(),!0}if(k&&(0,L.im)(k,w.sv.element,Y).start===0&&k.previousElementSibling){Y.extractContents();var G1=k.previousElementSibling.lastElementChild;if(G1.getAttribute("data-type")==="newline")G1.remove(),G1=k.previousElementSibling.lastElementChild;if(G1.getAttribute("data-type")!=="newline")G1.insertAdjacentHTML("afterend",k.innerHTML),k.remove();if(k.textContent.trim()!==""&&!((X=k.previousElementSibling)===null||X===void 0?void 0:X.querySelector('[data-type="code-block-open-marker"]')))X1(w);else{if(G1.getAttribute("data-type")!=="newline")Y.selectNodeContents(G1.lastChild),Y.collapse(!1);y1(w)}return z.preventDefault(),!0}}return!1},n=v(538),V1=function(w){if(w.options.theme==="dark")w.element.classList.add("vditor--dark");else w.element.classList.remove("vditor--dark")},_1=function(w){if(w.element.innerHTML="",w.element.classList.add("vditor"),w.options.rtl)w.element.setAttribute("dir","rtl");if(V1(w),(0,n.Z)(w.options.preview.theme.current,w.options.preview.theme.path),typeof w.options.height==="number")w.element.style.height=w.options.height+"px";else w.element.style.height=w.options.height;if(typeof w.options.minHeight==="number")w.element.style.minHeight=w.options.minHeight+"px";if(typeof w.options.width==="number")w.element.style.width=w.options.width+"px";else w.element.style.width=w.options.width;w.element.appendChild(w.toolbar.element);var z=document.createElement("div");if(z.className="vditor-content",w.options.outline.position==="left")z.appendChild(w.outline.element);if(z.appendChild(w.wysiwyg.element.parentElement),z.appendChild(w.sv.element),z.appendChild(w.ir.element.parentElement),z.appendChild(w.preview.element),w.toolbar.elements.devtools)z.appendChild(w.devtools.element);if(w.options.outline.position==="right")w.outline.element.classList.add("vditor-outline--right"),z.appendChild(w.outline.element);if(w.upload)z.appendChild(w.upload.element);if(w.options.resize.enable)z.appendChild(w.resize.element);if(z.appendChild(w.hint.element),z.appendChild(w.tip.element),w.element.appendChild(z),z.addEventListener("click",function(){P(w,["subToolbar"])}),w.toolbar.elements.export)w.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>');if(w0(w,w.options.mode,c4(w)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var A=!1,G=function(Q){if(A)return;A=!0,requestAnimationFrame(function(){A=!1;var D=w.toolbar.element;if(D.style.transform="none",D.getBoundingClientRect().top<0)D.style.transform="translate(0, ".concat(-D.getBoundingClientRect().top,"px)")})};window.visualViewport.addEventListener("scroll",G),window.visualViewport.addEventListener("resize",G)}},p1=function(w){var z=window.innerWidth<=W.g.MOBILE_WIDTH?10:35;if(w.wysiwyg.element.parentElement.style.display!=="none"){var A=(w.wysiwyg.element.parentElement.clientWidth-w.options.preview.maxWidth)/2;w.wysiwyg.element.style.padding="10px ".concat(Math.max(z,A),"px")}if(w.ir.element.parentElement.style.display!=="none"){var A=(w.ir.element.parentElement.clientWidth-w.options.preview.maxWidth)/2;w.ir.element.style.padding="10px ".concat(Math.max(z,A),"px")}if(w.preview.element.style.display!=="block")w.toolbar.element.style.paddingLeft=Math.max(5,parseInt(w[w.currentMode].element.style.paddingLeft||"0",10)+(w.options.outline.position==="left"?w.outline.element.offsetWidth:0))+"px";else w.toolbar.element.style.paddingLeft=5+(w.options.outline.position==="left"?w.outline.element.offsetWidth:0)+"px"},S0=function(w){if(!w.options.typewriterMode)return;var z=window.innerHeight;if(typeof w.options.height==="number"){if(z=w.options.height,typeof w.options.minHeight==="number")z=Math.max(z,w.options.minHeight);z=Math.min(window.innerHeight,z)}else z=w.element.clientHeight;if(w.element.classList.contains("vditor--fullscreen"))z=window.innerHeight;w[w.currentMode].element.style.setProperty("--editor-bottom",(z-w.toolbar.element.offsetHeight)/2+"px")},Q5;function D5(){window.removeEventListener("resize",Q5)}var c4=function(w){S0(w),D5(),window.addEventListener("resize",Q5=function(){p1(w),S0(w)});var z=(0,$.pK)()&&localStorage.getItem(w.options.cache.id);if(!w.options.cache.enable||!z){if(w.options.value)z=w.options.value;else if(w.originalInnerHTML)z=w.lute.HTML2Md(w.originalInnerHTML);else if(!w.options.cache.enable)z=""}return z||""},q0=function(w){clearTimeout(w[w.currentMode].hlToolbarTimeoutId),w[w.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(w[w.currentMode].element.getAttribute("contenteditable")==="false")return;if(!(0,L.Gb)(w[w.currentMode].element))return;V(w.toolbar.elements,W.g.EDIT_TOOLBARS),O(w.toolbar.elements,W.g.EDIT_TOOLBARS);var z=(0,L.zh)(w),A=z.startContainer;if(z.startContainer.nodeType===3)A=z.startContainer.parentElement;if(A.classList.contains("vditor-reset"))A=A.childNodes[z.startOffset];var G=w.currentMode==="sv"?(0,Z.a1)(A,"data-type","heading"):(0,S.W)(A);if(G)F(w.toolbar.elements,["headings"]);var Q=w.currentMode==="sv"?(0,Z.a1)(A,"data-type","blockquote"):(0,Z.lG)(A,"BLOCKQUOTE");if(Q)F(w.toolbar.elements,["quote"]);var D=(0,Z.a1)(A,"data-type","strong");if(D)F(w.toolbar.elements,["bold"]);var X=(0,Z.a1)(A,"data-type","em");if(X)F(w.toolbar.elements,["italic"]);var Y=(0,Z.a1)(A,"data-type","s");if(Y)F(w.toolbar.elements,["strike"]);var K=(0,Z.a1)(A,"data-type","a");if(K)F(w.toolbar.elements,["link"]);var J=(0,Z.lG)(A,"LI");if(J){if(J.classList.contains("vditor-task"))F(w.toolbar.elements,["check"]);else if(J.parentElement.tagName==="OL")F(w.toolbar.elements,["ordered-list"]);else if(J.parentElement.tagName==="UL")F(w.toolbar.elements,["list"]);O(w.toolbar.elements,["outdent","indent"])}else U(w.toolbar.elements,["outdent","indent"]);var B=(0,Z.a1)(A,"data-type","code-block");if(B)U(w.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),F(w.toolbar.elements,["code"]);var x=(0,Z.a1)(A,"data-type","code");if(x)U(w.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),F(w.toolbar.elements,["inline-code"]);var _=(0,Z.a1)(A,"data-type","table");if(_)U(w.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])},200)},J1=function(w,z){if(z===void 0)z={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(z.enableHint)w.hint.render(w);clearTimeout(w.wysiwyg.afterRenderTimeoutId),w.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(w.wysiwyg.composingLock)return;var A=M(w);if(typeof w.options.input==="function"&&z.enableInput)w.options.input(A);if(w.options.counter.enable)w.counter.render(w,A);if(w.options.cache.enable&&(0,$.pK)()){if(localStorage.setItem(w.options.cache.id,A),w.options.cache.after)w.options.cache.after(A)}if(w.devtools)w.devtools.renderEchart(w);if(z.enableAddUndoStack)w.undo.addToUndoStack(w)},w.options.undoDelay)},_4=function(w){var z=w.previousSibling;while(z){if(z.nodeType!==3&&z.tagName==="A"&&!z.previousSibling&&z.innerHTML.replace(W.g.ZWSP,"")===""&&z.nextSibling)return z;z=z.previousSibling}return!1},b4=function(w){var z=w.startContainer.nextSibling;while(z&&z.textContent==="")z=z.nextSibling;if(z&&z.nodeType!==3&&(z.tagName==="CODE"||z.getAttribute("data-type")==="math-inline"||z.getAttribute("data-type")==="html-entity"||z.getAttribute("data-type")==="html-inline"))return!0;return!1},X5=function(w){var z="",A=w.nextSibling;while(A){if(A.nodeType===3)z+=A.textContent;else z+=A.outerHTML;A=A.nextSibling}return z},Z5=function(w){var z="",A=w.previousSibling;while(A){if(A.nodeType===3)z=A.textContent+z;else z=A.outerHTML+z;A=A.previousSibling}return z},u4=function(w){var z=w;while(z&&!z.nextSibling)z=z.parentElement;return z.nextSibling},g4=function(w){var z=Z5(w.startContainer),A=X5(w.startContainer),G=w.startContainer.textContent,Q=w.startOffset,D="",X="";if(G.substr(0,Q)!==""&&G.substr(0,Q)!==W.g.ZWSP||z)D="".concat(z).concat(G.substr(0,Q));if(G.substr(Q)!==""&&G.substr(Q)!==W.g.ZWSP||A)X="".concat(G.substr(Q)).concat(A);return{afterHTML:X,beforeHTML:D}},k0=function(w,z){Array.from(w.wysiwyg.element.childNodes).find(function(A){if(A.nodeType===3){var G=document.createElement("p");G.setAttribute("data-block","0"),G.textContent=A.textContent;var Q=z.startContainer.nodeType===3?z.startOffset:A.textContent.length;return A.parentNode.insertBefore(G,A),A.remove(),z.setStart(G.firstChild,Math.min(G.firstChild.textContent.length,Q)),z.collapse(!0),(0,L.Hc)(z),!0}else if(!A.getAttribute("data-block")){if(A.tagName==="P")A.remove();else{if(A.tagName==="DIV")z.insertNode(document.createElement("wbr")),A.outerHTML='<p data-block="0">'.concat(A.innerHTML,"</p>");else if(A.tagName==="BR")A.outerHTML='<p data-block="0">'.concat(A.outerHTML,"<wbr></p>");else z.insertNode(document.createElement("wbr")),A.outerHTML='<p data-block="0">'.concat(A.outerHTML,"</p>");(0,L.ib)(w.wysiwyg.element,z),z=getSelection().getRangeAt(0)}return!0}})},B0=function(w,z){var A=(0,L.zh)(w),G=(0,Z.F9)(A.startContainer);if(!G)G=A.startContainer.childNodes[A.startOffset];if(!G&&w.wysiwyg.element.children.length===0)G=w.wysiwyg.element;if(G&&!G.classList.contains("vditor-wysiwyg__block")){if(A.insertNode(document.createElement("wbr")),G.innerHTML.trim()==="<wbr>")G.innerHTML="<wbr><br>";if(G.tagName==="BLOCKQUOTE"||G.classList.contains("vditor-reset"))G.innerHTML="<".concat(z,' data-block="0">').concat(G.innerHTML.trim(),"</").concat(z,">");else G.outerHTML="<".concat(z,' data-block="0">').concat(G.innerHTML.trim(),"</").concat(z,">");(0,L.ib)(w.wysiwyg.element,A),m1(w)}},c0=function(w){var z=getSelection().getRangeAt(0),A=(0,Z.F9)(z.startContainer);if(!A)A=z.startContainer.childNodes[z.startOffset];if(A)z.insertNode(document.createElement("wbr")),A.outerHTML='<p data-block="0">'.concat(A.innerHTML,"</p>"),(0,L.ib)(w.wysiwyg.element,z);w.wysiwyg.popover.style.display="none"},J0=function(w,z,A){if(A===void 0)A=!0;var G=w.previousElementSibling,Q=G.ownerDocument.createRange();if(G.tagName==="CODE")if(G.style.display="inline-block",A)Q.setStart(G.firstChild,1);else Q.selectNodeContents(G);else{if(G.style.display="block",!G.firstChild.firstChild)G.firstChild.appendChild(document.createTextNode(""));Q.selectNodeContents(G.firstChild)}if(A)Q.collapse(!0);else Q.collapse(!1);if((0,L.Hc)(Q),w.firstElementChild.classList.contains("language-mindmap"))return;B1(z)},p4=function(w,z){if(w.wysiwyg.composingLock=z.isComposing,z.isComposing)return!1;if(z.key.indexOf("Arrow")===-1&&z.key!=="Meta"&&z.key!=="Control"&&z.key!=="Alt"&&z.key!=="Shift"&&z.key!=="CapsLock"&&z.key!=="Escape"&&!/^F\d{1,2}$/.test(z.key))w.undo.recordFirstPosition(w,z);var A=(0,L.zh)(w),G=A.startContainer;if(!P5(z,w,G))return!1;if(j5(A,w,z),C5(A),z.key!=="Enter"&&z.key!=="Tab"&&z.key!=="Backspace"&&z.key.indexOf("Arrow")===-1&&!(0,$.yl)(z)&&z.key!=="Escape"&&z.key!=="Delete")return!1;var Q=(0,Z.F9)(G),D=(0,Z.lG)(G,"P");if(H5(z,w,D,A))return!0;if(B5(A,w,D,z))return!0;if(I5(w,z,A))return!0;var X=(0,Z.fb)(G,"vditor-wysiwyg__block");if(X){if(z.key==="Escape"&&X.children.length===2)return w.wysiwyg.popover.style.display="none",X.firstElementChild.style.display="none",w.wysiwyg.element.blur(),z.preventDefault(),!0;if(!(0,$.yl)(z)&&!z.shiftKey&&z.altKey&&z.key==="Enter"&&X.getAttribute("data-type")==="code-block"){var Y=w.wysiwyg.popover.querySelector(".vditor-input");return Y.focus(),Y.select(),z.preventDefault(),!0}if(X.getAttribute("data-block")==="0"){if(R5(w,z,X.firstElementChild,A))return!0;if(K0(w,z,A,X.firstElementChild,X))return!0;if(X.getAttribute("data-type")!=="yaml-front-matter"&&D0(w,z,A,X.firstElementChild,X))return!0}}if(M5(w,A,z,D))return!0;var K=(0,Z.E2)(G,"BLOCKQUOTE");if(K){if(!z.shiftKey&&z.altKey&&z.key==="Enter"){if(!(0,$.yl)(z))A.setStartAfter(K);else A.setStartBefore(K);(0,L.Hc)(A);var J=document.createElement("p");return J.setAttribute("data-block","0"),J.innerHTML=`
`,A.insertNode(J),A.collapse(!0),(0,L.Hc)(A),J1(w),B1(w),z.preventDefault(),!0}}var B=(0,S.W)(G);if(B){if(B.tagName==="H6"&&G.textContent.length===A.startOffset&&!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey&&z.key==="Enter"){var x=document.createElement("p");return x.textContent=`
`,x.setAttribute("data-block","0"),G.parentElement.insertAdjacentElement("afterend",x),A.setStart(x,0),(0,L.Hc)(A),J1(w),B1(w),z.preventDefault(),!0}if(c("⌘=",z)){var _=parseInt(B.tagName.substr(1),10)-1;if(_>0)B0(w,"h".concat(_)),J1(w);return z.preventDefault(),!0}if(c("⌘-",z)){var _=parseInt(B.tagName.substr(1),10)+1;if(_<7)B0(w,"h".concat(_)),J1(w);return z.preventDefault(),!0}if(z.key==="Backspace"&&!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey&&B.textContent.length===1)c0(w)}if(h5(w,A,z))return!0;if(z.altKey&&z.key==="Enter"&&!(0,$.yl)(z)&&!z.shiftKey){var C=(0,Z.lG)(G,"A"),T=(0,Z.a1)(G,"data-type","link-ref"),p=(0,Z.a1)(G,"data-type","footnotes-ref");if(C||T||p||B&&B.tagName.length===2){var u=w.wysiwyg.popover.querySelector("input");u.focus(),u.select()}}if(h1(w,z))return!0;if(c("⇧⌘U",z)){var k=w.wysiwyg.popover.querySelector('[data-type="up"]');if(k)return k.click(),z.preventDefault(),!0}if(c("⇧⌘D",z)){var k=w.wysiwyg.popover.querySelector('[data-type="down"]');if(k)return k.click(),z.preventDefault(),!0}if(v0(w,A,z))return!0;if(!(0,$.yl)(z)&&z.shiftKey&&!z.altKey&&z.key==="Enter"&&G.parentElement.tagName!=="LI"&&G.parentElement.tagName!=="P"){if(["STRONG","STRIKE","S","I","EM","B"].includes(G.parentElement.tagName))A.insertNode(document.createTextNode(`
`+W.g.ZWSP));else A.insertNode(document.createTextNode(`
`));return A.collapse(!1),(0,L.Hc)(A),J1(w),B1(w),z.preventDefault(),!0}if(z.key==="Backspace"&&!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey&&A.toString()===""){if(T5(w,A,z,D))return!0;if(Q){if(Q.previousElementSibling&&Q.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&Q.previousElementSibling.getAttribute("data-block")==="0"&&Q.tagName!=="UL"&&Q.tagName!=="OL"){var i=(0,L.im)(Q,w.wysiwyg.element,A).start;if(i===0&&A.startOffset===0||i===1&&Q.innerText.startsWith(W.g.ZWSP)){if(J0(Q.previousElementSibling.lastElementChild,w,!1),Q.innerHTML.trim().replace(W.g.ZWSP,"")==="")Q.remove(),J1(w);return z.preventDefault(),!0}}var a=A.startOffset;if(A.toString()===""&&G.nodeType===3&&G.textContent.charAt(a-2)===`
`&&G.textContent.charAt(a-1)!==W.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(G.parentElement.tagName))return G.textContent=G.textContent.substring(0,a-1)+W.g.ZWSP,A.setStart(G,a),A.collapse(!0),J1(w),z.preventDefault(),!0;if(G.textContent===W.g.ZWSP&&A.startOffset===1&&!G.previousSibling&&b4(A))G.textContent="";Q.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(D1){D1.firstElementChild.style.display="inline",D1.lastElementChild.style.display="none"}),Q.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(D1){D1.firstElementChild.style.display="inline",D1.lastElementChild.style.display="none"})}}if((0,$.vU)()&&A.startOffset===1&&G.textContent.indexOf(W.g.ZWSP)>-1&&G.previousSibling&&G.previousSibling.nodeType!==3&&G.previousSibling.tagName==="CODE"&&(z.key==="Backspace"||z.key==="ArrowLeft"))return A.selectNodeContents(G.previousSibling),A.collapse(!1),z.preventDefault(),!0;if(k5(z,Q,A))return z.preventDefault(),!0;if(W5(A,z.key),z.key==="ArrowDown"){var r=G.nextSibling;if(r&&r.nodeType!==3&&r.getAttribute("data-type")==="math-inline")A.setStartAfter(r)}if(Q&&f0(Q,w,z,A))return z.preventDefault(),!0;return!1},h1=function(w,z){if(c("⇧⌘X",z)){var A=w.wysiwyg.popover.querySelector('[data-type="remove"]');if(A)A.click();return z.preventDefault(),!0}},e1=function(w){clearTimeout(w.wysiwyg.hlToolbarTimeoutId),w.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(w.wysiwyg.element.getAttribute("contenteditable")==="false")return;if(!(0,L.Gb)(w.wysiwyg.element))return;V(w.toolbar.elements,W.g.EDIT_TOOLBARS),O(w.toolbar.elements,W.g.EDIT_TOOLBARS);var z=getSelection().getRangeAt(0),A=z.startContainer;if(z.startContainer.nodeType===3)A=z.startContainer.parentElement;else A=A.childNodes[z.startOffset>=A.childNodes.length?A.childNodes.length-1:z.startOffset];var G=(0,Z.a1)(A,"data-type","footnotes-block");if(G){w.wysiwyg.popover.innerHTML="",a1(G,w),b1(w,"footnotes-block"),s1(w,G);return}var Q=(0,Z.lG)(A,"LI");if(Q){if(Q.classList.contains("vditor-task"))F(w.toolbar.elements,["check"]);else if(Q.parentElement.tagName==="OL")F(w.toolbar.elements,["ordered-list"]);else if(Q.parentElement.tagName==="UL")F(w.toolbar.elements,["list"]);O(w.toolbar.elements,["outdent","indent"])}else U(w.toolbar.elements,["outdent","indent"]);if((0,Z.lG)(A,"BLOCKQUOTE"))F(w.toolbar.elements,["quote"]);if((0,Z.lG)(A,"B")||(0,Z.lG)(A,"STRONG"))F(w.toolbar.elements,["bold"]);if((0,Z.lG)(A,"I")||(0,Z.lG)(A,"EM"))F(w.toolbar.elements,["italic"]);if((0,Z.lG)(A,"STRIKE")||(0,Z.lG)(A,"S"))F(w.toolbar.elements,["strike"]);w.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(l){l.classList.remove("vditor-comment--focus")});var D=(0,Z.fb)(A,"vditor-comment");if(D){var X=D.getAttribute("data-cmtids").split(" ");if(X.length>1&&D.nextSibling.isSameNode(D.nextElementSibling)){var Y=D.nextElementSibling.getAttribute("data-cmtids").split(" ");X.find(function(l){if(Y.includes(l))return X=[l],!0})}w.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(l){if(l.getAttribute("data-cmtids").indexOf(X[0])>-1)l.classList.add("vditor-comment--focus")})}var K=(0,Z.lG)(A,"A");if(K)F(w.toolbar.elements,["link"]);var J=(0,Z.lG)(A,"TABLE"),B=(0,S.W)(A);if((0,Z.lG)(A,"CODE"))if((0,Z.lG)(A,"PRE"))U(w.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),F(w.toolbar.elements,["code"]);else U(w.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),F(w.toolbar.elements,["inline-code"]);else if(B)U(w.toolbar.elements,["bold"]),F(w.toolbar.elements,["headings"]);else if(J)U(w.toolbar.elements,["table"]);var x=(0,Z.fb)(A,"vditor-toc");if(x){w.wysiwyg.popover.innerHTML="",a1(x,w),b1(w,"vditor-toc"),s1(w,x);return}var _=(0,S.S)(A,"BLOCKQUOTE");if(_)w.wysiwyg.popover.innerHTML="",A0(z,_,w),G0(z,_,w),a1(_,w),b1(w,"blockquote"),s1(w,_);if(Q)w.wysiwyg.popover.innerHTML="",A0(z,Q,w),G0(z,Q,w),a1(Q,w),b1(w,"li"),s1(w,Q);if(J){var C=w.options.lang,T=w.options;w.wysiwyg.popover.innerHTML="";var p=function(){var l=J.rows.length,A1=J.rows[0].cells.length,t1=parseInt(u1.value,10)||l,E1=parseInt(g1.value,10)||A1;if(t1===l&&A1===E1)return;if(A1!==E1){var P0=E1-A1;for(var o1=0;o1<J.rows.length;o1++)if(P0>0)for(var l5=0;l5<P0;l5++)if(o1===0)J.rows[o1].lastElementChild.insertAdjacentHTML("afterend","<th> </th>");else J.rows[o1].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var e0=A1-1;e0>=E1;e0--)J.rows[o1].cells[e0].remove()}if(l!==t1){var m5=t1-l;if(m5>0){var w5="<tr>";for(var $0=0;$0<E1;$0++)w5+="<td> </td>";for(var d5=0;d5<m5;d5++)if(J.querySelector("tbody"))J.querySelector("tbody").insertAdjacentHTML("beforeend",w5);else J.querySelector("thead").insertAdjacentHTML("afterend",w5+"</tr>")}else for(var $0=l-1;$0>=t1;$0--)if(J.rows[$0].remove(),J.rows.length===1)J.querySelector("tbody").remove()}if(typeof w.options.input==="function")w.options.input(M(w))},u=function(l){if(L0(J,l),l==="right")r.classList.remove("vditor-icon--current"),D1.classList.remove("vditor-icon--current"),G1.classList.add("vditor-icon--current");else if(l==="center")r.classList.remove("vditor-icon--current"),G1.classList.remove("vditor-icon--current"),D1.classList.add("vditor-icon--current");else D1.classList.remove("vditor-icon--current"),G1.classList.remove("vditor-icon--current"),r.classList.add("vditor-icon--current");(0,L.Hc)(z),J1(w)},k=(0,Z.lG)(A,"TD"),i=(0,Z.lG)(A,"TH"),a="left";if(k)a=k.getAttribute("align")||"left";else if(i)a=i.getAttribute("align")||"center";var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,$.ns)("⇧⌘L")+">"),r.setAttribute("data-type","left"),r.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(a==="left"?" vditor-icon--current":""),r.onclick=function(){u("left")};var D1=document.createElement("button");D1.setAttribute("type","button"),D1.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,$.ns)("⇧⌘C")+">"),D1.setAttribute("data-type","center"),D1.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',D1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(a==="center"?" vditor-icon--current":""),D1.onclick=function(){u("center")};var G1=document.createElement("button");G1.setAttribute("type","button"),G1.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,$.ns)("⇧⌘R")+">"),G1.setAttribute("data-type","right"),G1.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',G1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(a==="right"?" vditor-icon--current":""),G1.onclick=function(){u("right")};var Y1=document.createElement("button");Y1.setAttribute("type","button"),Y1.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,$.ns)("⌘=")+">"),Y1.setAttribute("data-type","insertRow"),Y1.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',Y1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Y1.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,A1=(0,Z.lG)(l,"TD")||(0,Z.lG)(l,"TH");if(A1)N5(w,z,A1)};var T1=document.createElement("button");T1.setAttribute("type","button"),T1.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,$.ns)("⇧⌘F")+">"),T1.setAttribute("data-type","insertRow"),T1.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',T1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",T1.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,A1=(0,Z.lG)(l,"TD")||(0,Z.lG)(l,"TH");if(A1)y5(w,z,A1)};var R1=document.createElement("button");R1.setAttribute("type","button"),R1.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,$.ns)("⇧⌘=")+">"),R1.setAttribute("data-type","insertColumn"),R1.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',R1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",R1.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,A1=(0,Z.lG)(l,"TD")||(0,Z.lG)(l,"TH");if(A1)x0(w,J,A1)};var C1=document.createElement("button");C1.setAttribute("type","button"),C1.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,$.ns)("⇧⌘G")+">"),C1.setAttribute("data-type","insertColumn"),C1.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',C1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",C1.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,A1=(0,Z.lG)(l,"TD")||(0,Z.lG)(l,"TH");if(A1)x0(w,J,A1,"beforebegin")};var z1=document.createElement("button");z1.setAttribute("type","button"),z1.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,$.ns)("⌘-")+">"),z1.setAttribute("data-type","deleteRow"),z1.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',z1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",z1.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,A1=(0,Z.lG)(l,"TD")||(0,Z.lG)(l,"TH");if(A1)L5(w,z,A1)};var k1=document.createElement("button");k1.setAttribute("type","button"),k1.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,$.ns)("⇧⌘-")+">"),k1.setAttribute("data-type","deleteColumn"),k1.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',k1.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",k1.onclick=function(){var l=getSelection().getRangeAt(0).startContainer,A1=(0,Z.lG)(l,"TD")||(0,Z.lG)(l,"TH");if(A1)x5(w,z,J,A1)};var c1=document.createElement("span");c1.setAttribute("aria-label",window.VditorI18n.row),c1.className="vditor-tooltipped vditor-tooltipped__n";var u1=document.createElement("input");c1.appendChild(u1),u1.type="number",u1.min="1",u1.className="vditor-input",u1.style.width="42px",u1.style.textAlign="center",u1.setAttribute("placeholder",window.VditorI18n.row),u1.value=J.rows.length.toString(),u1.oninput=function(){p()},u1.onkeydown=function(l){if(l.isComposing)return;if(l.key==="Tab"){g1.focus(),g1.select(),l.preventDefault();return}if(h1(w,l))return;if(d1(l,z))return};var M0=document.createElement("span");M0.setAttribute("aria-label",window.VditorI18n.column),M0.className="vditor-tooltipped vditor-tooltipped__n";var g1=document.createElement("input");M0.appendChild(g1),g1.type="number",g1.min="1",g1.className="vditor-input",g1.style.width="42px",g1.style.textAlign="center",g1.setAttribute("placeholder",window.VditorI18n.column),g1.value=J.rows[0].cells.length.toString(),g1.oninput=function(){p()},g1.onkeydown=function(l){if(l.isComposing)return;if(l.key==="Tab"){u1.focus(),u1.select(),l.preventDefault();return}if(h1(w,l))return;if(d1(l,z))return},A0(z,J,w),G0(z,J,w),a1(J,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",r),w.wysiwyg.popover.insertAdjacentElement("beforeend",D1),w.wysiwyg.popover.insertAdjacentElement("beforeend",G1),w.wysiwyg.popover.insertAdjacentElement("beforeend",T1),w.wysiwyg.popover.insertAdjacentElement("beforeend",Y1),w.wysiwyg.popover.insertAdjacentElement("beforeend",C1),w.wysiwyg.popover.insertAdjacentElement("beforeend",R1),w.wysiwyg.popover.insertAdjacentElement("beforeend",z1),w.wysiwyg.popover.insertAdjacentElement("beforeend",k1),w.wysiwyg.popover.insertAdjacentElement("beforeend",c1),w.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),w.wysiwyg.popover.insertAdjacentElement("beforeend",M0),b1(w,"table"),s1(w,J)}var t0=(0,Z.a1)(A,"data-type","link-ref");if(t0)$5(w,t0,z);var X0=(0,Z.a1)(A,"data-type","footnotes-ref");if(X0){var C=w.options.lang,T=w.options;w.wysiwyg.popover.innerHTML="";var c1=document.createElement("span");c1.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,$.ns)("⌥Enter")+">"),c1.className="vditor-tooltipped vditor-tooltipped__n";var v1=document.createElement("input");c1.appendChild(v1),v1.className="vditor-input",v1.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,$.ns)("⌥Enter")+">"),v1.style.width="120px",v1.value=X0.getAttribute("data-footnotes-label"),v1.oninput=function(){if(v1.value.trim()!=="")X0.setAttribute("data-footnotes-label",v1.value);if(typeof w.options.input==="function")w.options.input(M(w))},v1.onkeydown=function(E1){if(E1.isComposing)return;if(h1(w,E1))return;if(d1(E1,z))return},a1(X0,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",c1),b1(w,"footnotes-ref"),s1(w,X0)}var x1=(0,Z.fb)(A,"vditor-wysiwyg__block"),a5=x1?x1.getAttribute("data-type").indexOf("block")>-1:!1;if(w.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(l){if(!x1||x1&&a5&&!x1.contains(l)){var A1=l.previousElementSibling;A1.style.display="none"}}),x1&&a5){if(w.wysiwyg.popover.innerHTML="",A0(z,x1,w),G0(z,x1,w),a1(x1,w),x1.getAttribute("data-type")==="code-block"){var h0=document.createElement("span");h0.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,$.ns)("⌥Enter")+">"),h0.className="vditor-tooltipped vditor-tooltipped__n";var l1=document.createElement("input");h0.appendChild(l1);var V0=x1.firstElementChild.firstElementChild;l1.className="vditor-input",l1.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,$.ns)("⌥Enter")+">"),l1.value=V0.className.indexOf("language-")>-1?V0.className.split("-")[1].split(" ")[0]:"",l1.oninput=function(l){if(l1.value.trim()!=="")V0.className="language-".concat(l1.value);else V0.className="",w.hint.recentLanguage="";if(x1.lastElementChild.classList.contains("vditor-wysiwyg__preview"))x1.lastElementChild.innerHTML=x1.firstElementChild.innerHTML,N1(x1.lastElementChild,w);if(J1(w),l.detail===1)z.setStart(V0.firstChild,0),z.collapse(!0),(0,L.Hc)(z)},l1.onkeydown=function(l){if(l.isComposing)return;if(h1(w,l))return;if(l.key==="Escape"&&w.hint.element.style.display==="block"){w.hint.element.style.display="none",l.preventDefault();return}w.hint.select(l,w),d1(l,z)},l1.onkeyup=function(l){var A1,t1;if(l.isComposing||l.key==="Enter"||l.key==="ArrowUp"||l.key==="Escape"||l.key==="ArrowDown")return;var E1=[],P0=l1.value.substring(0,l1.selectionStart);(w.options.preview.hljs.langs||W.g.ALIAS_CODE_LANGUAGES.concat(((t1=(A1=window.hljs)===null||A1===void 0?void 0:A1.listLanguages())!==null&&t1!==void 0?t1:[]).sort())).forEach(function(o1){if(o1.indexOf(P0.toLowerCase())>-1)E1.push({html:o1,value:o1})}),w.hint.genHTML(E1,P0,w),l.preventDefault()},w.wysiwyg.popover.insertAdjacentElement("beforeend",h0),b1(w,"code-block")}else b1(w,"block");s1(w,x1)}else x1=void 0;if(B){w.wysiwyg.popover.innerHTML="";var c1=document.createElement("span");c1.setAttribute("aria-label","ID<"+(0,$.ns)("⌥Enter")+">"),c1.className="vditor-tooltipped vditor-tooltipped__n";var n1=document.createElement("input");c1.appendChild(n1),n1.className="vditor-input",n1.setAttribute("placeholder","ID<"+(0,$.ns)("⌥Enter")+">"),n1.style.width="120px",n1.value=B.getAttribute("data-id")||"",n1.oninput=function(){if(B.setAttribute("data-id",n1.value),typeof w.options.input==="function")w.options.input(M(w))},n1.onkeydown=function(A1){if(A1.isComposing)return;if(h1(w,A1))return;if(d1(A1,z))return},A0(z,B,w),G0(z,B,w),a1(B,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",c1),b1(w,"heading"),s1(w,B)}if(K)_0(w,K,z);if(!_&&!Q&&!J&&!x1&&!K&&!t0&&!X0&&!B&&!x){var Z0=(0,Z.a1)(A,"data-block","0");if(Z0&&Z0.parentElement.isEqualNode(w.wysiwyg.element))w.wysiwyg.popover.innerHTML="",A0(z,Z0,w),G0(z,Z0,w),a1(Z0,w),b1(w,"block"),s1(w,Z0);else w.wysiwyg.popover.style.display="none"}w.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(l){l.style.display="none"});var E5=(0,Z.a1)(z.startContainer,"data-type","backslash");if(E5)E5.querySelector("span").style.display="inline"},200)},s1=function(w,z){var A=z,G=(0,Z.lG)(z,"TABLE");if(G)A=G;w.wysiwyg.popover.style.left="0",w.wysiwyg.popover.style.display="block",w.wysiwyg.popover.style.top=Math.max(-8,A.offsetTop-21-w.wysiwyg.element.scrollTop)+"px",w.wysiwyg.popover.style.left=Math.min(A.offsetLeft,w.wysiwyg.element.clientWidth-w.wysiwyg.popover.clientWidth)+"px",w.wysiwyg.popover.setAttribute("data-top",(A.offsetTop-21).toString())},$5=function(w,z,A){if(A===void 0)A=getSelection().getRangeAt(0);w.wysiwyg.popover.innerHTML="";var G=function(){if(D.value.trim()!=="")if(z.tagName==="IMG")z.setAttribute("alt",D.value);else z.textContent=D.value;if(Y.value.trim()!=="")z.setAttribute("data-link-label",Y.value);if(typeof w.options.input==="function")w.options.input(M(w))},Q=document.createElement("span");Q.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),Q.className="vditor-tooltipped vditor-tooltipped__n";var D=document.createElement("input");Q.appendChild(D),D.className="vditor-input",D.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),D.style.width="120px",D.value=z.getAttribute("alt")||z.textContent,D.oninput=function(){G()},D.onkeydown=function(K){if(h1(w,K))return;if(d1(K,A))return;Y0(w,z,K,Y)};var X=document.createElement("span");X.setAttribute("aria-label",window.VditorI18n.linkRef),X.className="vditor-tooltipped vditor-tooltipped__n";var Y=document.createElement("input");X.appendChild(Y),Y.className="vditor-input",Y.setAttribute("placeholder",window.VditorI18n.linkRef),Y.value=z.getAttribute("data-link-label"),Y.oninput=function(){G()},Y.onkeydown=function(K){if(h1(w,K))return;if(d1(K,A))return;Y0(w,z,K,D)},a1(z,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",Q),w.wysiwyg.popover.insertAdjacentElement("beforeend",X),b1(w,"link-ref"),s1(w,z)},A0=function(w,z,A){var G=z.previousElementSibling;if(!G||!z.parentElement.isEqualNode(A.wysiwyg.element)&&z.tagName!=="LI")return;var Q=document.createElement("button");Q.setAttribute("type","button"),Q.setAttribute("data-type","up"),Q.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,$.ns)("⇧⌘U")+">"),Q.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',Q.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Q.onclick=function(){w.insertNode(document.createElement("wbr")),G.insertAdjacentElement("beforebegin",z),(0,L.ib)(A.wysiwyg.element,w),J1(A),e1(A),B1(A)},A.wysiwyg.popover.insertAdjacentElement("beforeend",Q)},G0=function(w,z,A){var G=z.nextElementSibling;if(!G||!z.parentElement.isEqualNode(A.wysiwyg.element)&&z.tagName!=="LI")return;var Q=document.createElement("button");Q.setAttribute("type","button"),Q.setAttribute("data-type","down"),Q.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,$.ns)("⇧⌘D")+">"),Q.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',Q.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Q.onclick=function(){w.insertNode(document.createElement("wbr")),G.insertAdjacentElement("afterend",z),(0,L.ib)(A.wysiwyg.element,w),J1(A),e1(A),B1(A)},A.wysiwyg.popover.insertAdjacentElement("beforeend",Q)},a1=function(w,z){var A=document.createElement("button");A.setAttribute("type","button"),A.setAttribute("data-type","remove"),A.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,$.ns)("⇧⌘X")+">"),A.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',A.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",A.onclick=function(){var G=(0,L.zh)(z);if(G.setStartAfter(w),(0,L.Hc)(G),w.remove(),J1(z),e1(z),["H1","H2","H3","H4","H5","H6"].includes(w.tagName))m1(z)},z.wysiwyg.popover.insertAdjacentElement("beforeend",A)},Y0=function(w,z,A,G){if(A.isComposing)return;if(A.key==="Tab"){G.focus(),G.select(),A.preventDefault();return}if(!(0,$.yl)(A)&&!A.shiftKey&&A.altKey&&A.key==="Enter"){var Q=(0,L.zh)(w);z.insertAdjacentHTML("afterend",W.g.ZWSP),Q.setStartAfter(z.nextSibling),Q.collapse(!0),(0,L.Hc)(Q),A.preventDefault()}},_0=function(w,z,A){w.wysiwyg.popover.innerHTML="";var G=function(){if(D.value.trim()!=="")z.innerHTML=D.value;z.setAttribute("href",Y.value),z.setAttribute("title",J.value),J1(w)};z.querySelectorAll("[data-marker]").forEach(function(B){B.removeAttribute("data-marker")});var Q=document.createElement("span");Q.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),Q.className="vditor-tooltipped vditor-tooltipped__n";var D=document.createElement("input");Q.appendChild(D),D.className="vditor-input",D.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),D.style.width="120px",D.value=z.innerHTML||"",D.oninput=function(){G()},D.onkeydown=function(B){if(h1(w,B))return;if(d1(B,A))return;Y0(w,z,B,Y)};var X=document.createElement("span");X.setAttribute("aria-label",window.VditorI18n.link),X.className="vditor-tooltipped vditor-tooltipped__n";var Y=document.createElement("input");X.appendChild(Y),Y.className="vditor-input",Y.setAttribute("placeholder",window.VditorI18n.link),Y.value=z.getAttribute("href")||"",Y.oninput=function(){G()},Y.onkeydown=function(B){if(h1(w,B))return;if(d1(B,A))return;Y0(w,z,B,J)};var K=document.createElement("span");K.setAttribute("aria-label",window.VditorI18n.tooltipText),K.className="vditor-tooltipped vditor-tooltipped__n";var J=document.createElement("input");K.appendChild(J),J.className="vditor-input",J.setAttribute("placeholder",window.VditorI18n.tooltipText),J.style.width="60px",J.value=z.getAttribute("title")||"",J.oninput=function(){G()},J.onkeydown=function(B){if(h1(w,B))return;if(d1(B,A))return;Y0(w,z,B,D)},a1(z,w),w.wysiwyg.popover.insertAdjacentElement("beforeend",Q),w.wysiwyg.popover.insertAdjacentElement("beforeend",X),w.wysiwyg.popover.insertAdjacentElement("beforeend",K),b1(w,"a"),s1(w,z)},s4=function(w,z){var A=w.target;z.wysiwyg.popover.innerHTML="";var G=function(){if(A.setAttribute("src",D.value),A.setAttribute("alt",Y.value),A.setAttribute("title",J.value),typeof z.options.input==="function")z.options.input(M(z))},Q=document.createElement("span");Q.setAttribute("aria-label",window.VditorI18n.imageURL),Q.className="vditor-tooltipped vditor-tooltipped__n";var D=document.createElement("input");Q.appendChild(D),D.className="vditor-input",D.setAttribute("placeholder",window.VditorI18n.imageURL),D.value=A.getAttribute("src")||"",D.oninput=function(){G()},D.onkeydown=function(B){h1(z,B)};var X=document.createElement("span");X.setAttribute("aria-label",window.VditorI18n.alternateText),X.className="vditor-tooltipped vditor-tooltipped__n";var Y=document.createElement("input");X.appendChild(Y),Y.className="vditor-input",Y.setAttribute("placeholder",window.VditorI18n.alternateText),Y.style.width="52px",Y.value=A.getAttribute("alt")||"",Y.oninput=function(){G()},Y.onkeydown=function(B){h1(z,B)};var K=document.createElement("span");K.setAttribute("aria-label",window.VditorI18n.title),K.className="vditor-tooltipped vditor-tooltipped__n";var J=document.createElement("input");K.appendChild(J),J.className="vditor-input",J.setAttribute("placeholder",window.VditorI18n.title),J.value=A.getAttribute("title")||"",J.oninput=function(){G()},J.onkeydown=function(B){h1(z,B)},a1(A,z),z.wysiwyg.popover.insertAdjacentElement("beforeend",Q),z.wysiwyg.popover.insertAdjacentElement("beforeend",X),z.wysiwyg.popover.insertAdjacentElement("beforeend",K),b1(z,"image"),s1(z,A)},d1=function(w,z){if(!(0,$.yl)(w)&&!w.shiftKey&&w.key==="Enter"||w.key==="Escape"){if(z)(0,L.Hc)(z);return w.preventDefault(),w.stopPropagation(),!0}},b1=function(w,z){w.options.customWysiwygToolbar(z,w.wysiwyg.popover)},Q0=function(w){if(w.currentMode==="wysiwyg")e1(w);else if(w.currentMode==="ir")q0(w)},q5=function(w,z,A){if(A===void 0)A={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};var G=w.wysiwyg.element;G.innerHTML=w.lute.Md2VditorDOM(z),G.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(Q){N1(Q,w),Q.previousElementSibling.setAttribute("style","display:none")}),J1(w,A)},a4=function(w,z,A){var G=w.startContainer.parentElement,Q=!1,D="",X="",Y=g4(w),K=Y.beforeHTML,J=Y.afterHTML;while(G&&!Q){var B=G.tagName;if(B==="STRIKE")B="S";if(B==="I")B="EM";if(B==="B")B="STRONG";if(B==="S"||B==="STRONG"||B==="EM"){var x="",_="",C="";if(G.parentElement.getAttribute("data-block")!=="0")_=Z5(G),C=X5(G);if(K||_)x="".concat(_,"<").concat(B,">").concat(K,"</").concat(B,">"),K=x;if(A==="bold"&&B==="STRONG"||A==="italic"&&B==="EM"||A==="strikeThrough"&&B==="S")x+="".concat(D).concat(W.g.ZWSP,"<wbr>").concat(X),Q=!0;if(J||C)J="<".concat(B,">").concat(J,"</").concat(B,">").concat(C),x+=J;if(G.parentElement.getAttribute("data-block")!=="0")G=G.parentElement,G.innerHTML=x;else G.outerHTML=x,G=G.parentElement;D="<".concat(B,">")+D,X="</".concat(B,">")+X}else Q=!0}(0,L.ib)(z.wysiwyg.element,w)},E4=function(w,z,A){if(w.wysiwyg.composingLock&&A instanceof CustomEvent)return;var G=!0,Q=!0;if(w.wysiwyg.element.querySelector("wbr"))w.wysiwyg.element.querySelector("wbr").remove();var D=(0,L.zh)(w),X=z.getAttribute("data-type");if(z.classList.contains("vditor-menu--current")){if(X==="strike")X="strikeThrough";if(X==="quote"){var Y=(0,Z.lG)(D.startContainer,"BLOCKQUOTE");if(!Y)Y=D.startContainer.childNodes[D.startOffset];if(Y)G=!1,z.classList.remove("vditor-menu--current"),D.insertNode(document.createElement("wbr")),Y.outerHTML=Y.innerHTML.trim()===""?'<p data-block="0">'.concat(Y.innerHTML,"</p>"):Y.innerHTML,(0,L.ib)(w.wysiwyg.element,D)}else if(X==="inline-code"){var K=(0,Z.lG)(D.startContainer,"CODE");if(!K)K=D.startContainer.childNodes[D.startOffset];if(K)K.outerHTML=K.innerHTML.replace(W.g.ZWSP,"")+"<wbr>",(0,L.ib)(w.wysiwyg.element,D)}else if(X==="link")if(!D.collapsed)document.execCommand("unlink",!1,"");else D.selectNode(D.startContainer.parentElement),document.execCommand("unlink",!1,"");else if(X==="check"||X==="list"||X==="ordered-list")y0(w,D,X),(0,L.ib)(w.wysiwyg.element,D),G=!1,z.classList.remove("vditor-menu--current");else if(G=!1,z.classList.remove("vditor-menu--current"),D.toString()==="")a4(D,w,X);else document.execCommand(X,!1,"")}else{if(w.wysiwyg.element.childNodes.length===0)w.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,L.ib)(w.wysiwyg.element,D);var J=(0,Z.F9)(D.startContainer);if(X==="quote"){if(!J)J=D.startContainer.childNodes[D.startOffset];if(J){G=!1,z.classList.add("vditor-menu--current"),D.insertNode(document.createElement("wbr"));var B=(0,Z.lG)(D.startContainer,"LI");if(B&&J.contains(B))B.innerHTML='<blockquote data-block="0">'.concat(B.innerHTML,"</blockquote>");else J.outerHTML='<blockquote data-block="0">'.concat(J.outerHTML,"</blockquote>");(0,L.ib)(w.wysiwyg.element,D)}}else if(X==="check"||X==="list"||X==="ordered-list")y0(w,D,X,!1),(0,L.ib)(w.wysiwyg.element,D),G=!1,V(w.toolbar.elements,["check","list","ordered-list"]),z.classList.add("vditor-menu--current");else if(X==="inline-code"){if(D.toString()===""){var x=document.createElement("code");x.textContent=W.g.ZWSP,D.insertNode(x),D.setStart(x.firstChild,1),D.collapse(!0),(0,L.Hc)(D)}else if(D.startContainer.nodeType===3){var x=document.createElement("code");D.surroundContents(x),D.insertNode(x),(0,L.Hc)(D)}z.classList.add("vditor-menu--current")}else if(X==="code"){var x=document.createElement("div");if(x.className="vditor-wysiwyg__block",x.setAttribute("data-type","code-block"),x.setAttribute("data-block","0"),x.setAttribute("data-marker","```"),D.toString()==="")x.innerHTML=`<pre><code><wbr>
</code></pre>`;else x.innerHTML="<pre><code>".concat(D.toString(),"<wbr></code></pre>"),D.deleteContents();if(D.insertNode(x),J)J.outerHTML=w.lute.SpinVditorDOM(J.outerHTML);(0,L.ib)(w.wysiwyg.element,D),w.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(D1){N1(D1,w)}),z.classList.add("vditor-menu--disabled")}else if(X==="link"){if(D.toString()===""){var _=document.createElement("a");_.innerText=W.g.ZWSP,D.insertNode(_),D.setStart(_.firstChild,1),D.collapse(!0),_0(w,_,D);var C=w.wysiwyg.popover.querySelector("input");C.value="",C.focus(),Q=!1}else{var x=document.createElement("a");x.setAttribute("href",""),x.innerHTML=D.toString(),D.surroundContents(x),D.insertNode(x),(0,L.Hc)(D),_0(w,x,D);var T=w.wysiwyg.popover.querySelectorAll("input");T[0].value=x.innerText,T[1].focus()}G=!1,z.classList.add("vditor-menu--current")}else if(X==="table"){var p='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(D.toString().trim()===""){if(J&&J.innerHTML.trim().replace(W.g.ZWSP,"")==="")J.outerHTML=p;else document.execCommand("insertHTML",!1,p);D.selectNode(w.wysiwyg.element.querySelector("wbr").previousSibling),w.wysiwyg.element.querySelector("wbr").remove(),(0,L.Hc)(D)}else{p='<table data-block="0"><thead><tr>';var u=D.toString().split(`
`),k=u[0].split(",").length>u[0].split("\t").length?",":"\t";u.forEach(function(r,D1){if(D1===0)r.split(k).forEach(function(G1,Y1){if(Y1===0)p+="<th>".concat(G1,"<wbr></th>");else p+="<th>".concat(G1,"</th>")}),p+="</tr></thead>";else{if(D1===1)p+="<tbody><tr>";else p+="<tr>";r.split(k).forEach(function(G1){p+="<td>".concat(G1,"</td>")}),p+="</tr>"}}),p+="</tbody></table>",document.execCommand("insertHTML",!1,p),(0,L.ib)(w.wysiwyg.element,D)}G=!1,z.classList.add("vditor-menu--disabled")}else if(X==="line"){if(J){var i=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;if(J.innerHTML.trim()==="")J.outerHTML=i;else J.insertAdjacentHTML("afterend",i);(0,L.ib)(w.wysiwyg.element,D)}}else{if(G=!1,z.classList.add("vditor-menu--current"),X==="strike")X="strikeThrough";if(D.toString()===""&&(X==="bold"||X==="italic"||X==="strikeThrough")){var a="strong";if(X==="italic")a="em";else if(X==="strikeThrough")a="s";var x=document.createElement(a);if(x.textContent=W.g.ZWSP,D.insertNode(x),x.previousSibling&&x.previousSibling.textContent===W.g.ZWSP)x.previousSibling.textContent="";D.setStart(x.firstChild,1),D.collapse(!0),(0,L.Hc)(D)}else document.execCommand(X,!1,"")}}if(G)e1(w);if(Q)J1(w)},j1=function(){function w(z,A){var G,Q=this;if(this.element=document.createElement("div"),A.className)(G=this.element.classList).add.apply(G,A.className.split(" "));var D=A.hotkey?" <".concat((0,$.ns)(A.hotkey),">"):"";if(A.level===2)D=A.hotkey?" &lt;".concat((0,$.ns)(A.hotkey),"&gt;"):"";var X=A.tip?A.tip+D:"".concat(window.VditorI18n[A.name]).concat(D),Y=A.name==="upload"?"div":"button";if(A.level===2)this.element.innerHTML="<".concat(Y,' data-type="').concat(A.name,'">').concat(X,"</").concat(Y,">");else{this.element.classList.add("vditor-toolbar__item");var K=document.createElement(Y);K.setAttribute("data-type",A.name),K.className="vditor-tooltipped vditor-tooltipped__".concat(A.tipPosition),K.setAttribute("aria-label",X),K.innerHTML=A.icon,this.element.appendChild(K)}if(!A.prefix)return;this.element.children[0].addEventListener((0,$.Le)(),function(J){if(J.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED))return;if(z.currentMode==="wysiwyg")E4(z,Q.element.children[0],J);else if(z.currentMode==="ir")G8(z,Q.element.children[0],A.prefix||"",A.suffix||"");else o4(z,Q.element.children[0],A.prefix||"",A.suffix||"")})}return w}(),l4=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),w0=function(w,z,A){var G;if(typeof A!=="string")P(w,["subToolbar","hint"]),A.preventDefault(),G=M(w);else G=A;if(w.currentMode===z&&typeof A!=="string")return;if(w.devtools)w.devtools.renderEchart(w);if(w.options.preview.mode==="both"&&z==="sv")w.preview.element.style.display="block";else w.preview.element.style.display="none";if(O(w.toolbar.elements,W.g.EDIT_TOOLBARS),V(w.toolbar.elements,W.g.EDIT_TOOLBARS),U(w.toolbar.elements,["outdent","indent"]),z==="ir")f(w.toolbar.elements,["both"]),H(w.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),w.sv.element.style.display="none",w.wysiwyg.element.parentElement.style.display="none",w.ir.element.parentElement.style.display="block",w.lute.SetVditorIR(!0),w.lute.SetVditorWYSIWYG(!1),w.lute.SetVditorSV(!1),w.currentMode="ir",w.ir.element.innerHTML=w.lute.Md2VditorIRDOM(G),r1(w,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),p1(w),w.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(D){N1(D,w)}),w.ir.element.querySelectorAll(".vditor-toc").forEach(function(D){(0,w1.H)(D,{cdn:w.options.cdn,math:w.options.preview.math})});else if(z==="wysiwyg")f(w.toolbar.elements,["both"]),H(w.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),w.sv.element.style.display="none",w.wysiwyg.element.parentElement.style.display="block",w.ir.element.parentElement.style.display="none",w.lute.SetVditorIR(!1),w.lute.SetVditorWYSIWYG(!0),w.lute.SetVditorSV(!1),w.currentMode="wysiwyg",p1(w),q5(w,G,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),w.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(D){(0,w1.H)(D,{cdn:w.options.cdn,math:w.options.preview.math})}),w.wysiwyg.popover.style.display="none";else if(z==="sv"){if(H(w.toolbar.elements,["both"]),f(w.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),w.wysiwyg.element.parentElement.style.display="none",w.ir.element.parentElement.style.display="none",w.options.preview.mode==="both")w.sv.element.style.display="block";else if(w.options.preview.mode==="editor")w.sv.element.style.display="block";w.lute.SetVditorIR(!1),w.lute.SetVditorWYSIWYG(!1),w.lute.SetVditorSV(!0),w.currentMode="sv";var Q=Y5(G,w);if(Q==="<div data-block='0'></div>")Q="";w.sv.element.innerHTML=Q,S1(w.sv.element),y1(w,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),p1(w)}if(w.undo.resetIcon(w),typeof A!=="string")w[w.currentMode].element.focus(),Q0(w);if(m1(w),S0(w),w.toolbar.elements["edit-mode"])w.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(D){D.classList.remove("vditor-menu--current")}),w.toolbar.elements["edit-mode"].querySelector('button[data-mode="'.concat(w.currentMode,'"]')).classList.add("vditor-menu--current");w.outline.toggle(w,w.currentMode!=="sv"&&w.options.outline.enable,typeof A!=="string")},m4=function(w){l4(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D=document.createElement("div");return D.className="vditor-hint".concat(G.level===2?"":" vditor-panel--arrow"),D.innerHTML='<button data-mode="wysiwyg">'.concat(window.VditorI18n.wysiwyg," &lt;").concat((0,$.ns)("⌥⌘7"),`></button>
<button data-mode="ir">`).concat(window.VditorI18n.instantRendering," &lt;").concat((0,$.ns)("⌥⌘8"),`></button>
<button data-mode="sv">`).concat(window.VditorI18n.splitView," &lt;").concat((0,$.ns)("⌥⌘9"),"></button>"),Q.element.appendChild(D),Q._bindEvent(A,D,G),Q}return z.prototype._bindEvent=function(A,G,Q){var D=this.element.children[0];j(A,G,D,Q.level),G.children.item(0).addEventListener((0,$.Le)(),function(X){w0(A,"wysiwyg",X),X.preventDefault(),X.stopPropagation()}),G.children.item(1).addEventListener((0,$.Le)(),function(X){w0(A,"ir",X),X.preventDefault(),X.stopPropagation()}),G.children.item(2).addEventListener((0,$.Le)(),function(X){w0(A,"sv",X),X.preventDefault(),X.stopPropagation()})},z}(j1),U0=function(w,z){if((0,L.Gb)(w,z))return getSelection().toString();return""},b0=function(w,z){z.addEventListener("focus",function(){if(w.options.focus)w.options.focus(M(w));P(w,["subToolbar","hint"])})},J5=function(w,z){z.addEventListener("dblclick",function(A){if(A.target.tagName==="IMG"){if(w.options.image.preview)w.options.image.preview(A.target);else if(w.options.image.isPreview)(0,o.E)(A.target,w.options.lang,w.options.theme)}})},u0=function(w,z){z.addEventListener("blur",function(A){if(w.currentMode==="ir"){var G=w.ir.element.querySelector(".vditor-ir__node--expand");if(G)G.classList.remove("vditor-ir__node--expand")}else if(w.currentMode==="wysiwyg"&&!w.wysiwyg.selectPopover.contains(A.relatedTarget))w.wysiwyg.hideComment();if(w[w.currentMode].range=(0,L.zh)(w),w.options.blur)w.options.blur(M(w))})},g0=function(w,z){z.addEventListener("dragstart",function(A){A.dataTransfer.setData(W.g.DROP_EDITOR,W.g.DROP_EDITOR)}),z.addEventListener("drop",function(A){if(A.dataTransfer.getData(W.g.DROP_EDITOR))e(w);else if(A.dataTransfer.types.includes("Files")||A.dataTransfer.types.includes("text/html"))I0(w,A,{pasteCode:function(G){document.execCommand("insertHTML",!1,G)}})})},p0=function(w,z,A){z.addEventListener("copy",function(G){return A(G,w)})},s0=function(w,z,A){z.addEventListener("cut",function(G){if(A(G,w),w.options.comment.enable&&w.currentMode==="wysiwyg")w.wysiwyg.getComments(w);document.execCommand("delete")})},B1=function(w){if(w.currentMode==="wysiwyg"&&w.options.comment.enable)w.options.comment.adjustTop(w.wysiwyg.getComments(w,!0));if(!w.options.typewriterMode)return;var z=w[w.currentMode].element,A=(0,L.Ny)(z).top;if(w.options.height==="auto"&&!w.element.classList.contains("vditor--fullscreen"))window.scrollTo(window.scrollX,A+w.element.offsetTop+w.toolbar.element.offsetHeight-window.innerHeight/2+10);if(w.options.height!=="auto"||w.element.classList.contains("vditor--fullscreen"))z.scrollTop=A+z.scrollTop-z.clientHeight/2+10},a0=function(w,z){z.addEventListener("keydown",function(A){if(!A.isComposing&&w.options.keydown)w.options.keydown(A);if((w.options.hint.extend.length>1||w.toolbar.elements.emoji)&&w.hint.select(A,w))return;if(w.options.comment.enable&&w.currentMode==="wysiwyg"&&(A.key==="Backspace"||c("⌘X",A)))w.wysiwyg.getComments(w);if(w.currentMode==="sv"){if(I1(w,A))return}else if(w.currentMode==="wysiwyg"){if(p4(w,A))return}else if(w.currentMode==="ir"){if(P1(w,A))return}if(w.options.ctrlEnter&&c("⌘Enter",A)){w.options.ctrlEnter(M(w)),A.preventDefault();return}if(c("⌘Z",A)&&!w.toolbar.elements.undo){w.undo.undo(w),A.preventDefault();return}if(c("⌘Y",A)&&!w.toolbar.elements.redo){w.undo.redo(w),A.preventDefault();return}if(A.key==="Escape"){if(w.hint.element.style.display==="block")w.hint.element.style.display="none";else if(w.options.esc&&!A.isComposing)w.options.esc(M(w));A.preventDefault();return}if((0,$.yl)(A)&&A.altKey&&!A.shiftKey&&/^Digit[1-6]$/.test(A.code)){if(w.currentMode==="wysiwyg"){var G=A.code.replace("Digit","H");if((0,Z.lG)(getSelection().getRangeAt(0).startContainer,G))c0(w);else B0(w,G);J1(w)}else if(w.currentMode==="sv")U5(w,"#".repeat(parseInt(A.code.replace("Digit",""),10))+" ");else if(w.currentMode==="ir")O0(w,"#".repeat(parseInt(A.code.replace("Digit",""),10))+" ");return A.preventDefault(),!0}if((0,$.yl)(A)&&A.altKey&&!A.shiftKey&&/^Digit[7-9]$/.test(A.code)){if(A.code==="Digit7")w0(w,"wysiwyg",A);else if(A.code==="Digit8")w0(w,"ir",A);else if(A.code==="Digit9")w0(w,"sv",A);return!0}w.options.toolbar.find(function(Q){if(!Q.hotkey||Q.toolbar){if(Q.toolbar){var D=Q.toolbar.find(function(X){if(!X.hotkey)return!1;if(c(X.hotkey,A))return w.toolbar.elements[X.name].children[0].dispatchEvent(new CustomEvent((0,$.Le)())),A.preventDefault(),!0});return D?!0:!1}return!1}if(c(Q.hotkey,A))return w.toolbar.elements[Q.name].children[0].dispatchEvent(new CustomEvent((0,$.Le)())),A.preventDefault(),!0})})},E0=function(w,z){z.addEventListener("selectstart",function(A){z.onmouseup=function(){setTimeout(function(){var G=U0(w[w.currentMode].element);if(G.trim()){if(w.currentMode==="wysiwyg"&&w.options.comment.enable)if(!(0,Z.a1)(A.target,"data-type","footnotes-block")&&!(0,Z.a1)(A.target,"data-type","link-ref-defs-block"))w.wysiwyg.showComment();else w.wysiwyg.hideComment();if(w.options.select)w.options.select(G)}else{if(w.currentMode==="wysiwyg"&&w.options.comment.enable)w.wysiwyg.hideComment();if(typeof w.options.unSelect==="function")w.options.unSelect()}})}})},l0=function(w,z){var A=(0,L.zh)(w);A.extractContents(),A.insertNode(document.createTextNode(Lute.Caret)),A.insertNode(document.createTextNode(z));var G=(0,Z.a1)(A.startContainer,"data-block","0");if(!G)G=w.sv.element;var Q=w.lute.SpinVditorSVDOM(G.textContent);if(Q="<div data-block='0'>"+Q.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",G.isEqualNode(w.sv.element))G.innerHTML=Q;else G.outerHTML=Q;S1(w.sv.element),(0,L.ib)(w.sv.element,A),B1(w)},H0=function(w,z,A){if(A===void 0)A=!0;var G=w;if(G.nodeType===3)G=G.parentElement;while(G){if(G.getAttribute("data-type")===z)return G;if(A)G=G.previousElementSibling;else G=G.nextElementSibling}return!1},Y5=function(w,z){R("SpinVditorSVDOM",w,"argument",z.options.debugger);var A=z.lute.SpinVditorSVDOM(w);return w="<div data-block='0'>"+A.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",R("SpinVditorSVDOM",w,"result",z.options.debugger),w},d4=function(w){var z=w.getAttribute("data-type"),A=w.previousElementSibling,G=z&&z!=="text"&&z!=="table"&&z!=="heading-marker"&&z!=="newline"&&z!=="yaml-front-matter-open-marker"&&z!=="yaml-front-matter-close-marker"&&z!=="code-block-info"&&z!=="code-block-close-marker"&&z!=="code-block-open-marker"?w.textContent:"",Q=!1;if(z==="newline")Q=!0;while(A&&!Q){var D=A.getAttribute("data-type");if(D==="li-marker"||D==="blockquote-marker"||D==="task-marker"||D==="padding"){var X=A.textContent;if(D==="li-marker"&&(z==="code-block-open-marker"||z==="code-block-info"))G=X.replace(/\S/g," ")+G;else if(z==="code-block-close-marker"&&A.nextElementSibling.isSameNode(w)){var Y=H0(w,"code-block-open-marker");if(Y&&Y.previousElementSibling)A=Y.previousElementSibling,G=X+G}else G=X+G}else if(D==="newline")Q=!0;A=A.previousElementSibling}return G},y1=function(w,z){if(z===void 0)z={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(z.enableHint)w.hint.render(w);w.preview.render(w);var A=M(w);if(typeof w.options.input==="function"&&z.enableInput)w.options.input(A);if(w.options.counter.enable)w.counter.render(w,A);if(w.options.cache.enable&&(0,$.pK)()){if(localStorage.setItem(w.options.cache.id,A),w.options.cache.after)w.options.cache.after(A)}if(w.devtools)w.devtools.renderEchart(w);clearTimeout(w.sv.processTimeoutId),w.sv.processTimeoutId=window.setTimeout(function(){if(z.enableAddUndoStack&&!w.sv.composingLock)w.undo.addToUndoStack(w)},w.options.undoDelay)},U5=function(w,z){var A=(0,L.zh)(w),G=(0,S.S)(A.startContainer,"SPAN");if(G&&G.textContent.trim()!=="")z=`
`+z;A.collapse(!0),document.execCommand("insertHTML",!1,z)},o4=function(w,z,A,G){var Q=(0,L.zh)(w),D=z.getAttribute("data-type");if(w.sv.element.childNodes.length===0)w.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,L.ib)(w.sv.element,Q);var X=(0,Z.F9)(Q.startContainer),Y=(0,S.S)(Q.startContainer,"SPAN");if(!X)return;if(D==="link"){var K=void 0;if(Q.toString()==="")K="".concat(A).concat(Lute.Caret).concat(G);else K="".concat(A).concat(Q.toString()).concat(G.replace(")",Lute.Caret+")"));document.execCommand("insertHTML",!1,K);return}else if(D==="italic"||D==="bold"||D==="strike"||D==="inline-code"||D==="code"||D==="table"||D==="line"){var K=void 0;if(Q.toString()==="")K="".concat(A).concat(Lute.Caret).concat(D==="code"?"":G);else K="".concat(A).concat(Q.toString()).concat(Lute.Caret).concat(D==="code"?"":G);if(D==="table"||D==="code"&&Y&&Y.textContent!=="")K=`

`+K;else if(D==="line")K=`

`.concat(A,`
`).concat(Lute.Caret);document.execCommand("insertHTML",!1,K);return}else if(D==="check"||D==="list"||D==="ordered-list"||D==="quote"){if(Y){var J="* ";if(D==="check")J="* [ ] ";else if(D==="ordered-list")J="1. ";else if(D==="quote")J="> ";var B=H0(Y,"newline");if(B)B.insertAdjacentText("afterend",J);else X.insertAdjacentText("afterbegin",J);X1(w);return}}(0,L.ib)(w.sv.element,Q),y1(w)},F5=function(w){switch(w.currentMode){case"ir":return w.ir.element;case"wysiwyg":return w.wysiwyg.element;case"sv":return w.sv.element}},K5=function(w,z){if(w.options.upload.setHeaders)w.options.upload.headers=w.options.upload.setHeaders();if(w.options.upload.headers)Object.keys(w.options.upload.headers).forEach(function(A){z.setRequestHeader(A,w.options.upload.headers[A])})},r4=function(w,z,A,G){function Q(D){return D instanceof A?D:new A(function(X){X(D)})}return new(A||(A=Promise))(function(D,X){function Y(B){try{J(G.next(B))}catch(x){X(x)}}function K(B){try{J(G.throw(B))}catch(x){X(x)}}function J(B){B.done?D(B.value):Q(B.value).then(Y,K)}J((G=G.apply(w,z||[])).next())})},v4=function(w,z){var A={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},G,Q,D,X;return X={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol==="function"&&(X[Symbol.iterator]=function(){return this}),X;function Y(J){return function(B){return K([J,B])}}function K(J){if(G)throw TypeError("Generator is already executing.");while(X&&(X=0,J[0]&&(A=0)),A)try{if(G=1,Q&&(D=J[0]&2?Q.return:J[0]?Q.throw||((D=Q.return)&&D.call(Q),0):Q.next)&&!(D=D.call(Q,J[1])).done)return D;if(Q=0,D)J=[J[0]&2,D.value];switch(J[0]){case 0:case 1:D=J;break;case 4:return A.label++,{value:J[1],done:!1};case 5:A.label++,Q=J[1],J=[0];continue;case 7:J=A.ops.pop(),A.trys.pop();continue;default:if((D=A.trys,!(D=D.length>0&&D[D.length-1]))&&(J[0]===6||J[0]===2)){A=0;continue}if(J[0]===3&&(!D||J[1]>D[0]&&J[1]<D[3])){A.label=J[1];break}if(J[0]===6&&A.label<D[1]){A.label=D[1],D=J;break}if(D&&A.label<D[2]){A.label=D[2],A.ops.push(J);break}if(D[2])A.ops.pop();A.trys.pop();continue}J=z.call(w,A)}catch(B){J=[6,B],Q=0}finally{G=D=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}},i4=function(){function w(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return w}(),n4=function(w,z){w.tip.hide();var A=[],G="",Q="",D=w.options.lang,X=w.options,Y=function(x,_){var C=z[_],T=!0;if(!C.name)G+="<li>".concat(window.VditorI18n.nameEmpty,"</li>"),T=!1;if(C.size>w.options.upload.max)G+="<li>".concat(C.name," ").concat(window.VditorI18n.over," ").concat(w.options.upload.max/1024/1024,"M</li>"),T=!1;var p=C.name.lastIndexOf("."),u=C.name.substr(p),k=w.options.upload.filename(C.name.substr(0,p))+u;if(w.options.upload.accept){var i=w.options.upload.accept.split(",").some(function(a){var r=a.trim();if(r.indexOf(".")===0){if(u.toLowerCase()===r.toLowerCase())return!0}else if(C.type.split("/")[0]===r.split("/")[0])return!0;return!1});if(!i)G+="<li>".concat(C.name," ").concat(window.VditorI18n.fileTypeError,"</li>"),T=!1}if(T)A.push(C),Q+="<li>".concat(k," ").concat(window.VditorI18n.uploading,' <a class="vditorCancelUpload" href="javascript:void(0)">').concat(window.VditorI18n.cancelUpload,"</a></li>")};for(var K=z.length,J=0;J<K;J++)Y(K,J);if(w.tip.show("<ul>".concat(G).concat(Q,"</ul>")),w.options.upload.cancel){var B=w.tip.element.querySelector(".vditorCancelUpload");if(B)B.addEventListener("click",function(){w.options.upload.cancel(A),w.tip.hide(),w.upload.isUploading=!1})}return A},t4=function(w,z){var A=F5(z);A.focus();var G=JSON.parse(w),Q="";if(G.code===1)Q="".concat(G.msg);if(G.data.errFiles&&G.data.errFiles.length>0)Q="<ul><li>".concat(Q,"</li>"),G.data.errFiles.forEach(function(X){var Y=X.lastIndexOf("."),K=z.options.upload.filename(X.substr(0,Y))+X.substr(Y);Q+="<li>".concat(K," ").concat(window.VditorI18n.uploadError,"</li>")}),Q+="</ul>";if(Q)z.tip.show(Q);else z.tip.hide();var D="";Object.keys(G.data.succMap).forEach(function(X){var Y=G.data.succMap[X],K=X.lastIndexOf("."),J=X.substr(K),B=z.options.upload.filename(X.substr(0,K))+J;if(J=J.toLowerCase(),J.indexOf(".wav")===0||J.indexOf(".mp3")===0||J.indexOf(".ogg")===0)if(z.currentMode==="wysiwyg")D+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`.concat(Y,'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="').concat(Y,`"></audio></pre></div>
`);else if(z.currentMode==="ir")D+='<audio controls="controls" src="'.concat(Y,`"></audio>
`);else D+="[".concat(B,"](").concat(Y,`)
`);else if(J.indexOf(".apng")===0||J.indexOf(".bmp")===0||J.indexOf(".gif")===0||J.indexOf(".ico")===0||J.indexOf(".cur")===0||J.indexOf(".jpg")===0||J.indexOf(".jpeg")===0||J.indexOf(".jfif")===0||J.indexOf(".pjp")===0||J.indexOf(".pjpeg")===0||J.indexOf(".png")===0||J.indexOf(".svg")===0||J.indexOf(".webp")===0)if(z.currentMode==="wysiwyg")D+='<img alt="'.concat(B,'" src="').concat(Y,`">
`);else D+="![".concat(B,"](").concat(Y,`)
`);else if(z.currentMode==="wysiwyg")D+='<a href="'.concat(Y,'">').concat(B,`</a>
`);else D+="[".concat(B,"](").concat(Y,`)
`)}),(0,L.Hc)(z.upload.range),document.execCommand("insertHTML",!1,D),z.upload.range=getSelection().getRangeAt(0).cloneRange()},m0=function(w,z,A){return r4(void 0,void 0,void 0,function(){var G,Q,T,D,X,X,Y,K,J,B,x,_,C,T,p,u;return v4(this,function(k){switch(k.label){case 0:G=[],Q=w.options.upload.multiple===!0?z.length:1;for(T=0;T<Q;T++){if(D=z[T],D instanceof DataTransferItem)D=D.getAsFile();G.push(D)}if(!w.options.upload.handler)return[3,2];return[4,w.options.upload.handler(G)];case 1:if(X=k.sent(),A)A.value="";if(typeof X==="string")return w.tip.show(X),[2];return[2];case 2:if(!w.options.upload.url||!w.upload){if(A)A.value="";return w.tip.show("please config: options.upload.url"),[2]}if(!w.options.upload.file)return[3,4];return[4,w.options.upload.file(G)];case 3:G=k.sent(),k.label=4;case 4:if(w.options.upload.validate){if(X=w.options.upload.validate(G),typeof X==="string")return w.tip.show(X),[2]}if(Y=F5(w),w.upload.range=(0,L.zh)(w),K=n4(w,G),K.length===0){if(A)A.value="";return[2]}J=new FormData,B=w.options.upload.extraData;for(x=0,_=Object.keys(B);x<_.length;x++)C=_[x],J.append(C,B[C]);for(T=0,p=K.length;T<p;T++)J.append(w.options.upload.fieldName,K[T]);if(u=new XMLHttpRequest,w.upload.xhr=u,u.open("POST",w.options.upload.url),w.options.upload.token)u.setRequestHeader("X-Upload-Token",w.options.upload.token);if(w.options.upload.withCredentials)u.withCredentials=!0;return K5(w,u),w.upload.isUploading=!0,Y.setAttribute("contenteditable","false"),u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE){if(w.upload.isUploading=!1,Y.setAttribute("contenteditable","true"),u.status>=200&&u.status<300)if(w.options.upload.success)w.options.upload.success(Y,u.responseText);else{var i=u.responseText;if(w.options.upload.format)i=w.options.upload.format(z,u.responseText);t4(i,w)}else if(w.options.upload.error)w.options.upload.error(u.responseText);else w.tip.show(u.responseText);if(A)A.value="";w.upload.element.style.display="none",w.upload.xhr=void 0}},u.upload.onprogress=function(i){if(!i.lengthComputable)return;var a=i.loaded/i.total*100;w.upload.element.style.display="block";var r=w.upload.element;r.style.width=a+"%"},u.send(J),[2]}})})},N0=function(w,z,A){var G,Q=(0,Z.F9)(z.startContainer);if(!Q)Q=w.wysiwyg.element;if(A&&A.inputType!=="formatItalic"&&A.inputType!=="deleteByDrag"&&A.inputType!=="insertFromDrop"&&A.inputType!=="formatBold"&&A.inputType!=="formatRemove"&&A.inputType!=="formatStrikeThrough"&&A.inputType!=="insertUnorderedList"&&A.inputType!=="insertOrderedList"&&A.inputType!=="formatOutdent"&&A.inputType!=="formatIndent"&&A.inputType!==""||!A){var D=_4(z.startContainer);if(D)D.remove();w.wysiwyg.element.querySelectorAll("wbr").forEach(function(a){a.remove()}),z.insertNode(document.createElement("wbr")),Q.querySelectorAll("[style]").forEach(function(a){a.removeAttribute("style")}),Q.querySelectorAll(".vditor-comment").forEach(function(a){if(a.textContent.trim()==="")a.classList.remove("vditor-comment","vditor-comment--focus"),a.removeAttribute("data-cmtids")}),(G=Q.previousElementSibling)===null||G===void 0||G.querySelectorAll(".vditor-comment").forEach(function(a){if(a.textContent.trim()==="")a.classList.remove("vditor-comment","vditor-comment--focus"),a.removeAttribute("data-cmtids")});var X="";if(Q.getAttribute("data-type")==="link-ref-defs-block")Q=w.wysiwyg.element;var Y=Q.isEqualNode(w.wysiwyg.element),K=(0,Z.a1)(Q,"data-type","footnotes-block");if(!Y){var J=(0,Z.O9)(z.startContainer);if(J&&!K){var B=(0,S.S)(z.startContainer,"BLOCKQUOTE");if(B)Q=(0,Z.F9)(z.startContainer)||Q;else Q=J}if(K)Q=K;if(X=Q.outerHTML,Q.tagName==="UL"||Q.tagName==="OL"){var{previousElementSibling:x,nextElementSibling:_}=Q;if(x&&(x.tagName==="UL"||x.tagName==="OL"))X=x.outerHTML+X,x.remove();if(_&&(_.tagName==="UL"||_.tagName==="OL"))X=X+_.outerHTML,_.remove();X=X.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}if(!Q.innerText.startsWith("```"))w.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(a){if(a&&!Q.isEqualNode(a))X+=a.outerHTML,a.remove()}),w.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(a){if(a&&!Q.isEqualNode(a))X+=a.outerHTML,a.remove()})}else X=Q.innerHTML;if(X=X.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),X==='<p data-block="0">```<wbr></p>'&&w.hint.recentLanguage)X='<p data-block="0">```<wbr></p>'.replace("```","```"+w.hint.recentLanguage);if(R("SpinVditorDOM",X,"argument",w.options.debugger),X=w.lute.SpinVditorDOM(X),R("SpinVditorDOM",X,"result",w.options.debugger),Y)Q.innerHTML=X;else if(Q.outerHTML=X,K){var C=(0,Z.E2)(w.wysiwyg.element.querySelector("wbr"),"LI");if(C){var T=w.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(C.getAttribute("data-marker"),'"]'));if(T)T.setAttribute("aria-label",C.textContent.trim().substr(0,24))}}var p,u=w.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");if(u.forEach(function(a,r){if(r===0)p=a;else p.insertAdjacentHTML("beforeend",a.innerHTML),a.remove()}),u.length>0)w.wysiwyg.element.insertAdjacentElement("beforeend",u[0]);var k,i=w.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");if(i.forEach(function(a,r){if(r===0)k=a;else k.insertAdjacentHTML("beforeend",a.innerHTML),a.remove()}),i.length>0)w.wysiwyg.element.insertAdjacentElement("beforeend",i[0]);if((0,L.ib)(w.wysiwyg.element,z),w.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(a){N1(a,w)}),A&&(A.inputType==="deleteContentBackward"||A.inputType==="deleteContentForward")&&w.options.comment.enable)w.wysiwyg.triggerRemoveComment(w),w.options.comment.adjustTop(w.wysiwyg.getComments(w,!0))}m1(w),J1(w,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},e4=function(w,z){if(Object.defineProperty)Object.defineProperty(w,"raw",{value:z});else w.raw=z;return w},O5=function(w,z,A,G){function Q(D){return D instanceof A?D:new A(function(X){X(D)})}return new(A||(A=Promise))(function(D,X){function Y(B){try{J(G.next(B))}catch(x){X(x)}}function K(B){try{J(G.throw(B))}catch(x){X(x)}}function J(B){B.done?D(B.value):Q(B.value).then(Y,K)}J((G=G.apply(w,z||[])).next())})},V5=function(w,z){var A={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},G,Q,D,X;return X={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol==="function"&&(X[Symbol.iterator]=function(){return this}),X;function Y(J){return function(B){return K([J,B])}}function K(J){if(G)throw TypeError("Generator is already executing.");while(X&&(X=0,J[0]&&(A=0)),A)try{if(G=1,Q&&(D=J[0]&2?Q.return:J[0]?Q.throw||((D=Q.return)&&D.call(Q),0):Q.next)&&!(D=D.call(Q,J[1])).done)return D;if(Q=0,D)J=[J[0]&2,D.value];switch(J[0]){case 0:case 1:D=J;break;case 4:return A.label++,{value:J[1],done:!1};case 5:A.label++,Q=J[1],J=[0];continue;case 7:J=A.ops.pop(),A.trys.pop();continue;default:if((D=A.trys,!(D=D.length>0&&D[D.length-1]))&&(J[0]===6||J[0]===2)){A=0;continue}if(J[0]===3&&(!D||J[1]>D[0]&&J[1]<D[3])){A.label=J[1];break}if(J[0]===6&&A.label<D[1]){A.label=D[1],D=J;break}if(D&&A.label<D[2]){A.label=D[2],A.ops.push(J);break}if(D[2])A.ops.pop();A.trys.pop();continue}J=z.call(w,A)}catch(B){J=[6,B],Q=0}finally{G=D=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}},P5=function(w,z,A){if(w.keyCode===229&&w.code===""&&w.key==="Unidentified"&&z.currentMode!=="sv"){var G=(0,Z.F9)(A);if(G&&G.textContent.trim()==="")return z[z.currentMode].composingLock=!0,!1}return!0},j5=function(w,z,A){if(A.key==="Enter"||A.key==="Tab"||A.key==="Backspace"||A.key.indexOf("Arrow")>-1||(0,$.yl)(A)||A.key==="Escape"||A.shiftKey||A.altKey)return;var G=(0,Z.lG)(w.startContainer,"P")||(0,Z.lG)(w.startContainer,"LI");if(G&&(0,L.im)(G,z[z.currentMode].element,w).start===0){if(G.nodeValue)G.nodeValue=G.nodeValue.replace(/\u2006/g,"");var Q=document.createTextNode(W.g.ZWSP);w.insertNode(Q),w.setStartAfter(Q)}},W5=function(w,z){if(z==="ArrowDown"||z==="ArrowUp"){var A=(0,Z.a1)(w.startContainer,"data-type","math-inline")||(0,Z.a1)(w.startContainer,"data-type","html-entity")||(0,Z.a1)(w.startContainer,"data-type","html-inline");if(A){if(z==="ArrowDown")w.setStartAfter(A.parentElement);if(z==="ArrowUp")w.setStartBefore(A.parentElement)}}},F0=function(w,z){var A=(0,L.zh)(w),G=(0,Z.F9)(A.startContainer);if(G)G.insertAdjacentHTML(z,'<p data-block="0">'.concat(W.g.ZWSP,`<wbr>
</p>`)),(0,L.ib)(w[w.currentMode].element,A),Q0(w),e(w)},w8=function(w){var z=(0,Z.lG)(w,"TABLE");if(z&&z.rows[0].cells[0].isSameNode(w))return z;return!1},z8=function(w){var z=(0,Z.lG)(w,"TABLE");if(z&&z.lastElementChild.lastElementChild.lastElementChild.isSameNode(w))return z;return!1},f5=function(w,z,A){if(A===void 0)A=!0;var G=w.previousElementSibling;if(!G)if(w.parentElement.previousElementSibling)G=w.parentElement.previousElementSibling.lastElementChild;else if(w.parentElement.parentElement.tagName==="TBODY"&&w.parentElement.parentElement.previousElementSibling)G=w.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild;else G=null;if(G){if(z.selectNodeContents(G),!A)z.collapse(!1);(0,L.Hc)(z)}return G},K0=function(w,z,A,G,Q){var D=(0,L.im)(G,w[w.currentMode].element,A);if(z.key==="ArrowDown"&&G.textContent.trimRight().substr(D.start).indexOf(`
`)===-1||z.key==="ArrowRight"&&D.start>=G.textContent.trimRight().length){var X=Q.nextElementSibling;if(!X||X&&(X.tagName==="TABLE"||X.getAttribute("data-type")))Q.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(W.g.ZWSP,"<wbr></p>")),(0,L.ib)(w[w.currentMode].element,A);else A.selectNodeContents(X),A.collapse(!0),(0,L.Hc)(A);return z.preventDefault(),!0}return!1},D0=function(w,z,A,G,Q){var D=(0,L.im)(G,w[w.currentMode].element,A);if(z.key==="ArrowUp"&&G.textContent.substr(0,D.start).indexOf(`
`)===-1||(z.key==="ArrowLeft"||z.key==="Backspace"&&A.toString()==="")&&D.start===0){var X=Q.previousElementSibling;if(!X||X&&(X.tagName==="TABLE"||X.getAttribute("data-type")))Q.insertAdjacentHTML("beforebegin",'<p data-block="0">'.concat(W.g.ZWSP,"<wbr></p>")),(0,L.ib)(w[w.currentMode].element,A);else A.selectNodeContents(X),A.collapse(!1),(0,L.Hc)(A);return z.preventDefault(),!0}return!1},y0=function(w,z,A,G){if(G===void 0)G=!0;var Q=(0,Z.lG)(z.startContainer,"LI");if(w[w.currentMode].element.querySelectorAll("wbr").forEach(function(B){B.remove()}),z.insertNode(document.createElement("wbr")),G&&Q){var D="";for(var X=0;X<Q.parentElement.childElementCount;X++){var Y=Q.parentElement.children[X].querySelector("input");if(Y)Y.remove();D+='<p data-block="0">'.concat(Q.parentElement.children[X].innerHTML.trimLeft(),"</p>")}Q.parentElement.insertAdjacentHTML("beforebegin",D),Q.parentElement.remove()}else if(!Q){var K=(0,Z.a1)(z.startContainer,"data-block","0");if(!K)w[w.currentMode].element.querySelector("wbr").remove(),K=w[w.currentMode].element.querySelector("p"),K.innerHTML="<wbr>";if(A==="check")K.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '.concat(K.innerHTML,"</li></ul>")),K.remove();else if(A==="list")K.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'.concat(K.innerHTML,"</li></ul>")),K.remove();else if(A==="ordered-list")K.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'.concat(K.innerHTML,"</li></ol>")),K.remove()}else if(A==="check")Q.parentElement.querySelectorAll("li").forEach(function(B){B.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'.concat(B.textContent.indexOf(" ")===0?"":" ")),B.classList.add("vditor-task")});else{if(Q.querySelector("input"))Q.parentElement.querySelectorAll("li").forEach(function(B){B.querySelector("input").remove(),B.classList.remove("vditor-task")});var J=void 0;if(A==="list")J=document.createElement("ul"),J.setAttribute("data-marker","*");else J=document.createElement("ol"),J.setAttribute("data-marker","1.");J.setAttribute("data-block","0"),J.setAttribute("data-tight",Q.parentElement.getAttribute("data-tight")),J.innerHTML=Q.parentElement.innerHTML,Q.parentElement.parentNode.replaceChild(J,Q.parentElement)}},S5=function(w,z,A){var G=z.previousElementSibling;if(z&&G){var Q=[z];Array.from(A.cloneContents().children).forEach(function(K,J){if(K.nodeType!==3&&z&&K.textContent.trim()!==""&&z.getAttribute("data-node-id")===K.getAttribute("data-node-id")){if(J!==0)Q.push(z);z=z.nextElementSibling}}),w[w.currentMode].element.querySelectorAll("wbr").forEach(function(K){K.remove()}),A.insertNode(document.createElement("wbr"));var D=G.parentElement,X="";if(Q.forEach(function(K){var J=K.getAttribute("data-marker");if(J.length!==1)J="1".concat(J.slice(-1));X+='<li data-node-id="'.concat(K.getAttribute("data-node-id"),'" data-marker="').concat(J,'">').concat(K.innerHTML,"</li>"),K.remove()}),G.insertAdjacentHTML("beforeend","<".concat(D.tagName,' data-block="0">').concat(X,"</").concat(D.tagName,">")),w.currentMode==="wysiwyg")D.outerHTML=w.lute.SpinVditorDOM(D.outerHTML);else D.outerHTML=w.lute.SpinVditorIRDOM(D.outerHTML);(0,L.ib)(w[w.currentMode].element,A);var Y=(0,Z.O9)(A.startContainer);if(Y)Y.querySelectorAll(".vditor-".concat(w.currentMode,"__preview[data-render='2']")).forEach(function(K){if(N1(K,w),w.currentMode==="wysiwyg")K.previousElementSibling.setAttribute("style","display:none")});e(w),Q0(w)}else w[w.currentMode].element.focus()},d0=function(w,z,A,G){var Q=(0,Z.lG)(z.parentElement,"LI");if(Q){w[w.currentMode].element.querySelectorAll("wbr").forEach(function(x){x.remove()}),A.insertNode(document.createElement("wbr"));var D=z.parentElement,X=D.cloneNode(),Y=[z];Array.from(A.cloneContents().children).forEach(function(x,_){if(x.nodeType!==3&&z&&x.textContent.trim()!==""&&z.getAttribute("data-node-id")===x.getAttribute("data-node-id")){if(_!==0)Y.push(z);z=z.nextElementSibling}});var K=!1,J="";if(D.querySelectorAll("li").forEach(function(x){if(K)if(J+=x.outerHTML,!x.nextElementSibling&&!x.previousElementSibling)x.parentElement.remove();else x.remove();if(x.isSameNode(Y[Y.length-1]))K=!0}),Y.reverse().forEach(function(x){Q.insertAdjacentElement("afterend",x)}),J)X.innerHTML=J,Y[0].insertAdjacentElement("beforeend",X);if(w.currentMode==="wysiwyg")G.outerHTML=w.lute.SpinVditorDOM(G.outerHTML);else G.outerHTML=w.lute.SpinVditorIRDOM(G.outerHTML);(0,L.ib)(w[w.currentMode].element,A);var B=(0,Z.O9)(A.startContainer);if(B)B.querySelectorAll(".vditor-".concat(w.currentMode,"__preview[data-render='2']")).forEach(function(x){if(N1(x,w),w.currentMode==="wysiwyg")x.previousElementSibling.setAttribute("style","display:none")});e(w),Q0(w)}else w[w.currentMode].element.focus()},L0=function(w,z){var A=getSelection().getRangeAt(0).startContainer.parentElement,G=w.rows[0].cells.length,Q=w.rows.length,D=0;for(var X=0;X<Q;X++)for(var Y=0;Y<G;Y++)if(w.rows[X].cells[Y].isSameNode(A)){D=Y;break}for(var K=0;K<Q;K++)w.rows[K].cells[D].setAttribute("align",z)},o0=function(w){var z=w.trimRight().split(`
`).pop();if(z==="")return!1;if(z.replace(/ |-/g,"")===""||z.replace(/ |_/g,"")===""||z.replace(/ |\*/g,"")===""){if(z.replace(/ /g,"").length>2){if(z.indexOf("-")>-1&&z.trimLeft().indexOf(" ")===-1&&w.trimRight().split(`
`).length>1)return!1;if(z.indexOf("    ")===0||z.indexOf("\t")===0)return!1;return!0}return!1}return!1},r0=function(w){var z=w.trimRight().split(`
`);if(w=z.pop(),w.indexOf("    ")===0||w.indexOf("\t")===0)return!1;if(w=w.trimLeft(),w===""||z.length===0)return!1;if(w.replace(/-/g,"")===""||w.replace(/=/g,"")==="")return!0;return!1},e=function(w,z){if(z===void 0)z={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(w.currentMode==="wysiwyg")J1(w,z);else if(w.currentMode==="ir")r1(w,z);else if(w.currentMode==="sv")y1(w,z)},B5=function(w,z,A,G){var Q,D=w.startContainer,X=(0,Z.lG)(D,"LI");if(X){if(!(0,$.yl)(G)&&!G.altKey&&G.key==="Enter"&&(!G.shiftKey&&A&&X.contains(A)&&A.nextElementSibling)){if(X&&!X.textContent.endsWith(`
`))X.insertAdjacentText("beforeend",`
`);return w.insertNode(document.createTextNode(`

`)),w.collapse(!1),e(z),G.preventDefault(),!0}if(!(0,$.yl)(G)&&!G.shiftKey&&!G.altKey&&G.key==="Backspace"&&!X.previousElementSibling&&w.toString()===""&&(0,L.im)(X,z[z.currentMode].element,w).start===0){if(X.nextElementSibling)X.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(X.innerHTML,"</p>")),X.remove();else X.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(X.innerHTML,"</p>");return(0,L.ib)(z[z.currentMode].element,w),e(z),G.preventDefault(),!0}if(!(0,$.yl)(G)&&!G.shiftKey&&!G.altKey&&G.key==="Backspace"&&X.textContent.trim().replace(W.g.ZWSP,"")===""&&w.toString()===""&&((Q=X.previousElementSibling)===null||Q===void 0?void 0:Q.tagName)==="LI")return X.previousElementSibling.insertAdjacentText("beforeend",`

`),w.selectNodeContents(X.previousElementSibling),w.collapse(!1),X.remove(),(0,L.ib)(z[z.currentMode].element,w),e(z),G.preventDefault(),!0;if(!(0,$.yl)(G)&&!G.altKey&&G.key==="Tab"){var Y=!1;if(w.startOffset===0&&(D.nodeType===3&&!D.previousSibling||D.nodeType!==3&&D.nodeName==="LI"))Y=!0;else if(X.classList.contains("vditor-task")&&w.startOffset===1&&D.previousSibling.nodeType!==3&&D.previousSibling.tagName==="INPUT")Y=!0;if(Y||w.toString()!==""){if(G.shiftKey)d0(z,X,w,X.parentElement);else S5(z,X,w);return G.preventDefault(),!0}}}return!1},v0=function(w,z,A){if(w.options.tab&&A.key==="Tab"){if(A.shiftKey);else if(z.toString()==="")z.insertNode(document.createTextNode(w.options.tab)),z.collapse(!1);else z.extractContents(),z.insertNode(document.createTextNode(w.options.tab)),z.collapse(!1);return(0,L.Hc)(z),e(w),A.preventDefault(),!0}},H5=function(w,z,A,G){if(!A)return;if(!(0,$.yl)(w)&&!w.altKey&&w.key==="Enter"){var Q=String.raw(c5||(c5=e4(["",""],["",""])),A.textContent).replace(/\\\|/g,"").trim(),D=Q.split("|");if(Q.startsWith("|")&&Q.endsWith("|")&&D.length>3){var X=D.map(function(){return"---"}).join("|");return X=A.textContent+`
`+X.substring(3,X.length-3)+`
|<wbr>`,A.outerHTML=z.lute.SpinVditorDOM(X),(0,L.ib)(z[z.currentMode].element,G),e(z),B1(z),w.preventDefault(),!0}if(o0(A.innerHTML)&&A.previousElementSibling){var Y="",K=A.innerHTML.trimRight().split(`
`);if(K.length>1)K.pop(),Y='<p data-block="0">'.concat(K.join(`
`),"</p>");return A.insertAdjacentHTML("afterend","".concat(Y,`<hr data-block="0"><p data-block="0"><wbr>
</p>`)),A.remove(),(0,L.ib)(z[z.currentMode].element,G),e(z),B1(z),w.preventDefault(),!0}if(r0(A.innerHTML)){if(z.currentMode==="wysiwyg")A.outerHTML=z.lute.SpinVditorDOM(A.innerHTML+`<p data-block="0"><wbr>
</p>`);else A.outerHTML=z.lute.SpinVditorIRDOM(A.innerHTML+`<p data-block="0"><wbr>
</p>`);return(0,L.ib)(z[z.currentMode].element,G),e(z),B1(z),w.preventDefault(),!0}}if(G.collapsed&&A.previousElementSibling&&w.key==="Backspace"&&!(0,$.yl)(w)&&!w.altKey&&!w.shiftKey&&A.textContent.trimRight().split(`
`).length>1&&(0,L.im)(A,z[z.currentMode].element,G).start===0){var J=(0,Z.DX)(A.previousElementSibling);if(!J.textContent.endsWith(`
`))J.textContent=J.textContent+`
`;return J.parentElement.insertAdjacentHTML("beforeend","<wbr>".concat(A.innerHTML)),A.remove(),(0,L.ib)(z[z.currentMode].element,G),!1}return!1},N5=function(w,z,A){var G="";for(var Q=0;Q<A.parentElement.childElementCount;Q++)G+='<td align="'.concat(A.parentElement.children[Q].getAttribute("align"),'"> </td>');if(A.tagName==="TH")A.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>".concat(G,"</tr></tbody>"));else A.parentElement.insertAdjacentHTML("afterend","<tr>".concat(G,"</tr>"));e(w)},y5=function(w,z,A){var G="";for(var Q=0;Q<A.parentElement.childElementCount;Q++)if(A.tagName==="TH")G+='<th align="'.concat(A.parentElement.children[Q].getAttribute("align"),'"> </th>');else G+='<td align="'.concat(A.parentElement.children[Q].getAttribute("align"),'"> </td>');if(A.tagName==="TH"){A.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>".concat(G,"</tr></thead>")),z.insertNode(document.createElement("wbr"));var D=A.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");A.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",D),A.parentElement.parentElement.remove(),(0,L.ib)(w.ir.element,z)}else A.parentElement.insertAdjacentHTML("beforebegin","<tr>".concat(G,"</tr>"));e(w)},x0=function(w,z,A,G){if(G===void 0)G="afterend";var Q=0,D=A.previousElementSibling;while(D)Q++,D=D.previousElementSibling;for(var X=0;X<z.rows.length;X++)if(X===0)z.rows[X].cells[Q].insertAdjacentHTML(G,"<th> </th>");else z.rows[X].cells[Q].insertAdjacentHTML(G,"<td> </td>");e(w)},L5=function(w,z,A){if(A.tagName==="TD"){var G=A.parentElement.parentElement;if(A.parentElement.previousElementSibling)z.selectNodeContents(A.parentElement.previousElementSibling.lastElementChild);else z.selectNodeContents(G.previousElementSibling.lastElementChild.lastElementChild);if(G.childElementCount===1)G.remove();else A.parentElement.remove();z.collapse(!1),(0,L.Hc)(z),e(w)}},x5=function(w,z,A,G){var Q=0,D=G.previousElementSibling;while(D)Q++,D=D.previousElementSibling;if(G.previousElementSibling||G.nextElementSibling)z.selectNodeContents(G.previousElementSibling||G.nextElementSibling),z.collapse(!0);for(var X=0;X<A.rows.length;X++){var Y=A.rows[X].cells;if(Y.length===1){A.remove(),Q0(w);break}Y[Q].remove()}(0,L.Hc)(z),e(w)},I5=function(w,z,A){var G=A.startContainer,Q=(0,Z.lG)(G,"TD")||(0,Z.lG)(G,"TH");if(Q){if(!(0,$.yl)(z)&&!z.altKey&&z.key==="Enter"){if(!Q.lastElementChild||Q.lastElementChild&&(!Q.lastElementChild.isSameNode(Q.lastChild)||Q.lastElementChild.tagName!=="BR"))Q.insertAdjacentHTML("beforeend","<br>");var D=document.createElement("br");return A.insertNode(D),A.setStartAfter(D),e(w),B1(w),z.preventDefault(),!0}if(z.key==="Tab"){if(z.shiftKey)return f5(Q,A),z.preventDefault(),!0;var X=Q.nextElementSibling;if(!X)if(Q.parentElement.nextElementSibling)X=Q.parentElement.nextElementSibling.firstElementChild;else if(Q.parentElement.parentElement.tagName==="THEAD"&&Q.parentElement.parentElement.nextElementSibling)X=Q.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;else X=null;if(X)A.selectNodeContents(X),(0,L.Hc)(A);return z.preventDefault(),!0}var Y=Q.parentElement.parentElement.parentElement;if(z.key==="ArrowUp"){if(z.preventDefault(),Q.tagName==="TH"){if(Y.previousElementSibling)A.selectNodeContents(Y.previousElementSibling),A.collapse(!1),(0,L.Hc)(A);else F0(w,"beforebegin");return!0}var K=0,J=Q.parentElement;for(;K<J.cells.length;K++)if(J.cells[K].isSameNode(Q))break;var B=J.previousElementSibling;if(!B)B=J.parentElement.previousElementSibling.firstChild;return A.selectNodeContents(B.cells[K]),A.collapse(!1),(0,L.Hc)(A),!0}if(z.key==="ArrowDown"){z.preventDefault();var J=Q.parentElement;if(!J.nextElementSibling&&Q.tagName==="TD"){if(Y.nextElementSibling)A.selectNodeContents(Y.nextElementSibling),A.collapse(!0),(0,L.Hc)(A);else F0(w,"afterend");return!0}var K=0;for(;K<J.cells.length;K++)if(J.cells[K].isSameNode(Q))break;var X=J.nextElementSibling;if(!X)X=J.parentElement.nextElementSibling.firstChild;return A.selectNodeContents(X.cells[K]),A.collapse(!0),(0,L.Hc)(A),!0}if(w.currentMode==="wysiwyg"&&!(0,$.yl)(z)&&z.key==="Enter"&&!z.shiftKey&&z.altKey){var x=w.wysiwyg.popover.querySelector(".vditor-input");return x.focus(),x.select(),z.preventDefault(),!0}if(!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey&&z.key==="Backspace"&&A.startOffset===0&&A.toString()===""){var _=f5(Q,A,!1);if(!_&&Y){if(Y.textContent.trim()==="")Y.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,L.ib)(w[w.currentMode].element,A);else A.setStartBefore(Y),A.collapse(!0);e(w)}return z.preventDefault(),!0}if(c("⇧⌘F",z))return y5(w,A,Q),z.preventDefault(),!0;if(c("⌘=",z))return N5(w,A,Q),z.preventDefault(),!0;if(c("⇧⌘G",z))return x0(w,Y,Q,"beforebegin"),z.preventDefault(),!0;if(c("⇧⌘=",z))return x0(w,Y,Q),z.preventDefault(),!0;if(c("⌘-",z))return L5(w,A,Q),z.preventDefault(),!0;if(c("⇧⌘-",z))return x5(w,A,Y,Q),z.preventDefault(),!0;if(c("⇧⌘L",z))if(w.currentMode==="ir")return L0(Y,"left"),e(w),z.preventDefault(),!0;else{var C=w.wysiwyg.popover.querySelector('[data-type="left"]');if(C)return C.click(),z.preventDefault(),!0}if(c("⇧⌘C",z))if(w.currentMode==="ir")return L0(Y,"center"),e(w),z.preventDefault(),!0;else{var C=w.wysiwyg.popover.querySelector('[data-type="center"]');if(C)return C.click(),z.preventDefault(),!0}if(c("⇧⌘R",z))if(w.currentMode==="ir")return L0(Y,"right"),e(w),z.preventDefault(),!0;else{var C=w.wysiwyg.popover.querySelector('[data-type="right"]');if(C)return C.click(),z.preventDefault(),!0}}return!1},R5=function(w,z,A,G){if(A.tagName==="PRE"&&c("⌘A",z))return G.selectNodeContents(A.firstElementChild),z.preventDefault(),!0;if(w.options.tab&&z.key==="Tab"&&!z.shiftKey&&G.toString()==="")return G.insertNode(document.createTextNode(w.options.tab)),G.collapse(!1),e(w),z.preventDefault(),!0;if(z.key==="Backspace"&&!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey){var Q=(0,L.im)(A,w[w.currentMode].element,G);if((Q.start===0||Q.start===1&&A.innerText===`
`)&&G.toString()==="")return A.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(A.firstElementChild.innerHTML,"</p>"),(0,L.ib)(w[w.currentMode].element,G),e(w),z.preventDefault(),!0}if(!(0,$.yl)(z)&&!z.altKey&&z.key==="Enter"){if(!A.firstElementChild.textContent.endsWith(`
`))A.firstElementChild.insertAdjacentText("beforeend",`
`);if(G.extractContents(),G.insertNode(document.createTextNode(`
`)),G.collapse(!1),(0,L.Hc)(G),!(0,$.vU)())if(w.currentMode==="wysiwyg")N0(w,G);else i1(w,G);return B1(w),z.preventDefault(),!0}return!1},M5=function(w,z,A,G){var Q=z.startContainer,D=(0,Z.lG)(Q,"BLOCKQUOTE");if(D&&z.toString()===""){if(A.key==="Backspace"&&!(0,$.yl)(A)&&!A.shiftKey&&!A.altKey&&(0,L.im)(D,w[w.currentMode].element,z).start===0)return z.insertNode(document.createElement("wbr")),D.outerHTML=D.innerHTML,(0,L.ib)(w[w.currentMode].element,z),e(w),A.preventDefault(),!0;if(G&&A.key==="Enter"&&!(0,$.yl)(A)&&!A.shiftKey&&!A.altKey&&G.parentElement.tagName==="BLOCKQUOTE"){var X=!1;if(G.innerHTML.replace(W.g.ZWSP,"")===`
`||G.innerHTML.replace(W.g.ZWSP,"")==="")X=!0,G.remove();else if(G.innerHTML.endsWith(`

`)&&(0,L.im)(G,w[w.currentMode].element,z).start===G.textContent.length-1)G.innerHTML=G.innerHTML.substr(0,G.innerHTML.length-2),X=!0;if(X)return D.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(W.g.ZWSP,`<wbr>
</p>`)),(0,L.ib)(w[w.currentMode].element,z),e(w),A.preventDefault(),!0}var Y=(0,Z.F9)(Q);if(w.currentMode==="wysiwyg"&&Y&&c("⇧⌘;",A))return z.insertNode(document.createElement("wbr")),Y.outerHTML='<blockquote data-block="0">'.concat(Y.outerHTML,"</blockquote>"),(0,L.ib)(w.wysiwyg.element,z),J1(w),A.preventDefault(),!0;if(K0(w,A,z,D,D))return!0;if(D0(w,A,z,D,D))return!0}return!1},h5=function(w,z,A){var G=z.startContainer,Q=(0,Z.lG)(G,"LI");if(Q&&Q.classList.contains("vditor-task")){if(c("⇧⌘J",A)){var D=Q.firstElementChild;if(D.checked)D.removeAttribute("checked");else D.setAttribute("checked","checked");return e(w),A.preventDefault(),!0}if(A.key==="Backspace"&&!(0,$.yl)(A)&&!A.shiftKey&&!A.altKey&&z.toString()===""&&z.startOffset===1&&(G.nodeType===3&&G.previousSibling&&G.previousSibling.tagName==="INPUT"||G.nodeType!==3)){var X=Q.previousElementSibling;if(Q.querySelector("input").remove(),X){var Y=(0,Z.DX)(X);Y.parentElement.insertAdjacentHTML("beforeend","<wbr>"+Q.innerHTML.trim()),Q.remove()}else if(Q.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(Q.innerHTML.trim()||`
`,"</p>")),Q.nextElementSibling)Q.remove();else Q.parentElement.remove();return(0,L.ib)(w[w.currentMode].element,z),e(w),A.preventDefault(),!0}if(A.key==="Enter"&&!(0,$.yl)(A)&&!A.shiftKey&&!A.altKey){if(Q.textContent.trim()==="")if((0,Z.fb)(Q.parentElement,"vditor-task")){var K=(0,Z.O9)(G);if(K)d0(w,Q,z,K)}else if(Q.nextElementSibling){var J="",B="",x=!1;Array.from(Q.parentElement.children).forEach(function(p){if(Q.isSameNode(p))x=!0;else if(x)J+=p.outerHTML;else B+=p.outerHTML});var _=Q.parentElement.tagName,C=Q.parentElement.tagName==="OL"?"":' data-marker="'.concat(Q.parentElement.getAttribute("data-marker"),'"'),T="";if(B)T=Q.parentElement.tagName==="UL"?"":' start="1"',B="<".concat(_,' data-tight="true"').concat(C,' data-block="0">').concat(B,"</").concat(_,">");Q.parentElement.outerHTML="".concat(B,`<p data-block="0"><wbr>
</p><`).concat(_,`
 data-tight="true"`).concat(C,' data-block="0"').concat(T,">").concat(J,"</").concat(_,">")}else if(Q.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),Q.parentElement.querySelectorAll("li").length===1)Q.parentElement.remove();else Q.remove();else if(G.nodeType!==3&&z.startOffset===0&&G.firstChild.tagName==="INPUT")z.setStart(G.childNodes[1],1);else z.setEndAfter(Q.lastChild),Q.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'.concat(Q.getAttribute("data-marker"),'"><input type="checkbox"> <wbr></li>')),document.querySelector("wbr").after(z.extractContents());return(0,L.ib)(w[w.currentMode].element,z),e(w),B1(w),A.preventDefault(),!0}}return!1},T5=function(w,z,A,G){if(z.startContainer.nodeType!==3){var Q=z.startContainer.children[z.startOffset];if(Q&&Q.tagName==="HR")return z.selectNodeContents(Q.previousElementSibling),z.collapse(!1),A.preventDefault(),!0}if(G){var D=G.previousElementSibling;if(D&&(0,L.im)(G,w[w.currentMode].element,z).start===0&&((0,$.vU)()&&D.tagName==="HR"||D.tagName==="TABLE")){if(D.tagName==="TABLE"){var X=D.lastElementChild.lastElementChild.lastElementChild;X.innerHTML=X.innerHTML.trimLeft()+"<wbr>"+G.textContent.trim(),G.remove()}else D.remove();return(0,L.ib)(w[w.currentMode].element,z),e(w),A.preventDefault(),!0}}return!1},C5=function(w){if((0,$.vU)()&&w.startContainer.nodeType!==3&&w.startContainer.tagName==="HR")w.setStartBefore(w.startContainer)},k5=function(w,z,A){var G,Q;if(!(0,$.vU)())return!1;if(w.key==="ArrowUp"&&z&&((G=z.previousElementSibling)===null||G===void 0?void 0:G.tagName)==="TABLE"){var D=z.previousElementSibling;return A.selectNodeContents(D.rows[D.rows.length-1].lastElementChild),A.collapse(!1),w.preventDefault(),!0}if(w.key==="ArrowDown"&&z&&((Q=z.nextElementSibling)===null||Q===void 0?void 0:Q.tagName)==="TABLE")return A.selectNodeContents(z.nextElementSibling.rows[0].cells[0]),A.collapse(!0),w.preventDefault(),!0;return!1},I0=function(w,z,A){return O5(void 0,void 0,void 0,function(){var G,Q,D,X,Y,K,J,B,x,_,C,T,p,k,u,k,i;return V5(this,function(a){switch(a.label){case 0:if(w[w.currentMode].element.getAttribute("contenteditable")!=="true")return[2];if(z.stopPropagation(),z.preventDefault(),"clipboardData"in z)G=z.clipboardData.getData("text/html"),Q=z.clipboardData.getData("text/plain"),D=z.clipboardData.files;else if(G=z.dataTransfer.getData("text/html"),Q=z.dataTransfer.getData("text/plain"),z.dataTransfer.types.includes("Files"))D=z.dataTransfer.items;if(X={},Y=function(r,D1){if(!D1)return["",Lute.WalkContinue];if(w.options.upload.renderLinkDest)return w.options.upload.renderLinkDest(w,r,D1);var G1=r.TokensStr();if(r.__internal_object__.Parent.Type===34&&G1&&G1.indexOf("file://")===-1&&w.options.upload.linkToImgUrl){var Y1=new XMLHttpRequest;if(Y1.open("POST",w.options.upload.linkToImgUrl),w.options.upload.token)Y1.setRequestHeader("X-Upload-Token",w.options.upload.token);if(w.options.upload.withCredentials)Y1.withCredentials=!0;K5(w,Y1),Y1.setRequestHeader("Content-Type","application/json; charset=utf-8"),Y1.onreadystatechange=function(){if(Y1.readyState===XMLHttpRequest.DONE){if(Y1.status===200){var T1=Y1.responseText;if(w.options.upload.linkToImgFormat)T1=w.options.upload.linkToImgFormat(Y1.responseText);var R1=JSON.parse(T1);if(R1.code!==0){w.tip.show(R1.msg);return}var C1=R1.data.originalURL;if(w.currentMode==="sv")w.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(k1){if(k1.textContent===C1)k1.textContent=R1.data.url});else{var z1=w[w.currentMode].element.querySelector('img[src="'.concat(C1,'"]'));if(z1.src=R1.data.url,w.currentMode==="ir")z1.previousElementSibling.previousElementSibling.innerHTML=R1.data.url}e(w)}else w.tip.show(Y1.responseText);if(w.options.upload.linkToImgCallback)w.options.upload.linkToImgCallback(Y1.responseText)}},Y1.send(JSON.stringify({url:G1}))}if(w.currentMode==="ir")return['<span class="vditor-ir__marker vditor-ir__marker--link">'.concat(Lute.EscapeHTMLStr(G1),"</span>"),Lute.WalkContinue];else if(w.currentMode==="wysiwyg")return["",Lute.WalkContinue];else return['<span class="vditor-sv__marker--link">'.concat(Lute.EscapeHTMLStr(G1),"</span>"),Lute.WalkContinue]},G.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'.concat(Q,'">').concat(Q,"</a>")||G.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'.concat(Q,'">').concat(Q,"</a><!--EndFragment-->"))G="";if(K=new DOMParser().parseFromString(G,"text/html"),K.body)G=K.body.innerHTML;if(G=Lute.Sanitize(G),w.wysiwyg.getComments(w),J=w[w.currentMode].element.scrollHeight,B=M1(G,Q,w.currentMode),x=w.currentMode==="sv"?(0,Z.a1)(z.target,"data-type","code-block"):(0,Z.lG)(z.target,"CODE"),!x)return[3,1];if(w.currentMode==="sv")document.execCommand("insertHTML",!1,Q.replace(/&/g,"&amp;").replace(/</g,"&lt;"));else{if(_=(0,L.im)(z.target,w[w.currentMode].element),x.parentElement.tagName!=="PRE")Q+=W.g.ZWSP;if(x.textContent=x.textContent.substring(0,_.start)+Q+x.textContent.substring(_.end),(0,L.$j)(_.start+Q.length,_.start+Q.length,x.parentElement),(i=x.parentElement)===null||i===void 0?void 0:i.nextElementSibling.classList.contains("vditor-".concat(w.currentMode,"__preview")))x.parentElement.nextElementSibling.innerHTML=x.outerHTML,N1(x.parentElement.nextElementSibling,w)}return[3,10];case 1:if(!B)return[3,2];return A.pasteCode(B),[3,10];case 2:if(G.trim()==="")return[3,5];if(C=document.createElement("div"),C.innerHTML=G,w.options.upload.base64ToLink)return[3,4];return[4,A8(w,C,("clipboardData"in z?z.clipboardData:z.dataTransfer).getData("text/rtf"))];case 3:a.sent(),a.label=4;case 4:if(C.querySelectorAll("[style]").forEach(function(r){r.removeAttribute("style")}),C.querySelectorAll(".vditor-copy").forEach(function(r){r.remove()}),w.currentMode==="ir")X.HTML2VditorIRDOM={renderLinkDest:Y},w.lute.SetJSRenderers({renderers:X}),(0,L.oC)(w.lute.HTML2VditorIRDOM(C.innerHTML),w);else if(w.currentMode==="wysiwyg")X.HTML2VditorDOM={renderLinkDest:Y},w.lute.SetJSRenderers({renderers:X}),(0,L.oC)(w.lute.HTML2VditorDOM(C.innerHTML),w);else X.Md2VditorSVDOM={renderLinkDest:Y},w.lute.SetJSRenderers({renderers:X}),l0(w,w.lute.HTML2Md(C.innerHTML).trimRight());return w.outline.render(w),[3,10];case 5:if(!(D.length>0))return[3,9];if(!(w.options.upload.url||w.options.upload.handler))return[3,7];return[4,m0(w,D)];case 6:return a.sent(),[3,8];case 7:if(T=new FileReader,"clipboardData"in z)D=z.clipboardData.files,p=D[0];else if(z.dataTransfer.types.includes("Files"))D=z.dataTransfer.items,p=D[0].getAsFile();if(p&&p.type.startsWith("image"))T.readAsDataURL(p),T.onload=function(){var r="";if(w.currentMode==="wysiwyg")r+='<img alt="'.concat(p.name,'" src="').concat(T.result.toString(),`">
`);else r+="![".concat(p.name,"](").concat(T.result.toString(),`)
`);document.execCommand("insertHTML",!1,r)};a.label=8;case 8:return[3,10];case 9:if(Q.trim()!==""&&D.length===0){if(k=(0,L.zh)(w),k.toString()!==""&&w.lute.IsValidLinkDest(Q))Q="[".concat(k.toString(),"](").concat(Q,")");if(w.currentMode==="ir")X.Md2VditorIRDOM={renderLinkDest:Y},w.lute.SetJSRenderers({renderers:X}),(0,L.oC)(Lute.Sanitize(w.lute.Md2VditorIRDOM(Q)),w);else if(w.currentMode==="wysiwyg")X.Md2VditorDOM={renderLinkDest:Y},w.lute.SetJSRenderers({renderers:X}),(0,L.oC)(Lute.Sanitize(w.lute.Md2VditorDOM(Q)),w);else X.Md2VditorSVDOM={renderLinkDest:Y},w.lute.SetJSRenderers({renderers:X}),l0(w,Q);w.outline.render(w)}a.label=10;case 10:if(w.currentMode!=="sv"){if(u=(0,Z.F9)((0,L.zh)(w).startContainer),u){if(k=(0,L.zh)(w),w[w.currentMode].element.querySelectorAll("wbr").forEach(function(r){r.remove()}),k.insertNode(document.createElement("wbr")),w.currentMode==="wysiwyg")u.outerHTML=w.lute.SpinVditorDOM(u.outerHTML);else u.outerHTML=w.lute.SpinVditorIRDOM(u.outerHTML);(0,L.ib)(w[w.currentMode].element,k)}w[w.currentMode].element.querySelectorAll(".vditor-".concat(w.currentMode,"__preview[data-render='2']")).forEach(function(r){N1(r,w)})}if(w.wysiwyg.triggerRemoveComment(w),e(w),w[w.currentMode].element.scrollHeight-J>Math.min(w[w.currentMode].element.clientHeight,window.innerHeight)/2)B1(w);return[2]}})})},A8=function(w,z,A){return O5(void 0,void 0,void 0,function(){var G,Q,D,X,Y,K,J,B,x,p,_,C,T,p,u,k;return V5(this,function(i){switch(i.label){case 0:if(!A)return[2];if(G=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,Q=new RegExp("(?:("+G.source+"))([\\da-fA-F\\s]+)\\}","g"),D=A.match(Q),X=[],D)for(Y=0,K=D;Y<K.length;Y++){if(J=K[Y],B=void 0,J.includes("\\pngblip"))B="image/png";else if(J.includes("\\jpegblip"))B="image/jpeg";if(B)X.push({hex:J.replace(G,"").replace(/[^\da-fA-F]/g,""),type:B})}x=[],i0(z,function(a){if(a.tagName==="V:SHAPE")return i0(a,function(r){if(r.tagName==="V:IMAGEDATA")x.push({shape:a,img:r})}),!1});for(p=0;p<x.length;p++)_=document.createElement("img"),C="data:"+X[p].type+";base64,"+btoa((X[p].hex.match(/\w{2}/g)||[]).map(function(a){return String.fromCharCode(parseInt(a,16))}).join("")),_.src=C,_.title=x[p].img.getAttribute("title"),x[p].shape.parentNode.replaceChild(_,x[p].shape);T=z.querySelectorAll("img"),p=0,i.label=1;case 1:if(!(p<T.length))return[3,4];if(u=T[p].src||"",!u)return[3,3];return k=T[p],[4,w.options.upload.base64ToLink(u)];case 2:k.src=i.sent(),i.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},i0=function(w,z){var A=z(w);if(A!==!1)for(var G=0;G<w.children.length;G++)i0(w.children[G],z)},c5,_5=function(w){var z,A;w.hint.render(w);var G=(0,L.zh)(w).startContainer,Q=(0,Z.a1)(G,"data-type","code-block-info");if(Q)if(Q.textContent.replace(W.g.ZWSP,"")===""&&w.hint.recentLanguage){Q.textContent=W.g.ZWSP+w.hint.recentLanguage;var D=(0,L.zh)(w);D.selectNodeContents(Q)}else{var X=[],Y=Q.textContent.substring(0,(0,L.im)(Q,w.ir.element).start).replace(W.g.ZWSP,"");(w.options.preview.hljs.langs||W.g.ALIAS_CODE_LANGUAGES.concat(((A=(z=window.hljs)===null||z===void 0?void 0:z.listLanguages())!==null&&A!==void 0?A:[]).sort())).forEach(function(K){if(K.indexOf(Y.toLowerCase())>-1)X.push({html:K,value:K})}),w.hint.genHTML(X,Y,w)}},r1=function(w,z){if(z===void 0)z={enableAddUndoStack:!0,enableHint:!1,enableInput:!0};if(z.enableHint)_5(w);clearTimeout(w.ir.processTimeoutId),w.ir.processTimeoutId=window.setTimeout(function(){if(w.ir.composingLock)return;var A=M(w);if(typeof w.options.input==="function"&&z.enableInput)w.options.input(A);if(w.options.counter.enable)w.counter.render(w,A);if(w.options.cache.enable&&(0,$.pK)()){if(localStorage.setItem(w.options.cache.id,A),w.options.cache.after)w.options.cache.after(A)}if(w.devtools)w.devtools.renderEchart(w);if(z.enableAddUndoStack)w.undo.addToUndoStack(w)},w.options.undoDelay)},O0=function(w,z){var A=(0,L.zh)(w),G=(0,Z.F9)(A.startContainer)||A.startContainer;if(G){var Q=G.querySelector(".vditor-ir__marker--heading");if(Q)Q.innerHTML=z;else G.insertAdjacentText("afterbegin",z),A.selectNodeContents(G),A.collapse(!1);i1(w,A.cloneRange()),q0(w)}},R0=function(w,z,A){var G=(0,Z.a1)(w.startContainer,"data-type",A);if(G){G.firstElementChild.remove(),G.lastElementChild.remove(),w.insertNode(document.createElement("wbr"));var Q=document.createElement("div");Q.innerHTML=z.lute.SpinVditorIRDOM(G.outerHTML),G.outerHTML=Q.firstElementChild.innerHTML.trim()}},G8=function(w,z,A,G){var Q=(0,L.zh)(w),D=z.getAttribute("data-type"),X=Q.startContainer;if(X.nodeType===3)X=X.parentElement;var Y=!0;if(z.classList.contains("vditor-menu--current")){if(D==="quote"){var K=(0,Z.lG)(X,"BLOCKQUOTE");if(K)Q.insertNode(document.createElement("wbr")),K.outerHTML=K.innerHTML.trim()===""?'<p data-block="0">'.concat(K.innerHTML,"</p>"):K.innerHTML}else if(D==="link"){var J=(0,Z.a1)(Q.startContainer,"data-type","a");if(J){var B=(0,Z.fb)(Q.startContainer,"vditor-ir__link");if(B)Q.insertNode(document.createElement("wbr")),J.outerHTML=B.innerHTML;else J.outerHTML=J.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else if(D==="italic")R0(Q,w,"em");else if(D==="bold")R0(Q,w,"strong");else if(D==="strike")R0(Q,w,"s");else if(D==="inline-code")R0(Q,w,"code");else if(D==="check"||D==="list"||D==="ordered-list")y0(w,Q,D),Y=!1,z.classList.remove("vditor-menu--current")}else{if(w.ir.element.childNodes.length===0)w.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,L.ib)(w.ir.element,Q);var x=(0,Z.F9)(Q.startContainer);if(D==="line"){if(x){var _=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;if(x.innerHTML.trim()==="")x.outerHTML=_;else x.insertAdjacentHTML("afterend",_)}}else if(D==="quote"){if(x)Q.insertNode(document.createElement("wbr")),x.outerHTML='<blockquote data-block="0">'.concat(x.outerHTML,"</blockquote>"),Y=!1,z.classList.add("vditor-menu--current")}else if(D==="link"){var C=void 0;if(Q.toString()==="")C="".concat(A,"<wbr>").concat(G);else C="".concat(A).concat(Q.toString()).concat(G.replace(")","<wbr>)"));document.execCommand("insertHTML",!1,C),Y=!1,z.classList.add("vditor-menu--current")}else if(D==="italic"||D==="bold"||D==="strike"||D==="inline-code"||D==="code"||D==="table"){var C=void 0;if(Q.toString()==="")C="".concat(A,"<wbr>").concat(G);else{if(D==="code")C="".concat(A,`
`).concat(Q.toString(),"<wbr>").concat(G);else if(D==="table")C="".concat(A).concat(Q.toString(),"<wbr>").concat(G);else C="".concat(A).concat(Q.toString()).concat(G,"<wbr>");Q.deleteContents()}if(D==="table"||D==="code")C=`
`+C+`

`;var T=document.createElement("span");if(T.innerHTML=C,Q.insertNode(T),i1(w,Q),D==="table")Q.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,L.Hc)(Q)}else if(D==="check"||D==="list"||D==="ordered-list")y0(w,Q,D,!1),Y=!1,V(w.toolbar.elements,["check","list","ordered-list"]),z.classList.add("vditor-menu--current")}if((0,L.ib)(w.ir.element,Q),r1(w),Y)q0(w)},Q8=function(w,z,A,G){function Q(D){return D instanceof A?D:new A(function(X){X(D)})}return new(A||(A=Promise))(function(D,X){function Y(B){try{J(G.next(B))}catch(x){X(x)}}function K(B){try{J(G.throw(B))}catch(x){X(x)}}function J(B){B.done?D(B.value):Q(B.value).then(Y,K)}J((G=G.apply(w,z||[])).next())})},D8=function(w,z){var A={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},G,Q,D,X;return X={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol==="function"&&(X[Symbol.iterator]=function(){return this}),X;function Y(J){return function(B){return K([J,B])}}function K(J){if(G)throw TypeError("Generator is already executing.");while(X&&(X=0,J[0]&&(A=0)),A)try{if(G=1,Q&&(D=J[0]&2?Q.return:J[0]?Q.throw||((D=Q.return)&&D.call(Q),0):Q.next)&&!(D=D.call(Q,J[1])).done)return D;if(Q=0,D)J=[J[0]&2,D.value];switch(J[0]){case 0:case 1:D=J;break;case 4:return A.label++,{value:J[1],done:!1};case 5:A.label++,Q=J[1],J=[0];continue;case 7:J=A.ops.pop(),A.trys.pop();continue;default:if((D=A.trys,!(D=D.length>0&&D[D.length-1]))&&(J[0]===6||J[0]===2)){A=0;continue}if(J[0]===3&&(!D||J[1]>D[0]&&J[1]<D[3])){A.label=J[1];break}if(J[0]===6&&A.label<D[1]){A.label=D[1],D=J;break}if(D&&A.label<D[2]){A.label=D[2],A.ops.push(J);break}if(D[2])A.ops.pop();A.trys.pop();continue}J=z.call(w,A)}catch(B){J=[6,B],Q=0}finally{G=D=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}},X8=function(){function w(z){var A=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(G,Q){A.element.style.display="none";var D=decodeURIComponent(G.getAttribute("data-value")),X=window.getSelection().getRangeAt(0);if(Q.currentMode==="ir"){var Y=(0,Z.a1)(X.startContainer,"data-type","code-block-info");if(Y){Y.textContent=W.g.ZWSP+D.trimRight(),X.selectNodeContents(Y),X.collapse(!1),r1(Q),Y.parentElement.querySelectorAll("code").forEach(function(x){x.className="language-"+D.trimRight()}),N1(Y.parentElement.querySelector(".vditor-ir__preview"),Q),A.recentLanguage=D.trimRight();return}}if(Q.currentMode==="wysiwyg"&&X.startContainer.nodeType!==3){var K=X.startContainer,J=void 0;if(K.classList.contains("vditor-input"))J=K;else J=K.firstElementChild;if(J&&J.classList.contains("vditor-input")){J.value=D.trimRight(),X.selectNodeContents(J),X.collapse(!1),J.dispatchEvent(new CustomEvent("input",{detail:1})),A.recentLanguage=D.trimRight();return}}if(X.setStart(X.startContainer,A.lastIndex),X.deleteContents(),Q.options.hint.parse)if(Q.currentMode==="sv")(0,L.oC)(Q.lute.SpinVditorSVDOM(D),Q);else if(Q.currentMode==="wysiwyg")(0,L.oC)(Q.lute.SpinVditorDOM(D),Q);else(0,L.oC)(Q.lute.SpinVditorIRDOM(D),Q);else(0,L.oC)(D,Q);if(A.splitChar===":"&&D.indexOf(":")>-1&&Q.currentMode!=="sv")X.insertNode(document.createTextNode(" "));if(X.collapse(!1),(0,L.Hc)(X),Q.currentMode==="wysiwyg"){var B=(0,Z.fb)(X.startContainer,"vditor-wysiwyg__block");if(B&&B.lastElementChild.classList.contains("vditor-wysiwyg__preview"))B.lastElementChild.innerHTML=B.firstElementChild.innerHTML,N1(B.lastElementChild,Q)}else if(Q.currentMode==="ir"){var B=(0,Z.fb)(X.startContainer,"vditor-ir__marker--pre");if(B&&B.nextElementSibling.classList.contains("vditor-ir__preview"))B.nextElementSibling.innerHTML=B.innerHTML,N1(B.nextElementSibling,Q)}e(Q)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",z.push({key:":"})}return w.prototype.render=function(z){var A=this;if(!window.getSelection().focusNode)return;var G,Q=getSelection().getRangeAt(0);G=Q.startContainer.textContent.substring(0,Q.startOffset)||"";var D=this.getKey(G,z.options.hint.extend);if(typeof D>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var X=D===""?z.options.hint.emoji:z.lute.GetEmojis(),Y=[];Object.keys(X).forEach(function(K){if(K.indexOf(D.toLowerCase())===0)if(X[K].indexOf(".")>-1)Y.push({html:'<img src="'.concat(X[K],'" title=":').concat(K,':"/> :').concat(K,":"),value:":".concat(K,":")});else Y.push({html:'<span class="vditor-hint__emoji">'.concat(X[K],"</span>").concat(K),value:X[K]})}),this.genHTML(Y,D,z)}else z.options.hint.extend.forEach(function(K){if(K.key===A.splitChar)clearTimeout(A.timeId),A.timeId=window.setTimeout(function(){return Q8(A,void 0,void 0,function(){var J;return D8(this,function(B){switch(B.label){case 0:return J=this.genHTML,[4,K.hint(D)];case 1:return J.apply(this,[B.sent(),D,z]),[2]}})})},z.options.hint.delay)})},w.prototype.genHTML=function(z,A,G){var Q=this;if(z.length===0){this.element.style.display="none";return}var D=G[G.currentMode].element,X=(0,L.Ny)(D),Y=X.left+(G.options.outline.position==="left"?G.outline.element.offsetWidth:0),K=X.top,J="";z.forEach(function(x,_){if(_>7)return;var C=x.html;if(A!==""){var T=C.lastIndexOf(">")+1,p=C.substr(T),u=p.toLowerCase().indexOf(A.toLowerCase());if(u>-1)p=p.substring(0,u)+"<b>"+p.substring(u,u+A.length)+"</b>"+p.substring(u+A.length),C=C.substr(0,T)+p}J+='<button type="button" data-value="'.concat(encodeURIComponent(x.value),` "
`).concat(_===0?"class='vditor-hint--current'":"","> ").concat(C,"</button>")}),this.element.innerHTML=J;var B=parseInt(document.defaultView.getComputedStyle(D,null).getPropertyValue("line-height"),10);if(this.element.style.top="".concat(K+(B||22),"px"),this.element.style.left="".concat(Y,"px"),this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(x){x.addEventListener("click",function(_){Q.fillEmoji(x,G),_.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight)this.element.style.top="".concat(K-this.element.offsetHeight,"px");if(this.element.getBoundingClientRect().right>window.innerWidth)this.element.style.left="auto",this.element.style.right="0"},w.prototype.select=function(z,A){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var G=this.element.querySelector(".vditor-hint--current");if(z.key==="ArrowDown"){if(z.preventDefault(),z.stopPropagation(),G.removeAttribute("class"),!G.nextElementSibling)this.element.children[0].className="vditor-hint--current";else G.nextElementSibling.className="vditor-hint--current";return!0}else if(z.key==="ArrowUp"){if(z.preventDefault(),z.stopPropagation(),G.removeAttribute("class"),!G.previousElementSibling){var Q=this.element.children.length;this.element.children[Q-1].className="vditor-hint--current"}else G.previousElementSibling.className="vditor-hint--current";return!0}else if(!(0,$.yl)(z)&&!z.shiftKey&&!z.altKey&&z.key==="Enter"&&!z.isComposing)return z.preventDefault(),z.stopPropagation(),this.fillEmoji(G,A),!0;return!1},w.prototype.getKey=function(z,A){var G=this;this.lastIndex=-1,this.splitChar="",A.forEach(function(J){var B=z.lastIndexOf(J.key);if(G.lastIndex<B)G.splitChar=J.key,G.lastIndex=B});var Q;if(this.lastIndex===-1)return Q;var D=z.split(this.splitChar),X=D[D.length-1],Y=32;if(D.length>1&&X.trim()===X)if(D.length===2&&D[0]===""&&D[1].length<Y)Q=D[1];else{var K=D[D.length-2].slice(-1);if((0,N.X)(K)===" "&&X.length<Y)Q=X}return Q},w}(),Z8=function(){function w(z){this.composingLock=!1;var A=document.createElement("div");A.className="vditor-ir",A.innerHTML='<pre class="vditor-reset" placeholder="'.concat(z.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>`),this.element=A.firstElementChild,this.bindEvent(z),b0(z,this.element),J5(z,this.element),u0(z,this.element),a0(z,this.element),E0(z,this.element),g0(z,this.element),p0(z,this.element,this.copy),s0(z,this.element,this.copy)}return w.prototype.copy=function(z,A){var G=getSelection().getRangeAt(0);if(G.toString()==="")return;z.stopPropagation(),z.preventDefault();var Q=document.createElement("div");Q.appendChild(G.cloneContents()),z.clipboardData.setData("text/plain",A.lute.VditorIRDOM2Md(Q.innerHTML).trim()),z.clipboardData.setData("text/html","")},w.prototype.bindEvent=function(z){var A=this;this.element.addEventListener("paste",function(G){I0(z,G,{pasteCode:function(Q){document.execCommand("insertHTML",!1,Q)}})}),this.element.addEventListener("scroll",function(){P(z,["hint"])}),this.element.addEventListener("compositionstart",function(G){A.composingLock=!0}),this.element.addEventListener("compositionend",function(G){if(!(0,$.vU)())i1(z,getSelection().getRangeAt(0).cloneRange());A.composingLock=!1}),this.element.addEventListener("input",function(G){if(G.inputType==="deleteByDrag"||G.inputType==="insertFromDrop")return;if(A.preventInput){A.preventInput=!1,r1(z,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}if(A.composingLock||G.data==="‘"||G.data==="“"||G.data==="《")return;i1(z,getSelection().getRangeAt(0).cloneRange(),!1,G)}),this.element.addEventListener("click",function(G){if(G.target.tagName==="INPUT"){if(G.target.checked)G.target.setAttribute("checked","checked");else G.target.removeAttribute("checked");A.preventInput=!0,r1(z);return}var Q=(0,L.zh)(z),D=(0,Z.fb)(G.target,"vditor-ir__preview");if(!D)D=(0,Z.fb)(Q.startContainer,"vditor-ir__preview");if(D){if(D.previousElementSibling.firstElementChild)Q.selectNodeContents(D.previousElementSibling.firstElementChild);else Q.selectNodeContents(D.previousElementSibling);Q.collapse(!0),(0,L.Hc)(Q),B1(z)}if(G.target.tagName==="IMG"){var X=G.target.parentElement.querySelector(".vditor-ir__marker--link");if(X)Q.selectNode(X),(0,L.Hc)(Q)}var Y=(0,Z.a1)(G.target,"data-type","a");if(Y&&!Y.classList.contains("vditor-ir__node--expand")){if(z.options.link.click)z.options.link.click(Y.querySelector(":scope > .vditor-ir__marker--link"));else if(z.options.link.isOpen)window.open(Y.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(G.target.isEqualNode(A.element)&&A.element.lastElementChild&&Q.collapsed){var K=A.element.lastElementChild.getBoundingClientRect();if(G.y>K.top+K.height)if(A.element.lastElementChild.tagName==="P"&&A.element.lastElementChild.textContent.trim().replace(W.g.ZWSP,"")==="")Q.selectNodeContents(A.element.lastElementChild),Q.collapse(!1);else A.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(W.g.ZWSP,"<wbr></p>")),(0,L.ib)(A.element,Q)}if(Q.toString()==="")g(Q,z);else setTimeout(function(){g((0,L.zh)(z),z)});W0(G,z),q0(z)}),this.element.addEventListener("keyup",function(G){if(G.isComposing||(0,$.yl)(G))return;if(G.key==="Enter")B1(z);if(q0(z),(G.key==="Backspace"||G.key==="Delete")&&z.ir.element.innerHTML!==""&&z.ir.element.childNodes.length===1&&z.ir.element.firstElementChild&&z.ir.element.firstElementChild.tagName==="P"&&z.ir.element.firstElementChild.childElementCount===0&&(z.ir.element.textContent===""||z.ir.element.textContent===`
`)){z.ir.element.innerHTML="";return}var Q=(0,L.zh)(z);if(G.key==="Backspace"){if((0,$.vU)()&&Q.startContainer.textContent===`
`&&Q.startOffset===1)Q.startContainer.textContent="",g(Q,z);A.element.querySelectorAll(".language-math").forEach(function(X){var Y=X.querySelector("br");if(Y)Y.remove()})}else if(G.key.indexOf("Arrow")>-1){if(G.key==="ArrowLeft"||G.key==="ArrowRight")_5(z);g(Q,z)}else if(G.keyCode===229&&G.code===""&&G.key==="Unidentified")g(Q,z);var D=(0,Z.fb)(Q.startContainer,"vditor-ir__preview");if(D){if(G.key==="ArrowUp"||G.key==="ArrowLeft"){if(D.previousElementSibling.firstElementChild)Q.selectNodeContents(D.previousElementSibling.firstElementChild);else Q.selectNodeContents(D.previousElementSibling);return Q.collapse(!1),G.preventDefault(),!0}if(D.tagName==="SPAN"&&(G.key==="ArrowDown"||G.key==="ArrowRight")){if(D.parentElement.getAttribute("data-type")==="html-entity")D.parentElement.insertAdjacentText("afterend",W.g.ZWSP),Q.setStart(D.parentElement.nextSibling,1);else Q.selectNodeContents(D.parentElement.lastElementChild);return Q.collapse(!1),G.preventDefault(),!0}}})},w}(),b5=function(w){if(w.currentMode==="sv")return w.lute.Md2HTML(M(w));else if(w.currentMode==="wysiwyg")return w.lute.VditorDOM2HTML(w.wysiwyg.element.innerHTML);else if(w.currentMode==="ir")return w.lute.VditorIRDOM2HTML(w.ir.element.innerHTML)},$8=v(214),u5=v(436),q8=function(){function w(z){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'.concat(z,`</div>
<div class="vditor-outline__content"></div>`)}return w.prototype.render=function(z){var A="";if(z.preview.element.style.display==="block")A=(0,u5.k)(z.preview.previewElement,this.element.lastElementChild,z);else A=(0,u5.k)(z[z.currentMode].element,this.element.lastElementChild,z);return A},w.prototype.toggle=function(z,A,G){var Q;if(A===void 0)A=!0;if(G===void 0)G=!0;var D=(Q=z.toolbar.elements.outline)===null||Q===void 0?void 0:Q.firstElementChild;if(A&&window.innerWidth>=W.g.MOBILE_WIDTH)this.element.style.display="block",this.render(z),D===null||D===void 0||D.classList.add("vditor-menu--current");else this.element.style.display="none",D===null||D===void 0||D.classList.remove("vditor-menu--current");if(G&&getSelection().rangeCount>0){var X=getSelection().getRangeAt(0);if(z[z.currentMode].element.contains(X.startContainer))(0,L.Hc)(X)}p1(z)},w}(),J8=v(280),Y8=function(){function w(z){var A=this;if(this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",z.options.classes.preview)this.previewElement.classList.add(z.options.classes.preview);this.previewElement.style.maxWidth=z.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(K){if(K.target.tagName==="TEXTAREA")return;var J=document.createElement("div");J.className="vditor-reset",J.appendChild(getSelection().getRangeAt(0).cloneContents()),A.copyToX(z,J,"default"),K.preventDefault()}),this.previewElement.addEventListener("click",function(K){var J=(0,Z.lG)(K.target,"SPAN");if(J&&(0,Z.fb)(J,"vditor-toc")){var B=A.previewElement.querySelector("#"+J.getAttribute("data-target-id"));if(B)A.element.scrollTop=B.offsetTop;return}if(K.target.tagName==="A"){if(z.options.link.click)z.options.link.click(K.target);else if(z.options.link.isOpen)window.open(K.target.getAttribute("href"));K.preventDefault();return}if(K.target.tagName==="IMG"){if(z.options.image.preview)z.options.image.preview(K.target);else if(z.options.image.isPreview)(0,o.E)(K.target,z.options.lang,z.options.theme)}}),this.element.appendChild(this.previewElement);var G=z.options.preview.actions;if(G.length===0)return;var Q=document.createElement("div");Q.className="vditor-preview__action";var D=[];for(var X=0;X<G.length;X++){var Y=G[X];if(typeof Y==="object"){D.push('<button type="button" data-type="'.concat(Y.key,'" class="').concat(Y.className,'"').concat(Y.tooltip?' aria-label="'.concat(Y.tooltip,'"'):"",'">').concat(Y.text,"</button>"));continue}switch(Y){case"desktop":D.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":D.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":D.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":D.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":D.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}Q.innerHTML=D.join(""),Q.addEventListener((0,$.Le)(),function(K){var J=(0,S.S)(K.target,"BUTTON");if(!J)return;var B=J.getAttribute("data-type"),x=G.find(function(_){return(_===null||_===void 0?void 0:_.key)===B});if(x){x.click(B);return}if(B==="mp-wechat"||B==="zhihu"){A.copyToX(z,A.previewElement.cloneNode(!0),B);return}if(B==="desktop")A.previewElement.style.width="auto";else if(B==="tablet")A.previewElement.style.width="780px";else A.previewElement.style.width="360px";if(A.previewElement.scrollWidth>A.previewElement.parentElement.clientWidth)A.previewElement.style.width="auto";A.render(z),Q.querySelectorAll("button").forEach(function(_){_.classList.remove("vditor-preview__action--current")}),J.classList.add("vditor-preview__action--current")}),this.element.insertBefore(Q,this.previewElement)}return w.prototype.render=function(z,A){var G=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){if(this.element.getAttribute("data-type")==="renderPerformance")z.tip.hide();return}if(A){this.previewElement.innerHTML=A;return}if(M(z).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var Q=new Date().getTime(),D=M(z);this.mdTimeoutId=window.setTimeout(function(){if(z.options.preview.url){var X=new XMLHttpRequest;X.open("POST",z.options.preview.url),X.setRequestHeader("Content-Type","application/json;charset=UTF-8"),X.onreadystatechange=function(){if(X.readyState===XMLHttpRequest.DONE)if(X.status===200){var K=JSON.parse(X.responseText);if(K.code!==0){z.tip.show(K.msg);return}if(z.options.preview.transform)K.data=z.options.preview.transform(K.data);G.previewElement.innerHTML=K.data,G.afterRender(z,Q)}else{var J=z.lute.Md2HTML(D);if(z.options.preview.transform)J=z.options.preview.transform(J);G.previewElement.innerHTML=J,G.afterRender(z,Q)}},X.send(JSON.stringify({markdownText:D}))}else{var Y=z.lute.Md2HTML(D);if(z.options.preview.transform)Y=z.options.preview.transform(Y);G.previewElement.innerHTML=Y,G.afterRender(z,Q)}},z.options.preview.delay)},w.prototype.afterRender=function(z,A){if(z.options.preview.parse)z.options.preview.parse(this.element);var G=new Date().getTime()-A;if(new Date().getTime()-A>2600)z.tip.show(window.VditorI18n.performanceTip.replace("${x}",G.toString())),z.preview.element.setAttribute("data-type","renderPerformance");else if(z.preview.element.getAttribute("data-type")==="renderPerformance")z.tip.hide(),z.preview.element.removeAttribute("data-type");var Q=z.preview.element.querySelector(".vditor-comment--focus");if(Q)Q.classList.remove("vditor-comment--focus");if((0,b.O)(z.preview.previewElement,z.options.preview.hljs),(0,t.s)(z.options.preview.hljs,z.preview.previewElement,z.options.cdn),(0,Z1.i)(z.preview.previewElement,z.options.cdn,z.options.theme),(0,f1.K)(z.preview.previewElement,z.options.cdn),(0,H1.J)(z.preview.previewElement,z.options.cdn,z.options.theme),(0,E.P)(z.preview.previewElement,z.options.cdn),(0,d.v)(z.preview.previewElement,z.options.cdn),(0,y.p)(z.preview.previewElement,z.options.cdn,z.options.theme),(0,O1.P)(z.preview.previewElement,z.options.cdn,z.options.theme),(0,q1.B)(z.preview.previewElement,z.options.cdn),(0,h.Q)(z.preview.previewElement,z.options.cdn),z.options.preview.render.media.enable)(0,J8.Y)(z.preview.previewElement);z.options.customRenders.forEach(function(Y){Y.render(z.preview.previewElement,z)});var D=z.preview.element,X=z.outline.render(z);if(X==="")X="[ToC]";D.querySelectorAll('[data-type="toc-block"]').forEach(function(Y){Y.innerHTML=X,(0,w1.H)(Y,{cdn:z.options.cdn,math:z.options.preview.math})}),(0,w1.H)(z.preview.previewElement,{cdn:z.options.cdn,math:z.options.preview.math})},w.prototype.copyToX=function(z,A,G){if(G===void 0)G="mp-wechat";if(G!=="zhihu")A.querySelectorAll(".katex-html .base").forEach(function(D){D.style.display="initial"});else A.querySelectorAll(".language-math").forEach(function(D){D.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'.concat(D.getAttribute("data-math"),'\\" style="display: block; margin: 0 auto; max-width: 100%;">')});A.style.backgroundColor="#fff",A.querySelectorAll("code").forEach(function(D){D.style.backgroundImage="none"}),this.element.append(A);var Q=A.ownerDocument.createRange();Q.selectNode(A),(0,L.Hc)(Q),document.execCommand("copy"),A.remove(),z.tip.show(["zhihu","mp-wechat"].includes(G)?"已复制，可到".concat(G==="zhihu"?"知乎":"微信公众号平台","进行粘贴"):"已复制到剪切板")},w}(),U8=function(){function w(z){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--".concat(z.options.resize.position),this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(z)}return w.prototype.bindEvent=function(z){var A=this;this.element.addEventListener("mousedown",function(G){var Q=document,D=G.clientY,X=z.element.offsetHeight,Y=63+z.element.querySelector(".vditor-toolbar").clientHeight;if(Q.ondragstart=function(){return!1},window.captureEvents)window.captureEvents();A.element.classList.add("vditor-resize--selected"),Q.onmousemove=function(K){if(z.options.resize.position==="top")z.element.style.height=Math.max(Y,X+(D-K.clientY))+"px";else z.element.style.height=Math.max(Y,X+(K.clientY-D))+"px";if(z.options.typewriterMode)z.sv.element.style.paddingBottom=z.sv.element.parentElement.offsetHeight/2+"px"},Q.onmouseup=function(){if(z.options.resize.after)z.options.resize.after(z.element.offsetHeight-X);if(window.captureEvents)window.captureEvents();Q.onmousemove=null,Q.onmouseup=null,Q.ondragstart=null,Q.onselectstart=null,Q.onselect=null,A.element.classList.remove("vditor-resize--selected")}})},w}(),F8=function(){function w(z){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",z.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(z),b0(z,this.element),u0(z,this.element),a0(z,this.element),E0(z,this.element),g0(z,this.element),p0(z,this.element,this.copy),s0(z,this.element,this.copy)}return w.prototype.copy=function(z,A){z.stopPropagation(),z.preventDefault(),z.clipboardData.setData("text/plain",U0(A[A.currentMode].element))},w.prototype.bindEvent=function(z){var A=this;this.element.addEventListener("paste",function(G){I0(z,G,{pasteCode:function(Q){document.execCommand("insertHTML",!1,Q)}})}),this.element.addEventListener("scroll",function(){if(z.preview.element.style.display!=="block")return;var G=A.element.scrollTop,Q=A.element.clientHeight,D=A.element.scrollHeight-parseFloat(A.element.style.paddingBottom||"0"),X=z.preview.element;if(G/Q>0.5)X.scrollTop=(G+Q)*X.scrollHeight/D-Q;else X.scrollTop=G*X.scrollHeight/D}),this.element.addEventListener("compositionstart",function(G){A.composingLock=!0}),this.element.addEventListener("compositionend",function(G){if(!(0,$.vU)())X1(z,G);A.composingLock=!1}),this.element.addEventListener("input",function(G){if(G.inputType==="deleteByDrag"||G.inputType==="insertFromDrop")return;if(A.composingLock||G.data==="‘"||G.data==="“"||G.data==="《")return;if(A.preventInput){A.preventInput=!1,y1(z,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}X1(z,G)}),this.element.addEventListener("keyup",function(G){if(G.isComposing||(0,$.yl)(G))return;if((G.key==="Backspace"||G.key==="Delete")&&z.sv.element.innerHTML!==""&&z.sv.element.childNodes.length===1&&z.sv.element.firstElementChild&&z.sv.element.firstElementChild.tagName==="DIV"&&z.sv.element.firstElementChild.childElementCount===2&&(z.sv.element.firstElementChild.textContent===""||z.sv.element.textContent===`
`)){z.sv.element.innerHTML="";return}if(G.key==="Enter")B1(z)})},w}(),g5=function(){function w(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return w.prototype.show=function(z,A){var G=this;if(A===void 0)A=6000;if(this.element.className="vditor-tip vditor-tip--show",A===0)this.element.innerHTML='<div class="vditor-tip__content">'.concat(z,`
<div class="vditor-tip__close">X</div></div>`),this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){G.hide()});else this.element.innerHTML='<div class="vditor-tip__content">'.concat(z,"</div>"),setTimeout(function(){G.hide()},A);this.element.removeAttribute("style"),setTimeout(function(){var Q=G.element.getBoundingClientRect();if(Q.top<46)G.element.style.position="fixed",G.element.style.top="46px"},150)},w.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},w}(),n0=function(w,z){if(z.options.preview.mode===w)return;switch(z.options.preview.mode=w,w){case"both":z.sv.element.style.display="block",z.preview.element.style.display="block",z.preview.render(z),F(z.toolbar.elements,["both"]);break;case"editor":z.sv.element.style.display="block",z.preview.element.style.display="none",V(z.toolbar.elements,["both"]);break;default:break}if(z.devtools)z.devtools.renderEchart(z)},K8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),O8=function(w){K8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;if(A.options.preview.mode==="both")Q.element.children[0].classList.add("vditor-menu--current");return Q.element.children[0].addEventListener((0,$.Le)(),function(D){var X=Q.element.firstElementChild;if(X.classList.contains(W.g.CLASS_MENU_DISABLED))return;if(D.preventDefault(),A.currentMode!=="sv")return;if(A.options.preview.mode==="both")n0("editor",A);else n0("both",A)}),Q}return z}(j1),V8=function(){function w(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return w}(),p5=v(580),P8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),j8=function(w){P8(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D=Q.element.children[0],X=document.createElement("div");X.className="vditor-hint".concat(G.level===2?"":" vditor-panel--arrow");var Y="";return W.g.CODE_THEME.forEach(function(K){Y+="<button>".concat(K,"</button>")}),X.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(Y,"</div>"),X.addEventListener((0,$.Le)(),function(K){if(K.target.tagName==="BUTTON")P(A,["subToolbar"]),A.options.preview.hljs.style=K.target.textContent,(0,p5.Y)(K.target.textContent,A.options.cdn),K.preventDefault(),K.stopPropagation()}),Q.element.appendChild(X),j(A,X,D,G.level),Q}return z}(j1),W8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),f8=function(w){W8(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D=Q.element.children[0],X=document.createElement("div");X.className="vditor-hint".concat(G.level===2?"":" vditor-panel--arrow");var Y="";return Object.keys(A.options.preview.theme.list).forEach(function(K){Y+='<button data-type="'.concat(K,'">').concat(A.options.preview.theme.list[K],"</button>")}),X.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(Y,"</div>"),X.addEventListener((0,$.Le)(),function(K){if(K.target.tagName==="BUTTON")P(A,["subToolbar"]),A.options.preview.theme.current=K.target.getAttribute("data-type"),(0,n.Z)(A.options.preview.theme.current,A.options.preview.theme.path),K.preventDefault(),K.stopPropagation()}),Q.element.appendChild(X),j(A,X,D,G.level),Q}return z}(j1),S8=function(){function w(z){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(z,"")}return w.prototype.render=function(z,A){var G=A.endsWith(`
`)?A.length-1:A.length;if(z.options.counter.type==="text"&&z[z.currentMode]){var Q=z[z.currentMode].element.cloneNode(!0);Q.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(D){D.remove()}),G=Q.textContent.length}if(typeof z.options.counter.max==="number"){if(G>z.options.counter.max)this.element.className="vditor-counter vditor-counter--error";else this.element.className="vditor-counter";this.element.innerHTML="".concat(G,"/").concat(z.options.counter.max)}else this.element.innerHTML="".concat(G);if(this.element.setAttribute("aria-label",z.options.counter.type),z.options.counter.after)z.options.counter.after(G,{enable:z.options.counter.enable,max:z.options.counter.max,type:z.options.counter.type})},w}(),B8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),H8=function(w){B8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].innerHTML=G.icon,Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),D.currentTarget.classList.contains(W.g.CLASS_MENU_DISABLED))return;G.click(D,A)}),Q}return z}(j1),N8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),y8=function(w){N8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.firstElementChild.addEventListener((0,$.Le)(),function(D){var X=Q.element.firstElementChild;if(X.classList.contains(W.g.CLASS_MENU_DISABLED))return;if(D.preventDefault(),X.classList.contains("vditor-menu--current"))X.classList.remove("vditor-menu--current"),A.devtools.element.style.display="none",p1(A);else X.classList.add("vditor-menu--current"),A.devtools.element.style.display="block",p1(A),A.devtools.renderEchart(A)}),Q}return z}(j1),L8=function(){function w(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return w}(),x8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),I8=function(w){x8(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D=document.createElement("div");D.className="vditor-panel vditor-panel--arrow";var X="";return Object.keys(A.options.hint.emoji).forEach(function(Y){var K=A.options.hint.emoji[Y];if(K.indexOf(".")>-1)X+='<button data-value=":'.concat(Y,': " data-key=":').concat(Y,`:"><img
data-value=":`).concat(Y,': " data-key=":').concat(Y,':" class="vditor-emojis__icon" src="').concat(K,'"/></button>');else X+='<button data-value="'.concat(K,` "
 data-key="`).concat(Y,'"><span class="vditor-emojis__icon">').concat(K,"</span></button>")}),D.innerHTML='<div class="vditor-emojis" style="max-height: '.concat(A.options.height==="auto"?"auto":A.options.height-80,'px">').concat(X,`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`).concat(A.options.hint.emojiTail||"",`</span>
</div>`),Q.element.appendChild(D),j(A,D,Q.element.firstElementChild,G.level),Q.bindEvent(A),Q}return z.prototype.bindEvent=function(A){var G=this;this.element.lastElementChild.addEventListener((0,$.Le)(),function(Q){var D=(0,S.S)(Q.target,"BUTTON");if(D){Q.preventDefault();var X=D.getAttribute("data-value"),Y=(0,L.zh)(A),K=X;if(A.currentMode==="wysiwyg")K=A.lute.SpinVditorDOM(X);else if(A.currentMode==="ir")K=A.lute.SpinVditorIRDOM(X);if(X.indexOf(":")>-1&&A.currentMode!=="sv"){var J=document.createElement("div");J.innerHTML=K,K=J.firstElementChild.firstElementChild.outerHTML+" ",(0,L.oC)(K,A)}else if(Y.extractContents(),Y.insertNode(document.createTextNode(X)),!(0,Z.F9)(Y.startContainer))k0(A,Y);Y.collapse(!1),(0,L.Hc)(Y),G.element.lastElementChild.style.display="none",e(A)}}),this.element.lastElementChild.addEventListener("mouseover",function(Q){var D=(0,S.S)(Q.target,"BUTTON");if(D)G.element.querySelector(".vditor-emojis__tip").innerHTML=D.getAttribute("data-key")})},z}(j1),s5=function(w,z,A){var G=document.createElement("a");if("download"in G)G.download=A,G.style.display="none",G.href=URL.createObjectURL(new Blob([z])),document.body.appendChild(G),G.click(),G.remove();else w.tip.show(window.VditorI18n.downloadTip,0)},R8=function(w){var z=M(w);s5(w,z,z.substr(0,10)+".md")},M8=function(w){w.tip.show(window.VditorI18n.generate,3800);var z=document.querySelector("#vditorExportIframe");z.contentDocument.open(),z.contentDocument.write('<link rel="stylesheet" href="'.concat(w.options.cdn,`/dist/index.css"/>
<script src="`).concat(w.options.cdn,`/dist/method.min.js"></script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`).concat(w.options.cdn,`",
    markdown: {
      theme: `).concat(JSON.stringify(w.options.preview.theme),`
    },
    hljs: {
      style: "`).concat(w.options.preview.hljs.style,`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
</script>`)),z.contentDocument.close(),setTimeout(function(){z.contentWindow.postMessage(M(w),"*")},200)},h8=function(w){var z=b5(w),A='<html><head><link rel="stylesheet" type="text/css" href="'.concat(w.options.cdn,`/dist/index.css"/>
<script src="`).concat(w.options.cdn,"/dist/js/i18n/").concat(w.options.lang,`.js"></script>
<script src="`).concat(w.options.cdn,`/dist/method.min.js"></script></head>
<body><div class="vditor-reset" id="preview">`).concat(z,`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`).concat(w.options.preview.theme.current,"', '").concat(w.options.preview.theme.path,`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`).concat(JSON.stringify(w.options.preview.hljs),", previewElement, '").concat(w.options.cdn,`');
    Vditor.mathRender(previewElement, {
        cdn: '`).concat(w.options.cdn,`',
        math: `).concat(JSON.stringify(w.options.preview.math),`,
    });
    Vditor.mermaidRender(previewElement, '`).concat(w.options.cdn,"', '").concat(w.options.theme,`');
    Vditor.SMILESRender(previewElement, '`).concat(w.options.cdn,"', '").concat(w.options.theme,`');
    Vditor.markmapRender(previewElement, '`).concat(w.options.cdn,`');
    Vditor.flowchartRender(previewElement, '`).concat(w.options.cdn,`');
    Vditor.graphvizRender(previewElement, '`).concat(w.options.cdn,`');
    Vditor.chartRender(previewElement, '`).concat(w.options.cdn,"', '").concat(w.options.theme,`');
    Vditor.mindmapRender(previewElement, '`).concat(w.options.cdn,"', '").concat(w.options.theme,`');
    Vditor.abcRender(previewElement, '`).concat(w.options.cdn,`');
    `).concat(w.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"",`
    Vditor.speechRender(previewElement);
</script>
<script src="`).concat(w.options.cdn,"/dist/js/icons/").concat(w.options.icon,'.js"></script></body></html>');s5(w,A,z.substr(0,10)+".html")},T8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),C8=function(w){T8(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D=Q.element.children[0],X=document.createElement("div");return X.className="vditor-hint".concat(G.level===2?"":" vditor-panel--arrow"),X.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,X.addEventListener((0,$.Le)(),function(Y){var K=Y.target;if(K.tagName==="BUTTON"){switch(K.getAttribute("data-type")){case"markdown":R8(A);break;case"pdf":M8(A);break;case"html":h8(A);break;default:break}P(A,["subToolbar"]),Y.preventDefault(),Y.stopPropagation()}}),Q.element.appendChild(X),j(A,X,D,G.level),Q}return z}(j1),k8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),c8=function(w){k8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q._bindEvent(A,G),Q}return z.prototype._bindEvent=function(A,G){this.element.children[0].addEventListener((0,$.Le)(),function(Q){if(Q.preventDefault(),A.element.className.includes("vditor--fullscreen")){if(!G.level)this.innerHTML=G.icon;if(A.element.style.zIndex="",document.body.style.overflow="",A.element.classList.remove("vditor--fullscreen"),Object.keys(A.toolbar.elements).forEach(function(D){var X=A.toolbar.elements[D].firstChild;if(X)X.className=X.className.replace("__s","__n"),A.options.toolbar.forEach(function(Y){if(typeof Y!=="string"&&Y.tipPosition&&Y.name===X.dataset.type)X.className="vditor-tooltipped vditor-tooltipped__".concat(Y.tipPosition)})}),A.counter)A.counter.element.className=A.counter.element.className.replace("__s","__n")}else{if(!G.level)this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>';if(A.element.style.zIndex=A.options.fullscreen.index.toString(),document.body.style.overflow="hidden",A.element.classList.add("vditor--fullscreen"),Object.keys(A.toolbar.elements).forEach(function(D){var X=A.toolbar.elements[D].firstChild;if(X)X.className=X.className.replace("__n","__s")}),A.counter)A.counter.element.className=A.counter.element.className.replace("__n","__s")}if(A.devtools)A.devtools.renderEchart(A);if(G.click)G.click(Q,A);p1(A),S0(A)})},z}(j1),_8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),b8=function(w){_8(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D=document.createElement("div");return D.className="vditor-hint vditor-panel--arrow",D.innerHTML='<button data-tag="h1" data-value="# ">'.concat(window.VditorI18n.heading1," ").concat((0,$.ns)("&lt;⌥⌘1>"),`</button>
<button data-tag="h2" data-value="## ">`).concat(window.VditorI18n.heading2," &lt;").concat((0,$.ns)("⌥⌘2"),`></button>
<button data-tag="h3" data-value="### ">`).concat(window.VditorI18n.heading3," &lt;").concat((0,$.ns)("⌥⌘3"),`></button>
<button data-tag="h4" data-value="#### ">`).concat(window.VditorI18n.heading4," &lt;").concat((0,$.ns)("⌥⌘4"),`></button>
<button data-tag="h5" data-value="##### ">`).concat(window.VditorI18n.heading5," &lt;").concat((0,$.ns)("⌥⌘5"),`></button>
<button data-tag="h6" data-value="###### ">`).concat(window.VditorI18n.heading6," &lt;").concat((0,$.ns)("⌥⌘6"),"></button>"),Q.element.appendChild(D),Q._bindEvent(A,D),Q}return z.prototype._bindEvent=function(A,G){var Q=this.element.children[0];Q.addEventListener((0,$.Le)(),function(X){if(X.preventDefault(),clearTimeout(A.wysiwyg.afterRenderTimeoutId),clearTimeout(A.ir.processTimeoutId),clearTimeout(A.sv.processTimeoutId),Q.classList.contains(W.g.CLASS_MENU_DISABLED))return;if(Q.blur(),Q.classList.contains("vditor-menu--current")){if(A.currentMode==="wysiwyg")c0(A),J1(A);else if(A.currentMode==="ir")O0(A,"");Q.classList.remove("vditor-menu--current")}else P(A,["subToolbar"]),G.style.display="block"});for(var D=0;D<6;D++)G.children.item(D).addEventListener((0,$.Le)(),function(X){if(X.preventDefault(),A.currentMode==="wysiwyg")B0(A,X.target.getAttribute("data-tag")),J1(A),Q.classList.add("vditor-menu--current");else if(A.currentMode==="ir")O0(A,X.target.getAttribute("data-value")),Q.classList.add("vditor-menu--current");else U5(A,X.target.getAttribute("data-value"));G.style.display="none"})},z}(j1),u8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),g8=function(w){u8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].addEventListener((0,$.Le)(),function(D){D.preventDefault(),A.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),Q}return z}(j1),p8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),s8=function(w){p8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED)||A.currentMode==="sv")return;var X=(0,L.zh)(A),Y=(0,Z.lG)(X.startContainer,"LI");if(Y)S5(A,Y,X)}),Q}return z}(j1),a8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),E8=function(w){a8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].addEventListener((0,$.Le)(),function(D){D.preventDefault(),A.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`.concat(W.H," / Lute v").concat(Lute.Version,`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`),0)}),Q}return z}(j1),l8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),m8=function(w){l8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED)||A.currentMode==="sv")return;F0(A,"afterend")}),Q}return z}(j1),d8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),o8=function(w){d8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED)||A.currentMode==="sv")return;F0(A,"beforebegin")}),Q}return z}(j1),r8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),v8=function(w){r8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED)||A.currentMode==="sv")return;var X=(0,L.zh)(A),Y=(0,Z.lG)(X.startContainer,"LI");if(Y)d0(A,Y,X,Y.parentElement)}),Q}return z}(j1),i8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),n8=function(w){i8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;if(A.options.outline)Q.element.firstElementChild.classList.add("vditor-menu--current");return Q.element.children[0].addEventListener((0,$.Le)(),function(D){D.preventDefault();var X=A.toolbar.elements.outline.firstElementChild;if(X.classList.contains(W.g.CLASS_MENU_DISABLED))return;A.options.outline.enable=!Q.element.firstElementChild.classList.contains("vditor-menu--current"),A.outline.toggle(A,A.options.outline.enable)}),Q}return z}(j1),t8=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),e8=function(w){t8(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q._bindEvent(A),Q}return z.prototype._bindEvent=function(A){var G=this;this.element.children[0].addEventListener((0,$.Le)(),function(Q){Q.preventDefault();var D=G.element.firstElementChild;if(D.classList.contains(W.g.CLASS_MENU_DISABLED))return;var X=W.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);if(D.classList.contains("vditor-menu--current")){if(D.classList.remove("vditor-menu--current"),A.currentMode==="sv")if(A.sv.element.style.display="block",A.options.preview.mode==="both")A.preview.element.style.display="block";else A.preview.element.style.display="none";else A[A.currentMode].element.parentElement.style.display="block",A.preview.element.style.display="none";O(A.toolbar.elements,X),A.outline.render(A)}else{if(U(A.toolbar.elements,X),A.preview.element.style.display="block",A.currentMode==="sv")A.sv.element.style.display="none";else A[A.currentMode].element.parentElement.style.display="none";A.preview.render(A),D.classList.add("vditor-menu--current"),P(A,["subToolbar","hint","popover"]),setTimeout(function(){A.outline.render(A)},A.options.preview.delay+10)}p1(A)})},z}(j1),ww=function(){function w(z){this.SAMPLE_RATE=5000,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var A;if(typeof AudioContext<"u")A=new AudioContext;else if(webkitAudioContext)A=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=A.sampleRate;var G=A.createGain(),Q=A.createMediaStreamSource(z);Q.connect(G),this.recorder=A.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,G.connect(this.recorder),this.recorder.connect(A.destination),this.readyFlag=!0}return w.prototype.cloneChannelData=function(z,A){this.leftChannel.push(new Float32Array(z)),this.rightChannel.push(new Float32Array(A)),this.recordingLength+=2048},w.prototype.startRecordingNewWavFile=function(){if(this.readyFlag)this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0},w.prototype.stopRecording=function(){this.isRecording=!1},w.prototype.buildWavFileBlob=function(){var z=this.mergeBuffers(this.leftChannel),A=this.mergeBuffers(this.rightChannel),G=new Float32Array(z.length);for(var Q=0;Q<z.length;++Q)G[Q]=0.5*(z[Q]+A[Q]);if(this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE)G=this.downSampleBuffer(G,this.SAMPLE_RATE);var D=44+G.length*2,X=new ArrayBuffer(D),Y=new DataView(X);this.writeUTFBytes(Y,0,"RIFF"),Y.setUint32(4,D,!0),this.writeUTFBytes(Y,8,"WAVE"),this.writeUTFBytes(Y,12,"fmt "),Y.setUint32(16,16,!0),Y.setUint16(20,1,!0),Y.setUint16(22,1,!0),Y.setUint32(24,this.SAMPLE_RATE,!0),Y.setUint32(28,this.SAMPLE_RATE*2,!0),Y.setUint16(32,2,!0),Y.setUint16(34,16,!0);var K=G.length*2;this.writeUTFBytes(Y,36,"data"),Y.setUint32(40,K,!0);var J=G.length,B=44,x=1;for(var _=0;_<J;_++)Y.setInt16(B,G[_]*(32767*x),!0),B+=2;return new Blob([Y],{type:"audio/wav"})},w.prototype.downSampleBuffer=function(z,A){if(A===this.DEFAULT_SAMPLE_RATE)return z;if(A>this.DEFAULT_SAMPLE_RATE)return z;var G=this.DEFAULT_SAMPLE_RATE/A,Q=Math.round(z.length/G),D=new Float32Array(Q),X=0,Y=0;while(X<D.length){var K=Math.round((X+1)*G),J=0,B=0;for(var x=Y;x<K&&x<z.length;x++)J+=z[x],B++;D[X]=J/B,X++,Y=K}return D},w.prototype.mergeBuffers=function(z){var A=new Float32Array(this.recordingLength),G=0,Q=z.length;for(var D=0;D<Q;++D){var X=z[D];A.set(X,G),G+=X.length}return A},w.prototype.writeUTFBytes=function(z,A,G){var Q=G.length;for(var D=0;D<Q;D++)z.setUint8(A+D,G.charCodeAt(D))},w}(),zw=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),Aw=function(w){zw(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return Q._bindEvent(A),Q}return z.prototype._bindEvent=function(A){var G=this,Q;this.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),G.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED))return;var X=A[A.currentMode].element;if(!Q){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(K){Q=new ww(K),Q.recorder.onaudioprocess=function(J){if(!Q.isRecording)return;var B=J.inputBuffer.getChannelData(0),x=J.inputBuffer.getChannelData(1);Q.cloneChannelData(B,x)},Q.startRecordingNewWavFile(),A.tip.show(window.VditorI18n.recording),X.setAttribute("contenteditable","false"),G.element.children[0].classList.add("vditor-menu--current")}).catch(function(){A.tip.show(window.VditorI18n["record-tip"])});return}if(Q.isRecording){Q.stopRecording(),A.tip.hide();var Y=new File([Q.buildWavFileBlob()],"record".concat(new Date().getTime(),".wav"),{type:"video/webm"});m0(A,[Y]),G.element.children[0].classList.remove("vditor-menu--current")}else A.tip.show(window.VditorI18n.recording),X.setAttribute("contenteditable","false"),Q.startRecordingNewWavFile(),G.element.children[0].classList.add("vditor-menu--current")})},z}(j1),Gw=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),Qw=function(w){Gw(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return U({redo:Q.element},["redo"]),Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED))return;A.undo.redo(A)}),Q}return z}(j1),Dw=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),Xw=function(w){Dw(z,w);function z(A,G){var Q=w.call(this,A,G)||this;return U({undo:Q.element},["undo"]),Q.element.children[0].addEventListener((0,$.Le)(),function(D){if(D.preventDefault(),Q.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED))return;A.undo.undo(A)}),Q}return z}(j1),Zw=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),$w=function(w){Zw(z,w);function z(A,G){var Q=w.call(this,A,G)||this,D='<input type="file"';if(A.options.upload.multiple)D+=' multiple="multiple"';if(A.options.upload.accept)D+=' accept="'.concat(A.options.upload.accept,'"');return Q.element.children[0].innerHTML="".concat(G.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>').concat(D,">"),Q._bindEvent(A),Q}return z.prototype._bindEvent=function(A){var G=this;this.element.children[0].addEventListener((0,$.Le)(),function(Q){if(G.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED)){Q.stopPropagation(),Q.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function(Q){if(G.element.firstElementChild.classList.contains(W.g.CLASS_MENU_DISABLED)){Q.stopPropagation(),Q.preventDefault();return}if(Q.target.files.length===0)return;m0(A,Q.target.files,Q.target)})},z}(j1),qw=function(){function w(z){var A=this,G=z.options;if(this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",G.toolbar.forEach(function(Q,D){var X=A.genItem(z,Q,D);if(A.element.appendChild(X),Q.toolbar){var Y=document.createElement("div");Y.className="vditor-hint vditor-panel--arrow",Y.addEventListener((0,$.Le)(),function(K){Y.style.display="none"}),Q.toolbar.forEach(function(K,J){K.level=2,Y.appendChild(A.genItem(z,K,D+J))}),X.appendChild(Y),j(z,Y,X.children[0],2)}}),z.options.toolbarConfig.hide)this.element.classList.add("vditor-toolbar--hide");if(z.options.toolbarConfig.pin)this.element.classList.add("vditor-toolbar--pin");if(z.options.counter.enable)z.counter=new S8(z),this.element.appendChild(z.counter.element)}return w.prototype.updateConfig=function(z,A){if(z.options.toolbarConfig=Object.assign({hide:!1,pin:!1},A),z.options.toolbarConfig.hide)this.element.classList.add("vditor-toolbar--hide");else this.element.classList.remove("vditor-toolbar--hide");if(z.options.toolbarConfig.pin)this.element.classList.add("vditor-toolbar--pin");else this.element.classList.remove("vditor-toolbar--pin")},w.prototype.genItem=function(z,A,G){var Q;switch(A.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":Q=new j1(z,A);break;case"emoji":Q=new I8(z,A);break;case"headings":Q=new b8(z,A);break;case"|":Q=new L8;break;case"br":Q=new V8;break;case"undo":Q=new Xw(z,A);break;case"redo":Q=new Qw(z,A);break;case"help":Q=new g8(z,A);break;case"both":Q=new O8(z,A);break;case"preview":Q=new e8(z,A);break;case"fullscreen":Q=new c8(z,A);break;case"upload":Q=new $w(z,A);break;case"record":Q=new Aw(z,A);break;case"info":Q=new E8(z,A);break;case"edit-mode":Q=new m4(z,A);break;case"devtools":Q=new y8(z,A);break;case"outdent":Q=new v8(z,A);break;case"indent":Q=new s8(z,A);break;case"outline":Q=new n8(z,A);break;case"insert-after":Q=new m8(z,A);break;case"insert-before":Q=new o8(z,A);break;case"code-theme":Q=new j8(z,A);break;case"content-theme":Q=new f8(z,A);break;case"export":Q=new C8(z,A);break;default:Q=new H8(z,A);break}if(!Q)return;var D=A.name;if(D==="br"||D==="|")D=D+G;return this.elements[D]=Q.element,Q.element},w}(),Jw=v(173),Yw=function(){function w(){this.stackSize=50,this.resetStack(),this.dmp=new Jw}return w.prototype.clearStack=function(z){this.resetStack(),this.resetIcon(z)},w.prototype.resetIcon=function(z){if(!z.toolbar)return;if(this[z.currentMode].undoStack.length>1)O(z.toolbar.elements,["undo"]);else U(z.toolbar.elements,["undo"]);if(this[z.currentMode].redoStack.length!==0)O(z.toolbar.elements,["redo"]);else U(z.toolbar.elements,["redo"])},w.prototype.undo=function(z){if(z[z.currentMode].element.getAttribute("contenteditable")==="false")return;if(this[z.currentMode].undoStack.length<2)return;var A=this[z.currentMode].undoStack.pop();if(!A)return;this[z.currentMode].redoStack.push(A),this.renderDiff(A,z),this[z.currentMode].hasUndo=!0,P(z,["hint"])},w.prototype.redo=function(z){if(z[z.currentMode].element.getAttribute("contenteditable")==="false")return;var A=this[z.currentMode].redoStack.pop();if(!A)return;this[z.currentMode].undoStack.push(A),this.renderDiff(A,z,!0)},w.prototype.recordFirstPosition=function(z,A){if(getSelection().rangeCount===0)return;if(this[z.currentMode].undoStack.length!==1||this[z.currentMode].undoStack[0].length===0||this[z.currentMode].redoStack.length>0)return;if((0,$.vU)()&&A.key==="Backspace")return;if((0,$.G6)())return;var G=this.addCaret(z);if(G.replace("<wbr>","").replace(" vditor-ir__node--expand","")!==this[z.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>",""))return;this[z.currentMode].undoStack[0][0].diffs[0][1]=G,this[z.currentMode].lastText=G},w.prototype.addToUndoStack=function(z){var A=this.addCaret(z,!0),G=this.dmp.diff_main(A,this[z.currentMode].lastText,!0),Q=this.dmp.patch_make(A,this[z.currentMode].lastText,G);if(Q.length===0&&this[z.currentMode].undoStack.length>0)return;if(this[z.currentMode].lastText=A,this[z.currentMode].undoStack.push(Q),this[z.currentMode].undoStack.length>this.stackSize)this[z.currentMode].undoStack.shift();if(this[z.currentMode].hasUndo)this[z.currentMode].redoStack=[],this[z.currentMode].hasUndo=!1,U(z.toolbar.elements,["redo"]);if(this[z.currentMode].undoStack.length>1)O(z.toolbar.elements,["undo"])},w.prototype.renderDiff=function(z,A,G){if(G===void 0)G=!1;var Q;if(G){var D=this.dmp.patch_deepCopy(z).reverse();D.forEach(function(Y){Y.diffs.forEach(function(K){K[0]=-K[0]})}),Q=this.dmp.patch_apply(D,this[A.currentMode].lastText)[0]}else Q=this.dmp.patch_apply(z,this[A.currentMode].lastText)[0];if(this[A.currentMode].lastText=Q,A[A.currentMode].element.innerHTML=Q,A.currentMode!=="sv")A[A.currentMode].element.querySelectorAll(".vditor-".concat(A.currentMode,"__preview")).forEach(function(Y){if(Y.parentElement.querySelector(".language-echarts"))if(A.currentMode==="ir")Y.parentElement.outerHTML=A.lute.SpinVditorIRDOM(Y.parentElement.outerHTML);else Y.parentElement.outerHTML=A.lute.SpinVditorDOM(Y.parentElement.outerHTML)}),A[A.currentMode].element.querySelectorAll(".vditor-".concat(A.currentMode,"__preview[data-render='2']")).forEach(function(Y){N1(Y,A)});if(!A[A.currentMode].element.querySelector("wbr")){var X=getSelection().getRangeAt(0);X.setEndBefore(A[A.currentMode].element),X.collapse(!1)}else(0,L.ib)(A[A.currentMode].element,A[A.currentMode].element.ownerDocument.createRange()),B1(A);if(m1(A),e(A,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),Q0(A),A[A.currentMode].element.querySelectorAll(".vditor-".concat(A.currentMode,"__preview[data-render='2']")).forEach(function(Y){N1(Y,A)}),this[A.currentMode].undoStack.length>1)O(A.toolbar.elements,["undo"]);else U(A.toolbar.elements,["undo"]);if(this[A.currentMode].redoStack.length!==0)O(A.toolbar.elements,["redo"]);else U(A.toolbar.elements,["redo"])},w.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},w.prototype.addCaret=function(z,A){if(A===void 0)A=!1;var G;if(getSelection().rangeCount!==0&&!z[z.currentMode].element.querySelector("wbr")){var Q=getSelection().getRangeAt(0);if(z[z.currentMode].element.contains(Q.startContainer)){G=Q.cloneRange();var D=document.createElement("span");D.className="vditor-wbr",Q.insertNode(D)}}var X=z[z.currentMode].element.cloneNode(!0);X.querySelectorAll(".vditor-".concat(z.currentMode,"__preview[data-render='1']")).forEach(function(K){if(!K.firstElementChild)return;if(K.firstElementChild.classList.contains("language-echarts")||K.firstElementChild.classList.contains("language-plantuml")||K.firstElementChild.classList.contains("language-mindmap"))K.firstElementChild.removeAttribute("_echarts_instance_"),K.firstElementChild.removeAttribute("data-processed"),K.firstElementChild.innerHTML=K.previousElementSibling.firstElementChild.innerHTML,K.setAttribute("data-render","2");else if(K.firstElementChild.classList.contains("language-math"))K.setAttribute("data-render","2"),K.firstElementChild.textContent=K.firstElementChild.getAttribute("data-math"),K.firstElementChild.removeAttribute("data-math")});var Y=X.innerHTML;if(z[z.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(K){K.remove()}),A&&G)(0,L.Hc)(G);return Y.replace('<span class="vditor-wbr"></span>',"<wbr>")},w}(),Uw=v(673),Fw=function(){function w(z){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:W.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"\uD83D\uDC4D","-1":"\uD83D\uDC4E",confused:"\uD83D\uDE15",eyes:"\uD83D\uDC40️",heart:"❤️",rocket:"\uD83D\uDE80️",smile:"\uD83D\uDE04",tada:"\uD83C\uDF89️"},emojiPath:"".concat(W.g.CDN,"/dist/images/emoji"),extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1000,hljs:W.g.HLJS_OPTIONS,markdown:W.g.MARKDOWN_OPTIONS,math:W.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:W.g.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(A){return A.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=z}return w.prototype.merge=function(){var z,A,G,Q,D,X,Y,K,J;if(this.options){if(this.options.toolbar)this.options.toolbar=this.mergeToolbar(this.options.toolbar);else this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar);if((A=(z=this.options.preview)===null||z===void 0?void 0:z.theme)===null||A===void 0?void 0:A.list)this.defaultOptions.preview.theme.list=this.options.preview.theme.list;if((D=(Q=(G=this.options.preview)===null||G===void 0?void 0:G.render)===null||Q===void 0?void 0:Q.media)===null||D===void 0?void 0:D.enable)this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable;if((X=this.options.hint)===null||X===void 0?void 0:X.emoji)this.defaultOptions.hint.emoji=this.options.hint.emoji;if(this.options.comment)this.defaultOptions.comment=this.options.comment;if(this.options.cdn){if(!((K=(Y=this.options.preview)===null||Y===void 0?void 0:Y.theme)===null||K===void 0?void 0:K.path))this.defaultOptions.preview.theme.path="".concat(this.options.cdn,"/dist/css/content-theme");if(!((J=this.options.hint)===null||J===void 0?void 0:J.emojiPath))this.defaultOptions.hint.emojiPath="".concat(this.options.cdn,"/dist/images/emoji")}}var B=(0,Uw.T)(this.defaultOptions,this.options);if(B.cache.enable&&!B.cache.id)throw Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return B},w.prototype.mergeToolbar=function(z){var A=this,G=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],Q=[];return z.forEach(function(D){var X=D;if(G.forEach(function(Y){if(typeof D==="string"&&Y.name===D)X=Y;if(typeof D==="object"&&Y.name===D.name)X=Object.assign({},Y,D)}),D.toolbar)X.toolbar=A.mergeToolbar(D.toolbar);Q.push(X)}),Q},w}(),Kw=function(){function w(z){var A=this;this.composingLock=!1,this.commentIds=[];var G=document.createElement("div");if(G.className="vditor-wysiwyg",G.innerHTML='<pre class="vditor-reset" placeholder="'.concat(z.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`).concat(window.VditorI18n.comment,`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`),this.element=G.firstElementChild,this.popover=G.firstElementChild.nextElementSibling,this.selectPopover=G.lastElementChild,this.bindEvent(z),b0(z,this.element),J5(z,this.element),u0(z,this.element),a0(z,this.element),E0(z,this.element),g0(z,this.element),p0(z,this.element,this.copy),s0(z,this.element,this.copy),z.options.comment.enable)this.selectPopover.querySelector("button").onclick=function(){var Q=Lute.NewNodeID(),D=getSelection().getRangeAt(0),X=D.cloneRange(),Y=D.extractContents(),K,J,B=!1,x=!1;Y.childNodes.forEach(function(T,p){var u=!1;if(T.nodeType===3)u=!0;else if(!T.classList.contains("vditor-comment"))u=!0;else if(T.classList.contains("vditor-comment"))T.setAttribute("data-cmtids",T.getAttribute("data-cmtids")+" "+Q);if(u)if(T.nodeType!==3&&T.getAttribute("data-block")==="0"&&p===0&&X.startOffset>0)T.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(Q,'">').concat(T.innerHTML,"</span>"),K=T;else if(T.nodeType!==3&&T.getAttribute("data-block")==="0"&&p===Y.childNodes.length-1&&X.endOffset<X.endContainer.textContent.length)T.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(Q,'">').concat(T.innerHTML,"</span>"),J=T;else if(T.nodeType!==3&&T.getAttribute("data-block")==="0"){if(p===0)B=!0;else if(p===Y.childNodes.length-1)x=!0;T.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(Q,'">').concat(T.innerHTML,"</span>")}else{var k=document.createElement("span");k.classList.add("vditor-comment"),k.setAttribute("data-cmtids",Q),T.parentNode.insertBefore(k,T),k.appendChild(T)}});var _=(0,Z.F9)(X.startContainer);if(_){if(K)_.insertAdjacentHTML("beforeend",K.innerHTML),K.remove();else if(_.textContent.trim().replace(W.g.ZWSP,"")===""&&B)_.remove()}var C=(0,Z.F9)(X.endContainer);if(C){if(J)C.insertAdjacentHTML("afterbegin",J.innerHTML),J.remove();else if(C.textContent.trim().replace(W.g.ZWSP,"")===""&&x)C.remove()}D.insertNode(Y),z.options.comment.add(Q,D.toString(),A.getComments(z,!0)),J1(z,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),A.hideComment()}}return w.prototype.getComments=function(z,A){var G=this;if(A===void 0)A=!1;if(z.currentMode==="wysiwyg"&&z.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(D){G.commentIds=G.commentIds.concat(D.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var Q=[];if(A)return this.commentIds.forEach(function(D){Q.push({id:D,top:G.element.querySelector('.vditor-comment[data-cmtids="'.concat(D,'"]')).offsetTop})}),Q}else return[]},w.prototype.triggerRemoveComment=function(z){var A=function(D,X){var Y=new Set(X);return D.filter(function(K){return!Y.has(K)})};if(z.currentMode==="wysiwyg"&&z.options.comment.enable&&z.wysiwyg.commentIds.length>0){var G=JSON.parse(JSON.stringify(this.commentIds));this.getComments(z);var Q=A(G,this.commentIds);if(Q.length>0)z.options.comment.remove(Q)}},w.prototype.showComment=function(){var z=(0,L.Ny)(this.element);this.selectPopover.setAttribute("style","left:".concat(z.left,"px;display:block;top:").concat(Math.max(-8,z.top-21),"px"))},w.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},w.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},w.prototype.copy=function(z,A){var G=getSelection().getRangeAt(0);if(G.toString()==="")return;z.stopPropagation(),z.preventDefault();var Q=(0,Z.lG)(G.startContainer,"CODE"),D=(0,Z.lG)(G.endContainer,"CODE");if(Q&&D&&D.isSameNode(Q)){var X="";if(Q.parentElement.tagName==="PRE")X=G.toString();else X="`"+G.toString()+"`";z.clipboardData.setData("text/plain",X),z.clipboardData.setData("text/html","");return}var Y=(0,Z.lG)(G.startContainer,"A"),K=(0,Z.lG)(G.endContainer,"A");if(Y&&K&&K.isSameNode(Y)){var J=Y.getAttribute("title")||"";if(J)J=' "'.concat(J,'"');z.clipboardData.setData("text/plain","[".concat(G.toString(),"](").concat(Y.getAttribute("href")).concat(J,")")),z.clipboardData.setData("text/html","");return}var B=document.createElement("div");B.appendChild(G.cloneContents()),z.clipboardData.setData("text/plain",A.lute.VditorDOM2Md(B.innerHTML).trim()),z.clipboardData.setData("text/html","")},w.prototype.bindEvent=function(z){var A=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(P(z,["hint"]),A.popover.style.display!=="block"||A.selectPopover.style.display!=="block")return;var G=parseInt(A.popover.getAttribute("data-top"),10);if(z.options.height!=="auto"){if(z.options.toolbarConfig.pin&&z.toolbar.element.getBoundingClientRect().top===0){var Q=Math.max(window.scrollY-z.element.offsetTop-8,Math.min(G-z.wysiwyg.element.scrollTop,A.element.clientHeight-21))+"px";if(A.popover.style.display==="block")A.popover.style.top=Q;if(A.selectPopover.style.display==="block")A.selectPopover.style.top=Q}return}else if(!z.options.toolbarConfig.pin)return;var D=Math.max(G,window.scrollY-z.element.offsetTop-8)+"px";if(A.popover.style.display==="block")A.popover.style.top=D;if(A.selectPopover.style.display==="block")A.selectPopover.style.top=D}),this.element.addEventListener("scroll",function(){if(P(z,["hint"]),z.options.comment&&z.options.comment.enable&&z.options.comment.scroll)z.options.comment.scroll(z.wysiwyg.element.scrollTop);if(A.popover.style.display!=="block")return;var G=parseInt(A.popover.getAttribute("data-top"),10)-z.wysiwyg.element.scrollTop,Q=-8;if(z.options.toolbarConfig.pin&&z.toolbar.element.getBoundingClientRect().top===0)Q=window.scrollY-z.element.offsetTop+Q;var D=Math.max(Q,Math.min(G,A.element.clientHeight-21))+"px";A.popover.style.top=D,A.selectPopover.style.top=D}),this.element.addEventListener("paste",function(G){I0(z,G,{pasteCode:function(Q){var D=(0,L.zh)(z),X=document.createElement("template");X.innerHTML=Q,D.insertNode(X.content.cloneNode(!0));var Y=(0,Z.a1)(D.startContainer,"data-block","0");if(Y)Y.outerHTML=z.lute.SpinVditorDOM(Y.outerHTML);else z.wysiwyg.element.innerHTML=z.lute.SpinVditorDOM(z.wysiwyg.element.innerHTML);(0,L.ib)(z.wysiwyg.element,D)}})}),this.element.addEventListener("compositionstart",function(){A.composingLock=!0}),this.element.addEventListener("compositionend",function(G){var Q=(0,S.W)(getSelection().getRangeAt(0).startContainer);if(Q&&Q.textContent===""){m1(z);return}if(!(0,$.vU)())N0(z,getSelection().getRangeAt(0).cloneRange(),G);A.composingLock=!1}),this.element.addEventListener("input",function(G){if(G.inputType==="deleteByDrag"||G.inputType==="insertFromDrop")return;if(A.preventInput){A.preventInput=!1,J1(z);return}if(A.composingLock||G.data==="‘"||G.data==="“"||G.data==="《"){J1(z);return}var Q=getSelection().getRangeAt(0),D=(0,Z.F9)(Q.startContainer);if(!D)k0(z,Q),D=(0,Z.F9)(Q.startContainer);if(!D)return;var X=(0,L.im)(D,z.wysiwyg.element,Q).start,Y=!0;for(var K=X-1;K>D.textContent.substr(0,X).lastIndexOf(`
`);K--)if(D.textContent.charAt(K)!==" "&&D.textContent.charAt(K)!=="\t"){Y=!1;break}if(X===0)Y=!1;var J=!0;for(var K=X-1;K<D.textContent.length;K++)if(D.textContent.charAt(K)!==" "&&D.textContent.charAt(K)!==`
`){J=!1;break}if(J&&/^#{1,6} $/.test(D.textContent))J=!1;var B=(0,S.W)(getSelection().getRangeAt(0).startContainer);if(B&&B.textContent==="")m1(z),B.remove();if(Y&&D.getAttribute("data-type")!=="code-block"||J||r0(D.innerHTML)||o0(D.innerHTML)&&D.previousElementSibling){if(typeof z.options.input==="function")z.options.input(M(z));return}if(G.inputType==="insertParagraph"&&A.element.innerHTML==="<p><br></p><p><br></p>")D.previousElementSibling.remove();N0(z,Q,G)}),this.element.addEventListener("click",function(G){if(G.target.tagName==="INPUT"){var Q=G.target;if(Q.checked)Q.setAttribute("checked","checked");else Q.removeAttribute("checked");if(A.preventInput=!0,getSelection().rangeCount>0)(0,L.Hc)(getSelection().getRangeAt(0));J1(z);return}if(G.target.tagName==="IMG"&&!G.target.parentElement.classList.contains("vditor-wysiwyg__preview")){if(G.target.getAttribute("data-type")==="link-ref")$5(z,G.target);else s4(G,z);return}var D=(0,Z.lG)(G.target,"A");if(D){if(z.options.link.click)z.options.link.click(D);else if(z.options.link.isOpen)window.open(D.getAttribute("href"));G.preventDefault();return}var X=(0,L.zh)(z);if(G.target.isEqualNode(A.element)&&A.element.lastElementChild&&X.collapsed){var Y=A.element.lastElementChild.getBoundingClientRect();if(G.y>Y.top+Y.height)if(A.element.lastElementChild.tagName==="P"&&A.element.lastElementChild.textContent.trim().replace(W.g.ZWSP,"")==="")X.selectNodeContents(A.element.lastElementChild),X.collapse(!1);else A.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(W.g.ZWSP,"<wbr></p>")),(0,L.ib)(A.element,X)}e1(z);var K=(0,Z.fb)(G.target,"vditor-wysiwyg__preview");if(!K)K=(0,Z.fb)((0,L.zh)(z).startContainer,"vditor-wysiwyg__preview");if(K)J0(K,z);W0(G,z)}),this.element.addEventListener("keyup",function(G){if(G.isComposing||(0,$.yl)(G))return;if(G.key==="Enter")B1(z);if((G.key==="Backspace"||G.key==="Delete")&&z.wysiwyg.element.innerHTML!==""&&z.wysiwyg.element.childNodes.length===1&&z.wysiwyg.element.firstElementChild&&z.wysiwyg.element.firstElementChild.tagName==="P"&&z.wysiwyg.element.firstElementChild.childElementCount===0&&(z.wysiwyg.element.textContent===""||z.wysiwyg.element.textContent===`
`))z.wysiwyg.element.innerHTML="";var Q=(0,L.zh)(z);if(G.key==="Backspace"){if((0,$.vU)()&&Q.startContainer.textContent===`
`&&Q.startOffset===1)Q.startContainer.textContent=""}if(k0(z,Q),e1(z),G.key!=="ArrowDown"&&G.key!=="ArrowRight"&&G.key!=="Backspace"&&G.key!=="ArrowLeft"&&G.key!=="ArrowUp")return;if(G.key==="ArrowLeft"||G.key==="ArrowRight")z.hint.render(z);var D=(0,Z.fb)(Q.startContainer,"vditor-wysiwyg__preview");if(!D&&Q.startContainer.nodeType!==3&&Q.startOffset>0){var X=Q.startContainer;if(X.classList.contains("vditor-wysiwyg__block"))D=X.lastElementChild}if(!D)return;var Y=D.previousElementSibling;if(Y.style.display==="none"){if(G.key==="ArrowDown"||G.key==="ArrowRight")J0(D,z);else J0(D,z,!1);return}var K=D.previousElementSibling;if(K.tagName==="PRE")K=K.firstElementChild;if(G.key==="ArrowDown"||G.key==="ArrowRight"){var X=D.parentElement,J=u4(X);if(J&&J.nodeType!==3){var B=J.querySelector(".vditor-wysiwyg__preview");if(B){J0(B,z);return}}if(J.nodeType===3){while(J.textContent.length===0&&J.nextSibling)J=J.nextSibling;Q.setStart(J,1)}else Q.setStart(J.firstChild,0)}else Q.selectNodeContents(K),Q.collapse(!1)})},w}(),Ow=function(){var w=function(z,A){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var D in Q)if(Object.prototype.hasOwnProperty.call(Q,D))G[D]=Q[D]},w(z,A)};return function(z,A){if(typeof A!=="function"&&A!==null)throw TypeError("Class extends value "+String(A)+" is not a constructor or null");w(z,A);function G(){this.constructor=z}z.prototype=A===null?Object.create(A):(G.prototype=A.prototype,new G)}}(),Vw=function(w){Ow(z,w);function z(A,G){var Q=w.call(this)||this;if(Q.isDestroyed=!1,Q.version=W.H,typeof A==="string"){if(!G)G={cache:{id:"vditor".concat(A)}};else if(!G.cache)G.cache={id:"vditor".concat(A)};else if(!G.cache.id)G.cache.id="vditor".concat(A);if(!document.getElementById(A))return Q.showErrorTip("Failed to get element by id: ".concat(A)),Q;A=document.getElementById(A)}var D=new Fw(G),X=D.merge();if(!X.i18n)if(!["de_DE","en_US","es_ES","fr_FR","ja_JP","ko_KR","pt_BR","ru_RU","sv_SE","vi_VN","zh_CN","zh_TW"].includes(X.lang))throw Error("options.lang error, see https://ld246.com/article/1549638745630#options");else{var Y="vditorI18nScript",K=Y+X.lang;document.querySelectorAll('head script[id^="'.concat(Y,'"]')).forEach(function(J){if(J.id!==K)document.head.removeChild(J)}),(0,I.G)("".concat(X.cdn,"/dist/js/i18n/").concat(X.lang,".js"),K).then(function(){Q.init(A,X)}).catch(function(J){Q.showErrorTip("GET ".concat(X.cdn,"/dist/js/i18n/").concat(X.lang,".js net::ERR_ABORTED 404 (Not Found)"))})}else window.VditorI18n=X.i18n,Q.init(A,X);return Q}return z.prototype.showErrorTip=function(A){var G=new g5;document.body.appendChild(G.element),G.show(A,0)},z.prototype.updateToolbarConfig=function(A){this.vditor.toolbar.updateConfig(this.vditor,A)},z.prototype.setTheme=function(A,G,Q,D){if(this.vditor.options.theme=A,V1(this.vditor),G)this.vditor.options.preview.theme.current=G,(0,n.Z)(G,D||this.vditor.options.preview.theme.path);if(Q)this.vditor.options.preview.hljs.style=Q,(0,p5.Y)(Q,this.vditor.options.cdn)},z.prototype.getValue=function(){return M(this.vditor)},z.prototype.getCurrentMode=function(){return this.vditor.currentMode},z.prototype.focus=function(){if(this.vditor.currentMode==="sv")this.vditor.sv.element.focus();else if(this.vditor.currentMode==="wysiwyg")this.vditor.wysiwyg.element.focus();else if(this.vditor.currentMode==="ir")this.vditor.ir.element.focus()},z.prototype.blur=function(){if(this.vditor.currentMode==="sv")this.vditor.sv.element.blur();else if(this.vditor.currentMode==="wysiwyg")this.vditor.wysiwyg.element.blur();else if(this.vditor.currentMode==="ir")this.vditor.ir.element.blur()},z.prototype.disabled=function(){P(this.vditor,["subToolbar","hint","popover"]),U(this.vditor.toolbar.elements,W.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},z.prototype.enable=function(){O(this.vditor.toolbar.elements,W.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},z.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return U0(this.vditor.wysiwyg.element);else if(this.vditor.currentMode==="sv")return U0(this.vditor.sv.element);else if(this.vditor.currentMode==="ir")return U0(this.vditor.ir.element)},z.prototype.renderPreview=function(A){this.vditor.preview.render(this.vditor,A)},z.prototype.getCursorPosition=function(){return(0,L.Ny)(this.vditor[this.vditor.currentMode].element)},z.prototype.isUploading=function(){return this.vditor.upload.isUploading},z.prototype.clearCache=function(){if(this.vditor.options.cache.enable&&(0,$.pK)())localStorage.removeItem(this.vditor.options.cache.id)},z.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},z.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},z.prototype.html2md=function(A){return this.vditor.lute.HTML2Md(A)},z.prototype.exportJSON=function(A){return this.vditor.lute.RenderJSON(A)},z.prototype.getHTML=function(){return b5(this.vditor)},z.prototype.tip=function(A,G){this.vditor.tip.show(A,G)},z.prototype.setPreviewMode=function(A){n0(A,this.vditor)},z.prototype.deleteValue=function(){if(window.getSelection().isCollapsed)return;document.execCommand("delete",!1)},z.prototype.updateValue=function(A){document.execCommand("insertHTML",!1,A)},z.prototype.insertValue=function(A,G){if(G===void 0)G=!0;var Q=(0,L.zh)(this.vditor);Q.collapse(!0);var D=document.createElement("template");if(D.innerHTML=A,Q.insertNode(D.content.cloneNode(!0)),Q.collapse(!1),this.vditor.currentMode==="sv"){if(this.vditor.sv.preventInput=!0,G)X1(this.vditor)}else if(this.vditor.currentMode==="wysiwyg"){if(G)N0(this.vditor,getSelection().getRangeAt(0))}else if(this.vditor.currentMode==="ir"){if(this.vditor.ir.preventInput=!0,G)i1(this.vditor,getSelection().getRangeAt(0),!0)}},z.prototype.insertMD=function(A){if(this.vditor.currentMode==="ir")(0,L.oC)(this.vditor.lute.Md2VditorIRDOM(A),this.vditor);else if(this.vditor.currentMode==="wysiwyg")(0,L.oC)(this.vditor.lute.Md2VditorDOM(A),this.vditor);else l0(this.vditor,A);this.vditor.outline.render(this.vditor),e(this.vditor)},z.prototype.setValue=function(A,G){var Q=this;if(G===void 0)G=!1;if(this.vditor.currentMode==="sv")this.vditor.sv.element.innerHTML="<div data-block='0'>".concat(this.vditor.lute.SpinVditorSVDOM(A),"</div>"),y1(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1});else if(this.vditor.currentMode==="wysiwyg")q5(this.vditor,A,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1});else this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(A),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(D){N1(D,Q.vditor)}),r1(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1});if(this.vditor.outline.render(this.vditor),!A){if(P(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover)this.vditor.wysiwyg.popover.style.display="none";this.clearCache()}if(G)this.clearStack()},z.prototype.insertEmptyBlock=function(A){F0(this.vditor,A)},z.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},z.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var A=document.getElementById("vditorIconScript");if(A)A.remove();this.clearCache(),D5(),this.vditor.wysiwyg.unbindListener(),this.vditor.options.after=void 0,this.isDestroyed=!0},z.prototype.getCommentIds=function(){if(this.vditor.currentMode!=="wysiwyg")return[];return this.vditor.wysiwyg.getComments(this.vditor,!0)},z.prototype.hlCommentIds=function(A){if(this.vditor.currentMode!=="wysiwyg")return;var G=function(Q){Q.classList.remove("vditor-comment--hover"),A.forEach(function(D){if(Q.getAttribute("data-cmtids").indexOf(D)>-1)Q.classList.add("vditor-comment--hover")})};if(this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(Q){G(Q)}),this.vditor.preview.element.style.display!=="none")this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(Q){G(Q)})},z.prototype.unHlCommentIds=function(A){if(this.vditor.currentMode!=="wysiwyg")return;var G=function(Q){A.forEach(function(D){if(Q.getAttribute("data-cmtids").indexOf(D)>-1)Q.classList.remove("vditor-comment--hover")})};if(this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(Q){G(Q)}),this.vditor.preview.element.style.display!=="none")this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(Q){G(Q)})},z.prototype.removeCommentIds=function(A){var G=this;if(this.vditor.currentMode!=="wysiwyg")return;var Q=function(D,X){var Y=D.getAttribute("data-cmtids").split(" ");if(Y.find(function(K,J){if(K===X)return Y.splice(J,1),!0}),Y.length===0)D.outerHTML=D.innerHTML,(0,L.zh)(G.vditor).collapse(!0);else D.setAttribute("data-cmtids",Y.join(" "))};A.forEach(function(D){if(G.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(X){Q(X,D)}),G.vditor.preview.element.style.display!=="none")G.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(X){Q(X,D)})}),J1(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})},z.prototype.init=function(A,G){var Q=this;if(this.isDestroyed)return;if(this.vditor={currentMode:G.mode,element:A,hint:new X8(G.hint.extend),lute:void 0,options:G,originalInnerHTML:A.innerHTML,outline:new q8(window.VditorI18n.outline),tip:new g5},this.vditor.sv=new F8(this.vditor),this.vditor.undo=new Yw,this.vditor.wysiwyg=new Kw(this.vditor),this.vditor.ir=new Z8(this.vditor),this.vditor.toolbar=new qw(this.vditor),G.resize.enable)this.vditor.resize=new U8(this.vditor);if(this.vditor.toolbar.elements.devtools)this.vditor.devtools=new q;if(G.upload.url||G.upload.handler)this.vditor.upload=new i4;(0,I.G)(G._lutePath||"".concat(G.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){if(Q.vditor.lute=(0,$8.X)({autoSpace:Q.vditor.options.preview.markdown.autoSpace,gfmAutoLink:Q.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:Q.vditor.options.preview.markdown.codeBlockPreview,emojiSite:Q.vditor.options.hint.emojiPath,emojis:Q.vditor.options.hint.emoji,fixTermTypo:Q.vditor.options.preview.markdown.fixTermTypo,footnotes:Q.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:Q.vditor.options.preview.math.inlineDigit,linkBase:Q.vditor.options.preview.markdown.linkBase,linkPrefix:Q.vditor.options.preview.markdown.linkPrefix,listStyle:Q.vditor.options.preview.markdown.listStyle,mark:Q.vditor.options.preview.markdown.mark,mathBlockPreview:Q.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:Q.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:Q.vditor.options.preview.markdown.sanitize,toc:Q.vditor.options.preview.markdown.toc}),Q.vditor.preview=new Y8(Q.vditor),_1(Q.vditor),G.after)G.after();if(G.icon)(0,I.J)("".concat(G.cdn,"/dist/js/icons/").concat(G.icon,".js"),"vditorIconScript")})},z}(m.default);let Pw=Vw})(),L1=L1.default,L1})()})});import{addLocalesMessages as Nw}from"@blockcode/core";var r5={"write.tabs.editor":"Write","write.tabs.preview":"Preview","write.blocks.h1":"H1","write.blocks.h2":"H2","write.blocks.h3":"H3","write.blocks.link":"Link","write.blocks.image":"Image","write.blocks.code":"Code","write.blocks.codeInline":"Code Inline","write.blocks.list":"List","write.blocks.order":"Order List","write.blocks.todo":"Todo List","write.blocks.table":"Table","write.blocks.quote":"Quote","write.blocks.line":"Line","write.blocks.math":"Math","write.blocks.mathInline":"Math Inline","write.blocks.chart":"Chart","write.blocks.scratch":"Scratch Code","write.blocks.mindmap":"Mindmap","write.blocks.flowchart":"Flowchart","write.blocks.sequence":"Sequence","write.blocks.classDiagram":"Class Diagram","write.blocks.stateMachine":"State Machine","write.blocks.ganttChart":"Gantt Chart","write.blocks.timeline":"Timeline","write.blocks.gitGraph":"Git Graph","write.blocks.musicalStaff":"Musical Staff"};var v5={"write.tabs.editor":"写作","write.tabs.preview":"预览","write.blocks.h1":"标题1","write.blocks.h2":"标题2","write.blocks.h3":"标题3","write.blocks.link":"链接","write.blocks.image":"图片","write.blocks.code":"代码","write.blocks.codeInline":"行内代码","write.blocks.list":"无序列表","write.blocks.order":"有序列表","write.blocks.todo":"任务列表","write.blocks.table":"表格","write.blocks.quote":"引用","write.blocks.line":"分割线","write.blocks.math":"公式","write.blocks.mathInline":"行内公式","write.blocks.chart":"图表","write.blocks.scratch":"Scratch 脚本","write.blocks.mindmap":"脑图","write.blocks.flowchart":"流程图","write.blocks.sequence":"时序图","write.blocks.classDiagram":"类图","write.blocks.stateMachine":"状态图","write.blocks.ganttChart":"甘特图","write.blocks.timeline":"时间线","write.blocks.gitGraph":"Git 图","write.blocks.musicalStaff":"五线谱"};var i5={"write.tabs.editor":"寫作","write.tabs.preview":"預覽","write.blocks.h1":"標題1","write.blocks.h2":"標題2","write.blocks.h3":"標題3","write.blocks.link":"鏈接","write.blocks.image":"圖片","write.blocks.code":"代碼","write.blocks.codeInline":"行內代碼","write.blocks.list":"無序列表","write.blocks.order":"有序列表","write.blocks.todo":"任務列表","write.blocks.table":"表格","write.blocks.quote":"引用","write.blocks.line":"分割線","write.blocks.math":"公式","write.blocks.mathInline":"行內公式","write.blocks.chart":"圖表","write.blocks.scratch":"Scratch 腳本","write.blocks.mindmap":"腦圖","write.blocks.flowchart":"流程圖","write.blocks.sequence":"時序圖","write.blocks.classDiagram":"類圖","write.blocks.stateMachine":"狀態圖","write.blocks.ganttChart":"甘特圖","write.blocks.timeline":"時間線","write.blocks.gitGraph":"Git 圖","write.blocks.musicalStaff":"五線譜"};Nw({en:r5,"zh-Hans":v5,"zh-Hant":i5});function z0(W1){let K1=globalThis.document,v=K1.createElement("style");v.appendChild(K1.createTextNode(W1)),K1.head.append(v)}z0(`/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
/*!
 * Vditor v3.11.2 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
.vditor{--border-color:#d1d5da;--second-color:#5860695c;--panel-background-color:#fff;--panel-shadow:0 1px 2px #0003;--toolbar-background-color:#f6f8fa;--toolbar-icon-color:#586069;--toolbar-icon-hover-color:#4285f4;--toolbar-height:35px;--toolbar-divider-margin-top:8px;--textarea-background-color:#fafbfc;--textarea-text-color:#24292e;--resize-icon-color:var(--toolbar-icon-color);--resize-background-color:var(--toolbar-background-color);--resize-hover-icon-color:var(--panel-background-color);--resize-hover-background-color:var(--toolbar-icon-hover-color);--count-background-color:#1b1f230d;--heading-border-color:#eaecef;--blockquote-color:#6a737d;--ir-heading-color:#660e7a;--ir-title-color:gray;--ir-bi-color:#0033b3;--ir-link-color:green;--ir-bracket-color:#00f;--ir-paren-color:green}.vditor--dark{--border-color:#141414;--second-color:#b9b9b95c;--panel-background-color:#24292e;--panel-shadow:0 1px 2px #fff3;--toolbar-background-color:#1d2125;--toolbar-icon-color:#b9b9b9;--toolbar-icon-hover-color:#fff;--textarea-background-color:#2f363d;--textarea-text-color:#d1d5da;--resize-icon-color:var(--border-color);--resize-background-color:var(--second-color);--resize-hover-icon-color:var(--toolbar-icon-hover-color);--resize-hover-background-color:#b9b9b9db;--count-background-color:#4285f45c;--heading-border-color:var(--textarea-text-color);--blockquote-color:var(--toolbar-icon-color);--ir-heading-color:#9876aa;--ir-title-color:gray;--ir-bi-color:#cc7832;--ir-link-color:#ffc66d;--ir-bracket-color:#287bde;--ir-paren-color:#6a8759}@keyframes tooltip-appear{0%{opacity:0}to{opacity:1}}.vditor-tooltipped{cursor:pointer;position:relative}.vditor-tooltipped:after{z-index:1000000;-webkit-font-smoothing:subpixel-antialiased;color:#fff;text-align:center;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(aria-label);opacity:0;background:#3b3e43;border-radius:3px;padding:5px 8px;font-size:11px;font-weight:400;line-height:16px;text-decoration:none;display:none;position:absolute}.vditor-tooltipped:before{z-index:1000001;color:#3b3e43;pointer-events:none;content:"";opacity:0;border:5px solid #0000;width:0;height:0;display:none;position:absolute}.vditor-tooltipped--hover:before,.vditor-tooltipped--hover:after,.vditor-tooltipped:hover:before,.vditor-tooltipped:hover:after,.vditor-tooltipped:active:before,.vditor-tooltipped:active:after,.vditor-tooltipped:focus:before,.vditor-tooltipped:focus:after{text-decoration:none;animation-name:tooltip-appear;animation-duration:.15s;animation-timing-function:ease-in;animation-fill-mode:forwards;display:inline-block}.vditor-tooltipped__s:after,.vditor-tooltipped__se:after,.vditor-tooltipped__sw:after{margin-top:5px;top:100%;right:50%}.vditor-tooltipped__s:before,.vditor-tooltipped__se:before,.vditor-tooltipped__sw:before{border-bottom-color:#3b3e43;margin-right:-5px;top:auto;bottom:-5px;right:50%}.vditor-tooltipped__se:after{margin-left:-15px;left:50%;right:auto}.vditor-tooltipped__sw:after{margin-right:-15px}.vditor-tooltipped__n:after,.vditor-tooltipped__ne:after,.vditor-tooltipped__nw:after{margin-bottom:5px;bottom:100%;right:50%}.vditor-tooltipped__n:before,.vditor-tooltipped__ne:before,.vditor-tooltipped__nw:before{border-top-color:#3b3e43;margin-right:-5px;top:-5px;bottom:auto;right:50%}.vditor-tooltipped__ne:after{margin-left:-15px;left:50%;right:auto}.vditor-tooltipped__nw:after{margin-right:-15px}.vditor-tooltipped__s:after,.vditor-tooltipped__n:after{transform:translate(50%)}.vditor-tooltipped__w:after{margin-right:5px;bottom:50%;right:100%;transform:translateY(50%)}.vditor-tooltipped__w:before{border-left-color:#3b3e43;margin-top:-5px;top:50%;bottom:50%;left:-5px}.vditor-tooltipped__e:after{margin-left:5px;bottom:50%;left:100%;transform:translateY(50%)}.vditor-tooltipped__e:before{border-right-color:#3b3e43;margin-top:-5px;top:50%;bottom:50%;right:-5px}@media screen and (width<=520px){.vditor-tooltipped:before,.vditor-tooltipped:after{content:none}}@keyframes scale-in{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.vditor-panel{background-color:var(--panel-background-color);box-shadow:var(--panel-shadow);z-index:3;-webkit-user-select:none;-moz-user-select:none;user-select:none;min-width:80px;max-width:320px;color:var(--toolbar-icon-color);border-radius:3px;padding:5px;font-size:14px;animation-name:scale-in;animation-duration:.15s;animation-timing-function:cubic-bezier(.2,0,.13,1.5);display:none;position:absolute}.vditor-panel--none{white-space:nowrap;opacity:.86;min-width:auto;max-width:none;padding:0;animation:none}.vditor-panel--arrow:before{pointer-events:none;content:" ";border:7px solid #0000;border-bottom-color:var(--panel-background-color);width:0;height:0;position:absolute;top:-14px;left:5px}.vditor-panel--left{right:0}.vditor-panel--left.vditor-panel--arrow:before{left:auto;right:5px}.vditor-input{background-color:var(--panel-background-color);color:var(--textarea-text-color);border:0;padding:3px 5px;font-size:12px}.vditor-input:focus{background-color:var(--toolbar-background-color);outline:none}.vditor-icon{color:var(--toolbar-icon-color);cursor:pointer;float:left;box-sizing:border-box;background-color:#0000;border:0;width:23px;height:21px;padding:4px 5px}.vditor-icon:hover,.vditor-icon--current{color:var(--toolbar-icon-hover-color);background-color:#0000}.vditor-icon:focus{outline:none}.vditor-icon svg{float:left;fill:currentColor;pointer-events:none;width:13px!important;height:13px!important}.vditor-toolbar{background-color:var(--toolbar-background-color);border-bottom:1px solid var(--border-color);padding:0 5px;line-height:1}.vditor-toolbar--pin{z-index:1;position:sticky;top:0}.vditor-toolbar--hide{height:5px;transition:all .15s ease-in-out;overflow:hidden}.vditor-toolbar--hide:hover{background-color:var(--toolbar-background-color);height:auto;overflow:visible}.vditor-toolbar__item{float:left;position:relative}.vditor-toolbar__item .vditor-tooltipped{color:var(--toolbar-icon-color);height:var(--toolbar-height);box-sizing:border-box;background-color:#0000;border:0;width:25px;padding:10px 5px;font-size:0}.vditor-toolbar__item .vditor-tooltipped:focus{cursor:pointer;color:var(--toolbar-icon-hover-color);outline:none}.vditor-toolbar__item svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:15px;height:15px;display:inline-block}.vditor-toolbar__item input{width:25px;height:var(--toolbar-height);cursor:pointer;opacity:.001;position:absolute;top:0;left:0;overflow:hidden}.vditor-toolbar__divider{float:left;height:calc(var(--toolbar-height) - (var(--toolbar-divider-margin-top)*2));border-left:1px solid var(--second-color);margin:var(--toolbar-divider-margin-top)8px}.vditor-toolbar__br{width:100%;height:0!important;padding:0!important}.vditor-menu--current{color:var(--toolbar-icon-hover-color)!important}.vditor-menu--disabled{color:var(--second-color)!important;cursor:not-allowed!important}.vditor-emojis{display:inline-block;overflow:auto}.vditor-emojis::-webkit-scrollbar{display:none}.vditor-emojis__tip{width:200px;min-width:1px;color:var(--toolbar-icon-color);white-space:nowrap;text-overflow:ellipsis;flex:1;margin-right:10px;overflow:hidden}.vditor-emojis__tail{color:var(--toolbar-icon-color);margin-top:5px;font-size:12px;display:flex}.vditor-emojis__tail a{color:var(--toolbar-icon-color);text-decoration:none}.vditor-emojis__tail a:hover{color:var(--toolbar-icon-hover-color)}.vditor-emojis button{cursor:pointer;float:left;text-align:center;box-sizing:border-box;background-color:#0000;border:0;border-radius:3px;width:30px;height:30px;margin:0;padding:3px;font-size:16px;line-height:26px;transition:all .15s ease-in-out;overflow:hidden}.vditor-emojis button:focus{outline:none}.vditor-emojis button:hover .vditor-emojis__icon{display:inline-block;transform:scale(1.2)}.vditor-emojis img{float:left;width:20px;height:20px;margin:3px 0 0 3px}@media screen and (width<=520px){.vditor-toolbar__item{padding:0 12px}.vditor-panel--left.vditor-panel--arrow:before{right:17px}}@media (hover:hover) and (pointer:fine){.vditor-toolbar__item .vditor-tooltipped:hover{color:var(--toolbar-icon-hover-color)}}@keyframes slideInDown{0%{visibility:visible;transform:translateY(-100%)}to{transform:translate(0,0)}}.vditor{border:1px solid var(--border-color);box-sizing:border-box;border-radius:3px;flex-direction:column;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;display:flex}.vditor--fullscreen{z-index:90;border-radius:0;position:fixed;top:0;left:0;width:100%!important;height:100vh!important}.vditor-content{flex:1;min-width:1px;min-height:60px;display:flex;position:relative}.vditor-preview{border-left:1px solid var(--border-color);box-sizing:border-box;background-color:var(--textarea-background-color);border-radius:0 0 3px;flex:1;min-width:1px;margin-left:-1px;overflow:auto}.vditor-preview::-webkit-scrollbar{display:none}.vditor-preview__action{text-align:center;background-color:var(--toolbar-background-color);padding:10px}.vditor-preview__action button{background-color:var(--toolbar-background-color);color:var(--toolbar-icon-color);cursor:pointer;border:0;margin:0 10px;padding:0 7px;font-size:12px;line-height:20px}.vditor-preview__action button.vditor-preview__action--current,.vditor-preview__action button:hover{color:var(--toolbar-icon-hover-color);background-color:var(--toolbar-background-color)}.vditor-preview__action button:focus{outline:none}.vditor-preview__action button svg{fill:currentColor;vertical-align:middle;width:15px;height:15px}.vditor-preview>.vditor-reset{margin:0 auto;padding:10px}.vditor-preview img:not(.emoji){cursor:pointer}.vditor-devtools{background-color:var(--textarea-background-color);min-width:1px;box-shadow:inset 1px 0 var(--border-color);box-sizing:border-box;border-radius:0 0 3px;flex:1;padding:10px;display:none;overflow:auto}.vditor-counter{color:var(--toolbar-icon-color);background-color:var(--count-background-color);-webkit-user-select:none;-moz-user-select:none;user-select:none;float:right;border-radius:3px;margin:8px 3px 0 0;padding:3px;font-size:12px}.vditor-counter--error{color:#d23f31;background-color:#d23f311a}.vditor-resize{cursor:row-resize;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;padding:3px 0;position:absolute}.vditor-resize--top{top:-3px}.vditor-resize--bottom{bottom:-3px}.vditor-resize>div{background-color:var(--resize-background-color);height:3px;transition:all .15s ease-in-out}.vditor-resize:hover>div,.vditor-resize--selected>div{background-color:var(--resize-hover-background-color)}.vditor-resize:hover svg,.vditor-resize--selected svg{color:var(--resize-hover-icon-color)}.vditor-resize svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:13px;height:3px;color:var(--resize-icon-color);margin:0 auto;display:block}.vditor-upload{background-color:#4285f4;height:3px;transition:all .15s ease-in-out;position:absolute;top:-2px;left:0}.vditor-tip{z-index:5;font-size:12px;animation-duration:.15s;animation-fill-mode:both;position:absolute;top:10px;left:50%}.vditor-tip--show{animation-name:slideInDown;display:block}.vditor-tip__content{text-align:left;background:var(--toolbar-background-color);color:var(--toolbar-icon-color);max-width:100%;box-shadow:var(--panel-shadow);border-radius:3px;margin-left:-50%;padding:3px 10px;line-height:16px;display:inline-block;position:relative}.vditor-tip__content ul{margin:2px 0;padding:0 0 0 18px}.vditor-tip__content a{color:#4285f4}.vditor-tip__close{color:var(--toolbar-icon-color);cursor:pointer;font-weight:700;position:absolute;top:-7px;right:-15px}.vditor-tip__close:hover{color:var(--toolbar-icon-hover-color)}.vditor-img{z-index:100;flex-direction:column;display:flex;position:fixed;inset:0}.vditor-img__bar{border-bottom:1px solid var(--border-color);background-color:var(--toolbar-background-color);text-align:center;box-sizing:border-box;justify-content:center;align-items:center;height:36px;display:flex}.vditor-img__btn{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:var(--toolbar-icon-color);align-items:center;margin-left:24px;display:flex}.vditor-img__btn:hover{color:var(--toolbar-icon-hover-color)}.vditor-img__btn svg{fill:currentColor;width:14px;height:14px;margin-right:8px}.vditor-img__img{background-color:var(--textarea-background-color);cursor:zoom-out;flex:1;overflow:auto}.vditor-img__img img{max-width:none}.vditor-hint{background-color:var(--panel-background-color);box-shadow:var(--panel-shadow);z-index:4;border-radius:3px;min-width:80px;max-width:250px;margin:0;padding:5px 0;font-size:12px;line-height:20px;list-style:none;display:none;position:absolute}.vditor-hint .vditor-hint{margin-top:-31px;left:100%;right:auto}.vditor-hint .vditor-hint.vditor-panel--left{left:auto;right:100%}.vditor-hint button{color:var(--toolbar-icon-color);box-sizing:border-box;text-align:left;cursor:pointer;white-space:nowrap;text-overflow:ellipsis;background-color:#0000;border:0;border-radius:0;width:100%;margin:0;padding:3px 10px;line-height:20px;display:block;overflow:hidden}.vditor-hint button:focus{outline:none}.vditor-hint--current,.vditor-hint button:not(.vditor-menu--disabled):hover{background-color:var(--toolbar-background-color)!important;color:var(--toolbar-icon-hover-color)!important}.vditor-hint__emoji{float:left;margin-right:3px;font-size:16px}.vditor-hint img{float:left;width:20px;height:20px;margin-right:3px}.vditor-reset{color:#24292e;font-variant-ligatures:no-common-ligatures;word-wrap:break-word;word-break:break-word;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:16px;line-height:1.5;overflow:auto}.vditor-reset--anchor{padding-left:20px}.vditor-reset--error{color:#d23f31;font-size:12px;line-height:16px;display:block}.vditor-reset ul ul ul{list-style-type:square}.vditor-reset ul ul{list-style-type:circle}.vditor-reset ul{list-style-type:disc}.vditor-reset ul,.vditor-reset ol{margin-top:0;margin-bottom:16px;padding-left:2em}.vditor-reset li+li{margin-top:.25em}.vditor-reset li p{margin-top:16px}.vditor-reset audio{max-width:100%}.vditor-reset audio:focus{outline:none}.vditor-reset video{max-width:100%;max-height:90vh}.vditor-reset img{max-width:100%}.vditor-reset img.emoji{cursor:auto;vertical-align:sub;max-width:20px}.vditor-reset h1,.vditor-reset h2,.vditor-reset h3,.vditor-reset h4,.vditor-reset h5,.vditor-reset h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.vditor-reset h1:hover .vditor-anchor svg,.vditor-reset h2:hover .vditor-anchor svg,.vditor-reset h3:hover .vditor-anchor svg,.vditor-reset h4:hover .vditor-anchor svg,.vditor-reset h5:hover .vditor-anchor svg,.vditor-reset h6:hover .vditor-anchor svg{visibility:visible}.vditor-reset h1{font-size:1.75em}.vditor-reset h2{font-size:1.55em}.vditor-reset h3{font-size:1.38em}.vditor-reset h4{font-size:1.25em}.vditor-reset h5{font-size:1.13em}.vditor-reset h6{font-size:1em}.vditor-reset hr{background-color:#eaecef;border:0;height:2px;margin:24px 0;padding:0}.vditor-reset p{margin-top:0;margin-bottom:16px}.vditor-reset blockquote{color:#6a737d;border-left:.25em solid #eaecef;margin:0 0 16px;padding:0 1em}.vditor-reset blockquote>:first-child{margin-top:0}.vditor-reset blockquote>:last-child{margin-bottom:0}.vditor-reset ins>iframe{border:0}.vditor-reset iframe{box-sizing:border-box;border:1px solid #d1d5da;max-width:100%}.vditor-reset iframe.iframe__video{min-width:80%;min-height:36vh}.vditor-reset table{border-collapse:collapse;empty-cells:show;border-spacing:0;word-break:keep-all;width:100%;margin-bottom:16px;display:block;overflow:auto}.vditor-reset table tr{background-color:#fafbfc;border-top:1px solid #c6cbd1}.vditor-reset table td,.vditor-reset table th{word-break:normal;white-space:nowrap;border:1px solid #dfe2e5;padding:6px 13px}.vditor-reset table td:first-child:after,.vditor-reset table th:first-child:after{content:"";vertical-align:top;min-height:24px;display:inline-block}.vditor-reset table th{font-weight:600}.vditor-reset table tbody tr:nth-child(2n){background-color:#fff}.vditor-reset code:not(.hljs):not(.highlight-chroma){word-break:break-word;white-space:pre-wrap;background-size:20px 20px;border-radius:3px;margin:0;padding:.2em .4em;font-family:mononoki,Consolas,Liberation Mono,Menlo,Courier,monospace,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:85%}.vditor-reset pre{margin:1em 0}.vditor-reset pre>code{white-space:pre;word-break:initial;word-wrap:normal;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AgMAAABHkjHhAAAACVBMVEWAgIBaWlo+Pj7rTFvWAAAAA3RSTlMHCAw+VhR4AAAA+klEQVQoz4WSMW7EQAhFPxKWNh2FCx+HkaZI6RRb5DYbyVfIJXLKDCFoMbaTKSw/8ZnPAPjaH2xgZcUNUDADD7D9LtDBCLZ45fbkvo/30K8yeI64pPwl6znd/3n/Oe93P3ho9qeh72btTFzqkz0rsJle8Zr81OLEwZ1dv/713uWqvu2pl+k0fy7MWtj9r/tN5q/02z89qa/L4Dc2LvM93kezPfXlME/O86EbY/V9GB9ePX8G1/6W+/9h1dq/HGfTfzT3j/xNo7522Bfnqe5jO/fvhVthlfk434v3iO9zG/UOphyPeinPl1J8Gtaa7xPTa/Dk+RIs4deMvwGvcGsmsCvJ0AAAAABJRU5ErkJggg==);background-size:20px 20px;border-radius:5px;margin:0;padding:.5em;font-family:mononoki,Consolas,Liberation Mono,Menlo,Courier,monospace,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:85%;display:block;overflow:auto}.vditor-reset pre:hover div.vditor-copy{display:block}.vditor-reset .language-math,.vditor-reset .language-echarts,.vditor-reset .language-mindmap,.vditor-reset .language-plantuml,.vditor-reset .language-mermaid,.vditor-reset .language-smiles,.vditor-reset .language-markmap,.vditor-reset .language-abc,.vditor-reset .language-flowchart,.vditor-reset .language-graphviz{margin-bottom:16px}.vditor-reset .language-math mjx-container:focus{cursor:context-menu;outline:none}.vditor-reset .language-math .katex-display>.katex>.katex-html>.tag{font-size:1.21rem;display:inline-block;right:2px}.vditor-reset .language-echarts,.vditor-reset .language-mindmap{height:420px;overflow:hidden}.vditor-reset .language-mermaid,.vditor-reset .language-markmap,.vditor-reset .language-flowchart,.vditor-reset .language-graphviz{text-align:center}.vditor-reset .language-graphviz parsererror{overflow:auto}.vditor-reset kbd{color:#24292e;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;padding:3px 5px;font:11px/10px Consolas,Liberation Mono,Menlo,Courier,monospace;display:inline-block;box-shadow:inset 0 -1px #d1d5da}.vditor-reset summary{cursor:pointer}.vditor-reset summary:focus{outline:none}.vditor-reset svg{width:auto;height:auto;stroke-width:initial}.vditor-reset p:last-child,.vditor-reset blockquote:last-child,.vditor-reset pre:last-child,.vditor-reset ul:last-child,.vditor-reset ol:last-child,.vditor-reset hr:last-child{margin-bottom:0}.vditor-comment{border-bottom:2px solid #f8e6ab}.vditor-comment--focus,.vditor-comment--hover{background-color:#faf1d1;border-bottom:2px solid #ffc60a}.vditor-comment--focus .vditor-comment,.vditor-comment--hover .vditor-comment{border-bottom:2px solid #ffc60a}.vditor-task{word-break:break-all;list-style:none!important}.vditor-task input{vertical-align:middle;margin:0 .2em .25em -1.6em;font-size:12px}.vditor-copy{z-index:1;display:none;position:relative}.vditor-copy textarea{height:10px;position:absolute;left:-100000px}.vditor-copy span{cursor:pointer;position:absolute;top:.5em;right:15px}.vditor-copy svg{color:#586069;fill:currentColor;height:14px;display:block;width:14px!important}.vditor-linenumber{position:relative;padding-left:4em!important}.vditor-linenumber__rows{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;counter-reset:linenumber;width:3em;position:absolute;top:1em;left:0}.vditor-linenumber__rows>span{pointer-events:none;display:block}.vditor-linenumber__rows>span:before{counter-increment:linenumber;content:counter(linenumber);color:#9e969661;text-align:right;padding-right:1em;display:block}.vditor-speech{cursor:pointer;color:#586069;background-color:#f6f8fa;border:1px solid #d1d5da;border-radius:3px;padding:3px;display:none;position:absolute}.vditor-speech:hover,.vditor-speech--current{color:#4285f4}.vditor-speech svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:14px;height:14px;display:block}.vditor-anchor{margin-left:5px}.vditor-anchor--left{float:left;margin-left:-20px;padding-right:4px}.vditor-anchor svg{visibility:hidden}.vditor-anchor:hover svg{visibility:visible}.vditor-anchor:focus{outline:none}.vditor-linkcard{cursor:pointer;max-width:768px;margin:31px auto 16px;padding:0 10px;transition:all .15s ease-in-out}.vditor-linkcard a{background-color:#f6f8fa;border-radius:3px;flex-wrap:wrap-reverse;max-height:250px;text-decoration:none;display:flex;overflow:hidden;box-shadow:0 1px 2px #0003}.vditor-linkcard a:hover{text-decoration:none;box-shadow:0 0 3px #00000021,0 3px 6px #00000042}.vditor-linkcard a:visited .vditor-linkcard__abstract{color:#5860695c}.vditor-linkcard__info{box-sizing:border-box;flex:1;min-width:200px;padding:10px}.vditor-linkcard__title{color:#24292e;align-items:center;font-size:14px;font-weight:400;display:flex}.vditor-linkcard__title img{cursor:pointer;border-radius:3px;flex-shrink:0;width:20px;height:20px;margin-right:5px}.vditor-linkcard__abstract{word-wrap:break-word;word-break:break-all;-webkit-line-clamp:2;text-overflow:ellipsis;color:#586069;-webkit-box-orient:vertical;margin:5px 0;font-size:13px;display:-webkit-box;overflow:hidden}.vditor-linkcard__site{color:#4285f4;font-size:12px}.vditor-linkcard__image{cursor:pointer;background-color:#5860695c;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:126px;max-width:250px}.vditor-footnotes__goto-ref{text-decoration:none}.vditor-toc{-webkit-user-select:text;-moz-user-select:text;user-select:text;color:#4285f4;margin-bottom:16px}.vditor-toc .vditor-outline__action{display:none}.vditor-toc ul{padding-left:1em;list-style:none!important}.vditor-toc>ul{padding-left:0}.vditor-toc span{cursor:pointer}.vditor-toc li>span>svg{width:0;height:0}.vditor-outline{border-right:1px solid var(--border-color);background-color:var(--panel-background-color);width:250px;display:none;overflow:auto}.vditor-outline--right{border-right:0;border-left:1px solid var(--border-color)}.vditor-outline::-webkit-scrollbar{display:none}.vditor-outline ul{margin:0;padding-left:1em;list-style:none!important}.vditor-outline__content>ul{padding-left:0}.vditor-outline li>span{cursor:pointer;color:var(--textarea-text-color);align-items:center;padding:5px 10px;display:flex}.vditor-outline li>span>svg{flex-shrink:0;width:10px;height:10px}.vditor-outline li>span:hover{color:var(--toolbar-icon-hover-color)}.vditor-outline li>span>span{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.vditor-outline__title{border-bottom:1px dashed var(--border-color);color:var(--toolbar-icon-color);padding:5px 10px;font-size:12px}.vditor-outline__action{fill:currentColor;flex-shrink:0;margin-right:5px;transition:all .15s ease-in-out}.vditor-outline__action--close{transform:rotate(-90deg)}.vditor-wysiwyg{box-sizing:border-box;flex:1;width:100%;min-width:1px;position:relative}.vditor-wysiwyg pre.vditor-reset{background-color:var(--panel-background-color);white-space:pre-wrap;box-sizing:border-box;height:100%;margin:0}.vditor-wysiwyg pre.vditor-reset[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-wysiwyg pre.vditor-reset:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-wysiwyg pre.vditor-reset:focus{background-color:var(--textarea-background-color);outline:none}.vditor-wysiwyg pre.vditor-reset:after{content:"";height:var(--editor-bottom);display:block}.vditor-wysiwyg blockquote:empty:before,.vditor-wysiwyg pre>code:empty:before,.vditor-wysiwyg p:empty:before,.vditor-wysiwyg h1:empty:after,.vditor-wysiwyg h2:empty:after,.vditor-wysiwyg h3:empty:after,.vditor-wysiwyg h4:empty:after,.vditor-wysiwyg h5:empty:after,.vditor-wysiwyg h6:empty:after{content:" "}.vditor-wysiwyg code[data-marker=\\\`]{padding-left:0!important;padding-right:0!important}.vditor-wysiwyg__block pre:first-child{margin-bottom:-1em}.vditor-wysiwyg__block pre:first-child code{color:var(--textarea-text-color);text-align:left;height:auto}.vditor-wysiwyg__block pre:last-child{margin-bottom:1em}.vditor-wysiwyg__preview{cursor:pointer;white-space:initial;min-height:27px}.vditor-wysiwyg>.vditor-reset>h1:before,.vditor-wysiwyg>.vditor-reset>h2:before,.vditor-wysiwyg>.vditor-reset>h3:before,.vditor-wysiwyg>.vditor-reset>h4:before,.vditor-wysiwyg>.vditor-reset>h5:before,.vditor-wysiwyg>.vditor-reset>h6:before,.vditor-wysiwyg div.vditor-wysiwyg__block:before,.vditor-wysiwyg div[data-type=link-ref-defs-block]:before,.vditor-wysiwyg div[data-type=footnotes-block]:before,.vditor-wysiwyg .vditor-toc:before{float:left;content:"H1";color:var(--second-color);margin-left:-29px;padding-right:4px;font-size:.85rem;font-weight:400}.vditor-wysiwyg>.vditor-reset>h2:before{content:"H2"}.vditor-wysiwyg>.vditor-reset>h3:before{content:"H3"}.vditor-wysiwyg>.vditor-reset>h4:before{content:"H4"}.vditor-wysiwyg>.vditor-reset>h5:before{content:"H5"}.vditor-wysiwyg>.vditor-reset>h6:before{content:"H6"}.vditor-wysiwyg div[data-type=link-ref-defs-block]:before{content:"\\"A\\""}.vditor-wysiwyg div[data-type=footnotes-block]:before{content:"^F"}.vditor-wysiwyg div.vditor-wysiwyg__block:before{content:"</>"}.vditor-wysiwyg div.vditor-wysiwyg__block[data-type=yaml-front-matter]:before{content:"F"}.vditor-wysiwyg div.vditor-wysiwyg__block[data-type=math-block]:before{content:"$$"}.vditor-wysiwyg .vditor-toc:before{content:"ToC"}.vditor-wysiwyg hr{width:100%;margin:12px 0;display:inline-block}.vditor-wysiwyg details{white-space:initial}.vditor-wysiwyg a{cursor:pointer}.vditor-wysiwyg span[data-type=backslash]>span{color:var(--second-color);display:none}.vditor-wysiwyg span[data-type=link-ref],.vditor-wysiwyg sup[data-type=footnotes-ref]{color:#4285f4}.vditor-wysiwyg span[data-type=toc-h]{color:#4285f4;text-decoration:underline}.vditor-wysiwyg div[data-type=footnotes-block]{border-top:2px solid var(--heading-border-color);margin-top:24px;padding-top:24px}.vditor-wysiwyg div[data-type=link-ref-defs-block]{color:var(--blockquote-color)}@media screen and (width<=520px){.vditor-wysiwyg h1:before,.vditor-wysiwyg h2:before,.vditor-wysiwyg h3:before,.vditor-wysiwyg h4:before,.vditor-wysiwyg h5:before,.vditor-wysiwyg h6:before,.vditor-wysiwyg div.vditor-wysiwyg__block:before,.vditor-wysiwyg div[data-type=link-ref-defs-block]:before,.vditor-wysiwyg div[data-type=footnotes-block]:before,.vditor-wysiwyg .vditor-toc:before{content:none}}.vditor-ir{box-sizing:border-box;flex:1;width:100%;min-width:1px;position:relative}.vditor-ir__node[data-type=code-block]:before,.vditor-ir__node[data-type=code-block]:after,.vditor-ir__node[data-type=yaml-front-matter]:before,.vditor-ir__node[data-type=yaml-front-matter]:after,.vditor-ir__node[data-type=math-block]:before,.vditor-ir__node[data-type=math-block]:after{content:" ";color:var(--second-color)}.vditor-ir__node:not(.vditor-ir__node--expand) .vditor-ir__marker{padding:0!important}.vditor-ir__node:not(.vditor-ir__node--expand)[data-type=a]{cursor:pointer}.vditor-ir__node[data-type=link-ref],.vditor-ir__node[data-type=footnotes-ref]{color:#4285f4}.vditor-ir__node[data-type=html-block]{margin-bottom:1em}.vditor-ir__node .vditor-ir__marker{width:0;height:0;transition:all .15s ease-in-out;display:inline-block;overflow:hidden}.vditor-ir__node--hidden .vditor-ir__marker{visibility:hidden}.vditor-ir__node--expand .vditor-ir__marker{color:var(--second-color);width:auto;height:auto;display:inline}.vditor-ir__node--expand .vditor-ir__marker--hide{display:none}.vditor-ir__node--expand .vditor-ir__marker--heading{color:var(--ir-heading-color)}.vditor-ir__node--expand .vditor-ir__marker--bi{color:var(--ir-bi-color)}.vditor-ir__node--expand .vditor-ir__marker--link{color:var(--ir-link-color)}.vditor-ir__node--expand .vditor-ir__marker--title{color:var(--ir-title-color)}.vditor-ir__node--expand .vditor-ir__marker--bracket{color:var(--ir-bracket-color);text-decoration:underline}.vditor-ir__node--expand .vditor-ir__marker--paren{color:var(--ir-paren-color)}.vditor-ir__node--expand .vditor-ir__marker--info{color:var(--ir-heading-color)}.vditor-ir__node--expand .vditor-ir__marker--pre code{color:var(--textarea-text-color);text-align:left;height:auto}.vditor-ir__node--expand[data-type=code-block]:before,.vditor-ir__node--expand[data-type=code-block]:after{content:"\`\`\`"}.vditor-ir__node--expand[data-type=yaml-front-matter]:before,.vditor-ir__node--expand[data-type=yaml-front-matter]:after{content:"---"}.vditor-ir__node--expand[data-type=math-block]:before,.vditor-ir__node--expand[data-type=math-block]:after{content:"$$"}.vditor-ir__node span[data-type=code-block-open-marker],.vditor-ir__node span[data-type=code-block-close-marker],.vditor-ir__node span[data-type=yaml-front-matter-open-marker],.vditor-ir__node span[data-type=yaml-front-matter-close-marker],.vditor-ir__node span[data-type=math-block-open-marker],.vditor-ir__node span[data-type=math-block-close-marker]{display:none}.vditor-ir__preview{cursor:pointer;white-space:initial;min-height:27px}.vditor-ir__link{color:var(--ir-bracket-color);text-decoration:underline}.vditor-ir pre.vditor-reset{background-color:var(--panel-background-color);white-space:pre-wrap;box-sizing:border-box;height:100%;margin:0}.vditor-ir pre.vditor-reset[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-ir pre.vditor-reset:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-ir pre.vditor-reset:focus{background-color:var(--textarea-background-color);outline:none}.vditor-ir pre.vditor-reset:after{content:"";height:var(--editor-bottom);display:block}.vditor-ir pre.vditor-reset pre{margin:0}.vditor-ir hr{width:100%;margin:12px 0;display:inline-block}.vditor-ir blockquote:empty:before,.vditor-ir pre>code:empty:before,.vditor-ir p:empty:before,.vditor-ir h1:empty:after,.vditor-ir h2:empty:after,.vditor-ir h3:empty:after,.vditor-ir h4:empty:after,.vditor-ir h5:empty:after,.vditor-ir h6:empty:after{content:" "}.vditor-ir .vditor-reset>h1:before,.vditor-ir .vditor-reset>h2:before,.vditor-ir .vditor-reset>h3:before,.vditor-ir .vditor-reset>h4:before,.vditor-ir .vditor-reset>h5:before,.vditor-ir .vditor-reset>h6:before,.vditor-ir div[data-type=link-ref-defs-block]:before,.vditor-ir div[data-type=footnotes-block]:before,.vditor-ir .vditor-toc:before{float:left;content:"H1";color:var(--second-color);margin-left:-29px;padding-right:4px;font-size:.85rem;font-weight:400}.vditor-ir .vditor-reset>h2:before{content:"H2"}.vditor-ir .vditor-reset>h3:before{content:"H3"}.vditor-ir .vditor-reset>h4:before{content:"H4"}.vditor-ir .vditor-reset>h5:before{content:"H5"}.vditor-ir .vditor-reset>h6:before{content:"H6"}.vditor-ir div[data-type=link-ref-defs-block]{color:var(--blockquote-color)}.vditor-ir div[data-type=link-ref-defs-block]:before{content:"\\"A\\""}.vditor-ir div[data-type=footnotes-block]{border-top:2px solid var(--heading-border-color);margin-top:24px;padding-top:24px}.vditor-ir div[data-type=footnotes-block]:before{content:"^F"}.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>ul,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>ol,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>p,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>blockquote,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>pre,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>table,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>hr{margin-left:8px}.vditor-ir .vditor-toc:before{content:"ToC"}.vditor-ir .vditor-toc span[data-type=toc-h]{color:#4285f4;text-decoration:underline}@media screen and (width<=520px){.vditor-ir h1:before,.vditor-ir h2:before,.vditor-ir h3:before,.vditor-ir h4:before,.vditor-ir h5:before,.vditor-ir h6:before,.vditor-ir div[data-type=link-ref-defs-block]:before,.vditor-ir div[data-type=footnotes-block]:before,.vditor-ir .vditor-toc:before{content:none}}.vditor-sv{resize:none;box-sizing:border-box;background-color:var(--panel-background-color);width:100%;min-width:1px;color:var(--textarea-text-color);font-variant-ligatures:no-common-ligatures;white-space:pre-wrap;word-break:break-word;word-wrap:break-word;border:0;border-radius:0 0 3px 3px;outline:0;flex:1;margin:0 1px 0 0;padding:10px 9px 10px 10px;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;font-size:16px;line-height:22px;overflow:auto}.vditor-sv[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-sv:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-sv:focus{background-color:var(--textarea-background-color)}.vditor-sv:after{content:"";height:var(--editor-bottom);display:block}.vditor-sv span[data-type=newline]+span[data-type=text]:empty{display:inherit}.vditor-sv .sup{vertical-align:super;font-size:smaller}.vditor-sv .strong{font-weight:700}.vditor-sv .em{font-style:italic}.vditor-sv .s{text-decoration:line-through}.vditor-sv .mark:not(.vditor-sv__marker){color:#000;background-color:#ff0}.vditor-sv .h1{font-size:1.75em;line-height:44px}.vditor-sv .h2{font-size:1.55em;line-height:38px}.vditor-sv .h3{font-size:1.38em;line-height:27px}.vditor-sv .h4{font-size:1.25em;line-height:25px}.vditor-sv .h5{font-size:1.13em}.vditor-sv .h6{font-size:1em}.vditor-sv__marker{color:var(--second-color)}.vditor-sv__marker--heading{color:var(--ir-heading-color)}.vditor-sv__marker--bi{color:var(--ir-bi-color)}.vditor-sv__marker--link{color:var(--ir-link-color)}.vditor-sv__marker--title{color:var(--ir-title-color)}.vditor-sv__marker--bracket{color:var(--ir-bracket-color)}.vditor-sv__marker--paren{color:var(--ir-paren-color)}.vditor-sv__marker--info{color:var(--ir-heading-color)}.vditor-sv__marker--strong{font-weight:700}`);var T4=Bw(n5(),1);import{useRef as w3,useEffect as G5}from"preact/hooks";import{useAppContext as z3,useProjectContext as A3,hideSplash as h4,setFile as G3}from"@blockcode/core";var t5={cdn:"/vditor",lang:"en_US",mode:"wysiwyg",icon:"material",tab:"  ",width:"100%",height:"100%",toolbar:["undo","redo","bold","italic","strike","edit-mode"],toolbarConfig:{hide:!0},preview:{hljs:{lineNumber:!0},theme:{current:"light"},mode:"editor"},customWysiwygToolbar(){}};import{useCallback as nw}from"preact/hooks";import{maybeTranslate as T7,LibraryItem as tw,Tooltip as ew}from"@blockcode/core";import{Text as U1}from"@blockcode/core";var e5="./assets/icon-chart-pb8d09c1.png";var w4="./assets/icon-class-9knmwm3x.png";var z4="./assets/icon-code-inline-ys5akvj2.png";var A4="./assets/icon-code-a2vdpfrq.png";var G4="./assets/icon-flowchart-fc029cyn.png";var Q4="./assets/icon-gantt-k5f3654b.png";var D4="./assets/icon-h1-rnce7wyt.png";var X4="./assets/icon-h2-489nzgpw.png";var Z4="./assets/icon-h3-sbx9v1tv.png";var $4="./assets/icon-image-bdpz7hs8.png";var q4="./assets/icon-line-1cq690e8.png";var J4="./assets/icon-link-kgj38r1x.png";var Y4="./assets/icon-list-c950x1ga.png";var U4="./assets/icon-math-inline-ch3hvqt6.png";var F4="./assets/icon-math-ya3qd63x.png";var K4="./assets/icon-mindmap-7qwcv3h7.png";var O4="./assets/icon-musical-ahh390hw.png";var V4="./assets/icon-orderlist-h2fx8sck.png";var P4="./assets/icon-quote-yph9h5ec.png";var j4="./assets/icon-scratch-a97wgagx.png";var W4="./assets/icon-sequence-9m9b9a2q.png";var f4="./assets/icon-state-4rgw5qpk.png";var S4="./assets/icon-table-rxf1wk60.png";var B4="./assets/icon-todo-vhf39hwz.png";var H4="./assets/icon-git-graph-0j6ta29n.png";var N4="./assets/icon-timeline-zwb50955.png";var $1={chart:e5,classDiagram:w4,codeInline:z4,code:A4,flowchart:G4,ganttChart:Q4,h1:D4,h2:X4,h3:Z4,image:$4,line:q4,link:J4,list:Y4,mathInline:U4,math:F4,mindmap:K4,musicalStaff:O4,orderList:V4,quote:P4,scratch:j4,sequence:W4,stateMachine:f4,table:S4,todo:B4,gitGraph:H4,timeline:N4};import{jsx as F1}from"preact/jsx-runtime";var y4=[{title:F1(U1,{id:"write.blocks.h1",defaultMessage:"H1"}),image:$1.h1,content:"# Heading 1"},{title:F1(U1,{id:"write.blocks.h2",defaultMessage:"H2"}),image:$1.h2,content:"## Heading 2"},{title:F1(U1,{id:"write.blocks.h3",defaultMessage:"H3"}),image:$1.h3,content:"### Heading 3"},{title:F1(U1,{id:"write.blocks.link",defaultMessage:"Link"}),image:$1.link,inline:!0,content:'[link](# "Title")'},{title:F1(U1,{id:"write.blocks.image",defaultMessage:"Image"}),image:$1.image,inline:!0,content:`![](${$1.image} "Title")`},{title:F1(U1,{id:"write.blocks.code",defaultMessage:"Code"}),image:$1.code,content:'```python\nprint("Hello World!")'},{title:F1(U1,{id:"write.blocks.codeInline",defaultMessage:"Code Inline"}),image:$1.codeInline,inline:!0,content:'`print("Hello World")`'},{title:F1(U1,{id:"write.blocks.list",defaultMessage:"List"}),image:$1.list,content:`- item
- item
- item`},{title:F1(U1,{id:"write.blocks.order",defaultMessage:"Order List"}),image:$1.orderList,content:`1. item
2. item
3. item`},{title:F1(U1,{id:"write.blocks.todo",defaultMessage:"Todo List"}),image:$1.todo,content:`- [x] item
- [x] item
- [ ] item`},{title:F1(U1,{id:"write.blocks.table",defaultMessage:"Table"}),image:$1.table,content:`| header 1 | header 2 |
| --- | --- |
| cell 1 | cell 2 |
| cell 3 | cell 4 |`},{title:F1(U1,{id:"write.blocks.quote",defaultMessage:"Quote"}),image:$1.quote,content:"> "},{title:F1(U1,{id:"write.blocks.line",defaultMessage:"Line"}),image:$1.line,content:`------
`},{title:F1(U1,{id:"write.blocks.scratch",defaultMessage:"Scratch"}),image:$1.scratch,content:"```scratch\nwhen green flag clicked\nmove (10) steps"},{title:F1(U1,{id:"write.blocks.math",defaultMessage:"Math"}),image:$1.math,content:"$$x = (-b +- sqrt(b^2-4ac))/(2a)"},{title:F1(U1,{id:"write.blocks.mathInline",defaultMessage:"Math Inline"}),image:$1.mathInline,inline:!0,content:"$a^2 + b^2 = c^2$"},{title:F1(U1,{id:"write.blocks.chart",defaultMessage:"Chart"}),image:$1.chart,content:`\`\`\`echarts
{
  xAxis: {
    type: 'category',
    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
  },
  yAxis: {
    type: 'value'
  },
  series: [
    {
      data: [820, 932, 901, 934, 1290, 1330, 1320],
      type: 'line',
      smooth: true
    }
  ]
}`},{title:F1(U1,{id:"write.blocks.mindmap",defaultMessage:"Mindmap"}),image:$1.mindmap,content:`\`\`\`mindmap
  root((mindmap))
    Origins
      Long history
      ::icon(fa fa-book)
      Popularisation
        British popular psychology author Tony Buzan
    Research
      On effectiveness<br/>and features
      On Automatic creation
        Uses
            Creative techniques
            Strategic planning
            Argument mapping
    Tools
      Pen and paper
      Mermaid`},{title:F1(U1,{id:"write.blocks.flowchart",defaultMessage:"Flowchart"}),image:$1.flowchart,content:`\`\`\`mermaid
flowchart TD
    A[Christmas] -->|Get money| B(Go shopping)
    B --> C{Let me think}
    C -->|One| D[Laptop]
    C -->|Two| E[iPhone]
    C -->|Three| F[fa:fa-car Car]`},{title:F1(U1,{id:"write.blocks.sequence",defaultMessage:"Sequence"}),image:$1.sequence,content:`\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!`},{title:F1(U1,{id:"write.blocks.classDiagram",defaultMessage:"Class Diagram"}),image:$1.classDiagram,content:`\`\`\`mermaid
classDiagram
    Animal <|-- Duck
    Animal <|-- Fish
    Animal <|-- Zebra
    Animal: +int age
    Animal: +String gender
    Animal: +isMammal()
    Animal: +mate()
    class Duck{
      +String beakColor
      +swim()
      +quack()
    }
    class Fish{
      -int sizeInFeet
      -canEat()
    }
    class Zebra{
      +bool is_wild
      +run()
    }`},{title:F1(U1,{id:"write.blocks.stateMachine",defaultMessage:"State Machine"}),image:$1.stateMachine,content:`\`\`\`mermaid
stateDiagram
    [*] --> Still
    Still --> [*]
    Still --> Moving
    Moving --> Still
    Moving --> Crash
    Crash --> [*]`},{title:F1(U1,{id:"write.blocks.ganttChart",defaultMessage:"Gantt Chart"}),image:$1.ganttChart,content:`\`\`\`mermaid
gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task        :a1, 2019-01-01, 30d
Another task  :after a1, 20d
section Another
Task in sec   :2019-01-12, 12d
another task  :24d`},{title:F1(U1,{id:"write.blocks.timeline",defaultMessage:"Timeline"}),image:$1.timeline,content:`\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
          : Google
    2005 : YouTube
    2006 : Twitter`},{title:F1(U1,{id:"write.blocks.gitGraph",defaultMessage:"Git Graph"}),image:$1.gitGraph,content:`\`\`\`mermaid
gitGraph
    commit
    branch develop
    checkout develop
    commit
    commit
    checkout main
    merge develop
    commit
    branch feature
    checkout feature
    commit
    commit
    checkout main
    merge feature`},{title:F1(U1,{id:"write.blocks.musicalStaff",defaultMessage:"Musical Staff"}),image:$1.musicalStaff,content:`\`\`\`abc
X:1
T:Twinkle, Twinkle, Little Star
M:4/4
L:1/4
K:C
C C G G | A A G2 | F F E E | D D C2 |
G G F F | E E D2 | G G F F | E E D2 |
C C G G | A A G2 | F F E E | D D C2 |]`}];z0(".j91aQa_tool{padding:calc(var(--space)/3);--tool-width:2.5rem;width:80px;height:auto}.j91aQa_tool div,.j91aQa_tool div div{height:var(--tool-width)}");var L4={tool:"j91aQa_tool"};import{jsx as x4}from"preact/jsx-runtime";function I4(){let W1=nw((K1)=>()=>{if(!window.currentVditor)return;let v=window.currentVditor;if(!K1.inline)v.insertEmptyBlock("afterend");v.insertValue(K1.content),v.focus()},[]);return y4.map((K1)=>x4(ew,{placement:"left",content:K1.title,children:x4(tw,{className:L4.tool,image:K1.image,onSelect:W1(K1)})}))}import{scratchblocks as A5}from"@blockcode/utils";var R4={style:"scratch3",inline:!1,languages:Object.keys(A5.allLanguages),scale:0.7},M4={language:"scratch",render(W1,K1){W1.querySelectorAll(".language-scratch").forEach((L1)=>{if(L1.parentElement.classList.contains("vditor-wysiwyg__pre")||L1.parentElement.classList.contains("vditor-ir__marker--pre"))return;let m=L1.textContent;if(!m)return;try{let W=A5.parse(m,R4),N=A5.render(W,R4),M=document.createElement("div");M.setAttribute("class","language-scratch"),M.setAttribute("data-processed","true"),M.append(N),L1.parentElement.append(M),L1.remove()}catch(W){L1.className="vditor-reset--error",L1.innerHTML=`scratch blocks render error: <br>${W}`}})}};z0("._0cLv3q_editor-wrapper{--toolbox-width:calc(80px + var(--space)*2);height:100%;display:flex}._0cLv3q_toolbox-wrapper{background:var(--ui-white);border-left:1px solid var(--ui-black-transparent);width:var(--toolbox-width);overflow-y:auto}._0cLv3q_markdown-wrapper{width:calc(100% - var(--toolbox-width))}._0cLv3q_markdown-wrapper .vditor{border:0!important}._0cLv3q_markdown-wrapper .vditor-toolbar--hide{display:none}._0cLv3q_markdown-wrapper .vditor-reset{background:var(--ui-white);padding-bottom:30vh!important}._0cLv3q_markdown-wrapper .vditor-outline{border-right:1px solid var(--ui-black-transparent);background-color:var(--ui-white)}._0cLv3q_markdown-wrapper .vditor-outline__title{display:none}._0cLv3q_markdown-wrapper .vditor-panel{overflow:hidden;transform:translate(-4px,-8px);box-shadow:0 0 .5rem #00000040}._0cLv3q_markdown-wrapper .vditor-panel .vditor-icon{width:30px;height:30px;padding:var(--space)}._0cLv3q_markdown-wrapper .vditor-panel .vditor-icon:hover{color:var(--ui-white);background-color:var(--theme-primary)}._0cLv3q_markdown-wrapper .vditor-panel .vditor-input{padding:var(--space)calc(var(--space)/2)}._0cLv3q_markdown-wrapper .vditor-panel .vditor-tooltipped:before{display:none!important}._0cLv3q_markdown-wrapper .vditor-panel .vditor-tooltipped:after{display:none!important}.vditor-content .language-scratch{text-align:center;padding:var(--space)!important}");var T0={markdownWrapper:"_0cLv3q_markdown-wrapper",toolboxWrapper:"_0cLv3q_toolbox-wrapper",editorWrapper:"_0cLv3q_editor-wrapper"};import{jsx as C0,jsxs as D3}from"preact/jsx-runtime";function Q3({options:W1,customRenders:K1,onLoad:v,onInput:L1}){let m=w3(),{appState:W,splashVisible:N}=z3(),{file:M}=A3();return G5(()=>{if(!m.vditor)return;let{vditor:I}=m.vditor;I.outline.toggle(I,W.value?.outline)},[W.value?.outline,W.value?.advancedMode]),G5(()=>{if(m.vditor&&N.value)m.vditor.setValue(M.value.content),setTimeout(h4,500)},[N.value]),G5(()=>{if(m.current){let I=new T4.default(m.current,{...t5,...W1,cache:{id:`vditor-${M.value.id}`},after(){I.setValue(M.value.content),I.focus(),h4(),m.vditor=I,v?.(I)},input(q){G3({content:q}),L1?.(q)},customRenders:[].concat(M4,W1?.customRenders,K1).filter(Boolean)});window.currentVditor=I}return()=>{m.vditor?.destroy(),m.vditor=null,window.currentVditor=null}},[]),D3("div",{className:T0.editorWrapper,children:[C0("div",{className:T0.markdownWrapper,children:C0("div",{ref:m})}),C0("div",{className:T0.toolboxWrapper,children:C0(I4,{})})]})}import{Text as Z3}from"@blockcode/core";var C4="./assets/icon-markdown-3g5ex15e.svg";import{jsx as q3}from"preact/jsx-runtime";var $3={icon:C4,label:q3(Z3,{id:"write.tabs.editor",defaultMessage:"Write"})};import{Text as Y3}from"@blockcode/core";var k4="./assets/icon-preview-a3ch9ews.svg";import{jsx as F3}from"preact/jsx-runtime";var U3={icon:k4,label:F3(Y3,{id:"write.tabs.preview",defaultMessage:"Preview"})};export{U3 as previewTab,$3 as markdownTab,Q3 as MarkdownEditor};
