import{MathUtils as u}from"@blockcode/utils";import{addLocalesMessages as p,Text as o}from"@blockcode/core";var m={en:{"blocks.time.name":"Time","blocks.time.sync":"sync world time","blocks.time.setTimezone":"set timezone to [TIMEZONE]","blocks.time.getTime":"current [OPTION]","blocks.time.option.year":"year","blocks.time.option.month":"month","blocks.time.option.date":"date","blocks.time.option.weekday":"day of week","blocks.time.option.hour":"hour","blocks.time.option.minute":"minute","blocks.time.option.second":"second","blocks.time.days":"days since 2000"},"zh-Hans":{"blocks.time.name":"时间","blocks.time.sync":"同步时间","blocks.time.setTimezone":"将时区设为 [TIMEZONE]","blocks.time.getTime":"当前时间的 [OPTION]","blocks.time.option.year":"年","blocks.time.option.month":"月","blocks.time.option.date":"日","blocks.time.option.weekday":"星期","blocks.time.option.hour":"时","blocks.time.option.minute":"分","blocks.time.option.second":"秒","blocks.time.days":"2000 年至今的天数"},"zh-Hant":{"blocks.time.name":"時間","blocks.time.sync":"同步時間","blocks.time.setTimezone":"將時區設為 [TIMEZONE]","blocks.time.getTime":"當前時間的 [OPTION]","blocks.time.option.year":"年","blocks.time.option.month":"月","blocks.time.option.date":"日","blocks.time.option.weekday":"星期","blocks.time.option.hour":"時","blocks.time.option.minute":"分","blocks.time.option.second":"秒","blocks.time.days":"2000 年至今的天數"}};var a="./assets/icon-arfdewc6.svg";var r="./assets/ntptime-27t0dx06.py";import{jsx as i}from"preact/jsx-runtime";p(m);var E={icon:a,name:i(o,{id:"blocks.time.name",defaultMessage:"Time"}),files:[{name:"ntptime",type:"text/x-python",uri:r}],emulator(){return{get key(){return"time"},timezone:8,setTimezone(e){this.timezone=u.toNumber(e)},getTime(e){let d=new Date().getTimezoneOffset()/60+this.timezone,n=new Date(Date.now()+d*3600*1000);switch(e){case"year":return n.getFullYear();case"month":return n.getMonth()+1;case"date":return n.getDate();case"weekday":return n.getDay()===0?7:n.getDay();case"hour":return n.getHours();case"minute":return n.getMinutes();case"second":return n.getSeconds();default:return 0}},getDays(){return((new Date-new Date("2000-01-01T00:00:00"))/86400000).toFixed(6)}}},blocks:[{id:"getTime",text:i(o,{id:"blocks.time.getTime",defaultMessage:"current [OPTION]"}),output:"number",inputs:{OPTION:{defaultValue:"year",menu:[[i(o,{id:"blocks.time.option.year",defaultMessage:"year"}),"year"],[i(o,{id:"blocks.time.option.month",defaultMessage:"month"}),"month"],[i(o,{id:"blocks.time.option.date",defaultMessage:"date"}),"date"],[i(o,{id:"blocks.time.option.weekday",defaultMessage:"day of week"}),"weekday"],[i(o,{id:"blocks.time.option.hour",defaultMessage:"hour"}),"hour"],[i(o,{id:"blocks.time.option.minute",defaultMessage:"minute"}),"minute"],[i(o,{id:"blocks.time.option.second",defaultMessage:"second"}),"second"]]}},emu(e){return[`runtime.extensions.time.getTime(${this.quote_(e.getFieldValue("OPTION")||"year")})`,this.ORDER_FUNCTION_CALL]},mpy(e){return[`ntptime.get_time(${this.quote_(e.getFieldValue("OPTION")||"year")})`,this.ORDER_FUNCTION_CALL]}},{id:"days",text:i(o,{id:"blocks.time.days",defaultMessage:"days since 2000"}),output:"number",monitoring:!1,emu(){return["runtime.extensions.time.getDays()",this.ORDER_FUNCTION_CALL]},mpy(){return["ntptime.get_days()",this.ORDER_FUNCTION_CALL]}},"---",{id:"setTimezone",text:i(o,{id:"blocks.time.setTimezone",defaultMessage:"set timezone to [TIMEZONE]"}),inputs:{TIMEZONE:{type:"number",defaultValue:"8"}},emu(e){let t="";if(this.STATEMENT_PREFIX)t+=this.injectId(this.STATEMENT_PREFIX,e);let s=this.valueToCode(e,"TIMEZONE",this.ORDER_NONE)||"8";return t+=`runtime.extensions.time.setTimezone(${s})
`,t},mpy(e){let t="";if(this.STATEMENT_PREFIX)t+=this.injectId(this.STATEMENT_PREFIX,e);let s=this.valueToCode(e,"TIMEZONE",this.ORDER_NONE)||"8";return t+=`ntptime.timezone = num(${s})
`,t}},"---",{id:"sync",text:i(o,{id:"blocks.time.sync",defaultMessage:"sync world time"}),mpy(e){let t="";if(this.STATEMENT_PREFIX)t+=this.injectId(this.STATEMENT_PREFIX,e);return t+=`await ntptime.async_world_time()
`,t}}]};export{E as default};
