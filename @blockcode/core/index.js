function b(r){let o=globalThis.document,i=o.createElement("style");i.appendChild(o.createTextNode(r)),o.head.append(i)}b(":root{--ui-primary:#e5f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-light:#c3efe2;--ui-transparent:#fff0;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-black-transparent:#00000026;--modal-overlay:color(from var(--theme-primary) srgb r g b / .9);--theme-primary:#4c97ff;--theme-secondary:#4280d7;--theme-tertiary:#3373cc;--theme-transparent:color(from var(--theme-primary) srgb r g b / .35);--theme-light-transparent:color(from var(--theme-primary) srgb r g b / .15);--theme-highlight:#8abbff;--text-primary:#575e75;--text-transparent:color(from var(--text-primary) srgb r g b / .75);--warn-primary:#ff8c1a;--warn-light:#ffb366;--warn-transparent:color(from var(--warn-primary) srgb r g b / .25);--error-primary:#ff661a;--error-secondary:#e64d00;--blocks-primary:#0fbd8c;--blocks-secondary:#0da57a;--blocks-tertiary:#0b8e69;--blocks-transparent:color(from var(--blocks-primary) srgb r g b / .35);--blocks-motion-primary:#4c97ff;--blocks-looks-primary:#96f;--blocks-sounds-primary:#cf63cf;--blocks-event-primary:#ffbf00;--blocks-control-primary:#ffab19;--blocks-sensing-primary:#5cb1d6;--blocks-operators-primary:#59c059;--blocks-variables-primary:#ff8c1a;--blocks-lists-primary:#ff661a;--blocks-myblocks-primary:#ff6680;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space) / 2);--min-width:970px;--min-height:720px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{width:100%;height:100%;min-width:var(--min-width);min-height:var(--min-height);margin:0}*{box-sizing:border-box;user-select:none}");b("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var Ia={ui:{primary:"#E5F0FF",secondary:"#E9F1FC",tertiary:"#D9E3F2",light:"#C3EFE2",theme:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",highlight:"#8ABBFF"},text:{primary:"#575E75"},warn:{primary:"#FF8C1A",light:"#FFB366"},error:{primary:"#FF661A",secondary:"#E64D00"}},blocks:{primary:"#0FBD8C",secondary:"#0DA57A",tertiary:"#0B8E69",quaternary:"#0B8E69",motion:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",quaternary:"#3373CC"},looks:{primary:"#9966FF",secondary:"#855CD6",tertiary:"#774DCB",quaternary:"#774DCB"},sounds:{primary:"#CF63CF",secondary:"#C94FC9",tertiary:"#BD42BD",quaternary:"#BD42BD"},events:{primary:"#FFBF00",secondary:"#E6AC00",tertiary:"#CC9900",quaternary:"#CC9900"},control:{primary:"#FFAB19",secondary:"#EC9C13",tertiary:"#CF8B17",quaternary:"#CF8B17"},sensing:{primary:"#5CB1D6",secondary:"#47A8D1",tertiary:"#2E8EB8",quaternary:"#2E8EB8"},operators:{primary:"#59C059",secondary:"#46B946",tertiary:"#389438",quaternary:"#389438"},text:{primary:"#46B963",secondary:"#3FA662",tertiary:"#389457"},variables:{primary:"#FF8C1A",secondary:"#FF8000",tertiary:"#DB6E00",quaternary:"#DB6E00"},lists:{primary:"#FF661A",secondary:"#FF5500",tertiary:"#E64D00",quaternary:"#E64D00"},myblocks:{primary:"#FF6680",secondary:"#FF4D6A",tertiary:"#FF3355",quaternary:"#FF3355"},debug:{primary:"#29BEB8",secondary:"#24A9A4",tertiary:"#3AA8A4"}}};import{createContext as Oa}from"preact";import{useContext as Ea}from"preact/hooks";import{computed as ti,effect as Pa,signal as ni}from"@preact/signals";var l1,Nr=function(r,o){return Nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])},Nr(r,o)},Xo=function(r){function o(i,a){var t=r.call(this,"Translation failed")||this;return t.id=i,t.language=a,t}return function(i,a){if(typeof a!="function"&&a!==null)throw TypeError("Class extends value "+a+" is not a constructor or null");function t(){this.constructor=i}Nr(i,a),i.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}(o,r),o.is=function(i){return i instanceof o},o}(Error),za=function(){function r(o){this.input=o,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return r.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},r.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},r}();(function(r){r[r.Plural=0]="Plural",r[r.Select=1]="Select",r[r.Text=2]="Text",r[r.Variable=3]="Variable"})(l1||(l1={}));var qa=["{","}",","],Na=function(){function r(o){this.input=new za(o)}return r.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},r.prototype.skip=function(o){o!==this.input.value&&this.input.croak(),this.input.next()},r.prototype.readWhile=function(o){for(var i="";!this.input.done&&o(this.input.value);)i+=this.input.value,this.input.next();return i},r.prototype.readVariable=function(){this.skip("{");var o=this.readWhile(function(a){return!function(t){return qa.includes(t)}(a)}).trim();if(o.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:l1.Variable,value:o};this.skip(",");var i=this.readVariableType();return{options:this.readVariableOptions(),type:i,value:o}},r.prototype.readText=function(){return{type:l1.Text,value:this.readWhile(function(o){return o!=="{"&&o!=="}"})}},r.prototype.readVariableType=function(){var o=this.readWhile(function(i){return i!==","}).trim();return o==="plural"?l1.Plural:o==="select"?l1.Select:void this.input.croak()},r.prototype.readVariableOptions=function(){this.skip(",");for(var o={};this.input.value!=="}";)o[this.readText().value.trim()]=this.readExpression();return this.skip("}"),o},r.prototype.readExpression=function(){var o=[];for(this.skip("{");this.input.value!=="}";)o.push(this.next());return this.skip("}"),o},r}();function Za(r,o,i){for(var a=new Na(o),t=[],n=function(c){var{options:e,type:l,value:h}=c;if(l!==l1.Variable)if(e)if(l!==l1.Select)try{t.concat(e[new Intl.PluralRules(r).select(i[h])].map(n))}catch(d){t.concat(e.other.map(n))}else t.concat((e[i[h]]||e.other).map(n));else t.push(h);else t.push(i[h])};!a.input.done;)n(a.next());return t}var B1=function(r,o){r===void 0&&(r="en"),o===void 0&&(o=[]);var i=this;this.memo={},this.onError=console.error,this.formatDate=function(t,n){return new Intl.DateTimeFormat(i.language,n).format(t)},this.formatNumber=function(t,n){return new Intl.NumberFormat(i.language,n).format(t)},this.translate=function(t,n){n===void 0&&(n={});var c=i.getMessageById(t,n.defaultMessage);if(typeof c=="string")try{return Za(i.language,c,n).join("")}catch(e){i.onError(new Xo(t,i.language))}return c+""},this.getMessageById=function(t,n){if(!i.memo[t]){var c=i.messages[t];c===void 0&&(c=t.split(".").reduce(function(e,l){return e?e[l]:void 0},i.messages)),typeof c!="string"&&(i.onError(new Xo(t,i.language)),c=n||t),i.memo[t]=c}return i.memo[t]};var a=o.find(function(t){return t.language===r});this.language=r,this.messages=a?a.messages:{}};import{createContext as Ta,h as W1,Fragment as Zr}from"preact";import{useState as Da,useEffect as Ua,useContext as Ho}from"preact/hooks";function Tr(r,o){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var t=0;for(a=Object.getOwnPropertySymbols(r);t<a.length;t++)o.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(r,a[t])&&(i[a[t]]=r[a[t]])}return i}var Dr=Ta({language:"",locales:[],setLanguage:function(){},translator:new B1}),Qo=function(r){var{children:o,language:i,locales:a,onError:t}=r,n=Da(i);Ua(function(){n[1](i)},[i]);var c=new B1(n[0],a);return t&&(c.onError=t),W1(Dr.Provider,{value:{language:n[0],locales:a,setLanguage:n[1],translator:c}},o)};function Yo(r){var o=Ho(Dr);return r&&r!==o.language?new B1(r):o.translator}var Sa=function(r){var{language:o,value:i}=r,a=Tr(r,["children","language","value"]);return W1(Zr,null,Yo(o).formatDate(i,a))},Ka=function(r){var{language:o,value:i}=r,a=Tr(r,["children","language","value"]);return W1(Zr,null,Yo(o).formatNumber(i,a))},J=function(r){var{html:o,id:i,tagName:a}=r,t=a===void 0?"span":a,n=Tr(r,["children","html","id","tagName"]),c=Ho(Dr).translator.translate(i,n);return o?W1(t,{dangerouslySetInnerHTML:{__html:c}}):W1(Zr,null,c)};import{nullObject as M1}from"@blockcode/utils";import{setUserLanguage as Wa,getUserLanguage as Ma,nullObject as Aa}from"@blockcode/utils";var{DisplayNames:Ur,Locale:Ja}=window.Intl,Oo="en",Eo=navigator.language,tr=new Map;function Po(r){let o=new Ja(r),i=o.textInfo||o.getTextInfo();return i&&i.direction==="rtl"}var Ra=Aa({"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"});function $o(){let r=Ma()||Eo;return r=Ra[r]||r,tr.has(r)?r:Oo}function jo(r){document.querySelector("html").lang=r,Wa(r)}var Va=new Ur([Oo],{type:"language"}),Xa=new Ur([Eo],{type:"language"});function nr(r,o={}){let i=new Ur([r],{type:"language"});return tr.set(r,{languageName:i.of(r),languageNameByDefault:Va.of(r),languageNameByBrowser:Xa.of(r)}),{language:r,messages:o}}var ri={"core.modal.back":"Back","core.library.all":"All","core.library.beta":"Beta","core.library.comingSoon":"Coming Soon","core.library.requires":"Requires","core.library.programming":"Programming","core.library.collaboration":"Collaboration with","core.library.readmore":"Read more...","core.box.shrink":"Shrink","core.box.expand":"Expand","core.box.close":"Close"};var oi={"core.modal.back":"返回","core.library.all":"所有","core.library.beta":"测试版","core.library.comingSoon":"敬请期待","core.library.requires":"系统需求","core.library.programming":"编程语言","core.library.collaboration":"合作者","core.library.readmore":"查看更多…","core.box.shrink":"收起","core.box.expand":"展开","core.box.close":"关闭"};var ii={"core.modal.back":"返迴","core.library.all":"所有","core.library.beta":"測試版","core.library.comingSoon":"敬請期待","core.library.requires":"係統需求","core.library.programming":"編程語言","core.library.collaboration":"合作者","core.library.readmore":"查看更多…","core.box.shrink":"收起","core.box.expand":"展開","core.box.close":"關閉"};import{jsx as ai}from"preact/jsx-runtime";var er=ni([nr("en",M1(ri)),nr("zh-Hans",M1(oi)),nr("zh-Hant",M1(ii))]);function $a(r){er.value=er.value.map((o)=>M1({language:o.language,messages:M1(o.messages,r[o.language]??{})}))}var G1=ni($o()),ja=ti(()=>Po(G1.value)),rt=ti(()=>new B1(G1.value,er.value));Pa(()=>jo(G1.value));function ot(r){G1.value=r}function ei(r,o,i={}){return rt.value.translate(r,{defaultMessage:o,...i})}function Z(r,o={}){if(!r?.props)return r;if(r.props.children)return[].concat(r.props.children).map((i)=>Z(i)).join("");return ei(r.props.id,r.props.defaultMessage,Object.assign(r.props,o))}var ci=Oa(),it=()=>Ea(ci);function at({children:r}){return ai(ci.Provider,{value:{language:G1,languageNames:tr,isRtl:ja},children:ai(Qo,{locales:er.value,language:G1.value,onError:tt,children:r})})}function tt(r){}import{createContext as nt}from"preact";import{useContext as et}from"preact/hooks";import{batch as ui,signal as D}from"@preact/signals";import{isElectron as hi,isMac as vi,nanoid as ct,nullObject as Ar}from"@blockcode/utils";import{isMac as $}from"@blockcode/utils";var v={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Delete",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},li={[v.ESC]:$?"⎋":"Esc",[v.F1]:"F1",[v.F2]:"F2",[v.F3]:"F3",[v.F4]:"F4",[v.F5]:"F5",[v.F6]:"F6",[v.F7]:"F7",[v.F8]:"F8",[v.F9]:"F9",[v.F10]:"F10",[v.F11]:"F11",[v.F12]:"F12",[v.D1]:"1",[v.D2]:"2",[v.D3]:"3",[v.D4]:"4",[v.D5]:"5",[v.D6]:"6",[v.D7]:"7",[v.D8]:"8",[v.D9]:"9",[v.D0]:"0",[v.TAB]:$?"⇥":"Tab",[v.DELETE]:$?"⌫":"Backspace",[v.RETURN]:$?"↩":"Enter",[v.A]:"A",[v.B]:"B",[v.C]:"C",[v.D]:"D",[v.E]:"E",[v.F]:"F",[v.G]:"G",[v.H]:"H",[v.I]:"I",[v.J]:"J",[v.K]:"K",[v.L]:"L",[v.M]:"M",[v.N]:"N",[v.O]:"O",[v.P]:"P",[v.Q]:"Q",[v.R]:"R",[v.S]:"S",[v.T]:"T",[v.U]:"U",[v.V]:"V",[v.W]:"W",[v.X]:"X",[v.Y]:"Y",[v.Z]:"Z",[v.UP]:"↑",[v.DOWN]:"↓",[v.LEFT]:"←",[v.RIGHT]:"→",[v.SHIFT]:$?"⇧":"Shift",[v.CONTROL]:$?"⌃":"Ctrl",[v.OPTION]:$?"⌥":"Alt",[v.COMMAND]:$?"⌘":"⊞"},di={[v.CONTROL]:0,[v.OPTION]:1,[v.SHIFT]:2,[v.COMMAND]:3},Sr=new Map;function Kr(r,o){Sr.set(r.join("-"),o)}function Wr(r){let o=[];if(typeof r==="string")r=r.split("-");return r.forEach((i)=>{if(di.hasOwnProperty(i))o[di[i]]=li[i];else o.push(li[i])}),o.filter((i)=>i).join($?"":"+")}function Mr(){Sr.clear()}window.addEventListener("keydown",(r)=>{Sr.forEach((o,i)=>{let a=(t)=>{if(t===v.CONTROL&&r.ctrlKey)return!0;if(t===v.OPTION&&r.altKey)return!0;if(t===v.SHIFT&&r.shiftKey)return!0;if(t===v.COMMAND&&r.metaKey)return!0;if(t===r.code)return!0;return!1};if(typeof i==="string")i=i.split("-");if(i.every(a)&&typeof o==="function"){r.preventDefault();try{o()}catch(t){}}})});import{jsx as Bt}from"preact/jsx-runtime";var lr=D(!1);function lt(){lr.value=!0}function dt(){lr.value=!1}var j=D([]),Jr=Object.create(null);function ut(r,o){Jr[r]=o}function ht(...r){let o,i,a=0;for(let t of r){if(typeof t==="string")o=t;if(typeof t==="object")i=t;if(typeof t==="number")a=t}if(o&&Jr[o])i=Ar(Jr[o],i??{});if(!i)return;if(!i.id)i.id=ct();if(j.value.find((t)=>i.id===t.id))j.value=j.value.map((t)=>{if(t.id===i.id)return Object.assign(t,i);return t});else j.value=j.value.concat(i);if(a>0)setTimeout(()=>pi(i.id),a);return i.id}function pi(r){j.value=j.value.filter((o)=>o.id!==r)}var dr=D(null);function vt(r){dr.value=r}function pt(){dr.value=null}var Vr=D(null),Xr=D(null),Hr=D(null),ur=D(-1),Qr=D(null),Yr=D(null),L1=D(null),cr=D(null),Rr=D(null);function mt(r){ui(()=>{Vr.value=r.menuItems,Xr.value=r.barItems,Hr.value=r.tabs,ur.value=r.tabIndex??0,Qr.value=r.docks,Yr.value=r.panes,L1.value=r.tutorials})}function ft(){Mr(),ui(()=>{lr.value=!1,j.value.length=0,dr.value=null,Vr.value=null,Xr.value=null,Hr.value=null,ur.value=-1,Qr.value=null,Yr.value=null,L1.value=null,cr.value=null,Rr.value=null})}function bt(r){ur.value=r}function wt(r){r.value=state.tabs.value.concat(r)}function _t(r){L1.value=Ar(L1.value??{},{lessons:Ar(L1.value?.lessons??{},r)})}function xt(r,o){if(typeof r==="string")r={[r]:o};cr.value=Object.assign({},cr.value??{},r)}var Ct={log(r){let o=new Date,i=o.getHours().toString().padStart(2,"0"),a=o.getMinutes().toString().padStart(2,"0"),t=o.getSeconds().toString().padStart(2,"0");Rr.value=this.logs.concat(`\x1B[38;5;252m[${i}:${a}:${t}]\x1B[0m${r}`)},info(r){this.log(`\x1B[36m${r}\x1B[0m`)},warn(r){this.log(`⚠️ \x1B[33m${r}\x1B[0m`)},error(r){this.log(`❌ \x1B[31m${r}\x1B[0m`)},success(r){this.log(`✅ \x1B[32m${r}\x1B[0m`)},get logs(){return Rr.value??[]}},Or=D(!1);function st(){Or.value=!0}function gt(){Or.value=!1}var mi=D(vi&&hi);function kt(r){if(vi&&hi)mi.value=r}var fi=nt(),Er=()=>et(fi);function yt({children:r}){return Bt(fi.Provider,{value:{splashVisible:lr,alerts:j,prompt:dr,menuItems:Vr,barItems:Xr,tabs:Hr,tabIndex:ur,docks:Qr,panes:Yr,tutorials:L1,appState:cr,userStorageVisible:Or,macosMenuBarStyled:mi},children:r})}import{createContext as Gt}from"preact";import{useContext as Lt}from"preact/hooks";import{batch as r1,computed as vr,signal as o1}from"@preact/signals";import{nanoid as Pr}from"@blockcode/utils";function A1(r,o,i){if(r=r.trim(),i.find((a)=>o!==a.id&&a.name===r)){let a=r.replace(/\d+$/,""),t=new RegExp(`${a}(\\d+)$`),n=0;for(let c of i){if(o===c.id)continue;let e=t.exec(c.name);if(e){let l=parseInt(e[1]);if(l>n)n=l}}r=`${a}${n+1}`}return r}import{jsx as At}from"preact/jsx-runtime";var M={Saved:0,Rename:1,AddFile:2,SetFile:3,DelFile:4,AddAsset:5,SetAsset:6,DelAsset:7,SetMeta:8},J1=o1(null);function Ft(r,o){if(typeof r==="string")r={[r]:o};r1(()=>{J1.value=Object.assign({},J1.value??{},r),i1(M.SetMeta)})}var $r=o1(null),jr=o1(null),F1=o1(0);function i1(r=M.Saved){if(r===M.Saved)F1.value=M.Saved;else F1.value=(Math.floor(F1.value/10)+1)*10+r}function It(r=M.Saved){return F1.value%10===r}var pr=o1("");function zt(r){pr.value=r,i1(M.Rename)}var B=o1(null),Q=o1(null),mr=vr(()=>B.value?.findIndex((r)=>r.id===Q.value)??-1),ro=vr(()=>B.value?.find((r)=>r.id===Q.value)??null);function hr(r){Q.value=r}function qt(r){if(!r.id)r.id=Pr();if(B.value.find((o)=>o.id===r.id)){wi(r);return}r.name=A1(r.name,r.id,B.value),r1(()=>{B.value.push(r),Q.value=r.id,i1(M.AddFile)})}function wi(r){let o=ro.value,i=mr.value;if(r.id)o=B.value.find((a)=>a.id===r.id),i=B.value.findIndex((a)=>a.id===r.id);if(!o)return;if(r.name)r.name=A1(r.name,o.id,B.value);r1(()=>{B.value[i]=Object.assign(o,r),i1(M.SetFile)})}function Nt(r){if(mr===r)return B.value[r];if(Q.value!==r)return B.value.find((o)=>o.id===r);return ro}function Zt(r){let o=mr.value;if(Q.value!==r)o=B.value.findIndex((i)=>i.id===r);if(o===-1)return;r1(()=>{if(r===Q.value)if(o+1<B.value.length)hr(B.value[o+1]?.id);else if(o-1>-1)hr(B.value[o-1]?.id);else hr(null);B.value.splice(o,1),i1(M.DelFile)})}var z=o1(null),d1=o1(null),fr=vr(()=>z.value?.findIndex((r)=>r.id===d1.value)??-1),oo=vr(()=>z.value?.find((r)=>r.id===d1.value)??null);function io(r){d1.value=r}function Tt(r){if(!r.id)r.id=Pr();if(z.value.find((o)=>o.id===r.id)){_i(r);return}r.name=A1(r.name,r.id,z.value),r1(()=>{z.value.push(r),io(r.id),i1(M.AddAsset)})}function _i(r){let o=oo.value,i=fr.value;if(r.id)o=z.value.find((a)=>a.id===r.id),i=z.value.findIndex((a)=>a.id===r.id);if(!o)return;if(r.name)r.name=A1(r.name,o.id,z.value);r1(()=>{z.value[i]=Object.assign(o,r),i1(M.SetAsset)})}function Dt(r){if(fr===r)return z.value[r];if(d1.value!==r)return z.value.find((o)=>o.id===r);return oo}function Ut(r){let o=fr.value;if(d1.value!==r)o=z.value.findIndex((i)=>i.id===r);if(o===-1)return;r1(()=>{io(null),z.value.splice(o,1),i1(M.DelAsset)})}var bi=()=>(r)=>Object.assign(r,{name:Z(r.name)});function St(r){r1(()=>{J1.value=r.meta,$r.value=r.id,jr.value=r.key??Pr(),pr.value=Z(r.name),B.value=r.files?.map(bi())??[],Q.value=r.fileId,z.value=r.assets?.map(bi())??[],d1.value=r.assetId})}function Kt(){r1(()=>{J1.value=null,$r.value=null,jr.value=null,pr.value="",B.value=null,Q.value=null,z.value=null,d1.value=null,F1.value=0})}var xi=Gt(),Wt=()=>Lt(xi);function Mt({children:r}){return At(xi.Provider,{value:{meta:J1,id:$r,key:jr,name:pr,file:ro,files:B,fileId:Q,fileIndex:mr,asset:oo,assets:z,assetId:d1,assetIndex:fr,modified:F1},children:r})}import{useSignal as Ui}from"@preact/signals";import{classNames as so,sleepMs as C0}from"@blockcode/utils";import{useEffect as m0,useId as f0,useRef as b0}from"preact/hooks";import{classNames as w0}from"@blockcode/utils";function y(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var o=r.ownerDocument;return o?o.defaultView||window:window}return r}function I1(r){var o=y(r).Element;return r instanceof o||r instanceof Element}function F(r){var o=y(r).HTMLElement;return r instanceof o||r instanceof HTMLElement}function z1(r){if(typeof ShadowRoot>"u")return!1;var o=y(r).ShadowRoot;return r instanceof o||r instanceof ShadowRoot}var{max:Ci,min:si,round:a1}=Math;function q1(){var r=navigator.userAgentData;if(r!=null&&r.brands&&Array.isArray(r.brands))return r.brands.map(function(o){return o.brand+"/"+o.version}).join(" ");return navigator.userAgent}function ao(){return!/^((?!chrome|android).)*safari/i.test(q1())}function u1(r,o,i){if(o===void 0)o=!1;if(i===void 0)i=!1;var a=r.getBoundingClientRect(),t=1,n=1;if(o&&F(r))t=r.offsetWidth>0?a1(a.width)/r.offsetWidth||1:1,n=r.offsetHeight>0?a1(a.height)/r.offsetHeight||1:1;var c=I1(r)?y(r):window,e=c.visualViewport,l=!ao()&&i,h=(a.left+(l&&e?e.offsetLeft:0))/t,d=(a.top+(l&&e?e.offsetTop:0))/n,u=a.width/t,m=a.height/n;return{width:u,height:m,top:d,right:h+u,bottom:d+m,left:h,x:h,y:d}}function R1(r){var o=y(r),i=o.pageXOffset,a=o.pageYOffset;return{scrollLeft:i,scrollTop:a}}function to(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function no(r){if(r===y(r)||!F(r))return R1(r);else return to(r)}function q(r){return r?(r.nodeName||"").toLowerCase():null}function t1(r){return((I1(r)?r.ownerDocument:r.document)||window.document).documentElement}function eo(r){return u1(t1(r)).left+R1(r).scrollLeft}function R(r){return y(r).getComputedStyle(r)}function f1(r){var o=R(r),i=o.overflow,a=o.overflowX,t=o.overflowY;return/auto|scroll|overlay|hidden/.test(i+t+a)}function Jt(r){var o=r.getBoundingClientRect(),i=a1(o.width)/r.offsetWidth||1,a=a1(o.height)/r.offsetHeight||1;return i!==1||a!==1}function co(r,o,i){if(i===void 0)i=!1;var a=F(o),t=F(o)&&Jt(o),n=t1(o),c=u1(r,t,i),e={scrollLeft:0,scrollTop:0},l={x:0,y:0};if(a||!a&&!i){if(q(o)!=="body"||f1(n))e=no(o);if(F(o))l=u1(o,!0),l.x+=o.clientLeft,l.y+=o.clientTop;else if(n)l.x=eo(n)}return{x:c.left+e.scrollLeft-l.x,y:c.top+e.scrollTop-l.y,width:c.width,height:c.height}}function V1(r){var o=u1(r),i=r.offsetWidth,a=r.offsetHeight;if(Math.abs(o.width-i)<=1)i=o.width;if(Math.abs(o.height-a)<=1)a=o.height;return{x:r.offsetLeft,y:r.offsetTop,width:i,height:a}}function b1(r){if(q(r)==="html")return r;return r.assignedSlot||r.parentNode||(z1(r)?r.host:null)||t1(r)}function br(r){if(["html","body","#document"].indexOf(q(r))>=0)return r.ownerDocument.body;if(F(r)&&f1(r))return r;return br(b1(r))}function N1(r,o){var i;if(o===void 0)o=[];var a=br(r),t=a===((i=r.ownerDocument)==null?void 0:i.body),n=y(a),c=t?[n].concat(n.visualViewport||[],f1(a)?a:[]):a,e=o.concat(c);return t?e:e.concat(N1(b1(c)))}function lo(r){return["table","td","th"].indexOf(q(r))>=0}function gi(r){if(!F(r)||R(r).position==="fixed")return null;return r.offsetParent}function Rt(r){var o=/firefox/i.test(q1()),i=/Trident/i.test(q1());if(i&&F(r)){var a=R(r);if(a.position==="fixed")return null}var t=b1(r);if(z1(t))t=t.host;while(F(t)&&["html","body"].indexOf(q(t))<0){var n=R(t);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||o&&n.willChange==="filter"||o&&n.filter&&n.filter!=="none")return t;else t=t.parentNode}return null}function w1(r){var o=y(r),i=gi(r);while(i&&lo(i)&&R(i).position==="static")i=gi(i);if(i&&(q(i)==="html"||q(i)==="body"&&R(i).position==="static"))return o;return i||Rt(r)||o}var V="top",h1="bottom",X="right",A="left",Vt="auto",uo=[V,h1,X,A],ho="start",Z1="end";var ki=[].concat(uo,[Vt]).reduce(function(r,o){return r.concat([o,o+"-"+ho,o+"-"+Z1])},[]),Xt="beforeRead",Ht="read",Qt="afterRead",Yt="beforeMain",Ot="main",Et="afterMain",Pt="beforeWrite",$t="write",jt="afterWrite",yi=[Xt,Ht,Qt,Yt,Ot,Et,Pt,$t,jt];function r0(r){var o=new Map,i=new Set,a=[];r.forEach(function(n){o.set(n.name,n)});function t(n){i.add(n.name);var c=[].concat(n.requires||[],n.requiresIfExists||[]);c.forEach(function(e){if(!i.has(e)){var l=o.get(e);if(l)t(l)}}),a.push(n)}return r.forEach(function(n){if(!i.has(n.name))t(n)}),a}function vo(r){var o=r0(r);return yi.reduce(function(i,a){return i.concat(o.filter(function(t){return t.phase===a}))},[])}function po(r){var o;return function(){if(!o)o=new Promise(function(i){Promise.resolve().then(function(){o=void 0,i(r())})});return o}}function mo(r){var o=r.reduce(function(i,a){var t=i[a.name];return i[a.name]=t?Object.assign({},t,a,{options:Object.assign({},t.options,a.options),data:Object.assign({},t.data,a.data)}):a,i},{});return Object.keys(o).map(function(i){return o[i]})}function fo(r,o){var i=o.getRootNode&&o.getRootNode();if(r.contains(o))return!0;else if(i&&z1(i)){var a=o;do{if(a&&r.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function n1(r){return r.split("-")[0]}function X1(r){return r.split("-")[1]}function H1(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function bo(r){var{reference:o,element:i,placement:a}=r,t=a?n1(a):null,n=a?X1(a):null,c=o.x+o.width/2-i.width/2,e=o.y+o.height/2-i.height/2,l;switch(t){case V:l={x:c,y:o.y-i.height};break;case h1:l={x:c,y:o.y+o.height};break;case X:l={x:o.x+o.width,y:e};break;case A:l={x:o.x-i.width,y:e};break;default:l={x:o.x,y:o.y}}var h=t?H1(t):null;if(h!=null){var d=h==="y"?"height":"width";switch(n){case ho:l[h]=l[h]-(o[d]/2-i[d]/2);break;case Z1:l[h]=l[h]+(o[d]/2-i[d]/2);break;default:}}return l}function wo(){return{top:0,right:0,bottom:0,left:0}}function _o(r){return Object.assign({},wo(),r)}function xo(r,o){return o.reduce(function(i,a){return i[a]=r,i},{})}var Bi={placement:"bottom",modifiers:[],strategy:"absolute"};function Gi(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return!o.some(function(a){return!(a&&typeof a.getBoundingClientRect==="function")})}function Li(r){if(r===void 0)r={};var o=r,i=o.defaultModifiers,a=i===void 0?[]:i,t=o.defaultOptions,n=t===void 0?Bi:t;return function(e,l,h){if(h===void 0)h=n;var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bi,n),modifiersData:{},elements:{reference:e,popper:l},attributes:{},styles:{}},u=[],m=!1,f={state:d,setOptions:function(p){var s=typeof p==="function"?p(d.options):p;w(),d.options=Object.assign({},n,d.options,s),d.scrollParents={reference:I1(e)?N1(e):e.contextElement?N1(e.contextElement):[],popper:N1(l)};var I=vo(mo([].concat(a,d.options.modifiers)));return d.orderedModifiers=I.filter(function(G){return G.enabled}),k(),f.update()},forceUpdate:function(){if(m)return;var p=d.elements,s=p.reference,I=p.popper;if(!Gi(s,I))return;d.rects={reference:co(s,w1(I),d.options.strategy==="fixed"),popper:V1(I)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(ar){return d.modifiersData[ar.name]=Object.assign({},ar.data)});for(var G=0;G<d.orderedModifiers.length;G++){if(d.reset===!0){d.reset=!1,G=-1;continue}var N=d.orderedModifiers[G],L=N.fn,P=N.options,y1=P===void 0?{}:P,qr=N.name;if(typeof L==="function")d=L({state:d,options:y1,name:qr,instance:f})||d}},update:po(function(){return new Promise(function(_){f.forceUpdate(),_(d)})}),destroy:function(){w(),m=!0}};if(!Gi(e,l))return f;f.setOptions(h).then(function(_){if(!m&&h.onFirstUpdate)h.onFirstUpdate(_)});function k(){d.orderedModifiers.forEach(function(_){var{name:p,options:s}=_,I=s===void 0?{}:s,G=_.effect;if(typeof G==="function"){var N=G({state:d,name:p,instance:f,options:I}),L=function(){};u.push(N||L)}})}function w(){u.forEach(function(_){return _()}),u=[]}return f}}var wr={passive:!0};function o0(r){var{state:o,instance:i,options:a}=r,t=a.scroll,n=t===void 0?!0:t,c=a.resize,e=c===void 0?!0:c,l=y(o.elements.popper),h=[].concat(o.scrollParents.reference,o.scrollParents.popper);if(n)h.forEach(function(d){d.addEventListener("scroll",i.update,wr)});if(e)l.addEventListener("resize",i.update,wr);return function(){if(n)h.forEach(function(d){d.removeEventListener("scroll",i.update,wr)});if(e)l.removeEventListener("resize",i.update,wr)}}var Fi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o0,data:{}};function i0(r){var{state:o,name:i}=r;o.modifiersData[i]=bo({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})}var Ii={name:"popperOffsets",enabled:!0,phase:"read",fn:i0,data:{}};var a0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function t0(r,o){var{x:i,y:a}=r,t=o.devicePixelRatio||1;return{x:a1(i*t)/t||0,y:a1(a*t)/t||0}}function zi(r){var o,i=r.popper,a=r.popperRect,t=r.placement,n=r.variation,c=r.offsets,e=r.position,l=r.gpuAcceleration,h=r.adaptive,d=r.roundOffsets,u=r.isFixed,m=c.x,f=m===void 0?0:m,k=c.y,w=k===void 0?0:k,_=typeof d==="function"?d({x:f,y:w}):{x:f,y:w};f=_.x,w=_.y;var p=c.hasOwnProperty("x"),s=c.hasOwnProperty("y"),I=A,G=V,N=window;if(h){var L=w1(i),P="clientHeight",y1="clientWidth";if(L===y(i)){if(L=t1(i),R(L).position!=="static"&&e==="absolute")P="scrollHeight",y1="scrollWidth"}if(L=L,t===V||(t===A||t===X)&&n===Z1){G=h1;var qr=u&&L===N&&N.visualViewport?N.visualViewport.height:L[P];w-=qr-a.height,w*=l?1:-1}if(t===A||(t===V||t===h1)&&n===Z1){I=X;var ar=u&&L===N&&N.visualViewport?N.visualViewport.width:L[y1];f-=ar-a.width,f*=l?1:-1}}var Ro=Object.assign({position:e},h&&a0),Vo=d===!0?t0({x:f,y:w},y(i)):{x:f,y:w};if(f=Vo.x,w=Vo.y,l){var K1;return Object.assign({},Ro,(K1={},K1[G]=s?"0":"",K1[I]=p?"0":"",K1.transform=(N.devicePixelRatio||1)<=1?"translate("+f+"px, "+w+"px)":"translate3d("+f+"px, "+w+"px, 0)",K1))}return Object.assign({},Ro,(o={},o[G]=s?w+"px":"",o[I]=p?f+"px":"",o.transform="",o))}function n0(r){var{state:o,options:i}=r,a=i.gpuAcceleration,t=a===void 0?!0:a,n=i.adaptive,c=n===void 0?!0:n,e=i.roundOffsets,l=e===void 0?!0:e,h={placement:n1(o.placement),variation:X1(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:t,isFixed:o.options.strategy==="fixed"};if(o.modifiersData.popperOffsets!=null)o.styles.popper=Object.assign({},o.styles.popper,zi(Object.assign({},h,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:c,roundOffsets:l})));if(o.modifiersData.arrow!=null)o.styles.arrow=Object.assign({},o.styles.arrow,zi(Object.assign({},h,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})));o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})}var qi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:n0,data:{}};function e0(r){var o=r.state;Object.keys(o.elements).forEach(function(i){var a=o.styles[i]||{},t=o.attributes[i]||{},n=o.elements[i];if(!F(n)||!q(n))return;Object.assign(n.style,a),Object.keys(t).forEach(function(c){var e=t[c];if(e===!1)n.removeAttribute(c);else n.setAttribute(c,e===!0?"":e)})})}function c0(r){var o=r.state,i={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};if(Object.assign(o.elements.popper.style,i.popper),o.styles=i,o.elements.arrow)Object.assign(o.elements.arrow.style,i.arrow);return function(){Object.keys(o.elements).forEach(function(a){var t=o.elements[a],n=o.attributes[a]||{},c=Object.keys(o.styles.hasOwnProperty(a)?o.styles[a]:i[a]),e=c.reduce(function(l,h){return l[h]="",l},{});if(!F(t)||!q(t))return;Object.assign(t.style,e),Object.keys(n).forEach(function(l){t.removeAttribute(l)})})}}var Ni={name:"applyStyles",enabled:!0,phase:"write",fn:e0,effect:c0,requires:["computeStyles"]};var l0=[Fi,Ii,qi,Ni],T1=Li({defaultModifiers:l0});function d0(r,o,i){var a=n1(r),t=[A,V].indexOf(a)>=0?-1:1,n=typeof i==="function"?i(Object.assign({},o,{placement:r})):i,c=n[0],e=n[1];return c=c||0,e=(e||0)*t,[A,X].indexOf(a)>=0?{x:e,y:c}:{x:c,y:e}}function u0(r){var{state:o,options:i,name:a}=r,t=i.offset,n=t===void 0?[0,0]:t,c=ki.reduce(function(d,u){return d[u]=d0(u,o.rects,n),d},{}),e=c[o.placement],l=e.x,h=e.y;if(o.modifiersData.popperOffsets!=null)o.modifiersData.popperOffsets.x+=l,o.modifiersData.popperOffsets.y+=h;o.modifiersData[a]=c}var _r={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:u0};function Zi(r,o,i){return Ci(r,si(o,i))}var h0=function(o,i){return o=typeof o==="function"?o(Object.assign({},i.rects,{placement:i.placement})):o,_o(typeof o!=="number"?o:xo(o,uo))};function v0(r){var o,i=r.state,a=r.name,t=r.options,n=i.elements.arrow,c=i.modifiersData.popperOffsets,e=n1(i.placement),l=H1(e),h=[A,X].indexOf(e)>=0,d=h?"height":"width";if(!n||!c)return;var u=h0(t.padding,i),m=V1(n),f=l==="y"?V:A,k=l==="y"?h1:X,w=i.rects.reference[d]+i.rects.reference[l]-c[l]-i.rects.popper[d],_=c[l]-i.rects.reference[l],p=w1(n),s=p?l==="y"?p.clientHeight||0:p.clientWidth||0:0,I=w/2-_/2,G=u[f],N=s-m[d]-u[k],L=s/2-m[d]/2+I,P=Zi(G,L,N),y1=l;i.modifiersData[a]=(o={},o[y1]=P,o.centerOffset=P-L,o)}function p0(r){var{state:o,options:i}=r,a=i.element,t=a===void 0?"[data-popper-arrow]":a;if(t==null)return;if(typeof t==="string"){if(t=o.elements.popper.querySelector(t),!t)return}if(!fo(o.elements.popper,t))return;o.elements.arrow=t}var Ti={name:"arrow",enabled:!0,phase:"main",fn:v0,effect:p0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};b('.BfU_xa_tooltip{background:var(--theme-primary);border-radius:var(--form-radius);opacity:0;z-index:-1;color:var(--ui-white);padding:var(--space) calc(var(--space) * 2.5);white-space:nowrap;pointer-events:none;border:1px solid #0000001a;font-size:.8rem;transition:opacity .2s ease-out;box-shadow:0 0 .5rem #00000040}.BfU_xa_tooltip[data-show]{opacity:1;z-index:var(--z-index-tooltip);pointer-events:auto}.BfU_xa_arrow,.BfU_xa_arrow:before{background:inherit;width:8px;height:8px;position:absolute}.BfU_xa_arrow{visibility:hidden}.BfU_xa_arrow:before{visibility:visible;content:"";border:1px solid #0000001a;border-radius:2px;transform:rotate(45deg)}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow{bottom:-4px}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow:before{border-top:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow{top:-4px}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow:before{border-bottom:0;border-right:0}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow{right:-4px}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow:before{border-bottom:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow{left:-4px}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow:before{border-top:0;border-right:0}');var Co={arrow:"BfU_xa_arrow",tooltip:"BfU_xa_tooltip"};import{jsx as x0,jsxs as Di,Fragment as _0}from"preact/jsx-runtime";function xr({content:r,className:o,placement:i,offset:a,clickable:t,children:n,onShow:c,onHide:e}){let l=b0(null),h=f0();return m0(()=>{if(l.current){let d=l.current.previousElementSibling;d.setAttribute("aria-describedby",h);let u=T1(d,l.current,{placement:i||"auto",modifiers:[Ti,_r,{name:"offset",options:{offset:a||[0,8]}}]});l.popper=u;let m=()=>{if(delete l.current.dataset.show,u.setOptions((w)=>({...w,modifiers:[...w.modifiers,{name:"eventListeners",enabled:!1}]})),e)e()},f=()=>{if(l.current.dataset.show=!0,u.setOptions((_)=>({..._,modifiers:[..._.modifiers,{name:"eventListeners",enabled:!0}]})),u.update(),c)c();let w=()=>{m(),document.removeEventListener("pointerdown",w)};document.addEventListener("pointerdown",w)},k=(w)=>w.stopPropagation();if(t)d.addEventListener("pointerup",f),l.current.addEventListener("pointerdown",k);else d.addEventListener("mouseenter",f),d.addEventListener("mouseleave",m);return()=>{if(t)d.removeEventListener("pointerup",f),l.current.removeEventListener("pointerdown",k);else d.removeEventListener("mouseenter",f),d.removeEventListener("mouseleave",m)}}},[]),Di(_0,{children:[n,Di("div",{ref:l,id:h,className:w0(Co.tooltip,o),role:"tooltip",children:[r,x0("div",{className:Co.arrow,"data-popper-arrow":!0})]})]})}b(":root{--main-button-size:2.75rem;--more-button-size:2.25rem;--arrow-size:.5rem;--arrow-inset:-.25rem;--arrow-rounding:.125rem}.d9vCIG_action-button-wrapper{flex-direction:column-reverse;transition:all .2s;display:flex;position:relative}.d9vCIG_button{cursor:pointer;background:var(--theme-primary);border:none;outline:none;flex-direction:column;justify-content:center;align-items:center;transition:background-color .2s;display:flex;position:relative}.d9vCIG_disabled{cursor:auto;background:var(--ui-black-transparent)}.d9vCIG_button:not(.d9vCIG_disabled):hover{background:var(--blocks-primary)}.d9vCIG_button:active{padding:inherit}.d9vCIG_main-button{width:var(--main-button-size);height:var(--main-button-size);box-shadow:0 0 0 4px var(--theme-transparent);z-index:var(--z-index-add-button);border-radius:100%;transition:transform,box-shadow .5s}.d9vCIG_main-button.d9vCIG_disabled{box-shadow:none}.d9vCIG_main-button:not(.d9vCIG_disabled):hover{box-shadow:0 0 0 6px var(--theme-transparent);transform:scale(1.1)}.d9vCIG_main-icon{width:calc(var(--main-button-size) - 1rem);height:calc(var(--main-button-size) - 1rem)}.d9vCIG_more-buttons-outer{background:var(--theme-tertiary);border-top-left-radius:var(--more-button-size);border-top-right-radius:var(--more-button-size);width:var(--more-button-size);margin-left:calc((var(--main-button-size) - var(--more-button-size)) / 2);margin-right:calc((var(--main-button-size) - var(--more-button-size)) / 2);bottom:calc(var(--main-button-size));margin-bottom:calc(var(--main-button-size) / -2);padding-bottom:calc(var(--main-button-size) / 2);position:absolute;overflow:hidden}.d9vCIG_more-buttons{z-index:10;flex-direction:column;max-height:0;transition:max-height 1s}.d9vCIG_expanded .d9vCIG_more-buttons-outer{overflow:visible}.d9vCIG_expanded .d9vCIG_more-buttons{max-height:1000px}.d9vCIG_force-hidden .d9vCIG_more-buttons-outer{display:none}.d9vCIG_force-hidden .d9vCIG_more-Buttons{transition:all!important}.d9vCIG_more-buttons:first-child{border-top-right-radius:var(--more-button-size);border-top-left-radius:var(--more-button-size);overflow:hidden}.d9vCIG_more-button{width:var(--more-button-size);height:var(--more-button-size);background:var(--theme-tertiary)}.d9vCIG_more-icon{width:calc(var(--more-button-size) - 1rem);height:calc(var(--more-button-size) - 1rem)}.d9vCIG_tooltip{background:var(--blocks-primary)}");var U={expanded:"d9vCIG_expanded",mainIcon:"d9vCIG_main-icon",button:"d9vCIG_button",forceHidden:"d9vCIG_force-hidden",tooltip:"d9vCIG_tooltip",actionButtonWrapper:"d9vCIG_action-button-wrapper",disabled:"d9vCIG_disabled",moreButtons:"d9vCIG_more-buttons",moreButtonsOuter:"d9vCIG_more-buttons-outer","more-Buttons":"d9vCIG_more-Buttons",moreButton:"d9vCIG_more-button",moreIcon:"d9vCIG_more-icon",mainButton:"d9vCIG_main-button"};import{useCallback as Cr}from"preact/hooks";import{jsx as v1,jsxs as g0}from"preact/jsx-runtime";function s0({className:r,disabled:o,icon:i,tooltip:a,tooltipPlacement:t,moreButtons:n,onClick:c}){let e=Ui(!1),l=Ui(!1),h=Cr((d)=>async(u)=>{l.value=!0,e.value=!1,d.onClick(u),await C0(1),l.value=!1},[]);return g0("div",{className:so(U.actionButtonWrapper,r,{[U.expanded]:e.value,[U.forceHidden]:l.value}),disabled:o,onPointerEnter:Cr(()=>e.value=!0,[]),onPointerLeave:Cr(()=>e.value=!1,[]),onClick:c,children:[v1("div",{className:U.moreButtonsOuter,children:v1("div",{className:U.moreButtons,onClick:Cr((d)=>d.stopPropagation(),[]),children:n&&n.map((d,u)=>v1(xr,{className:U.tooltip,content:d.tooltip,placement:t||"left",offset:[0,12],children:v1("button",{className:so(U.button,U.moreButton),disabled:o,onClick:h(d),children:v1("img",{className:U.moreIcon,draggable:!1,src:d.icon})})},u))})}),v1(xr,{className:U.tooltip,content:a,placement:t||"left",offset:[0,14],children:v1("button",{disabled:o,className:so(U.button,U.mainButton),children:v1("img",{className:U.mainIcon,draggable:!1,src:i})})})]})}import{useRef as G0,useEffect as L0,useCallback as F0}from"preact/hooks";import{useSignal as I0}from"@preact/signals";import{Text as go}from"@blockcode/core";b(".axKffq_box-wrapper{pointer-events:auto;z-index:calc(var(--z-index-card) - 10);min-width:468px;bottom:var(--space);position:absolute;right:10px}.axKffq_box{border:1px solid var(--ui-tertiary);border-radius:calc(var(--space) * 1.8);cursor:move;box-shadow:0px 5px 25px 5px var(--ui-black-transparent);z-index:20;flex-direction:column;align-items:center;display:flex;overflow:hidden}.axKffq_box-header{background:var(--blocks-primary);width:100%;font-size:var(--small-font-size);flex-direction:row;justify-content:space-between;align-items:center;font-weight:700;display:flex}.axKffq_header-content{padding:0 var(--space);flex:1}.axKffq_header-button-group{flex-direction:row;display:flex}.axKffq_header-button{cursor:pointer;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding:.75rem;display:flex}.axKffq_header-button:hover{background:var(--ui-black-transparent)}.axKffq_button-icon{border:0;height:1.25rem}.axKffq_box-content{background:var(--ui-white);border-top:1px solid var(--blocks-tertiary);width:100%;min-height:280px;color:var(--text-primary);display:flex;position:relative}");var S={boxWrapper:"axKffq_box-wrapper",headerContent:"axKffq_header-content",boxContent:"axKffq_box-content",headerButton:"axKffq_header-button",buttonIcon:"axKffq_button-icon",boxHeader:"axKffq_box-header",box:"axKffq_box",headerButtonGroup:"axKffq_header-button-group"};var Si="./assets/icon-shrink-8vdqegra.svg";var Ki="./assets/icon-expand-67bgdn61.svg";var Wi="./assets/icon-close-dy7x7fdb.svg";import{jsx as H,jsxs as _1,Fragment as Mi}from"preact/jsx-runtime";function z0({header:r,buttons:o,children:i,onClose:a}){let t=G0(),n=I0(!0);return L0(()=>{if(t.current){let c=t.current.parentElement.parentElement,e,l,h=(u)=>{let m=e-u.clientX,f=l-u.clientY;e=u.clientX,l=u.clientY,c.style.top=`${c.offsetTop-f}px`,c.style.left=`${c.offsetLeft-m}px`,c.style.right="unset",c.style.bottom="unset"},d=()=>{document.removeEventListener("pointerup",d),document.removeEventListener("pointermove",h)};t.current.addEventListener("pointerdown",(u)=>{e=u.clientX,l=u.clientY,h(u),document.addEventListener("pointerup",d),document.addEventListener("pointermove",h)})}},[]),H("div",{className:S.boxWrapper,children:_1("div",{className:S.box,children:[_1("div",{ref:t,className:S.boxHeader,children:[H("div",{className:S.headerContent,children:r}),_1("div",{className:S.headerButtonGroup,children:[o&&o.map((c)=>_1("div",{className:S.headerButton,onClick:c.onClick,children:[H("img",{className:S.buttonIcon,src:c.icon}),c.label]})),H("div",{className:S.headerButton,onClick:F0(()=>n.value=!n.value,[]),children:n.value?_1(Mi,{children:[H("img",{className:S.buttonIcon,src:Si}),H(go,{id:"core.box.shrink",defaultMessage:"Shrink"})]}):_1(Mi,{children:[H("img",{className:S.buttonIcon,src:Ki}),H(go,{id:"core.box.expand",defaultMessage:"Expand"})]})}),_1("div",{className:S.headerButton,onClick:a,children:[H("img",{className:S.buttonIcon,src:Wi}),H(go,{id:"core.box.close",defaultMessage:"Close"})]})]})]}),n.value&&H("div",{className:S.boxContent,children:i})]})})}import{useCallback as sr,useId as R4}from"preact/hooks";import{useSignal as Z0}from"@preact/signals";import{classNames as q0}from"@blockcode/utils";b("._9lEAzG_input-form{height:2rem;font-size:var(--standard-font-size);color:var(--text-primary);border-style:solid;border-width:1px;border-color:var(--ui-black-transparent);cursor:text;box-shadow:none;text-overflow:ellipsis;white-space:nowrap;border-radius:2rem;outline:none;min-width:0;padding:0 .75rem;font-weight:700;transition:all .25s ease-out;overflow:hidden}._9lEAzG_input-form:hover{border-color:var(--theme-primary)}._9lEAzG_input-form:focus{border-color:var(--theme-primary);box-shadow:0 0 0 .25rem var(--theme-transparent)}._9lEAzG_input-small{text-overflow:clip;text-align:center;width:3rem;padding:0 .5rem}");var ko={inputForm:"_9lEAzG_input-form",inputSmall:"_9lEAzG_input-small"};import{jsx as N0}from"preact/jsx-runtime";function yo(r){let{small:o,...i}=r;return N0("input",{...i,className:q0(ko.inputForm,r.className,{[ko.inputSmall]:o})})}import{jsx as D0}from"preact/jsx-runtime";function T0({value:r,type:o,forceFocus:i,autoClear:a,enterSubmit:t,onSubmit:n,...c}){let e=Z0(null),l=sr((m)=>{if(m.target.setSelectionRange(0,0),m.target.select(),a)e.value=null,m.target.value=""},[a]),h=sr((m)=>{let f=o==="number",k=f?!isNaN(e.value):!0;if(e.value!==null&&k&&n)n(f?Number(e.value):e.value,m);if(e.value=null,i)m.target.focus();if(a)m.target.value=""},[o,i,n]),d=sr((m)=>{if(m.key==="Enter"){if(m.target.blur(),t)h(m)}},[t]),u=sr((m)=>e.value=m.target.value,[]);return D0(yo,{...c,value:e.value===null?r:e.value,onFocus:l,onBlur:t?null:h,onChange:u,onInput:u,onKeyPress:d})}import{classNames as Ai}from"@blockcode/utils";b(".g7iT9G_outlined{cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--form-radius);background:var(--ui-white);padding:var(--space) calc(var(--space) * 1.5);user-select:none;color:var(--text-primary);font-weight:700;font-size:var(--standard-font-size)}.g7iT9G_outlined:focus-visible{outline:0}.g7iT9G_content{white-space:nowrap;flex-direction:row;justify-content:center;align-items:center;width:100%;display:flex}.g7iT9G_vertical-content{flex-direction:column}.g7iT9G_disabled{cursor:auto;opacity:.5}");var Q1={content:"g7iT9G_content",verticalContent:"g7iT9G_vertical-content",outlined:"g7iT9G_outlined",disabled:"g7iT9G_disabled"};import{jsx as Ji}from"preact/jsx-runtime";function p1({className:r,vertical:o,disabled:i,title:a,onClick:t,onMouseDown:n,onMouseUp:c,children:e}){return Ji("button",{className:Ai(Q1.outlined,r,{[Q1.disabled]:i}),title:a,disabled:i,onClick:t,onPointerUp:c,onPointerDown:n,children:Ji("div",{className:Ai(Q1.content,{[Q1.verticalContent]:o}),children:e})})}import{useEffect as Ei,useCallback as Pi,useRef as X0,useId as H0}from"preact/hooks";import{classNames as Q0}from"@blockcode/utils";import{cloneElement as J0}from"preact";import{useId as R0,useCallback as Hi}from"preact/hooks";import{classNames as gr,isDesktop as Qi,flatChildren as V0}from"@blockcode/utils";import{useEffect as S0,useRef as K0,useId as W0}from"preact/hooks";import{useSignal as M0}from"@preact/signals";import{classNames as Bo}from"@blockcode/utils";b(".CLktXa_dropdown{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space) / 2);padding:var(--space);color:var(--blocks-monitor-primary);cursor:pointer;justify-content:space-between;align-items:center;font-size:.8rem;display:flex;overflow:visible}.CLktXa_dropdown-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;pointer-events:none;transition:opacity .2s ease-out}.CLktXa_dropdown-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu);pointer-events:auto}.CLktXa_dropdown-menu{min-width:130px;max-width:max-content;max-height:30vh;overflow:hidden auto;box-shadow:0 0 .5rem #00000040;display:block!important}.CLktXa_open{background:var(--ui-black-transparent)}.CLktXa_dropdown-icon{width:.5rem;height:.5rem}.CLktXa_dropdown-icon:last-child:not(:first-child){margin-left:.5rem}.CLktXa_caret-up{padding-top:.2rem;padding-bottom:0;transform:rotate(180deg)}");var x1={dropdown:"CLktXa_dropdown",dropdownMenuWrapper:"CLktXa_dropdown-menu-wrapper",dropdownMenu:"CLktXa_dropdown-menu",open:"CLktXa_open",caretUp:"CLktXa_caret-up",dropdownIcon:"CLktXa_dropdown-icon"};var Ri="./assets/icon-dropdown-caret-y6kkj0v9.svg";import{jsx as Y1,jsxs as Vi,Fragment as A0}from"preact/jsx-runtime";var Xi=(r)=>r.map((o,i)=>Array.isArray(o)?Y1(P1,{children:Xi(o)},i):Y1(E1,{disabled:o.disabled,className:o.className,style:o.style,hotkey:o.hotkey,onClick:o.onClick,children:o.label},i));function Go({className:r,iconClassName:o,menuClassName:i,items:a,placement:t,hoverable:n,children:c}){let e=K0(null),l=W0(),h=M0(!1);return S0(()=>{if(e.current){let d=e.current.firstChild,u=e.current.previousElementSibling;u.setAttribute("aria-describedby",l);let m=T1(u,e.current,{placement:t||"bottom-start",modifiers:[_r,{name:"offset",options:{offset({placement:w}){let _=d?.getBoundingClientRect(),p=u?.getBoundingClientRect();if(_&&p)switch(w){case"top-end":return[-_.width,_.height];case"right-start":return[-p.height-16,-24];case"bottom-start":default:return[0,0]}return[0,0]}}}]}),f=(w)=>{h.value=!1,delete e.current.dataset.show,m.setOptions((_)=>({..._,modifiers:[..._.modifiers,{name:"eventListeners",enabled:!1}]})),document.removeEventListener("click",f),document.removeEventListener("pointerdown",f),setTimeout(()=>{if(!e.current.dataset.show)e.current.dataset.hidden=!0},200)},k=(w)=>{h.value=!0,e.current.dataset.show=!0,delete e.current.dataset.hidden,m.setOptions((_)=>({..._,modifiers:[..._.modifiers,{name:"eventListeners",enabled:!0}]})),m.update(),setTimeout(()=>{document.addEventListener("click",f),document.addEventListener("pointerdown",f)})};if(n)u.addEventListener("mouseenter",k),u.addEventListener("mouseleave",f),d.addEventListener("mouseenter",k),d.addEventListener("mouseleave",f);else u.addEventListener("pointerup",k);return()=>{if(n)u.removeEventListener("mouseenter",k),u.removeEventListener("mouseleave",f),d.removeEventListener("mouseenter",k),d.removeEventListener("mouseleave",f);else u.removeEventListener("pointerup",k)}}},[]),Vi(A0,{children:[Vi("div",{className:Bo(x1.dropdown,r,{[x1.open]:h.value}),children:[c,Y1("img",{className:Bo(x1.dropdownIcon,o,{[x1.caretUp]:h.value}),draggable:!1,src:Ri})]}),Y1("div",{ref:e,id:l,className:x1.dropdownMenuWrapper,role:"context",children:a&&Y1(O1,{name:l,className:Bo(i,x1.dropdownMenu),children:Xi(a)})})]})}b(".SBBo_G_menu{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space) / 2);background:var(--ui-white);color:var(--text-primary);box-shadow:0 var(--space) var(--space) 0 var(--ui-black-transparent);margin:0;padding:0;position:absolute}.SBBo_G_menu-item{white-space:nowrap;padding:0 calc(var(--space) + 2px);line-height:34px;font-size:var(--standard-font-size);justify-content:space-between;margin:0;display:flex}.SBBo_G_menu-item.SBBo_G_disabled:hover{background:0 0}.SBBo_G_menu-item.SBBo_G_disabled .SBBo_G_content{filter:opacity(.5)}.SBBo_G_content{padding-right:calc(var(--space) * 2);flex:1;display:flex}.SBBo_G_hotkey{font-weight:400}.SBBo_G_menu-item:hover{background:var(--theme-primary)}.SBBo_G_menu-item:hover:last-child{border-radius:0 0 calc(var(--space) / 2) calc(var(--space) / 2)}.SBBo_G_menu-item:hover:not(.SBBo_G_disabled){color:var(--ui-white)}.SBBo_G_menu-item.SBBo_G_hoverable{cursor:pointer}.SBBo_G_menu-section:not(:first-child){border-top:1px solid var(--ui-black-transparent)}.SBBo_G_menu-section-title{font-weight:400;font-size:var(--small-font-size);padding:var(--space) calc(var(--space) + 2px) 0;display:flex}.SBBo_G_dropdown-item{white-space:nowrap;padding:0 calc(var(--space) + 2px);line-height:34px;font-size:var(--standard-font-size);border:0;border-radius:0;flex:1;justify-content:space-between;display:flex;background:0 0!important}.SBBo_G_dropdown-icon{filter:brightness(100);transform:rotate(-90deg);padding:0!important}");var K={menu:"SBBo_G_menu",hotkey:"SBBo_G_hotkey",hoverable:"SBBo_G_hoverable",menuItem:"SBBo_G_menu-item",menuSection:"SBBo_G_menu-section",content:"SBBo_G_content",disabled:"SBBo_G_disabled",menuSectionTitle:"SBBo_G_menu-section-title",dropdownIcon:"SBBo_G_dropdown-icon",dropdownItem:"SBBo_G_dropdown-item"};import{jsx as m1,jsxs as Oi,Fragment as Yi}from"preact/jsx-runtime";function O1({id:r,className:o,children:i,name:a}){return m1("ul",{className:gr(K.menu,o),id:`${r||R0()}-menu-${a}`,children:i})}function E1({className:r,menuClassName:o,style:i,disabled:a,label:t,items:n,href:c,hotkey:e,onClick:l,children:h}){let d=Hi((u={})=>{if(a||n)return;if(l){l(u);return}if(c)window.open(c,"_blank")},[a,c,l]);if(Qi&&e)Kr(e,d);return m1("li",{className:gr(K.menuItem,{[K.hoverable]:!a,[K.disabled]:a},r),style:i,onClick:d,onPointerDown:Hi((u)=>u.stopPropagation(),[]),children:n?m1(Go,{hoverable:!0,placement:"right-start",items:n,className:K.dropdownItem,iconClassName:K.dropdownIcon,menuClassName:o,itemClassName:r,children:m1("div",{className:K.content,children:t||h})}):Oi(Yi,{children:[m1("div",{className:K.content,children:t||h}),Qi&&e&&m1("div",{className:K.hotkey,children:Wr(e)})]})})}function P1({disabled:r,title:o,titleClassName:i,children:a}){return Oi(Yi,{children:[o&&m1("li",{className:gr(K.menuSection,K.menuSectionTitle,i),children:m1("div",{className:K.content,children:o})}),V0(a).map((t,n)=>t&&J0(t,{className:gr(t.props.className,{[K.menuSection]:!o&&n===0}),disabled:t.props.disabled||r,key:n}))]})}b("._27p4uG_context-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;pointer-events:none;transition:opacity .2s ease-out}._27p4uG_context-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu);pointer-events:auto}._27p4uG_context-menu{min-width:130px;box-shadow:0 0 .5rem #00000040}");var Lo={contextMenuWrapper:"_27p4uG_context-menu-wrapper",contextMenu:"_27p4uG_context-menu"};import{jsx as kr,jsxs as O0,Fragment as Y0}from"preact/jsx-runtime";var ji=(r)=>r.map((o,i)=>Array.isArray(o)?kr(P1,{children:ji(o)},i):kr(E1,{disabled:o.disabled,className:o.className,style:o.style,onClick:o.onClick,children:o.label},i)),ra=(r=0,o=0)=>()=>({width:0,height:0,top:o,right:r,bottom:o,left:r}),$i={getBoundingClientRect:ra()};function $1({menuItems:r,className:o,position:i,children:a}){let t=X0(null),n=H0(),c=Pi(()=>{if(t.popper)delete t.current.dataset.show,t.popper.setOptions((l)=>({...l,modifiers:[...l.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",c),document.removeEventListener("pointerdown",c)},[]),e=Pi((l)=>{if(l.preventDefault?.(),t.popper)$i.getBoundingClientRect=ra(l.clientX,l.clientY),t.current.dataset.show=!0,t.popper.setOptions((h)=>({...h,modifiers:[...h.modifiers,{name:"eventListeners",enabled:!0}]})),t.popper.update(),setTimeout(()=>{document.addEventListener("click",c),document.addEventListener("pointerdown",c)})},[]);return Ei(()=>{if(i)e({clientX:i.x,clientY:i.y});else c()},[i]),Ei(()=>{if(t.current){if(t.popper=T1($i,t.current,{placement:"bottom-end"}),a)t.current.previousElementSibling.addEventListener("contextmenu",e)}return()=>{t.popper=null}},[]),O0(Y0,{children:[a,kr("div",{ref:t,id:n,className:Lo.contextMenuWrapper,role:"context",children:r&&kr(O1,{name:n,className:Q0(Lo.contextMenu,o),children:ji(r)})})]})}import{useId as r2}from"preact/hooks";import{classNames as ta}from"@blockcode/utils";import{classNames as $0}from"@blockcode/utils";import{classNames as P0}from"@blockcode/utils";b(".F7KjoW_delete-button{width:1.75rem;height:1.75rem;box-shadow:0px 0px 0px 2px var(--theme-transparent);background:var(--theme-primary);color:var(--ui-white);cursor:pointer;user-select:none;border:0;border-radius:50%;justify-content:center;align-items:center;margin:0;padding:0;transition:all .15s ease-out;display:none;position:absolute;overflow:hidden}.F7KjoW_delete-icon{user-select:none;transform-origin:50%;margin:.25rem;position:relative}");var Fo={deleteIcon:"F7KjoW_delete-icon",deleteButton:"F7KjoW_delete-button"};var oa="./assets/icon-delete-seqp9ssx.svg";import{jsx as ia}from"preact/jsx-runtime";function aa({className:r,onClick:o}){return ia("button",{className:P0(Fo.deleteButton,r),onClick:o,children:ia("img",{className:Fo.deleteIcon,src:oa})})}b("._230aGG_icon-selector-item{color:var(--text-primary);border:2px solid var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;user-select:none;flex-direction:column;justify-content:flex-start;font-size:.8rem;display:flex;position:relative}._230aGG_icon-selector-item:hover{border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_selector{display:none}._230aGG_selector:checked+._230aGG_icon-selector-item{box-shadow:0px 0px 0px 4px var(--theme-transparent);border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_icon-outer{flex:1;justify-content:center;align-items:center;display:flex;position:relative}._230aGG_icon-inner{user-select:none;pointer-events:none;max-width:32px;max-height:32px}._230aGG_icon-order{font-weight:700;font-size:var(--small-font-size);position:absolute;top:3px;left:3px}._230aGG_icon-info{font-size:var(--small-font-size);color:var(--text-primary);user-select:none;border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;padding:.25rem}._230aGG_icon-title,._230aGG_icon-details{text-overflow:ellipsis;white-space:nowrap;min-width:0;overflow:hidden}._230aGG_icon-details{margin-top:.125rem;font-size:.5rem}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_icon-info{background:var(--theme-primary);color:var(--ui-white)}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_delete-button{display:flex;top:-.625rem;right:-.625rem}");var Y={iconTitle:"_230aGG_icon-title",iconDetails:"_230aGG_icon-details",iconInner:"_230aGG_icon-inner",iconOuter:"_230aGG_icon-outer",deleteButton:"_230aGG_delete-button",iconOrder:"_230aGG_icon-order",iconInfo:"_230aGG_icon-info",iconSelectorItem:"_230aGG_icon-selector-item",selector:"_230aGG_selector"};import{useCallback as j0}from"preact/hooks";import{jsx as D1,jsxs as yr}from"preact/jsx-runtime";function Io({id:r,name:o,title:i,details:a,icon:t,order:n,checked:c,displayOrder:e,contextMenu:l,className:h,onSelect:d,onMouseDown:u,onMouseUp:m,onDelete:f}){let k=j0((w)=>{w.stopPropagation(),f(w)},[f]);return yr($1,{menuItems:l,children:[D1("input",{checked:c,className:Y.selector,id:`${r}-icon-${o}`,name:`${r}-icon`,type:"radio",value:o}),yr("label",{className:$0(Y.iconSelectorItem,h),for:`${r}-icon-${o}`,onClick:d,onPointerDown:u,onPointerUp:m,children:[yr("div",{className:Y.iconOuter,children:[D1("img",{className:Y.iconInner,src:t}),e&&D1("div",{className:Y.iconOrder,children:n+1})]}),yr("div",{className:Y.iconInfo,children:[D1("div",{className:Y.iconTitle,children:i}),a&&D1("div",{className:Y.iconDetails,children:a})]}),f&&D1(aa,{className:Y.deleteButton,onClick:k})]})]})}b(".ipnJ9q_icon-selector-wrapper{background:var(--ui-white-transparent);overflow:auto}.ipnJ9q_items-wrapper{padding:calc(var(--space) / 2);padding-bottom:var(--space);flex-flow:wrap;display:flex;overflow:hidden}.ipnJ9q_icon-item{box-sizing:border-box;width:calc((100% / var(--icon-per-row)) - var(--space));min-width:4rem;max-width:6rem;min-height:4rem;margin:calc(var(--space) / 2)}");var Br={iconSelectorWrapper:"ipnJ9q_icon-selector-wrapper",itemsWrapper:"ipnJ9q_items-wrapper",iconItem:"ipnJ9q_icon-item"};import{jsx as zo}from"preact/jsx-runtime";var Gr=(r,o,i)=>(a)=>{if(i)i(r,o)};function o2({className:r,id:o,displayOrder:i,items:a,selectedIndex:t,selectedId:n,onDelete:c,onSelect:e,onMouseDown:l,onMouseUp:h}){let d=r2();return zo("div",{className:ta(Br.iconSelectorWrapper,r),children:zo("div",{className:Br.itemsWrapper,children:a?.map((u,m)=>u.__hidden__?null:zo(Io,{checked:m===t||u.id===n,displayOrder:i,className:ta(Br.iconItem,u.className),contextMenu:u.contextMenu,details:u.details,icon:u.icon,id:o??d,name:m,order:u.order,title:u.name,onSelect:e&&Gr(m,u,e),onMouseDown:l&&Gr(m,u,l),onMouseUp:h&&Gr(m,u,h),onDelete:c&&Gr(m,u,c)},u.title))})})}import{useEffect as f2,useCallback as Uo}from"preact/hooks";import{batch as So,useSignal as Ko}from"@preact/signals";import{classNames as Fr}from"@blockcode/utils";import{classNames as j1}from"@blockcode/utils";b(".FvkZfa_modal-overlay{background:var(--modal-overlay);z-index:var(--z-index-modal);backdrop-filter:blur(6px);display:flex;position:fixed;inset:0}.FvkZfa_modal-overlay.FvkZfa_red{background:color(from var(--error-primary) srgb r g b / .9)}.FvkZfa_modal-content{border:4px solid var(--ui-white-transparent);border-radius:var(--space);color:var(--text-primary);user-select:none;outline:none;align-self:flex-start;margin:100px auto;padding:0;overflow:hidden}.FvkZfa_modal-content.FvkZfa_full-screen{user-select:none;background:var(--ui-secondary);border:none;border-radius:0;flex-direction:column;width:100%;height:100%;margin:0;display:flex;position:absolute;overflow-y:auto}.FvkZfa_modal-header{height:var(--library-header-height);box-sizing:border-box;background:var(--theme-primary);flex-flow:row;justify-content:flex-start;width:100%;font-size:1rem;display:flex}.FvkZfa_red .FvkZfa_modal-header{background:var(--error-primary)}.FvkZfa_electron{padding-left:58px}.FvkZfa_header-item{color:var(--ui-white);user-select:none;align-items:center;padding:1rem;text-decoration:none;display:flex}.FvkZfa_header-item-title{user-select:none;letter-spacing:.4px;cursor:default;flex-grow:1;flex-shrink:0;justify-content:center;margin:0 -20rem 0 0;font-size:1rem;font-weight:400}.FvkZfa_full-screen .FvkZfa_header-item-title{margin:0 0 0 -20rem}.FvkZfa_header-item-close{z-index:1;flex-basis:20rem;justify-content:flex-end}.FvkZfa_header-item-back{z-index:1;flex-basis:20rem;order:-1;justify-content:flex-start}.FvkZfa_close-button{background:var(--ui-black-transparent);box-shadow:0 0 0 2px var(--ui-black-transparent);border:0;border-radius:50%;width:1.75rem;height:1.75rem;padding:0;transition:all .15s ease-out}.FvkZfa_close-button:hover{box-shadow:0px 0px 0px 4px var(--ui-black-transparent);transform:scale(1.1)}.FvkZfa_close-button img{margin:0 auto}.FvkZfa_back-button{color:var(--ui-white);white-space:nowrap;background:0 0;border:0;padding:0;font-size:1rem;font-weight:400}.FvkZfa_back-button img{height:1.5rem;margin-right:.5rem}");var W={fullScreen:"FvkZfa_full-screen",modalHeader:"FvkZfa_modal-header",headerItem:"FvkZfa_header-item",headerItemBack:"FvkZfa_header-item-back",closeButton:"FvkZfa_close-button",backButton:"FvkZfa_back-button",electron:"FvkZfa_electron",headerItemTitle:"FvkZfa_header-item-title",red:"FvkZfa_red",headerItemClose:"FvkZfa_header-item-close",modalContent:"FvkZfa_modal-content",modalOverlay:"FvkZfa_modal-overlay"};var na="./assets/icon-back-gwek165q.svg";var ea="./assets/icon-close-bazpdng8.svg";import{jsx as C1,jsxs as qo}from"preact/jsx-runtime";function No({title:r,fullScreen:o,redStyle:i,onClose:a,className:t,headerClassName:n,children:c}){let{macosMenuBarStyled:e}=Er();return C1("div",{className:j1(W.modalOverlay,{[W.red]:i}),children:qo("div",{className:j1(W.modalContent,t,{[W.fullScreen]:o}),children:[qo("div",{className:j1(W.modalHeader,n,{[W.electron]:o&&e.value}),children:[C1("div",{className:j1(W.headerItem,W.headerItemTitle),children:r}),C1("div",{className:j1(W.headerItem,W.headerItemClose,{[W.headerItemBack]:o}),children:o?qo(p1,{className:W.backButton,onClick:a,children:[C1("img",{src:na}),C1(J,{id:"core.modal.back",defaultMessage:"Back"})]}):C1(p1,{className:W.closeButton,onClick:a,children:C1("img",{src:ea})})})]}),c]})})}import{classNames as da}from"@blockcode/utils";b(".sO8W8q_filter{background:var(--ui-white);user-select:none;height:var(--library-filter-bar-height);border-radius:10rem;flex-direction:row;flex-grow:1;align-items:center;display:flex;position:relative}.sO8W8q_filter-icon{width:1rem;height:1rem;margin:.75rem .75rem .75rem 1rem;position:absolute;top:0;left:0}.sO8W8q_filter:focus-within{box-shadow:0 0 0 .25rem var(--theme-transparent)}.sO8W8q_close-icon-wrapper{opacity:0;pointer-events:none;cursor:default;border-radius:50%;justify-content:center;align-items:center;width:1.25rem;height:1.25rem;margin:.625rem;transition:opacity 50ms linear;display:flex;position:absolute;top:0;right:0;overflow:hidden}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper{pointer-events:auto;cursor:pointer;opacity:1;transition:opacity 50ms linear}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper:hover{transform:scale(1.2)}.sO8W8q_close-icon{user-select:none;margin:.25rem;transition:transform 85ms cubic-bezier(.78,1,1,1);position:relative;transform:translate(.5rem)}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper .sO8W8q_close-icon{transform:translate(0)}.sO8W8q_filter-input{height:var(--library-filter-bar-height);appearance:none;color:var(--text-primary);font-size:var(--standard-font-size);letter-spacing:.15px;cursor:text;background-color:#0000;border:0;outline:none;flex-grow:1;padding:.625rem 2rem .625rem 3rem}.sO8W8q_filter-input::placeholder{opacity:.5;color:var(--text-primary);letter-spacing:.15px;padding:0 0 0 .25rem;font-size:.875rem}");var s1={filter:"sO8W8q_filter",filterIcon:"sO8W8q_filter-icon",closeIcon:"sO8W8q_close-icon",filterInput:"sO8W8q_filter-input",closeIconWrapper:"sO8W8q_close-icon-wrapper",isActive:"sO8W8q_is-active"};var ca="./assets/icon-filter-wecnwx09.svg";var la="./assets/icon-close-1jzsw9nf.svg";import{jsx as Lr,jsxs as e2}from"preact/jsx-runtime";function ua({className:r,onChange:o,onClear:i,placeholder:a,query:t,inputClassName:n}){return e2("div",{className:da(r,s1.filter,{[s1.isActive]:t.length>0}),children:[Lr("img",{className:s1.filterIcon,src:ca}),Lr("input",{type:"text",className:da(s1.filterInput,n),placeholder:Z(a),"data-value":t,value:t,onInput:o}),Lr("div",{className:s1.closeIconWrapper,onClick:i,children:Lr("img",{className:s1.closeIcon,src:la})})]})}import{classNames as U1}from"@blockcode/utils";b("._8P49xa_library-item{max-width:160px;height:160px;margin:var(--space);color:var(--text-primary);background:var(--ui-white);border-style:solid;border-width:2px;border-color:var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;flex-direction:column;flex-basis:160px;justify-content:flex-start;align-items:center;padding:1rem 1rem 0;font-size:.9rem;display:flex;position:relative}._8P49xa_library-item._8P49xa_large{flex-basis:220px;max-width:220px;height:220px}._8P49xa_library-item:hover{border-width:2px;border-color:var(--theme-primary)}._8P49xa_hidden{display:none}._8P49xa_disabled{opacity:.5;cursor:auto}._8P49xa_disabled:hover{border-color:var(--ui-black-transparent)}._8P49xa_library-item-image-container-wrapper{width:100%;height:100px;position:relative}._8P49xa_library-item-image-container{justify-content:center;align-items:center;width:100%;height:100px;display:flex;position:absolute;overflow:hidden}._8P49xa_large ._8P49xa_library-item-image-container-wrapper,._8P49xa_large ._8P49xa_library-item-image-container{height:160px}._8P49xa_library-item-inset-image-container{background-color:var(--blocks-primary);border:.25rem solid var(--ui-white);border-radius:.5rem;justify-content:center;align-self:flex-start;align-items:center;width:3.5rem;height:3.5rem;margin-top:-2.5rem;margin-left:1rem;display:flex;position:relative;overflow:hidden}._8P49xa_library-item-image{user-select:none;-webkit-user-drag:none;max-width:100%;max-height:100%}._8P49xa_library-item-inset-image{width:2.5rem}._8P49xa_library-item-name,._8P49xa_library-item-detial{text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%;min-width:0;margin:.25rem 0;overflow:hidden}._8P49xa_library-item-detial{font-size:var(--small-font-size);color:var(--text-primary);margin:-.2rem 0 0}._8P49xa_featured-item{flex-basis:300px;align-self:stretch;max-width:300px;height:auto;padding:0;overflow:hidden}._8P49xa_featured-image-container{position:relative}._8P49xa_featured-image{user-select:none;-webkit-user-drag:none;width:100%}._8P49xa_featured-title{margin:calc(var(--space) * 1.5) 0 calc(var(--space) * 2);font-weight:700}._8P49xa_featured-text{text-align:left;width:300px;padding:10px 10px 10px 1.25rem;font-weight:700}._8P49xa_featured-description{text-wrap:wrap;padding-top:.3125rem;padding-bottom:.25rem;font-weight:400;line-height:1.375rem;display:block}._8P49xa_featured-description a{color:var(--theme-primary)}._8P49xa_featured-metadata{width:100%;font-size:var(--standard-font-size);color:var(--text-primary);opacity:.75;text-align:left;flex-direction:row;align-items:flex-start;padding:0 1.25rem 1rem;display:flex}._8P49xa_featured-requirement,._8P49xa_featured-collaboration{flex-direction:column;width:100%;display:flex}._8P49xa_featured-metadata-detail{height:100%;padding-top:.4rem;font-weight:700}._8P49xa_featured-metadata-detail img{margin-right:.25rem}._8P49xa_corner-text{color:var(--ui-white);transform:translate(calc(2 * var(--space)), calc(2 * var(--space)));border-radius:1rem;padding:.5rem 1rem;font-size:.875rem;font-weight:700;position:absolute;box-shadow:0 0 .5rem #00000040}._8P49xa_corner-text._8P49xa_coming-soon-text{background:var(--blocks-primary)}._8P49xa_corner-text._8P49xa_preview-text{background:var(--text-primary)}");var x={disabled:"_8P49xa_disabled",libraryItemName:"_8P49xa_library-item-name",large:"_8P49xa_large",libraryItem:"_8P49xa_library-item",featuredRequirement:"_8P49xa_featured-requirement",libraryItemInsetImage:"_8P49xa_library-item-inset-image",cornerText:"_8P49xa_corner-text",previewText:"_8P49xa_preview-text",featuredCollaboration:"_8P49xa_featured-collaboration",featuredMetadataDetail:"_8P49xa_featured-metadata-detail",libraryItemImage:"_8P49xa_library-item-image",featuredText:"_8P49xa_featured-text",featuredTitle:"_8P49xa_featured-title",featuredItem:"_8P49xa_featured-item",libraryItemImageContainerWrapper:"_8P49xa_library-item-image-container-wrapper",libraryItemImageContainer:"_8P49xa_library-item-image-container",featuredImage:"_8P49xa_featured-image",featuredImageContainer:"_8P49xa_featured-image-container",featuredDescription:"_8P49xa_featured-description",featuredMetadata:"_8P49xa_featured-metadata",libraryItemInsetImageContainer:"_8P49xa_library-item-inset-image-container",libraryItemDetial:"_8P49xa_library-item-detial",comingSoonText:"_8P49xa_coming-soon-text",hidden:"_8P49xa_hidden"};var ha="./assets/icon-clang-r94n2hbq.svg";var va="./assets/icon-blocks-czd4m8e2.svg";var pa="./assets/icon-micropython-qstw6yk4.svg";var ma="./assets/icon-bluetooth-0v0grsw2.svg";var fa="./assets/icon-internet-ce656mar.svg";import{jsx as C,jsxs as e1}from"preact/jsx-runtime";var v2=(r)=>(o)=>{o.preventDefault(),o.stopPropagation(),window.open(r,"_blank")};function Zo(r){if(r.custom)return C("div",{className:U1(x.libraryItem,r.className,{[x.disabled]:r.disabled,[x.large]:r.large&&!r.featured,[x.featuredItem]:r.featured&&!r.large}),onClick:!r.disabled&&r.onSelect,children:r.custom});if(!r.featured)return e1("div",{className:U1(x.libraryItem,r.className,{[x.large]:r.large}),onClick:!r.disabled&&r.onSelect,children:[C("div",{className:x.libraryItemImageContainerWrapper,children:C("div",{className:x.libraryItemImageContainer,children:C("img",{className:x.libraryItemImage,onPointerEnter:r.onMouseEnter,onPointerLeave:r.onMouseLeave,src:r.image})})}),r.name&&C("span",{className:x.libraryItemName,children:r.name}),(r.copyright||r.author)&&C("span",{className:x.libraryItemDetial,children:r.copyright?`© ${r.copyright}`:r.author})]});return e1("div",{className:U1(x.libraryItem,r.className,{[x.disabled]:r.disabled,[x.featuredItem]:r.featured}),onClick:!r.disabled&&r.onSelect,children:[e1("div",{className:x.featuredImageContainer,children:[r.disabled?C("div",{className:U1(x.cornerText,x.comingSoonText),children:C(J,{id:"core.library.comingSoon",defaultMessage:"Coming Soon"})}):r.beta&&C("div",{className:U1(x.cornerText,x.previewText),children:C(J,{id:"core.library.beta",defaultMessage:"Beta"})}),C("img",{className:x.featuredImage,src:r.image})]}),r.icon&&C("div",{className:x.libraryItemInsetImageContainer,children:C("img",{className:x.libraryItemInsetImage,src:r.icon})}),r.title?C("div",{className:U1(x.libraryItemName,x.featuredTitle),children:r.title}):e1("div",{className:x.featuredText,children:[C("span",{className:x.libraryItemName,children:r.name}),C("br",{}),e1("span",{className:x.featuredDescription,children:[r.description,C("br",{}),r.uri?C("a",{onClick:v2(r.uri),children:C(J,{id:"core.library.readmore",defaultMessage:"Read more..."})}):""]})]}),(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired||r.collaborator)&&e1("div",{className:x.featuredMetadata,children:[C("div",{className:x.featuredRequirement,children:(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired)&&e1("div",{children:[C("div",{children:r.blocksRequired||r.micropythonRequired?C(J,{id:"core.library.programming",defaultMessage:"Programming"}):C(J,{id:"core.library.requires",defaultMessage:"Requires"})}),e1("div",{className:x.featuredMetadataDetail,children:[r.bluetoothRequired&&C("img",{src:ma}),r.internetRequired&&C("img",{src:fa}),r.blocksRequired&&C("img",{src:va}),r.micropythonRequired&&C("img",{src:pa}),r.clangRequired&&C("img",{src:ha})]})]})}),C("div",{className:x.featuredCollaboration,children:r.collaborator&&e1("div",{children:[C("div",{children:C(J,{id:"core.library.collaboration",defaultMessage:"Collaboration with"})}),C("div",{className:x.featuredMetadataDetail,children:r.collaborator})]})})]})]})}import{classNames as p2}from"@blockcode/utils";b(".BETjoW_tag-button{background:var(--theme-primary);color:var(--ui-white);height:var(--library-filter-bar-height);border:0;border-radius:1.375rem;padding:.625rem 1rem}.BETjoW_active{background:var(--blocks-variables-primary)}");var To={tagButton:"BETjoW_tag-button",active:"BETjoW_active"};import{jsx as m2}from"preact/jsx-runtime";function Do({active:r,className:o,onClick:i,children:a}){return m2(p1,{className:p2(o,To.tagButton,{[To.active]:r}),onClick:i,children:a})}b('.RgwUta_library-scroll-grid{background:var(--ui-secondary);height:auto;height:calc(100% - var(--library-header-height));flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;padding:.5rem;display:flex;overflow-y:auto}.RgwUta_library-scroll-grid.RgwUta_withFilterBar{height:calc(100% - var(--library-header-height) - var(--library-filter-bar-height) - 2rem)}.RgwUta_filter-bar{height:calc(var(--library-filter-bar-height) + 2rem);background-color:var(--theme-transparent);flex-direction:row;justify-content:flex-start;align-items:center;padding:0 1rem;display:flex}.RgwUta_filter-bar-item{margin-right:.75rem;font-size:.875rem}.RgwUta_filter{flex-grow:0}.RgwUta_filter-input{width:11.5rem;transition:all .2s}.RgwUta_filter-input:focus,.RgwUta_filter-input:not([data-value=""]){width:18.75rem}.RgwUta_divider{height:var(--library-filter-bar-height);border-right:1px dashed var(--ui-black-transparent);margin-right:.75rem;transform:scaleY(1.39)}.RgwUta_tag-wrapper{height:var(--library-filter-bar-height);flex-flow:wrap;display:flex;overflow:hidden}.RgwUta_spinner-wrapper{justify-content:center;align-items:center;width:100%;height:100%;display:flex}');var T={libraryScrollGrid:"RgwUta_library-scroll-grid",filterBar:"RgwUta_filter-bar",filter:"RgwUta_filter",filterBarItem:"RgwUta_filter-bar-item",withFilterBar:"RgwUta_withFilterBar",filterInput:"RgwUta_filter-input",tagWrapper:"RgwUta_tag-wrapper",spinnerWrapper:"RgwUta_spinner-wrapper",divider:"RgwUta_divider"};import{jsx as O,jsxs as Wo}from"preact/jsx-runtime";function b2({loading:r,items:o,title:i,filterable:a,filterPlaceholder:t,emptyMessage:n,loadingMessage:c,tags:e,large:l,featured:h,onClose:d}){let u=Ko("all"),m=Ko(""),f=Ko([]);f2(()=>{if(!o)return;f.value=o.filter((p)=>{if(p.hidden)return!1;if(p.eeggTag)return p.eeggTag===u.value;let s=m.value.toLowerCase(),I=Z(p.name||"").toLowerCase();if(p.eegg)return p.eegg===s||I===s;if(u.value!=="all")return p.tags?p.tags.includes(u.value):!1;if(s.length===0)return!0;if(p.id?.toLowerCase().includes(s))return!0;if(I.includes(s))return!0;if(p.author){if(Z(p.author).toLowerCase().includes(s))return!0}if(p.copyright){if(Z(p.copyright).toLowerCase().includes(s))return!0}if(p.collaborator){if(Z(p.collaborator).toLowerCase().includes(s))return!0}return!1})},[o,u.value,m.value]);let k=Uo((p)=>{So(()=>{u.value="all",m.value=p.target.value})},[]),w=Uo(()=>{So(()=>{u.value="all",m.value=""})},[]),_=Uo((p)=>()=>{So(()=>{u.value=p,m.value=""})},[]);return Wo(No,{fullScreen:!0,title:i,onClose:d,children:[(a||e)&&Wo("div",{className:T.filterBar,children:[a&&O(ua,{className:Fr(T.filterBarItem,T.filter),inputClassName:T.filterInput,query:m.value,placeholder:t,onChange:k,onClear:w}),a&&e&&O("div",{className:T.divider}),e&&Wo("div",{className:T.tagWrapper,children:[O(Do,{active:u.value==="all",className:Fr(T.filterBarItem,T.tagButton),onClick:_("all"),children:O(J,{id:"core.library.all",defaultMessage:"All"})}),e.map((p,s)=>O(Do,{active:u.value===p.tag.toLowerCase(),className:Fr(T.filterBarItem,T.tagButton),onClick:_(p.tag.toLowerCase()),children:p.label},s))]})]}),O("div",{className:Fr(T.libraryScrollGrid,{[T.withFilterBar]:a||e}),children:f.value?.length?f.value.map((p,s)=>O($1,{menuItems:p.contextMenu,children:O(Zo,{id:p.id??s,large:l,featured:h,custom:p.custom,className:p.className,disabled:p.disabled,beta:p.beta||p.preview,icon:p.icon,image:p.image,name:p.name,title:p.title,description:p.description,uri:p.uri,author:p.author,copyright:p.copyright,bluetoothRequired:p.bluetoothRequired,internetRequired:p.internetRequired,collaborator:p.collaborator,onMouseEnter:p.onMouseEnter,onMouseLeave:p.onMouseLeave,onSelect:p.onSelect})},p.id??s)):r?O("div",{className:T.spinnerWrapper,children:c??""}):O("div",{className:T.spinnerWrapper,children:n??""})})]})}import{classNames as ba}from"@blockcode/utils";b("._0rCRoa_input-group{flex-direction:row;align-items:center;display:inline-flex}._0rCRoa_input-group-column{flex-direction:column;align-items:flex-start;display:inline-flex}._0rCRoa_input-group-column span{margin-bottom:.25rem}._0rCRoa_input-label,._0rCRoa_input-label-secondary{font-size:var(--standard-font-size);user-select:none;cursor:default;white-space:nowrap;margin-right:.5rem}._0rCRoa_input-label{font-weight:700}");var rr={inputLabel:"_0rCRoa_input-label",inputLabelSecondary:"_0rCRoa_input-label-secondary",inputGroup:"_0rCRoa_input-group",inputGroupColumn:"_0rCRoa_input-group-column"};import{jsxs as wa}from"preact/jsx-runtime";function w2(r){return wa("label",{className:ba({[rr.inputGroupColumn]:r.above,[rr.inputGroup]:!r.above},r.className),children:[wa("span",{className:ba({[rr.inputLabelSecondary]:r.secondary,[rr.inputLabel]:!r.secondary}),children:[" ",r.text]}),r.children]})}import{classNames as _2}from"@blockcode/utils";b('._9Bnnoq_spinner{border-style:solid;border-width:.1875rem;border-color:var(--ui-white-transparent);border-radius:50%;width:1.25rem;height:1.25rem;display:inline-block;position:relative;box-sizing:content-box!important}._9Bnnoq_spinner:before,._9Bnnoq_spinner:after{content:"";border-radius:50%;width:1.25rem;height:1.25rem;display:block}._9Bnnoq_spinner:after{border:.1875rem solid #0000;border-top-color:var(--ui-white);animation:1.5s cubic-bezier(.4,.1,.4,1) infinite _9Bnnoq_spin;position:absolute;top:-.1875rem;left:-.1875rem}._9Bnnoq_small,._9Bnnoq_small:before,._9Bnnoq_small:after{width:.5rem;height:.5rem}._9Bnnoq_large,._9Bnnoq_large:before,._9Bnnoq_large:after{width:2.5rem;height:2.5rem}@keyframes _9Bnnoq_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._9Bnnoq_spinner._9Bnnoq_success{border-color:var(--blocks-transparent)}._9Bnnoq_spinner._9Bnnoq_success:after{border-top-color:var(--blocks-primary)}._9Bnnoq_spinner._9Bnnoq_warn{border-color:var(--error-transparent)}._9Bnnoq_spinner._9Bnnoq_warn:after{border-top-color:var(--error-primary)}._9Bnnoq_spinner._9Bnnoq_info{border-color:var(--ui-white-transparent)}._9Bnnoq_spinner._9Bnnoq_info:after{border-top-color:var(--ui-white)}._9Bnnoq_spinner._9Bnnoq_primary{border-color:var(--theme-transparent)}._9Bnnoq_spinner._9Bnnoq_primary:after{border-top-color:var(--theme-primary)}');var or={large:"_9Bnnoq_large",warn:"_9Bnnoq_warn",info:"_9Bnnoq_info",spin:"_9Bnnoq_spin",success:"_9Bnnoq_success",primary:"_9Bnnoq_primary",spinner:"_9Bnnoq_spinner",small:"_9Bnnoq_small"};import{jsx as C2}from"preact/jsx-runtime";function x2({className:r,level:o,small:i,large:a}){return C2("div",{className:_2(r,or.spinner,or[o||"info"],{[or.small]:i,[or.large]:a})})}import{useCallback as s2}from"preact/hooks";import{classNames as g2}from"@blockcode/utils";b(".G1JGNa_toggle-button{filter:saturate(0);min-width:calc(2rem + 2px);height:calc(2rem + 2px);margin-left:-1px;padding:.375rem!important}.G1JGNa_toggle-button:disabled{cursor:not-allowed;filter:grayscale()}.G1JGNa_toggle-button.G1JGNa_audo-width{width:auto}.G1JGNa_button-icon{margin:auto}.G1JGNa_toggle-button-first{border-top-right-radius:0;border-bottom-right-radius:0}.G1JGNa_toggle-button-middle{border-radius:0}.G1JGNa_toggle-button-last{border-top-left-radius:0;border-bottom-left-radius:0}.G1JGNa_toggle-button-actived{border:1px solid var(--theme-highlight);background:var(--theme-light-transparent);filter:none;z-index:1}.G1JGNa_button-text{flex:auto}");var c1={buttonIcon:"G1JGNa_button-icon",toggleButtonFirst:"G1JGNa_toggle-button-first",toggleButtonLast:"G1JGNa_toggle-button-last",toggleButtonActived:"G1JGNa_toggle-button-actived",audoWidth:"G1JGNa_audo-width",toggleButton:"G1JGNa_toggle-button",buttonText:"G1JGNa_button-text",toggleButtonMiddle:"G1JGNa_toggle-button-middle"};import{jsx as Ir,Fragment as y2}from"preact/jsx-runtime";function k2({disabled:r,items:o,value:i,onChange:a}){let t=o.length-1;return Ir(y2,{children:o.map((n,c)=>Ir(p1,{disabled:n.disabled||r,className:g2(c1.toggleButton,{[c1.autoWidth]:n.title&&!n.icon,[c1.toggleButtonFirst]:c===0,[c1.toggleButtonMiddle]:c>0&&c<t,[c1.toggleButtonLast]:c===t,[c1.toggleButtonActived]:!r&&i===n.value}),onClick:s2(()=>a?.(n.value),[a]),children:n.icon?Ir("img",{src:n.icon,className:c1.buttonIcon,title:Z(n.title)}):Ir("div",{className:c1.buttonText,children:Z(n.title)})},c))})}var Ao=Symbol.for,g1=Symbol("kCapture"),sa=Ao("events.errorMonitor"),B2=Symbol("events.maxEventTargetListeners"),G2=Symbol("events.maxEventTargetListenersWarned"),_a=Ao("nodejs.rejection"),L2=Ao("nodejs.rejection"),xa=Array.prototype.slice,k1=10,E=function(r){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[g1]=r?.captureRejections?Boolean(r?.captureRejections):g[g1])this.emit=q2},g=E.prototype={};g._events=void 0;g._eventsCount=0;g._maxListeners=void 0;g.setMaxListeners=function(r){return Jo(r,"setMaxListeners",0),this._maxListeners=r,this};g.constructor=E;g.getMaxListeners=function(){return this?._maxListeners??k1};function ga(r,o){var{_events:i}=r;if(o[0]??=Error("Unhandled error."),!i)throw o[0];var a=i[sa];if(a)for(var t of xa.call(a))t.apply(r,o);var n=i.error;if(!n)throw o[0];for(var t of xa.call(n))t.apply(r,o);return!0}function F2(r,o,i,a){o.then(void 0,function(t){queueMicrotask(()=>I2(r,t,i,a))})}function I2(r,o,i,a){if(typeof r[_a]==="function")r[_a](o,i,...a);else try{r[g1]=!1,r.emit("error",o)}finally{r[g1]=!0}}var z2=function(r,...o){if(r==="error")return ga(this,o);var{_events:i}=this;if(i===void 0)return!1;var a=i[r];if(a===void 0)return!1;let t=a.length>1?a.slice():a;for(let n=0,{length:c}=t;n<c;n++){let e=t[n];switch(o.length){case 0:e.call(this);break;case 1:e.call(this,o[0]);break;case 2:e.call(this,o[0],o[1]);break;case 3:e.call(this,o[0],o[1],o[2]);break;default:e.apply(this,o);break}}return!0},q2=function(r,...o){if(r==="error")return ga(this,o);var{_events:i}=this;if(i===void 0)return!1;var a=i[r];if(a===void 0)return!1;let t=a.length>1?a.slice():a;for(let n=0,{length:c}=t;n<c;n++){let e=t[n],l;switch(o.length){case 0:l=e.call(this);break;case 1:l=e.call(this,o[0]);break;case 2:l=e.call(this,o[0],o[1]);break;case 3:l=e.call(this,o[0],o[1],o[2]);break;default:l=e.apply(this,o);break}if(l!==void 0&&typeof l?.then==="function"&&l.then===Promise.prototype.then)F2(this,l,r,o)}return!0};g.emit=z2;g.addListener=function(r,o){ir(o);var i=this._events;if(!i)i=this._events={__proto__:null},this._eventsCount=0;else if(i.newListener)this.emit("newListener",r,o.listener??o);var a=i[r];if(!a)i[r]=[o],this._eventsCount++;else{a.push(o);var t=this._maxListeners??k1;if(t>0&&a.length>t&&!a.warned)ka(this,r,a)}return this};g.on=g.addListener;g.prependListener=function(r,o){ir(o);var i=this._events;if(!i)i=this._events={__proto__:null},this._eventsCount=0;else if(i.newListener)this.emit("newListener",r,o.listener??o);var a=i[r];if(!a)i[r]=[o],this._eventsCount++;else{a.unshift(o);var t=this._maxListeners??k1;if(t>0&&a.length>t&&!a.warned)ka(this,r,a)}return this};function ka(r,o,i){i.warned=!0;let a=Error(`Possible EventEmitter memory leak detected. ${i.length} ${String(o)} listeners added to [${r.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);a.name="MaxListenersExceededWarning",a.emitter=r,a.type=o,a.count=i.length,console.warn(a)}function ya(r,o,...i){this.removeListener(r,o),o.apply(this,i)}g.once=function(r,o){ir(o);let i=ya.bind(this,r,o);return i.listener=o,this.addListener(r,i),this};g.prependOnceListener=function(r,o){ir(o);let i=ya.bind(this,r,o);return i.listener=o,this.prependListener(r,i),this};g.removeListener=function(r,o){ir(o);var{_events:i}=this;if(!i)return this;var a=i[r];if(!a)return this;var t=a.length;let n=-1;for(let c=t-1;c>=0;c--)if(a[c]===o||a[c].listener===o){n=c;break}if(n<0)return this;if(n===0)a.shift();else a.splice(n,1);if(a.length===0)delete i[r],this._eventsCount--;return this};g.off=g.removeListener;g.removeAllListeners=function(r){var{_events:o}=this;if(r&&o){if(o[r])delete o[r],this._eventsCount--}else this._events={__proto__:null};return this};g.listeners=function(r){var{_events:o}=this;if(!o)return[];var i=o[r];if(!i)return[];return i.map((a)=>a.listener??a)};g.rawListeners=function(r){var{_events:o}=this;if(!o)return[];var i=o[r];if(!i)return[];return i.slice()};g.listenerCount=function(r){var{_events:o}=this;if(!o)return 0;return o[r]?.length??0};g.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};g[g1]=!1;function N2(r,o,i){var a=i?.signal;if(Ba(a,"options.signal"),a?.aborted)throw new Mo(void 0,{cause:a?.reason});let{resolve:t,reject:n,promise:c}=$newPromiseCapability(Promise),e=(d)=>{if(r.removeListener(o,l),a!=null)zr(a,"abort",h);n(d)},l=(...d)=>{if(typeof r.removeListener==="function")r.removeListener("error",e);if(a!=null)zr(a,"abort",h);t(d)};if(Ca(r,o,l,{once:!0}),o!=="error"&&typeof r.once==="function")r.once("error",e);function h(){zr(r,o,l),zr(r,"error",e),n(new Mo(void 0,{cause:a?.reason}))}if(a!=null)Ca(a,"abort",h,{once:!0});return c}function Z2(r,o){return r.listeners(o)}function T2(r,...o){Jo(r,"setMaxListeners",0);var i;if(o&&(i=o.length))for(let a=0;a<i;a++)o[a].setMaxListeners(r);else k1=r}function D2(r,o){return r.listenerCount(o)}function zr(r,o,i,a){if(typeof r.removeListener==="function")r.removeListener(o,i);else r.removeEventListener(o,i,a)}function Ca(r,o,i,a){if(typeof r.on==="function")if(a.once)r.once(o,i);else r.on(o,i);else r.addEventListener(o,i,a)}class Mo extends Error{constructor(r="The operation was aborted",o=void 0){if(o!==void 0&&typeof o!=="object")throw S1("options","Object",o);super(r,o);this.code="ABORT_ERR",this.name="AbortError"}}function S1(r,o,i){let a=TypeError(`The "${r}" argument must be of type ${o}. Received ${i}`);return a.code="ERR_INVALID_ARG_TYPE",a}function U2(r,o,i){let a=RangeError(`The "${r}" argument is out of range. It must be ${o}. Received ${i}`);return a.code="ERR_OUT_OF_RANGE",a}function Ba(r,o){if(r!==void 0&&(r===null||typeof r!=="object"||!("aborted"in r)))throw S1(o,"AbortSignal",r)}function Jo(r,o,i,a){if(typeof r!=="number")throw S1(o,"number",r);if(i!=null&&r<i||a!=null&&r>a||(i!=null||a!=null)&&Number.isNaN(r))throw U2(o,`${i!=null?`>= ${i}`:""}${i!=null&&a!=null?" && ":""}${a!=null?`<= ${a}`:""}`,r)}function ir(r){if(typeof r!=="function")throw TypeError("The listener must be a function")}function S2(r,o){if(typeof r!=="boolean")throw S1(o,"boolean",r)}function K2(r){return r?._maxListeners??k1}function W2(r,o){if(r===void 0)throw S1("signal","AbortSignal",r);if(Ba(r,"signal"),typeof o!=="function")throw S1("listener","function",o);let i;if(r.aborted)queueMicrotask(()=>o());else r.addEventListener("abort",o,{__proto__:null,once:!0}),i=()=>{r.removeEventListener("abort",o)};return{__proto__:null,[Symbol.dispose](){i?.()}}}Object.defineProperties(E,{captureRejections:{get(){return g[g1]},set(r){S2(r,"EventEmitter.captureRejections"),g[g1]=r},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>{return k1},set:(r)=>{Jo(r,"defaultMaxListeners",0),k1=r}},kMaxEventTargetListeners:{value:B2,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:G2,enumerable:!1,configurable:!1,writable:!1}});Object.assign(E,{once:N2,getEventListeners:Z2,getMaxListeners:K2,setMaxListeners:T2,EventEmitter:E,usingDomains:!1,captureRejectionSymbol:L2,errorMonitor:sa,addAbortListener:W2,init:E,listenerCount:D2});var M2=new TextEncoder;class Ga extends E{constructor(r){super();this._port=r,this._reader=null,r._serial=this,this._port.ondisconnect=()=>{this.emit("disconnect",Error("Unexpectedly disconnected"))},this.setMaxListeners(0)}get port(){return this._port}dispose(){this.close().then(()=>{this._port=null})}getInfo(){return this.port.getInfo()}async readLoop(){try{let{value:r,done:o}=await this._reader.read();if(r)this.emit("data",r);if(o)this._reader.releaseLock();else this.readLoop()}catch(r){this.emit("error",r)}}async open(r){try{await this.port.open(r)}catch(o){this.emit("error",o),this.close()}this._reader=this.port.readable.getReader(),this.emit("connect"),this.readLoop()}async close(r=!0){if(r)this.emit("disconnect");try{await this._reader?.cancel(),await this.port.close()}catch(o){this.emit("error",o)}this._reader=null}async write(r,o="text"){let i=this.port.writable.getWriter();r=o==="text"?M2.encode(r):r;try{await i.write(r),i.releaseLock()}catch(a){this.emit("error",a)}}setSignals(r){this.port.setSignals(r)}}import{Base64Utils as A2}from"@blockcode/utils";class La extends E{constructor(r){super();this._server=r,this.device._ble=this,this.setMaxListeners(0)}get server(){return this._server}get device(){return this.server.device}dispose(){this.close(),this._server=null}getInfo(){return{id:this.device.id,name:this.device.name}}handleGattServerDisconnected(r){this.device.removeEventListener("gattserverdisconnected",this.handleGattServerDisconnected.bind(this));let o;if(this._manualDisconnect!==!0)o=Error("Unexpectedly disconnected");this.emit("disconnect",o),this.close(),this._manualDisconnect=!1}async open(){this._manualDisconnect=!1;try{await this.server.connect()}catch(r){this.emit("error",r),this.close()}this.device.addEventListener("gattserverdisconnected",this.handleGattServerDisconnected.bind(this)),this.emit("connect")}close(){this._manualDisconnect=!0,this.server.disconnect()}get connected(){return!!this.server?.connected}handleCharacteristicValueChanged(r){let o=r.target.value,i=new Uint8Array(o.buffer);this.emit("data",i)}async startNotifications(r,o){try{let a=await(await this._server.getPrimaryService(r)).getCharacteristic(o);a.stopNotifications(),a.oncharacteristicvaluechanged=this.handleCharacteristicValueChanged.bind(this),a.startNotifications()}catch(i){this.emit("error",i)}}async read(r,o,i=!1){try{let t=await(await this._server.getPrimaryService(r)).getCharacteristic(o);if(i)t.stopNotifications(),t.oncharacteristicvaluechanged=this.handleCharacteristicValueChanged.bind(this),t.startNotifications();let n=await t.readValue();return{message:new Uint8Array(n.buffer)}}catch(a){this.emit("error",a)}}async write(r,o,i,a=null,t=null){let n=a==="base64"?A2.base64ToUint8Array(i):i;try{let e=await(await this._server.getPrimaryService(r)).getCharacteristic(o);if(t&&e.writeValueWithResponse)await e.writeValueWithResponse(n);if(t===!1&&e.writeValueWithoutResponse)await e.writeValueWithoutResponse(n);await e.writeValue(n)}catch(c){this.emit("error",c)}}}export{Wt as useProjectContext,it as useLocalesContext,Er as useAppContext,ei as translate,Ia as themeColors,lt as showSplash,Wr as showHotkey,i1 as setModified,Ft as setMeta,kt as setMacosMenuBarStyled,ot as setLanguage,Kr as setHotkey,wi as setFile,_i as setAsset,xt as setAppState,ht as setAlert,zt as renameProject,st as openUserStorage,bt as openTab,vt as openPromptModal,St as openProject,mt as openLayout,hr as openFile,io as openAsset,Z as maybeTranslate,Ct as logger,It as isModifyType,dt as hideSplash,Nt as getFile,Dt as getAsset,Zt as delFile,Ut as delAsset,pi as delAlert,gt as closeUserStorage,pt as closePromptModal,Kt as closeProject,ft as closeLayout,Mr as clearHotkeys,wt as addTabs,$a as addLocalesMessages,_t as addLessons,qt as addFile,Tt as addAsset,ut as addAlertConfig,xr as Tooltip,k2 as ToggleButtons,J as Text,x2 as Spinner,Ga as Serial,Mt as ProjectProvider,Ka as Numeric,M as ModifyTypes,No as Modal,P1 as MenuSection,E1 as MenuItem,O1 as Menu,at as LocalesProvider,Zo as LibraryItem,b2 as Library,w2 as Label,v as Keys,yo as Input,Io as IconSelectorItem,o2 as IconSelector,Go as Dropdown,Sa as DateTime,$1 as ContextMenu,p1 as Button,T0 as BufferedInput,z0 as Box,La as BLE,yt as AppProvider,s0 as ActionButton};
