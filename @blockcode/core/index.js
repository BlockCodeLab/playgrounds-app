function p(r){let t=globalThis.document,e=t.createElement("style");e.appendChild(t.createTextNode(r)),t.head.append(e)}p(":root{--ui-primary:#e5f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-light:#c3efe2;--ui-transparent:#fff0;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-black-transparent:#00000026;--modal-overlay:color(from var(--theme-primary)srgb r g b/.9);--theme-primary:#4c97ff;--theme-secondary:#4280d7;--theme-tertiary:#3373cc;--theme-transparent:color(from var(--theme-primary)srgb r g b/.35);--theme-light-transparent:color(from var(--theme-primary)srgb r g b/.15);--theme-highlight:#8abbff;--text-primary:#575e75;--text-transparent:color(from var(--text-primary)srgb r g b/.75);--warn-primary:#ff8c1a;--warn-light:#ffb366;--warn-transparent:color(from var(--warn-primary)srgb r g b/.25);--error-primary:#ff661a;--error-secondary:#e64d00;--blocks-primary:#0fbd8c;--blocks-secondary:#0da57a;--blocks-tertiary:#0b8e69;--blocks-transparent:color(from var(--blocks-primary)srgb r g b/.35);--blocks-motion-primary:#4c97ff;--blocks-looks-primary:#96f;--blocks-sounds-primary:#cf63cf;--blocks-event-primary:;--blocks-control-primary:#ffab19;--blocks-sensing-primary:#5cb1d6;--blocks-operators-primary:#59c059;--blocks-variables-primary:#ff8c1a;--blocks-lists-primary:#ff661a;--blocks-monitor-primary:#855cd6;--blocks-myblocks-primary:#ff6680;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:970px;--min-height:720px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{width:100%;height:100%;min-width:var(--min-width);min-height:var(--min-height);margin:0}*{box-sizing:border-box;user-select:none}");p("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var ii={ui:{primary:"#E5F0FF",secondary:"#E9F1FC",tertiary:"#D9E3F2",light:"#C3EFE2",theme:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",highlight:"#8ABBFF"},text:{primary:"#575E75"},warn:{primary:"#FF8C1A",light:"#FFB366"},error:{primary:"#FF661A",secondary:"#E64D00"}},blocks:{primary:"#0FBD8C",secondary:"#0DA57A",tertiary:"#0B8E69",quaternary:"#0B8E69",motion:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",quaternary:"#3373CC"},looks:{primary:"#9966FF",secondary:"#855CD6",tertiary:"#774DCB",quaternary:"#774DCB"},sounds:{primary:"#CF63CF",secondary:"#C94FC9",tertiary:"#BD42BD",quaternary:"#BD42BD"},events:{primary:"#FFBF00",secondary:"#E6AC00",tertiary:"#CC9900",quaternary:"#CC9900"},control:{primary:"#FFAB19",secondary:"#EC9C13",tertiary:"#CF8B17",quaternary:"#CF8B17"},sensing:{primary:"#5CB1D6",secondary:"#47A8D1",tertiary:"#2E8EB8",quaternary:"#2E8EB8"},operators:{primary:"#59C059",secondary:"#46B946",tertiary:"#389438",quaternary:"#389438"},variables:{primary:"#FF8C1A",secondary:"#FF8000",tertiary:"#DB6E00",quaternary:"#DB6E00"},lists:{primary:"#FF661A",secondary:"#FF5500",tertiary:"#E64D00",quaternary:"#E64D00"},myblocks:{primary:"#FF6680",secondary:"#FF4D6A",tertiary:"#FF3355",quaternary:"#FF3355"},monitor:{primary:"#855CD6",secondary:"#7547D1",tertiary:"#7547D1",quaternary:"#7547D1"}}};import{createContext as gi}from"preact";import{useContext as yi}from"preact/hooks";import{computed as xi,effect as Ci,signal as Se}from"@preact/signals";var tr,yt=function(r,t){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])},yt(r,t)},Ie=function(r){function t(e,o){var i=r.call(this,"Translation failed")||this;return i.id=e,i.language=o,i}return function(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function i(){this.constructor=e}yt(e,o),e.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}(t,r),t.is=function(e){return e instanceof t},t}(Error),ni=function(){function r(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return r.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},r.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},r}();(function(r){r[r.Plural=0]="Plural",r[r.Select=1]="Select",r[r.Text=2]="Text",r[r.Variable=3]="Variable"})(tr||(tr={}));var ai=["{","}",","],li=function(){function r(t){this.input=new ni(t)}return r.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},r.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},r.prototype.readWhile=function(t){for(var e="";!this.input.done&&t(this.input.value);)e+=this.input.value,this.input.next();return e},r.prototype.readVariable=function(){this.skip("{");var t=this.readWhile(function(o){return!function(i){return ai.includes(i)}(o)}).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:tr.Variable,value:t};this.skip(",");var e=this.readVariableType();return{options:this.readVariableOptions(),type:e,value:t}},r.prototype.readText=function(){return{type:tr.Text,value:this.readWhile(function(t){return t!=="{"&&t!=="}"})}},r.prototype.readVariableType=function(){var t=this.readWhile(function(e){return e!==","}).trim();return t==="plural"?tr.Plural:t==="select"?tr.Select:void this.input.croak()},r.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},r.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},r}();function ui(r,t,e){for(var o=new li(t),i=[],n=function(a){var{options:l,type:u,value:m}=a;if(u!==tr.Variable)if(l)if(u!==tr.Select)try{i.concat(l[new Intl.PluralRules(r).select(e[m])].map(n))}catch(c){i.concat(l.other.map(n))}else i.concat((l[e[m]]||l.other).map(n));else i.push(m);else i.push(e[m])};!o.input.done;)n(o.next());return i}var Hr=function(r,t){r===void 0&&(r="en"),t===void 0&&(t=[]);var e=this;this.memo={},this.onError=console.error,this.formatDate=function(i,n){return new Intl.DateTimeFormat(e.language,n).format(i)},this.formatNumber=function(i,n){return new Intl.NumberFormat(e.language,n).format(i)},this.translate=function(i,n){n===void 0&&(n={});var a=e.getMessageById(i,n.defaultMessage);if(typeof a=="string")try{return ui(e.language,a,n).join("")}catch(l){e.onError(new Ie(i,e.language))}return a+""},this.getMessageById=function(i,n){if(!e.memo[i]){var a=e.messages[i];a===void 0&&(a=i.split(".").reduce(function(l,u){return l?l[u]:void 0},e.messages)),typeof a!="string"&&(e.onError(new Ie(i,e.language)),a=n||i),e.memo[i]=a}return e.memo[i]};var o=t.find(function(i){return i.language===r});this.language=r,this.messages=o?o.messages:{}};import{createContext as ci,h as Ir,Fragment as xt}from"preact";import{useState as di,useEffect as mi,useContext as Ne}from"preact/hooks";function Ct(r,t){var e={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(e[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(o=Object.getOwnPropertySymbols(r);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(r,o[i])&&(e[o[i]]=r[o[i]])}return e}var kt=ci({language:"",locales:[],setLanguage:function(){},translator:new Hr}),ze=function(r){var{children:t,language:e,locales:o,onError:i}=r,n=di(e);mi(function(){n[1](e)},[e]);var a=new Hr(n[0],o);return i&&(a.onError=i),Ir(kt.Provider,{value:{language:n[0],locales:o,setLanguage:n[1],translator:a}},t)};function mr(r){var t=Ne(kt);return r&&r!==t.language?new Hr(r):t.translator}var vi=function(r){var{language:t,value:e}=r,o=Ct(r,["children","language","value"]);return Ir(xt,null,mr(t).formatDate(e,o))},hi=function(r){var{language:t,value:e}=r,o=Ct(r,["children","language","value"]);return Ir(xt,null,mr(t).formatNumber(e,o))},A=function(r){var{html:t,id:e,tagName:o}=r,i=o===void 0?"span":o,n=Ct(r,["children","html","id","tagName"]),a=Ne(kt).translator.translate(e,n);return t?Ir(i,{dangerouslySetInnerHTML:{__html:a}}):Ir(xt,null,a)};import{setUserLanguage as pi,getUserLanguage as si}from"@blockcode/utils";var{DisplayNames:Bt,Locale:fi}=window.Intl,Te="en",Ee=navigator.language,Pr=new Map;function qe(r){let t=new fi(r),e=t.textInfo||t.getTextInfo();return e&&e.direction==="rtl"}var bi={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function De(){let r=si()||Ee;return r=bi[r]||r,Pr.has(r)?r:Te}function Re(r){document.querySelector("html").lang=r,pi(r)}var wi=new Bt([Te],{type:"language"}),_i=new Bt([Ee],{type:"language"});function Xr(r,t={}){let e=new Bt([r],{type:"language"});return Pr.set(r,{languageName:e.of(r),languageNameByDefault:wi.of(r),languageNameByBrowser:_i.of(r)}),{language:r,messages:t}}var Ue={"core.modal.back":"Back","core.library.all":"All","core.library.beta":"Beta","core.library.comingSoon":"Coming Soon","core.library.requires":"Requires","core.library.programming":"Programming","core.library.collaboration":"Collaboration with"};var We={"core.modal.back":"返回","core.library.all":"所有","core.library.beta":"测试版","core.library.comingSoon":"敬请期待","core.library.requires":"系统需求","core.library.programming":"编程语言","core.library.collaboration":"合作者"};var Me={"core.modal.back":"返迴","core.library.all":"所有","core.library.beta":"測試版","core.library.comingSoon":"敬請期待","core.library.requires":"係統需求","core.library.programming":"編程語言","core.library.collaboration":"合作者"};import{jsx as Ae}from"preact/jsx-runtime";var Gt=Se([Xr("en",Ue),Xr("zh-Hans",We),Xr("zh-Hant",Me)]);function ki(r){Gt.value=Gt.value.map((t)=>({language:t.language,messages:Object.assign(t.messages,r[t.language]??{})}))}var Nr=Se(De()),Bi=xi(()=>qe(Nr.value));Ci(()=>Re(Nr.value));function Gi(r){Nr.value=r}function Ze(r,t,e){if(!e)e=mr();if(typeof t==="string")t={defaultMessage:t};return e.translate(r,t)}function E(r,t){if(!r?.props)return r;if(r.props.children)return[].concat(r.props.children).map((e)=>E(e,t)).join("");return Ze(r.props.id,r.props,t)}var Ke=gi(),Li=()=>Object.assign(yi(Ke),{translator:mr()});function Fi({children:r}){return Ae(Ke.Provider,{value:{language:Nr,languageNames:Pr,isRtl:Bi},children:Ae(ze,{locales:Gt.value,language:Nr.value,onError:Ii,children:r})})}function Ii(r){}import{createContext as Ni}from"preact";import{useContext as zi}from"preact/hooks";import{batch as Ve,signal as W}from"@preact/signals";import{isMac as He,nanoid as Ti}from"@blockcode/utils";import{isMac as H}from"@blockcode/utils";var d={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Delete",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},Je={[d.ESC]:H?"⎋":"Esc",[d.F1]:"F1",[d.F2]:"F2",[d.F3]:"F3",[d.F4]:"F4",[d.F5]:"F5",[d.F6]:"F6",[d.F7]:"F7",[d.F8]:"F8",[d.F9]:"F9",[d.F10]:"F10",[d.F11]:"F11",[d.F12]:"F12",[d.D1]:"1",[d.D2]:"2",[d.D3]:"3",[d.D4]:"4",[d.D5]:"5",[d.D6]:"6",[d.D7]:"7",[d.D8]:"8",[d.D9]:"9",[d.D0]:"0",[d.TAB]:H?"⇥":"Tab",[d.DELETE]:H?"⌫":"Backspace",[d.RETURN]:H?"↩":"Enter",[d.A]:"A",[d.B]:"B",[d.C]:"C",[d.D]:"D",[d.E]:"E",[d.F]:"F",[d.G]:"G",[d.H]:"H",[d.I]:"I",[d.J]:"J",[d.K]:"K",[d.L]:"L",[d.M]:"M",[d.N]:"N",[d.O]:"O",[d.P]:"P",[d.Q]:"Q",[d.R]:"R",[d.S]:"S",[d.T]:"T",[d.U]:"U",[d.V]:"V",[d.W]:"W",[d.X]:"X",[d.Y]:"Y",[d.Z]:"Z",[d.UP]:"↑",[d.DOWN]:"↓",[d.LEFT]:"←",[d.RIGHT]:"→",[d.SHIFT]:H?"⇧":"Shift",[d.CONTROL]:H?"⌃":"Ctrl",[d.OPTION]:H?"⌥":"Alt",[d.COMMAND]:H?"⌘":"⊞"},Oe={[d.CONTROL]:0,[d.OPTION]:1,[d.SHIFT]:2,[d.COMMAND]:3},Lt=new Map;function Ft(r,t){Lt.set(r.join("-"),t)}function It(r){let t=[];if(typeof r==="string")r=r.split("-");return r.forEach((e)=>{if(Oe.hasOwnProperty(e))t[Oe[e]]=Je[e];else t.push(Je[e])}),t.filter((e)=>e).join(H?"":"+")}function Nt(){Lt.clear()}window.addEventListener("keydown",(r)=>{Lt.forEach((t,e)=>{let o=(i)=>{if(i===d.CONTROL&&r.ctrlKey)return!0;if(i===d.OPTION&&r.altKey)return!0;if(i===d.SHIFT&&r.shiftKey)return!0;if(i===d.COMMAND&&r.metaKey)return!0;if(i===r.code)return!0;return!1};if(typeof e==="string")e=e.split("-");if(e.every(o)&&typeof t==="function"){r.preventDefault();try{t()}catch(i){}}})});import{jsx as Pi}from"preact/jsx-runtime";var Yr=W(!1);function Ei(){Yr.value=!0}function qi(){Yr.value=!1}var P=W([]),zt={};function Di(r,t){zt[r]=t}function Ri(...r){let t,e,o=0;for(let i of r){if(typeof i==="string")t=i;if(typeof i==="object")e=i;if(typeof i==="number")o=i}if(t&&zt[t])e=Object.assign({},zt[t],e??{});if(!e)return;if(!e.id)e.id=Ti();if(P.value.find((i)=>e.id===i.id))P.value=P.value.map((i)=>{if(i.id===e.id)return Object.assign(i,e);return i});else P.value=P.value.concat(e);if(o>0)setTimeout(()=>Pe(e.id),o);return e.id}function Pe(r){P.value=P.value.filter((t)=>t.id!==r)}var $r=W(null);function Ui(r){$r.value=r}function Wi(){$r.value=null}var Tt=W(null),Et=W(null),jr=W(-1),qt=W(null),Dt=W(null),Rt=W(null),Qr=W(null);function Mi(r){Ve(()=>{Tt.value=r.menuItems,Et.value=r.tabs,jr.value=r.tabIndex??0,qt.value=r.docks,Dt.value=r.panes,Rt.value=r.tutorials})}function Ai(){Nt(),Ve(()=>{Yr.value=!1,P.value.length=0,$r.value=null,Tt.value=null,Et.value=null,jr.value=-1,qt.value=null,Dt.value=null,Rt.value=null,Qr.value=null})}function Si(r){jr.value=r}function Zi(r){r.value=state.tabs.value.concat(r)}function Ki(r,t){if(typeof r==="string")r={[r]:t};Qr.value=Object.assign({},Qr.value??{},r)}var Ut=W(!1);function Ji(){Ut.value=!0}function Oi(){Ut.value=!1}var Xe=W(He&&window.electron);function Vi(r){if(He&&window.electron)Xe.value=r}var Qe=Ni(),Wt=()=>zi(Qe);function Hi({children:r}){return Pi(Qe.Provider,{value:{splashVisible:Yr,alerts:P,prompt:$r,menuItems:Tt,tabs:Et,tabIndex:jr,docks:qt,panes:Dt,tutorials:Rt,appState:Qr,userStorageVisible:Ut,macosMenuBarStyled:Xe},children:r})}import{createContext as Xi}from"preact";import{useContext as Qi}from"preact/hooks";import{batch as er,computed as tt,signal as X}from"@preact/signals";import{nanoid as Mt}from"@blockcode/utils";function zr(r,t,e){if(r=r.trim(),e.find((o)=>t!==o.id&&o.name===r)){let o=r.replace(/\d+$/,""),i=new RegExp(`${o}(\\d+)$`),n=0;for(let a of e){if(t===a.id)continue;let l=i.exec(a.name);if(l){let u=parseInt(l[1]);if(u>n)n=u}}r=`${o}${n+1}`}return r}import{jsx as dn}from"preact/jsx-runtime";var At=X(null),St=X(null),Zt=X(null),_r=X(0),M={Saved:0,Rename:1,AddFile:2,SetFile:3,DelFile:4,AddAsset:5,SetAsset:6,DelAsset:7},or=(r=M.Saved)=>{if(r===M.Saved)_r.value=M.Saved;else _r.value=(Math.floor(_r.value/10)+1)*10+r},Yi=(r=M.Saved)=>{return _r.value%10===r},et=X("");function $i(r){et.value=r,or(M.Rename)}var k=X(null),J=X(null),ot=tt(()=>k.value?.findIndex?.((r)=>r.id===J.value)??-1),Kt=tt(()=>k.value?.find?.((r)=>r.id===J.value)??null);function rt(r){J.value=r}function ji(r){if(!r.id)r.id=Mt();if(k.value.find((t)=>t.id===r.id)){$e(r);return}r.name=zr(r.name,r.id,k.value),er(()=>{k.value.push(r),J.value=r.id,or(M.AddFile)})}function $e(r){let t=Kt.value,e=ot.value;if(r.id)t=k.value.find((o)=>o.id===r.id),e=k.value.findIndex((o)=>o.id===r.id);if(!t)return;if(r.name)r.name=zr(r.name,t.id,k.value);er(()=>{k.value[e]=Object.assign(t,r),or(M.SetFile)})}function rn(r){if(ot===r)return k.value[r];if(J.value!==r)return k.value.find((t)=>t.id===r);return Kt}function tn(r){let t=ot.value;if(J.value!==r)t=k.value.findIndex((e)=>e.id===r);if(t===-1)return;er(()=>{if(r===J.value)if(t+1<k.value.length)rt(k.value[t+1]?.id);else if(t-1>-1)rt(k.value[t-1]?.id);else rt(null);k.value.splice(t,1),or(M.DelFile)})}var I=X(null),ir=X(null),it=tt(()=>I.value?.findIndex?.((r)=>r.id===ir.value)??-1),Jt=tt(()=>I.value?.find?.((r)=>r.id===ir.value)??null);function Ot(r){ir.value=r}function en(r){if(!r.id)r.id=Mt();if(I.value.find((t)=>t.id===r.id)){je(r);return}r.name=zr(r.name,r.id,I.value),er(()=>{I.value.push(r),Ot(r.id),or(M.AddAsset)})}function je(r){let t=Jt.value,e=it.value;if(r.id)t=I.value.find((o)=>o.id===r.id),e=I.value.findIndex((o)=>o.id===r.id);if(!t)return;if(r.name)r.name=zr(r.name,t.id,I.value);er(()=>{I.value[e]=Object.assign(t,r),or(M.SetAsset)})}function on(r){if(it===r)return I.value[r];if(ir.value!==r)return I.value.find((t)=>t.id===r);return Jt}function nn(r){let t=it.value;if(ir.value!==r)t=I.value.findIndex((e)=>e.id===r);if(t===-1)return;er(()=>{Ot(null),I.value.splice(t,1),or(M.DelAsset)})}var Ye=(r)=>(t)=>Object.assign(t,{name:E(t.name,r)});function an(r,t){er(()=>{At.value=r.meta,St.value=r.id,Zt.value=r.key??Mt(),et.value=E(r.name,t),k.value=r.files?.map?.(Ye(t)),J.value=r.fileId,I.value=r.assets?.map?.(Ye(t)),ir.value=r.assetId})}function ln(){er(()=>{At.value=null,St.value=null,Zt.value=null,et.value="",k.value=null,J.value=null,I.value=null,ir.value=null,_r.value=0})}var ro=Xi(),un=()=>Qi(ro);function cn({children:r}){return dn(ro.Provider,{value:{meta:At,id:St,key:Zt,name:et,file:Kt,files:k,fileId:J,fileIndex:ot,asset:Jt,assets:I,assetId:ir,assetIndex:it,modified:_r},children:r})}import{useSignal as _o}from"@preact/signals";import{classNames as ce,sleepMs as Kn}from"@blockcode/utils";import{useEffect as Un,useId as Wn,useRef as Mn}from"preact/hooks";import{classNames as An}from"@blockcode/utils";function x(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var t=r.ownerDocument;return t?t.defaultView||window:window}return r}function gr(r){var t=x(r).Element;return r instanceof t||r instanceof Element}function G(r){var t=x(r).HTMLElement;return r instanceof t||r instanceof HTMLElement}function yr(r){if(typeof ShadowRoot==="undefined")return!1;var t=x(r).ShadowRoot;return r instanceof t||r instanceof ShadowRoot}var{max:to,min:eo,round:Q}=Math;function xr(){var r=navigator.userAgentData;if(r!=null&&r.brands&&Array.isArray(r.brands))return r.brands.map(function(t){return t.brand+"/"+t.version}).join(" ");return navigator.userAgent}function Vt(){return!/^((?!chrome|android).)*safari/i.test(xr())}function nr(r,t,e){if(t===void 0)t=!1;if(e===void 0)e=!1;var o=r.getBoundingClientRect(),i=1,n=1;if(t&&G(r))i=r.offsetWidth>0?Q(o.width)/r.offsetWidth||1:1,n=r.offsetHeight>0?Q(o.height)/r.offsetHeight||1:1;var a=gr(r)?x(r):window,l=a.visualViewport,u=!Vt()&&e,m=(o.left+(u&&l?l.offsetLeft:0))/i,c=(o.top+(u&&l?l.offsetTop:0))/n,v=o.width/i,s=o.height/n;return{width:v,height:s,top:c,right:m+v,bottom:c+s,left:m,x:m,y:c}}function Tr(r){var t=x(r),e=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:e,scrollTop:o}}function Ht(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Pt(r){if(r===x(r)||!G(r))return Tr(r);else return Ht(r)}function N(r){return r?(r.nodeName||"").toLowerCase():null}function Y(r){return((gr(r)?r.ownerDocument:r.document)||window.document).documentElement}function Xt(r){return nr(Y(r)).left+Tr(r).scrollLeft}function S(r){return x(r).getComputedStyle(r)}function vr(r){var t=S(r),e=t.overflow,o=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+i+o)}function mn(r){var t=r.getBoundingClientRect(),e=Q(t.width)/r.offsetWidth||1,o=Q(t.height)/r.offsetHeight||1;return e!==1||o!==1}function Qt(r,t,e){if(e===void 0)e=!1;var o=G(t),i=G(t)&&mn(t),n=Y(t),a=nr(r,i,e),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};if(o||!o&&!e){if(N(t)!=="body"||vr(n))l=Pt(t);if(G(t))u=nr(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop;else if(n)u.x=Xt(n)}return{x:a.left+l.scrollLeft-u.x,y:a.top+l.scrollTop-u.y,width:a.width,height:a.height}}function Er(r){var t=nr(r),e=r.offsetWidth,o=r.offsetHeight;if(Math.abs(t.width-e)<=1)e=t.width;if(Math.abs(t.height-o)<=1)o=t.height;return{x:r.offsetLeft,y:r.offsetTop,width:e,height:o}}function hr(r){if(N(r)==="html")return r;return r.assignedSlot||r.parentNode||(yr(r)?r.host:null)||Y(r)}function nt(r){if(["html","body","#document"].indexOf(N(r))>=0)return r.ownerDocument.body;if(G(r)&&vr(r))return r;return nt(hr(r))}function Cr(r,t){var e;if(t===void 0)t=[];var o=nt(r),i=o===((e=r.ownerDocument)==null?void 0:e.body),n=x(o),a=i?[n].concat(n.visualViewport||[],vr(o)?o:[]):o,l=t.concat(a);return i?l:l.concat(Cr(hr(a)))}function Yt(r){return["table","td","th"].indexOf(N(r))>=0}function oo(r){if(!G(r)||S(r).position==="fixed")return null;return r.offsetParent}function vn(r){var t=/firefox/i.test(xr()),e=/Trident/i.test(xr());if(e&&G(r)){var o=S(r);if(o.position==="fixed")return null}var i=hr(r);if(yr(i))i=i.host;while(G(i)&&["html","body"].indexOf(N(i))<0){var n=S(i);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return i;else i=i.parentNode}return null}function pr(r){var t=x(r),e=oo(r);while(e&&Yt(e)&&S(e).position==="static")e=oo(e);if(e&&(N(e)==="html"||N(e)==="body"&&S(e).position==="static"))return t;return e||vn(r)||t}var Z="top",ar="bottom",K="right",U="left",hn="auto",$t=[Z,ar,K,U],jt="start",kr="end";var io=[].concat($t,[hn]).reduce(function(r,t){return r.concat([t,t+"-"+jt,t+"-"+kr])},[]),pn="beforeRead",sn="read",fn="afterRead",bn="beforeMain",wn="main",_n="afterMain",gn="beforeWrite",yn="write",xn="afterWrite",no=[pn,sn,fn,bn,wn,_n,gn,yn,xn];function Cn(r){var t=new Map,e=new Set,o=[];r.forEach(function(n){t.set(n.name,n)});function i(n){e.add(n.name);var a=[].concat(n.requires||[],n.requiresIfExists||[]);a.forEach(function(l){if(!e.has(l)){var u=t.get(l);if(u)i(u)}}),o.push(n)}return r.forEach(function(n){if(!e.has(n.name))i(n)}),o}function re(r){var t=Cn(r);return no.reduce(function(e,o){return e.concat(t.filter(function(i){return i.phase===o}))},[])}function te(r){var t;return function(){if(!t)t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(r())})});return t}}function ee(r){var t=r.reduce(function(e,o){var i=e[o.name];return e[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,e},{});return Object.keys(t).map(function(e){return t[e]})}function oe(r,t){var e=t.getRootNode&&t.getRootNode();if(r.contains(t))return!0;else if(e&&yr(e)){var o=t;do{if(o&&r.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function $(r){return r.split("-")[0]}function qr(r){return r.split("-")[1]}function Dr(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function ie(r){var{reference:t,element:e,placement:o}=r,i=o?$(o):null,n=o?qr(o):null,a=t.x+t.width/2-e.width/2,l=t.y+t.height/2-e.height/2,u;switch(i){case Z:u={x:a,y:t.y-e.height};break;case ar:u={x:a,y:t.y+t.height};break;case K:u={x:t.x+t.width,y:l};break;case U:u={x:t.x-e.width,y:l};break;default:u={x:t.x,y:t.y}}var m=i?Dr(i):null;if(m!=null){var c=m==="y"?"height":"width";switch(n){case jt:u[m]=u[m]-(t[c]/2-e[c]/2);break;case kr:u[m]=u[m]+(t[c]/2-e[c]/2);break;default:}}return u}function ne(){return{top:0,right:0,bottom:0,left:0}}function ae(r){return Object.assign({},ne(),r)}function le(r,t){return t.reduce(function(e,o){return e[o]=r,e},{})}var ao={placement:"bottom",modifiers:[],strategy:"absolute"};function lo(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect==="function")})}function uo(r){if(r===void 0)r={};var t=r,e=t.defaultModifiers,o=e===void 0?[]:e,i=t.defaultOptions,n=i===void 0?ao:i;return function a(l,u,m){if(m===void 0)m=n;var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},ao,n),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},v=[],s=!1,b={state:c,setOptions:function h(_){var L=typeof _==="function"?_(c.options):_;y(),c.options=Object.assign({},n,c.options,L),c.scrollParents={reference:gr(l)?Cr(l):l.contextElement?Cr(l.contextElement):[],popper:Cr(u)};var F=re(ee([].concat(o,c.options.modifiers)));return c.orderedModifiers=F.filter(function(z){return z.enabled}),C(),b.update()},forceUpdate:function h(){if(s)return;var _=c.elements,L=_.reference,F=_.popper;if(!lo(L,F))return;c.rects={reference:Qt(L,pr(F),c.options.strategy==="fixed"),popper:Er(F)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(Vr){return c.modifiersData[Vr.name]=Object.assign({},Vr.data)});for(var z=0;z<c.orderedModifiers.length;z++){if(c.reset===!0){c.reset=!1,z=-1;continue}var T=c.orderedModifiers[z],B=T.fn,V=T.options,wr=V===void 0?{}:V,gt=T.name;if(typeof B==="function")c=B({state:c,options:wr,name:gt,instance:b})||c}},update:te(function(){return new Promise(function(h){b.forceUpdate(),h(c)})}),destroy:function h(){y(),s=!0}};if(!lo(l,u))return b;b.setOptions(m).then(function(h){if(!s&&m.onFirstUpdate)m.onFirstUpdate(h)});function C(){c.orderedModifiers.forEach(function(h){var{name:_,options:L}=h,F=L===void 0?{}:L,z=h.effect;if(typeof z==="function"){var T=z({state:c,name:_,instance:b,options:F}),B=function V(){};v.push(T||B)}})}function y(){v.forEach(function(h){return h()}),v=[]}return b}}var at={passive:!0};function kn(r){var{state:t,instance:e,options:o}=r,i=o.scroll,n=i===void 0?!0:i,a=o.resize,l=a===void 0?!0:a,u=x(t.elements.popper),m=[].concat(t.scrollParents.reference,t.scrollParents.popper);if(n)m.forEach(function(c){c.addEventListener("scroll",e.update,at)});if(l)u.addEventListener("resize",e.update,at);return function(){if(n)m.forEach(function(c){c.removeEventListener("scroll",e.update,at)});if(l)u.removeEventListener("resize",e.update,at)}}var co={name:"eventListeners",enabled:!0,phase:"write",fn:function r(){},effect:kn,data:{}};function Bn(r){var{state:t,name:e}=r;t.modifiersData[e]=ie({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var mo={name:"popperOffsets",enabled:!0,phase:"read",fn:Bn,data:{}};var Gn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ln(r,t){var{x:e,y:o}=r,i=t.devicePixelRatio||1;return{x:Q(e*i)/i||0,y:Q(o*i)/i||0}}function vo(r){var t,e=r.popper,o=r.popperRect,i=r.placement,n=r.variation,a=r.offsets,l=r.position,u=r.gpuAcceleration,m=r.adaptive,c=r.roundOffsets,v=r.isFixed,s=a.x,b=s===void 0?0:s,C=a.y,y=C===void 0?0:C,h=typeof c==="function"?c({x:b,y}):{x:b,y};b=h.x,y=h.y;var _=a.hasOwnProperty("x"),L=a.hasOwnProperty("y"),F=U,z=Z,T=window;if(m){var B=pr(e),V="clientHeight",wr="clientWidth";if(B===x(e)){if(B=Y(e),S(B).position!=="static"&&l==="absolute")V="scrollHeight",wr="scrollWidth"}if(B=B,i===Z||(i===U||i===K)&&n===kr){z=ar;var gt=v&&B===T&&T.visualViewport?T.visualViewport.height:B[V];y-=gt-o.height,y*=u?1:-1}if(i===U||(i===Z||i===ar)&&n===kr){F=K;var Vr=v&&B===T&&T.visualViewport?T.visualViewport.width:B[wr];b-=Vr-o.width,b*=u?1:-1}}var Le=Object.assign({position:l},m&&Gn),Fe=c===!0?Ln({x:b,y},x(e)):{x:b,y};if(b=Fe.x,y=Fe.y,u){var Fr;return Object.assign({},Le,(Fr={},Fr[z]=L?"0":"",Fr[F]=_?"0":"",Fr.transform=(T.devicePixelRatio||1)<=1?"translate("+b+"px, "+y+"px)":"translate3d("+b+"px, "+y+"px, 0)",Fr))}return Object.assign({},Le,(t={},t[z]=L?y+"px":"",t[F]=_?b+"px":"",t.transform="",t))}function Fn(r){var{state:t,options:e}=r,o=e.gpuAcceleration,i=o===void 0?!0:o,n=e.adaptive,a=n===void 0?!0:n,l=e.roundOffsets,u=l===void 0?!0:l,m={placement:$(t.placement),variation:qr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};if(t.modifiersData.popperOffsets!=null)t.styles.popper=Object.assign({},t.styles.popper,vo(Object.assign({},m,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:u})));if(t.modifiersData.arrow!=null)t.styles.arrow=Object.assign({},t.styles.arrow,vo(Object.assign({},m,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})));t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ho={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Fn,data:{}};function In(r){var t=r.state;Object.keys(t.elements).forEach(function(e){var o=t.styles[e]||{},i=t.attributes[e]||{},n=t.elements[e];if(!G(n)||!N(n))return;Object.assign(n.style,o),Object.keys(i).forEach(function(a){var l=i[a];if(l===!1)n.removeAttribute(a);else n.setAttribute(a,l===!0?"":l)})})}function Nn(r){var t=r.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};if(Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow)Object.assign(t.elements.arrow.style,e.arrow);return function(){Object.keys(t.elements).forEach(function(o){var i=t.elements[o],n=t.attributes[o]||{},a=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:e[o]),l=a.reduce(function(u,m){return u[m]="",u},{});if(!G(i)||!N(i))return;Object.assign(i.style,l),Object.keys(n).forEach(function(u){i.removeAttribute(u)})})}}var po={name:"applyStyles",enabled:!0,phase:"write",fn:In,effect:Nn,requires:["computeStyles"]};var zn=[co,mo,ho,po],Br=uo({defaultModifiers:zn});function Tn(r,t,e){var o=$(r),i=[U,Z].indexOf(o)>=0?-1:1,n=typeof e==="function"?e(Object.assign({},t,{placement:r})):e,a=n[0],l=n[1];return a=a||0,l=(l||0)*i,[U,K].indexOf(o)>=0?{x:l,y:a}:{x:a,y:l}}function En(r){var{state:t,options:e,name:o}=r,i=e.offset,n=i===void 0?[0,0]:i,a=io.reduce(function(c,v){return c[v]=Tn(v,t.rects,n),c},{}),l=a[t.placement],u=l.x,m=l.y;if(t.modifiersData.popperOffsets!=null)t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=m;t.modifiersData[o]=a}var so={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:En};function fo(r,t,e){return to(r,eo(t,e))}var qn=function r(t,e){return t=typeof t==="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,ae(typeof t!=="number"?t:le(t,$t))};function Dn(r){var t,e=r.state,o=r.name,i=r.options,n=e.elements.arrow,a=e.modifiersData.popperOffsets,l=$(e.placement),u=Dr(l),m=[U,K].indexOf(l)>=0,c=m?"height":"width";if(!n||!a)return;var v=qn(i.padding,e),s=Er(n),b=u==="y"?Z:U,C=u==="y"?ar:K,y=e.rects.reference[c]+e.rects.reference[u]-a[u]-e.rects.popper[c],h=a[u]-e.rects.reference[u],_=pr(n),L=_?u==="y"?_.clientHeight||0:_.clientWidth||0:0,F=y/2-h/2,z=v[b],T=L-s[c]-v[C],B=L/2-s[c]/2+F,V=fo(z,B,T),wr=u;e.modifiersData[o]=(t={},t[wr]=V,t.centerOffset=V-B,t)}function Rn(r){var{state:t,options:e}=r,o=e.element,i=o===void 0?"[data-popper-arrow]":o;if(i==null)return;if(typeof i==="string"){if(i=t.elements.popper.querySelector(i),!i)return}if(!oe(t.elements.popper,i))return;t.elements.arrow=i}var bo={name:"arrow",enabled:!0,phase:"main",fn:Dn,effect:Rn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};p('.BfU_xa_tooltip{background:var(--theme-primary);border-radius:var(--form-radius);opacity:0;z-index:-1;color:var(--ui-white);padding:var(--space)calc(var(--space)*2.5);white-space:nowrap;border:1px solid #0000001a;font-size:.8rem;transition:opacity .2s ease-out;box-shadow:0 0 .5rem #00000040}.BfU_xa_tooltip[data-show]{opacity:1;z-index:var(--z-index-tooltip)}.BfU_xa_arrow,.BfU_xa_arrow:before{background:inherit;width:8px;height:8px;position:absolute}.BfU_xa_arrow{visibility:hidden}.BfU_xa_arrow:before{visibility:visible;content:"";border:1px solid #0000001a;border-radius:2px;transform:rotate(45deg)}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow{bottom:-4px}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow:before{border-top:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow{top:-4px}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow:before{border-bottom:0;border-right:0}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow{right:-4px}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow:before{border-bottom:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow{left:-4px}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow:before{border-top:0;border-right:0}');var ue={arrow:"BfU_xa_arrow",tooltip:"BfU_xa_tooltip"};import{jsx as Zn,jsxs as wo,Fragment as Sn}from"preact/jsx-runtime";function lt({content:r,className:t,placement:e,offset:o,clickable:i,children:n,onShow:a,onHide:l}){let u=Mn(null),m=Wn();return Un(()=>{if(u.current){let c=u.current.previousElementSibling;c.setAttribute("aria-describedby",m);let v=Br(c,u.current,{placement:e||"auto",modifiers:[bo,so,{name:"offset",options:{offset:o||[0,8]}}]});u.popper=v;let s=()=>{if(delete u.current.dataset.show,v.setOptions((C)=>({...C,modifiers:[...C.modifiers,{name:"eventListeners",enabled:!1}]})),l)l()},b=()=>{if(u.current.dataset.show=!0,v.setOptions((y)=>({...y,modifiers:[...y.modifiers,{name:"eventListeners",enabled:!0}]})),v.update(),a)a();let C=()=>{s(),document.removeEventListener("pointerdown",C)};document.addEventListener("pointerdown",C)};if(i)c.addEventListener("pointerup",b),u.current.addEventListener("pointerdown",(C)=>C.stopPropagation());else[["mouseenter",b],["mouseleave",s]].forEach(([C,y])=>c.addEventListener(C,y))}return()=>{}},[u]),wo(Sn,{children:[n,wo("div",{ref:u,id:m,className:An(ue.tooltip,t),role:"tooltip",children:[r,Zn("div",{className:ue.arrow,"data-popper-arrow":!0})]})]})}p(":root{--main-button-size:2.75rem;--more-button-size:2.25rem;--arrow-size:.5rem;--arrow-inset:-.25rem;--arrow-rounding:.125rem}.d9vCIG_action-button-wrapper{flex-direction:column-reverse;transition:all .2s;display:flex;position:relative}.d9vCIG_button{cursor:pointer;background:var(--theme-primary);border:none;outline:none;flex-direction:column;justify-content:center;align-items:center;transition:background-color .2s;display:flex;position:relative}.d9vCIG_disabled{cursor:auto;background:var(--ui-black-transparent)}.d9vCIG_button:not(.d9vCIG_disabled):hover{background:var(--blocks-primary)}.d9vCIG_button:active{padding:inherit}.d9vCIG_main-button{width:var(--main-button-size);height:var(--main-button-size);box-shadow:0 0 0 4px var(--theme-transparent);z-index:var(--z-index-add-button);border-radius:100%;transition:transform,box-shadow .5s}.d9vCIG_main-button.d9vCIG_disabled{box-shadow:none}.d9vCIG_main-button:not(.d9vCIG_disabled):hover{box-shadow:0 0 0 6px var(--theme-transparent);transform:scale(1.1)}.d9vCIG_main-icon{width:calc(var(--main-button-size) - 1rem);height:calc(var(--main-button-size) - 1rem)}.d9vCIG_more-buttons-outer{background:var(--theme-tertiary);border-top-left-radius:var(--more-button-size);border-top-right-radius:var(--more-button-size);width:var(--more-button-size);margin-left:calc((var(--main-button-size) - var(--more-button-size))/2);margin-right:calc((var(--main-button-size) - var(--more-button-size))/2);bottom:calc(var(--main-button-size));margin-bottom:calc(var(--main-button-size)/-2);padding-bottom:calc(var(--main-button-size)/2);position:absolute;overflow:hidden}.d9vCIG_more-buttons{z-index:10;flex-direction:column;max-height:0;transition:max-height 1s}.d9vCIG_expanded .d9vCIG_more-buttons-outer{overflow:visible}.d9vCIG_expanded .d9vCIG_more-buttons{max-height:1000px}.d9vCIG_force-hidden .d9vCIG_more-buttons-outer{display:none}.d9vCIG_force-hidden .d9vCIG_more-Buttons{transition:all!important}.d9vCIG_more-buttons:first-child{border-top-right-radius:var(--more-button-size);border-top-left-radius:var(--more-button-size);overflow:hidden}.d9vCIG_more-button{width:var(--more-button-size);height:var(--more-button-size);background:var(--theme-tertiary)}.d9vCIG_more-icon{width:calc(var(--more-button-size) - 1rem);height:calc(var(--more-button-size) - 1rem)}.d9vCIG_tooltip{background:var(--blocks-primary)}");var q={moreButtonsOuter:"d9vCIG_more-buttons-outer",moreButtons:"d9vCIG_more-buttons",forceHidden:"d9vCIG_force-hidden",moreIcon:"d9vCIG_more-icon",disabled:"d9vCIG_disabled",expanded:"d9vCIG_expanded",button:"d9vCIG_button",actionButtonWrapper:"d9vCIG_action-button-wrapper",mainButton:"d9vCIG_main-button",mainIcon:"d9vCIG_main-icon","more-Buttons":"d9vCIG_more-Buttons",moreButton:"d9vCIG_more-button",tooltip:"d9vCIG_tooltip"};import{useCallback as ut}from"preact/hooks";import{jsx as lr,jsxs as On}from"preact/jsx-runtime";function Jn({className:r,disabled:t,icon:e,tooltip:o,tooltipPlacement:i,moreButtons:n,onClick:a}){let l=_o(!1),u=_o(!1),m=ut((c)=>async(v)=>{u.value=!0,l.value=!1,c.onClick(v),await Kn(1),u.value=!1},[]);return On("div",{className:ce(q.actionButtonWrapper,r,{[q.expanded]:l.value,[q.forceHidden]:u.value}),disabled:t,onPointerEnter:ut(()=>l.value=!0,[]),onPointerLeave:ut(()=>l.value=!1,[]),onClick:a,children:[lr("div",{className:q.moreButtonsOuter,children:lr("div",{className:q.moreButtons,onClick:ut((c)=>c.stopPropagation(),[]),children:n&&n.map((c,v)=>lr(lt,{className:q.tooltip,content:c.tooltip,placement:i||"left",offset:[0,12],children:lr("button",{className:ce(q.button,q.moreButton),disabled:t,onClick:m(c),children:lr("img",{className:q.moreIcon,draggable:!1,src:c.icon})})},v))})}),lr(lt,{className:q.tooltip,content:o,placement:i||"left",offset:[0,14],children:lr("button",{disabled:t,className:ce(q.button,q.mainButton),children:lr("img",{className:q.mainIcon,draggable:!1,src:e})})})]})}import{useCallback as ct,useId as zu}from"preact/hooks";import{useSignal as Pn}from"@preact/signals";import{classNames as Vn}from"@blockcode/utils";p("._9lEAzG_input-form{height:2rem;font-size:var(--standard-font-size);color:var(--text-primary);border-style:solid;border-width:1px;border-color:var(--ui-black-transparent);cursor:text;box-shadow:none;text-overflow:ellipsis;white-space:nowrap;border-radius:2rem;outline:none;min-width:0;padding:0 .75rem;font-weight:700;transition:all .25s ease-out;overflow:hidden}._9lEAzG_input-form:hover{border-color:var(--theme-primary)}._9lEAzG_input-form:focus{border-color:var(--theme-primary);box-shadow:0 0 0 .25rem var(--theme-transparent)}._9lEAzG_input-small{text-overflow:clip;text-align:center;width:3rem;padding:0 .5rem}");var de={inputSmall:"_9lEAzG_input-small",inputForm:"_9lEAzG_input-form"};import{jsx as Hn}from"preact/jsx-runtime";function me(r){let{small:t,...e}=r;return Hn("input",{...e,className:Vn(de.inputForm,r.className,{[de.inputSmall]:t})})}import{jsx as Qn}from"preact/jsx-runtime";function Xn({value:r,type:t,forceFocus:e,onSubmit:o,...i}){let n=Pn(null),a=ct((c)=>{c.target.setSelectionRange(0,0),c.target.select()},[]),l=ct((c)=>{let v=t==="number",s=v?!isNaN(n.value):!0;if(n.value!==null&&s&&o)o(v?Number(n.value):n.value,c);if(n.value=null,c&&e)c.target.focus()},[t,e,o]),u=ct((c)=>{if(c.key==="Enter")l(c),c.target.blur()},[l]),m=ct((c)=>n.value=c.target.value,[]);return Qn(me,{...i,value:n.value===null?r:n.value,onFocus:a,onBlur:l,onChange:m,onInput:m,onKeyPress:u})}import{classNames as go}from"@blockcode/utils";p(".g7iT9G_outlined{cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--form-radius);background:var(--ui-white);padding:var(--space)calc(var(--space)*1.5);user-select:none;color:var(--text-primary);font-weight:700;font-size:var(--standard-font-size)}.g7iT9G_outlined:focus-visible{outline:0}.g7iT9G_content{white-space:nowrap;flex-direction:row;justify-content:center;align-items:center;width:100%;display:flex}.g7iT9G_vertical-content{flex-direction:column}.g7iT9G_disabled{cursor:auto;opacity:.5}");var Rr={content:"g7iT9G_content",verticalContent:"g7iT9G_vertical-content",disabled:"g7iT9G_disabled",outlined:"g7iT9G_outlined"};import{jsx as yo}from"preact/jsx-runtime";function ur({className:r,vertical:t,disabled:e,title:o,onClick:i,onMouseDown:n,onMouseUp:a,children:l}){return yo("button",{className:go(Rr.outlined,r,{[Rr.disabled]:e}),title:o,disabled:e,onClick:i,onPointerUp:a,onPointerDown:n,children:yo("div",{className:go(Rr.content,{[Rr.verticalContent]:t}),children:l})})}import{useEffect as ea,useRef as oa,useId as ia}from"preact/hooks";import{classNames as na}from"@blockcode/utils";import{cloneElement as Yn}from"preact";import{useId as $n,useCallback as xo}from"preact/hooks";import{classNames as ve,isDesktop as Co,flatChildren as jn}from"@blockcode/utils";p(".SBBo_G_menu{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space)/2);background:var(--ui-white);max-width:260px;color:var(--text-primary);box-shadow:0 var(--space)var(--space)0 var(--ui-black-transparent);margin:0;padding:0;position:absolute;overflow:hidden}.SBBo_G_menu-item{white-space:nowrap;padding:0 calc(var(--space) + 2px);line-height:34px;font-size:var(--standard-font-size);justify-content:space-between;margin:0;display:flex}.SBBo_G_menu-item.SBBo_G_disabled{filter:opacity(.5)}.SBBo_G_menu-item.SBBo_G_disabled:hover{background:0 0}.SBBo_G_content{flex:1;display:flex}.SBBo_G_hotkey{font-weight:400}.SBBo_G_menu-item:hover{background:var(--theme-primary)}.SBBo_G_menu-item:hover:not(.SBBo_G_disabled){color:var(--ui-white)}.SBBo_G_menu-item.SBBo_G_hoverable{cursor:pointer}.SBBo_G_menu-section:not(:first-child){border-top:1px solid var(--ui-black-transparent)}");var cr={disabled:"SBBo_G_disabled",menuSection:"SBBo_G_menu-section",menu:"SBBo_G_menu",menuItem:"SBBo_G_menu-item",content:"SBBo_G_content",hoverable:"SBBo_G_hoverable",hotkey:"SBBo_G_hotkey"};import{jsx as dt,jsxs as ra,Fragment as ta}from"preact/jsx-runtime";function Ur({id:r,className:t,children:e,name:o}){return dt("ul",{className:ve(cr.menu,t),id:`${r||$n()}-menu-${o}`,children:e})}function Wr({className:r,style:t,disabled:e,label:o,href:i,hotkey:n,onClick:a,children:l}){let u=xo((m={})=>{if(e)return;if(a){a(m);return}if(i)window.open(i,"_blank")},[e,i,a]);if(Co&&n)Ft(n,u);return ra("li",{className:ve(cr.menuItem,{[cr.hoverable]:!e,[cr.disabled]:e},r),style:t,onClick:u,onPointerDown:xo((m)=>m.stopPropagation(),[]),children:[dt("div",{className:cr.content,children:o||l}),Co&&n&&dt("div",{className:cr.hotkey,children:It(n)})]})}function Mr({children:r}){return dt(ta,{children:jn(r).map((t,e)=>t&&Yn(t,{className:ve(t.props.className,{[cr.menuSection]:e===0}),key:e}))})}p("._27p4uG_context-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;transition:opacity .2s ease-out}._27p4uG_context-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu)}._27p4uG_context-menu{min-width:130px;box-shadow:0 0 .5rem #00000040}");var he={contextMenuWrapper:"_27p4uG_context-menu-wrapper",contextMenu:"_27p4uG_context-menu"};import{jsx as mt,jsxs as la,Fragment as aa}from"preact/jsx-runtime";var Bo=(r)=>r.map((t,e)=>Array.isArray(t)?mt(Mr,{children:Bo(t)},e):mt(Wr,{disabled:t.disabled,className:t.className,style:t.style,onClick:t.onClick,children:t.label},e)),ko=(r=0,t=0)=>()=>({width:0,height:0,top:t,right:r,bottom:t,left:r});function Ar({menuItems:r,className:t,children:e}){let o=oa(null),i=ia();return ea(()=>{if(o.current){let n=o.current.previousElementSibling,a={getBoundingClientRect:ko()},l=Br(a,o.current,{placement:"bottom-end"}),u=(c)=>{if(o.current)delete o.current.dataset.show,l.setOptions((v)=>({...v,modifiers:[...v.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",u),document.removeEventListener("pointerdown",u)},m=(c)=>{c.preventDefault(),a.getBoundingClientRect=ko(c.clientX,c.clientY),o.current.dataset.show=!0,l.setOptions((v)=>({...v,modifiers:[...v.modifiers,{name:"eventListeners",enabled:!0}]})),l.update(),setTimeout(()=>{document.addEventListener("click",u),document.addEventListener("pointerdown",u)})};n.addEventListener("contextmenu",m)}return()=>{}},[o]),la(aa,{children:[e,mt("div",{ref:o,id:i,className:he.contextMenuWrapper,role:"context",children:r&&mt(Ur,{name:i,className:na(he.contextMenu,t),children:Bo(r)})})]})}import{useEffect as ca,useRef as Lo,useId as da}from"preact/hooks";import{useSignal as ma}from"@preact/signals";import{classNames as pe}from"@blockcode/utils";p(".CLktXa_dropdown{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space)/2);min-width:3.5rem;color:var(--blocks-monitor-primary);cursor:pointer;justify-content:space-between;align-items:center;padding:.5rem;font-size:.8rem;display:flex;overflow:visible}.CLktXa_dropdown-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;transition:opacity .2s ease-out}.CLktXa_dropdown-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu)}.CLktXa_dropdown-menu{min-width:130px;max-width:max-content;max-height:30vh;overflow:hidden auto;box-shadow:0 0 .5rem #00000040}.CLktXa_open{background:var(--ui-black-transparent)}.CLktXa_dropdown-icon{width:.5rem;height:.5rem;margin-left:.5rem}.CLktXa_caret-up{padding-top:.2rem;padding-bottom:0;transform:rotate(180deg)}");var sr={dropdownMenu:"CLktXa_dropdown-menu",dropdownIcon:"CLktXa_dropdown-icon",open:"CLktXa_open",dropdown:"CLktXa_dropdown",caretUp:"CLktXa_caret-up",dropdownMenuWrapper:"CLktXa_dropdown-menu-wrapper"};var Go="./assets/icon-dropdown-caret-y6kkj0v9.svg";import{jsx as Sr,jsxs as Fo,Fragment as ha}from"preact/jsx-runtime";var Io=(r)=>r.map((t,e)=>Array.isArray(t)?Sr(Mr,{children:Io(t)},e):Sr(Wr,{disabled:t.disabled,className:t.className,style:t.style,onClick:t.onClick,children:t.label},e));function va({className:r,items:t,children:e}){let o=Lo(null),i=Lo(null),n=da(),a=ma(!1);return ca(()=>{if(o.current&&i.current){let l=i.current.previousElementSibling,u=Br(o.current,i.current,{placement:"bottom-start"}),m=(v)=>{if(a.value=!1,i.current)delete i.current.dataset.show,u.setOptions((s)=>({...s,modifiers:[...s.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",m),document.removeEventListener("pointerdown",m)},c=(v)=>{a.value=!0,i.current.dataset.show=!0,u.setOptions((s)=>({...s,modifiers:[...s.modifiers,{name:"eventListeners",enabled:!0}]})),u.update(),setTimeout(()=>{document.addEventListener("click",m),document.addEventListener("pointerdown",m)})};l.addEventListener("pointerup",c)}},[o,i]),Fo(ha,{children:[Fo("div",{ref:o,className:pe(sr.dropdown,r,{[sr.open]:a.value}),children:[e,Sr("img",{className:pe(sr.dropdownIcon,{[sr.aretUp]:a.value}),draggable:!1,src:Go})]}),Sr("div",{ref:i,id:n,className:sr.dropdownMenuWrapper,role:"context",children:t&&Sr(Ur,{name:n,className:pe(sr.dropdownMenu),children:Io(t)})})]})}import{useId as wa}from"preact/hooks";import{classNames as Eo}from"@blockcode/utils";import{classNames as fa}from"@blockcode/utils";import{classNames as sa}from"@blockcode/utils";p(".F7KjoW_delete-button{width:1.75rem;height:1.75rem;box-shadow:0px 0px 0px 2px var(--theme-transparent);background:var(--theme-primary);color:var(--ui-white);cursor:pointer;user-select:none;border:0;border-radius:50%;justify-content:center;align-items:center;margin:0;padding:0;transition:all .15s ease-out;display:none;position:absolute;overflow:hidden}.F7KjoW_delete-icon{user-select:none;transform-origin:50%;margin:.25rem;position:relative}");var se={deleteButton:"F7KjoW_delete-button",deleteIcon:"F7KjoW_delete-icon"};var No="./assets/icon-delete-seqp9ssx.svg";import{jsx as zo}from"preact/jsx-runtime";function To({className:r,onClick:t}){return zo("button",{className:sa(se.deleteButton,r),onClick:t,children:zo("img",{className:se.deleteIcon,src:No})})}p("._230aGG_icon-selector-item{color:var(--text-primary);border:2px solid var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;user-select:none;flex-direction:column;justify-content:flex-start;font-size:.8rem;display:flex;position:relative}._230aGG_icon-selector-item:hover{border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_selector{display:none}._230aGG_selector:checked+._230aGG_icon-selector-item{box-shadow:0px 0px 0px 4px var(--theme-transparent);border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_icon-outer{flex:1;justify-content:center;align-items:center;display:flex;position:relative}._230aGG_icon-inner{user-select:none;pointer-events:none;max-width:32px;max-height:32px}._230aGG_icon-order{font-weight:700;font-size:var(--small-font-size);position:absolute;top:3px;left:3px}._230aGG_icon-info{font-size:var(--small-font-size);color:var(--text-primary);user-select:none;border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;padding:.25rem}._230aGG_icon-title,._230aGG_icon-details{text-overflow:ellipsis;white-space:nowrap;min-width:0;overflow:hidden}._230aGG_icon-details{margin-top:.125rem;font-size:.5rem}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_icon-info{background:var(--theme-primary);color:var(--ui-white)}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_delete-button{display:flex;top:-.625rem;right:-.625rem}");var O={iconDetails:"_230aGG_icon-details",selector:"_230aGG_selector",iconOuter:"_230aGG_icon-outer",iconInfo:"_230aGG_icon-info",iconSelectorItem:"_230aGG_icon-selector-item",iconInner:"_230aGG_icon-inner",iconOrder:"_230aGG_icon-order",deleteButton:"_230aGG_delete-button",iconTitle:"_230aGG_icon-title"};import{useCallback as ba}from"preact/hooks";import{jsx as Gr,jsxs as vt}from"preact/jsx-runtime";function fe({id:r,name:t,title:e,details:o,icon:i,order:n,checked:a,displayOrder:l,contextMenu:u,className:m,onSelect:c,onMouseDown:v,onMouseUp:s,onDelete:b}){let C=ba((y)=>{y.stopPropagation(),b(y)},[b]);return vt(Ar,{menuItems:u,children:[Gr("input",{checked:a,className:O.selector,id:`${r}-icon-${t}`,name:`${r}-icon`,type:"radio",value:t}),vt("label",{className:fa(O.iconSelectorItem,m),for:`${r}-icon-${t}`,onClick:c,onPointerDown:v,onPointerUp:s,children:[vt("div",{className:O.iconOuter,children:[Gr("img",{className:O.iconInner,src:i}),l&&Gr("div",{className:O.iconOrder,children:n+1})]}),vt("div",{className:O.iconInfo,children:[Gr("div",{className:O.iconTitle,children:e}),o&&Gr("div",{className:O.iconDetails,children:o})]}),b&&Gr(To,{className:O.deleteButton,onClick:C})]})]})}p(".ipnJ9q_icon-selector-wrapper{background:var(--ui-white-transparent);overflow:auto}.ipnJ9q_items-wrapper{padding:calc(var(--space)/2);padding-bottom:var(--space);flex-flow:wrap;display:flex;overflow:hidden}.ipnJ9q_icon-item{box-sizing:border-box;width:calc((100%/var(--icon-per-row)) - var(--space));min-width:4rem;max-width:6rem;min-height:4rem;margin:calc(var(--space)/2)}");var ht={iconSelectorWrapper:"ipnJ9q_icon-selector-wrapper",itemsWrapper:"ipnJ9q_items-wrapper",iconItem:"ipnJ9q_icon-item"};import{jsx as be}from"preact/jsx-runtime";var pt=(r,t,e)=>(o)=>{if(e)e(r,t)};function _a({className:r,id:t,displayOrder:e,items:o,selectedIndex:i,selectedId:n,onDelete:a,onSelect:l,onMouseDown:u,onMouseUp:m}){let c=wa();return be("div",{className:Eo(ht.iconSelectorWrapper,r),children:be("div",{className:ht.itemsWrapper,children:o?.map?.((v,s)=>v.__hidden__?null:be(fe,{checked:s===i||v.id===n,displayOrder:e,className:Eo(ht.iconItem,v.className),contextMenu:v.contextMenu,details:v.details,icon:v.icon,id:t??c,name:s,order:v.order,title:v.name,onSelect:l&&pt(s,v,l),onMouseDown:u&&pt(s,v,u),onMouseUp:m&&pt(s,v,m),onDelete:a&&pt(s,v,a)},v.title))})})}import{useEffect as za,useCallback as Ce}from"preact/hooks";import{batch as ke,useSignal as Be}from"@preact/signals";import{classNames as ft}from"@blockcode/utils";import{classNames as Zr}from"@blockcode/utils";p(".FvkZfa_modal-overlay{background:var(--modal-overlay);z-index:var(--z-index-modal);backdrop-filter:blur(6px);display:flex;position:fixed;inset:0}.FvkZfa_modal-overlay.FvkZfa_red{background:color(from var(--error-primary)srgb r g b/.9)}.FvkZfa_modal-content{border:4px solid var(--ui-white-transparent);border-radius:var(--space);color:var(--text-primary);user-select:none;outline:none;align-self:flex-start;margin:100px auto;padding:0;overflow:hidden}.FvkZfa_modal-content.FvkZfa_full-screen{user-select:none;background:var(--ui-secondary);border:none;border-radius:0;flex-direction:column;width:100%;height:100%;margin:0;display:flex;position:absolute;overflow-y:auto}.FvkZfa_modal-header{height:var(--library-header-height);box-sizing:border-box;background:var(--theme-primary);flex-flow:row;justify-content:flex-start;width:100%;font-size:1rem;display:flex}.FvkZfa_red .FvkZfa_modal-header{background:var(--error-primary)}.FvkZfa_electron{padding-left:58px}.FvkZfa_header-item{color:var(--ui-white);user-select:none;align-items:center;padding:1rem;text-decoration:none;display:flex}.FvkZfa_header-item-title{user-select:none;letter-spacing:.4px;cursor:default;flex-grow:1;flex-shrink:0;justify-content:center;margin:0 -20rem 0 0;font-size:1rem;font-weight:400}.FvkZfa_full-screen .FvkZfa_header-item-title{margin:0 0 0 -20rem}.FvkZfa_header-item-close{z-index:1;flex-basis:20rem;justify-content:flex-end}.FvkZfa_header-item-back{z-index:1;flex-basis:20rem;order:-1;justify-content:flex-start}.FvkZfa_close-button{background:var(--ui-black-transparent);box-shadow:0 0 0 2px var(--ui-black-transparent);border:0;border-radius:50%;width:1.75rem;height:1.75rem;padding:0;transition:all .15s ease-out}.FvkZfa_close-button:hover{box-shadow:0px 0px 0px 4px var(--ui-black-transparent);transform:scale(1.1)}.FvkZfa_close-button img{margin:0 auto}.FvkZfa_back-button{color:var(--ui-white);white-space:nowrap;background:0 0;border:0;padding:0;font-size:1rem;font-weight:400}.FvkZfa_back-button img{height:1.5rem;margin-right:.5rem}");var D={headerItemBack:"FvkZfa_header-item-back",headerItemClose:"FvkZfa_header-item-close",modalContent:"FvkZfa_modal-content",modalOverlay:"FvkZfa_modal-overlay",electron:"FvkZfa_electron",headerItem:"FvkZfa_header-item",headerItemTitle:"FvkZfa_header-item-title",backButton:"FvkZfa_back-button",closeButton:"FvkZfa_close-button",modalHeader:"FvkZfa_modal-header",red:"FvkZfa_red",fullScreen:"FvkZfa_full-screen"};var qo="./assets/icon-back-gwek165q.svg";var Do="./assets/icon-close-bazpdng8.svg";import{jsx as fr,jsxs as we}from"preact/jsx-runtime";function _e({title:r,fullScreen:t,redStyle:e,onClose:o,className:i,headerClassName:n,children:a}){let{macosMenuBarStyled:l}=Wt();return fr("div",{className:Zr(D.modalOverlay,{[D.red]:e}),children:we("div",{className:Zr(D.modalContent,i,{[D.fullScreen]:t}),children:[we("div",{className:Zr(D.modalHeader,n,{[D.electron]:t&&l.value}),children:[fr("div",{className:Zr(D.headerItem,D.headerItemTitle),children:r}),fr("div",{className:Zr(D.headerItem,D.headerItemClose,{[D.headerItemBack]:t}),children:t?we(ur,{className:D.backButton,onClick:o,children:[fr("img",{src:qo}),fr(A,{id:"core.modal.back",defaultMessage:"Back"})]}):fr(ur,{className:D.closeButton,onClick:o,children:fr("img",{src:Do})})})]}),a]})})}import{classNames as Wo}from"@blockcode/utils";p(".sO8W8q_filter{background:var(--ui-white);user-select:none;height:var(--library-filter-bar-height);border-radius:10rem;flex-direction:row;flex-grow:1;align-items:center;display:flex;position:relative}.sO8W8q_filter-icon{width:1rem;height:1rem;margin:.75rem .75rem .75rem 1rem;position:absolute;top:0;left:0}.sO8W8q_filter:focus-within{box-shadow:0 0 0 .25rem var(--theme-transparent)}.sO8W8q_close-icon-wrapper{opacity:0;pointer-events:none;cursor:default;border-radius:50%;justify-content:center;align-items:center;width:1.25rem;height:1.25rem;margin:.625rem;transition:opacity 50ms linear;display:flex;position:absolute;top:0;right:0;overflow:hidden}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper{pointer-events:auto;cursor:pointer;opacity:1;transition:opacity 50ms linear}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper:hover{transform:scale(1.2)}.sO8W8q_close-icon{user-select:none;margin:.25rem;transition:transform 85ms cubic-bezier(.78,1,1,1);position:relative;transform:translate(.5rem)}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper .sO8W8q_close-icon{transform:translate(0)}.sO8W8q_filter-input{height:var(--library-filter-bar-height);appearance:none;color:var(--text-primary);font-size:var(--standard-font-size);letter-spacing:.15px;cursor:text;background-color:#0000;border:0;outline:none;flex-grow:1;padding:.625rem 2rem .625rem 3rem}.sO8W8q_filter-input::placeholder{opacity:.5;color:var(--text-primary);letter-spacing:.15px;padding:0 0 0 .25rem;font-size:.875rem}");var br={isActive:"sO8W8q_is-active",filterInput:"sO8W8q_filter-input",filterIcon:"sO8W8q_filter-icon",closeIcon:"sO8W8q_close-icon",closeIconWrapper:"sO8W8q_close-icon-wrapper",filter:"sO8W8q_filter"};var Ro="./assets/icon-filter-wecnwx09.svg";var Uo="./assets/icon-close-1jzsw9nf.svg";import{jsx as st,jsxs as ka}from"preact/jsx-runtime";function Mo({className:r,onChange:t,onClear:e,placeholder:o,query:i,inputClassName:n}){return ka("div",{className:Wo(r,br.filter,{[br.isActive]:i.length>0}),children:[st("img",{className:br.filterIcon,src:Ro}),st("input",{type:"text",className:Wo(br.filterInput,n),placeholder:E(o),"data-value":i,value:i,onInput:t}),st("div",{className:br.closeIconWrapper,onClick:e,children:st("img",{className:br.closeIcon,src:Uo})})]})}import{classNames as Kr}from"@blockcode/utils";p("._8P49xa_library-item{max-width:160px;height:160px;margin:var(--space);color:var(--text-primary);background:var(--ui-white);border-style:solid;border-width:2px;border-color:var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;flex-direction:column;flex-basis:160px;justify-content:flex-start;align-items:center;padding:1rem 1rem 0;font-size:.9rem;display:flex;position:relative}._8P49xa_library-item._8P49xa_large{flex-basis:220px;max-width:220px;height:220px}._8P49xa_library-item-featured{align-self:stretch}._8P49xa_library-item:hover{border-width:2px;border-color:var(--theme-primary)}._8P49xa_hidden{display:none}._8P49xa_disabled{opacity:.5;cursor:auto}._8P49xa_disabled:hover{border-color:var(--ui-black-transparent)}._8P49xa_library-item-image-container-wrapper{width:100%;height:100px;position:relative}._8P49xa_library-item-image-container{justify-content:center;align-items:center;width:100%;height:100px;display:flex;position:absolute;overflow:hidden}._8P49xa_large ._8P49xa_library-item-image-container-wrapper,._8P49xa_large ._8P49xa_library-item-image-container{height:160px}._8P49xa_library-item-inset-image-container{background-color:var(--blocks-primary);border:.25rem solid var(--ui-white);border-radius:.5rem;justify-content:center;align-self:flex-start;align-items:center;width:3.5rem;height:3.5rem;margin-top:-2.5rem;margin-left:1rem;display:flex;position:relative;overflow:hidden}._8P49xa_library-item-image{user-select:none;-webkit-user-drag:none;max-width:100%;max-height:100%}._8P49xa_library-item-inset-image{width:2.5rem}._8P49xa_library-item-name,._8P49xa_library-item-detial{text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%;min-width:0;margin:.25rem 0;overflow:hidden}._8P49xa_library-item-detial{font-size:var(--small-font-size);color:var(--text-primary);margin:-.2rem 0 0}._8P49xa_featured-item{flex-basis:300px;max-width:300px;height:auto;padding:0;overflow:hidden}._8P49xa_featured-image-container{position:relative}._8P49xa_featured-image{user-select:none;-webkit-user-drag:none;width:100%}._8P49xa_featured-title{margin:calc(var(--space)*1.5)0 calc(var(--space)*2);font-weight:700}._8P49xa_featured-text{text-align:left;width:300px;padding:10px 10px 10px 1.25rem;font-weight:700}._8P49xa_featured-description{padding-top:.3125rem;padding-bottom:.25rem;font-weight:400;line-height:1.375rem;display:block}._8P49xa_featured-metadata{width:100%;font-size:var(--standard-font-size);color:var(--text-primary);opacity:.75;text-align:left;flex-direction:row;align-items:flex-start;padding:0 1.25rem 1rem;display:flex}._8P49xa_featured-requirement,._8P49xa_featured-collaboration{flex-direction:column;width:100%;display:flex}._8P49xa_featured-metadata-detail{height:100%;padding-top:.4rem;font-weight:700}._8P49xa_featured-metadata-detail img{margin-right:.25rem}._8P49xa_corner-text{color:var(--ui-white);transform:translate(calc(2*var(--space)),calc(2*var(--space)));border-radius:1rem;padding:.5rem 1rem;font-size:.875rem;font-weight:700;position:absolute;box-shadow:0 0 .5rem #00000040}._8P49xa_corner-text._8P49xa_coming-soon-text{background:var(--blocks-primary)}._8P49xa_corner-text._8P49xa_preview-text{background:var(--text-primary)}");var w={featuredMetadata:"_8P49xa_featured-metadata",libraryItem:"_8P49xa_library-item",featuredTitle:"_8P49xa_featured-title",libraryItemDetial:"_8P49xa_library-item-detial",featuredRequirement:"_8P49xa_featured-requirement",previewText:"_8P49xa_preview-text",comingSoonText:"_8P49xa_coming-soon-text",hidden:"_8P49xa_hidden",cornerText:"_8P49xa_corner-text",libraryItemInsetImageContainer:"_8P49xa_library-item-inset-image-container",libraryItemFeatured:"_8P49xa_library-item-featured",disabled:"_8P49xa_disabled",featuredItem:"_8P49xa_featured-item",featuredCollaboration:"_8P49xa_featured-collaboration",libraryItemName:"_8P49xa_library-item-name",featuredImageContainer:"_8P49xa_featured-image-container",libraryItemImageContainerWrapper:"_8P49xa_library-item-image-container-wrapper",featuredMetadataDetail:"_8P49xa_featured-metadata-detail",libraryItemImage:"_8P49xa_library-item-image",libraryItemInsetImage:"_8P49xa_library-item-inset-image",featuredText:"_8P49xa_featured-text",featuredImage:"_8P49xa_featured-image",libraryItemImageContainer:"_8P49xa_library-item-image-container",large:"_8P49xa_large",featuredDescription:"_8P49xa_featured-description"};var Ao="./assets/icon-blocks-czd4m8e2.svg";var So="./assets/icon-micropython-qstw6yk4.svg";var Zo="./assets/icon-bluetooth-0v0grsw2.svg";var Ko="./assets/icon-internet-ce656mar.svg";import{jsx as g,jsxs as dr}from"preact/jsx-runtime";function ge(r){return r.featured?dr("div",{className:Kr(w.libraryItem,w.featuredItem,{[w.disabled]:r.disabled,[w.libraryItemFeatured]:r.featured}),onClick:!r.disabled&&r.onSelect,children:[dr("div",{className:w.featuredImageContainer,children:[r.disabled?g("div",{className:Kr(w.cornerText,w.comingSoonText),children:g(A,{id:"core.library.comingSoon",defaultMessage:"Coming Soon"})}):r.beta&&g("div",{className:Kr(w.cornerText,w.previewText),children:g(A,{id:"core.library.beta",defaultMessage:"Beta"})}),g("img",{className:w.featuredImage,src:r.image})]}),r.icon&&g("div",{className:w.libraryItemInsetImageContainer,children:g("img",{className:w.libraryItemInsetImage,src:r.icon})}),r.title?g("div",{className:Kr(w.libraryItemName,w.featuredTitle),children:r.title}):dr("div",{className:w.featuredText,children:[g("span",{className:w.libraryItemName,children:r.name}),g("br",{}),g("span",{className:w.featuredDescription,children:r.description})]}),(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired||r.collaborator)&&dr("div",{className:w.featuredMetadata,children:[g("div",{className:w.featuredRequirement,children:(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired)&&dr("div",{children:[g("div",{children:r.blocksRequired||r.micropythonRequired?g(A,{id:"core.library.programming",defaultMessage:"Programming"}):g(A,{id:"core.library.requires",defaultMessage:"Requires"})}),dr("div",{className:w.featuredMetadataDetail,children:[r.blocksRequired&&g("img",{src:Ao}),r.micropythonRequired&&g("img",{src:So}),r.bluetoothRequired&&g("img",{src:Zo}),r.internetRequired&&g("img",{src:Ko})]})]})}),g("div",{className:w.featuredCollaboration,children:r.collaborator&&dr("div",{children:[g("div",{children:g(A,{id:"core.library.collaboration",defaultMessage:"Collaboration with"})}),g("div",{className:w.featuredMetadataDetail,children:r.collaborator})]})})]})]}):dr("div",{className:Kr(w.libraryItem,{[w.large]:r.large}),onClick:r.onSelect,children:[g("div",{className:w.libraryItemImageContainerWrapper,children:g("div",{className:w.libraryItemImageContainer,children:g("img",{className:w.libraryItemImage,onPointerEnter:r.onMouseEnter,onPointerLeave:r.onMouseLeave,src:r.image})})}),g("span",{className:w.libraryItemName,children:r.name}),(r.copyright||r.author)&&g("span",{className:w.libraryItemDetial,children:r.copyright?`© ${r.copyright}`:r.author})]})}import{classNames as Ia}from"@blockcode/utils";p(".BETjoW_tag-button{background:var(--theme-primary);color:var(--ui-white);height:var(--library-filter-bar-height);border:0;border-radius:1.375rem;padding:.625rem 1rem}.BETjoW_active{background:var(--data-primary)}");var ye={active:"BETjoW_active",tagButton:"BETjoW_tag-button"};import{jsx as Na}from"preact/jsx-runtime";function xe({active:r,className:t,onClick:e,children:o}){return Na(ur,{className:Ia(t,ye.tagButton,{[ye.active]:r}),onClick:e,children:o})}p('.RgwUta_library-scroll-grid{background:var(--ui-secondary);height:auto;height:calc(100% - var(--library-header-height));flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;padding:.5rem;display:flex;overflow-y:auto}.RgwUta_library-scroll-grid.RgwUta_withFilterBar{height:calc(100% - var(--library-header-height) - var(--library-filter-bar-height) - 2rem)}.RgwUta_filter-bar{height:calc(var(--library-filter-bar-height) + 2rem);background-color:var(--theme-transparent);flex-direction:row;justify-content:flex-start;align-items:center;padding:0 1rem;display:flex}.RgwUta_filter-bar-item{margin-right:.75rem;font-size:.875rem}.RgwUta_filter{flex-grow:0}.RgwUta_filter-input{width:11.5rem;transition:all .2s}.RgwUta_filter-input:focus,.RgwUta_filter-input:not([data-value=""]){width:18.75rem}.RgwUta_divider{height:var(--library-filter-bar-height);border-right:1px dashed var(--ui-black-transparent);margin-right:.75rem;transform:scaleY(1.39)}.RgwUta_tag-wrapper{height:var(--library-filter-bar-height);flex-flow:wrap;display:flex;overflow:hidden}.RgwUta_spinner-wrapper{justify-content:center;align-items:center;width:100%;height:100%;display:flex}');var R={filter:"RgwUta_filter",filterBarItem:"RgwUta_filter-bar-item",libraryScrollGrid:"RgwUta_library-scroll-grid",withFilterBar:"RgwUta_withFilterBar",filterBar:"RgwUta_filter-bar",filterInput:"RgwUta_filter-input",tagWrapper:"RgwUta_tag-wrapper",spinnerWrapper:"RgwUta_spinner-wrapper",divider:"RgwUta_divider"};import{jsx as j,jsxs as Ge}from"preact/jsx-runtime";function Ta({items:r,title:t,filterable:e,filterPlaceholder:o,emptyMessage:i,tags:n,large:a,featured:l,onClose:u}){let m=mr(),c=Be("all"),v=Be(""),s=Be([]);za(()=>{if(!r)return;s.value=r.filter((h)=>{if(h.hidden)return!1;let _=v.value.toLowerCase(),L=E(h.name,m).toLowerCase();if(h.eegg)return h.eegg===_||L===_;if(!h.tags)return!0;if(c.value!=="all")return h.tags.includes(c.value);if(v.length===0)return!0;if(h.id&&h.id.toLowerCase().includes(_))return!0;if(L.includes(_))return!0;if(h.author){if(E(h.author,m).toLowerCase().includes(_))return!0}if(h.copyright){if(E(h.copyright,m).toLowerCase().includes(_))return!0}if(h.collaborator){if(E(h.collaborator,m).toLowerCase().includes(_))return!0}return!1})},[r,c.value,v.value]);let b=Ce((h)=>{ke(()=>{c.value="all",v.value=h.target.value})},[]),C=Ce(()=>{ke(()=>{c.value="all",v.value=""})},[]),y=Ce((h)=>()=>{ke(()=>{c.value=h,v.value=""})},[]);return Ge(_e,{fullScreen:!0,title:t,onClose:u,children:[(e||n)&&Ge("div",{className:R.filterBar,children:[e&&j(Mo,{className:ft(R.filterBarItem,R.filter),inputClassName:R.filterInput,query:v.value,placeholder:o,onChange:b,onClear:C}),e&&n&&j("div",{className:R.divider}),n&&Ge("div",{className:R.tagWrapper,children:[j(xe,{active:c==="all",className:ft(R.filterBarItem,R.tagButton),onClick:y("all"),children:j(A,{id:"core.library.all",defaultMessage:"All"})}),n.map((h,_)=>j(xe,{active:c===h.tag.toLowerCase(),className:ft(R.filterBarItem,R.tagButton),onClick:y(h.tag.toLowerCase()),children:h.label},_))]})]}),j("div",{className:ft(R.libraryScrollGrid,{[R.withFilterBar]:e||n}),children:s.value?.length?s.value.map((h,_)=>j(Ar,{menuItems:h.contextMenu,children:j(ge,{id:h.id??_,large:a,featured:l,disabled:h.disabled,beta:h.beta,icon:h.icon,image:h.image,name:h.name,title:h.title,description:h.description,author:h.author,copyright:h.copyright,bluetoothRequired:h.bluetoothRequired,internetRequired:h.internetRequired,collaborator:h.collaborator,onMouseEnter:h.onMouseEnter,onMouseLeave:h.onMouseLeave,onSelect:h.onSelect})},h.id??_)):j("div",{className:R.spinnerWrapper,children:i??""})})]})}import{classNames as Jo}from"@blockcode/utils";p("._0rCRoa_input-group{flex-direction:row;align-items:center;display:inline-flex}._0rCRoa_input-group-column{flex-direction:column;align-items:flex-start;display:inline-flex}._0rCRoa_input-group-column span{margin-bottom:.25rem}._0rCRoa_input-label,._0rCRoa_input-label-secondary{font-size:var(--standard-font-size);user-select:none;cursor:default;white-space:nowrap;margin-right:.5rem}._0rCRoa_input-label{font-weight:700}");var Jr={inputGroup:"_0rCRoa_input-group",inputLabel:"_0rCRoa_input-label",inputGroupColumn:"_0rCRoa_input-group-column",inputLabelSecondary:"_0rCRoa_input-label-secondary"};import{jsxs as Oo}from"preact/jsx-runtime";function Ea(r){return Oo("label",{className:Jo({[Jr.inputGroupColumn]:r.above,[Jr.inputGroup]:!r.above},r.className),children:[Oo("span",{className:Jo({[Jr.inputLabelSecondary]:r.secondary,[Jr.inputLabel]:!r.secondary}),children:[" ",r.text]}),r.children]})}import{classNames as qa}from"@blockcode/utils";p('._9Bnnoq_spinner{border-style:solid;border-width:.1875rem;border-color:var(--ui-white-transparent);border-radius:50%;width:1.25rem;height:1.25rem;display:inline-block;position:relative;box-sizing:content-box!important}._9Bnnoq_spinner:before,._9Bnnoq_spinner:after{content:"";border-radius:50%;width:1.25rem;height:1.25rem;display:block}._9Bnnoq_spinner:after{border:.1875rem solid #0000;border-top-color:var(--ui-white);animation:1.5s cubic-bezier(.4,.1,.4,1) infinite _9Bnnoq_spin;position:absolute;top:-.1875rem;left:-.1875rem}._9Bnnoq_small,._9Bnnoq_small:before,._9Bnnoq_small:after{width:.5rem;height:.5rem}._9Bnnoq_large,._9Bnnoq_large:before,._9Bnnoq_large:after{width:2.5rem;height:2.5rem}@keyframes _9Bnnoq_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._9Bnnoq_spinner._9Bnnoq_success{border-color:var(--blocks-transparent)}._9Bnnoq_spinner._9Bnnoq_success:after{border-top-color:var(--blocks-primary)}._9Bnnoq_spinner._9Bnnoq_warn{border-color:var(--error-transparent)}._9Bnnoq_spinner._9Bnnoq_warn:after{border-top-color:var(--error-primary)}._9Bnnoq_spinner._9Bnnoq_info{border-color:var(--ui-white-transparent)}._9Bnnoq_spinner._9Bnnoq_info:after{border-top-color:var(--ui-white)}._9Bnnoq_spinner._9Bnnoq_primary{border-color:var(--theme-transparent)}._9Bnnoq_spinner._9Bnnoq_primary:after{border-top-color:var(--theme-primary)}');var Or={spinner:"_9Bnnoq_spinner",info:"_9Bnnoq_info",spin:"_9Bnnoq_spin",warn:"_9Bnnoq_warn",success:"_9Bnnoq_success",small:"_9Bnnoq_small",large:"_9Bnnoq_large",primary:"_9Bnnoq_primary"};import{jsx as Ra}from"preact/jsx-runtime";function Da({className:r,level:t,small:e,large:o}){return Ra("div",{className:qa(r,Or.spinner,Or[t||"info"],{[Or.small]:e,[Or.large]:o})})}import{useCallback as Ua}from"preact/hooks";import{classNames as Wa}from"@blockcode/utils";p(".G1JGNa_toggle-button{filter:saturate(0);min-width:calc(2rem + 2px);height:calc(2rem + 2px);margin-left:-1px;padding:.375rem!important}.G1JGNa_toggle-button:disabled{cursor:not-allowed;filter:grayscale()}.G1JGNa_toggle-button.G1JGNa_audo-width{width:auto}.G1JGNa_button-icon{margin:auto}.G1JGNa_toggle-button-first{border-top-right-radius:0;border-bottom-right-radius:0}.G1JGNa_toggle-button-middle{border-radius:0}.G1JGNa_toggle-button-last{border-top-left-radius:0;border-bottom-left-radius:0}.G1JGNa_toggle-button-actived{border:1px solid var(--theme-highlight);background:var(--theme-light-transparent);filter:none;z-index:1}.G1JGNa_button-text{flex:auto}");var rr={toggleButton:"G1JGNa_toggle-button",buttonIcon:"G1JGNa_button-icon",audoWidth:"G1JGNa_audo-width",toggleButtonLast:"G1JGNa_toggle-button-last",buttonText:"G1JGNa_button-text",toggleButtonFirst:"G1JGNa_toggle-button-first",toggleButtonMiddle:"G1JGNa_toggle-button-middle",toggleButtonActived:"G1JGNa_toggle-button-actived"};import{jsx as bt,Fragment as Aa}from"preact/jsx-runtime";function Ma({disabled:r,items:t,value:e,onChange:o}){let i=t.length-1;return bt(Aa,{children:t.map((n,a)=>bt(ur,{disabled:n.disabled||r,className:Wa(rr.toggleButton,{[rr.autoWidth]:n.title&&!n.icon,[rr.toggleButtonFirst]:a===0,[rr.toggleButtonMiddle]:a>0&&a<i,[rr.toggleButtonLast]:a===i,[rr.toggleButtonActived]:!r&&e===n.value}),onClick:Ua(()=>o(n.value),[o]),children:n.icon?bt("img",{src:n.icon,className:rr.buttonIcon,title:E(n.title)}):bt("div",{className:rr.buttonText,children:E(n.title)})},a))})}var Lr=typeof Reflect=="object"?Reflect:null,Vo=Lr&&typeof Lr.apply=="function"?Lr.apply:function(r,t,e){return Function.prototype.apply.call(r,t,e)},wt;Lr&&typeof Lr.ownKeys=="function"?wt=Lr.ownKeys:Object.getOwnPropertySymbols?wt=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:wt=function(r){return Object.getOwnPropertyNames(r)};function Sa(r){console&&console.warn&&console.warn(r)}var Po=Number.isNaN||function(r){return r!==r};function f(){f.init.call(this)}f.EventEmitter=f;f.prototype._events=void 0;f.prototype._eventsCount=0;f.prototype._maxListeners=void 0;var Ho=10;function _t(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return Ho},set:function(r){if(typeof r!="number"||r<0||Po(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ho=r}});f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};f.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Po(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Xo(r){return r._maxListeners===void 0?f.defaultMaxListeners:r._maxListeners}f.prototype.getMaxListeners=function(){return Xo(this)};f.prototype.emit=function(r){for(var t=[],e=1;e<arguments.length;e++)t.push(arguments[e]);var o=r==="error",i=this._events;if(i!==void 0)o=o&&i.error===void 0;else if(!o)return!1;if(o){var n;if(t.length>0&&(n=t[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var l=i[r];if(l===void 0)return!1;if(typeof l=="function")Vo(l,this,t);else for(var u=l.length,m=ri(l,u),e=0;e<u;++e)Vo(m[e],this,t);return!0};function Qo(r,t,e,o){var i,n,a;if(_t(e),n=r._events,n===void 0?(n=r._events=Object.create(null),r._eventsCount=0):(n.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),n=r._events),a=n[t]),a===void 0)a=n[t]=e,++r._eventsCount;else if(typeof a=="function"?a=n[t]=o?[e,a]:[a,e]:o?a.unshift(e):a.push(e),i=Xo(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=t,l.count=a.length,Sa(l)}return r}f.prototype.addListener=function(r,t){return Qo(this,r,t,!1)};f.prototype.on=f.prototype.addListener;f.prototype.prependListener=function(r,t){return Qo(this,r,t,!0)};function Za(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Yo(r,t,e){var o={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=Za.bind(o);return i.listener=e,o.wrapFn=i,i}f.prototype.once=function(r,t){return _t(t),this.on(r,Yo(this,r,t)),this};f.prototype.prependOnceListener=function(r,t){return _t(t),this.prependListener(r,Yo(this,r,t)),this};f.prototype.removeListener=function(r,t){var e,o,i,n,a;if(_t(t),o=this._events,o===void 0)return this;if(e=o[r],e===void 0)return this;if(e===t||e.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[r],o.removeListener&&this.emit("removeListener",r,e.listener||t));else if(typeof e!="function"){for(i=-1,n=e.length-1;n>=0;n--)if(e[n]===t||e[n].listener===t){a=e[n].listener,i=n;break}if(i<0)return this;i===0?e.shift():Ka(e,i),e.length===1&&(o[r]=e[0]),o.removeListener!==void 0&&this.emit("removeListener",r,a||t)}return this};f.prototype.off=f.prototype.removeListener;f.prototype.removeAllListeners=function(r){var t,e,o;if(e=this._events,e===void 0)return this;if(e.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):e[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete e[r]),this;if(arguments.length===0){var i=Object.keys(e),n;for(o=0;o<i.length;++o)n=i[o],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=e[r],typeof t=="function")this.removeListener(r,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(r,t[o]);return this};function $o(r,t,e){var o=r._events;if(o===void 0)return[];var i=o[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?Ja(i):ri(i,i.length)}f.prototype.listeners=function(r){return $o(this,r,!0)};f.prototype.rawListeners=function(r){return $o(this,r,!1)};f.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):jo.call(r,t)};f.prototype.listenerCount=jo;function jo(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?wt(this._events):[]};function ri(r,t){for(var e=new Array(t),o=0;o<t;++o)e[o]=r[o];return e}function Ka(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function Ja(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}var x2=f.prototype;var Oa=new TextEncoder;class ti extends f{constructor(r){super();this._port=r,this._reader=null,r._serial=this}get port(){return this._port}dispose(){this.close().then(()=>{this._port=null})}getInfo(){return this.port.getInfo()}open(r){return new Promise((t,e)=>{this.port.open(r).then(()=>{let o=()=>{this._reader=this.port.readable.getReader(),this._reader.read().then(({value:i,done:n})=>{if(this._reader.releaseLock(),i)this.emit("data",i);if(n);else o()}).catch(()=>{this.emit("disconnect")})};o(),this.emit("connect"),t()}).catch(e)})}close(){return new Promise((r,t)=>{if(this._reader)this._reader.cancel().then(()=>this.port.close()).then(r).catch(t);else this._reader=null,this.port.close().then(r).catch(t)})}write(r,t="text"){return new Promise((e,o)=>{let i=this.port.writable.getWriter();r=t==="text"?Oa.encode(r):r,i.write(r).then(()=>{i.releaseLock(),e()}).catch(o)})}}import{base64ToUint8Array as Va}from"@blockcode/utils";class ei extends f{constructor(r){super();this._server=r}get device(){return this.server.device}get server(){return this._server}dispose(){this.disconnect(),this._server=null}getInfo(){return{id:this.device.id,name:this.device.name}}connect(){this.server.connect().then(()=>{this.device.addEventListener("gattserverdisconnected",()=>{this.emit("disconnect"),this.disconnect()}),this.emit("connect")})}disconnect(){this.server.disconnect()}isConnected(){return this.server?.connected}startNotifications(r,t){return this._server.getPrimaryService(r).then((e)=>e.getCharacteristic(t)).then((e)=>{e.stopNotifications(),e.oncharacteristicvaluechanged=(o)=>{let i=o.target.value,n=new Uint8Array(i.buffer);this.emit("data",n)},e.startNotifications()})}read(r,t,e=!1){return this._server.getPrimaryService(r).then((o)=>o.getCharacteristic(t)).then((o)=>{if(e)o.stopNotifications(),o.oncharacteristicvaluechanged=(i)=>{let n=i.target.value,a=new Uint8Array(n.buffer);this.emit("data",a)},o.startNotifications();return o.readValue()}).then((o)=>({message:new Uint8Array(o.buffer)})).catch((o)=>{this.handleDisconnectError(o)})}write(r,t,e,o=null,i=null){let n=o==="base64"?Va(e):e;return this._server.getPrimaryService(r).then((a)=>a.getCharacteristic(t)).then((a)=>{if(i&&a.writeValueWithResponse)return a.writeValueWithResponse(n);if(a.writeValueWithoutResponse)return a.writeValueWithoutResponse(n);return a.writeValue(n)}).catch((a)=>{this.handleDisconnectError(err)})}handleDisconnectError(r){console.error(r),this.disconnect()}}export{un as useProjectContext,Li as useLocalesContext,Wt as useAppContext,Ze as translate,ii as themeColors,Ei as showSplash,It as showHotkey,or as setModified,Vi as setMacosMenuBarStyled,Gi as setLanguage,Ft as setHotkey,$e as setFile,je as setAsset,Ki as setAppState,Ri as setAlert,$i as renameProject,Ji as openUserStorage,Si as openTab,Ui as openPromptModal,an as openProject,Mi as openLayout,rt as openFile,Ot as openAsset,E as maybeTranslate,Yi as isModifyType,qi as hideSplash,rn as getFile,on as getAsset,tn as delFile,nn as delAsset,Pe as delAlert,Oi as closeUserStorage,Wi as closePromptModal,ln as closeProject,Ai as closeLayout,Nt as clearHotkeys,Zi as addTabs,ki as addLocalesMessages,ji as addFile,en as addAsset,Di as addAlertConfig,lt as Tooltip,Ma as ToggleButtons,A as Text,Da as Spinner,ti as Serial,cn as ProjectProvider,hi as Numeric,M as ModifyTypes,_e as Modal,Mr as MenuSection,Wr as MenuItem,Ur as Menu,Fi as LocalesProvider,ge as LibraryItem,Ta as Library,Ea as Label,d as Keys,me as Input,fe as IconSelectorItem,_a as IconSelector,va as Dropdown,vi as DateTime,Ar as ContextMenu,ur as Button,Xn as BufferedInput,ei as BLE,Hi as AppProvider,Jn as ActionButton};
