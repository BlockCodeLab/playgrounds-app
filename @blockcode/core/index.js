function v(r){let o=globalThis.document,i=o.createElement("style");i.appendChild(o.createTextNode(r)),o.head.append(i)}v(":root{--ui-primary:#e5f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-light:#c3efe2;--ui-transparent:#fff0;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-black-transparent:#00000026;--modal-overlay:color(from var(--theme-primary)srgb r g b/.9);--theme-primary:#4c97ff;--theme-secondary:#4280d7;--theme-tertiary:#3373cc;--theme-transparent:color(from var(--theme-primary)srgb r g b/.35);--theme-light-transparent:color(from var(--theme-primary)srgb r g b/.15);--theme-highlight:#8abbff;--text-primary:#575e75;--text-transparent:color(from var(--text-primary)srgb r g b/.75);--warn-primary:#ff8c1a;--warn-light:#ffb366;--warn-transparent:color(from var(--warn-primary)srgb r g b/.25);--error-primary:#ff661a;--error-secondary:#e64d00;--blocks-primary:#0fbd8c;--blocks-secondary:#0da57a;--blocks-tertiary:#0b8e69;--blocks-transparent:color(from var(--blocks-primary)srgb r g b/.35);--blocks-motion-primary:#4c97ff;--blocks-looks-primary:#96f;--blocks-sounds-primary:#cf63cf;--blocks-event-primary:;--blocks-control-primary:#ffab19;--blocks-sensing-primary:#5cb1d6;--blocks-operators-primary:#59c059;--blocks-variables-primary:#ff8c1a;--blocks-lists-primary:#ff661a;--blocks-monitor-primary:#855cd6;--blocks-myblocks-primary:#ff6680;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:970px;--min-height:720px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{width:100%;height:100%;min-width:var(--min-width);min-height:var(--min-height);margin:0}*{box-sizing:border-box;user-select:none}");v("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var vt={ui:{primary:"#E5F0FF",secondary:"#E9F1FC",tertiary:"#D9E3F2",light:"#C3EFE2",theme:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",highlight:"#8ABBFF"},text:{primary:"#575E75"},warn:{primary:"#FF8C1A",light:"#FFB366"},error:{primary:"#FF661A",secondary:"#E64D00"}},blocks:{primary:"#0FBD8C",secondary:"#0DA57A",tertiary:"#0B8E69",quaternary:"#0B8E69",motion:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",quaternary:"#3373CC"},looks:{primary:"#9966FF",secondary:"#855CD6",tertiary:"#774DCB",quaternary:"#774DCB"},sounds:{primary:"#CF63CF",secondary:"#C94FC9",tertiary:"#BD42BD",quaternary:"#BD42BD"},events:{primary:"#FFBF00",secondary:"#E6AC00",tertiary:"#CC9900",quaternary:"#CC9900"},control:{primary:"#FFAB19",secondary:"#EC9C13",tertiary:"#CF8B17",quaternary:"#CF8B17"},sensing:{primary:"#5CB1D6",secondary:"#47A8D1",tertiary:"#2E8EB8",quaternary:"#2E8EB8"},operators:{primary:"#59C059",secondary:"#46B946",tertiary:"#389438",quaternary:"#389438"},variables:{primary:"#FF8C1A",secondary:"#FF8000",tertiary:"#DB6E00",quaternary:"#DB6E00"},lists:{primary:"#FF661A",secondary:"#FF5500",tertiary:"#E64D00",quaternary:"#E64D00"},myblocks:{primary:"#FF6680",secondary:"#FF4D6A",tertiary:"#FF3355",quaternary:"#FF3355"},monitor:{primary:"#855CD6",secondary:"#7547D1",tertiary:"#7547D1",quaternary:"#7547D1"}}};import{createContext as zt}from"preact";import{useContext as Nt}from"preact/hooks";import{computed as Oi,effect as qt,signal as Yi}from"@preact/signals";var ar,Go=function(r,o){return Go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a])},Go(r,o)},Ui=function(r){function o(i,t){var a=r.call(this,"Translation failed")||this;return a.id=i,a.language=t,a}return function(i,t){if(typeof t!="function"&&t!==null)throw TypeError("Class extends value "+t+" is not a constructor or null");function a(){this.constructor=i}Go(i,t),i.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}(o,r),o.is=function(i){return i instanceof o},o}(Error),bt=function(){function r(o){this.input=o,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return r.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},r.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},r}();(function(r){r[r.Plural=0]="Plural",r[r.Select=1]="Select",r[r.Text=2]="Text",r[r.Variable=3]="Variable"})(ar||(ar={}));var ft=["{","}",","],wt=function(){function r(o){this.input=new bt(o)}return r.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},r.prototype.skip=function(o){o!==this.input.value&&this.input.croak(),this.input.next()},r.prototype.readWhile=function(o){for(var i="";!this.input.done&&o(this.input.value);)i+=this.input.value,this.input.next();return i},r.prototype.readVariable=function(){this.skip("{");var o=this.readWhile(function(t){return!function(a){return ft.includes(a)}(t)}).trim();if(o.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:ar.Variable,value:o};this.skip(",");var i=this.readVariableType();return{options:this.readVariableOptions(),type:i,value:o}},r.prototype.readText=function(){return{type:ar.Text,value:this.readWhile(function(o){return o!=="{"&&o!=="}"})}},r.prototype.readVariableType=function(){var o=this.readWhile(function(i){return i!==","}).trim();return o==="plural"?ar.Plural:o==="select"?ar.Select:void this.input.croak()},r.prototype.readVariableOptions=function(){this.skip(",");for(var o={};this.input.value!=="}";)o[this.readText().value.trim()]=this.readExpression();return this.skip("}"),o},r.prototype.readExpression=function(){var o=[];for(this.skip("{");this.input.value!=="}";)o.push(this.next());return this.skip("}"),o},r}();function _t(r,o,i){for(var t=new wt(o),a=[],n=function(e){var{options:c,type:l,value:u}=e;if(l!==ar.Variable)if(c)if(l!==ar.Select)try{a.concat(c[new Intl.PluralRules(r).select(i[u])].map(n))}catch(d){a.concat(c.other.map(n))}else a.concat((c[i[u]]||c.other).map(n));else a.push(u);else a.push(i[u])};!t.input.done;)n(t.next());return a}var sr=function(r,o){r===void 0&&(r="en"),o===void 0&&(o=[]);var i=this;this.memo={},this.onError=console.error,this.formatDate=function(a,n){return new Intl.DateTimeFormat(i.language,n).format(a)},this.formatNumber=function(a,n){return new Intl.NumberFormat(i.language,n).format(a)},this.translate=function(a,n){n===void 0&&(n={});var e=i.getMessageById(a,n.defaultMessage);if(typeof e=="string")try{return _t(i.language,e,n).join("")}catch(c){i.onError(new Ui(a,i.language))}return e+""},this.getMessageById=function(a,n){if(!i.memo[a]){var e=i.messages[a];e===void 0&&(e=a.split(".").reduce(function(c,l){return c?c[l]:void 0},i.messages)),typeof e!="string"&&(i.onError(new Ui(a,i.language)),e=n||a),i.memo[a]=e}return i.memo[a]};var t=o.find(function(a){return a.language===r});this.language=r,this.messages=t?t.messages:{}};import{createContext as xt,h as Dr,Fragment as Fo}from"preact";import{useState as Ct,useEffect as st,useContext as Wi}from"preact/hooks";function Io(r,o){var i={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&o.indexOf(t)<0&&(i[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(t=Object.getOwnPropertySymbols(r);a<t.length;a++)o.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(r,t[a])&&(i[t[a]]=r[t[a]])}return i}var Lo=xt({language:"",locales:[],setLanguage:function(){},translator:new sr}),Zi=function(r){var{children:o,language:i,locales:t,onError:a}=r,n=Ct(i);st(function(){n[1](i)},[i]);var e=new sr(n[0],t);return a&&(e.onError=a),Dr(Lo.Provider,{value:{language:n[0],locales:t,setLanguage:n[1],translator:e}},o)};function Si(r){var o=Wi(Lo);return r&&r!==o.language?new sr(r):o.translator}var gt=function(r){var{language:o,value:i}=r,t=Io(r,["children","language","value"]);return Dr(Fo,null,Si(o).formatDate(i,t))},kt=function(r){var{language:o,value:i}=r,t=Io(r,["children","language","value"]);return Dr(Fo,null,Si(o).formatNumber(i,t))},M=function(r){var{html:o,id:i,tagName:t}=r,a=t===void 0?"span":t,n=Io(r,["children","html","id","tagName"]),e=Wi(Lo).translator.translate(i,n);return o?Dr(a,{dangerouslySetInnerHTML:{__html:e}}):Dr(Fo,null,e)};import{setUserLanguage as yt,getUserLanguage as Bt}from"@blockcode/utils";var{DisplayNames:zo,Locale:Gt}=window.Intl,Ki="en",Mi=navigator.language,$r=new Map;function Ri(r){let o=new Gt(r),i=o.textInfo||o.getTextInfo();return i&&i.direction==="rtl"}var Ft={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function Ai(){let r=Bt()||Mi;return r=Ft[r]||r,$r.has(r)?r:Ki}function Ji(r){document.querySelector("html").lang=r,yt(r)}var It=new zo([Ki],{type:"language"}),Lt=new zo([Mi],{type:"language"});function jr(r,o={}){let i=new zo([r],{type:"language"});return $r.set(r,{languageName:i.of(r),languageNameByDefault:It.of(r),languageNameByBrowser:Lt.of(r)}),{language:r,messages:o}}var Vi={"core.modal.back":"Back","core.library.all":"All","core.library.beta":"Beta","core.library.comingSoon":"Coming Soon","core.library.requires":"Requires","core.library.programming":"Programming","core.library.collaboration":"Collaboration with"};var Xi={"core.modal.back":"返回","core.library.all":"所有","core.library.beta":"测试版","core.library.comingSoon":"敬请期待","core.library.requires":"系统需求","core.library.programming":"编程语言","core.library.collaboration":"合作者"};var Hi={"core.modal.back":"返迴","core.library.all":"所有","core.library.beta":"測試版","core.library.comingSoon":"敬請期待","core.library.requires":"係統需求","core.library.programming":"編程語言","core.library.collaboration":"合作者"};import{jsx as Qi}from"preact/jsx-runtime";var ro=Yi([jr("en",Vi),jr("zh-Hans",Xi),jr("zh-Hant",Hi)]);function Dt(r){ro.value=ro.value.map((o)=>({language:o.language,messages:Object.assign(o.messages,r[o.language]??{})}))}var gr=Yi(Ai()),Tt=Oi(()=>Ri(gr.value)),Ut=Oi(()=>new sr(gr.value,ro.value));qt(()=>Ji(gr.value));function Wt(r){gr.value=r}function Ei(r,o,i={}){return Ut.value.translate(r,{defaultMessage:o,...i})}function q(r){if(!r?.props)return r;if(r.props.children)return[].concat(r.props.children).map((o)=>q(o)).join("");return Ei(r.props.id,r.props)}var Pi=zt(),Zt=()=>Nt(Pi);function St({children:r}){return Qi(Pi.Provider,{value:{language:gr,languageNames:$r,isRtl:Tt},children:Qi(Zi,{locales:ro.value,language:gr.value,onError:Kt,children:r})})}function Kt(r){}import{createContext as Mt}from"preact";import{useContext as Rt}from"preact/hooks";import{batch as r1,signal as K}from"@preact/signals";import{isMac as o1,nanoid as At}from"@blockcode/utils";import{isMac as O}from"@blockcode/utils";var h={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Delete",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},$i={[h.ESC]:O?"⎋":"Esc",[h.F1]:"F1",[h.F2]:"F2",[h.F3]:"F3",[h.F4]:"F4",[h.F5]:"F5",[h.F6]:"F6",[h.F7]:"F7",[h.F8]:"F8",[h.F9]:"F9",[h.F10]:"F10",[h.F11]:"F11",[h.F12]:"F12",[h.D1]:"1",[h.D2]:"2",[h.D3]:"3",[h.D4]:"4",[h.D5]:"5",[h.D6]:"6",[h.D7]:"7",[h.D8]:"8",[h.D9]:"9",[h.D0]:"0",[h.TAB]:O?"⇥":"Tab",[h.DELETE]:O?"⌫":"Backspace",[h.RETURN]:O?"↩":"Enter",[h.A]:"A",[h.B]:"B",[h.C]:"C",[h.D]:"D",[h.E]:"E",[h.F]:"F",[h.G]:"G",[h.H]:"H",[h.I]:"I",[h.J]:"J",[h.K]:"K",[h.L]:"L",[h.M]:"M",[h.N]:"N",[h.O]:"O",[h.P]:"P",[h.Q]:"Q",[h.R]:"R",[h.S]:"S",[h.T]:"T",[h.U]:"U",[h.V]:"V",[h.W]:"W",[h.X]:"X",[h.Y]:"Y",[h.Z]:"Z",[h.UP]:"↑",[h.DOWN]:"↓",[h.LEFT]:"←",[h.RIGHT]:"→",[h.SHIFT]:O?"⇧":"Shift",[h.CONTROL]:O?"⌃":"Ctrl",[h.OPTION]:O?"⌥":"Alt",[h.COMMAND]:O?"⌘":"⊞"},ji={[h.CONTROL]:0,[h.OPTION]:1,[h.SHIFT]:2,[h.COMMAND]:3},No=new Map;function qo(r,o){No.set(r.join("-"),o)}function Do(r){let o=[];if(typeof r==="string")r=r.split("-");return r.forEach((i)=>{if(ji.hasOwnProperty(i))o[ji[i]]=$i[i];else o.push($i[i])}),o.filter((i)=>i).join(O?"":"+")}function To(){No.clear()}window.addEventListener("keydown",(r)=>{No.forEach((o,i)=>{let t=(a)=>{if(a===h.CONTROL&&r.ctrlKey)return!0;if(a===h.OPTION&&r.altKey)return!0;if(a===h.SHIFT&&r.shiftKey)return!0;if(a===h.COMMAND&&r.metaKey)return!0;if(a===r.code)return!0;return!1};if(typeof i==="string")i=i.split("-");if(i.every(t)&&typeof o==="function"){r.preventDefault();try{o()}catch(a){}}})});import{jsx as aa}from"preact/jsx-runtime";var io=K(!1);function Jt(){io.value=!0}function Vt(){io.value=!1}var Y=K([]),Uo={};function Xt(r,o){Uo[r]=o}function Ht(...r){let o,i,t=0;for(let a of r){if(typeof a==="string")o=a;if(typeof a==="object")i=a;if(typeof a==="number")t=a}if(o&&Uo[o])i=Object.assign({},Uo[o],i??{});if(!i)return;if(!i.id)i.id=At();if(Y.value.find((a)=>i.id===a.id))Y.value=Y.value.map((a)=>{if(a.id===i.id)return Object.assign(a,i);return a});else Y.value=Y.value.concat(i);if(t>0)setTimeout(()=>i1(i.id),t);return i.id}function i1(r){Y.value=Y.value.filter((o)=>o.id!==r)}var to=K(null);function Qt(r){to.value=r}function Ot(){to.value=null}var Wo=K(null),Zo=K(null),ao=K(-1),So=K(null),Ko=K(null),Mo=K(null),oo=K(null);function Yt(r){r1(()=>{Wo.value=r.menuItems,Zo.value=r.tabs,ao.value=r.tabIndex??0,So.value=r.docks,Ko.value=r.panes,Mo.value=r.tutorials})}function Et(){To(),r1(()=>{io.value=!1,Y.value.length=0,to.value=null,Wo.value=null,Zo.value=null,ao.value=-1,So.value=null,Ko.value=null,Mo.value=null,oo.value=null})}function Pt(r){ao.value=r}function $t(r){r.value=state.tabs.value.concat(r)}function jt(r,o){if(typeof r==="string")r={[r]:o};oo.value=Object.assign({},oo.value??{},r)}var Ro=K(!1);function ra(){Ro.value=!0}function oa(){Ro.value=!1}var t1=K(o1&&window.electron);function ia(r){if(o1&&window.electron)t1.value=r}var a1=Mt(),Ao=()=>Rt(a1);function ta({children:r}){return aa(a1.Provider,{value:{splashVisible:io,alerts:Y,prompt:to,menuItems:Wo,tabs:Zo,tabIndex:ao,docks:So,panes:Ko,tutorials:Mo,appState:oo,userStorageVisible:Ro,macosMenuBarStyled:t1},children:r})}import{createContext as na}from"preact";import{useContext as ea}from"preact/hooks";import{batch as E,computed as eo,signal as P}from"@preact/signals";import{nanoid as Jo}from"@blockcode/utils";function Tr(r,o,i){if(r=r.trim(),i.find((t)=>o!==t.id&&t.name===r)){let t=r.replace(/\d+$/,""),a=new RegExp(`${t}(\\d+)$`),n=0;for(let e of i){if(o===e.id)continue;let c=a.exec(e.name);if(c){let l=parseInt(c[1]);if(l>n)n=l}}r=`${t}${n+1}`}return r}import{jsx as Ca}from"preact/jsx-runtime";var Z={Saved:0,Rename:1,AddFile:2,SetFile:3,DelFile:4,AddAsset:5,SetAsset:6,DelAsset:7,SetMeta:8},Ur=P(null);function la(r,o){if(typeof r==="string")r={[r]:o};E(()=>{Ur.value=Object.assign({},Ur.value??{},r),$(Z.SetMeta)})}var Vo=P(null),Xo=P(null),kr=P(0);function $(r=Z.Saved){if(r===Z.Saved)kr.value=Z.Saved;else kr.value=(Math.floor(kr.value/10)+1)*10+r}function ca(r=Z.Saved){return kr.value%10===r}var lo=P("");function da(r){lo.value=r,$(Z.Rename)}var k=P(null),V=P(null),co=eo(()=>k.value?.findIndex((r)=>r.id===V.value)??-1),Ho=eo(()=>k.value?.find((r)=>r.id===V.value)??null);function no(r){V.value=r}function ua(r){if(!r.id)r.id=Jo();if(k.value.find((o)=>o.id===r.id)){e1(r);return}r.name=Tr(r.name,r.id,k.value),E(()=>{k.value.push(r),V.value=r.id,$(Z.AddFile)})}function e1(r){let o=Ho.value,i=co.value;if(r.id)o=k.value.find((t)=>t.id===r.id),i=k.value.findIndex((t)=>t.id===r.id);if(!o)return;if(r.name)r.name=Tr(r.name,o.id,k.value);E(()=>{k.value[i]=Object.assign(o,r),$(Z.SetFile)})}function ha(r){if(co===r)return k.value[r];if(V.value!==r)return k.value.find((o)=>o.id===r);return Ho}function ma(r){let o=co.value;if(V.value!==r)o=k.value.findIndex((i)=>i.id===r);if(o===-1)return;E(()=>{if(r===V.value)if(o+1<k.value.length)no(k.value[o+1]?.id);else if(o-1>-1)no(k.value[o-1]?.id);else no(null);k.value.splice(o,1),$(Z.DelFile)})}var I=P(null),nr=P(null),uo=eo(()=>I.value?.findIndex((r)=>r.id===nr.value)??-1),Qo=eo(()=>I.value?.find((r)=>r.id===nr.value)??null);function Oo(r){nr.value=r}function pa(r){if(!r.id)r.id=Jo();if(I.value.find((o)=>o.id===r.id)){l1(r);return}r.name=Tr(r.name,r.id,I.value),E(()=>{I.value.push(r),Oo(r.id),$(Z.AddAsset)})}function l1(r){let o=Qo.value,i=uo.value;if(r.id)o=I.value.find((t)=>t.id===r.id),i=I.value.findIndex((t)=>t.id===r.id);if(!o)return;if(r.name)r.name=Tr(r.name,o.id,I.value);E(()=>{I.value[i]=Object.assign(o,r),$(Z.SetAsset)})}function va(r){if(uo===r)return I.value[r];if(nr.value!==r)return I.value.find((o)=>o.id===r);return Qo}function ba(r){let o=uo.value;if(nr.value!==r)o=I.value.findIndex((i)=>i.id===r);if(o===-1)return;E(()=>{Oo(null),I.value.splice(o,1),$(Z.DelAsset)})}var n1=()=>(r)=>Object.assign(r,{name:q(r.name)});function fa(r){E(()=>{Ur.value=r.meta,Vo.value=r.id,Xo.value=r.key??Jo(),lo.value=q(r.name),k.value=r.files?.map(n1())??[],V.value=r.fileId,I.value=r.assets?.map(n1())??[],nr.value=r.assetId})}function wa(){E(()=>{Ur.value=null,Vo.value=null,Xo.value=null,lo.value="",k.value=null,V.value=null,I.value=null,nr.value=null,kr.value=0})}var c1=na(),_a=()=>ea(c1);function xa({children:r}){return Ca(c1.Provider,{value:{meta:Ur,id:Vo,key:Xo,name:lo,file:Ho,files:k,fileId:V,fileIndex:co,asset:Qo,assets:I,assetId:nr,assetIndex:uo,modified:kr},children:r})}import{useSignal as G1}from"@preact/signals";import{classNames as mi,sleepMs as ja}from"@blockcode/utils";import{useEffect as Qa,useId as Oa,useRef as Ya}from"preact/hooks";import{classNames as Ea}from"@blockcode/utils";function s(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var o=r.ownerDocument;return o?o.defaultView||window:window}return r}function yr(r){var o=s(r).Element;return r instanceof o||r instanceof Element}function G(r){var o=s(r).HTMLElement;return r instanceof o||r instanceof HTMLElement}function Br(r){if(typeof ShadowRoot>"u")return!1;var o=s(r).ShadowRoot;return r instanceof o||r instanceof ShadowRoot}var{max:d1,min:u1,round:j}=Math;function Gr(){var r=navigator.userAgentData;if(r!=null&&r.brands&&Array.isArray(r.brands))return r.brands.map(function(o){return o.brand+"/"+o.version}).join(" ");return navigator.userAgent}function Yo(){return!/^((?!chrome|android).)*safari/i.test(Gr())}function er(r,o,i){if(o===void 0)o=!1;if(i===void 0)i=!1;var t=r.getBoundingClientRect(),a=1,n=1;if(o&&G(r))a=r.offsetWidth>0?j(t.width)/r.offsetWidth||1:1,n=r.offsetHeight>0?j(t.height)/r.offsetHeight||1:1;var e=yr(r)?s(r):window,c=e.visualViewport,l=!Yo()&&i,u=(t.left+(l&&c?c.offsetLeft:0))/a,d=(t.top+(l&&c?c.offsetTop:0))/n,p=t.width/a,b=t.height/n;return{width:p,height:b,top:d,right:u+p,bottom:d+b,left:u,x:u,y:d}}function Wr(r){var o=s(r),i=o.pageXOffset,t=o.pageYOffset;return{scrollLeft:i,scrollTop:t}}function Eo(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Po(r){if(r===s(r)||!G(r))return Wr(r);else return Eo(r)}function L(r){return r?(r.nodeName||"").toLowerCase():null}function rr(r){return((yr(r)?r.ownerDocument:r.document)||window.document).documentElement}function $o(r){return er(rr(r)).left+Wr(r).scrollLeft}function R(r){return s(r).getComputedStyle(r)}function mr(r){var o=R(r),i=o.overflow,t=o.overflowX,a=o.overflowY;return/auto|scroll|overlay|hidden/.test(i+a+t)}function sa(r){var o=r.getBoundingClientRect(),i=j(o.width)/r.offsetWidth||1,t=j(o.height)/r.offsetHeight||1;return i!==1||t!==1}function jo(r,o,i){if(i===void 0)i=!1;var t=G(o),a=G(o)&&sa(o),n=rr(o),e=er(r,a,i),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};if(t||!t&&!i){if(L(o)!=="body"||mr(n))c=Po(o);if(G(o))l=er(o,!0),l.x+=o.clientLeft,l.y+=o.clientTop;else if(n)l.x=$o(n)}return{x:e.left+c.scrollLeft-l.x,y:e.top+c.scrollTop-l.y,width:e.width,height:e.height}}function Zr(r){var o=er(r),i=r.offsetWidth,t=r.offsetHeight;if(Math.abs(o.width-i)<=1)i=o.width;if(Math.abs(o.height-t)<=1)t=o.height;return{x:r.offsetLeft,y:r.offsetTop,width:i,height:t}}function pr(r){if(L(r)==="html")return r;return r.assignedSlot||r.parentNode||(Br(r)?r.host:null)||rr(r)}function ho(r){if(["html","body","#document"].indexOf(L(r))>=0)return r.ownerDocument.body;if(G(r)&&mr(r))return r;return ho(pr(r))}function Fr(r,o){var i;if(o===void 0)o=[];var t=ho(r),a=t===((i=r.ownerDocument)==null?void 0:i.body),n=s(t),e=a?[n].concat(n.visualViewport||[],mr(t)?t:[]):t,c=o.concat(e);return a?c:c.concat(Fr(pr(e)))}function ri(r){return["table","td","th"].indexOf(L(r))>=0}function h1(r){if(!G(r)||R(r).position==="fixed")return null;return r.offsetParent}function ga(r){var o=/firefox/i.test(Gr()),i=/Trident/i.test(Gr());if(i&&G(r)){var t=R(r);if(t.position==="fixed")return null}var a=pr(r);if(Br(a))a=a.host;while(G(a)&&["html","body"].indexOf(L(a))<0){var n=R(a);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||o&&n.willChange==="filter"||o&&n.filter&&n.filter!=="none")return a;else a=a.parentNode}return null}function vr(r){var o=s(r),i=h1(r);while(i&&ri(i)&&R(i).position==="static")i=h1(i);if(i&&(L(i)==="html"||L(i)==="body"&&R(i).position==="static"))return o;return i||ga(r)||o}var A="top",lr="bottom",J="right",S="left",ka="auto",oi=[A,lr,J,S],ii="start",Ir="end";var m1=[].concat(oi,[ka]).reduce(function(r,o){return r.concat([o,o+"-"+ii,o+"-"+Ir])},[]),ya="beforeRead",Ba="read",Ga="afterRead",Fa="beforeMain",Ia="main",La="afterMain",za="beforeWrite",Na="write",qa="afterWrite",p1=[ya,Ba,Ga,Fa,Ia,La,za,Na,qa];function Da(r){var o=new Map,i=new Set,t=[];r.forEach(function(n){o.set(n.name,n)});function a(n){i.add(n.name);var e=[].concat(n.requires||[],n.requiresIfExists||[]);e.forEach(function(c){if(!i.has(c)){var l=o.get(c);if(l)a(l)}}),t.push(n)}return r.forEach(function(n){if(!i.has(n.name))a(n)}),t}function ti(r){var o=Da(r);return p1.reduce(function(i,t){return i.concat(o.filter(function(a){return a.phase===t}))},[])}function ai(r){var o;return function(){if(!o)o=new Promise(function(i){Promise.resolve().then(function(){o=void 0,i(r())})});return o}}function ni(r){var o=r.reduce(function(i,t){var a=i[t.name];return i[t.name]=a?Object.assign({},a,t,{options:Object.assign({},a.options,t.options),data:Object.assign({},a.data,t.data)}):t,i},{});return Object.keys(o).map(function(i){return o[i]})}function ei(r,o){var i=o.getRootNode&&o.getRootNode();if(r.contains(o))return!0;else if(i&&Br(i)){var t=o;do{if(t&&r.isSameNode(t))return!0;t=t.parentNode||t.host}while(t)}return!1}function or(r){return r.split("-")[0]}function Sr(r){return r.split("-")[1]}function Kr(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function li(r){var{reference:o,element:i,placement:t}=r,a=t?or(t):null,n=t?Sr(t):null,e=o.x+o.width/2-i.width/2,c=o.y+o.height/2-i.height/2,l;switch(a){case A:l={x:e,y:o.y-i.height};break;case lr:l={x:e,y:o.y+o.height};break;case J:l={x:o.x+o.width,y:c};break;case S:l={x:o.x-i.width,y:c};break;default:l={x:o.x,y:o.y}}var u=a?Kr(a):null;if(u!=null){var d=u==="y"?"height":"width";switch(n){case ii:l[u]=l[u]-(o[d]/2-i[d]/2);break;case Ir:l[u]=l[u]+(o[d]/2-i[d]/2);break;default:}}return l}function ci(){return{top:0,right:0,bottom:0,left:0}}function di(r){return Object.assign({},ci(),r)}function ui(r,o){return o.reduce(function(i,t){return i[t]=r,i},{})}var v1={placement:"bottom",modifiers:[],strategy:"absolute"};function b1(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return!o.some(function(t){return!(t&&typeof t.getBoundingClientRect==="function")})}function f1(r){if(r===void 0)r={};var o=r,i=o.defaultModifiers,t=i===void 0?[]:i,a=o.defaultOptions,n=a===void 0?v1:a;return function(c,l,u){if(u===void 0)u=n;var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},v1,n),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},p=[],b=!1,f={state:d,setOptions:function(y){var F=typeof y==="function"?y(d.options):y;m(),d.options=Object.assign({},n,d.options,F),d.scrollParents={reference:yr(c)?Fr(c):c.contextElement?Fr(c.contextElement):[],popper:Fr(l)};var W=ti(ni([].concat(t,d.options.modifiers)));return d.orderedModifiers=W.filter(function(z){return z.enabled}),g(),f.update()},forceUpdate:function(){if(b)return;var y=d.elements,F=y.reference,W=y.popper;if(!b1(F,W))return;d.rects={reference:jo(F,vr(W),d.options.strategy==="fixed"),popper:Zr(W)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(Pr){return d.modifiersData[Pr.name]=Object.assign({},Pr.data)});for(var z=0;z<d.orderedModifiers.length;z++){if(d.reset===!0){d.reset=!1,z=-1;continue}var N=d.orderedModifiers[z],B=N.fn,Q=N.options,Cr=Q===void 0?{}:Q,Bo=N.name;if(typeof B==="function")d=B({state:d,options:Cr,name:Bo,instance:f})||d}},update:ai(function(){return new Promise(function(w){f.forceUpdate(),w(d)})}),destroy:function(){m(),b=!0}};if(!b1(c,l))return f;f.setOptions(u).then(function(w){if(!b&&u.onFirstUpdate)u.onFirstUpdate(w)});function g(){d.orderedModifiers.forEach(function(w){var{name:y,options:F}=w,W=F===void 0?{}:F,z=w.effect;if(typeof z==="function"){var N=z({state:d,name:y,instance:f,options:W}),B=function(){};p.push(N||B)}})}function m(){p.forEach(function(w){return w()}),p=[]}return f}}var mo={passive:!0};function Ta(r){var{state:o,instance:i,options:t}=r,a=t.scroll,n=a===void 0?!0:a,e=t.resize,c=e===void 0?!0:e,l=s(o.elements.popper),u=[].concat(o.scrollParents.reference,o.scrollParents.popper);if(n)u.forEach(function(d){d.addEventListener("scroll",i.update,mo)});if(c)l.addEventListener("resize",i.update,mo);return function(){if(n)u.forEach(function(d){d.removeEventListener("scroll",i.update,mo)});if(c)l.removeEventListener("resize",i.update,mo)}}var w1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ta,data:{}};function Ua(r){var{state:o,name:i}=r;o.modifiersData[i]=li({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})}var _1={name:"popperOffsets",enabled:!0,phase:"read",fn:Ua,data:{}};var Wa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Za(r,o){var{x:i,y:t}=r,a=o.devicePixelRatio||1;return{x:j(i*a)/a||0,y:j(t*a)/a||0}}function x1(r){var o,i=r.popper,t=r.popperRect,a=r.placement,n=r.variation,e=r.offsets,c=r.position,l=r.gpuAcceleration,u=r.adaptive,d=r.roundOffsets,p=r.isFixed,b=e.x,f=b===void 0?0:b,g=e.y,m=g===void 0?0:g,w=typeof d==="function"?d({x:f,y:m}):{x:f,y:m};f=w.x,m=w.y;var y=e.hasOwnProperty("x"),F=e.hasOwnProperty("y"),W=S,z=A,N=window;if(u){var B=vr(i),Q="clientHeight",Cr="clientWidth";if(B===s(i)){if(B=rr(i),R(B).position!=="static"&&c==="absolute")Q="scrollHeight",Cr="scrollWidth"}if(B=B,a===A||(a===S||a===J)&&n===Ir){z=lr;var Bo=p&&B===N&&N.visualViewport?N.visualViewport.height:B[Q];m-=Bo-t.height,m*=l?1:-1}if(a===S||(a===A||a===lr)&&n===Ir){W=J;var Pr=p&&B===N&&N.visualViewport?N.visualViewport.width:B[Cr];f-=Pr-t.width,f*=l?1:-1}}var Di=Object.assign({position:c},u&&Wa),Ti=d===!0?Za({x:f,y:m},s(i)):{x:f,y:m};if(f=Ti.x,m=Ti.y,l){var qr;return Object.assign({},Di,(qr={},qr[z]=F?"0":"",qr[W]=y?"0":"",qr.transform=(N.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",qr))}return Object.assign({},Di,(o={},o[z]=F?m+"px":"",o[W]=y?f+"px":"",o.transform="",o))}function Sa(r){var{state:o,options:i}=r,t=i.gpuAcceleration,a=t===void 0?!0:t,n=i.adaptive,e=n===void 0?!0:n,c=i.roundOffsets,l=c===void 0?!0:c,u={placement:or(o.placement),variation:Sr(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:a,isFixed:o.options.strategy==="fixed"};if(o.modifiersData.popperOffsets!=null)o.styles.popper=Object.assign({},o.styles.popper,x1(Object.assign({},u,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:e,roundOffsets:l})));if(o.modifiersData.arrow!=null)o.styles.arrow=Object.assign({},o.styles.arrow,x1(Object.assign({},u,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})));o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})}var C1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Sa,data:{}};function Ka(r){var o=r.state;Object.keys(o.elements).forEach(function(i){var t=o.styles[i]||{},a=o.attributes[i]||{},n=o.elements[i];if(!G(n)||!L(n))return;Object.assign(n.style,t),Object.keys(a).forEach(function(e){var c=a[e];if(c===!1)n.removeAttribute(e);else n.setAttribute(e,c===!0?"":c)})})}function Ma(r){var o=r.state,i={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};if(Object.assign(o.elements.popper.style,i.popper),o.styles=i,o.elements.arrow)Object.assign(o.elements.arrow.style,i.arrow);return function(){Object.keys(o.elements).forEach(function(t){var a=o.elements[t],n=o.attributes[t]||{},e=Object.keys(o.styles.hasOwnProperty(t)?o.styles[t]:i[t]),c=e.reduce(function(l,u){return l[u]="",l},{});if(!G(a)||!L(a))return;Object.assign(a.style,c),Object.keys(n).forEach(function(l){a.removeAttribute(l)})})}}var s1={name:"applyStyles",enabled:!0,phase:"write",fn:Ka,effect:Ma,requires:["computeStyles"]};var Ra=[w1,_1,C1,s1],Lr=f1({defaultModifiers:Ra});function Aa(r,o,i){var t=or(r),a=[S,A].indexOf(t)>=0?-1:1,n=typeof i==="function"?i(Object.assign({},o,{placement:r})):i,e=n[0],c=n[1];return e=e||0,c=(c||0)*a,[S,J].indexOf(t)>=0?{x:c,y:e}:{x:e,y:c}}function Ja(r){var{state:o,options:i,name:t}=r,a=i.offset,n=a===void 0?[0,0]:a,e=m1.reduce(function(d,p){return d[p]=Aa(p,o.rects,n),d},{}),c=e[o.placement],l=c.x,u=c.y;if(o.modifiersData.popperOffsets!=null)o.modifiersData.popperOffsets.x+=l,o.modifiersData.popperOffsets.y+=u;o.modifiersData[t]=e}var g1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ja};function k1(r,o,i){return d1(r,u1(o,i))}var Va=function(o,i){return o=typeof o==="function"?o(Object.assign({},i.rects,{placement:i.placement})):o,di(typeof o!=="number"?o:ui(o,oi))};function Xa(r){var o,i=r.state,t=r.name,a=r.options,n=i.elements.arrow,e=i.modifiersData.popperOffsets,c=or(i.placement),l=Kr(c),u=[S,J].indexOf(c)>=0,d=u?"height":"width";if(!n||!e)return;var p=Va(a.padding,i),b=Zr(n),f=l==="y"?A:S,g=l==="y"?lr:J,m=i.rects.reference[d]+i.rects.reference[l]-e[l]-i.rects.popper[d],w=e[l]-i.rects.reference[l],y=vr(n),F=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,W=m/2-w/2,z=p[f],N=F-b[d]-p[g],B=F/2-b[d]/2+W,Q=k1(z,B,N),Cr=l;i.modifiersData[t]=(o={},o[Cr]=Q,o.centerOffset=Q-B,o)}function Ha(r){var{state:o,options:i}=r,t=i.element,a=t===void 0?"[data-popper-arrow]":t;if(a==null)return;if(typeof a==="string"){if(a=o.elements.popper.querySelector(a),!a)return}if(!ei(o.elements.popper,a))return;o.elements.arrow=a}var y1={name:"arrow",enabled:!0,phase:"main",fn:Xa,effect:Ha,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};v('.BfU_xa_tooltip{background:var(--theme-primary);border-radius:var(--form-radius);opacity:0;z-index:-1;color:var(--ui-white);padding:var(--space)calc(var(--space)*2.5);white-space:nowrap;border:1px solid #0000001a;font-size:.8rem;transition:opacity .2s ease-out;box-shadow:0 0 .5rem #00000040}.BfU_xa_tooltip[data-show]{opacity:1;z-index:var(--z-index-tooltip)}.BfU_xa_arrow,.BfU_xa_arrow:before{background:inherit;width:8px;height:8px;position:absolute}.BfU_xa_arrow{visibility:hidden}.BfU_xa_arrow:before{visibility:visible;content:"";border:1px solid #0000001a;border-radius:2px;transform:rotate(45deg)}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow{bottom:-4px}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow:before{border-top:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow{top:-4px}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow:before{border-bottom:0;border-right:0}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow{right:-4px}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow:before{border-bottom:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow{left:-4px}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow:before{border-top:0;border-right:0}');var hi={tooltip:"BfU_xa_tooltip",arrow:"BfU_xa_arrow"};import{jsx as $a,jsxs as B1,Fragment as Pa}from"preact/jsx-runtime";function po({content:r,className:o,placement:i,offset:t,clickable:a,children:n,onShow:e,onHide:c}){let l=Ya(null),u=Oa();return Qa(()=>{if(l.current){let d=l.current.previousElementSibling;d.setAttribute("aria-describedby",u);let p=Lr(d,l.current,{placement:i||"auto",modifiers:[y1,g1,{name:"offset",options:{offset:t||[0,8]}}]});l.popper=p;let b=()=>{if(delete l.current.dataset.show,p.setOptions((g)=>({...g,modifiers:[...g.modifiers,{name:"eventListeners",enabled:!1}]})),c)c()},f=()=>{if(l.current.dataset.show=!0,p.setOptions((m)=>({...m,modifiers:[...m.modifiers,{name:"eventListeners",enabled:!0}]})),p.update(),e)e();let g=()=>{b(),document.removeEventListener("pointerdown",g)};document.addEventListener("pointerdown",g)};if(a)d.addEventListener("pointerup",f),l.current.addEventListener("pointerdown",(g)=>g.stopPropagation());else[["mouseenter",f],["mouseleave",b]].forEach(([g,m])=>d.addEventListener(g,m))}return()=>{}},[l]),B1(Pa,{children:[n,B1("div",{ref:l,id:u,className:Ea(hi.tooltip,o),role:"tooltip",children:[r,$a("div",{className:hi.arrow,"data-popper-arrow":!0})]})]})}v(":root{--main-button-size:2.75rem;--more-button-size:2.25rem;--arrow-size:.5rem;--arrow-inset:-.25rem;--arrow-rounding:.125rem}.d9vCIG_action-button-wrapper{flex-direction:column-reverse;transition:all .2s;display:flex;position:relative}.d9vCIG_button{cursor:pointer;background:var(--theme-primary);border:none;outline:none;flex-direction:column;justify-content:center;align-items:center;transition:background-color .2s;display:flex;position:relative}.d9vCIG_disabled{cursor:auto;background:var(--ui-black-transparent)}.d9vCIG_button:not(.d9vCIG_disabled):hover{background:var(--blocks-primary)}.d9vCIG_button:active{padding:inherit}.d9vCIG_main-button{width:var(--main-button-size);height:var(--main-button-size);box-shadow:0 0 0 4px var(--theme-transparent);z-index:var(--z-index-add-button);border-radius:100%;transition:transform,box-shadow .5s}.d9vCIG_main-button.d9vCIG_disabled{box-shadow:none}.d9vCIG_main-button:not(.d9vCIG_disabled):hover{box-shadow:0 0 0 6px var(--theme-transparent);transform:scale(1.1)}.d9vCIG_main-icon{width:calc(var(--main-button-size) - 1rem);height:calc(var(--main-button-size) - 1rem)}.d9vCIG_more-buttons-outer{background:var(--theme-tertiary);border-top-left-radius:var(--more-button-size);border-top-right-radius:var(--more-button-size);width:var(--more-button-size);margin-left:calc((var(--main-button-size) - var(--more-button-size))/2);margin-right:calc((var(--main-button-size) - var(--more-button-size))/2);bottom:calc(var(--main-button-size));margin-bottom:calc(var(--main-button-size)/-2);padding-bottom:calc(var(--main-button-size)/2);position:absolute;overflow:hidden}.d9vCIG_more-buttons{z-index:10;flex-direction:column;max-height:0;transition:max-height 1s}.d9vCIG_expanded .d9vCIG_more-buttons-outer{overflow:visible}.d9vCIG_expanded .d9vCIG_more-buttons{max-height:1000px}.d9vCIG_force-hidden .d9vCIG_more-buttons-outer{display:none}.d9vCIG_force-hidden .d9vCIG_more-Buttons{transition:all!important}.d9vCIG_more-buttons:first-child{border-top-right-radius:var(--more-button-size);border-top-left-radius:var(--more-button-size);overflow:hidden}.d9vCIG_more-button{width:var(--more-button-size);height:var(--more-button-size);background:var(--theme-tertiary)}.d9vCIG_more-icon{width:calc(var(--more-button-size) - 1rem);height:calc(var(--more-button-size) - 1rem)}.d9vCIG_tooltip{background:var(--blocks-primary)}");var D={moreButtonsOuter:"d9vCIG_more-buttons-outer",moreButton:"d9vCIG_more-button",mainIcon:"d9vCIG_main-icon",moreIcon:"d9vCIG_more-icon",moreButtons:"d9vCIG_more-buttons",disabled:"d9vCIG_disabled","more-Buttons":"d9vCIG_more-Buttons",mainButton:"d9vCIG_main-button",tooltip:"d9vCIG_tooltip",expanded:"d9vCIG_expanded",actionButtonWrapper:"d9vCIG_action-button-wrapper",forceHidden:"d9vCIG_force-hidden",button:"d9vCIG_button"};import{useCallback as vo}from"preact/hooks";import{jsx as cr,jsxs as on}from"preact/jsx-runtime";function rn({className:r,disabled:o,icon:i,tooltip:t,tooltipPlacement:a,moreButtons:n,onClick:e}){let c=G1(!1),l=G1(!1),u=vo((d)=>async(p)=>{l.value=!0,c.value=!1,d.onClick(p),await ja(1),l.value=!1},[]);return on("div",{className:mi(D.actionButtonWrapper,r,{[D.expanded]:c.value,[D.forceHidden]:l.value}),disabled:o,onPointerEnter:vo(()=>c.value=!0,[]),onPointerLeave:vo(()=>c.value=!1,[]),onClick:e,children:[cr("div",{className:D.moreButtonsOuter,children:cr("div",{className:D.moreButtons,onClick:vo((d)=>d.stopPropagation(),[]),children:n&&n.map((d,p)=>cr(po,{className:D.tooltip,content:d.tooltip,placement:a||"left",offset:[0,12],children:cr("button",{className:mi(D.button,D.moreButton),disabled:o,onClick:u(d),children:cr("img",{className:D.moreIcon,draggable:!1,src:d.icon})})},p))})}),cr(po,{className:D.tooltip,content:t,placement:a||"left",offset:[0,14],children:cr("button",{disabled:o,className:mi(D.button,D.mainButton),children:cr("img",{className:D.mainIcon,draggable:!1,src:i})})})]})}import{useCallback as bo,useId as rl}from"preact/hooks";import{useSignal as nn}from"@preact/signals";import{classNames as tn}from"@blockcode/utils";v("._9lEAzG_input-form{height:2rem;font-size:var(--standard-font-size);color:var(--text-primary);border-style:solid;border-width:1px;border-color:var(--ui-black-transparent);cursor:text;box-shadow:none;text-overflow:ellipsis;white-space:nowrap;border-radius:2rem;outline:none;min-width:0;padding:0 .75rem;font-weight:700;transition:all .25s ease-out;overflow:hidden}._9lEAzG_input-form:hover{border-color:var(--theme-primary)}._9lEAzG_input-form:focus{border-color:var(--theme-primary);box-shadow:0 0 0 .25rem var(--theme-transparent)}._9lEAzG_input-small{text-overflow:clip;text-align:center;width:3rem;padding:0 .5rem}");var pi={inputSmall:"_9lEAzG_input-small",inputForm:"_9lEAzG_input-form"};import{jsx as an}from"preact/jsx-runtime";function vi(r){let{small:o,...i}=r;return an("input",{...i,className:tn(pi.inputForm,r.className,{[pi.inputSmall]:o})})}import{jsx as ln}from"preact/jsx-runtime";function en({value:r,type:o,forceFocus:i,onSubmit:t,...a}){let n=nn(null),e=bo((d)=>{d.target.setSelectionRange(0,0),d.target.select()},[]),c=bo((d)=>{let p=o==="number",b=p?!isNaN(n.value):!0;if(n.value!==null&&b&&t)t(p?Number(n.value):n.value,d);if(n.value=null,d&&i)d.target.focus()},[o,i,t]),l=bo((d)=>{if(d.key==="Enter")d.target.blur()},[c]),u=bo((d)=>n.value=d.target.value,[]);return ln(vi,{...a,value:n.value===null?r:n.value,onFocus:e,onBlur:c,onChange:u,onInput:u,onKeyPress:l})}import{classNames as F1}from"@blockcode/utils";v(".g7iT9G_outlined{cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--form-radius);background:var(--ui-white);padding:var(--space)calc(var(--space)*1.5);user-select:none;color:var(--text-primary);font-weight:700;font-size:var(--standard-font-size)}.g7iT9G_outlined:focus-visible{outline:0}.g7iT9G_content{white-space:nowrap;flex-direction:row;justify-content:center;align-items:center;width:100%;display:flex}.g7iT9G_vertical-content{flex-direction:column}.g7iT9G_disabled{cursor:auto;opacity:.5}");var Mr={outlined:"g7iT9G_outlined",content:"g7iT9G_content",verticalContent:"g7iT9G_vertical-content",disabled:"g7iT9G_disabled"};import{jsx as I1}from"preact/jsx-runtime";function dr({className:r,vertical:o,disabled:i,title:t,onClick:a,onMouseDown:n,onMouseUp:e,children:c}){return I1("button",{className:F1(Mr.outlined,r,{[Mr.disabled]:i}),title:t,disabled:i,onClick:a,onPointerUp:e,onPointerDown:n,children:I1("div",{className:F1(Mr.content,{[Mr.verticalContent]:o}),children:c})})}import{useEffect as N1,useCallback as q1,useRef as pn,useId as vn}from"preact/hooks";import{classNames as bn}from"@blockcode/utils";import{cloneElement as cn}from"preact";import{useId as dn,useCallback as L1}from"preact/hooks";import{classNames as bi,isDesktop as z1,flatChildren as un}from"@blockcode/utils";v(".SBBo_G_menu{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space)/2);background:var(--ui-white);max-width:260px;color:var(--text-primary);box-shadow:0 var(--space)var(--space)0 var(--ui-black-transparent);margin:0;padding:0;position:absolute;overflow:hidden}.SBBo_G_menu-item{white-space:nowrap;padding:0 calc(var(--space) + 2px);line-height:34px;font-size:var(--standard-font-size);justify-content:space-between;margin:0;display:flex}.SBBo_G_menu-item.SBBo_G_disabled{filter:opacity(.5)}.SBBo_G_menu-item.SBBo_G_disabled:hover{background:0 0}.SBBo_G_content{flex:1;display:flex}.SBBo_G_hotkey{font-weight:400}.SBBo_G_menu-item:hover{background:var(--theme-primary)}.SBBo_G_menu-item:hover:not(.SBBo_G_disabled){color:var(--ui-white)}.SBBo_G_menu-item.SBBo_G_hoverable{cursor:pointer}.SBBo_G_menu-section:not(:first-child){border-top:1px solid var(--ui-black-transparent)}");var ur={content:"SBBo_G_content",menu:"SBBo_G_menu",hoverable:"SBBo_G_hoverable",menuSection:"SBBo_G_menu-section",disabled:"SBBo_G_disabled",hotkey:"SBBo_G_hotkey",menuItem:"SBBo_G_menu-item"};import{jsx as fo,jsxs as hn,Fragment as mn}from"preact/jsx-runtime";function Rr({id:r,className:o,children:i,name:t}){return fo("ul",{className:bi(ur.menu,o),id:`${r||dn()}-menu-${t}`,children:i})}function Ar({className:r,style:o,disabled:i,label:t,href:a,hotkey:n,onClick:e,children:c}){let l=L1((u={})=>{if(i)return;if(e){e(u);return}if(a)window.open(a,"_blank")},[i,a,e]);if(z1&&n)qo(n,l);return hn("li",{className:bi(ur.menuItem,{[ur.hoverable]:!i,[ur.disabled]:i},r),style:o,onClick:l,onPointerDown:L1((u)=>u.stopPropagation(),[]),children:[fo("div",{className:ur.content,children:t||c}),z1&&n&&fo("div",{className:ur.hotkey,children:Do(n)})]})}function Jr({children:r}){return fo(mn,{children:un(r).map((o,i)=>o&&cn(o,{className:bi(o.props.className,{[ur.menuSection]:i===0}),key:i}))})}v("._27p4uG_context-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;transition:opacity .2s ease-out}._27p4uG_context-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu)}._27p4uG_context-menu{min-width:130px;box-shadow:0 0 .5rem #00000040}");var fi={contextMenu:"_27p4uG_context-menu",contextMenuWrapper:"_27p4uG_context-menu-wrapper"};import{jsx as wo,jsxs as wn,Fragment as fn}from"preact/jsx-runtime";var T1=(r)=>r.map((o,i)=>Array.isArray(o)?wo(Jr,{children:T1(o)},i):wo(Ar,{disabled:o.disabled,className:o.className,style:o.style,onClick:o.onClick,children:o.label},i)),U1=(r=0,o=0)=>()=>({width:0,height:0,top:o,right:r,bottom:o,left:r}),D1={getBoundingClientRect:U1()};function Vr({menuItems:r,className:o,position:i,children:t}){let a=pn(null),n=vn(),e=q1(()=>{if(a.popper)delete a.current.dataset.show,a.popper.setOptions((l)=>({...l,modifiers:[...l.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",e),document.removeEventListener("pointerdown",e)},[]),c=q1((l)=>{if(l.preventDefault?.(),a.popper)D1.getBoundingClientRect=U1(l.clientX,l.clientY),a.current.dataset.show=!0,a.popper.setOptions((u)=>({...u,modifiers:[...u.modifiers,{name:"eventListeners",enabled:!0}]})),a.popper.update(),setTimeout(()=>{document.addEventListener("click",e),document.addEventListener("pointerdown",e)})},[]);return N1(()=>{if(i)c({clientX:i.x,clientY:i.y});else e()},[i]),N1(()=>{if(a.current){if(a.popper=Lr(D1,a.current,{placement:"bottom-end"}),t)a.current.previousElementSibling.addEventListener("contextmenu",c)}return()=>{a.popper=null}},[a]),wn(fn,{children:[t,wo("div",{ref:a,id:n,className:fi.contextMenuWrapper,role:"context",children:r&&wo(Rr,{name:n,className:bn(fi.contextMenu,o),children:T1(r)})})]})}import{useEffect as xn,useRef as Z1,useId as Cn}from"preact/hooks";import{useSignal as sn}from"@preact/signals";import{classNames as wi}from"@blockcode/utils";v(".CLktXa_dropdown{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space)/2);min-width:3.5rem;color:var(--blocks-monitor-primary);cursor:pointer;justify-content:space-between;align-items:center;padding:.5rem;font-size:.8rem;display:flex;overflow:visible}.CLktXa_dropdown-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;transition:opacity .2s ease-out}.CLktXa_dropdown-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu)}.CLktXa_dropdown-menu{min-width:130px;max-width:max-content;max-height:30vh;overflow:hidden auto;box-shadow:0 0 .5rem #00000040}.CLktXa_open{background:var(--ui-black-transparent)}.CLktXa_dropdown-icon{width:.5rem;height:.5rem;margin-left:.5rem}.CLktXa_caret-up{padding-top:.2rem;padding-bottom:0;transform:rotate(180deg)}");var br={open:"CLktXa_open",dropdownMenu:"CLktXa_dropdown-menu",dropdownIcon:"CLktXa_dropdown-icon",caretUp:"CLktXa_caret-up",dropdownMenuWrapper:"CLktXa_dropdown-menu-wrapper",dropdown:"CLktXa_dropdown"};var W1="./assets/icon-dropdown-caret-y6kkj0v9.svg";import{jsx as Xr,jsxs as S1,Fragment as kn}from"preact/jsx-runtime";var K1=(r)=>r.map((o,i)=>Array.isArray(o)?Xr(Jr,{children:K1(o)},i):Xr(Ar,{disabled:o.disabled,className:o.className,style:o.style,onClick:o.onClick,children:o.label},i));function gn({className:r,items:o,children:i}){let t=Z1(null),a=Z1(null),n=Cn(),e=sn(!1);return xn(()=>{if(t.current&&a.current){let c=a.current.previousElementSibling,l=Lr(t.current,a.current,{placement:"bottom-start"}),u=(p)=>{if(e.value=!1,a.current)delete a.current.dataset.show,l.setOptions((b)=>({...b,modifiers:[...b.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",u),document.removeEventListener("pointerdown",u)},d=(p)=>{e.value=!0,a.current.dataset.show=!0,l.setOptions((b)=>({...b,modifiers:[...b.modifiers,{name:"eventListeners",enabled:!0}]})),l.update(),setTimeout(()=>{document.addEventListener("click",u),document.addEventListener("pointerdown",u)})};c.addEventListener("pointerup",d)}},[t,a]),S1(kn,{children:[S1("div",{ref:t,className:wi(br.dropdown,r,{[br.open]:e.value}),children:[i,Xr("img",{className:wi(br.dropdownIcon,{[br.aretUp]:e.value}),draggable:!1,src:W1})]}),Xr("div",{ref:a,id:n,className:br.dropdownMenuWrapper,role:"context",children:o&&Xr(Rr,{name:n,className:wi(br.dropdownMenu),children:K1(o)})})]})}import{useId as In}from"preact/hooks";import{classNames as J1}from"@blockcode/utils";import{classNames as Gn}from"@blockcode/utils";import{classNames as Bn}from"@blockcode/utils";v(".F7KjoW_delete-button{width:1.75rem;height:1.75rem;box-shadow:0px 0px 0px 2px var(--theme-transparent);background:var(--theme-primary);color:var(--ui-white);cursor:pointer;user-select:none;border:0;border-radius:50%;justify-content:center;align-items:center;margin:0;padding:0;transition:all .15s ease-out;display:none;position:absolute;overflow:hidden}.F7KjoW_delete-icon{user-select:none;transform-origin:50%;margin:.25rem;position:relative}");var _i={deleteButton:"F7KjoW_delete-button",deleteIcon:"F7KjoW_delete-icon"};var M1="./assets/icon-delete-seqp9ssx.svg";import{jsx as R1}from"preact/jsx-runtime";function A1({className:r,onClick:o}){return R1("button",{className:Bn(_i.deleteButton,r),onClick:o,children:R1("img",{className:_i.deleteIcon,src:M1})})}v("._230aGG_icon-selector-item{color:var(--text-primary);border:2px solid var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;user-select:none;flex-direction:column;justify-content:flex-start;font-size:.8rem;display:flex;position:relative}._230aGG_icon-selector-item:hover{border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_selector{display:none}._230aGG_selector:checked+._230aGG_icon-selector-item{box-shadow:0px 0px 0px 4px var(--theme-transparent);border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_icon-outer{flex:1;justify-content:center;align-items:center;display:flex;position:relative}._230aGG_icon-inner{user-select:none;pointer-events:none;max-width:32px;max-height:32px}._230aGG_icon-order{font-weight:700;font-size:var(--small-font-size);position:absolute;top:3px;left:3px}._230aGG_icon-info{font-size:var(--small-font-size);color:var(--text-primary);user-select:none;border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;padding:.25rem}._230aGG_icon-title,._230aGG_icon-details{text-overflow:ellipsis;white-space:nowrap;min-width:0;overflow:hidden}._230aGG_icon-details{margin-top:.125rem;font-size:.5rem}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_icon-info{background:var(--theme-primary);color:var(--ui-white)}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_delete-button{display:flex;top:-.625rem;right:-.625rem}");var X={iconInfo:"_230aGG_icon-info",iconOuter:"_230aGG_icon-outer",deleteButton:"_230aGG_delete-button",selector:"_230aGG_selector",iconOrder:"_230aGG_icon-order",iconDetails:"_230aGG_icon-details",iconSelectorItem:"_230aGG_icon-selector-item",iconInner:"_230aGG_icon-inner",iconTitle:"_230aGG_icon-title"};import{useCallback as Fn}from"preact/hooks";import{jsx as zr,jsxs as _o}from"preact/jsx-runtime";function xi({id:r,name:o,title:i,details:t,icon:a,order:n,checked:e,displayOrder:c,contextMenu:l,className:u,onSelect:d,onMouseDown:p,onMouseUp:b,onDelete:f}){let g=Fn((m)=>{m.stopPropagation(),f(m)},[f]);return _o(Vr,{menuItems:l,children:[zr("input",{checked:e,className:X.selector,id:`${r}-icon-${o}`,name:`${r}-icon`,type:"radio",value:o}),_o("label",{className:Gn(X.iconSelectorItem,u),for:`${r}-icon-${o}`,onClick:d,onPointerDown:p,onPointerUp:b,children:[_o("div",{className:X.iconOuter,children:[zr("img",{className:X.iconInner,src:a}),c&&zr("div",{className:X.iconOrder,children:n+1})]}),_o("div",{className:X.iconInfo,children:[zr("div",{className:X.iconTitle,children:i}),t&&zr("div",{className:X.iconDetails,children:t})]}),f&&zr(A1,{className:X.deleteButton,onClick:g})]})]})}v(".ipnJ9q_icon-selector-wrapper{background:var(--ui-white-transparent);overflow:auto}.ipnJ9q_items-wrapper{padding:calc(var(--space)/2);padding-bottom:var(--space);flex-flow:wrap;display:flex;overflow:hidden}.ipnJ9q_icon-item{box-sizing:border-box;width:calc((100%/var(--icon-per-row)) - var(--space));min-width:4rem;max-width:6rem;min-height:4rem;margin:calc(var(--space)/2)}");var xo={itemsWrapper:"ipnJ9q_items-wrapper",iconItem:"ipnJ9q_icon-item",iconSelectorWrapper:"ipnJ9q_icon-selector-wrapper"};import{jsx as Ci}from"preact/jsx-runtime";var Co=(r,o,i)=>(t)=>{if(i)i(r,o)};function Ln({className:r,id:o,displayOrder:i,items:t,selectedIndex:a,selectedId:n,onDelete:e,onSelect:c,onMouseDown:l,onMouseUp:u}){let d=In();return Ci("div",{className:J1(xo.iconSelectorWrapper,r),children:Ci("div",{className:xo.itemsWrapper,children:t?.map((p,b)=>p.__hidden__?null:Ci(xi,{checked:b===a||p.id===n,displayOrder:i,className:J1(xo.iconItem,p.className),contextMenu:p.contextMenu,details:p.details,icon:p.icon,id:o??d,name:b,order:p.order,title:p.name,onSelect:c&&Co(b,p,c),onMouseDown:l&&Co(b,p,l),onMouseUp:u&&Co(b,p,u),onDelete:e&&Co(b,p,e)},p.title))})})}import{useEffect as An,useCallback as Gi}from"preact/hooks";import{batch as Fi,useSignal as Ii}from"@preact/signals";import{classNames as go}from"@blockcode/utils";import{classNames as Hr}from"@blockcode/utils";v(".FvkZfa_modal-overlay{background:var(--modal-overlay);z-index:var(--z-index-modal);backdrop-filter:blur(6px);display:flex;position:fixed;inset:0}.FvkZfa_modal-overlay.FvkZfa_red{background:color(from var(--error-primary)srgb r g b/.9)}.FvkZfa_modal-content{border:4px solid var(--ui-white-transparent);border-radius:var(--space);color:var(--text-primary);user-select:none;outline:none;align-self:flex-start;margin:100px auto;padding:0;overflow:hidden}.FvkZfa_modal-content.FvkZfa_full-screen{user-select:none;background:var(--ui-secondary);border:none;border-radius:0;flex-direction:column;width:100%;height:100%;margin:0;display:flex;position:absolute;overflow-y:auto}.FvkZfa_modal-header{height:var(--library-header-height);box-sizing:border-box;background:var(--theme-primary);flex-flow:row;justify-content:flex-start;width:100%;font-size:1rem;display:flex}.FvkZfa_red .FvkZfa_modal-header{background:var(--error-primary)}.FvkZfa_electron{padding-left:58px}.FvkZfa_header-item{color:var(--ui-white);user-select:none;align-items:center;padding:1rem;text-decoration:none;display:flex}.FvkZfa_header-item-title{user-select:none;letter-spacing:.4px;cursor:default;flex-grow:1;flex-shrink:0;justify-content:center;margin:0 -20rem 0 0;font-size:1rem;font-weight:400}.FvkZfa_full-screen .FvkZfa_header-item-title{margin:0 0 0 -20rem}.FvkZfa_header-item-close{z-index:1;flex-basis:20rem;justify-content:flex-end}.FvkZfa_header-item-back{z-index:1;flex-basis:20rem;order:-1;justify-content:flex-start}.FvkZfa_close-button{background:var(--ui-black-transparent);box-shadow:0 0 0 2px var(--ui-black-transparent);border:0;border-radius:50%;width:1.75rem;height:1.75rem;padding:0;transition:all .15s ease-out}.FvkZfa_close-button:hover{box-shadow:0px 0px 0px 4px var(--ui-black-transparent);transform:scale(1.1)}.FvkZfa_close-button img{margin:0 auto}.FvkZfa_back-button{color:var(--ui-white);white-space:nowrap;background:0 0;border:0;padding:0;font-size:1rem;font-weight:400}.FvkZfa_back-button img{height:1.5rem;margin-right:.5rem}");var T={backButton:"FvkZfa_back-button",electron:"FvkZfa_electron",modalHeader:"FvkZfa_modal-header",headerItemClose:"FvkZfa_header-item-close",headerItemBack:"FvkZfa_header-item-back",modalOverlay:"FvkZfa_modal-overlay",closeButton:"FvkZfa_close-button",fullScreen:"FvkZfa_full-screen",headerItemTitle:"FvkZfa_header-item-title",headerItem:"FvkZfa_header-item",red:"FvkZfa_red",modalContent:"FvkZfa_modal-content"};var V1="./assets/icon-back-gwek165q.svg";var X1="./assets/icon-close-bazpdng8.svg";import{jsx as fr,jsxs as si}from"preact/jsx-runtime";function gi({title:r,fullScreen:o,redStyle:i,onClose:t,className:a,headerClassName:n,children:e}){let{macosMenuBarStyled:c}=Ao();return fr("div",{className:Hr(T.modalOverlay,{[T.red]:i}),children:si("div",{className:Hr(T.modalContent,a,{[T.fullScreen]:o}),children:[si("div",{className:Hr(T.modalHeader,n,{[T.electron]:o&&c.value}),children:[fr("div",{className:Hr(T.headerItem,T.headerItemTitle),children:r}),fr("div",{className:Hr(T.headerItem,T.headerItemClose,{[T.headerItemBack]:o}),children:o?si(dr,{className:T.backButton,onClick:t,children:[fr("img",{src:V1}),fr(M,{id:"core.modal.back",defaultMessage:"Back"})]}):fr(dr,{className:T.closeButton,onClick:t,children:fr("img",{src:X1})})})]}),e]})})}import{classNames as O1}from"@blockcode/utils";v(".sO8W8q_filter{background:var(--ui-white);user-select:none;height:var(--library-filter-bar-height);border-radius:10rem;flex-direction:row;flex-grow:1;align-items:center;display:flex;position:relative}.sO8W8q_filter-icon{width:1rem;height:1rem;margin:.75rem .75rem .75rem 1rem;position:absolute;top:0;left:0}.sO8W8q_filter:focus-within{box-shadow:0 0 0 .25rem var(--theme-transparent)}.sO8W8q_close-icon-wrapper{opacity:0;pointer-events:none;cursor:default;border-radius:50%;justify-content:center;align-items:center;width:1.25rem;height:1.25rem;margin:.625rem;transition:opacity 50ms linear;display:flex;position:absolute;top:0;right:0;overflow:hidden}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper{pointer-events:auto;cursor:pointer;opacity:1;transition:opacity 50ms linear}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper:hover{transform:scale(1.2)}.sO8W8q_close-icon{user-select:none;margin:.25rem;transition:transform 85ms cubic-bezier(.78,1,1,1);position:relative;transform:translate(.5rem)}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper .sO8W8q_close-icon{transform:translate(0)}.sO8W8q_filter-input{height:var(--library-filter-bar-height);appearance:none;color:var(--text-primary);font-size:var(--standard-font-size);letter-spacing:.15px;cursor:text;background-color:#0000;border:0;outline:none;flex-grow:1;padding:.625rem 2rem .625rem 3rem}.sO8W8q_filter-input::placeholder{opacity:.5;color:var(--text-primary);letter-spacing:.15px;padding:0 0 0 .25rem;font-size:.875rem}");var wr={filterInput:"sO8W8q_filter-input",closeIconWrapper:"sO8W8q_close-icon-wrapper",closeIcon:"sO8W8q_close-icon",filterIcon:"sO8W8q_filter-icon",isActive:"sO8W8q_is-active",filter:"sO8W8q_filter"};var H1="./assets/icon-filter-wecnwx09.svg";var Q1="./assets/icon-close-1jzsw9nf.svg";import{jsx as so,jsxs as Tn}from"preact/jsx-runtime";function Y1({className:r,onChange:o,onClear:i,placeholder:t,query:a,inputClassName:n}){return Tn("div",{className:O1(r,wr.filter,{[wr.isActive]:a.length>0}),children:[so("img",{className:wr.filterIcon,src:H1}),so("input",{type:"text",className:O1(wr.filterInput,n),placeholder:q(t),"data-value":a,value:a,onInput:o}),so("div",{className:wr.closeIconWrapper,onClick:i,children:so("img",{className:wr.closeIcon,src:Q1})})]})}import{classNames as Qr}from"@blockcode/utils";v("._8P49xa_library-item{max-width:160px;height:160px;margin:var(--space);color:var(--text-primary);background:var(--ui-white);border-style:solid;border-width:2px;border-color:var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;flex-direction:column;flex-basis:160px;justify-content:flex-start;align-items:center;padding:1rem 1rem 0;font-size:.9rem;display:flex;position:relative}._8P49xa_library-item._8P49xa_large{flex-basis:220px;max-width:220px;height:220px}._8P49xa_library-item-featured{align-self:stretch}._8P49xa_library-item:hover{border-width:2px;border-color:var(--theme-primary)}._8P49xa_hidden{display:none}._8P49xa_disabled{opacity:.5;cursor:auto}._8P49xa_disabled:hover{border-color:var(--ui-black-transparent)}._8P49xa_library-item-image-container-wrapper{width:100%;height:100px;position:relative}._8P49xa_library-item-image-container{justify-content:center;align-items:center;width:100%;height:100px;display:flex;position:absolute;overflow:hidden}._8P49xa_large ._8P49xa_library-item-image-container-wrapper,._8P49xa_large ._8P49xa_library-item-image-container{height:160px}._8P49xa_library-item-inset-image-container{background-color:var(--blocks-primary);border:.25rem solid var(--ui-white);border-radius:.5rem;justify-content:center;align-self:flex-start;align-items:center;width:3.5rem;height:3.5rem;margin-top:-2.5rem;margin-left:1rem;display:flex;position:relative;overflow:hidden}._8P49xa_library-item-image{user-select:none;-webkit-user-drag:none;max-width:100%;max-height:100%}._8P49xa_library-item-inset-image{width:2.5rem}._8P49xa_library-item-name,._8P49xa_library-item-detial{text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%;min-width:0;margin:.25rem 0;overflow:hidden}._8P49xa_library-item-detial{font-size:var(--small-font-size);color:var(--text-primary);margin:-.2rem 0 0}._8P49xa_featured-item{flex-basis:300px;max-width:300px;height:auto;padding:0;overflow:hidden}._8P49xa_featured-image-container{position:relative}._8P49xa_featured-image{user-select:none;-webkit-user-drag:none;width:100%}._8P49xa_featured-title{margin:calc(var(--space)*1.5)0 calc(var(--space)*2);font-weight:700}._8P49xa_featured-text{text-align:left;width:300px;padding:10px 10px 10px 1.25rem;font-weight:700}._8P49xa_featured-description{padding-top:.3125rem;padding-bottom:.25rem;font-weight:400;line-height:1.375rem;display:block}._8P49xa_featured-metadata{width:100%;font-size:var(--standard-font-size);color:var(--text-primary);opacity:.75;text-align:left;flex-direction:row;align-items:flex-start;padding:0 1.25rem 1rem;display:flex}._8P49xa_featured-requirement,._8P49xa_featured-collaboration{flex-direction:column;width:100%;display:flex}._8P49xa_featured-metadata-detail{height:100%;padding-top:.4rem;font-weight:700}._8P49xa_featured-metadata-detail img{margin-right:.25rem}._8P49xa_corner-text{color:var(--ui-white);transform:translate(calc(2*var(--space)),calc(2*var(--space)));border-radius:1rem;padding:.5rem 1rem;font-size:.875rem;font-weight:700;position:absolute;box-shadow:0 0 .5rem #00000040}._8P49xa_corner-text._8P49xa_coming-soon-text{background:var(--blocks-primary)}._8P49xa_corner-text._8P49xa_preview-text{background:var(--text-primary)}");var _={libraryItem:"_8P49xa_library-item",featuredImage:"_8P49xa_featured-image",cornerText:"_8P49xa_corner-text",libraryItemInsetImageContainer:"_8P49xa_library-item-inset-image-container",featuredCollaboration:"_8P49xa_featured-collaboration",previewText:"_8P49xa_preview-text",disabled:"_8P49xa_disabled",large:"_8P49xa_large",libraryItemImageContainerWrapper:"_8P49xa_library-item-image-container-wrapper",libraryItemInsetImage:"_8P49xa_library-item-inset-image",libraryItemDetial:"_8P49xa_library-item-detial",featuredImageContainer:"_8P49xa_featured-image-container",hidden:"_8P49xa_hidden",libraryItemImage:"_8P49xa_library-item-image",featuredTitle:"_8P49xa_featured-title",featuredMetadata:"_8P49xa_featured-metadata",libraryItemImageContainer:"_8P49xa_library-item-image-container",featuredRequirement:"_8P49xa_featured-requirement",featuredText:"_8P49xa_featured-text",comingSoonText:"_8P49xa_coming-soon-text",featuredDescription:"_8P49xa_featured-description",libraryItemName:"_8P49xa_library-item-name",featuredMetadataDetail:"_8P49xa_featured-metadata-detail",featuredItem:"_8P49xa_featured-item",libraryItemFeatured:"_8P49xa_library-item-featured"};var E1="./assets/icon-clang-r94n2hbq.svg";var P1="./assets/icon-blocks-czd4m8e2.svg";var $1="./assets/icon-micropython-qstw6yk4.svg";var j1="./assets/icon-bluetooth-0v0grsw2.svg";var rt="./assets/icon-internet-ce656mar.svg";import{jsx as x,jsxs as hr}from"preact/jsx-runtime";function ki(r){return r.featured?hr("div",{className:Qr(_.libraryItem,_.featuredItem,{[_.disabled]:r.disabled,[_.libraryItemFeatured]:r.featured}),onClick:!r.disabled&&r.onSelect,children:[hr("div",{className:_.featuredImageContainer,children:[r.disabled?x("div",{className:Qr(_.cornerText,_.comingSoonText),children:x(M,{id:"core.library.comingSoon",defaultMessage:"Coming Soon"})}):r.beta&&x("div",{className:Qr(_.cornerText,_.previewText),children:x(M,{id:"core.library.beta",defaultMessage:"Beta"})}),x("img",{className:_.featuredImage,src:r.image})]}),r.icon&&x("div",{className:_.libraryItemInsetImageContainer,children:x("img",{className:_.libraryItemInsetImage,src:r.icon})}),r.title?x("div",{className:Qr(_.libraryItemName,_.featuredTitle),children:r.title}):hr("div",{className:_.featuredText,children:[x("span",{className:_.libraryItemName,children:r.name}),x("br",{}),x("span",{className:_.featuredDescription,children:r.description})]}),(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired||r.collaborator)&&hr("div",{className:_.featuredMetadata,children:[x("div",{className:_.featuredRequirement,children:(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired)&&hr("div",{children:[x("div",{children:r.blocksRequired||r.micropythonRequired?x(M,{id:"core.library.programming",defaultMessage:"Programming"}):x(M,{id:"core.library.requires",defaultMessage:"Requires"})}),hr("div",{className:_.featuredMetadataDetail,children:[r.bluetoothRequired&&x("img",{src:j1}),r.internetRequired&&x("img",{src:rt}),r.blocksRequired&&x("img",{src:P1}),r.micropythonRequired&&x("img",{src:$1}),r.clangRequired&&x("img",{src:E1})]})]})}),x("div",{className:_.featuredCollaboration,children:r.collaborator&&hr("div",{children:[x("div",{children:x(M,{id:"core.library.collaboration",defaultMessage:"Collaboration with"})}),x("div",{className:_.featuredMetadataDetail,children:r.collaborator})]})})]})]}):hr("div",{className:Qr(_.libraryItem,{[_.large]:r.large}),onClick:r.onSelect,children:[x("div",{className:_.libraryItemImageContainerWrapper,children:x("div",{className:_.libraryItemImageContainer,children:x("img",{className:_.libraryItemImage,onPointerEnter:r.onMouseEnter,onPointerLeave:r.onMouseLeave,src:r.image})})}),x("span",{className:_.libraryItemName,children:r.name}),(r.copyright||r.author)&&x("span",{className:_.libraryItemDetial,children:r.copyright?`© ${r.copyright}`:r.author})]})}import{classNames as Mn}from"@blockcode/utils";v(".BETjoW_tag-button{background:var(--theme-primary);color:var(--ui-white);height:var(--library-filter-bar-height);border:0;border-radius:1.375rem;padding:.625rem 1rem}.BETjoW_active{background:var(--data-primary)}");var yi={tagButton:"BETjoW_tag-button",active:"BETjoW_active"};import{jsx as Rn}from"preact/jsx-runtime";function Bi({active:r,className:o,onClick:i,children:t}){return Rn(dr,{className:Mn(o,yi.tagButton,{[yi.active]:r}),onClick:i,children:t})}v('.RgwUta_library-scroll-grid{background:var(--ui-secondary);height:auto;height:calc(100% - var(--library-header-height));flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;padding:.5rem;display:flex;overflow-y:auto}.RgwUta_library-scroll-grid.RgwUta_withFilterBar{height:calc(100% - var(--library-header-height) - var(--library-filter-bar-height) - 2rem)}.RgwUta_filter-bar{height:calc(var(--library-filter-bar-height) + 2rem);background-color:var(--theme-transparent);flex-direction:row;justify-content:flex-start;align-items:center;padding:0 1rem;display:flex}.RgwUta_filter-bar-item{margin-right:.75rem;font-size:.875rem}.RgwUta_filter{flex-grow:0}.RgwUta_filter-input{width:11.5rem;transition:all .2s}.RgwUta_filter-input:focus,.RgwUta_filter-input:not([data-value=""]){width:18.75rem}.RgwUta_divider{height:var(--library-filter-bar-height);border-right:1px dashed var(--ui-black-transparent);margin-right:.75rem;transform:scaleY(1.39)}.RgwUta_tag-wrapper{height:var(--library-filter-bar-height);flex-flow:wrap;display:flex;overflow:hidden}.RgwUta_spinner-wrapper{justify-content:center;align-items:center;width:100%;height:100%;display:flex}');var U={filterBar:"RgwUta_filter-bar",libraryScrollGrid:"RgwUta_library-scroll-grid",withFilterBar:"RgwUta_withFilterBar",tagWrapper:"RgwUta_tag-wrapper",filter:"RgwUta_filter",spinnerWrapper:"RgwUta_spinner-wrapper",divider:"RgwUta_divider",filterInput:"RgwUta_filter-input",filterBarItem:"RgwUta_filter-bar-item"};import{jsx as ir,jsxs as Li}from"preact/jsx-runtime";function Jn({items:r,title:o,filterable:i,filterPlaceholder:t,emptyMessage:a,tags:n,large:e,featured:c,onClose:l}){let u=Ii("all"),d=Ii(""),p=Ii([]);An(()=>{if(!r)return;p.value=r.filter((m)=>{if(m.hidden)return!1;let w=d.value.toLowerCase(),y=q(m.name).toLowerCase();if(m.eegg)return m.eegg===w||y===w;if(!m.tags)return!0;if(u.value!=="all")return m.tags.includes(u.value);if(d.length===0)return!0;if(m.id&&m.id.toLowerCase().includes(w))return!0;if(y.includes(w))return!0;if(m.author){if(q(m.author).toLowerCase().includes(w))return!0}if(m.copyright){if(q(m.copyright).toLowerCase().includes(w))return!0}if(m.collaborator){if(q(m.collaborator).toLowerCase().includes(w))return!0}return!1})},[r,u.value,d.value]);let b=Gi((m)=>{Fi(()=>{u.value="all",d.value=m.target.value})},[]),f=Gi(()=>{Fi(()=>{u.value="all",d.value=""})},[]),g=Gi((m)=>()=>{Fi(()=>{u.value=m,d.value=""})},[]);return Li(gi,{fullScreen:!0,title:o,onClose:l,children:[(i||n)&&Li("div",{className:U.filterBar,children:[i&&ir(Y1,{className:go(U.filterBarItem,U.filter),inputClassName:U.filterInput,query:d.value,placeholder:t,onChange:b,onClear:f}),i&&n&&ir("div",{className:U.divider}),n&&Li("div",{className:U.tagWrapper,children:[ir(Bi,{active:u==="all",className:go(U.filterBarItem,U.tagButton),onClick:g("all"),children:ir(M,{id:"core.library.all",defaultMessage:"All"})}),n.map((m,w)=>ir(Bi,{active:u===m.tag.toLowerCase(),className:go(U.filterBarItem,U.tagButton),onClick:g(m.tag.toLowerCase()),children:m.label},w))]})]}),ir("div",{className:go(U.libraryScrollGrid,{[U.withFilterBar]:i||n}),children:p.value?.length?p.value.map((m,w)=>ir(Vr,{menuItems:m.contextMenu,children:ir(ki,{id:m.id??w,large:e,featured:c,disabled:m.disabled,beta:m.beta||m.preview,icon:m.icon,image:m.image,name:m.name,title:m.title,description:m.description,author:m.author,copyright:m.copyright,bluetoothRequired:m.bluetoothRequired,internetRequired:m.internetRequired,collaborator:m.collaborator,onMouseEnter:m.onMouseEnter,onMouseLeave:m.onMouseLeave,onSelect:m.onSelect})},m.id??w)):ir("div",{className:U.spinnerWrapper,children:a??""})})]})}import{classNames as ot}from"@blockcode/utils";v("._0rCRoa_input-group{flex-direction:row;align-items:center;display:inline-flex}._0rCRoa_input-group-column{flex-direction:column;align-items:flex-start;display:inline-flex}._0rCRoa_input-group-column span{margin-bottom:.25rem}._0rCRoa_input-label,._0rCRoa_input-label-secondary{font-size:var(--standard-font-size);user-select:none;cursor:default;white-space:nowrap;margin-right:.5rem}._0rCRoa_input-label{font-weight:700}");var Or={inputGroup:"_0rCRoa_input-group",inputGroupColumn:"_0rCRoa_input-group-column",inputLabelSecondary:"_0rCRoa_input-label-secondary",inputLabel:"_0rCRoa_input-label"};import{jsxs as it}from"preact/jsx-runtime";function Vn(r){return it("label",{className:ot({[Or.inputGroupColumn]:r.above,[Or.inputGroup]:!r.above},r.className),children:[it("span",{className:ot({[Or.inputLabelSecondary]:r.secondary,[Or.inputLabel]:!r.secondary}),children:[" ",r.text]}),r.children]})}import{classNames as Xn}from"@blockcode/utils";v('._9Bnnoq_spinner{border-style:solid;border-width:.1875rem;border-color:var(--ui-white-transparent);border-radius:50%;width:1.25rem;height:1.25rem;display:inline-block;position:relative;box-sizing:content-box!important}._9Bnnoq_spinner:before,._9Bnnoq_spinner:after{content:"";border-radius:50%;width:1.25rem;height:1.25rem;display:block}._9Bnnoq_spinner:after{border:.1875rem solid #0000;border-top-color:var(--ui-white);animation:1.5s cubic-bezier(.4,.1,.4,1) infinite _9Bnnoq_spin;position:absolute;top:-.1875rem;left:-.1875rem}._9Bnnoq_small,._9Bnnoq_small:before,._9Bnnoq_small:after{width:.5rem;height:.5rem}._9Bnnoq_large,._9Bnnoq_large:before,._9Bnnoq_large:after{width:2.5rem;height:2.5rem}@keyframes _9Bnnoq_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._9Bnnoq_spinner._9Bnnoq_success{border-color:var(--blocks-transparent)}._9Bnnoq_spinner._9Bnnoq_success:after{border-top-color:var(--blocks-primary)}._9Bnnoq_spinner._9Bnnoq_warn{border-color:var(--error-transparent)}._9Bnnoq_spinner._9Bnnoq_warn:after{border-top-color:var(--error-primary)}._9Bnnoq_spinner._9Bnnoq_info{border-color:var(--ui-white-transparent)}._9Bnnoq_spinner._9Bnnoq_info:after{border-top-color:var(--ui-white)}._9Bnnoq_spinner._9Bnnoq_primary{border-color:var(--theme-transparent)}._9Bnnoq_spinner._9Bnnoq_primary:after{border-top-color:var(--theme-primary)}');var Yr={spin:"_9Bnnoq_spin",spinner:"_9Bnnoq_spinner",small:"_9Bnnoq_small",info:"_9Bnnoq_info",large:"_9Bnnoq_large",warn:"_9Bnnoq_warn",success:"_9Bnnoq_success",primary:"_9Bnnoq_primary"};import{jsx as Qn}from"preact/jsx-runtime";function Hn({className:r,level:o,small:i,large:t}){return Qn("div",{className:Xn(r,Yr.spinner,Yr[o||"info"],{[Yr.small]:i,[Yr.large]:t})})}import{useCallback as On}from"preact/hooks";import{classNames as Yn}from"@blockcode/utils";v(".G1JGNa_toggle-button{filter:saturate(0);min-width:calc(2rem + 2px);height:calc(2rem + 2px);margin-left:-1px;padding:.375rem!important}.G1JGNa_toggle-button:disabled{cursor:not-allowed;filter:grayscale()}.G1JGNa_toggle-button.G1JGNa_audo-width{width:auto}.G1JGNa_button-icon{margin:auto}.G1JGNa_toggle-button-first{border-top-right-radius:0;border-bottom-right-radius:0}.G1JGNa_toggle-button-middle{border-radius:0}.G1JGNa_toggle-button-last{border-top-left-radius:0;border-bottom-left-radius:0}.G1JGNa_toggle-button-actived{border:1px solid var(--theme-highlight);background:var(--theme-light-transparent);filter:none;z-index:1}.G1JGNa_button-text{flex:auto}");var tr={toggleButtonLast:"G1JGNa_toggle-button-last",toggleButtonMiddle:"G1JGNa_toggle-button-middle",toggleButtonFirst:"G1JGNa_toggle-button-first",toggleButton:"G1JGNa_toggle-button",audoWidth:"G1JGNa_audo-width",toggleButtonActived:"G1JGNa_toggle-button-actived",buttonText:"G1JGNa_button-text",buttonIcon:"G1JGNa_button-icon"};import{jsx as ko,Fragment as Pn}from"preact/jsx-runtime";function En({disabled:r,items:o,value:i,onChange:t}){let a=o.length-1;return ko(Pn,{children:o.map((n,e)=>ko(dr,{disabled:n.disabled||r,className:Yn(tr.toggleButton,{[tr.autoWidth]:n.title&&!n.icon,[tr.toggleButtonFirst]:e===0,[tr.toggleButtonMiddle]:e>0&&e<a,[tr.toggleButtonLast]:e===a,[tr.toggleButtonActived]:!r&&i===n.value}),onClick:On(()=>t?.(n.value),[t]),children:n.icon?ko("img",{src:n.icon,className:tr.buttonIcon,title:q(n.title)}):ko("div",{className:tr.buttonText,children:q(n.title)})},e))})}var Ni=Symbol.for,_r=Symbol("kCapture"),et=Ni("events.errorMonitor"),$n=Symbol("events.maxEventTargetListeners"),jn=Symbol("events.maxEventTargetListenersWarned"),tt=Ni("nodejs.rejection"),r0=Ni("nodejs.rejection"),at=Array.prototype.slice,xr=10,H=function(o){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[_r]=o?.captureRejections?Boolean(o?.captureRejections):C[_r])this.emit=a0},C=H.prototype={};C._events=void 0;C._eventsCount=0;C._maxListeners=void 0;C.setMaxListeners=function(o){return qi(o,"setMaxListeners",0),this._maxListeners=o,this};C.constructor=H;C.getMaxListeners=function(){return this?._maxListeners??xr};function lt(r,o){var{_events:i}=r;if(o[0]??=Error("Unhandled error."),!i)throw o[0];var t=i[et];if(t)for(var a of at.call(t))a.apply(r,o);var n=i.error;if(!n)throw o[0];for(var a of at.call(n))a.apply(r,o);return!0}function o0(r,o,i,t){o.then(void 0,function(a){queueMicrotask(()=>i0(r,a,i,t))})}function i0(r,o,i,t){if(typeof r[tt]==="function")r[tt](o,i,...t);else try{r[_r]=!1,r.emit("error",o)}finally{r[_r]=!0}}var t0=function(o,...i){if(o==="error")return lt(this,i);var{_events:t}=this;if(t===void 0)return!1;var a=t[o];if(a===void 0)return!1;let n=a.length>1?a.slice():a;for(let e=0,{length:c}=n;e<c;e++){let l=n[e];switch(i.length){case 0:l.call(this);break;case 1:l.call(this,i[0]);break;case 2:l.call(this,i[0],i[1]);break;case 3:l.call(this,i[0],i[1],i[2]);break;default:l.apply(this,i);break}}return!0},a0=function(o,...i){if(o==="error")return lt(this,i);var{_events:t}=this;if(t===void 0)return!1;var a=t[o];if(a===void 0)return!1;let n=a.length>1?a.slice():a;for(let e=0,{length:c}=n;e<c;e++){let l=n[e],u;switch(i.length){case 0:u=l.call(this);break;case 1:u=l.call(this,i[0]);break;case 2:u=l.call(this,i[0],i[1]);break;case 3:u=l.call(this,i[0],i[1],i[2]);break;default:u=l.apply(this,i);break}if(u!==void 0&&typeof u?.then==="function"&&u.then===Promise.prototype.then)o0(this,u,o,i)}return!0};C.emit=t0;C.addListener=function(o,i){Er(i);var t=this._events;if(!t)t=this._events={__proto__:null},this._eventsCount=0;else if(t.newListener)this.emit("newListener",o,i.listener??i);var a=t[o];if(!a)t[o]=[i],this._eventsCount++;else{a.push(i);var n=this._maxListeners??xr;if(n>0&&a.length>n&&!a.warned)ct(this,o,a)}return this};C.on=C.addListener;C.prependListener=function(o,i){Er(i);var t=this._events;if(!t)t=this._events={__proto__:null},this._eventsCount=0;else if(t.newListener)this.emit("newListener",o,i.listener??i);var a=t[o];if(!a)t[o]=[i],this._eventsCount++;else{a.unshift(i);var n=this._maxListeners??xr;if(n>0&&a.length>n&&!a.warned)ct(this,o,a)}return this};function ct(r,o,i){i.warned=!0;let t=Error(`Possible EventEmitter memory leak detected. ${i.length} ${String(o)} listeners added to [${r.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);t.name="MaxListenersExceededWarning",t.emitter=r,t.type=o,t.count=i.length,console.warn(t)}function dt(r,o,...i){this.removeListener(r,o),o.apply(this,i)}C.once=function(o,i){Er(i);let t=dt.bind(this,o,i);return t.listener=i,this.addListener(o,t),this};C.prependOnceListener=function(o,i){Er(i);let t=dt.bind(this,o,i);return t.listener=i,this.prependListener(o,t),this};C.removeListener=function(o,i){Er(i);var{_events:t}=this;if(!t)return this;var a=t[o];if(!a)return this;var n=a.length;let e=-1;for(let c=n-1;c>=0;c--)if(a[c]===i||a[c].listener===i){e=c;break}if(e<0)return this;if(e===0)a.shift();else a.splice(e,1);if(a.length===0)delete t[o],this._eventsCount--;return this};C.off=C.removeListener;C.removeAllListeners=function(o){var{_events:i}=this;if(o&&i){if(i[o])delete i[o],this._eventsCount--}else this._events={__proto__:null};return this};C.listeners=function(o){var{_events:i}=this;if(!i)return[];var t=i[o];if(!t)return[];return t.map((a)=>a.listener??a)};C.rawListeners=function(o){var{_events:i}=this;if(!i)return[];var t=i[o];if(!t)return[];return t.slice()};C.listenerCount=function(o){var{_events:i}=this;if(!i)return 0;return i[o]?.length??0};C.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};C[_r]=!1;function n0(r,o,i){var t=i?.signal;if(ut(t,"options.signal"),t?.aborted)throw new zi(void 0,{cause:t?.reason});let{resolve:a,reject:n,promise:e}=$newPromiseCapability(Promise),c=(d)=>{if(r.removeListener(o,l),t!=null)yo(t,"abort",u);n(d)},l=(...d)=>{if(typeof r.removeListener==="function")r.removeListener("error",c);if(t!=null)yo(t,"abort",u);a(d)};if(nt(r,o,l,{once:!0}),o!=="error"&&typeof r.once==="function")r.once("error",c);function u(){yo(r,o,l),yo(r,"error",c),n(new zi(void 0,{cause:t?.reason}))}if(t!=null)nt(t,"abort",u,{once:!0});return e}function e0(r,o){return r.listeners(o)}function l0(r,...o){qi(r,"setMaxListeners",0);var i;if(o&&(i=o.length))for(let t=0;t<i;t++)o[t].setMaxListeners(r);else xr=r}function c0(r,o){return r.listenerCount(o)}function yo(r,o,i,t){if(typeof r.removeListener==="function")r.removeListener(o,i);else r.removeEventListener(o,i,t)}function nt(r,o,i,t){if(typeof r.on==="function")if(t.once)r.once(o,i);else r.on(o,i);else r.addEventListener(o,i,t)}class zi extends Error{constructor(r="The operation was aborted",o=void 0){if(o!==void 0&&typeof o!=="object")throw Nr("options","Object",o);super(r,o);this.code="ABORT_ERR",this.name="AbortError"}}function Nr(r,o,i){let t=TypeError(`The "${r}" argument must be of type ${o}. Received ${i}`);return t.code="ERR_INVALID_ARG_TYPE",t}function d0(r,o,i){let t=RangeError(`The "${r}" argument is out of range. It must be ${o}. Received ${i}`);return t.code="ERR_OUT_OF_RANGE",t}function ut(r,o){if(r!==void 0&&(r===null||typeof r!=="object"||!("aborted"in r)))throw Nr(o,"AbortSignal",r)}function qi(r,o,i,t){if(typeof r!=="number")throw Nr(o,"number",r);if(i!=null&&r<i||t!=null&&r>t||(i!=null||t!=null)&&Number.isNaN(r))throw d0(o,`${i!=null?`>= ${i}`:""}${i!=null&&t!=null?" && ":""}${t!=null?`<= ${t}`:""}`,r)}function Er(r){if(typeof r!=="function")throw TypeError("The listener must be a function")}function u0(r,o){if(typeof r!=="boolean")throw Nr(o,"boolean",r)}function h0(r){return r?._maxListeners??xr}function m0(r,o){if(r===void 0)throw Nr("signal","AbortSignal",r);if(ut(r,"signal"),typeof o!=="function")throw Nr("listener","function",o);let i;if(r.aborted)queueMicrotask(()=>o());else r.addEventListener("abort",o,{__proto__:null,once:!0}),i=()=>{r.removeEventListener("abort",o)};return{__proto__:null,[Symbol.dispose](){i?.()}}}Object.defineProperties(H,{captureRejections:{get(){return C[_r]},set(r){u0(r,"EventEmitter.captureRejections"),C[_r]=r},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>{return xr},set:(r)=>{qi(r,"defaultMaxListeners",0),xr=r}},kMaxEventTargetListeners:{value:$n,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:jn,enumerable:!1,configurable:!1,writable:!1}});Object.assign(H,{once:n0,getEventListeners:e0,getMaxListeners:h0,setMaxListeners:l0,EventEmitter:H,usingDomains:!1,captureRejectionSymbol:r0,errorMonitor:et,addAbortListener:m0,init:H,listenerCount:c0});var p0=new TextEncoder;class ht extends H{constructor(r){super();this._port=r,this._reader=null,r._serial=this,this._port.ondisconnect=()=>{this.emit("disconnect")}}get port(){return this._port}dispose(){this.close().then(()=>{this._port=null})}getInfo(){return this.port.getInfo()}open(r){return new Promise((o,i)=>{this.port.open(r).then(()=>{let t=this.port.readable.getReader(),a=()=>{t.read().then(({value:n,done:e})=>{if(n)this.emit("data",n);if(e)t.releaseLock();else a()}).catch((n)=>{this.emit("error",n)})};this._reader=t,this.emit("connect"),a(),o()}).catch((t)=>{this.handleDisconnectError(t)})})}close(){return new Promise((r,o)=>{if(this._reader)this._reader.cancel().then(()=>this.port.close()).then(r).catch(o);else this.port.close().then(r).catch(o);this._reader=null})}write(r,o="text"){return new Promise((i,t)=>{let a=this.port.writable.getWriter();r=o==="text"?p0.encode(r):r,a.write(r).then(()=>{a.releaseLock(),i()}).catch((n)=>{this.emit("error",n)})})}setSignals(r){this.port.setSignals(r)}handleDisconnectError(r){this.emit("error",r),this.close()}}import{base64ToUint8Array as v0}from"@blockcode/utils";class mt extends H{constructor(r){super();this._server=r,this.device._ble=this}get server(){return this._server}get device(){return this.server.device}dispose(){this.close(),this._server=null}getInfo(){return{id:this.device.id,name:this.device.name}}open(){return new Promise((r)=>{this.server.connect().then(()=>{this.device.addEventListener("gattserverdisconnected",()=>{this.emit("disconnect"),this.close()}),this.emit("connect"),r()}).catch((o)=>{this.handleDisconnectError(o)})})}close(){this.server.disconnect()}get connected(){return!!this.server?.connected}startNotifications(r,o){return this._server.getPrimaryService(r).then((i)=>i.getCharacteristic(o)).then((i)=>{i.stopNotifications(),i.oncharacteristicvaluechanged=(t)=>{let a=t.target.value,n=new Uint8Array(a.buffer);this.emit("data",n)},i.startNotifications()}).catch((i)=>{this.emit("error",i)})}read(r,o,i=!1){return this._server.getPrimaryService(r).then((t)=>t.getCharacteristic(o)).then((t)=>{if(i)t.stopNotifications(),t.oncharacteristicvaluechanged=(a)=>{let n=a.target.value,e=new Uint8Array(n.buffer);this.emit("data",e)},t.startNotifications();return t.readValue()}).then((t)=>({message:new Uint8Array(t.buffer)})).catch((t)=>{this.emit("error",t)})}write(r,o,i,t=null,a=null){let n=t==="base64"?v0(i):i;return this._server.getPrimaryService(r).then((e)=>e.getCharacteristic(o)).then((e)=>{if(a&&e.writeValueWithResponse)return e.writeValueWithResponse(n);if(a===!1&&e.writeValueWithoutResponse)return e.writeValueWithoutResponse(n);return e.writeValue(n)}).catch((e)=>{this.emit("error",e)})}handleDisconnectError(r){this.emit("error",r),this.close()}}export{_a as useProjectContext,Zt as useLocalesContext,Ao as useAppContext,Ei as translate,vt as themeColors,Jt as showSplash,Do as showHotkey,$ as setModified,la as setMeta,ia as setMacosMenuBarStyled,Wt as setLanguage,qo as setHotkey,e1 as setFile,l1 as setAsset,jt as setAppState,Ht as setAlert,da as renameProject,ra as openUserStorage,Pt as openTab,Qt as openPromptModal,fa as openProject,Yt as openLayout,no as openFile,Oo as openAsset,q as maybeTranslate,ca as isModifyType,Vt as hideSplash,ha as getFile,va as getAsset,ma as delFile,ba as delAsset,i1 as delAlert,oa as closeUserStorage,Ot as closePromptModal,wa as closeProject,Et as closeLayout,To as clearHotkeys,$t as addTabs,Dt as addLocalesMessages,ua as addFile,pa as addAsset,Xt as addAlertConfig,po as Tooltip,En as ToggleButtons,M as Text,Hn as Spinner,ht as Serial,xa as ProjectProvider,kt as Numeric,Z as ModifyTypes,gi as Modal,Jr as MenuSection,Ar as MenuItem,Rr as Menu,St as LocalesProvider,ki as LibraryItem,Jn as Library,Vn as Label,h as Keys,vi as Input,xi as IconSelectorItem,Ln as IconSelector,gn as Dropdown,gt as DateTime,Vr as ContextMenu,dr as Button,en as BufferedInput,mt as BLE,ta as AppProvider,rn as ActionButton};
