function f(r){let o=globalThis.document,i=o.createElement("style");i.appendChild(o.createTextNode(r)),o.head.append(i)}f(":root{--ui-primary:#e5f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-light:#c3efe2;--ui-transparent:#fff0;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-black-transparent:#00000026;--modal-overlay:color(from var(--theme-primary)srgb r g b/.9);--theme-primary:#4c97ff;--theme-secondary:#4280d7;--theme-tertiary:#3373cc;--theme-transparent:color(from var(--theme-primary)srgb r g b/.35);--theme-light-transparent:color(from var(--theme-primary)srgb r g b/.15);--theme-highlight:#8abbff;--text-primary:#575e75;--text-transparent:color(from var(--text-primary)srgb r g b/.75);--warn-primary:#ff8c1a;--warn-light:#ffb366;--warn-transparent:color(from var(--warn-primary)srgb r g b/.25);--error-primary:#ff661a;--error-secondary:#e64d00;--blocks-primary:#0fbd8c;--blocks-secondary:#0da57a;--blocks-tertiary:#0b8e69;--blocks-transparent:color(from var(--blocks-primary)srgb r g b/.35);--blocks-motion-primary:#4c97ff;--blocks-looks-primary:#96f;--blocks-sounds-primary:#cf63cf;--blocks-event-primary:#ffbf00;--blocks-control-primary:#ffab19;--blocks-sensing-primary:#5cb1d6;--blocks-operators-primary:#59c059;--blocks-variables-primary:#ff8c1a;--blocks-lists-primary:#ff661a;--blocks-monitor-primary:;--blocks-myblocks-primary:#ff6680;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:970px;--min-height:720px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{width:100%;height:100%;min-width:var(--min-width);min-height:var(--min-height);margin:0}*{box-sizing:border-box;user-select:none}");f("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var fa={ui:{primary:"#E5F0FF",secondary:"#E9F1FC",tertiary:"#D9E3F2",light:"#C3EFE2",theme:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",highlight:"#8ABBFF"},text:{primary:"#575E75"},warn:{primary:"#FF8C1A",light:"#FFB366"},error:{primary:"#FF661A",secondary:"#E64D00"}},blocks:{primary:"#0FBD8C",secondary:"#0DA57A",tertiary:"#0B8E69",quaternary:"#0B8E69",motion:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC",quaternary:"#3373CC"},looks:{primary:"#9966FF",secondary:"#855CD6",tertiary:"#774DCB",quaternary:"#774DCB"},sounds:{primary:"#CF63CF",secondary:"#C94FC9",tertiary:"#BD42BD",quaternary:"#BD42BD"},events:{primary:"#FFBF00",secondary:"#E6AC00",tertiary:"#CC9900",quaternary:"#CC9900"},control:{primary:"#FFAB19",secondary:"#EC9C13",tertiary:"#CF8B17",quaternary:"#CF8B17"},sensing:{primary:"#5CB1D6",secondary:"#47A8D1",tertiary:"#2E8EB8",quaternary:"#2E8EB8"},operators:{primary:"#59C059",secondary:"#46B946",tertiary:"#389438",quaternary:"#389438"},text:{primary:"#46B963",secondary:"#3FA662",tertiary:"#389457"},variables:{primary:"#FF8C1A",secondary:"#FF8000",tertiary:"#DB6E00",quaternary:"#DB6E00"},lists:{primary:"#FF661A",secondary:"#FF5500",tertiary:"#E64D00",quaternary:"#E64D00"},myblocks:{primary:"#FF6680",secondary:"#FF4D6A",tertiary:"#FF3355",quaternary:"#FF3355"},debug:{primary:"#29BEB8",secondary:"#24A9A4",tertiary:"#3AA8A4"}}};import{createContext as qa}from"preact";import{useContext as Da}from"preact/hooks";import{computed as Oi,effect as Ua,signal as Ei}from"@preact/signals";var er,Io=function(r,o){return Io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])},Io(r,o)},Wi=function(r){function o(i,a){var t=r.call(this,"Translation failed")||this;return t.id=i,t.language=a,t}return function(i,a){if(typeof a!="function"&&a!==null)throw TypeError("Class extends value "+a+" is not a constructor or null");function t(){this.constructor=i}Io(i,a),i.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}(o,r),o.is=function(i){return i instanceof o},o}(Error),wa=function(){function r(o){this.input=o,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return r.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},r.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},r}();(function(r){r[r.Plural=0]="Plural",r[r.Select=1]="Select",r[r.Text=2]="Text",r[r.Variable=3]="Variable"})(er||(er={}));var _a=["{","}",","],xa=function(){function r(o){this.input=new wa(o)}return r.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},r.prototype.skip=function(o){o!==this.input.value&&this.input.croak(),this.input.next()},r.prototype.readWhile=function(o){for(var i="";!this.input.done&&o(this.input.value);)i+=this.input.value,this.input.next();return i},r.prototype.readVariable=function(){this.skip("{");var o=this.readWhile(function(a){return!function(t){return _a.includes(t)}(a)}).trim();if(o.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:er.Variable,value:o};this.skip(",");var i=this.readVariableType();return{options:this.readVariableOptions(),type:i,value:o}},r.prototype.readText=function(){return{type:er.Text,value:this.readWhile(function(o){return o!=="{"&&o!=="}"})}},r.prototype.readVariableType=function(){var o=this.readWhile(function(i){return i!==","}).trim();return o==="plural"?er.Plural:o==="select"?er.Select:void this.input.croak()},r.prototype.readVariableOptions=function(){this.skip(",");for(var o={};this.input.value!=="}";)o[this.readText().value.trim()]=this.readExpression();return this.skip("}"),o},r.prototype.readExpression=function(){var o=[];for(this.skip("{");this.input.value!=="}";)o.push(this.next());return this.skip("}"),o},r}();function Ca(r,o,i){for(var a=new xa(o),t=[],n=function(e){var{options:l,type:c,value:u}=e;if(c!==er.Variable)if(l)if(c!==er.Select)try{t.concat(l[new Intl.PluralRules(r).select(i[u])].map(n))}catch(d){t.concat(l.other.map(n))}else t.concat((l[i[u]]||l.other).map(n));else t.push(u);else t.push(i[u])};!a.input.done;)n(a.next());return t}var gr=function(r,o){r===void 0&&(r="en"),o===void 0&&(o=[]);var i=this;this.memo={},this.onError=console.error,this.formatDate=function(t,n){return new Intl.DateTimeFormat(i.language,n).format(t)},this.formatNumber=function(t,n){return new Intl.NumberFormat(i.language,n).format(t)},this.translate=function(t,n){n===void 0&&(n={});var e=i.getMessageById(t,n.defaultMessage);if(typeof e=="string")try{return Ca(i.language,e,n).join("")}catch(l){i.onError(new Wi(t,i.language))}return e+""},this.getMessageById=function(t,n){if(!i.memo[t]){var e=i.messages[t];e===void 0&&(e=t.split(".").reduce(function(l,c){return l?l[c]:void 0},i.messages)),typeof e!="string"&&(i.onError(new Wi(t,i.language)),e=n||t),i.memo[t]=e}return i.memo[t]};var a=o.find(function(t){return t.language===r});this.language=r,this.messages=a?a.messages:{}};import{createContext as ga,h as Ur,Fragment as Lo}from"preact";import{useState as ka,useEffect as ya,useContext as Zi}from"preact/hooks";function zo(r,o){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var t=0;for(a=Object.getOwnPropertySymbols(r);t<a.length;t++)o.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(r,a[t])&&(i[a[t]]=r[a[t]])}return i}var No=ga({language:"",locales:[],setLanguage:function(){},translator:new gr}),Si=function(r){var{children:o,language:i,locales:a,onError:t}=r,n=ka(i);ya(function(){n[1](i)},[i]);var e=new gr(n[0],a);return t&&(e.onError=t),Ur(No.Provider,{value:{language:n[0],locales:a,setLanguage:n[1],translator:e}},o)};function Ki(r){var o=Zi(No);return r&&r!==o.language?new gr(r):o.translator}var Ba=function(r){var{language:o,value:i}=r,a=zo(r,["children","language","value"]);return Ur(Lo,null,Ki(o).formatDate(i,a))},sa=function(r){var{language:o,value:i}=r,a=zo(r,["children","language","value"]);return Ur(Lo,null,Ki(o).formatNumber(i,a))},K=function(r){var{html:o,id:i,tagName:a}=r,t=a===void 0?"span":a,n=zo(r,["children","html","id","tagName"]),e=Zi(No).translator.translate(i,n);return o?Ur(t,{dangerouslySetInnerHTML:{__html:e}}):Ur(Lo,null,e)};import{setUserLanguage as Ga,getUserLanguage as Fa}from"@blockcode/utils";var{DisplayNames:qo,Locale:Ia}=window.Intl,Ai="en",Mi=navigator.language,jr=new Map;function Ji(r){let o=new Ia(r),i=o.textInfo||o.getTextInfo();return i&&i.direction==="rtl"}var La={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function Ri(){let r=Fa()||Mi;return r=La[r]||r,jr.has(r)?r:Ai}function Vi(r){document.querySelector("html").lang=r,Ga(r)}var za=new qo([Ai],{type:"language"}),Na=new qo([Mi],{type:"language"});function ro(r,o={}){let i=new qo([r],{type:"language"});return jr.set(r,{languageName:i.of(r),languageNameByDefault:za.of(r),languageNameByBrowser:Na.of(r)}),{language:r,messages:o}}var Xi={"core.modal.back":"Back","core.library.all":"All","core.library.beta":"Beta","core.library.comingSoon":"Coming Soon","core.library.requires":"Requires","core.library.programming":"Programming","core.library.collaboration":"Collaboration with","core.library.readmore":"Read more..."};var Hi={"core.modal.back":"返回","core.library.all":"所有","core.library.beta":"测试版","core.library.comingSoon":"敬请期待","core.library.requires":"系统需求","core.library.programming":"编程语言","core.library.collaboration":"合作者","core.library.readmore":"查看更多…"};var Qi={"core.modal.back":"返迴","core.library.all":"所有","core.library.beta":"測試版","core.library.comingSoon":"敬請期待","core.library.requires":"係統需求","core.library.programming":"編程語言","core.library.collaboration":"合作者","core.library.readmore":"查看更多…"};import{jsx as Yi}from"preact/jsx-runtime";var oo=Ei([ro("en",Xi),ro("zh-Hans",Hi),ro("zh-Hant",Qi)]);function Ta(r){oo.value=oo.value.map((o)=>({language:o.language,messages:Object.assign(o.messages,r[o.language]??{})}))}var kr=Ei(Ri()),Wa=Oi(()=>Ji(kr.value)),Za=Oi(()=>new gr(kr.value,oo.value));Ua(()=>Vi(kr.value));function Sa(r){kr.value=r}function Pi(r,o,i={}){return Za.value.translate(r,{defaultMessage:o,...i})}function q(r,o={}){if(!r?.props)return r;if(r.props.children)return[].concat(r.props.children).map((i)=>q(i)).join("");return Pi(r.props.id,r.props.defaultMessage,Object.assign(r.props,o))}var $i=qa(),Ka=()=>Da($i);function Aa({children:r}){return Yi($i.Provider,{value:{language:kr,languageNames:jr,isRtl:Wa},children:Yi(Si,{locales:oo.value,language:kr.value,onError:Ma,children:r})})}function Ma(r){}import{createContext as Ja}from"preact";import{useContext as Ra}from"preact/hooks";import{batch as o1,signal as A}from"@preact/signals";import{isElectron as i1,isMac as a1,nanoid as Va}from"@blockcode/utils";import{isMac as O}from"@blockcode/utils";var v={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Delete",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},ji={[v.ESC]:O?"⎋":"Esc",[v.F1]:"F1",[v.F2]:"F2",[v.F3]:"F3",[v.F4]:"F4",[v.F5]:"F5",[v.F6]:"F6",[v.F7]:"F7",[v.F8]:"F8",[v.F9]:"F9",[v.F10]:"F10",[v.F11]:"F11",[v.F12]:"F12",[v.D1]:"1",[v.D2]:"2",[v.D3]:"3",[v.D4]:"4",[v.D5]:"5",[v.D6]:"6",[v.D7]:"7",[v.D8]:"8",[v.D9]:"9",[v.D0]:"0",[v.TAB]:O?"⇥":"Tab",[v.DELETE]:O?"⌫":"Backspace",[v.RETURN]:O?"↩":"Enter",[v.A]:"A",[v.B]:"B",[v.C]:"C",[v.D]:"D",[v.E]:"E",[v.F]:"F",[v.G]:"G",[v.H]:"H",[v.I]:"I",[v.J]:"J",[v.K]:"K",[v.L]:"L",[v.M]:"M",[v.N]:"N",[v.O]:"O",[v.P]:"P",[v.Q]:"Q",[v.R]:"R",[v.S]:"S",[v.T]:"T",[v.U]:"U",[v.V]:"V",[v.W]:"W",[v.X]:"X",[v.Y]:"Y",[v.Z]:"Z",[v.UP]:"↑",[v.DOWN]:"↓",[v.LEFT]:"←",[v.RIGHT]:"→",[v.SHIFT]:O?"⇧":"Shift",[v.CONTROL]:O?"⌃":"Ctrl",[v.OPTION]:O?"⌥":"Alt",[v.COMMAND]:O?"⌘":"⊞"},r1={[v.CONTROL]:0,[v.OPTION]:1,[v.SHIFT]:2,[v.COMMAND]:3},Do=new Map;function Uo(r,o){Do.set(r.join("-"),o)}function To(r){let o=[];if(typeof r==="string")r=r.split("-");return r.forEach((i)=>{if(r1.hasOwnProperty(i))o[r1[i]]=ji[i];else o.push(ji[i])}),o.filter((i)=>i).join(O?"":"+")}function Wo(){Do.clear()}window.addEventListener("keydown",(r)=>{Do.forEach((o,i)=>{let a=(t)=>{if(t===v.CONTROL&&r.ctrlKey)return!0;if(t===v.OPTION&&r.altKey)return!0;if(t===v.SHIFT&&r.shiftKey)return!0;if(t===v.COMMAND&&r.metaKey)return!0;if(t===r.code)return!0;return!1};if(typeof i==="string")i=i.split("-");if(i.every(a)&&typeof o==="function"){r.preventDefault();try{o()}catch(t){}}})});import{jsx as et}from"preact/jsx-runtime";var ao=A(!1);function Xa(){ao.value=!0}function Ha(){ao.value=!1}var E=A([]),Zo=Object.create(null);function Qa(r,o){Zo[r]=o}function Ya(...r){let o,i,a=0;for(let t of r){if(typeof t==="string")o=t;if(typeof t==="object")i=t;if(typeof t==="number")a=t}if(o&&Zo[o])i=Object.assign({},Zo[o],i??{});if(!i)return;if(!i.id)i.id=Va();if(E.value.find((t)=>i.id===t.id))E.value=E.value.map((t)=>{if(t.id===i.id)return Object.assign(t,i);return t});else E.value=E.value.concat(i);if(a>0)setTimeout(()=>t1(i.id),a);return i.id}function t1(r){E.value=E.value.filter((o)=>o.id!==r)}var to=A(null);function Oa(r){to.value=r}function Ea(){to.value=null}var So=A(null),Ko=A(null),no=A(-1),Ao=A(null),Mo=A(null),Jo=A(null),io=A(null);function Pa(r){o1(()=>{So.value=r.menuItems,Ko.value=r.tabs,no.value=r.tabIndex??0,Ao.value=r.docks,Mo.value=r.panes,Jo.value=r.tutorials})}function $a(){Wo(),o1(()=>{ao.value=!1,E.value.length=0,to.value=null,So.value=null,Ko.value=null,no.value=-1,Ao.value=null,Mo.value=null,Jo.value=null,io.value=null})}function ja(r){no.value=r}function rt(r){r.value=state.tabs.value.concat(r)}function ot(r,o){if(typeof r==="string")r={[r]:o};io.value=Object.assign({},io.value??{},r)}var Ro=A(!1);function it(){Ro.value=!0}function at(){Ro.value=!1}var n1=A(a1&&i1);function tt(r){if(a1&&i1)n1.value=r}var e1=Ja(),Vo=()=>Ra(e1);function nt({children:r}){return et(e1.Provider,{value:{splashVisible:ao,alerts:E,prompt:to,menuItems:So,tabs:Ko,tabIndex:no,docks:Ao,panes:Mo,tutorials:Jo,appState:io,userStorageVisible:Ro,macosMenuBarStyled:n1},children:r})}import{createContext as lt}from"preact";import{useContext as ct}from"preact/hooks";import{batch as P,computed as lo,signal as $}from"@preact/signals";import{nanoid as Xo}from"@blockcode/utils";function Tr(r,o,i){if(r=r.trim(),i.find((a)=>o!==a.id&&a.name===r)){let a=r.replace(/\d+$/,""),t=new RegExp(`${a}(\\d+)$`),n=0;for(let e of i){if(o===e.id)continue;let l=t.exec(e.name);if(l){let c=parseInt(l[1]);if(c>n)n=c}}r=`${a}${n+1}`}return r}import{jsx as kt}from"preact/jsx-runtime";var Z={Saved:0,Rename:1,AddFile:2,SetFile:3,DelFile:4,AddAsset:5,SetAsset:6,DelAsset:7,SetMeta:8},Wr=$(null);function dt(r,o){if(typeof r==="string")r={[r]:o};P(()=>{Wr.value=Object.assign({},Wr.value??{},r),j(Z.SetMeta)})}var Ho=$(null),Qo=$(null),yr=$(0);function j(r=Z.Saved){if(r===Z.Saved)yr.value=Z.Saved;else yr.value=(Math.floor(yr.value/10)+1)*10+r}function ut(r=Z.Saved){return yr.value%10===r}var co=$("");function ht(r){co.value=r,j(Z.Rename)}var y=$(null),X=$(null),uo=lo(()=>y.value?.findIndex((r)=>r.id===X.value)??-1),Yo=lo(()=>y.value?.find((r)=>r.id===X.value)??null);function eo(r){X.value=r}function vt(r){if(!r.id)r.id=Xo();if(y.value.find((o)=>o.id===r.id)){c1(r);return}r.name=Tr(r.name,r.id,y.value),P(()=>{y.value.push(r),X.value=r.id,j(Z.AddFile)})}function c1(r){let o=Yo.value,i=uo.value;if(r.id)o=y.value.find((a)=>a.id===r.id),i=y.value.findIndex((a)=>a.id===r.id);if(!o)return;if(r.name)r.name=Tr(r.name,o.id,y.value);P(()=>{y.value[i]=Object.assign(o,r),j(Z.SetFile)})}function mt(r){if(uo===r)return y.value[r];if(X.value!==r)return y.value.find((o)=>o.id===r);return Yo}function bt(r){let o=uo.value;if(X.value!==r)o=y.value.findIndex((i)=>i.id===r);if(o===-1)return;P(()=>{if(r===X.value)if(o+1<y.value.length)eo(y.value[o+1]?.id);else if(o-1>-1)eo(y.value[o-1]?.id);else eo(null);y.value.splice(o,1),j(Z.DelFile)})}var I=$(null),lr=$(null),ho=lo(()=>I.value?.findIndex((r)=>r.id===lr.value)??-1),Oo=lo(()=>I.value?.find((r)=>r.id===lr.value)??null);function Eo(r){lr.value=r}function pt(r){if(!r.id)r.id=Xo();if(I.value.find((o)=>o.id===r.id)){d1(r);return}r.name=Tr(r.name,r.id,I.value),P(()=>{I.value.push(r),Eo(r.id),j(Z.AddAsset)})}function d1(r){let o=Oo.value,i=ho.value;if(r.id)o=I.value.find((a)=>a.id===r.id),i=I.value.findIndex((a)=>a.id===r.id);if(!o)return;if(r.name)r.name=Tr(r.name,o.id,I.value);P(()=>{I.value[i]=Object.assign(o,r),j(Z.SetAsset)})}function ft(r){if(ho===r)return I.value[r];if(lr.value!==r)return I.value.find((o)=>o.id===r);return Oo}function wt(r){let o=ho.value;if(lr.value!==r)o=I.value.findIndex((i)=>i.id===r);if(o===-1)return;P(()=>{Eo(null),I.value.splice(o,1),j(Z.DelAsset)})}var l1=()=>(r)=>Object.assign(r,{name:q(r.name)});function _t(r){P(()=>{Wr.value=r.meta,Ho.value=r.id,Qo.value=r.key??Xo(),co.value=q(r.name),y.value=r.files?.map(l1())??[],X.value=r.fileId,I.value=r.assets?.map(l1())??[],lr.value=r.assetId})}function xt(){P(()=>{Wr.value=null,Ho.value=null,Qo.value=null,co.value="",y.value=null,X.value=null,I.value=null,lr.value=null,yr.value=0})}var u1=lt(),Ct=()=>ct(u1);function gt({children:r}){return kt(u1.Provider,{value:{meta:Wr,id:Ho,key:Qo,name:co,file:Yo,files:y,fileId:X,fileIndex:uo,asset:Oo,assets:I,assetId:lr,assetIndex:ho,modified:yr},children:r})}import{useSignal as F1}from"@preact/signals";import{classNames as bi,sleepMs as on}from"@blockcode/utils";import{useEffect as Ot,useId as Et,useRef as Pt}from"preact/hooks";import{classNames as $t}from"@blockcode/utils";function k(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var o=r.ownerDocument;return o?o.defaultView||window:window}return r}function Br(r){var o=k(r).Element;return r instanceof o||r instanceof Element}function G(r){var o=k(r).HTMLElement;return r instanceof o||r instanceof HTMLElement}function sr(r){if(typeof ShadowRoot>"u")return!1;var o=k(r).ShadowRoot;return r instanceof o||r instanceof ShadowRoot}var{max:h1,min:v1,round:rr}=Math;function Gr(){var r=navigator.userAgentData;if(r!=null&&r.brands&&Array.isArray(r.brands))return r.brands.map(function(o){return o.brand+"/"+o.version}).join(" ");return navigator.userAgent}function Po(){return!/^((?!chrome|android).)*safari/i.test(Gr())}function cr(r,o,i){if(o===void 0)o=!1;if(i===void 0)i=!1;var a=r.getBoundingClientRect(),t=1,n=1;if(o&&G(r))t=r.offsetWidth>0?rr(a.width)/r.offsetWidth||1:1,n=r.offsetHeight>0?rr(a.height)/r.offsetHeight||1:1;var e=Br(r)?k(r):window,l=e.visualViewport,c=!Po()&&i,u=(a.left+(c&&l?l.offsetLeft:0))/t,d=(a.top+(c&&l?l.offsetTop:0))/n,m=a.width/t,b=a.height/n;return{width:m,height:b,top:d,right:u+m,bottom:d+b,left:u,x:u,y:d}}function Zr(r){var o=k(r),i=o.pageXOffset,a=o.pageYOffset;return{scrollLeft:i,scrollTop:a}}function $o(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function jo(r){if(r===k(r)||!G(r))return Zr(r);else return $o(r)}function L(r){return r?(r.nodeName||"").toLowerCase():null}function or(r){return((Br(r)?r.ownerDocument:r.document)||window.document).documentElement}function ri(r){return cr(or(r)).left+Zr(r).scrollLeft}function M(r){return k(r).getComputedStyle(r)}function vr(r){var o=M(r),i=o.overflow,a=o.overflowX,t=o.overflowY;return/auto|scroll|overlay|hidden/.test(i+t+a)}function yt(r){var o=r.getBoundingClientRect(),i=rr(o.width)/r.offsetWidth||1,a=rr(o.height)/r.offsetHeight||1;return i!==1||a!==1}function oi(r,o,i){if(i===void 0)i=!1;var a=G(o),t=G(o)&&yt(o),n=or(o),e=cr(r,t,i),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};if(a||!a&&!i){if(L(o)!=="body"||vr(n))l=jo(o);if(G(o))c=cr(o,!0),c.x+=o.clientLeft,c.y+=o.clientTop;else if(n)c.x=ri(n)}return{x:e.left+l.scrollLeft-c.x,y:e.top+l.scrollTop-c.y,width:e.width,height:e.height}}function Sr(r){var o=cr(r),i=r.offsetWidth,a=r.offsetHeight;if(Math.abs(o.width-i)<=1)i=o.width;if(Math.abs(o.height-a)<=1)a=o.height;return{x:r.offsetLeft,y:r.offsetTop,width:i,height:a}}function mr(r){if(L(r)==="html")return r;return r.assignedSlot||r.parentNode||(sr(r)?r.host:null)||or(r)}function vo(r){if(["html","body","#document"].indexOf(L(r))>=0)return r.ownerDocument.body;if(G(r)&&vr(r))return r;return vo(mr(r))}function Fr(r,o){var i;if(o===void 0)o=[];var a=vo(r),t=a===((i=r.ownerDocument)==null?void 0:i.body),n=k(a),e=t?[n].concat(n.visualViewport||[],vr(a)?a:[]):a,l=o.concat(e);return t?l:l.concat(Fr(mr(e)))}function ii(r){return["table","td","th"].indexOf(L(r))>=0}function m1(r){if(!G(r)||M(r).position==="fixed")return null;return r.offsetParent}function Bt(r){var o=/firefox/i.test(Gr()),i=/Trident/i.test(Gr());if(i&&G(r)){var a=M(r);if(a.position==="fixed")return null}var t=mr(r);if(sr(t))t=t.host;while(G(t)&&["html","body"].indexOf(L(t))<0){var n=M(t);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||o&&n.willChange==="filter"||o&&n.filter&&n.filter!=="none")return t;else t=t.parentNode}return null}function br(r){var o=k(r),i=m1(r);while(i&&ii(i)&&M(i).position==="static")i=m1(i);if(i&&(L(i)==="html"||L(i)==="body"&&M(i).position==="static"))return o;return i||Bt(r)||o}var J="top",dr="bottom",R="right",S="left",st="auto",ai=[J,dr,R,S],ti="start",Ir="end";var b1=[].concat(ai,[st]).reduce(function(r,o){return r.concat([o,o+"-"+ti,o+"-"+Ir])},[]),Gt="beforeRead",Ft="read",It="afterRead",Lt="beforeMain",zt="main",Nt="afterMain",qt="beforeWrite",Dt="write",Ut="afterWrite",p1=[Gt,Ft,It,Lt,zt,Nt,qt,Dt,Ut];function Tt(r){var o=new Map,i=new Set,a=[];r.forEach(function(n){o.set(n.name,n)});function t(n){i.add(n.name);var e=[].concat(n.requires||[],n.requiresIfExists||[]);e.forEach(function(l){if(!i.has(l)){var c=o.get(l);if(c)t(c)}}),a.push(n)}return r.forEach(function(n){if(!i.has(n.name))t(n)}),a}function ni(r){var o=Tt(r);return p1.reduce(function(i,a){return i.concat(o.filter(function(t){return t.phase===a}))},[])}function ei(r){var o;return function(){if(!o)o=new Promise(function(i){Promise.resolve().then(function(){o=void 0,i(r())})});return o}}function li(r){var o=r.reduce(function(i,a){var t=i[a.name];return i[a.name]=t?Object.assign({},t,a,{options:Object.assign({},t.options,a.options),data:Object.assign({},t.data,a.data)}):a,i},{});return Object.keys(o).map(function(i){return o[i]})}function ci(r,o){var i=o.getRootNode&&o.getRootNode();if(r.contains(o))return!0;else if(i&&sr(i)){var a=o;do{if(a&&r.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function ir(r){return r.split("-")[0]}function Kr(r){return r.split("-")[1]}function Ar(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function di(r){var{reference:o,element:i,placement:a}=r,t=a?ir(a):null,n=a?Kr(a):null,e=o.x+o.width/2-i.width/2,l=o.y+o.height/2-i.height/2,c;switch(t){case J:c={x:e,y:o.y-i.height};break;case dr:c={x:e,y:o.y+o.height};break;case R:c={x:o.x+o.width,y:l};break;case S:c={x:o.x-i.width,y:l};break;default:c={x:o.x,y:o.y}}var u=t?Ar(t):null;if(u!=null){var d=u==="y"?"height":"width";switch(n){case ti:c[u]=c[u]-(o[d]/2-i[d]/2);break;case Ir:c[u]=c[u]+(o[d]/2-i[d]/2);break;default:}}return c}function ui(){return{top:0,right:0,bottom:0,left:0}}function hi(r){return Object.assign({},ui(),r)}function vi(r,o){return o.reduce(function(i,a){return i[a]=r,i},{})}var f1={placement:"bottom",modifiers:[],strategy:"absolute"};function w1(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return!o.some(function(a){return!(a&&typeof a.getBoundingClientRect==="function")})}function _1(r){if(r===void 0)r={};var o=r,i=o.defaultModifiers,a=i===void 0?[]:i,t=o.defaultOptions,n=t===void 0?f1:t;return function(l,c,u){if(u===void 0)u=n;var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},f1,n),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],b=!1,p={state:d,setOptions:function(B){var F=typeof B==="function"?B(d.options):B;h(),d.options=Object.assign({},n,d.options,F),d.scrollParents={reference:Br(l)?Fr(l):l.contextElement?Fr(l.contextElement):[],popper:Fr(c)};var W=ni(li([].concat(a,d.options.modifiers)));return d.orderedModifiers=W.filter(function(z){return z.enabled}),g(),p.update()},forceUpdate:function(){if(b)return;var B=d.elements,F=B.reference,W=B.popper;if(!w1(F,W))return;d.rects={reference:oi(F,br(W),d.options.strategy==="fixed"),popper:Sr(W)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function($r){return d.modifiersData[$r.name]=Object.assign({},$r.data)});for(var z=0;z<d.orderedModifiers.length;z++){if(d.reset===!0){d.reset=!1,z=-1;continue}var N=d.orderedModifiers[z],s=N.fn,Y=N.options,Cr=Y===void 0?{}:Y,Fo=N.name;if(typeof s==="function")d=s({state:d,options:Cr,name:Fo,instance:p})||d}},update:ei(function(){return new Promise(function(x){p.forceUpdate(),x(d)})}),destroy:function(){h(),b=!0}};if(!w1(l,c))return p;p.setOptions(u).then(function(x){if(!b&&u.onFirstUpdate)u.onFirstUpdate(x)});function g(){d.orderedModifiers.forEach(function(x){var{name:B,options:F}=x,W=F===void 0?{}:F,z=x.effect;if(typeof z==="function"){var N=z({state:d,name:B,instance:p,options:W}),s=function(){};m.push(N||s)}})}function h(){m.forEach(function(x){return x()}),m=[]}return p}}var mo={passive:!0};function Wt(r){var{state:o,instance:i,options:a}=r,t=a.scroll,n=t===void 0?!0:t,e=a.resize,l=e===void 0?!0:e,c=k(o.elements.popper),u=[].concat(o.scrollParents.reference,o.scrollParents.popper);if(n)u.forEach(function(d){d.addEventListener("scroll",i.update,mo)});if(l)c.addEventListener("resize",i.update,mo);return function(){if(n)u.forEach(function(d){d.removeEventListener("scroll",i.update,mo)});if(l)c.removeEventListener("resize",i.update,mo)}}var x1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Wt,data:{}};function Zt(r){var{state:o,name:i}=r;o.modifiersData[i]=di({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})}var C1={name:"popperOffsets",enabled:!0,phase:"read",fn:Zt,data:{}};var St={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kt(r,o){var{x:i,y:a}=r,t=o.devicePixelRatio||1;return{x:rr(i*t)/t||0,y:rr(a*t)/t||0}}function g1(r){var o,i=r.popper,a=r.popperRect,t=r.placement,n=r.variation,e=r.offsets,l=r.position,c=r.gpuAcceleration,u=r.adaptive,d=r.roundOffsets,m=r.isFixed,b=e.x,p=b===void 0?0:b,g=e.y,h=g===void 0?0:g,x=typeof d==="function"?d({x:p,y:h}):{x:p,y:h};p=x.x,h=x.y;var B=e.hasOwnProperty("x"),F=e.hasOwnProperty("y"),W=S,z=J,N=window;if(u){var s=br(i),Y="clientHeight",Cr="clientWidth";if(s===k(i)){if(s=or(i),M(s).position!=="static"&&l==="absolute")Y="scrollHeight",Cr="scrollWidth"}if(s=s,t===J||(t===S||t===R)&&n===Ir){z=dr;var Fo=m&&s===N&&N.visualViewport?N.visualViewport.height:s[Y];h-=Fo-a.height,h*=c?1:-1}if(t===S||(t===J||t===dr)&&n===Ir){W=R;var $r=m&&s===N&&N.visualViewport?N.visualViewport.width:s[Cr];p-=$r-a.width,p*=c?1:-1}}var Ui=Object.assign({position:l},u&&St),Ti=d===!0?Kt({x:p,y:h},k(i)):{x:p,y:h};if(p=Ti.x,h=Ti.y,c){var Dr;return Object.assign({},Ui,(Dr={},Dr[z]=F?"0":"",Dr[W]=B?"0":"",Dr.transform=(N.devicePixelRatio||1)<=1?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",Dr))}return Object.assign({},Ui,(o={},o[z]=F?h+"px":"",o[W]=B?p+"px":"",o.transform="",o))}function At(r){var{state:o,options:i}=r,a=i.gpuAcceleration,t=a===void 0?!0:a,n=i.adaptive,e=n===void 0?!0:n,l=i.roundOffsets,c=l===void 0?!0:l,u={placement:ir(o.placement),variation:Kr(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:t,isFixed:o.options.strategy==="fixed"};if(o.modifiersData.popperOffsets!=null)o.styles.popper=Object.assign({},o.styles.popper,g1(Object.assign({},u,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:e,roundOffsets:c})));if(o.modifiersData.arrow!=null)o.styles.arrow=Object.assign({},o.styles.arrow,g1(Object.assign({},u,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})));o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})}var k1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:At,data:{}};function Mt(r){var o=r.state;Object.keys(o.elements).forEach(function(i){var a=o.styles[i]||{},t=o.attributes[i]||{},n=o.elements[i];if(!G(n)||!L(n))return;Object.assign(n.style,a),Object.keys(t).forEach(function(e){var l=t[e];if(l===!1)n.removeAttribute(e);else n.setAttribute(e,l===!0?"":l)})})}function Jt(r){var o=r.state,i={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};if(Object.assign(o.elements.popper.style,i.popper),o.styles=i,o.elements.arrow)Object.assign(o.elements.arrow.style,i.arrow);return function(){Object.keys(o.elements).forEach(function(a){var t=o.elements[a],n=o.attributes[a]||{},e=Object.keys(o.styles.hasOwnProperty(a)?o.styles[a]:i[a]),l=e.reduce(function(c,u){return c[u]="",c},{});if(!G(t)||!L(t))return;Object.assign(t.style,l),Object.keys(n).forEach(function(c){t.removeAttribute(c)})})}}var y1={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Jt,requires:["computeStyles"]};var Rt=[x1,C1,k1,y1],Lr=_1({defaultModifiers:Rt});function Vt(r,o,i){var a=ir(r),t=[S,J].indexOf(a)>=0?-1:1,n=typeof i==="function"?i(Object.assign({},o,{placement:r})):i,e=n[0],l=n[1];return e=e||0,l=(l||0)*t,[S,R].indexOf(a)>=0?{x:l,y:e}:{x:e,y:l}}function Xt(r){var{state:o,options:i,name:a}=r,t=i.offset,n=t===void 0?[0,0]:t,e=b1.reduce(function(d,m){return d[m]=Vt(m,o.rects,n),d},{}),l=e[o.placement],c=l.x,u=l.y;if(o.modifiersData.popperOffsets!=null)o.modifiersData.popperOffsets.x+=c,o.modifiersData.popperOffsets.y+=u;o.modifiersData[a]=e}var bo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xt};function B1(r,o,i){return h1(r,v1(o,i))}var Ht=function(o,i){return o=typeof o==="function"?o(Object.assign({},i.rects,{placement:i.placement})):o,hi(typeof o!=="number"?o:vi(o,ai))};function Qt(r){var o,i=r.state,a=r.name,t=r.options,n=i.elements.arrow,e=i.modifiersData.popperOffsets,l=ir(i.placement),c=Ar(l),u=[S,R].indexOf(l)>=0,d=u?"height":"width";if(!n||!e)return;var m=Ht(t.padding,i),b=Sr(n),p=c==="y"?J:S,g=c==="y"?dr:R,h=i.rects.reference[d]+i.rects.reference[c]-e[c]-i.rects.popper[d],x=e[c]-i.rects.reference[c],B=br(n),F=B?c==="y"?B.clientHeight||0:B.clientWidth||0:0,W=h/2-x/2,z=m[p],N=F-b[d]-m[g],s=F/2-b[d]/2+W,Y=B1(z,s,N),Cr=c;i.modifiersData[a]=(o={},o[Cr]=Y,o.centerOffset=Y-s,o)}function Yt(r){var{state:o,options:i}=r,a=i.element,t=a===void 0?"[data-popper-arrow]":a;if(t==null)return;if(typeof t==="string"){if(t=o.elements.popper.querySelector(t),!t)return}if(!ci(o.elements.popper,t))return;o.elements.arrow=t}var s1={name:"arrow",enabled:!0,phase:"main",fn:Qt,effect:Yt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};f('.BfU_xa_tooltip{background:var(--theme-primary);border-radius:var(--form-radius);opacity:0;z-index:-1;color:var(--ui-white);padding:var(--space)calc(var(--space)*2.5);white-space:nowrap;border:1px solid #0000001a;font-size:.8rem;transition:opacity .2s ease-out;box-shadow:0 0 .5rem #00000040}.BfU_xa_tooltip[data-show]{opacity:1;z-index:var(--z-index-tooltip)}.BfU_xa_arrow,.BfU_xa_arrow:before{background:inherit;width:8px;height:8px;position:absolute}.BfU_xa_arrow{visibility:hidden}.BfU_xa_arrow:before{visibility:visible;content:"";border:1px solid #0000001a;border-radius:2px;transform:rotate(45deg)}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow{bottom:-4px}.BfU_xa_tooltip[data-popper-placement^=top]>.BfU_xa_arrow:before{border-top:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow{top:-4px}.BfU_xa_tooltip[data-popper-placement^=bottom]>.BfU_xa_arrow:before{border-bottom:0;border-right:0}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow{right:-4px}.BfU_xa_tooltip[data-popper-placement^=left]>.BfU_xa_arrow:before{border-bottom:0;border-left:0}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow{left:-4px}.BfU_xa_tooltip[data-popper-placement^=right]>.BfU_xa_arrow:before{border-top:0;border-right:0}');var mi={arrow:"BfU_xa_arrow",tooltip:"BfU_xa_tooltip"};import{jsx as rn,jsxs as G1,Fragment as jt}from"preact/jsx-runtime";function po({content:r,className:o,placement:i,offset:a,clickable:t,children:n,onShow:e,onHide:l}){let c=Pt(null),u=Et();return Ot(()=>{if(c.current){let d=c.current.previousElementSibling;d.setAttribute("aria-describedby",u);let m=Lr(d,c.current,{placement:i||"auto",modifiers:[s1,bo,{name:"offset",options:{offset:a||[0,8]}}]});c.popper=m;let b=()=>{if(delete c.current.dataset.show,m.setOptions((g)=>({...g,modifiers:[...g.modifiers,{name:"eventListeners",enabled:!1}]})),l)l()},p=()=>{if(c.current.dataset.show=!0,m.setOptions((h)=>({...h,modifiers:[...h.modifiers,{name:"eventListeners",enabled:!0}]})),m.update(),e)e();let g=()=>{b(),document.removeEventListener("pointerdown",g)};document.addEventListener("pointerdown",g)};if(t)d.addEventListener("pointerup",p),c.current.addEventListener("pointerdown",(g)=>g.stopPropagation());else[["mouseenter",p],["mouseleave",b]].forEach(([g,h])=>d.addEventListener(g,h))}return()=>{}},[c]),G1(jt,{children:[n,G1("div",{ref:c,id:u,className:$t(mi.tooltip,o),role:"tooltip",children:[r,rn("div",{className:mi.arrow,"data-popper-arrow":!0})]})]})}f(":root{--main-button-size:2.75rem;--more-button-size:2.25rem;--arrow-size:.5rem;--arrow-inset:-.25rem;--arrow-rounding:.125rem}.d9vCIG_action-button-wrapper{flex-direction:column-reverse;transition:all .2s;display:flex;position:relative}.d9vCIG_button{cursor:pointer;background:var(--theme-primary);border:none;outline:none;flex-direction:column;justify-content:center;align-items:center;transition:background-color .2s;display:flex;position:relative}.d9vCIG_disabled{cursor:auto;background:var(--ui-black-transparent)}.d9vCIG_button:not(.d9vCIG_disabled):hover{background:var(--blocks-primary)}.d9vCIG_button:active{padding:inherit}.d9vCIG_main-button{width:var(--main-button-size);height:var(--main-button-size);box-shadow:0 0 0 4px var(--theme-transparent);z-index:var(--z-index-add-button);border-radius:100%;transition:transform,box-shadow .5s}.d9vCIG_main-button.d9vCIG_disabled{box-shadow:none}.d9vCIG_main-button:not(.d9vCIG_disabled):hover{box-shadow:0 0 0 6px var(--theme-transparent);transform:scale(1.1)}.d9vCIG_main-icon{width:calc(var(--main-button-size) - 1rem);height:calc(var(--main-button-size) - 1rem)}.d9vCIG_more-buttons-outer{background:var(--theme-tertiary);border-top-left-radius:var(--more-button-size);border-top-right-radius:var(--more-button-size);width:var(--more-button-size);margin-left:calc((var(--main-button-size) - var(--more-button-size))/2);margin-right:calc((var(--main-button-size) - var(--more-button-size))/2);bottom:calc(var(--main-button-size));margin-bottom:calc(var(--main-button-size)/-2);padding-bottom:calc(var(--main-button-size)/2);position:absolute;overflow:hidden}.d9vCIG_more-buttons{z-index:10;flex-direction:column;max-height:0;transition:max-height 1s}.d9vCIG_expanded .d9vCIG_more-buttons-outer{overflow:visible}.d9vCIG_expanded .d9vCIG_more-buttons{max-height:1000px}.d9vCIG_force-hidden .d9vCIG_more-buttons-outer{display:none}.d9vCIG_force-hidden .d9vCIG_more-Buttons{transition:all!important}.d9vCIG_more-buttons:first-child{border-top-right-radius:var(--more-button-size);border-top-left-radius:var(--more-button-size);overflow:hidden}.d9vCIG_more-button{width:var(--more-button-size);height:var(--more-button-size);background:var(--theme-tertiary)}.d9vCIG_more-icon{width:calc(var(--more-button-size) - 1rem);height:calc(var(--more-button-size) - 1rem)}.d9vCIG_tooltip{background:var(--blocks-primary)}");var D={moreButton:"d9vCIG_more-button",disabled:"d9vCIG_disabled",tooltip:"d9vCIG_tooltip",expanded:"d9vCIG_expanded",mainButton:"d9vCIG_main-button",moreIcon:"d9vCIG_more-icon","more-Buttons":"d9vCIG_more-Buttons",mainIcon:"d9vCIG_main-icon",forceHidden:"d9vCIG_force-hidden",moreButtons:"d9vCIG_more-buttons",actionButtonWrapper:"d9vCIG_action-button-wrapper",button:"d9vCIG_button",moreButtonsOuter:"d9vCIG_more-buttons-outer"};import{useCallback as fo}from"preact/hooks";import{jsx as ur,jsxs as tn}from"preact/jsx-runtime";function an({className:r,disabled:o,icon:i,tooltip:a,tooltipPlacement:t,moreButtons:n,onClick:e}){let l=F1(!1),c=F1(!1),u=fo((d)=>async(m)=>{c.value=!0,l.value=!1,d.onClick(m),await on(1),c.value=!1},[]);return tn("div",{className:bi(D.actionButtonWrapper,r,{[D.expanded]:l.value,[D.forceHidden]:c.value}),disabled:o,onPointerEnter:fo(()=>l.value=!0,[]),onPointerLeave:fo(()=>l.value=!1,[]),onClick:e,children:[ur("div",{className:D.moreButtonsOuter,children:ur("div",{className:D.moreButtons,onClick:fo((d)=>d.stopPropagation(),[]),children:n&&n.map((d,m)=>ur(po,{className:D.tooltip,content:d.tooltip,placement:t||"left",offset:[0,12],children:ur("button",{className:bi(D.button,D.moreButton),disabled:o,onClick:u(d),children:ur("img",{className:D.moreIcon,draggable:!1,src:d.icon})})},m))})}),ur(po,{className:D.tooltip,content:a,placement:t||"left",offset:[0,14],children:ur("button",{disabled:o,className:bi(D.button,D.mainButton),children:ur("img",{className:D.mainIcon,draggable:!1,src:i})})})]})}import{useCallback as wo,useId as il}from"preact/hooks";import{useSignal as ln}from"@preact/signals";import{classNames as nn}from"@blockcode/utils";f("._9lEAzG_input-form{height:2rem;font-size:var(--standard-font-size);color:var(--text-primary);border-style:solid;border-width:1px;border-color:var(--ui-black-transparent);cursor:text;box-shadow:none;text-overflow:ellipsis;white-space:nowrap;border-radius:2rem;outline:none;min-width:0;padding:0 .75rem;font-weight:700;transition:all .25s ease-out;overflow:hidden}._9lEAzG_input-form:hover{border-color:var(--theme-primary)}._9lEAzG_input-form:focus{border-color:var(--theme-primary);box-shadow:0 0 0 .25rem var(--theme-transparent)}._9lEAzG_input-small{text-overflow:clip;text-align:center;width:3rem;padding:0 .5rem}");var pi={inputSmall:"_9lEAzG_input-small",inputForm:"_9lEAzG_input-form"};import{jsx as en}from"preact/jsx-runtime";function fi(r){let{small:o,...i}=r;return en("input",{...i,className:nn(pi.inputForm,r.className,{[pi.inputSmall]:o})})}import{jsx as dn}from"preact/jsx-runtime";function cn({value:r,type:o,forceFocus:i,autoClear:a,enterSubmit:t,onSubmit:n,...e}){let l=ln(null),c=wo((b)=>{if(b.target.setSelectionRange(0,0),b.target.select(),a)l.value=null,b.target.value=""},[a]),u=wo((b)=>{let p=o==="number",g=p?!isNaN(l.value):!0;if(l.value!==null&&g&&n)n(p?Number(l.value):l.value,b);if(l.value=null,i)b.target.focus();if(a)b.target.value=""},[o,i,n]),d=wo((b)=>{if(b.key==="Enter"){if(b.target.blur(),t)u(b)}},[t]),m=wo((b)=>l.value=b.target.value,[]);return dn(fi,{...e,value:l.value===null?r:l.value,onFocus:c,onBlur:t?null:u,onChange:m,onInput:m,onKeyPress:d})}import{classNames as I1}from"@blockcode/utils";f(".g7iT9G_outlined{cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--form-radius);background:var(--ui-white);padding:var(--space)calc(var(--space)*1.5);user-select:none;color:var(--text-primary);font-weight:700;font-size:var(--standard-font-size)}.g7iT9G_outlined:focus-visible{outline:0}.g7iT9G_content{white-space:nowrap;flex-direction:row;justify-content:center;align-items:center;width:100%;display:flex}.g7iT9G_vertical-content{flex-direction:column}.g7iT9G_disabled{cursor:auto;opacity:.5}");var Mr={verticalContent:"g7iT9G_vertical-content",outlined:"g7iT9G_outlined",content:"g7iT9G_content",disabled:"g7iT9G_disabled"};import{jsx as L1}from"preact/jsx-runtime";function hr({className:r,vertical:o,disabled:i,title:a,onClick:t,onMouseDown:n,onMouseUp:e,children:l}){return L1("button",{className:I1(Mr.outlined,r,{[Mr.disabled]:i}),title:a,disabled:i,onClick:t,onPointerUp:e,onPointerDown:n,children:L1("div",{className:I1(Mr.content,{[Mr.verticalContent]:o}),children:l})})}import{useEffect as D1,useCallback as U1,useRef as bn,useId as pn}from"preact/hooks";import{classNames as fn}from"@blockcode/utils";import{cloneElement as un}from"preact";import{useId as hn,useCallback as z1}from"preact/hooks";import{classNames as _o,isDesktop as N1,flatChildren as vn}from"@blockcode/utils";f(".SBBo_G_menu{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space)/2);background:var(--ui-white);color:var(--text-primary);box-shadow:0 var(--space)var(--space)0 var(--ui-black-transparent);margin:0;padding:0;position:absolute;overflow:hidden}.SBBo_G_menu-item{white-space:nowrap;padding:0 calc(var(--space) + 2px);line-height:34px;font-size:var(--standard-font-size);justify-content:space-between;margin:0;display:flex}.SBBo_G_menu-item.SBBo_G_disabled{filter:opacity(.5)}.SBBo_G_menu-item.SBBo_G_disabled:hover{background:0 0}.SBBo_G_content{padding-right:calc(var(--space)*2);flex:1;display:flex}.SBBo_G_hotkey{font-weight:400}.SBBo_G_menu-item:hover{background:var(--theme-primary)}.SBBo_G_menu-item:hover:not(.SBBo_G_disabled){color:var(--ui-white)}.SBBo_G_menu-item.SBBo_G_hoverable{cursor:pointer}.SBBo_G_menu-section:not(:first-child){border-top:1px solid var(--ui-black-transparent)}.SBBo_G_menu-section-title{font-weight:400;font-size:var(--small-font-size);padding:var(--space)calc(var(--space) + 2px)0}");var V={menuItem:"SBBo_G_menu-item",menu:"SBBo_G_menu",disabled:"SBBo_G_disabled",content:"SBBo_G_content",hotkey:"SBBo_G_hotkey",menuSection:"SBBo_G_menu-section",hoverable:"SBBo_G_hoverable",menuSectionTitle:"SBBo_G_menu-section-title"};import{jsx as Jr,jsxs as q1,Fragment as mn}from"preact/jsx-runtime";function Rr({id:r,className:o,children:i,name:a}){return Jr("ul",{className:_o(V.menu,o),id:`${r||hn()}-menu-${a}`,children:i})}function Vr({className:r,style:o,disabled:i,label:a,href:t,hotkey:n,onClick:e,children:l}){let c=z1((u={})=>{if(i)return;if(e){e(u);return}if(t)window.open(t,"_blank")},[i,t,e]);if(N1&&n)Uo(n,c);return q1("li",{className:_o(V.menuItem,{[V.hoverable]:!i,[V.disabled]:i},r),style:o,onClick:c,onPointerDown:z1((u)=>u.stopPropagation(),[]),children:[Jr("div",{className:V.content,children:a||l}),N1&&n&&Jr("div",{className:V.hotkey,children:To(n)})]})}function Xr({disabled:r,title:o,titleClassName:i,children:a}){return q1(mn,{children:[o&&Jr("li",{className:_o(V.menuSection,V.menuSectionTitle,i),children:Jr("div",{className:V.content,children:o})}),vn(a).map((t,n)=>t&&un(t,{className:_o(t.props.className,{[V.menuSection]:!o&&n===0}),disabled:t.props.disabled||r,key:n}))]})}f("._27p4uG_context-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;transition:opacity .2s ease-out}._27p4uG_context-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu)}._27p4uG_context-menu{min-width:130px;box-shadow:0 0 .5rem #00000040}");var wi={contextMenu:"_27p4uG_context-menu",contextMenuWrapper:"_27p4uG_context-menu-wrapper"};import{jsx as xo,jsxs as _n,Fragment as wn}from"preact/jsx-runtime";var W1=(r)=>r.map((o,i)=>Array.isArray(o)?xo(Xr,{children:W1(o)},i):xo(Vr,{disabled:o.disabled,className:o.className,style:o.style,onClick:o.onClick,children:o.label},i)),Z1=(r=0,o=0)=>()=>({width:0,height:0,top:o,right:r,bottom:o,left:r}),T1={getBoundingClientRect:Z1()};function Hr({menuItems:r,className:o,position:i,children:a}){let t=bn(null),n=pn(),e=U1(()=>{if(t.popper)delete t.current.dataset.show,t.popper.setOptions((c)=>({...c,modifiers:[...c.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",e),document.removeEventListener("pointerdown",e)},[]),l=U1((c)=>{if(c.preventDefault?.(),t.popper)T1.getBoundingClientRect=Z1(c.clientX,c.clientY),t.current.dataset.show=!0,t.popper.setOptions((u)=>({...u,modifiers:[...u.modifiers,{name:"eventListeners",enabled:!0}]})),t.popper.update(),setTimeout(()=>{document.addEventListener("click",e),document.addEventListener("pointerdown",e)})},[]);return D1(()=>{if(i)l({clientX:i.x,clientY:i.y});else e()},[i]),D1(()=>{if(t.current){if(t.popper=Lr(T1,t.current,{placement:"bottom-end"}),a)t.current.previousElementSibling.addEventListener("contextmenu",l)}return()=>{t.popper=null}},[t]),_n(wn,{children:[a,xo("div",{ref:t,id:n,className:wi.contextMenuWrapper,role:"context",children:r&&xo(Rr,{name:n,className:fn(wi.contextMenu,o),children:W1(r)})})]})}import{useEffect as Cn,useRef as K1,useId as gn}from"preact/hooks";import{useSignal as kn}from"@preact/signals";import{classNames as _i}from"@blockcode/utils";f(".CLktXa_dropdown{border:1px solid var(--ui-black-transparent);border-radius:calc(var(--space)/2);padding:var(--space);color:var(--blocks-monitor-primary);cursor:pointer;justify-content:space-between;align-items:center;font-size:.8rem;display:flex;overflow:visible}.CLktXa_dropdown-menu-wrapper{background:var(--ui-transparent);opacity:0;z-index:-1;transition:opacity .2s ease-out}.CLktXa_dropdown-menu-wrapper[data-show]{opacity:1;z-index:var(--z-index-context-menu)}.CLktXa_dropdown-menu{min-width:130px;max-width:max-content;max-height:30vh;overflow:hidden auto;box-shadow:0 0 .5rem #00000040}.CLktXa_open{background:var(--ui-black-transparent)}.CLktXa_dropdown-icon{width:.5rem;height:.5rem}.CLktXa_dropdown-icon:last-child:not(:first-child){margin-left:.5rem}.CLktXa_caret-up{padding-top:.2rem;padding-bottom:0;transform:rotate(180deg)}");var pr={dropdownMenu:"CLktXa_dropdown-menu",dropdown:"CLktXa_dropdown",open:"CLktXa_open",dropdownMenuWrapper:"CLktXa_dropdown-menu-wrapper",caretUp:"CLktXa_caret-up",dropdownIcon:"CLktXa_dropdown-icon"};var S1="./assets/icon-dropdown-caret-y6kkj0v9.svg";import{jsx as Qr,jsxs as A1,Fragment as Bn}from"preact/jsx-runtime";var M1=(r)=>r.map((o,i)=>Array.isArray(o)?Qr(Xr,{children:M1(o)},i):Qr(Vr,{disabled:o.disabled,className:o.className,style:o.style,hotkey:o.hotkey,onClick:o.onClick,children:o.label},i));function yn({className:r,iconClassName:o,items:i,placement:a,children:t}){let n=K1(null),e=K1(null),l=gn(),c=kn(!1);return Cn(()=>{if(n.current&&e.current){let u=Lr(n.current,e.current,{placement:a||"bottom-start",modifiers:[bo,{name:"offset",options:{offset({placement:b}){let p=e.current?.firstChild.getBoundingClientRect();switch(b){case"bottom-start":return[0,0];case"top-end":return[-p.width,p.height];default:return[]}}}}]}),d=(b)=>{if(c.value=!1,e.current)delete e.current.dataset.show,u.setOptions((p)=>({...p,modifiers:[...p.modifiers,{name:"eventListeners",enabled:!1}]}));document.removeEventListener("click",d),document.removeEventListener("pointerdown",d)},m=(b)=>{c.value=!0,e.current.dataset.show=!0,u.setOptions((p)=>({...p,modifiers:[...p.modifiers,{name:"eventListeners",enabled:!0}]})),u.update(),setTimeout(()=>{document.addEventListener("click",d),document.addEventListener("pointerdown",d)})};e.current.previousElementSibling.addEventListener("pointerup",m)}},[n,e]),A1(Bn,{children:[A1("div",{ref:n,className:_i(pr.dropdown,r,{[pr.open]:c.value}),children:[t,Qr("img",{className:_i(pr.dropdownIcon,o,{[pr.caretUp]:c.value}),draggable:!1,src:S1})]}),Qr("div",{ref:e,id:l,className:pr.dropdownMenuWrapper,role:"context",children:i&&Qr(Rr,{name:l,className:_i(pr.dropdownMenu),children:M1(i)})})]})}import{useId as Ln}from"preact/hooks";import{classNames as X1}from"@blockcode/utils";import{classNames as Fn}from"@blockcode/utils";import{classNames as Gn}from"@blockcode/utils";f(".F7KjoW_delete-button{width:1.75rem;height:1.75rem;box-shadow:0px 0px 0px 2px var(--theme-transparent);background:var(--theme-primary);color:var(--ui-white);cursor:pointer;user-select:none;border:0;border-radius:50%;justify-content:center;align-items:center;margin:0;padding:0;transition:all .15s ease-out;display:none;position:absolute;overflow:hidden}.F7KjoW_delete-icon{user-select:none;transform-origin:50%;margin:.25rem;position:relative}");var xi={deleteButton:"F7KjoW_delete-button",deleteIcon:"F7KjoW_delete-icon"};var J1="./assets/icon-delete-seqp9ssx.svg";import{jsx as R1}from"preact/jsx-runtime";function V1({className:r,onClick:o}){return R1("button",{className:Gn(xi.deleteButton,r),onClick:o,children:R1("img",{className:xi.deleteIcon,src:J1})})}f("._230aGG_icon-selector-item{color:var(--text-primary);border:2px solid var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;user-select:none;flex-direction:column;justify-content:flex-start;font-size:.8rem;display:flex;position:relative}._230aGG_icon-selector-item:hover{border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_selector{display:none}._230aGG_selector:checked+._230aGG_icon-selector-item{box-shadow:0px 0px 0px 4px var(--theme-transparent);border:2px solid var(--theme-primary);background:var(--ui-white)}._230aGG_icon-outer{flex:1;justify-content:center;align-items:center;display:flex;position:relative}._230aGG_icon-inner{user-select:none;pointer-events:none;max-width:32px;max-height:32px}._230aGG_icon-order{font-weight:700;font-size:var(--small-font-size);position:absolute;top:3px;left:3px}._230aGG_icon-info{font-size:var(--small-font-size);color:var(--text-primary);user-select:none;border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;padding:.25rem}._230aGG_icon-title,._230aGG_icon-details{text-overflow:ellipsis;white-space:nowrap;min-width:0;overflow:hidden}._230aGG_icon-details{margin-top:.125rem;font-size:.5rem}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_icon-info{background:var(--theme-primary);color:var(--ui-white)}._230aGG_selector:checked+._230aGG_icon-selector-item ._230aGG_delete-button{display:flex;top:-.625rem;right:-.625rem}");var H={iconOrder:"_230aGG_icon-order",iconOuter:"_230aGG_icon-outer",iconDetails:"_230aGG_icon-details",iconInfo:"_230aGG_icon-info",selector:"_230aGG_selector",iconTitle:"_230aGG_icon-title",iconSelectorItem:"_230aGG_icon-selector-item",iconInner:"_230aGG_icon-inner",deleteButton:"_230aGG_delete-button"};import{useCallback as In}from"preact/hooks";import{jsx as zr,jsxs as Co}from"preact/jsx-runtime";function Ci({id:r,name:o,title:i,details:a,icon:t,order:n,checked:e,displayOrder:l,contextMenu:c,className:u,onSelect:d,onMouseDown:m,onMouseUp:b,onDelete:p}){let g=In((h)=>{h.stopPropagation(),p(h)},[p]);return Co(Hr,{menuItems:c,children:[zr("input",{checked:e,className:H.selector,id:`${r}-icon-${o}`,name:`${r}-icon`,type:"radio",value:o}),Co("label",{className:Fn(H.iconSelectorItem,u),for:`${r}-icon-${o}`,onClick:d,onPointerDown:m,onPointerUp:b,children:[Co("div",{className:H.iconOuter,children:[zr("img",{className:H.iconInner,src:t}),l&&zr("div",{className:H.iconOrder,children:n+1})]}),Co("div",{className:H.iconInfo,children:[zr("div",{className:H.iconTitle,children:i}),a&&zr("div",{className:H.iconDetails,children:a})]}),p&&zr(V1,{className:H.deleteButton,onClick:g})]})]})}f(".ipnJ9q_icon-selector-wrapper{background:var(--ui-white-transparent);overflow:auto}.ipnJ9q_items-wrapper{padding:calc(var(--space)/2);padding-bottom:var(--space);flex-flow:wrap;display:flex;overflow:hidden}.ipnJ9q_icon-item{box-sizing:border-box;width:calc((100%/var(--icon-per-row)) - var(--space));min-width:4rem;max-width:6rem;min-height:4rem;margin:calc(var(--space)/2)}");var go={iconSelectorWrapper:"ipnJ9q_icon-selector-wrapper",itemsWrapper:"ipnJ9q_items-wrapper",iconItem:"ipnJ9q_icon-item"};import{jsx as gi}from"preact/jsx-runtime";var ko=(r,o,i)=>(a)=>{if(i)i(r,o)};function zn({className:r,id:o,displayOrder:i,items:a,selectedIndex:t,selectedId:n,onDelete:e,onSelect:l,onMouseDown:c,onMouseUp:u}){let d=Ln();return gi("div",{className:X1(go.iconSelectorWrapper,r),children:gi("div",{className:go.itemsWrapper,children:a?.map((m,b)=>m.__hidden__?null:gi(Ci,{checked:b===t||m.id===n,displayOrder:i,className:X1(go.iconItem,m.className),contextMenu:m.contextMenu,details:m.details,icon:m.icon,id:o??d,name:b,order:m.order,title:m.name,onSelect:l&&ko(b,m,l),onMouseDown:c&&ko(b,m,c),onMouseUp:u&&ko(b,m,u),onDelete:e&&ko(b,m,e)},m.title))})})}import{useEffect as Vn,useCallback as Fi}from"preact/hooks";import{batch as Ii,useSignal as Li}from"@preact/signals";import{classNames as Bo}from"@blockcode/utils";import{classNames as Yr}from"@blockcode/utils";f(".FvkZfa_modal-overlay{background:var(--modal-overlay);z-index:var(--z-index-modal);backdrop-filter:blur(6px);display:flex;position:fixed;inset:0}.FvkZfa_modal-overlay.FvkZfa_red{background:color(from var(--error-primary)srgb r g b/.9)}.FvkZfa_modal-content{border:4px solid var(--ui-white-transparent);border-radius:var(--space);color:var(--text-primary);user-select:none;outline:none;align-self:flex-start;margin:100px auto;padding:0;overflow:hidden}.FvkZfa_modal-content.FvkZfa_full-screen{user-select:none;background:var(--ui-secondary);border:none;border-radius:0;flex-direction:column;width:100%;height:100%;margin:0;display:flex;position:absolute;overflow-y:auto}.FvkZfa_modal-header{height:var(--library-header-height);box-sizing:border-box;background:var(--theme-primary);flex-flow:row;justify-content:flex-start;width:100%;font-size:1rem;display:flex}.FvkZfa_red .FvkZfa_modal-header{background:var(--error-primary)}.FvkZfa_electron{padding-left:58px}.FvkZfa_header-item{color:var(--ui-white);user-select:none;align-items:center;padding:1rem;text-decoration:none;display:flex}.FvkZfa_header-item-title{user-select:none;letter-spacing:.4px;cursor:default;flex-grow:1;flex-shrink:0;justify-content:center;margin:0 -20rem 0 0;font-size:1rem;font-weight:400}.FvkZfa_full-screen .FvkZfa_header-item-title{margin:0 0 0 -20rem}.FvkZfa_header-item-close{z-index:1;flex-basis:20rem;justify-content:flex-end}.FvkZfa_header-item-back{z-index:1;flex-basis:20rem;order:-1;justify-content:flex-start}.FvkZfa_close-button{background:var(--ui-black-transparent);box-shadow:0 0 0 2px var(--ui-black-transparent);border:0;border-radius:50%;width:1.75rem;height:1.75rem;padding:0;transition:all .15s ease-out}.FvkZfa_close-button:hover{box-shadow:0px 0px 0px 4px var(--ui-black-transparent);transform:scale(1.1)}.FvkZfa_close-button img{margin:0 auto}.FvkZfa_back-button{color:var(--ui-white);white-space:nowrap;background:0 0;border:0;padding:0;font-size:1rem;font-weight:400}.FvkZfa_back-button img{height:1.5rem;margin-right:.5rem}");var U={headerItemClose:"FvkZfa_header-item-close",closeButton:"FvkZfa_close-button",headerItem:"FvkZfa_header-item",modalContent:"FvkZfa_modal-content",modalOverlay:"FvkZfa_modal-overlay",fullScreen:"FvkZfa_full-screen",headerItemBack:"FvkZfa_header-item-back",modalHeader:"FvkZfa_modal-header",backButton:"FvkZfa_back-button",red:"FvkZfa_red",electron:"FvkZfa_electron",headerItemTitle:"FvkZfa_header-item-title"};var H1="./assets/icon-back-gwek165q.svg";var Q1="./assets/icon-close-bazpdng8.svg";import{jsx as fr,jsxs as ki}from"preact/jsx-runtime";function yi({title:r,fullScreen:o,redStyle:i,onClose:a,className:t,headerClassName:n,children:e}){let{macosMenuBarStyled:l}=Vo();return fr("div",{className:Yr(U.modalOverlay,{[U.red]:i}),children:ki("div",{className:Yr(U.modalContent,t,{[U.fullScreen]:o}),children:[ki("div",{className:Yr(U.modalHeader,n,{[U.electron]:o&&l.value}),children:[fr("div",{className:Yr(U.headerItem,U.headerItemTitle),children:r}),fr("div",{className:Yr(U.headerItem,U.headerItemClose,{[U.headerItemBack]:o}),children:o?ki(hr,{className:U.backButton,onClick:a,children:[fr("img",{src:H1}),fr(K,{id:"core.modal.back",defaultMessage:"Back"})]}):fr(hr,{className:U.closeButton,onClick:a,children:fr("img",{src:Q1})})})]}),e]})})}import{classNames as E1}from"@blockcode/utils";f(".sO8W8q_filter{background:var(--ui-white);user-select:none;height:var(--library-filter-bar-height);border-radius:10rem;flex-direction:row;flex-grow:1;align-items:center;display:flex;position:relative}.sO8W8q_filter-icon{width:1rem;height:1rem;margin:.75rem .75rem .75rem 1rem;position:absolute;top:0;left:0}.sO8W8q_filter:focus-within{box-shadow:0 0 0 .25rem var(--theme-transparent)}.sO8W8q_close-icon-wrapper{opacity:0;pointer-events:none;cursor:default;border-radius:50%;justify-content:center;align-items:center;width:1.25rem;height:1.25rem;margin:.625rem;transition:opacity 50ms linear;display:flex;position:absolute;top:0;right:0;overflow:hidden}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper{pointer-events:auto;cursor:pointer;opacity:1;transition:opacity 50ms linear}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper:hover{transform:scale(1.2)}.sO8W8q_close-icon{user-select:none;margin:.25rem;transition:transform 85ms cubic-bezier(.78,1,1,1);position:relative;transform:translate(.5rem)}.sO8W8q_filter.sO8W8q_is-active .sO8W8q_close-icon-wrapper .sO8W8q_close-icon{transform:translate(0)}.sO8W8q_filter-input{height:var(--library-filter-bar-height);appearance:none;color:var(--text-primary);font-size:var(--standard-font-size);letter-spacing:.15px;cursor:text;background-color:#0000;border:0;outline:none;flex-grow:1;padding:.625rem 2rem .625rem 3rem}.sO8W8q_filter-input::placeholder{opacity:.5;color:var(--text-primary);letter-spacing:.15px;padding:0 0 0 .25rem;font-size:.875rem}");var wr={filterInput:"sO8W8q_filter-input",filter:"sO8W8q_filter",isActive:"sO8W8q_is-active",closeIcon:"sO8W8q_close-icon",closeIconWrapper:"sO8W8q_close-icon-wrapper",filterIcon:"sO8W8q_filter-icon"};var Y1="./assets/icon-filter-wecnwx09.svg";var O1="./assets/icon-close-1jzsw9nf.svg";import{jsx as yo,jsxs as Tn}from"preact/jsx-runtime";function P1({className:r,onChange:o,onClear:i,placeholder:a,query:t,inputClassName:n}){return Tn("div",{className:E1(r,wr.filter,{[wr.isActive]:t.length>0}),children:[yo("img",{className:wr.filterIcon,src:Y1}),yo("input",{type:"text",className:E1(wr.filterInput,n),placeholder:q(a),"data-value":t,value:t,onInput:o}),yo("div",{className:wr.closeIconWrapper,onClick:i,children:yo("img",{className:wr.closeIcon,src:O1})})]})}import{classNames as Nr}from"@blockcode/utils";f("._8P49xa_library-item{max-width:160px;height:160px;margin:var(--space);color:var(--text-primary);background:var(--ui-white);border-style:solid;border-width:2px;border-color:var(--ui-black-transparent);border-radius:var(--space);text-align:center;cursor:pointer;flex-direction:column;flex-basis:160px;justify-content:flex-start;align-items:center;padding:1rem 1rem 0;font-size:.9rem;display:flex;position:relative}._8P49xa_library-item._8P49xa_large{flex-basis:220px;max-width:220px;height:220px}._8P49xa_library-item:hover{border-width:2px;border-color:var(--theme-primary)}._8P49xa_hidden{display:none}._8P49xa_disabled{opacity:.5;cursor:auto}._8P49xa_disabled:hover{border-color:var(--ui-black-transparent)}._8P49xa_library-item-image-container-wrapper{width:100%;height:100px;position:relative}._8P49xa_library-item-image-container{justify-content:center;align-items:center;width:100%;height:100px;display:flex;position:absolute;overflow:hidden}._8P49xa_large ._8P49xa_library-item-image-container-wrapper,._8P49xa_large ._8P49xa_library-item-image-container{height:160px}._8P49xa_library-item-inset-image-container{background-color:var(--blocks-primary);border:.25rem solid var(--ui-white);border-radius:.5rem;justify-content:center;align-self:flex-start;align-items:center;width:3.5rem;height:3.5rem;margin-top:-2.5rem;margin-left:1rem;display:flex;position:relative;overflow:hidden}._8P49xa_library-item-image{user-select:none;-webkit-user-drag:none;max-width:100%;max-height:100%}._8P49xa_library-item-inset-image{width:2.5rem}._8P49xa_library-item-name,._8P49xa_library-item-detial{text-align:center;text-overflow:ellipsis;white-space:nowrap;width:100%;min-width:0;margin:.25rem 0;overflow:hidden}._8P49xa_library-item-detial{font-size:var(--small-font-size);color:var(--text-primary);margin:-.2rem 0 0}._8P49xa_featured-item{flex-basis:300px;align-self:stretch;max-width:300px;height:auto;padding:0;overflow:hidden}._8P49xa_featured-image-container{position:relative}._8P49xa_featured-image{user-select:none;-webkit-user-drag:none;width:100%}._8P49xa_featured-title{margin:calc(var(--space)*1.5)0 calc(var(--space)*2);font-weight:700}._8P49xa_featured-text{text-align:left;width:300px;padding:10px 10px 10px 1.25rem;font-weight:700}._8P49xa_featured-description{padding-top:.3125rem;padding-bottom:.25rem;font-weight:400;line-height:1.375rem;display:block}._8P49xa_featured-description a{color:var(--theme-primary)}._8P49xa_featured-metadata{width:100%;font-size:var(--standard-font-size);color:var(--text-primary);opacity:.75;text-align:left;flex-direction:row;align-items:flex-start;padding:0 1.25rem 1rem;display:flex}._8P49xa_featured-requirement,._8P49xa_featured-collaboration{flex-direction:column;width:100%;display:flex}._8P49xa_featured-metadata-detail{height:100%;padding-top:.4rem;font-weight:700}._8P49xa_featured-metadata-detail img{margin-right:.25rem}._8P49xa_corner-text{color:var(--ui-white);transform:translate(calc(2*var(--space)),calc(2*var(--space)));border-radius:1rem;padding:.5rem 1rem;font-size:.875rem;font-weight:700;position:absolute;box-shadow:0 0 .5rem #00000040}._8P49xa_corner-text._8P49xa_coming-soon-text{background:var(--blocks-primary)}._8P49xa_corner-text._8P49xa_preview-text{background:var(--text-primary)}");var w={previewText:"_8P49xa_preview-text",featuredMetadataDetail:"_8P49xa_featured-metadata-detail",libraryItemInsetImageContainer:"_8P49xa_library-item-inset-image-container",libraryItemName:"_8P49xa_library-item-name",featuredImage:"_8P49xa_featured-image",disabled:"_8P49xa_disabled",libraryItemDetial:"_8P49xa_library-item-detial",libraryItem:"_8P49xa_library-item",libraryItemImageContainerWrapper:"_8P49xa_library-item-image-container-wrapper",featuredItem:"_8P49xa_featured-item",featuredImageContainer:"_8P49xa_featured-image-container",featuredTitle:"_8P49xa_featured-title",featuredMetadata:"_8P49xa_featured-metadata",featuredDescription:"_8P49xa_featured-description",featuredText:"_8P49xa_featured-text",cornerText:"_8P49xa_corner-text",featuredCollaboration:"_8P49xa_featured-collaboration",hidden:"_8P49xa_hidden",large:"_8P49xa_large",libraryItemImage:"_8P49xa_library-item-image",comingSoonText:"_8P49xa_coming-soon-text",libraryItemImageContainer:"_8P49xa_library-item-image-container",libraryItemInsetImage:"_8P49xa_library-item-inset-image",featuredRequirement:"_8P49xa_featured-requirement"};var $1="./assets/icon-clang-r94n2hbq.svg";var j1="./assets/icon-blocks-czd4m8e2.svg";var ra="./assets/icon-micropython-qstw6yk4.svg";var oa="./assets/icon-bluetooth-0v0grsw2.svg";var ia="./assets/icon-internet-ce656mar.svg";import{jsx as _,jsxs as ar}from"preact/jsx-runtime";var Mn=(r)=>(o)=>{o.preventDefault(),o.stopPropagation(),window.open(r,"_blank")};function Bi(r){if(r.custom)return _("div",{className:Nr(w.libraryItem,r.className,{[w.disabled]:r.disabled,[w.large]:r.large&&!r.featured,[w.featuredItem]:r.featured&&!r.large}),onClick:!r.disabled&&r.onSelect,children:r.custom});if(!r.featured)return ar("div",{className:Nr(w.libraryItem,r.className,{[w.large]:r.large}),onClick:!r.disabled&&r.onSelect,children:[_("div",{className:w.libraryItemImageContainerWrapper,children:_("div",{className:w.libraryItemImageContainer,children:_("img",{className:w.libraryItemImage,onPointerEnter:r.onMouseEnter,onPointerLeave:r.onMouseLeave,src:r.image})})}),r.name&&_("span",{className:w.libraryItemName,children:r.name}),(r.copyright||r.author)&&_("span",{className:w.libraryItemDetial,children:r.copyright?`© ${r.copyright}`:r.author})]});return ar("div",{className:Nr(w.libraryItem,r.className,{[w.disabled]:r.disabled,[w.featuredItem]:r.featured}),onClick:!r.disabled&&r.onSelect,children:[ar("div",{className:w.featuredImageContainer,children:[r.disabled?_("div",{className:Nr(w.cornerText,w.comingSoonText),children:_(K,{id:"core.library.comingSoon",defaultMessage:"Coming Soon"})}):r.beta&&_("div",{className:Nr(w.cornerText,w.previewText),children:_(K,{id:"core.library.beta",defaultMessage:"Beta"})}),_("img",{className:w.featuredImage,src:r.image})]}),r.icon&&_("div",{className:w.libraryItemInsetImageContainer,children:_("img",{className:w.libraryItemInsetImage,src:r.icon})}),r.title?_("div",{className:Nr(w.libraryItemName,w.featuredTitle),children:r.title}):ar("div",{className:w.featuredText,children:[_("span",{className:w.libraryItemName,children:r.name}),_("br",{}),ar("span",{className:w.featuredDescription,children:[r.description,_("br",{}),r.uri?_("a",{onClick:Mn(r.uri),children:_(K,{id:"core.library.readmore",defaultMessage:"Read more..."})}):""]})]}),(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired||r.collaborator)&&ar("div",{className:w.featuredMetadata,children:[_("div",{className:w.featuredRequirement,children:(r.blocksRequired||r.micropythonRequired||r.bluetoothRequired||r.internetRequired)&&ar("div",{children:[_("div",{children:r.blocksRequired||r.micropythonRequired?_(K,{id:"core.library.programming",defaultMessage:"Programming"}):_(K,{id:"core.library.requires",defaultMessage:"Requires"})}),ar("div",{className:w.featuredMetadataDetail,children:[r.bluetoothRequired&&_("img",{src:oa}),r.internetRequired&&_("img",{src:ia}),r.blocksRequired&&_("img",{src:j1}),r.micropythonRequired&&_("img",{src:ra}),r.clangRequired&&_("img",{src:$1})]})]})}),_("div",{className:w.featuredCollaboration,children:r.collaborator&&ar("div",{children:[_("div",{children:_(K,{id:"core.library.collaboration",defaultMessage:"Collaboration with"})}),_("div",{className:w.featuredMetadataDetail,children:r.collaborator})]})})]})]})}import{classNames as Jn}from"@blockcode/utils";f(".BETjoW_tag-button{background:var(--theme-primary);color:var(--ui-white);height:var(--library-filter-bar-height);border:0;border-radius:1.375rem;padding:.625rem 1rem}.BETjoW_active{background:var(--data-primary)}");var si={tagButton:"BETjoW_tag-button",active:"BETjoW_active"};import{jsx as Rn}from"preact/jsx-runtime";function Gi({active:r,className:o,onClick:i,children:a}){return Rn(hr,{className:Jn(o,si.tagButton,{[si.active]:r}),onClick:i,children:a})}f('.RgwUta_library-scroll-grid{background:var(--ui-secondary);height:auto;height:calc(100% - var(--library-header-height));flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;padding:.5rem;display:flex;overflow-y:auto}.RgwUta_library-scroll-grid.RgwUta_withFilterBar{height:calc(100% - var(--library-header-height) - var(--library-filter-bar-height) - 2rem)}.RgwUta_filter-bar{height:calc(var(--library-filter-bar-height) + 2rem);background-color:var(--theme-transparent);flex-direction:row;justify-content:flex-start;align-items:center;padding:0 1rem;display:flex}.RgwUta_filter-bar-item{margin-right:.75rem;font-size:.875rem}.RgwUta_filter{flex-grow:0}.RgwUta_filter-input{width:11.5rem;transition:all .2s}.RgwUta_filter-input:focus,.RgwUta_filter-input:not([data-value=""]){width:18.75rem}.RgwUta_divider{height:var(--library-filter-bar-height);border-right:1px dashed var(--ui-black-transparent);margin-right:.75rem;transform:scaleY(1.39)}.RgwUta_tag-wrapper{height:var(--library-filter-bar-height);flex-flow:wrap;display:flex;overflow:hidden}.RgwUta_spinner-wrapper{justify-content:center;align-items:center;width:100%;height:100%;display:flex}');var T={filterBarItem:"RgwUta_filter-bar-item",libraryScrollGrid:"RgwUta_library-scroll-grid",filterInput:"RgwUta_filter-input",filter:"RgwUta_filter",withFilterBar:"RgwUta_withFilterBar",filterBar:"RgwUta_filter-bar",tagWrapper:"RgwUta_tag-wrapper",spinnerWrapper:"RgwUta_spinner-wrapper",divider:"RgwUta_divider"};import{jsx as tr,jsxs as zi}from"preact/jsx-runtime";function Xn({items:r,title:o,filterable:i,filterPlaceholder:a,emptyMessage:t,tags:n,large:e,featured:l,onClose:c}){let u=Li("all"),d=Li(""),m=Li([]);Vn(()=>{if(!r)return;m.value=r.filter((h)=>{if(h.hidden)return!1;if(h.eeggTag)return h.eeggTag===u.value;let x=d.value.toLowerCase(),B=q(h.name||"").toLowerCase();if(h.eegg)return h.eegg===x||B===x;if(u.value!=="all")return h.tags?h.tags.includes(u.value):!1;if(x.length===0)return!0;if(h.id?.toLowerCase().includes(x))return!0;if(B.includes(x))return!0;if(h.author){if(q(h.author).toLowerCase().includes(x))return!0}if(h.copyright){if(q(h.copyright).toLowerCase().includes(x))return!0}if(h.collaborator){if(q(h.collaborator).toLowerCase().includes(x))return!0}return!1})},[r,u.value,d.value]);let b=Fi((h)=>{Ii(()=>{u.value="all",d.value=h.target.value})},[]),p=Fi(()=>{Ii(()=>{u.value="all",d.value=""})},[]),g=Fi((h)=>()=>{Ii(()=>{u.value=h,d.value=""})},[]);return zi(yi,{fullScreen:!0,title:o,onClose:c,children:[(i||n)&&zi("div",{className:T.filterBar,children:[i&&tr(P1,{className:Bo(T.filterBarItem,T.filter),inputClassName:T.filterInput,query:d.value,placeholder:a,onChange:b,onClear:p}),i&&n&&tr("div",{className:T.divider}),n&&zi("div",{className:T.tagWrapper,children:[tr(Gi,{active:u==="all",className:Bo(T.filterBarItem,T.tagButton),onClick:g("all"),children:tr(K,{id:"core.library.all",defaultMessage:"All"})}),n.map((h,x)=>tr(Gi,{active:u===h.tag.toLowerCase(),className:Bo(T.filterBarItem,T.tagButton),onClick:g(h.tag.toLowerCase()),children:h.label},x))]})]}),tr("div",{className:Bo(T.libraryScrollGrid,{[T.withFilterBar]:i||n}),children:m.value?.length?m.value.map((h,x)=>tr(Hr,{menuItems:h.contextMenu,children:tr(Bi,{id:h.id??x,large:e,featured:l,custom:h.custom,className:h.className,disabled:h.disabled,beta:h.beta||h.preview,icon:h.icon,image:h.image,name:h.name,title:h.title,description:h.description,uri:h.uri,author:h.author,copyright:h.copyright,bluetoothRequired:h.bluetoothRequired,internetRequired:h.internetRequired,collaborator:h.collaborator,onMouseEnter:h.onMouseEnter,onMouseLeave:h.onMouseLeave,onSelect:h.onSelect})},h.id??x)):tr("div",{className:T.spinnerWrapper,children:t??""})})]})}import{classNames as aa}from"@blockcode/utils";f("._0rCRoa_input-group{flex-direction:row;align-items:center;display:inline-flex}._0rCRoa_input-group-column{flex-direction:column;align-items:flex-start;display:inline-flex}._0rCRoa_input-group-column span{margin-bottom:.25rem}._0rCRoa_input-label,._0rCRoa_input-label-secondary{font-size:var(--standard-font-size);user-select:none;cursor:default;white-space:nowrap;margin-right:.5rem}._0rCRoa_input-label{font-weight:700}");var Or={inputGroupColumn:"_0rCRoa_input-group-column",inputGroup:"_0rCRoa_input-group",inputLabel:"_0rCRoa_input-label",inputLabelSecondary:"_0rCRoa_input-label-secondary"};import{jsxs as ta}from"preact/jsx-runtime";function Hn(r){return ta("label",{className:aa({[Or.inputGroupColumn]:r.above,[Or.inputGroup]:!r.above},r.className),children:[ta("span",{className:aa({[Or.inputLabelSecondary]:r.secondary,[Or.inputLabel]:!r.secondary}),children:[" ",r.text]}),r.children]})}import{classNames as Qn}from"@blockcode/utils";f('._9Bnnoq_spinner{border-style:solid;border-width:.1875rem;border-color:var(--ui-white-transparent);border-radius:50%;width:1.25rem;height:1.25rem;display:inline-block;position:relative;box-sizing:content-box!important}._9Bnnoq_spinner:before,._9Bnnoq_spinner:after{content:"";border-radius:50%;width:1.25rem;height:1.25rem;display:block}._9Bnnoq_spinner:after{border:.1875rem solid #0000;border-top-color:var(--ui-white);animation:1.5s cubic-bezier(.4,.1,.4,1) infinite _9Bnnoq_spin;position:absolute;top:-.1875rem;left:-.1875rem}._9Bnnoq_small,._9Bnnoq_small:before,._9Bnnoq_small:after{width:.5rem;height:.5rem}._9Bnnoq_large,._9Bnnoq_large:before,._9Bnnoq_large:after{width:2.5rem;height:2.5rem}@keyframes _9Bnnoq_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._9Bnnoq_spinner._9Bnnoq_success{border-color:var(--blocks-transparent)}._9Bnnoq_spinner._9Bnnoq_success:after{border-top-color:var(--blocks-primary)}._9Bnnoq_spinner._9Bnnoq_warn{border-color:var(--error-transparent)}._9Bnnoq_spinner._9Bnnoq_warn:after{border-top-color:var(--error-primary)}._9Bnnoq_spinner._9Bnnoq_info{border-color:var(--ui-white-transparent)}._9Bnnoq_spinner._9Bnnoq_info:after{border-top-color:var(--ui-white)}._9Bnnoq_spinner._9Bnnoq_primary{border-color:var(--theme-transparent)}._9Bnnoq_spinner._9Bnnoq_primary:after{border-top-color:var(--theme-primary)}');var Er={spinner:"_9Bnnoq_spinner",success:"_9Bnnoq_success",small:"_9Bnnoq_small",warn:"_9Bnnoq_warn",spin:"_9Bnnoq_spin",large:"_9Bnnoq_large",info:"_9Bnnoq_info",primary:"_9Bnnoq_primary"};import{jsx as On}from"preact/jsx-runtime";function Yn({className:r,level:o,small:i,large:a}){return On("div",{className:Qn(r,Er.spinner,Er[o||"info"],{[Er.small]:i,[Er.large]:a})})}import{useCallback as En}from"preact/hooks";import{classNames as Pn}from"@blockcode/utils";f(".G1JGNa_toggle-button{filter:saturate(0);min-width:calc(2rem + 2px);height:calc(2rem + 2px);margin-left:-1px;padding:.375rem!important}.G1JGNa_toggle-button:disabled{cursor:not-allowed;filter:grayscale()}.G1JGNa_toggle-button.G1JGNa_audo-width{width:auto}.G1JGNa_button-icon{margin:auto}.G1JGNa_toggle-button-first{border-top-right-radius:0;border-bottom-right-radius:0}.G1JGNa_toggle-button-middle{border-radius:0}.G1JGNa_toggle-button-last{border-top-left-radius:0;border-bottom-left-radius:0}.G1JGNa_toggle-button-actived{border:1px solid var(--theme-highlight);background:var(--theme-light-transparent);filter:none;z-index:1}.G1JGNa_button-text{flex:auto}");var nr={buttonIcon:"G1JGNa_button-icon",toggleButton:"G1JGNa_toggle-button",toggleButtonMiddle:"G1JGNa_toggle-button-middle",buttonText:"G1JGNa_button-text",toggleButtonFirst:"G1JGNa_toggle-button-first",toggleButtonLast:"G1JGNa_toggle-button-last",audoWidth:"G1JGNa_audo-width",toggleButtonActived:"G1JGNa_toggle-button-actived"};import{jsx as so,Fragment as jn}from"preact/jsx-runtime";function $n({disabled:r,items:o,value:i,onChange:a}){let t=o.length-1;return so(jn,{children:o.map((n,e)=>so(hr,{disabled:n.disabled||r,className:Pn(nr.toggleButton,{[nr.autoWidth]:n.title&&!n.icon,[nr.toggleButtonFirst]:e===0,[nr.toggleButtonMiddle]:e>0&&e<t,[nr.toggleButtonLast]:e===t,[nr.toggleButtonActived]:!r&&i===n.value}),onClick:En(()=>a?.(n.value),[a]),children:n.icon?so("img",{src:n.icon,className:nr.buttonIcon,title:q(n.title)}):so("div",{className:nr.buttonText,children:q(n.title)})},e))})}var qi=Symbol.for,_r=Symbol("kCapture"),ca=qi("events.errorMonitor"),r0=Symbol("events.maxEventTargetListeners"),o0=Symbol("events.maxEventTargetListenersWarned"),na=qi("nodejs.rejection"),i0=qi("nodejs.rejection"),ea=Array.prototype.slice,xr=10,Q=function(r){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[_r]=r?.captureRejections?Boolean(r?.captureRejections):C[_r])this.emit=e0},C=Q.prototype={};C._events=void 0;C._eventsCount=0;C._maxListeners=void 0;C.setMaxListeners=function(r){return Di(r,"setMaxListeners",0),this._maxListeners=r,this};C.constructor=Q;C.getMaxListeners=function(){return this?._maxListeners??xr};function da(r,o){var{_events:i}=r;if(o[0]??=Error("Unhandled error."),!i)throw o[0];var a=i[ca];if(a)for(var t of ea.call(a))t.apply(r,o);var n=i.error;if(!n)throw o[0];for(var t of ea.call(n))t.apply(r,o);return!0}function a0(r,o,i,a){o.then(void 0,function(t){queueMicrotask(()=>t0(r,t,i,a))})}function t0(r,o,i,a){if(typeof r[na]==="function")r[na](o,i,...a);else try{r[_r]=!1,r.emit("error",o)}finally{r[_r]=!0}}var n0=function(r,...o){if(r==="error")return da(this,o);var{_events:i}=this;if(i===void 0)return!1;var a=i[r];if(a===void 0)return!1;let t=a.length>1?a.slice():a;for(let n=0,{length:e}=t;n<e;n++){let l=t[n];switch(o.length){case 0:l.call(this);break;case 1:l.call(this,o[0]);break;case 2:l.call(this,o[0],o[1]);break;case 3:l.call(this,o[0],o[1],o[2]);break;default:l.apply(this,o);break}}return!0},e0=function(r,...o){if(r==="error")return da(this,o);var{_events:i}=this;if(i===void 0)return!1;var a=i[r];if(a===void 0)return!1;let t=a.length>1?a.slice():a;for(let n=0,{length:e}=t;n<e;n++){let l=t[n],c;switch(o.length){case 0:c=l.call(this);break;case 1:c=l.call(this,o[0]);break;case 2:c=l.call(this,o[0],o[1]);break;case 3:c=l.call(this,o[0],o[1],o[2]);break;default:c=l.apply(this,o);break}if(c!==void 0&&typeof c?.then==="function"&&c.then===Promise.prototype.then)a0(this,c,r,o)}return!0};C.emit=n0;C.addListener=function(r,o){Pr(o);var i=this._events;if(!i)i=this._events={__proto__:null},this._eventsCount=0;else if(i.newListener)this.emit("newListener",r,o.listener??o);var a=i[r];if(!a)i[r]=[o],this._eventsCount++;else{a.push(o);var t=this._maxListeners??xr;if(t>0&&a.length>t&&!a.warned)ua(this,r,a)}return this};C.on=C.addListener;C.prependListener=function(r,o){Pr(o);var i=this._events;if(!i)i=this._events={__proto__:null},this._eventsCount=0;else if(i.newListener)this.emit("newListener",r,o.listener??o);var a=i[r];if(!a)i[r]=[o],this._eventsCount++;else{a.unshift(o);var t=this._maxListeners??xr;if(t>0&&a.length>t&&!a.warned)ua(this,r,a)}return this};function ua(r,o,i){i.warned=!0;let a=Error(`Possible EventEmitter memory leak detected. ${i.length} ${String(o)} listeners added to [${r.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);a.name="MaxListenersExceededWarning",a.emitter=r,a.type=o,a.count=i.length,console.warn(a)}function ha(r,o,...i){this.removeListener(r,o),o.apply(this,i)}C.once=function(r,o){Pr(o);let i=ha.bind(this,r,o);return i.listener=o,this.addListener(r,i),this};C.prependOnceListener=function(r,o){Pr(o);let i=ha.bind(this,r,o);return i.listener=o,this.prependListener(r,i),this};C.removeListener=function(r,o){Pr(o);var{_events:i}=this;if(!i)return this;var a=i[r];if(!a)return this;var t=a.length;let n=-1;for(let e=t-1;e>=0;e--)if(a[e]===o||a[e].listener===o){n=e;break}if(n<0)return this;if(n===0)a.shift();else a.splice(n,1);if(a.length===0)delete i[r],this._eventsCount--;return this};C.off=C.removeListener;C.removeAllListeners=function(r){var{_events:o}=this;if(r&&o){if(o[r])delete o[r],this._eventsCount--}else this._events={__proto__:null};return this};C.listeners=function(r){var{_events:o}=this;if(!o)return[];var i=o[r];if(!i)return[];return i.map((a)=>a.listener??a)};C.rawListeners=function(r){var{_events:o}=this;if(!o)return[];var i=o[r];if(!i)return[];return i.slice()};C.listenerCount=function(r){var{_events:o}=this;if(!o)return 0;return o[r]?.length??0};C.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};C[_r]=!1;function l0(r,o,i){var a=i?.signal;if(va(a,"options.signal"),a?.aborted)throw new Ni(void 0,{cause:a?.reason});let{resolve:t,reject:n,promise:e}=$newPromiseCapability(Promise),l=(d)=>{if(r.removeListener(o,c),a!=null)Go(a,"abort",u);n(d)},c=(...d)=>{if(typeof r.removeListener==="function")r.removeListener("error",l);if(a!=null)Go(a,"abort",u);t(d)};if(la(r,o,c,{once:!0}),o!=="error"&&typeof r.once==="function")r.once("error",l);function u(){Go(r,o,c),Go(r,"error",l),n(new Ni(void 0,{cause:a?.reason}))}if(a!=null)la(a,"abort",u,{once:!0});return e}function c0(r,o){return r.listeners(o)}function d0(r,...o){Di(r,"setMaxListeners",0);var i;if(o&&(i=o.length))for(let a=0;a<i;a++)o[a].setMaxListeners(r);else xr=r}function u0(r,o){return r.listenerCount(o)}function Go(r,o,i,a){if(typeof r.removeListener==="function")r.removeListener(o,i);else r.removeEventListener(o,i,a)}function la(r,o,i,a){if(typeof r.on==="function")if(a.once)r.once(o,i);else r.on(o,i);else r.addEventListener(o,i,a)}class Ni extends Error{constructor(r="The operation was aborted",o=void 0){if(o!==void 0&&typeof o!=="object")throw qr("options","Object",o);super(r,o);this.code="ABORT_ERR",this.name="AbortError"}}function qr(r,o,i){let a=TypeError(`The "${r}" argument must be of type ${o}. Received ${i}`);return a.code="ERR_INVALID_ARG_TYPE",a}function h0(r,o,i){let a=RangeError(`The "${r}" argument is out of range. It must be ${o}. Received ${i}`);return a.code="ERR_OUT_OF_RANGE",a}function va(r,o){if(r!==void 0&&(r===null||typeof r!=="object"||!("aborted"in r)))throw qr(o,"AbortSignal",r)}function Di(r,o,i,a){if(typeof r!=="number")throw qr(o,"number",r);if(i!=null&&r<i||a!=null&&r>a||(i!=null||a!=null)&&Number.isNaN(r))throw h0(o,`${i!=null?`>= ${i}`:""}${i!=null&&a!=null?" && ":""}${a!=null?`<= ${a}`:""}`,r)}function Pr(r){if(typeof r!=="function")throw TypeError("The listener must be a function")}function v0(r,o){if(typeof r!=="boolean")throw qr(o,"boolean",r)}function m0(r){return r?._maxListeners??xr}function b0(r,o){if(r===void 0)throw qr("signal","AbortSignal",r);if(va(r,"signal"),typeof o!=="function")throw qr("listener","function",o);let i;if(r.aborted)queueMicrotask(()=>o());else r.addEventListener("abort",o,{__proto__:null,once:!0}),i=()=>{r.removeEventListener("abort",o)};return{__proto__:null,[Symbol.dispose](){i?.()}}}Object.defineProperties(Q,{captureRejections:{get(){return C[_r]},set(r){v0(r,"EventEmitter.captureRejections"),C[_r]=r},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>{return xr},set:(r)=>{Di(r,"defaultMaxListeners",0),xr=r}},kMaxEventTargetListeners:{value:r0,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:o0,enumerable:!1,configurable:!1,writable:!1}});Object.assign(Q,{once:l0,getEventListeners:c0,getMaxListeners:m0,setMaxListeners:d0,EventEmitter:Q,usingDomains:!1,captureRejectionSymbol:i0,errorMonitor:ca,addAbortListener:b0,init:Q,listenerCount:u0});var p0=new TextEncoder;class ma extends Q{constructor(r){super();this._port=r,this._reader=null,r._serial=this,this._port.ondisconnect=()=>{this.emit("disconnect",Error("Unexpectedly disconnected"))},this.setMaxListeners(0)}get port(){return this._port}dispose(){this.close().then(()=>{this._port=null})}getInfo(){return this.port.getInfo()}open(r){return new Promise((o,i)=>{this.port.open(r).then(()=>{let a=this.port.readable.getReader(),t=()=>{a.read().then(({value:n,done:e})=>{if(n)this.emit("data",n);if(e)a.releaseLock();else t()}).catch((n)=>{this.emit("error",n)})};this._reader=a,this.emit("connect"),t(),o()}).catch((a)=>{this.handleDisconnectError(a)})})}close(r=!0){if(r)this.emit("disconnect");return new Promise((o,i)=>{if(this._reader)this._reader.cancel().then(()=>this.port.close()).then(o).catch(i);else this.port.close().then(o).catch(i);this._reader=null})}write(r,o="text"){return new Promise((i,a)=>{let t=this.port.writable.getWriter();r=o==="text"?p0.encode(r):r,t.write(r).then(()=>{t.releaseLock(),i()}).catch((n)=>{this.emit("error",n)})})}setSignals(r){this.port.setSignals(r)}handleDisconnectError(r){this.emit("error",r),this.close()}}import{Base64Utils as f0}from"@blockcode/utils";class ba extends Q{constructor(r){super();this._server=r,this.device._ble=this,this.setMaxListeners(0)}get server(){return this._server}get device(){return this.server.device}dispose(){this.close(),this._server=null}getInfo(){return{id:this.device.id,name:this.device.name}}open(){return this._manualDisconnect=!1,new Promise((r)=>{this.server.connect().then(()=>{let o=(i)=>{this.device.removeEventListener("gattserverdisconnected",o);let a;if(this._manualDisconnect!==!0)a=Error("Unexpectedly disconnected");this.emit("disconnect",a),this.close(),this._manualDisconnect=!1};this.device.addEventListener("gattserverdisconnected",o),this.emit("connect"),r()}).catch((o)=>{this.handleDisconnectError(o)})})}close(){this._manualDisconnect=!0,this.server.disconnect()}get connected(){return!!this.server?.connected}startNotifications(r,o){return this._server.getPrimaryService(r).then((i)=>i.getCharacteristic(o)).then((i)=>{i.stopNotifications(),i.oncharacteristicvaluechanged=(a)=>{let t=a.target.value,n=new Uint8Array(t.buffer);this.emit("data",n)},i.startNotifications()}).catch((i)=>{this.emit("error",i)})}read(r,o,i=!1){return this._server.getPrimaryService(r).then((a)=>a.getCharacteristic(o)).then((a)=>{if(i)a.stopNotifications(),a.oncharacteristicvaluechanged=(t)=>{let n=t.target.value,e=new Uint8Array(n.buffer);this.emit("data",e)},a.startNotifications();return a.readValue()}).then((a)=>({message:new Uint8Array(a.buffer)})).catch((a)=>{this.emit("error",a)})}write(r,o,i,a=null,t=null){let n=a==="base64"?f0.base64ToUint8Array(i):i;return this._server.getPrimaryService(r).then((e)=>e.getCharacteristic(o)).then((e)=>{if(t&&e.writeValueWithResponse)return e.writeValueWithResponse(n);if(t===!1&&e.writeValueWithoutResponse)return e.writeValueWithoutResponse(n);return e.writeValue(n)}).catch((e)=>{this.emit("error",e)})}handleDisconnectError(r){console.log(r),this.emit("error",r),this.close()}}export{Ct as useProjectContext,Ka as useLocalesContext,Vo as useAppContext,Pi as translate,fa as themeColors,Xa as showSplash,To as showHotkey,j as setModified,dt as setMeta,tt as setMacosMenuBarStyled,Sa as setLanguage,Uo as setHotkey,c1 as setFile,d1 as setAsset,ot as setAppState,Ya as setAlert,ht as renameProject,it as openUserStorage,ja as openTab,Oa as openPromptModal,_t as openProject,Pa as openLayout,eo as openFile,Eo as openAsset,q as maybeTranslate,ut as isModifyType,Ha as hideSplash,mt as getFile,ft as getAsset,bt as delFile,wt as delAsset,t1 as delAlert,at as closeUserStorage,Ea as closePromptModal,xt as closeProject,$a as closeLayout,Wo as clearHotkeys,rt as addTabs,Ta as addLocalesMessages,vt as addFile,pt as addAsset,Qa as addAlertConfig,po as Tooltip,$n as ToggleButtons,K as Text,Yn as Spinner,ma as Serial,gt as ProjectProvider,sa as Numeric,Z as ModifyTypes,yi as Modal,Xr as MenuSection,Vr as MenuItem,Rr as Menu,Aa as LocalesProvider,Bi as LibraryItem,Xn as Library,Hn as Label,v as Keys,fi as Input,Ci as IconSelectorItem,zn as IconSelector,yn as Dropdown,Ba as DateTime,Hr as ContextMenu,hr as Button,cn as BufferedInput,ba as BLE,nt as AppProvider,an as ActionButton};
