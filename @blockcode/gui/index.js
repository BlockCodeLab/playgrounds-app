import{addLocalesMessages as Xr}from"@blockcode/core";var g1={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"Importing...","gui.alert.downloading":"Downloading...","gui.alert.downloadingProgress":"Downloading...{progress}%","gui.alert.downloadCompleted":"Download completed.","gui.alert.connectionCancel":"Connection cancel.","gui.alert.connectionError":"Connection error, or connection was lost.","gui.alert.compiling":"Compiling...","gui.alert.compileSuccess":"Compilation completed.","gui.alert.compileError":"Compilation failed.","gui.alert.compileViewError":"View Message.","gui.home.my":"My projects","gui.home.all":"View all","gui.home.allCounts":"View all ({counts})","gui.home.new":"Create new project","gui.home.examples":"Wonderful {label} projects","gui.home.slideshow.desktop.title":"The desktop application is here!","gui.home.slideshow.desktop.button":"Download","gui.home.slideshow.tankwar.title":"The Tank War is coming! Join us!","gui.home.slideshow.tankwar.button":"Join us","gui.home.slideshow.arcade.title":"The next game, create your own!","gui.home.slideshow.arcade.button":"Create now","gui.splash.loading":"Loading project...","gui.splash.errorTitle":"Error occurred","gui.splash.errorLabel":"Please refresh the page and reopen it.","gui.menubar.courses":"Courses","gui.menubar.tutorials":"Tutorials","gui.menubar.titlePlaceholder":"Project title here","gui.menubar.mdified":"Save to local storage","gui.menubar.saving":"Saving project...","gui.menubar.saved":"Saved to local storage.","gui.menubar.savedComputer":"Saved to your computer.","gui.menubar.file":"File","gui.menubar.file.newProject":"New","gui.menubar.file.openProject":"Open","gui.menubar.file.saveProject":"Save","gui.menubar.file.uploadProject":"Load from your computer","gui.menubar.file.downloadProject":"save to your computer","gui.menubar.edit":"Edit","gui.menubar.edit.undo":"Undo","gui.menubar.edit.redo":"Redo","gui.menubar.device":"Device","gui.menubar.device.connect":"Connect","gui.menubar.device.disconnect":"Disconnect","gui.menubar.device.download":"Download program","gui.project.name":"Untitled Project","gui.project.shortname":"Untitled","gui.library.search":"Search","gui.library.projects.empty":"No project!","gui.library.projects.rename":"rename","gui.library.projects.duplicate":"duplicate","gui.library.projects.delete":"delete","gui.library.projects.notSaved":"Not saved","gui.library.projects.close":"Close current project?","gui.library.projects.deleteConfirm":'Do you want to delete the project "{name}"?',"gui.library.projects.replace":"Replace contents of the current project?","gui.library.projects.errorEditor":'This project is not currently editor creation, please switch to "{workspace}" and open it.',"gui.library.projects.notFoundEditor":'Not Found the "{editor}" Editor.',"gui.library.examples.interconnect":"The project requires two devices to work properly.","gui.library.tutorial.course":"Choose a course","gui.library.tutorial.tutorial":"Choose a tutorial","gui.tutorials.shrink":"Shrink","gui.tutorials.expand":"Expand","gui.tutorials.close":"Close","gui.tutorials.moreTry":"More things to try!","gui.tutorials.seeMore":"See more","gui.prompt.ok":"OK","gui.prompt.close":"Close","gui.prompt.cancel":"Cancel","gui.prompt.reconnect":"Reconnect","gui.connection.device":"Device Connection","gui.connection.search":"Start Searching","gui.connection.searching":"Searching...","gui.connection.connect":"Start Connecting","gui.connection.deviceName":"Device name","gui.about.title":"About...","gui.about.main":"Main program","gui.terms.title":"Terms of Use","gui.terms.content":`<b>Terms of Use</b>
`,"gui.privacy.title":"Privacy","gui.privacy.content":`<b>Privacy</b>
`};var s1={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"载入中…","gui.alert.downloading":"正在下载…","gui.alert.downloadingProgress":"正在下载…{progress}%","gui.alert.downloadCompleted":"下载完成。","gui.alert.connectionCancel":"连接取消。","gui.alert.connectionError":"连接发生错误，或已断开。","gui.alert.compiling":"正在编译…","gui.alert.compileSuccess":"编译完成。","gui.alert.compileError":"编译失败。","gui.alert.compileViewError":"查看信息","gui.home.my":"我的作品","gui.home.all":"查看全部","gui.home.allCounts":"查看全部（{counts}）","gui.home.new":"开始新作品","gui.home.examples":"{label} 精彩作品","gui.home.slideshow.desktop.title":"桌面端程序已就绪，快来下载！","gui.home.slideshow.desktop.button":"立即下载","gui.home.slideshow.tankwar.title":"战争一触即发，赶紧来战吧！","gui.home.slideshow.tankwar.button":"加入战斗","gui.home.slideshow.arcade.title":"玩的下一个游戏，就要自己创作！","gui.home.slideshow.arcade.button":"开始创作","gui.splash.loading":"加载作品…","gui.splash.errorTitle":"发生错误","gui.splash.errorLabel":"请刷新页面重新打开。","gui.menubar.courses":"课程","gui.menubar.tutorials":"教程","gui.menubar.titlePlaceholder":"在此填写作品标题","gui.menubar.modified":"保存到本地","gui.menubar.saving":"正在保存作品…","gui.menubar.saved":"已保存到本地。","gui.menubar.savedComputer":"已保存到电脑。","gui.menubar.file":"文件","gui.menubar.file.newProject":"新作品","gui.menubar.file.openProject":"打开","gui.menubar.file.saveProject":"保存","gui.menubar.file.uploadProject":"从电脑中打开","gui.menubar.file.downloadProject":"保存到电脑","gui.menubar.edit":"编辑","gui.menubar.edit.undo":"撤销","gui.menubar.edit.redo":"重做","gui.menubar.device":"设备","gui.menubar.device.connect":"连接","gui.menubar.device.disconnect":"断开连接","gui.menubar.device.download":"下载程序","gui.project.name":"未命名作品","gui.project.shortname":"未命名","gui.library.search":"搜索","gui.library.projects.empty":"没有作品！","gui.library.projects.rename":"重命名","gui.library.projects.duplicate":"复制","gui.library.projects.delete":"删除","gui.library.projects.notSaved":"未保存作品","gui.library.projects.close":"要关闭当前作品吗？","gui.library.projects.deleteConfirm":"要删除“《{name}》”作品吗？","gui.library.projects.replace":"要创建新作品替换当前作品吗？","gui.library.projects.errorEditor":"这个作品不是当前编辑器创作，请切换至“{editor}”编辑器然后打开。","gui.library.projects.notFoundEditor":"没有发现“{editor}”编辑器。","gui.library.examples.interconnect":"该作品需要两台设备联机才能正常运行。","gui.library.tutorials.course":"选择一个课程","gui.library.tutorials.tutorial":"选择一个教程","gui.tutorials.shrink":"收起","gui.tutorials.expand":"展开","gui.tutorials.close":"关闭","gui.tutorials.moreTry":"再试试这些！","gui.tutorials.seeMore":"更多技巧","gui.prompt.ok":"确认","gui.prompt.close":"关闭","gui.prompt.cancel":"取消","gui.prompt.reconnect":"重新连接","gui.connection.device":"硬件连接","gui.connection.search":"开始搜索","gui.connection.searching":"正在搜索…","gui.connection.connect":"开始连接","gui.connection.deviceName":"硬件名称","gui.about.title":"版本信息","gui.about.main":"主程序","gui.terms.title":"使用条款","gui.terms.content":`<b>使用条款</b>
`,"gui.privacy.title":"隐私","gui.privacy.content":`<b>隐私</b>
`};var h1={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"載入中…","gui.alert.downloading":"正在下載…","gui.alert.downloadingProgress":"正在下載…{progress}%","gui.alert.downloadCompleted":"下載完成。","gui.alert.connectionCancel":"連接取消。","gui.alert.connectionError":"連接發生錯誤，或已斷開。","gui.alert.compiling":"正在編譯…","gui.alert.compileSuccess":"編譯完成。","gui.alert.compileError":"編譯失敗。","gui.alert.compileViewError":"查看信息","gui.home.my":"我的專案","gui.home.all":"查看全部","gui.home.allCounts":"查看全部（{counts}）","gui.home.new":"開始新專案","gui.home.examples":"{label} 精彩專案","gui.home.slideshow.desktop.title":"桌面端程序已就緒，快來下載！","gui.home.slideshow.desktop.button":"立即下載","gui.home.slideshow.tankwar.title":"戰爭一觸即髮，趕緊來戰吧！","gui.home.slideshow.tankwar.button":"加入戰鬥","gui.home.slideshow.arcade.title":"玩的下一個遊戲，就要自己創作！","gui.home.slideshow.arcade.button":"開始創作","gui.splash.loading":"加載專案…","gui.splash.errorTitle":"發生錯誤","gui.splash.errorLabel":"請刷新頁面重新打開。","gui.menubar.courses":"課程","gui.menubar.tutorials":"教程","gui.menubar.titlePlaceholder":"在此填寫專案標題","gui.menubar.modified":"保存到本地","gui.menubar.saving":"正在保存專案…","gui.menubar.saved":"已保存到本地。","gui.menubar.savedComputer":"已保存到電腦。","gui.menubar.file":"文檔","gui.menubar.file.newProject":"新專案","gui.menubar.file.openProject":"打開","gui.menubar.file.saveProject":"保存","gui.menubar.file.uploadProject":"從電腦中打開","gui.menubar.file.downloadProject":"保存到電腦","gui.menubar.edit":"編輯","gui.menubar.edit.undo":"撤銷","gui.menubar.edit.redo":"重做","gui.menubar.device":"設備","gui.menubar.device.connect":"連接","gui.menubar.device.disconnect":"斷開連接","gui.menubar.device.download":"下載程序","gui.project.name":"未命名專案","gui.project.shortname":"未命名","gui.library.search":"搜索","gui.library.projects.empty":"沒有專案！","gui.library.projects.rename":"重命名","gui.library.projects.duplicate":"複製","gui.library.projects.delete":"刪除","gui.library.projects.notSaved":"未保存專案","gui.library.projects.close":"要關閉當前專案嗎？","gui.library.projects.deleteConfirm":"要刪除“《{name}》”專案嗎？","gui.library.projects.replace":"要創建新專案替換當前專案嗎？","gui.library.projects.errorEditor":"這個專案不是當前編輯器創作，請切換至“{editor}”編輯器然後打開。","gui.library.projects.notFoundEditor":"沒有發現「{editor}」編輯器。","gui.library.examples.interconnect":"該專案需要兩枱設備聯機纔能正常運行。","gui.library.tutorials.course":"選擇一個課程","gui.library.tutorials.tutorial":"選擇一個教程","gui.tutorials.shrink":"收起","gui.tutorials.expand":"展開","gui.tutorials.close":"關閉","gui.tutorials.moreTry":"再試試這些！","gui.tutorials.seeMore":"更多技巧","gui.prompt.ok":"確認","gui.prompt.close":"關閉","gui.prompt.cancel":"取消","gui.prompt.reconnect":"重新連接","gui.connection.device":"硬件連接","gui.connection.search":"開始搜索","gui.connection.searching":"正在搜索…","gui.connection.connect":"開始連接","gui.connection.deviceName":"硬件名稱","gui.about.title":"版本信息","gui.about.main":"主程式","gui.terms.title":"使用條款","gui.terms.content":`<b>使用條款</b>
`,"gui.privacy.title":"隱私","gui.privacy.content":`<b>隱私</b>
`};Xr({en:g1,"zh-Hans":s1,"zh-Hant":h1});import{render as yt}from"preact";import{LocalesProvider as Ct,AppProvider as qt,ProjectProvider as Mt}from"@blockcode/core";import{useCallback as P,useEffect as Fr,useErrorBoundary as lt}from"preact/hooks";import{batch as me,useComputed as ct,useSignal as Fe,useSignalEffect as mt}from"@preact/signals";import{classNames as pt,keyMirror as ut}from"@blockcode/utils";import{useAppContext as dt,useLocalesContext as gt,useProjectContext as st,translate as ht,maybeTranslate as bt,showSplash as Ir,hideSplash as ft,openPromptModal as Le,closePromptModal as Lr,openLayout as kt,closeLayout as vt,openTab as Dr,openProject as _t,closeProject as wt}from"@blockcode/core";import{Text as B1,MenuSection as ao,MenuItem as to}from"@blockcode/core";import{useCallback as ye}from"preact/hooks";import{batch as Ur}from"@preact/signals";import{isMac as De,putProject as Pr,openProjectFromComputer as zr,saveProjectToComputer as Or}from"@blockcode/utils";import{useProjectContext as Tr,setAlert as Nr,openUserStorage as Vr,setFile as Jr,setModified as Gr,ModifyTypes as Yr,Keys as z}from"@blockcode/core";import{Text as G,MenuSection as Se,MenuItem as pe}from"@blockcode/core";function w(e){let a=globalThis.document,r=a.createElement("style");r.appendChild(a.createTextNode(e)),a.head.append(r)}w(".cbXT-q_menu-bar{box-sizing:border-box;height:var(--menu-bar-height);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:var(--menu-bar-standard-font-size);background-color:var(--theme-primary);color:var(--ui-white);-webkit-user-select:none;-webkit-app-region:drag;flex-flow:row;justify-content:space-between;font-weight:700;display:flex;box-shadow:0 0 3px #00000040}.cbXT-q_menu-bar-item{color:var(--ui-white);user-select:none;white-space:nowrap;height:var(--menu-bar-height);align-self:center;align-items:center;padding:0 .25rem;text-decoration:none;display:flex;position:relative}.cbXT-q_menu-bar-item.cbXT-q_growable{max-width:var(--menu-bar-item-max-width);flex:1}.cbXT-q_main-menu{-webkit-app-region:no-drag;flex-flow:row;justify-content:flex-start;align-items:center;gap:.25rem;display:flex}.cbXT-q_main-menu.cbXT-q_electron{margin-left:64px}.cbXT-q_right-menu{-webkit-app-region:no-drag;flex-flow:row;justify-content:flex-start;align-items:center;gap:.25rem;display:flex}.cbXT-q_menu-label{padding:0 .75rem}.cbXT-q_menu-label img{margin-right:.25rem}.cbXT-q_language-label{width:var(--language-selector-width);padding:0 .5rem}input.cbXT-q_menu-label{display:none}input.cbXT-q_menu-label+.cbXT-q_menu-bar-item:hover{cursor:pointer;background:var(--ui-black-transparent)}input.cbXT-q_menu-label:checked+.cbXT-q_menu-bar-item{background:var(--ui-black-transparent)}.cbXT-q_menu{top:var(--menu-bar-height);z-index:var(--z-index-menu-bar);border-radius:0 0 var(--space)var(--space);color:var(--ui-white);background:var(--theme-primary);min-width:186px;display:none}.cbXT-q_menu-item{font-weight:700}.cbXT-q_menu-item:hover{background:var(--ui-black-transparent)}.cbXT-q_language-icon{vertical-align:middle;height:1.5rem}.cbXT-q_check-icon{margin-right:calc(var(--space)/2);visibility:hidden;width:14px}.cbXT-q_check-icon.cbXT-q_checked{visibility:visible}.cbXT-q_divider{border-right:1px dashed var(--ui-black-transparent);height:34px;margin:0 .7rem}.cbXT-q_hoverable:hover{cursor:pointer;background:var(--ui-black-transparent)}.cbXT-q_tutorials-icon{margin-right:.35rem}.cbXT-q_title-field{border:1px dashed var(--ui-black-transparent);border-radius:var(--form-radius);-webkit-border-radius:var(--form-radius);-moz-border-radius:var(--form-radius);background-color:var(--ui-white-transparent);height:auto;color:var(--ui-white);-webkit-background-clip:padding-box;background-clip:padding-box;padding:.5rem;font-size:.8rem;font-weight:700}.cbXT-q_title-field::placeholder{color:var(--ui-white);font-size:.8rem;font-style:italic;font-weight:400}.cbXT-q_title-field:hover{background-color:#ffffff80}.cbXT-q_title-field:focus{border:1px solid var(--ui-transparent);-webkit-box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);background-color:var(--ui-white);color:var(--text-primary);outline:none}.cbXT-q_home-icon,.cbXT-q_closeIcon{padding:0 .35rem}");var m={mainMenu:"cbXT-q_main-menu",menuBar:"cbXT-q_menu-bar",menuItem:"cbXT-q_menu-item",closeIcon:"cbXT-q_closeIcon",menuBarItem:"cbXT-q_menu-bar-item",menuLabel:"cbXT-q_menu-label",menu:"cbXT-q_menu",languageIcon:"cbXT-q_language-icon",tutorialsIcon:"cbXT-q_tutorials-icon",hoverable:"cbXT-q_hoverable",titleField:"cbXT-q_title-field",growable:"cbXT-q_growable",checkIcon:"cbXT-q_check-icon",homeIcon:"cbXT-q_home-icon",languageLabel:"cbXT-q_language-label",electron:"cbXT-q_electron",rightMenu:"cbXT-q_right-menu",checked:"cbXT-q_checked",divider:"cbXT-q_divider"};import{jsx as F,jsxs as Re,Fragment as Kr}from"preact/jsx-runtime";var b1=(e=!1)=>{Nr({message:e?F(G,{id:"gui.menubar.savedComputer",defaultMessage:"Saved to your computer."}):F(G,{id:"gui.menubar.saved",defaultMessage:"Saved to local storage."})},2000)};function f1({onNew:e,onOpen:a,onSave:r,onThumb:t,ExtendedMenu:o}){let{meta:i,key:l,name:u,files:p,assets:c}=Tr(),d=ye(async()=>{for(let g in i.value.monitors)if(i.value.monitors[g].deleting)i.value.monitors.splice(g,1);let C=c.value?.filter((g)=>!g.uri),n=await r(p.value,C,i.value);return n.meta=Object.assign(n.meta??{},{editor:i.value.editor,version:i.value.version,monitors:i.value.monitors}),n.name=u.value,n},[r]),M=ye(async()=>{let C=await d();C.key=l.value;let n=await Pr(C,t);Ur(()=>{if(C.key!==n)Jr({key:n});Gr(Yr.Saved)}),b1()},[d]),k=ye(async()=>{let C=await d();if(await Or(C),window.electron)return;b1(!0)},[d]),_=ye(async()=>{let C=await zr();await a(C)},[a]);return Re(Kr,{children:[F(Se,{children:F(pe,{className:m.menuItem,label:F(G,{id:"gui.menubar.file.newProject",defaultMessage:"New"}),hotkey:[De?z.COMMAND:z.CONTROL,z.N],onClick:e})}),Re(Se,{children:[F(pe,{className:m.menuItem,label:F(G,{id:"gui.menubar.file.openProject",defaultMessage:"Open"}),hotkey:[De?z.COMMAND:z.CONTROL,z.O],onClick:Vr}),F(pe,{className:m.menuItem,label:F(G,{id:"gui.menubar.file.saveProject",defaultMessage:"Save"}),hotkey:[De?z.COMMAND:z.CONTROL,z.S],onClick:M})]}),Re(Se,{children:[F(pe,{className:m.menuItem,label:F(G,{id:"gui.menubar.file.uploadProject",defaultMessage:"Load from your computer"}),onClick:_}),F(pe,{className:m.menuItem,label:F(G,{id:"gui.menubar.file.downloadProject",defaultMessage:"save to your computer"}),onClick:k})]}),o&&F(o,{itemClassName:m.menuItem,onOpen:a,onSave:d})]})}import{useEffect as jr}from"preact/hooks";import{batch as ei,useSignal as k1}from"@preact/signals";import{isMac as v1}from"@blockcode/utils";import{useProjectContext as ri,Keys as O}from"@blockcode/core";import{Text as _1,MenuSection as ii,MenuItem as w1}from"@blockcode/core";import{jsx as ue,jsxs as y1,Fragment as ai}from"preact/jsx-runtime";function C1({onUndo:e,onRedo:a,onEnableUndo:r,onEnableRedo:t,ExtendedMenu:o}){let{key:i,fileId:l,modified:u}=ri(),p=k1(!0),c=k1(!0);return jr(()=>{ei(()=>{p.value=!r(),c.value=!t()})},[i.value,l.value,u.value]),y1(ai,{children:[y1(ii,{children:[ue(w1,{disabled:p.value,className:m.menuItem,label:ue(_1,{id:"gui.menubar.edit.undo",defaultMessage:"Undo"}),hotkey:[v1?O.COMMAND:O.CONTROL,O.Z],onClick:e}),ue(w1,{disabled:c.value,className:m.menuItem,label:ue(_1,{id:"gui.menubar.edit.redo",defaultMessage:"Redo"}),hotkey:v1?[O.SHIFT,O.COMMAND,O.Z]:[O.CONTROL,O.Y],onClick:a})]}),o&&ue(o,{itemClassName:m.menuItem})]})}var q1="./assets/icon-file-egaz1kfx.svg";var M1="./assets/icon-edit-jejnm7yb.svg";import{jsx as Ce}from"preact/jsx-runtime";function E1(e,a,r){let t=(i)=>r(i,a.editor),o=async()=>{let i=JSON.parse(JSON.stringify(await e.onNew()));if(!i.meta)i.meta=a;if(!i.meta.editor)i.meta.editor=a.editor,i.meta.version=a.version;t(i,a.editor)};return[{icon:q1,label:Ce(B1,{id:"gui.menubar.file",defaultMessage:"File"}),Menu:()=>Ce(f1,{ExtendedMenu:e.menuItems?.find((i)=>i.id==="file")?.Menu,onNew:o,onOpen:t,onSave:e.onSave,onThumb:e.onThumb})},{icon:M1,label:Ce(B1,{id:"gui.menubar.edit",defaultMessage:"Edit"}),Menu:()=>Ce(C1,{ExtendedMenu:e.menuItems?.find((i)=>i.id==="edit")?.Menu,onUndo:e.onUndo,onRedo:e.onRedo,onEnableUndo:e.onEnableUndo,onEnableRedo:e.onEnableRedo})}].concat(e.menuItems?.filter((i)=>i.id!=="file"&&i.id!=="edit")??[])}import{Text as le}from"@blockcode/core";import{classNames as li}from"@blockcode/utils";import{Button as Q1}from"@blockcode/core";w(".lkaaPa_alerts-wrapper{width:100%;z-index:var(--z-index-alerts);top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute}.lkaaPa_alert-wrapper{pointer-events:all;background:var(--ui-light);border:1px solid var(--blocks-tertiary);min-width:200px;max-width:548px;min-height:1.5rem;box-shadow:0px 0px 0px 2px var(--ui-light);border-radius:.5rem;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:7px;padding:.875rem 1rem;display:flex;overflow:hidden}.lkaaPa_warn{border:1px solid var(--error-primary)}.lkaaPa_icon{min-width:1.25rem;min-height:1.25rem;padding-right:1rem;display:flex}.lkaaPa_message{justify-content:flex-end;align-items:center;padding-right:.5rem;font-size:.8125rem;font-weight:700;line-height:.875rem;display:flex}.lkaaPa_warn .lkaaPa_message{color:var(--error-secondary)}.lkaaPa_success .lkaaPa_message{color:#555}.lkaaPa_button{color:var(--ui-white);margin-left:var(--space);padding:var(--space)calc(var(--space)*2.5);background:#ff8c1a;border:#ff8c1a}.lkaaPa_close-button{width:1.75rem;height:1.75rem;margin-left:calc(var(--space)*2);background:#ff861433;border:0;border-radius:50%;padding:0;transition:all .15s ease-out;box-shadow:0 0 0 2px #ff861433}.lkaaPa_close-button:hover{transform:scale(1.1);box-shadow:0 0 0 4px #ff861433}.lkaaPa_close-button img{margin:0 auto}");var U={alertsWrapper:"lkaaPa_alerts-wrapper",message:"lkaaPa_message",success:"lkaaPa_success",closeButton:"lkaaPa_close-button",icon:"lkaaPa_icon",warn:"lkaaPa_warn",alertWrapper:"lkaaPa_alert-wrapper",button:"lkaaPa_button"};var Z1="./assets/icon-close-bazpdng8.svg";import{jsx as ae,jsxs as ci}from"preact/jsx-runtime";function x1({mode:e,icon:a,message:r,button:t,onClose:o}){return ci("div",{className:li(U.alertWrapper,{[U.success]:e==="success",[U.warn]:e==="warn"}),children:[ae("div",{className:U.icon,children:typeof a==="string"?ae("img",{src:a}):a}),ae("div",{className:U.message,children:r}),t&&ae(Q1,{className:U.button,onClick:t.onClick,children:t.label}),o&&ae(Q1,{className:U.closeButton,onClick:o,children:ae("img",{src:Z1})})]})}import{jsx as $1}from"preact/jsx-runtime";function F1({items:e}){return $1("div",{className:U.alertsWrapper,children:e.map((a)=>$1(x1,{mode:a.mode??"success",icon:a.icon,message:a.message,button:a.button,onClose:a.onClose}))})}import{useCallback as pi}from"preact/hooks";import{useSignal as ui}from"@preact/signals";import{classNames as qe}from"@blockcode/utils";import{Text as de,Button as W1,Modal as di}from"@blockcode/core";w(".Zq10BW_prompt-modal{width:480px}.Zq10BW_prompt-header{background:var(--blocks-primary)}.Zq10BW_prompt-content{background:var(--ui-white)}.Zq10BW_device-list{background:var(--theme-light-transparent);width:100%;height:170px;padding:.5rem;overflow-y:auto}.Zq10BW_device-search{justify-content:center;align-items:center;width:100%;height:100%;display:flex}.Zq10BW_device-search-icon{width:120px;height:120px}@keyframes Zq10BW_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.Zq10BW_device-searching-icon{animation:1.5s linear infinite Zq10BW_spin}.Zq10BW_device-item{background:var(--ui-white);border-radius:calc(var(--space)/2);border:2px solid var(--ui-white);flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:50px;margin-bottom:.5rem;padding:10px;display:flex}.Zq10BW_device-item.Zq10BW_selected{border:2px solid var(--theme-primary)}.Zq10BW_device-name-bar{align-items:center;display:flex}.Zq10BW_device-image{width:40px;margin-right:.5rem}.Zq10BW_device-name-wrapper{flex-direction:column;justify-content:center;align-items:flex-start;display:flex}.Zq10BW_device-name-label{font-size:.625rem;font-weight:700}.Zq10BW_device-name-text{font-size:.875rem}.Zq10BW_button-row{text-align:right;text-align:center;padding:1.5rem 2.25rem;font-weight:bolder}.Zq10BW_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}.Zq10BW_ok-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-left:var(--space)}");var B={deviceSearch:"Zq10BW_device-search",deviceNameWrapper:"Zq10BW_device-name-wrapper",deviceNameLabel:"Zq10BW_device-name-label",promptHeader:"Zq10BW_prompt-header",buttonRow:"Zq10BW_button-row",spin:"Zq10BW_spin",promptModal:"Zq10BW_prompt-modal",okButton:"Zq10BW_ok-button",deviceNameBar:"Zq10BW_device-name-bar",deviceItem:"Zq10BW_device-item",deviceImage:"Zq10BW_device-image",button:"Zq10BW_button",selected:"Zq10BW_selected",deviceSearchIcon:"Zq10BW_device-search-icon",deviceSearchingIcon:"Zq10BW_device-searching-icon",deviceNameText:"Zq10BW_device-name-text",deviceList:"Zq10BW_device-list",promptContent:"Zq10BW_prompt-content"};var L1="./assets/searching-tt57cegv.png";import{jsx as $,jsxs as Me}from"preact/jsx-runtime";function A1({title:e,icon:a,devices:r,onClose:t,onSearch:o,onConnect:i}){let l=ui(""),u=pi(()=>{if(!l.value)return;i(l.value),l.value=""},[i]);return $(di,{title:e??$(de,{id:"gui.connection.device",defaultMessage:"Device"}),className:B.promptModal,headerClassName:B.header,onClose:t,children:Me("div",{className:B.promptContent,children:[$("div",{className:B.deviceList,children:Array.isArray(r)&&r.length>0?r.map((p)=>Me("div",{className:qe(B.deviceItem,{[B.selected]:p.id===l.value}),onClick:()=>l.value=p.id,children:[Me("div",{className:B.deviceNameBar,children:[a&&$("img",{}),Me("div",{className:B.deviceNameWrapper,children:[$("div",{className:B.deviceNameLabel,children:$(de,{id:"gui.connection.deviceName",defaultMessage:"Device name"})}),$("div",{className:B.deviceNameText,children:p.name})]})]}),p.rssi&&$("div",{className:B.deviceSignalBar})]})):$("div",{className:B.deviceSearch,children:$("img",{className:qe(B.deviceSearchIcon,{[B.deviceSearchingIcon]:Array.isArray(r)}),src:L1})})}),$("div",{className:B.buttonRow,children:r===!0?$(W1,{className:qe(B.button,B.okButton),onClick:()=>o(),children:$(de,{id:"gui.connection.search",defaultMessage:"Start Searching"})}):$(W1,{disabled:!l.value,className:qe(B.button,B.okButton),onClick:u,children:!l.value?$(de,{id:"gui.connection.searching",defaultMessage:"Searching"}):$(de,{id:"gui.connection.connect",defaultMessage:"Start Connecting"})})})]})})}import{useEffect as wi,useCallback as se}from"preact/hooks";import{batch as yi,useSignal as Ee,useSignalEffect as Ci}from"@preact/signals";import{classNames as he,getProjectsThumbs as qi,getProject as Mi,cloneProject as Bi,renameProject as Ei,delProject as Zi,openProjectFromURL as Qi}from"@blockcode/utils";import{useLocalesContext as xi,maybeTranslate as ze,setAlert as $i,delAlert as Fi,openPromptModal as Oe,openUserStorage as Li}from"@blockcode/core";var He="1.1.0";import{Text as Q,ContextMenu as Wi,LibraryItem as Te}from"@blockcode/core";import{useEffect as si}from"preact/hooks";import{useSignal as hi}from"@preact/signals";import{classNames as I1}from"@blockcode/utils";import{Button as bi}from"@blockcode/core";w(".tyiNqW_cover-wrapper{width:100%;position:relative}.tyiNqW_cover{opacity:1;background-position:50%;background-repeat:no-repeat;background-size:cover;flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:100%;padding:0 2rem;transition:opacity 1s;display:flex;position:absolute;top:0;left:0}.tyiNqW_cover.tyiNqW_hidden{opacity:0;pointer-events:none}.tyiNqW_title{color:#000;padding-right:1.5rem;font-size:2rem;font-weight:600}.tyiNqW_button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-top:calc(2*var(--space));padding:.75rem 1rem;font-size:.85rem;font-weight:600}.tyiNqW_feature{max-height:90%;margin-right:5%}");var Y={feature:"tyiNqW_feature",hidden:"tyiNqW_hidden",coverWrapper:"tyiNqW_cover-wrapper",cover:"tyiNqW_cover",title:"tyiNqW_title",button:"tyiNqW_button"};import{jsx as Be,jsxs as D1}from"preact/jsx-runtime";function S1({pages:e,className:a}){let r=hi(0);return si(()=>{setInterval(()=>r.value=(r.value+1)%e.length,7000)},[]),Be("div",{className:I1(Y.coverWrapper,a),children:e.map((t,o)=>D1("div",{className:I1(Y.cover,{[Y.hidden]:o!==r.value}),style:{backgroundImage:`url(${t.backgroundImage})`},children:[D1("div",{children:[Be("div",{className:Y.title,children:t.title}),Be(bi,{className:Y.button,onClick:t.onClick,children:t.buttonText})]}),Be("img",{className:Y.feature,src:t.featureImage})]},o))})}w("._9IQa7q_home-wrapper{background:var(--ui-secondary);top:var(--menu-bar-height);width:100%;height:calc(100% - var(--menu-bar-height));z-index:calc(var(--z-index-alerts) - 10);user-select:none;position:absolute;overflow:hidden auto}._9IQa7q_getting-started{height:240px;margin-bottom:1.5rem}._9IQa7q_link{cursor:pointer;color:var(--theme-primary)}._9IQa7q_view-all{font-weight:400;font-size:var(--standard-font-size);margin-left:1.5rem}._9IQa7q_delete-menu-item:hover{background:var(--error-primary)}._9IQa7q_footer{color:var(--text-primary);font-size:var(--small-font-size);padding:3.5rem 0 var(--space);text-align:center}._9IQa7q_footer-item{padding:0 var(--space)}._9IQa7q_footer-item:not(:first-child){border-left:1px solid var(--ui-black-transparent)}._9IQa7q_library-grid{background:var(--ui-secondary);flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;height:auto;padding:.5rem;display:flex;overflow-y:auto}._9IQa7q_library-label{color:var(--text-primary);padding:1.5rem calc(.5rem + var(--space)).5rem;font-weight:800}._9IQa7q_about-version-content{width:300px}._9IQa7q_about-version-row{margin:var(--space)0;justify-content:space-between;display:flex}");var y={gettingStarted:"_9IQa7q_getting-started",viewAll:"_9IQa7q_view-all",aboutVersionContent:"_9IQa7q_about-version-content",libraryLabel:"_9IQa7q_library-label",footer:"_9IQa7q_footer",libraryGrid:"_9IQa7q_library-grid",deleteMenuItem:"_9IQa7q_delete-menu-item",link:"_9IQa7q_link",footerItem:"_9IQa7q_footer-item",homeWrapper:"_9IQa7q_home-wrapper",aboutVersionRow:"_9IQa7q_about-version-row"};import{Text as X1}from"@blockcode/core";var R1="./assets/arcade-rd4cktbf.png";var H1="./assets/arcade-bg-fajmd34e.jpg";import{jsx as U1}from"preact/jsx-runtime";function Xe(e){return{title:U1(X1,{id:"gui.home.slideshow.arcade.title",defaultMessage:"The Tank War is coming! Join us! NOW!"}),backgroundImage:H1,featureImage:R1,buttonText:U1(X1,{id:"gui.home.slideshow.arcade.button",defaultMessage:"Play now"}),onClick:()=>e("@blockcode/gui-arcade")}}import{Text as O1}from"@blockcode/core";var P1="./assets/desktop-s3hfwbpz.png";var z1="./assets/desktop-bg-pqrd17t9.jpg";import{jsx as T1}from"preact/jsx-runtime";var N1={title:T1(O1,{id:"gui.home.slideshow.desktop.title",defaultMessage:"The desktop application is here!"}),backgroundImage:z1,featureImage:P1,buttonText:T1(O1,{id:"gui.home.slideshow.desktop.button",defaultMessage:"Download"}),onClick:()=>window.open("//app.blockcode.fun/#/?id=download")};function Ue(e,a){return[N1,Xe(e)]}async function Pe(e){let a=await fetch("https://hub.blockcode.fun/home.json").then((r)=>r.json());return Promise.all(a.filter((r)=>r.editor?e.find((t)=>t.id===r.editor):!0).map(async(r)=>{let t=e.find((i)=>i.id===r.editor),o=await fetch(`https://hub.blockcode.fun/${r.import}`).then((i)=>i.json());return{name:t?.name,examples:o.filter((i)=>e.find((l)=>l.id===i.editor)).map((i)=>({...i,file:`https://hub.blockcode.fun/${i.file}`,thumb:`https://hub.blockcode.fun/${i.thumb}`}))}}))}function ge(){return Promise.all(["@yeqin/gui-tankwar","@blockcode/gui-arcade","@blockcode/gui-microbit","@blockcode/gui-esp32","@blockcode/gui-arduino","@blockcode/gui-matrix"].map(async(e)=>{let{default:a}=await import(`${e}/info`);return a.id=e,a}))}import{jsx as h,jsxs as A,Fragment as Ne}from"preact/jsx-runtime";function V1({onOpenEditor:e,onOpenProject:a}){let r=Math.floor((document.body.clientWidth-20)/176),t=Math.floor((document.body.clientWidth-20)/236)*2,{language:o}=xi(),i=Ee(null),l=Ee(0),u=Ee(null),p=Ee(null),c=se(async()=>{let n=await qi();yi(()=>{l.value=n.length,i.value=n.filter((g,E)=>E<r)})},[]);wi(c,[]);let d=se((n,g)=>{Oe({title:h(Q,{id:"gui.library.projects.rename",defaultMessage:"rename"}),inputItems:[{key:"name",label:h(Q,{id:"gui.menubar.titlePlaceholder",defaultMessage:"Project title here"}),defaultValue:ze(g??h(Q,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}],onSubmit:async(E)=>{if(E?.name)await Ei(n,E.name),c()}})},[]),M=se(async(n)=>{await Bi(n),c()},[]),k=se((n,g)=>{Oe({title:h(Q,{id:"gui.library.projects.delete",defaultMessage:"delete"}),label:h(Q,{id:"gui.library.projects.deleteConfirm",defaultMessage:'Delect "{name}" project?',name:ze(g||h(Q,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}),onSubmit:async()=>{await Zi(n),c()}})},[]),_=se((n)=>async()=>{let g=await Mi(n);a(g)},[a]),C=()=>{return i.value?.map((n)=>h(Wi,{menuItems:[[{label:h(Q,{id:"gui.library.projects.rename",defaultMessage:"rename"}),onClick:()=>d(n.key,n.name)},{label:h(Q,{id:"gui.library.projects.duplicate",defaultMessage:"duplicate"}),onClick:()=>M(n.key)}],[{label:h(Q,{id:"gui.library.projects.delete",defaultMessage:"delete"}),className:y.deleteMenuItem,onClick:()=>k(n.key,n.name)}]],children:h(Te,{id:n.key,name:n.name||h(Q,{id:"gui.project.shortname",defaultMessage:"Untitled"}),image:n.thumb,onSelect:_(n.key)})},n.key))};return Ci(async()=>{let n=await ge();n=n.map((g)=>Object.assign(g,{beta:g.beta||!1,disabled:g.disabled||!1,onSelect:()=>e(g.id)})),n=n.filter((g)=>{if(g.hidden)return!1;return!0}),u.value=n.sort((g,E)=>g.sortIndex-E.sortIndex),p.value=await Pe(n)}),A("div",{className:y.homeWrapper,children:[h(S1,{className:y.gettingStarted,pages:Ue(e,a)}),i.value?.length>0&&A(Ne,{children:[A("div",{className:y.libraryLabel,children:[h("span",{children:h(Q,{id:"gui.home.my",defaultMessage:"My projects"})}),l.value>r&&h("span",{className:he(y.viewAll,y.link),onClick:Li,children:h(Q,{id:"gui.home.allCounts",defaultMessage:"View all ({counts})",counts:l.value})})]}),h("div",{className:y.libraryGrid,children:h(C,{})})]}),u.value?.length>0&&A(Ne,{children:[h("div",{className:y.libraryLabel,children:h(Q,{id:"gui.home.new",defaultMessage:"Create new project"})}),h("div",{className:y.libraryGrid,children:u.value.map((n,g)=>h(Te,{featured:!0,id:g,disabled:n.disabled,beta:n.beta||n.preview,image:n.image,name:n.name,description:n.description,collaborator:n.collaborator,blocksRequired:n.blocksRequired,micropythonRequired:n.micropythonRequired,clangRequired:n.clangRequired,onSelect:n.onSelect},g))})]}),p.value?.map((n)=>n.examples.length>0&&A(Ne,{children:[A("div",{className:y.libraryLabel,children:[h("span",{children:h(Q,{id:"gui.home.examples",defaultMessage:"Wonderful {label} examples",label:ze(n.name)})}),n.examples.length>t&&h("span",{className:he(y.viewAll,y.link),children:h(Q,{id:"gui.home.all",defaultMessage:"View all"})})]}),h("div",{className:y.libraryGrid,children:n.examples.map((g,E)=>h(Te,{large:!0,id:E,name:g.name,author:g.author,copyright:g.copyright,image:g.thumb,onSelect:async()=>{$i("importing",{id:g.name});let ie=await Qi(g.file);Fi(g.name),a(ie)}}))})]})),A("div",{className:y.footer,children:[h("span",{className:he(y.footerItem,y.link),onClick:()=>window.open("https://lab.blockcode.fun/","_blank"),children:"BlockCode Lab"}),h("span",{className:he(y.footerItem,y.link),onClick:()=>window.open("https://github.com/BlockCodeLab/playgrounds-app","_blank"),children:"GitHub"}),A("span",{className:he(y.footerItem,y.link),onClick:()=>{Oe({title:h(Q,{id:"gui.about.title",defaultMessage:"About..."}),body:A("div",{className:y.aboutVersionContent,children:[A("div",{className:y.aboutVersionRow,children:[h("div",{children:h("b",{children:h(Q,{id:"gui.about.main",defaultMessage:"Main program"})})}),A("div",{children:["v",He]})]}),h("div",{className:y.aboutVersionRow}),u.value.filter((n)=>!n.disabled).map((n)=>A("div",{className:y.aboutVersionRow,children:[h("div",{children:h("b",{children:n.name})}),A("div",{children:["v",n.version]})]}))]})})},children:["v",He]})]})]})}import{useEffect as oa}from"preact/hooks";import{classNames as fe,isMac as na}from"@blockcode/utils";import{useLocalesContext as la,useAppContext as ca,setLanguage as ma,translate as nr,setMacosMenuBarStyled as pa}from"@blockcode/core";import{Menu as lr,MenuItem as ua}from"@blockcode/core";import{cloneElement as Hi}from"preact";import{useMemo as Xi}from"preact/hooks";import{flatChildren as Ui}from"@blockcode/utils";var J1=Object.create(null),Ve=document.createElement("div"),G1=document.createElement("style");document.body.insertBefore(G1,document.body.firstChild);var Ai=(e)=>{return Ve.style="",Object.entries(e).forEach(([a,r])=>Ve.style[a]=r),Ve.style.cssText},Ii=()=>{G1.textContent=Object.entries(J1).map(([e,a])=>`${e}{${Ai(a)}}`).join(`
`)};function T(e){Object.assign(J1,e),Ii()}import{Menu as Pi}from"@blockcode/core";import{useCallback as Je}from"preact/hooks";import{classNames as Di}from"@blockcode/utils";import{jsx as Y1,jsxs as Ri,Fragment as Si}from"preact/jsx-runtime";function be({id:e,className:a,checked:r,children:t,name:o}){let i=Je((p)=>{let c=()=>{p.target.checked=!1,document.removeEventListener("click",c)};document.addEventListener("click",c)},[]),l=Je((p)=>{let c=p.getBoundingClientRect().left;T({[`#${e}-menu-${o}`]:{left:`${c}px`}})},[e,o]),u=Je((p)=>{if(p.target.classList.contains(m.menuLabel))l(p.target);else l(p.target.parentElement)},[]);return Ri(Si,{children:[Y1("input",{checked:r,className:m.menuLabel,id:`${e}-label-${o}`,name:`${e}-menu`,type:"radio",value:o,onChange:i}),Y1("label",{className:Di(m.menuLabel,a),for:`${e}-label-${o}`,onClick:u,children:t})]})}import{jsxs as Oi,Fragment as zi}from"preact/jsx-runtime";function K1({id:e,children:a}){let r=Xi(()=>Ui(a).map((t)=>t&&Hi(t,{id:e})),[e,a]);return Oi(zi,{children:[r.filter((t)=>t.type===be),r.filter((t)=>t.type===Pi).map((t)=>{let o=`${e}-label-${t.props.name}`,i=`${e}-menu-${t.props.name}`;return T({[`#${o}:checked~#${i}`]:{display:"block"}}),t})]})}import{classNames as Vi}from"@blockcode/utils";import{useAppContext as Ji,Text as j1}from"@blockcode/core";var Ze="./assets/icon-courses-bh6n0ck2.svg";var Qe="./assets/icon-tutorials-n5dcpe3y.svg";import{jsx as te,jsxs as Ye,Fragment as Ge}from"preact/jsx-runtime";function er({onClick:e}){let{tutorials:a}=Ji();return Ye(Ge,{children:[te("div",{className:m.divider}),te("div",{className:Vi(m.menuBarItem,m.menuLabel,m.hoverable),onClick:e,children:a.value?.type==="course"?Ye(Ge,{children:[te("img",{className:m.tutorialsIcon,src:Ze}),te(j1,{id:"gui.menubar.courses",defaultMessage:"Courses"})]}):Ye(Ge,{children:[te("img",{className:m.tutorialsIcon,src:Qe}),te(j1,{id:"gui.menubar.tutorials",defaultMessage:"Tutorials"})]})})]})}import{useProjectContext as Gi,BufferedInput as Yi,renameProject as Ki}from"@blockcode/core";import{jsx as Ke,jsxs as ea,Fragment as ji}from"preact/jsx-runtime";function rr({placeholder:e,defaultValue:a}){let{name:r}=Gi();return ea(ji,{children:[Ke("div",{className:m.divider}),Ke("div",{className:m.menuBarItem,children:Ke(Yi,{className:m.titleField,placeholder:e,value:r.value||a,onSubmit:Ki})})]})}var ir="./assets/icon-check-5hn8sb1h.svg";var ar="./assets/icon-language-3wan1389.svg";var tr="./assets/icon-dropdown-caret-y4j91xc6.svg";var or="./assets/icon-home-jt8mdkv3.svg";import{jsx as I,jsxs as K,Fragment as da}from"preact/jsx-runtime";function cr({className:e,showHomeButton:a,onRequestHome:r,onOpenTutorialLibrary:t}){let{language:o,languageNames:i}=la(),{menuItems:l,tutorials:u,macosMenuBarStyled:p}=ca();return oa(()=>{window.electron?.onChangeFullscreen((c)=>pa(na&&!c))},[]),K("div",{className:fe(m.menuBar,e),children:[K("div",{className:fe(m.mainMenu,{[m.electron]:p.value}),children:[K(K1,{id:m.mainMenu,children:[K(be,{className:fe(m.menuBarItem,m.languageLabel),name:"language-selector",children:[I("img",{className:m.languageIcon,src:ar}),I("img",{src:tr})]}),I(lr,{className:m.menu,name:"language-selector",children:Array.from(i.entries()).map(([c,d])=>K(ua,{className:m.menuItem,onClick:()=>ma(c),children:[I("img",{className:fe(m.checkIcon,{[m.checked]:o.value===c}),src:ir}),d.languageName]},c))}),l.value&&l.value.map(({icon:c,label:d,Menu:M},k)=>K(da,{children:[K(be,{className:m.menuBarItem,name:k,children:[typeof c==="string"?I("img",{src:c}):c,d]},k),I(lr,{className:m.menu,name:k,children:I(M,{itemClassName:m.menuItem})},k)]}))]}),u.value&&I(er,{onClick:t}),a&&I(rr,{placeholder:nr("gui.menubar.titlePlaceholder","Project title here"),defaultValue:nr("gui.project.name","BlockCode Project")})]}),I("div",{className:m.rightMenu,children:a&&I("div",{className:fe(m.menuBarItem,m.hoverable),onClick:r,children:I("img",{className:m.homeIcon,src:or})})})]})}import{classNames as ga}from"@blockcode/utils";w(".mS9Hoa_pane-wrapper{flex-direction:column;display:flex;position:relative}.mS9Hoa_pane{display:none}.mS9Hoa_pane-header{background:var(--ui-white);padding:calc(var(--space)/2);text-align:center;color:var(--text-primary);cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--space)var(--space)0 0;flex:1;font-size:.85rem}.mS9Hoa_pane-left .mS9Hoa_pane-header{border-top-left-radius:0}.mS9Hoa_pane-right .mS9Hoa_pane-header{border-top-right-radius:0}.mS9Hoa_pane-content{border-left:1px solid var(--ui-black-transparent);border-right:1px solid var(--ui-black-transparent);min-height:5.5rem;display:none;position:relative}.mS9Hoa_pane-left .mS9Hoa_pane-content{border-left:0}.mS9Hoa_pane-right .mS9Hoa_pane-content{border-right:0}.mS9Hoa_pane:checked~.mS9Hoa_pane-content{display:flex}");var j={paneContent:"mS9Hoa_pane-content",pane:"mS9Hoa_pane",paneRight:"mS9Hoa_pane-right",paneHeader:"mS9Hoa_pane-header",paneLeft:"mS9Hoa_pane-left",paneWrapper:"mS9Hoa_pane-wrapper"};import{jsx as je,jsxs as sa}from"preact/jsx-runtime";function mr({className:e,id:a,title:r,left:t,right:o,children:i}){return sa("div",{className:ga(j.paneWrapper,e,{[j.paneLeft]:t,[j.paneRight]:o}),children:[je("input",{id:`${a}-pane`,type:"checkbox",className:j.pane}),je("label",{className:j.paneHeader,for:`${a}-pane`,children:r}),je("div",{className:j.paneContent,children:i})]})}import{classNames as pr}from"@blockcode/utils";import{maybeTranslate as ha,Text as e1,Button as r1,Modal as ba}from"@blockcode/core";w(".ulcaFG_prompt-modal{width:360px}.ulcaFG_prompt-modal.ulcaFG_wide{width:600px}.ulcaFG_prompt-modal.ulcaFG_auto{width:auto;max-width:60vw}.ulcaFG_prompt-content{background:var(--ui-white);padding:1.5rem 2.25rem}.ulcaFG_label{margin:0 0 1.5rem;font-weight:500}.ulcaFG_label.ulcaFG_input-label{margin-bottom:.75rem}.ulcaFG_content{font-size:var(--standard-font-size);color:var(--text-primary);max-height:400px;margin-bottom:1.5rem;overflow:hidden auto}.ulcaFG_content a{color:var(--theme-primary);border-bottom:1px solid;text-decoration-line:none}.ulcaFG_text-input{border:1px solid var(--ui-black-transparent);width:100%;height:3rem;color:var(--text-primary);border-radius:5px;margin-bottom:1.5rem;padding:0 1rem;font-size:.875rem}.ulcaFG_button-row{text-align:right;font-weight:bolder}.ulcaFG_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}.ulcaFG_ok-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-left:var(--space)}");var q={textInput:"ulcaFG_text-input",wide:"ulcaFG_wide",label:"ulcaFG_label",okButton:"ulcaFG_ok-button",content:"ulcaFG_content",auto:"ulcaFG_auto",promptModal:"ulcaFG_prompt-modal",inputLabel:"ulcaFG_input-label",promptContent:"ulcaFG_prompt-content",buttonRow:"ulcaFG_button-row",button:"ulcaFG_button"};import{useCallback as fa}from"preact/hooks";import{jsx as S,jsxs as ur,Fragment as ka}from"preact/jsx-runtime";function dr({title:e,label:a,content:r,redStyle:t,children:o,onClose:i,onSubmit:l}){let u=fa(()=>{l(),i()},[i,l]);return S(ba,{title:e,redStyle:t,className:pr(q.promptModal,{[q.wide]:r,[q.auto]:o}),onClose:i,children:ur("div",{className:q.promptContent,children:[a&&S("div",{className:q.label,children:a}),r?S("div",{className:q.content,dangerouslySetInnerHTML:{__html:ha(r)}}):S("div",{className:q.content,children:o}),S("div",{className:q.buttonRow,children:l?ur(ka,{children:[S(r1,{className:q.button,onClick:i,children:S(e1,{id:"gui.prompt.cancel",defaultMessage:"Cancel"})}),S(r1,{className:pr(q.button,q.okButton),onClick:u,children:S(e1,{id:"gui.prompt.ok",defaultMessage:"OK"})})]}):S(r1,{className:q.button,onClick:i,children:S(e1,{id:"gui.prompt.close",defaultMessage:"Close"})})})]})})}import{useCallback as i1,useEffect as va}from"preact/hooks";import{useSignal as _a}from"@preact/signals";import{classNames as gr}from"@blockcode/utils";import{maybeTranslate as sr,Text as hr,BufferedInput as wa,Button as br,Modal as ya}from"@blockcode/core";import{jsx as N,jsxs as a1,Fragment as Ca}from"preact/jsx-runtime";function fr({title:e,inputItems:a,content:r,onClose:t,onSubmit:o}){let i=_a(Object.fromEntries(a.map(({name:c,defaultValue:d})=>[c,d]))),l=i1((c)=>{if(c.stopPropagation(),c.key==="Escape")t()},[t]),u=i1(()=>{o(i.value),t()},[t,o]),p=i1((c)=>(d)=>{i.value={...i.value,[c]:d}},[]);return va(()=>{return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[]),N(ya,{title:e,className:q.promptModal,onClose:t,children:a1("div",{className:q.promptContent,children:[a.map(({name:c,label:d,placeholder:M,defaultValue:k},_)=>a1(Ca,{children:[d&&N("div",{className:gr(q.label,q.inputLabel),children:d}),N(wa,{autoFocus:_===0,className:q.textInput,placeholder:sr(M),defaultValue:k,onSubmit:p(c)},_)]})),r&&N("div",{className:q.content,dangerouslySetInnerHTML:{__html:sr(r)}}),a1("div",{className:q.buttonRow,children:[N(br,{className:q.button,onClick:t,children:N(hr,{id:"gui.prompt.cancel",defaultMessage:"Cancel"})}),N(br,{className:gr(q.button,q.okButton),onClick:u,children:N(hr,{id:"gui.prompt.ok",defaultMessage:"OK"})})]})]})})}import{classNames as qa}from"@blockcode/utils";import{Text as t1,Spinner as Ma}from"@blockcode/core";w(".LkfKFW_splash{background:var(--theme-primary);z-index:var(--z-index-modal);flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0}.LkfKFW_spinner{margin-bottom:calc(4*var(--space))}.LkfKFW_error{background:var(--error-primary)}.LkfKFW_title{color:var(--ui-white);margin:var(--space);font-size:2rem}.LkfKFW_label{color:var(--ui-white);margin:var(--space)}");var oe={title:"LkfKFW_title",splash:"LkfKFW_splash",spinner:"LkfKFW_spinner",error:"LkfKFW_error",label:"LkfKFW_label"};import{jsx as ne,jsxs as Ba}from"preact/jsx-runtime";function kr({error:e}){return Ba("div",{className:qa(oe.splash,{[oe.error]:e}),children:[!e&&ne(Ma,{large:!0,level:"info",className:oe.spinner}),ne("div",{className:oe.title,children:e?ne(t1,{id:"gui.splash.errorTitle",defaultMessage:"Error Occurred"}):ne(t1,{id:"gui.splash.loading",defaultMessage:"Loading project..."})}),ne("div",{className:oe.label,children:e&&ne(t1,{id:"gui.splash.errorLabel",defaultMessage:"Please refresh the page and reopen it."})})]})}import{cloneElement as Fa}from"preact";import{useMemo as La}from"preact/hooks";import{classNames as Wa,flatChildren as Aa}from"@blockcode/utils";import{classNames as Ea}from"@blockcode/utils";w(".M5TDuW_tabs-wrapper{white-space:nowrap;position:relative}.M5TDuW_tab-label{--line-height:calc(var(--tool-bar-height)*.8 - 2px);--margin-top:calc(var(--tool-bar-height)*.2 + 1px);font-weight:500;font-size:var(--standard-font-size);line-height:var(--line-height);border:1px solid var(--ui-black-transparent);background:var(--ui-tertiary);color:var(--text-transparent);margin-top:var(--margin-top);white-space:nowrap;border-radius:1rem 1rem 0 0;justify-content:center;padding:0 1.25rem;display:inline-flex;position:relative}.M5TDuW_tab-label.M5TDuW_disabled{filter:opacity(.5);cursor:default;pointer-events:none}.M5TDuW_tab-label:nth-of-type(n+2){margin-left:calc(-1*var(--space))}.M5TDuW_tab-label:last-of-type{margin-right:var(--space)}.M5TDuW_tab-label:not(.M5TDuW_disabled):hover{cursor:pointer;background:var(--ui-primary)}.M5TDuW_tab-label img{filter:grayscale();width:1.375rem}.M5TDuW_tab{display:none}.M5TDuW_tab:checked+.M5TDuW_tab-label{--scale:var(--space)/2;line-height:calc(var(--line-height) + var(--scale));margin-top:calc(var(--margin-top) - var(--scale));color:var(--theme-primary);background:var(--ui-white)}.M5TDuW_tab:checked+.M5TDuW_tab-label img{filter:none}.M5TDuW_tab-panel{top:var(--tool-bar-height);width:100%;height:calc(100% - var(--tool-bar-height));border:1px solid var(--ui-black-transparent);border-radius:0 var(--space)var(--space)var(--space);flex-direction:column;display:flex;position:absolute;bottom:0;transform:translateY(200%)}");var R={disabled:"M5TDuW_disabled",tabLabel:"M5TDuW_tab-label",tab:"M5TDuW_tab",tabsWrapper:"M5TDuW_tabs-wrapper",tabPanel:"M5TDuW_tab-panel"};import{jsx as vr,jsxs as Qa,Fragment as Za}from"preact/jsx-runtime";function xe({id:e,className:a,disabled:r,checked:t,children:o,name:i,onSelect:l}){return Qa(Za,{children:[vr("input",{disabled:r,checked:t,className:R.tab,id:`${e}-tab-${i}`,name:`${e}-tab`,type:"radio",value:i}),vr("label",{className:Ea(R.tabLabel,a,{[R.disabled]:r}),for:`${e}-tab-${i}`,onClick:l,children:o})]})}import{classNames as xa}from"@blockcode/utils";import{jsx as $a}from"preact/jsx-runtime";function $e({id:e,className:a,name:r,children:t}){return $a("div",{className:xa(R.tabPanel,a),id:`${e}-panel-${r}`,children:t})}import{jsxs as Ia}from"preact/jsx-runtime";function _r({id:e,className:a,children:r}){let t=La(()=>Aa(r).filter((o)=>o).map((o)=>Fa(o,{id:e})),[e,r]);return T({[`.${R.tab}:checked+.${R.tabLabel}`]:{zIndex:`${t.length+1}`}}),Ia("div",{className:Wa(R.tabsWrapper,a),children:[t.filter((o)=>o.type===xe).map((o,i,l)=>{return T({[`.${R.tabLabel}:nth-of-type(${i+1})`]:{zIndex:`${l.length-i}`}}),o}),t.filter((o)=>o.type===$e).map((o)=>{let i=`${e}-tab-${o.props.name}`,l=`${e}-panel-${o.props.name}`;return T({[`#${i}:checked~#${l}`]:{transform:"none"}}),o})]})}import{useRef as Xa,useEffect as qr,useCallback as n1}from"preact/hooks";import{batch as Ua,useComputed as Pa,useSignal as l1}from"@preact/signals";import{classNames as za}from"@blockcode/utils";import{useAppContext as Oa,Text as ee,Button as Ta}from"@blockcode/core";w("._4EOxpW_tutorial-box-wrapper{pointer-events:auto;z-index:var(--z-index-card);min-width:468px;position:absolute;top:60%;left:50%;transform:translate(-50%)}._4EOxpW_tutorial-card{border:1px solid var(--ui-tertiary);border-radius:calc(var(--space)*1.8);cursor:move;box-shadow:0px 5px 25px 5px var(--ui-black-transparent);z-index:20;flex-direction:column;align-items:center;display:flex;overflow:hidden}._4EOxpW_card-header{background:var(--extensions-primary);border-bottom:1px solid var(--extensions-tertiary);width:100%;font-size:var(--small-font-size);flex-direction:row;justify-content:space-between;align-items:center;font-weight:700;display:flex}._4EOxpW_header-button-group{flex-direction:row;display:flex}._4EOxpW_header-button{cursor:pointer;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding:.75rem;display:flex}._4EOxpW_header-button:hover{background:var(--ui-black-transparent)}._4EOxpW_button-icon{border:0;height:1.25rem}._4EOxpW_step-list{flex-direction:row;justify-content:center;align-items:center;display:flex}._4EOxpW_step-pip{cursor:pointer;background:var(--ui-white-transparent);border-radius:100%;width:.5rem;height:.5rem;margin:0 .25rem}._4EOxpW_step-pip._4EOxpW_actived{background:var(--ui-white);-webkit-box-shadow:0px 0px 0px 2px var(--ui-black-transparent);box-shadow:0px 0px 0px 2px var(--ui-black-transparent)}._4EOxpW_card-body{background:var(--ui-white);text-align:center;width:100%;min-height:256px;color:var(--text-primary);flex-direction:column;justify-content:center;align-items:center;display:flex;position:relative}._4EOxpW_title{text-align:center;margin:.9rem;font-size:.9rem;font-weight:700}._4EOxpW_image{object-fit:contain;background:var(--ui-secondary);border:1px solid var(--ui-black-transparent);border-radius:var(--space);max-width:450px;max-height:200px;margin:0 var(--space)var(--space);overflow:hidden}._4EOxpW_text{max-width:450px;height:200px;margin:0 var(--space)var(--space);flex-direction:column;justify-content:center;padding-bottom:2.7rem;font-size:1rem;display:flex}._4EOxpW_more{padding:0 .9rem var(--space);flex-direction:row;justify-content:space-around;display:flex}._4EOxpW_more-item{margin:0 var(--space)var(--space);cursor:pointer;border-radius:var(--space);border:1px solid #00000026;flex-direction:column;display:flex;overflow:hidden}._4EOxpW_more-item-image{object-fit:cover;width:200px;height:100px}._4EOxpW_more-item-name{color:var(--theme-primary);margin:calc(var(--space)*1.2)0px;text-align:center;text-align:center;max-width:200px;font-size:.85rem;font-weight:700}._4EOxpW_see-more-button{background:var(--theme-primary);color:var(--ui-white);border:0}._4EOxpW_left-page,._4EOxpW_right-page{background:var(--ui-white);border:1px solid var(--ui-black-transparent);height:90%;width:calc(var(--space)*1.8);opacity:.9;z-index:10;position:absolute;top:5%;overflow:hidden}._4EOxpW_left-page:after,._4EOxpW_right-page:after{content:\"\";background:var(--extensions-primary);width:100%;height:2.5rem;position:absolute;top:0;left:0}._4EOxpW_left-button,._4EOxpW_right-button{user-select:none;cursor:pointer;background:var(--extensions-primary);box-shadow:0 0 0 4px var(--extensions-transparent);z-index:30;border-radius:100%;justify-content:center;align-items:center;width:44px;height:44px;margin-top:-15px;transition:all .25s;display:flex;position:absolute;top:50%}._4EOxpW_left-button:hover,._4EOxpW_right-button:hover{box-shadow:0 0 0 6px var(--extensions-transparent);transform:scale(1.125)}._4EOxpW_left-button img,._4EOxpW_right-button img{width:1.75rem}._4EOxpW_left-page{border-top-left-radius:calc(var(--space)*1.8);border-bottom-left-radius:calc(var(--space)*1.8);border-right:0;left:-.75rem}._4EOxpW_left-button{left:-27px}._4EOxpW_right-page{right:calc(var(--space)*-1.8);border-top-right-radius:calc(var(--space)*1.8);border-bottom-right-radius:calc(var(--space)*1.8);border-left:0}._4EOxpW_right-button{right:-27px}._4EOxpW_right-button img{transform:rotateY(180deg)}");var b={rightPage:"_4EOxpW_right-page",stepList:"_4EOxpW_step-list",headerButtonGroup:"_4EOxpW_header-button-group",stepPip:"_4EOxpW_step-pip",headerButton:"_4EOxpW_header-button",buttonIcon:"_4EOxpW_button-icon",cardBody:"_4EOxpW_card-body",cardHeader:"_4EOxpW_card-header",leftButton:"_4EOxpW_left-button",text:"_4EOxpW_text",rightButton:"_4EOxpW_right-button",tutorialCard:"_4EOxpW_tutorial-card",title:"_4EOxpW_title",seeMoreButton:"_4EOxpW_see-more-button",image:"_4EOxpW_image",more:"_4EOxpW_more",moreItemImage:"_4EOxpW_more-item-image",tutorialBoxWrapper:"_4EOxpW_tutorial-box-wrapper",actived:"_4EOxpW_actived",moreItemName:"_4EOxpW_more-item-name",moreItem:"_4EOxpW_more-item",leftPage:"_4EOxpW_left-page"};var wr="./assets/icon-shrink-8vdqegra.svg";var yr="./assets/icon-expand-67bgdn61.svg";var Cr="./assets/icon-close-dy7x7fdb.svg";var o1="./assets/icon-arrow-ddhj68kd.svg";import{jsx as f,jsxs as L,Fragment as re}from"preact/jsx-runtime";function Mr({tutorialId:e,onBack:a,onClose:r}){let t=Xa(),{tutorials:o}=Oa(),i=l1(null),l=l1(-1),u=l1(ture),p=Pa(()=>i.value[l.value]),c=n1(()=>{l.value=(l.value+1)%i.value.length},[]),d=n1(()=>{l.value=(l.value-1)%i.value.length},[]),M=n1((k)=>{let _=o.value?.lessons?.[k];if(!_){r();return}Ua(()=>{i.value=[].concat(_.pages,_.next?{next:_.next.filter((C)=>o.lessons[C]).map((C)=>({id:C,title:o.lessons[C].title,image:o.lessons[C].image}))}:[]),l.value=0})},[r]);return qr(()=>M(e),[M]),qr(()=>{if(t.current){let k=t.current.parentElement,_,C,n=(E)=>{let ie=_-E.clientX,we=C-E.clientY;_=E.clientX,C=E.clientY,k.style.top=`${k.offsetTop-we}px`,k.style.left=`${k.offsetLeft-ie}px`},g=()=>{document.removeEventListener("pointerup",g),document.removeEventListener("pointermove",n)};t.current.addEventListener("pointerdown",(E)=>{_=E.clientX,C=E.clientY,document.addEventListener("pointerup",g),document.addEventListener("pointermove",n)})}},[t]),L("div",{className:b.tutorialBoxWrapper,children:[L("div",{ref:t,className:b.tutorialCard,children:[L("div",{className:b.cardHeader,children:[f("div",{className:b.headerButton,onClick:a,children:o.value.type==="course"?L(re,{children:[f("img",{className:b.buttonIcon,src:Ze}),f(ee,{id:"gui.menubar.courses",defaultMessage:"Couress"})]}):L(re,{children:[f("img",{className:b.buttonIcon,src:Qe}),f(ee,{id:"gui.menubar.tutorials",defaultMessage:"Tutorials"})]})}),f("div",{className:b.stepList,children:i.value.map((k,_)=>f("div",{className:za(b.stepPip,{[b.actived]:_===index}),onClick:()=>setIndex(_)},_))}),L("div",{className:b.headerButtonGroup,children:[f("div",{className:b.headerButton,onClick:()=>u.value=!u.value,children:u.value?L(re,{children:[f("img",{className:b.buttonIcon,src:wr}),f(ee,{id:"gui.tutorials.shrink",defaultMessage:"Shrink"})]}):L(re,{children:[f("img",{className:b.buttonIcon,src:yr}),f(ee,{id:"gui.tutorials.expand",defaultMessage:"Expand"})]})}),L("div",{className:b.headerButton,onClick:r,children:[f("img",{className:b.buttonIcon,src:Cr}),f(ee,{id:"gui.tutorials.close",defaultMessage:"Close"})]})]})]}),u.value&&p.value&&L("div",{className:b.cardBody,children:[(p.value.title||p.value.next)&&f("div",{className:b.title,children:p.value.title||f(ee,{id:"gui.tutorials.moreTry",defaultMessage:"More things to try!"})}),p.value.image&&f("img",{className:b.image,src:p.value.image}),p.value.text&&f("div",{className:b.text,children:p.value.text}),p.value.next&&L(re,{children:[f("div",{className:b.more,children:p.value.next.map((k)=>L("div",{className:b.moreItem,onClick:()=>M(k.id),children:[f("img",{className:b.moreItemImage,src:k.image}),f("div",{className:b.moreItemName,children:k.title})]},k.id))}),f(Ta,{className:b.seeMoreButton,onClick:a,children:f(ee,{id:"gui.tutorials.seeMore",defaultMessage:"See more"})})]})]})]}),u.value&&l.value>0&&L(re,{children:[f("div",{className:b.leftPage}),f("div",{className:b.leftButton,onClick:d,children:f("img",{src:o1})})]}),u.value&&l.value<i.value.length-1&&L(re,{children:[f("div",{className:b.rightPage}),f("div",{className:b.rightButton,onClick:c,children:f("img",{src:o1})})]})]})}import{useComputed as Na}from"@preact/signals";import{useAppContext as Va,Text as Br,Library as Ja}from"@blockcode/core";import{jsx as c1}from"preact/jsx-runtime";function Er({onOpenTutorial:e,onClose:a}){let{tutorials:r}=Va(),t=Na(()=>{return Object.entries(r.value.lessons).map(([l,u])=>({featured:!0,title:u.title,image:u.image,onSelect:()=>e(l)}))}),o=r.type==="course"?c1(Br,{id:"gui.library.tutorials.course",defaultMessage:"Choose a course"}):c1(Br,{id:"gui.library.tutorials.tutorial",defaultMessage:"Choose a tutorial"});return c1(Ja,{items:t,title:r.title||o,onClose:a})}import{useCallback as ke,useEffect as Ga}from"preact/hooks";import{useComputed as Ya,useSignal as Ka}from"@preact/signals";import{getProjectsThumbs as ja,getProject as et,cloneProject as rt,renameProject as it,delProject as at}from"@blockcode/utils";import{useProjectContext as tt,closeUserStorage as Qr,maybeTranslate as m1,openPromptModal as xr}from"@blockcode/core";import{Text as H,Library as ot}from"@blockcode/core";w(".mLGZyG_delete-menu-item:hover{background:var(--error-primary)}");var Zr={deleteMenuItem:"mLGZyG_delete-menu-item"};import{jsx as D}from"preact/jsx-runtime";var nt=30;function $r({onOpenProject:e}){let{meta:a}=tt(),r=Ka([]),t=Ya(()=>r.value.length),o=ke((c,d)=>{xr({title:D(H,{id:"gui.library.projects.rename",defaultMessage:"rename"}),inputItems:[{key:"name",label:D(H,{id:"gui.menubar.titlePlaceholder",defaultMessage:"Project title here"}),defaultValue:m1(d??D(H,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}],onSubmit:async(M)=>{if(M?.name)await it(c,M.name),p()}})},[]),i=ke(async(c)=>{await rt(c),p()},[]),l=ke((c,d)=>{xr({title:D(H,{id:"gui.library.projects.delete",defaultMessage:"delete"}),label:D(H,{id:"gui.library.projects.deleteConfirm",defaultMessage:'Delect "{name}" project?',name:m1(d||D(H,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}),onSubmit:async()=>{await at(c),p()}})},[]),u=ke((c)=>async()=>{let d=await et(c);e(d),Qr()},[]),p=ke(async()=>{let c=await ja();if(a.value?.editor)c=c.filter((d)=>d.meta.editor===a.value.editor);c=c.sort((d,M)=>M.modifiedDate-d.modifiedDate),r.value=c.map((d)=>({name:m1(d.name??D(H,{id:"gui.project.shortname",defaultMessage:"Untitled"})),image:d.thumb,onSelect:u(d.key),contextMenu:[[{label:D(H,{id:"gui.library.projects.rename",defaultMessage:"rename"}),onClick:()=>o(d.key,d.name)},{label:D(H,{id:"gui.library.projects.duplicate",defaultMessage:"duplicate"}),onClick:()=>i(d.key)}],[{label:D(H,{id:"gui.library.projects.delete",defaultMessage:"delete"}),className:Zr.deleteMenuItem,onClick:()=>l(d.key,d.name)}]]}))},[u,o,l]);return Ga(()=>p(),[p]),D(ot,{items:r.value,filterable:t.value>nt,emptyMessage:D(H,{id:"gui.library.projects.empty",defaultMessage:"No project!"}),onClose:Qr})}w("._3HqakW_gui-wrapper{height:100%}._3HqakW_alerts-container{width:100%;z-index:var(--z-index-alerts);margin-top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;justify-content:center;display:flex;position:absolute}._3HqakW_menu-bar-position{z-index:var(--z-index-menu-bar);position:relative}._3HqakW_body-wrapper{height:calc(100% - var(--menu-bar-height));background:var(--ui-primary)}._3HqakW_body-wrapper *{box-sizing:border-box}._3HqakW_workspace-wrapper{flex-direction:row;height:100%;display:flex;overflow-y:hidden}._3HqakW_sidebar-wrapper{margin:0 var(--space);display:flex;position:relative}._3HqakW_editor-wrapper{flex-direction:column;flex-grow:1;flex-shrink:0;display:flex;position:relative}._3HqakW_tabs-wrapper{flex-grow:1;position:relative}._3HqakW_tab-panel-no-left{border-bottom-left-radius:0}._3HqakW_tab-panel-no-right{border-top-right-radius:0;border-bottom-right-radius:0}._3HqakW_tab-panel-no-bottom{border-bottom-right-radius:0;border-bottom-left-radius:0}._3HqakW_pane-wrapper{margin:var(--space)0 0 0;display:flex;position:relative}");var W={tabPanelNoBottom:"_3HqakW_tab-panel-no-bottom",tabsWrapper:"_3HqakW_tabs-wrapper",bodyWrapper:"_3HqakW_body-wrapper",tabPanelNoRight:"_3HqakW_tab-panel-no-right",paneWrapper:"_3HqakW_pane-wrapper",menuBarPosition:"_3HqakW_menu-bar-position",guiWrapper:"_3HqakW_gui-wrapper",workspaceWrapper:"_3HqakW_workspace-wrapper",tabPanelNoLeft:"_3HqakW_tab-panel-no-left",sidebarWrapper:"_3HqakW_sidebar-wrapper",alertsContainer:"_3HqakW_alerts-container",editorWrapper:"_3HqakW_editor-wrapper"};import{jsx as v,jsxs as ve,Fragment as Ar}from"preact/jsx-runtime";var ce=ut({Bluetooth:null,SerialPort:null}),We=()=>me(()=>{wt(),vt()}),Wr=(e)=>{me(()=>{Ir(),_t(Object.assign(JSON.parse(JSON.stringify(e)),{fileId:e.fileId??e.files?.[0]?.id})),Dr(0)})};function Sr(){let[e]=lt(),{language:a}=gt(),r=dt();Fr(()=>{document.title=ht("gui.name","BlockCode Playgrounds"),document.title+=" [BETA]"},[a.value]);let t,o;r.docks.value?.forEach((s)=>{if(s.expand==="left")t=s.Content;else o=s.Content});let i=r.panes.value?.[0].Content,l=pt({[W.tabPanelNoLeft]:!t,[W.tabPanelNoRight]:!o,[W.tabPanelNoBottom]:!i}),u=Fe(null);Fr(()=>{if(window.electron)window.electron.serial.onScan((s)=>{u.value=s&&{devices:s,type:ce.SerialPort}}),window.electron.bluetooth.onScan((s)=>{u.value=s&&{devices:s,type:ce.Bluetooth}})},[]);let p=()=>{},c=P(()=>{if(window.electron){if(u.value.type===ce.SerialPort)window.electron.serial.cancel();if(u.value.type===ce.Bluetooth)window.electron.bluetooth.cancel();u.value=null}},[]),d=P((s)=>{if(window.electron){if(u.value.type===ce.SerialPort)window.electron.serial.connect(s);if(u.value.type===ce.Bluetooth)window.electron.bluetooth.connect(s)}},[]),M=Fe({});mt(async()=>{let s=await ge();s=s.map((Z)=>[Z.id,{name:Z.name,version:Z.version}]),M.value=Object.fromEntries(s)});let k=Fe(!1),_=Fe(null),C=P(()=>{me(()=>{_.value=null,k.value=!0})},[]),n=P((s)=>{me(()=>{_.value=s,k.value=!1})},[]),{meta:g,key:E,modified:ie}=st(),we=ct(()=>!g.value),Rr=P(()=>{if(ie.value)Le({title:v(le,{id:"gui.library.projects.notSaved",defaultMessage:"Not saved"}),label:v(le,{id:"gui.library.projects.close",defaultMessage:"Close current project?"}),onSubmit:We});else We()},[]),Ae=P((s,Z)=>{if(Z!==s.meta.editor){Le({label:v(le,{id:"gui.library.projects.errorEditor",defaultMessage:'This project is not currently editor creation, please switch to "{editor}" and open it.',editor:bt(M.value[s.meta.editor]?.name)}),redStyle:!0});return}if(E.value===s.key)return;if(ie.value)Le({title:v(le,{id:"gui.library.projects.notSaved",defaultMessage:"Not saved"}),label:v(le,{id:"gui.library.projects.replace",defaultMessage:"Replace contents of the current project?"}),onSubmit:()=>Wr(s)});else Wr(s)},[]),u1=P(async(s,Z)=>{me(()=>{We(),Ir()});let x;try{x=(await import(s)).default}catch(Et){Le({label:v(le,{id:"gui.library.projects.notFoundEditor",defaultMessage:'Not Found the "{editor}" Editor.',editor:s}),redStyle:!0}),ft();return}let Ie={editor:s,version:M.value[s]?.version};if(!Z)Z=JSON.parse(JSON.stringify(await x.onNew()));if(!Z.meta)Z.meta=Ie;if(!Z.meta.editor)Z.meta.editor=s,Z.meta.version=Ie.version;let Hr={menuItems:E1(x,Ie,Ae),tabs:x.tabs,docks:x.docks,panes:x.panes,tutorials:x.tutorials};me(()=>{kt(Hr),Ae(Z,s)})},[]),d1=P((s)=>{if(g.value?.editor!==s.meta.editor){We(),u1(s.meta.editor,s);return}Ae(s,g.value.editor)},[]);return ve(Ar,{children:[(r.splashVisible.value||e)&&v(kr,{error:e}),v(F1,{items:r.alerts.value}),v(cr,{className:W.menuBarPosition,showHomeButton:!we.value,onRequestHome:Rr,onOpenTutorialLibrary:C}),v("div",{className:W.bodyWrapper,children:ve("div",{className:W.workspaceWrapper,children:[t&&v("div",{className:W.sidebarWrapper,children:v(t,{})}),ve("div",{className:W.editorWrapper,children:[v(_r,{id:W.tabsWrapper,className:W.tabsWrapper,children:r.tabs.value?.map(({Content:s,...Z},x)=>ve(Ar,{children:[ve(xe,{name:x,disabled:Z.disabled,checked:x===r.tabIndex.value,onSelect:()=>Dr(x),children:[v("img",{src:Z.icon}),Z.label]},x),v($e,{name:x,className:l,children:(x===0||r.tabIndex.value===x)&&s&&v(s,{})},x)]}))}),i&&v(mr,{id:W.paneWrapper,className:W.paneWrapper,title:pane.label,right:!o,left:!t,children:v(i,{})})]}),o&&v("div",{className:W.sidebarWrapper,children:v(o,{})})]})}),u.value&&v(A1,{title:g.value.deviceName,icon:g.value.deviceIcon,devices:u.value.devices,onClose:c,onConnect:d}),_.value&&v(Mr,{tutorialId:_.value,onBack:C,onClose:P(()=>_.value=null,[])}),k.value&&v(Er,{onOpenTutorial:n,onClose:P(()=>k.value=!1,[])}),we.value&&v(V1,{onOpenEditor:u1,onOpenProject:d1}),r.userStorageVisible.value&&v($r,{onOpenProject:d1}),r.prompt.value&&(r.prompt.value.inputItems?v(fr,{title:r.prompt.value.title,content:r.prompt.value.content,inputItems:r.prompt.value.inputItems,onClose:Lr,onSubmit:r.prompt.value.onSubmit}):v(dr,{title:r.prompt.value.title,label:r.prompt.value.label,content:r.prompt.value.content,redStyle:r.prompt.value.redStyle,onClose:Lr,onSubmit:r.prompt.value.onSubmit,children:r.prompt.value.body}))]})}import{addAlertConfig as V,Text as J,Spinner as p1}from"@blockcode/core";import{jsx as X}from"preact/jsx-runtime";V("importing",{icon:X(p1,{level:"success"}),message:X(J,{id:"gui.alert.importing",defaultMessage:"Importing..."})});V("downloading",{icon:X(p1,{level:"success"}),message:X(J,{id:"gui.alert.downloading",defaultMessage:"Downloading..."})});V("downloadCompleted",{icon:null,message:X(J,{id:"gui.alert.downloadCompleted",defaultMessage:"Download completed."})});V("connectionError",{mode:"warn",message:X(J,{id:"gui.alert.connectionError",defaultMessage:"Connection error."})});V("connectionCancel",{mode:"warn",message:X(J,{id:"gui.alert.connectionCancel",defaultMessage:"Connection cancel."})});V("compiling",{icon:X(p1,{level:"success"}),message:X(J,{id:"gui.alert.compiling",defaultMessage:"Compiling..."})});V("compileCompleted",{icon:null,message:X(J,{id:"gui.alert.compileSuccess",defaultMessage:"Compilation completed."})});V("compileError",{mode:"warn",message:X(J,{id:"gui.alert.compileError",defaultMessage:"Compilation error."})});import{jsx as _e}from"preact/jsx-runtime";function Bt(){return _e(Ct,{children:_e(qt,{children:_e(Mt,{children:_e(Sr,{})})})})}yt(_e(Bt,{}),document.getElementById("root"));
