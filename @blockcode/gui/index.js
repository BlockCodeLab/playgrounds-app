import{addLocalesMessages as Ji}from"@blockcode/core";var br={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"Importing...","gui.alert.downloading":"Downloading...","gui.alert.downloadingProgress":"Downloading...{progress}%","gui.alert.downloadCompleted":"Download completed.","gui.alert.connectionCancel":"Connection cancel.","gui.alert.connectionError":"Connection error, or connection was lost.","gui.alert.compiling":"Compiling...","gui.alert.compileSuccess":"Compilation completed.","gui.alert.compileError":"Compilation failed.","gui.alert.compileViewError":"View Message.","gui.alert.saving":"Saving project...","gui.alert.saved":"Saved.","gui.alert.savedComputer":"Saved to your computer.","gui.alert.saveAbortError":"Abort saving.","gui.alert.saveError":"Failed save.","gui.home.my":"My projects","gui.home.all":"View all","gui.home.allCounts":"View all ({counts})","gui.home.new":"Create new project","gui.home.examples":"Wonderful {label} projects","gui.home.slideshow.desktop.title":"The desktop application is here!","gui.home.slideshow.desktop.button":"Download","gui.home.slideshow.tankwar.title":"The Tank War is coming! Join us!","gui.home.slideshow.tankwar.button":"Join us","gui.home.slideshow.arcade.title":"The next game, create your own!","gui.home.slideshow.arcade.button":"Create now","gui.splash.loading":"Loading project...","gui.splash.errorTitle":"Error occurred","gui.splash.errorLabel":"Please refresh the page and reopen it.","gui.menubar.courses":"Courses","gui.menubar.tutorials":"Tutorials","gui.menubar.titlePlaceholder":"Project title here","gui.menubar.file":"File","gui.menubar.file.newProject":"New","gui.menubar.file.openProject":"Open...","gui.menubar.file.saveProject":"Save","gui.menubar.file.uploadProject":"Load from your computer...","gui.menubar.file.downloadProject":"save to your computer...","gui.menubar.edit":"Edit","gui.menubar.edit.undo":"Undo","gui.menubar.edit.redo":"Redo","gui.menubar.device":"Device","gui.menubar.device.sync":"Sync program","gui.menubar.device.download":"Download program","gui.menubar.device.reset":"Reset device","gui.menubar.device.connect":"Connect device...","gui.menubar.device.connectUsb":"Connect device with USB...","gui.menubar.device.connectBle":"Connect device with Bluetooth (BLE)...","gui.menubar.device.disconnect":"Disconnect device","gui.project.name":"Untitled Project","gui.project.shortname":"Untitled","gui.library.search":"Search","gui.library.projects.empty":"No project!","gui.library.projects.rename":"rename","gui.library.projects.duplicate":"duplicate","gui.library.projects.delete":"delete","gui.library.projects.notSaved":"Not saved","gui.library.projects.close":"Close current project?","gui.library.projects.deleteConfirm":'Do you want to delete the project "{name}"?',"gui.library.projects.replace":"Replace contents of the current project?","gui.library.projects.errorEditor":'This project is not currently editor creation, please switch to "{workspace}" and open it.',"gui.library.projects.notFoundEditor":'Not Found the "{editor}" Editor.',"gui.library.examples.interconnect":"The project requires two devices to work properly.","gui.library.tutorial.course":"Choose a course","gui.library.tutorial.tutorial":"Choose a tutorial","gui.tutorials.shrink":"Shrink","gui.tutorials.expand":"Expand","gui.tutorials.close":"Close","gui.tutorials.moreTry":"More things to try!","gui.tutorials.seeMore":"See more","gui.prompt.ok":"OK","gui.prompt.close":"Close","gui.prompt.cancel":"Cancel","gui.prompt.reconnect":"Reconnect","gui.connection.device":"Device Connection","gui.connection.search":"Start Searching","gui.connection.searching":"Searching...","gui.connection.connect":"Start Connecting","gui.connection.deviceName":"Device name","gui.about.title":"About...","gui.about.main":"Main program","gui.terms.title":"Terms of Use","gui.terms.content":`<b>Terms of Use</b>
`,"gui.privacy.title":"Privacy","gui.privacy.content":`<b>Privacy</b>
`};var vr={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"载入中…","gui.alert.downloading":"正在下载…","gui.alert.downloadingProgress":"正在下载…{progress}%","gui.alert.downloadCompleted":"下载完成。","gui.alert.connectionCancel":"连接取消。","gui.alert.connectionError":"连接发生错误，或已断开。","gui.alert.compiling":"正在编译…","gui.alert.compileSuccess":"编译完成。","gui.alert.compileError":"编译失败。","gui.alert.compileViewError":"查看信息","gui.alert.saving":"正在保存作品…","gui.alert.saved":"已保存。","gui.alert.savedComputer":"已保存到电脑。","gui.alert.saveAbortError":"取消保存。","gui.alert.saveError":"保存作品失败。","gui.home.my":"我的作品","gui.home.all":"查看全部","gui.home.allCounts":"查看全部（{counts}）","gui.home.new":"开始新作品","gui.home.examples":"{label} 精彩作品","gui.home.slideshow.desktop.title":"桌面端程序已就绪，快来下载！","gui.home.slideshow.desktop.button":"立即下载","gui.home.slideshow.tankwar.title":"战争一触即发，赶紧来战吧！","gui.home.slideshow.tankwar.button":"加入战斗","gui.home.slideshow.arcade.title":"玩的下一个游戏，就要自己创作！","gui.home.slideshow.arcade.button":"开始创作","gui.splash.loading":"加载作品…","gui.splash.errorTitle":"发生错误","gui.splash.errorLabel":"请刷新页面重新打开。","gui.menubar.courses":"课程","gui.menubar.tutorials":"教程","gui.menubar.titlePlaceholder":"在此填写作品标题","gui.menubar.file":"文件","gui.menubar.file.newProject":"新作品","gui.menubar.file.openProject":"打开…","gui.menubar.file.saveProject":"保存","gui.menubar.file.uploadProject":"从电脑中打开…","gui.menubar.file.downloadProject":"保存到电脑…","gui.menubar.edit":"编辑","gui.menubar.edit.undo":"撤销","gui.menubar.edit.redo":"重做","gui.menubar.view":"查看","gui.menubar.device":"设备","gui.menubar.device.sync":"同步程序","gui.menubar.device.download":"下载程序","gui.menubar.device.reset":"复位","gui.menubar.device.connect":"连接…","gui.menubar.device.connectUsb":"通过 USB 连接…","gui.menubar.device.connectBle":"通过蓝牙（BLE）连接…","gui.menubar.device.disconnect":"断开连接","gui.project.name":"未命名作品","gui.project.shortname":"未命名","gui.library.search":"搜索","gui.library.projects.empty":"没有作品！","gui.library.projects.rename":"重命名","gui.library.projects.duplicate":"复制","gui.library.projects.delete":"删除","gui.library.projects.notSaved":"未保存作品","gui.library.projects.close":"要关闭当前作品吗？","gui.library.projects.deleteConfirm":"要删除“《{name}》”作品吗？","gui.library.projects.replace":"要创建新作品替换当前作品吗？","gui.library.projects.errorEditor":"这个作品不是当前编辑器创作，请切换至“{editor}”编辑器然后打开。","gui.library.projects.notFoundEditor":"没有发现“{editor}”编辑器。","gui.library.examples.interconnect":"该作品需要两台设备联机才能正常运行。","gui.library.tutorials.course":"选择一个课程","gui.library.tutorials.tutorial":"选择一个教程","gui.tutorials.shrink":"收起","gui.tutorials.expand":"展开","gui.tutorials.close":"关闭","gui.tutorials.moreTry":"再试试这些！","gui.tutorials.seeMore":"更多技巧","gui.prompt.ok":"确认","gui.prompt.close":"关闭","gui.prompt.cancel":"取消","gui.prompt.reconnect":"重新连接","gui.connection.device":"硬件连接","gui.connection.search":"开始搜索","gui.connection.searching":"正在搜索…","gui.connection.connect":"开始连接","gui.connection.deviceName":"硬件名称","gui.about.title":"版本信息","gui.about.main":"主程序","gui.terms.title":"使用条款","gui.terms.content":`<b>使用条款</b>
`,"gui.privacy.title":"隐私","gui.privacy.content":`<b>隐私</b>
`};var kr={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"載入中…","gui.alert.downloading":"正在下載…","gui.alert.downloadingProgress":"正在下載…{progress}%","gui.alert.downloadCompleted":"下載完成。","gui.alert.connectionCancel":"連接取消。","gui.alert.connectionError":"連接發生錯誤，或已斷開。","gui.alert.compiling":"正在編譯…","gui.alert.compileSuccess":"編譯完成。","gui.alert.compileError":"編譯失敗。","gui.alert.compileViewError":"查看信息","gui.alert.saving":"正在保存專案…","gui.alert.saved":"已保存。","gui.alert.savedComputer":"已保存到電腦。","gui.alert.saveAbortError":"取消保存。","gui.alert.saveError":"保存專案失敗。","gui.home.my":"我的專案","gui.home.all":"查看全部","gui.home.allCounts":"查看全部（{counts}）","gui.home.new":"開始新專案","gui.home.examples":"{label} 精彩專案","gui.home.slideshow.desktop.title":"桌面端程序已就緒，快來下載！","gui.home.slideshow.desktop.button":"立即下載","gui.home.slideshow.tankwar.title":"戰爭一觸即髮，趕緊來戰吧！","gui.home.slideshow.tankwar.button":"加入戰鬥","gui.home.slideshow.arcade.title":"玩的下一個遊戲，就要自己創作！","gui.home.slideshow.arcade.button":"開始創作","gui.splash.loading":"加載專案…","gui.splash.errorTitle":"發生錯誤","gui.splash.errorLabel":"請刷新頁面重新打開。","gui.menubar.courses":"課程","gui.menubar.tutorials":"教程","gui.menubar.titlePlaceholder":"在此填寫專案標題","gui.menubar.file":"文檔","gui.menubar.file.newProject":"新專案","gui.menubar.file.openProject":"打開…","gui.menubar.file.saveProject":"保存","gui.menubar.file.uploadProject":"從電腦中打開…","gui.menubar.file.downloadProject":"保存到電腦…","gui.menubar.edit":"編輯","gui.menubar.edit.undo":"撤銷","gui.menubar.edit.redo":"重做","gui.menubar.device":"設備","gui.menubar.device.sync":"同步程序","gui.menubar.device.download":"下載程序","gui.menubar.device.reset":"重置","gui.menubar.device.connect":"連接…","gui.menubar.device.connectUsb":"通過 USB 連接…","gui.menubar.device.connectBle":"通過藍牙（BLE）連接…","gui.menubar.device.disconnect":"斷開連接","gui.project.name":"未命名專案","gui.project.shortname":"未命名","gui.library.search":"搜索","gui.library.projects.empty":"沒有專案！","gui.library.projects.rename":"重命名","gui.library.projects.duplicate":"複製","gui.library.projects.delete":"刪除","gui.library.projects.notSaved":"未保存專案","gui.library.projects.close":"要關閉當前專案嗎？","gui.library.projects.deleteConfirm":"要刪除“《{name}》”專案嗎？","gui.library.projects.replace":"要創建新專案替換當前專案嗎？","gui.library.projects.errorEditor":"這個專案不是當前編輯器創作，請切換至“{editor}”編輯器然後打開。","gui.library.projects.notFoundEditor":"沒有發現「{editor}」編輯器。","gui.library.examples.interconnect":"該專案需要兩枱設備聯機纔能正常運行。","gui.library.tutorials.course":"選擇一個課程","gui.library.tutorials.tutorial":"選擇一個教程","gui.tutorials.shrink":"收起","gui.tutorials.expand":"展開","gui.tutorials.close":"關閉","gui.tutorials.moreTry":"再試試這些！","gui.tutorials.seeMore":"更多技巧","gui.prompt.ok":"確認","gui.prompt.close":"關閉","gui.prompt.cancel":"取消","gui.prompt.reconnect":"重新連接","gui.connection.device":"硬件連接","gui.connection.search":"開始搜索","gui.connection.searching":"正在搜索…","gui.connection.connect":"開始連接","gui.connection.deviceName":"硬件名稱","gui.about.title":"版本信息","gui.about.main":"主程式","gui.terms.title":"使用條款","gui.terms.content":`<b>使用條款</b>
`,"gui.privacy.title":"隱私","gui.privacy.content":`<b>隱私</b>
`};Ji({en:br,"zh-Hans":vr,"zh-Hant":kr});import{render as O1}from"preact";import{LocalesProvider as T1,AppProvider as N1,ProjectProvider as V1}from"@blockcode/core";import{useCallback as T,useEffect as Ui,useErrorBoundary as E1}from"preact/hooks";import{batch as ce,useComputed as Z1,useSignal as We,useSignalEffect as Q1}from"@preact/signals";import{isElectron as pr,classNames as $1,keyMirror as F1,openProjectFromURL as x1}from"@blockcode/utils";import{useAppContext as W1,useLocalesContext as L1,useProjectContext as A1,translate as D1,maybeTranslate as I1,showSplash as zi,hideSplash as S1,openPromptModal as Le,closePromptModal as Xi,openLayout as R1,closeLayout as H1,openTab as Oi,openProject as U1,closeProject as X1,setAlert as P1,delAlert as z1}from"@blockcode/core";import{Text as Wr,MenuSection as Eo,MenuItem as Zo}from"@blockcode/core";import{useCallback as Ce}from"preact/hooks";import{batch as Gi}from"@preact/signals";import{isElectron as _r,isMac as Se,putProject as Yi,openProjectFromComputer as Ki,saveProjectToComputer as ji,sleepMs as ea}from"@blockcode/utils";import{useProjectContext as ra,setAlert as Ue,openUserStorage as ia,setFile as aa,setModified as ta,ModifyTypes as oa,Keys as O}from"@blockcode/core";import{Text as X,MenuSection as Re,MenuItem as me}from"@blockcode/core";function w(e){let i=globalThis.document,r=i.createElement("style");r.appendChild(i.createTextNode(e)),i.head.append(r)}w(".cbXT-q_menu-bar{box-sizing:border-box;height:var(--menu-bar-height);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:var(--menu-bar-standard-font-size);background-color:var(--theme-primary);color:var(--ui-white);-webkit-user-select:none;-webkit-app-region:drag;flex-flow:row;justify-content:space-between;font-weight:700;display:flex;box-shadow:0 0 3px #00000040}.cbXT-q_menu-bar-item{color:var(--ui-white);user-select:none;white-space:nowrap;height:var(--menu-bar-height);align-self:center;align-items:center;padding:0 .25rem;text-decoration:none;display:flex;position:relative}.cbXT-q_menu-bar-item.cbXT-q_growable{max-width:var(--menu-bar-item-max-width);flex:1}.cbXT-q_main-menu{-webkit-app-region:no-drag;flex-flow:row;justify-content:flex-start;align-items:center;gap:.25rem;display:flex}.cbXT-q_main-menu.cbXT-q_electron{margin-left:72px}.cbXT-q_right-menu{-webkit-app-region:no-drag;flex-flow:row;justify-content:flex-start;align-items:center;gap:.25rem;display:flex}.cbXT-q_menu-label{padding:0 .75rem}.cbXT-q_menu-label img{margin-right:.25rem}.cbXT-q_language-label{width:var(--language-selector-width);padding:0 .5rem}input.cbXT-q_menu-label{display:none}input.cbXT-q_menu-label+.cbXT-q_menu-bar-item:hover{cursor:pointer;background:var(--ui-black-transparent)}input.cbXT-q_menu-label:checked+.cbXT-q_menu-bar-item{background:var(--ui-black-transparent)}.cbXT-q_menu{top:var(--menu-bar-height);z-index:var(--z-index-menu-bar);border-radius:0 0 var(--space)var(--space);color:var(--ui-white);background:var(--theme-primary);min-width:186px;display:none}.cbXT-q_menu-item{font-weight:700}.cbXT-q_menu-item:hover{background:var(--ui-black-transparent)}.cbXT-q_language-icon{vertical-align:middle;height:1.5rem}.cbXT-q_check-icon{margin-right:calc(var(--space)/2);visibility:hidden;width:14px}.cbXT-q_check-icon.cbXT-q_checked{visibility:visible}.cbXT-q_divider{border-right:1px dashed var(--ui-black-transparent);height:34px;margin:0 .7rem}.cbXT-q_hoverable:hover{cursor:pointer;background:var(--ui-black-transparent)}.cbXT-q_tutorials-icon{margin-right:.35rem}.cbXT-q_title-field{border:1px dashed var(--ui-black-transparent);border-radius:var(--form-radius);-webkit-border-radius:var(--form-radius);-moz-border-radius:var(--form-radius);background-color:var(--ui-white-transparent);height:auto;color:var(--ui-white);-webkit-background-clip:padding-box;background-clip:padding-box;padding:.5rem;font-size:.8rem;font-weight:700}.cbXT-q_title-field::placeholder{color:var(--ui-white);font-size:.8rem;font-style:italic;font-weight:400}.cbXT-q_title-field:hover{background-color:#ffffff80}.cbXT-q_title-field:focus{border:1px solid var(--ui-transparent);-webkit-box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);background-color:var(--ui-white);color:var(--text-primary);outline:none}.cbXT-q_home-icon,.cbXT-q_closeIcon{padding:0 .35rem}");var d={menuBar:"cbXT-q_menu-bar",electron:"cbXT-q_electron",divider:"cbXT-q_divider",hoverable:"cbXT-q_hoverable",menuLabel:"cbXT-q_menu-label",rightMenu:"cbXT-q_right-menu",checked:"cbXT-q_checked",menuBarItem:"cbXT-q_menu-bar-item",menu:"cbXT-q_menu",checkIcon:"cbXT-q_check-icon",tutorialsIcon:"cbXT-q_tutorials-icon",languageIcon:"cbXT-q_language-icon",homeIcon:"cbXT-q_home-icon",closeIcon:"cbXT-q_closeIcon",growable:"cbXT-q_growable",mainMenu:"cbXT-q_main-menu",menuItem:"cbXT-q_menu-item",languageLabel:"cbXT-q_language-label",titleField:"cbXT-q_title-field"};import{jsx as Z,jsxs as He,Fragment as na}from"preact/jsx-runtime";var yr=(e=!1)=>Ue({message:Z(X,{id:"gui.alert.saving",defaultMessage:"Saving project..."})},e),wr=(e,i=!1)=>Ue({id:e,message:i?Z(X,{id:"gui.alert.savedComputer",defaultMessage:"Saved to your computer."}):Z(X,{id:"gui.alert.saved",defaultMessage:"Saved to local storage."})},2000),qr=(e,i=!1)=>Ue({id:e,mode:"warn",message:i?Z(X,{id:"gui.alert.saveAbortError",defaultMessage:"Abort saving."}):Z(X,{id:"gui.alert.saveError",defaultMessage:"Failed save."})},i?1000:2000);function Cr({onNew:e,onOpen:i,onSave:r,onThumb:t,ExtendedMenu:o}){let{meta:a,key:n,name:l,files:p,assets:c}=ra(),u=Ce(async()=>{await ea(0);for(let v in a.value.monitors)if(a.value.monitors[v].deleting)a.value.monitors.splice(v,1);let m=c.value?.filter((v)=>!v.uri),s=await r(p.value,m,a.value);return s.meta=Object.assign(s.meta??{},{editor:a.value.editor,version:a.value.version,monitors:a.value.monitors,users:a.value.users}),s.name=l.value,s},[r]),B=Ce(async()=>{let m=yr(),s=await u();s.key=n.value;let v=await Yi(s,t);Gi(()=>{if(s.key!==v)aa({key:v});ta(oa.Saved)}),wr(m)},[u]),f=Ce(async()=>{let m=yr(_r?1000:!1),s=await u(),v=await ji(s);if(_r)return;if(v.success)wr(m,!0);else if(v.error==="AbortError")qr(m,!0);else qr(m)},[u]),b=Ce(async()=>{let m=await Ki();await i(m)},[i]);return He(na,{children:[Z(Re,{children:Z(me,{className:d.menuItem,label:Z(X,{id:"gui.menubar.file.newProject",defaultMessage:"New"}),hotkey:[Se?O.COMMAND:O.CONTROL,O.N],onClick:e})}),He(Re,{children:[Z(me,{className:d.menuItem,label:Z(X,{id:"gui.menubar.file.openProject",defaultMessage:"Open"}),hotkey:[Se?O.COMMAND:O.CONTROL,O.O],onClick:ia}),Z(me,{className:d.menuItem,label:Z(X,{id:"gui.menubar.file.saveProject",defaultMessage:"Save"}),hotkey:[Se?O.COMMAND:O.CONTROL,O.S],onClick:B})]}),He(Re,{children:[Z(me,{className:d.menuItem,label:Z(X,{id:"gui.menubar.file.uploadProject",defaultMessage:"Load from your computer"}),onClick:b}),Z(me,{className:d.menuItem,label:Z(X,{id:"gui.menubar.file.downloadProject",defaultMessage:"save to your computer"}),onClick:f})]}),o&&Z(o,{itemClassName:d.menuItem,onOpen:i,onSave:u})]})}import{useEffect as la}from"preact/hooks";import{batch as ca,useSignal as Br}from"@preact/signals";import{isMac as Mr}from"@blockcode/utils";import{useProjectContext as ma,Keys as N}from"@blockcode/core";import{Text as Er,MenuSection as ua,MenuItem as Zr}from"@blockcode/core";import{jsx as ue,jsxs as Qr,Fragment as pa}from"preact/jsx-runtime";function $r({onUndo:e,onRedo:i,onEnableUndo:r,onEnableRedo:t,ExtendedMenu:o}){let{key:a,fileId:n,modified:l}=ma(),p=Br(!0),c=Br(!0);return la(()=>{ca(()=>{p.value=!r(),c.value=!t()})},[a.value,n.value,l.value]),Qr(pa,{children:[Qr(ua,{children:[ue(Zr,{disabled:p.value,className:d.menuItem,label:ue(Er,{id:"gui.menubar.edit.undo",defaultMessage:"Undo"}),hotkey:[Mr?N.COMMAND:N.CONTROL,N.Z],onClick:e}),ue(Zr,{disabled:c.value,className:d.menuItem,label:ue(Er,{id:"gui.menubar.edit.redo",defaultMessage:"Redo"}),hotkey:Mr?[N.SHIFT,N.COMMAND,N.Z]:[N.CONTROL,N.Y],onClick:i})]}),o&&ue(o,{itemClassName:d.menuItem})]})}var Fr="./assets/icon-file-egaz1kfx.svg";var xr="./assets/icon-edit-jejnm7yb.svg";import{jsx as Be}from"preact/jsx-runtime";function Lr(e,i,r){let t=(a)=>r(a,i.editor),o=async()=>{let a=JSON.parse(JSON.stringify(await e.onNew()));if(!a.meta)a.meta=i;if(!a.meta.editor)a.meta.editor=i.editor,a.meta.version=i.version;t(a,i.editor)};return[{icon:Fr,label:Be(Wr,{id:"gui.menubar.file",defaultMessage:"File"}),Menu:()=>Be(Cr,{ExtendedMenu:e.menuItems?.find((a)=>a.id==="file")?.Menu,onNew:o,onOpen:t,onSave:e.onSave,onThumb:e.onThumb})},{icon:xr,label:Be(Wr,{id:"gui.menubar.edit",defaultMessage:"Edit"}),Menu:()=>Be($r,{ExtendedMenu:e.menuItems?.find((a)=>a.id==="edit")?.Menu,onUndo:e.onUndo,onRedo:e.onRedo,onEnableUndo:e.onEnableUndo,onEnableRedo:e.onEnableRedo})}].concat(e.menuItems?.filter((a)=>a.id!=="file"&&a.id!=="edit")??[])}import{Text as ne}from"@blockcode/core";import{classNames as ha}from"@blockcode/utils";import{Button as Dr}from"@blockcode/core";w(".lkaaPa_alerts-wrapper{width:100%;z-index:var(--z-index-alerts);top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute}.lkaaPa_alert-wrapper{pointer-events:all;background:var(--ui-light);border:1px solid var(--blocks-tertiary);min-width:200px;max-width:548px;min-height:1.5rem;box-shadow:0px 0px 0px 2px var(--ui-light);border-radius:.5rem;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:7px;padding:.875rem 1rem;display:flex;overflow:hidden}.lkaaPa_warn{border:1px solid var(--error-primary)}.lkaaPa_icon{min-width:1.25rem;min-height:1.25rem;padding-right:1rem;display:flex}.lkaaPa_message{justify-content:flex-end;align-items:center;padding-right:.5rem;font-size:.8125rem;font-weight:700;line-height:.875rem;display:flex}.lkaaPa_warn .lkaaPa_message{color:var(--error-secondary)}.lkaaPa_success .lkaaPa_message{color:#555}.lkaaPa_button{color:var(--ui-white);margin-left:var(--space);padding:var(--space)calc(var(--space)*2.5);background:#ff8c1a;border:#ff8c1a}.lkaaPa_close-button{width:1.75rem;height:1.75rem;margin-left:calc(var(--space)*2);background:#ff861433;border:0;border-radius:50%;padding:0;transition:all .15s ease-out;box-shadow:0 0 0 2px #ff861433}.lkaaPa_close-button:hover{transform:scale(1.1);box-shadow:0 0 0 4px #ff861433}.lkaaPa_close-button img{margin:0 auto}");var P={success:"lkaaPa_success",message:"lkaaPa_message",warn:"lkaaPa_warn",icon:"lkaaPa_icon",closeButton:"lkaaPa_close-button",alertsWrapper:"lkaaPa_alerts-wrapper",alertWrapper:"lkaaPa_alert-wrapper",button:"lkaaPa_button"};var Ar="./assets/icon-close-bazpdng8.svg";import{jsx as ie,jsxs as fa}from"preact/jsx-runtime";function Ir({mode:e,icon:i,message:r,button:t,onClose:o}){return fa("div",{className:ha(P.alertWrapper,{[P.success]:e==="success",[P.warn]:e==="warn"}),children:[ie("div",{className:P.icon,children:typeof i==="string"?ie("img",{src:i}):i}),ie("div",{className:P.message,children:r}),t&&ie(Dr,{className:P.button,onClick:t.onClick,children:t.label}),o&&ie(Dr,{className:P.closeButton,onClick:o,children:ie("img",{src:Ar})})]})}import{jsx as Sr}from"preact/jsx-runtime";function Rr({items:e}){return Sr("div",{className:P.alertsWrapper,children:e.map((i)=>Sr(Ir,{mode:i.mode??"success",icon:i.icon,message:i.message,button:i.button,onClose:i.onClose}))})}import{useCallback as va}from"preact/hooks";import{useSignal as ka}from"@preact/signals";import{classNames as Me}from"@blockcode/utils";import{Text as pe,Button as Ur,Modal as _a}from"@blockcode/core";w(".Zq10BW_prompt-modal{width:480px}.Zq10BW_prompt-header{background:var(--blocks-primary)}.Zq10BW_prompt-content{background:var(--ui-white)}.Zq10BW_device-list{background:var(--theme-light-transparent);width:100%;height:170px;padding:.5rem;overflow-y:auto}.Zq10BW_device-search{justify-content:center;align-items:center;width:100%;height:100%;display:flex}.Zq10BW_device-search-icon{width:120px;height:120px}@keyframes Zq10BW_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.Zq10BW_device-searching-icon{animation:1.5s linear infinite Zq10BW_spin}.Zq10BW_device-item{background:var(--ui-white);border-radius:calc(var(--space)/2);border:2px solid var(--ui-white);flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:50px;margin-bottom:.5rem;padding:10px;display:flex}.Zq10BW_device-item.Zq10BW_selected{border:2px solid var(--theme-primary)}.Zq10BW_device-name-bar{align-items:center;display:flex}.Zq10BW_device-image{width:40px;margin-right:.5rem}.Zq10BW_device-name-wrapper{flex-direction:column;justify-content:center;align-items:flex-start;display:flex}.Zq10BW_device-name-label{font-size:.625rem;font-weight:700}.Zq10BW_device-name-text{font-size:.875rem}.Zq10BW_button-row{text-align:right;text-align:center;padding:1.5rem 2.25rem;font-weight:bolder}.Zq10BW_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}.Zq10BW_ok-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-left:var(--space)}");var E={deviceSearch:"Zq10BW_device-search",deviceNameText:"Zq10BW_device-name-text",button:"Zq10BW_button",okButton:"Zq10BW_ok-button",buttonRow:"Zq10BW_button-row",deviceItem:"Zq10BW_device-item",promptContent:"Zq10BW_prompt-content",selected:"Zq10BW_selected",promptModal:"Zq10BW_prompt-modal",deviceList:"Zq10BW_device-list",deviceNameLabel:"Zq10BW_device-name-label",deviceNameWrapper:"Zq10BW_device-name-wrapper",deviceSearchIcon:"Zq10BW_device-search-icon",deviceSearchingIcon:"Zq10BW_device-searching-icon",deviceImage:"Zq10BW_device-image",deviceNameBar:"Zq10BW_device-name-bar",spin:"Zq10BW_spin",promptHeader:"Zq10BW_prompt-header"};var Hr="./assets/searching-tt57cegv.png";import{jsx as $,jsxs as Ee}from"preact/jsx-runtime";function Xr({title:e,icon:i,devices:r,onClose:t,onSearch:o,onConnect:a}){let n=ka(""),l=va(()=>{if(!n.value)return;a(n.value),n.value=""},[a]);return $(_a,{title:e??$(pe,{id:"gui.connection.device",defaultMessage:"Device"}),className:E.promptModal,headerClassName:E.header,onClose:t,children:Ee("div",{className:E.promptContent,children:[$("div",{className:E.deviceList,children:Array.isArray(r)&&r.length>0?r.map((p)=>Ee("div",{className:Me(E.deviceItem,{[E.selected]:p.id===n.value}),onClick:()=>n.value=p.id,children:[Ee("div",{className:E.deviceNameBar,children:[i&&$("img",{}),Ee("div",{className:E.deviceNameWrapper,children:[$("div",{className:E.deviceNameLabel,children:$(pe,{id:"gui.connection.deviceName",defaultMessage:"Device name"})}),$("div",{className:E.deviceNameText,children:p.name})]})]}),p.rssi&&$("div",{className:E.deviceSignalBar})]})):$("div",{className:E.deviceSearch,children:$("img",{className:Me(E.deviceSearchIcon,{[E.deviceSearchingIcon]:Array.isArray(r)}),src:Hr})})}),$("div",{className:E.buttonRow,children:r===!0?$(Ur,{className:Me(E.button,E.okButton),onClick:()=>o(),children:$(pe,{id:"gui.connection.search",defaultMessage:"Start Searching"})}):$(Ur,{disabled:!n.value,className:Me(E.button,E.okButton),onClick:l,children:!n.value?$(pe,{id:"gui.connection.searching",defaultMessage:"Searching"}):$(pe,{id:"gui.connection.connect",defaultMessage:"Start Connecting"})})})]})})}import{useEffect as Ha,useCallback as se}from"preact/hooks";import{batch as Ua,useSignal as Qe,useSignalEffect as Xa}from"@preact/signals";import{classNames as he,getProjectsThumbs as Pa,getProject as za,cloneProject as Oa,renameProject as Ta,delProject as Na,openProjectFromURL as Va}from"@blockcode/utils";import{maybeTranslate as Ne,setAlert as Ja,delAlert as Ga,openPromptModal as Ve,openUserStorage as Ya}from"@blockcode/core";var Xe="1.2.0";import{Text as Q,ContextMenu as Ka,LibraryItem as Je}from"@blockcode/core";import{useEffect as wa}from"preact/hooks";import{useSignal as qa}from"@preact/signals";import{classNames as Pr}from"@blockcode/utils";import{Button as Ca}from"@blockcode/core";w(".tyiNqW_cover-wrapper{width:100%;position:relative}.tyiNqW_cover{opacity:1;background-position:50%;background-repeat:no-repeat;background-size:cover;flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:100%;padding:0 2rem;transition:opacity 1s;display:flex;position:absolute;top:0;left:0}.tyiNqW_cover.tyiNqW_hidden{opacity:0;pointer-events:none}.tyiNqW_title{color:#000;padding-right:1.5rem;font-size:2rem;font-weight:600}.tyiNqW_button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-top:calc(2*var(--space));padding:.75rem 1rem;font-size:.85rem;font-weight:600}.tyiNqW_feature{max-height:90%;margin-right:5%}");var j={hidden:"tyiNqW_hidden",title:"tyiNqW_title",feature:"tyiNqW_feature",button:"tyiNqW_button",coverWrapper:"tyiNqW_cover-wrapper",cover:"tyiNqW_cover"};import{jsx as Ze,jsxs as zr}from"preact/jsx-runtime";function Or({pages:e,className:i}){let r=qa(0);return wa(()=>{setInterval(()=>r.value=(r.value+1)%e.length,7000)},[]),Ze("div",{className:Pr(j.coverWrapper,i),children:e.map((t,o)=>zr("div",{className:Pr(j.cover,{[j.hidden]:o!==r.value}),style:{backgroundImage:`url(${t.backgroundImage})`},children:[zr("div",{children:[Ze("div",{className:j.title,children:t.title}),Ze(Ca,{className:j.button,onClick:t.onClick,children:t.buttonText})]}),Ze("img",{className:j.feature,src:t.featureImage})]},o))})}w("._9IQa7q_home-wrapper{background:var(--ui-secondary);top:var(--menu-bar-height);width:100%;height:calc(100% - var(--menu-bar-height));z-index:calc(var(--z-index-alerts) - 10);user-select:none;position:absolute;overflow:hidden auto}._9IQa7q_getting-started{height:240px;margin-bottom:1.5rem}._9IQa7q_link{cursor:pointer;color:var(--theme-primary)}._9IQa7q_view-all{font-weight:400;font-size:var(--standard-font-size);margin-left:1.5rem}._9IQa7q_delete-menu-item:hover{background:var(--error-primary)}._9IQa7q_footer{color:var(--text-primary);font-size:var(--small-font-size);padding:3.5rem 0 var(--space);text-align:center}._9IQa7q_footer-item{padding:0 var(--space)}._9IQa7q_footer-item:not(:first-child){border-left:1px solid var(--ui-black-transparent)}._9IQa7q_library-grid{background:var(--ui-secondary);flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;height:auto;padding:.5rem;display:flex;overflow-y:auto}._9IQa7q_library-label{color:var(--text-primary);padding:1.5rem calc(.5rem + var(--space)).5rem;font-weight:800}._9IQa7q_about-version-content{width:300px}._9IQa7q_about-version-row{margin:var(--space)0;justify-content:space-between;display:flex}");var q={homeWrapper:"_9IQa7q_home-wrapper",libraryLabel:"_9IQa7q_library-label",viewAll:"_9IQa7q_view-all",footerItem:"_9IQa7q_footer-item",aboutVersionContent:"_9IQa7q_about-version-content",libraryGrid:"_9IQa7q_library-grid",aboutVersionRow:"_9IQa7q_about-version-row",gettingStarted:"_9IQa7q_getting-started",link:"_9IQa7q_link",deleteMenuItem:"_9IQa7q_delete-menu-item",footer:"_9IQa7q_footer"};import{Text as Vr}from"@blockcode/core";var Tr="./assets/arcade-rd4cktbf.png";var Nr="./assets/arcade-bg-fajmd34e.jpg";import{jsx as Jr}from"preact/jsx-runtime";function Pe(e){return{title:Jr(Vr,{id:"gui.home.slideshow.arcade.title",defaultMessage:"The Tank War is coming! Join us! NOW!"}),backgroundImage:Nr,featureImage:Tr,buttonText:Jr(Vr,{id:"gui.home.slideshow.arcade.button",defaultMessage:"Play now"}),onClick:()=>e("@blockcode/gui-arcade")}}import{Text as Kr}from"@blockcode/core";var Gr="./assets/desktop-s3hfwbpz.png";var Yr="./assets/desktop-bg-pqrd17t9.jpg";import{jsx as jr}from"preact/jsx-runtime";var ei={title:jr(Kr,{id:"gui.home.slideshow.desktop.title",defaultMessage:"The desktop application is here!"}),backgroundImage:Yr,featureImage:Gr,buttonText:jr(Kr,{id:"gui.home.slideshow.desktop.button",defaultMessage:"Download"}),onClick:()=>window.open("//app.blockcode.fun/#/?id=download")};function ze(e,i){return[ei,Pe(e)]}async function Oe(e){let i=await fetch("https://hub.blockcode.fun/home.json").then((r)=>r.json());return Promise.all(i.filter((r)=>r.editor?e.find((t)=>t.id===r.editor):!0).map(async(r)=>{let t=e.find((a)=>a.id===r.editor),o=await fetch(`https://hub.blockcode.fun/${r.import}`).then((a)=>a.json());return{name:t?.name,examples:o.filter((a)=>e.find((n)=>n.id===a.editor)).map((a)=>({...a,file:`https://hub.blockcode.fun/${a.file}`,thumb:`https://hub.blockcode.fun/${a.thumb}`}))}}))}function z(e){if(typeof e!=="string")throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function ri(e,i){var r="",t=0,o=-1,a=0,n;for(var l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else if(n===47)break;else n=47;if(n===47){if(o===l-1||a===1);else if(o!==l-1&&a===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var p=r.lastIndexOf("/");if(p!==r.length-1){if(p===-1)r="",t=0;else r=r.slice(0,p),t=r.length-1-r.lastIndexOf("/");o=l,a=0;continue}}else if(r.length===2||r.length===1){r="",t=0,o=l,a=0;continue}}if(i){if(r.length>0)r+="/..";else r="..";t=2}}else{if(r.length>0)r+="/"+e.slice(o+1,l);else r=e.slice(o+1,l);t=l-o-1}o=l,a=0}else if(n===46&&a!==-1)++a;else a=-1}return r}function Qa(e,i){var r=i.dir||i.root,t=i.base||(i.name||"")+(i.ext||"");if(!r)return t;if(r===i.root)return r+t;return r+e+t}function ge(){var e="",i=!1,r;for(var t=arguments.length-1;t>=-1&&!i;t--){var o;if(t>=0)o=arguments[t];else{if(r===void 0)r=process.cwd();o=r}if(z(o),o.length===0)continue;e=o+"/"+e,i=o.charCodeAt(0)===47}if(e=ri(e,!i),i)if(e.length>0)return"/"+e;else return"/";else if(e.length>0)return e;else return"."}function ii(e){if(z(e),e.length===0)return".";var i=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;if(e=ri(e,!i),e.length===0&&!i)e=".";if(e.length>0&&r)e+="/";if(i)return"/"+e;return e}function $a(e){return z(e),e.length>0&&e.charCodeAt(0)===47}function Fa(){if(arguments.length===0)return".";var e;for(var i=0;i<arguments.length;++i){var r=arguments[i];if(z(r),r.length>0)if(e===void 0)e=r;else e+="/"+r}if(e===void 0)return".";return ii(e)}function xa(e,i){if(z(e),z(i),e===i)return"";if(e=ge(e),i=ge(i),e===i)return"";var r=1;for(;r<e.length;++r)if(e.charCodeAt(r)!==47)break;var t=e.length,o=t-r,a=1;for(;a<i.length;++a)if(i.charCodeAt(a)!==47)break;var n=i.length,l=n-a,p=o<l?o:l,c=-1,u=0;for(;u<=p;++u){if(u===p){if(l>p){if(i.charCodeAt(a+u)===47)return i.slice(a+u+1);else if(u===0)return i.slice(a+u)}else if(o>p){if(e.charCodeAt(r+u)===47)c=u;else if(u===0)c=0}break}var B=e.charCodeAt(r+u),f=i.charCodeAt(a+u);if(B!==f)break;else if(B===47)c=u}var b="";for(u=r+c+1;u<=t;++u)if(u===t||e.charCodeAt(u)===47)if(b.length===0)b+="..";else b+="/..";if(b.length>0)return b+i.slice(a+c);else{if(a+=c,i.charCodeAt(a)===47)++a;return i.slice(a)}}function Wa(e){return e}function Te(e){if(z(e),e.length===0)return".";var i=e.charCodeAt(0),r=i===47,t=-1,o=!0;for(var a=e.length-1;a>=1;--a)if(i=e.charCodeAt(a),i===47){if(!o){t=a;break}}else o=!1;if(t===-1)return r?"/":".";if(r&&t===1)return"//";return e.slice(0,t)}function La(e,i){if(i!==void 0&&typeof i!=="string")throw TypeError('"ext" argument must be a string');z(e);var r=0,t=-1,o=!0,a;if(i!==void 0&&i.length>0&&i.length<=e.length){if(i.length===e.length&&i===e)return"";var n=i.length-1,l=-1;for(a=e.length-1;a>=0;--a){var p=e.charCodeAt(a);if(p===47){if(!o){r=a+1;break}}else{if(l===-1)o=!1,l=a+1;if(n>=0)if(p===i.charCodeAt(n)){if(--n===-1)t=a}else n=-1,t=l}}if(r===t)t=l;else if(t===-1)t=e.length;return e.slice(r,t)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!o){r=a+1;break}}else if(t===-1)o=!1,t=a+1;if(t===-1)return"";return e.slice(r,t)}}function Aa(e){z(e);var i=-1,r=0,t=-1,o=!0,a=0;for(var n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(l===47){if(!o){r=n+1;break}continue}if(t===-1)o=!1,t=n+1;if(l===46){if(i===-1)i=n;else if(a!==1)a=1}else if(i!==-1)a=-1}if(i===-1||t===-1||a===0||a===1&&i===t-1&&i===r+1)return"";return e.slice(i,t)}function Da(e){if(e===null||typeof e!=="object")throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Qa("/",e)}function Ia(e){z(e);var i={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return i;var r=e.charCodeAt(0),t=r===47,o;if(t)i.root="/",o=1;else o=0;var a=-1,n=0,l=-1,p=!0,c=e.length-1,u=0;for(;c>=o;--c){if(r=e.charCodeAt(c),r===47){if(!p){n=c+1;break}continue}if(l===-1)p=!1,l=c+1;if(r===46){if(a===-1)a=c;else if(u!==1)u=1}else if(a!==-1)u=-1}if(a===-1||l===-1||u===0||u===1&&a===l-1&&a===n+1){if(l!==-1)if(n===0&&t)i.base=i.name=e.slice(1,l);else i.base=i.name=e.slice(n,l)}else{if(n===0&&t)i.name=e.slice(1,a),i.base=e.slice(1,l);else i.name=e.slice(n,a),i.base=e.slice(n,l);i.ext=e.slice(a,l)}if(n>0)i.dir=e.slice(0,n-1);else if(t)i.dir="/";return i}var Sa="/",Ra=":",In=((e)=>(e.posix=e,e))({resolve:ge,normalize:ii,isAbsolute:$a,join:Fa,relative:xa,_makeLong:Wa,dirname:Te,basename:La,extname:Aa,format:Da,parse:Ia,sep:Sa,delimiter:Ra,win32:null,posix:null});function de(){let e=window.electron?.getLocalEditors()??[];return Promise.all([].concat(Object.values(e).map(async(i)=>{let{default:r}=await import(i.info);return r.id=i.id,r.image=ge(Te(i.info),r.image),r}),["@yeqin/gui-tankwar","@blockcode/gui-arcade2","@blockcode/gui-arcade","@blockcode/gui-microbit","@blockcode/gui-esp32","@blockcode/gui-arduino","@blockcode/gui-writer","@blockcode/gui-iotbit","@blockcode/gui-matrix"].map(async(i)=>{let{default:r}=await import(`${i}/info`);return r.id=i,r})))}import{jsx as h,jsxs as W,Fragment as Ge}from"preact/jsx-runtime";function ai({onOpenEditor:e,onOpenProject:i}){let r=Math.floor((document.body.clientWidth-20)/176),t=Math.floor((document.body.clientWidth-20)/236)*2,o=Qe(null),a=Qe(0),n=Qe(null),l=Qe(null),p=se(async()=>{let m=await Pa();Ua(()=>{a.value=m.length,o.value=m.filter((s,v)=>v<r)})},[]);Ha(p,[]);let c=se((m,s)=>{Ve({title:h(Q,{id:"gui.library.projects.rename",defaultMessage:"rename"}),inputItems:[{key:"name",label:h(Q,{id:"gui.menubar.titlePlaceholder",defaultMessage:"Project title here"}),defaultValue:Ne(s??h(Q,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}],onSubmit:async(v)=>{if(v?.name)await Ta(m,v.name),p()}})},[]),u=se(async(m)=>{await Oa(m),p()},[]),B=se((m,s)=>{Ve({title:h(Q,{id:"gui.library.projects.delete",defaultMessage:"delete"}),label:h(Q,{id:"gui.library.projects.deleteConfirm",defaultMessage:'Delect "{name}" project?',name:Ne(s||h(Q,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}),onSubmit:async()=>{await Na(m),p()}})},[]),f=se((m)=>async()=>{let s=await za(m);i(s)},[i]),b=()=>{return o.value?.map((m)=>h(Ka,{menuItems:[[{label:h(Q,{id:"gui.library.projects.rename",defaultMessage:"rename"}),onClick:()=>c(m.key,m.name)},{label:h(Q,{id:"gui.library.projects.duplicate",defaultMessage:"duplicate"}),onClick:()=>u(m.key)}],[{label:h(Q,{id:"gui.library.projects.delete",defaultMessage:"delete"}),className:q.deleteMenuItem,onClick:()=>B(m.key,m.name)}]],children:h(Je,{id:m.key,name:m.name||h(Q,{id:"gui.project.shortname",defaultMessage:"Untitled"}),image:m.thumb,onSelect:f(m.key)})},m.key))};return Xa(async()=>{let m=await de();m=m.map((s)=>Object.assign(s,{beta:s.beta||!1,disabled:s.disabled||!1,onSelect:()=>e(s.id)})),m=m.filter((s)=>{if(s.hidden)return!1;return!0}),n.value=m.sort((s,v)=>s.sortIndex-v.sortIndex),l.value=await Oe(m)}),W("div",{className:q.homeWrapper,children:[h(Or,{className:q.gettingStarted,pages:ze(e,i)}),o.value?.length>0&&W(Ge,{children:[W("div",{className:q.libraryLabel,children:[h("span",{children:h(Q,{id:"gui.home.my",defaultMessage:"My projects"})}),a.value>r&&h("span",{className:he(q.viewAll,q.link),onClick:Ya,children:h(Q,{id:"gui.home.allCounts",defaultMessage:"View all ({counts})",counts:a.value})})]}),h("div",{className:q.libraryGrid,children:h(b,{})})]}),n.value?.length>0&&W(Ge,{children:[h("div",{className:q.libraryLabel,children:h(Q,{id:"gui.home.new",defaultMessage:"Create new project"})}),h("div",{className:q.libraryGrid,children:n.value.map((m,s)=>h(Je,{featured:!0,id:s,disabled:m.disabled,beta:m.beta||m.preview,image:m.image,name:m.name,description:m.description,collaborator:m.collaborator,blocksRequired:m.blocksRequired,micropythonRequired:m.micropythonRequired,clangRequired:m.clangRequired,onSelect:m.onSelect},s))})]}),l.value?.map((m)=>m.examples.length>0&&W(Ge,{children:[W("div",{className:q.libraryLabel,children:[h("span",{children:h(Q,{id:"gui.home.examples",defaultMessage:"Wonderful {label} examples",label:Ne(m.name)})}),m.examples.length>t&&h("span",{className:he(q.viewAll,q.link),children:h(Q,{id:"gui.home.all",defaultMessage:"View all"})})]}),h("div",{className:q.libraryGrid,children:m.examples.map((s,v)=>h(Je,{large:!0,id:v,name:s.name,author:s.author,copyright:s.copyright,image:s.thumb,onSelect:async()=>{Ja("importing",{id:s.name});let A=await Va(s.file);Ga(s.name),i(A)}}))})]})),W("div",{className:q.footer,children:[h("span",{className:he(q.footerItem,q.link),onClick:()=>window.open("https://lab.blockcode.fun/","_blank"),children:"BlockCode Lab"}),h("span",{className:he(q.footerItem,q.link),onClick:()=>window.open("https://github.com/BlockCodeLab/playgrounds-app","_blank"),children:"GitHub"}),W("span",{className:he(q.footerItem,q.link),onClick:()=>{Ve({title:h(Q,{id:"gui.about.title",defaultMessage:"About..."}),body:W("div",{className:q.aboutVersionContent,children:[W("div",{className:q.aboutVersionRow,children:[h("div",{children:h("b",{children:h(Q,{id:"gui.about.main",defaultMessage:"Main program"})})}),W("div",{children:["v",Xe]})]}),h("div",{className:q.aboutVersionRow}),n.value.filter((m)=>!m.disabled).map((m)=>W("div",{className:q.aboutVersionRow,children:[h("div",{children:h("b",{children:m.name})}),W("div",{children:["v",m.version]})]}))]})})},children:["v",Xe]})]})]})}import{useEffect as qt}from"preact/hooks";import{classNames as be,isMac as Ct}from"@blockcode/utils";import{useLocalesContext as Bt,useAppContext as Mt,setLanguage as Et,translate as hi,setMacosMenuBarStyled as Zt}from"@blockcode/core";import{Menu as fi,MenuItem as Qt}from"@blockcode/core";import{cloneElement as tt}from"preact";import{useMemo as ot}from"preact/hooks";import{flatChildren as nt}from"@blockcode/utils";var ti=Object.create(null),Ye=document.createElement("div"),oi=document.createElement("style");document.body.insertBefore(oi,document.body.firstChild);var ja=(e)=>{return Ye.style="",Object.entries(e).forEach(([i,r])=>Ye.style[i]=r),Ye.style.cssText},et=()=>{oi.textContent=Object.entries(ti).map(([e,i])=>`${e}{${ja(i)}}`).join(`
`)};function V(e){Object.assign(ti,e),et()}import{Menu as lt}from"@blockcode/core";import{useCallback as Ke}from"preact/hooks";import{classNames as rt}from"@blockcode/utils";import{jsx as ni,jsxs as at,Fragment as it}from"preact/jsx-runtime";function fe({id:e,className:i,checked:r,children:t,name:o}){let a=Ke((p)=>{let c=()=>{p.target.checked=!1,document.removeEventListener("click",c)};document.addEventListener("click",c)},[]),n=Ke((p)=>{let c=p.getBoundingClientRect().left;V({[`#${e}-menu-${o}`]:{left:`${c}px`}})},[e,o]),l=Ke((p)=>{if(p.target.classList.contains(d.menuLabel))n(p.target);else n(p.target.parentElement)},[]);return at(it,{children:[ni("input",{checked:r,className:d.menuLabel,id:`${e}-label-${o}`,name:`${e}-menu`,type:"radio",value:o,onChange:a}),ni("label",{className:rt(d.menuLabel,i),for:`${e}-label-${o}`,onClick:l,children:t})]})}import{jsxs as mt,Fragment as ct}from"preact/jsx-runtime";function li({id:e,children:i}){let r=ot(()=>nt(i).map((t)=>t&&tt(t,{id:e})),[e,i]);return mt(ct,{children:[r.filter((t)=>t.type===fe),r.filter((t)=>t.type===lt).map((t)=>{let o=`${e}-label-${t.props.name}`,a=`${e}-menu-${t.props.name}`;return V({[`#${o}:checked~#${a}`]:{display:"block"}}),t})]})}import{classNames as pt}from"@blockcode/utils";import{Text as gt}from"@blockcode/core";var $e="./assets/icon-tutorials-bh6n0ck2.svg";import{jsx as je,jsxs as ci,Fragment as dt}from"preact/jsx-runtime";function mi({onClick:e}){return ci(dt,{children:[je("div",{className:d.divider}),ci("div",{className:pt(d.menuBarItem,d.menuLabel,d.hoverable),onClick:e,children:[je("img",{className:d.tutorialsIcon,src:$e}),je(gt,{id:"gui.menubar.tutorials",defaultMessage:"Tutorials"})]})]})}import{useProjectContext as st,BufferedInput as ht,renameProject as ft}from"@blockcode/core";import{jsx as er,jsxs as vt,Fragment as bt}from"preact/jsx-runtime";function ui({placeholder:e,defaultValue:i}){let{name:r}=st();return vt(bt,{children:[er("div",{className:d.divider}),er("div",{className:d.menuBarItem,children:er(ht,{className:d.titleField,placeholder:e,value:r.value||i,onSubmit:ft})})]})}var pi="./assets/icon-check-f984n1c2.svg";var gi="./assets/icon-language-3wan1389.svg";var di="./assets/icon-dropdown-caret-y4j91xc6.svg";var si="./assets/icon-home-jt8mdkv3.svg";import{jsx as D,jsxs as ee,Fragment as $t}from"preact/jsx-runtime";function bi({className:e,showHomeButton:i,onRequestHome:r,onOpenTutorialLibrary:t}){let{language:o,languageNames:a}=Bt(),{menuItems:n,tutorials:l,macosMenuBarStyled:p}=Mt();return qt(()=>{window.electron?.onChangeFullscreen((c)=>Zt(Ct&&!c))},[]),ee("div",{className:be(d.menuBar,e),children:[ee("div",{className:be(d.mainMenu,{[d.electron]:p.value}),children:[ee(li,{id:d.mainMenu,children:[ee(fe,{className:be(d.menuBarItem,d.languageLabel),name:"language-selector",children:[D("img",{className:d.languageIcon,src:gi}),D("img",{src:di})]}),D(fi,{className:d.menu,name:"language-selector",children:Array.from(a.entries()).map(([c,u])=>ee(Qt,{className:d.menuItem,onClick:()=>Et(c),children:[D("img",{className:be(d.checkIcon,{[d.checked]:o.value===c}),src:pi}),u.languageName]},c))}),n.value&&n.value.map(({icon:c,label:u,Menu:B},f)=>ee($t,{children:[ee(fe,{className:d.menuBarItem,name:f,children:[typeof c==="string"?D("img",{src:c}):c,u]},f),D(fi,{className:d.menu,name:f,children:D(B,{itemClassName:d.menuItem})},f)]}))]}),l.value&&D(mi,{onClick:t}),i&&D(ui,{placeholder:hi("gui.menubar.titlePlaceholder","Project title here"),defaultValue:hi("gui.project.name","BlockCode Project")})]}),D("div",{className:d.rightMenu,children:i&&D("div",{className:be(d.menuBarItem,d.hoverable),onClick:r,children:D("img",{className:d.homeIcon,src:si})})})]})}import{classNames as Ft}from"@blockcode/utils";w(".mS9Hoa_pane-wrapper{flex-direction:column;display:flex;position:relative}.mS9Hoa_pane{display:none}.mS9Hoa_pane-header{background:var(--ui-white);padding:calc(var(--space)/2);text-align:center;color:var(--text-primary);cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--space)var(--space)0 0;flex:1;font-size:.85rem}.mS9Hoa_pane-left .mS9Hoa_pane-header{border-top-left-radius:0}.mS9Hoa_pane-right .mS9Hoa_pane-header{border-top-right-radius:0}.mS9Hoa_pane-content{border-left:1px solid var(--ui-black-transparent);border-right:1px solid var(--ui-black-transparent);min-height:5.5rem;display:none;position:relative}.mS9Hoa_pane-left .mS9Hoa_pane-content{border-left:0}.mS9Hoa_pane-right .mS9Hoa_pane-content{border-right:0}.mS9Hoa_pane:checked~.mS9Hoa_pane-content{display:flex}");var re={paneRight:"mS9Hoa_pane-right",pane:"mS9Hoa_pane",paneContent:"mS9Hoa_pane-content",paneLeft:"mS9Hoa_pane-left",paneHeader:"mS9Hoa_pane-header",paneWrapper:"mS9Hoa_pane-wrapper"};import{jsx as rr,jsxs as xt}from"preact/jsx-runtime";function vi({className:e,id:i,title:r,left:t,right:o,children:a}){return xt("div",{className:Ft(re.paneWrapper,e,{[re.paneLeft]:t,[re.paneRight]:o}),children:[rr("input",{id:`${i}-pane`,type:"checkbox",className:re.pane}),rr("label",{className:re.paneHeader,for:`${i}-pane`,children:r}),rr("div",{className:re.paneContent,children:a})]})}import{classNames as ki}from"@blockcode/utils";import{maybeTranslate as Wt,Text as ir,Button as ar,Modal as Lt}from"@blockcode/core";w(".ulcaFG_prompt-modal{width:360px}.ulcaFG_prompt-modal.ulcaFG_wide{width:600px}.ulcaFG_prompt-modal.ulcaFG_auto{width:auto;max-width:60vw}.ulcaFG_prompt-content{background:var(--ui-white);padding:1.5rem 2.25rem}.ulcaFG_label{margin:0 0 1.5rem;font-weight:500}.ulcaFG_label.ulcaFG_input-label{margin-bottom:.75rem}.ulcaFG_content{font-size:var(--standard-font-size);color:var(--text-primary);max-height:400px;margin-bottom:1.5rem;overflow:auto}.ulcaFG_content a{color:var(--theme-primary);border-bottom:1px solid;text-decoration-line:none}.ulcaFG_text-input{border:1px solid var(--ui-black-transparent);width:100%;height:3rem;color:var(--text-primary);border-radius:5px;margin-bottom:1.5rem;padding:0 1rem;font-size:.875rem}.ulcaFG_button-row{text-align:right;font-weight:bolder}.ulcaFG_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}.ulcaFG_ok-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-left:var(--space)}");var C={promptModal:"ulcaFG_prompt-modal",buttonRow:"ulcaFG_button-row",auto:"ulcaFG_auto",promptContent:"ulcaFG_prompt-content",content:"ulcaFG_content",textInput:"ulcaFG_text-input",inputLabel:"ulcaFG_input-label",label:"ulcaFG_label",wide:"ulcaFG_wide",button:"ulcaFG_button",okButton:"ulcaFG_ok-button"};import{useCallback as At}from"preact/hooks";import{jsx as S,jsxs as _i,Fragment as Dt}from"preact/jsx-runtime";function yi({title:e,label:i,content:r,redStyle:t,children:o,onClose:a,onSubmit:n}){let l=At(()=>{n(),a()},[a,n]);return S(Lt,{title:e,redStyle:t,className:ki(C.promptModal,{[C.wide]:r,[C.auto]:o}),onClose:a,children:_i("div",{className:C.promptContent,children:[i&&S("div",{className:C.label,children:i}),r?S("div",{className:C.content,dangerouslySetInnerHTML:{__html:Wt(r)}}):S("div",{className:C.content,children:o}),S("div",{className:C.buttonRow,children:n?_i(Dt,{children:[S(ar,{className:C.button,onClick:a,children:S(ir,{id:"gui.prompt.cancel",defaultMessage:"Cancel"})}),S(ar,{className:ki(C.button,C.okButton),onClick:l,children:S(ir,{id:"gui.prompt.ok",defaultMessage:"OK"})})]}):S(ar,{className:C.button,onClick:a,children:S(ir,{id:"gui.prompt.close",defaultMessage:"Close"})})})]})})}import{useCallback as tr,useEffect as It}from"preact/hooks";import{useSignal as St}from"@preact/signals";import{classNames as wi}from"@blockcode/utils";import{maybeTranslate as qi,Text as Ci,BufferedInput as Rt,Button as Bi,Modal as Ht}from"@blockcode/core";import{jsx as J,jsxs as or,Fragment as Ut}from"preact/jsx-runtime";function Mi({title:e,inputItems:i,content:r,onClose:t,onSubmit:o}){let a=St(Object.fromEntries(i.map(({name:c,defaultValue:u})=>[c,u]))),n=tr((c)=>{if(c.stopPropagation(),c.key==="Escape")t()},[t]),l=tr(()=>{o(a.value),t()},[t,o]),p=tr((c)=>(u)=>{a.value={...a.value,[c]:u}},[]);return It(()=>{return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[]),J(Ht,{title:e,className:C.promptModal,onClose:t,children:or("div",{className:C.promptContent,children:[i.map(({name:c,label:u,placeholder:B,defaultValue:f},b)=>or(Ut,{children:[u&&J("div",{className:wi(C.label,C.inputLabel),children:u}),J(Rt,{autoFocus:b===0,className:C.textInput,placeholder:qi(B),defaultValue:f,onSubmit:p(c)},b)]})),r&&J("div",{className:C.content,dangerouslySetInnerHTML:{__html:qi(r)}}),or("div",{className:C.buttonRow,children:[J(Bi,{className:C.button,onClick:t,children:J(Ci,{id:"gui.prompt.cancel",defaultMessage:"Cancel"})}),J(Bi,{className:wi(C.button,C.okButton),onClick:l,children:J(Ci,{id:"gui.prompt.ok",defaultMessage:"OK"})})]})]})})}import{classNames as Xt}from"@blockcode/utils";import{Text as nr,Spinner as Pt}from"@blockcode/core";w(".LkfKFW_splash{background:var(--theme-primary);z-index:var(--z-index-modal);flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0}.LkfKFW_spinner{margin-bottom:calc(4*var(--space))}.LkfKFW_error{background:var(--error-primary)}.LkfKFW_title{color:var(--ui-white);margin:var(--space);font-size:2rem}.LkfKFW_label{color:var(--ui-white);margin:var(--space)}");var ae={title:"LkfKFW_title",splash:"LkfKFW_splash",label:"LkfKFW_label",spinner:"LkfKFW_spinner",error:"LkfKFW_error"};import{jsx as te,jsxs as zt}from"preact/jsx-runtime";function Ei({error:e}){return zt("div",{className:Xt(ae.splash,{[ae.error]:e}),children:[!e&&te(Pt,{large:!0,level:"info",className:ae.spinner}),te("div",{className:ae.title,children:e?te(nr,{id:"gui.splash.errorTitle",defaultMessage:"Error Occurred"}):te(nr,{id:"gui.splash.loading",defaultMessage:"Loading project..."})}),te("div",{className:ae.label,children:e&&te(nr,{id:"gui.splash.errorLabel",defaultMessage:"Please refresh the page and reopen it."})})]})}import{cloneElement as Gt}from"preact";import{useMemo as Yt}from"preact/hooks";import{classNames as Kt,flatChildren as jt}from"@blockcode/utils";import{classNames as Ot}from"@blockcode/utils";w(".M5TDuW_tabs-wrapper{white-space:nowrap;position:relative}.M5TDuW_tab-label{--line-height:calc(var(--tool-bar-height)*.8 - 2px);--margin-top:calc(var(--tool-bar-height)*.2 + 1px);font-weight:500;font-size:var(--standard-font-size);line-height:var(--line-height);border:1px solid var(--ui-black-transparent);background:var(--ui-tertiary);color:var(--text-transparent);margin-top:var(--margin-top);white-space:nowrap;border-radius:1rem 1rem 0 0;justify-content:center;padding:0 1.25rem;display:inline-flex;position:relative}.M5TDuW_tab-label.M5TDuW_disabled{filter:opacity(.5);cursor:default;pointer-events:none}.M5TDuW_tab-label:nth-of-type(n+2){margin-left:calc(-1*var(--space))}.M5TDuW_tab-label:last-of-type{margin-right:var(--space)}.M5TDuW_tab-label:not(.M5TDuW_disabled):hover{cursor:pointer;background:var(--ui-primary)}.M5TDuW_tab-label img{filter:grayscale();width:1.375rem}.M5TDuW_tab{display:none}.M5TDuW_tab:checked+.M5TDuW_tab-label{--scale:var(--space)/2;line-height:calc(var(--line-height) + var(--scale));margin-top:calc(var(--margin-top) - var(--scale));color:var(--theme-primary);background:var(--ui-white)}.M5TDuW_tab:checked+.M5TDuW_tab-label img{filter:none}.M5TDuW_tab-panel{top:var(--tool-bar-height);width:100%;height:calc(100% - var(--tool-bar-height));border:1px solid var(--ui-black-transparent);border-radius:0 var(--space)var(--space)var(--space);flex-direction:column;display:flex;position:absolute;bottom:0;transform:translateY(200%)}");var R={tab:"M5TDuW_tab",tabPanel:"M5TDuW_tab-panel",disabled:"M5TDuW_disabled",tabLabel:"M5TDuW_tab-label",tabsWrapper:"M5TDuW_tabs-wrapper"};import{jsx as Zi,jsxs as Nt,Fragment as Tt}from"preact/jsx-runtime";function Fe({id:e,className:i,disabled:r,checked:t,children:o,name:a,onSelect:n}){return Nt(Tt,{children:[Zi("input",{disabled:r,checked:t,className:R.tab,id:`${e}-tab-${a}`,name:`${e}-tab`,type:"radio",value:a}),Zi("label",{className:Ot(R.tabLabel,i,{[R.disabled]:r}),for:`${e}-tab-${a}`,onClick:n,children:o})]})}import{classNames as Vt}from"@blockcode/utils";import{jsx as Jt}from"preact/jsx-runtime";function xe({id:e,className:i,name:r,children:t}){return Jt("div",{className:Vt(R.tabPanel,i),id:`${e}-panel-${r}`,children:t})}import{jsxs as e1}from"preact/jsx-runtime";function Qi({id:e,className:i,children:r}){let t=Yt(()=>jt(r).filter((o)=>o).map((o)=>Gt(o,{id:e})),[e,r]);return V({[`.${R.tab}:checked+.${R.tabLabel}`]:{zIndex:`${t.length+1}`}}),e1("div",{className:Kt(R.tabsWrapper,i),children:[t.filter((o)=>o.type===Fe).map((o,a,n)=>{return V({[`.${R.tabLabel}:nth-of-type(${a+1})`]:{zIndex:`${n.length-a}`}}),o}),t.filter((o)=>o.type===xe).map((o)=>{let a=`${e}-tab-${o.props.name}`,n=`${e}-panel-${o.props.name}`;return V({[`#${a}:checked~#${n}`]:{transform:"none"}}),o})]})}import{useRef as o1,useEffect as Wi,useCallback as cr}from"preact/hooks";import{batch as n1,useComputed as l1,useSignal as mr}from"@preact/signals";import{classNames as c1}from"@blockcode/utils";import{useAppContext as m1,Text as oe,Button as u1}from"@blockcode/core";w("._4EOxpW_tutorial-box-wrapper{pointer-events:auto;z-index:var(--z-index-card);min-width:468px;position:absolute;top:55%;left:50%;transform:translate(-50%)}._4EOxpW_tutorial-card{border:1px solid var(--ui-tertiary);border-radius:calc(var(--space)*1.8);cursor:move;box-shadow:0px 5px 25px 5px var(--ui-black-transparent);z-index:20;flex-direction:column;align-items:center;display:flex;overflow:hidden}._4EOxpW_card-header{background:var(--blocks-primary);width:100%;font-size:var(--small-font-size);flex-direction:row;justify-content:space-between;align-items:center;font-weight:700;display:flex}._4EOxpW_header-button-group{flex-direction:row;display:flex}._4EOxpW_header-button{cursor:pointer;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding:.75rem;display:flex}._4EOxpW_header-button:hover{background:var(--ui-black-transparent)}._4EOxpW_button-icon{border:0;height:1.25rem}._4EOxpW_step-list{flex-direction:row;justify-content:center;align-items:center;display:flex}._4EOxpW_step-pip{cursor:pointer;background:var(--ui-white-transparent);border-radius:100%;width:.5rem;height:.5rem;margin:0 .25rem}._4EOxpW_step-pip._4EOxpW_actived{background:var(--ui-white);-webkit-box-shadow:0px 0px 0px 2px var(--ui-black-transparent);box-shadow:0px 0px 0px 2px var(--ui-black-transparent)}._4EOxpW_card-body{background:var(--ui-white);border-top:1px solid var(--blocks-tertiary);text-align:center;width:100%;min-height:256px;color:var(--text-primary);flex-direction:column;justify-content:center;align-items:center;display:flex;position:relative}._4EOxpW_title{text-align:center;margin:.9rem;font-size:.9rem;font-weight:700}._4EOxpW_image{object-fit:contain;background:var(--ui-secondary);border-radius:var(--space);max-width:450px;max-height:200px;margin:0 var(--space)var(--space);overflow:hidden}._4EOxpW_text{max-width:450px;height:200px;margin:0 var(--space)2.7rem var(--space);flex-direction:column;justify-content:center;font-size:1rem;display:flex}._4EOxpW_image+._4EOxpW_text{height:auto}._4EOxpW_more{padding:0 .9rem var(--space);flex-direction:row;justify-content:space-around;display:flex}._4EOxpW_more-item{margin:0 var(--space)var(--space);cursor:pointer;border-radius:var(--space);border:1px solid #00000026;flex-direction:column;display:flex;overflow:hidden}._4EOxpW_more-item-image{object-fit:cover;width:200px;height:100px}._4EOxpW_more-item-name{color:var(--theme-primary);margin:calc(var(--space)*1.2)0px;text-align:center;text-align:center;max-width:200px;font-size:.85rem;font-weight:700}._4EOxpW_see-more-button{background:var(--theme-primary);color:var(--ui-white);border:0;margin-bottom:2.7rem}._4EOxpW_left-page,._4EOxpW_right-page{background:var(--ui-white);border:1px solid var(--ui-black-transparent);height:90%;width:calc(var(--space)*1.8);opacity:.9;z-index:10;position:absolute;top:5%;overflow:hidden}._4EOxpW_left-page:after,._4EOxpW_right-page:after{content:\"\";background:var(--blocks-primary);width:100%;height:2.5rem;position:absolute;top:0;left:0}._4EOxpW_left-button,._4EOxpW_right-button{user-select:none;cursor:pointer;background:var(--blocks-primary);box-shadow:0 0 0 4px var(--blocks-transparent);z-index:30;border-radius:100%;justify-content:center;align-items:center;width:44px;height:44px;margin-top:-15px;transition:all .25s;display:flex;position:absolute;top:50%}._4EOxpW_left-button:hover,._4EOxpW_right-button:hover{box-shadow:0 0 0 6px var(--blocks-transparent);transform:scale(1.125)}._4EOxpW_left-button img,._4EOxpW_right-button img{width:1.75rem}._4EOxpW_left-page{border-top-left-radius:calc(var(--space)*1.8);border-bottom-left-radius:calc(var(--space)*1.8);border-right:0;left:0;transform:translate(-100%)}._4EOxpW_left-button{left:-27px}._4EOxpW_right-page{border-top-right-radius:calc(var(--space)*1.8);border-bottom-right-radius:calc(var(--space)*1.8);border-left:0;right:0;transform:translate(100%)}._4EOxpW_right-button{right:-27px}._4EOxpW_right-button img{transform:rotateY(180deg)}");var k={text:"_4EOxpW_text",title:"_4EOxpW_title",seeMoreButton:"_4EOxpW_see-more-button",rightButton:"_4EOxpW_right-button",headerButton:"_4EOxpW_header-button",stepPip:"_4EOxpW_step-pip",moreItem:"_4EOxpW_more-item",stepList:"_4EOxpW_step-list",cardBody:"_4EOxpW_card-body",more:"_4EOxpW_more",tutorialBoxWrapper:"_4EOxpW_tutorial-box-wrapper",moreItemName:"_4EOxpW_more-item-name",image:"_4EOxpW_image",actived:"_4EOxpW_actived",rightPage:"_4EOxpW_right-page",cardHeader:"_4EOxpW_card-header",headerButtonGroup:"_4EOxpW_header-button-group",buttonIcon:"_4EOxpW_button-icon",leftPage:"_4EOxpW_left-page",tutorialCard:"_4EOxpW_tutorial-card",leftButton:"_4EOxpW_left-button",moreItemImage:"_4EOxpW_more-item-image"};var $i="./assets/icon-shrink-8vdqegra.svg";var Fi="./assets/icon-expand-67bgdn61.svg";var xi="./assets/icon-close-dy7x7fdb.svg";var lr="./assets/icon-arrow-ddhj68kd.svg";import{jsx as y,jsxs as L,Fragment as ve}from"preact/jsx-runtime";function Li({tutorialId:e,onOpenTutorial:i,onBack:r,onClose:t}){let o=o1(),{tutorials:a}=m1(),n=mr(null),l=mr(-1),p=mr(!0),c=l1(()=>n.value?.[l.value]),u=cr(()=>{l.value=(l.value+1)%n.value.length},[]),B=cr(()=>{l.value=(l.value-1)%n.value.length},[]);return Wi(()=>{let f=a.value.lessons[e];if(!f){t();return}n1(()=>{n.value=[].concat(f.pages,f.next?{next:f.next.filter((b)=>a.value.lessons[b]).map((b)=>({id:b,title:a.value.lessons[b].title,image:a.value.lessons[b].image}))}:[]),l.value=0})},[e]),Wi(()=>{if(o.current){let f=o.current.parentElement,b,m,s=(A)=>{let we=b-A.clientX,qe=m-A.clientY;b=A.clientX,m=A.clientY,f.style.top=`${f.offsetTop-qe}px`,f.style.left=`${f.offsetLeft-we}px`},v=()=>{document.removeEventListener("pointerup",v),document.removeEventListener("pointermove",s)};o.current.addEventListener("pointerdown",(A)=>{b=A.clientX,m=A.clientY,document.addEventListener("pointerup",v),document.addEventListener("pointermove",s)})}},[o]),L("div",{className:k.tutorialBoxWrapper,children:[L("div",{ref:o,className:k.tutorialCard,children:[L("div",{className:k.cardHeader,children:[L("div",{className:k.headerButton,onClick:r,children:[y("img",{className:k.buttonIcon,src:$e}),y(oe,{id:"gui.menubar.tutorials",defaultMessage:"Tutorials"})]}),y("div",{className:k.stepList,children:n.value?.map((f,b)=>y("div",{className:c1(k.stepPip,{[k.actived]:b===l.value}),onClick:()=>l.value=b},b))}),L("div",{className:k.headerButtonGroup,children:[y("div",{className:k.headerButton,onClick:cr(()=>p.value=!p.value,[]),children:p.value?L(ve,{children:[y("img",{className:k.buttonIcon,src:$i}),y(oe,{id:"gui.tutorials.shrink",defaultMessage:"Shrink"})]}):L(ve,{children:[y("img",{className:k.buttonIcon,src:Fi}),y(oe,{id:"gui.tutorials.expand",defaultMessage:"Expand"})]})}),L("div",{className:k.headerButton,onClick:t,children:[y("img",{className:k.buttonIcon,src:xi}),y(oe,{id:"gui.tutorials.close",defaultMessage:"Close"})]})]})]}),p.value&&c.value&&L("div",{className:k.cardBody,children:[(c.value.title||c.value.next)&&y("div",{className:k.title,children:c.value.title||y(oe,{id:"gui.tutorials.moreTry",defaultMessage:"More things to try!"})}),c.value.image&&y("img",{className:k.image,src:c.value.image}),c.value.text&&y("div",{className:k.text,children:c.value.text}),c.value.next&&L(ve,{children:[y("div",{className:k.more,children:c.value.next.map((f)=>L("div",{className:k.moreItem,onClick:()=>i(f.id),children:[y("img",{className:k.moreItemImage,src:f.image}),y("div",{className:k.moreItemName,children:f.title})]},f.id))}),y(u1,{className:k.seeMoreButton,onClick:r,children:y(oe,{id:"gui.tutorials.seeMore",defaultMessage:"See more"})})]})]})]}),p.value&&l.value>0&&L(ve,{children:[y("div",{className:k.leftPage}),y("div",{className:k.leftButton,onClick:B,children:y("img",{src:lr})})]}),p.value&&n.value&&l.value<n.value.length-1&&L(ve,{children:[y("div",{className:k.rightPage}),y("div",{className:k.rightButton,onClick:u,children:y("img",{src:lr})})]})]})}import{useComputed as p1}from"@preact/signals";import{useAppContext as g1,Text as d1,Library as s1}from"@blockcode/core";import{jsx as Di}from"preact/jsx-runtime";var h1=Di(d1,{id:"gui.library.tutorials.tutorial",defaultMessage:"Choose a tutorial"});function Ai({onOpenTutorial:e,onClose:i}){let{tutorials:r}=g1(),t=p1(()=>{return Object.entries(r.value.lessons).map(([a,n])=>({title:n.title,image:n.image,tags:n.tags,onSelect:()=>e(a)}))});return Di(s1,{featured:!0,items:t.value,title:r.value.title||h1,filterable:r.value.tags,tags:r.value.tags,onClose:i})}import{useCallback as ke,useEffect as f1}from"preact/hooks";import{useComputed as b1,useSignal as v1}from"@preact/signals";import{getProjectsThumbs as k1,getProject as _1,cloneProject as y1,renameProject as w1,delProject as q1}from"@blockcode/utils";import{useProjectContext as C1,closeUserStorage as Si,maybeTranslate as ur,openPromptModal as Ri}from"@blockcode/core";import{Text as H,Library as B1}from"@blockcode/core";w(".mLGZyG_delete-menu-item:hover{background:var(--error-primary)}");var Ii={deleteMenuItem:"mLGZyG_delete-menu-item"};import{jsx as I}from"preact/jsx-runtime";var M1=30;function Hi({onOpenProject:e}){let{meta:i}=C1(),r=v1([]),t=b1(()=>r.value.length),o=ke((c,u)=>{Ri({title:I(H,{id:"gui.library.projects.rename",defaultMessage:"rename"}),inputItems:[{key:"name",label:I(H,{id:"gui.menubar.titlePlaceholder",defaultMessage:"Project title here"}),defaultValue:ur(u??I(H,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}],onSubmit:async(B)=>{if(B?.name)await w1(c,B.name),p()}})},[]),a=ke(async(c)=>{await y1(c),p()},[]),n=ke((c,u)=>{Ri({title:I(H,{id:"gui.library.projects.delete",defaultMessage:"delete"}),label:I(H,{id:"gui.library.projects.deleteConfirm",defaultMessage:'Delect "{name}" project?',name:ur(u||I(H,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}),onSubmit:async()=>{await q1(c),p()}})},[]),l=ke((c)=>async()=>{let u=await _1(c);e(u),Si()},[]),p=ke(async()=>{let c=await k1();if(i.value?.editor)c=c.filter((u)=>u.meta.editor===i.value.editor);c=c.sort((u,B)=>B.modifiedDate-u.modifiedDate),r.value=c.map((u)=>({name:ur(u.name??I(H,{id:"gui.project.shortname",defaultMessage:"Untitled"})),image:u.thumb,onSelect:l(u.key),contextMenu:[[{label:I(H,{id:"gui.library.projects.rename",defaultMessage:"rename"}),onClick:()=>o(u.key,u.name)},{label:I(H,{id:"gui.library.projects.duplicate",defaultMessage:"duplicate"}),onClick:()=>a(u.key)}],[{label:I(H,{id:"gui.library.projects.delete",defaultMessage:"delete"}),className:Ii.deleteMenuItem,onClick:()=>n(u.key,u.name)}]]}))},[l,o,n]);return f1(()=>p(),[p]),I(B1,{items:r.value,filterable:t.value>M1,emptyMessage:I(H,{id:"gui.library.projects.empty",defaultMessage:"No project!"}),onClose:Si})}w("._3HqakW_gui-wrapper{height:100%}._3HqakW_alerts-container{width:100%;z-index:var(--z-index-alerts);margin-top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;justify-content:center;display:flex;position:absolute}._3HqakW_menu-bar-position{z-index:var(--z-index-menu-bar);position:relative}._3HqakW_body-wrapper{height:calc(100% - var(--menu-bar-height));background:var(--ui-primary)}._3HqakW_body-wrapper *{box-sizing:border-box}._3HqakW_workspace-wrapper{flex-direction:row;height:100%;display:flex;overflow-y:hidden}._3HqakW_sidebar-wrapper{margin:0 var(--space);display:flex;position:relative}._3HqakW_editor-wrapper{flex-direction:column;flex-grow:1;flex-shrink:0;display:flex;position:relative}._3HqakW_tabs-wrapper{flex-grow:1;position:relative}._3HqakW_tab-panel-no-left{border-bottom-left-radius:0}._3HqakW_tab-panel-no-right{border-top-right-radius:0;border-bottom-right-radius:0}._3HqakW_tab-panel-no-bottom{border-bottom-right-radius:0;border-bottom-left-radius:0}._3HqakW_pane-wrapper{margin:var(--space)0 0 0;display:flex;position:relative}");var F={tabPanelNoBottom:"_3HqakW_tab-panel-no-bottom",alertsContainer:"_3HqakW_alerts-container",editorWrapper:"_3HqakW_editor-wrapper",tabsWrapper:"_3HqakW_tabs-wrapper",guiWrapper:"_3HqakW_gui-wrapper",tabPanelNoRight:"_3HqakW_tab-panel-no-right",bodyWrapper:"_3HqakW_body-wrapper",workspaceWrapper:"_3HqakW_workspace-wrapper",menuBarPosition:"_3HqakW_menu-bar-position",sidebarWrapper:"_3HqakW_sidebar-wrapper",tabPanelNoLeft:"_3HqakW_tab-panel-no-left",paneWrapper:"_3HqakW_pane-wrapper"};import{jsx as _,jsxs as _e,Fragment as Pi}from"preact/jsx-runtime";var le=F1({Bluetooth:null,SerialPort:null}),Ae=()=>ce(()=>{X1(),H1()}),gr=(e)=>{ce(()=>{zi(),U1(Object.assign(JSON.parse(JSON.stringify(e)),{fileId:e.fileId??e.files?.[0]?.id})),Oi(0)})};function Ti(){let[e]=E1(),{language:i}=L1(),r=W1();Ui(()=>{document.title=D1("gui.name","BlockCode Playgrounds"),document.title+=" [BETA]"},[i.value]);let t,o;r.docks.value?.forEach((g)=>{if(g.expand==="left")t=g.Content;else o=g.Content});let a=r.panes.value?.[0].Content,n=$1({[F.tabPanelNoLeft]:!t,[F.tabPanelNoRight]:!o,[F.tabPanelNoBottom]:!a}),l=We(null);Ui(()=>{if(pr)window.electron.serial.onScan((g)=>{l.value=g&&{devices:g,type:le.SerialPort}}),window.electron.bluetooth.onScan((g)=>{l.value=g&&{devices:g,type:le.Bluetooth}})},[]);let p=()=>{},c=T(()=>{if(pr){if(l.value.type===le.SerialPort)window.electron.serial.cancel();if(l.value.type===le.Bluetooth)window.electron.bluetooth.cancel();l.value=null}},[]),u=T((g)=>{if(pr){if(l.value.type===le.SerialPort)window.electron.serial.connect(g);if(l.value.type===le.Bluetooth)window.electron.bluetooth.connect(g)}},[]),B=We({});Q1(async()=>{let g=await de();g=g.map((M)=>[M.id,{name:M.name,version:M.version}]),B.value=Object.fromEntries(g)});let f=We(!1),b=We(null),m=T(()=>{ce(()=>{b.value=null,f.value=!0})},[]),s=T((g)=>{let M=r.tutorials.value.lessons[g];ce(async()=>{if(M.project){P1("importing",{id:g});let x=await x1(M.project);z1(g),gr(x)}b.value=g,f.value=!1})},[]),{meta:v,key:A,modified:we}=A1(),qe=Z1(()=>!v.value),Ni=T(()=>{if(we.value)Le({title:_(ne,{id:"gui.library.projects.notSaved",defaultMessage:"Not saved"}),label:_(ne,{id:"gui.library.projects.close",defaultMessage:"Close current project?"}),onSubmit:Ae});else Ae()},[]),De=T((g,M)=>{if(M!==g.meta.editor){Le({label:_(ne,{id:"gui.library.projects.errorEditor",defaultMessage:'This project is not currently editor creation, please switch to "{editor}" and open it.',editor:I1(B.value[g.meta.editor]?.name)}),redStyle:!0});return}if(A.value===g.key)return;if(we.value)Le({title:_(ne,{id:"gui.library.projects.notSaved",defaultMessage:"Not saved"}),label:_(ne,{id:"gui.library.projects.replace",defaultMessage:"Replace contents of the current project?"}),onSubmit:()=>gr(g)});else gr(g)},[]),sr=T(async(g,M)=>{ce(()=>{Ae(),zi()});let x=g,fr=window.electron?.getLocalEditors();if(fr?.[g]?.main)x=fr[g].main;let K;try{K=(await import(x)).default}catch(G1){Le({label:_(ne,{id:"gui.library.projects.notFoundEditor",defaultMessage:'Not Found the "{editor}" Editor.',editor:g}),redStyle:!0}),S1();return}let Ie={editor:g,version:B.value[g]?.version};if(!M)M=JSON.parse(JSON.stringify(await K.onNew()));if(!M.meta)M.meta=Ie;if(!M.meta.editor)M.meta.editor=g,M.meta.version=Ie.version;let Vi={menuItems:Lr(K,Ie,De),tabs:K.tabs,docks:K.docks,panes:K.panes,tutorials:window.electron?.getLocalTutorials(g,i.value)??K.tutorials};ce(()=>{R1(Vi),De(M,g)})},[]),hr=T((g)=>{if(v.value?.editor!==g.meta.editor){Ae(),sr(g.meta.editor,g);return}De(g,v.value.editor)},[]);return _e(Pi,{children:[(r.splashVisible.value||e)&&_(Ei,{error:e}),_(Rr,{items:r.alerts.value}),_(bi,{className:F.menuBarPosition,showHomeButton:!qe.value,onRequestHome:Ni,onOpenTutorialLibrary:m}),_("div",{className:F.bodyWrapper,children:_e("div",{className:F.workspaceWrapper,children:[t&&_("div",{className:F.sidebarWrapper,children:_(t,{})}),_e("div",{className:F.editorWrapper,children:[_(Qi,{id:F.tabsWrapper,className:F.tabsWrapper,children:r.tabs.value?.map(({Content:g,...M},x)=>_e(Pi,{children:[_e(Fe,{name:x,disabled:M.disabled,checked:x===r.tabIndex.value,onSelect:()=>Oi(x),children:[_("img",{src:M.icon}),M.label]},x),_(xe,{name:x,className:n,children:(x===0||r.tabIndex.value===x)&&g&&_(g,{})},x)]}))}),a&&_(vi,{id:F.paneWrapper,className:F.paneWrapper,title:pane.label,right:!o,left:!t,children:_(a,{})})]}),o&&_("div",{className:F.sidebarWrapper,children:_(o,{})})]})}),l.value&&_(Xr,{title:v.value.deviceName,icon:v.value.deviceIcon,devices:l.value.devices,onClose:c,onConnect:u}),b.value&&_(Li,{tutorialId:b.value,onOpenTutorial:s,onBack:m,onClose:()=>b.value=null}),f.value&&_(Ai,{onOpenTutorial:s,onClose:T(()=>f.value=!1,[])}),qe.value&&_(ai,{onOpenEditor:sr,onOpenProject:hr}),r.userStorageVisible.value&&_(Hi,{onOpenProject:hr}),r.prompt.value&&(r.prompt.value.inputItems?_(Mi,{title:r.prompt.value.title,content:r.prompt.value.content,inputItems:r.prompt.value.inputItems,onClose:Xi,onSubmit:r.prompt.value.onSubmit}):_(yi,{title:r.prompt.value.title,label:r.prompt.value.label,content:r.prompt.value.content,redStyle:r.prompt.value.redStyle,onClose:Xi,onSubmit:r.prompt.value.onSubmit,children:r.prompt.value.body}))]})}import{addAlertConfig as G,Text as Y,Spinner as dr}from"@blockcode/core";import{jsx as U}from"preact/jsx-runtime";G("importing",{icon:U(dr,{level:"success"}),message:U(Y,{id:"gui.alert.importing",defaultMessage:"Importing..."})});G("downloading",{icon:U(dr,{level:"success"}),message:U(Y,{id:"gui.alert.downloading",defaultMessage:"Downloading..."})});G("downloadCompleted",{icon:null,message:U(Y,{id:"gui.alert.downloadCompleted",defaultMessage:"Download completed."})});G("connectionError",{mode:"warn",message:U(Y,{id:"gui.alert.connectionError",defaultMessage:"Connection error."})});G("connectionCancel",{mode:"warn",message:U(Y,{id:"gui.alert.connectionCancel",defaultMessage:"Connection cancel."})});G("compiling",{icon:U(dr,{level:"success"}),message:U(Y,{id:"gui.alert.compiling",defaultMessage:"Compiling..."})});G("compileCompleted",{icon:null,message:U(Y,{id:"gui.alert.compileSuccess",defaultMessage:"Compilation completed."})});G("compileError",{mode:"warn",message:U(Y,{id:"gui.alert.compileError",defaultMessage:"Compilation error."})});import{jsx as ye}from"preact/jsx-runtime";function J1(){return ye(T1,{children:ye(N1,{children:ye(V1,{children:ye(Ti,{})})})})}O1(ye(J1,{}),document.getElementById("root"));
