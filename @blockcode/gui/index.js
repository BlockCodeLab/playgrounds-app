import{addLocalesMessages as Ti}from"@blockcode/core";var hr={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"Importing...","gui.alert.downloading":"Downloading...","gui.alert.downloadingProgress":"Downloading...{progress}%","gui.alert.downloadCompleted":"Download completed.","gui.alert.connectionCancel":"Connection cancel.","gui.alert.connectionError":"Connection error, or connection was lost.","gui.alert.compiling":"Compiling...","gui.alert.compileSuccess":"Compilation completed.","gui.alert.compileError":"Compilation failed.","gui.alert.compileViewError":"View Message.","gui.home.my":"My projects","gui.home.all":"View all","gui.home.allCounts":"View all ({counts})","gui.home.new":"Create new project","gui.home.examples":"Wonderful {label} projects","gui.home.slideshow.desktop.title":"The desktop application is here!","gui.home.slideshow.desktop.button":"Download","gui.home.slideshow.tankwar.title":"The Tank War is coming! Join us!","gui.home.slideshow.tankwar.button":"Join us","gui.home.slideshow.arcade.title":"The next game, create your own!","gui.home.slideshow.arcade.button":"Create now","gui.splash.loading":"Loading project...","gui.splash.errorTitle":"Error occurred","gui.splash.errorLabel":"Please refresh the page and reopen it.","gui.menubar.courses":"Courses","gui.menubar.tutorials":"Tutorials","gui.menubar.titlePlaceholder":"Project title here","gui.menubar.mdified":"Save to local storage","gui.menubar.saving":"Saving project...","gui.menubar.saved":"Saved to local storage.","gui.menubar.savedComputer":"Saved to your computer.","gui.menubar.file":"File","gui.menubar.file.newProject":"New","gui.menubar.file.openProject":"Open","gui.menubar.file.saveProject":"Save","gui.menubar.file.uploadProject":"Load from your computer","gui.menubar.file.downloadProject":"save to your computer","gui.menubar.edit":"Edit","gui.menubar.edit.undo":"Undo","gui.menubar.edit.redo":"Redo","gui.menubar.device":"Device","gui.menubar.device.connect":"Connect","gui.menubar.device.disconnect":"Disconnect","gui.menubar.device.download":"Download program","gui.project.name":"Untitled Project","gui.project.shortname":"Untitled","gui.library.search":"Search","gui.library.projects.empty":"No project!","gui.library.projects.rename":"rename","gui.library.projects.duplicate":"duplicate","gui.library.projects.delete":"delete","gui.library.projects.notSaved":"Not saved","gui.library.projects.close":"Close current project?","gui.library.projects.deleteConfirm":'Do you want to delete the project "{name}"?',"gui.library.projects.replace":"Replace contents of the current project?","gui.library.projects.errorEditor":'This project is not currently editor creation, please switch to "{workspace}" and open it.',"gui.library.projects.notFoundEditor":'Not Found the "{editor}" Editor.',"gui.library.examples.interconnect":"The project requires two devices to work properly.","gui.library.tutorial.course":"Choose a course","gui.library.tutorial.tutorial":"Choose a tutorial","gui.tutorials.shrink":"Shrink","gui.tutorials.expand":"Expand","gui.tutorials.close":"Close","gui.tutorials.moreTry":"More things to try!","gui.tutorials.seeMore":"See more","gui.prompt.ok":"OK","gui.prompt.close":"Close","gui.prompt.cancel":"Cancel","gui.prompt.reconnect":"Reconnect","gui.connection.device":"Device Connection","gui.connection.search":"Start Searching","gui.connection.searching":"Searching...","gui.connection.connect":"Start Connecting","gui.connection.deviceName":"Device name","gui.about.title":"About...","gui.about.main":"Main program","gui.terms.title":"Terms of Use","gui.terms.content":`<b>Terms of Use</b>
`,"gui.privacy.title":"Privacy","gui.privacy.content":`<b>Privacy</b>
`};var fr={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"载入中…","gui.alert.downloading":"正在下载…","gui.alert.downloadingProgress":"正在下载…{progress}%","gui.alert.downloadCompleted":"下载完成。","gui.alert.connectionCancel":"连接取消。","gui.alert.connectionError":"连接发生错误，或已断开。","gui.alert.compiling":"正在编译…","gui.alert.compileSuccess":"编译完成。","gui.alert.compileError":"编译失败。","gui.alert.compileViewError":"查看信息","gui.home.my":"我的作品","gui.home.all":"查看全部","gui.home.allCounts":"查看全部（{counts}）","gui.home.new":"开始新作品","gui.home.examples":"{label} 精彩作品","gui.home.slideshow.desktop.title":"桌面端程序已就绪，快来下载！","gui.home.slideshow.desktop.button":"立即下载","gui.home.slideshow.tankwar.title":"战争一触即发，赶紧来战吧！","gui.home.slideshow.tankwar.button":"加入战斗","gui.home.slideshow.arcade.title":"玩的下一个游戏，就要自己创作！","gui.home.slideshow.arcade.button":"开始创作","gui.splash.loading":"加载作品…","gui.splash.errorTitle":"发生错误","gui.splash.errorLabel":"请刷新页面重新打开。","gui.menubar.courses":"课程","gui.menubar.tutorials":"教程","gui.menubar.titlePlaceholder":"在此填写作品标题","gui.menubar.modified":"保存到本地","gui.menubar.saving":"正在保存作品…","gui.menubar.saved":"已保存到本地。","gui.menubar.savedComputer":"已保存到电脑。","gui.menubar.file":"文件","gui.menubar.file.newProject":"新作品","gui.menubar.file.openProject":"打开","gui.menubar.file.saveProject":"保存","gui.menubar.file.uploadProject":"从电脑中打开","gui.menubar.file.downloadProject":"保存到电脑","gui.menubar.edit":"编辑","gui.menubar.edit.undo":"撤销","gui.menubar.edit.redo":"重做","gui.menubar.device":"设备","gui.menubar.device.connect":"连接","gui.menubar.device.disconnect":"断开连接","gui.menubar.device.download":"下载程序","gui.project.name":"未命名作品","gui.project.shortname":"未命名","gui.library.search":"搜索","gui.library.projects.empty":"没有作品！","gui.library.projects.rename":"重命名","gui.library.projects.duplicate":"复制","gui.library.projects.delete":"删除","gui.library.projects.notSaved":"未保存作品","gui.library.projects.close":"要关闭当前作品吗？","gui.library.projects.deleteConfirm":"要删除“《{name}》”作品吗？","gui.library.projects.replace":"要创建新作品替换当前作品吗？","gui.library.projects.errorEditor":"这个作品不是当前编辑器创作，请切换至“{editor}”编辑器然后打开。","gui.library.projects.notFoundEditor":"没有发现“{editor}”编辑器。","gui.library.examples.interconnect":"该作品需要两台设备联机才能正常运行。","gui.library.tutorials.course":"选择一个课程","gui.library.tutorials.tutorial":"选择一个教程","gui.tutorials.shrink":"收起","gui.tutorials.expand":"展开","gui.tutorials.close":"关闭","gui.tutorials.moreTry":"再试试这些！","gui.tutorials.seeMore":"更多技巧","gui.prompt.ok":"确认","gui.prompt.close":"关闭","gui.prompt.cancel":"取消","gui.prompt.reconnect":"重新连接","gui.connection.device":"硬件连接","gui.connection.search":"开始搜索","gui.connection.searching":"正在搜索…","gui.connection.connect":"开始连接","gui.connection.deviceName":"硬件名称","gui.about.title":"版本信息","gui.about.main":"主程序","gui.terms.title":"使用条款","gui.terms.content":`<b>使用条款</b>
`,"gui.privacy.title":"隐私","gui.privacy.content":`<b>隐私</b>
`};var br={"gui.name":"BlockCode Playgrounds","gui.alert.importing":"載入中…","gui.alert.downloading":"正在下載…","gui.alert.downloadingProgress":"正在下載…{progress}%","gui.alert.downloadCompleted":"下載完成。","gui.alert.connectionCancel":"連接取消。","gui.alert.connectionError":"連接發生錯誤，或已斷開。","gui.alert.compiling":"正在編譯…","gui.alert.compileSuccess":"編譯完成。","gui.alert.compileError":"編譯失敗。","gui.alert.compileViewError":"查看信息","gui.home.my":"我的專案","gui.home.all":"查看全部","gui.home.allCounts":"查看全部（{counts}）","gui.home.new":"開始新專案","gui.home.examples":"{label} 精彩專案","gui.home.slideshow.desktop.title":"桌面端程序已就緒，快來下載！","gui.home.slideshow.desktop.button":"立即下載","gui.home.slideshow.tankwar.title":"戰爭一觸即髮，趕緊來戰吧！","gui.home.slideshow.tankwar.button":"加入戰鬥","gui.home.slideshow.arcade.title":"玩的下一個遊戲，就要自己創作！","gui.home.slideshow.arcade.button":"開始創作","gui.splash.loading":"加載專案…","gui.splash.errorTitle":"發生錯誤","gui.splash.errorLabel":"請刷新頁面重新打開。","gui.menubar.courses":"課程","gui.menubar.tutorials":"教程","gui.menubar.titlePlaceholder":"在此填寫專案標題","gui.menubar.modified":"保存到本地","gui.menubar.saving":"正在保存專案…","gui.menubar.saved":"已保存到本地。","gui.menubar.savedComputer":"已保存到電腦。","gui.menubar.file":"文檔","gui.menubar.file.newProject":"新專案","gui.menubar.file.openProject":"打開","gui.menubar.file.saveProject":"保存","gui.menubar.file.uploadProject":"從電腦中打開","gui.menubar.file.downloadProject":"保存到電腦","gui.menubar.edit":"編輯","gui.menubar.edit.undo":"撤銷","gui.menubar.edit.redo":"重做","gui.menubar.device":"設備","gui.menubar.device.connect":"連接","gui.menubar.device.disconnect":"斷開連接","gui.menubar.device.download":"下載程序","gui.project.name":"未命名專案","gui.project.shortname":"未命名","gui.library.search":"搜索","gui.library.projects.empty":"沒有專案！","gui.library.projects.rename":"重命名","gui.library.projects.duplicate":"複製","gui.library.projects.delete":"刪除","gui.library.projects.notSaved":"未保存專案","gui.library.projects.close":"要關閉當前專案嗎？","gui.library.projects.deleteConfirm":"要刪除“《{name}》”專案嗎？","gui.library.projects.replace":"要創建新專案替換當前專案嗎？","gui.library.projects.errorEditor":"這個專案不是當前編輯器創作，請切換至“{editor}”編輯器然後打開。","gui.library.projects.notFoundEditor":"沒有發現「{editor}」編輯器。","gui.library.examples.interconnect":"該專案需要兩枱設備聯機纔能正常運行。","gui.library.tutorials.course":"選擇一個課程","gui.library.tutorials.tutorial":"選擇一個教程","gui.tutorials.shrink":"收起","gui.tutorials.expand":"展開","gui.tutorials.close":"關閉","gui.tutorials.moreTry":"再試試這些！","gui.tutorials.seeMore":"更多技巧","gui.prompt.ok":"確認","gui.prompt.close":"關閉","gui.prompt.cancel":"取消","gui.prompt.reconnect":"重新連接","gui.connection.device":"硬件連接","gui.connection.search":"開始搜索","gui.connection.searching":"正在搜索…","gui.connection.connect":"開始連接","gui.connection.deviceName":"硬件名稱","gui.about.title":"版本信息","gui.about.main":"主程式","gui.terms.title":"使用條款","gui.terms.content":`<b>使用條款</b>
`,"gui.privacy.title":"隱私","gui.privacy.content":`<b>隱私</b>
`};Ti({en:hr,"zh-Hans":fr,"zh-Hant":br});import{render as Ut}from"preact";import{LocalesProvider as Pt,AppProvider as zt,ProjectProvider as Ot}from"@blockcode/core";import{useCallback as O,useEffect as Si,useErrorBoundary as Ct}from"preact/hooks";import{batch as ce,useComputed as Mt,useSignal as We,useSignalEffect as Bt}from"@preact/signals";import{classNames as Et,keyMirror as Zt,openProjectFromURL as Qt}from"@blockcode/utils";import{useAppContext as $t,useLocalesContext as Ft,useProjectContext as xt,translate as Wt,maybeTranslate as Lt,showSplash as Xi,hideSplash as At,openPromptModal as Le,closePromptModal as Ri,openLayout as Dt,closeLayout as It,openTab as Ui,openProject as St,closeProject as Rt,setAlert as Ht,delAlert as Xt}from"@blockcode/core";import{Text as $r,MenuSection as Co,MenuItem as Mo}from"@blockcode/core";import{useCallback as Ce}from"preact/hooks";import{batch as Ni}from"@preact/signals";import{isMac as Se,putProject as Vi,openProjectFromComputer as Ji,saveProjectToComputer as Gi,sleepMs as Yi}from"@blockcode/utils";import{useProjectContext as Ki,setAlert as _r,openUserStorage as ji,setFile as ea,setModified as ra,ModifyTypes as ia,Keys as z}from"@blockcode/core";import{Text as T,MenuSection as Re,MenuItem as me}from"@blockcode/core";function w(e){let i=globalThis.document,r=i.createElement("style");r.appendChild(i.createTextNode(e)),i.head.append(r)}w(".cbXT-q_menu-bar{box-sizing:border-box;height:var(--menu-bar-height);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:var(--menu-bar-standard-font-size);background-color:var(--theme-primary);color:var(--ui-white);-webkit-user-select:none;-webkit-app-region:drag;flex-flow:row;justify-content:space-between;font-weight:700;display:flex;box-shadow:0 0 3px #00000040}.cbXT-q_menu-bar-item{color:var(--ui-white);user-select:none;white-space:nowrap;height:var(--menu-bar-height);align-self:center;align-items:center;padding:0 .25rem;text-decoration:none;display:flex;position:relative}.cbXT-q_menu-bar-item.cbXT-q_growable{max-width:var(--menu-bar-item-max-width);flex:1}.cbXT-q_main-menu{-webkit-app-region:no-drag;flex-flow:row;justify-content:flex-start;align-items:center;gap:.25rem;display:flex}.cbXT-q_main-menu.cbXT-q_electron{margin-left:72px}.cbXT-q_right-menu{-webkit-app-region:no-drag;flex-flow:row;justify-content:flex-start;align-items:center;gap:.25rem;display:flex}.cbXT-q_menu-label{padding:0 .75rem}.cbXT-q_menu-label img{margin-right:.25rem}.cbXT-q_language-label{width:var(--language-selector-width);padding:0 .5rem}input.cbXT-q_menu-label{display:none}input.cbXT-q_menu-label+.cbXT-q_menu-bar-item:hover{cursor:pointer;background:var(--ui-black-transparent)}input.cbXT-q_menu-label:checked+.cbXT-q_menu-bar-item{background:var(--ui-black-transparent)}.cbXT-q_menu{top:var(--menu-bar-height);z-index:var(--z-index-menu-bar);border-radius:0 0 var(--space)var(--space);color:var(--ui-white);background:var(--theme-primary);min-width:186px;display:none}.cbXT-q_menu-item{font-weight:700}.cbXT-q_menu-item:hover{background:var(--ui-black-transparent)}.cbXT-q_language-icon{vertical-align:middle;height:1.5rem}.cbXT-q_check-icon{margin-right:calc(var(--space)/2);visibility:hidden;width:14px}.cbXT-q_check-icon.cbXT-q_checked{visibility:visible}.cbXT-q_divider{border-right:1px dashed var(--ui-black-transparent);height:34px;margin:0 .7rem}.cbXT-q_hoverable:hover{cursor:pointer;background:var(--ui-black-transparent)}.cbXT-q_tutorials-icon{margin-right:.35rem}.cbXT-q_title-field{border:1px dashed var(--ui-black-transparent);border-radius:var(--form-radius);-webkit-border-radius:var(--form-radius);-moz-border-radius:var(--form-radius);background-color:var(--ui-white-transparent);height:auto;color:var(--ui-white);-webkit-background-clip:padding-box;background-clip:padding-box;padding:.5rem;font-size:.8rem;font-weight:700}.cbXT-q_title-field::placeholder{color:var(--ui-white);font-size:.8rem;font-style:italic;font-weight:400}.cbXT-q_title-field:hover{background-color:#ffffff80}.cbXT-q_title-field:focus{border:1px solid var(--ui-transparent);-webkit-box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);background-color:var(--ui-white);color:var(--text-primary);outline:none}.cbXT-q_home-icon,.cbXT-q_closeIcon{padding:0 .35rem}");var s={tutorialsIcon:"cbXT-q_tutorials-icon",menuLabel:"cbXT-q_menu-label",menu:"cbXT-q_menu",checked:"cbXT-q_checked",languageIcon:"cbXT-q_language-icon",growable:"cbXT-q_growable",menuItem:"cbXT-q_menu-item",electron:"cbXT-q_electron",hoverable:"cbXT-q_hoverable",titleField:"cbXT-q_title-field",menuBarItem:"cbXT-q_menu-bar-item",checkIcon:"cbXT-q_check-icon",languageLabel:"cbXT-q_language-label",mainMenu:"cbXT-q_main-menu",rightMenu:"cbXT-q_right-menu",homeIcon:"cbXT-q_home-icon",divider:"cbXT-q_divider",menuBar:"cbXT-q_menu-bar",closeIcon:"cbXT-q_closeIcon"};import{jsx as $,jsxs as He,Fragment as aa}from"preact/jsx-runtime";var vr=()=>_r({message:$(T,{id:"gui.menubar.saving",defaultMessage:"Saving project..."})}),kr=(e,i=!1)=>{_r({id:e,message:i?$(T,{id:"gui.menubar.savedComputer",defaultMessage:"Saved to your computer."}):$(T,{id:"gui.menubar.saved",defaultMessage:"Saved to local storage."})},2000)};function yr({onNew:e,onOpen:i,onSave:r,onThumb:t,ExtendedMenu:o}){let{meta:a,key:n,name:l,files:p,assets:c}=Ki(),m=Ce(async()=>{await Yi(0);for(let y in a.value.monitors)if(a.value.monitors[y].deleting)a.value.monitors.splice(y,1);let u=c.value?.filter((y)=>!y.uri),g=await r(p.value,u,a.value);return g.meta=Object.assign(g.meta??{},{editor:a.value.editor,version:a.value.version,monitors:a.value.monitors,users:a.value.users}),g.name=l.value,g},[r]),M=Ce(async()=>{let u=vr(),g=await m();g.key=n.value;let y=await Vi(g,t);Ni(()=>{if(g.key!==y)ea({key:y});ra(ia.Saved)}),kr(u)},[m]),f=Ce(async()=>{let u=vr(),g=await m();if(await Gi(g),kr(u,!0),window.electron)return},[m]),b=Ce(async()=>{let u=await Ji();await i(u)},[i]);return He(aa,{children:[$(Re,{children:$(me,{className:s.menuItem,label:$(T,{id:"gui.menubar.file.newProject",defaultMessage:"New"}),hotkey:[Se?z.COMMAND:z.CONTROL,z.N],onClick:e})}),He(Re,{children:[$(me,{className:s.menuItem,label:$(T,{id:"gui.menubar.file.openProject",defaultMessage:"Open"}),hotkey:[Se?z.COMMAND:z.CONTROL,z.O],onClick:ji}),$(me,{className:s.menuItem,label:$(T,{id:"gui.menubar.file.saveProject",defaultMessage:"Save"}),hotkey:[Se?z.COMMAND:z.CONTROL,z.S],onClick:M})]}),He(Re,{children:[$(me,{className:s.menuItem,label:$(T,{id:"gui.menubar.file.uploadProject",defaultMessage:"Load from your computer"}),onClick:b}),$(me,{className:s.menuItem,label:$(T,{id:"gui.menubar.file.downloadProject",defaultMessage:"save to your computer"}),onClick:f})]}),o&&$(o,{itemClassName:s.menuItem,onOpen:i,onSave:m})]})}import{useEffect as ta}from"preact/hooks";import{batch as oa,useSignal as wr}from"@preact/signals";import{isMac as qr}from"@blockcode/utils";import{useProjectContext as na,Keys as N}from"@blockcode/core";import{Text as Cr,MenuSection as la,MenuItem as Mr}from"@blockcode/core";import{jsx as ue,jsxs as Br,Fragment as ca}from"preact/jsx-runtime";function Er({onUndo:e,onRedo:i,onEnableUndo:r,onEnableRedo:t,ExtendedMenu:o}){let{key:a,fileId:n,modified:l}=na(),p=wr(!0),c=wr(!0);return ta(()=>{oa(()=>{p.value=!r(),c.value=!t()})},[a.value,n.value,l.value]),Br(ca,{children:[Br(la,{children:[ue(Mr,{disabled:p.value,className:s.menuItem,label:ue(Cr,{id:"gui.menubar.edit.undo",defaultMessage:"Undo"}),hotkey:[qr?N.COMMAND:N.CONTROL,N.Z],onClick:e}),ue(Mr,{disabled:c.value,className:s.menuItem,label:ue(Cr,{id:"gui.menubar.edit.redo",defaultMessage:"Redo"}),hotkey:qr?[N.SHIFT,N.COMMAND,N.Z]:[N.CONTROL,N.Y],onClick:i})]}),o&&ue(o,{itemClassName:s.menuItem})]})}var Zr="./assets/icon-file-egaz1kfx.svg";var Qr="./assets/icon-edit-jejnm7yb.svg";import{jsx as Me}from"preact/jsx-runtime";function Fr(e,i,r){let t=(a)=>r(a,i.editor),o=async()=>{let a=JSON.parse(JSON.stringify(await e.onNew()));if(!a.meta)a.meta=i;if(!a.meta.editor)a.meta.editor=i.editor,a.meta.version=i.version;t(a,i.editor)};return[{icon:Zr,label:Me($r,{id:"gui.menubar.file",defaultMessage:"File"}),Menu:()=>Me(yr,{ExtendedMenu:e.menuItems?.find((a)=>a.id==="file")?.Menu,onNew:o,onOpen:t,onSave:e.onSave,onThumb:e.onThumb})},{icon:Qr,label:Me($r,{id:"gui.menubar.edit",defaultMessage:"Edit"}),Menu:()=>Me(Er,{ExtendedMenu:e.menuItems?.find((a)=>a.id==="edit")?.Menu,onUndo:e.onUndo,onRedo:e.onRedo,onEnableUndo:e.onEnableUndo,onEnableRedo:e.onEnableRedo})}].concat(e.menuItems?.filter((a)=>a.id!=="file"&&a.id!=="edit")??[])}import{Text as ne}from"@blockcode/core";import{classNames as ga}from"@blockcode/utils";import{Button as Wr}from"@blockcode/core";w(".lkaaPa_alerts-wrapper{width:100%;z-index:var(--z-index-alerts);top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute}.lkaaPa_alert-wrapper{pointer-events:all;background:var(--ui-light);border:1px solid var(--blocks-tertiary);min-width:200px;max-width:548px;min-height:1.5rem;box-shadow:0px 0px 0px 2px var(--ui-light);border-radius:.5rem;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:7px;padding:.875rem 1rem;display:flex;overflow:hidden}.lkaaPa_warn{border:1px solid var(--error-primary)}.lkaaPa_icon{min-width:1.25rem;min-height:1.25rem;padding-right:1rem;display:flex}.lkaaPa_message{justify-content:flex-end;align-items:center;padding-right:.5rem;font-size:.8125rem;font-weight:700;line-height:.875rem;display:flex}.lkaaPa_warn .lkaaPa_message{color:var(--error-secondary)}.lkaaPa_success .lkaaPa_message{color:#555}.lkaaPa_button{color:var(--ui-white);margin-left:var(--space);padding:var(--space)calc(var(--space)*2.5);background:#ff8c1a;border:#ff8c1a}.lkaaPa_close-button{width:1.75rem;height:1.75rem;margin-left:calc(var(--space)*2);background:#ff861433;border:0;border-radius:50%;padding:0;transition:all .15s ease-out;box-shadow:0 0 0 2px #ff861433}.lkaaPa_close-button:hover{transform:scale(1.1);box-shadow:0 0 0 4px #ff861433}.lkaaPa_close-button img{margin:0 auto}");var U={message:"lkaaPa_message",warn:"lkaaPa_warn",button:"lkaaPa_button",alertWrapper:"lkaaPa_alert-wrapper",icon:"lkaaPa_icon",closeButton:"lkaaPa_close-button",alertsWrapper:"lkaaPa_alerts-wrapper",success:"lkaaPa_success"};var xr="./assets/icon-close-bazpdng8.svg";import{jsx as ie,jsxs as da}from"preact/jsx-runtime";function Lr({mode:e,icon:i,message:r,button:t,onClose:o}){return da("div",{className:ga(U.alertWrapper,{[U.success]:e==="success",[U.warn]:e==="warn"}),children:[ie("div",{className:U.icon,children:typeof i==="string"?ie("img",{src:i}):i}),ie("div",{className:U.message,children:r}),t&&ie(Wr,{className:U.button,onClick:t.onClick,children:t.label}),o&&ie(Wr,{className:U.closeButton,onClick:o,children:ie("img",{src:xr})})]})}import{jsx as Ar}from"preact/jsx-runtime";function Dr({items:e}){return Ar("div",{className:U.alertsWrapper,children:e.map((i)=>Ar(Lr,{mode:i.mode??"success",icon:i.icon,message:i.message,button:i.button,onClose:i.onClose}))})}import{useCallback as ha}from"preact/hooks";import{useSignal as fa}from"@preact/signals";import{classNames as Be}from"@blockcode/utils";import{Text as pe,Button as Sr,Modal as ba}from"@blockcode/core";w(".Zq10BW_prompt-modal{width:480px}.Zq10BW_prompt-header{background:var(--blocks-primary)}.Zq10BW_prompt-content{background:var(--ui-white)}.Zq10BW_device-list{background:var(--theme-light-transparent);width:100%;height:170px;padding:.5rem;overflow-y:auto}.Zq10BW_device-search{justify-content:center;align-items:center;width:100%;height:100%;display:flex}.Zq10BW_device-search-icon{width:120px;height:120px}@keyframes Zq10BW_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.Zq10BW_device-searching-icon{animation:1.5s linear infinite Zq10BW_spin}.Zq10BW_device-item{background:var(--ui-white);border-radius:calc(var(--space)/2);border:2px solid var(--ui-white);flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:50px;margin-bottom:.5rem;padding:10px;display:flex}.Zq10BW_device-item.Zq10BW_selected{border:2px solid var(--theme-primary)}.Zq10BW_device-name-bar{align-items:center;display:flex}.Zq10BW_device-image{width:40px;margin-right:.5rem}.Zq10BW_device-name-wrapper{flex-direction:column;justify-content:center;align-items:flex-start;display:flex}.Zq10BW_device-name-label{font-size:.625rem;font-weight:700}.Zq10BW_device-name-text{font-size:.875rem}.Zq10BW_button-row{text-align:right;text-align:center;padding:1.5rem 2.25rem;font-weight:bolder}.Zq10BW_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}.Zq10BW_ok-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-left:var(--space)}");var E={spin:"Zq10BW_spin",promptModal:"Zq10BW_prompt-modal",promptContent:"Zq10BW_prompt-content",button:"Zq10BW_button",buttonRow:"Zq10BW_button-row",deviceList:"Zq10BW_device-list",deviceSearchingIcon:"Zq10BW_device-searching-icon",promptHeader:"Zq10BW_prompt-header",deviceImage:"Zq10BW_device-image",deviceNameText:"Zq10BW_device-name-text",deviceSearchIcon:"Zq10BW_device-search-icon",deviceItem:"Zq10BW_device-item",deviceNameBar:"Zq10BW_device-name-bar",okButton:"Zq10BW_ok-button",deviceNameWrapper:"Zq10BW_device-name-wrapper",deviceNameLabel:"Zq10BW_device-name-label",selected:"Zq10BW_selected",deviceSearch:"Zq10BW_device-search"};var Ir="./assets/searching-tt57cegv.png";import{jsx as Q,jsxs as Ee}from"preact/jsx-runtime";function Rr({title:e,icon:i,devices:r,onClose:t,onSearch:o,onConnect:a}){let n=fa(""),l=ha(()=>{if(!n.value)return;a(n.value),n.value=""},[a]);return Q(ba,{title:e??Q(pe,{id:"gui.connection.device",defaultMessage:"Device"}),className:E.promptModal,headerClassName:E.header,onClose:t,children:Ee("div",{className:E.promptContent,children:[Q("div",{className:E.deviceList,children:Array.isArray(r)&&r.length>0?r.map((p)=>Ee("div",{className:Be(E.deviceItem,{[E.selected]:p.id===n.value}),onClick:()=>n.value=p.id,children:[Ee("div",{className:E.deviceNameBar,children:[i&&Q("img",{}),Ee("div",{className:E.deviceNameWrapper,children:[Q("div",{className:E.deviceNameLabel,children:Q(pe,{id:"gui.connection.deviceName",defaultMessage:"Device name"})}),Q("div",{className:E.deviceNameText,children:p.name})]})]}),p.rssi&&Q("div",{className:E.deviceSignalBar})]})):Q("div",{className:E.deviceSearch,children:Q("img",{className:Be(E.deviceSearchIcon,{[E.deviceSearchingIcon]:Array.isArray(r)}),src:Ir})})}),Q("div",{className:E.buttonRow,children:r===!0?Q(Sr,{className:Be(E.button,E.okButton),onClick:()=>o(),children:Q(pe,{id:"gui.connection.search",defaultMessage:"Start Searching"})}):Q(Sr,{disabled:!n.value,className:Be(E.button,E.okButton),onClick:l,children:!n.value?Q(pe,{id:"gui.connection.searching",defaultMessage:"Searching"}):Q(pe,{id:"gui.connection.connect",defaultMessage:"Start Connecting"})})})]})})}import{useEffect as Ia,useCallback as se}from"preact/hooks";import{batch as Sa,useSignal as Qe,useSignalEffect as Ra}from"@preact/signals";import{classNames as he,getProjectsThumbs as Ha,getProject as Xa,cloneProject as Ua,renameProject as Pa,delProject as za,openProjectFromURL as Oa}from"@blockcode/utils";import{maybeTranslate as Te,setAlert as Ta,delAlert as Na,openPromptModal as Ne,openUserStorage as Va}from"@blockcode/core";var Xe="1.2.0";import{Text as Z,ContextMenu as Ja,LibraryItem as Ve}from"@blockcode/core";import{useEffect as ka}from"preact/hooks";import{useSignal as _a}from"@preact/signals";import{classNames as Hr}from"@blockcode/utils";import{Button as ya}from"@blockcode/core";w(".tyiNqW_cover-wrapper{width:100%;position:relative}.tyiNqW_cover{opacity:1;background-position:50%;background-repeat:no-repeat;background-size:cover;flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:100%;padding:0 2rem;transition:opacity 1s;display:flex;position:absolute;top:0;left:0}.tyiNqW_cover.tyiNqW_hidden{opacity:0;pointer-events:none}.tyiNqW_title{color:#000;padding-right:1.5rem;font-size:2rem;font-weight:600}.tyiNqW_button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-top:calc(2*var(--space));padding:.75rem 1rem;font-size:.85rem;font-weight:600}.tyiNqW_feature{max-height:90%;margin-right:5%}");var j={cover:"tyiNqW_cover",hidden:"tyiNqW_hidden",coverWrapper:"tyiNqW_cover-wrapper",title:"tyiNqW_title",button:"tyiNqW_button",feature:"tyiNqW_feature"};import{jsx as Ze,jsxs as Xr}from"preact/jsx-runtime";function Ur({pages:e,className:i}){let r=_a(0);return ka(()=>{setInterval(()=>r.value=(r.value+1)%e.length,7000)},[]),Ze("div",{className:Hr(j.coverWrapper,i),children:e.map((t,o)=>Xr("div",{className:Hr(j.cover,{[j.hidden]:o!==r.value}),style:{backgroundImage:`url(${t.backgroundImage})`},children:[Xr("div",{children:[Ze("div",{className:j.title,children:t.title}),Ze(ya,{className:j.button,onClick:t.onClick,children:t.buttonText})]}),Ze("img",{className:j.feature,src:t.featureImage})]},o))})}w("._9IQa7q_home-wrapper{background:var(--ui-secondary);top:var(--menu-bar-height);width:100%;height:calc(100% - var(--menu-bar-height));z-index:calc(var(--z-index-alerts) - 10);user-select:none;position:absolute;overflow:hidden auto}._9IQa7q_getting-started{height:240px;margin-bottom:1.5rem}._9IQa7q_link{cursor:pointer;color:var(--theme-primary)}._9IQa7q_view-all{font-weight:400;font-size:var(--standard-font-size);margin-left:1.5rem}._9IQa7q_delete-menu-item:hover{background:var(--error-primary)}._9IQa7q_footer{color:var(--text-primary);font-size:var(--small-font-size);padding:3.5rem 0 var(--space);text-align:center}._9IQa7q_footer-item{padding:0 var(--space)}._9IQa7q_footer-item:not(:first-child){border-left:1px solid var(--ui-black-transparent)}._9IQa7q_library-grid{background:var(--ui-secondary);flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;height:auto;padding:.5rem;display:flex;overflow-y:auto}._9IQa7q_library-label{color:var(--text-primary);padding:1.5rem calc(.5rem + var(--space)).5rem;font-weight:800}._9IQa7q_about-version-content{width:300px}._9IQa7q_about-version-row{margin:var(--space)0;justify-content:space-between;display:flex}");var q={homeWrapper:"_9IQa7q_home-wrapper",gettingStarted:"_9IQa7q_getting-started",libraryGrid:"_9IQa7q_library-grid",deleteMenuItem:"_9IQa7q_delete-menu-item",footerItem:"_9IQa7q_footer-item",link:"_9IQa7q_link",libraryLabel:"_9IQa7q_library-label",aboutVersionContent:"_9IQa7q_about-version-content",aboutVersionRow:"_9IQa7q_about-version-row",footer:"_9IQa7q_footer",viewAll:"_9IQa7q_view-all"};import{Text as Or}from"@blockcode/core";var Pr="./assets/arcade-rd4cktbf.png";var zr="./assets/arcade-bg-fajmd34e.jpg";import{jsx as Tr}from"preact/jsx-runtime";function Ue(e){return{title:Tr(Or,{id:"gui.home.slideshow.arcade.title",defaultMessage:"The Tank War is coming! Join us! NOW!"}),backgroundImage:zr,featureImage:Pr,buttonText:Tr(Or,{id:"gui.home.slideshow.arcade.button",defaultMessage:"Play now"}),onClick:()=>e("@blockcode/gui-arcade")}}import{Text as Jr}from"@blockcode/core";var Nr="./assets/desktop-s3hfwbpz.png";var Vr="./assets/desktop-bg-pqrd17t9.jpg";import{jsx as Gr}from"preact/jsx-runtime";var Yr={title:Gr(Jr,{id:"gui.home.slideshow.desktop.title",defaultMessage:"The desktop application is here!"}),backgroundImage:Vr,featureImage:Nr,buttonText:Gr(Jr,{id:"gui.home.slideshow.desktop.button",defaultMessage:"Download"}),onClick:()=>window.open("//app.blockcode.fun/#/?id=download")};function Pe(e,i){return[Yr,Ue(e)]}async function ze(e){let i=await fetch("https://hub.blockcode.fun/home.json").then((r)=>r.json());return Promise.all(i.filter((r)=>r.editor?e.find((t)=>t.id===r.editor):!0).map(async(r)=>{let t=e.find((a)=>a.id===r.editor),o=await fetch(`https://hub.blockcode.fun/${r.import}`).then((a)=>a.json());return{name:t?.name,examples:o.filter((a)=>e.find((n)=>n.id===a.editor)).map((a)=>({...a,file:`https://hub.blockcode.fun/${a.file}`,thumb:`https://hub.blockcode.fun/${a.thumb}`}))}}))}function P(e){if(typeof e!=="string")throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function Kr(e,i){var r="",t=0,o=-1,a=0,n;for(var l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else if(n===47)break;else n=47;if(n===47){if(o===l-1||a===1);else if(o!==l-1&&a===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var p=r.lastIndexOf("/");if(p!==r.length-1){if(p===-1)r="",t=0;else r=r.slice(0,p),t=r.length-1-r.lastIndexOf("/");o=l,a=0;continue}}else if(r.length===2||r.length===1){r="",t=0,o=l,a=0;continue}}if(i){if(r.length>0)r+="/..";else r="..";t=2}}else{if(r.length>0)r+="/"+e.slice(o+1,l);else r=e.slice(o+1,l);t=l-o-1}o=l,a=0}else if(n===46&&a!==-1)++a;else a=-1}return r}function Ba(e,i){var r=i.dir||i.root,t=i.base||(i.name||"")+(i.ext||"");if(!r)return t;if(r===i.root)return r+t;return r+e+t}function ge(){var e="",i=!1,r;for(var t=arguments.length-1;t>=-1&&!i;t--){var o;if(t>=0)o=arguments[t];else{if(r===void 0)r=process.cwd();o=r}if(P(o),o.length===0)continue;e=o+"/"+e,i=o.charCodeAt(0)===47}if(e=Kr(e,!i),i)if(e.length>0)return"/"+e;else return"/";else if(e.length>0)return e;else return"."}function jr(e){if(P(e),e.length===0)return".";var i=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;if(e=Kr(e,!i),e.length===0&&!i)e=".";if(e.length>0&&r)e+="/";if(i)return"/"+e;return e}function Ea(e){return P(e),e.length>0&&e.charCodeAt(0)===47}function Za(){if(arguments.length===0)return".";var e;for(var i=0;i<arguments.length;++i){var r=arguments[i];if(P(r),r.length>0)if(e===void 0)e=r;else e+="/"+r}if(e===void 0)return".";return jr(e)}function Qa(e,i){if(P(e),P(i),e===i)return"";if(e=ge(e),i=ge(i),e===i)return"";var r=1;for(;r<e.length;++r)if(e.charCodeAt(r)!==47)break;var t=e.length,o=t-r,a=1;for(;a<i.length;++a)if(i.charCodeAt(a)!==47)break;var n=i.length,l=n-a,p=o<l?o:l,c=-1,m=0;for(;m<=p;++m){if(m===p){if(l>p){if(i.charCodeAt(a+m)===47)return i.slice(a+m+1);else if(m===0)return i.slice(a+m)}else if(o>p){if(e.charCodeAt(r+m)===47)c=m;else if(m===0)c=0}break}var M=e.charCodeAt(r+m),f=i.charCodeAt(a+m);if(M!==f)break;else if(M===47)c=m}var b="";for(m=r+c+1;m<=t;++m)if(m===t||e.charCodeAt(m)===47)if(b.length===0)b+="..";else b+="/..";if(b.length>0)return b+i.slice(a+c);else{if(a+=c,i.charCodeAt(a)===47)++a;return i.slice(a)}}function $a(e){return e}function Oe(e){if(P(e),e.length===0)return".";var i=e.charCodeAt(0),r=i===47,t=-1,o=!0;for(var a=e.length-1;a>=1;--a)if(i=e.charCodeAt(a),i===47){if(!o){t=a;break}}else o=!1;if(t===-1)return r?"/":".";if(r&&t===1)return"//";return e.slice(0,t)}function Fa(e,i){if(i!==void 0&&typeof i!=="string")throw TypeError('"ext" argument must be a string');P(e);var r=0,t=-1,o=!0,a;if(i!==void 0&&i.length>0&&i.length<=e.length){if(i.length===e.length&&i===e)return"";var n=i.length-1,l=-1;for(a=e.length-1;a>=0;--a){var p=e.charCodeAt(a);if(p===47){if(!o){r=a+1;break}}else{if(l===-1)o=!1,l=a+1;if(n>=0)if(p===i.charCodeAt(n)){if(--n===-1)t=a}else n=-1,t=l}}if(r===t)t=l;else if(t===-1)t=e.length;return e.slice(r,t)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!o){r=a+1;break}}else if(t===-1)o=!1,t=a+1;if(t===-1)return"";return e.slice(r,t)}}function xa(e){P(e);var i=-1,r=0,t=-1,o=!0,a=0;for(var n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(l===47){if(!o){r=n+1;break}continue}if(t===-1)o=!1,t=n+1;if(l===46){if(i===-1)i=n;else if(a!==1)a=1}else if(i!==-1)a=-1}if(i===-1||t===-1||a===0||a===1&&i===t-1&&i===r+1)return"";return e.slice(i,t)}function Wa(e){if(e===null||typeof e!=="object")throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Ba("/",e)}function La(e){P(e);var i={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return i;var r=e.charCodeAt(0),t=r===47,o;if(t)i.root="/",o=1;else o=0;var a=-1,n=0,l=-1,p=!0,c=e.length-1,m=0;for(;c>=o;--c){if(r=e.charCodeAt(c),r===47){if(!p){n=c+1;break}continue}if(l===-1)p=!1,l=c+1;if(r===46){if(a===-1)a=c;else if(m!==1)m=1}else if(a!==-1)m=-1}if(a===-1||l===-1||m===0||m===1&&a===l-1&&a===n+1){if(l!==-1)if(n===0&&t)i.base=i.name=e.slice(1,l);else i.base=i.name=e.slice(n,l)}else{if(n===0&&t)i.name=e.slice(1,a),i.base=e.slice(1,l);else i.name=e.slice(n,a),i.base=e.slice(n,l);i.ext=e.slice(a,l)}if(n>0)i.dir=e.slice(0,n-1);else if(t)i.dir="/";return i}var Aa="/",Da=":",Ln=((e)=>(e.posix=e,e))({resolve:ge,normalize:jr,isAbsolute:Ea,join:Za,relative:Qa,_makeLong:$a,dirname:Oe,basename:Fa,extname:xa,format:Wa,parse:La,sep:Aa,delimiter:Da,win32:null,posix:null});function de(){let e=window.electron?.getLocalEditors()??[];return Promise.all([].concat(Object.values(e).map(async(i)=>{let{default:r}=await import(i.info);return r.id=i.id,r.image=ge(Oe(i.info),r.image),r}),["@yeqin/gui-tankwar","@blockcode/gui-arcade2","@blockcode/gui-arcade","@blockcode/gui-microbit","@blockcode/gui-esp32","@blockcode/gui-arduino","@blockcode/gui-writer","@blockcode/gui-iotbit","@blockcode/gui-matrix"].map(async(i)=>{let{default:r}=await import(`${i}/info`);return r.id=i,r})))}import{jsx as h,jsxs as W,Fragment as Je}from"preact/jsx-runtime";function ei({onOpenEditor:e,onOpenProject:i}){let r=Math.floor((document.body.clientWidth-20)/176),t=Math.floor((document.body.clientWidth-20)/236)*2,o=Qe(null),a=Qe(0),n=Qe(null),l=Qe(null),p=se(async()=>{let u=await Ha();Sa(()=>{a.value=u.length,o.value=u.filter((g,y)=>y<r)})},[]);Ia(p,[]);let c=se((u,g)=>{Ne({title:h(Z,{id:"gui.library.projects.rename",defaultMessage:"rename"}),inputItems:[{key:"name",label:h(Z,{id:"gui.menubar.titlePlaceholder",defaultMessage:"Project title here"}),defaultValue:Te(g??h(Z,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}],onSubmit:async(y)=>{if(y?.name)await Pa(u,y.name),p()}})},[]),m=se(async(u)=>{await Ua(u),p()},[]),M=se((u,g)=>{Ne({title:h(Z,{id:"gui.library.projects.delete",defaultMessage:"delete"}),label:h(Z,{id:"gui.library.projects.deleteConfirm",defaultMessage:'Delect "{name}" project?',name:Te(g||h(Z,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}),onSubmit:async()=>{await za(u),p()}})},[]),f=se((u)=>async()=>{let g=await Xa(u);i(g)},[i]),b=()=>{return o.value?.map((u)=>h(Ja,{menuItems:[[{label:h(Z,{id:"gui.library.projects.rename",defaultMessage:"rename"}),onClick:()=>c(u.key,u.name)},{label:h(Z,{id:"gui.library.projects.duplicate",defaultMessage:"duplicate"}),onClick:()=>m(u.key)}],[{label:h(Z,{id:"gui.library.projects.delete",defaultMessage:"delete"}),className:q.deleteMenuItem,onClick:()=>M(u.key,u.name)}]],children:h(Ve,{id:u.key,name:u.name||h(Z,{id:"gui.project.shortname",defaultMessage:"Untitled"}),image:u.thumb,onSelect:f(u.key)})},u.key))};return Ra(async()=>{let u=await de();u=u.map((g)=>Object.assign(g,{beta:g.beta||!1,disabled:g.disabled||g.beta,onSelect:()=>e(g.id)})),u=u.filter((g)=>{if(g.hidden)return!1;if(g.disabled)return!1;return!0}),n.value=u.sort((g,y)=>g.sortIndex-y.sortIndex),l.value=await ze(u)}),W("div",{className:q.homeWrapper,children:[h(Ur,{className:q.gettingStarted,pages:Pe(e,i)}),o.value?.length>0&&W(Je,{children:[W("div",{className:q.libraryLabel,children:[h("span",{children:h(Z,{id:"gui.home.my",defaultMessage:"My projects"})}),a.value>r&&h("span",{className:he(q.viewAll,q.link),onClick:Va,children:h(Z,{id:"gui.home.allCounts",defaultMessage:"View all ({counts})",counts:a.value})})]}),h("div",{className:q.libraryGrid,children:h(b,{})})]}),n.value?.length>0&&W(Je,{children:[h("div",{className:q.libraryLabel,children:h(Z,{id:"gui.home.new",defaultMessage:"Create new project"})}),h("div",{className:q.libraryGrid,children:n.value.map((u,g)=>h(Ve,{featured:!0,id:g,disabled:u.disabled,beta:u.beta||u.preview,image:u.image,name:u.name,description:u.description,collaborator:u.collaborator,blocksRequired:u.blocksRequired,micropythonRequired:u.micropythonRequired,clangRequired:u.clangRequired,onSelect:u.onSelect},g))})]}),l.value?.map((u)=>u.examples.length>0&&W(Je,{children:[W("div",{className:q.libraryLabel,children:[h("span",{children:h(Z,{id:"gui.home.examples",defaultMessage:"Wonderful {label} examples",label:Te(u.name)})}),u.examples.length>t&&h("span",{className:he(q.viewAll,q.link),children:h(Z,{id:"gui.home.all",defaultMessage:"View all"})})]}),h("div",{className:q.libraryGrid,children:u.examples.map((g,y)=>h(Ve,{large:!0,id:y,name:g.name,author:g.author,copyright:g.copyright,image:g.thumb,onSelect:async()=>{Ta("importing",{id:g.name});let A=await Oa(g.file);Na(g.name),i(A)}}))})]})),W("div",{className:q.footer,children:[h("span",{className:he(q.footerItem,q.link),onClick:()=>window.open("https://lab.blockcode.fun/","_blank"),children:"BlockCode Lab"}),h("span",{className:he(q.footerItem,q.link),onClick:()=>window.open("https://github.com/BlockCodeLab/playgrounds-app","_blank"),children:"GitHub"}),W("span",{className:he(q.footerItem,q.link),onClick:()=>{Ne({title:h(Z,{id:"gui.about.title",defaultMessage:"About..."}),body:W("div",{className:q.aboutVersionContent,children:[W("div",{className:q.aboutVersionRow,children:[h("div",{children:h("b",{children:h(Z,{id:"gui.about.main",defaultMessage:"Main program"})})}),W("div",{children:["v",Xe]})]}),h("div",{className:q.aboutVersionRow}),n.value.filter((u)=>!u.disabled).map((u)=>W("div",{className:q.aboutVersionRow,children:[h("div",{children:h("b",{children:u.name})}),W("div",{children:["v",u.version]})]}))]})})},children:["v",Xe]})]})]})}import{useEffect as _1}from"preact/hooks";import{classNames as be,isMac as y1}from"@blockcode/utils";import{useLocalesContext as w1,useAppContext as q1,setLanguage as C1,translate as gi,setMacosMenuBarStyled as M1}from"@blockcode/core";import{Menu as di,MenuItem as B1}from"@blockcode/core";import{cloneElement as r1}from"preact";import{useMemo as i1}from"preact/hooks";import{flatChildren as a1}from"@blockcode/utils";var ri=Object.create(null),Ge=document.createElement("div"),ii=document.createElement("style");document.body.insertBefore(ii,document.body.firstChild);var Ga=(e)=>{return Ge.style="",Object.entries(e).forEach(([i,r])=>Ge.style[i]=r),Ge.style.cssText},Ya=()=>{ii.textContent=Object.entries(ri).map(([e,i])=>`${e}{${Ga(i)}}`).join(`
`)};function V(e){Object.assign(ri,e),Ya()}import{Menu as t1}from"@blockcode/core";import{useCallback as Ye}from"preact/hooks";import{classNames as Ka}from"@blockcode/utils";import{jsx as ai,jsxs as e1,Fragment as ja}from"preact/jsx-runtime";function fe({id:e,className:i,checked:r,children:t,name:o}){let a=Ye((p)=>{let c=()=>{p.target.checked=!1,document.removeEventListener("click",c)};document.addEventListener("click",c)},[]),n=Ye((p)=>{let c=p.getBoundingClientRect().left;V({[`#${e}-menu-${o}`]:{left:`${c}px`}})},[e,o]),l=Ye((p)=>{if(p.target.classList.contains(s.menuLabel))n(p.target);else n(p.target.parentElement)},[]);return e1(ja,{children:[ai("input",{checked:r,className:s.menuLabel,id:`${e}-label-${o}`,name:`${e}-menu`,type:"radio",value:o,onChange:a}),ai("label",{className:Ka(s.menuLabel,i),for:`${e}-label-${o}`,onClick:l,children:t})]})}import{jsxs as n1,Fragment as o1}from"preact/jsx-runtime";function ti({id:e,children:i}){let r=i1(()=>a1(i).map((t)=>t&&r1(t,{id:e})),[e,i]);return n1(o1,{children:[r.filter((t)=>t.type===fe),r.filter((t)=>t.type===t1).map((t)=>{let o=`${e}-label-${t.props.name}`,a=`${e}-menu-${t.props.name}`;return V({[`#${o}:checked~#${a}`]:{display:"block"}}),t})]})}import{classNames as c1}from"@blockcode/utils";import{Text as m1}from"@blockcode/core";var $e="./assets/icon-tutorials-bh6n0ck2.svg";import{jsx as Ke,jsxs as oi,Fragment as u1}from"preact/jsx-runtime";function ni({onClick:e}){return oi(u1,{children:[Ke("div",{className:s.divider}),oi("div",{className:c1(s.menuBarItem,s.menuLabel,s.hoverable),onClick:e,children:[Ke("img",{className:s.tutorialsIcon,src:$e}),Ke(m1,{id:"gui.menubar.tutorials",defaultMessage:"Tutorials"})]})]})}import{useProjectContext as p1,BufferedInput as g1,renameProject as d1}from"@blockcode/core";import{jsx as je,jsxs as h1,Fragment as s1}from"preact/jsx-runtime";function li({placeholder:e,defaultValue:i}){let{name:r}=p1();return h1(s1,{children:[je("div",{className:s.divider}),je("div",{className:s.menuBarItem,children:je(g1,{className:s.titleField,placeholder:e,value:r.value||i,onSubmit:d1})})]})}var ci="./assets/icon-check-f984n1c2.svg";var mi="./assets/icon-language-3wan1389.svg";var ui="./assets/icon-dropdown-caret-y4j91xc6.svg";var pi="./assets/icon-home-jt8mdkv3.svg";import{jsx as D,jsxs as ee,Fragment as E1}from"preact/jsx-runtime";function si({className:e,showHomeButton:i,onRequestHome:r,onOpenTutorialLibrary:t}){let{language:o,languageNames:a}=w1(),{menuItems:n,tutorials:l,macosMenuBarStyled:p}=q1();return _1(()=>{window.electron?.onChangeFullscreen((c)=>M1(y1&&!c))},[]),ee("div",{className:be(s.menuBar,e),children:[ee("div",{className:be(s.mainMenu,{[s.electron]:p.value}),children:[ee(ti,{id:s.mainMenu,children:[ee(fe,{className:be(s.menuBarItem,s.languageLabel),name:"language-selector",children:[D("img",{className:s.languageIcon,src:mi}),D("img",{src:ui})]}),D(di,{className:s.menu,name:"language-selector",children:Array.from(a.entries()).map(([c,m])=>ee(B1,{className:s.menuItem,onClick:()=>C1(c),children:[D("img",{className:be(s.checkIcon,{[s.checked]:o.value===c}),src:ci}),m.languageName]},c))}),n.value&&n.value.map(({icon:c,label:m,Menu:M},f)=>ee(E1,{children:[ee(fe,{className:s.menuBarItem,name:f,children:[typeof c==="string"?D("img",{src:c}):c,m]},f),D(di,{className:s.menu,name:f,children:D(M,{itemClassName:s.menuItem})},f)]}))]}),l.value&&D(ni,{onClick:t}),i&&D(li,{placeholder:gi("gui.menubar.titlePlaceholder","Project title here"),defaultValue:gi("gui.project.name","BlockCode Project")})]}),D("div",{className:s.rightMenu,children:i&&D("div",{className:be(s.menuBarItem,s.hoverable),onClick:r,children:D("img",{className:s.homeIcon,src:pi})})})]})}import{classNames as Z1}from"@blockcode/utils";w(".mS9Hoa_pane-wrapper{flex-direction:column;display:flex;position:relative}.mS9Hoa_pane{display:none}.mS9Hoa_pane-header{background:var(--ui-white);padding:calc(var(--space)/2);text-align:center;color:var(--text-primary);cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--space)var(--space)0 0;flex:1;font-size:.85rem}.mS9Hoa_pane-left .mS9Hoa_pane-header{border-top-left-radius:0}.mS9Hoa_pane-right .mS9Hoa_pane-header{border-top-right-radius:0}.mS9Hoa_pane-content{border-left:1px solid var(--ui-black-transparent);border-right:1px solid var(--ui-black-transparent);min-height:5.5rem;display:none;position:relative}.mS9Hoa_pane-left .mS9Hoa_pane-content{border-left:0}.mS9Hoa_pane-right .mS9Hoa_pane-content{border-right:0}.mS9Hoa_pane:checked~.mS9Hoa_pane-content{display:flex}");var re={pane:"mS9Hoa_pane",paneHeader:"mS9Hoa_pane-header",paneRight:"mS9Hoa_pane-right",paneWrapper:"mS9Hoa_pane-wrapper",paneContent:"mS9Hoa_pane-content",paneLeft:"mS9Hoa_pane-left"};import{jsx as er,jsxs as Q1}from"preact/jsx-runtime";function hi({className:e,id:i,title:r,left:t,right:o,children:a}){return Q1("div",{className:Z1(re.paneWrapper,e,{[re.paneLeft]:t,[re.paneRight]:o}),children:[er("input",{id:`${i}-pane`,type:"checkbox",className:re.pane}),er("label",{className:re.paneHeader,for:`${i}-pane`,children:r}),er("div",{className:re.paneContent,children:a})]})}import{classNames as fi}from"@blockcode/utils";import{maybeTranslate as $1,Text as rr,Button as ir,Modal as F1}from"@blockcode/core";w(".ulcaFG_prompt-modal{width:360px}.ulcaFG_prompt-modal.ulcaFG_wide{width:600px}.ulcaFG_prompt-modal.ulcaFG_auto{width:auto;max-width:60vw}.ulcaFG_prompt-content{background:var(--ui-white);padding:1.5rem 2.25rem}.ulcaFG_label{margin:0 0 1.5rem;font-weight:500}.ulcaFG_label.ulcaFG_input-label{margin-bottom:.75rem}.ulcaFG_content{font-size:var(--standard-font-size);color:var(--text-primary);max-height:400px;margin-bottom:1.5rem;overflow:auto}.ulcaFG_content a{color:var(--theme-primary);border-bottom:1px solid;text-decoration-line:none}.ulcaFG_text-input{border:1px solid var(--ui-black-transparent);width:100%;height:3rem;color:var(--text-primary);border-radius:5px;margin-bottom:1.5rem;padding:0 1rem;font-size:.875rem}.ulcaFG_button-row{text-align:right;font-weight:bolder}.ulcaFG_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}.ulcaFG_ok-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white);margin-left:var(--space)}");var C={label:"ulcaFG_label",button:"ulcaFG_button",promptModal:"ulcaFG_prompt-modal",auto:"ulcaFG_auto",buttonRow:"ulcaFG_button-row",promptContent:"ulcaFG_prompt-content",wide:"ulcaFG_wide",okButton:"ulcaFG_ok-button",inputLabel:"ulcaFG_input-label",content:"ulcaFG_content",textInput:"ulcaFG_text-input"};import{useCallback as x1}from"preact/hooks";import{jsx as S,jsxs as bi,Fragment as W1}from"preact/jsx-runtime";function vi({title:e,label:i,content:r,redStyle:t,children:o,onClose:a,onSubmit:n}){let l=x1(()=>{n(),a()},[a,n]);return S(F1,{title:e,redStyle:t,className:fi(C.promptModal,{[C.wide]:r,[C.auto]:o}),onClose:a,children:bi("div",{className:C.promptContent,children:[i&&S("div",{className:C.label,children:i}),r?S("div",{className:C.content,dangerouslySetInnerHTML:{__html:$1(r)}}):S("div",{className:C.content,children:o}),S("div",{className:C.buttonRow,children:n?bi(W1,{children:[S(ir,{className:C.button,onClick:a,children:S(rr,{id:"gui.prompt.cancel",defaultMessage:"Cancel"})}),S(ir,{className:fi(C.button,C.okButton),onClick:l,children:S(rr,{id:"gui.prompt.ok",defaultMessage:"OK"})})]}):S(ir,{className:C.button,onClick:a,children:S(rr,{id:"gui.prompt.close",defaultMessage:"Close"})})})]})})}import{useCallback as ar,useEffect as L1}from"preact/hooks";import{useSignal as A1}from"@preact/signals";import{classNames as ki}from"@blockcode/utils";import{maybeTranslate as _i,Text as yi,BufferedInput as D1,Button as wi,Modal as I1}from"@blockcode/core";import{jsx as J,jsxs as tr,Fragment as S1}from"preact/jsx-runtime";function qi({title:e,inputItems:i,content:r,onClose:t,onSubmit:o}){let a=A1(Object.fromEntries(i.map(({name:c,defaultValue:m})=>[c,m]))),n=ar((c)=>{if(c.stopPropagation(),c.key==="Escape")t()},[t]),l=ar(()=>{o(a.value),t()},[t,o]),p=ar((c)=>(m)=>{a.value={...a.value,[c]:m}},[]);return L1(()=>{return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[]),J(I1,{title:e,className:C.promptModal,onClose:t,children:tr("div",{className:C.promptContent,children:[i.map(({name:c,label:m,placeholder:M,defaultValue:f},b)=>tr(S1,{children:[m&&J("div",{className:ki(C.label,C.inputLabel),children:m}),J(D1,{autoFocus:b===0,className:C.textInput,placeholder:_i(M),defaultValue:f,onSubmit:p(c)},b)]})),r&&J("div",{className:C.content,dangerouslySetInnerHTML:{__html:_i(r)}}),tr("div",{className:C.buttonRow,children:[J(wi,{className:C.button,onClick:t,children:J(yi,{id:"gui.prompt.cancel",defaultMessage:"Cancel"})}),J(wi,{className:ki(C.button,C.okButton),onClick:l,children:J(yi,{id:"gui.prompt.ok",defaultMessage:"OK"})})]})]})})}import{classNames as R1}from"@blockcode/utils";import{Text as or,Spinner as H1}from"@blockcode/core";w(".LkfKFW_splash{background:var(--theme-primary);z-index:var(--z-index-modal);flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0}.LkfKFW_spinner{margin-bottom:calc(4*var(--space))}.LkfKFW_error{background:var(--error-primary)}.LkfKFW_title{color:var(--ui-white);margin:var(--space);font-size:2rem}.LkfKFW_label{color:var(--ui-white);margin:var(--space)}");var ae={label:"LkfKFW_label",splash:"LkfKFW_splash",error:"LkfKFW_error",title:"LkfKFW_title",spinner:"LkfKFW_spinner"};import{jsx as te,jsxs as X1}from"preact/jsx-runtime";function Ci({error:e}){return X1("div",{className:R1(ae.splash,{[ae.error]:e}),children:[!e&&te(H1,{large:!0,level:"info",className:ae.spinner}),te("div",{className:ae.title,children:e?te(or,{id:"gui.splash.errorTitle",defaultMessage:"Error Occurred"}):te(or,{id:"gui.splash.loading",defaultMessage:"Loading project..."})}),te("div",{className:ae.label,children:e&&te(or,{id:"gui.splash.errorLabel",defaultMessage:"Please refresh the page and reopen it."})})]})}import{cloneElement as N1}from"preact";import{useMemo as V1}from"preact/hooks";import{classNames as J1,flatChildren as G1}from"@blockcode/utils";import{classNames as U1}from"@blockcode/utils";w(".M5TDuW_tabs-wrapper{white-space:nowrap;position:relative}.M5TDuW_tab-label{--line-height:calc(var(--tool-bar-height)*.8 - 2px);--margin-top:calc(var(--tool-bar-height)*.2 + 1px);font-weight:500;font-size:var(--standard-font-size);line-height:var(--line-height);border:1px solid var(--ui-black-transparent);background:var(--ui-tertiary);color:var(--text-transparent);margin-top:var(--margin-top);white-space:nowrap;border-radius:1rem 1rem 0 0;justify-content:center;padding:0 1.25rem;display:inline-flex;position:relative}.M5TDuW_tab-label.M5TDuW_disabled{filter:opacity(.5);cursor:default;pointer-events:none}.M5TDuW_tab-label:nth-of-type(n+2){margin-left:calc(-1*var(--space))}.M5TDuW_tab-label:last-of-type{margin-right:var(--space)}.M5TDuW_tab-label:not(.M5TDuW_disabled):hover{cursor:pointer;background:var(--ui-primary)}.M5TDuW_tab-label img{filter:grayscale();width:1.375rem}.M5TDuW_tab{display:none}.M5TDuW_tab:checked+.M5TDuW_tab-label{--scale:var(--space)/2;line-height:calc(var(--line-height) + var(--scale));margin-top:calc(var(--margin-top) - var(--scale));color:var(--theme-primary);background:var(--ui-white)}.M5TDuW_tab:checked+.M5TDuW_tab-label img{filter:none}.M5TDuW_tab-panel{top:var(--tool-bar-height);width:100%;height:calc(100% - var(--tool-bar-height));border:1px solid var(--ui-black-transparent);border-radius:0 var(--space)var(--space)var(--space);flex-direction:column;display:flex;position:absolute;bottom:0;transform:translateY(200%)}");var R={disabled:"M5TDuW_disabled",tabLabel:"M5TDuW_tab-label",tab:"M5TDuW_tab",tabsWrapper:"M5TDuW_tabs-wrapper",tabPanel:"M5TDuW_tab-panel"};import{jsx as Mi,jsxs as z1,Fragment as P1}from"preact/jsx-runtime";function Fe({id:e,className:i,disabled:r,checked:t,children:o,name:a,onSelect:n}){return z1(P1,{children:[Mi("input",{disabled:r,checked:t,className:R.tab,id:`${e}-tab-${a}`,name:`${e}-tab`,type:"radio",value:a}),Mi("label",{className:U1(R.tabLabel,i,{[R.disabled]:r}),for:`${e}-tab-${a}`,onClick:n,children:o})]})}import{classNames as O1}from"@blockcode/utils";import{jsx as T1}from"preact/jsx-runtime";function xe({id:e,className:i,name:r,children:t}){return T1("div",{className:O1(R.tabPanel,i),id:`${e}-panel-${r}`,children:t})}import{jsxs as Y1}from"preact/jsx-runtime";function Bi({id:e,className:i,children:r}){let t=V1(()=>G1(r).filter((o)=>o).map((o)=>N1(o,{id:e})),[e,r]);return V({[`.${R.tab}:checked+.${R.tabLabel}`]:{zIndex:`${t.length+1}`}}),Y1("div",{className:J1(R.tabsWrapper,i),children:[t.filter((o)=>o.type===Fe).map((o,a,n)=>{return V({[`.${R.tabLabel}:nth-of-type(${a+1})`]:{zIndex:`${n.length-a}`}}),o}),t.filter((o)=>o.type===xe).map((o)=>{let a=`${e}-tab-${o.props.name}`,n=`${e}-panel-${o.props.name}`;return V({[`#${a}:checked~#${n}`]:{transform:"none"}}),o})]})}import{useRef as it,useEffect as $i,useCallback as lr}from"preact/hooks";import{batch as at,useComputed as tt,useSignal as cr}from"@preact/signals";import{classNames as ot}from"@blockcode/utils";import{useAppContext as nt,Text as oe,Button as lt}from"@blockcode/core";w("._4EOxpW_tutorial-box-wrapper{pointer-events:auto;z-index:var(--z-index-card);min-width:468px;position:absolute;top:55%;left:50%;transform:translate(-50%)}._4EOxpW_tutorial-card{border:1px solid var(--ui-tertiary);border-radius:calc(var(--space)*1.8);cursor:move;box-shadow:0px 5px 25px 5px var(--ui-black-transparent);z-index:20;flex-direction:column;align-items:center;display:flex;overflow:hidden}._4EOxpW_card-header{background:var(--blocks-primary);width:100%;font-size:var(--small-font-size);flex-direction:row;justify-content:space-between;align-items:center;font-weight:700;display:flex}._4EOxpW_header-button-group{flex-direction:row;display:flex}._4EOxpW_header-button{cursor:pointer;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding:.75rem;display:flex}._4EOxpW_header-button:hover{background:var(--ui-black-transparent)}._4EOxpW_button-icon{border:0;height:1.25rem}._4EOxpW_step-list{flex-direction:row;justify-content:center;align-items:center;display:flex}._4EOxpW_step-pip{cursor:pointer;background:var(--ui-white-transparent);border-radius:100%;width:.5rem;height:.5rem;margin:0 .25rem}._4EOxpW_step-pip._4EOxpW_actived{background:var(--ui-white);-webkit-box-shadow:0px 0px 0px 2px var(--ui-black-transparent);box-shadow:0px 0px 0px 2px var(--ui-black-transparent)}._4EOxpW_card-body{background:var(--ui-white);border-top:1px solid var(--blocks-tertiary);text-align:center;width:100%;min-height:256px;color:var(--text-primary);flex-direction:column;justify-content:center;align-items:center;display:flex;position:relative}._4EOxpW_title{text-align:center;margin:.9rem;font-size:.9rem;font-weight:700}._4EOxpW_image{object-fit:contain;background:var(--ui-secondary);border-radius:var(--space);max-width:450px;max-height:200px;margin:0 var(--space)var(--space);overflow:hidden}._4EOxpW_text{max-width:450px;height:200px;margin:0 var(--space)2.7rem var(--space);flex-direction:column;justify-content:center;font-size:1rem;display:flex}._4EOxpW_image+._4EOxpW_text{height:auto}._4EOxpW_more{padding:0 .9rem var(--space);flex-direction:row;justify-content:space-around;display:flex}._4EOxpW_more-item{margin:0 var(--space)var(--space);cursor:pointer;border-radius:var(--space);border:1px solid #00000026;flex-direction:column;display:flex;overflow:hidden}._4EOxpW_more-item-image{object-fit:cover;width:200px;height:100px}._4EOxpW_more-item-name{color:var(--theme-primary);margin:calc(var(--space)*1.2)0px;text-align:center;text-align:center;max-width:200px;font-size:.85rem;font-weight:700}._4EOxpW_see-more-button{background:var(--theme-primary);color:var(--ui-white);border:0;margin-bottom:2.7rem}._4EOxpW_left-page,._4EOxpW_right-page{background:var(--ui-white);border:1px solid var(--ui-black-transparent);height:90%;width:calc(var(--space)*1.8);opacity:.9;z-index:10;position:absolute;top:5%;overflow:hidden}._4EOxpW_left-page:after,._4EOxpW_right-page:after{content:\"\";background:var(--blocks-primary);width:100%;height:2.5rem;position:absolute;top:0;left:0}._4EOxpW_left-button,._4EOxpW_right-button{user-select:none;cursor:pointer;background:var(--blocks-primary);box-shadow:0 0 0 4px var(--blocks-transparent);z-index:30;border-radius:100%;justify-content:center;align-items:center;width:44px;height:44px;margin-top:-15px;transition:all .25s;display:flex;position:absolute;top:50%}._4EOxpW_left-button:hover,._4EOxpW_right-button:hover{box-shadow:0 0 0 6px var(--blocks-transparent);transform:scale(1.125)}._4EOxpW_left-button img,._4EOxpW_right-button img{width:1.75rem}._4EOxpW_left-page{border-top-left-radius:calc(var(--space)*1.8);border-bottom-left-radius:calc(var(--space)*1.8);border-right:0;left:0;transform:translate(-100%)}._4EOxpW_left-button{left:-27px}._4EOxpW_right-page{border-top-right-radius:calc(var(--space)*1.8);border-bottom-right-radius:calc(var(--space)*1.8);border-left:0;right:0;transform:translate(100%)}._4EOxpW_right-button{right:-27px}._4EOxpW_right-button img{transform:rotateY(180deg)}");var v={leftPage:"_4EOxpW_left-page",image:"_4EOxpW_image",moreItemName:"_4EOxpW_more-item-name",cardHeader:"_4EOxpW_card-header",cardBody:"_4EOxpW_card-body",rightButton:"_4EOxpW_right-button",seeMoreButton:"_4EOxpW_see-more-button",moreItemImage:"_4EOxpW_more-item-image",headerButton:"_4EOxpW_header-button",more:"_4EOxpW_more",tutorialCard:"_4EOxpW_tutorial-card",stepList:"_4EOxpW_step-list",stepPip:"_4EOxpW_step-pip",actived:"_4EOxpW_actived",buttonIcon:"_4EOxpW_button-icon",title:"_4EOxpW_title",tutorialBoxWrapper:"_4EOxpW_tutorial-box-wrapper",rightPage:"_4EOxpW_right-page",leftButton:"_4EOxpW_left-button",headerButtonGroup:"_4EOxpW_header-button-group",text:"_4EOxpW_text",moreItem:"_4EOxpW_more-item"};var Ei="./assets/icon-shrink-8vdqegra.svg";var Zi="./assets/icon-expand-67bgdn61.svg";var Qi="./assets/icon-close-dy7x7fdb.svg";var nr="./assets/icon-arrow-ddhj68kd.svg";import{jsx as _,jsxs as L,Fragment as ve}from"preact/jsx-runtime";function Fi({tutorialId:e,onOpenTutorial:i,onBack:r,onClose:t}){let o=it(),{tutorials:a}=nt(),n=cr(null),l=cr(-1),p=cr(!0),c=tt(()=>n.value?.[l.value]),m=lr(()=>{l.value=(l.value+1)%n.value.length},[]),M=lr(()=>{l.value=(l.value-1)%n.value.length},[]);return $i(()=>{let f=a.value.lessons[e];if(!f){t();return}at(()=>{n.value=[].concat(f.pages,f.next?{next:f.next.filter((b)=>a.value.lessons[b]).map((b)=>({id:b,title:a.value.lessons[b].title,image:a.value.lessons[b].image}))}:[]),l.value=0})},[e]),$i(()=>{if(o.current){let f=o.current.parentElement,b,u,g=(A)=>{let we=b-A.clientX,qe=u-A.clientY;b=A.clientX,u=A.clientY,f.style.top=`${f.offsetTop-qe}px`,f.style.left=`${f.offsetLeft-we}px`},y=()=>{document.removeEventListener("pointerup",y),document.removeEventListener("pointermove",g)};o.current.addEventListener("pointerdown",(A)=>{b=A.clientX,u=A.clientY,document.addEventListener("pointerup",y),document.addEventListener("pointermove",g)})}},[o]),L("div",{className:v.tutorialBoxWrapper,children:[L("div",{ref:o,className:v.tutorialCard,children:[L("div",{className:v.cardHeader,children:[L("div",{className:v.headerButton,onClick:r,children:[_("img",{className:v.buttonIcon,src:$e}),_(oe,{id:"gui.menubar.tutorials",defaultMessage:"Tutorials"})]}),_("div",{className:v.stepList,children:n.value?.map((f,b)=>_("div",{className:ot(v.stepPip,{[v.actived]:b===l.value}),onClick:()=>l.value=b},b))}),L("div",{className:v.headerButtonGroup,children:[_("div",{className:v.headerButton,onClick:lr(()=>p.value=!p.value,[]),children:p.value?L(ve,{children:[_("img",{className:v.buttonIcon,src:Ei}),_(oe,{id:"gui.tutorials.shrink",defaultMessage:"Shrink"})]}):L(ve,{children:[_("img",{className:v.buttonIcon,src:Zi}),_(oe,{id:"gui.tutorials.expand",defaultMessage:"Expand"})]})}),L("div",{className:v.headerButton,onClick:t,children:[_("img",{className:v.buttonIcon,src:Qi}),_(oe,{id:"gui.tutorials.close",defaultMessage:"Close"})]})]})]}),p.value&&c.value&&L("div",{className:v.cardBody,children:[(c.value.title||c.value.next)&&_("div",{className:v.title,children:c.value.title||_(oe,{id:"gui.tutorials.moreTry",defaultMessage:"More things to try!"})}),c.value.image&&_("img",{className:v.image,src:c.value.image}),c.value.text&&_("div",{className:v.text,children:c.value.text}),c.value.next&&L(ve,{children:[_("div",{className:v.more,children:c.value.next.map((f)=>L("div",{className:v.moreItem,onClick:()=>i(f.id),children:[_("img",{className:v.moreItemImage,src:f.image}),_("div",{className:v.moreItemName,children:f.title})]},f.id))}),_(lt,{className:v.seeMoreButton,onClick:r,children:_(oe,{id:"gui.tutorials.seeMore",defaultMessage:"See more"})})]})]})]}),p.value&&l.value>0&&L(ve,{children:[_("div",{className:v.leftPage}),_("div",{className:v.leftButton,onClick:M,children:_("img",{src:nr})})]}),p.value&&n.value&&l.value<n.value.length-1&&L(ve,{children:[_("div",{className:v.rightPage}),_("div",{className:v.rightButton,onClick:m,children:_("img",{src:nr})})]})]})}import{useComputed as ct}from"@preact/signals";import{useAppContext as mt,Text as ut,Library as pt}from"@blockcode/core";import{jsx as Wi}from"preact/jsx-runtime";var gt=Wi(ut,{id:"gui.library.tutorials.tutorial",defaultMessage:"Choose a tutorial"});function xi({onOpenTutorial:e,onClose:i}){let{tutorials:r}=mt(),t=ct(()=>{return Object.entries(r.value.lessons).map(([a,n])=>({title:n.title,image:n.image,tags:n.tags,onSelect:()=>e(a)}))});return Wi(pt,{featured:!0,items:t.value,title:r.value.title||gt,filterable:r.value.tags,tags:r.value.tags,onClose:i})}import{useCallback as ke,useEffect as dt}from"preact/hooks";import{useComputed as st,useSignal as ht}from"@preact/signals";import{getProjectsThumbs as ft,getProject as bt,cloneProject as vt,renameProject as kt,delProject as _t}from"@blockcode/utils";import{useProjectContext as yt,closeUserStorage as Ai,maybeTranslate as mr,openPromptModal as Di}from"@blockcode/core";import{Text as H,Library as wt}from"@blockcode/core";w(".mLGZyG_delete-menu-item:hover{background:var(--error-primary)}");var Li={deleteMenuItem:"mLGZyG_delete-menu-item"};import{jsx as I}from"preact/jsx-runtime";var qt=30;function Ii({onOpenProject:e}){let{meta:i}=yt(),r=ht([]),t=st(()=>r.value.length),o=ke((c,m)=>{Di({title:I(H,{id:"gui.library.projects.rename",defaultMessage:"rename"}),inputItems:[{key:"name",label:I(H,{id:"gui.menubar.titlePlaceholder",defaultMessage:"Project title here"}),defaultValue:mr(m??I(H,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}],onSubmit:async(M)=>{if(M?.name)await kt(c,M.name),p()}})},[]),a=ke(async(c)=>{await vt(c),p()},[]),n=ke((c,m)=>{Di({title:I(H,{id:"gui.library.projects.delete",defaultMessage:"delete"}),label:I(H,{id:"gui.library.projects.deleteConfirm",defaultMessage:'Delect "{name}" project?',name:mr(m||I(H,{id:"gui.project.shortname",defaultMessage:"Untitled"}))}),onSubmit:async()=>{await _t(c),p()}})},[]),l=ke((c)=>async()=>{let m=await bt(c);e(m),Ai()},[]),p=ke(async()=>{let c=await ft();if(i.value?.editor)c=c.filter((m)=>m.meta.editor===i.value.editor);c=c.sort((m,M)=>M.modifiedDate-m.modifiedDate),r.value=c.map((m)=>({name:mr(m.name??I(H,{id:"gui.project.shortname",defaultMessage:"Untitled"})),image:m.thumb,onSelect:l(m.key),contextMenu:[[{label:I(H,{id:"gui.library.projects.rename",defaultMessage:"rename"}),onClick:()=>o(m.key,m.name)},{label:I(H,{id:"gui.library.projects.duplicate",defaultMessage:"duplicate"}),onClick:()=>a(m.key)}],[{label:I(H,{id:"gui.library.projects.delete",defaultMessage:"delete"}),className:Li.deleteMenuItem,onClick:()=>n(m.key,m.name)}]]}))},[l,o,n]);return dt(()=>p(),[p]),I(wt,{items:r.value,filterable:t.value>qt,emptyMessage:I(H,{id:"gui.library.projects.empty",defaultMessage:"No project!"}),onClose:Ai})}w("._3HqakW_gui-wrapper{height:100%}._3HqakW_alerts-container{width:100%;z-index:var(--z-index-alerts);margin-top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;justify-content:center;display:flex;position:absolute}._3HqakW_menu-bar-position{z-index:var(--z-index-menu-bar);position:relative}._3HqakW_body-wrapper{height:calc(100% - var(--menu-bar-height));background:var(--ui-primary)}._3HqakW_body-wrapper *{box-sizing:border-box}._3HqakW_workspace-wrapper{flex-direction:row;height:100%;display:flex;overflow-y:hidden}._3HqakW_sidebar-wrapper{margin:0 var(--space);display:flex;position:relative}._3HqakW_editor-wrapper{flex-direction:column;flex-grow:1;flex-shrink:0;display:flex;position:relative}._3HqakW_tabs-wrapper{flex-grow:1;position:relative}._3HqakW_tab-panel-no-left{border-bottom-left-radius:0}._3HqakW_tab-panel-no-right{border-top-right-radius:0;border-bottom-right-radius:0}._3HqakW_tab-panel-no-bottom{border-bottom-right-radius:0;border-bottom-left-radius:0}._3HqakW_pane-wrapper{margin:var(--space)0 0 0;display:flex;position:relative}");var F={tabPanelNoRight:"_3HqakW_tab-panel-no-right",alertsContainer:"_3HqakW_alerts-container",menuBarPosition:"_3HqakW_menu-bar-position",sidebarWrapper:"_3HqakW_sidebar-wrapper",workspaceWrapper:"_3HqakW_workspace-wrapper",tabsWrapper:"_3HqakW_tabs-wrapper",tabPanelNoBottom:"_3HqakW_tab-panel-no-bottom",guiWrapper:"_3HqakW_gui-wrapper",bodyWrapper:"_3HqakW_body-wrapper",tabPanelNoLeft:"_3HqakW_tab-panel-no-left",editorWrapper:"_3HqakW_editor-wrapper",paneWrapper:"_3HqakW_pane-wrapper"};import{jsx as k,jsxs as _e,Fragment as Hi}from"preact/jsx-runtime";var le=Zt({Bluetooth:null,SerialPort:null}),Ae=()=>ce(()=>{Rt(),It()}),ur=(e)=>{ce(()=>{Xi(),St(Object.assign(JSON.parse(JSON.stringify(e)),{fileId:e.fileId??e.files?.[0]?.id})),Ui(0)})};function Pi(){let[e]=Ct(),{language:i}=Ft(),r=$t();Si(()=>{document.title=Wt("gui.name","BlockCode Playgrounds")},[i.value]);let t,o;r.docks.value?.forEach((d)=>{if(d.expand==="left")t=d.Content;else o=d.Content});let a=r.panes.value?.[0].Content,n=Et({[F.tabPanelNoLeft]:!t,[F.tabPanelNoRight]:!o,[F.tabPanelNoBottom]:!a}),l=We(null);Si(()=>{if(window.electron)window.electron.serial.onScan((d)=>{l.value=d&&{devices:d,type:le.SerialPort}}),window.electron.bluetooth.onScan((d)=>{l.value=d&&{devices:d,type:le.Bluetooth}})},[]);let p=()=>{},c=O(()=>{if(window.electron){if(l.value.type===le.SerialPort)window.electron.serial.cancel();if(l.value.type===le.Bluetooth)window.electron.bluetooth.cancel();l.value=null}},[]),m=O((d)=>{if(window.electron){if(l.value.type===le.SerialPort)window.electron.serial.connect(d);if(l.value.type===le.Bluetooth)window.electron.bluetooth.connect(d)}},[]),M=We({});Bt(async()=>{let d=await de();d=d.map((B)=>[B.id,{name:B.name,version:B.version}]),M.value=Object.fromEntries(d)});let f=We(!1),b=We(null),u=O(()=>{ce(()=>{b.value=null,f.value=!0})},[]),g=O((d)=>{let B=r.tutorials.value.lessons[d];ce(async()=>{if(B.project){Ht("importing",{id:d});let x=await Qt(B.project);Xt(d),ur(x)}b.value=d,f.value=!1})},[]),{meta:y,key:A,modified:we}=xt(),qe=Mt(()=>!y.value),zi=O(()=>{if(we.value)Le({title:k(ne,{id:"gui.library.projects.notSaved",defaultMessage:"Not saved"}),label:k(ne,{id:"gui.library.projects.close",defaultMessage:"Close current project?"}),onSubmit:Ae});else Ae()},[]),De=O((d,B)=>{if(B!==d.meta.editor){Le({label:k(ne,{id:"gui.library.projects.errorEditor",defaultMessage:'This project is not currently editor creation, please switch to "{editor}" and open it.',editor:Lt(M.value[d.meta.editor]?.name)}),redStyle:!0});return}if(A.value===d.key)return;if(we.value)Le({title:k(ne,{id:"gui.library.projects.notSaved",defaultMessage:"Not saved"}),label:k(ne,{id:"gui.library.projects.replace",defaultMessage:"Replace contents of the current project?"}),onSubmit:()=>ur(d)});else ur(d)},[]),gr=O(async(d,B)=>{ce(()=>{Ae(),Xi()});let x=d,sr=window.electron?.getLocalEditors();if(sr?.[d]?.main)x=sr[d].main;let K;try{K=(await import(x)).default}catch(Nt){Le({label:k(ne,{id:"gui.library.projects.notFoundEditor",defaultMessage:'Not Found the "{editor}" Editor.',editor:d}),redStyle:!0}),At();return}let Ie={editor:d,version:M.value[d]?.version};if(!B)B=JSON.parse(JSON.stringify(await K.onNew()));if(!B.meta)B.meta=Ie;if(!B.meta.editor)B.meta.editor=d,B.meta.version=Ie.version;let Oi={menuItems:Fr(K,Ie,De),tabs:K.tabs,docks:K.docks,panes:K.panes,tutorials:window.electron?.getLocalTutorials(d,i.value)??K.tutorials};ce(()=>{Dt(Oi),De(B,d)})},[]),dr=O((d)=>{if(y.value?.editor!==d.meta.editor){Ae(),gr(d.meta.editor,d);return}De(d,y.value.editor)},[]);return _e(Hi,{children:[(r.splashVisible.value||e)&&k(Ci,{error:e}),k(Dr,{items:r.alerts.value}),k(si,{className:F.menuBarPosition,showHomeButton:!qe.value,onRequestHome:zi,onOpenTutorialLibrary:u}),k("div",{className:F.bodyWrapper,children:_e("div",{className:F.workspaceWrapper,children:[t&&k("div",{className:F.sidebarWrapper,children:k(t,{})}),_e("div",{className:F.editorWrapper,children:[k(Bi,{id:F.tabsWrapper,className:F.tabsWrapper,children:r.tabs.value?.map(({Content:d,...B},x)=>_e(Hi,{children:[_e(Fe,{name:x,disabled:B.disabled,checked:x===r.tabIndex.value,onSelect:()=>Ui(x),children:[k("img",{src:B.icon}),B.label]},x),k(xe,{name:x,className:n,children:(x===0||r.tabIndex.value===x)&&d&&k(d,{})},x)]}))}),a&&k(hi,{id:F.paneWrapper,className:F.paneWrapper,title:pane.label,right:!o,left:!t,children:k(a,{})})]}),o&&k("div",{className:F.sidebarWrapper,children:k(o,{})})]})}),l.value&&k(Rr,{title:y.value.deviceName,icon:y.value.deviceIcon,devices:l.value.devices,onClose:c,onConnect:m}),b.value&&k(Fi,{tutorialId:b.value,onOpenTutorial:g,onBack:u,onClose:()=>b.value=null}),f.value&&k(xi,{onOpenTutorial:g,onClose:O(()=>f.value=!1,[])}),qe.value&&k(ei,{onOpenEditor:gr,onOpenProject:dr}),r.userStorageVisible.value&&k(Ii,{onOpenProject:dr}),r.prompt.value&&(r.prompt.value.inputItems?k(qi,{title:r.prompt.value.title,content:r.prompt.value.content,inputItems:r.prompt.value.inputItems,onClose:Ri,onSubmit:r.prompt.value.onSubmit}):k(vi,{title:r.prompt.value.title,label:r.prompt.value.label,content:r.prompt.value.content,redStyle:r.prompt.value.redStyle,onClose:Ri,onSubmit:r.prompt.value.onSubmit,children:r.prompt.value.body}))]})}import{addAlertConfig as G,Text as Y,Spinner as pr}from"@blockcode/core";import{jsx as X}from"preact/jsx-runtime";G("importing",{icon:X(pr,{level:"success"}),message:X(Y,{id:"gui.alert.importing",defaultMessage:"Importing..."})});G("downloading",{icon:X(pr,{level:"success"}),message:X(Y,{id:"gui.alert.downloading",defaultMessage:"Downloading..."})});G("downloadCompleted",{icon:null,message:X(Y,{id:"gui.alert.downloadCompleted",defaultMessage:"Download completed."})});G("connectionError",{mode:"warn",message:X(Y,{id:"gui.alert.connectionError",defaultMessage:"Connection error."})});G("connectionCancel",{mode:"warn",message:X(Y,{id:"gui.alert.connectionCancel",defaultMessage:"Connection cancel."})});G("compiling",{icon:X(pr,{level:"success"}),message:X(Y,{id:"gui.alert.compiling",defaultMessage:"Compiling..."})});G("compileCompleted",{icon:null,message:X(Y,{id:"gui.alert.compileSuccess",defaultMessage:"Compilation completed."})});G("compileError",{mode:"warn",message:X(Y,{id:"gui.alert.compileError",defaultMessage:"Compilation error."})});import{jsx as ye}from"preact/jsx-runtime";function Tt(){return ye(Pt,{children:ye(zt,{children:ye(Ot,{children:ye(Pi,{})})})})}Ut(ye(Tt,{}),document.getElementById("root"));
