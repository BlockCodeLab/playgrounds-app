import{addLocalesMessages as M,Text as c}from"@blockcode/core";import{Text as l}from"@blockcode/core";import{jsx as f}from"preact/jsx-runtime";var u=(s)=>s.editor==="@blockcode/gui-iotbit",d=(s)=>s.editor==="@blockcode/gui-arduino",o=(s)=>["ArduinoNano","BLENANO"].includes(s.boardType),v=(s)=>[{id:"rawValue",text:f(l,{id:"blocks.ainput.rawValue",defaultMessage:"pin [PIN] raw value"}),output:"number",inputs:{PIN:d(s)?{menu:o(s)?"NANO_ANALOG_PINS":"UNO_ANALOG_PINS"}:u(s)?{menu:"IOT_ADC_PINS"}:{type:"positive_integer",defaultValue:1}},ino(g){let r=g.getFieldValue("PIN");return this.definitions_[`setup_pin_${r}`]=`pinMode(${r}, INPUT);`,[`analogRead(${r})`,this.ORDER_FUNCTION_CALL]},mpy(g){let r=u(s)?g.getFieldValue("PIN"):this.valueToCode(g,"PIN",this.ORDER_NONE),C=`pin_${r}`;return this.definitions_.import_pin="from machine import Pin",this.definitions_.import_adc="from machine import ADC",this.definitions_[C]=`${C} = ADC(Pin(${r}))`,this.definitions_[`${C}_atten`]=`${C}.atten(ADC.ATTN_11DB)`,this.definitions_[`${C}_width`]=`${C}.width(ADC.WIDTH_10BIT)`,[`${C}.read()`,this.ORDER_FUNCTION_CALL]}},{id:"percentage",text:f(l,{id:"blocks.ainput.percentage",defaultMessage:"pin [PIN] percentage"}),output:"number",inputs:{PIN:d(s)?{menu:o(s)?"NANO_ANALOG_PINS":"UNO_ANALOG_PINS"}:u(s)?{menu:"IOT_ADC_PINS"}:{type:"positive_integer",defaultValue:1}},ino(g){let r=g.getFieldValue("PIN");return this.definitions_[`setup_pin_${r}`]=`pinMode(${r}, INPUT);`,[`round((analogRead(${r}) / 1023.0f) * 100)`,this.ORDER_NONE]},mpy(g){let r=u(s)?g.getFieldValue("PIN"):this.valueToCode(g,"PIN",this.ORDER_NONE),C=`pin_${r}`;return this.definitions_.import_pin="from machine import Pin",this.definitions_.import_adc="from machine import ADC",this.definitions_[C]=`${C} = ADC(Pin(${r}))`,this.definitions_[`${C}_atten`]=`${C}.atten(ADC.ATTN_11DB)`,this.definitions_[`${C}_width`]=`${C}.width(ADC.WIDTH_10BIT)`,[`round((${C}.read() / 1023) * 100)`,this.ORDER_FUNCTION_CALL]}},{id:"joystick",text:f(l,{id:"blocks.ainput.joystick",defaultMessage:"pin [PIN] joystick"}),output:"number",inputs:{PIN:d(s)?{menu:o(s)?"NANO_ANALOG_PINS":"UNO_ANALOG_PINS"}:u(s)?{menu:"IOT_ADC_PINS"}:{type:"positive_integer",defaultValue:1}},ino(g){let r=g.getFieldValue("PIN");return this.definitions_[`setup_pin_${r}`]=`pinMode(${r}, INPUT);`,[`round(((analogRead(${r}) - 511) / 511.0f) * 100)`,this.ORDER_FUNCTION_CALL]},mpy(g){let r=u(s)?g.getFieldValue("PIN"):this.valueToCode(g,"PIN",this.ORDER_NONE),C=`pin_${r}`;return this.definitions_.import_pin="from machine import Pin",this.definitions_.import_adc="from machine import ADC",this.definitions_[C]=`${C} = ADC(Pin(${r}))`,this.definitions_[`${C}_atten`]=`${C}.atten(ADC.ATTN_11DB)`,this.definitions_[`${C}_width`]=`${C}.width(ADC.WIDTH_10BIT)`,[`round(((${C}.read() - 511) / 511) * 100)`,this.ORDER_FUNCTION_CALL]}},{id:"voltage",text:f(l,{id:"blocks.ainput.voltage",defaultMessage:"pin [PIN] voltage"}),output:"number",inputs:{PIN:d(s)?{menu:o(s)?"NANO_ANALOG_PINS":"UNO_ANALOG_PINS"}:u(s)?{menu:"IOT_ADC_PINS"}:{type:"positive_integer",defaultValue:1}},ino(g){let r=g.getFieldValue("PIN");return this.definitions_[`setup_pin_${r}`]=`pinMode(${r}, INPUT);`,[`round((analogRead(${r}) / 1023.0f) * 500) / 100.0f`,this.ORDER_NONE]},mpy(g){let r=u(s)?g.getFieldValue("PIN"):this.valueToCode(g,"PIN",this.ORDER_NONE),C=`pin_${r}`;return this.definitions_.import_pin="from machine import Pin",this.definitions_.import_adc="from machine import ADC",this.definitions_[C]=`${C} = ADC(Pin(${r}))`,this.definitions_[`${C}_atten`]=`${C}.atten(ADC.ATTN_11DB)`,[`round(${C}.read_uv() / 1_000_000, 2)`,this.ORDER_FUNCTION_CALL]}}],w={UNO_ANALOG_PINS:{items:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]]},NANO_ANALOG_PINS:{items:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]]},IOT_ADC_PINS:{items:[["P0","33"],["P1","32"],["P2","35"],["P3","34"],["P4","39"],["P5","0"],["P8","26"],["P9","25"],["P10","36"],["P11","2"],["P23","27"],["P24","14"],["P25","12"],["P26","13"],["P27","15"],["P28","4"]]}};var y={en:{"blocks.ainput.name":"Analog Input","blocks.ainput.rawValue":"pin [PIN] raw value","blocks.ainput.percentage":"pin [PIN] percentage","blocks.ainput.joystick":"pin [PIN] joystick","blocks.ainput.voltage":"pin [PIN] voltage"},"zh-Hans":{"blocks.ainput.name":"模拟输入","blocks.ainput.rawValue":"引脚[PIN]模拟值","blocks.ainput.percentage":"引脚[PIN]百分比","blocks.ainput.joystick":"引脚[PIN]摇杆值","blocks.ainput.voltage":"引脚[PIN]电压"},"zh-Hant":{"blocks.ainput.name":"模擬輸入","blocks.ainput.rawValue":"引腳[PIN]模擬值","blocks.ainput.percentage":"引腳[PIN]百分比","blocks.ainput.joystick":"引腳[PIN]搖杆值","blocks.ainput.voltage":"引腳[PIN]電壓"}};var h="./assets/icon-fjbqh9tb.svg";import{jsx as G}from"preact/jsx-runtime";M(y);var D={icon:h,name:G(c,{id:"blocks.ainput.name",defaultMessage:"Analog Input"}),blocks:v,menus:w};export{D as default};
