var lJ0=Object.defineProperty;var UQ=(J,$)=>{for(var X in $)lJ0(J,X,{get:$[X],enumerable:!0,configurable:!0,set:(Y)=>$[X]=()=>Y})};var w=(J,$)=>()=>(J&&($=J(J=0)),$);function K0(J){let $=globalThis.document,X=$.createElement("style");X.appendChild($.createTextNode(J)),$.head.append(X)}function c9(J,$=0){return J[J.length-(1+$)]}function ph(J){if(J.length===0)throw Error("Invalid tail call");return[J.slice(0,J.length-1),J[J.length-1]]}function B6(J,$,X=(Y,Z)=>Y===Z){if(J===$)return!0;if(!J||!$)return!1;if(J.length!==$.length)return!1;for(let Y=0,Z=J.length;Y<Z;Y++)if(!X(J[Y],$[Y]))return!1;return!0}function mh(J,$){let X=J.length-1;if($<X)J[$]=J[X];J.pop()}function YK(J,$,X){return sJ0(J.length,(Y)=>X(J[Y],$))}function sJ0(J,$){let X=0,Y=J-1;while(X<=Y){let Z=(X+Y)/2|0,Q=$(Z);if(Q<0)X=Z+1;else if(Q>0)Y=Z-1;else return Z}return-(X+1)}function XK(J,$,X){if(J=J|0,J>=$.length)throw TypeError("invalid index");let Y=$[Math.floor($.length*Math.random())],Z=[],Q=[],G=[];for(let q of $){let U=X(q,Y);if(U<0)Z.push(q);else if(U>0)Q.push(q);else G.push(q)}if(J<Z.length)return XK(J,Z,X);else if(J<Z.length+G.length)return G[0];else return XK(J-(Z.length+G.length),Q,X)}function PN(J,$){let X=[],Y=void 0;for(let Z of J.slice(0).sort($))if(!Y||$(Y[0],Z)!==0)Y=[Z],X.push(Y);else Y.push(Z);return X}function*kq(J,$){let X,Y;for(let Z of J){if(Y!==void 0&&$(Y,Z))X.push(Z);else{if(X)yield X;X=[Z]}Y=Z}if(X)yield X}function ZK(J,$){for(let X=0;X<=J.length;X++)$(X===0?void 0:J[X-1],X===J.length?void 0:J[X])}function uh(J,$){for(let X=0;X<J.length;X++)$(X===0?void 0:J[X-1],J[X],X+1===J.length?void 0:J[X+1])}function QK(J){return J.filter(($)=>!!$)}function DN(J){let $=0;for(let X=0;X<J.length;X++)if(J[X])J[$]=J[X],$+=1;J.length=$}function GK(J){return!Array.isArray(J)||J.length===0}function K4(J){return Array.isArray(J)&&J.length>0}function ZJ(J,$=(X)=>X){let X=new Set;return J.filter((Y)=>{let Z=$(Y);if(X.has(Z))return!1;return X.add(Z),!0})}function Eq(J,$){return J.length>0?J[0]:$}function r5(J,$){let X=typeof $==="number"?J:0;if(typeof $==="number")X=J;else X=0,$=J;let Y=[];if(X<=$)for(let Z=X;Z<$;Z++)Y.push(Z);else for(let Z=X;Z>$;Z--)Y.push(Z);return Y}function zQ(J,$,X){let Y=J.slice(0,$),Z=J.slice($);return Y.concat(X,Z)}function qK(J,$){let X=J.indexOf($);if(X>-1)J.splice(X,1),J.unshift($)}function dH(J,$){let X=J.indexOf($);if(X>-1)J.splice(X,1),J.push($)}function sH(J,$){for(let X of $)J.push(X)}function ch(J){return Array.isArray(J)?J:[J]}function aJ0(J,$,X){let Y=lh(J,$),Z=J.length,Q=X.length;J.length=Z+Q;for(let G=Z-1;G>=Y;G--)J[G+Q]=J[G];for(let G=0;G<Q;G++)J[G+Y]=X[G]}function RN(J,$,X,Y){let Z=lh(J,$),Q=J.splice(Z,X);if(Q===void 0)Q=[];return aJ0(J,Z,Y),Q}function lh(J,$){return $<0?Math.max($+J.length,0):Math.min($,J.length)}function B9(J,$){return(X,Y)=>$(J(X),J(Y))}function dh(...J){return($,X)=>{for(let Y of J){let Z=Y($,X);if(!lH.isNeitherLessOrGreaterThan(Z))return Z}return lH.neitherLessOrGreaterThan}}function ah(J){return($,X)=>-J($,X)}class I7{constructor(J){this.items=J,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(J){let $=this.firstIdx;while($<this.items.length&&J(this.items[$]))$++;let X=$===this.firstIdx?null:this.items.slice(this.firstIdx,$);return this.firstIdx=$,X}takeFromEndWhile(J){let $=this.lastIdx;while($>=0&&J(this.items[$]))$--;let X=$===this.lastIdx?null:this.items.slice($+1,this.lastIdx+1);return this.lastIdx=$,X}peek(){if(this.length===0)return;return this.items[this.firstIdx]}dequeue(){let J=this.items[this.firstIdx];return this.firstIdx++,J}takeCount(J){let $=this.items.slice(this.firstIdx,this.firstIdx+J);return this.firstIdx+=J,$}}class YJ{constructor(J){this.iterate=J}toArray(){let J=[];return this.iterate(($)=>{return J.push($),!0}),J}filter(J){return new YJ(($)=>this.iterate((X)=>J(X)?$(X):!0))}map(J){return new YJ(($)=>this.iterate((X)=>$(J(X))))}findLast(J){let $;return this.iterate((X)=>{if(J(X))$=X;return!0}),$}findLastMaxBy(J){let $,X=!0;return this.iterate((Y)=>{if(X||lH.isGreaterThan(J(Y,$)))X=!1,$=Y;return!0}),$}}var lH,MY=(J,$)=>J-$,sh=(J,$)=>MY(J?1:0,$?1:0);var V1=w(()=>{(function(J){function $(Q){return Q<0}J.isLessThan=$;function X(Q){return Q<=0}J.isLessThanOrEqual=X;function Y(Q){return Q>0}J.isGreaterThan=Y;function Z(Q){return Q===0}J.isNeitherLessOrGreaterThan=Z,J.greaterThan=1,J.lessThan=-1,J.neitherLessOrGreaterThan=0})(lH||(lH={}));YJ.empty=new YJ((J)=>{})});function N5(J){return typeof J==="string"}function z5(J){return typeof J==="object"&&J!==null&&!Array.isArray(J)&&!(J instanceof RegExp)&&!(J instanceof Date)}function rh(J){let $=Object.getPrototypeOf(Uint8Array);return typeof J==="object"&&J instanceof $}function l9(J){return typeof J==="number"&&!isNaN(J)}function MN(J){return!!J&&typeof J[Symbol.iterator]==="function"}function UK(J){return J===!0||J===!1}function M8(J){return typeof J>"u"}function OY(J){return!m8(J)}function m8(J){return M8(J)||J===null}function T5(J,$){if(!J)throw Error($?`Unexpected type, expected '${$}'`:"Unexpected type")}function zK(J){if(m8(J))throw Error("Assertion Failed: argument is undefined or null");return J}function Iq(J){return typeof J==="function"}function ih(J,$){let X=Math.min(J.length,$.length);for(let Y=0;Y<X;Y++)rJ0(J[Y],$[Y])}function rJ0(J,$){if(N5($)){if(typeof J!==$)throw Error(`argument does not match constraint: typeof ${$}`)}else if(Iq($)){try{if(J instanceof $)return}catch(X){}if(!m8(J)&&J.constructor===$)return;if($.length===1&&$.call(void 0,J)===!0)return;throw Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function $X(J){if(!J||typeof J!=="object")return J;if(J instanceof RegExp)return J;let $=Array.isArray(J)?[]:{};return Object.entries(J).forEach(([X,Y])=>{$[X]=Y&&typeof Y==="object"?$X(Y):Y}),$}function nh(J){if(!J||typeof J!=="object")return J;let $=[J];while($.length>0){let X=$.shift();Object.freeze(X);for(let Y in X)if(oh.call(X,Y)){let Z=X[Y];if(typeof Z==="object"&&!Object.isFrozen(Z)&&!rh(Z))$.push(Z)}}return J}function HK(J,$){return ON(J,$,new Set)}function ON(J,$,X){if(m8(J))return J;let Y=$(J);if(typeof Y<"u")return Y;if(Array.isArray(J)){let Z=[];for(let Q of J)Z.push(ON(Q,$,X));return Z}if(z5(J)){if(X.has(J))throw Error("Cannot clone recursive data-structure");X.add(J);let Z={};for(let Q in J)if(oh.call(J,Q))Z[Q]=ON(J[Q],$,X);return X.delete(J),Z}return J}function _N(J,$,X=!0){if(!z5(J))return $;if(z5($))Object.keys($).forEach((Y)=>{if(Y in J){if(X)if(z5(J[Y])&&z5($[Y]))_N(J[Y],$[Y],X);else J[Y]=$[Y]}else J[Y]=$[Y]});return J}function i5(J,$){if(J===$)return!0;if(J===null||J===void 0||$===null||$===void 0)return!1;if(typeof J!==typeof $)return!1;if(typeof J!=="object")return!1;if(Array.isArray(J)!==Array.isArray($))return!1;let X,Y;if(Array.isArray(J)){if(J.length!==$.length)return!1;for(X=0;X<J.length;X++)if(!i5(J[X],$[X]))return!1}else{let Z=[];for(Y in J)Z.push(Y);Z.sort();let Q=[];for(Y in $)Q.push(Y);if(Q.sort(),!i5(Z,Q))return!1;for(X=0;X<Z.length;X++)if(!i5(J[Z[X]],$[Z[X]]))return!1}return!0}function iJ0(J){let $=[];while(Object.prototype!==J)$=$.concat(Object.getOwnPropertyNames(J)),J=Object.getPrototypeOf(J);return $}function HQ(J){let $=[];for(let X of iJ0(J))if(typeof J[X]==="function")$.push(X);return $}function th(J,$){let X=(Z)=>{return function(){let Q=Array.prototype.slice.call(arguments,0);return $(Z,Q)}},Y={};for(let Z of J)Y[Z]=X(Z);return Y}var oh;var n7=w(()=>{oh=Object.prototype.hasOwnProperty});function oJ0(J,$){let X;if($.length===0)X=J;else X=J.replace(/\{(\d+)\}/g,(Y,Z)=>{let Q=Z[0],G=$[Q],q=Y;if(typeof G==="string")q=G;else if(typeof G==="number"||typeof G==="boolean"||G===void 0||G===null)q=String(G);return q});if(nJ0)X="［"+X.replace(/[aouei]/g,"$&$&")+"］";return X}function F(J,$,...X){return oJ0($,X)}function eh(J){return}var nJ0;var c0=w(()=>{nJ0=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0});function qf(){if(!Xf){Xf=!0;let J=new Uint8Array(2);J[0]=1,J[1]=2,$f=new Uint16Array(J.buffer)[0]===513}return $f}var NN,yq="en",iH=!1,nH=!1,rH=!1,tJ0=!1,Yf=!1,LN=!1,eJ0=!1,kN=!1,J$0=!1,Zf=!1,jK=void 0,TN,Jf,$$0=void 0,eJ=void 0,NY,y7=void 0,Qf,X$0,wN=0,p6,t0,N6,jQ,YX,Y$0,Gf,A4,VK,XX,Z$0,WK,Z7,$f=!0,Xf=!1,EN,Uf,zf,Hf,jf;var L1=w(()=>{c0();TN=yq,Jf=yq,NY=globalThis;if(typeof NY.vscode<"u"&&typeof NY.vscode.process<"u")y7=NY.vscode.process;else if(typeof process<"u")y7=process;Qf=typeof((NN=y7===null||y7===void 0?void 0:y7.versions)===null||NN===void 0?void 0:NN.electron)==="string",X$0=Qf&&(y7===null||y7===void 0?void 0:y7.type)==="renderer";if(typeof y7==="object"){iH=y7.platform==="win32",nH=y7.platform==="darwin",rH=y7.platform==="linux",tJ0=rH&&!!y7.env.SNAP&&!!y7.env.SNAP_REVISION,eJ0=Qf,J$0=!!y7.env.CI||!!y7.env.BUILD_ARTIFACTSTAGINGDIRECTORY,jK=yq,TN=yq;let J=y7.env.VSCODE_NLS_CONFIG;if(J)try{let $=JSON.parse(J),X=$.availableLanguages["*"];jK=$.locale,Jf=$.osLocale,TN=X?X:yq,$$0=$._translationsConfigFile}catch($){}Yf=!0}else if(typeof navigator==="object"&&!X$0)eJ=navigator.userAgent,iH=eJ.indexOf("Windows")>=0,nH=eJ.indexOf("Macintosh")>=0,kN=(eJ.indexOf("Macintosh")>=0||eJ.indexOf("iPad")>=0||eJ.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,rH=eJ.indexOf("Linux")>=0,Zf=(eJ===null||eJ===void 0?void 0:eJ.indexOf("Mobi"))>=0,LN=!0,jK=eh(F({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||yq,TN=jK,Jf=navigator.language;else console.error("Unable to resolve platform.");if(nH)wN=1;else if(iH)wN=3;else if(rH)wN=2;p6=iH,t0=nH,N6=rH,jQ=Yf,YX=LN,Y$0=LN&&typeof NY.importScripts==="function",Gf=Y$0?NY.origin:void 0,A4=kN,VK=Zf,XX=eJ,Z$0=typeof NY.postMessage==="function"&&!NY.importScripts,WK=(()=>{if(Z$0){let J=[];NY.addEventListener("message",(X)=>{if(X.data&&X.data.vscodeScheduleAsyncWork)for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y];if(Q.id===X.data.vscodeScheduleAsyncWork){J.splice(Y,1),Q.callback();return}}});let $=0;return(X)=>{let Y=++$;J.push({id:Y,callback:X}),NY.postMessage({vscodeScheduleAsyncWork:Y},"*")}}return(J)=>setTimeout(J)})(),Z7=nH||kN?2:iH?1:3;EN=!!(XX&&XX.indexOf("Chrome")>=0),Uf=!!(XX&&XX.indexOf("Firefox")>=0),zf=!!(!EN&&(XX&&XX.indexOf("Safari")>=0)),Hf=!!(XX&&XX.indexOf("Edg/")>=0),jf=!!(XX&&XX.indexOf("Android")>=0)});var v5;var oH=w(()=>{v5={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}});var A1;var P4=w(()=>{(function(J){function $(M){return M&&typeof M==="object"&&typeof M[Symbol.iterator]==="function"}J.is=$;let X=Object.freeze([]);function Y(){return X}J.empty=Y;function*Z(M){yield M}J.single=Z;function Q(M){if($(M))return M;else return Z(M)}J.wrap=Q;function G(M){return M||X}J.from=G;function*q(M){for(let R=M.length-1;R>=0;R--)yield M[R]}J.reverse=q;function U(M){return!M||M[Symbol.iterator]().next().done===!0}J.isEmpty=U;function z(M){return M[Symbol.iterator]().next().value}J.first=z;function H(M,R){for(let O of M)if(R(O))return!0;return!1}J.some=H;function j(M,R){for(let O of M)if(R(O))return O;return}J.find=j;function*V(M,R){for(let O of M)if(R(O))yield O}J.filter=V;function*W(M,R){let O=0;for(let N of M)yield R(N,O++)}J.map=W;function*B(...M){for(let R of M)yield*R}J.concat=B;function K(M,R,O){let N=O;for(let T of M)N=R(N,T);return N}J.reduce=K;function*P(M,R,O=M.length){if(R<0)R+=M.length;if(O<0)O+=M.length;else if(O>M.length)O=M.length;for(;R<O;R++)yield M[R]}J.slice=P;function A(M,R=Number.POSITIVE_INFINITY){let O=[];if(R===0)return[O,M];let N=M[Symbol.iterator]();for(let T=0;T<R;T++){let S=N.next();if(S.done)return[O,J.empty()];O.push(S.value)}return[O,{[Symbol.iterator](){return N}}]}J.consume=A;async function D(M){let R=[];for await(let O of M)R.push(O);return Promise.resolve(R)}J.asyncToArray=D})(A1||(A1={}))});class o6{constructor(J){this.element=J,this.next=o6.Undefined,this.prev=o6.Undefined}}var m6;var D4=w(()=>{o6.Undefined=new o6(void 0);m6=class m6{constructor(){this._first=o6.Undefined,this._last=o6.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===o6.Undefined}clear(){let J=this._first;while(J!==o6.Undefined){let $=J.next;J.prev=o6.Undefined,J.next=o6.Undefined,J=$}this._first=o6.Undefined,this._last=o6.Undefined,this._size=0}unshift(J){return this._insert(J,!1)}push(J){return this._insert(J,!0)}_insert(J,$){let X=new o6(J);if(this._first===o6.Undefined)this._first=X,this._last=X;else if($){let Z=this._last;this._last=X,X.prev=Z,Z.next=X}else{let Z=this._first;this._first=X,X.next=Z,Z.prev=X}this._size+=1;let Y=!1;return()=>{if(!Y)Y=!0,this._remove(X)}}shift(){if(this._first===o6.Undefined)return;else{let J=this._first.element;return this._remove(this._first),J}}pop(){if(this._last===o6.Undefined)return;else{let J=this._last.element;return this._remove(this._last),J}}_remove(J){if(J.prev!==o6.Undefined&&J.next!==o6.Undefined){let $=J.prev;$.next=J.next,J.next.prev=$}else if(J.prev===o6.Undefined&&J.next===o6.Undefined)this._first=o6.Undefined,this._last=o6.Undefined;else if(J.next===o6.Undefined)this._last=this._last.prev,this._last.next=o6.Undefined;else if(J.prev===o6.Undefined)this._first=this._first.next,this._first.prev=o6.Undefined;this._size-=1}*[Symbol.iterator](){let J=this._first;while(J!==o6.Undefined)yield J.element,J=J.next}}});function Q$0(J=""){let $="(-?\\d*\\.\\d\\w*)|([^";for(let X of IN){if(J.indexOf(X)>=0)continue;$+="\\"+X}return $+="\\s]+)",new RegExp($,"g")}function eH(J){let $=tH;if(J&&J instanceof RegExp)if(!J.global){let X="g";if(J.ignoreCase)X+="i";if(J.multiline)X+="m";if(J.unicode)X+="u";$=new RegExp(J.source,X)}else $=J;return $.lastIndex=0,$}function VQ(J,$,X,Y,Z){if($=eH($),!Z)Z=A1.first(Vf);if(X.length>Z.maxLen){let z=J-Z.maxLen/2;if(z<0)z=0;else Y+=z;return X=X.substring(z,J+Z.maxLen/2),VQ(J,$,X,Y,Z)}let Q=Date.now(),G=J-1-Y,q=-1,U=null;for(let z=1;;z++){if(Date.now()-Q>=Z.timeBudget)break;let H=G-Z.windowSize*z;$.lastIndex=Math.max(0,H);let j=G$0($,X,G,q);if(!j&&U)break;if(U=j,H<=0)break;q=H}if(U){let z={word:U[0],startColumn:Y+1+U.index,endColumn:Y+1+U.index+U[0].length};return $.lastIndex=0,z}return null}function G$0(J,$,X,Y){let Z;while(Z=J.exec($)){let Q=Z.index||0;if(Q<=X&&J.lastIndex>=X)return Z;else if(Y>0&&Q>Y)return null}return null}var IN="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",tH,Vf;var xq=w(()=>{P4();D4();tH=Q$0();Vf=new m6;Vf.unshift({maxLen:1000,windowSize:15,timeBudget:150})});class $j{constructor(J){this._values=J}hasChanged(J){return this._values[J]}}class BK{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class R6{constructor(J,$,X,Y){this.id=J,this.name=$,this.defaultValue=X,this.schema=Y}applyUpdate(J,$){return FK(J,$)}compute(J,$,X){return X}}class zG{constructor(J,$){this.newValue=J,this.didChange=$}}function FK(J,$){if(typeof J!=="object"||typeof $!=="object"||!J||!$)return new zG($,J!==$);if(Array.isArray(J)||Array.isArray($)){let Y=Array.isArray(J)&&Array.isArray($)&&B6(J,$);return new zG($,!Y)}let X=!1;for(let Y in $)if($.hasOwnProperty(Y)){let Z=FK(J[Y],$[Y]);if(Z.didChange)J[Y]=Z.newValue,X=!0}return new zG(J,X)}class Sq{constructor(J){this.schema=void 0,this.id=J,this.name="_never_",this.defaultValue=void 0}applyUpdate(J,$){return FK(J,$)}validate(J){return this.defaultValue}}class jG{constructor(J,$,X,Y){this.id=J,this.name=$,this.defaultValue=X,this.schema=Y}applyUpdate(J,$){return FK(J,$)}validate(J){if(typeof J>"u")return this.defaultValue;return J}compute(J,$,X){return X}}function k0(J,$){if(typeof J>"u")return $;if(J==="false")return!1;return Boolean(J)}function WQ(J,$,X,Y){if(typeof J>"u")return $;let Z=parseInt(J,10);if(isNaN(Z))return $;return Z=Math.max(X,Z),Z=Math.min(Y,Z),Z|0}function Bf(J,$,X,Y){if(typeof J>"u")return $;let Z=GJ.float(J,$);return GJ.clamp(Z,X,Y)}function u6(J,$,X,Y){if(typeof J!=="string")return $;if(Y&&J in Y)return Y[J];if(X.indexOf(J)===-1)return $;return J}function q$0(J){switch(J){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}function U$0(J){switch(J){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}function z$0(J){switch(J){case"line":return h5.Line;case"block":return h5.Block;case"underline":return h5.Underline;case"line-thin":return h5.LineThin;case"block-outline":return h5.BlockOutline;case"underline-thin":return h5.UnderlineThin}}function H$0(J){if(J==="ctrlCmd")return t0?"metaKey":"ctrlKey";return"altKey"}function VG(J){let $=J.get(97);if($==="editable")return J.get(90);return $==="on"?!1:!0}function Wf(J,$){if(typeof J!=="string")return $;switch(J){case"hidden":return 2;case"visible":return 3;default:return 1}}function bq(J,$,X){let Y=X.indexOf(J);if(Y===-1)return $;return X[Y]}function G0(J){return BQ[J.id]=J,J}var wY=8,_1,Q6,GJ,o7,T6,Jj,Ff,Kf,h5,Af,Pf,Df,x7,QJ,Rf,Mf,ZX,Of,_f,HG,Nf,TY,Tf,wf,Lf,kf,Ef,If,yf,xf,bf,Sf,Cf,vf,hf,ff,J$="inUntrustedWorkspace",UG,gf,pf,mf,uf,cf,lf,df,sf,af,rf,j$0="Consolas, 'Courier New', monospace",V$0="Menlo, Monaco, 'Courier New', monospace",W$0="'Droid Sans Mono', 'monospace', monospace",Q7,BQ,$$;var O8=w(()=>{V1();n7();L1();oH();xq();c0();_1=class _1 extends jG{constructor(J,$,X,Y=void 0){if(typeof Y<"u")Y.type="boolean",Y.default=X;super(J,$,X,Y)}validate(J){return k0(J,this.defaultValue)}};Q6=class Q6 extends jG{static clampedInt(J,$,X,Y){return WQ(J,$,X,Y)}constructor(J,$,X,Y,Z,Q=void 0){if(typeof Q<"u")Q.type="integer",Q.default=X,Q.minimum=Y,Q.maximum=Z;super(J,$,X,Q);this.minimum=Y,this.maximum=Z}validate(J){return Q6.clampedInt(J,this.defaultValue,this.minimum,this.maximum)}};GJ=class GJ extends jG{static clamp(J,$,X){if(J<$)return $;if(J>X)return X;return J}static float(J,$){if(typeof J==="number")return J;if(typeof J>"u")return $;let X=parseFloat(J);return isNaN(X)?$:X}constructor(J,$,X,Y,Z){if(typeof Z<"u")Z.type="number",Z.default=X;super(J,$,X,Z);this.validationFn=Y}validate(J){return this.validationFn(GJ.float(J,this.defaultValue))}};o7=class o7 extends jG{static string(J,$){if(typeof J!=="string")return $;return J}constructor(J,$,X,Y=void 0){if(typeof Y<"u")Y.type="string",Y.default=X;super(J,$,X,Y)}validate(J){return o7.string(J,this.defaultValue)}};T6=class T6 extends jG{constructor(J,$,X,Y,Z=void 0){if(typeof Z<"u")Z.type="string",Z.enum=Y,Z.default=X;super(J,$,X,Z);this._allowedValues=Y}validate(J){return u6(J,this.defaultValue,this._allowedValues)}};Jj=class Jj extends R6{constructor(J,$,X,Y,Z,Q,G=void 0){if(typeof G<"u")G.type="string",G.enum=Z,G.default=Y;super(J,$,X,G);this._allowedValues=Z,this._convert=Q}validate(J){if(typeof J!=="string")return this.defaultValue;if(this._allowedValues.indexOf(J)===-1)return this.defaultValue;return this._convert(J)}};Ff=class Ff extends R6{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[F("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),F("accessibilitySupport.on","Optimize for usage with a Screen Reader."),F("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:F("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(J){switch(J){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(J,$,X){if(X===0)return J.accessibilitySupport;return X}};Kf=class Kf extends R6{constructor(){let J={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",J,{"editor.comments.insertSpace":{type:"boolean",default:J.insertSpace,description:F("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:J.ignoreEmptyLines,description:F("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{insertSpace:k0($.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:k0($.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};(function(J){J[J.Line=1]="Line",J[J.Block=2]="Block",J[J.Underline=3]="Underline",J[J.LineThin=4]="LineThin",J[J.BlockOutline=5]="BlockOutline",J[J.UnderlineThin=6]="UnderlineThin"})(h5||(h5={}));Af=class Af extends Sq{constructor(){super(140)}compute(J,$,X){let Y=["monaco-editor"];if($.get(39))Y.push($.get(39));if(J.extraEditorClassName)Y.push(J.extraEditorClassName);if($.get(73)==="default")Y.push("mouse-default");else if($.get(73)==="copy")Y.push("mouse-copy");if($.get(110))Y.push("showUnused");if($.get(138))Y.push("showDeprecated");return Y.join(" ")}};Pf=class Pf extends _1{constructor(){super(37,"emptySelectionClipboard",!0,{description:F("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(J,$,X){return X&&J.emptySelectionClipboard}};Df=class Df extends R6{constructor(){let J={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",J,{"editor.find.cursorMoveOnType":{type:"boolean",default:J.cursorMoveOnType,description:F("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:J.seedSearchStringFromSelection,enumDescriptions:[F("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),F("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),F("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:F("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:J.autoFindInSelection,enumDescriptions:[F("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),F("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),F("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:F("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:J.globalFindClipboard,description:F("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:t0},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:J.addExtraSpaceOnTop,description:F("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:J.loop,description:F("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{cursorMoveOnType:k0($.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof J.seedSearchStringFromSelection==="boolean"?J.seedSearchStringFromSelection?"always":"never":u6($.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof J.autoFindInSelection==="boolean"?J.autoFindInSelection?"always":"never":u6($.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:k0($.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:k0($.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:k0($.loop,this.defaultValue.loop)}}};x7=class x7 extends R6{constructor(){super(51,"fontLigatures",x7.OFF,{anyOf:[{type:"boolean",description:F("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:F("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:F("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(J){if(typeof J>"u")return this.defaultValue;if(typeof J==="string"){if(J==="false"||J.length===0)return x7.OFF;if(J==="true")return x7.ON;return J}if(Boolean(J))return x7.ON;return x7.OFF}};x7.OFF='"liga" off, "calt" off';x7.ON='"liga" on, "calt" on';QJ=class QJ extends R6{constructor(){super(54,"fontVariations",QJ.OFF,{anyOf:[{type:"boolean",description:F("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:F("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:F("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(J){if(typeof J>"u")return this.defaultValue;if(typeof J==="string"){if(J==="false")return QJ.OFF;if(J==="true")return QJ.TRANSLATE;return J}if(Boolean(J))return QJ.TRANSLATE;return QJ.OFF}compute(J,$,X){return J.fontInfo.fontVariationSettings}};QJ.OFF="normal";QJ.TRANSLATE="translate";Rf=class Rf extends Sq{constructor(){super(50)}compute(J,$,X){return J.fontInfo}};Mf=class Mf extends jG{constructor(){super(52,"fontSize",Q7.fontSize,{type:"number",minimum:6,maximum:100,default:Q7.fontSize,description:F("fontSize","Controls the font size in pixels.")})}validate(J){let $=GJ.float(J,this.defaultValue);if($===0)return Q7.fontSize;return GJ.clamp($,6,100)}compute(J,$,X){return J.fontInfo.fontSize}};ZX=class ZX extends R6{constructor(){super(53,"fontWeight",Q7.fontWeight,{anyOf:[{type:"number",minimum:ZX.MINIMUM_VALUE,maximum:ZX.MAXIMUM_VALUE,errorMessage:F("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ZX.SUGGESTION_VALUES}],default:Q7.fontWeight,description:F("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(J){if(J==="normal"||J==="bold")return J;return String(Q6.clampedInt(J,Q7.fontWeight,ZX.MINIMUM_VALUE,ZX.MAXIMUM_VALUE))}};ZX.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];ZX.MINIMUM_VALUE=1;ZX.MAXIMUM_VALUE=1000;Of=class Of extends R6{constructor(){let J={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},$={type:"string",enum:["peek","gotoAndPeek","goto"],default:J.multiple,enumDescriptions:[F("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),F("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),F("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},X=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",J,{"editor.gotoLocation.multiple":{deprecationMessage:F("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:F("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...$},"editor.gotoLocation.multipleTypeDefinitions":{description:F("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...$},"editor.gotoLocation.multipleDeclarations":{description:F("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...$},"editor.gotoLocation.multipleImplementations":{description:F("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...$},"editor.gotoLocation.multipleReferences":{description:F("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...$},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:J.alternativeDefinitionCommand,enum:X,description:F("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:J.alternativeTypeDefinitionCommand,enum:X,description:F("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:J.alternativeDeclarationCommand,enum:X,description:F("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:J.alternativeImplementationCommand,enum:X,description:F("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:J.alternativeReferenceCommand,enum:X,description:F("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(J){var $,X,Y,Z,Q;if(!J||typeof J!=="object")return this.defaultValue;let G=J;return{multiple:u6(G.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:($=G.multipleDefinitions)!==null&&$!==void 0?$:u6(G.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(X=G.multipleTypeDefinitions)!==null&&X!==void 0?X:u6(G.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(Y=G.multipleDeclarations)!==null&&Y!==void 0?Y:u6(G.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(Z=G.multipleImplementations)!==null&&Z!==void 0?Z:u6(G.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(Q=G.multipleReferences)!==null&&Q!==void 0?Q:u6(G.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:o7.string(G.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:o7.string(G.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:o7.string(G.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:o7.string(G.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:o7.string(G.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}};_f=class _f extends R6{constructor(){let J={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",J,{"editor.hover.enabled":{type:"boolean",default:J.enabled,description:F("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:J.delay,minimum:0,maximum:1e4,description:F("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:J.sticky,description:F("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:J.hidingDelay,description:F("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:J.above,description:F("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),delay:Q6.clampedInt($.delay,this.defaultValue.delay,0,1e4),sticky:k0($.sticky,this.defaultValue.sticky),hidingDelay:Q6.clampedInt($.hidingDelay,this.defaultValue.hidingDelay,0,600000),above:k0($.above,this.defaultValue.above)}}};HG=class HG extends Sq{constructor(){super(143)}compute(J,$,X){return HG.computeLayout($,{memory:J.memory,outerWidth:J.outerWidth,outerHeight:J.outerHeight,isDominatedByLongLines:J.isDominatedByLongLines,lineHeight:J.fontInfo.lineHeight,viewLineCount:J.viewLineCount,lineNumbersDigitCount:J.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:J.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:J.fontInfo.maxDigitWidth,pixelRatio:J.pixelRatio,glyphMarginDecorationLaneCount:J.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(J){let $=J.height/J.lineHeight,X=Math.floor(J.paddingTop/J.lineHeight),Y=Math.floor(J.paddingBottom/J.lineHeight);if(J.scrollBeyondLastLine)Y=Math.max(Y,$-1);let Z=(X+J.viewLineCount+Y)/(J.pixelRatio*J.height),Q=Math.floor(J.viewLineCount/Z);return{typicalViewportLineCount:$,extraLinesBeforeFirstLine:X,extraLinesBeyondLastLine:Y,desiredRatio:Z,minimapLineCount:Q}}static _computeMinimapLayout(J,$){let{outerWidth:X,outerHeight:Y,pixelRatio:Z}=J;if(!J.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(Z*Y),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:Y};let Q=$.stableMinimapLayoutInput,G=Q&&J.outerHeight===Q.outerHeight&&J.lineHeight===Q.lineHeight&&J.typicalHalfwidthCharacterWidth===Q.typicalHalfwidthCharacterWidth&&J.pixelRatio===Q.pixelRatio&&J.scrollBeyondLastLine===Q.scrollBeyondLastLine&&J.paddingTop===Q.paddingTop&&J.paddingBottom===Q.paddingBottom&&J.minimap.enabled===Q.minimap.enabled&&J.minimap.side===Q.minimap.side&&J.minimap.size===Q.minimap.size&&J.minimap.showSlider===Q.minimap.showSlider&&J.minimap.renderCharacters===Q.minimap.renderCharacters&&J.minimap.maxColumn===Q.minimap.maxColumn&&J.minimap.scale===Q.minimap.scale&&J.verticalScrollbarWidth===Q.verticalScrollbarWidth&&J.isViewportWrapping===Q.isViewportWrapping,q=J.lineHeight,U=J.typicalHalfwidthCharacterWidth,z=J.scrollBeyondLastLine,H=J.minimap.renderCharacters,j=Z>=2?Math.round(J.minimap.scale*2):J.minimap.scale,V=J.minimap.maxColumn,W=J.minimap.size,B=J.minimap.side,K=J.verticalScrollbarWidth,P=J.viewLineCount,A=J.remainingWidth,D=J.isViewportWrapping,M=H?2:3,R=Math.floor(Z*Y),O=R/Z,N=!1,T=!1,S=M*j,v=j/Z,l=1;if(W==="fill"||W==="fit"){let{typicalViewportLineCount:s,extraLinesBeforeFirstLine:c,extraLinesBeyondLastLine:i,desiredRatio:J0,minimapLineCount:W0}=HG.computeContainedMinimapLineCount({viewLineCount:P,scrollBeyondLastLine:z,paddingTop:J.paddingTop,paddingBottom:J.paddingBottom,height:Y,lineHeight:q,pixelRatio:Z});if(P/W0>1)N=!0,T=!0,j=1,S=1,v=j/Z;else{let X0=!1,N1=j+1;if(W==="fit"){let o1=Math.ceil((c+P+i)*S);if(D&&G&&A<=$.stableFitRemainingWidth)X0=!0,N1=$.stableFitMaxMinimapScale;else X0=o1>R}if(W==="fill"||X0){N=!0;let o1=j;if(S=Math.min(q*Z,Math.max(1,Math.floor(1/J0))),D&&G&&A<=$.stableFitRemainingWidth)N1=$.stableFitMaxMinimapScale;if(j=Math.min(N1,Math.max(1,Math.floor(S/M))),j>o1)l=Math.min(2,j/o1);if(v=j/Z/l,R=Math.ceil(Math.max(s,c+P+i)*S),D)$.stableMinimapLayoutInput=J,$.stableFitRemainingWidth=A,$.stableFitMaxMinimapScale=j;else $.stableMinimapLayoutInput=null,$.stableFitRemainingWidth=0}}}let f=Math.floor(V*v),h=Math.min(f,Math.max(0,Math.floor((A-K-2)*v/(U+v)))+wY),L=Math.floor(Z*h),b=L/Z;L=Math.floor(L*l);let p=H?1:2,d=B==="left"?0:X-h-K;return{renderMinimap:p,minimapLeft:d,minimapWidth:h,minimapHeightIsEditorHeight:N,minimapIsSampling:T,minimapScale:j,minimapLineHeight:S,minimapCanvasInnerWidth:L,minimapCanvasInnerHeight:R,minimapCanvasOuterWidth:b,minimapCanvasOuterHeight:O}}static computeLayout(J,$){let X=$.outerWidth|0,Y=$.outerHeight|0,Z=$.lineHeight|0,Q=$.lineNumbersDigitCount|0,G=$.typicalHalfwidthCharacterWidth,q=$.maxDigitWidth,U=$.pixelRatio,z=$.viewLineCount,H=J.get(135),j=H==="inherit"?J.get(134):H,V=j==="inherit"?J.get(130):j,W=J.get(133),B=$.isDominatedByLongLines,K=J.get(57),P=J.get(67).renderType!==0,A=J.get(68),D=J.get(104),M=J.get(83),R=J.get(72),O=J.get(102),N=O.verticalScrollbarSize,T=O.verticalHasArrows,S=O.arrowSize,v=O.horizontalScrollbarSize,l=J.get(43),f=J.get(109)!=="never",h=J.get(65);if(l&&f)h+=16;let L=0;if(P){let Q1=Math.max(Q,A);L=Math.round(Q1*q)}let b=0;if(K)b=Z*$.glyphMarginDecorationLaneCount;let p=0,d=p+b,s=d+L,c=s+h,i=X-b-L-h,J0=!1,W0=!1,M0=-1;if(j==="inherit"&&B)J0=!0,W0=!0;else if(V==="on"||V==="bounded")W0=!0;else if(V==="wordWrapColumn")M0=W;let X0=HG._computeMinimapLayout({outerWidth:X,outerHeight:Y,lineHeight:Z,typicalHalfwidthCharacterWidth:G,pixelRatio:U,scrollBeyondLastLine:D,paddingTop:M.top,paddingBottom:M.bottom,minimap:R,verticalScrollbarWidth:N,viewLineCount:z,remainingWidth:i,isViewportWrapping:W0},$.memory||new BK);if(X0.renderMinimap!==0&&X0.minimapLeft===0)p+=X0.minimapWidth,d+=X0.minimapWidth,s+=X0.minimapWidth,c+=X0.minimapWidth;let N1=i-X0.minimapWidth,o1=Math.max(1,Math.floor((N1-N-2)/G)),E1=T?S:0;if(W0){if(M0=Math.max(1,o1),V==="bounded")M0=Math.min(M0,W)}return{width:X,height:Y,glyphMarginLeft:p,glyphMarginWidth:b,glyphMarginDecorationLaneCount:$.glyphMarginDecorationLaneCount,lineNumbersLeft:d,lineNumbersWidth:L,decorationsLeft:s,decorationsWidth:h,contentLeft:c,contentWidth:N1,minimap:X0,viewportColumn:o1,isWordWrapMinified:J0,isViewportWrapping:W0,wrappingColumn:M0,verticalScrollbarWidth:N,horizontalScrollbarHeight:v,overviewRuler:{top:E1,width:N,height:Y-2*E1,right:0}}}};Nf=class Nf extends R6{constructor(){super(137,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[F("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),F("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:F("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(J){return u6(J,"simple",["simple","advanced"])}compute(J,$,X){if($.get(2)===2)return"advanced";return X}};(function(J){J.Off="off",J.OnCode="onCode",J.On="on"})(TY||(TY={}));Tf=class Tf extends R6{constructor(){let J={enabled:TY.OnCode};super(64,"lightbulb",J,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[TY.Off,TY.OnCode,TY.On],default:J.enabled,enumDescriptions:[F("editor.lightbulb.enabled.off","Disable the code action menu."),F("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),F("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:F("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;return{enabled:u6(J.enabled,this.defaultValue.enabled,[TY.Off,TY.OnCode,TY.On])}}};wf=class wf extends R6{constructor(){let J={enabled:!1,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(114,"stickyScroll",J,{"editor.stickyScroll.enabled":{type:"boolean",default:J.enabled,description:F("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:J.maxLineCount,minimum:1,maximum:10,description:F("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:J.defaultModel,description:F("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:J.scrollWithEditor,description:F("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),maxLineCount:Q6.clampedInt($.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:u6($.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:k0($.scrollWithEditor,this.defaultValue.scrollWithEditor)}}};Lf=class Lf extends R6{constructor(){let J={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(139,"inlayHints",J,{"editor.inlayHints.enabled":{type:"string",default:J.enabled,description:F("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[F("editor.inlayHints.on","Inlay hints are enabled"),F("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",t0?"Ctrl+Option":"Ctrl+Alt"),F("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",t0?"Ctrl+Option":"Ctrl+Alt"),F("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:J.fontSize,markdownDescription:F("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:J.fontFamily,markdownDescription:F("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:J.padding,description:F("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;if(typeof $.enabled==="boolean")$.enabled=$.enabled?"on":"off";return{enabled:u6($.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Q6.clampedInt($.fontSize,this.defaultValue.fontSize,0,100),fontFamily:o7.string($.fontFamily,this.defaultValue.fontFamily),padding:k0($.padding,this.defaultValue.padding)}}};kf=class kf extends R6{constructor(){super(65,"lineDecorationsWidth",10)}validate(J){if(typeof J==="string"&&/^\d+(\.\d+)?ch$/.test(J))return-parseFloat(J.substring(0,J.length-2));else return Q6.clampedInt(J,this.defaultValue,0,1000)}compute(J,$,X){if(X<0)return Q6.clampedInt(-X*J.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1000);else return X}};Ef=class Ef extends GJ{constructor(){super(66,"lineHeight",Q7.lineHeight,(J)=>GJ.clamp(J,0,150),{markdownDescription:F("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(J,$,X){return J.fontInfo.lineHeight}};If=class If extends R6{constructor(){let J={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(72,"minimap",J,{"editor.minimap.enabled":{type:"boolean",default:J.enabled,description:F("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:J.autohide,description:F("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[F("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),F("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),F("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:J.size,description:F("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:J.side,description:F("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:J.showSlider,description:F("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:J.scale,minimum:1,maximum:3,enum:[1,2,3],description:F("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:J.renderCharacters,description:F("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:J.maxColumn,description:F("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),autohide:k0($.autohide,this.defaultValue.autohide),size:u6($.size,this.defaultValue.size,["proportional","fill","fit"]),side:u6($.side,this.defaultValue.side,["right","left"]),showSlider:u6($.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:k0($.renderCharacters,this.defaultValue.renderCharacters),scale:Q6.clampedInt($.scale,1,1,3),maxColumn:Q6.clampedInt($.maxColumn,this.defaultValue.maxColumn,1,1e4)}}};yf=class yf extends R6{constructor(){super(83,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1000,description:F("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1000,description:F("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{top:Q6.clampedInt($.top,0,0,1000),bottom:Q6.clampedInt($.bottom,0,0,1000)}}};xf=class xf extends R6{constructor(){let J={enabled:!0,cycle:!0};super(85,"parameterHints",J,{"editor.parameterHints.enabled":{type:"boolean",default:J.enabled,description:F("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:J.cycle,description:F("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),cycle:k0($.cycle,this.defaultValue.cycle)}}};bf=class bf extends Sq{constructor(){super(141)}compute(J,$,X){return J.pixelRatio}};Sf=class Sf extends R6{constructor(){let J={other:"on",comments:"off",strings:"off"},$=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[F("on","Quick suggestions show inside the suggest widget"),F("inline","Quick suggestions show as ghost text"),F("off","Quick suggestions are disabled")]}];super(88,"quickSuggestions",J,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:$,default:J.strings,description:F("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:$,default:J.comments,description:F("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:$,default:J.other,description:F("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:J,markdownDescription:F("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")});this.defaultValue=J}validate(J){if(typeof J==="boolean"){let U=J?"on":"off";return{comments:U,strings:U,other:U}}if(!J||typeof J!=="object")return this.defaultValue;let{other:$,comments:X,strings:Y}=J,Z=["on","inline","off"],Q,G,q;if(typeof $==="boolean")Q=$?"on":"off";else Q=u6($,this.defaultValue.other,Z);if(typeof X==="boolean")G=X?"on":"off";else G=u6(X,this.defaultValue.comments,Z);if(typeof Y==="boolean")q=Y?"on":"off";else q=u6(Y,this.defaultValue.strings,Z);return{other:Q,comments:G,strings:q}}};Cf=class Cf extends R6{constructor(){super(67,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[F("lineNumbers.off","Line numbers are not rendered."),F("lineNumbers.on","Line numbers are rendered as absolute number."),F("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),F("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:F("lineNumbers","Controls the display of line numbers.")})}validate(J){let $=this.defaultValue.renderType,X=this.defaultValue.renderFn;if(typeof J<"u")if(typeof J==="function")$=4,X=J;else if(J==="interval")$=3;else if(J==="relative")$=2;else if(J==="on")$=1;else $=0;return{renderType:$,renderFn:X}}};vf=class vf extends R6{constructor(){let J=[],$={type:"number",description:F("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(101,"rulers",J,{type:"array",items:{anyOf:[$,{type:["object"],properties:{column:$,color:{type:"string",description:F("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:J,description:F("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(J){if(Array.isArray(J)){let $=[];for(let X of J)if(typeof X==="number")$.push({column:Q6.clampedInt(X,0,0,1e4),color:null});else if(X&&typeof X==="object"){let Y=X;$.push({column:Q6.clampedInt(Y.column,0,0,1e4),color:Y.color})}return $.sort((X,Y)=>X.column-Y.column),$}return this.defaultValue}};hf=class hf extends R6{constructor(){super(91,"readOnlyMessage",void 0)}validate(J){if(!J||typeof J!=="object")return this.defaultValue;return J}};ff=class ff extends R6{constructor(){let J={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(102,"scrollbar",J,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[F("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),F("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),F("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:F("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[F("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),F("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),F("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:F("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:J.verticalScrollbarSize,description:F("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:J.horizontalScrollbarSize,description:F("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:J.scrollByPage,description:F("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:J.ignoreHorizontalScrollbarInContentHeight,description:F("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J,X=Q6.clampedInt($.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1000),Y=Q6.clampedInt($.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1000);return{arrowSize:Q6.clampedInt($.arrowSize,this.defaultValue.arrowSize,0,1000),vertical:Wf($.vertical,this.defaultValue.vertical),horizontal:Wf($.horizontal,this.defaultValue.horizontal),useShadows:k0($.useShadows,this.defaultValue.useShadows),verticalHasArrows:k0($.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:k0($.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:k0($.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:k0($.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:X,horizontalSliderSize:Q6.clampedInt($.horizontalSliderSize,X,0,1000),verticalScrollbarSize:Y,verticalSliderSize:Q6.clampedInt($.verticalSliderSize,Y,0,1000),scrollByPage:k0($.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:k0($.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};UG={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};gf=class gf extends R6{constructor(){let J={nonBasicASCII:J$,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:J$,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(124,"unicodeHighlight",J,{[UG.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,J$],default:J.nonBasicASCII,description:F("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[UG.invisibleCharacters]:{restricted:!0,type:"boolean",default:J.invisibleCharacters,description:F("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[UG.ambiguousCharacters]:{restricted:!0,type:"boolean",default:J.ambiguousCharacters,description:F("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[UG.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,J$],default:J.includeComments,description:F("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[UG.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,J$],default:J.includeStrings,description:F("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[UG.allowedCharacters]:{restricted:!0,type:"object",default:J.allowedCharacters,description:F("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[UG.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:J.allowedLocales,description:F("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(J,$){let X=!1;if($.allowedCharacters&&J){if(!i5(J.allowedCharacters,$.allowedCharacters))J={...J,allowedCharacters:$.allowedCharacters},X=!0}if($.allowedLocales&&J){if(!i5(J.allowedLocales,$.allowedLocales))J={...J,allowedLocales:$.allowedLocales},X=!0}let Y=super.applyUpdate(J,$);if(X)return new zG(Y.newValue,!0);return Y}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{nonBasicASCII:bq($.nonBasicASCII,J$,[!0,!1,J$]),invisibleCharacters:k0($.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:k0($.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:bq($.includeComments,J$,[!0,!1,J$]),includeStrings:bq($.includeStrings,J$,[!0,!1,J$]),allowedCharacters:this.validateBooleanMap(J.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(J.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(J,$){if(typeof J!=="object"||!J)return $;let X={};for(let[Y,Z]of Object.entries(J))if(Z===!0)X[Y]=!0;return X}};pf=class pf extends R6{constructor(){let J={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",J,{"editor.inlineSuggest.enabled":{type:"boolean",default:J.enabled,description:F("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:J.showToolbar,enum:["always","onHover","never"],enumDescriptions:[F("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),F("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),F("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:F("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:J.suppressSuggestions,description:F("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:J.fontFamily,description:F("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),mode:u6($.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:u6($.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:k0($.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:k0($.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:o7.string($.fontFamily,this.defaultValue.fontFamily)}}};mf=class mf extends R6{constructor(){let J={enabled:v5.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:v5.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",J,{"editor.bracketPairColorization.enabled":{type:"boolean",default:J.enabled,markdownDescription:F("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:J.independentColorPoolPerBracketType,description:F("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:k0($.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}};uf=class uf extends R6{constructor(){let J={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",J,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[F("editor.guides.bracketPairs.true","Enables bracket pair guides."),F("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),F("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:J.bracketPairs,description:F("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[F("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),F("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),F("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:J.bracketPairsHorizontal,description:F("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:J.highlightActiveBracketPair,description:F("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:J.indentation,description:F("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[F("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),F("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),F("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:J.highlightActiveIndentation,description:F("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{bracketPairs:bq($.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:bq($.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:k0($.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:k0($.indentation,this.defaultValue.indentation),highlightActiveIndentation:bq($.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};cf=class cf extends R6{constructor(){let J={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(117,"suggest",J,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[F("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),F("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:J.insertMode,description:F("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:J.filterGraceful,description:F("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:J.localityBonus,description:F("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:J.shareSuggestSelections,markdownDescription:F("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[F("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),F("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),F("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),F("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:J.selectionMode,markdownDescription:F("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:J.snippetsPreventQuickSuggestions,description:F("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:J.showIcons,description:F("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:J.showStatusBar,description:F("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:J.preview,description:F("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:J.showInlineDetails,description:F("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:F("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:F("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:F("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{insertMode:u6($.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:k0($.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:k0($.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:k0($.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:k0($.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:u6($.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:k0($.showIcons,this.defaultValue.showIcons),showStatusBar:k0($.showStatusBar,this.defaultValue.showStatusBar),preview:k0($.preview,this.defaultValue.preview),previewMode:u6($.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:k0($.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:k0($.showMethods,this.defaultValue.showMethods),showFunctions:k0($.showFunctions,this.defaultValue.showFunctions),showConstructors:k0($.showConstructors,this.defaultValue.showConstructors),showDeprecated:k0($.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:k0($.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:k0($.showFields,this.defaultValue.showFields),showVariables:k0($.showVariables,this.defaultValue.showVariables),showClasses:k0($.showClasses,this.defaultValue.showClasses),showStructs:k0($.showStructs,this.defaultValue.showStructs),showInterfaces:k0($.showInterfaces,this.defaultValue.showInterfaces),showModules:k0($.showModules,this.defaultValue.showModules),showProperties:k0($.showProperties,this.defaultValue.showProperties),showEvents:k0($.showEvents,this.defaultValue.showEvents),showOperators:k0($.showOperators,this.defaultValue.showOperators),showUnits:k0($.showUnits,this.defaultValue.showUnits),showValues:k0($.showValues,this.defaultValue.showValues),showConstants:k0($.showConstants,this.defaultValue.showConstants),showEnums:k0($.showEnums,this.defaultValue.showEnums),showEnumMembers:k0($.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:k0($.showKeywords,this.defaultValue.showKeywords),showWords:k0($.showWords,this.defaultValue.showWords),showColors:k0($.showColors,this.defaultValue.showColors),showFiles:k0($.showFiles,this.defaultValue.showFiles),showReferences:k0($.showReferences,this.defaultValue.showReferences),showFolders:k0($.showFolders,this.defaultValue.showFolders),showTypeParameters:k0($.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:k0($.showSnippets,this.defaultValue.showSnippets),showUsers:k0($.showUsers,this.defaultValue.showUsers),showIssues:k0($.showIssues,this.defaultValue.showIssues)}}};lf=class lf extends R6{constructor(){super(112,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:F("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:F("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;return{selectLeadingAndTrailingWhitespace:k0(J.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:k0(J.selectSubwords,this.defaultValue.selectSubwords)}}};df=class df extends R6{constructor(){super(136,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[F("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),F("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),F("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),F("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:F("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(J){switch(J){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(J,$,X){if($.get(2)===2)return 0;return X}};sf=class sf extends Sq{constructor(){super(144)}compute(J,$,X){let Y=$.get(143);return{isDominatedByLongLines:J.isDominatedByLongLines,isWordWrapMinified:Y.isWordWrapMinified,isViewportWrapping:Y.isViewportWrapping,wrappingColumn:Y.wrappingColumn}}};af=class af extends R6{constructor(){let J={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",J,{"editor.dropIntoEditor.enabled":{type:"boolean",default:J.enabled,markdownDescription:F("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:F("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[F("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),F("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),showDropSelector:u6($.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}};rf=class rf extends R6{constructor(){let J={enabled:!0,showPasteSelector:"afterPaste"};super(84,"pasteAs",J,{"editor.pasteAs.enabled":{type:"boolean",default:J.enabled,markdownDescription:F("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:F("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[F("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),F("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(J){if(!J||typeof J!=="object")return this.defaultValue;let $=J;return{enabled:k0($.enabled,this.defaultValue.enabled),showPasteSelector:u6($.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}};Q7={fontFamily:t0?V$0:N6?W$0:j$0,fontWeight:"normal",fontSize:t0?12:14,lineHeight:0,letterSpacing:0},BQ=[];$$={acceptSuggestionOnCommitCharacter:G0(new _1(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:F("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:G0(new T6(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",F("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:F("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:G0(new Ff),accessibilityPageSize:G0(new Q6(3,"accessibilityPageSize",10,1,1073741824,{description:F("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:G0(new o7(4,"ariaLabel",F("editorViewAccessibleLabel","Editor content"))),ariaRequired:G0(new _1(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:G0(new _1(8,"screenReaderAnnounceInlineSuggestion",!0,{description:F("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:G0(new T6(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",F("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),F("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:F("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:G0(new T6(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",F("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),F("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:F("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:G0(new T6(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",F("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:F("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:G0(new T6(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",F("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:F("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:G0(new T6(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",F("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),F("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:F("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:G0(new Jj(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],q$0,{enumDescriptions:[F("editor.autoIndent.none","The editor will not insert indentation automatically."),F("editor.autoIndent.keep","The editor will keep the current line's indentation."),F("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),F("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),F("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:F("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:G0(new _1(13,"automaticLayout",!1)),autoSurround:G0(new T6(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[F("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),F("editor.autoSurround.quotes","Surround with quotes but not brackets."),F("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:F("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:G0(new mf),bracketPairGuides:G0(new uf),stickyTabStops:G0(new _1(115,"stickyTabStops",!1,{description:F("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:G0(new _1(17,"codeLens",!0,{description:F("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:G0(new o7(18,"codeLensFontFamily","",{description:F("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:G0(new Q6(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:F("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:G0(new _1(20,"colorDecorators",!0,{description:F("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:G0(new T6(146,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[F("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),F("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),F("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:F("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:G0(new Q6(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:F("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:G0(new _1(22,"columnSelection",!1,{description:F("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:G0(new Kf),contextmenu:G0(new _1(24,"contextmenu",!0)),copyWithSyntaxHighlighting:G0(new _1(25,"copyWithSyntaxHighlighting",!0,{description:F("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:G0(new Jj(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],U$0,{description:F("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:G0(new T6(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[F("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),F("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),F("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:F("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:G0(new Jj(28,"cursorStyle",h5.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],z$0,{description:F("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:G0(new Q6(29,"cursorSurroundingLines",0,0,1073741824,{description:F("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:G0(new T6(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[F("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),F("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:F("cursorSurroundingLinesStyle","Controls when `#cursorSurroundingLines#` should be enforced.")})),cursorWidth:G0(new Q6(31,"cursorWidth",0,0,1073741824,{markdownDescription:F("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:G0(new _1(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:G0(new _1(33,"disableMonospaceOptimizations",!1)),domReadOnly:G0(new _1(34,"domReadOnly",!1)),dragAndDrop:G0(new _1(35,"dragAndDrop",!0,{description:F("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:G0(new Pf),dropIntoEditor:G0(new af),stickyScroll:G0(new wf),experimentalWhitespaceRendering:G0(new T6(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[F("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),F("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),F("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:F("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:G0(new o7(39,"extraEditorClassName","")),fastScrollSensitivity:G0(new GJ(40,"fastScrollSensitivity",5,(J)=>J<=0?5:J,{markdownDescription:F("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:G0(new Df),fixedOverflowWidgets:G0(new _1(42,"fixedOverflowWidgets",!1)),folding:G0(new _1(43,"folding",!0,{description:F("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:G0(new T6(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[F("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),F("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:F("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:G0(new _1(45,"foldingHighlight",!0,{description:F("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:G0(new _1(46,"foldingImportsByDefault",!1,{description:F("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:G0(new Q6(47,"foldingMaximumRegions",5000,10,65000,{description:F("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:G0(new _1(48,"unfoldOnClickAfterEndOfLine",!1,{description:F("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:G0(new o7(49,"fontFamily",Q7.fontFamily,{description:F("fontFamily","Controls the font family.")})),fontInfo:G0(new Rf),fontLigatures2:G0(new x7),fontSize:G0(new Mf),fontWeight:G0(new ZX),fontVariations:G0(new QJ),formatOnPaste:G0(new _1(55,"formatOnPaste",!1,{description:F("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:G0(new _1(56,"formatOnType",!1,{description:F("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:G0(new _1(57,"glyphMargin",!0,{description:F("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:G0(new Of),hideCursorInOverviewRuler:G0(new _1(59,"hideCursorInOverviewRuler",!1,{description:F("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:G0(new _f),inDiffEditor:G0(new _1(61,"inDiffEditor",!1)),letterSpacing:G0(new GJ(63,"letterSpacing",Q7.letterSpacing,(J)=>GJ.clamp(J,-5,20),{description:F("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:G0(new Tf),lineDecorationsWidth:G0(new kf),lineHeight:G0(new Ef),lineNumbers:G0(new Cf),lineNumbersMinChars:G0(new Q6(68,"lineNumbersMinChars",5,1,300)),linkedEditing:G0(new _1(69,"linkedEditing",!1,{description:F("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:G0(new _1(70,"links",!0,{description:F("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:G0(new T6(71,"matchBrackets","always",["always","near","never"],{description:F("matchBrackets","Highlight matching brackets.")})),minimap:G0(new If),mouseStyle:G0(new T6(73,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:G0(new GJ(74,"mouseWheelScrollSensitivity",1,(J)=>J===0?1:J,{markdownDescription:F("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:G0(new _1(75,"mouseWheelZoom",!1,{markdownDescription:t0?F("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):F("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:G0(new _1(76,"multiCursorMergeOverlapping",!0,{description:F("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:G0(new Jj(77,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],H$0,{markdownEnumDescriptions:[F("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),F("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:F({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:G0(new T6(78,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[F("multiCursorPaste.spread","Each cursor pastes a single line of the text."),F("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:F("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:G0(new Q6(79,"multiCursorLimit",1e4,1,1e5,{markdownDescription:F("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:G0(new T6(80,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[F("occurrencesHighlight.off","Does not highlight occurrences."),F("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),F("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:F("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:G0(new _1(81,"overviewRulerBorder",!0,{description:F("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:G0(new Q6(82,"overviewRulerLanes",3,0,3)),padding:G0(new yf),pasteAs:G0(new rf),parameterHints:G0(new xf),peekWidgetDefaultFocus:G0(new T6(86,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[F("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),F("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:F("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:G0(new _1(87,"definitionLinkOpensInPeek",!1,{description:F("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:G0(new Sf),quickSuggestionsDelay:G0(new Q6(89,"quickSuggestionsDelay",10,0,1073741824,{description:F("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:G0(new _1(90,"readOnly",!1)),readOnlyMessage:G0(new hf),renameOnType:G0(new _1(92,"renameOnType",!1,{description:F("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:F("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:G0(new _1(93,"renderControlCharacters",!0,{description:F("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:G0(new T6(94,"renderFinalNewline",N6?"dimmed":"on",["off","on","dimmed"],{description:F("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:G0(new T6(95,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",F("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:F("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:G0(new _1(96,"renderLineHighlightOnlyWhenFocus",!1,{description:F("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:G0(new T6(97,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:G0(new T6(98,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",F("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),F("renderWhitespace.selection","Render whitespace characters only on selected text."),F("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:F("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:G0(new Q6(99,"revealHorizontalRightPadding",15,0,1000)),roundedSelection:G0(new _1(100,"roundedSelection",!0,{description:F("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:G0(new vf),scrollbar:G0(new ff),scrollBeyondLastColumn:G0(new Q6(103,"scrollBeyondLastColumn",4,0,1073741824,{description:F("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:G0(new _1(104,"scrollBeyondLastLine",!0,{description:F("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:G0(new _1(105,"scrollPredominantAxis",!0,{description:F("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:G0(new _1(106,"selectionClipboard",!0,{description:F("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:N6})),selectionHighlight:G0(new _1(107,"selectionHighlight",!0,{description:F("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:G0(new _1(108,"selectOnLineNumbers",!0)),showFoldingControls:G0(new T6(109,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[F("showFoldingControls.always","Always show the folding controls."),F("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),F("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:F("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:G0(new _1(110,"showUnused",!0,{description:F("showUnused","Controls fading out of unused code.")})),showDeprecated:G0(new _1(138,"showDeprecated",!0,{description:F("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:G0(new Lf),snippetSuggestions:G0(new T6(111,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[F("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),F("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),F("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),F("snippetSuggestions.none","Do not show snippet suggestions.")],description:F("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:G0(new lf),smoothScrolling:G0(new _1(113,"smoothScrolling",!1,{description:F("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:G0(new Q6(116,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:G0(new cf),inlineSuggest:G0(new pf),inlineCompletionsAccessibilityVerbose:G0(new _1(147,"inlineCompletionsAccessibilityVerbose",!1,{description:F("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:G0(new Q6(118,"suggestFontSize",0,0,1000,{markdownDescription:F("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:G0(new Q6(119,"suggestLineHeight",0,0,1000,{markdownDescription:F("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:G0(new _1(120,"suggestOnTriggerCharacters",!0,{description:F("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:G0(new T6(121,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[F("suggestSelection.first","Always select the first suggestion."),F("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),F("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:F("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:G0(new T6(122,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[F("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),F("tabCompletion.off","Disable tab completions."),F("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:F("tabCompletion","Enables tab completions.")})),tabIndex:G0(new Q6(123,"tabIndex",0,-1,1073741824)),unicodeHighlight:G0(new gf),unusualLineTerminators:G0(new T6(125,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[F("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),F("unusualLineTerminators.off","Unusual line terminators are ignored."),F("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:F("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:G0(new _1(126,"useShadowDOM",!0)),useTabStops:G0(new _1(127,"useTabStops",!0,{description:F("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:G0(new T6(128,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[F("wordBreak.normal","Use the default line break rule."),F("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:F("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:G0(new o7(129,"wordSeparators",IN,{description:F("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:G0(new T6(130,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[F("wordWrap.off","Lines will never wrap."),F("wordWrap.on","Lines will wrap at the viewport width."),F({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),F({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:F({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:G0(new o7(131,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:G0(new o7(132,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:G0(new Q6(133,"wordWrapColumn",80,1,1073741824,{markdownDescription:F({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:G0(new T6(134,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:G0(new T6(135,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:G0(new Af),defaultColorDecorators:G0(new _1(145,"defaultColorDecorators",!1,{markdownDescription:F("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:G0(new bf),tabFocusMode:G0(new _1(142,"tabFocusMode",!1,{markdownDescription:F("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:G0(new HG),wrappingInfo:G0(new sf),wrappingIndent:G0(new df),wrappingStrategy:G0(new Nf)}});class nf{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(J){setTimeout(()=>{if(J.stack){if(Cq.isErrorNoTelemetry(J))throw new Cq(J.message+`

`+J.stack);throw Error(J.message+`

`+J.stack)}throw J},0)}}emit(J){this.listeners.forEach(($)=>{$(J)})}onUnexpectedError(J){this.unexpectedErrorHandler(J),this.emit(J)}onUnexpectedExternalError(J){this.unexpectedErrorHandler(J)}}function $1(J){if(!GX(J))of.onUnexpectedError(J);return}function QX(J){if(!GX(J))of.onUnexpectedExternalError(J);return}function yN(J){if(J instanceof Error){let{name:$,message:X}=J,Y=J.stacktrace||J.stack;return{$isError:!0,name:$,message:X,stack:Y,noTelemetry:Cq.isErrorNoTelemetry(J)}}return J}function GX(J){if(J instanceof LY)return!0;return J instanceof Error&&J.name===KK&&J.message===KK}function tf(){let J=Error(KK);return J.name=J.message,J}function X$(J){if(J)return Error(`Illegal argument: ${J}`);else return Error("Illegal argument")}function vq(J){if(J)return Error(`Illegal state: ${J}`);else return Error("Illegal state")}var of,KK="Canceled",LY,xN,Cq,u1;var O1=w(()=>{of=new nf;LY=class LY extends Error{constructor(){super(KK);this.name=this.message}};xN=class xN extends Error{constructor(J){super("NotSupported");if(J)this.message=J}};Cq=class Cq extends Error{constructor(J){super(J);this.name="CodeExpectedError"}static fromError(J){if(J instanceof Cq)return J;let $=new Cq;return $.message=J.message,$.stack=J.stack,$}static isErrorNoTelemetry(J){return J.name==="CodeExpectedError"}};u1=class u1 extends Error{constructor(J){super(J||"An unexpected bug occurred.");Object.setPrototypeOf(this,u1.prototype)}}});function Y$(J,$){let X=this,Y=!1,Z;return function(){if(Y)return Z;if(Y=!0,$)try{Z=J.apply(X,arguments)}finally{$()}else Z=J.apply(X,arguments);return Z}}function K$0(J){F9=J}function WG(J){return F9===null||F9===void 0||F9.trackDisposable(J),J}function BG(J){F9===null||F9===void 0||F9.markAsDisposed(J)}function AK(J,$){F9===null||F9===void 0||F9.setParent(J,$)}function A$0(J,$){if(!F9)return;for(let X of J)F9.setParent(X,$)}function FG(J){return F9===null||F9===void 0||F9.markAsSingleton(J),J}function PK(J){return typeof J.dispose==="function"&&J.dispose.length===0}function h1(J){if(A1.is(J)){let $=[];for(let X of J)if(X)try{X.dispose()}catch(Y){$.push(Y)}if($.length===1)throw $[0];else if($.length>1)throw AggregateError($,"Encountered errors while disposing of store");return Array.isArray(J)?[]:J}else if(J)return J.dispose(),J}function G7(...J){let $=N0(()=>h1(J));return A$0(J,$),$}function N0(J){let $=WG({dispose:Y$(()=>{BG($),J()})});return $}class $0{constructor(){this._toDispose=new Set,this._isDisposed=!1,WG(this)}dispose(){if(this._isDisposed)return;BG(this),this._isDisposed=!0,this.clear()}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size===0)return;try{h1(this._toDispose)}finally{this._toDispose.clear()}}add(J){if(!J)return J;if(J===this)throw Error("Cannot register a disposable on itself!");if(AK(J,this),this._isDisposed){if(!$0.DISABLE_DISPOSED_WARNING)console.warn(Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack)}else this._toDispose.add(J);return J}deleteAndLeak(J){if(!J)return;if(this._toDispose.has(J))this._toDispose.delete(J),AK(J,null)}}class m{constructor(){this._store=new $0,WG(this),AK(this._store,this)}dispose(){BG(this),this._store.dispose()}_register(J){if(J===this)throw Error("Cannot register a disposable on itself!");return this._store.add(J)}}class q8{constructor(){this._isDisposed=!1,WG(this)}get value(){return this._isDisposed?void 0:this._value}set value(J){var $;if(this._isDisposed||J===this._value)return;if(($=this._value)===null||$===void 0||$.dispose(),J)AK(J,this);this._value=J}clear(){this.value=void 0}dispose(){var J;this._isDisposed=!0,BG(this),(J=this._value)===null||J===void 0||J.dispose(),this._value=void 0}}class bN{constructor(J){this.object=J}dispose(){}}var F$0=!1,F9=null,KG;var z0=w(()=>{P4();if(F$0)K$0(new class{trackDisposable($){let X=Error("Potentially leaked disposable").stack;setTimeout(()=>{if(!$.__is_disposable_tracked__)console.log(X)},3000)}setParent($,X){if($&&$!==m.None)try{$.__is_disposable_tracked__=!0}catch(Y){}}markAsDisposed($){if($&&$!==m.None)try{$.__is_disposable_tracked__=!0}catch(X){}}markAsSingleton($){}});$0.DISABLE_DISPOSED_WARNING=!1;m.None=Object.freeze({dispose(){}});KG=class KG{constructor(){this._store=new Map,this._isDisposed=!1,WG(this)}dispose(){BG(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(!this._store.size)return;try{h1(this._store.values())}finally{this._store.clear()}}get(J){return this._store.get(J)}set(J,$,X=!1){var Y;if(this._isDisposed)console.warn(Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack);if(!X)(Y=this._store.get(J))===null||Y===void 0||Y.dispose();this._store.set(J,$)}deleteAndDispose(J){var $;($=this._store.get(J))===null||$===void 0||$.dispose(),this._store.delete(J)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}});class w5{static create(J){return new w5(J)}constructor(J){this._now=P$0&&J===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){if(this._stopTime!==-1)return this._stopTime-this._startTime;return this._now()-this._startTime}}var P$0;var qX=w(()=>{P$0=globalThis.performance&&typeof globalThis.performance.now==="function"});class hq{constructor(J){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${J}_${hq._idPool++}`,hq.all.add(this)}start(J){this._stopWatch=new w5,this.listenerCount=J}stop(){if(this._stopWatch){let J=this._stopWatch.elapsed();this.durations.push(J),this.elapsedOverall+=J,this.invocationCount+=1,this._stopWatch=void 0}}}class $g{constructor(J,$=Math.random().toString(18).slice(2,5)){this.threshold=J,this.name=$,this._warnCountdown=0}dispose(){var J;(J=this._stacks)===null||J===void 0||J.clear()}check(J,$){let X=this.threshold;if(X<=0||$<X)return;if(!this._stacks)this._stacks=new Map;let Y=this._stacks.get(J.value)||0;if(this._stacks.set(J.value,Y+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=X*0.5;let Z,Q=0;for(let[G,q]of this._stacks)if(!Z||Q<q)Z=G,Q=q;console.warn(`[${this.name}] potential listener LEAK detected, having ${$} listeners already. MOST frequent listener (${Q}):`),console.warn(Z)}return()=>{let Z=this._stacks.get(J.value)||0;this._stacks.set(J.value,Z-1)}}}class Yj{static create(){var J;return new Yj((J=Error().stack)!==null&&J!==void 0?J:"")}constructor(J){this.value=J}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Xj{constructor(J){this.value=J}}class x{constructor(J){var $,X,Y,Z,Q;this._size=0,this._options=J,this._leakageMon=Jg>0||(($=this._options)===null||$===void 0?void 0:$.leakWarningThreshold)?new $g((Y=(X=this._options)===null||X===void 0?void 0:X.leakWarningThreshold)!==null&&Y!==void 0?Y:Jg):void 0,this._perfMon=((Z=this._options)===null||Z===void 0?void 0:Z._profName)?new hq(this._options._profName):void 0,this._deliveryQueue=(Q=this._options)===null||Q===void 0?void 0:Q.deliveryQueue}dispose(){var J,$,X,Y;if(!this._disposed){if(this._disposed=!0,((J=this._deliveryQueue)===null||J===void 0?void 0:J.current)===this)this._deliveryQueue.reset();if(this._listeners){if(ef){let Z=this._listeners;queueMicrotask(()=>{M$0(Z,(Q)=>{var G;return(G=Q.stack)===null||G===void 0?void 0:G.print()})})}this._listeners=void 0,this._size=0}(X=($=this._options)===null||$===void 0?void 0:$.onDidRemoveLastListener)===null||X===void 0||X.call($),(Y=this._leakageMon)===null||Y===void 0||Y.dispose()}}get event(){var J;return(J=this._event)!==null&&J!==void 0||(this._event=($,X,Y)=>{var Z,Q,G,q,U;if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),m.None;if(this._disposed)return m.None;if(X)$=$.bind(X);let z=new Xj($),H,j;if(this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*0.2))z.stack=Yj.create(),H=this._leakageMon.check(z.stack,this._size+1);if(ef)z.stack=j!==null&&j!==void 0?j:Yj.create();if(!this._listeners)(Q=(Z=this._options)===null||Z===void 0?void 0:Z.onWillAddFirstListener)===null||Q===void 0||Q.call(Z,this),this._listeners=z,(q=(G=this._options)===null||G===void 0?void 0:G.onDidAddFirstListener)===null||q===void 0||q.call(G,this);else if(this._listeners instanceof Xj)(U=this._deliveryQueue)!==null&&U!==void 0||(this._deliveryQueue=new SN),this._listeners=[this._listeners,z];else this._listeners.push(z);this._size++;let V=N0(()=>{H===null||H===void 0||H(),this._removeListener(z)});if(Y instanceof $0)Y.add(V);else if(Array.isArray(Y))Y.push(V);return V}),this._event}_removeListener(J){var $,X,Y,Z;if((X=($=this._options)===null||$===void 0?void 0:$.onWillRemoveListener)===null||X===void 0||X.call($,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(Z=(Y=this._options)===null||Y===void 0?void 0:Y.onDidRemoveLastListener)===null||Z===void 0||Z.call(Y,this),this._size=0;return}let Q=this._listeners,G=Q.indexOf(J);if(G===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),Error("Attempted to dispose unknown listener");this._size--,Q[G]=void 0;let q=this._deliveryQueue.current===this;if(this._size*R$0<=Q.length){let U=0;for(let z=0;z<Q.length;z++)if(Q[z])Q[U++]=Q[z];else if(q){if(this._deliveryQueue.end--,U<this._deliveryQueue.i)this._deliveryQueue.i--}Q.length=U}}_deliver(J,$){var X;if(!J)return;let Y=((X=this._options)===null||X===void 0?void 0:X.onListenerError)||$1;if(!Y){J.value($);return}try{J.value($)}catch(Z){Y(Z)}}_deliverQueue(J){let $=J.current._listeners;while(J.i<J.end)this._deliver($[J.i++],J.value);J.reset()}fire(J){var $,X,Y,Z;if(($=this._deliveryQueue)===null||$===void 0?void 0:$.current)this._deliverQueue(this._deliveryQueue),(X=this._perfMon)===null||X===void 0||X.stop();if((Y=this._perfMon)===null||Y===void 0||Y.start(this._size),!this._listeners);else if(this._listeners instanceof Xj)this._deliver(this._listeners,J);else{let Q=this._deliveryQueue;Q.enqueue(this,J,this._listeners.length),this._deliverQueue(Q)}(Z=this._perfMon)===null||Z===void 0||Z.stop()}hasListeners(){return this._size>0}}class SN{constructor(){this.i=-1,this.end=0}enqueue(J,$,X){this.i=0,this.end=X,this.current=J,this.value=$}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class vN{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new x({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(J){let $={event:J,listener:null};if(this.events.push($),this.hasListeners)this.hook($);return N0(Y$(()=>{if(this.hasListeners)this.unhook($);let Y=this.events.indexOf($);this.events.splice(Y,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach((J)=>this.hook(J))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach((J)=>this.unhook(J))}hook(J){J.listener=J.event(($)=>this.emitter.fire($))}unhook(J){if(J.listener)J.listener.dispose();J.listener=null}dispose(){this.emitter.dispose()}}class AG{constructor(){this.buffers=[]}wrapEvent(J){return($,X,Y)=>{return J((Z)=>{let Q=this.buffers[this.buffers.length-1];if(Q)Q.push(()=>$.call(X,Z));else $.call(X,Z)},void 0,Y)}}bufferEvents(J){let $=[];this.buffers.push($);let X=J();return this.buffers.pop(),$.forEach((Y)=>Y()),X}}class DK{constructor(){this.listening=!1,this.inputEvent=q0.None,this.inputEventListener=m.None,this.emitter=new x({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(J){if(this.inputEvent=J,this.listening)this.inputEventListener.dispose(),this.inputEventListener=J(this.emitter.fire,this.emitter)}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}var ef=!1,D$0=!1,q0,Jg=-1,R$0=2,M$0=(J,$)=>{if(J instanceof Xj)$(J);else for(let X=0;X<J.length;X++){let Y=J[X];if(Y)$(Y)}},Xg=()=>new SN,qJ,Zj,CN;var _0=w(()=>{O1();z0();D4();qX();(function(J){J.None=()=>m.None;function $(h){if(D$0){let{onDidAddListener:L}=h,b=Yj.create(),p=0;h.onDidAddListener=()=>{if(++p===2)console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),b.print();L===null||L===void 0||L()}}}function X(h,L){return V(h,()=>{return},0,void 0,!0,void 0,L)}J.defer=X;function Y(h){return(L,b=null,p)=>{let d=!1,s=void 0;if(s=h((c)=>{if(d)return;else if(s)s.dispose();else d=!0;return L.call(b,c)},null,p),d)s.dispose();return s}}J.once=Y;function Z(h,L,b){return H((p,d=null,s)=>h((c)=>p.call(d,L(c)),null,s),b)}J.map=Z;function Q(h,L,b){return H((p,d=null,s)=>h((c)=>{L(c),p.call(d,c)},null,s),b)}J.forEach=Q;function G(h,L,b){return H((p,d=null,s)=>h((c)=>L(c)&&p.call(d,c),null,s),b)}J.filter=G;function q(h){return h}J.signal=q;function U(...h){return(L,b=null,p)=>{let d=G7(...h.map((s)=>s((c)=>L.call(b,c))));return j(d,p)}}J.any=U;function z(h,L,b,p){let d=b;return Z(h,(s)=>{return d=L(d,s),d},p)}J.reduce=z;function H(h,L){let b,p={onWillAddFirstListener(){b=h(d.fire,d)},onDidRemoveLastListener(){b===null||b===void 0||b.dispose()}};if(!L)$(p);let d=new x(p);return L===null||L===void 0||L.add(d),d.event}function j(h,L){if(L instanceof Array)L.push(h);else if(L)L.add(h);return h}function V(h,L,b=100,p=!1,d=!1,s,c){let i,J0=void 0,W0=void 0,M0=0,X0,N1={leakWarningThreshold:s,onWillAddFirstListener(){i=h((E1)=>{if(M0++,J0=L(J0,E1),p&&!W0)o1.fire(J0),J0=void 0;if(X0=()=>{let Q1=J0;if(J0=void 0,W0=void 0,!p||M0>1)o1.fire(Q1);M0=0},typeof b==="number")clearTimeout(W0),W0=setTimeout(X0,b);else if(W0===void 0)W0=0,queueMicrotask(X0)})},onWillRemoveListener(){if(d&&M0>0)X0===null||X0===void 0||X0()},onDidRemoveLastListener(){X0=void 0,i.dispose()}};if(!c)$(N1);let o1=new x(N1);return c===null||c===void 0||c.add(o1),o1.event}J.debounce=V;function W(h,L=0,b){return J.debounce(h,(p,d)=>{if(!p)return[d];return p.push(d),p},L,void 0,!0,void 0,b)}J.accumulate=W;function B(h,L=(p,d)=>p===d,b){let p=!0,d;return G(h,(s)=>{let c=p||!L(s,d);return p=!1,d=s,c},b)}J.latch=B;function K(h,L,b){return[J.filter(h,L,b),J.filter(h,(p)=>!L(p),b)]}J.split=K;function P(h,L=!1,b=[],p){let d=b.slice(),s=h((J0)=>{if(d)d.push(J0);else i.fire(J0)});if(p)p.add(s);let c=()=>{d===null||d===void 0||d.forEach((J0)=>i.fire(J0)),d=null},i=new x({onWillAddFirstListener(){if(!s){if(s=h((J0)=>i.fire(J0)),p)p.add(s)}},onDidAddFirstListener(){if(d)if(L)setTimeout(c);else c()},onDidRemoveLastListener(){if(s)s.dispose();s=null}});if(p)p.add(i);return i.event}J.buffer=P;function A(h,L){return(p,d,s)=>{let c=L(new M);return h(function(i){let J0=c.evaluate(i);if(J0!==D)p.call(d,J0)},void 0,s)}}J.chain=A;let D=Symbol("HaltChainable");class M{constructor(){this.steps=[]}map(h){return this.steps.push(h),this}forEach(h){return this.steps.push((L)=>{return h(L),L}),this}filter(h){return this.steps.push((L)=>h(L)?L:D),this}reduce(h,L){let b=L;return this.steps.push((p)=>{return b=h(b,p),b}),this}latch(h=(L,b)=>L===b){let L=!0,b;return this.steps.push((p)=>{let d=L||!h(p,b);return L=!1,b=p,d?p:D}),this}evaluate(h){for(let L of this.steps)if(h=L(h),h===D)break;return h}}function R(h,L,b=(p)=>p){let p=(...i)=>c.fire(b(...i)),c=new x({onWillAddFirstListener:()=>h.on(L,p),onDidRemoveLastListener:()=>h.removeListener(L,p)});return c.event}J.fromNodeEventEmitter=R;function O(h,L,b=(p)=>p){let p=(...i)=>c.fire(b(...i)),c=new x({onWillAddFirstListener:()=>h.addEventListener(L,p),onDidRemoveLastListener:()=>h.removeEventListener(L,p)});return c.event}J.fromDOMEventEmitter=O;function N(h){return new Promise((L)=>Y(h)(L))}J.toPromise=N;function T(h){let L=new x;return h.then((b)=>{L.fire(b)},()=>{L.fire(void 0)}).finally(()=>{L.dispose()}),L.event}J.fromPromise=T;function S(h,L,b){return L(b),h((p)=>L(p))}J.runAndSubscribe=S;class v{constructor(h,L){this._observable=h,this._counter=0,this._hasChanged=!1;let b={onWillAddFirstListener:()=>{h.addObserver(this)},onDidRemoveLastListener:()=>{h.removeObserver(this)}};if(!L)$(b);if(this.emitter=new x(b),L)L.add(this.emitter)}beginUpdate(h){this._counter++}handlePossibleChange(h){}handleChange(h,L){this._hasChanged=!0}endUpdate(h){if(this._counter--,this._counter===0){if(this._observable.reportChanges(),this._hasChanged)this._hasChanged=!1,this.emitter.fire(this._observable.get())}}}function l(h,L){return new v(h,L).emitter.event}J.fromObservable=l;function f(h){return(L,b,p)=>{let d=0,s=!1,c={beginUpdate(){d++},endUpdate(){if(d--,d===0){if(h.reportChanges(),s)s=!1,L.call(b)}},handlePossibleChange(){},handleChange(){s=!0}};h.addObserver(c),h.reportChanges();let i={dispose(){h.removeObserver(c)}};if(p instanceof $0)p.add(i);else if(Array.isArray(p))p.push(i);return i}}J.fromObservableLight=f})(q0||(q0={}));hq.all=new Set;hq._idPool=0;qJ=class qJ extends x{constructor(J){super(J);this._isPaused=0,this._eventQueue=new m6,this._mergeFn=J===null||J===void 0?void 0:J.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let J=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(J))}}else while(!this._isPaused&&this._eventQueue.size!==0)super.fire(this._eventQueue.shift())}fire(J){if(this._size)if(this._isPaused!==0)this._eventQueue.push(J);else super.fire(J)}};Zj=class Zj extends qJ{constructor(J){var $;super(J);this._delay=($=J.delay)!==null&&$!==void 0?$:100}fire(J){if(!this._handle)this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay);super.fire(J)}};CN=class CN extends x{constructor(J){super(J);this._queuedEvents=[],this._mergeFn=J===null||J===void 0?void 0:J.merge}fire(J){if(!this.hasListeners())return;if(this._queuedEvents.push(J),this._queuedEvents.length===1)queueMicrotask(()=>{if(this._mergeFn)super.fire(this._mergeFn(this._queuedEvents));else this._queuedEvents.forEach(($)=>super.fire($));this._queuedEvents=[]})}}});class Qj{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){if(!this._isCancelled){if(this._isCancelled=!0,this._emitter)this._emitter.fire(void 0),this.dispose()}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled)return Yg;if(!this._emitter)this._emitter=new x;return this._emitter.event}dispose(){if(this._emitter)this._emitter.dispose(),this._emitter=null}}class L5{constructor(J){this._token=void 0,this._parentListener=void 0,this._parentListener=J&&J.onCancellationRequested(this.cancel,this)}get token(){if(!this._token)this._token=new Qj;return this._token}cancel(){if(!this._token)this._token=j5.Cancelled;else if(this._token instanceof Qj)this._token.cancel()}dispose(J=!1){var $;if(J)this.cancel();if(($=this._parentListener)===null||$===void 0||$.dispose(),!this._token)this._token=j5.None;else if(this._token instanceof Qj)this._token.dispose()}}var Yg,j5;var _8=w(()=>{_0();Yg=Object.freeze(function(J,$){let X=setTimeout(J.bind($),0);return{dispose(){clearTimeout(X)}}});(function(J){function $(X){if(X===J.None||X===J.Cancelled)return!0;if(X instanceof Qj)return!0;if(!X||typeof X!=="object")return!1;return typeof X.isCancellationRequested==="boolean"&&typeof X.onCancellationRequested==="function"}J.isCancellationToken=$,J.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:q0.None}),J.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Yg})})(j5||(j5={}))});class MK{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(J,$){this._keyCodeToStr[J]=$,this._strToKeyCode[$.toLowerCase()]=J}keyCodeToStr(J){return this._keyCodeToStr[J]}strToKeyCode(J){return this._strToKeyCode[J.toLowerCase()]||0}}function q7(J,$){let X=($&65535)<<16>>>0;return(J|X)>>>0}var RK,hN,fN,pN,_$0,N$0,T$0,w$0,OK,gN,UJ;var PG=w(()=>{RK=new MK,hN=new MK,fN=new MK,pN=Array(230),_$0={},N$0=[],T$0=Object.create(null),w$0=Object.create(null),OK=[],gN=[];for(let J=0;J<=193;J++)OK[J]=-1;for(let J=0;J<=132;J++)gN[J]=-1;(function(){let $=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN","",""],[1,1,"Hyper",0,"",0,"","",""],[1,2,"Super",0,"",0,"","",""],[1,3,"Fn",0,"",0,"","",""],[1,4,"FnLock",0,"",0,"","",""],[1,5,"Suspend",0,"",0,"","",""],[1,6,"Resume",0,"",0,"","",""],[1,7,"Turbo",0,"",0,"","",""],[1,8,"Sleep",0,"",0,"VK_SLEEP","",""],[1,9,"WakeUp",0,"",0,"","",""],[0,10,"KeyA",31,"A",65,"VK_A","",""],[0,11,"KeyB",32,"B",66,"VK_B","",""],[0,12,"KeyC",33,"C",67,"VK_C","",""],[0,13,"KeyD",34,"D",68,"VK_D","",""],[0,14,"KeyE",35,"E",69,"VK_E","",""],[0,15,"KeyF",36,"F",70,"VK_F","",""],[0,16,"KeyG",37,"G",71,"VK_G","",""],[0,17,"KeyH",38,"H",72,"VK_H","",""],[0,18,"KeyI",39,"I",73,"VK_I","",""],[0,19,"KeyJ",40,"J",74,"VK_J","",""],[0,20,"KeyK",41,"K",75,"VK_K","",""],[0,21,"KeyL",42,"L",76,"VK_L","",""],[0,22,"KeyM",43,"M",77,"VK_M","",""],[0,23,"KeyN",44,"N",78,"VK_N","",""],[0,24,"KeyO",45,"O",79,"VK_O","",""],[0,25,"KeyP",46,"P",80,"VK_P","",""],[0,26,"KeyQ",47,"Q",81,"VK_Q","",""],[0,27,"KeyR",48,"R",82,"VK_R","",""],[0,28,"KeyS",49,"S",83,"VK_S","",""],[0,29,"KeyT",50,"T",84,"VK_T","",""],[0,30,"KeyU",51,"U",85,"VK_U","",""],[0,31,"KeyV",52,"V",86,"VK_V","",""],[0,32,"KeyW",53,"W",87,"VK_W","",""],[0,33,"KeyX",54,"X",88,"VK_X","",""],[0,34,"KeyY",55,"Y",89,"VK_Y","",""],[0,35,"KeyZ",56,"Z",90,"VK_Z","",""],[0,36,"Digit1",22,"1",49,"VK_1","",""],[0,37,"Digit2",23,"2",50,"VK_2","",""],[0,38,"Digit3",24,"3",51,"VK_3","",""],[0,39,"Digit4",25,"4",52,"VK_4","",""],[0,40,"Digit5",26,"5",53,"VK_5","",""],[0,41,"Digit6",27,"6",54,"VK_6","",""],[0,42,"Digit7",28,"7",55,"VK_7","",""],[0,43,"Digit8",29,"8",56,"VK_8","",""],[0,44,"Digit9",30,"9",57,"VK_9","",""],[0,45,"Digit0",21,"0",48,"VK_0","",""],[1,46,"Enter",3,"Enter",13,"VK_RETURN","",""],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE","",""],[1,48,"Backspace",1,"Backspace",8,"VK_BACK","",""],[1,49,"Tab",2,"Tab",9,"VK_TAB","",""],[1,50,"Space",10,"Space",32,"VK_SPACE","",""],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,"",0,"","",""],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL","",""],[1,64,"F1",59,"F1",112,"VK_F1","",""],[1,65,"F2",60,"F2",113,"VK_F2","",""],[1,66,"F3",61,"F3",114,"VK_F3","",""],[1,67,"F4",62,"F4",115,"VK_F4","",""],[1,68,"F5",63,"F5",116,"VK_F5","",""],[1,69,"F6",64,"F6",117,"VK_F6","",""],[1,70,"F7",65,"F7",118,"VK_F7","",""],[1,71,"F8",66,"F8",119,"VK_F8","",""],[1,72,"F9",67,"F9",120,"VK_F9","",""],[1,73,"F10",68,"F10",121,"VK_F10","",""],[1,74,"F11",69,"F11",122,"VK_F11","",""],[1,75,"F12",70,"F12",123,"VK_F12","",""],[1,76,"PrintScreen",0,"",0,"","",""],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL","",""],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE","",""],[1,79,"Insert",19,"Insert",45,"VK_INSERT","",""],[1,80,"Home",14,"Home",36,"VK_HOME","",""],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR","",""],[1,82,"Delete",20,"Delete",46,"VK_DELETE","",""],[1,83,"End",13,"End",35,"VK_END","",""],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT","",""],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",""],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",""],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",""],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",""],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK","",""],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE","",""],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY","",""],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT","",""],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD","",""],[1,94,"NumpadEnter",3,"",0,"","",""],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1","",""],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2","",""],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3","",""],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4","",""],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5","",""],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6","",""],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7","",""],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8","",""],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9","",""],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0","",""],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL","",""],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102","",""],[1,107,"ContextMenu",58,"ContextMenu",93,"","",""],[1,108,"Power",0,"",0,"","",""],[1,109,"NumpadEqual",0,"",0,"","",""],[1,110,"F13",71,"F13",124,"VK_F13","",""],[1,111,"F14",72,"F14",125,"VK_F14","",""],[1,112,"F15",73,"F15",126,"VK_F15","",""],[1,113,"F16",74,"F16",127,"VK_F16","",""],[1,114,"F17",75,"F17",128,"VK_F17","",""],[1,115,"F18",76,"F18",129,"VK_F18","",""],[1,116,"F19",77,"F19",130,"VK_F19","",""],[1,117,"F20",78,"F20",131,"VK_F20","",""],[1,118,"F21",79,"F21",132,"VK_F21","",""],[1,119,"F22",80,"F22",133,"VK_F22","",""],[1,120,"F23",81,"F23",134,"VK_F23","",""],[1,121,"F24",82,"F24",135,"VK_F24","",""],[1,122,"Open",0,"",0,"","",""],[1,123,"Help",0,"",0,"","",""],[1,124,"Select",0,"",0,"","",""],[1,125,"Again",0,"",0,"","",""],[1,126,"Undo",0,"",0,"","",""],[1,127,"Cut",0,"",0,"","",""],[1,128,"Copy",0,"",0,"","",""],[1,129,"Paste",0,"",0,"","",""],[1,130,"Find",0,"",0,"","",""],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE","",""],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP","",""],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN","",""],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR","",""],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1","",""],[1,136,"KanaMode",0,"",0,"","",""],[0,137,"IntlYen",0,"",0,"","",""],[1,138,"Convert",0,"",0,"","",""],[1,139,"NonConvert",0,"",0,"","",""],[1,140,"Lang1",0,"",0,"","",""],[1,141,"Lang2",0,"",0,"","",""],[1,142,"Lang3",0,"",0,"","",""],[1,143,"Lang4",0,"",0,"","",""],[1,144,"Lang5",0,"",0,"","",""],[1,145,"Abort",0,"",0,"","",""],[1,146,"Props",0,"",0,"","",""],[1,147,"NumpadParenLeft",0,"",0,"","",""],[1,148,"NumpadParenRight",0,"",0,"","",""],[1,149,"NumpadBackspace",0,"",0,"","",""],[1,150,"NumpadMemoryStore",0,"",0,"","",""],[1,151,"NumpadMemoryRecall",0,"",0,"","",""],[1,152,"NumpadMemoryClear",0,"",0,"","",""],[1,153,"NumpadMemoryAdd",0,"",0,"","",""],[1,154,"NumpadMemorySubtract",0,"",0,"","",""],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR","",""],[1,156,"NumpadClearEntry",0,"",0,"","",""],[1,0,"",5,"Ctrl",17,"VK_CONTROL","",""],[1,0,"",4,"Shift",16,"VK_SHIFT","",""],[1,0,"",6,"Alt",18,"VK_MENU","",""],[1,0,"",57,"Meta",91,"VK_COMMAND","",""],[1,157,"ControlLeft",5,"",0,"VK_LCONTROL","",""],[1,158,"ShiftLeft",4,"",0,"VK_LSHIFT","",""],[1,159,"AltLeft",6,"",0,"VK_LMENU","",""],[1,160,"MetaLeft",57,"",0,"VK_LWIN","",""],[1,161,"ControlRight",5,"",0,"VK_RCONTROL","",""],[1,162,"ShiftRight",4,"",0,"VK_RSHIFT","",""],[1,163,"AltRight",6,"",0,"VK_RMENU","",""],[1,164,"MetaRight",57,"",0,"VK_RWIN","",""],[1,165,"BrightnessUp",0,"",0,"","",""],[1,166,"BrightnessDown",0,"",0,"","",""],[1,167,"MediaPlay",0,"",0,"","",""],[1,168,"MediaRecord",0,"",0,"","",""],[1,169,"MediaFastForward",0,"",0,"","",""],[1,170,"MediaRewind",0,"",0,"","",""],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK","",""],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK","",""],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP","",""],[1,174,"Eject",0,"",0,"","",""],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE","",""],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT","",""],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL","",""],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2","",""],[1,179,"LaunchApp1",0,"",0,"VK_MEDIA_LAUNCH_APP1","",""],[1,180,"SelectTask",0,"",0,"","",""],[1,181,"LaunchScreenSaver",0,"",0,"","",""],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH","",""],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME","",""],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK","",""],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD","",""],[1,186,"BrowserStop",0,"",0,"VK_BROWSER_STOP","",""],[1,187,"BrowserRefresh",0,"",0,"VK_BROWSER_REFRESH","",""],[1,188,"BrowserFavorites",0,"",0,"VK_BROWSER_FAVORITES","",""],[1,189,"ZoomToggle",0,"",0,"","",""],[1,190,"MailReply",0,"",0,"","",""],[1,191,"MailForward",0,"",0,"","",""],[1,192,"MailSend",0,"",0,"","",""],[1,0,"",114,"KeyInComposition",229,"","",""],[1,0,"",116,"ABNT_C2",194,"VK_ABNT_C2","",""],[1,0,"",96,"OEM_8",223,"VK_OEM_8","",""],[1,0,"",0,"",0,"VK_KANA","",""],[1,0,"",0,"",0,"VK_HANGUL","",""],[1,0,"",0,"",0,"VK_JUNJA","",""],[1,0,"",0,"",0,"VK_FINAL","",""],[1,0,"",0,"",0,"VK_HANJA","",""],[1,0,"",0,"",0,"VK_KANJI","",""],[1,0,"",0,"",0,"VK_CONVERT","",""],[1,0,"",0,"",0,"VK_NONCONVERT","",""],[1,0,"",0,"",0,"VK_ACCEPT","",""],[1,0,"",0,"",0,"VK_MODECHANGE","",""],[1,0,"",0,"",0,"VK_SELECT","",""],[1,0,"",0,"",0,"VK_PRINT","",""],[1,0,"",0,"",0,"VK_EXECUTE","",""],[1,0,"",0,"",0,"VK_SNAPSHOT","",""],[1,0,"",0,"",0,"VK_HELP","",""],[1,0,"",0,"",0,"VK_APPS","",""],[1,0,"",0,"",0,"VK_PROCESSKEY","",""],[1,0,"",0,"",0,"VK_PACKET","",""],[1,0,"",0,"",0,"VK_DBE_SBCSCHAR","",""],[1,0,"",0,"",0,"VK_DBE_DBCSCHAR","",""],[1,0,"",0,"",0,"VK_ATTN","",""],[1,0,"",0,"",0,"VK_CRSEL","",""],[1,0,"",0,"",0,"VK_EXSEL","",""],[1,0,"",0,"",0,"VK_EREOF","",""],[1,0,"",0,"",0,"VK_PLAY","",""],[1,0,"",0,"",0,"VK_ZOOM","",""],[1,0,"",0,"",0,"VK_NONAME","",""],[1,0,"",0,"",0,"VK_PA1","",""],[1,0,"",0,"",0,"VK_OEM_CLEAR","",""]],X=[],Y=[];for(let Z of $){let[Q,G,q,U,z,H,j,V,W]=Z;if(!Y[G]){if(Y[G]=!0,N$0[G]=q,T$0[q]=G,w$0[q.toLowerCase()]=G,Q){if(OK[G]=U,U!==0&&U!==3&&U!==5&&U!==4&&U!==6&&U!==57)gN[U]=G}}if(!X[U]){if(X[U]=!0,!z)throw Error(`String representation missing for key code ${U} around scan code ${q}`);RK.define(U,z),hN.define(U,V||z),fN.define(U,W||V||z)}if(H)pN[H]=U;if(j)_$0[j]=U}gN[3]=46})();(function(J){function $(q){return RK.keyCodeToStr(q)}J.toString=$;function X(q){return RK.strToKeyCode(q)}J.fromString=X;function Y(q){return hN.keyCodeToStr(q)}J.toUserSettingsUS=Y;function Z(q){return fN.keyCodeToStr(q)}J.toUserSettingsGeneral=Z;function Q(q){return hN.strToKeyCode(q)||fN.strToKeyCode(q)}J.fromUserSettings=Q;function G(q){if(q>=98&&q<=113)return null;switch(q){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return RK.keyCodeToStr(q)}J.toElectronAccelerator=G})(UJ||(UJ={}))});var fq,mN,Gj,qj,Zg;var uN=w(()=>{L1();mN=globalThis.vscode;if(typeof mN<"u"&&typeof mN.process<"u"){let J=mN.process;fq={get platform(){return J.platform},get arch(){return J.arch},get env(){return J.env},cwd(){return J.cwd()}}}else if(typeof process<"u")fq={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}};else fq={get platform(){return p6?"win32":t0?"darwin":"linux"},get arch(){return},get env(){return{}},cwd(){return"/"}};Gj=fq.cwd,qj=fq.env,Zg=fq.platform});function b$0(J,$){if(J===null||typeof J!=="object")throw new lN($,"Object",J)}function n5(J,$){if(typeof J!=="string")throw new lN($,"string",J)}function d1(J){return J===U7||J===d9}function cN(J){return J===U7}function KQ(J){return J>=k$0&&J<=I$0||J>=E$0&&J<=y$0}function _K(J,$,X,Y){let Z="",Q=0,G=-1,q=0,U=0;for(let z=0;z<=J.length;++z){if(z<J.length)U=J.charCodeAt(z);else if(Y(U))break;else U=U7;if(Y(U)){if(G===z-1||q===1);else if(q===2){if(Z.length<2||Q!==2||Z.charCodeAt(Z.length-1)!==AQ||Z.charCodeAt(Z.length-2)!==AQ){if(Z.length>2){let H=Z.lastIndexOf(X);if(H===-1)Z="",Q=0;else Z=Z.slice(0,H),Q=Z.length-1-Z.lastIndexOf(X);G=z,q=0;continue}else if(Z.length!==0){Z="",Q=0,G=z,q=0;continue}}if($)Z+=Z.length>0?`${X}..`:"..",Q=2}else{if(Z.length>0)Z+=`${X}${J.slice(G+1,z)}`;else Z=J.slice(G+1,z);Q=z-G-1}G=z,q=0}else if(U===AQ&&q!==-1)++q;else q=-1}return Z}function Qg(J,$){b$0($,"pathObject");let X=$.dir||$.root,Y=$.base||`${$.name||""}${$.ext||""}`;if(!X)return Y;return X===$.root?`${X}${Y}`:`${X}${J}${Y}`}var k$0=65,E$0=97,I$0=90,y$0=122,AQ=46,U7=47,d9=92,FQ=58,x$0=63,lN,PQ,t7,S$0,b6,NK,Gg,qg,TK,zJ,Ug,Z$;var kY=w(()=>{uN();lN=class lN extends Error{constructor(J,$,X){let Y;if(typeof $==="string"&&$.indexOf("not ")===0)Y="must not be",$=$.replace(/^not /,"");else Y="must be";let Z=J.indexOf(".")!==-1?"property":"argument",Q=`The "${J}" ${Z} ${Y} of type ${$}`;Q+=`. Received type ${typeof X}`;super(Q);this.code="ERR_INVALID_ARG_TYPE"}};PQ=Zg==="win32";t7={resolve(...J){let $="",X="",Y=!1;for(let Z=J.length-1;Z>=-1;Z--){let Q;if(Z>=0){if(Q=J[Z],n5(Q,"path"),Q.length===0)continue}else if($.length===0)Q=Gj();else if(Q=qj[`=${$}`]||Gj(),Q===void 0||Q.slice(0,2).toLowerCase()!==$.toLowerCase()&&Q.charCodeAt(2)===d9)Q=`${$}\\`;let G=Q.length,q=0,U="",z=!1,H=Q.charCodeAt(0);if(G===1){if(d1(H))q=1,z=!0}else if(d1(H))if(z=!0,d1(Q.charCodeAt(1))){let j=2,V=j;while(j<G&&!d1(Q.charCodeAt(j)))j++;if(j<G&&j!==V){let W=Q.slice(V,j);V=j;while(j<G&&d1(Q.charCodeAt(j)))j++;if(j<G&&j!==V){V=j;while(j<G&&!d1(Q.charCodeAt(j)))j++;if(j===G||j!==V)U=`\\\\${W}\\${Q.slice(V,j)}`,q=j}}}else q=1;else if(KQ(H)&&Q.charCodeAt(1)===FQ){if(U=Q.slice(0,2),q=2,G>2&&d1(Q.charCodeAt(2)))z=!0,q=3}if(U.length>0)if($.length>0){if(U.toLowerCase()!==$.toLowerCase())continue}else $=U;if(Y){if($.length>0)break}else if(X=`${Q.slice(q)}\\${X}`,Y=z,z&&$.length>0)break}return X=_K(X,!Y,"\\",d1),Y?`${$}\\${X}`:`${$}${X}`||"."},normalize(J){n5(J,"path");let $=J.length;if($===0)return".";let X=0,Y,Z=!1,Q=J.charCodeAt(0);if($===1)return cN(Q)?"\\":J;if(d1(Q))if(Z=!0,d1(J.charCodeAt(1))){let q=2,U=q;while(q<$&&!d1(J.charCodeAt(q)))q++;if(q<$&&q!==U){let z=J.slice(U,q);U=q;while(q<$&&d1(J.charCodeAt(q)))q++;if(q<$&&q!==U){U=q;while(q<$&&!d1(J.charCodeAt(q)))q++;if(q===$)return`\\\\${z}\\${J.slice(U)}\\`;if(q!==U)Y=`\\\\${z}\\${J.slice(U,q)}`,X=q}}}else X=1;else if(KQ(Q)&&J.charCodeAt(1)===FQ){if(Y=J.slice(0,2),X=2,$>2&&d1(J.charCodeAt(2)))Z=!0,X=3}let G=X<$?_K(J.slice(X),!Z,"\\",d1):"";if(G.length===0&&!Z)G=".";if(G.length>0&&d1(J.charCodeAt($-1)))G+="\\";if(Y===void 0)return Z?`\\${G}`:G;return Z?`${Y}\\${G}`:`${Y}${G}`},isAbsolute(J){n5(J,"path");let $=J.length;if($===0)return!1;let X=J.charCodeAt(0);return d1(X)||$>2&&KQ(X)&&J.charCodeAt(1)===FQ&&d1(J.charCodeAt(2))},join(...J){if(J.length===0)return".";let $,X;for(let Q=0;Q<J.length;++Q){let G=J[Q];if(n5(G,"path"),G.length>0)if($===void 0)$=X=G;else $+=`\\${G}`}if($===void 0)return".";let Y=!0,Z=0;if(typeof X==="string"&&d1(X.charCodeAt(0))){++Z;let Q=X.length;if(Q>1&&d1(X.charCodeAt(1))){if(++Z,Q>2)if(d1(X.charCodeAt(2)))++Z;else Y=!1}}if(Y){while(Z<$.length&&d1($.charCodeAt(Z)))Z++;if(Z>=2)$=`\\${$.slice(Z)}`}return t7.normalize($)},relative(J,$){if(n5(J,"from"),n5($,"to"),J===$)return"";let X=t7.resolve(J),Y=t7.resolve($);if(X===Y)return"";if(J=X.toLowerCase(),$=Y.toLowerCase(),J===$)return"";let Z=0;while(Z<J.length&&J.charCodeAt(Z)===d9)Z++;let Q=J.length;while(Q-1>Z&&J.charCodeAt(Q-1)===d9)Q--;let G=Q-Z,q=0;while(q<$.length&&$.charCodeAt(q)===d9)q++;let U=$.length;while(U-1>q&&$.charCodeAt(U-1)===d9)U--;let z=U-q,H=G<z?G:z,j=-1,V=0;for(;V<H;V++){let B=J.charCodeAt(Z+V);if(B!==$.charCodeAt(q+V))break;else if(B===d9)j=V}if(V!==H){if(j===-1)return Y}else{if(z>H){if($.charCodeAt(q+V)===d9)return Y.slice(q+V+1);if(V===2)return Y.slice(q+V)}if(G>H){if(J.charCodeAt(Z+V)===d9)j=V;else if(V===2)j=3}if(j===-1)j=0}let W="";for(V=Z+j+1;V<=Q;++V)if(V===Q||J.charCodeAt(V)===d9)W+=W.length===0?"..":"\\..";if(q+=j,W.length>0)return`${W}${Y.slice(q,U)}`;if(Y.charCodeAt(q)===d9)++q;return Y.slice(q,U)},toNamespacedPath(J){if(typeof J!=="string"||J.length===0)return J;let $=t7.resolve(J);if($.length<=2)return J;if($.charCodeAt(0)===d9){if($.charCodeAt(1)===d9){let X=$.charCodeAt(2);if(X!==x$0&&X!==AQ)return`\\\\?\\UNC\\${$.slice(2)}`}}else if(KQ($.charCodeAt(0))&&$.charCodeAt(1)===FQ&&$.charCodeAt(2)===d9)return`\\\\?\\${$}`;return J},dirname(J){n5(J,"path");let $=J.length;if($===0)return".";let X=-1,Y=0,Z=J.charCodeAt(0);if($===1)return d1(Z)?J:".";if(d1(Z)){if(X=Y=1,d1(J.charCodeAt(1))){let q=2,U=q;while(q<$&&!d1(J.charCodeAt(q)))q++;if(q<$&&q!==U){U=q;while(q<$&&d1(J.charCodeAt(q)))q++;if(q<$&&q!==U){U=q;while(q<$&&!d1(J.charCodeAt(q)))q++;if(q===$)return J;if(q!==U)X=Y=q+1}}}}else if(KQ(Z)&&J.charCodeAt(1)===FQ)X=$>2&&d1(J.charCodeAt(2))?3:2,Y=X;let Q=-1,G=!0;for(let q=$-1;q>=Y;--q)if(d1(J.charCodeAt(q))){if(!G){Q=q;break}}else G=!1;if(Q===-1){if(X===-1)return".";Q=X}return J.slice(0,Q)},basename(J,$){if($!==void 0)n5($,"ext");n5(J,"path");let X=0,Y=-1,Z=!0,Q;if(J.length>=2&&KQ(J.charCodeAt(0))&&J.charCodeAt(1)===FQ)X=2;if($!==void 0&&$.length>0&&$.length<=J.length){if($===J)return"";let G=$.length-1,q=-1;for(Q=J.length-1;Q>=X;--Q){let U=J.charCodeAt(Q);if(d1(U)){if(!Z){X=Q+1;break}}else{if(q===-1)Z=!1,q=Q+1;if(G>=0)if(U===$.charCodeAt(G)){if(--G===-1)Y=Q}else G=-1,Y=q}}if(X===Y)Y=q;else if(Y===-1)Y=J.length;return J.slice(X,Y)}for(Q=J.length-1;Q>=X;--Q)if(d1(J.charCodeAt(Q))){if(!Z){X=Q+1;break}}else if(Y===-1)Z=!1,Y=Q+1;if(Y===-1)return"";return J.slice(X,Y)},extname(J){n5(J,"path");let $=0,X=-1,Y=0,Z=-1,Q=!0,G=0;if(J.length>=2&&J.charCodeAt(1)===FQ&&KQ(J.charCodeAt(0)))$=Y=2;for(let q=J.length-1;q>=$;--q){let U=J.charCodeAt(q);if(d1(U)){if(!Q){Y=q+1;break}continue}if(Z===-1)Q=!1,Z=q+1;if(U===AQ){if(X===-1)X=q;else if(G!==1)G=1}else if(X!==-1)G=-1}if(X===-1||Z===-1||G===0||G===1&&X===Z-1&&X===Y+1)return"";return J.slice(X,Z)},format:Qg.bind(null,"\\"),parse(J){n5(J,"path");let $={root:"",dir:"",base:"",ext:"",name:""};if(J.length===0)return $;let X=J.length,Y=0,Z=J.charCodeAt(0);if(X===1){if(d1(Z))return $.root=$.dir=J,$;return $.base=$.name=J,$}if(d1(Z)){if(Y=1,d1(J.charCodeAt(1))){let j=2,V=j;while(j<X&&!d1(J.charCodeAt(j)))j++;if(j<X&&j!==V){V=j;while(j<X&&d1(J.charCodeAt(j)))j++;if(j<X&&j!==V){V=j;while(j<X&&!d1(J.charCodeAt(j)))j++;if(j===X)Y=j;else if(j!==V)Y=j+1}}}}else if(KQ(Z)&&J.charCodeAt(1)===FQ){if(X<=2)return $.root=$.dir=J,$;if(Y=2,d1(J.charCodeAt(2))){if(X===3)return $.root=$.dir=J,$;Y=3}}if(Y>0)$.root=J.slice(0,Y);let Q=-1,G=Y,q=-1,U=!0,z=J.length-1,H=0;for(;z>=Y;--z){if(Z=J.charCodeAt(z),d1(Z)){if(!U){G=z+1;break}continue}if(q===-1)U=!1,q=z+1;if(Z===AQ){if(Q===-1)Q=z;else if(H!==1)H=1}else if(Q!==-1)H=-1}if(q!==-1)if(Q===-1||H===0||H===1&&Q===q-1&&Q===G+1)$.base=$.name=J.slice(G,q);else $.name=J.slice(G,Q),$.base=J.slice(G,q),$.ext=J.slice(Q,q);if(G>0&&G!==Y)$.dir=J.slice(0,G-1);else $.dir=$.root;return $},sep:"\\",delimiter:";",win32:null,posix:null},S$0=(()=>{if(PQ){let J=/\\/g;return()=>{let $=Gj().replace(J,"/");return $.slice($.indexOf("/"))}}return()=>Gj()})(),b6={resolve(...J){let $="",X=!1;for(let Y=J.length-1;Y>=-1&&!X;Y--){let Z=Y>=0?J[Y]:S$0();if(n5(Z,"path"),Z.length===0)continue;$=`${Z}/${$}`,X=Z.charCodeAt(0)===U7}if($=_K($,!X,"/",cN),X)return`/${$}`;return $.length>0?$:"."},normalize(J){if(n5(J,"path"),J.length===0)return".";let $=J.charCodeAt(0)===U7,X=J.charCodeAt(J.length-1)===U7;if(J=_K(J,!$,"/",cN),J.length===0){if($)return"/";return X?"./":"."}if(X)J+="/";return $?`/${J}`:J},isAbsolute(J){return n5(J,"path"),J.length>0&&J.charCodeAt(0)===U7},join(...J){if(J.length===0)return".";let $;for(let X=0;X<J.length;++X){let Y=J[X];if(n5(Y,"path"),Y.length>0)if($===void 0)$=Y;else $+=`/${Y}`}if($===void 0)return".";return b6.normalize($)},relative(J,$){if(n5(J,"from"),n5($,"to"),J===$)return"";if(J=b6.resolve(J),$=b6.resolve($),J===$)return"";let X=1,Y=J.length,Z=Y-X,Q=1,G=$.length-Q,q=Z<G?Z:G,U=-1,z=0;for(;z<q;z++){let j=J.charCodeAt(X+z);if(j!==$.charCodeAt(Q+z))break;else if(j===U7)U=z}if(z===q){if(G>q){if($.charCodeAt(Q+z)===U7)return $.slice(Q+z+1);if(z===0)return $.slice(Q+z)}else if(Z>q){if(J.charCodeAt(X+z)===U7)U=z;else if(z===0)U=0}}let H="";for(z=X+U+1;z<=Y;++z)if(z===Y||J.charCodeAt(z)===U7)H+=H.length===0?"..":"/..";return`${H}${$.slice(Q+U)}`},toNamespacedPath(J){return J},dirname(J){if(n5(J,"path"),J.length===0)return".";let $=J.charCodeAt(0)===U7,X=-1,Y=!0;for(let Z=J.length-1;Z>=1;--Z)if(J.charCodeAt(Z)===U7){if(!Y){X=Z;break}}else Y=!1;if(X===-1)return $?"/":".";if($&&X===1)return"//";return J.slice(0,X)},basename(J,$){if($!==void 0)n5($,"ext");n5(J,"path");let X=0,Y=-1,Z=!0,Q;if($!==void 0&&$.length>0&&$.length<=J.length){if($===J)return"";let G=$.length-1,q=-1;for(Q=J.length-1;Q>=0;--Q){let U=J.charCodeAt(Q);if(U===U7){if(!Z){X=Q+1;break}}else{if(q===-1)Z=!1,q=Q+1;if(G>=0)if(U===$.charCodeAt(G)){if(--G===-1)Y=Q}else G=-1,Y=q}}if(X===Y)Y=q;else if(Y===-1)Y=J.length;return J.slice(X,Y)}for(Q=J.length-1;Q>=0;--Q)if(J.charCodeAt(Q)===U7){if(!Z){X=Q+1;break}}else if(Y===-1)Z=!1,Y=Q+1;if(Y===-1)return"";return J.slice(X,Y)},extname(J){n5(J,"path");let $=-1,X=0,Y=-1,Z=!0,Q=0;for(let G=J.length-1;G>=0;--G){let q=J.charCodeAt(G);if(q===U7){if(!Z){X=G+1;break}continue}if(Y===-1)Z=!1,Y=G+1;if(q===AQ){if($===-1)$=G;else if(Q!==1)Q=1}else if($!==-1)Q=-1}if($===-1||Y===-1||Q===0||Q===1&&$===Y-1&&$===X+1)return"";return J.slice($,Y)},format:Qg.bind(null,"/"),parse(J){n5(J,"path");let $={root:"",dir:"",base:"",ext:"",name:""};if(J.length===0)return $;let X=J.charCodeAt(0)===U7,Y;if(X)$.root="/",Y=1;else Y=0;let Z=-1,Q=0,G=-1,q=!0,U=J.length-1,z=0;for(;U>=Y;--U){let H=J.charCodeAt(U);if(H===U7){if(!q){Q=U+1;break}continue}if(G===-1)q=!1,G=U+1;if(H===AQ){if(Z===-1)Z=U;else if(z!==1)z=1}else if(Z!==-1)z=-1}if(G!==-1){let H=Q===0&&X?1:Q;if(Z===-1||z===0||z===1&&Z===G-1&&Z===Q+1)$.base=$.name=J.slice(H,G);else $.name=J.slice(H,Z),$.base=J.slice(H,G),$.ext=J.slice(Z,G)}if(Q>0)$.dir=J.slice(0,Q-1);else if(X)$.dir="/";return $},sep:"/",delimiter:":",win32:null,posix:null};b6.win32=t7.win32=t7;b6.posix=t7.posix=b6;NK=PQ?t7.normalize:b6.normalize,Gg=PQ?t7.resolve:b6.resolve,qg=PQ?t7.relative:b6.relative,TK=PQ?t7.dirname:b6.dirname,zJ=PQ?t7.basename:b6.basename,Ug=PQ?t7.extname:b6.extname,Z$=PQ?t7.sep:b6.sep});function f$0(J,$){if(!J.scheme&&$)throw Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${J.authority}", path: "${J.path}", query: "${J.query}", fragment: "${J.fragment}"}`);if(J.scheme&&!C$0.test(J.scheme))throw Error("[UriError]: Scheme contains illegal characters.");if(J.path){if(J.authority){if(!v$0.test(J.path))throw Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(h$0.test(J.path))throw Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function g$0(J,$){if(!J&&!$)return"file";return J}function p$0(J,$){switch(J){case"https":case"http":case"file":if(!$)$=Q$;else if($[0]!==Q$)$=Q$+$;break}return $}class C0{static isUri(J){if(J instanceof C0)return!0;if(!J)return!1;return typeof J.authority==="string"&&typeof J.fragment==="string"&&typeof J.path==="string"&&typeof J.query==="string"&&typeof J.scheme==="string"&&typeof J.fsPath==="string"&&typeof J.with==="function"&&typeof J.toString==="function"}constructor(J,$,X,Y,Z,Q=!1){if(typeof J==="object")this.scheme=J.scheme||Y5,this.authority=J.authority||Y5,this.path=J.path||Y5,this.query=J.query||Y5,this.fragment=J.fragment||Y5;else this.scheme=g$0(J,Q),this.authority=$||Y5,this.path=p$0(this.scheme,X||Y5),this.query=Y||Y5,this.fragment=Z||Y5,f$0(this,Q)}get fsPath(){return Uj(this,!1)}with(J){if(!J)return this;let{scheme:$,authority:X,path:Y,query:Z,fragment:Q}=J;if($===void 0)$=this.scheme;else if($===null)$=Y5;if(X===void 0)X=this.authority;else if(X===null)X=Y5;if(Y===void 0)Y=this.path;else if(Y===null)Y=Y5;if(Z===void 0)Z=this.query;else if(Z===null)Z=Y5;if(Q===void 0)Q=this.fragment;else if(Q===null)Q=Y5;if($===this.scheme&&X===this.authority&&Y===this.path&&Z===this.query&&Q===this.fragment)return this;return new DG($,X,Y,Z,Q)}static parse(J,$=!1){let X=m$0.exec(J);if(!X)return new DG(Y5,Y5,Y5,Y5,Y5);return new DG(X[2]||Y5,wK(X[4]||Y5),wK(X[5]||Y5),wK(X[7]||Y5),wK(X[9]||Y5),$)}static file(J){let $=Y5;if(p6)J=J.replace(/\\/g,Q$);if(J[0]===Q$&&J[1]===Q$){let X=J.indexOf(Q$,2);if(X===-1)$=J.substring(2),J=Q$;else $=J.substring(2,X),J=J.substring(X)||Q$}return new DG("file",$,J,Y5,Y5)}static from(J,$){return new DG(J.scheme,J.authority,J.path,J.query,J.fragment,$)}static joinPath(J,...$){if(!J.path)throw Error("[UriError]: cannot call joinPath on URI without path");let X;if(p6&&J.scheme==="file")X=C0.file(t7.join(Uj(J,!0),...$)).path;else X=b6.join(J.path,...$);return J.with({path:X})}toString(J=!1){return sN(this,J)}toJSON(){return this}static revive(J){var $,X;if(!J)return J;else if(J instanceof C0)return J;else{let Y=new DG(J);return Y._formatted=($=J.external)!==null&&$!==void 0?$:null,Y._fsPath=J._sep===jg?(X=J.fsPath)!==null&&X!==void 0?X:null:null,Y}}}function zg(J,$,X){let Y=void 0,Z=-1;for(let Q=0;Q<J.length;Q++){let G=J.charCodeAt(Q);if(G>=97&&G<=122||G>=65&&G<=90||G>=48&&G<=57||G===45||G===46||G===95||G===126||$&&G===47||X&&G===91||X&&G===93||X&&G===58){if(Z!==-1)Y+=encodeURIComponent(J.substring(Z,Q)),Z=-1;if(Y!==void 0)Y+=J.charAt(Q)}else{if(Y===void 0)Y=J.substr(0,Q);let q=Vg[G];if(q!==void 0){if(Z!==-1)Y+=encodeURIComponent(J.substring(Z,Q)),Z=-1;Y+=q}else if(Z===-1)Z=Q}}if(Z!==-1)Y+=encodeURIComponent(J.substring(Z));return Y!==void 0?Y:J}function u$0(J){let $=void 0;for(let X=0;X<J.length;X++){let Y=J.charCodeAt(X);if(Y===35||Y===63){if($===void 0)$=J.substr(0,X);$+=Vg[Y]}else if($!==void 0)$+=J[X]}return $!==void 0?$:J}function Uj(J,$){let X;if(J.authority&&J.path.length>1&&J.scheme==="file")X=`//${J.authority}${J.path}`;else if(J.path.charCodeAt(0)===47&&(J.path.charCodeAt(1)>=65&&J.path.charCodeAt(1)<=90||J.path.charCodeAt(1)>=97&&J.path.charCodeAt(1)<=122)&&J.path.charCodeAt(2)===58)if(!$)X=J.path[1].toLowerCase()+J.path.substr(2);else X=J.path.substr(1);else X=J.path;if(p6)X=X.replace(/\//g,"\\");return X}function sN(J,$){let X=!$?zg:u$0,Y="",{scheme:Z,authority:Q,path:G,query:q,fragment:U}=J;if(Z)Y+=Z,Y+=":";if(Q||Z==="file")Y+=Q$,Y+=Q$;if(Q){let z=Q.indexOf("@");if(z!==-1){let H=Q.substr(0,z);if(Q=Q.substr(z+1),z=H.lastIndexOf(":"),z===-1)Y+=X(H,!1,!1);else Y+=X(H.substr(0,z),!1,!1),Y+=":",Y+=X(H.substr(z+1),!1,!0);Y+="@"}if(Q=Q.toLowerCase(),z=Q.lastIndexOf(":"),z===-1)Y+=X(Q,!1,!0);else Y+=X(Q.substr(0,z),!1,!0),Y+=Q.substr(z)}if(G){if(G.length>=3&&G.charCodeAt(0)===47&&G.charCodeAt(2)===58){let z=G.charCodeAt(1);if(z>=65&&z<=90)G=`/${String.fromCharCode(z+32)}:${G.substr(3)}`}else if(G.length>=2&&G.charCodeAt(1)===58){let z=G.charCodeAt(0);if(z>=65&&z<=90)G=`${String.fromCharCode(z+32)}:${G.substr(2)}`}Y+=X(G,!0,!1)}if(q)Y+="?",Y+=X(q,!1,!1);if(U)Y+="#",Y+=!$?zg(U,!1,!1):U;return Y}function Wg(J){try{return decodeURIComponent(J)}catch($){if(J.length>3)return J.substr(0,3)+Wg(J.substr(3));else return J}}function wK(J){if(!J.match(Hg))return J;return J.replace(Hg,($)=>Wg($))}var C$0,v$0,h$0,Y5="",Q$="/",m$0,jg,DG,Vg,Hg;var V5=w(()=>{kY();L1();C$0=/^\w[\w\d+.-]*$/,v$0=/^\//,h$0=/^\/\//;m$0=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;jg=p6?1:void 0;DG=class DG extends C0{constructor(){super(...arguments);this._formatted=null,this._fsPath=null}get fsPath(){if(!this._fsPath)this._fsPath=Uj(this,!1);return this._fsPath}toString(J=!1){if(!J){if(!this._formatted)this._formatted=sN(this,!1);return this._formatted}else return sN(this,!0)}toJSON(){let J={$mid:1};if(this._fsPath)J.fsPath=this._fsPath,J._sep=jg;if(this._formatted)J.external=this._formatted;if(this.path)J.path=this.path;if(this.scheme)J.scheme=this.scheme;if(this.authority)J.authority=this.authority;if(this.query)J.query=this.query;if(this.fragment)J.fragment=this.fragment;return J}};Vg={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};Hg=/(%[0-9A-Za-z][0-9A-Za-z])+/g});class g{constructor(J,$){this.lineNumber=J,this.column=$}with(J=this.lineNumber,$=this.column){if(J===this.lineNumber&&$===this.column)return this;else return new g(J,$)}delta(J=0,$=0){return this.with(this.lineNumber+J,this.column+$)}equals(J){return g.equals(this,J)}static equals(J,$){if(!J&&!$)return!0;return!!J&&!!$&&J.lineNumber===$.lineNumber&&J.column===$.column}isBefore(J){return g.isBefore(this,J)}static isBefore(J,$){if(J.lineNumber<$.lineNumber)return!0;if($.lineNumber<J.lineNumber)return!1;return J.column<$.column}isBeforeOrEqual(J){return g.isBeforeOrEqual(this,J)}static isBeforeOrEqual(J,$){if(J.lineNumber<$.lineNumber)return!0;if($.lineNumber<J.lineNumber)return!1;return J.column<=$.column}static compare(J,$){let X=J.lineNumber|0,Y=$.lineNumber|0;if(X===Y){let Z=J.column|0,Q=$.column|0;return Z-Q}return X-Y}clone(){return new g(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(J){return new g(J.lineNumber,J.column)}static isIPosition(J){return J&&typeof J.lineNumber==="number"&&typeof J.column==="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}class k{constructor(J,$,X,Y){if(J>X||J===X&&$>Y)this.startLineNumber=X,this.startColumn=Y,this.endLineNumber=J,this.endColumn=$;else this.startLineNumber=J,this.startColumn=$,this.endLineNumber=X,this.endColumn=Y}isEmpty(){return k.isEmpty(this)}static isEmpty(J){return J.startLineNumber===J.endLineNumber&&J.startColumn===J.endColumn}containsPosition(J){return k.containsPosition(this,J)}static containsPosition(J,$){if($.lineNumber<J.startLineNumber||$.lineNumber>J.endLineNumber)return!1;if($.lineNumber===J.startLineNumber&&$.column<J.startColumn)return!1;if($.lineNumber===J.endLineNumber&&$.column>J.endColumn)return!1;return!0}static strictContainsPosition(J,$){if($.lineNumber<J.startLineNumber||$.lineNumber>J.endLineNumber)return!1;if($.lineNumber===J.startLineNumber&&$.column<=J.startColumn)return!1;if($.lineNumber===J.endLineNumber&&$.column>=J.endColumn)return!1;return!0}containsRange(J){return k.containsRange(this,J)}static containsRange(J,$){if($.startLineNumber<J.startLineNumber||$.endLineNumber<J.startLineNumber)return!1;if($.startLineNumber>J.endLineNumber||$.endLineNumber>J.endLineNumber)return!1;if($.startLineNumber===J.startLineNumber&&$.startColumn<J.startColumn)return!1;if($.endLineNumber===J.endLineNumber&&$.endColumn>J.endColumn)return!1;return!0}strictContainsRange(J){return k.strictContainsRange(this,J)}static strictContainsRange(J,$){if($.startLineNumber<J.startLineNumber||$.endLineNumber<J.startLineNumber)return!1;if($.startLineNumber>J.endLineNumber||$.endLineNumber>J.endLineNumber)return!1;if($.startLineNumber===J.startLineNumber&&$.startColumn<=J.startColumn)return!1;if($.endLineNumber===J.endLineNumber&&$.endColumn>=J.endColumn)return!1;return!0}plusRange(J){return k.plusRange(this,J)}static plusRange(J,$){let X,Y,Z,Q;if($.startLineNumber<J.startLineNumber)X=$.startLineNumber,Y=$.startColumn;else if($.startLineNumber===J.startLineNumber)X=$.startLineNumber,Y=Math.min($.startColumn,J.startColumn);else X=J.startLineNumber,Y=J.startColumn;if($.endLineNumber>J.endLineNumber)Z=$.endLineNumber,Q=$.endColumn;else if($.endLineNumber===J.endLineNumber)Z=$.endLineNumber,Q=Math.max($.endColumn,J.endColumn);else Z=J.endLineNumber,Q=J.endColumn;return new k(X,Y,Z,Q)}intersectRanges(J){return k.intersectRanges(this,J)}static intersectRanges(J,$){let{startLineNumber:X,startColumn:Y,endLineNumber:Z,endColumn:Q}=J,G=$.startLineNumber,q=$.startColumn,U=$.endLineNumber,z=$.endColumn;if(X<G)X=G,Y=q;else if(X===G)Y=Math.max(Y,q);if(Z>U)Z=U,Q=z;else if(Z===U)Q=Math.min(Q,z);if(X>Z)return null;if(X===Z&&Y>Q)return null;return new k(X,Y,Z,Q)}equalsRange(J){return k.equalsRange(this,J)}static equalsRange(J,$){if(!J&&!$)return!0;return!!J&&!!$&&J.startLineNumber===$.startLineNumber&&J.startColumn===$.startColumn&&J.endLineNumber===$.endLineNumber&&J.endColumn===$.endColumn}getEndPosition(){return k.getEndPosition(this)}static getEndPosition(J){return new g(J.endLineNumber,J.endColumn)}getStartPosition(){return k.getStartPosition(this)}static getStartPosition(J){return new g(J.startLineNumber,J.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(J,$){return new k(this.startLineNumber,this.startColumn,J,$)}setStartPosition(J,$){return new k(J,$,this.endLineNumber,this.endColumn)}collapseToStart(){return k.collapseToStart(this)}static collapseToStart(J){return new k(J.startLineNumber,J.startColumn,J.startLineNumber,J.startColumn)}collapseToEnd(){return k.collapseToEnd(this)}static collapseToEnd(J){return new k(J.endLineNumber,J.endColumn,J.endLineNumber,J.endColumn)}delta(J){return new k(this.startLineNumber+J,this.startColumn,this.endLineNumber+J,this.endColumn)}static fromPositions(J,$=J){return new k(J.lineNumber,J.column,$.lineNumber,$.column)}static lift(J){if(!J)return null;return new k(J.startLineNumber,J.startColumn,J.endLineNumber,J.endColumn)}static isIRange(J){return J&&typeof J.startLineNumber==="number"&&typeof J.startColumn==="number"&&typeof J.endLineNumber==="number"&&typeof J.endColumn==="number"}static areIntersectingOrTouching(J,$){if(J.endLineNumber<$.startLineNumber||J.endLineNumber===$.startLineNumber&&J.endColumn<$.startColumn)return!1;if($.endLineNumber<J.startLineNumber||$.endLineNumber===J.startLineNumber&&$.endColumn<J.startColumn)return!1;return!0}static areIntersecting(J,$){if(J.endLineNumber<$.startLineNumber||J.endLineNumber===$.startLineNumber&&J.endColumn<=$.startColumn)return!1;if($.endLineNumber<J.startLineNumber||$.endLineNumber===J.startLineNumber&&$.endColumn<=J.startColumn)return!1;return!0}static compareRangesUsingStarts(J,$){if(J&&$){let Z=J.startLineNumber|0,Q=$.startLineNumber|0;if(Z===Q){let G=J.startColumn|0,q=$.startColumn|0;if(G===q){let U=J.endLineNumber|0,z=$.endLineNumber|0;if(U===z){let H=J.endColumn|0,j=$.endColumn|0;return H-j}return U-z}return G-q}return Z-Q}return(J?1:0)-($?1:0)}static compareRangesUsingEnds(J,$){if(J.endLineNumber===$.endLineNumber){if(J.endColumn===$.endColumn){if(J.startLineNumber===$.startLineNumber)return J.startColumn-$.startColumn;return J.startLineNumber-$.startLineNumber}return J.endColumn-$.endColumn}return J.endLineNumber-$.endLineNumber}static spansMultipleLines(J){return J.endLineNumber>J.startLineNumber}toJSON(){return this}}var i0=()=>{};var p0;var o5=w(()=>{i0();p0=class p0 extends k{constructor(J,$,X,Y){super(J,$,X,Y);this.selectionStartLineNumber=J,this.selectionStartColumn=$,this.positionLineNumber=X,this.positionColumn=Y}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(J){return p0.selectionsEqual(this,J)}static selectionsEqual(J,$){return J.selectionStartLineNumber===$.selectionStartLineNumber&&J.selectionStartColumn===$.selectionStartColumn&&J.positionLineNumber===$.positionLineNumber&&J.positionColumn===$.positionColumn}getDirection(){if(this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn)return 0;return 1}setEndPosition(J,$){if(this.getDirection()===0)return new p0(this.startLineNumber,this.startColumn,J,$);return new p0(J,$,this.startLineNumber,this.startColumn)}getPosition(){return new g(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new g(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(J,$){if(this.getDirection()===0)return new p0(J,$,this.endLineNumber,this.endColumn);return new p0(this.endLineNumber,this.endColumn,J,$)}static fromPositions(J,$=J){return new p0(J.lineNumber,J.column,$.lineNumber,$.column)}static fromRange(J,$){if($===0)return new p0(J.startLineNumber,J.startColumn,J.endLineNumber,J.endColumn);else return new p0(J.endLineNumber,J.endColumn,J.startLineNumber,J.startColumn)}static liftSelection(J){return new p0(J.selectionStartLineNumber,J.selectionStartColumn,J.positionLineNumber,J.positionColumn)}static selectionsArrEqual(J,$){if(J&&!$||!J&&$)return!1;if(!J&&!$)return!0;if(J.length!==$.length)return!1;for(let X=0,Y=J.length;X<Y;X++)if(!this.selectionsEqual(J[X],$[X]))return!1;return!0}static isISelection(J){return J&&typeof J.selectionStartLineNumber==="number"&&typeof J.selectionStartColumn==="number"&&typeof J.positionLineNumber==="number"&&typeof J.positionColumn==="number"}static createWithDirection(J,$,X,Y,Z){if(Z===0)return new p0(J,$,X,Y);return new p0(X,Y,J,$)}}});function _(J,$){if(N5($)){let X=aN[$];if(X===void 0)throw Error(`${J} references an unknown codicon: ${$}`);$=X}return aN[J]=$,{id:J}}function LK(){return aN}var aN,F0;var k5=w(()=>{aN=Object.create(null);F0={add:_("add",60000),plus:_("plus",60000),gistNew:_("gist-new",60000),repoCreate:_("repo-create",60000),lightbulb:_("lightbulb",60001),lightBulb:_("light-bulb",60001),repo:_("repo",60002),repoDelete:_("repo-delete",60002),gistFork:_("gist-fork",60003),repoForked:_("repo-forked",60003),gitPullRequest:_("git-pull-request",60004),gitPullRequestAbandoned:_("git-pull-request-abandoned",60004),recordKeys:_("record-keys",60005),keyboard:_("keyboard",60005),tag:_("tag",60006),tagAdd:_("tag-add",60006),tagRemove:_("tag-remove",60006),gitPullRequestLabel:_("git-pull-request-label",60006),person:_("person",60007),personFollow:_("person-follow",60007),personOutline:_("person-outline",60007),personFilled:_("person-filled",60007),gitBranch:_("git-branch",60008),gitBranchCreate:_("git-branch-create",60008),gitBranchDelete:_("git-branch-delete",60008),sourceControl:_("source-control",60008),mirror:_("mirror",60009),mirrorPublic:_("mirror-public",60009),star:_("star",60010),starAdd:_("star-add",60010),starDelete:_("star-delete",60010),starEmpty:_("star-empty",60010),comment:_("comment",60011),commentAdd:_("comment-add",60011),alert:_("alert",60012),warning:_("warning",60012),search:_("search",60013),searchSave:_("search-save",60013),logOut:_("log-out",60014),signOut:_("sign-out",60014),logIn:_("log-in",60015),signIn:_("sign-in",60015),eye:_("eye",60016),eyeUnwatch:_("eye-unwatch",60016),eyeWatch:_("eye-watch",60016),circleFilled:_("circle-filled",60017),primitiveDot:_("primitive-dot",60017),closeDirty:_("close-dirty",60017),debugBreakpoint:_("debug-breakpoint",60017),debugBreakpointDisabled:_("debug-breakpoint-disabled",60017),debugBreakpointPending:_("debug-breakpoint-pending",60377),debugHint:_("debug-hint",60017),primitiveSquare:_("primitive-square",60018),edit:_("edit",60019),pencil:_("pencil",60019),info:_("info",60020),issueOpened:_("issue-opened",60020),gistPrivate:_("gist-private",60021),gitForkPrivate:_("git-fork-private",60021),lock:_("lock",60021),mirrorPrivate:_("mirror-private",60021),close:_("close",60022),removeClose:_("remove-close",60022),x:_("x",60022),repoSync:_("repo-sync",60023),sync:_("sync",60023),clone:_("clone",60024),desktopDownload:_("desktop-download",60024),beaker:_("beaker",60025),microscope:_("microscope",60025),vm:_("vm",60026),deviceDesktop:_("device-desktop",60026),file:_("file",60027),fileText:_("file-text",60027),more:_("more",60028),ellipsis:_("ellipsis",60028),kebabHorizontal:_("kebab-horizontal",60028),mailReply:_("mail-reply",60029),reply:_("reply",60029),organization:_("organization",60030),organizationFilled:_("organization-filled",60030),organizationOutline:_("organization-outline",60030),newFile:_("new-file",60031),fileAdd:_("file-add",60031),newFolder:_("new-folder",60032),fileDirectoryCreate:_("file-directory-create",60032),trash:_("trash",60033),trashcan:_("trashcan",60033),history:_("history",60034),clock:_("clock",60034),folder:_("folder",60035),fileDirectory:_("file-directory",60035),symbolFolder:_("symbol-folder",60035),logoGithub:_("logo-github",60036),markGithub:_("mark-github",60036),github:_("github",60036),terminal:_("terminal",60037),console:_("console",60037),repl:_("repl",60037),zap:_("zap",60038),symbolEvent:_("symbol-event",60038),error:_("error",60039),stop:_("stop",60039),variable:_("variable",60040),symbolVariable:_("symbol-variable",60040),array:_("array",60042),symbolArray:_("symbol-array",60042),symbolModule:_("symbol-module",60043),symbolPackage:_("symbol-package",60043),symbolNamespace:_("symbol-namespace",60043),symbolObject:_("symbol-object",60043),symbolMethod:_("symbol-method",60044),symbolFunction:_("symbol-function",60044),symbolConstructor:_("symbol-constructor",60044),symbolBoolean:_("symbol-boolean",60047),symbolNull:_("symbol-null",60047),symbolNumeric:_("symbol-numeric",60048),symbolNumber:_("symbol-number",60048),symbolStructure:_("symbol-structure",60049),symbolStruct:_("symbol-struct",60049),symbolParameter:_("symbol-parameter",60050),symbolTypeParameter:_("symbol-type-parameter",60050),symbolKey:_("symbol-key",60051),symbolText:_("symbol-text",60051),symbolReference:_("symbol-reference",60052),goToFile:_("go-to-file",60052),symbolEnum:_("symbol-enum",60053),symbolValue:_("symbol-value",60053),symbolRuler:_("symbol-ruler",60054),symbolUnit:_("symbol-unit",60054),activateBreakpoints:_("activate-breakpoints",60055),archive:_("archive",60056),arrowBoth:_("arrow-both",60057),arrowDown:_("arrow-down",60058),arrowLeft:_("arrow-left",60059),arrowRight:_("arrow-right",60060),arrowSmallDown:_("arrow-small-down",60061),arrowSmallLeft:_("arrow-small-left",60062),arrowSmallRight:_("arrow-small-right",60063),arrowSmallUp:_("arrow-small-up",60064),arrowUp:_("arrow-up",60065),bell:_("bell",60066),bold:_("bold",60067),book:_("book",60068),bookmark:_("bookmark",60069),debugBreakpointConditionalUnverified:_("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:_("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:_("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:_("debug-breakpoint-data-unverified",60072),debugBreakpointData:_("debug-breakpoint-data",60073),debugBreakpointDataDisabled:_("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:_("debug-breakpoint-log-unverified",60074),debugBreakpointLog:_("debug-breakpoint-log",60075),debugBreakpointLogDisabled:_("debug-breakpoint-log-disabled",60075),briefcase:_("briefcase",60076),broadcast:_("broadcast",60077),browser:_("browser",60078),bug:_("bug",60079),calendar:_("calendar",60080),caseSensitive:_("case-sensitive",60081),check:_("check",60082),checklist:_("checklist",60083),chevronDown:_("chevron-down",60084),dropDownButton:_("drop-down-button",60084),chevronLeft:_("chevron-left",60085),chevronRight:_("chevron-right",60086),chevronUp:_("chevron-up",60087),chromeClose:_("chrome-close",60088),chromeMaximize:_("chrome-maximize",60089),chromeMinimize:_("chrome-minimize",60090),chromeRestore:_("chrome-restore",60091),circle:_("circle",60092),circleOutline:_("circle-outline",60092),debugBreakpointUnverified:_("debug-breakpoint-unverified",60092),circleSlash:_("circle-slash",60093),circuitBoard:_("circuit-board",60094),clearAll:_("clear-all",60095),clippy:_("clippy",60096),closeAll:_("close-all",60097),cloudDownload:_("cloud-download",60098),cloudUpload:_("cloud-upload",60099),code:_("code",60100),collapseAll:_("collapse-all",60101),colorMode:_("color-mode",60102),commentDiscussion:_("comment-discussion",60103),compareChanges:_("compare-changes",60157),creditCard:_("credit-card",60105),dash:_("dash",60108),dashboard:_("dashboard",60109),database:_("database",60110),debugContinue:_("debug-continue",60111),debugDisconnect:_("debug-disconnect",60112),debugPause:_("debug-pause",60113),debugRestart:_("debug-restart",60114),debugStart:_("debug-start",60115),debugStepInto:_("debug-step-into",60116),debugStepOut:_("debug-step-out",60117),debugStepOver:_("debug-step-over",60118),debugStop:_("debug-stop",60119),debug:_("debug",60120),deviceCameraVideo:_("device-camera-video",60121),deviceCamera:_("device-camera",60122),deviceMobile:_("device-mobile",60123),diffAdded:_("diff-added",60124),diffIgnored:_("diff-ignored",60125),diffModified:_("diff-modified",60126),diffRemoved:_("diff-removed",60127),diffRenamed:_("diff-renamed",60128),diff:_("diff",60129),discard:_("discard",60130),editorLayout:_("editor-layout",60131),emptyWindow:_("empty-window",60132),exclude:_("exclude",60133),extensions:_("extensions",60134),eyeClosed:_("eye-closed",60135),fileBinary:_("file-binary",60136),fileCode:_("file-code",60137),fileMedia:_("file-media",60138),filePdf:_("file-pdf",60139),fileSubmodule:_("file-submodule",60140),fileSymlinkDirectory:_("file-symlink-directory",60141),fileSymlinkFile:_("file-symlink-file",60142),fileZip:_("file-zip",60143),files:_("files",60144),filter:_("filter",60145),flame:_("flame",60146),foldDown:_("fold-down",60147),foldUp:_("fold-up",60148),fold:_("fold",60149),folderActive:_("folder-active",60150),folderOpened:_("folder-opened",60151),gear:_("gear",60152),gift:_("gift",60153),gistSecret:_("gist-secret",60154),gist:_("gist",60155),gitCommit:_("git-commit",60156),gitCompare:_("git-compare",60157),gitMerge:_("git-merge",60158),githubAction:_("github-action",60159),githubAlt:_("github-alt",60160),globe:_("globe",60161),grabber:_("grabber",60162),graph:_("graph",60163),gripper:_("gripper",60164),heart:_("heart",60165),home:_("home",60166),horizontalRule:_("horizontal-rule",60167),hubot:_("hubot",60168),inbox:_("inbox",60169),issueClosed:_("issue-closed",60324),issueReopened:_("issue-reopened",60171),issues:_("issues",60172),italic:_("italic",60173),jersey:_("jersey",60174),json:_("json",60175),bracket:_("bracket",60175),kebabVertical:_("kebab-vertical",60176),key:_("key",60177),law:_("law",60178),lightbulbAutofix:_("lightbulb-autofix",60179),linkExternal:_("link-external",60180),link:_("link",60181),listOrdered:_("list-ordered",60182),listUnordered:_("list-unordered",60183),liveShare:_("live-share",60184),loading:_("loading",60185),location:_("location",60186),mailRead:_("mail-read",60187),mail:_("mail",60188),markdown:_("markdown",60189),megaphone:_("megaphone",60190),mention:_("mention",60191),milestone:_("milestone",60192),gitPullRequestMilestone:_("git-pull-request-milestone",60192),mortarBoard:_("mortar-board",60193),move:_("move",60194),multipleWindows:_("multiple-windows",60195),mute:_("mute",60196),noNewline:_("no-newline",60197),note:_("note",60198),octoface:_("octoface",60199),openPreview:_("open-preview",60200),package:_("package",60201),paintcan:_("paintcan",60202),pin:_("pin",60203),play:_("play",60204),run:_("run",60204),plug:_("plug",60205),preserveCase:_("preserve-case",60206),preview:_("preview",60207),project:_("project",60208),pulse:_("pulse",60209),question:_("question",60210),quote:_("quote",60211),radioTower:_("radio-tower",60212),reactions:_("reactions",60213),references:_("references",60214),refresh:_("refresh",60215),regex:_("regex",60216),remoteExplorer:_("remote-explorer",60217),remote:_("remote",60218),remove:_("remove",60219),replaceAll:_("replace-all",60220),replace:_("replace",60221),repoClone:_("repo-clone",60222),repoForcePush:_("repo-force-push",60223),repoPull:_("repo-pull",60224),repoPush:_("repo-push",60225),report:_("report",60226),requestChanges:_("request-changes",60227),rocket:_("rocket",60228),rootFolderOpened:_("root-folder-opened",60229),rootFolder:_("root-folder",60230),rss:_("rss",60231),ruby:_("ruby",60232),saveAll:_("save-all",60233),saveAs:_("save-as",60234),save:_("save",60235),screenFull:_("screen-full",60236),screenNormal:_("screen-normal",60237),searchStop:_("search-stop",60238),server:_("server",60240),settingsGear:_("settings-gear",60241),settings:_("settings",60242),shield:_("shield",60243),smiley:_("smiley",60244),sortPrecedence:_("sort-precedence",60245),splitHorizontal:_("split-horizontal",60246),splitVertical:_("split-vertical",60247),squirrel:_("squirrel",60248),starFull:_("star-full",60249),starHalf:_("star-half",60250),symbolClass:_("symbol-class",60251),symbolColor:_("symbol-color",60252),symbolCustomColor:_("symbol-customcolor",60252),symbolConstant:_("symbol-constant",60253),symbolEnumMember:_("symbol-enum-member",60254),symbolField:_("symbol-field",60255),symbolFile:_("symbol-file",60256),symbolInterface:_("symbol-interface",60257),symbolKeyword:_("symbol-keyword",60258),symbolMisc:_("symbol-misc",60259),symbolOperator:_("symbol-operator",60260),symbolProperty:_("symbol-property",60261),wrench:_("wrench",60261),wrenchSubaction:_("wrench-subaction",60261),symbolSnippet:_("symbol-snippet",60262),tasklist:_("tasklist",60263),telescope:_("telescope",60264),textSize:_("text-size",60265),threeBars:_("three-bars",60266),thumbsdown:_("thumbsdown",60267),thumbsup:_("thumbsup",60268),tools:_("tools",60269),triangleDown:_("triangle-down",60270),triangleLeft:_("triangle-left",60271),triangleRight:_("triangle-right",60272),triangleUp:_("triangle-up",60273),twitter:_("twitter",60274),unfold:_("unfold",60275),unlock:_("unlock",60276),unmute:_("unmute",60277),unverified:_("unverified",60278),verified:_("verified",60279),versions:_("versions",60280),vmActive:_("vm-active",60281),vmOutline:_("vm-outline",60282),vmRunning:_("vm-running",60283),watch:_("watch",60284),whitespace:_("whitespace",60285),wholeWord:_("whole-word",60286),window:_("window",60287),wordWrap:_("word-wrap",60288),zoomIn:_("zoom-in",60289),zoomOut:_("zoom-out",60290),listFilter:_("list-filter",60291),listFlat:_("list-flat",60292),listSelection:_("list-selection",60293),selection:_("selection",60293),listTree:_("list-tree",60294),debugBreakpointFunctionUnverified:_("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:_("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:_("debug-breakpoint-function-disabled",60296),debugStackframeActive:_("debug-stackframe-active",60297),circleSmallFilled:_("circle-small-filled",60298),debugStackframeDot:_("debug-stackframe-dot",60298),debugStackframe:_("debug-stackframe",60299),debugStackframeFocused:_("debug-stackframe-focused",60299),debugBreakpointUnsupported:_("debug-breakpoint-unsupported",60300),symbolString:_("symbol-string",60301),debugReverseContinue:_("debug-reverse-continue",60302),debugStepBack:_("debug-step-back",60303),debugRestartFrame:_("debug-restart-frame",60304),callIncoming:_("call-incoming",60306),callOutgoing:_("call-outgoing",60307),menu:_("menu",60308),expandAll:_("expand-all",60309),feedback:_("feedback",60310),gitPullRequestReviewer:_("git-pull-request-reviewer",60310),groupByRefType:_("group-by-ref-type",60311),ungroupByRefType:_("ungroup-by-ref-type",60312),account:_("account",60313),gitPullRequestAssignee:_("git-pull-request-assignee",60313),bellDot:_("bell-dot",60314),debugConsole:_("debug-console",60315),library:_("library",60316),output:_("output",60317),runAll:_("run-all",60318),syncIgnored:_("sync-ignored",60319),pinned:_("pinned",60320),githubInverted:_("github-inverted",60321),debugAlt:_("debug-alt",60305),serverProcess:_("server-process",60322),serverEnvironment:_("server-environment",60323),pass:_("pass",60324),stopCircle:_("stop-circle",60325),playCircle:_("play-circle",60326),record:_("record",60327),debugAltSmall:_("debug-alt-small",60328),vmConnect:_("vm-connect",60329),cloud:_("cloud",60330),merge:_("merge",60331),exportIcon:_("export",60332),graphLeft:_("graph-left",60333),magnet:_("magnet",60334),notebook:_("notebook",60335),redo:_("redo",60336),checkAll:_("check-all",60337),pinnedDirty:_("pinned-dirty",60338),passFilled:_("pass-filled",60339),circleLargeFilled:_("circle-large-filled",60340),circleLarge:_("circle-large",60341),circleLargeOutline:_("circle-large-outline",60341),combine:_("combine",60342),gather:_("gather",60342),table:_("table",60343),variableGroup:_("variable-group",60344),typeHierarchy:_("type-hierarchy",60345),typeHierarchySub:_("type-hierarchy-sub",60346),typeHierarchySuper:_("type-hierarchy-super",60347),gitPullRequestCreate:_("git-pull-request-create",60348),runAbove:_("run-above",60349),runBelow:_("run-below",60350),notebookTemplate:_("notebook-template",60351),debugRerun:_("debug-rerun",60352),workspaceTrusted:_("workspace-trusted",60353),workspaceUntrusted:_("workspace-untrusted",60354),workspaceUnspecified:_("workspace-unspecified",60355),terminalCmd:_("terminal-cmd",60356),terminalDebian:_("terminal-debian",60357),terminalLinux:_("terminal-linux",60358),terminalPowershell:_("terminal-powershell",60359),terminalTmux:_("terminal-tmux",60360),terminalUbuntu:_("terminal-ubuntu",60361),terminalBash:_("terminal-bash",60362),arrowSwap:_("arrow-swap",60363),copy:_("copy",60364),personAdd:_("person-add",60365),filterFilled:_("filter-filled",60366),wand:_("wand",60367),debugLineByLine:_("debug-line-by-line",60368),inspect:_("inspect",60369),layers:_("layers",60370),layersDot:_("layers-dot",60371),layersActive:_("layers-active",60372),compass:_("compass",60373),compassDot:_("compass-dot",60374),compassActive:_("compass-active",60375),azure:_("azure",60376),issueDraft:_("issue-draft",60377),gitPullRequestClosed:_("git-pull-request-closed",60378),gitPullRequestDraft:_("git-pull-request-draft",60379),debugAll:_("debug-all",60380),debugCoverage:_("debug-coverage",60381),runErrors:_("run-errors",60382),folderLibrary:_("folder-library",60383),debugContinueSmall:_("debug-continue-small",60384),beakerStop:_("beaker-stop",60385),graphLine:_("graph-line",60386),graphScatter:_("graph-scatter",60387),pieChart:_("pie-chart",60388),bracketDot:_("bracket-dot",60389),bracketError:_("bracket-error",60390),lockSmall:_("lock-small",60391),azureDevops:_("azure-devops",60392),verifiedFilled:_("verified-filled",60393),newLine:_("newline",60394),layout:_("layout",60395),layoutActivitybarLeft:_("layout-activitybar-left",60396),layoutActivitybarRight:_("layout-activitybar-right",60397),layoutPanelLeft:_("layout-panel-left",60398),layoutPanelCenter:_("layout-panel-center",60399),layoutPanelJustify:_("layout-panel-justify",60400),layoutPanelRight:_("layout-panel-right",60401),layoutPanel:_("layout-panel",60402),layoutSidebarLeft:_("layout-sidebar-left",60403),layoutSidebarRight:_("layout-sidebar-right",60404),layoutStatusbar:_("layout-statusbar",60405),layoutMenubar:_("layout-menubar",60406),layoutCentered:_("layout-centered",60407),layoutSidebarRightOff:_("layout-sidebar-right-off",60416),layoutPanelOff:_("layout-panel-off",60417),layoutSidebarLeftOff:_("layout-sidebar-left-off",60418),target:_("target",60408),indent:_("indent",60409),recordSmall:_("record-small",60410),errorSmall:_("error-small",60411),arrowCircleDown:_("arrow-circle-down",60412),arrowCircleLeft:_("arrow-circle-left",60413),arrowCircleRight:_("arrow-circle-right",60414),arrowCircleUp:_("arrow-circle-up",60415),heartFilled:_("heart-filled",60420),map:_("map",60421),mapFilled:_("map-filled",60422),circleSmall:_("circle-small",60423),bellSlash:_("bell-slash",60424),bellSlashDot:_("bell-slash-dot",60425),commentUnresolved:_("comment-unresolved",60426),gitPullRequestGoToChanges:_("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:_("git-pull-request-new-changes",60428),searchFuzzy:_("search-fuzzy",60429),commentDraft:_("comment-draft",60430),send:_("send",60431),sparkle:_("sparkle",60432),insert:_("insert",60433),mic:_("mic",60434),thumbsDownFilled:_("thumbsdown-filled",60435),thumbsUpFilled:_("thumbsup-filled",60436),coffee:_("coffee",60437),snake:_("snake",60438),game:_("game",60439),vr:_("vr",60440),chip:_("chip",60441),piano:_("piano",60442),music:_("music",60443),micFilled:_("mic-filled",60444),gitFetch:_("git-fetch",60445),copilot:_("copilot",60446),lightbulbSparkle:_("lightbulb-sparkle",60447),lightbulbSparkleAutofix:_("lightbulb-sparkle-autofix",60447),robot:_("robot",60448),sparkleFilled:_("sparkle-filled",60449),diffSingle:_("diff-single",60450),diffMultiple:_("diff-multiple",60451),surroundWith:_("surround-with",60452),gitStash:_("git-stash",60454),gitStashApply:_("git-stash-apply",60455),gitStashPop:_("git-stash-pop",60456),dialogError:_("dialog-error","error"),dialogWarning:_("dialog-warning","warning"),dialogInfo:_("dialog-info","info"),dialogClose:_("dialog-close","close"),treeItemExpanded:_("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:_("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:_("tree-filter-on-type-off","list-selection"),treeFilterClear:_("tree-filter-clear","close"),treeItemLoading:_("tree-item-loading","loading"),menuSelection:_("menu-selection","check"),menuSubmenu:_("menu-submenu","chevron-right"),menuBarMore:_("menubar-more","more"),scrollbarButtonLeft:_("scrollbar-button-left","triangle-left"),scrollbarButtonRight:_("scrollbar-button-right","triangle-right"),scrollbarButtonUp:_("scrollbar-button-up","triangle-up"),scrollbarButtonDown:_("scrollbar-button-down","triangle-down"),toolBarMore:_("toolbar-more","more"),quickInputBack:_("quick-input-back","arrow-left")}});class rN{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new x,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(J){this._onDidChange.fire({changedLanguages:J,changedColorMap:!1})}register(J,$){return this._tokenizationSupports.set(J,$),this.handleChange([J]),N0(()=>{if(this._tokenizationSupports.get(J)!==$)return;this._tokenizationSupports.delete(J),this.handleChange([J])})}get(J){return this._tokenizationSupports.get(J)||null}registerFactory(J,$){var X;(X=this._factories.get(J))===null||X===void 0||X.dispose();let Y=new Bg(this,J,$);return this._factories.set(J,Y),N0(()=>{let Z=this._factories.get(J);if(!Z||Z!==Y)return;this._factories.delete(J),Z.dispose()})}async getOrCreate(J){let $=this.get(J);if($)return $;let X=this._factories.get(J);if(!X||X.isResolved)return null;return await X.resolve(),this.get(J)}isResolved(J){if(this.get(J))return!0;let X=this._factories.get(J);if(!X||X.isResolved)return!0;return!1}setColorMap(J){this._colorMap=J,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){if(this._colorMap&&this._colorMap.length>2)return this._colorMap[2];return null}}var Bg;var Fg=w(()=>{_0();z0();Bg=class Bg extends m{get isResolved(){return this._isResolved}constructor(J,$,X){super();this._registry=J,this._languageId=$,this._factory=X,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){if(!this._resolvePromise)this._resolvePromise=this._create();return this._resolvePromise}async _create(){let J=await this._factory.tokenizationSupport;if(this._isResolved=!0,J&&!this._isDisposed)this._register(this._registry.register(this._languageId,J))}}});class UX{constructor(J,$,X){this.offset=J,this.type=$,this.language=X,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}class MG{constructor(J,$){this.tokens=J,this.endState=$,this._tokenizationResultBrand=void 0}}class DQ{constructor(J,$){this.tokens=J,this.endState=$,this._encodedTokenizationResultBrand=void 0}}class iN{constructor(J,$,X,Y){this.range=J,this.text=$,this.completionKind=X,this.isSnippetText=Y}equals(J){return k.lift(this.range).equalsRange(J.range)&&this.text===J.text&&this.completionKind===J.completionKind&&this.isSnippetText===J.isSnippetText}}class u8{static fromValue(J){switch(J){case"comment":return u8.Comment;case"imports":return u8.Imports;case"region":return u8.Region}return new u8(J)}constructor(J){this.value=J}}class nN{constructor(J){this.createSupport=J,this._tokenizationSupport=null}dispose(){if(this._tokenizationSupport)this._tokenizationSupport.then((J)=>{if(J)J.dispose()})}get tokenizationSupport(){if(!this._tokenizationSupport)this._tokenizationSupport=this.createSupport();return this._tokenizationSupport}}var RG,Kg,Ag,Pg,HD0,kK,Dg,Rg,$6;var c8=w(()=>{k5();V5();i0();Fg();c0();(function(J){let $=new Map;$.set(0,F0.symbolMethod),$.set(1,F0.symbolFunction),$.set(2,F0.symbolConstructor),$.set(3,F0.symbolField),$.set(4,F0.symbolVariable),$.set(5,F0.symbolClass),$.set(6,F0.symbolStruct),$.set(7,F0.symbolInterface),$.set(8,F0.symbolModule),$.set(9,F0.symbolProperty),$.set(10,F0.symbolEvent),$.set(11,F0.symbolOperator),$.set(12,F0.symbolUnit),$.set(13,F0.symbolValue),$.set(15,F0.symbolEnum),$.set(14,F0.symbolConstant),$.set(15,F0.symbolEnum),$.set(16,F0.symbolEnumMember),$.set(17,F0.symbolKeyword),$.set(27,F0.symbolSnippet),$.set(18,F0.symbolText),$.set(19,F0.symbolColor),$.set(20,F0.symbolFile),$.set(21,F0.symbolReference),$.set(22,F0.symbolCustomColor),$.set(23,F0.symbolFolder),$.set(24,F0.symbolTypeParameter),$.set(25,F0.account),$.set(26,F0.issues);function X(Q){let G=$.get(Q);if(!G)console.info("No codicon found for CompletionItemKind "+Q),G=F0.symbolProperty;return G}J.toIcon=X;let Y=new Map;Y.set("method",0),Y.set("function",1),Y.set("constructor",2),Y.set("field",3),Y.set("variable",4),Y.set("class",5),Y.set("struct",6),Y.set("interface",7),Y.set("module",8),Y.set("property",9),Y.set("event",10),Y.set("operator",11),Y.set("unit",12),Y.set("value",13),Y.set("constant",14),Y.set("enum",15),Y.set("enum-member",16),Y.set("enumMember",16),Y.set("keyword",17),Y.set("snippet",27),Y.set("text",18),Y.set("color",19),Y.set("file",20),Y.set("reference",21),Y.set("customcolor",22),Y.set("folder",23),Y.set("type-parameter",24),Y.set("typeParameter",24),Y.set("account",25),Y.set("issue",26);function Z(Q,G){let q=Y.get(Q);if(typeof q>"u"&&!G)q=9;return q}J.fromString=Z})(RG||(RG={}));(function(J){J[J.Automatic=0]="Automatic",J[J.Explicit=1]="Explicit"})(Kg||(Kg={}));(function(J){J[J.Invoke=1]="Invoke",J[J.TriggerCharacter=2]="TriggerCharacter",J[J.ContentChange=3]="ContentChange"})(Ag||(Ag={}));(function(J){J[J.Text=0]="Text",J[J.Read=1]="Read",J[J.Write=2]="Write"})(Pg||(Pg={}));HD0={[17]:F("Array","array"),[16]:F("Boolean","boolean"),[4]:F("Class","class"),[13]:F("Constant","constant"),[8]:F("Constructor","constructor"),[9]:F("Enum","enumeration"),[21]:F("EnumMember","enumeration member"),[23]:F("Event","event"),[7]:F("Field","field"),[0]:F("File","file"),[11]:F("Function","function"),[10]:F("Interface","interface"),[19]:F("Key","key"),[5]:F("Method","method"),[1]:F("Module","module"),[2]:F("Namespace","namespace"),[20]:F("Null","null"),[15]:F("Number","number"),[18]:F("Object","object"),[24]:F("Operator","operator"),[3]:F("Package","package"),[6]:F("Property","property"),[14]:F("String","string"),[22]:F("Struct","struct"),[25]:F("TypeParameter","type parameter"),[12]:F("Variable","variable")};(function(J){let $=new Map;$.set(0,F0.symbolFile),$.set(1,F0.symbolModule),$.set(2,F0.symbolNamespace),$.set(3,F0.symbolPackage),$.set(4,F0.symbolClass),$.set(5,F0.symbolMethod),$.set(6,F0.symbolProperty),$.set(7,F0.symbolField),$.set(8,F0.symbolConstructor),$.set(9,F0.symbolEnum),$.set(10,F0.symbolInterface),$.set(11,F0.symbolFunction),$.set(12,F0.symbolVariable),$.set(13,F0.symbolConstant),$.set(14,F0.symbolString),$.set(15,F0.symbolNumber),$.set(16,F0.symbolBoolean),$.set(17,F0.symbolArray),$.set(18,F0.symbolObject),$.set(19,F0.symbolKey),$.set(20,F0.symbolNull),$.set(21,F0.symbolEnumMember),$.set(22,F0.symbolStruct),$.set(23,F0.symbolEvent),$.set(24,F0.symbolOperator),$.set(25,F0.symbolTypeParameter);function X(Y){let Z=$.get(Y);if(!Z)console.info("No codicon found for SymbolKind "+Y),Z=F0.symbolProperty;return Z}J.toIcon=X})(kK||(kK={}));u8.Comment=new u8("comment");u8.Imports=new u8("imports");u8.Region=new u8("region");(function(J){function $(X){if(!X||typeof X!=="object")return!1;return typeof X.id==="string"&&typeof X.title==="string"}J.is=$})(Dg||(Dg={}));(function(J){J[J.Type=1]="Type",J[J.Parameter=2]="Parameter"})(Rg||(Rg={}));$6=new rN});var EK,IK,yK,xK,bK,SK,CK,vK,hK,fK,gK,pK,mK,uK,cK,lK,dK,sK,aK,rK,iK,nK,oK,tK,eK,JA,$A,XA,YA,ZA,QA,GA,qA,UA,zA,HA,jA,VA,WA,BA;var FA=w(()=>{(function(J){J[J.Unknown=0]="Unknown",J[J.Disabled=1]="Disabled",J[J.Enabled=2]="Enabled"})(EK||(EK={}));(function(J){J[J.Invoke=1]="Invoke",J[J.Auto=2]="Auto"})(IK||(IK={}));(function(J){J[J.None=0]="None",J[J.KeepWhitespace=1]="KeepWhitespace",J[J.InsertAsSnippet=4]="InsertAsSnippet"})(yK||(yK={}));(function(J){J[J.Method=0]="Method",J[J.Function=1]="Function",J[J.Constructor=2]="Constructor",J[J.Field=3]="Field",J[J.Variable=4]="Variable",J[J.Class=5]="Class",J[J.Struct=6]="Struct",J[J.Interface=7]="Interface",J[J.Module=8]="Module",J[J.Property=9]="Property",J[J.Event=10]="Event",J[J.Operator=11]="Operator",J[J.Unit=12]="Unit",J[J.Value=13]="Value",J[J.Constant=14]="Constant",J[J.Enum=15]="Enum",J[J.EnumMember=16]="EnumMember",J[J.Keyword=17]="Keyword",J[J.Text=18]="Text",J[J.Color=19]="Color",J[J.File=20]="File",J[J.Reference=21]="Reference",J[J.Customcolor=22]="Customcolor",J[J.Folder=23]="Folder",J[J.TypeParameter=24]="TypeParameter",J[J.User=25]="User",J[J.Issue=26]="Issue",J[J.Snippet=27]="Snippet"})(xK||(xK={}));(function(J){J[J.Deprecated=1]="Deprecated"})(bK||(bK={}));(function(J){J[J.Invoke=0]="Invoke",J[J.TriggerCharacter=1]="TriggerCharacter",J[J.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(SK||(SK={}));(function(J){J[J.EXACT=0]="EXACT",J[J.ABOVE=1]="ABOVE",J[J.BELOW=2]="BELOW"})(CK||(CK={}));(function(J){J[J.NotSet=0]="NotSet",J[J.ContentFlush=1]="ContentFlush",J[J.RecoverFromMarkers=2]="RecoverFromMarkers",J[J.Explicit=3]="Explicit",J[J.Paste=4]="Paste",J[J.Undo=5]="Undo",J[J.Redo=6]="Redo"})(vK||(vK={}));(function(J){J[J.LF=1]="LF",J[J.CRLF=2]="CRLF"})(hK||(hK={}));(function(J){J[J.Text=0]="Text",J[J.Read=1]="Read",J[J.Write=2]="Write"})(fK||(fK={}));(function(J){J[J.None=0]="None",J[J.Keep=1]="Keep",J[J.Brackets=2]="Brackets",J[J.Advanced=3]="Advanced",J[J.Full=4]="Full"})(gK||(gK={}));(function(J){J[J.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",J[J.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",J[J.accessibilitySupport=2]="accessibilitySupport",J[J.accessibilityPageSize=3]="accessibilityPageSize",J[J.ariaLabel=4]="ariaLabel",J[J.ariaRequired=5]="ariaRequired",J[J.autoClosingBrackets=6]="autoClosingBrackets",J[J.autoClosingComments=7]="autoClosingComments",J[J.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",J[J.autoClosingDelete=9]="autoClosingDelete",J[J.autoClosingOvertype=10]="autoClosingOvertype",J[J.autoClosingQuotes=11]="autoClosingQuotes",J[J.autoIndent=12]="autoIndent",J[J.automaticLayout=13]="automaticLayout",J[J.autoSurround=14]="autoSurround",J[J.bracketPairColorization=15]="bracketPairColorization",J[J.guides=16]="guides",J[J.codeLens=17]="codeLens",J[J.codeLensFontFamily=18]="codeLensFontFamily",J[J.codeLensFontSize=19]="codeLensFontSize",J[J.colorDecorators=20]="colorDecorators",J[J.colorDecoratorsLimit=21]="colorDecoratorsLimit",J[J.columnSelection=22]="columnSelection",J[J.comments=23]="comments",J[J.contextmenu=24]="contextmenu",J[J.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",J[J.cursorBlinking=26]="cursorBlinking",J[J.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",J[J.cursorStyle=28]="cursorStyle",J[J.cursorSurroundingLines=29]="cursorSurroundingLines",J[J.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",J[J.cursorWidth=31]="cursorWidth",J[J.disableLayerHinting=32]="disableLayerHinting",J[J.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",J[J.domReadOnly=34]="domReadOnly",J[J.dragAndDrop=35]="dragAndDrop",J[J.dropIntoEditor=36]="dropIntoEditor",J[J.emptySelectionClipboard=37]="emptySelectionClipboard",J[J.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",J[J.extraEditorClassName=39]="extraEditorClassName",J[J.fastScrollSensitivity=40]="fastScrollSensitivity",J[J.find=41]="find",J[J.fixedOverflowWidgets=42]="fixedOverflowWidgets",J[J.folding=43]="folding",J[J.foldingStrategy=44]="foldingStrategy",J[J.foldingHighlight=45]="foldingHighlight",J[J.foldingImportsByDefault=46]="foldingImportsByDefault",J[J.foldingMaximumRegions=47]="foldingMaximumRegions",J[J.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",J[J.fontFamily=49]="fontFamily",J[J.fontInfo=50]="fontInfo",J[J.fontLigatures=51]="fontLigatures",J[J.fontSize=52]="fontSize",J[J.fontWeight=53]="fontWeight",J[J.fontVariations=54]="fontVariations",J[J.formatOnPaste=55]="formatOnPaste",J[J.formatOnType=56]="formatOnType",J[J.glyphMargin=57]="glyphMargin",J[J.gotoLocation=58]="gotoLocation",J[J.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",J[J.hover=60]="hover",J[J.inDiffEditor=61]="inDiffEditor",J[J.inlineSuggest=62]="inlineSuggest",J[J.letterSpacing=63]="letterSpacing",J[J.lightbulb=64]="lightbulb",J[J.lineDecorationsWidth=65]="lineDecorationsWidth",J[J.lineHeight=66]="lineHeight",J[J.lineNumbers=67]="lineNumbers",J[J.lineNumbersMinChars=68]="lineNumbersMinChars",J[J.linkedEditing=69]="linkedEditing",J[J.links=70]="links",J[J.matchBrackets=71]="matchBrackets",J[J.minimap=72]="minimap",J[J.mouseStyle=73]="mouseStyle",J[J.mouseWheelScrollSensitivity=74]="mouseWheelScrollSensitivity",J[J.mouseWheelZoom=75]="mouseWheelZoom",J[J.multiCursorMergeOverlapping=76]="multiCursorMergeOverlapping",J[J.multiCursorModifier=77]="multiCursorModifier",J[J.multiCursorPaste=78]="multiCursorPaste",J[J.multiCursorLimit=79]="multiCursorLimit",J[J.occurrencesHighlight=80]="occurrencesHighlight",J[J.overviewRulerBorder=81]="overviewRulerBorder",J[J.overviewRulerLanes=82]="overviewRulerLanes",J[J.padding=83]="padding",J[J.pasteAs=84]="pasteAs",J[J.parameterHints=85]="parameterHints",J[J.peekWidgetDefaultFocus=86]="peekWidgetDefaultFocus",J[J.definitionLinkOpensInPeek=87]="definitionLinkOpensInPeek",J[J.quickSuggestions=88]="quickSuggestions",J[J.quickSuggestionsDelay=89]="quickSuggestionsDelay",J[J.readOnly=90]="readOnly",J[J.readOnlyMessage=91]="readOnlyMessage",J[J.renameOnType=92]="renameOnType",J[J.renderControlCharacters=93]="renderControlCharacters",J[J.renderFinalNewline=94]="renderFinalNewline",J[J.renderLineHighlight=95]="renderLineHighlight",J[J.renderLineHighlightOnlyWhenFocus=96]="renderLineHighlightOnlyWhenFocus",J[J.renderValidationDecorations=97]="renderValidationDecorations",J[J.renderWhitespace=98]="renderWhitespace",J[J.revealHorizontalRightPadding=99]="revealHorizontalRightPadding",J[J.roundedSelection=100]="roundedSelection",J[J.rulers=101]="rulers",J[J.scrollbar=102]="scrollbar",J[J.scrollBeyondLastColumn=103]="scrollBeyondLastColumn",J[J.scrollBeyondLastLine=104]="scrollBeyondLastLine",J[J.scrollPredominantAxis=105]="scrollPredominantAxis",J[J.selectionClipboard=106]="selectionClipboard",J[J.selectionHighlight=107]="selectionHighlight",J[J.selectOnLineNumbers=108]="selectOnLineNumbers",J[J.showFoldingControls=109]="showFoldingControls",J[J.showUnused=110]="showUnused",J[J.snippetSuggestions=111]="snippetSuggestions",J[J.smartSelect=112]="smartSelect",J[J.smoothScrolling=113]="smoothScrolling",J[J.stickyScroll=114]="stickyScroll",J[J.stickyTabStops=115]="stickyTabStops",J[J.stopRenderingLineAfter=116]="stopRenderingLineAfter",J[J.suggest=117]="suggest",J[J.suggestFontSize=118]="suggestFontSize",J[J.suggestLineHeight=119]="suggestLineHeight",J[J.suggestOnTriggerCharacters=120]="suggestOnTriggerCharacters",J[J.suggestSelection=121]="suggestSelection",J[J.tabCompletion=122]="tabCompletion",J[J.tabIndex=123]="tabIndex",J[J.unicodeHighlighting=124]="unicodeHighlighting",J[J.unusualLineTerminators=125]="unusualLineTerminators",J[J.useShadowDOM=126]="useShadowDOM",J[J.useTabStops=127]="useTabStops",J[J.wordBreak=128]="wordBreak",J[J.wordSeparators=129]="wordSeparators",J[J.wordWrap=130]="wordWrap",J[J.wordWrapBreakAfterCharacters=131]="wordWrapBreakAfterCharacters",J[J.wordWrapBreakBeforeCharacters=132]="wordWrapBreakBeforeCharacters",J[J.wordWrapColumn=133]="wordWrapColumn",J[J.wordWrapOverride1=134]="wordWrapOverride1",J[J.wordWrapOverride2=135]="wordWrapOverride2",J[J.wrappingIndent=136]="wrappingIndent",J[J.wrappingStrategy=137]="wrappingStrategy",J[J.showDeprecated=138]="showDeprecated",J[J.inlayHints=139]="inlayHints",J[J.editorClassName=140]="editorClassName",J[J.pixelRatio=141]="pixelRatio",J[J.tabFocusMode=142]="tabFocusMode",J[J.layoutInfo=143]="layoutInfo",J[J.wrappingInfo=144]="wrappingInfo",J[J.defaultColorDecorators=145]="defaultColorDecorators",J[J.colorDecoratorsActivatedOn=146]="colorDecoratorsActivatedOn",J[J.inlineCompletionsAccessibilityVerbose=147]="inlineCompletionsAccessibilityVerbose"})(pK||(pK={}));(function(J){J[J.TextDefined=0]="TextDefined",J[J.LF=1]="LF",J[J.CRLF=2]="CRLF"})(mK||(mK={}));(function(J){J[J.LF=0]="LF",J[J.CRLF=1]="CRLF"})(uK||(uK={}));(function(J){J[J.Left=1]="Left",J[J.Center=2]="Center",J[J.Right=3]="Right"})(cK||(cK={}));(function(J){J[J.None=0]="None",J[J.Indent=1]="Indent",J[J.IndentOutdent=2]="IndentOutdent",J[J.Outdent=3]="Outdent"})(lK||(lK={}));(function(J){J[J.Both=0]="Both",J[J.Right=1]="Right",J[J.Left=2]="Left",J[J.None=3]="None"})(dK||(dK={}));(function(J){J[J.Type=1]="Type",J[J.Parameter=2]="Parameter"})(sK||(sK={}));(function(J){J[J.Automatic=0]="Automatic",J[J.Explicit=1]="Explicit"})(aK||(aK={}));(function(J){J[J.DependsOnKbLayout=-1]="DependsOnKbLayout",J[J.Unknown=0]="Unknown",J[J.Backspace=1]="Backspace",J[J.Tab=2]="Tab",J[J.Enter=3]="Enter",J[J.Shift=4]="Shift",J[J.Ctrl=5]="Ctrl",J[J.Alt=6]="Alt",J[J.PauseBreak=7]="PauseBreak",J[J.CapsLock=8]="CapsLock",J[J.Escape=9]="Escape",J[J.Space=10]="Space",J[J.PageUp=11]="PageUp",J[J.PageDown=12]="PageDown",J[J.End=13]="End",J[J.Home=14]="Home",J[J.LeftArrow=15]="LeftArrow",J[J.UpArrow=16]="UpArrow",J[J.RightArrow=17]="RightArrow",J[J.DownArrow=18]="DownArrow",J[J.Insert=19]="Insert",J[J.Delete=20]="Delete",J[J.Digit0=21]="Digit0",J[J.Digit1=22]="Digit1",J[J.Digit2=23]="Digit2",J[J.Digit3=24]="Digit3",J[J.Digit4=25]="Digit4",J[J.Digit5=26]="Digit5",J[J.Digit6=27]="Digit6",J[J.Digit7=28]="Digit7",J[J.Digit8=29]="Digit8",J[J.Digit9=30]="Digit9",J[J.KeyA=31]="KeyA",J[J.KeyB=32]="KeyB",J[J.KeyC=33]="KeyC",J[J.KeyD=34]="KeyD",J[J.KeyE=35]="KeyE",J[J.KeyF=36]="KeyF",J[J.KeyG=37]="KeyG",J[J.KeyH=38]="KeyH",J[J.KeyI=39]="KeyI",J[J.KeyJ=40]="KeyJ",J[J.KeyK=41]="KeyK",J[J.KeyL=42]="KeyL",J[J.KeyM=43]="KeyM",J[J.KeyN=44]="KeyN",J[J.KeyO=45]="KeyO",J[J.KeyP=46]="KeyP",J[J.KeyQ=47]="KeyQ",J[J.KeyR=48]="KeyR",J[J.KeyS=49]="KeyS",J[J.KeyT=50]="KeyT",J[J.KeyU=51]="KeyU",J[J.KeyV=52]="KeyV",J[J.KeyW=53]="KeyW",J[J.KeyX=54]="KeyX",J[J.KeyY=55]="KeyY",J[J.KeyZ=56]="KeyZ",J[J.Meta=57]="Meta",J[J.ContextMenu=58]="ContextMenu",J[J.F1=59]="F1",J[J.F2=60]="F2",J[J.F3=61]="F3",J[J.F4=62]="F4",J[J.F5=63]="F5",J[J.F6=64]="F6",J[J.F7=65]="F7",J[J.F8=66]="F8",J[J.F9=67]="F9",J[J.F10=68]="F10",J[J.F11=69]="F11",J[J.F12=70]="F12",J[J.F13=71]="F13",J[J.F14=72]="F14",J[J.F15=73]="F15",J[J.F16=74]="F16",J[J.F17=75]="F17",J[J.F18=76]="F18",J[J.F19=77]="F19",J[J.F20=78]="F20",J[J.F21=79]="F21",J[J.F22=80]="F22",J[J.F23=81]="F23",J[J.F24=82]="F24",J[J.NumLock=83]="NumLock",J[J.ScrollLock=84]="ScrollLock",J[J.Semicolon=85]="Semicolon",J[J.Equal=86]="Equal",J[J.Comma=87]="Comma",J[J.Minus=88]="Minus",J[J.Period=89]="Period",J[J.Slash=90]="Slash",J[J.Backquote=91]="Backquote",J[J.BracketLeft=92]="BracketLeft",J[J.Backslash=93]="Backslash",J[J.BracketRight=94]="BracketRight",J[J.Quote=95]="Quote",J[J.OEM_8=96]="OEM_8",J[J.IntlBackslash=97]="IntlBackslash",J[J.Numpad0=98]="Numpad0",J[J.Numpad1=99]="Numpad1",J[J.Numpad2=100]="Numpad2",J[J.Numpad3=101]="Numpad3",J[J.Numpad4=102]="Numpad4",J[J.Numpad5=103]="Numpad5",J[J.Numpad6=104]="Numpad6",J[J.Numpad7=105]="Numpad7",J[J.Numpad8=106]="Numpad8",J[J.Numpad9=107]="Numpad9",J[J.NumpadMultiply=108]="NumpadMultiply",J[J.NumpadAdd=109]="NumpadAdd",J[J.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",J[J.NumpadSubtract=111]="NumpadSubtract",J[J.NumpadDecimal=112]="NumpadDecimal",J[J.NumpadDivide=113]="NumpadDivide",J[J.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",J[J.ABNT_C1=115]="ABNT_C1",J[J.ABNT_C2=116]="ABNT_C2",J[J.AudioVolumeMute=117]="AudioVolumeMute",J[J.AudioVolumeUp=118]="AudioVolumeUp",J[J.AudioVolumeDown=119]="AudioVolumeDown",J[J.BrowserSearch=120]="BrowserSearch",J[J.BrowserHome=121]="BrowserHome",J[J.BrowserBack=122]="BrowserBack",J[J.BrowserForward=123]="BrowserForward",J[J.MediaTrackNext=124]="MediaTrackNext",J[J.MediaTrackPrevious=125]="MediaTrackPrevious",J[J.MediaStop=126]="MediaStop",J[J.MediaPlayPause=127]="MediaPlayPause",J[J.LaunchMediaPlayer=128]="LaunchMediaPlayer",J[J.LaunchMail=129]="LaunchMail",J[J.LaunchApp2=130]="LaunchApp2",J[J.Clear=131]="Clear",J[J.MAX_VALUE=132]="MAX_VALUE"})(rK||(rK={}));(function(J){J[J.Hint=1]="Hint",J[J.Info=2]="Info",J[J.Warning=4]="Warning",J[J.Error=8]="Error"})(iK||(iK={}));(function(J){J[J.Unnecessary=1]="Unnecessary",J[J.Deprecated=2]="Deprecated"})(nK||(nK={}));(function(J){J[J.Inline=1]="Inline",J[J.Gutter=2]="Gutter"})(oK||(oK={}));(function(J){J[J.UNKNOWN=0]="UNKNOWN",J[J.TEXTAREA=1]="TEXTAREA",J[J.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",J[J.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",J[J.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",J[J.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",J[J.CONTENT_TEXT=6]="CONTENT_TEXT",J[J.CONTENT_EMPTY=7]="CONTENT_EMPTY",J[J.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",J[J.CONTENT_WIDGET=9]="CONTENT_WIDGET",J[J.OVERVIEW_RULER=10]="OVERVIEW_RULER",J[J.SCROLLBAR=11]="SCROLLBAR",J[J.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",J[J.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(tK||(tK={}));(function(J){J[J.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",J[J.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",J[J.TOP_CENTER=2]="TOP_CENTER"})(eK||(eK={}));(function(J){J[J.Left=1]="Left",J[J.Center=2]="Center",J[J.Right=4]="Right",J[J.Full=7]="Full"})(JA||(JA={}));(function(J){J[J.Left=0]="Left",J[J.Right=1]="Right",J[J.None=2]="None",J[J.LeftOfInjectedText=3]="LeftOfInjectedText",J[J.RightOfInjectedText=4]="RightOfInjectedText"})($A||($A={}));(function(J){J[J.Off=0]="Off",J[J.On=1]="On",J[J.Relative=2]="Relative",J[J.Interval=3]="Interval",J[J.Custom=4]="Custom"})(XA||(XA={}));(function(J){J[J.None=0]="None",J[J.Text=1]="Text",J[J.Blocks=2]="Blocks"})(YA||(YA={}));(function(J){J[J.Smooth=0]="Smooth",J[J.Immediate=1]="Immediate"})(ZA||(ZA={}));(function(J){J[J.Auto=1]="Auto",J[J.Hidden=2]="Hidden",J[J.Visible=3]="Visible"})(QA||(QA={}));(function(J){J[J.LTR=0]="LTR",J[J.RTL=1]="RTL"})(GA||(GA={}));(function(J){J.Off="off",J.OnCode="onCode",J.On="on"})(qA||(qA={}));(function(J){J[J.Invoke=1]="Invoke",J[J.TriggerCharacter=2]="TriggerCharacter",J[J.ContentChange=3]="ContentChange"})(UA||(UA={}));(function(J){J[J.File=0]="File",J[J.Module=1]="Module",J[J.Namespace=2]="Namespace",J[J.Package=3]="Package",J[J.Class=4]="Class",J[J.Method=5]="Method",J[J.Property=6]="Property",J[J.Field=7]="Field",J[J.Constructor=8]="Constructor",J[J.Enum=9]="Enum",J[J.Interface=10]="Interface",J[J.Function=11]="Function",J[J.Variable=12]="Variable",J[J.Constant=13]="Constant",J[J.String=14]="String",J[J.Number=15]="Number",J[J.Boolean=16]="Boolean",J[J.Array=17]="Array",J[J.Object=18]="Object",J[J.Key=19]="Key",J[J.Null=20]="Null",J[J.EnumMember=21]="EnumMember",J[J.Struct=22]="Struct",J[J.Event=23]="Event",J[J.Operator=24]="Operator",J[J.TypeParameter=25]="TypeParameter"})(zA||(zA={}));(function(J){J[J.Deprecated=1]="Deprecated"})(HA||(HA={}));(function(J){J[J.Hidden=0]="Hidden",J[J.Blink=1]="Blink",J[J.Smooth=2]="Smooth",J[J.Phase=3]="Phase",J[J.Expand=4]="Expand",J[J.Solid=5]="Solid"})(jA||(jA={}));(function(J){J[J.Line=1]="Line",J[J.Block=2]="Block",J[J.Underline=3]="Underline",J[J.LineThin=4]="LineThin",J[J.BlockOutline=5]="BlockOutline",J[J.UnderlineThin=6]="UnderlineThin"})(VA||(VA={}));(function(J){J[J.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",J[J.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",J[J.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",J[J.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(WA||(WA={}));(function(J){J[J.None=0]="None",J[J.Same=1]="Same",J[J.Indent=2]="Indent",J[J.DeepIndent=3]="DeepIndent"})(BA||(BA={}))});class gq{static chord(J,$){return q7(J,$)}}function KA(){return{editor:void 0,languages:void 0,CancellationTokenSource:L5,Emitter:x,KeyCode:rK,KeyMod:gq,Position:g,Range:k,Selection:p0,SelectionDirection:GA,MarkerSeverity:iK,MarkerTag:nK,Uri:C0,Token:UX}}var eN=w(()=>{_8();_0();PG();V5();i0();o5();c8();FA();gq.CtrlCmd=2048;gq.Shift=1024;gq.Alt=512;gq.WinCtrl=256});function Mg(J,$){let X=J;if(typeof X.vscodeWindowId!=="number")Object.defineProperty(X,"vscodeWindowId",{get:()=>$})}var W1,EY;var N8=w(()=>{W1=window,EY=W1});class JT{constructor(J){this.fn=J,this.lastCache=void 0,this.lastArgKey=void 0}get(J){let $=JSON.stringify(J);if(this.lastArgKey!==$)this.lastArgKey=$,this.lastCache=this.fn(J);return this.lastCache}}class AA{get cachedValues(){return this._map}constructor(J){this.fn=J,this._map=new Map}get(J){if(this._map.has(J))return this._map.get(J);let $=this.fn(J);return this._map.set(J,$),$}}class s9{constructor(J){this.executor=J,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(J){this._error=J}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function PA(J){if(!J||typeof J!=="string")return!0;return J.trim().length===0}function MQ(J,...$){if($.length===0)return J;return J.replace(c$0,function(X,Y){let Z=parseInt(Y,10);return isNaN(Z)||Z<0||Z>=$.length?X:$[Z]})}function _g(J){return J.replace(/[<>"'&]/g,($)=>{switch($){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return $})}function _G(J){return J.replace(/[<>&]/g,function($){switch($){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return $}})}function b7(J){return J.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function OQ(J,$){if(!J||!$)return J;let X=$.length;if(X===0||J.length===0)return J;let Y=0;while(J.indexOf($,Y)===Y)Y=Y+X;return J.substring(Y)}function Ng(J,$){if(!J||!$)return J;let X=$.length,Y=J.length;if(X===0||Y===0)return J;let Z=Y,Q=-1;while(!0){if(Q=J.lastIndexOf($,Z-1),Q===-1||Q+X!==Z)break;if(Q===0)return"";Z=Q}return J.substring(0,Z)}function Tg(J){return J.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function DA(J,$,X={}){if(!J)throw Error("Cannot create regex from empty string");if(!$)J=b7(J);if(X.wholeWord){if(!/\B/.test(J.charAt(0)))J="\\b"+J;if(!/\B/.test(J.charAt(J.length-1)))J=J+"\\b"}let Y="";if(X.global)Y+="g";if(!X.matchCase)Y+="i";if(X.multiline)Y+="m";if(X.unicode)Y+="u";return new RegExp(J,Y)}function wg(J){if(J.source==="^"||J.source==="^$"||J.source==="$"||J.source==="^\\s*$")return!1;return!!(J.exec("")&&J.lastIndex===0)}function a9(J){return J.split(/\r\n|\r|\n/)}function c6(J){for(let $=0,X=J.length;$<X;$++){let Y=J.charCodeAt($);if(Y!==32&&Y!==9)return $}return-1}function W5(J,$=0,X=J.length){for(let Y=$;Y<X;Y++){let Z=J.charCodeAt(Y);if(Z!==32&&Z!==9)return J.substring($,Y)}return J.substring($,X)}function r9(J,$=J.length-1){for(let X=$;X>=0;X--){let Y=J.charCodeAt(X);if(Y!==32&&Y!==9)return X}return-1}function zj(J,$){if(J<$)return-1;else if(J>$)return 1;else return 0}function RA(J,$,X=0,Y=J.length,Z=0,Q=$.length){for(;X<Y&&Z<Q;X++,Z++){let U=J.charCodeAt(X),z=$.charCodeAt(Z);if(U<z)return-1;else if(U>z)return 1}let G=Y-X,q=Q-Z;if(G<q)return-1;else if(G>q)return 1;return 0}function Hj(J,$){return mq(J,$,0,J.length,0,$.length)}function mq(J,$,X=0,Y=J.length,Z=0,Q=$.length){for(;X<Y&&Z<Q;X++,Z++){let U=J.charCodeAt(X),z=$.charCodeAt(Z);if(U===z)continue;if(U>=128||z>=128)return RA(J.toLowerCase(),$.toLowerCase(),X,Y,Z,Q);if(OG(U))U-=32;if(OG(z))z-=32;let H=U-z;if(H===0)continue;return H}let G=Y-X,q=Q-Z;if(G<q)return-1;else if(G>q)return 1;return 0}function jj(J){return J>=48&&J<=57}function OG(J){return J>=97&&J<=122}function zX(J){return J>=65&&J<=90}function yY(J,$){return J.length===$.length&&mq(J,$)===0}function uq(J,$){let X=$.length;if($.length>J.length)return!1;return mq(J,$,0,X)===0}function NG(J,$){let X=Math.min(J.length,$.length),Y;for(Y=0;Y<X;Y++)if(J.charCodeAt(Y)!==$.charCodeAt(Y))return Y;return X}function Vj(J,$){let X=Math.min(J.length,$.length),Y,Z=J.length-1,Q=$.length-1;for(Y=0;Y<X;Y++)if(J.charCodeAt(Z-Y)!==$.charCodeAt(Q-Y))return Y;return X}function P6(J){return 55296<=J&&J<=56319}function HX(J){return 56320<=J&&J<=57343}function MA(J,$){return(J-55296<<10)+($-56320)+65536}function cq(J,$,X){let Y=J.charCodeAt(X);if(P6(Y)&&X+1<$){let Z=J.charCodeAt(X+1);if(HX(Z))return MA(Y,Z)}return Y}function l$0(J,$){let X=J.charCodeAt($-1);if(HX(X)&&$>1){let Y=J.charCodeAt($-2);if(P6(Y))return MA(Y,X)}return X}class OA{get offset(){return this._offset}constructor(J,$=0){this._str=J,this._len=J.length,this._offset=$}setOffset(J){this._offset=J}prevCodePoint(){let J=l$0(this._str,this._offset);return this._offset-=J>=65536?2:1,J}nextCodePoint(){let J=cq(this._str,this._len,this._offset);return this._offset+=J>=65536?2:1,J}eol(){return this._offset>=this._len}}class lq{get offset(){return this._iterator.offset}constructor(J,$=0){this._iterator=new OA(J,$)}nextGraphemeLength(){let J=RQ.getInstance(),$=this._iterator,X=$.offset,Y=J.getGraphemeBreakType($.nextCodePoint());while(!$.eol()){let Z=$.offset,Q=J.getGraphemeBreakType($.nextCodePoint());if(Og(Y,Q)){$.setOffset(Z);break}Y=Q}return $.offset-X}prevGraphemeLength(){let J=RQ.getInstance(),$=this._iterator,X=$.offset,Y=J.getGraphemeBreakType($.prevCodePoint());while($.offset>0){let Z=$.offset,Q=J.getGraphemeBreakType($.prevCodePoint());if(Og(Q,Y)){$.setOffset(Z);break}Y=Q}return X-$.offset}eol(){return this._iterator.eol()}}function Wj(J,$){return new lq(J,$).nextGraphemeLength()}function XT(J,$){return new lq(J,$).prevGraphemeLength()}function Lg(J,$){if($>0&&HX(J.charCodeAt($)))$--;let X=$+Wj(J,$);return[X-XT(J,X),X]}function d$0(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function xY(J){if(!$T)$T=d$0();return $T.test(J)}function dq(J){return s$0.test(J)}function _A(J){return YT.test(J)}function R4(J){return J>=11904&&J<=55215||J>=63744&&J<=64255||J>=65281&&J<=65374}function Bj(J){return J>=127462&&J<=127487||J===8986||J===8987||J===9200||J===9203||J>=9728&&J<=10175||J===11088||J===11093||J>=127744&&J<=128591||J>=128640&&J<=128764||J>=128992&&J<=129008||J>=129280&&J<=129535||J>=129648&&J<=129782}function sq(J){return!!(J&&J.length>0&&J.charCodeAt(0)===65279)}function NA(J){if(J=J%52,J<26)return String.fromCharCode(97+J);return String.fromCharCode(65+J-26)}function Og(J,$){if(J===0)return $!==5&&$!==7;if(J===2){if($===3)return!1}if(J===4||J===2||J===3)return!0;if($===4||$===2||$===3)return!0;if(J===8){if($===8||$===9||$===11||$===12)return!1}if(J===11||J===9){if($===9||$===10)return!1}if(J===12||J===10){if($===10)return!1}if($===5||$===13)return!1;if($===7)return!1;if(J===1)return!1;if(J===13&&$===14)return!1;if(J===6&&$===6)return!1;return!0}class RQ{static getInstance(){if(!RQ._INSTANCE)RQ._INSTANCE=new RQ;return RQ._INSTANCE}constructor(){this._data=a$0()}getGraphemeBreakType(J){if(J<32){if(J===10)return 3;if(J===13)return 2;return 4}if(J<127)return 0;let $=this._data,X=$.length/3,Y=1;while(Y<=X)if(J<$[3*Y])Y=2*Y;else if(J>$[3*Y+1])Y=2*Y+1;else return $[3*Y+2];return 0}}function a$0(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function Eg(J,$){if(J===0)return 0;let X=r$0(J,$);if(X!==void 0)return X;let Y=new OA($,J);return Y.prevCodePoint(),Y.offset}function r$0(J,$){let X=new OA($,J),Y=X.prevCodePoint();while(i$0(Y)||Y===65039||Y===8419){if(X.offset===0)return;Y=X.prevCodePoint()}if(!Bj(Y))return;let Z=X.offset;if(Z>0){if(X.prevCodePoint()===8205)Z=X.offset}return Z}function i$0(J){return 127995<=J&&J<=127999}class bY{static getInstance(J){return pq.cache.get(Array.from(J))}static getLocales(){return pq._locales.value}constructor(J){this.confusableDictionary=J}isAmbiguous(J){return this.confusableDictionary.has(J)}getPrimaryConfusable(J){return this.confusableDictionary.get(J)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}class IY{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){if(!this._data)this._data=new Set(IY.getRawData());return this._data}static isInvisibleCharacter(J){return IY.getData().has(J)}static get codePoints(){return IY.getData()}}var pq,c$0,$T=void 0,s$0,YT,kg;var X1=w(()=>{c$0=/{(\d+)}/g;s$0=/^[\t\n\r\x20-\x7E]*$/;YT=/[\u2028\u2029]/;kg=String.fromCharCode(65279);RQ._INSTANCE=null;pq=bY;bY.ambiguousCharacterData=new s9(()=>{return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')});bY.cache=new JT((J)=>{function $(z){let H=new Map;for(let j=0;j<z.length;j+=2)H.set(z[j],z[j+1]);return H}function X(z,H){let j=new Map(z);for(let[V,W]of H)j.set(V,W);return j}function Y(z,H){if(!z)return H;let j=new Map;for(let[V,W]of z)if(H.has(V))j.set(V,W);return j}let Z=pq.ambiguousCharacterData.value,Q=J.filter((z)=>!z.startsWith("_")&&(z in Z));if(Q.length===0)Q=["_default"];let G=void 0;for(let z of Q){let H=$(Z[z]);G=Y(G,H)}let q=$(Z._common),U=X(q,G);return new pq(U)});bY._locales=new s9(()=>Object.keys(pq.ambiguousCharacterData.value).filter((J)=>!J.startsWith("_")));IY._data=void 0});var Ig=w(()=>{K0('.monaco-editor{--monaco-monospace-font:"SF Mono",Monaco,Menlo,Consolas,"Ubuntu Mono","Liberation Mono","DejaVu Sans Mono","Courier New",monospace;font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,HelveticaNeue-Light,system-ui,Ubuntu,Droid Sans,sans-serif}.monaco-menu .monaco-action-bar.vertical .action-item .action-menu-item:focus .action-label,.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-black .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-light .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label{stroke-width:1.2px}.monaco-hover p{margin:0}.monaco-aria-container{clip:rect(1px,1px,1px,1px);clip-path:inset(50%);width:1px;height:1px;margin:-1px;padding:0;top:0;overflow:hidden;position:absolute!important}.monaco-editor,.monaco-diff-editor .synthetic-focus,.monaco-editor,.monaco-diff-editor [tabindex="0"]:focus,.monaco-editor,.monaco-diff-editor [tabindex="-1"]:focus,.monaco-editor,.monaco-diff-editor button:focus,.monaco-editor,.monaco-diff-editor input[type=button]:focus,.monaco-editor,.monaco-diff-editor input[type=checkbox]:focus,.monaco-editor,.monaco-diff-editor input[type=search]:focus,.monaco-editor,.monaco-diff-editor input[type=text]:focus,.monaco-editor,.monaco-diff-editor select:focus,.monaco-editor,.monaco-diff-editor textarea:focus{outline-offset:-1px;outline-width:1px;outline-style:solid;outline-color:var(--vscode-focusBorder);opacity:1}')});class wA{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(J){var $;return($=this.mapWindowIdToZoomFactor.get(this.getWindowId(J)))!==null&&$!==void 0?$:1}getWindowId(J){return J.vscodeWindowId}}class bg{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){if(!this._pixelRatioMonitor)this._pixelRatioMonitor=FG(new xg);return this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function ZT(J,$,X){if(typeof $==="string")$=J.matchMedia($);$.addEventListener("change",X)}function Sg(J){return wA.INSTANCE.getZoomFactor(J)}function Cg(){return TA}var yg,xg,aq,rq,U8,G$,jX,K9,LA,ED0,QT,TA=!1;var e7=w(()=>{N8();_0();z0();wA.INSTANCE=new wA;yg=class yg extends m{constructor(){super();this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(J){var $;if(($=this._mediaQueryList)===null||$===void 0||$.removeEventListener("change",this._listener),this._mediaQueryList=EY.matchMedia(`(resolution: ${EY.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),J)this._onDidChange.fire()}};xg=class xg extends m{get value(){return this._value}constructor(){super();this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();let J=this._register(new yg);this._register(J.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}_getPixelRatio(){let J=document.createElement("canvas").getContext("2d"),$=EY.devicePixelRatio||1,X=J.webkitBackingStorePixelRatio||J.mozBackingStorePixelRatio||J.msBackingStorePixelRatio||J.oBackingStorePixelRatio||J.backingStorePixelRatio||1;return $/X}};aq=new bg;rq=navigator.userAgent,U8=rq.indexOf("Firefox")>=0,G$=rq.indexOf("AppleWebKit")>=0,jX=rq.indexOf("Chrome")>=0,K9=!jX&&rq.indexOf("Safari")>=0,LA=!jX&&!K9&&G$,ED0=rq.indexOf("Electron/")>=0,QT=rq.indexOf("Android")>=0;if(typeof W1.matchMedia==="function"){let J=W1.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),$=W1.matchMedia("(display-mode: fullscreen)");TA=J.matches,ZT(W1,J,({matches:X})=>{if(TA&&$.matches)return;TA=X})}});class kA{constructor(J){this.domNode=J,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(J){let $=q$(J);if(this._maxWidth===$)return;this._maxWidth=$,this.domNode.style.maxWidth=this._maxWidth}setWidth(J){let $=q$(J);if(this._width===$)return;this._width=$,this.domNode.style.width=this._width}setHeight(J){let $=q$(J);if(this._height===$)return;this._height=$,this.domNode.style.height=this._height}setTop(J){let $=q$(J);if(this._top===$)return;this._top=$,this.domNode.style.top=this._top}setLeft(J){let $=q$(J);if(this._left===$)return;this._left=$,this.domNode.style.left=this._left}setBottom(J){let $=q$(J);if(this._bottom===$)return;this._bottom=$,this.domNode.style.bottom=this._bottom}setRight(J){let $=q$(J);if(this._right===$)return;this._right=$,this.domNode.style.right=this._right}setPaddingLeft(J){let $=q$(J);if(this._paddingLeft===$)return;this._paddingLeft=$,this.domNode.style.paddingLeft=this._paddingLeft}setFontFamily(J){if(this._fontFamily===J)return;this._fontFamily=J,this.domNode.style.fontFamily=this._fontFamily}setFontWeight(J){if(this._fontWeight===J)return;this._fontWeight=J,this.domNode.style.fontWeight=this._fontWeight}setFontSize(J){let $=q$(J);if(this._fontSize===$)return;this._fontSize=$,this.domNode.style.fontSize=this._fontSize}setFontStyle(J){if(this._fontStyle===J)return;this._fontStyle=J,this.domNode.style.fontStyle=this._fontStyle}setFontFeatureSettings(J){if(this._fontFeatureSettings===J)return;this._fontFeatureSettings=J,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings}setFontVariationSettings(J){if(this._fontVariationSettings===J)return;this._fontVariationSettings=J,this.domNode.style.fontVariationSettings=this._fontVariationSettings}setTextDecoration(J){if(this._textDecoration===J)return;this._textDecoration=J,this.domNode.style.textDecoration=this._textDecoration}setLineHeight(J){let $=q$(J);if(this._lineHeight===$)return;this._lineHeight=$,this.domNode.style.lineHeight=this._lineHeight}setLetterSpacing(J){let $=q$(J);if(this._letterSpacing===$)return;this._letterSpacing=$,this.domNode.style.letterSpacing=this._letterSpacing}setClassName(J){if(this._className===J)return;this._className=J,this.domNode.className=this._className}toggleClassName(J,$){this.domNode.classList.toggle(J,$),this._className=this.domNode.className}setDisplay(J){if(this._display===J)return;this._display=J,this.domNode.style.display=this._display}setPosition(J){if(this._position===J)return;this._position=J,this.domNode.style.position=this._position}setVisibility(J){if(this._visibility===J)return;this._visibility=J,this.domNode.style.visibility=this._visibility}setColor(J){if(this._color===J)return;this._color=J,this.domNode.style.color=this._color}setBackgroundColor(J){if(this._backgroundColor===J)return;this._backgroundColor=J,this.domNode.style.backgroundColor=this._backgroundColor}setLayerHinting(J){if(this._layerHint===J)return;this._layerHint=J,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":""}setBoxShadow(J){if(this._boxShadow===J)return;this._boxShadow=J,this.domNode.style.boxShadow=J}setContain(J){if(this._contain===J)return;this._contain=J,this.domNode.style.contain=this._contain}setAttribute(J,$){this.domNode.setAttribute(J,$)}removeAttribute(J){this.domNode.removeAttribute(J)}appendChild(J){this.domNode.appendChild(J.domNode)}removeChild(J){this.domNode.removeChild(J.domNode)}}function q$(J){return typeof J==="number"?`${J}px`:J}function Y1(J){return new kA(J)}function S6(J,$){if(J instanceof kA)J.setFontFamily($.getMassagedFontFamily()),J.setFontWeight($.fontWeight),J.setFontSize($.fontSize),J.setFontFeatureSettings($.fontFeatureSettings),J.setFontVariationSettings($.fontVariationSettings),J.setLineHeight($.lineHeight),J.setLetterSpacing($.letterSpacing);else J.style.fontFamily=$.getMassagedFontFamily(),J.style.fontWeight=$.fontWeight,J.style.fontSize=$.fontSize+"px",J.style.fontFeatureSettings=$.fontFeatureSettings,J.style.fontVariationSettings=$.fontVariationSettings,J.style.lineHeight=$.lineHeight+"px",J.style.letterSpacing=$.letterSpacing+"px"}var HJ=()=>{};class GT{constructor(J,$){this.chr=J,this.type=$,this.width=0}fulfill(J){this.width=J}}class qT{constructor(J,$){this._bareFontInfo=J,this._requests=$,this._container=null,this._testElements=null}read(){this._createDomElements(),EY.document.body.appendChild(this._container),this._readFromDomElements(),EY.document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){let J=document.createElement("div");J.style.position="absolute",J.style.top="-50000px",J.style.width="50000px";let $=document.createElement("div");S6($,this._bareFontInfo),J.appendChild($);let X=document.createElement("div");S6(X,this._bareFontInfo),X.style.fontWeight="bold",J.appendChild(X);let Y=document.createElement("div");S6(Y,this._bareFontInfo),Y.style.fontStyle="italic",J.appendChild(Y);let Z=[];for(let Q of this._requests){let G;if(Q.type===0)G=$;if(Q.type===2)G=X;if(Q.type===1)G=Y;G.appendChild(document.createElement("br"));let q=document.createElement("span");qT._render(q,Q),G.appendChild(q),Z.push(q)}this._container=J,this._testElements=Z}static _render(J,$){if($.chr===" "){let X=" ";for(let Y=0;Y<8;Y++)X+=X;J.innerText=X}else{let X=$.chr;for(let Y=0;Y<8;Y++)X+=X;J.textContent=X}}_readFromDomElements(){for(let J=0,$=this._requests.length;J<$;J++){let X=this._requests[J],Y=this._testElements[J];X.fulfill(Y.offsetWidth/256)}}}function vg(J,$){new qT(J,$).read()}var hg=w(()=>{N8();HJ()});var jJ;var Fj=w(()=>{_0();jJ=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new x,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(J){if(J=Math.min(Math.max(-5,J),20),this._zoomLevel===J)return;this._zoomLevel=J,this._onDidChangeZoomLevel.fire(this._zoomLevel)}}});class CY{static createFromValidatedSettings(J,$,X){let Y=J.get(49),Z=J.get(53),Q=J.get(52),G=J.get(51),q=J.get(54),U=J.get(66),z=J.get(63);return CY._create(Y,Z,Q,G,q,U,z,$,X)}static _create(J,$,X,Y,Z,Q,G,q,U){if(Q===0)Q=n$0*X;else if(Q<UT)Q=Q*X;if(Q=Math.round(Q),Q<UT)Q=UT;let z=1+(U?0:jJ.getZoomLevel()*0.1);if(X*=z,Q*=z,Z===QJ.TRANSLATE)if($==="normal"||$==="bold")Z=QJ.OFF;else Z=`'wght' ${parseInt($,10)}`,$="normal";return new CY({pixelRatio:q,fontFamily:J,fontWeight:$,fontSize:X,fontFeatureSettings:Y,fontVariationSettings:Z,lineHeight:Q,letterSpacing:G})}constructor(J){this._bareFontInfoBrand=void 0,this.pixelRatio=J.pixelRatio,this.fontFamily=String(J.fontFamily),this.fontWeight=String(J.fontWeight),this.fontSize=J.fontSize,this.fontFeatureSettings=J.fontFeatureSettings,this.fontVariationSettings=J.fontVariationSettings,this.lineHeight=J.lineHeight|0,this.letterSpacing=J.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let J=Q7.fontFamily,$=CY._wrapInQuotes(this.fontFamily);if(J&&this.fontFamily!==J)return`${$}, ${J}`;return $}static _wrapInQuotes(J){if(/[,"']/.test(J))return J;if(/[+ ]/.test(J))return`"${J}"`;return J}}var n$0,UT=8,o$0=2,iq;var EA=w(()=>{L1();O8();Fj();n$0=t0?1.5:1.35;iq=class iq extends CY{constructor(J,$){super(J);this._editorStylingBrand=void 0,this.version=o$0,this.isTrusted=$,this.isMonospace=J.isMonospace,this.typicalHalfwidthCharacterWidth=J.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=J.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=J.canUseHalfwidthRightwardsArrow,this.spaceWidth=J.spaceWidth,this.middotWidth=J.middotWidth,this.wsmiddotWidth=J.wsmiddotWidth,this.maxDigitWidth=J.maxDigitWidth}equals(J){return this.fontFamily===J.fontFamily&&this.fontWeight===J.fontWeight&&this.fontSize===J.fontSize&&this.fontFeatureSettings===J.fontFeatureSettings&&this.fontVariationSettings===J.fontVariationSettings&&this.lineHeight===J.lineHeight&&this.letterSpacing===J.letterSpacing&&this.typicalHalfwidthCharacterWidth===J.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===J.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===J.canUseHalfwidthRightwardsArrow&&this.spaceWidth===J.spaceWidth&&this.middotWidth===J.middotWidth&&this.wsmiddotWidth===J.wsmiddotWidth&&this.maxDigitWidth===J.maxDigitWidth}}});class zT{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(J){let $=J.getId();return!!this._values[$]}get(J){let $=J.getId();return this._values[$]}put(J,$){let X=J.getId();this._keys[X]=J,this._values[X]=$}remove(J){let $=J.getId();delete this._keys[$],delete this._values[$]}getValues(){return Object.keys(this._keys).map((J)=>this._values[J])}}var fg,Kj;var HT=w(()=>{e7();N8();_0();z0();hg();O8();EA();fg=class fg extends m{constructor(){super();this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._cache=new zT,this._evictUntrustedReadingsTimeout=-1}dispose(){if(this._evictUntrustedReadingsTimeout!==-1)clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1;super.dispose()}clearAllFontInfos(){this._cache=new zT,this._onDidChange.fire()}_writeToCache(J,$){if(this._cache.put(J,$),!$.isTrusted&&this._evictUntrustedReadingsTimeout===-1)this._evictUntrustedReadingsTimeout=W1.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5000)}_evictUntrustedReadings(){let J=this._cache.getValues(),$=!1;for(let X of J)if(!X.isTrusted)$=!0,this._cache.remove(X);if($)this._onDidChange.fire()}readFontInfo(J){if(!this._cache.has(J)){let $=this._actualReadFontInfo(J);if($.typicalHalfwidthCharacterWidth<=2||$.typicalFullwidthCharacterWidth<=2||$.spaceWidth<=2||$.maxDigitWidth<=2)$=new iq({pixelRatio:aq.value,fontFamily:$.fontFamily,fontWeight:$.fontWeight,fontSize:$.fontSize,fontFeatureSettings:$.fontFeatureSettings,fontVariationSettings:$.fontVariationSettings,lineHeight:$.lineHeight,letterSpacing:$.letterSpacing,isMonospace:$.isMonospace,typicalHalfwidthCharacterWidth:Math.max($.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max($.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:$.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max($.spaceWidth,5),middotWidth:Math.max($.middotWidth,5),wsmiddotWidth:Math.max($.wsmiddotWidth,5),maxDigitWidth:Math.max($.maxDigitWidth,5)},!1);this._writeToCache(J,$)}return this._cache.get(J)}_createRequest(J,$,X,Y){let Z=new GT(J,$);return X.push(Z),Y===null||Y===void 0||Y.push(Z),Z}_actualReadFontInfo(J){let $=[],X=[],Y=this._createRequest("n",0,$,X),Z=this._createRequest("ｍ",0,$,null),Q=this._createRequest(" ",0,$,X),G=this._createRequest("0",0,$,X),q=this._createRequest("1",0,$,X),U=this._createRequest("2",0,$,X),z=this._createRequest("3",0,$,X),H=this._createRequest("4",0,$,X),j=this._createRequest("5",0,$,X),V=this._createRequest("6",0,$,X),W=this._createRequest("7",0,$,X),B=this._createRequest("8",0,$,X),K=this._createRequest("9",0,$,X),P=this._createRequest("→",0,$,X),A=this._createRequest("￫",0,$,null),D=this._createRequest("·",0,$,X),M=this._createRequest(String.fromCharCode(11825),0,$,null),R="|/-_ilm%";for(let v=0,l=8;v<l;v++)this._createRequest("|/-_ilm%".charAt(v),0,$,X),this._createRequest("|/-_ilm%".charAt(v),1,$,X),this._createRequest("|/-_ilm%".charAt(v),2,$,X);vg(J,$);let O=Math.max(G.width,q.width,U.width,z.width,H.width,j.width,V.width,W.width,B.width,K.width),N=J.fontFeatureSettings===x7.OFF,T=X[0].width;for(let v=1,l=X.length;N&&v<l;v++){let f=T-X[v].width;if(f<-0.001||f>0.001){N=!1;break}}let S=!0;if(N&&A.width!==T)S=!1;if(A.width>P.width)S=!1;return new iq({pixelRatio:aq.value,fontFamily:J.fontFamily,fontWeight:J.fontWeight,fontSize:J.fontSize,fontFeatureSettings:J.fontFeatureSettings,fontVariationSettings:J.fontVariationSettings,lineHeight:J.lineHeight,letterSpacing:J.letterSpacing,isMonospace:N,typicalHalfwidthCharacterWidth:Y.width,typicalFullwidthCharacterWidth:Z.width,canUseHalfwidthRightwardsArrow:S,spaceWidth:Q.width,middotWidth:D.width,wsmiddotWidth:M.width,maxDigitWidth:O},!0)}};Kj=new fg});function t$0(J,$,X){if($[VJ.DI_TARGET]===$)$[VJ.DI_DEPENDENCIES].push({id:J,index:X});else $[VJ.DI_DEPENDENCIES]=[{id:J,index:X}],$[VJ.DI_TARGET]=$}function w0(J){if(VJ.serviceIds.has(J))return VJ.serviceIds.get(J);let $=function(X,Y,Z){if(arguments.length!==3)throw Error("@IServiceName-decorator can only be used to decorate a parameter");t$0($,X,Z)};return $.toString=()=>J,VJ.serviceIds.set(J,$),$}var VJ,l0;var s0=w(()=>{(function(J){J.serviceIds=new Map,J.DI_TARGET="$di$target",J.DI_DEPENDENCIES="$di$dependencies";function $(X){return X[J.DI_DEPENDENCIES]||[]}J.getServiceDependencies=$})(VJ||(VJ={}));l0=w0("instantiationService")});var X6;var i9=w(()=>{s0();X6=w0("codeEditorService")});var E5;var vY=w(()=>{s0();E5=w0("modelService")});var hY;var Aj=w(()=>{s0();hY=w0("textModelService")});class Z5{constructor(){this.id=Z5.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...J){let $=[];for(let X of J)if(!X.length);else if($.length)$=[...$,new Z5,...X];else $=X;return $}async run(){}}class fY{get actions(){return this._actions}constructor(J,$,X,Y){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=J,this.label=$,this.class=Y,this._actions=X}async run(){}}function TG(J){var $,X;return{id:J.id,label:J.label,class:J.class,enabled:($=J.enabled)!==null&&$!==void 0?$:!0,checked:(X=J.checked)!==null&&X!==void 0?X:!1,run:async(...Y)=>J.run(...Y),tooltip:J.label}}var J9,n9,Pj;var S7=w(()=>{_0();z0();c0();J9=class J9 extends m{constructor(J,$="",X="",Y=!0,Z){super();this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=J,this._label=$,this._cssClass=X,this._enabled=Y,this._actionCallback=Z}get id(){return this._id}get label(){return this._label}set label(J){this._setLabel(J)}_setLabel(J){if(this._label!==J)this._label=J,this._onDidChange.fire({label:J})}get tooltip(){return this._tooltip||""}set tooltip(J){this._setTooltip(J)}_setTooltip(J){if(this._tooltip!==J)this._tooltip=J,this._onDidChange.fire({tooltip:J})}get class(){return this._cssClass}set class(J){this._setClass(J)}_setClass(J){if(this._cssClass!==J)this._cssClass=J,this._onDidChange.fire({class:J})}get enabled(){return this._enabled}set enabled(J){this._setEnabled(J)}_setEnabled(J){if(this._enabled!==J)this._enabled=J,this._onDidChange.fire({enabled:J})}get checked(){return this._checked}set checked(J){this._setChecked(J)}_setChecked(J){if(this._checked!==J)this._checked=J,this._onDidChange.fire({checked:J})}async run(J,$){if(this._actionCallback)await this._actionCallback(J)}};n9=class n9 extends m{constructor(){super(...arguments);this._onWillRun=this._register(new x),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new x),this.onDidRun=this._onDidRun.event}async run(J,$){if(!J.enabled)return;this._onWillRun.fire({action:J});let X=void 0;try{await this.runAction(J,$)}catch(Y){X=Y}this._onDidRun.fire({action:J,error:X})}async runAction(J,$){await J.run($)}};Z5.ID="vs.actions.separator";Pj=class Pj extends J9{constructor(){super(Pj.ID,F("submenu.empty","(empty)"),void 0,!1)}};Pj.ID="vs.actions.empty"});var jT,h0;var I5=w(()=>{k5();(function(J){function $(X){return X&&typeof X==="object"&&typeof X.id==="string"}J.isThemeColor=$})(jT||(jT={}));(function(J){J.iconNameSegment="[A-Za-z0-9]+",J.iconNameExpression="[A-Za-z0-9-]+",J.iconModifierExpression="~[A-Za-z]+",J.iconNameCharacter="[A-Za-z0-9~-]";let $=new RegExp(`^(${J.iconNameExpression})(${J.iconModifierExpression})?$`);function X(V){let W=$.exec(V.id);if(!W)return X(F0.error);let[,B,K]=W,P=["codicon","codicon-"+B];if(K)P.push("codicon-modifier-"+K.substring(1));return P}J.asClassNameArray=X;function Y(V){return X(V).join(" ")}J.asClassName=Y;function Z(V){return"."+X(V).join(".")}J.asCSSSelector=Z;function Q(V){return V&&typeof V==="object"&&typeof V.id==="string"&&(typeof V.color>"u"||jT.isThemeColor(V.color))}J.isThemeIcon=Q;let G=new RegExp(`^\\$\\((${J.iconNameExpression}(?:${J.iconModifierExpression})?)\\)$`);function q(V){let W=G.exec(V);if(!W)return;let[,B]=W;return{id:B}}J.fromString=q;function U(V){return{id:V}}J.fromId=U;function z(V,W){let B=V.id,K=B.lastIndexOf("~");if(K!==-1)B=B.substring(0,K);if(W)B=`${B}~${W}`;return{id:B}}J.modify=z;function H(V){let W=V.id.lastIndexOf("~");if(W!==-1)return V.id.substring(W+1);return}J.getModifier=H;function j(V,W){var B,K;return V.id===W.id&&((B=V.color)===null||B===void 0?void 0:B.id)===((K=W.color)===null||K===void 0?void 0:K.id)}J.isEqual=j})(h0||(h0={}))});var y5,M6;var C7=w(()=>{_0();P4();z0();D4();s0();y5=w0("commandService"),M6=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new x,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(J,$){if(!J)throw Error("invalid command");if(typeof J==="string"){if(!$)throw Error("invalid command");return this.registerCommand({id:J,handler:$})}if(J.metadata&&Array.isArray(J.metadata.args)){let G=[];for(let U of J.metadata.args)G.push(U.constraint);let q=J.handler;J.handler=function(U,...z){return ih(z,G),q(U,...z)}}let{id:X}=J,Y=this._commands.get(X);if(!Y)Y=new m6,this._commands.set(X,Y);let Z=Y.unshift(J),Q=N0(()=>{Z();let G=this._commands.get(X);if(G===null||G===void 0?void 0:G.isEmpty())this._commands.delete(X)});return this._onDidRegisterCommand.fire(X),Q}registerCommandAlias(J,$){return M6.registerCommand(J,(X,...Y)=>X.get(y5).executeCommand($,...Y))}getCommand(J){let $=this._commands.get(J);if(!$||$.isEmpty())return;return A1.first($)}getCommands(){let J=new Map;for(let $ of this._commands.keys()){let X=this.getCommand($);if(X)J.set($,X)}return J}};M6.registerCommand("noop",()=>{})});function VT(...J){switch(J.length){case 1:return F("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",J[0]);case 2:return F("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",J[0],J[1]);case 3:return F("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",J[0],J[1],J[2]);default:return}}class U${constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(J){switch(J.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return J.isTripleEq?"===":"==";case 4:return J.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return J.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return J.lexeme;case 18:return J.lexeme;case 19:return J.lexeme;case 20:return"EOF";default:throw vq(`unhandled token type: ${JSON.stringify(J)}; have you forgotten to add a case?`)}}reset(J){return this._input=J,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){while(!this._isAtEnd())switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let $=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:$})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let $=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:$})}else if(this._match(126))this._addToken(9);else this._error(VT("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:if(this._match(38))this._addToken(15);else this._error(VT("&&"));break;case 124:if(this._match(124))this._addToken(16);else this._error(VT("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(J){if(this._isAtEnd())return!1;if(this._input.charCodeAt(this._current)!==J)return!1;return this._current++,!0}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(J){this._tokens.push({type:J,offset:this._start})}_error(J){let $=this._start,X=this._input.substring(this._start,this._current),Y={type:19,offset:this._start,lexeme:X};this._errors.push({offset:$,lexeme:X,additionalInfo:J}),this._tokens.push(Y)}_string(){this.stringRe.lastIndex=this._start;let J=this.stringRe.exec(this._input);if(J){this._current=this._start+J[0].length;let $=this._input.substring(this._start,this._current),X=U$._keywords.get($);if(X)this._addToken(X);else this._tokens.push({type:17,lexeme:$,offset:this._start})}}_quotedString(){while(this._peek()!==39&&!this._isAtEnd())this._advance();if(this._isAtEnd()){this._error(e$0);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let J=this._current,$=!1,X=!1;while(!0){if(J>=this._input.length){this._current=J,this._error(JX0);return}let Z=this._input.charCodeAt(J);if($)$=!1;else if(Z===47&&!X){J++;break}else if(Z===91)X=!0;else if(Z===92)$=!0;else if(Z===93)X=!1;J++}while(J<this._input.length&&U$._regexFlags.has(this._input.charCodeAt(J)))J++;this._current=J;let Y=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:Y,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}var e$0,JX0;var gg=w(()=>{O1();c0();e$0=F("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),JX0=F("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");U$._regexFlags=new Set(["i","g","s","m","y","u"].map((J)=>J.charCodeAt(0)));U$._keywords=new Map([["not",14],["in",13],["false",12],["true",11]])});class wG{constructor(J=XX0){this._config=J,this._scanner=new U$,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(J){if(J===""){this._parsingErrors.push({message:YX0,offset:0,lexeme:"",additionalInfo:ZX0});return}this._tokens=this._scanner.reset(J).scan(),this._current=0,this._parsingErrors=[];try{let $=this._expr();if(!this._isAtEnd()){let X=this._peek(),Y=X.type===17?qX0:void 0;throw this._parsingErrors.push({message:GX0,offset:X.offset,lexeme:U$.getLexeme(X),additionalInfo:Y}),wG._parseError}return $}catch($){if($!==wG._parseError)throw $;return}}_expr(){return this._or()}_or(){let J=[this._and()];while(this._matchOne(16)){let $=this._and();J.push($)}return J.length===1?J[0]:E0.or(...J)}_and(){let J=[this._term()];while(this._matchOne(15)){let $=this._term();J.push($)}return J.length===1?J[0]:E0.and(...J)}_term(){if(this._matchOne(2)){let J=this._peek();switch(J.type){case 11:return this._advance(),z7.INSTANCE;case 12:return this._advance(),v7.INSTANCE;case 0:{this._advance();let $=this._expr();return this._consume(1,pg),$===null||$===void 0?void 0:$.negate()}case 17:return this._advance(),EG.create(J.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",J)}}return this._primary()}_primary(){let J=this._peek();switch(J.type){case 11:return this._advance(),E0.true();case 12:return this._advance(),E0.false();case 0:{this._advance();let $=this._expr();return this._consume(1,pg),$}case 17:{let $=J.lexeme;if(this._advance(),this._matchOne(9)){let Y=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),Y.type!==10)throw this._errExpectedButGot("REGEX",Y);let Z=Y.lexeme,Q=Z.lastIndexOf("/"),G=Q===Z.length-1?void 0:this._removeFlagsGY(Z.substring(Q+1)),q;try{q=new RegExp(Z.substring(1,Q),G)}catch(U){throw this._errExpectedButGot("REGEX",Y)}return Rj.create($,q)}switch(Y.type){case 10:case 19:{let Z=[Y.lexeme];this._advance();let Q=this._peek(),G=0;for(let j=0;j<Y.lexeme.length;j++)if(Y.lexeme.charCodeAt(j)===40)G++;else if(Y.lexeme.charCodeAt(j)===41)G--;while(!this._isAtEnd()&&Q.type!==15&&Q.type!==16){switch(Q.type){case 0:G++;break;case 1:G--;break;case 10:case 18:for(let j=0;j<Q.lexeme.length;j++)if(Q.lexeme.charCodeAt(j)===40)G++;else if(Y.lexeme.charCodeAt(j)===41)G--}if(G<0)break;Z.push(U$.getLexeme(Q)),this._advance(),Q=this._peek()}let q=Z.join(""),U=q.lastIndexOf("/"),z=U===q.length-1?void 0:this._removeFlagsGY(q.substring(U+1)),H;try{H=new RegExp(q.substring(1,U),z)}catch(j){throw this._errExpectedButGot("REGEX",Y)}return E0.regex($,H)}case 18:{let Z=Y.lexeme;this._advance();let Q=null;if(!PA(Z)){let G=Z.indexOf("/"),q=Z.lastIndexOf("/");if(G!==q&&G>=0){let U=Z.slice(G+1,q),z=Z[q+1]==="i"?"i":"";try{Q=new RegExp(U,z)}catch(H){throw this._errExpectedButGot("REGEX",Y)}}}if(Q===null)throw this._errExpectedButGot("REGEX",Y);return Rj.create($,Q)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,QX0);let Y=this._value();return E0.notIn($,Y)}switch(this._peek().type){case 3:{this._advance();let Y=this._value();if(this._previous().type===18)return E0.equals($,Y);switch(Y){case"true":return E0.has($);case"false":return E0.not($);default:return E0.equals($,Y)}}case 4:{this._advance();let Y=this._value();if(this._previous().type===18)return E0.notEquals($,Y);switch(Y){case"true":return E0.not($);case"false":return E0.has($);default:return E0.notEquals($,Y)}}case 5:return this._advance(),hA.create($,this._value());case 6:return this._advance(),fA.create($,this._value());case 7:return this._advance(),CA.create($,this._value());case 8:return this._advance(),vA.create($,this._value());case 13:return this._advance(),E0.in($,this._value());default:return E0.has($)}}case 20:throw this._parsingErrors.push({message:UX0,offset:J.offset,lexeme:"",additionalInfo:zX0}),wG._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let J=this._peek();switch(J.type){case 17:case 18:return this._advance(),J.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(J){return J.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(J){if(this._check(J))return this._advance(),!0;return!1}_advance(){if(!this._isAtEnd())this._current++;return this._previous()}_consume(J,$){if(this._check(J))return this._advance();throw this._errExpectedButGot($,this._peek())}_errExpectedButGot(J,$,X){let Y=F("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,J,U$.getLexeme($)),Z=$.offset,Q=U$.getLexeme($);return this._parsingErrors.push({message:Y,offset:Z,lexeme:Q,additionalInfo:X}),wG._parseError}_check(J){return this._peek().type===J}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}}class E0{static false(){return z7.INSTANCE}static true(){return v7.INSTANCE}static has(J){return kG.create(J)}static equals(J,$){return Mj.create(J,$)}static notEquals(J,$){return bA.create(J,$)}static regex(J,$){return Rj.create(J,$)}static in(J,$){return yA.create(J,$)}static notIn(J,$){return xA.create(J,$)}static not(J){return EG.create(J)}static and(...J){return LG.create(J,null,!0)}static or(...J){return gY.create(J,null,!0)}static deserialize(J){if(J===void 0||J===null)return;return this._parser.parse(J)}}function cg(J,$){let X=J?J.substituteConstants():void 0,Y=$?$.substituteConstants():void 0;if(!X&&!Y)return!0;if(!X||!Y)return!1;return X.equals(Y)}function Dj(J,$){return J.cmp($)}class z7{constructor(){this.type=0}cmp(J){return this.type-J.type}equals(J){return J.type===this.type}substituteConstants(){return this}evaluate(J){return!1}serialize(){return"false"}keys(){return[]}negate(){return v7.INSTANCE}}class v7{constructor(){this.type=1}cmp(J){return this.type-J.type}equals(J){return J.type===this.type}substituteConstants(){return this}evaluate(J){return!0}serialize(){return"true"}keys(){return[]}negate(){return z7.INSTANCE}}class kG{static create(J,$=null){let X=l8.get(J);if(typeof X==="boolean")return X?v7.INSTANCE:z7.INSTANCE;return new kG(J,$)}constructor(J,$){this.key=J,this.negated=$,this.type=2}cmp(J){if(J.type!==this.type)return this.type-J.type;return dg(this.key,J.key)}equals(J){if(J.type===this.type)return this.key===J.key;return!1}substituteConstants(){let J=l8.get(this.key);if(typeof J==="boolean")return J?v7.INSTANCE:z7.INSTANCE;return this}evaluate(J){return!!J.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){if(!this.negated)this.negated=EG.create(this.key,this);return this.negated}}class Mj{static create(J,$,X=null){if(typeof $==="boolean")return $?kG.create(J,X):EG.create(J,X);let Y=l8.get(J);if(typeof Y==="boolean")return $===(Y?"true":"false")?v7.INSTANCE:z7.INSTANCE;return new Mj(J,$,X)}constructor(J,$,X){this.key=J,this.value=$,this.negated=X,this.type=4}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.value,J.key,J.value)}equals(J){if(J.type===this.type)return this.key===J.key&&this.value===J.value;return!1}substituteConstants(){let J=l8.get(this.key);if(typeof J==="boolean"){let $=J?"true":"false";return this.value===$?v7.INSTANCE:z7.INSTANCE}return this}evaluate(J){return J.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=bA.create(this.key,this.value,this);return this.negated}}class yA{static create(J,$){return new yA(J,$)}constructor(J,$){this.key=J,this.valueKey=$,this.type=10,this.negated=null}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.valueKey,J.key,J.valueKey)}equals(J){if(J.type===this.type)return this.key===J.key&&this.valueKey===J.valueKey;return!1}substituteConstants(){return this}evaluate(J){let $=J.getValue(this.valueKey),X=J.getValue(this.key);if(Array.isArray($))return $.includes(X);if(typeof X==="string"&&typeof $==="object"&&$!==null)return $X0.call($,X);return!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){if(!this.negated)this.negated=xA.create(this.key,this.valueKey);return this.negated}}class xA{static create(J,$){return new xA(J,$)}constructor(J,$){this.key=J,this.valueKey=$,this.type=11,this._negated=yA.create(J,$)}cmp(J){if(J.type!==this.type)return this.type-J.type;return this._negated.cmp(J._negated)}equals(J){if(J.type===this.type)return this._negated.equals(J._negated);return!1}substituteConstants(){return this}evaluate(J){return!this._negated.evaluate(J)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class bA{static create(J,$,X=null){if(typeof $==="boolean"){if($)return EG.create(J,X);return kG.create(J,X)}let Y=l8.get(J);if(typeof Y==="boolean")return $===(Y?"true":"false")?z7.INSTANCE:v7.INSTANCE;return new bA(J,$,X)}constructor(J,$,X){this.key=J,this.value=$,this.negated=X,this.type=5}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.value,J.key,J.value)}equals(J){if(J.type===this.type)return this.key===J.key&&this.value===J.value;return!1}substituteConstants(){let J=l8.get(this.key);if(typeof J==="boolean"){let $=J?"true":"false";return this.value===$?z7.INSTANCE:v7.INSTANCE}return this}evaluate(J){return J.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=Mj.create(this.key,this.value,this);return this.negated}}class EG{static create(J,$=null){let X=l8.get(J);if(typeof X==="boolean")return X?z7.INSTANCE:v7.INSTANCE;return new EG(J,$)}constructor(J,$){this.key=J,this.negated=$,this.type=3}cmp(J){if(J.type!==this.type)return this.type-J.type;return dg(this.key,J.key)}equals(J){if(J.type===this.type)return this.key===J.key;return!1}substituteConstants(){let J=l8.get(this.key);if(typeof J==="boolean")return J?z7.INSTANCE:v7.INSTANCE;return this}evaluate(J){return!J.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=kG.create(this.key,this);return this.negated}}function SA(J,$){if(typeof J==="string"){let X=parseFloat(J);if(!isNaN(X))J=X}if(typeof J==="string"||typeof J==="number")return $(J);return z7.INSTANCE}class CA{static create(J,$,X=null){return SA($,(Y)=>new CA(J,Y,X))}constructor(J,$,X){this.key=J,this.value=$,this.negated=X,this.type=12}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.value,J.key,J.value)}equals(J){if(J.type===this.type)return this.key===J.key&&this.value===J.value;return!1}substituteConstants(){return this}evaluate(J){if(typeof this.value==="string")return!1;return parseFloat(J.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=fA.create(this.key,this.value,this);return this.negated}}class vA{static create(J,$,X=null){return SA($,(Y)=>new vA(J,Y,X))}constructor(J,$,X){this.key=J,this.value=$,this.negated=X,this.type=13}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.value,J.key,J.value)}equals(J){if(J.type===this.type)return this.key===J.key&&this.value===J.value;return!1}substituteConstants(){return this}evaluate(J){if(typeof this.value==="string")return!1;return parseFloat(J.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=hA.create(this.key,this.value,this);return this.negated}}class hA{static create(J,$,X=null){return SA($,(Y)=>new hA(J,Y,X))}constructor(J,$,X){this.key=J,this.value=$,this.negated=X,this.type=14}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.value,J.key,J.value)}equals(J){if(J.type===this.type)return this.key===J.key&&this.value===J.value;return!1}substituteConstants(){return this}evaluate(J){if(typeof this.value==="string")return!1;return parseFloat(J.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=vA.create(this.key,this.value,this);return this.negated}}class fA{static create(J,$,X=null){return SA($,(Y)=>new fA(J,Y,X))}constructor(J,$,X){this.key=J,this.value=$,this.negated=X,this.type=15}cmp(J){if(J.type!==this.type)return this.type-J.type;return IG(this.key,this.value,J.key,J.value)}equals(J){if(J.type===this.type)return this.key===J.key&&this.value===J.value;return!1}substituteConstants(){return this}evaluate(J){if(typeof this.value==="string")return!1;return parseFloat(J.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=CA.create(this.key,this.value,this);return this.negated}}class Rj{static create(J,$){return new Rj(J,$)}constructor(J,$){this.key=J,this.regexp=$,this.type=7,this.negated=null}cmp(J){if(J.type!==this.type)return this.type-J.type;if(this.key<J.key)return-1;if(this.key>J.key)return 1;let $=this.regexp?this.regexp.source:"",X=J.regexp?J.regexp.source:"";if($<X)return-1;if($>X)return 1;return 0}equals(J){if(J.type===this.type){let $=this.regexp?this.regexp.source:"",X=J.regexp?J.regexp.source:"";return this.key===J.key&&$===X}return!1}substituteConstants(){return this}evaluate(J){let $=J.getValue(this.key);return this.regexp?this.regexp.test($):!1}serialize(){let J=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${J}`}keys(){return[this.key]}negate(){if(!this.negated)this.negated=WT.create(this);return this.negated}}class WT{static create(J){return new WT(J)}constructor(J){this._actual=J,this.type=8}cmp(J){if(J.type!==this.type)return this.type-J.type;return this._actual.cmp(J._actual)}equals(J){if(J.type===this.type)return this._actual.equals(J._actual);return!1}substituteConstants(){return this}evaluate(J){return!this._actual.evaluate(J)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function lg(J){let $=null;for(let X=0,Y=J.length;X<Y;X++){let Z=J[X].substituteConstants();if(J[X]!==Z){if($===null){$=[];for(let Q=0;Q<X;Q++)$[Q]=J[Q]}}if($!==null)$[X]=Z}if($===null)return J;return $}class LG{static create(J,$,X){return LG._normalizeArr(J,$,X)}constructor(J,$){this.expr=J,this.negated=$,this.type=6}cmp(J){if(J.type!==this.type)return this.type-J.type;if(this.expr.length<J.expr.length)return-1;if(this.expr.length>J.expr.length)return 1;for(let $=0,X=this.expr.length;$<X;$++){let Y=Dj(this.expr[$],J.expr[$]);if(Y!==0)return Y}return 0}equals(J){if(J.type===this.type){if(this.expr.length!==J.expr.length)return!1;for(let $=0,X=this.expr.length;$<X;$++)if(!this.expr[$].equals(J.expr[$]))return!1;return!0}return!1}substituteConstants(){let J=lg(this.expr);if(J===this.expr)return this;return LG.create(J,this.negated,!1)}evaluate(J){for(let $=0,X=this.expr.length;$<X;$++)if(!this.expr[$].evaluate(J))return!1;return!0}static _normalizeArr(J,$,X){let Y=[],Z=!1;for(let Q of J){if(!Q)continue;if(Q.type===1){Z=!0;continue}if(Q.type===0)return z7.INSTANCE;if(Q.type===6){Y.push(...Q.expr);continue}Y.push(Q)}if(Y.length===0&&Z)return v7.INSTANCE;if(Y.length===0)return;if(Y.length===1)return Y[0];Y.sort(Dj);for(let Q=1;Q<Y.length;Q++)if(Y[Q-1].equals(Y[Q]))Y.splice(Q,1),Q--;if(Y.length===1)return Y[0];while(Y.length>1){let Q=Y[Y.length-1];if(Q.type!==9)break;Y.pop();let G=Y.pop(),q=Y.length===0,U=gY.create(Q.expr.map((z)=>LG.create([z,G],null,X)),null,q);if(U)Y.push(U),Y.sort(Dj)}if(Y.length===1)return Y[0];if(X){for(let Q=0;Q<Y.length;Q++)for(let G=Q+1;G<Y.length;G++)if(Y[Q].negate().equals(Y[G]))return z7.INSTANCE;if(Y.length===1)return Y[0]}return new LG(Y,$)}serialize(){return this.expr.map((J)=>J.serialize()).join(" && ")}keys(){let J=[];for(let $ of this.expr)J.push(...$.keys());return J}negate(){if(!this.negated){let J=[];for(let $ of this.expr)J.push($.negate());this.negated=gY.create(J,this,!0)}return this.negated}}class gY{static create(J,$,X){return gY._normalizeArr(J,$,X)}constructor(J,$){this.expr=J,this.negated=$,this.type=9}cmp(J){if(J.type!==this.type)return this.type-J.type;if(this.expr.length<J.expr.length)return-1;if(this.expr.length>J.expr.length)return 1;for(let $=0,X=this.expr.length;$<X;$++){let Y=Dj(this.expr[$],J.expr[$]);if(Y!==0)return Y}return 0}equals(J){if(J.type===this.type){if(this.expr.length!==J.expr.length)return!1;for(let $=0,X=this.expr.length;$<X;$++)if(!this.expr[$].equals(J.expr[$]))return!1;return!0}return!1}substituteConstants(){let J=lg(this.expr);if(J===this.expr)return this;return gY.create(J,this.negated,!1)}evaluate(J){for(let $=0,X=this.expr.length;$<X;$++)if(this.expr[$].evaluate(J))return!0;return!1}static _normalizeArr(J,$,X){let Y=[],Z=!1;if(J){for(let Q=0,G=J.length;Q<G;Q++){let q=J[Q];if(!q)continue;if(q.type===0){Z=!0;continue}if(q.type===1)return v7.INSTANCE;if(q.type===9){Y=Y.concat(q.expr);continue}Y.push(q)}if(Y.length===0&&Z)return z7.INSTANCE;Y.sort(Dj)}if(Y.length===0)return;if(Y.length===1)return Y[0];for(let Q=1;Q<Y.length;Q++)if(Y[Q-1].equals(Y[Q]))Y.splice(Q,1),Q--;if(Y.length===1)return Y[0];if(X){for(let Q=0;Q<Y.length;Q++)for(let G=Q+1;G<Y.length;G++)if(Y[Q].negate().equals(Y[G]))return v7.INSTANCE;if(Y.length===1)return Y[0]}return new gY(Y,$)}serialize(){return this.expr.map((J)=>J.serialize()).join(" || ")}keys(){let J=[];for(let $ of this.expr)J.push(...$.keys());return J}negate(){if(!this.negated){let J=[];for(let $ of this.expr)J.push($.negate());while(J.length>1){let $=J.shift(),X=J.shift(),Y=[];for(let Z of ug($))for(let Q of ug(X))Y.push(LG.create([Z,Q],null,!1));J.unshift(gY.create(Y,null,!1))}this.negated=gY.create(J,this,!0)}return this.negated}}function dg(J,$){if(J<$)return-1;if(J>$)return 1;return 0}function IG(J,$,X,Y){if(J<X)return-1;if(J>X)return 1;if($<Y)return-1;if($>Y)return 1;return 0}function IA(J,$){if(J.type===0||$.type===1)return!0;if(J.type===9){if($.type===9)return mg(J.expr,$.expr);return!1}if($.type===9){for(let X of $.expr)if(IA(J,X))return!0;return!1}if(J.type===6){if($.type===6)return mg($.expr,J.expr);for(let X of J.expr)if(IA(X,$))return!0;return!1}return J.equals($)}function mg(J,$){let X=0,Y=0;while(X<J.length&&Y<$.length){let Z=J[X].cmp($[Y]);if(Z<0)return!1;else if(Z===0)X++,Y++;else Y++}return X===J.length}function ug(J){if(J.type===9)return J.expr;return[J]}var l8,$X0,XX0,YX0,ZX0,QX0,pg,GX0,qX0,UX0,zX0,A0,m0;var t1=w(()=>{L1();X1();gg();s0();c0();l8=new Map;l8.set("false",!1);l8.set("true",!0);l8.set("isMac",t0);l8.set("isLinux",N6);l8.set("isWindows",p6);l8.set("isWeb",YX);l8.set("isMacNative",t0&&!YX);l8.set("isEdge",Hf);l8.set("isFirefox",Uf);l8.set("isChrome",EN);l8.set("isSafari",zf);$X0=Object.prototype.hasOwnProperty,XX0={regexParsingWithErrorRecovery:!0},YX0=F("contextkey.parser.error.emptyString","Empty context key expression"),ZX0=F("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),QX0=F("contextkey.parser.error.noInAfterNot","'in' after 'not'."),pg=F("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),GX0=F("contextkey.parser.error.unexpectedToken","Unexpected token"),qX0=F("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),UX0=F("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),zX0=F("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");wG._parseError=Error();E0._parser=new wG({regexParsingWithErrorRecovery:!1});z7.INSTANCE=new z7;v7.INSTANCE=new v7;A0=class A0 extends kG{static all(){return A0._info.values()}constructor(J,$,X){super(J,null);if(this._defaultValue=$,typeof X==="object")A0._info.push({...X,key:J});else if(X!==!0)A0._info.push({key:J,description:X,type:$!==null&&$!==void 0?typeof $:void 0})}bindTo(J){return J.createKey(this.key,this._defaultValue)}getValue(J){return J.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(J){return Mj.create(this.key,J)}};A0._info=[];m0=w0("contextKeyService")});function Oj(J,$){if(typeof J==="number"){if(J===0)return null;let X=(J&65535)>>>0,Y=(J&4294901760)>>>16;if(Y!==0)return new pA([gA(X,$),gA(Y,$)]);return new pA([gA(X,$)])}else{let X=[];for(let Y=0;Y<J.length;Y++)X.push(gA(J[Y],$));return new pA(X)}}function gA(J,$){let X=J&2048?!0:!1,Y=J&256?!0:!1,Z=$===2?Y:X,Q=J&1024?!0:!1,G=J&512?!0:!1,q=$===2?X:Y,U=J&255;return new M4(Z,Q,G,q,U)}class M4{constructor(J,$,X,Y,Z){this.ctrlKey=J,this.shiftKey=$,this.altKey=X,this.metaKey=Y,this.keyCode=Z}equals(J){return J instanceof M4&&this.ctrlKey===J.ctrlKey&&this.shiftKey===J.shiftKey&&this.altKey===J.altKey&&this.metaKey===J.metaKey&&this.keyCode===J.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class pA{constructor(J){if(J.length===0)throw X$("chords");this.chords=J}}class BT{constructor(J,$,X,Y,Z,Q){this.ctrlKey=J,this.shiftKey=$,this.altKey=X,this.metaKey=Y,this.keyLabel=Z,this.keyAriaLabel=Q}}class FT{}var yG=w(()=>{O1()});function mA(J,$){if(!J)throw Error($?`Assertion failed (${$})`:"Assertion Failed")}function nq(J,$="Unreachable"){throw Error($)}function KT(J){if(!J)$1(new u1("Assertion Failed"))}function VX(J){if(!J()){debugger;J(),$1(new u1("Assertion Failed"))}}function uA(J,$){let X=0;while(X<J.length-1){let Y=J[X],Z=J[X+1];if(!$(Y,Z))return!1;X++}return!0}var WX=w(()=>{O1()});class sg{constructor(){this.data=new Map}add(J,$){mA(N5(J)),mA(z5($)),mA(!this.data.has(J),"There is already an extension with this id"),this.data.set(J,$)}as(J){return this.data.get(J)||null}}var G6;var h7=w(()=>{WX();G6=new sg});class AT{constructor(){this._coreKeybindings=new m6,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(J){if(Z7===1){if(J&&J.win)return J.win}else if(Z7===2){if(J&&J.mac)return J.mac}else if(J&&J.linux)return J.linux;return J}registerKeybindingRule(J){let $=AT.bindToCurrentPlatform(J),X=new $0;if($&&$.primary){let Y=Oj($.primary,Z7);if(Y)X.add(this._registerDefaultKeybinding(Y,J.id,J.args,J.weight,0,J.when))}if($&&Array.isArray($.secondary))for(let Y=0,Z=$.secondary.length;Y<Z;Y++){let Q=$.secondary[Y],G=Oj(Q,Z7);if(G)X.add(this._registerDefaultKeybinding(G,J.id,J.args,J.weight,-Y-1,J.when))}return X}registerCommandAndKeybindingRule(J){return G7(this.registerKeybindingRule(J),M6.registerCommand(J))}_registerDefaultKeybinding(J,$,X,Y,Z,Q){let G=this._coreKeybindings.push({keybinding:J,command:$,commandArgs:X,when:Q,weight1:Y,weight2:Z,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,N0(()=>{G(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){if(!this._cachedMergedKeybindings)this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(VX0);return this._cachedMergedKeybindings.slice(0)}}function VX0(J,$){if(J.weight1!==$.weight1)return J.weight1-$.weight1;if(J.command&&$.command){if(J.command<$.command)return-1;if(J.command>$.command)return 1}return J.weight2-$.weight2}var z$,jX0;var oq=w(()=>{yG();L1();C7();h7();z0();D4();z$=new AT,jX0={EditorModes:"platform.keybindingsRegistry"};G6.add(jX0.EditorModes,z$)});function tq(J){return J.command!==void 0}function rg(J){return J.submenu!==void 0}class y{constructor(J){if(y._instances.has(J))throw TypeError(`MenuId with identifier '${J}' already exists. Use MenuId.for(ident) or a unique identifier`);y._instances.set(J,this),this.id=J}}class pY{static for(J){let $=this._all.get(J);if(!$)$=new pY(J),this._all.set(J,$);return $}static merge(J){let $=new Set;for(let X of J)if(X instanceof pY)$.add(X.id);return $}constructor(J){this.id=J,this.has=($)=>$===J}}var WX0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},ag=function(J,$){return function(X,Y){$(X,Y,J)}},lA,BJ,BX,xG,WJ;var FJ=w(()=>{S7();I5();_0();z0();D4();C7();t1();s0();oq();y._instances=new Map;y.CommandPalette=new y("CommandPalette");y.DebugBreakpointsContext=new y("DebugBreakpointsContext");y.DebugCallStackContext=new y("DebugCallStackContext");y.DebugConsoleContext=new y("DebugConsoleContext");y.DebugVariablesContext=new y("DebugVariablesContext");y.DebugHoverContext=new y("DebugHoverContext");y.DebugWatchContext=new y("DebugWatchContext");y.DebugToolBar=new y("DebugToolBar");y.DebugToolBarStop=new y("DebugToolBarStop");y.EditorContext=new y("EditorContext");y.SimpleEditorContext=new y("SimpleEditorContext");y.EditorContent=new y("EditorContent");y.EditorLineNumberContext=new y("EditorLineNumberContext");y.EditorContextCopy=new y("EditorContextCopy");y.EditorContextPeek=new y("EditorContextPeek");y.EditorContextShare=new y("EditorContextShare");y.EditorTitle=new y("EditorTitle");y.EditorTitleRun=new y("EditorTitleRun");y.EditorTitleContext=new y("EditorTitleContext");y.EditorTitleContextShare=new y("EditorTitleContextShare");y.EmptyEditorGroup=new y("EmptyEditorGroup");y.EmptyEditorGroupContext=new y("EmptyEditorGroupContext");y.EditorTabsBarContext=new y("EditorTabsBarContext");y.EditorTabsBarShowTabsSubmenu=new y("EditorTabsBarShowTabsSubmenu");y.EditorTabsBarShowTabsZenModeSubmenu=new y("EditorTabsBarShowTabsZenModeSubmenu");y.EditorActionsPositionSubmenu=new y("EditorActionsPositionSubmenu");y.ExplorerContext=new y("ExplorerContext");y.ExplorerContextShare=new y("ExplorerContextShare");y.ExtensionContext=new y("ExtensionContext");y.GlobalActivity=new y("GlobalActivity");y.CommandCenter=new y("CommandCenter");y.CommandCenterCenter=new y("CommandCenterCenter");y.LayoutControlMenuSubmenu=new y("LayoutControlMenuSubmenu");y.LayoutControlMenu=new y("LayoutControlMenu");y.MenubarMainMenu=new y("MenubarMainMenu");y.MenubarAppearanceMenu=new y("MenubarAppearanceMenu");y.MenubarDebugMenu=new y("MenubarDebugMenu");y.MenubarEditMenu=new y("MenubarEditMenu");y.MenubarCopy=new y("MenubarCopy");y.MenubarFileMenu=new y("MenubarFileMenu");y.MenubarGoMenu=new y("MenubarGoMenu");y.MenubarHelpMenu=new y("MenubarHelpMenu");y.MenubarLayoutMenu=new y("MenubarLayoutMenu");y.MenubarNewBreakpointMenu=new y("MenubarNewBreakpointMenu");y.PanelAlignmentMenu=new y("PanelAlignmentMenu");y.PanelPositionMenu=new y("PanelPositionMenu");y.ActivityBarPositionMenu=new y("ActivityBarPositionMenu");y.MenubarPreferencesMenu=new y("MenubarPreferencesMenu");y.MenubarRecentMenu=new y("MenubarRecentMenu");y.MenubarSelectionMenu=new y("MenubarSelectionMenu");y.MenubarShare=new y("MenubarShare");y.MenubarSwitchEditorMenu=new y("MenubarSwitchEditorMenu");y.MenubarSwitchGroupMenu=new y("MenubarSwitchGroupMenu");y.MenubarTerminalMenu=new y("MenubarTerminalMenu");y.MenubarViewMenu=new y("MenubarViewMenu");y.MenubarHomeMenu=new y("MenubarHomeMenu");y.OpenEditorsContext=new y("OpenEditorsContext");y.OpenEditorsContextShare=new y("OpenEditorsContextShare");y.ProblemsPanelContext=new y("ProblemsPanelContext");y.SCMInputBox=new y("SCMInputBox");y.SCMIncomingChanges=new y("SCMIncomingChanges");y.SCMOutgoingChanges=new y("SCMOutgoingChanges");y.SCMIncomingChangesAllChangesContext=new y("SCMIncomingChangesAllChangesContext");y.SCMIncomingChangesHistoryItemContext=new y("SCMIncomingChangesHistoryItemContext");y.SCMOutgoingChangesAllChangesContext=new y("SCMOutgoingChangesAllChangesContext");y.SCMOutgoingChangesHistoryItemContext=new y("SCMOutgoingChangesHistoryItemContext");y.SCMChangeContext=new y("SCMChangeContext");y.SCMResourceContext=new y("SCMResourceContext");y.SCMResourceContextShare=new y("SCMResourceContextShare");y.SCMResourceFolderContext=new y("SCMResourceFolderContext");y.SCMResourceGroupContext=new y("SCMResourceGroupContext");y.SCMSourceControl=new y("SCMSourceControl");y.SCMSourceControlInline=new y("SCMSourceControlInline");y.SCMTitle=new y("SCMTitle");y.SearchContext=new y("SearchContext");y.SearchActionMenu=new y("SearchActionContext");y.StatusBarWindowIndicatorMenu=new y("StatusBarWindowIndicatorMenu");y.StatusBarRemoteIndicatorMenu=new y("StatusBarRemoteIndicatorMenu");y.StickyScrollContext=new y("StickyScrollContext");y.TestItem=new y("TestItem");y.TestItemGutter=new y("TestItemGutter");y.TestMessageContext=new y("TestMessageContext");y.TestMessageContent=new y("TestMessageContent");y.TestPeekElement=new y("TestPeekElement");y.TestPeekTitle=new y("TestPeekTitle");y.TouchBarContext=new y("TouchBarContext");y.TitleBarContext=new y("TitleBarContext");y.TitleBarTitleContext=new y("TitleBarTitleContext");y.TunnelContext=new y("TunnelContext");y.TunnelPrivacy=new y("TunnelPrivacy");y.TunnelProtocol=new y("TunnelProtocol");y.TunnelPortInline=new y("TunnelInline");y.TunnelTitle=new y("TunnelTitle");y.TunnelLocalAddressInline=new y("TunnelLocalAddressInline");y.TunnelOriginInline=new y("TunnelOriginInline");y.ViewItemContext=new y("ViewItemContext");y.ViewContainerTitle=new y("ViewContainerTitle");y.ViewContainerTitleContext=new y("ViewContainerTitleContext");y.ViewTitle=new y("ViewTitle");y.ViewTitleContext=new y("ViewTitleContext");y.CommentEditorActions=new y("CommentEditorActions");y.CommentThreadTitle=new y("CommentThreadTitle");y.CommentThreadActions=new y("CommentThreadActions");y.CommentThreadAdditionalActions=new y("CommentThreadAdditionalActions");y.CommentThreadTitleContext=new y("CommentThreadTitleContext");y.CommentThreadCommentContext=new y("CommentThreadCommentContext");y.CommentTitle=new y("CommentTitle");y.CommentActions=new y("CommentActions");y.InteractiveToolbar=new y("InteractiveToolbar");y.InteractiveCellTitle=new y("InteractiveCellTitle");y.InteractiveCellDelete=new y("InteractiveCellDelete");y.InteractiveCellExecute=new y("InteractiveCellExecute");y.InteractiveInputExecute=new y("InteractiveInputExecute");y.NotebookToolbar=new y("NotebookToolbar");y.NotebookStickyScrollContext=new y("NotebookStickyScrollContext");y.NotebookCellTitle=new y("NotebookCellTitle");y.NotebookCellDelete=new y("NotebookCellDelete");y.NotebookCellInsert=new y("NotebookCellInsert");y.NotebookCellBetween=new y("NotebookCellBetween");y.NotebookCellListTop=new y("NotebookCellTop");y.NotebookCellExecute=new y("NotebookCellExecute");y.NotebookCellExecutePrimary=new y("NotebookCellExecutePrimary");y.NotebookDiffCellInputTitle=new y("NotebookDiffCellInputTitle");y.NotebookDiffCellMetadataTitle=new y("NotebookDiffCellMetadataTitle");y.NotebookDiffCellOutputsTitle=new y("NotebookDiffCellOutputsTitle");y.NotebookOutputToolbar=new y("NotebookOutputToolbar");y.NotebookEditorLayoutConfigure=new y("NotebookEditorLayoutConfigure");y.NotebookKernelSource=new y("NotebookKernelSource");y.BulkEditTitle=new y("BulkEditTitle");y.BulkEditContext=new y("BulkEditContext");y.TimelineItemContext=new y("TimelineItemContext");y.TimelineTitle=new y("TimelineTitle");y.TimelineTitleContext=new y("TimelineTitleContext");y.TimelineFilterSubMenu=new y("TimelineFilterSubMenu");y.AccountsContext=new y("AccountsContext");y.SidebarTitle=new y("SidebarTitle");y.PanelTitle=new y("PanelTitle");y.AuxiliaryBarTitle=new y("AuxiliaryBarTitle");y.TerminalInstanceContext=new y("TerminalInstanceContext");y.TerminalEditorInstanceContext=new y("TerminalEditorInstanceContext");y.TerminalNewDropdownContext=new y("TerminalNewDropdownContext");y.TerminalTabContext=new y("TerminalTabContext");y.TerminalTabEmptyAreaContext=new y("TerminalTabEmptyAreaContext");y.TerminalStickyScrollContext=new y("TerminalStickyScrollContext");y.WebviewContext=new y("WebviewContext");y.InlineCompletionsActions=new y("InlineCompletionsActions");y.NewFile=new y("NewFile");y.MergeInput1Toolbar=new y("MergeToolbar1Toolbar");y.MergeInput2Toolbar=new y("MergeToolbar2Toolbar");y.MergeBaseToolbar=new y("MergeBaseToolbar");y.MergeInputResultToolbar=new y("MergeToolbarResultToolbar");y.InlineSuggestionToolbar=new y("InlineSuggestionToolbar");y.ChatContext=new y("ChatContext");y.ChatCodeBlock=new y("ChatCodeblock");y.ChatMessageTitle=new y("ChatMessageTitle");y.ChatExecute=new y("ChatExecute");y.ChatInputSide=new y("ChatInputSide");y.AccessibleView=new y("AccessibleView");y.MultiDiffEditorFileToolbar=new y("MultiDiffEditorFileToolbar");BJ=w0("menuService");pY._all=new Map;BX=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new CN({merge:pY.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(J){return this._commands.set(J.id,J),this._onDidChangeMenu.fire(pY.for(y.CommandPalette)),N0(()=>{if(this._commands.delete(J.id))this._onDidChangeMenu.fire(pY.for(y.CommandPalette))})}getCommand(J){return this._commands.get(J)}getCommands(){let J=new Map;return this._commands.forEach(($,X)=>J.set(X,$)),J}appendMenuItem(J,$){let X=this._menuItems.get(J);if(!X)X=new m6,this._menuItems.set(J,X);let Y=X.push($);return this._onDidChangeMenu.fire(pY.for(J)),N0(()=>{Y(),this._onDidChangeMenu.fire(pY.for(J))})}appendMenuItems(J){let $=new $0;for(let{id:X,item:Y}of J)$.add(this.appendMenuItem(X,Y));return $}getMenuItems(J){let $;if(this._menuItems.has(J))$=[...this._menuItems.get(J)];else $=[];if(J===y.CommandPalette)this._appendImplicitItems($);return $}_appendImplicitItems(J){let $=new Set;for(let X of J)if(tq(X)){if($.add(X.command.id),X.alt)$.add(X.alt.id)}this._commands.forEach((X,Y)=>{if(!$.has(Y))J.push({command:X})})}};xG=class xG extends fY{constructor(J,$,X){super(`submenuitem.${J.submenu.id}`,typeof J.title==="string"?J.title:J.title.value,X,"submenu");this.item=J,this.hideActions=$}};WJ=lA=class{static label($,X){return(X===null||X===void 0?void 0:X.renderShortTitle)&&$.shortTitle?typeof $.shortTitle==="string"?$.shortTitle:$.shortTitle.value:typeof $.title==="string"?$.title:$.title.value}constructor($,X,Y,Z,Q,G){var q,U;this.hideActions=Z,this._commandService=G,this.id=$.id,this.label=lA.label($,Y),this.tooltip=(U=typeof $.tooltip==="string"?$.tooltip:(q=$.tooltip)===null||q===void 0?void 0:q.value)!==null&&U!==void 0?U:"",this.enabled=!$.precondition||Q.contextMatchesRules($.precondition),this.checked=void 0;let z;if($.toggled){let H=$.toggled.condition?$.toggled:{condition:$.toggled};if(this.checked=Q.contextMatchesRules(H.condition),this.checked&&H.tooltip)this.tooltip=typeof H.tooltip==="string"?H.tooltip:H.tooltip.value;if(this.checked&&h0.isThemeIcon(H.icon))z=H.icon;if(this.checked&&H.title)this.label=typeof H.title==="string"?H.title:H.title.value}if(!z)z=h0.isThemeIcon($.icon)?$.icon:void 0;this.item=$,this.alt=X?new lA(X,void 0,Y,Z,Q,G):void 0,this._options=Y,this.class=z&&h0.asClassName(z)}run(...$){var X,Y;let Z=[];if((X=this._options)===null||X===void 0?void 0:X.arg)Z=[...Z,this._options.arg];if((Y=this._options)===null||Y===void 0?void 0:Y.shouldForwardArgs)Z=[...Z,...$];return this._commandService.executeCommand(this.id,...Z)}};WJ=lA=WX0([ag(4,m0),ag(5,y5)],WJ)});var f7;var _Q=w(()=>{s0();f7=w0("telemetryService")});function BX0(J){switch(J){case z8.Trace:return"trace";case z8.Debug:return"debug";case z8.Info:return"info";case z8.Warning:return"warn";case z8.Error:return"error";case z8.Off:return"off"}}var P5,z8,ig,PT,DT,RT,oR0;var o9=w(()=>{_0();z0();t1();s0();P5=w0("logService");(function(J){J[J.Off=0]="Off",J[J.Trace=1]="Trace",J[J.Debug=2]="Debug",J[J.Info=3]="Info",J[J.Warning=4]="Warning",J[J.Error=5]="Error"})(z8||(z8={}));ig=z8.Info;PT=class PT extends m{constructor(){super(...arguments);this.level=ig,this._onDidChangeLogLevel=this._register(new x),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(J){if(this.level!==J)this.level=J,this._onDidChangeLogLevel.fire(this.level)}getLevel(){return this.level}checkLogLevel(J){return this.level!==z8.Off&&this.level<=J}};DT=class DT extends PT{constructor(J=ig,$=!0){super();this.useColors=$,this.setLevel(J)}trace(J,...$){if(this.checkLogLevel(z8.Trace))if(this.useColors)console.log("%cTRACE","color: #888",J,...$);else console.log(J,...$)}debug(J,...$){if(this.checkLogLevel(z8.Debug))if(this.useColors)console.log("%cDEBUG","background: #eee; color: #888",J,...$);else console.log(J,...$)}info(J,...$){if(this.checkLogLevel(z8.Info))if(this.useColors)console.log("%c INFO","color: #33f",J,...$);else console.log(J,...$)}warn(J,...$){if(this.checkLogLevel(z8.Warning))if(this.useColors)console.log("%c WARN","color: #993",J,...$);else console.log(J,...$)}error(J,...$){if(this.checkLogLevel(z8.Error))if(this.useColors)console.log("%c  ERR","color: #f33",J,...$);else console.error(J,...$)}};RT=class RT extends PT{constructor(J){super();if(this.loggers=J,J.length)this.setLevel(J[0].getLevel())}setLevel(J){for(let $ of this.loggers)$.setLevel(J);super.setLevel(J)}trace(J,...$){for(let X of this.loggers)X.trace(J,...$)}debug(J,...$){for(let X of this.loggers)X.debug(J,...$)}info(J,...$){for(let X of this.loggers)X.info(J,...$)}warn(J,...$){for(let X of this.loggers)X.warn(J,...$)}error(J,...$){for(let X of this.loggers)X.error(J,...$)}dispose(){for(let J of this.loggers)J.dispose();super.dispose()}};oR0=new A0("logLevel",BX0(z8.Info))});var eq;var dA=w(()=>{e7();N8();L1();eq={clipboard:{writeText:jQ||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:jQ||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>{if(jQ||Cg())return 0;if(navigator.keyboard||K9)return 1;return 2})(),touch:"ontouchstart"in W1||navigator.maxTouchPoints>0,pointerEvents:W1.PointerEvent&&(("ontouchstart"in W1)||navigator.maxTouchPoints>0)}});function FX0(J){if(J.charCode){let X=String.fromCharCode(J.charCode).toUpperCase();return UJ.fromString(X)}let $=J.keyCode;if($===3)return 7;else if(U8)switch($){case 59:return 85;case 60:if(N6)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(t0)return 57;break}else if(G$){if(t0&&$===93)return 57;else if(!t0&&$===92)return 57}return pN[$]||0}class R1{constructor(J){this._standardKeyboardEventBrand=!0;let $=J;this.browserEvent=$,this.target=$.target,this.ctrlKey=$.ctrlKey,this.shiftKey=$.shiftKey,this.altKey=$.altKey,this.metaKey=$.metaKey,this.altGraphKey=$.getModifierState("AltGraph"),this.keyCode=FX0($),this.code=$.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){if(this.browserEvent&&this.browserEvent.preventDefault)this.browserEvent.preventDefault()}stopPropagation(){if(this.browserEvent&&this.browserEvent.stopPropagation)this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(J){return this._asKeybinding===J}_computeKeybinding(){let J=0;if(this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57)J=this.keyCode;let $=0;if(this.ctrlKey)$|=KX0;if(this.altKey)$|=AX0;if(this.shiftKey)$|=PX0;if(this.metaKey)$|=DX0;return $|=J,$}_computeKeyCodeChord(){let J=0;if(this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57)J=this.keyCode;return new M4(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,J)}}var KX0,AX0=512,PX0=1024,DX0;var d8=w(()=>{e7();PG();yG();L1();KX0=t0?256:2048,DX0=t0?2048:256});function RX0(J){if(!J.parent||J.parent===J)return null;try{let $=J.location,X=J.parent.location;if($.origin!=="null"&&X.origin!=="null"&&$.origin!==X.origin)return null}catch($){return null}return J.parent}class MT{static getSameOriginWindowChain(J){let $=ng.get(J);if(!$){$=[],ng.set(J,$);let X=J,Y;do{if(Y=RX0(X),Y)$.push({window:new WeakRef(X),iframeElement:X.frameElement||null});else $.push({window:new WeakRef(X),iframeElement:null});X=Y}while(X)}return $.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(J,$){var X,Y;if(!$||J===$)return{top:0,left:0};let Z=0,Q=0,G=this.getSameOriginWindowChain(J);for(let q of G){let U=q.window.deref();if(Z+=(X=U===null||U===void 0?void 0:U.scrollY)!==null&&X!==void 0?X:0,Q+=(Y=U===null||U===void 0?void 0:U.scrollX)!==null&&Y!==void 0?Y:0,U===$)break;if(!q.iframeElement)break;let z=q.iframeElement.getBoundingClientRect();Z+=z.top,Q+=z.left}return{top:Z,left:Q}}}var ng;var og=w(()=>{ng=new WeakMap});class T8{constructor(J,$){if(this.timestamp=Date.now(),this.browserEvent=$,this.leftButton=$.button===0,this.middleButton=$.button===1,this.rightButton=$.button===2,this.buttons=$.buttons,this.target=$.target,this.detail=$.detail||1,$.type==="dblclick")this.detail=2;if(this.ctrlKey=$.ctrlKey,this.shiftKey=$.shiftKey,this.altKey=$.altKey,this.metaKey=$.metaKey,typeof $.pageX==="number")this.posx=$.pageX,this.posy=$.pageY;else this.posx=$.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=$.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop;let X=MT.getPositionOfChildWindowRelativeToAncestorWindow(J,$.view);this.posx-=X.left,this.posy-=X.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class KJ{constructor(J,$=0,X=0){var Y;if(this.browserEvent=J||null,this.target=J?J.target||J.targetNode||J.srcElement:null,this.deltaY=X,this.deltaX=$,J){let Z=J,Q=J,G=((Y=J.view)===null||Y===void 0?void 0:Y.devicePixelRatio)||1;if(typeof Z.wheelDeltaY<"u")if(jX)this.deltaY=Z.wheelDeltaY/(120*G);else this.deltaY=Z.wheelDeltaY/120;else if(typeof Q.VERTICAL_AXIS<"u"&&Q.axis===Q.VERTICAL_AXIS)this.deltaY=-Q.detail/3;else if(J.type==="wheel"){let q=J;if(q.deltaMode===q.DOM_DELTA_LINE)if(U8&&!t0)this.deltaY=-J.deltaY/3;else this.deltaY=-J.deltaY;else this.deltaY=-J.deltaY/40}if(typeof Z.wheelDeltaX<"u")if(K9&&p6)this.deltaX=-(Z.wheelDeltaX/120);else if(jX)this.deltaX=Z.wheelDeltaX/(120*G);else this.deltaX=Z.wheelDeltaX/120;else if(typeof Q.HORIZONTAL_AXIS<"u"&&Q.axis===Q.HORIZONTAL_AXIS)this.deltaX=-J.detail/3;else if(J.type==="wheel"){let q=J;if(q.deltaMode===q.DOM_DELTA_LINE)if(U8&&!t0)this.deltaX=-J.deltaX/3;else this.deltaX=-J.deltaX;else this.deltaX=-J.deltaX/40}if(this.deltaY===0&&this.deltaX===0&&J.wheelDelta)if(jX)this.deltaY=J.wheelDelta/(120*G);else this.deltaY=J.wheelDelta/120}}preventDefault(){var J;(J=this.browserEvent)===null||J===void 0||J.preventDefault()}stopPropagation(){var J;(J=this.browserEvent)===null||J===void 0||J.stopPropagation()}}var O4=w(()=>{e7();og();L1()});var sA;var OT=w(()=>{sA=Symbol("MicrotaskDelay")});function rA(J){return!!J&&typeof J.then==="function"}function bG(J){let $=new L5,X=J($.token),Y=new Promise((Z,Q)=>{let G=$.token.onCancellationRequested(()=>{G.dispose(),Q(new LY)});Promise.resolve(X).then((q)=>{G.dispose(),$.dispose(),Z(q)},(q)=>{G.dispose(),$.dispose(),Q(q)})});return new class{cancel(){$.cancel(),$.dispose()}then(Z,Q){return Y.then(Z,Q)}catch(Z){return this.then(void 0,Z)}finally(Z){return Y.finally(Z)}}}class tg{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(J){if(this.isDisposed)return Promise.reject(Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=J,!this.queuedPromise){let $=()=>{if(this.queuedPromise=null,this.isDisposed)return;let X=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,X};this.queuedPromise=new Promise((X)=>{this.activePromise.then($,$).then(X)})}return new Promise(($,X)=>{this.queuedPromise.then($,X)})}return this.activePromise=J(),new Promise(($,X)=>{this.activePromise.then((Y)=>{this.activePromise=null,$(Y)},(Y)=>{this.activePromise=null,X(Y)})})}dispose(){this.isDisposed=!0}}class AJ{constructor(J){this.defaultDelay=J,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(J,$=this.defaultDelay){if(this.task=J,this.cancelTimeout(),!this.completionPromise)this.completionPromise=new Promise((Y,Z)=>{this.doResolve=Y,this.doReject=Z}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let Y=this.task;return this.task=null,Y()}return});let X=()=>{var Y;this.deferred=null,(Y=this.doResolve)===null||Y===void 0||Y.call(this,null)};return this.deferred=$===sA?OX0(X):MX0($,X),this.completionPromise}isTriggered(){var J;return!!((J=this.deferred)===null||J===void 0?void 0:J.isTriggered())}cancel(){var J;if(this.cancelTimeout(),this.completionPromise)(J=this.doReject)===null||J===void 0||J.call(this,new LY),this.completionPromise=null}cancelTimeout(){var J;(J=this.deferred)===null||J===void 0||J.dispose(),this.deferred=null}dispose(){this.cancel()}}class _j{constructor(J){this.delayer=new AJ(J),this.throttler=new tg}trigger(J,$){return this.delayer.trigger(()=>this.throttler.queue(J),$)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function mY(J,$){if(!$)return bG((X)=>mY(J,X));return new Promise((X,Y)=>{let Z=setTimeout(()=>{Q.dispose(),X()},J),Q=$.onCancellationRequested(()=>{clearTimeout(Z),Q.dispose(),Y(new LY)})})}function NQ(J,$=0,X){let Y=setTimeout(()=>{if(J(),X)Z.dispose()},$),Z=N0(()=>{clearTimeout(Y),X===null||X===void 0||X.deleteAndLeak(Z)});return X===null||X===void 0||X.add(Z),Z}class s8{constructor(J,$){if(this._token=-1,typeof J==="function"&&typeof $==="number")this.setIfNotSet(J,$)}dispose(){this.cancel()}cancel(){if(this._token!==-1)clearTimeout(this._token),this._token=-1}cancelAndSet(J,$){this.cancel(),this._token=setTimeout(()=>{this._token=-1,J()},$)}setIfNotSet(J,$){if(this._token!==-1)return;this._token=setTimeout(()=>{this._token=-1,J()},$)}}class SG{constructor(){this.disposable=void 0}cancel(){var J;(J=this.disposable)===null||J===void 0||J.dispose(),this.disposable=void 0}cancelAndSet(J,$,X=globalThis){this.cancel();let Y=X.setInterval(()=>{J()},$);this.disposable=N0(()=>{X.clearInterval(Y),this.disposable=void 0})}dispose(){this.cancel()}}class H6{constructor(J,$){this.timeoutToken=-1,this.runner=J,this.timeout=$,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){if(this.isScheduled())clearTimeout(this.timeoutToken),this.timeoutToken=-1}schedule(J=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,J)}get delay(){return this.timeout}set delay(J){this.timeout=J}isScheduled(){return this.timeoutToken!==-1}onTimeout(){if(this.timeoutToken=-1,this.runner)this.doRun()}doRun(){var J;(J=this.runner)===null||J===void 0||J.call(this)}}class iA{constructor(J,$){this._didRun=!1,this._executor=()=>{try{this._value=$()}catch(X){this._error=X}finally{this._didRun=!0}},this._handle=JU(J,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(!this._didRun)this._handle.dispose(),this._executor();if(this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Nj{get isRejected(){var J;return((J=this.outcome)===null||J===void 0?void 0:J.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((J,$)=>{this.completeCallback=J,this.errorCallback=$})}complete(J){return new Promise(($)=>{this.completeCallback(J),this.outcome={outcome:0,value:J},$()})}error(J){return new Promise(($)=>{this.errorCallback(J),this.outcome={outcome:1,value:J},$()})}cancel(){return this.error(new LY)}}var MX0=(J,$)=>{let X=!0,Y=setTimeout(()=>{X=!1,$()},J);return{isTriggered:()=>X,dispose:()=>{clearTimeout(Y),X=!1}}},OX0=(J)=>{let $=!0;return queueMicrotask(()=>{if($)$=!1,J()}),{isTriggered:()=>$,dispose:()=>{$=!1}}},_T,JU,NT,aA,t9;var e1=w(()=>{_8();O1();_0();z0();L1();OT();(function(){if(typeof globalThis.requestIdleCallback!=="function"||typeof globalThis.cancelIdleCallback!=="function")JU=(J,$)=>{WK(()=>{if(X)return;let Y=Date.now()+15;$(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,Y-Date.now())}}))});let X=!1;return{dispose(){if(X)return;X=!0}}};else JU=(J,$,X)=>{let Y=J.requestIdleCallback($,typeof X==="number"?{timeout:X}:void 0),Z=!1;return{dispose(){if(Z)return;Z=!0,J.cancelIdleCallback(Y)}}};_T=(J)=>JU(globalThis,J)})();NT=class NT extends iA{constructor(J){super(globalThis,J)}};(function(J){async function $(Y){let Z=void 0,Q=await Promise.all(Y.map((G)=>G.then((q)=>q,(q)=>{if(!Z)Z=q;return})));if(typeof Z<"u")throw Z;return Q}J.settled=$;function X(Y){return new Promise(async(Z,Q)=>{try{await Y(Z,Q)}catch(G){Q(G)}})}J.withAsyncBody=X})(aA||(aA={}));t9=class t9{static fromArray(J){return new t9(($)=>{$.emitMany(J)})}static fromPromise(J){return new t9(async($)=>{$.emitMany(await J)})}static fromPromises(J){return new t9(async($)=>{await Promise.all(J.map(async(X)=>$.emitOne(await X)))})}static merge(J){return new t9(async($)=>{await Promise.all(J.map(async(X)=>{for await(let Y of X)$.emitOne(Y)}))})}constructor(J){this._state=0,this._results=[],this._error=null,this._onStateChanged=new x,queueMicrotask(async()=>{let $={emitOne:(X)=>this.emitOne(X),emitMany:(X)=>this.emitMany(X),reject:(X)=>this.reject(X)};try{await Promise.resolve(J($)),this.resolve()}catch(X){this.reject(X)}finally{$.emitOne=void 0,$.emitMany=void 0,$.reject=void 0}})}[Symbol.asyncIterator](){let J=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(J<this._results.length)return{done:!1,value:this._results[J++]};if(this._state===1)return{done:!0,value:void 0};await q0.toPromise(this._onStateChanged.event)}while(!0)}}}static map(J,$){return new t9(async(X)=>{for await(let Y of J)X.emitOne($(Y))})}map(J){return t9.map(this,J)}static filter(J,$){return new t9(async(X)=>{for await(let Y of J)if($(Y))X.emitOne(Y)})}filter(J){return t9.filter(this,J)}static coalesce(J){return t9.filter(J,($)=>!!$)}coalesce(){return t9.coalesce(this)}static async toPromise(J){let $=[];for await(let X of J)$.push(X);return $}toPromise(){return t9.toPromise(this)}emitOne(J){if(this._state!==0)return;this._results.push(J),this._onStateChanged.fire()}emitMany(J){if(this._state!==0)return;this._results=this._results.concat(J),this._onStateChanged.fire()}resolve(){if(this._state!==0)return;this._state=1,this._onStateChanged.fire()}reject(J){if(this._state!==0)return;this._state=2,this._error=J,this._onStateChanged.fire()}};t9.EMPTY=t9.fromArray([])});function PJ(J){return function($){for(var X=arguments.length,Y=Array(X>1?X-1:0),Z=1;Z<X;Z++)Y[Z-1]=arguments[Z];return IT(J,$,Y)}}function yX0(J){return function(){for(var $=arguments.length,X=Array($),Y=0;Y<$;Y++)X[Y]=arguments[Y];return yT(J,X)}}function i1(J,$,X){var Y;if(X=(Y=X)!==null&&Y!==void 0?Y:tA,eg)eg(J,null);let Z=$.length;while(Z--){let Q=$[Z];if(typeof Q==="string"){let G=X(Q);if(G!==Q){if(!_X0($))$[Z]=G;Q=G}}J[Q]=!0}return J}function $U(J){let $=wX0(null);for(let[X,Y]of Gp(J))$[X]=Y;return $}function nA(J,$){while(J!==null){let Y=TX0(J,$);if(Y){if(Y.get)return PJ(Y.get);if(typeof Y.value==="function")return PJ(Y.value)}J=NX0(J)}function X(Y){return console.warn("fallback value for",Y),null}return X}function zp(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mX0(),$=(K1)=>zp(K1);if($.version="3.0.5",$.removed=[],!J||!J.document||J.document.nodeType!==9)return $.isSupported=!1,$;let X=J.document,Y=X.currentScript,{document:Z}=J,{DocumentFragment:Q,HTMLTemplateElement:G,Node:q,Element:U,NodeFilter:z,NamedNodeMap:H=J.NamedNodeMap||J.MozNamedAttrMap,HTMLFormElement:j,DOMParser:V,trustedTypes:W}=J,B=U.prototype,K=nA(B,"cloneNode"),P=nA(B,"nextSibling"),A=nA(B,"childNodes"),D=nA(B,"parentNode");if(typeof G==="function"){let K1=Z.createElement("template");if(K1.content&&K1.content.ownerDocument)Z=K1.content.ownerDocument}let M,R="",{implementation:O,createNodeIterator:N,createDocumentFragment:T,getElementsByTagName:S}=Z,{importNode:v}=X,l={};$.isSupported=typeof Gp==="function"&&typeof D==="function"&&O&&O.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:f,ERB_EXPR:h,TMPLIT_EXPR:L,DATA_ATTR:b,ARIA_ATTR:p,IS_SCRIPT_OR_DATA:d,ATTR_WHITESPACE:s}=Qp,{IS_ALLOWED_URI:c}=Qp,i=null,J0=i1({},[...$p,...wT,...LT,...kT,...Xp]),W0=null,M0=i1({},[...Yp,...ET,...Zp,...oA]),X0=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),N1=null,o1=null,E1=!0,Q1=!0,T1=!1,r1=!0,x6=!1,u0=!1,U5=!1,v1=!1,S5=!1,nJ=!1,O5=!1,W9=!0,XG=!1,wq="user-content-",Y0=!0,t=!1,o={},E=null,C=i1({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),a=null,u=i1({},["audio","video","img","source","image","track"]),Q0=null,R0=i1({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),b0="http://www.w3.org/1998/Math/MathML",g0="http://www.w3.org/2000/svg",j1="http://www.w3.org/1999/xhtml",z1=j1,z6=!1,Z6=null,o0=i1({},[b0,g0,j1],TT),r6,i6=["application/xhtml+xml","text/html"],$J="text/html",m1,_5=null,YG=Z.createElement("form"),ZG=function(e){return e instanceof RegExp||e instanceof Function},oJ=function(e){if(_5&&_5===e)return;if(!e||typeof e!=="object")e={};if(e=$U(e),r6=i6.indexOf(e.PARSER_MEDIA_TYPE)===-1?r6=$J:r6=e.PARSER_MEDIA_TYPE,m1=r6==="application/xhtml+xml"?TT:tA,i="ALLOWED_TAGS"in e?i1({},e.ALLOWED_TAGS,m1):J0,W0="ALLOWED_ATTR"in e?i1({},e.ALLOWED_ATTR,m1):M0,Z6="ALLOWED_NAMESPACES"in e?i1({},e.ALLOWED_NAMESPACES,TT):o0,Q0="ADD_URI_SAFE_ATTR"in e?i1($U(R0),e.ADD_URI_SAFE_ATTR,m1):R0,a="ADD_DATA_URI_TAGS"in e?i1($U(u),e.ADD_DATA_URI_TAGS,m1):u,E="FORBID_CONTENTS"in e?i1({},e.FORBID_CONTENTS,m1):C,N1="FORBID_TAGS"in e?i1({},e.FORBID_TAGS,m1):{},o1="FORBID_ATTR"in e?i1({},e.FORBID_ATTR,m1):{},o="USE_PROFILES"in e?e.USE_PROFILES:!1,E1=e.ALLOW_ARIA_ATTR!==!1,Q1=e.ALLOW_DATA_ATTR!==!1,T1=e.ALLOW_UNKNOWN_PROTOCOLS||!1,r1=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,x6=e.SAFE_FOR_TEMPLATES||!1,u0=e.WHOLE_DOCUMENT||!1,S5=e.RETURN_DOM||!1,nJ=e.RETURN_DOM_FRAGMENT||!1,O5=e.RETURN_TRUSTED_TYPE||!1,v1=e.FORCE_BODY||!1,W9=e.SANITIZE_DOM!==!1,XG=e.SANITIZE_NAMED_PROPS||!1,Y0=e.KEEP_CONTENT!==!1,t=e.IN_PLACE||!1,c=e.ALLOWED_URI_REGEXP||qp,z1=e.NAMESPACE||j1,X0=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ZG(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck))X0.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck;if(e.CUSTOM_ELEMENT_HANDLING&&ZG(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck))X0.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;if(e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==="boolean")X0.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;if(x6)Q1=!1;if(nJ)S5=!0;if(o){if(i=i1({},[...Xp]),W0=[],o.html===!0)i1(i,$p),i1(W0,Yp);if(o.svg===!0)i1(i,wT),i1(W0,ET),i1(W0,oA);if(o.svgFilters===!0)i1(i,LT),i1(W0,ET),i1(W0,oA);if(o.mathMl===!0)i1(i,kT),i1(W0,Zp),i1(W0,oA)}if(e.ADD_TAGS){if(i===J0)i=$U(i);i1(i,e.ADD_TAGS,m1)}if(e.ADD_ATTR){if(W0===M0)W0=$U(W0);i1(W0,e.ADD_ATTR,m1)}if(e.ADD_URI_SAFE_ATTR)i1(Q0,e.ADD_URI_SAFE_ATTR,m1);if(e.FORBID_CONTENTS){if(E===C)E=$U(E);i1(E,e.FORBID_CONTENTS,m1)}if(Y0)i["#text"]=!0;if(u0)i1(i,["html","head","body"]);if(i.table)i1(i,["tbody"]),delete N1.tbody;if(e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!=="function")throw wj('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!=="function")throw wj('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');M=e.TRUSTED_TYPES_POLICY,R=M.createHTML("")}else{if(M===void 0)M=uX0(W,Y);if(M!==null&&typeof R==="string")R=M.createHTML("")}if(A9)A9(e);_5=e},qQ=i1({},["mi","mo","mn","ms","mtext"]),QG=i1({},["foreignobject","desc","title","annotation-xml"]),GG=i1({},["title","style","font","a","script"]),Lq=i1({},wT);i1(Lq,LT),i1(Lq,xX0);let qG=i1({},kT);i1(qG,bX0);let KN=function(e){let L0=D(e);if(!L0||!L0.tagName)L0={namespaceURI:z1,tagName:"template"};let d0=tA(e.tagName),n6=tA(L0.tagName);if(!Z6[e.namespaceURI])return!1;if(e.namespaceURI===g0){if(L0.namespaceURI===j1)return d0==="svg";if(L0.namespaceURI===b0)return d0==="svg"&&(n6==="annotation-xml"||qQ[n6]);return Boolean(Lq[d0])}if(e.namespaceURI===b0){if(L0.namespaceURI===j1)return d0==="math";if(L0.namespaceURI===g0)return d0==="math"&&QG[n6];return Boolean(qG[d0])}if(e.namespaceURI===j1){if(L0.namespaceURI===g0&&!QG[n6])return!1;if(L0.namespaceURI===b0&&!qQ[n6])return!1;return!qG[d0]&&(GG[d0]||!Lq[d0])}if(r6==="application/xhtml+xml"&&Z6[e.namespaceURI])return!0;return!1},e$=function(e){Tj($.removed,{element:e});try{e.parentNode.removeChild(e)}catch(L0){e.remove()}},uH=function(e,L0){try{Tj($.removed,{attribute:L0.getAttributeNode(e),from:L0})}catch(d0){Tj($.removed,{attribute:null,from:L0})}if(L0.removeAttribute(e),e==="is"&&!W0[e])if(S5||nJ)try{e$(L0)}catch(d0){}else try{L0.setAttribute(e,"")}catch(d0){}},cH=function(e){let L0,d0;if(v1)e="<remove></remove>"+e;else{let XJ=kX0(e,/^[\r\n\t ]+/);d0=XJ&&XJ[0]}if(r6==="application/xhtml+xml"&&z1===j1)e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>";let n6=M?M.createHTML(e):e;if(z1===j1)try{L0=new V().parseFromString(n6,r6)}catch(XJ){}if(!L0||!L0.documentElement){L0=O.createDocument(z1,"template",null);try{L0.documentElement.innerHTML=z6?R:n6}catch(XJ){}}let Y7=L0.body||L0.documentElement;if(e&&d0)Y7.insertBefore(Z.createTextNode(d0),Y7.childNodes[0]||null);if(z1===j1)return S.call(L0,u0?"html":"body")[0];return u0?L0.documentElement:Y7},JK=function(e){return N.call(e.ownerDocument||e,e,z.SHOW_ELEMENT|z.SHOW_COMMENT|z.SHOW_TEXT,null,!1)},uJ0=function(e){return e instanceof j&&(typeof e.nodeName!=="string"||typeof e.textContent!=="string"||typeof e.removeChild!=="function"||!(e.attributes instanceof H)||typeof e.removeAttribute!=="function"||typeof e.setAttribute!=="function"||typeof e.namespaceURI!=="string"||typeof e.insertBefore!=="function"||typeof e.hasChildNodes!=="function")},$K=function(e){return typeof q==="object"?e instanceof q:e&&typeof e==="object"&&typeof e.nodeType==="number"&&typeof e.nodeName==="string"},RY=function(e,L0,d0){if(!l[e])return;LX0(l[e],(n6)=>{n6.call($,L0,d0,_5)})},xh=function(e){let L0;if(RY("beforeSanitizeElements",e,null),uJ0(e))return e$(e),!0;let d0=m1(e.nodeName);if(RY("uponSanitizeElement",e,{tagName:d0,allowedTags:i}),e.hasChildNodes()&&!$K(e.firstElementChild)&&(!$K(e.content)||!$K(e.content.firstElementChild))&&_4(/<[/\w]/g,e.innerHTML)&&_4(/<[/\w]/g,e.textContent))return e$(e),!0;if(!i[d0]||N1[d0]){if(!N1[d0]&&Sh(d0)){if(X0.tagNameCheck instanceof RegExp&&_4(X0.tagNameCheck,d0))return!1;if(X0.tagNameCheck instanceof Function&&X0.tagNameCheck(d0))return!1}if(Y0&&!E[d0]){let n6=D(e)||e.parentNode,Y7=A(e)||e.childNodes;if(Y7&&n6){let XJ=Y7.length;for(let C5=XJ-1;C5>=0;--C5)n6.insertBefore(K(Y7[C5],!0),P(e))}}return e$(e),!0}if(e instanceof U&&!KN(e))return e$(e),!0;if((d0==="noscript"||d0==="noembed"||d0==="noframes")&&_4(/<\/no(script|embed|frames)/i,e.innerHTML))return e$(e),!0;if(x6&&e.nodeType===3){if(L0=e.textContent,L0=H$(L0,f," "),L0=H$(L0,h," "),L0=H$(L0,L," "),e.textContent!==L0)Tj($.removed,{element:e.cloneNode()}),e.textContent=L0}return RY("afterSanitizeElements",e,null),!1},bh=function(e,L0,d0){if(W9&&(L0==="id"||L0==="name")&&((d0 in Z)||(d0 in YG)))return!1;if(Q1&&!o1[L0]&&_4(b,L0));else if(E1&&_4(p,L0));else if(!W0[L0]||o1[L0])if(Sh(e)&&(X0.tagNameCheck instanceof RegExp&&_4(X0.tagNameCheck,e)||X0.tagNameCheck instanceof Function&&X0.tagNameCheck(e))&&(X0.attributeNameCheck instanceof RegExp&&_4(X0.attributeNameCheck,L0)||X0.attributeNameCheck instanceof Function&&X0.attributeNameCheck(L0))||L0==="is"&&X0.allowCustomizedBuiltInElements&&(X0.tagNameCheck instanceof RegExp&&_4(X0.tagNameCheck,d0)||X0.tagNameCheck instanceof Function&&X0.tagNameCheck(d0)));else return!1;else if(Q0[L0]);else if(_4(c,H$(d0,s,"")));else if((L0==="src"||L0==="xlink:href"||L0==="href")&&e!=="script"&&EX0(d0,"data:")===0&&a[e]);else if(T1&&!_4(d,H$(d0,s,"")));else if(d0)return!1;return!0},Sh=function(e){return e.indexOf("-")>0},Ch=function(e){let L0,d0,n6,Y7;RY("beforeSanitizeAttributes",e,null);let{attributes:XJ}=e;if(!XJ)return;let C5={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W0};Y7=XJ.length;while(Y7--){L0=XJ[Y7];let{name:JX,namespaceURI:AN}=L0;if(d0=JX==="value"?L0.value:IX0(L0.value),n6=m1(JX),C5.attrName=n6,C5.attrValue=d0,C5.keepAttr=!0,C5.forceKeepAttr=void 0,RY("uponSanitizeAttribute",e,C5),d0=C5.attrValue,C5.forceKeepAttr)continue;if(uH(JX,e),!C5.keepAttr)continue;if(!r1&&_4(/\/>/i,d0)){uH(JX,e);continue}if(x6)d0=H$(d0,f," "),d0=H$(d0,h," "),d0=H$(d0,L," ");let vh=m1(e.nodeName);if(!bh(vh,n6,d0))continue;if(XG&&(n6==="id"||n6==="name"))uH(JX,e),d0=wq+d0;if(M&&typeof W==="object"&&typeof W.getAttributeType==="function")if(AN);else switch(W.getAttributeType(vh,n6)){case"TrustedHTML":{d0=M.createHTML(d0);break}case"TrustedScriptURL":{d0=M.createScriptURL(d0);break}}try{if(AN)e.setAttributeNS(AN,JX,d0);else e.setAttribute(JX,d0);Jp($.removed)}catch(qP0){}}RY("afterSanitizeAttributes",e,null)},cJ0=function K1(e){let L0,d0=JK(e);RY("beforeSanitizeShadowDOM",e,null);while(L0=d0.nextNode()){if(RY("uponSanitizeShadowNode",L0,null),xh(L0))continue;if(L0.content instanceof Q)K1(L0.content);Ch(L0)}RY("afterSanitizeShadowDOM",e,null)};return $.sanitize=function(K1){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L0,d0,n6,Y7;if(z6=!K1,z6)K1="<!-->";if(typeof K1!=="string"&&!$K(K1))if(typeof K1.toString==="function"){if(K1=K1.toString(),typeof K1!=="string")throw wj("dirty is not a string, aborting")}else throw wj("toString is not a function");if(!$.isSupported)return K1;if(!U5)oJ(e);if($.removed=[],typeof K1==="string")t=!1;if(t){if(K1.nodeName){let JX=m1(K1.nodeName);if(!i[JX]||N1[JX])throw wj("root node is forbidden and cannot be sanitized in-place")}}else if(K1 instanceof q)if(L0=cH("<!---->"),d0=L0.ownerDocument.importNode(K1,!0),d0.nodeType===1&&d0.nodeName==="BODY")L0=d0;else if(d0.nodeName==="HTML")L0=d0;else L0.appendChild(d0);else{if(!S5&&!x6&&!u0&&K1.indexOf("<")===-1)return M&&O5?M.createHTML(K1):K1;if(L0=cH(K1),!L0)return S5?null:O5?R:""}if(L0&&v1)e$(L0.firstChild);let XJ=JK(t?K1:L0);while(n6=XJ.nextNode()){if(xh(n6))continue;if(n6.content instanceof Q)cJ0(n6.content);Ch(n6)}if(t)return K1;if(S5){if(nJ){Y7=T.call(L0.ownerDocument);while(L0.firstChild)Y7.appendChild(L0.firstChild)}else Y7=L0;if(W0.shadowroot||W0.shadowrootmode)Y7=v.call(X,Y7,!0);return Y7}let C5=u0?L0.outerHTML:L0.innerHTML;if(u0&&i["!doctype"]&&L0.ownerDocument&&L0.ownerDocument.doctype&&L0.ownerDocument.doctype.name&&_4(Up,L0.ownerDocument.doctype.name))C5="<!DOCTYPE "+L0.ownerDocument.doctype.name+`>
`+C5;if(x6)C5=H$(C5,f," "),C5=H$(C5,h," "),C5=H$(C5,L," ");return M&&O5?M.createHTML(C5):C5},$.setConfig=function(K1){oJ(K1),U5=!0},$.clearConfig=function(){_5=null,U5=!1},$.isValidAttribute=function(K1,e,L0){if(!_5)oJ({});let d0=m1(K1),n6=m1(e);return bh(d0,n6,L0)},$.addHook=function(K1,e){if(typeof e!=="function")return;l[K1]=l[K1]||[],Tj(l[K1],e)},$.removeHook=function(K1){if(l[K1])return Jp(l[K1])},$.removeHooks=function(K1){if(l[K1])l[K1]=[]},$.removeAllHooks=function(){l={}},$}var Gp,eg,_X0,NX0,TX0,A9,j$,wX0,IT,yT,LX0,Jp,Tj,tA,TT,kX0,H$,EX0,IX0,_4,wj,$p,wT,LT,xX0,kT,bX0,Xp,Yp,ET,Zp,oA,SX0,CX0,vX0,hX0,fX0,qp,gX0,pX0,Up,Qp,mX0=()=>typeof window>"u"?null:window,uX0=function($,X){if(typeof $!=="object"||typeof $.createPolicy!=="function")return null;let Y=null,Z="data-tt-policy-suffix";if(X&&X.hasAttribute(Z))Y=X.getAttribute(Z);let Q="dompurify"+(Y?"#"+Y:"");try{return $.createPolicy(Q,{createHTML(G){return G},createScriptURL(G){return G}})}catch(G){return console.warn("TrustedTypes policy "+Q+" could not be created."),null}},FX,KM0,AM0,eA,PM0,DM0,RM0,Lj,JP,MM0,OM0;var $P=w(()=>{/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */({entries:Gp,setPrototypeOf:eg,isFrozen:_X0,getPrototypeOf:NX0,getOwnPropertyDescriptor:TX0}=Object),{freeze:A9,seal:j$,create:wX0}=Object,{apply:IT,construct:yT}=typeof Reflect<"u"&&Reflect;if(!IT)IT=function($,X,Y){return $.apply(X,Y)};if(!A9)A9=function($){return $};if(!j$)j$=function($){return $};if(!yT)yT=function($,X){return new $(...X)};LX0=PJ(Array.prototype.forEach),Jp=PJ(Array.prototype.pop),Tj=PJ(Array.prototype.push),tA=PJ(String.prototype.toLowerCase),TT=PJ(String.prototype.toString),kX0=PJ(String.prototype.match),H$=PJ(String.prototype.replace),EX0=PJ(String.prototype.indexOf),IX0=PJ(String.prototype.trim),_4=PJ(RegExp.prototype.test),wj=yX0(TypeError);$p=A9(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wT=A9(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),LT=A9(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xX0=A9(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kT=A9(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bX0=A9(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xp=A9(["#text"]),Yp=A9(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ET=A9(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zp=A9(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),oA=A9(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),SX0=j$(/\{\{[\w\W]*|[\w\W]*\}\}/gm),CX0=j$(/<%[\w\W]*|[\w\W]*%>/gm),vX0=j$(/\${[\w\W]*}/gm),hX0=j$(/^data-[\-\w.\u00B7-\uFFFF]/),fX0=j$(/^aria-[\-\w]+$/),qp=j$(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gX0=j$(/^(?:\w+script|data):/i),pX0=j$(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Up=j$(/^html$/i),Qp=Object.freeze({__proto__:null,MUSTACHE_EXPR:SX0,ERB_EXPR:CX0,TMPLIT_EXPR:vX0,DATA_ATTR:hX0,ARIA_ATTR:fX0,IS_ALLOWED_URI:qp,IS_SCRIPT_OR_DATA:gX0,ATTR_WHITESPACE:pX0,DOCTYPE_NAME:Up});FX=zp(),KM0=FX.version,AM0=FX.isSupported,eA=FX.sanitize,PM0=FX.setConfig,DM0=FX.clearConfig,RM0=FX.isValidAttribute,Lj=FX.addHook,JP=FX.removeHook,MM0=FX.removeHooks,OM0=FX.removeAllHooks});function Ej(J,$){if(C0.isUri(J))return yY(J.scheme,$);else return uq(J,$+":")}function xT(J,...$){return $.some((X)=>Ej(J,X))}class Vp{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${G1.vscodeRemoteResource}`}setPreferredWebSchema(J){this._preferredWebSchema=J}rewrite(J){if(this._delegate)try{return this._delegate(J)}catch(G){return $1(G),J}let $=J.authority,X=this._hosts[$];if(X&&X.indexOf(":")!==-1&&X.indexOf("[")===-1)X=`[${X}]`;let Y=this._ports[$],Z=this._connectionTokens[$],Q=`path=${encodeURIComponent(J.path)}`;if(typeof Z==="string")Q+=`&${cX0}=${encodeURIComponent(Z)}`;return C0.from({scheme:YX?this._preferredWebSchema:G1.vscodeRemoteResource,authority:`${X}:${Y}`,path:this._remoteResourcesPath,query:Q})}}class kj{uriToBrowserUri(J){if(J.scheme===G1.vscodeRemote)return bT.rewrite(J);if(J.scheme===G1.file&&(jQ||Gf===`${G1.vscodeFileResource}://${kj.FALLBACK_AUTHORITY}`))return J.with({scheme:G1.vscodeFileResource,authority:J.authority||kj.FALLBACK_AUTHORITY,query:null,fragment:null});return J}}var G1,cX0="tkn",bT,lX0="vscode-app",XP,jp;var e9=w(()=>{O1();L1();X1();V5();(function(J){J.inMemory="inmemory",J.vscode="vscode",J.internal="private",J.walkThrough="walkThrough",J.walkThroughSnippet="walkThroughSnippet",J.http="http",J.https="https",J.file="file",J.mailto="mailto",J.untitled="untitled",J.data="data",J.command="command",J.vscodeRemote="vscode-remote",J.vscodeRemoteResource="vscode-remote-resource",J.vscodeManagedRemoteResource="vscode-managed-remote-resource",J.vscodeUserData="vscode-userdata",J.vscodeCustomEditor="vscode-custom-editor",J.vscodeNotebookCell="vscode-notebook-cell",J.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",J.vscodeNotebookCellOutput="vscode-notebook-cell-output",J.vscodeInteractiveInput="vscode-interactive-input",J.vscodeSettings="vscode-settings",J.vscodeWorkspaceTrust="vscode-workspace-trust",J.vscodeTerminal="vscode-terminal",J.vscodeChatSesssion="vscode-chat-editor",J.webviewPanel="webview-panel",J.vscodeWebview="vscode-webview",J.extension="extension",J.vscodeFileResource="vscode-file",J.tmp="tmp",J.vsls="vsls",J.vscodeSourceControl="vscode-scm"})(G1||(G1={}));bT=new Vp;kj.FALLBACK_AUTHORITY=lX0;XP=new kj;(function(J){let $=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);J.CoopAndCoep=Object.freeze($.get("3"));let X="vscode-coi";function Y(Q){let G;if(typeof Q==="string")G=new URL(Q).searchParams;else if(Q instanceof URL)G=Q.searchParams;else if(C0.isUri(Q))G=new URL(Q.toString(!0)).searchParams;let q=G===null||G===void 0?void 0:G.get(X);if(!q)return;return $.get(q)}J.getHeadersFromQuery=Y;function Z(Q,G,q){if(!globalThis.crossOriginIsolated)return;let U=G&&q?"3":q?"2":"1";if(Q instanceof URLSearchParams)Q.set(X,U);else Q[X]=U}J.addSearchParam=Z})(jp||(jp={}))});function TQ(J){return yj(J,0)}function yj(J,$){switch(typeof J){case"object":if(J===null)return uY(349,$);else if(Array.isArray(J))return sX0(J,$);return aX0(J,$);case"string":return YP(J,$);case"boolean":return dX0(J,$);case"number":return uY(J,$);case"undefined":return uY(937,$);default:return uY(617,$)}}function uY(J,$){return($<<5)-$+J|0}function dX0(J,$){return uY(J?433:863,$)}function YP(J,$){$=uY(149417,$);for(let X=0,Y=J.length;X<Y;X++)$=uY(J.charCodeAt(X),$);return $}function sX0(J,$){return $=uY(104579,$),J.reduce((X,Y)=>yj(Y,X),$)}function aX0(J,$){return $=uY(181387,$),Object.keys(J).sort().reduce((X,Y)=>{return X=YP(Y,X),yj(J[Y],X)},$)}function ST(J,$,X=32){let Y=X-$,Z=~((1<<Y)-1);return(J<<$|(Z&J)>>>Y)>>>0}function Wp(J,$=0,X=J.byteLength,Y=0){for(let Z=0;Z<X;Z++)J[$+Z]=Y}function rX0(J,$,X="0"){while(J.length<$)J=X+J;return J}function Ij(J,$=32){if(J instanceof ArrayBuffer)return Array.from(new Uint8Array(J)).map((X)=>X.toString(16).padStart(2,"0")).join("");return rX0((J>>>0).toString(16),$/4)}class xj{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(J){let $=J.length;if($===0)return;let X=this._buff,Y=this._buffLen,Z=this._leftoverHighSurrogate,Q,G;if(Z!==0)Q=Z,G=-1,Z=0;else Q=J.charCodeAt(0),G=0;while(!0){let q=Q;if(P6(Q))if(G+1<$){let U=J.charCodeAt(G+1);if(HX(U))G++,q=MA(Q,U);else q=65533}else{Z=Q;break}else if(HX(Q))q=65533;if(Y=this._push(X,Y,q),G++,G<$)Q=J.charCodeAt(G);else break}this._buffLen=Y,this._leftoverHighSurrogate=Z}_push(J,$,X){if(X<128)J[$++]=X;else if(X<2048)J[$++]=192|(X&1984)>>>6,J[$++]=128|(X&63)>>>0;else if(X<65536)J[$++]=224|(X&61440)>>>12,J[$++]=128|(X&4032)>>>6,J[$++]=128|(X&63)>>>0;else J[$++]=240|(X&1835008)>>>18,J[$++]=128|(X&258048)>>>12,J[$++]=128|(X&4032)>>>6,J[$++]=128|(X&63)>>>0;if($>=64)this._step(),$-=64,this._totalLen+=64,J[0]=J[64],J[1]=J[65],J[2]=J[66];return $}digest(){if(!this._finished){if(this._finished=!0,this._leftoverHighSurrogate)this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533);this._totalLen+=this._buffLen,this._wrapUp()}return Ij(this._h0)+Ij(this._h1)+Ij(this._h2)+Ij(this._h3)+Ij(this._h4)}_wrapUp(){if(this._buff[this._buffLen++]=128,Wp(this._buff,this._buffLen),this._buffLen>56)this._step(),Wp(this._buff);let J=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(J/4294967296),!1),this._buffDV.setUint32(60,J%4294967296,!1),this._step()}_step(){let J=xj._bigBlock32,$=this._buffDV;for(let H=0;H<64;H+=4)J.setUint32(H,$.getUint32(H,!1),!1);for(let H=64;H<320;H+=4)J.setUint32(H,ST(J.getUint32(H-12,!1)^J.getUint32(H-32,!1)^J.getUint32(H-56,!1)^J.getUint32(H-64,!1),1),!1);let X=this._h0,Y=this._h1,Z=this._h2,Q=this._h3,G=this._h4,q,U,z;for(let H=0;H<80;H++){if(H<20)q=Y&Z|~Y&Q,U=1518500249;else if(H<40)q=Y^Z^Q,U=1859775393;else if(H<60)q=Y&Z|Y&Q|Z&Q,U=2400959708;else q=Y^Z^Q,U=3395469782;z=ST(X,5)+q+G+U+J.getUint32(H*4,!1)&4294967295,G=Q,Q=Z,Z=ST(Y,30),Y=X,X=z}this._h0=this._h0+X&4294967295,this._h1=this._h1+Y&4294967295,this._h2=this._h2+Z&4294967295,this._h3=this._h3+Q&4294967295,this._h4=this._h4+G&4294967295}}var wQ=w(()=>{X1();xj._bigBlock32=new DataView(new ArrayBuffer(320))});function t5(J){while(J.firstChild)J.firstChild.remove()}class Pp{constructor(J,$,X,Y){this._node=J,this._type=$,this._handler=X,this._options=Y||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){if(!this._handler)return;this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null}}function r(J,$,X,Y){return new Pp(J,$,X,Y)}function nX0(J,$){return function(X){return $(new T8(J,X))}}function oX0(J){return function($){return J(new R1($))}}function Sj(J,$,X){return JU(J,$,X)}class ZP{constructor(J,$=0){this._runner=J,this.priority=$,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(this._canceled)return;try{this._runner()}catch(J){$1(J)}}static sort(J,$){return $.priority-J.priority}}function vT(J){return O0(J).getComputedStyle(J,null)}function AX(J,$){let X=O0(J),Y=X.document;if(J!==Y.body)return new Y6(J.clientWidth,J.clientHeight);if(A4&&(X===null||X===void 0?void 0:X.visualViewport))return new Y6(X.visualViewport.width,X.visualViewport.height);if((X===null||X===void 0?void 0:X.innerWidth)&&X.innerHeight)return new Y6(X.innerWidth,X.innerHeight);if(Y.body&&Y.body.clientWidth&&Y.body.clientHeight)return new Y6(Y.body.clientWidth,Y.body.clientHeight);if(Y.documentElement&&Y.documentElement.clientWidth&&Y.documentElement.clientHeight)return new Y6(Y.documentElement.clientWidth,Y.documentElement.clientHeight);if($)return AX($);throw Error("Unable to figure out browser width and height")}class t6{static convertToPixels(J,$){return parseFloat($)||0}static getDimension(J,$,X){let Y=vT(J),Z=Y?Y.getPropertyValue($):"0";return t6.convertToPixels(J,Z)}static getBorderLeftWidth(J){return t6.getDimension(J,"border-left-width","borderLeftWidth")}static getBorderRightWidth(J){return t6.getDimension(J,"border-right-width","borderRightWidth")}static getBorderTopWidth(J){return t6.getDimension(J,"border-top-width","borderTopWidth")}static getBorderBottomWidth(J){return t6.getDimension(J,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(J){return t6.getDimension(J,"padding-left","paddingLeft")}static getPaddingRight(J){return t6.getDimension(J,"padding-right","paddingRight")}static getPaddingTop(J){return t6.getDimension(J,"padding-top","paddingTop")}static getPaddingBottom(J){return t6.getDimension(J,"padding-bottom","paddingBottom")}static getMarginLeft(J){return t6.getDimension(J,"margin-left","marginLeft")}static getMarginTop(J){return t6.getDimension(J,"margin-top","marginTop")}static getMarginRight(J){return t6.getDimension(J,"margin-right","marginRight")}static getMarginBottom(J){return t6.getDimension(J,"margin-bottom","marginBottom")}}class Y6{constructor(J,$){this.width=J,this.height=$}with(J=this.width,$=this.height){if(J!==this.width||$!==this.height)return new Y6(J,$);else return this}static is(J){return typeof J==="object"&&typeof J.height==="number"&&typeof J.width==="number"}static lift(J){if(J instanceof Y6)return J;else return new Y6(J.width,J.height)}static equals(J,$){if(J===$)return!0;if(!J||!$)return!1;return J.width===$.width&&J.height===$.height}}function Dp(J){let{offsetParent:$,offsetTop:X,offsetLeft:Y}=J;while((J=J.parentNode)!==null&&J!==J.ownerDocument.body&&J!==J.ownerDocument.documentElement){X-=J.scrollTop;let Z=Op(J)?null:vT(J);if(Z)Y-=Z.direction!=="rtl"?J.scrollLeft:-J.scrollLeft;if(J===$)Y+=t6.getBorderLeftWidth(J),X+=t6.getBorderTopWidth(J),X+=J.offsetTop,Y+=J.offsetLeft,$=J.offsetParent}return{left:Y,top:X}}function Rp(J,$,X){if(typeof $==="number")J.style.width=`${$}px`;if(typeof X==="number")J.style.height=`${X}px`}function g5(J){let $=J.getBoundingClientRect(),X=O0(J);return{left:$.left+X.scrollX,top:$.top+X.scrollY,width:$.width,height:$.height}}function GP(J){let $=J,X=1;do{let Y=vT($).zoom;if(Y!==null&&Y!==void 0&&Y!=="1")X*=Y;$=$.parentElement}while($!==null&&$!==$.ownerDocument.documentElement);return X}function YU(J){let $=t6.getMarginLeft(J)+t6.getMarginRight(J);return J.offsetWidth+$}function qP(J){let $=t6.getBorderLeftWidth(J)+t6.getBorderRightWidth(J),X=t6.getPaddingLeft(J)+t6.getPaddingRight(J);return J.offsetWidth-$-X}function Mp(J){let $=t6.getBorderTopWidth(J)+t6.getBorderBottomWidth(J),X=t6.getPaddingTop(J)+t6.getPaddingBottom(J);return J.offsetHeight-$-X}function vj(J){let $=t6.getMarginTop(J)+t6.getMarginBottom(J);return J.offsetHeight+$}function e6(J,$){return Boolean($===null||$===void 0?void 0:$.contains(J))}function tX0(J,$,X){while(J&&J.nodeType===J.ELEMENT_NODE){if(J.classList.contains($))return J;if(X){if(typeof X==="string"){if(J.classList.contains(X))return null}else if(J===X)return null}J=J.parentNode}return null}function UP(J,$,X){return!!tX0(J,$,X)}function Op(J){return J&&!!J.host&&!!J.mode}function hG(J){return!!cY(J)}function cY(J){var $;while(J.parentNode){if(J===(($=J.ownerDocument)===null||$===void 0?void 0:$.body))return null;J=J.parentNode}return Op(J)?J:null}function B5(){let J=HP().activeElement;while(J===null||J===void 0?void 0:J.shadowRoot)J=J.shadowRoot.activeElement;return J}function fG(J){return B5()===J}function zP(J){return e6(B5(),J)}function HP(){var J;if(iX0()<=1)return W1.document;return(J=Array.from(Kp()).map(({window:X})=>X.document).find((X)=>X.hasFocus()))!==null&&J!==void 0?J:W1.document}function _p(){var J,$;return($=(J=HP().defaultView)===null||J===void 0?void 0:J.window)!==null&&$!==void 0?$:W1}function p5(J=W1.document.head,$,X){let Y=document.createElement("style");if(Y.type="text/css",Y.media="screen",$===null||$===void 0||$(Y),J.appendChild(Y),X)X.add(N0(()=>J.removeChild(Y)));if(J===W1.document.head){let Z=new Set;Np.set(Y,Z);for(let{window:Q,disposables:G}of Kp()){if(Q===W1)continue;let q=G.add(eX0(Y,Z,Q));X===null||X===void 0||X.add(q)}}return Y}function eX0(J,$,X){var Y,Z;let Q=new $0,G=J.cloneNode(!0);X.document.head.appendChild(G),Q.add(N0(()=>X.document.head.removeChild(G)));for(let q of XY0(J))(Y=G.sheet)===null||Y===void 0||Y.insertRule(q.cssText,(Z=G.sheet)===null||Z===void 0?void 0:Z.cssRules.length);return Q.add(JY0.observe(J,Q,{childList:!0})(()=>{G.textContent=J.textContent})),$.add(G),Q.add(N0(()=>$.delete(G))),Q}function $Y0(){if(!CT)CT=p5();return CT}function XY0(J){var $,X;if(($=J===null||J===void 0?void 0:J.sheet)===null||$===void 0?void 0:$.rules)return J.sheet.rules;if((X=J===null||J===void 0?void 0:J.sheet)===null||X===void 0?void 0:X.cssRules)return J.sheet.cssRules;return[]}function jP(J,$,X=$Y0()){var Y,Z;if(!X||!$)return;(Y=X.sheet)===null||Y===void 0||Y.insertRule(`${J} {${$}}`,0);for(let Q of(Z=Np.get(X))!==null&&Z!==void 0?Z:[])jP(J,$,Q)}function ZU(J){return J instanceof MouseEvent||J instanceof O0(J).MouseEvent}function QU(J){return J instanceof KeyboardEvent||J instanceof O0(J).KeyboardEvent}function Tp(J){let $=J;return!!($&&typeof $.preventDefault==="function"&&typeof $.stopPropagation==="function")}function wp(J){let $=[];for(let X=0;J&&J.nodeType===J.ELEMENT_NODE;X++)$[X]=J.scrollTop,J=J.parentNode;return $}function Lp(J,$){for(let X=0;J&&J.nodeType===J.ELEMENT_NODE;X++){if(J.scrollTop!==$[X])J.scrollTop=$[X];J=J.parentNode}}function lY(J){return new QP(J)}function kp(J,$){return J.after($),$}function j0(J,...$){if(J.append(...$),$.length===1&&typeof $[0]!=="string")return $[0]}function GU(J,$){return J.insertBefore($,J.firstChild),$}function x5(J,...$){J.innerText="",j0(J,...$)}function Ep(J,$,X,...Y){let Z=YY0.exec($);if(!Z)throw Error("Bad use of emmet");let Q=Z[1]||"div",G;if(J!==bj.HTML)G=document.createElementNS(J,Q);else G=document.createElement(Q);if(Z[3])G.id=Z[3];if(Z[4])G.className=Z[4].replace(/\./g," ").trim();if(X)Object.entries(X).forEach(([q,U])=>{if(typeof U>"u")return;if(/^on\w+$/.test(q))G[q]=U;else if(q==="selected"){if(U)G.setAttribute(q,"true")}else G.setAttribute(q,U)});return G.append(...Y),G}function B0(J,$,...X){return Ep(bj.HTML,J,$,...X)}function P9(...J){for(let $ of J)$.style.display="",$.removeAttribute("aria-hidden")}function D9(...J){for(let $ of J)$.style.display="none",$.setAttribute("aria-hidden","true")}function hT(J,$){let X=J.devicePixelRatio*$;return Math.max(1,Math.floor(X))/J.devicePixelRatio}function VP(J){W1.open(J,"_blank","noopener")}function Ip(J,$){let X=()=>{$(),Y=f5(J,X)},Y=f5(J,X);return N0(()=>Y.dispose())}function DJ(J){if(!J)return"url('')";return`url('${XP.uriToBrowserUri(J).toString(!0).replace(/'/g,"%27")}')`}function fT(J){return`'${J.replace(/'/g,"%27")}'`}function N4(J,$){if(J!==void 0){let X=J.match(/^\s*var\((.+)\)$/);if(X){let Y=X[1].split(",",2);if(Y.length===2)$=N4(Y[1].trim(),$);return`var(${Y[0]}, ${$})`}return J}return $}function yp(J,$=!1){let X=document.createElement("a");return Lj("afterSanitizeAttributes",(Y)=>{for(let Z of["href","src"])if(Y.hasAttribute(Z)){let Q=Y.getAttribute(Z);if(Z==="href"&&Q.startsWith("#"))continue;if(X.href=Q,!J.includes(X.protocol.replace(/:$/,""))){if($&&Z==="src"&&X.href.startsWith("data:"))continue;Y.removeAttribute(Z)}}}),N0(()=>{JP("afterSanitizeAttributes")})}function n1(J,...$){let X,Y;if(Array.isArray($[0]))X={},Y=$[0];else X=$[0]||{},Y=$[1];let Z=ZY0.exec(J);if(!Z||!Z.groups)throw Error("Bad use of h");let Q=Z.groups.tag||"div",G=document.createElement(Q);if(Z.groups.id)G.id=Z.groups.id;let q=[];if(Z.groups.class){for(let z of Z.groups.class.split("."))if(z!=="")q.push(z)}if(X.className!==void 0){for(let z of X.className.split("."))if(z!=="")q.push(z)}if(q.length>0)G.className=q.join(" ");let U={};if(Z.groups.name)U[Z.groups.name]=G;if(Y){for(let z of Y)if(z instanceof HTMLElement)G.appendChild(z);else if(typeof z==="string")G.append(z);else if("root"in z)Object.assign(U,z),G.appendChild(z.root)}for(let[z,H]of Object.entries(X))if(z==="className")continue;else if(z==="style")for(let[j,V]of Object.entries(H))G.style.setProperty(Fp(j),typeof V==="number"?V+"px":""+V);else if(z==="tabIndex")G.tabIndex=H;else G.setAttribute(Fp(z),H.toString());return U.root=G,U}function Fp(J){return J.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var vM0,O0,hM0,Kp,iX0,Bp,fM0,gM0,CG,Ap,pM0,q6=function($,X,Y,Z){let Q=Y;if(X==="click"||X==="mousedown")Q=nX0(O0($),Y);else if(X==="keydown"||X==="keypress"||X==="keyup")Q=oX0(Y);return r($,X,Q,Z)},Cj,XU,f5,vG,Np,JY0,CT=null,U0,a0,QP,YY0,bj,xp,mM0,KX,gT,ZY0;var T0=w(()=>{e7();dA();d8();O4();e1();O1();_0();$P();z0();e9();L1();wQ();N8();({registerWindow:vM0,getWindow:O0,getDocument:hM0,getWindows:Kp,getWindowsCount:iX0,getWindowId:Bp,getWindowById:fM0,hasWindow:gM0,onDidRegisterWindow:CG,onWillUnregisterWindow:Ap,onDidUnregisterWindow:pM0}=function(){let J=new Map;Mg(W1,1),J.set(W1.vscodeWindowId,{window:W1,disposables:new $0});let $=new x,X=new x,Y=new x;return{onDidRegisterWindow:$.event,onWillUnregisterWindow:Y.event,onDidUnregisterWindow:X.event,registerWindow(Z){if(J.has(Z.vscodeWindowId))return m.None;let Q=new $0,G={window:Z,disposables:Q.add(new $0)};return J.set(Z.vscodeWindowId,G),Q.add(N0(()=>{J.delete(Z.vscodeWindowId),X.fire(Z)})),Q.add(r(Z,U0.BEFORE_UNLOAD,()=>{Y.fire(Z)})),$.fire(G),Q},getWindows(){return J.values()},getWindowsCount(){return J.size},getWindowId(Z){return Z.vscodeWindowId},hasWindow(Z){return J.has(Z)},getWindowById(Z){return J.get(Z)},getWindow(Z){var Q;let G=Z;if((Q=G===null||G===void 0?void 0:G.ownerDocument)===null||Q===void 0?void 0:Q.defaultView)return G.ownerDocument.defaultView.window;let q=Z;if(q===null||q===void 0?void 0:q.view)return q.view.window;return W1},getDocument(Z){return O0(Z).document}}}());Cj=class Cj extends iA{constructor(J,$){super(J,$)}};vG=class vG extends SG{constructor(J){super();this.defaultTarget=J&&O0(J)}cancelAndSet(J,$,X){return super.cancelAndSet(J,$,X!==null&&X!==void 0?X:this.defaultTarget)}};(function(){let J=new Map,$=new Map,X=new Map,Y=new Map,Z=(Q)=>{var G;X.set(Q,!1);let q=(G=J.get(Q))!==null&&G!==void 0?G:[];$.set(Q,q),J.set(Q,[]),Y.set(Q,!0);while(q.length>0)q.sort(ZP.sort),q.shift().execute();Y.set(Q,!1)};f5=(Q,G,q=0)=>{let U=Bp(Q),z=new ZP(G,q),H=J.get(U);if(!H)H=[],J.set(U,H);if(H.push(z),!X.get(U))X.set(U,!0),Q.requestAnimationFrame(()=>Z(U));return z},XU=(Q,G,q)=>{let U=Bp(Q);if(Y.get(U)){let z=new ZP(G,q),H=$.get(U);if(!H)H=[],$.set(U,H);return H.push(z),z}else return f5(Q,G,q)}})();Y6.None=new Y6(0,0);Np=new Map;JY0=new class{constructor(){this.mutationObservers=new Map}observe(J,$,X){let Y=this.mutationObservers.get(J);if(!Y)Y=new Map,this.mutationObservers.set(J,Y);let Z=TQ(X),Q=Y.get(Z);if(!Q){let G=new x,q=new MutationObserver((z)=>G.fire(z));q.observe(J,X);let U=Q={users:1,observer:q,onDidMutate:G.event};$.add(N0(()=>{if(U.users-=1,U.users===0){if(G.dispose(),q.disconnect(),Y===null||Y===void 0||Y.delete(Z),(Y===null||Y===void 0?void 0:Y.size)===0)this.mutationObservers.delete(J)}})),Y.set(Z,Q)}else Q.users+=1;return Q.onDidMutate}};U0={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:G$?"webkitAnimationStart":"animationstart",ANIMATION_END:G$?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:G$?"webkitAnimationIteration":"animationiteration"};a0={stop:(J,$)=>{if(J.preventDefault(),$)J.stopPropagation();return J}};QP=class QP extends m{static hasFocusWithin(J){if(J instanceof HTMLElement){let $=cY(J),X=$?$.activeElement:J.ownerDocument.activeElement;return e6(X,J)}else{let $=J;return e6($.document.activeElement,$.document)}}constructor(J){super();this._onDidFocus=this._register(new x),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new x),this.onDidBlur=this._onDidBlur.event;let $=QP.hasFocusWithin(J),X=!1,Y=()=>{if(X=!1,!$)$=!0,this._onDidFocus.fire()},Z=()=>{if($)X=!0,(J instanceof HTMLElement?O0(J):J).setTimeout(()=>{if(X)X=!1,$=!1,this._onDidBlur.fire()},0)};if(this._refreshStateHandler=()=>{if(QP.hasFocusWithin(J)!==$)if($)Z();else Y()},this._register(r(J,U0.FOCUS,Y,!0)),this._register(r(J,U0.BLUR,Z,!0)),J instanceof HTMLElement)this._register(r(J,U0.FOCUS_IN,()=>this._refreshStateHandler())),this._register(r(J,U0.FOCUS_OUT,()=>this._refreshStateHandler()))}};YY0=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;(function(J){J.HTML="http://www.w3.org/1999/xhtml",J.SVG="http://www.w3.org/2000/svg"})(bj||(bj={}));B0.SVG=function(J,$,...X){return Ep(bj.SVG,J,$,...X)};bT.setPreferredWebSchema(/^https:/.test(W1.location.href)?"https":"http");xp=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),mM0=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});KX=class KX extends x{constructor(){super();this._subscriptions=new $0,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(q0.runAndSubscribe(CG,({window:J,disposables:$})=>this.registerListeners(J,$),{window:W1,disposables:this._subscriptions}))}registerListeners(J,$){$.add(r(J,"keydown",(X)=>{if(X.defaultPrevented)return;let Y=new R1(X);if(Y.keyCode===6&&X.repeat)return;if(X.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(X.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(X.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(X.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(Y.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;if(this._keyStatus.altKey=X.altKey,this._keyStatus.ctrlKey=X.ctrlKey,this._keyStatus.metaKey=X.metaKey,this._keyStatus.shiftKey=X.shiftKey,this._keyStatus.lastKeyPressed)this._keyStatus.event=X,this.fire(this._keyStatus)},!0)),$.add(r(J,"keyup",(X)=>{if(X.defaultPrevented)return;if(!X.altKey&&this._keyStatus.altKey)this._keyStatus.lastKeyReleased="alt";else if(!X.ctrlKey&&this._keyStatus.ctrlKey)this._keyStatus.lastKeyReleased="ctrl";else if(!X.metaKey&&this._keyStatus.metaKey)this._keyStatus.lastKeyReleased="meta";else if(!X.shiftKey&&this._keyStatus.shiftKey)this._keyStatus.lastKeyReleased="shift";else this._keyStatus.lastKeyReleased=void 0;if(this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased)this._keyStatus.lastKeyPressed=void 0;if(this._keyStatus.altKey=X.altKey,this._keyStatus.ctrlKey=X.ctrlKey,this._keyStatus.metaKey=X.metaKey,this._keyStatus.shiftKey=X.shiftKey,this._keyStatus.lastKeyReleased)this._keyStatus.event=X,this.fire(this._keyStatus)},!0)),$.add(r(J.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),$.add(r(J.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),$.add(r(J.document.body,"mousemove",(X)=>{if(X.buttons)this._keyStatus.lastKeyPressed=void 0},!0)),$.add(r(J,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){if(!KX.instance)KX.instance=new KX;return KX.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};gT=class gT extends m{constructor(J,$){super();this.element=J,this.callbacks=$,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){if(this.callbacks.onDragStart)this._register(r(this.element,U0.DRAG_START,(J)=>{var $,X;(X=($=this.callbacks).onDragStart)===null||X===void 0||X.call($,J)}));if(this.callbacks.onDrag)this._register(r(this.element,U0.DRAG,(J)=>{var $,X;(X=($=this.callbacks).onDrag)===null||X===void 0||X.call($,J)}));this._register(r(this.element,U0.DRAG_ENTER,(J)=>{var $,X;this.counter++,this.dragStartTime=J.timeStamp,(X=($=this.callbacks).onDragEnter)===null||X===void 0||X.call($,J)})),this._register(r(this.element,U0.DRAG_OVER,(J)=>{var $,X;J.preventDefault(),(X=($=this.callbacks).onDragOver)===null||X===void 0||X.call($,J,J.timeStamp-this.dragStartTime)})),this._register(r(this.element,U0.DRAG_LEAVE,(J)=>{var $,X;if(this.counter--,this.counter===0)this.dragStartTime=0,(X=($=this.callbacks).onDragLeave)===null||X===void 0||X.call($,J)})),this._register(r(this.element,U0.DRAG_END,(J)=>{var $,X;this.counter=0,this.dragStartTime=0,(X=($=this.callbacks).onDragEnd)===null||X===void 0||X.call($,J)})),this._register(r(this.element,U0.DROP,(J)=>{var $,X;this.counter=0,this.dragStartTime=0,(X=($=this.callbacks).onDrop)===null||X===void 0||X.call($,J)}))}};ZY0=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/});class qU{constructor(J){this.id=J.id,this.precondition=J.precondition,this._kbOpts=J.kbOpts,this._menuOpts=J.menuOpts,this.metadata=J.metadata}register(){if(Array.isArray(this._menuOpts))this._menuOpts.forEach(this._registerMenuItem,this);else if(this._menuOpts)this._registerMenuItem(this._menuOpts);if(this._kbOpts){let J=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let $ of J){let X=$.kbExpr;if(this.precondition)if(X)X=E0.and(X,this.precondition);else X=this.precondition;let Y={id:this.id,weight:$.weight,args:$.args,when:X,primary:$.primary,secondary:$.secondary,win:$.win,linux:$.linux,mac:$.mac};z$.registerKeybindingRule(Y)}}M6.registerCommand({id:this.id,handler:(J,$)=>this.runCommand(J,$),metadata:this.metadata})}_registerMenuItem(J){BX.appendMenuItem(J.menuId,{group:J.group,command:{id:this.id,title:J.title,icon:J.icon,precondition:this.precondition},when:J.when,order:J.order})}}function I0(J){return T4.INSTANCE.registerEditorCommand(J),J}function F5(J){let $=new J;return T4.INSTANCE.registerEditorAction($),$}function bp(J){T4.INSTANCE.registerEditorAction(J)}function w4(J,$,X){T4.INSTANCE.registerEditorContribution(J,$,X)}class T4{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(J,$,X){this.editorContributions.push({id:J,ctor:$,instantiation:X})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(J){J.register(),this.editorActions.push(J)}getEditorActions(){return this.editorActions}registerEditorCommand(J){J.register(),this.editorCommands[J.id]=J}getEditorCommand(J){return this.editorCommands[J]||null}}function hj(J){return J.register(),J}var WP,pT,R9,RJ,LQ,QY0,mT,uT,Sp;var L4=w(()=>{c0();V5();i9();vY();Aj();FJ();C7();t1();s0();oq();h7();_Q();o9();T0();WP=class WP extends qU{constructor(){super(...arguments);this._implementations=[]}addImplementation(J,$,X,Y){return this._implementations.push({priority:J,name:$,implementation:X,when:Y}),this._implementations.sort((Z,Q)=>Q.priority-Z.priority),{dispose:()=>{for(let Z=0;Z<this._implementations.length;Z++)if(this._implementations[Z].implementation===X){this._implementations.splice(Z,1);return}}}}runCommand(J,$){let X=J.get(P5),Y=J.get(m0);X.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let Z of this._implementations){if(Z.when){let G=Y.getContext(B5());if(!Z.when.evaluate(G))continue}let Q=Z.implementation(J,$);if(Q){if(X.trace(`Command '${this.id}' was handled by '${Z.name}'.`),typeof Q==="boolean")return;return Q}}X.trace(`The Command '${this.id}' was not handled by any implementation.`)}};pT=class pT extends qU{constructor(J,$){super($);this.command=J}runCommand(J,$){return this.command.runCommand(J,$)}};R9=class R9 extends qU{static bindToContribution(J){return class extends R9{constructor(X){super(X);this._callback=X.handler}runEditorCommand(X,Y,Z){let Q=J(Y);if(Q)this._callback(Q,Z)}}}static runEditorCommand(J,$,X,Y){let Z=J.get(X6),Q=Z.getFocusedCodeEditor()||Z.getActiveCodeEditor();if(!Q)return;return Q.invokeWithinContext((G)=>{if(!G.get(m0).contextMatchesRules(X!==null&&X!==void 0?X:void 0))return;return Y(G,Q,$)})}runCommand(J,$){return R9.runEditorCommand(J,$,this.precondition,(X,Y,Z)=>this.runEditorCommand(X,Y,Z))}};RJ=class RJ extends R9{static convertOptions(J){let $;if(Array.isArray(J.menuOpts))$=J.menuOpts;else if(J.menuOpts)$=[J.menuOpts];else $=[];function X(Y){if(!Y.menuId)Y.menuId=y.EditorContext;if(!Y.title)Y.title=J.label;return Y.when=E0.and(J.precondition,Y.when),Y}if(Array.isArray(J.contextMenuOpts))$.push(...J.contextMenuOpts.map(X));else if(J.contextMenuOpts)$.push(X(J.contextMenuOpts));return J.menuOpts=$,J}constructor(J){super(RJ.convertOptions(J));this.label=J.label,this.alias=J.alias}runEditorCommand(J,$,X){return this.reportTelemetry(J,$),this.run(J,$,X||{})}reportTelemetry(J,$){J.get(f7).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};(function(J){function $(G){return T4.INSTANCE.getEditorCommand(G)}J.getEditorCommand=$;function X(){return T4.INSTANCE.getEditorActions()}J.getEditorActions=X;function Y(){return T4.INSTANCE.getEditorContributions()}J.getEditorContributions=Y;function Z(G){return T4.INSTANCE.getEditorContributions().filter((q)=>G.indexOf(q.id)>=0)}J.getSomeEditorContributions=Z;function Q(){return T4.INSTANCE.getDiffEditorContributions()}J.getDiffEditorContributions=Q})(LQ||(LQ={}));QY0={EditorCommonContributions:"editor.contributions"};T4.INSTANCE=new T4;G6.add(QY0.EditorCommonContributions,T4.INSTANCE);mT=hj(new WP({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:y.MenubarEditMenu,group:"1_do",title:F({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:y.CommandPalette,group:"",title:F("undo","Undo"),order:1}]}));hj(new pT(mT,{id:"default:undo",precondition:void 0}));uT=hj(new WP({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:y.MenubarEditMenu,group:"1_do",title:F({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:y.CommandPalette,group:"",title:F("redo","Redo"),order:1}]}));hj(new pT(uT,{id:"default:redo",precondition:void 0}));Sp=hj(new WP({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:y.MenubarSelectionMenu,group:"1_basic",title:F({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:y.CommandPalette,group:"",title:F("selectAll","Select All"),order:1}]}))});function fj(J){if(!YX)return;if(!Cp)Cp=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq");console.warn(J.message)}class hp{constructor(J,$,X,Y){this.vsWorker=J,this.req=$,this.method=X,this.args=Y,this.type=0}}class cT{constructor(J,$,X,Y){this.vsWorker=J,this.seq=$,this.res=X,this.err=Y,this.type=1}}class fp{constructor(J,$,X,Y){this.vsWorker=J,this.req=$,this.eventName=X,this.arg=Y,this.type=2}}class gp{constructor(J,$,X){this.vsWorker=J,this.req=$,this.event=X,this.type=3}}class pp{constructor(J,$){this.vsWorker=J,this.req=$,this.type=4}}class lT{constructor(J){this._workerId=-1,this._handler=J,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(J){this._workerId=J}sendMessage(J,$){let X=String(++this._lastSentReq);return new Promise((Y,Z)=>{this._pendingReplies[X]={resolve:Y,reject:Z},this._send(new hp(this._workerId,X,J,$))})}listen(J,$){let X=null,Y=new x({onWillAddFirstListener:()=>{X=String(++this._lastSentReq),this._pendingEmitters.set(X,Y),this._send(new fp(this._workerId,X,J,$))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(X),this._send(new pp(this._workerId,X)),X=null}});return Y.event}handleMessage(J){if(!J||!J.vsWorker)return;if(this._workerId!==-1&&J.vsWorker!==this._workerId)return;this._handleMessage(J)}_handleMessage(J){switch(J.type){case 1:return this._handleReplyMessage(J);case 0:return this._handleRequestMessage(J);case 2:return this._handleSubscribeEventMessage(J);case 3:return this._handleEventMessage(J);case 4:return this._handleUnsubscribeEventMessage(J)}}_handleReplyMessage(J){if(!this._pendingReplies[J.seq]){console.warn("Got reply to unknown seq");return}let $=this._pendingReplies[J.seq];if(delete this._pendingReplies[J.seq],J.err){let X=J.err;if(J.err.$isError)X=Error(),X.name=J.err.name,X.message=J.err.message,X.stack=J.err.stack;$.reject(X);return}$.resolve(J.res)}_handleRequestMessage(J){let $=J.req;this._handler.handleMessage(J.method,J.args).then((Y)=>{this._send(new cT(this._workerId,$,Y,void 0))},(Y)=>{if(Y.detail instanceof Error)Y.detail=yN(Y.detail);this._send(new cT(this._workerId,$,void 0,yN(Y)))})}_handleSubscribeEventMessage(J){let $=J.req,X=this._handler.handleEvent(J.eventName,J.arg)((Y)=>{this._send(new gp(this._workerId,$,Y))});this._pendingEvents.set($,X)}_handleEventMessage(J){if(!this._pendingEmitters.has(J.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(J.req).fire(J.event)}_handleUnsubscribeEventMessage(J){if(!this._pendingEvents.has(J.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(J.req).dispose(),this._pendingEvents.delete(J.req)}_send(J){let $=[];if(J.type===0){for(let X=0;X<J.args.length;X++)if(J.args[X]instanceof ArrayBuffer)$.push(J.args[X])}else if(J.type===1){if(J.res instanceof ArrayBuffer)$.push(J.res)}this._handler.sendMessage(J,$)}}function sT(J){return J[0]==="o"&&J[1]==="n"&&zX(J.charCodeAt(2))}function aT(J){return/^onDynamic/.test(J)&&zX(J.charCodeAt(9))}function mp(J,$,X){let Y=(G)=>{return function(){let q=Array.prototype.slice.call(arguments,0);return $(G,q)}},Z=(G)=>{return function(q){return X(G,q)}},Q={};for(let G of J){if(aT(G)){Q[G]=Z(G);continue}if(sT(G)){Q[G]=X(G,void 0);continue}Q[G]=Y(G)}return Q}class GY0{constructor(J,$){this._requestHandlerFactory=$,this._requestHandler=null,this._protocol=new lT({sendMessage:(X,Y)=>{J(X,Y)},handleMessage:(X,Y)=>this._handleMessage(X,Y),handleEvent:(X,Y)=>this._handleEvent(X,Y)})}onmessage(J){this._protocol.handleMessage(J)}_handleMessage(J,$){if(J===vp)return this.initialize($[0],$[1],$[2],$[3]);if(!this._requestHandler||typeof this._requestHandler[J]!=="function")return Promise.reject(Error("Missing requestHandler or method: "+J));try{return Promise.resolve(this._requestHandler[J].apply(this._requestHandler,$))}catch(X){return Promise.reject(X)}}_handleEvent(J,$){if(!this._requestHandler)throw Error("Missing requestHandler");if(aT(J)){let X=this._requestHandler[J].call(this._requestHandler,$);if(typeof X!=="function")throw Error(`Missing dynamic event ${J} on request handler.`);return X}if(sT(J)){let X=this._requestHandler[J];if(typeof X!=="function")throw Error(`Missing event ${J} on request handler.`);return X}throw Error(`Malformed event name ${J}`)}initialize(J,$,X,Y){this._protocol.setWorkerId(J);let G=mp(Y,(q,U)=>{return this._protocol.sendMessage(q,U)},(q,U)=>{return this._protocol.listen(q,U)});if(this._requestHandlerFactory)return this._requestHandler=this._requestHandlerFactory(G),Promise.resolve(HQ(this._requestHandler));if($){if(typeof $.baseUrl<"u")delete $.baseUrl;if(typeof $.paths<"u"){if(typeof $.paths.vs<"u")delete $.paths.vs}if(typeof $.trustedTypesPolicy<"u")delete $.trustedTypesPolicy;$.catchError=!0,globalThis.require.config($)}return new Promise((q,U)=>{let z=globalThis.require;z([X],(H)=>{if(this._requestHandler=H.create(G),!this._requestHandler){U(Error("No RequestHandler!"));return}q(HQ(this._requestHandler))},U)})}}var vp="$initialize",Cp=!1,dT;var rT=w(()=>{O1();_0();z0();n7();L1();X1();dT=class dT extends m{constructor(J,$,X){super();let Y=null;this._worker=this._register(J.create("vs/base/common/worker/simpleWorker",(z)=>{this._protocol.handleMessage(z)},(z)=>{Y===null||Y===void 0||Y(z)})),this._protocol=new lT({sendMessage:(z,H)=>{this._worker.postMessage(z,H)},handleMessage:(z,H)=>{if(typeof X[z]!=="function")return Promise.reject(Error("Missing method "+z+" on main thread host."));try{return Promise.resolve(X[z].apply(X,H))}catch(j){return Promise.reject(j)}},handleEvent:(z,H)=>{if(aT(z)){let j=X[z].call(X,H);if(typeof j!=="function")throw Error(`Missing dynamic event ${z} on main thread host.`);return j}if(sT(z)){let j=X[z];if(typeof j!=="function")throw Error(`Missing event ${z} on main thread host.`);return j}throw Error(`Malformed event name ${z}`)}}),this._protocol.setWorkerId(this._worker.getId());let Z=null,Q=globalThis.require;if(typeof Q<"u"&&typeof Q.getConfig==="function")Z=Q.getConfig();else if(typeof globalThis.requirejs<"u")Z=globalThis.requirejs.s.contexts._.config;let G=HQ(X);this._onModuleLoaded=this._protocol.sendMessage(vp,[this._worker.getId(),JSON.parse(JSON.stringify(Z)),$,G]);let q=(z,H)=>{return this._request(z,H)},U=(z,H)=>{return this._protocol.listen(z,H)};this._lazyProxy=new Promise((z,H)=>{Y=H,this._onModuleLoaded.then((j)=>{z(mp(j,q,U))},(j)=>{H(j),this._onError("Worker failed to load "+$,j)})})}getProxyObject(){return this._lazyProxy}_request(J,$){return new Promise((X,Y)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(J,$).then(X,Y)},Y)})}_onError(J,$){console.error(J),console.info($)}}});function J4(J,$){var X;let Y=globalThis.MonacoEnvironment;if(Y===null||Y===void 0?void 0:Y.createTrustedTypesPolicy)try{return Y.createTrustedTypesPolicy(J,$)}catch(Z){$1(Z);return}try{return(X=W1.trustedTypes)===null||X===void 0?void 0:X.createPolicy(J,$)}catch(Z){$1(Z);return}}var kQ=w(()=>{N8();O1()});function qY0(J){let $=globalThis.MonacoEnvironment;if($){if(typeof $.getWorker==="function")return $.getWorker("workerMain.js",J);if(typeof $.getWorkerUrl==="function"){let X=$.getWorkerUrl("workerMain.js",J);return new Worker(up?up.createScriptURL(X):X,{name:J})}}throw Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function UY0(J){if(typeof J.then==="function")return!0;return!1}class gj{constructor(J){this._label=J,this._webWorkerFailedBeforeError=!1}create(J,$,X){let Y=++gj.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new cp(J,Y,this._label||"anonymous"+Y,$,(Z)=>{fj(Z),this._webWorkerFailedBeforeError=Z,X(Z)})}}var up,cp;var lp=w(()=>{kQ();O1();rT();z0();up=J4("defaultWorkerFactory",{createScriptURL:(J)=>J});cp=class cp extends m{constructor(J,$,X,Y,Z){super();this.id=$,this.label=X;let Q=qY0(X);if(UY0(Q))this.worker=Q;else this.worker=Promise.resolve(Q);this.postMessage(J,[]),this.worker.then((G)=>{if(G.onmessage=function(q){Y(q.data)},G.onmessageerror=Z,typeof G.addEventListener==="function")G.addEventListener("error",Z)}),this._register(N0(()=>{var G;(G=this.worker)===null||G===void 0||G.then((q)=>{q.onmessage=null,q.onmessageerror=null,q.removeEventListener("error",Z),q.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(J,$){var X;(X=this.worker)===null||X===void 0||X.then((Y)=>{try{Y.postMessage(J,$)}catch(Z){$1(Z),$1(Error(`FAILED to post message to '${this.label}'-worker`,{cause:Z}))}})}};gj.LAST_WORKER_ID=0});class mj{constructor(J){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=J.open,this.close=J.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(J.notIn))for(let $=0,X=J.notIn.length;$<X;$++)switch(J.notIn[$]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(J){switch(J){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(J,$){if(J.getTokenCount()===0)return!0;let X=J.findTokenIndexAtOffset($-2),Y=J.getStandardTokenType(X);return this.isOK(Y)}_findNeutralCharacterInRange(J,$){for(let X=J;X<=$;X++){let Y=String.fromCharCode(X);if(!this.open.includes(Y)&&!this.close.includes(Y))return Y}return null}findNeutralCharacter(){if(!this._neutralCharacterSearched){if(this._neutralCharacterSearched=!0,!this._neutralCharacter)this._neutralCharacter=this._findNeutralCharacterInRange(48,57);if(!this._neutralCharacter)this._neutralCharacter=this._findNeutralCharacterInRange(97,122);if(!this._neutralCharacter)this._neutralCharacter=this._findNeutralCharacterInRange(65,90)}return this._neutralCharacter}}class iT{constructor(J){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let $ of J)if(pj(this.autoClosingPairsOpenByStart,$.open.charAt(0),$),pj(this.autoClosingPairsOpenByEnd,$.open.charAt($.open.length-1),$),pj(this.autoClosingPairsCloseByStart,$.close.charAt(0),$),pj(this.autoClosingPairsCloseByEnd,$.close.charAt($.close.length-1),$),$.close.length===1&&$.open.length===1)pj(this.autoClosingPairsCloseSingleChar,$.close,$)}}function pj(J,$,X){if(J.has($))J.get($).push(X);else J.set($,[X])}var H8;var gG=w(()=>{(function(J){J[J.None=0]="None",J[J.Indent=1]="Indent",J[J.IndentOutdent=2]="IndentOutdent",J[J.Outdent=3]="Outdent"})(H8||(H8={}))});function EQ(J,$){let X=J.getCount(),Y=J.findTokenIndexAtOffset($),Z=J.getLanguageId(Y),Q=Y;while(Q+1<X&&J.getLanguageId(Q+1)===Z)Q++;let G=Y;while(G>0&&J.getLanguageId(G-1)===Z)G--;return new dp(J,Z,G,Q+1,J.getStartOffset(G),J.getEndOffset(Q))}class dp{constructor(J,$,X,Y,Z,Q){this._scopedLineTokensBrand=void 0,this._actual=J,this.languageId=$,this._firstTokenIndex=X,this._lastTokenIndex=Y,this.firstCharOffset=Z,this._lastCharOffset=Q}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(J){return this._actual.getLineContent().substring(0,this.firstCharOffset+J)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(J){return this._actual.findTokenIndexAtOffset(J+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(J){return this._actual.getStandardTokenType(J+this._firstTokenIndex)}}function MJ(J){return(J&3)!==0}class pG{constructor(J){if(J.autoClosingPairs)this._autoClosingPairs=J.autoClosingPairs.map(($)=>new mj($));else if(J.brackets)this._autoClosingPairs=J.brackets.map(($)=>new mj({open:$[0],close:$[1]}));else this._autoClosingPairs=[];if(J.__electricCharacterSupport&&J.__electricCharacterSupport.docComment){let $=J.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new mj({open:$.open,close:$.close||""}))}this._autoCloseBeforeForQuotes=typeof J.autoCloseBefore==="string"?J.autoCloseBefore:pG.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof J.autoCloseBefore==="string"?J.autoCloseBefore:pG.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=J.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(J){return J?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}var sp=w(()=>{gG();pG.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;pG.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`});class BP{static wrap(J){if(ap&&!Buffer.isBuffer(J))J=Buffer.from(J.buffer,J.byteOffset,J.byteLength);return new BP(J)}constructor(J){this.buffer=J,this.byteLength=this.buffer.byteLength}toString(){if(ap)return this.buffer.toString();else{if(!nT)nT=new TextDecoder;return nT.decode(this.buffer)}}}function rp(J,$){return J[$+0]<<0>>>0|J[$+1]<<8>>>0}function ip(J,$,X){J[X+0]=$&255,$=$>>>8,J[X+1]=$&255}function k4(J,$){return J[$]*16777216+J[$+1]*65536+J[$+2]*256+J[$+3]}function E4(J,$,X){J[X+3]=$,$=$>>>8,J[X+2]=$,$=$>>>8,J[X+1]=$,$=$>>>8,J[X]=$}function oT(J,$){return J[$]}function tT(J,$,X){J[X]=$}var ap,TO0,nT;var uj=w(()=>{ap=typeof Buffer<"u",TO0=new s9(()=>new Uint8Array(256))});function np(){if(!Jw)Jw=new TextDecoder("UTF-16LE");return Jw}function zY0(){if(!$w)$w=new TextDecoder("UTF-16BE");return $w}function Yw(){if(!Xw)Xw=qf()?np():zY0();return Xw}function op(J,$,X){let Y=new Uint16Array(J.buffer,$,X);if(X>0&&(Y[0]===65279||Y[0]===65534))return HY0(J,$,X);return np().decode(Y)}function HY0(J,$,X){let Y=[],Z=0;for(let Q=0;Q<X;Q++){let G=rp(J,$);$+=2,Y[Z++]=String.fromCharCode(G)}return Y.join("")}class dY{constructor(J){this._capacity=J|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){if(this._completedStrings!==null)return this._flushBuffer(),this._completedStrings.join("");return this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";let J=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Yw().decode(J)}_flushBuffer(){let J=this._buildBuffer();if(this._bufferLength=0,this._completedStrings===null)this._completedStrings=[J];else this._completedStrings[this._completedStrings.length]=J}appendCharCode(J){let $=this._capacity-this._bufferLength;if($<=1){if($===0||P6(J))this._flushBuffer()}this._buffer[this._bufferLength++]=J}appendASCIICharCode(J){if(this._bufferLength===this._capacity)this._flushBuffer();this._buffer[this._bufferLength++]=J}appendString(J){let $=J.length;if(this._bufferLength+$>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=J;return}for(let X=0;X<$;X++)this._buffer[this._bufferLength++]=J.charCodeAt(X)}}var Jw,$w,Xw;var mG=w(()=>{X1();L1();uj()});class FP{constructor(J,$,X,Y,Z,Q){this._richEditBracketBrand=void 0,this.languageId=J,this.index=$,this.open=X,this.close=Y,this.forwardRegex=Z,this.reversedRegex=Q,this._openSet=FP._toSet(this.open),this._closeSet=FP._toSet(this.close)}isOpen(J){return this._openSet.has(J)}isClose(J){return this._closeSet.has(J)}static _toSet(J){let $=new Set;for(let X of J)$.add(X);return $}}function VY0(J){let $=J.length;J=J.map((G)=>[G[0].toLowerCase(),G[1].toLowerCase()]);let X=[];for(let G=0;G<$;G++)X[G]=G;let Y=(G,q)=>{let[U,z]=G,[H,j]=q;return U===H||U===j||z===H||z===j},Z=(G,q)=>{let U=Math.min(G,q),z=Math.max(G,q);for(let H=0;H<$;H++)if(X[H]===z)X[H]=U};for(let G=0;G<$;G++){let q=J[G];for(let U=G+1;U<$;U++){let z=J[U];if(Y(q,z))Z(X[G],X[U])}}let Q=[];for(let G=0;G<$;G++){let q=[],U=[];for(let z=0;z<$;z++)if(X[z]===G){let[H,j]=J[z];q.push(H),U.push(j)}if(q.length>0)Q.push({open:q,close:U})}return Q}class Zw{constructor(J,$){this._richEditBracketsBrand=void 0;let X=VY0($);this.brackets=X.map((Y,Z)=>{return new FP(J,Z,Y.open,Y.close,WY0(Y.open,Y.close,X,Z),BY0(Y.open,Y.close,X,Z))}),this.forwardRegex=FY0(this.brackets),this.reversedRegex=KY0(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let Y of this.brackets){for(let Z of Y.open)this.textIsBracket[Z]=Y,this.textIsOpenBracket[Z]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,Z.length);for(let Z of Y.close)this.textIsBracket[Z]=Y,this.textIsOpenBracket[Z]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,Z.length)}}}function tp(J,$,X,Y){for(let Z=0,Q=$.length;Z<Q;Z++){if(Z===X)continue;let G=$[Z];for(let q of G.open)if(q.indexOf(J)>=0)Y.push(q);for(let q of G.close)if(q.indexOf(J)>=0)Y.push(q)}}function ep(J,$){return J.length-$.length}function KP(J){if(J.length<=1)return J;let $=[],X=new Set;for(let Y of J){if(X.has(Y))continue;$.push(Y),X.add(Y)}return $}function WY0(J,$,X,Y){let Z=[];Z=Z.concat(J),Z=Z.concat($);for(let Q=0,G=Z.length;Q<G;Q++)tp(Z[Q],X,Y,Z);return Z=KP(Z),Z.sort(ep),Z.reverse(),AP(Z)}function BY0(J,$,X,Y){let Z=[];Z=Z.concat(J),Z=Z.concat($);for(let Q=0,G=Z.length;Q<G;Q++)tp(Z[Q],X,Y,Z);return Z=KP(Z),Z.sort(ep),Z.reverse(),AP(Z.map(Qw))}function FY0(J){let $=[];for(let X of J){for(let Y of X.open)$.push(Y);for(let Y of X.close)$.push(Y)}return $=KP($),AP($)}function KY0(J){let $=[];for(let X of J){for(let Y of X.open)$.push(Y);for(let Y of X.close)$.push(Y)}return $=KP($),AP($.map(Qw))}function AY0(J){let $=/^[\w ]+$/.test(J);return J=b7(J),$?`\\b${J}\\b`:J}function AP(J){let $=`(${J.map(AY0).join(")|(")})`;return DA($,!0)}class M9{static _findPrevBracketInText(J,$,X,Y){let Z=X.match(J);if(!Z)return null;let Q=X.length-(Z.index||0),G=Z[0].length,q=Y+Q;return new k($,q-G+1,$,q+1)}static findPrevBracketInRange(J,$,X,Y,Z){let G=Qw(X).substring(X.length-Z,X.length-Y);return this._findPrevBracketInText(J,$,G,Y)}static findNextBracketInText(J,$,X,Y){let Z=X.match(J);if(!Z)return null;let Q=Z.index||0,G=Z[0].length;if(G===0)return null;let q=Y+Q;return new k($,q+1,$,q+1+G)}static findNextBracketInRange(J,$,X,Y,Z){let Q=X.substring(Y,Z);return this.findNextBracketInText(J,$,Q,Y)}}var Qw;var PP=w(()=>{X1();mG();i0();Qw=function(){function J(Y){let Z=new Uint16Array(Y.length),Q=0;for(let G=Y.length-1;G>=0;G--)Z[Q++]=Y.charCodeAt(G);return Yw().decode(Z)}let $=null,X=null;return function(Z){if($!==Z)$=Z,X=J($);return X}}()});class Gw{constructor(J){this._richEditBrackets=J}getElectricCharacters(){let J=[];if(this._richEditBrackets)for(let $ of this._richEditBrackets.brackets)for(let X of $.close){let Y=X.charAt(X.length-1);J.push(Y)}return ZJ(J)}onElectricCharacter(J,$,X){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let Y=$.findTokenIndexAtOffset(X-1);if(MJ($.getStandardTokenType(Y)))return null;let Z=this._richEditBrackets.reversedRegex,Q=$.getLineContent().substring(0,X-1)+J,G=M9.findPrevBracketInRange(Z,1,Q,0,Q.length);if(!G)return null;let q=Q.substring(G.startColumn-1,G.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[q])return null;let z=$.getActualLineContentBefore(G.startColumn-1);if(!/^\s*$/.test(z))return null;return{matchOpenBracket:q}}}var Jm=w(()=>{V1();PP()});function DP(J){if(J.global)J.lastIndex=0;return!0}class qw{constructor(J){this._indentationRules=J}shouldIncrease(J){if(this._indentationRules){if(this._indentationRules.increaseIndentPattern&&DP(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(J))return!0}return!1}shouldDecrease(J){if(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&DP(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(J))return!0;return!1}shouldIndentNextLine(J){if(this._indentationRules&&this._indentationRules.indentNextLinePattern&&DP(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(J))return!0;return!1}shouldIgnore(J){if(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&DP(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(J))return!0;return!1}getIndentMetadata(J){let $=0;if(this.shouldIncrease(J))$+=1;if(this.shouldDecrease(J))$+=2;if(this.shouldIndentNextLine(J))$+=4;if(this.shouldIgnore(J))$+=8;return $}}class uG{constructor(J){J=J||{},J.brackets=J.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],J.brackets.forEach(($)=>{let X=uG._createOpenBracketRegExp($[0]),Y=uG._createCloseBracketRegExp($[1]);if(X&&Y)this._brackets.push({open:$[0],openRegExp:X,close:$[1],closeRegExp:Y})}),this._regExpRules=J.onEnterRules||[]}onEnter(J,$,X,Y){if(J>=3)for(let Z=0,Q=this._regExpRules.length;Z<Q;Z++){let G=this._regExpRules[Z];if([{reg:G.beforeText,text:X},{reg:G.afterText,text:Y},{reg:G.previousLineText,text:$}].every((U)=>{if(!U.reg)return!0;return U.reg.lastIndex=0,U.reg.test(U.text)}))return G.action}if(J>=2){if(X.length>0&&Y.length>0)for(let Z=0,Q=this._brackets.length;Z<Q;Z++){let G=this._brackets[Z];if(G.openRegExp.test(X)&&G.closeRegExp.test(Y))return{indentAction:H8.IndentOutdent}}}if(J>=2){if(X.length>0){for(let Z=0,Q=this._brackets.length;Z<Q;Z++)if(this._brackets[Z].openRegExp.test(X))return{indentAction:H8.Indent}}}return null}static _createOpenBracketRegExp(J){let $=b7(J);if(!/\B/.test($.charAt(0)))$="\\b"+$;return $+="\\s*$",uG._safeRegExp($)}static _createCloseBracketRegExp(J){let $=b7(J);if(!/\B/.test($.charAt($.length-1)))$=$+"\\b";return $="^\\s*"+$,uG._safeRegExp($)}static _safeRegExp(J){try{return new RegExp(J)}catch($){return $1($),null}}}var $m=w(()=>{O1();X1();gG()});function RP(J,$){let X=Object.create(null);for(let Y in J)Uw(X,Y,J[Y],$);return X}function Uw(J,$,X,Y){let Z=$.split("."),Q=Z.pop(),G=J;for(let q=0;q<Z.length;q++){let U=Z[q],z=G[U];switch(typeof z){case"undefined":z=G[U]=Object.create(null);break;case"object":break;default:Y(`Ignoring ${$} as ${Z.slice(0,q+1).join(".")} is ${JSON.stringify(z)}`);return}G=z}if(typeof G==="object"&&G!==null)try{G[Q]=X}catch(q){Y(`Ignoring ${$} as ${Z.join(".")} is ${JSON.stringify(G)}`)}else Y(`Ignoring ${$} as ${Z.join(".")} is ${JSON.stringify(G)}`)}function Xm(J,$){let X=$.split(".");Ym(J,X)}function Ym(J,$){let X=$.shift();if($.length===0){delete J[X];return}if(Object.keys(J).indexOf(X)!==-1){let Y=J[X];if(typeof Y==="object"&&!Array.isArray(Y)){if(Ym(Y,$),Object.keys(Y).length===0)delete J[X]}}}function zw(J,$,X){function Y(G,q){let U=G;for(let z of q){if(typeof U!=="object"||U===null)return;U=U[z]}return U}let Z=$.split("."),Q=Y(J,Z);return typeof Q>"u"?X:Q}function Zm(J){return J.replace(/[\[\]]/g,"")}var g1;var H7=w(()=>{s0();g1=w0("configurationService")});var j6;var I4=w(()=>{s0();j6=w0("languageService")});class $4{constructor(J,$=[],X=!1){this.ctor=J,this.staticArguments=$,this.supportsDelayedInstantiation=X}}function B1(J,$,X){if(!($ instanceof $4))$=new $4($,[],Boolean(X));Qm.push([J,$])}function Hw(){return Qm}var Qm;var y4=w(()=>{Qm=[]});var x4;var cj=w(()=>{x4=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"})});function PY0(J){if(J.length>0&&J.charAt(J.length-1)==="#")return J.substring(0,J.length-1);return J}class Gm{constructor(){this._onDidChangeSchema=new x,this.schemasById={}}registerSchema(J,$){this.schemasById[PY0(J)]=$,this._onDidChangeSchema.fire(J)}notifySchemaChanged(J){this._onDidChangeSchema.fire(J)}}var cG,DY0;var MP=w(()=>{_0();h7();cG={JSONContribution:"base.contributions.json"};DY0=new Gm;G6.add(cG.JSONContribution,DY0)});class zm{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new x,this._onDidUpdateConfiguration=new x,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:F("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},qm.registerSchema(lj,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(J,$=!0){this.registerConfigurations([J],$)}registerConfigurations(J,$=!0){let X=new Set;this.doRegisterConfigurations(J,$,X),qm.registerSchema(lj,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:X})}registerDefaultConfigurations(J){let $=new Set;this.doRegisterDefaultConfigurations(J,$),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:$,defaultsOverrides:!0})}doRegisterDefaultConfigurations(J,$){var X;let Y=[];for(let{overrides:Z,source:Q}of J)for(let G in Z)if($.add(G),sY.test(G)){let q=this.configurationDefaultsOverrides.get(G),U=(X=q===null||q===void 0?void 0:q.valuesSources)!==null&&X!==void 0?X:new Map;if(Q)for(let V of Object.keys(Z[G]))U.set(V,Q);let z={...(q===null||q===void 0?void 0:q.value)||{},...Z[G]};this.configurationDefaultsOverrides.set(G,{source:Q,value:z,valuesSources:U});let H=Zm(G),j={type:"object",default:z,description:F("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",H),$ref:lj,defaultDefaultValue:z,source:N5(Q)?void 0:Q,defaultValueSource:Q};Y.push(...dj(G)),this.configurationProperties[G]=j,this.defaultLanguageConfigurationOverridesNode.properties[G]=j}else{this.configurationDefaultsOverrides.set(G,{value:Z[G],source:Q});let q=this.configurationProperties[G];if(q)this.updatePropertyDefaultValue(G,q),this.updateSchema(G,q)}this.doRegisterOverrideIdentifiers(Y)}registerOverrideIdentifiers(J){this.doRegisterOverrideIdentifiers(J),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(J){for(let $ of J)this.overrideIdentifiers.add($);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(J,$,X){J.forEach((Y)=>{this.validateAndRegisterProperties(Y,$,Y.extensionInfo,Y.restrictedProperties,void 0,X),this.configurationContributors.push(Y),this.registerJSONConfiguration(Y)})}validateAndRegisterProperties(J,$=!0,X,Y,Z=3,Q){var G;Z=m8(J.scope)?Z:J.scope;let q=J.properties;if(q)for(let z in q){let H=q[z];if($&&MY0(z,H)){delete q[z];continue}if(H.source=X,H.defaultDefaultValue=q[z].default,this.updatePropertyDefaultValue(z,H),sY.test(z))H.scope=void 0;else H.scope=m8(H.scope)?Z:H.scope,H.restricted=m8(H.restricted)?!!(Y===null||Y===void 0?void 0:Y.includes(z)):H.restricted;if(q[z].hasOwnProperty("included")&&!q[z].included){this.excludedConfigurationProperties[z]=q[z],delete q[z];continue}else if(this.configurationProperties[z]=q[z],(G=q[z].policy)===null||G===void 0?void 0:G.name)this.policyConfigurations.set(q[z].policy.name,z);if(!q[z].deprecationMessage&&q[z].markdownDeprecationMessage)q[z].deprecationMessage=q[z].markdownDeprecationMessage;Q.add(z)}let U=J.allOf;if(U)for(let z of U)this.validateAndRegisterProperties(z,$,X,Y,Z,Q)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(J){let $=(X)=>{let Y=X.properties;if(Y)for(let Q in Y)this.updateSchema(Q,Y[Q]);let Z=X.allOf;Z===null||Z===void 0||Z.forEach($)};$(J)}updateSchema(J,$){switch(jw.properties[J]=$,$.scope){case 1:Vw.properties[J]=$;break;case 2:Ww.properties[J]=$;break;case 6:Bw.properties[J]=$;break;case 3:Fw.properties[J]=$;break;case 4:OP.properties[J]=$;break;case 5:OP.properties[J]=$,this.resourceLanguageSettingsSchema.properties[J]=$;break}}updateOverridePropertyPatternKey(){for(let J of this.overrideIdentifiers.values()){let $=`[${J}]`,X={type:"object",description:F("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:F("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:lj};this.updatePropertyDefaultValue($,X),jw.properties[$]=X,Vw.properties[$]=X,Ww.properties[$]=X,Bw.properties[$]=X,Fw.properties[$]=X,OP.properties[$]=X}}registerOverridePropertyPatternKey(){let J={type:"object",description:F("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:F("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:lj};jw.patternProperties[lG]=J,Vw.patternProperties[lG]=J,Ww.patternProperties[lG]=J,Bw.patternProperties[lG]=J,Fw.patternProperties[lG]=J,OP.patternProperties[lG]=J,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(J,$){let X=this.configurationDefaultsOverrides.get(J),Y=X===null||X===void 0?void 0:X.value,Z=X===null||X===void 0?void 0:X.source;if(M8(Y))Y=$.defaultDefaultValue,Z=void 0;if(M8(Y))Y=RY0($.type);$.default=Y,$.defaultValueSource=Z}}function dj(J){let $=[];if(sY.test(J)){let X=Um.exec(J);while(X===null||X===void 0?void 0:X.length){let Y=X[1].trim();if(Y)$.push(Y);X=Um.exec(J)}}return ZJ($)}function RY0(J){switch(Array.isArray(J)?J[0]:J){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}function MY0(J,$){var X,Y,Z,Q;if(!J.trim())return F("config.property.empty","Cannot register an empty property");if(sY.test(J))return F("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",J);if(_P.getConfigurationProperties()[J]!==void 0)return F("config.property.duplicate","Cannot register '{0}'. This property is already registered.",J);if(((X=$.policy)===null||X===void 0?void 0:X.name)&&_P.getPolicyConfigurations().get((Y=$.policy)===null||Y===void 0?void 0:Y.name)!==void 0)return F("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",J,(Z=$.policy)===null||Z===void 0?void 0:Z.name,_P.getPolicyConfigurations().get((Q=$.policy)===null||Q===void 0?void 0:Q.name));return null}var b4,jw,Vw,Ww,Bw,Fw,OP,lj="vscode://schemas/settings/resourceLanguage",qm,Hm="\\[([^\\]]+)\\]",Um,lG,sY,_P;var dG=w(()=>{V1();_0();c0();H7();MP();h7();b4={Configuration:"base.contributions.configuration"},jw={properties:{},patternProperties:{}},Vw={properties:{},patternProperties:{}},Ww={properties:{},patternProperties:{}},Bw={properties:{},patternProperties:{}},Fw={properties:{},patternProperties:{}},OP={properties:{},patternProperties:{}},qm=G6.as(cG.JSONContribution);Um=new RegExp(Hm,"g"),lG=`^(${Hm})+$`,sY=new RegExp(lG);_P=new zm;G6.add(b4.Configuration,_P)});class jm{constructor(){this._onDidChangeLanguages=new x,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(J){return this._languages.push(J),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let $=0,X=this._languages.length;$<X;$++)if(this._languages[$]===J){this._languages.splice($,1);return}}}}getLanguages(){return this._languages}}var OY0,IQ,m5="plaintext",_Y0=".txt";var OJ=w(()=>{c0();_0();h7();cj();dG();OY0={ModesRegistry:"editor.modesRegistry"};IQ=new jm;G6.add(OY0.ModesRegistry,IQ);IQ.registerLanguage({id:m5,extensions:[_Y0],aliases:[F("plainText.alias","Plain Text"),"text"],mimetypes:[x4.text]});G6.as(b4.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])});class Kw{constructor(J,$){this.languageId=J;let X=$.brackets?Vm($.brackets):[],Y=new AA((G)=>{let q=new Set;return{info:new Wm(this,G,q),closing:q}}),Z=new AA((G)=>{let q=new Set,U=new Set;return{info:new Bm(this,G,q,U),opening:q,openingColorized:U}});for(let[G,q]of X){let U=Y.get(G),z=Z.get(q);U.closing.add(z.info),z.opening.add(U.info)}let Q=$.colorizedBracketPairs?Vm($.colorizedBracketPairs):X.filter((G)=>!(G[0]==="<"&&G[1]===">"));for(let[G,q]of Q){let U=Y.get(G),z=Z.get(q);U.closing.add(z.info),z.openingColorized.add(U.info),z.opening.add(U.info)}this._openingBrackets=new Map([...Y.cachedValues].map(([G,q])=>[G,q.info])),this._closingBrackets=new Map([...Z.cachedValues].map(([G,q])=>[G,q.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(J){return this._openingBrackets.get(J)}getClosingBracketInfo(J){return this._closingBrackets.get(J)}getBracketInfo(J){return this.getOpeningBracketInfo(J)||this.getClosingBracketInfo(J)}}function Vm(J){return J.filter(([$,X])=>$!==""&&X!=="")}class Aw{constructor(J,$){this.config=J,this.bracketText=$}get languageId(){return this.config.languageId}}var Wm,Bm;var Fm=w(()=>{Wm=class Wm extends Aw{constructor(J,$,X){super(J,$);this.openedBrackets=X,this.isOpeningBracket=!0}};Bm=class Bm extends Aw{constructor(J,$,X,Y){super(J,$);this.openingBrackets=X,this.openingColorizedBrackets=Y,this.isOpeningBracket=!1}closes(J){if(J.config!==this.config)return!1;return this.openingBrackets.has(J)}closesColorized(J){if(J.config!==this.config)return!1;return this.openingColorizedBrackets.has(J)}getOpeningBrackets(){return[...this.openingBrackets]}}});class NP{constructor(J){this.languageId=J}affects(J){return!this.languageId?!0:this.languageId===J}}function TY0(J,$,X,Y){let Z=$.getLanguageConfiguration(J);if(!Z){if(!Y.isRegisteredLanguageId(J))return new UU(J,{});Z=new UU(J,{})}let Q=wY0(Z.languageId,X),G=Dm([Z.underlyingConfig,Q]);return new UU(Z.languageId,G)}function wY0(J,$){let X=$.getValue(Dw.brackets,{overrideIdentifier:J}),Y=$.getValue(Dw.colorizedBracketPairs,{overrideIdentifier:J});return{brackets:Am(X),colorizedBracketPairs:Am(Y)}}function Am(J){if(!Array.isArray(J))return;return J.map(($)=>{if(!Array.isArray($)||$.length!==2)return;return[$[0],$[1]]}).filter(($)=>!!$)}function TP(J,$,X){let Y=J.getLineContent($),Z=W5(Y);if(Z.length>X-1)Z=Z.substring(0,X-1);return Z}function yQ(J,$,X){J.tokenization.forceTokenization($);let Y=J.tokenization.getLineTokens($),Z=typeof X>"u"?J.getLineMaxColumn($)-1:X-1;return EQ(Y,Z)}class Pm{constructor(J){this.languageId=J,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(J,$){let X=new Rw(J,$,++this._order);return this._entries.push(X),this._resolved=null,N0(()=>{for(let Y=0;Y<this._entries.length;Y++)if(this._entries[Y]===X){this._entries.splice(Y,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let J=this._resolve();if(J)this._resolved=new UU(this.languageId,J)}return this._resolved}_resolve(){if(this._entries.length===0)return null;return this._entries.sort(Rw.cmp),Dm(this._entries.map((J)=>J.configuration))}}function Dm(J){let $={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let X of J)$={comments:X.comments||$.comments,brackets:X.brackets||$.brackets,wordPattern:X.wordPattern||$.wordPattern,indentationRules:X.indentationRules||$.indentationRules,onEnterRules:X.onEnterRules||$.onEnterRules,autoClosingPairs:X.autoClosingPairs||$.autoClosingPairs,surroundingPairs:X.surroundingPairs||$.surroundingPairs,autoCloseBefore:X.autoCloseBefore||$.autoCloseBefore,folding:X.folding||$.folding,colorizedBracketPairs:X.colorizedBracketPairs||$.colorizedBracketPairs,__electricCharacterSupport:X.__electricCharacterSupport||$.__electricCharacterSupport};return $}class Rw{constructor(J,$,X){this.configuration=J,this.priority=$,this.order=X}static cmp(J,$){if(J.priority===$.priority)return J.order-$.order;return J.priority-$.priority}}class Mw{constructor(J){this.languageId=J}}class UU{constructor(J,$){if(this.languageId=J,this.underlyingConfig=$,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new uG(this.underlyingConfig):null,this.comments=UU._handleComments(this.underlyingConfig),this.characterPair=new pG(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||tH,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules)this.indentRulesSupport=new qw(this.underlyingConfig.indentationRules);else this.indentRulesSupport=null;this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Kw(J,this.underlyingConfig)}getWordDefinition(){return eH(this.wordDefinition)}get brackets(){if(!this._brackets&&this.underlyingConfig.brackets)this._brackets=new Zw(this.languageId,this.underlyingConfig.brackets);return this._brackets}get electricCharacter(){if(!this._electricCharacter)this._electricCharacter=new Gw(this.brackets);return this._electricCharacter}onEnter(J,$,X,Y){if(!this._onEnterSupport)return null;return this._onEnterSupport.onEnter(J,$,X,Y)}getAutoClosingPairs(){return new iT(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(J){return this.characterPair.getAutoCloseBeforeSet(J)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(J){let $=J.comments;if(!$)return null;let X={};if($.lineComment)X.lineCommentToken=$.lineComment;if($.blockComment){let[Y,Z]=$.blockComment;X.blockCommentStartToken=Y,X.blockCommentEndToken=Z}return X}}var NY0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Km=function(J,$){return function(X,Y){$(X,Y,J)}},C6,Pw,Dw,Rm;var j7=w(()=>{_0();z0();X1();xq();gG();sp();Jm();$m();PP();s0();H7();I4();y4();OJ();Fm();C6=w0("languageConfigurationService"),Pw=class extends m{constructor($,X){super();this.configurationService=$,this.languageService=X,this._registry=this._register(new Rm),this.onDidChangeEmitter=this._register(new x),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;let Y=new Set(Object.values(Dw));this._register(this.configurationService.onDidChangeConfiguration((Z)=>{let Q=Z.change.keys.some((q)=>Y.has(q)),G=Z.change.overrides.filter(([q,U])=>U.some((z)=>Y.has(z))).map(([q])=>q);if(Q)this.configurations.clear(),this.onDidChangeEmitter.fire(new NP(void 0));else for(let q of G)if(this.languageService.isRegisteredLanguageId(q))this.configurations.delete(q),this.onDidChangeEmitter.fire(new NP(q))})),this._register(this._registry.onDidChange((Z)=>{this.configurations.delete(Z.languageId),this.onDidChangeEmitter.fire(new NP(Z.languageId))}))}register($,X,Y){return this._registry.register($,X,Y)}getLanguageConfiguration($){let X=this.configurations.get($);if(!X)X=TY0($,this._registry,this.configurationService,this.languageService),this.configurations.set($,X);return X}};Pw=NY0([Km(0,g1),Km(1,j6)],Pw);Dw={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};Rm=class Rm extends m{constructor(){super();this._entries=new Map,this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._register(this.register(m5,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(J,$,X=0){let Y=this._entries.get(J);if(!Y)Y=new Pm(J),this._entries.set(J,Y);let Z=Y.register($,X);return this._onDidChange.fire(new Mw(J)),N0(()=>{Z.dispose(),this._onDidChange.fire(new Mw(J))})}getLanguageConfiguration(J){let $=this._entries.get(J);return($===null||$===void 0?void 0:$.getResolvedConfiguration())||null}};B1(C6,Pw,1)});class PX{constructor(J,$,X,Y){this.originalStart=J,this.originalLength=$,this.modifiedStart=X,this.modifiedLength=Y}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class Ow{constructor(J){this.source=J}getElements(){let J=this.source,$=new Int32Array(J.length);for(let X=0,Y=J.length;X<Y;X++)$[X]=J.charCodeAt(X);return $}}function Mm(J,$,X){return new V$(new Ow(J),new Ow($)).ComputeDiff(X).changes}class sG{static Assert(J,$){if(!J)throw Error($)}}class aG{static Copy(J,$,X,Y,Z){for(let Q=0;Q<Z;Q++)X[Y+Q]=J[$+Q]}static Copy2(J,$,X,Y,Z){for(let Q=0;Q<Z;Q++)X[Y+Q]=J[$+Q]}}class _w{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){if(this.m_originalCount>0||this.m_modifiedCount>0)this.m_changes.push(new PX(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount));this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(J,$){this.m_originalStart=Math.min(this.m_originalStart,J),this.m_modifiedStart=Math.min(this.m_modifiedStart,$),this.m_originalCount++}AddModifiedElement(J,$){this.m_originalStart=Math.min(this.m_originalStart,J),this.m_modifiedStart=Math.min(this.m_modifiedStart,$),this.m_modifiedCount++}getChanges(){if(this.m_originalCount>0||this.m_modifiedCount>0)this.MarkNextChange();return this.m_changes}getReverseChanges(){if(this.m_originalCount>0||this.m_modifiedCount>0)this.MarkNextChange();return this.m_changes.reverse(),this.m_changes}}class V${constructor(J,$,X=null){this.ContinueProcessingPredicate=X,this._originalSequence=J,this._modifiedSequence=$;let[Y,Z,Q]=V$._getElements(J),[G,q,U]=V$._getElements($);this._hasStrings=Q&&U,this._originalStringElements=Y,this._originalElementsOrHash=Z,this._modifiedStringElements=G,this._modifiedElementsOrHash=q,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(J){return J.length>0&&typeof J[0]==="string"}static _getElements(J){let $=J.getElements();if(V$._isStringArray($)){let X=new Int32Array($.length);for(let Y=0,Z=$.length;Y<Z;Y++)X[Y]=YP($[Y],0);return[$,X,!0]}if($ instanceof Int32Array)return[[],$,!1];return[[],new Int32Array($),!1]}ElementsAreEqual(J,$){if(this._originalElementsOrHash[J]!==this._modifiedElementsOrHash[$])return!1;return this._hasStrings?this._originalStringElements[J]===this._modifiedStringElements[$]:!0}ElementsAreStrictEqual(J,$){if(!this.ElementsAreEqual(J,$))return!1;let X=V$._getStrictElement(this._originalSequence,J),Y=V$._getStrictElement(this._modifiedSequence,$);return X===Y}static _getStrictElement(J,$){if(typeof J.getStrictElement==="function")return J.getStrictElement($);return null}OriginalElementsAreEqual(J,$){if(this._originalElementsOrHash[J]!==this._originalElementsOrHash[$])return!1;return this._hasStrings?this._originalStringElements[J]===this._originalStringElements[$]:!0}ModifiedElementsAreEqual(J,$){if(this._modifiedElementsOrHash[J]!==this._modifiedElementsOrHash[$])return!1;return this._hasStrings?this._modifiedStringElements[J]===this._modifiedStringElements[$]:!0}ComputeDiff(J){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,J)}_ComputeDiff(J,$,X,Y,Z){let Q=[!1],G=this.ComputeDiffRecursive(J,$,X,Y,Q);if(Z)G=this.PrettifyChanges(G);return{quitEarly:Q[0],changes:G}}ComputeDiffRecursive(J,$,X,Y,Z){Z[0]=!1;while(J<=$&&X<=Y&&this.ElementsAreEqual(J,X))J++,X++;while($>=J&&Y>=X&&this.ElementsAreEqual($,Y))$--,Y--;if(J>$||X>Y){let H;if(X<=Y)sG.Assert(J===$+1,"originalStart should only be one more than originalEnd"),H=[new PX(J,0,X,Y-X+1)];else if(J<=$)sG.Assert(X===Y+1,"modifiedStart should only be one more than modifiedEnd"),H=[new PX(J,$-J+1,X,0)];else sG.Assert(J===$+1,"originalStart should only be one more than originalEnd"),sG.Assert(X===Y+1,"modifiedStart should only be one more than modifiedEnd"),H=[];return H}let Q=[0],G=[0],q=this.ComputeRecursionPoint(J,$,X,Y,Q,G,Z),U=Q[0],z=G[0];if(q!==null)return q;else if(!Z[0]){let H=this.ComputeDiffRecursive(J,U,X,z,Z),j=[];if(!Z[0])j=this.ComputeDiffRecursive(U+1,$,z+1,Y,Z);else j=[new PX(U+1,$-(U+1)+1,z+1,Y-(z+1)+1)];return this.ConcatenateChanges(H,j)}return[new PX(J,$-J+1,X,Y-X+1)]}WALKTRACE(J,$,X,Y,Z,Q,G,q,U,z,H,j,V,W,B,K,P,A){let D=null,M=null,R=new _w,O=$,N=X,T=V[0]-K[0]-Y,S=-1073741824,v=this.m_forwardHistory.length-1;do{let l=T+J;if(l===O||l<N&&U[l-1]<U[l+1]){if(H=U[l+1],W=H-T-Y,H<S)R.MarkNextChange();S=H,R.AddModifiedElement(H+1,W),T=l+1-J}else{if(H=U[l-1]+1,W=H-T-Y,H<S)R.MarkNextChange();S=H-1,R.AddOriginalElement(H,W+1),T=l-1-J}if(v>=0)U=this.m_forwardHistory[v],J=U[0],O=1,N=U.length-1}while(--v>=-1);if(D=R.getReverseChanges(),A[0]){let l=V[0]+1,f=K[0]+1;if(D!==null&&D.length>0){let h=D[D.length-1];l=Math.max(l,h.getOriginalEnd()),f=Math.max(f,h.getModifiedEnd())}M=[new PX(l,j-l+1,f,B-f+1)]}else{R=new _w,O=Q,N=G,T=V[0]-K[0]-q,S=1073741824,v=P?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let l=T+Z;if(l===O||l<N&&z[l-1]>=z[l+1]){if(H=z[l+1]-1,W=H-T-q,H>S)R.MarkNextChange();S=H+1,R.AddOriginalElement(H+1,W+1),T=l+1-Z}else{if(H=z[l-1],W=H-T-q,H>S)R.MarkNextChange();S=H,R.AddModifiedElement(H+1,W+1),T=l-1-Z}if(v>=0)z=this.m_reverseHistory[v],Z=z[0],O=1,N=z.length-1}while(--v>=-1);M=R.getChanges()}return this.ConcatenateChanges(D,M)}ComputeRecursionPoint(J,$,X,Y,Z,Q,G){let q=0,U=0,z=0,H=0,j=0,V=0;J--,X--,Z[0]=0,Q[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let W=$-J+(Y-X),B=W+1,K=new Int32Array(B),P=new Int32Array(B),A=Y-X,D=$-J,M=J-X,R=$-Y,N=(D-A)%2===0;K[A]=J,P[D]=$,G[0]=!1;for(let T=1;T<=W/2+1;T++){let S=0,v=0;z=this.ClipDiagonalBound(A-T,T,A,B),H=this.ClipDiagonalBound(A+T,T,A,B);for(let f=z;f<=H;f+=2){if(f===z||f<H&&K[f-1]<K[f+1])q=K[f+1];else q=K[f-1]+1;U=q-(f-A)-M;let h=q;while(q<$&&U<Y&&this.ElementsAreEqual(q+1,U+1))q++,U++;if(K[f]=q,q+U>S+v)S=q,v=U;if(!N&&Math.abs(f-D)<=T-1){if(q>=P[f])if(Z[0]=q,Q[0]=U,h<=P[f]&&!0&&T<=1448)return this.WALKTRACE(A,z,H,M,D,j,V,R,K,P,q,$,Z,U,Y,Q,N,G);else return null}}let l=(S-J+(v-X)-T)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(S,l))if(G[0]=!0,Z[0]=S,Q[0]=v,l>0&&!0&&T<=1448)return this.WALKTRACE(A,z,H,M,D,j,V,R,K,P,q,$,Z,U,Y,Q,N,G);else return J++,X++,[new PX(J,$-J+1,X,Y-X+1)];j=this.ClipDiagonalBound(D-T,T,D,B),V=this.ClipDiagonalBound(D+T,T,D,B);for(let f=j;f<=V;f+=2){if(f===j||f<V&&P[f-1]>=P[f+1])q=P[f+1]-1;else q=P[f-1];U=q-(f-D)-R;let h=q;while(q>J&&U>X&&this.ElementsAreEqual(q,U))q--,U--;if(P[f]=q,N&&Math.abs(f-A)<=T){if(q<=K[f])if(Z[0]=q,Q[0]=U,h>=K[f]&&!0&&T<=1448)return this.WALKTRACE(A,z,H,M,D,j,V,R,K,P,q,$,Z,U,Y,Q,N,G);else return null}}if(T<=1447){let f=new Int32Array(H-z+2);f[0]=A-z+1,aG.Copy2(K,z,f,1,H-z+1),this.m_forwardHistory.push(f),f=new Int32Array(V-j+2),f[0]=D-j+1,aG.Copy2(P,j,f,1,V-j+1),this.m_reverseHistory.push(f)}}return this.WALKTRACE(A,z,H,M,D,j,V,R,K,P,q,$,Z,U,Y,Q,N,G)}PrettifyChanges(J){for(let $=0;$<J.length;$++){let X=J[$],Y=$<J.length-1?J[$+1].originalStart:this._originalElementsOrHash.length,Z=$<J.length-1?J[$+1].modifiedStart:this._modifiedElementsOrHash.length,Q=X.originalLength>0,G=X.modifiedLength>0;while(X.originalStart+X.originalLength<Y&&X.modifiedStart+X.modifiedLength<Z&&(!Q||this.OriginalElementsAreEqual(X.originalStart,X.originalStart+X.originalLength))&&(!G||this.ModifiedElementsAreEqual(X.modifiedStart,X.modifiedStart+X.modifiedLength))){let U=this.ElementsAreStrictEqual(X.originalStart,X.modifiedStart);if(this.ElementsAreStrictEqual(X.originalStart+X.originalLength,X.modifiedStart+X.modifiedLength)&&!U)break;X.originalStart++,X.modifiedStart++}let q=[null];if($<J.length-1&&this.ChangesOverlap(J[$],J[$+1],q)){J[$]=q[0],J.splice($+1,1),$--;continue}}for(let $=J.length-1;$>=0;$--){let X=J[$],Y=0,Z=0;if($>0){let H=J[$-1];Y=H.originalStart+H.originalLength,Z=H.modifiedStart+H.modifiedLength}let Q=X.originalLength>0,G=X.modifiedLength>0,q=0,U=this._boundaryScore(X.originalStart,X.originalLength,X.modifiedStart,X.modifiedLength);for(let H=1;;H++){let j=X.originalStart-H,V=X.modifiedStart-H;if(j<Y||V<Z)break;if(Q&&!this.OriginalElementsAreEqual(j,j+X.originalLength))break;if(G&&!this.ModifiedElementsAreEqual(V,V+X.modifiedLength))break;let B=(j===Y&&V===Z?5:0)+this._boundaryScore(j,X.originalLength,V,X.modifiedLength);if(B>U)U=B,q=H}X.originalStart-=q,X.modifiedStart-=q;let z=[null];if($>0&&this.ChangesOverlap(J[$-1],J[$],z)){J[$-1]=z[0],J.splice($,1),$++;continue}}if(this._hasStrings)for(let $=1,X=J.length;$<X;$++){let Y=J[$-1],Z=J[$],Q=Z.originalStart-Y.originalStart-Y.originalLength,G=Y.originalStart,q=Z.originalStart+Z.originalLength,U=q-G,z=Y.modifiedStart,H=Z.modifiedStart+Z.modifiedLength,j=H-z;if(Q<5&&U<20&&j<20){let V=this._findBetterContiguousSequence(G,U,z,j,Q);if(V){let[W,B]=V;if(W!==Y.originalStart+Y.originalLength||B!==Y.modifiedStart+Y.modifiedLength)Y.originalLength=W-Y.originalStart,Y.modifiedLength=B-Y.modifiedStart,Z.originalStart=W+Q,Z.modifiedStart=B+Q,Z.originalLength=q-Z.originalStart,Z.modifiedLength=H-Z.modifiedStart}}}return J}_findBetterContiguousSequence(J,$,X,Y,Z){if($<Z||Y<Z)return null;let Q=J+$-Z+1,G=X+Y-Z+1,q=0,U=0,z=0;for(let H=J;H<Q;H++)for(let j=X;j<G;j++){let V=this._contiguousSequenceScore(H,j,Z);if(V>0&&V>q)q=V,U=H,z=j}if(q>0)return[U,z];return null}_contiguousSequenceScore(J,$,X){let Y=0;for(let Z=0;Z<X;Z++){if(!this.ElementsAreEqual(J+Z,$+Z))return 0;Y+=this._originalStringElements[J+Z].length}return Y}_OriginalIsBoundary(J){if(J<=0||J>=this._originalElementsOrHash.length-1)return!0;return this._hasStrings&&/^\s*$/.test(this._originalStringElements[J])}_OriginalRegionIsBoundary(J,$){if(this._OriginalIsBoundary(J)||this._OriginalIsBoundary(J-1))return!0;if($>0){let X=J+$;if(this._OriginalIsBoundary(X-1)||this._OriginalIsBoundary(X))return!0}return!1}_ModifiedIsBoundary(J){if(J<=0||J>=this._modifiedElementsOrHash.length-1)return!0;return this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[J])}_ModifiedRegionIsBoundary(J,$){if(this._ModifiedIsBoundary(J)||this._ModifiedIsBoundary(J-1))return!0;if($>0){let X=J+$;if(this._ModifiedIsBoundary(X-1)||this._ModifiedIsBoundary(X))return!0}return!1}_boundaryScore(J,$,X,Y){let Z=this._OriginalRegionIsBoundary(J,$)?1:0,Q=this._ModifiedRegionIsBoundary(X,Y)?1:0;return Z+Q}ConcatenateChanges(J,$){let X=[];if(J.length===0||$.length===0)return $.length>0?$:J;else if(this.ChangesOverlap(J[J.length-1],$[0],X)){let Y=Array(J.length+$.length-1);return aG.Copy(J,0,Y,0,J.length-1),Y[J.length-1]=X[0],aG.Copy($,1,Y,J.length,$.length-1),Y}else{let Y=Array(J.length+$.length);return aG.Copy(J,0,Y,0,J.length),aG.Copy($,0,Y,J.length,$.length),Y}}ChangesOverlap(J,$,X){if(sG.Assert(J.originalStart<=$.originalStart,"Left change is not less than or equal to right change"),sG.Assert(J.modifiedStart<=$.modifiedStart,"Left change is not less than or equal to right change"),J.originalStart+J.originalLength>=$.originalStart||J.modifiedStart+J.modifiedLength>=$.modifiedStart){let{originalStart:Y,originalLength:Z,modifiedStart:Q,modifiedLength:G}=J;if(J.originalStart+J.originalLength>=$.originalStart)Z=$.originalStart+$.originalLength-J.originalStart;if(J.modifiedStart+J.modifiedLength>=$.modifiedStart)G=$.modifiedStart+$.modifiedLength-J.modifiedStart;return X[0]=new PX(Y,Z,Q,G),!0}else return X[0]=null,!1}ClipDiagonalBound(J,$,X,Y){if(J>=0&&J<Y)return J;let Z=X,Q=Y-X-1,G=$%2===0;if(J<0){let q=Z%2===0;return G===q?0:1}else{let q=Q%2===0;return G===q?Y-1:Y-2}}}var wP=w(()=>{wQ()});function rG(J){if(J<0)return 0;if(J>255)return 255;return J|0}function iG(J){if(J<0)return 0;if(J>4294967295)return 4294967295;return J|0}class Nw{constructor(J){this.values=J,this.prefixSum=new Uint32Array(J.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(J,$){J=iG(J);let X=this.values,Y=this.prefixSum,Z=$.length;if(Z===0)return!1;if(this.values=new Uint32Array(X.length+Z),this.values.set(X.subarray(0,J),0),this.values.set(X.subarray(J),J+Z),this.values.set($,J),J-1<this.prefixSumValidIndex[0])this.prefixSumValidIndex[0]=J-1;if(this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0)this.prefixSum.set(Y.subarray(0,this.prefixSumValidIndex[0]+1));return!0}setValue(J,$){if(J=iG(J),$=iG($),this.values[J]===$)return!1;if(this.values[J]=$,J-1<this.prefixSumValidIndex[0])this.prefixSumValidIndex[0]=J-1;return!0}removeValues(J,$){J=iG(J),$=iG($);let X=this.values,Y=this.prefixSum;if(J>=X.length)return!1;let Z=X.length-J;if($>=Z)$=Z;if($===0)return!1;if(this.values=new Uint32Array(X.length-$),this.values.set(X.subarray(0,J),0),this.values.set(X.subarray(J+$),J),this.prefixSum=new Uint32Array(this.values.length),J-1<this.prefixSumValidIndex[0])this.prefixSumValidIndex[0]=J-1;if(this.prefixSumValidIndex[0]>=0)this.prefixSum.set(Y.subarray(0,this.prefixSumValidIndex[0]+1));return!0}getTotalSum(){if(this.values.length===0)return 0;return this._getPrefixSum(this.values.length-1)}getPrefixSum(J){if(J<0)return 0;return J=iG(J),this._getPrefixSum(J)}_getPrefixSum(J){if(J<=this.prefixSumValidIndex[0])return this.prefixSum[J];let $=this.prefixSumValidIndex[0]+1;if($===0)this.prefixSum[0]=this.values[0],$++;if(J>=this.values.length)J=this.values.length-1;for(let X=$;X<=J;X++)this.prefixSum[X]=this.prefixSum[X-1]+this.values[X];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],J),this.prefixSum[J]}getIndexOf(J){J=Math.floor(J),this.getTotalSum();let $=0,X=this.values.length-1,Y=0,Z=0,Q=0;while($<=X)if(Y=$+(X-$)/2|0,Z=this.prefixSum[Y],Q=Z-this.values[Y],J<Q)X=Y-1;else if(J>=Z)$=Y+1;else break;return new ww(Y,J-Q)}}class Tw{constructor(J){this._values=J,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(J){if(this._ensureValid(),J===0)return 0;return this._prefixSum[J-1]}getIndexOf(J){this._ensureValid();let $=this._indexBySum[J],X=$>0?this._prefixSum[$-1]:0;return new ww($,J-X)}removeValues(J,$){this._values.splice(J,$),this._invalidate(J)}insertValues(J,$){this._values=zQ(this._values,J,$),this._invalidate(J)}_invalidate(J){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,J-1)}_ensureValid(){if(this._isValid)return;for(let J=this._validEndIndex+1,$=this._values.length;J<$;J++){let X=this._values[J],Y=J>0?this._prefixSum[J-1]:0;this._prefixSum[J]=Y+X;for(let Z=0;Z<X;Z++)this._indexBySum[Y+Z]=J}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}setValue(J,$){if(this._values[J]===$)return;this._values[J]=$,this._invalidate(J)}}class ww{constructor(J,$){this.index=J,this.remainder=$,this._prefixSumIndexOfResultBrand=void 0,this.index=J,this.remainder=$}}var Lw=w(()=>{V1()});class kw{constructor(J,$,X,Y){this._uri=J,this._lines=$,this._eol=X,this._versionId=Y,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){if(this._cachedTextValue===null)this._cachedTextValue=this._lines.join(this._eol);return this._cachedTextValue}onEvents(J){if(J.eol&&J.eol!==this._eol)this._eol=J.eol,this._lineStarts=null;let $=J.changes;for(let X of $)this._acceptDeleteRange(X.range),this._acceptInsertText(new g(X.range.startLineNumber,X.range.startColumn),X.text);this._versionId=J.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){let J=this._eol.length,$=this._lines.length,X=new Uint32Array($);for(let Y=0;Y<$;Y++)X[Y]=this._lines[Y].length+J;this._lineStarts=new Nw(X)}}_setLineText(J,$){if(this._lines[J]=$,this._lineStarts)this._lineStarts.setValue(J,this._lines[J].length+this._eol.length)}_acceptDeleteRange(J){if(J.startLineNumber===J.endLineNumber){if(J.startColumn===J.endColumn)return;this._setLineText(J.startLineNumber-1,this._lines[J.startLineNumber-1].substring(0,J.startColumn-1)+this._lines[J.startLineNumber-1].substring(J.endColumn-1));return}if(this._setLineText(J.startLineNumber-1,this._lines[J.startLineNumber-1].substring(0,J.startColumn-1)+this._lines[J.endLineNumber-1].substring(J.endColumn-1)),this._lines.splice(J.startLineNumber,J.endLineNumber-J.startLineNumber),this._lineStarts)this._lineStarts.removeValues(J.startLineNumber,J.endLineNumber-J.startLineNumber)}_acceptInsertText(J,$){if($.length===0)return;let X=a9($);if(X.length===1){this._setLineText(J.lineNumber-1,this._lines[J.lineNumber-1].substring(0,J.column-1)+X[0]+this._lines[J.lineNumber-1].substring(J.column-1));return}X[X.length-1]+=this._lines[J.lineNumber-1].substring(J.column-1),this._setLineText(J.lineNumber-1,this._lines[J.lineNumber-1].substring(0,J.column-1)+X[0]);let Y=new Uint32Array(X.length-1);for(let Z=1;Z<X.length;Z++)this._lines.splice(J.lineNumber+Z-1,0,X[Z]),Y[Z-1]=X[Z].length+this._eol.length;if(this._lineStarts)this._lineStarts.insertValues(J.lineNumber,Y)}}var Om=w(()=>{X1();Lw()});class aY{constructor(J){let $=rG(J);this._defaultValue=$,this._asciiMap=aY._createAsciiMap($),this._map=new Map}static _createAsciiMap(J){let $=new Uint8Array(256);return $.fill(J),$}set(J,$){let X=rG($);if(J>=0&&J<256)this._asciiMap[J]=X;else this._map.set(J,X)}get(J){if(J>=0&&J<256)return this._asciiMap[J];else return this._map.get(J)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class sj{constructor(){this._actual=new aY(0)}add(J){this._actual.set(J,1)}has(J){return this._actual.get(J)===1}clear(){return this._actual.clear()}}var zU=()=>{};class _m{constructor(J,$,X){let Y=new Uint8Array(J*$);for(let Z=0,Q=J*$;Z<Q;Z++)Y[Z]=X;this._data=Y,this.rows=J,this.cols=$}get(J,$){return this._data[J*this.cols+$]}set(J,$,X){this._data[J*this.cols+$]=X}}class Nm{constructor(J){let $=0,X=0;for(let Z=0,Q=J.length;Z<Q;Z++){let[G,q,U]=J[Z];if(q>$)$=q;if(G>X)X=G;if(U>X)X=U}$++,X++;let Y=new _m(X,$,0);for(let Z=0,Q=J.length;Z<Q;Z++){let[G,q,U]=J[Z];Y.set(G,q,U)}this._states=Y,this._maxCharCode=$}nextState(J,$){if($<0||$>=this._maxCharCode)return 0;return this._states.get(J,$)}}function LY0(){if(Ew===null)Ew=new Nm([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]]);return Ew}function kY0(){if(aj===null){aj=new aY(0);let J=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let X=0;X<J.length;X++)aj.set(J.charCodeAt(X),1);let $=".,;:";for(let X=0;X<$.length;X++)aj.set($.charCodeAt(X),2)}return aj}class LP{static _createLink(J,$,X,Y,Z){let Q=Z-1;do{let G=$.charCodeAt(Q);if(J.get(G)!==2)break;Q--}while(Q>Y);if(Y>0){let G=$.charCodeAt(Y-1),q=$.charCodeAt(Q);if(G===40&&q===41||G===91&&q===93||G===123&&q===125)Q--}return{range:{startLineNumber:X,startColumn:Y+1,endLineNumber:X,endColumn:Q+2},url:$.substring(Y,Q+1)}}static computeLinks(J,$=LY0()){let X=kY0(),Y=[];for(let Z=1,Q=J.getLineCount();Z<=Q;Z++){let G=J.getLineContent(Z),q=G.length,U=0,z=0,H=0,j=1,V=!1,W=!1,B=!1,K=!1;while(U<q){let P=!1,A=G.charCodeAt(U);if(j===13){let D;switch(A){case 40:V=!0,D=0;break;case 41:D=V?0:1;break;case 91:B=!0,W=!0,D=0;break;case 93:B=!1,D=W?0:1;break;case 123:K=!0,D=0;break;case 125:D=K?0:1;break;case 39:case 34:case 96:if(H===A)D=1;else if(H===39||H===34||H===96)D=0;else D=1;break;case 42:D=H===42?1:0;break;case 124:D=H===124?1:0;break;case 32:D=B?0:1;break;default:D=X.get(A)}if(D===1)Y.push(LP._createLink(X,G,Z,z,U)),P=!0}else if(j===12){let D;if(A===91)W=!0,D=0;else D=X.get(A);if(D===1)P=!0;else j=13}else if(j=$.nextState(j,A),j===0)P=!0;if(P)j=1,V=!1,W=!1,K=!1,z=U+1,H=A;U++}if(j===13)Y.push(LP._createLink(X,G,Z,z,q))}return Y}}function Tm(J){if(!J||typeof J.getLineCount!=="function"||typeof J.getLineContent!=="function")return[];return LP.computeLinks(J)}var Ew=null,aj=null;var wm=w(()=>{zU()});class rj{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(J,$,X,Y,Z){if(J&&$){let Q=this.doNavigateValueSet($,Z);if(Q)return{range:J,value:Q}}if(X&&Y){let Q=this.doNavigateValueSet(Y,Z);if(Q)return{range:X,value:Q}}return null}doNavigateValueSet(J,$){let X=this.numberReplace(J,$);if(X!==null)return X;return this.textReplace(J,$)}numberReplace(J,$){let X=Math.pow(10,J.length-(J.lastIndexOf(".")+1)),Y=Number(J),Z=parseFloat(J);if(!isNaN(Y)&&!isNaN(Z)&&Y===Z)if(Y===0&&!$)return null;else return Y=Math.floor(Y*X),Y+=$?X:-X,String(Y/X);return null}textReplace(J,$){return this.valueSetsReplace(this._defaultValueSet,J,$)}valueSetsReplace(J,$,X){let Y=null;for(let Z=0,Q=J.length;Y===null&&Z<Q;Z++)Y=this.valueSetReplace(J[Z],$,X);return Y}valueSetReplace(J,$,X){let Y=J.indexOf($);if(Y>=0){if(Y+=X?1:-1,Y<0)Y=J.length-1;else Y%=J.length;return J[Y]}return null}}var Lm=w(()=>{rj.INSTANCE=new rj});function EY0(J){let $={};return(X)=>{if(!$.hasOwnProperty(X))$[X]=J(X);return $[X]}}var km,DX;var ij=w(()=>{zU();km=class km extends aY{constructor(J){super(0);for(let $=0,X=J.length;$<X;$++)this.set(J.charCodeAt($),2);this.set(32,1),this.set(9,1)}};DX=EY0((J)=>new km(J))});class oG{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(J){if(this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,J.tabSize|0),J.indentSize==="tabSize")this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0;else this.indentSize=Math.max(1,J.indentSize|0),this._indentSizeIsTabSize=!1;this.insertSpaces=Boolean(J.insertSpaces),this.defaultEOL=J.defaultEOL|0,this.trimAutoWhitespace=Boolean(J.trimAutoWhitespace),this.bracketPairColorizationOptions=J.bracketPairColorizationOptions}equals(J){return this.tabSize===J.tabSize&&this._indentSizeIsTabSize===J._indentSizeIsTabSize&&this.indentSize===J.indentSize&&this.insertSpaces===J.insertSpaces&&this.defaultEOL===J.defaultEOL&&this.trimAutoWhitespace===J.trimAutoWhitespace&&i5(this.bracketPairColorizationOptions,J.bracketPairColorizationOptions)}createChangeEvent(J){return{tabSize:this.tabSize!==J.tabSize,indentSize:this.indentSize!==J.indentSize,insertSpaces:this.insertSpaces!==J.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==J.trimAutoWhitespace}}}class rY{constructor(J,$){this._findMatchBrand=void 0,this.range=J,this.matches=$}}function Em(J){return J&&typeof J.read==="function"}class nj{constructor(J,$,X,Y,Z,Q){this.identifier=J,this.range=$,this.text=X,this.forceMoveMarkers=Y,this.isAutoWhitespaceEdit=Z,this._isTracked=Q}}class Iw{constructor(J,$,X){this.regex=J,this.wordSeparators=$,this.simpleSearch=X}}class yw{constructor(J,$,X){this.reverseEdits=J,this.changes=$,this.trimAutoWhitespaceLineNumbers=X}}function Im(J){return!J.isTooLargeForSyncing()&&!J.isForSimpleWidget}var HU,S4,_J,nG;var O9=w(()=>{n7();(function(J){J[J.Left=1]="Left",J[J.Center=2]="Center",J[J.Right=4]="Right",J[J.Full=7]="Full"})(HU||(HU={}));(function(J){J[J.Left=1]="Left",J[J.Center=2]="Center",J[J.Right=3]="Right"})(S4||(S4={}));(function(J){J[J.Inline=1]="Inline",J[J.Gutter=2]="Gutter"})(_J||(_J={}));(function(J){J[J.Both=0]="Both",J[J.Right=1]="Right",J[J.Left=2]="Left",J[J.None=3]="None"})(nG||(nG={}))});class bQ{constructor(J,$,X,Y){this.searchString=J,this.isRegex=$,this.matchCase=X,this.wordSeparators=Y}parseSearchRequest(){if(this.searchString==="")return null;let J;if(this.isRegex)J=xY0(this.searchString);else J=this.searchString.indexOf(`
`)>=0;let $=null;try{$=DA(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:J,global:!0,unicode:!0})}catch(Y){return null}if(!$)return null;let X=!this.isRegex&&!J;if(X&&this.searchString.toLowerCase()!==this.searchString.toUpperCase())X=this.matchCase;return new Iw($,this.wordSeparators?DX(this.wordSeparators):null,X?this.searchString:null)}}function xY0(J){if(!J||J.length===0)return!1;for(let $=0,X=J.length;$<X;$++){let Y=J.charCodeAt($);if(Y===10)return!0;if(Y===92){if($++,$>=X)break;let Z=J.charCodeAt($);if(Z===110||Z===114||Z===87)return!0}}return!1}function xQ(J,$,X){if(!X)return new rY(J,null);let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++)Y[Z]=$[Z];return new rY(J,Y)}class xw{constructor(J){let $=[],X=0;for(let Y=0,Z=J.length;Y<Z;Y++)if(J.charCodeAt(Y)===10)$[X++]=Y;this._lineFeedsOffsets=$}findLineFeedCountBeforeOffset(J){let $=this._lineFeedsOffsets,X=0,Y=$.length-1;if(Y===-1)return 0;if(J<=$[0])return 0;while(X<Y){let Z=X+((Y-X)/2>>0);if($[Z]>=J)Y=Z-1;else if($[Z+1]>=J)X=Z,Y=Z;else X=Z+1}return X+1}}class jU{static findMatches(J,$,X,Y,Z){let Q=$.parseSearchRequest();if(!Q)return[];if(Q.regex.multiline)return this._doFindMatchesMultiline(J,X,new iY(Q.wordSeparators,Q.regex),Y,Z);return this._doFindMatchesLineByLine(J,X,Q,Y,Z)}static _getMultilineMatchRange(J,$,X,Y,Z,Q){let G,q=0;if(Y)q=Y.findLineFeedCountBeforeOffset(Z),G=$+Z+q;else G=$+Z;let U;if(Y){let V=Y.findLineFeedCountBeforeOffset(Z+Q.length)-q;U=G+Q.length+V}else U=G+Q.length;let z=J.getPositionAt(G),H=J.getPositionAt(U);return new k(z.lineNumber,z.column,H.lineNumber,H.column)}static _doFindMatchesMultiline(J,$,X,Y,Z){let Q=J.getOffsetAt($.getStartPosition()),G=J.getValueInRange($,1),q=J.getEOL()===`\r
`?new xw(G):null,U=[],z=0,H;X.reset(0);while(H=X.next(G))if(U[z++]=xQ(this._getMultilineMatchRange(J,Q,G,q,H.index,H[0]),H,Y),z>=Z)return U;return U}static _doFindMatchesLineByLine(J,$,X,Y,Z){let Q=[],G=0;if($.startLineNumber===$.endLineNumber){let U=J.getLineContent($.startLineNumber).substring($.startColumn-1,$.endColumn-1);return G=this._findMatchesInLine(X,U,$.startLineNumber,$.startColumn-1,G,Q,Y,Z),Q}let q=J.getLineContent($.startLineNumber).substring($.startColumn-1);G=this._findMatchesInLine(X,q,$.startLineNumber,$.startColumn-1,G,Q,Y,Z);for(let U=$.startLineNumber+1;U<$.endLineNumber&&G<Z;U++)G=this._findMatchesInLine(X,J.getLineContent(U),U,0,G,Q,Y,Z);if(G<Z){let U=J.getLineContent($.endLineNumber).substring(0,$.endColumn-1);G=this._findMatchesInLine(X,U,$.endLineNumber,0,G,Q,Y,Z)}return Q}static _findMatchesInLine(J,$,X,Y,Z,Q,G,q){let U=J.wordSeparators;if(!G&&J.simpleSearch){let j=J.simpleSearch,V=j.length,W=$.length,B=-V;while((B=$.indexOf(j,B+V))!==-1)if(!U||kP(U,$,W,B,V)){if(Q[Z++]=new rY(new k(X,B+1+Y,X,B+1+V+Y),null),Z>=q)return Z}return Z}let z=new iY(J.wordSeparators,J.regex),H;z.reset(0);do if(H=z.next($),H){if(Q[Z++]=xQ(new k(X,H.index+1+Y,X,H.index+1+H[0].length+Y),H,G),Z>=q)return Z}while(H);return Z}static findNextMatch(J,$,X,Y){let Z=$.parseSearchRequest();if(!Z)return null;let Q=new iY(Z.wordSeparators,Z.regex);if(Z.regex.multiline)return this._doFindNextMatchMultiline(J,X,Q,Y);return this._doFindNextMatchLineByLine(J,X,Q,Y)}static _doFindNextMatchMultiline(J,$,X,Y){let Z=new g($.lineNumber,1),Q=J.getOffsetAt(Z),G=J.getLineCount(),q=J.getValueInRange(new k(Z.lineNumber,Z.column,G,J.getLineMaxColumn(G)),1),U=J.getEOL()===`\r
`?new xw(q):null;X.reset($.column-1);let z=X.next(q);if(z)return xQ(this._getMultilineMatchRange(J,Q,q,U,z.index,z[0]),z,Y);if($.lineNumber!==1||$.column!==1)return this._doFindNextMatchMultiline(J,new g(1,1),X,Y);return null}static _doFindNextMatchLineByLine(J,$,X,Y){let Z=J.getLineCount(),Q=$.lineNumber,G=J.getLineContent(Q),q=this._findFirstMatchInLine(X,G,Q,$.column,Y);if(q)return q;for(let U=1;U<=Z;U++){let z=(Q+U-1)%Z,H=J.getLineContent(z+1),j=this._findFirstMatchInLine(X,H,z+1,1,Y);if(j)return j}return null}static _findFirstMatchInLine(J,$,X,Y,Z){J.reset(Y-1);let Q=J.next($);if(Q)return xQ(new k(X,Q.index+1,X,Q.index+1+Q[0].length),Q,Z);return null}static findPreviousMatch(J,$,X,Y){let Z=$.parseSearchRequest();if(!Z)return null;let Q=new iY(Z.wordSeparators,Z.regex);if(Z.regex.multiline)return this._doFindPreviousMatchMultiline(J,X,Q,Y);return this._doFindPreviousMatchLineByLine(J,X,Q,Y)}static _doFindPreviousMatchMultiline(J,$,X,Y){let Z=this._doFindMatchesMultiline(J,new k(1,1,$.lineNumber,$.column),X,Y,10*yY0);if(Z.length>0)return Z[Z.length-1];let Q=J.getLineCount();if($.lineNumber!==Q||$.column!==J.getLineMaxColumn(Q))return this._doFindPreviousMatchMultiline(J,new g(Q,J.getLineMaxColumn(Q)),X,Y);return null}static _doFindPreviousMatchLineByLine(J,$,X,Y){let Z=J.getLineCount(),Q=$.lineNumber,G=J.getLineContent(Q).substring(0,$.column-1),q=this._findLastMatchInLine(X,G,Q,Y);if(q)return q;for(let U=1;U<=Z;U++){let z=(Z+Q-U-1)%Z,H=J.getLineContent(z+1),j=this._findLastMatchInLine(X,H,z+1,Y);if(j)return j}return null}static _findLastMatchInLine(J,$,X,Y){let Z=null,Q;J.reset(0);while(Q=J.next($))Z=xQ(new k(X,Q.index+1,X,Q.index+1+Q[0].length),Q,Y);return Z}}function bY0(J,$,X,Y,Z){if(Y===0)return!0;let Q=$.charCodeAt(Y-1);if(J.get(Q)!==0)return!0;if(Q===13||Q===10)return!0;if(Z>0){let G=$.charCodeAt(Y);if(J.get(G)!==0)return!0}return!1}function SY0(J,$,X,Y,Z){if(Y+Z===X)return!0;let Q=$.charCodeAt(Y+Z);if(J.get(Q)!==0)return!0;if(Q===13||Q===10)return!0;if(Z>0){let G=$.charCodeAt(Y+Z-1);if(J.get(G)!==0)return!0}return!1}function kP(J,$,X,Y,Z){return bY0(J,$,X,Y,Z)&&SY0(J,$,X,Y,Z)}class iY{constructor(J,$){this._wordSeparators=J,this._searchRegex=$,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(J){this._searchRegex.lastIndex=J,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(J){let $=J.length,X;do{if(this._prevMatchStartIndex+this._prevMatchLength===$)return null;if(X=this._searchRegex.exec(J),!X)return null;let Y=X.index,Z=X[0].length;if(Y===this._prevMatchStartIndex&&Z===this._prevMatchLength){if(Z===0){if(cq(J,$,this._searchRegex.lastIndex)>65535)this._searchRegex.lastIndex+=2;else this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=Y,this._prevMatchLength=Z,!this._wordSeparators||kP(this._wordSeparators,J,$,Y,Z))return X}while(X);return null}}var yY0=999;var EP=w(()=>{X1();ij();i0();O9()});class Sw{static computeUnicodeHighlights(J,$,X){let Y=X?X.startLineNumber:1,Z=X?X.endLineNumber:J.getLineCount(),Q=new bw($),G=Q.getCandidateCodePoints(),q;if(G==="allNonBasicAscii")q=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g");else q=new RegExp(`${CY0(Array.from(G))}`,"g");let U=new iY(null,q),z=[],H=!1,j,V=0,W=0,B=0;J:for(let K=Y,P=Z;K<=P;K++){let A=J.getLineContent(K),D=A.length;U.reset(0);do if(j=U.next(A),j){let M=j.index,R=j.index+j[0].length;if(M>0){let S=A.charCodeAt(M-1);if(P6(S))M--}if(R+1<D){let S=A.charCodeAt(R-1);if(P6(S))R++}let O=A.substring(M,R),N=VQ(M+1,tH,A,0);if(N&&N.endColumn<=M+1)N=null;let T=Q.shouldHighlightNonBasicASCII(O,N?N.word:null);if(T!==0){if(T===3)V++;else if(T===2)W++;else if(T===1)B++;else nq(T);let S=1000;if(z.length>=S){H=!0;break J}z.push(new k(K,M+1,K,R+1))}}while(j)}return{ranges:z,hasMore:H,ambiguousCharacterCount:V,invisibleCharacterCount:W,nonBasicAsciiCharacterCount:B}}static computeUnicodeHighlightReason(J,$){let X=new bw($);switch(X.shouldHighlightNonBasicASCII(J,null)){case 0:return null;case 2:return{kind:1};case 3:{let Z=J.codePointAt(0),Q=X.ambiguousCharacters.getPrimaryConfusable(Z),G=bY.getLocales().filter((q)=>!bY.getInstance(new Set([...$.allowedLocales,q])).isAmbiguous(Z));return{kind:0,confusableWith:String.fromCodePoint(Q),notAmbiguousInLocales:G}}case 1:return{kind:2}}}}function CY0(J,$){return`[${b7(J.map((Y)=>String.fromCodePoint(Y)).join(""))}]`}class bw{constructor(J){this.options=J,this.allowedCodePoints=new Set(J.allowedCodePoints),this.ambiguousCharacters=bY.getInstance(new Set(J.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";let J=new Set;if(this.options.invisibleCharacters){for(let $ of IY.codePoints)if(!ym(String.fromCodePoint($)))J.add($)}if(this.options.ambiguousCharacters)for(let $ of this.ambiguousCharacters.getConfusableCodePoints())J.add($);for(let $ of this.allowedCodePoints)J.delete($);return J}shouldHighlightNonBasicASCII(J,$){let X=J.codePointAt(0);if(this.allowedCodePoints.has(X))return 0;if(this.options.nonBasicASCII)return 1;let Y=!1,Z=!1;if($)for(let Q of $){let G=Q.codePointAt(0),q=dq(Q);if(Y=Y||q,!q&&!this.ambiguousCharacters.isAmbiguous(G)&&!IY.isInvisibleCharacter(G))Z=!0}if(!Y&&Z)return 0;if(this.options.invisibleCharacters){if(!ym(J)&&IY.isInvisibleCharacter(X))return 2}if(this.options.ambiguousCharacters){if(this.ambiguousCharacters.isAmbiguous(X))return 3}return 0}}function ym(J){return J===" "||J===`
`||J==="\t"}var xm=w(()=>{i0();EP();X1();WX();xq()});class tG{constructor(J,$,X){this.changes=J,this.moves=$,this.hitTimeout=X}}class oj{constructor(J,$){this.lineRangeMapping=J,this.changes=$}}class n0{static addRange(J,$){let X=0;while(X<$.length&&$[X].endExclusive<J.start)X++;let Y=X;while(Y<$.length&&$[Y].start<=J.endExclusive)Y++;if(X===Y)$.splice(X,0,J);else{let Z=Math.min(J.start,$[X].start),Q=Math.max(J.endExclusive,$[Y-1].endExclusive);$.splice(X,Y-X,new n0(Z,Q))}}static ofLength(J){return new n0(0,J)}static ofStartAndLength(J,$){return new n0(J,J+$)}constructor(J,$){if(this.start=J,this.endExclusive=$,J>$)throw new u1(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(J){return new n0(this.start+J,this.endExclusive+J)}deltaStart(J){return new n0(this.start+J,this.endExclusive)}deltaEnd(J){return new n0(this.start,this.endExclusive+J)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(J){return this.start<=J&&J<this.endExclusive}join(J){return new n0(Math.min(this.start,J.start),Math.max(this.endExclusive,J.endExclusive))}intersect(J){let $=Math.max(this.start,J.start),X=Math.min(this.endExclusive,J.endExclusive);if($<=X)return new n0($,X);return}intersects(J){let $=Math.max(this.start,J.start),X=Math.min(this.endExclusive,J.endExclusive);return $<X}isBefore(J){return this.endExclusive<=J.start}isAfter(J){return this.start>=J.endExclusive}slice(J){return J.slice(this.start,this.endExclusive)}clip(J){if(this.isEmpty)throw new u1(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,J))}clipCyclic(J){if(this.isEmpty)throw new u1(`Invalid clipping range: ${this.toString()}`);if(J<this.start)return this.endExclusive-(this.start-J)%this.length;if(J>=this.endExclusive)return this.start+(J-this.start)%this.length;return J}forEach(J){for(let $=this.start;$<this.endExclusive;$++)J($)}}class IP{constructor(){this._sortedRanges=[]}addRange(J){let $=0;while($<this._sortedRanges.length&&this._sortedRanges[$].endExclusive<J.start)$++;let X=$;while(X<this._sortedRanges.length&&this._sortedRanges[X].start<=J.endExclusive)X++;if($===X)this._sortedRanges.splice($,0,J);else{let Y=Math.min(J.start,this._sortedRanges[$].start),Z=Math.max(J.endExclusive,this._sortedRanges[X-1].endExclusive);this._sortedRanges.splice($,X-$,new n0(Y,Z))}}toString(){return this._sortedRanges.map((J)=>J.toString()).join(", ")}intersectsStrict(J){let $=0;while($<this._sortedRanges.length&&this._sortedRanges[$].endExclusive<=J.start)$++;return $<this._sortedRanges.length&&this._sortedRanges[$].start<J.endExclusive}intersectWithRange(J){let $=new IP;for(let X of this._sortedRanges){let Y=X.intersect(J);if(Y)$.addRange(Y)}return $}intersectWithRangeLength(J){return this.intersectWithRange(J).length}get length(){return this._sortedRanges.reduce((J,$)=>J+$.length,0)}}var C4=w(()=>{O1()});function eG(J,$,X){let Y=vY0(J,$);if(Y===-1)return;return J[Y]}function vY0(J,$,X=J.length-1){for(let Y=X;Y>=0;Y--){let Z=J[Y];if($(Z))return Y}return-1}function nY(J,$){let X=J3(J,$);return X===-1?void 0:J[X]}function J3(J,$,X=0,Y=J.length){let Z=X,Q=Y;while(Z<Q){let G=Math.floor((Z+Q)/2);if($(J[G]))Z=G+1;else Q=G}return Z-1}function bm(J,$){let X=VU(J,$);return X===J.length?void 0:J[X]}function VU(J,$,X=0,Y=J.length){let Z=X,Q=Y;while(Z<Q){let G=Math.floor((Z+Q)/2);if($(J[G]))Q=G;else Z=G+1}return Z}class WU{constructor(J){this._array=J,this._findLastMonotonousLastIdx=0}findLastMonotonous(J){if(WU.assertInvariants){if(this._prevFindLastPredicate){for(let X of this._array)if(this._prevFindLastPredicate(X)&&!J(X))throw Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=J}let $=J3(this._array,J,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=$+1,$===-1?void 0:this._array[$]}}function Cw(J,$){if(J.length===0)return;let X=J[0];for(let Y=1;Y<J.length;Y++){let Z=J[Y];if($(Z,X)>0)X=Z}return X}function Sm(J,$){if(J.length===0)return;let X=J[0];for(let Y=1;Y<J.length;Y++){let Z=J[Y];if($(Z,X)>=0)X=Z}return X}function Cm(J,$){return Cw(J,(X,Y)=>-$(X,Y))}function vm(J,$){if(J.length===0)return-1;let X=0;for(let Y=1;Y<J.length;Y++){let Z=J[Y];if($(Z,J[X])>0)X=Y}return X}var W$=w(()=>{WU.assertInvariants=!1});class f0{static fromRangeInclusive(J){return new f0(J.startLineNumber,J.endLineNumber+1)}static joinMany(J){if(J.length===0)return[];let $=new _9(J[0].slice());for(let X=1;X<J.length;X++)$=$.getUnion(new _9(J[X].slice()));return $.ranges}static ofLength(J,$){return new f0(J,J+$)}static deserialize(J){return new f0(J[0],J[1])}constructor(J,$){if(J>$)throw new u1(`startLineNumber ${J} cannot be after endLineNumberExclusive ${$}`);this.startLineNumber=J,this.endLineNumberExclusive=$}contains(J){return this.startLineNumber<=J&&J<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(J){return new f0(this.startLineNumber+J,this.endLineNumberExclusive+J)}deltaLength(J){return new f0(this.startLineNumber,this.endLineNumberExclusive+J)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(J){return new f0(Math.min(this.startLineNumber,J.startLineNumber),Math.max(this.endLineNumberExclusive,J.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(J){let $=Math.max(this.startLineNumber,J.startLineNumber),X=Math.min(this.endLineNumberExclusive,J.endLineNumberExclusive);if($<=X)return new f0($,X);return}intersectsStrict(J){return this.startLineNumber<J.endLineNumberExclusive&&J.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(J){return this.startLineNumber<=J.endLineNumberExclusive&&J.startLineNumber<=this.endLineNumberExclusive}equals(J){return this.startLineNumber===J.startLineNumber&&this.endLineNumberExclusive===J.endLineNumberExclusive}toInclusiveRange(){if(this.isEmpty)return null;return new k(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new k(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(J){let $=[];for(let X=this.startLineNumber;X<this.endLineNumberExclusive;X++)$.push(J(X));return $}forEach(J){for(let $=this.startLineNumber;$<this.endLineNumberExclusive;$++)J($)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(J){return this.startLineNumber<=J&&J<this.endLineNumberExclusive}toOffsetRange(){return new n0(this.startLineNumber-1,this.endLineNumberExclusive-1)}}class _9{constructor(J=[]){this._normalizedRanges=J}get ranges(){return this._normalizedRanges}addRange(J){if(J.length===0)return;let $=VU(this._normalizedRanges,(Y)=>Y.endLineNumberExclusive>=J.startLineNumber),X=J3(this._normalizedRanges,(Y)=>Y.startLineNumber<=J.endLineNumberExclusive)+1;if($===X)this._normalizedRanges.splice($,0,J);else if($===X-1){let Y=this._normalizedRanges[$];this._normalizedRanges[$]=Y.join(J)}else{let Y=this._normalizedRanges[$].join(this._normalizedRanges[X-1]).join(J);this._normalizedRanges.splice($,X-$,Y)}}contains(J){let $=nY(this._normalizedRanges,(X)=>X.startLineNumber<=J);return!!$&&$.endLineNumberExclusive>J}intersects(J){let $=nY(this._normalizedRanges,(X)=>X.startLineNumber<J.endLineNumberExclusive);return!!$&&$.endLineNumberExclusive>J.startLineNumber}getUnion(J){if(this._normalizedRanges.length===0)return J;if(J._normalizedRanges.length===0)return this;let $=[],X=0,Y=0,Z=null;while(X<this._normalizedRanges.length||Y<J._normalizedRanges.length){let Q=null;if(X<this._normalizedRanges.length&&Y<J._normalizedRanges.length){let G=this._normalizedRanges[X],q=J._normalizedRanges[Y];if(G.startLineNumber<q.startLineNumber)Q=G,X++;else Q=q,Y++}else if(X<this._normalizedRanges.length)Q=this._normalizedRanges[X],X++;else Q=J._normalizedRanges[Y],Y++;if(Z===null)Z=Q;else if(Z.endLineNumberExclusive>=Q.startLineNumber)Z=new f0(Z.startLineNumber,Math.max(Z.endLineNumberExclusive,Q.endLineNumberExclusive));else $.push(Z),Z=Q}if(Z!==null)$.push(Z);return new _9($)}subtractFrom(J){let $=VU(this._normalizedRanges,(Q)=>Q.endLineNumberExclusive>=J.startLineNumber),X=J3(this._normalizedRanges,(Q)=>Q.startLineNumber<=J.endLineNumberExclusive)+1;if($===X)return new _9([J]);let Y=[],Z=J.startLineNumber;for(let Q=$;Q<X;Q++){let G=this._normalizedRanges[Q];if(G.startLineNumber>Z)Y.push(new f0(Z,G.startLineNumber));Z=G.endLineNumberExclusive}if(Z<J.endLineNumberExclusive)Y.push(new f0(Z,J.endLineNumberExclusive));return new _9(Y)}toString(){return this._normalizedRanges.map((J)=>J.toString()).join(", ")}getIntersection(J){let $=[],X=0,Y=0;while(X<this._normalizedRanges.length&&Y<J._normalizedRanges.length){let Z=this._normalizedRanges[X],Q=J._normalizedRanges[Y],G=Z.intersect(Q);if(G&&!G.isEmpty)$.push(G);if(Z.endLineNumberExclusive<Q.endLineNumberExclusive)X++;else Y++}return new _9($)}getWithDelta(J){return new _9(this._normalizedRanges.map(($)=>$.delta(J)))}}var N9=w(()=>{O1();C4();i0();W$()});class w8{static inverse(J,$,X){let Y=[],Z=1,Q=1;for(let q of J){let U=new w8(new f0(Z,q.original.startLineNumber),new f0(Q,q.modified.startLineNumber));if(!U.modified.isEmpty)Y.push(U);Z=q.original.endLineNumberExclusive,Q=q.modified.endLineNumberExclusive}let G=new w8(new f0(Z,$+1),new f0(Q,X+1));if(!G.modified.isEmpty)Y.push(G);return Y}static clip(J,$,X){let Y=[];for(let Z of J){let Q=Z.original.intersect($),G=Z.modified.intersect(X);if(Q&&!Q.isEmpty&&G&&!G.isEmpty)Y.push(new w8(Q,G))}return Y}constructor(J,$){this.original=J,this.modified=$}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new w8(this.modified,this.original)}join(J){return new w8(this.original.join(J.original),this.modified.join(J.modified))}}class v4{constructor(J,$){this.originalRange=J,this.modifiedRange=$}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new v4(this.modifiedRange,this.originalRange)}}var $9;var SQ=w(()=>{N9();$9=class $9 extends w8{constructor(J,$,X){super(J,$);this.innerChanges=X}flip(){var J;return new $9(this.modified,this.original,(J=this.innerChanges)===null||J===void 0?void 0:J.map(($)=>$.flip()))}}});class gw{computeDiff(J,$,X){var Y;let Q=new pm(J,$,{maxComputationTime:X.maxComputationTimeMs,shouldIgnoreTrimWhitespace:X.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),G=[],q=null;for(let U of Q.changes){let z;if(U.originalEndLineNumber===0)z=new f0(U.originalStartLineNumber+1,U.originalStartLineNumber+1);else z=new f0(U.originalStartLineNumber,U.originalEndLineNumber+1);let H;if(U.modifiedEndLineNumber===0)H=new f0(U.modifiedStartLineNumber+1,U.modifiedStartLineNumber+1);else H=new f0(U.modifiedStartLineNumber,U.modifiedEndLineNumber+1);let j=new $9(z,H,(Y=U.charChanges)===null||Y===void 0?void 0:Y.map((V)=>new v4(new k(V.originalStartLineNumber,V.originalStartColumn,V.originalEndLineNumber,V.originalEndColumn),new k(V.modifiedStartLineNumber,V.modifiedStartColumn,V.modifiedEndLineNumber,V.modifiedEndColumn))));if(q){if(q.modified.endLineNumberExclusive===j.modified.startLineNumber||q.original.endLineNumberExclusive===j.original.startLineNumber)j=new $9(q.original.join(j.original),q.modified.join(j.modified),q.innerChanges&&j.innerChanges?q.innerChanges.concat(j.innerChanges):void 0),G.pop()}G.push(j),q=j}return VX(()=>{return uA(G,(U,z)=>z.original.startLineNumber-U.original.endLineNumberExclusive===z.modified.startLineNumber-U.modified.endLineNumberExclusive&&U.original.endLineNumberExclusive<z.original.startLineNumber&&U.modified.endLineNumberExclusive<z.modified.startLineNumber)}),new tG(G,[],Q.quitEarly)}}function fm(J,$,X,Y){return new V$(J,$,X).ComputeDiff(Y)}class vw{constructor(J){let $=[],X=[];for(let Y=0,Z=J.length;Y<Z;Y++)$[Y]=hw(J[Y],1),X[Y]=fw(J[Y],1);this.lines=J,this._startColumns=$,this._endColumns=X}getElements(){let J=[];for(let $=0,X=this.lines.length;$<X;$++)J[$]=this.lines[$].substring(this._startColumns[$]-1,this._endColumns[$]-1);return J}getStrictElement(J){return this.lines[J]}getStartLineNumber(J){return J+1}getEndLineNumber(J){return J+1}createCharSequence(J,$,X){let Y=[],Z=[],Q=[],G=0;for(let q=$;q<=X;q++){let U=this.lines[q],z=J?this._startColumns[q]:1,H=J?this._endColumns[q]:U.length+1;for(let j=z;j<H;j++)Y[G]=U.charCodeAt(j-1),Z[G]=q+1,Q[G]=j,G++;if(!J&&q<X)Y[G]=10,Z[G]=q+1,Q[G]=U.length+1,G++}return new gm(Y,Z,Q)}}class gm{constructor(J,$,X){this._charCodes=J,this._lineNumbers=$,this._columns=X}toString(){return"["+this._charCodes.map((J,$)=>(J===10?"\\n":String.fromCharCode(J))+`-(${this._lineNumbers[$]},${this._columns[$]})`).join(", ")+"]"}_assertIndex(J,$){if(J<0||J>=$.length)throw Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(J){if(J>0&&J===this._lineNumbers.length)return this.getEndLineNumber(J-1);return this._assertIndex(J,this._lineNumbers),this._lineNumbers[J]}getEndLineNumber(J){if(J===-1)return this.getStartLineNumber(J+1);if(this._assertIndex(J,this._lineNumbers),this._charCodes[J]===10)return this._lineNumbers[J]+1;return this._lineNumbers[J]}getStartColumn(J){if(J>0&&J===this._columns.length)return this.getEndColumn(J-1);return this._assertIndex(J,this._columns),this._columns[J]}getEndColumn(J){if(J===-1)return this.getStartColumn(J+1);if(this._assertIndex(J,this._columns),this._charCodes[J]===10)return 1;return this._columns[J]+1}}class BU{constructor(J,$,X,Y,Z,Q,G,q){this.originalStartLineNumber=J,this.originalStartColumn=$,this.originalEndLineNumber=X,this.originalEndColumn=Y,this.modifiedStartLineNumber=Z,this.modifiedStartColumn=Q,this.modifiedEndLineNumber=G,this.modifiedEndColumn=q}static createFromDiffChange(J,$,X){let Y=$.getStartLineNumber(J.originalStart),Z=$.getStartColumn(J.originalStart),Q=$.getEndLineNumber(J.originalStart+J.originalLength-1),G=$.getEndColumn(J.originalStart+J.originalLength-1),q=X.getStartLineNumber(J.modifiedStart),U=X.getStartColumn(J.modifiedStart),z=X.getEndLineNumber(J.modifiedStart+J.modifiedLength-1),H=X.getEndColumn(J.modifiedStart+J.modifiedLength-1);return new BU(Y,Z,Q,G,q,U,z,H)}}function fY0(J){if(J.length<=1)return J;let $=[J[0]],X=$[0];for(let Y=1,Z=J.length;Y<Z;Y++){let Q=J[Y],G=Q.originalStart-(X.originalStart+X.originalLength),q=Q.modifiedStart-(X.modifiedStart+X.modifiedLength);if(Math.min(G,q)<hY0)X.originalLength=Q.originalStart+Q.originalLength-X.originalStart,X.modifiedLength=Q.modifiedStart+Q.modifiedLength-X.modifiedStart;else $.push(Q),X=Q}return $}class tj{constructor(J,$,X,Y,Z){this.originalStartLineNumber=J,this.originalEndLineNumber=$,this.modifiedStartLineNumber=X,this.modifiedEndLineNumber=Y,this.charChanges=Z}static createFromDiffResult(J,$,X,Y,Z,Q,G){let q,U,z,H,j=void 0;if($.originalLength===0)q=X.getStartLineNumber($.originalStart)-1,U=0;else q=X.getStartLineNumber($.originalStart),U=X.getEndLineNumber($.originalStart+$.originalLength-1);if($.modifiedLength===0)z=Y.getStartLineNumber($.modifiedStart)-1,H=0;else z=Y.getStartLineNumber($.modifiedStart),H=Y.getEndLineNumber($.modifiedStart+$.modifiedLength-1);if(Q&&$.originalLength>0&&$.originalLength<20&&$.modifiedLength>0&&$.modifiedLength<20&&Z()){let V=X.createCharSequence(J,$.originalStart,$.originalStart+$.originalLength-1),W=Y.createCharSequence(J,$.modifiedStart,$.modifiedStart+$.modifiedLength-1);if(V.getElements().length>0&&W.getElements().length>0){let B=fm(V,W,Z,!0).changes;if(G)B=fY0(B);j=[];for(let K=0,P=B.length;K<P;K++)j.push(BU.createFromDiffChange(B[K],V,W))}}return new tj(q,U,z,H,j)}}class pm{constructor(J,$,X){this.shouldComputeCharChanges=X.shouldComputeCharChanges,this.shouldPostProcessCharChanges=X.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=X.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=X.shouldMakePrettyDiff,this.originalLines=J,this.modifiedLines=$,this.original=new vw(J),this.modified=new vw($),this.continueLineDiff=hm(X.maxComputationTime),this.continueCharDiff=hm(X.maxComputationTime===0?0:Math.min(X.maxComputationTime,5000))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0){if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[]};return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]}}if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};let J=fm(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),$=J.changes,X=J.quitEarly;if(this.shouldIgnoreTrimWhitespace){let G=[];for(let q=0,U=$.length;q<U;q++)G.push(tj.createFromDiffResult(this.shouldIgnoreTrimWhitespace,$[q],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:X,changes:G}}let Y=[],Z=0,Q=0;for(let G=-1,q=$.length;G<q;G++){let U=G+1<q?$[G+1]:null,z=U?U.originalStart:this.originalLines.length,H=U?U.modifiedStart:this.modifiedLines.length;while(Z<z&&Q<H){let j=this.originalLines[Z],V=this.modifiedLines[Q];if(j!==V){{let W=hw(j,1),B=hw(V,1);while(W>1&&B>1){let K=j.charCodeAt(W-2),P=V.charCodeAt(B-2);if(K!==P)break;W--,B--}if(W>1||B>1)this._pushTrimWhitespaceCharChange(Y,Z+1,1,W,Q+1,1,B)}{let W=fw(j,1),B=fw(V,1),K=j.length+1,P=V.length+1;while(W<K&&B<P){let A=j.charCodeAt(W-1),D=j.charCodeAt(B-1);if(A!==D)break;W++,B++}if(W<K||B<P)this._pushTrimWhitespaceCharChange(Y,Z+1,W,K,Q+1,B,P)}}Z++,Q++}if(U)Y.push(tj.createFromDiffResult(this.shouldIgnoreTrimWhitespace,U,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),Z+=U.originalLength,Q+=U.modifiedLength}return{quitEarly:X,changes:Y}}_pushTrimWhitespaceCharChange(J,$,X,Y,Z,Q,G){if(this._mergeTrimWhitespaceCharChange(J,$,X,Y,Z,Q,G))return;let q=void 0;if(this.shouldComputeCharChanges)q=[new BU($,X,$,Y,Z,Q,Z,G)];J.push(new tj($,$,Z,Z,q))}_mergeTrimWhitespaceCharChange(J,$,X,Y,Z,Q,G){let q=J.length;if(q===0)return!1;let U=J[q-1];if(U.originalEndLineNumber===0||U.modifiedEndLineNumber===0)return!1;if(U.originalEndLineNumber===$&&U.modifiedEndLineNumber===Z){if(this.shouldComputeCharChanges&&U.charChanges)U.charChanges.push(new BU($,X,$,Y,Z,Q,Z,G));return!0}if(U.originalEndLineNumber+1===$&&U.modifiedEndLineNumber+1===Z){if(U.originalEndLineNumber=$,U.modifiedEndLineNumber=Z,this.shouldComputeCharChanges&&U.charChanges)U.charChanges.push(new BU($,X,$,Y,Z,Q,Z,G));return!0}return!1}}function hw(J,$){let X=c6(J);if(X===-1)return $;return X+1}function fw(J,$){let X=r9(J);if(X===-1)return $;return X+2}function hm(J){if(J===0)return()=>!0;let $=Date.now();return()=>{return Date.now()-$<J}}var hY0=3;var mm=w(()=>{wP();SQ();X1();i0();WX();N9()});class B${static trivial(J,$){return new B$([new J5(n0.ofLength(J.length),n0.ofLength($.length))],!1)}static trivialTimedOut(J,$){return new B$([new J5(n0.ofLength(J.length),n0.ofLength($.length))],!0)}constructor(J,$){this.diffs=J,this.hitTimeout=$}}class J5{static invert(J,$){let X=[];return ZK(J,(Y,Z)=>{X.push(J5.fromOffsetPairs(Y?Y.getEndExclusives():X4.zero,Z?Z.getStarts():new X4($,(Y?Y.seq2Range.endExclusive-Y.seq1Range.endExclusive:0)+$)))}),X}static fromOffsetPairs(J,$){return new J5(new n0(J.offset1,$.offset1),new n0(J.offset2,$.offset2))}constructor(J,$){this.seq1Range=J,this.seq2Range=$}swap(){return new J5(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(J){return new J5(this.seq1Range.join(J.seq1Range),this.seq2Range.join(J.seq2Range))}delta(J){if(J===0)return this;return new J5(this.seq1Range.delta(J),this.seq2Range.delta(J))}deltaStart(J){if(J===0)return this;return new J5(this.seq1Range.deltaStart(J),this.seq2Range.deltaStart(J))}deltaEnd(J){if(J===0)return this;return new J5(this.seq1Range.deltaEnd(J),this.seq2Range.deltaEnd(J))}intersect(J){let $=this.seq1Range.intersect(J.seq1Range),X=this.seq2Range.intersect(J.seq2Range);if(!$||!X)return;return new J5($,X)}getStarts(){return new X4(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new X4(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class X4{constructor(J,$){this.offset1=J,this.offset2=$}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(J){if(J===0)return this;return new X4(this.offset1+J,this.offset2+J)}equals(J){return this.offset1===J.offset1&&this.offset2===J.offset2}}class oY{isValid(){return!0}}class pw{constructor(J){if(this.timeout=J,this.startTime=Date.now(),this.valid=!0,J<=0)throw new u1("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}var FU=w(()=>{V1();O1();C4();X4.zero=new X4(0,0);X4.max=new X4(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);oY.instance=new oY});class ej{constructor(J,$){this.width=J,this.height=$,this.array=[],this.array=Array(J*$)}get(J,$){return this.array[J+$*this.width]}set(J,$,X){this.array[J+$*this.width]=X}}function JV(J){return J===32||J===9}class $3{static getKey(J){let $=this.chrKeys.get(J);if($===void 0)$=this.chrKeys.size,this.chrKeys.set(J,$);return $}constructor(J,$,X){this.range=J,this.lines=$,this.source=X,this.histogram=[];let Y=0;for(let Z=J.startLineNumber-1;Z<J.endLineNumberExclusive-1;Z++){let Q=$[Z];for(let q=0;q<Q.length;q++){Y++;let U=Q[q],z=$3.getKey(U);this.histogram[z]=(this.histogram[z]||0)+1}Y++;let G=$3.getKey(`
`);this.histogram[G]=(this.histogram[G]||0)+1}this.totalCount=Y}computeSimilarity(J){var $,X;let Y=0,Z=Math.max(this.histogram.length,J.histogram.length);for(let Q=0;Q<Z;Q++)Y+=Math.abs((($=this.histogram[Q])!==null&&$!==void 0?$:0)-((X=J.histogram[Q])!==null&&X!==void 0?X:0));return 1-Y/(this.totalCount+J.totalCount)}}var yP=w(()=>{$3.chrKeys=new Map});class mw{compute(J,$,X=oY.instance,Y){if(J.length===0||$.length===0)return B$.trivial(J,$);let Z=new ej(J.length,$.length),Q=new ej(J.length,$.length),G=new ej(J.length,$.length);for(let W=0;W<J.length;W++)for(let B=0;B<$.length;B++){if(!X.isValid())return B$.trivialTimedOut(J,$);let K=W===0?0:Z.get(W-1,B),P=B===0?0:Z.get(W,B-1),A;if(J.getElement(W)===$.getElement(B)){if(W===0||B===0)A=0;else A=Z.get(W-1,B-1);if(W>0&&B>0&&Q.get(W-1,B-1)===3)A+=G.get(W-1,B-1);A+=Y?Y(W,B):1}else A=-1;let D=Math.max(K,P,A);if(D===A){let M=W>0&&B>0?G.get(W-1,B-1):0;G.set(W,B,M+1),Q.set(W,B,3)}else if(D===K)G.set(W,B,0),Q.set(W,B,1);else if(D===P)G.set(W,B,0),Q.set(W,B,2);Z.set(W,B,D)}let q=[],U=J.length,z=$.length;function H(W,B){if(W+1!==U||B+1!==z)q.push(new J5(new n0(W+1,U),new n0(B+1,z)));U=W,z=B}let j=J.length-1,V=$.length-1;while(j>=0&&V>=0)if(Q.get(j,V)===3)H(j,V),j--,V--;else if(Q.get(j,V)===1)j--;else V--;return H(-1,-1),q.reverse(),new B$(q,!1)}}var um=w(()=>{C4();FU();yP()});class $V{compute(J,$,X=oY.instance){if(J.length===0||$.length===0)return B$.trivial(J,$);let Y=J,Z=$;function Q(B,K){while(B<Y.length&&K<Z.length&&Y.getElement(B)===Z.getElement(K))B++,K++;return B}let G=0,q=new cm;q.set(0,Q(0,0));let U=new lm;U.set(0,q.get(0)===0?null:new uw(null,0,0,q.get(0)));let z=0;J:while(!0){if(G++,!X.isValid())return B$.trivialTimedOut(Y,Z);let B=-Math.min(G,Z.length+G%2),K=Math.min(G,Y.length+G%2);for(z=B;z<=K;z+=2){let P=0,A=z===K?-1:q.get(z+1),D=z===B?-1:q.get(z-1)+1;P++;let M=Math.min(Math.max(A,D),Y.length),R=M-z;if(P++,M>Y.length||R>Z.length)continue;let O=Q(M,R);q.set(z,O);let N=M===A?U.get(z+1):U.get(z-1);if(U.set(z,O!==M?new uw(N,M,R,O-M):N),q.get(z)===Y.length&&q.get(z)-z===Z.length)break J}}let H=U.get(z),j=[],V=Y.length,W=Z.length;while(!0){let B=H?H.x+H.length:0,K=H?H.y+H.length:0;if(B!==V||K!==W)j.push(new J5(new n0(B,V),new n0(K,W)));if(!H)break;V=H.x,W=H.y,H=H.prev}return j.reverse(),new B$(j,!1)}}class uw{constructor(J,$,X,Y){this.prev=J,this.x=$,this.y=X,this.length=Y}}class cm{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(J){if(J<0)return J=-J-1,this.negativeArr[J];else return this.positiveArr[J]}set(J,$){if(J<0){if(J=-J-1,J>=this.negativeArr.length){let X=this.negativeArr;this.negativeArr=new Int32Array(X.length*2),this.negativeArr.set(X)}this.negativeArr[J]=$}else{if(J>=this.positiveArr.length){let X=this.positiveArr;this.positiveArr=new Int32Array(X.length*2),this.positiveArr.set(X)}this.positiveArr[J]=$}}}class lm{constructor(){this.positiveArr=[],this.negativeArr=[]}get(J){if(J<0)return J=-J-1,this.negativeArr[J];else return this.positiveArr[J]}set(J,$){if(J<0)J=-J-1,this.negativeArr[J]=$;else this.positiveArr[J]=$}}var cw=w(()=>{C4();FU()});class am{constructor(J,$){this.uri=J,this.value=$}}function gY0(J){return Array.isArray(J)}class lw{constructor(J){if(this._m1=new Map,this._m2=new Map,J)for(let[$,X]of J)this.set($,X)}clear(){this._m1.clear(),this._m2.clear()}set(J,$){this._m1.set(J,$),this._m2.set($,J)}get(J){return this._m1.get(J)}getKey(J){return this._m2.get(J)}delete(J){let $=this._m1.get(J);if($===void 0)return!1;return this._m1.delete(J),this._m2.delete($),!0}keys(){return this._m1.keys()}values(){return this._m1.values()}}class XV{constructor(){this.map=new Map}add(J,$){let X=this.map.get(J);if(!X)X=new Set,this.map.set(J,X);X.add($)}delete(J,$){let X=this.map.get(J);if(!X)return;if(X.delete($),X.size===0)this.map.delete(J)}forEach(J,$){let X=this.map.get(J);if(!X)return;X.forEach($)}get(J){let $=this.map.get(J);if(!$)return new Set;return $}}var dm,sm,e5,rm,tY;var F$=w(()=>{e5=class e5{constructor(J,$){if(this[dm]="ResourceMap",J instanceof e5)this.map=new Map(J.map),this.toKey=$!==null&&$!==void 0?$:e5.defaultToKey;else if(gY0(J)){this.map=new Map,this.toKey=$!==null&&$!==void 0?$:e5.defaultToKey;for(let[X,Y]of J)this.set(X,Y)}else this.map=new Map,this.toKey=J!==null&&J!==void 0?J:e5.defaultToKey}set(J,$){return this.map.set(this.toKey(J),new am(J,$)),this}get(J){var $;return($=this.map.get(this.toKey(J)))===null||$===void 0?void 0:$.value}has(J){return this.map.has(this.toKey(J))}get size(){return this.map.size}clear(){this.map.clear()}delete(J){return this.map.delete(this.toKey(J))}forEach(J,$){if(typeof $<"u")J=J.bind($);for(let[X,Y]of this.map)J(Y.value,Y.uri,this)}*values(){for(let J of this.map.values())yield J.value}*keys(){for(let J of this.map.values())yield J.uri}*entries(){for(let J of this.map.values())yield[J.uri,J.value]}*[(dm=Symbol.toStringTag,Symbol.iterator)](){for(let[,J]of this.map)yield[J.uri,J.value]}};e5.defaultToKey=(J)=>J.toString();rm=class rm{constructor(){this[sm]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var J;return(J=this._head)===null||J===void 0?void 0:J.value}get last(){var J;return(J=this._tail)===null||J===void 0?void 0:J.value}has(J){return this._map.has(J)}get(J,$=0){let X=this._map.get(J);if(!X)return;if($!==0)this.touch(X,$);return X.value}set(J,$,X=0){let Y=this._map.get(J);if(Y){if(Y.value=$,X!==0)this.touch(Y,X)}else{switch(Y={key:J,value:$,next:void 0,previous:void 0},X){case 0:this.addItemLast(Y);break;case 1:this.addItemFirst(Y);break;case 2:this.addItemLast(Y);break;default:this.addItemLast(Y);break}this._map.set(J,Y),this._size++}return this}delete(J){return!!this.remove(J)}remove(J){let $=this._map.get(J);if(!$)return;return this._map.delete(J),this.removeItem($),this._size--,$.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error("Invalid list");let J=this._head;return this._map.delete(J.key),this.removeItem(J),this._size--,J.value}forEach(J,$){let X=this._state,Y=this._head;while(Y){if($)J.bind($)(Y.value,Y.key,this);else J(Y.value,Y.key,this);if(this._state!==X)throw Error("LinkedMap got modified during iteration.");Y=Y.next}}keys(){let J=this,$=this._state,X=this._head,Y={[Symbol.iterator](){return Y},next(){if(J._state!==$)throw Error("LinkedMap got modified during iteration.");if(X){let Z={value:X.key,done:!1};return X=X.next,Z}else return{value:void 0,done:!0}}};return Y}values(){let J=this,$=this._state,X=this._head,Y={[Symbol.iterator](){return Y},next(){if(J._state!==$)throw Error("LinkedMap got modified during iteration.");if(X){let Z={value:X.value,done:!1};return X=X.next,Z}else return{value:void 0,done:!0}}};return Y}entries(){let J=this,$=this._state,X=this._head,Y={[Symbol.iterator](){return Y},next(){if(J._state!==$)throw Error("LinkedMap got modified during iteration.");if(X){let Z={value:[X.key,X.value],done:!1};return X=X.next,Z}else return{value:void 0,done:!0}}};return Y}[(sm=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(J){if(J>=this.size)return;if(J===0){this.clear();return}let $=this._head,X=this.size;while($&&X>J)this._map.delete($.key),$=$.next,X--;if(this._head=$,this._size=X,$)$.previous=void 0;this._state++}addItemFirst(J){if(!this._head&&!this._tail)this._tail=J;else if(!this._head)throw Error("Invalid list");else J.next=this._head,this._head.previous=J;this._head=J,this._state++}addItemLast(J){if(!this._head&&!this._tail)this._head=J;else if(!this._tail)throw Error("Invalid list");else J.previous=this._tail,this._tail.next=J;this._tail=J,this._state++}removeItem(J){if(J===this._head&&J===this._tail)this._head=void 0,this._tail=void 0;else if(J===this._head){if(!J.next)throw Error("Invalid list");J.next.previous=void 0,this._head=J.next}else if(J===this._tail){if(!J.previous)throw Error("Invalid list");J.previous.next=void 0,this._tail=J.previous}else{let{next:$,previous:X}=J;if(!$||!X)throw Error("Invalid list");$.previous=X,X.next=$}J.next=void 0,J.previous=void 0,this._state++}touch(J,$){if(!this._head||!this._tail)throw Error("Invalid list");if($!==1&&$!==2)return;if($===1){if(J===this._head)return;let{next:X,previous:Y}=J;if(J===this._tail)Y.next=void 0,this._tail=Y;else X.previous=Y,Y.next=X;J.previous=void 0,J.next=this._head,this._head.previous=J,this._head=J,this._state++}else if($===2){if(J===this._tail)return;let{next:X,previous:Y}=J;if(J===this._head)X.previous=void 0,this._head=X;else X.previous=Y,Y.next=X;J.next=void 0,J.previous=this._tail,this._tail.next=J,this._tail=J,this._state++}}toJSON(){let J=[];return this.forEach(($,X)=>{J.push([X,$])}),J}fromJSON(J){this.clear();for(let[$,X]of J)this.set($,X)}};tY=class tY extends rm{constructor(J,$=1){super();this._limit=J,this._ratio=Math.min(Math.max(0,$),1)}get limit(){return this._limit}set limit(J){this._limit=J,this.checkTrim()}get(J,$=2){return super.get(J,$)}peek(J){return super.get(J,0)}set(J,$){return super.set(J,$,2),this.checkTrim(),this}checkTrim(){if(this.size>this._limit)this.trimOld(Math.round(this._limit*this._ratio))}}});class X3{constructor(J,$,X){this.lines=J,this.considerWhitespaceChanges=X,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let Y=!1;if($.start>0&&$.endExclusive>=J.length)$=new n0($.start-1,$.endExclusive),Y=!0;this.lineRange=$,this.firstCharOffsetByLine[0]=0;for(let Z=this.lineRange.start;Z<this.lineRange.endExclusive;Z++){let Q=J[Z],G=0;if(Y)G=Q.length,Q="",Y=!1;else if(!X){let q=Q.trimStart();G=Q.length-q.length,Q=q.trimEnd()}this.additionalOffsetByLine.push(G);for(let q=0;q<Q.length;q++)this.elements.push(Q.charCodeAt(q));if(Z<J.length-1)this.elements.push(10),this.firstCharOffsetByLine[Z-this.lineRange.start+1]=this.elements.length}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new n0(0,this.length))}getText(J){return this.elements.slice(J.start,J.endExclusive).map(($)=>String.fromCharCode($)).join("")}getElement(J){return this.elements[J]}get length(){return this.elements.length}getBoundaryScore(J){let $=nm(J>0?this.elements[J-1]:-1),X=nm(J<this.elements.length?this.elements[J]:-1);if($===7&&X===8)return 0;if($===8)return 150;let Y=0;if($!==X){if(Y+=10,$===0&&X===1)Y+=1}return Y+=im($),Y+=im(X),Y}translateOffset(J){if(this.lineRange.isEmpty)return new g(this.lineRange.start+1,1);let $=J3(this.firstCharOffsetByLine,(X)=>X<=J);return new g(this.lineRange.start+$+1,J-this.firstCharOffsetByLine[$]+this.additionalOffsetByLine[$]+1)}translateRange(J){return k.fromPositions(this.translateOffset(J.start),this.translateOffset(J.endExclusive))}findWordContaining(J){if(J<0||J>=this.elements.length)return;if(!dw(this.elements[J]))return;let $=J;while($>0&&dw(this.elements[$-1]))$--;let X=J;while(X<this.elements.length&&dw(this.elements[X]))X++;return new n0($,X)}countLinesIn(J){return this.translateOffset(J.endExclusive).lineNumber-this.translateOffset(J.start).lineNumber}isStronglyEqual(J,$){return this.elements[J]===this.elements[$]}extendToFullLines(J){var $,X;let Y=($=nY(this.firstCharOffsetByLine,(Q)=>Q<=J.start))!==null&&$!==void 0?$:0,Z=(X=bm(this.firstCharOffsetByLine,(Q)=>J.endExclusive<=Q))!==null&&X!==void 0?X:this.elements.length;return new n0(Y,Z)}}function dw(J){return J>=97&&J<=122||J>=65&&J<=90||J>=48&&J<=57}function im(J){return pY0[J]}function nm(J){if(J===10)return 8;else if(J===13)return 7;else if(JV(J))return 6;else if(J>=97&&J<=122)return 0;else if(J>=65&&J<=90)return 1;else if(J>=48&&J<=57)return 2;else if(J===-1)return 3;else if(J===44||J===59)return 5;else return 4}var pY0;var sw=w(()=>{W$();C4();i0();yP();pY0={[0]:0,[1]:0,[2]:0,[3]:10,[4]:2,[5]:30,[6]:3,[7]:10,[8]:10}});function tm(J,$,X,Y,Z,Q){let{moves:G,excludedChanges:q}=uY0(J,$,X,Q);if(!Q.isValid())return[];let U=J.filter((H)=>!q.has(H)),z=cY0(U,Y,Z,$,X,Q);return sH(G,z),G=lY0(G),G=G.filter((H)=>{let j=H.original.toOffsetRange().slice($).map((W)=>W.trim());return j.join(`
`).length>=15&&mY0(j,(W)=>W.length>=2)>=2}),G=dY0(J,G),G}function mY0(J,$){let X=0;for(let Y of J)if($(Y))X++;return X}function uY0(J,$,X,Y){let Z=[],Q=J.filter((U)=>U.modified.isEmpty&&U.original.length>=3).map((U)=>new $3(U.original,$,U)),G=new Set(J.filter((U)=>U.original.isEmpty&&U.modified.length>=3).map((U)=>new $3(U.modified,X,U))),q=new Set;for(let U of Q){let z=-1,H;for(let j of G){let V=U.computeSimilarity(j);if(V>z)z=V,H=j}if(z>0.9&&H)G.delete(H),Z.push(new w8(U.range,H.range)),q.add(U.source),q.add(H.source);if(!Y.isValid())return{moves:Z,excludedChanges:q}}return{moves:Z,excludedChanges:q}}function cY0(J,$,X,Y,Z,Q){let G=[],q=new XV;for(let V of J)for(let W=V.original.startLineNumber;W<V.original.endLineNumberExclusive-2;W++){let B=`${$[W-1]}:${$[W+1-1]}:${$[W+2-1]}`;q.add(B,{range:new f0(W,W+3)})}let U=[];J.sort(B9((V)=>V.modified.startLineNumber,MY));for(let V of J){let W=[];for(let B=V.modified.startLineNumber;B<V.modified.endLineNumberExclusive-2;B++){let K=`${X[B-1]}:${X[B+1-1]}:${X[B+2-1]}`,P=new f0(B,B+3),A=[];q.forEach(K,({range:D})=>{for(let R of W)if(R.originalLineRange.endLineNumberExclusive+1===D.endLineNumberExclusive&&R.modifiedLineRange.endLineNumberExclusive+1===P.endLineNumberExclusive){R.originalLineRange=new f0(R.originalLineRange.startLineNumber,D.endLineNumberExclusive),R.modifiedLineRange=new f0(R.modifiedLineRange.startLineNumber,P.endLineNumberExclusive),A.push(R);return}let M={modifiedLineRange:P,originalLineRange:D};U.push(M),A.push(M)}),W=A}if(!Q.isValid())return[]}U.sort(ah(B9((V)=>V.modifiedLineRange.length,MY)));let z=new _9,H=new _9;for(let V of U){let W=V.modifiedLineRange.startLineNumber-V.originalLineRange.startLineNumber,B=z.subtractFrom(V.modifiedLineRange),K=H.subtractFrom(V.originalLineRange).getWithDelta(W),P=B.getIntersection(K);for(let A of P.ranges){if(A.length<3)continue;let D=A,M=A.delta(-W);G.push(new w8(M,D)),z.addRange(D),H.addRange(M)}}G.sort(B9((V)=>V.original.startLineNumber,MY));let j=new WU(J);for(let V=0;V<G.length;V++){let W=G[V],B=j.findLastMonotonous((N)=>N.original.startLineNumber<=W.original.startLineNumber),K=nY(J,(N)=>N.modified.startLineNumber<=W.modified.startLineNumber),P=Math.max(W.original.startLineNumber-B.original.startLineNumber,W.modified.startLineNumber-K.modified.startLineNumber),A=j.findLastMonotonous((N)=>N.original.startLineNumber<W.original.endLineNumberExclusive),D=nY(J,(N)=>N.modified.startLineNumber<W.modified.endLineNumberExclusive),M=Math.max(A.original.endLineNumberExclusive-W.original.endLineNumberExclusive,D.modified.endLineNumberExclusive-W.modified.endLineNumberExclusive),R;for(R=0;R<P;R++){let N=W.original.startLineNumber-R-1,T=W.modified.startLineNumber-R-1;if(N>Y.length||T>Z.length)break;if(z.contains(T)||H.contains(N))break;if(!om(Y[N-1],Z[T-1],Q))break}if(R>0)H.addRange(new f0(W.original.startLineNumber-R,W.original.startLineNumber)),z.addRange(new f0(W.modified.startLineNumber-R,W.modified.startLineNumber));let O;for(O=0;O<M;O++){let N=W.original.endLineNumberExclusive+O,T=W.modified.endLineNumberExclusive+O;if(N>Y.length||T>Z.length)break;if(z.contains(T)||H.contains(N))break;if(!om(Y[N-1],Z[T-1],Q))break}if(O>0)H.addRange(new f0(W.original.endLineNumberExclusive,W.original.endLineNumberExclusive+O)),z.addRange(new f0(W.modified.endLineNumberExclusive,W.modified.endLineNumberExclusive+O));if(R>0||O>0)G[V]=new w8(new f0(W.original.startLineNumber-R,W.original.endLineNumberExclusive+O),new f0(W.modified.startLineNumber-R,W.modified.endLineNumberExclusive+O))}return G}function om(J,$,X){if(J.trim()===$.trim())return!0;if(J.length>300&&$.length>300)return!1;let Z=new $V().compute(new X3([J],new n0(0,1),!1),new X3([$],new n0(0,1),!1),X),Q=0,G=J5.invert(Z.diffs,J.length);for(let H of G)H.seq1Range.forEach((j)=>{if(!JV(J.charCodeAt(j)))Q++});function q(H){let j=0;for(let V=0;V<J.length;V++)if(!JV(H.charCodeAt(V)))j++;return j}let U=q(J.length>$.length?J:$);return Q/U>0.6&&U>10}function lY0(J){if(J.length===0)return J;J.sort(B9((X)=>X.original.startLineNumber,MY));let $=[J[0]];for(let X=1;X<J.length;X++){let Y=$[$.length-1],Z=J[X],Q=Z.original.startLineNumber-Y.original.endLineNumberExclusive,G=Z.modified.startLineNumber-Y.modified.endLineNumberExclusive;if(Q>=0&&G>=0&&Q+G<=2){$[$.length-1]=Y.join(Z);continue}$.push(Z)}return $}function dY0(J,$){let X=new WU(J);return $=$.filter((Y)=>{let Z=X.findLastMonotonous((q)=>q.original.startLineNumber<Y.original.endLineNumberExclusive)||new w8(new f0(1,1),new f0(1,1)),Q=nY(J,(q)=>q.modified.startLineNumber<Y.modified.endLineNumberExclusive);return Z!==Q}),$}var em=w(()=>{FU();SQ();V1();W$();F$();N9();C4();sw();yP();cw()});function YV(J,$,X){let Y=X;return Y=Ju(J,$,Y),Y=Ju(J,$,Y),Y=sY0(J,$,Y),Y}function Ju(J,$,X){if(X.length===0)return X;let Y=[];Y.push(X[0]);for(let Q=1;Q<X.length;Q++){let G=Y[Y.length-1],q=X[Q];if(q.seq1Range.isEmpty||q.seq2Range.isEmpty){let U=q.seq1Range.start-G.seq1Range.endExclusive,z;for(z=1;z<=U;z++)if(J.getElement(q.seq1Range.start-z)!==J.getElement(q.seq1Range.endExclusive-z)||$.getElement(q.seq2Range.start-z)!==$.getElement(q.seq2Range.endExclusive-z))break;if(z--,z===U){Y[Y.length-1]=new J5(new n0(G.seq1Range.start,q.seq1Range.endExclusive-U),new n0(G.seq2Range.start,q.seq2Range.endExclusive-U));continue}q=q.delta(-z)}Y.push(q)}let Z=[];for(let Q=0;Q<Y.length-1;Q++){let G=Y[Q+1],q=Y[Q];if(q.seq1Range.isEmpty||q.seq2Range.isEmpty){let U=G.seq1Range.start-q.seq1Range.endExclusive,z;for(z=0;z<U;z++)if(!J.isStronglyEqual(q.seq1Range.start+z,q.seq1Range.endExclusive+z)||!$.isStronglyEqual(q.seq2Range.start+z,q.seq2Range.endExclusive+z))break;if(z===U){Y[Q+1]=new J5(new n0(q.seq1Range.start+U,G.seq1Range.endExclusive),new n0(q.seq2Range.start+U,G.seq2Range.endExclusive));continue}if(z>0)q=q.delta(z)}Z.push(q)}if(Y.length>0)Z.push(Y[Y.length-1]);return Z}function sY0(J,$,X){if(!J.getBoundaryScore||!$.getBoundaryScore)return X;for(let Y=0;Y<X.length;Y++){let Z=Y>0?X[Y-1]:void 0,Q=X[Y],G=Y+1<X.length?X[Y+1]:void 0,q=new n0(Z?Z.seq1Range.endExclusive+1:0,G?G.seq1Range.start-1:J.length),U=new n0(Z?Z.seq2Range.endExclusive+1:0,G?G.seq2Range.start-1:$.length);if(Q.seq1Range.isEmpty)X[Y]=$u(Q,J,$,q,U);else if(Q.seq2Range.isEmpty)X[Y]=$u(Q.swap(),$,J,U,q).swap()}return X}function $u(J,$,X,Y,Z){let G=1;while(J.seq1Range.start-G>=Y.start&&J.seq2Range.start-G>=Z.start&&X.isStronglyEqual(J.seq2Range.start-G,J.seq2Range.endExclusive-G)&&G<100)G++;G--;let q=0;while(J.seq1Range.start+q<Y.endExclusive&&J.seq2Range.endExclusive+q<Z.endExclusive&&X.isStronglyEqual(J.seq2Range.start+q,J.seq2Range.endExclusive+q)&&q<100)q++;if(G===0&&q===0)return J;let U=0,z=-1;for(let H=-G;H<=q;H++){let j=J.seq2Range.start+H,V=J.seq2Range.endExclusive+H,W=J.seq1Range.start+H,B=$.getBoundaryScore(W)+X.getBoundaryScore(j)+X.getBoundaryScore(V);if(B>z)z=B,U=H}return J.delta(U)}function Xu(J,$,X){let Y=[];for(let Z of X){let Q=Y[Y.length-1];if(!Q){Y.push(Z);continue}if(Z.seq1Range.start-Q.seq1Range.endExclusive<=2||Z.seq2Range.start-Q.seq2Range.endExclusive<=2)Y[Y.length-1]=new J5(Q.seq1Range.join(Z.seq1Range),Q.seq2Range.join(Z.seq2Range));else Y.push(Z)}return Y}function Yu(J,$,X){let Y=J5.invert(X,J.length),Z=[],Q=new X4(0,0);function G(U,z){if(U.offset1<Q.offset1||U.offset2<Q.offset2)return;let H=J.findWordContaining(U.offset1),j=$.findWordContaining(U.offset2);if(!H||!j)return;let V=new J5(H,j),W=V.intersect(z),B=W.seq1Range.length,K=W.seq2Range.length;while(Y.length>0){let P=Y[0];if(!(P.seq1Range.intersects(H)||P.seq2Range.intersects(j)))break;let D=J.findWordContaining(P.seq1Range.start),M=$.findWordContaining(P.seq2Range.start),R=new J5(D,M),O=R.intersect(P);if(B+=O.seq1Range.length,K+=O.seq2Range.length,V=V.join(R),V.seq1Range.endExclusive>=P.seq1Range.endExclusive)Y.shift();else break}if(B+K<(V.seq1Range.length+V.seq2Range.length)*2/3)Z.push(V);Q=V.getEndExclusives()}while(Y.length>0){let U=Y.shift();if(U.seq1Range.isEmpty)continue;G(U.getStarts(),U),G(U.getEndExclusives().delta(-1),U)}return aY0(X,Z)}function aY0(J,$){let X=[];while(J.length>0||$.length>0){let Y=J[0],Z=$[0],Q;if(Y&&(!Z||Y.seq1Range.start<Z.seq1Range.start))Q=J.shift();else Q=$.shift();if(X.length>0&&X[X.length-1].seq1Range.endExclusive>=Q.seq1Range.start)X[X.length-1]=X[X.length-1].join(Q);else X.push(Q)}return X}function Zu(J,$,X){let Y=X;if(Y.length===0)return Y;let Z=0,Q;do{Q=!1;let G=[Y[0]];for(let q=1;q<Y.length;q++){let H=function(V,W){let B=new n0(z.seq1Range.endExclusive,U.seq1Range.start);if(J.getText(B).replace(/\s/g,"").length<=4&&(V.seq1Range.length+V.seq2Range.length>5||W.seq1Range.length+W.seq2Range.length>5))return!0;return!1},U=Y[q],z=G[G.length-1];if(H(z,U))Q=!0,G[G.length-1]=G[G.length-1].join(U);else G.push(U)}Y=G}while(Z++<10&&Q);return Y}function Qu(J,$,X){let Y=X;if(Y.length===0)return Y;let Z=0,Q;do{Q=!1;let q=[Y[0]];for(let U=1;U<Y.length;U++){let j=function(W,B){let K=new n0(H.seq1Range.endExclusive,z.seq1Range.start);if(J.countLinesIn(K)>5||K.length>500)return!1;let A=J.getText(K).trim();if(A.length>20||A.split(/\r\n|\r|\n/).length>1)return!1;let D=J.countLinesIn(W.seq1Range),M=W.seq1Range.length,R=$.countLinesIn(W.seq2Range),O=W.seq2Range.length,N=J.countLinesIn(B.seq1Range),T=B.seq1Range.length,S=$.countLinesIn(B.seq2Range),v=B.seq2Range.length,l=130;function f(h){return Math.min(h,l)}if(Math.pow(Math.pow(f(D*40+M),1.5)+Math.pow(f(R*40+O),1.5),1.5)+Math.pow(Math.pow(f(N*40+T),1.5)+Math.pow(f(S*40+v),1.5),1.5)>(l**1.5)**1.5*1.3)return!0;return!1},z=Y[U],H=q[q.length-1];if(j(H,z))Q=!0,q[q.length-1]=q[q.length-1].join(z);else q.push(z)}Y=q}while(Z++<10&&Q);let G=[];return uh(Y,(q,U,z)=>{let H=U;function j(A){return A.length>0&&A.trim().length<=3&&U.seq1Range.length+U.seq2Range.length>100}let V=J.extendToFullLines(U.seq1Range),W=J.getText(new n0(V.start,U.seq1Range.start));if(j(W))H=H.deltaStart(-W.length);let B=J.getText(new n0(U.seq1Range.endExclusive,V.endExclusive));if(j(B))H=H.deltaEnd(B.length);let K=J5.fromOffsetPairs(q?q.getEndExclusives():X4.zero,z?z.getStarts():X4.max),P=H.intersect(K);if(G.length>0&&P.getStarts().equals(G[G.length-1].getEndExclusives()))G[G.length-1]=G[G.length-1].join(P);else G.push(P)}),G}var aw=w(()=>{V1();C4();FU()});class xP{constructor(J,$){this.trimmedHash=J,this.lines=$}getElement(J){return this.trimmedHash[J]}get length(){return this.trimmedHash.length}getBoundaryScore(J){let $=J===0?0:Gu(this.lines[J-1]),X=J===this.lines.length?0:Gu(this.lines[J]);return 1000-($+X)}getText(J){return this.lines.slice(J.start,J.endExclusive).join(`
`)}isStronglyEqual(J,$){return this.lines[J]===this.lines[$]}}function Gu(J){let $=0;while($<J.length&&(J.charCodeAt($)===32||J.charCodeAt($)===9))$++;return $}class ZV{constructor(){this.dynamicProgrammingDiffing=new mw,this.myersDiffingAlgorithm=new $V}computeDiff(J,$,X){if(J.length<=1&&B6(J,$,(R,O)=>R===O))return new tG([],[],!1);if(J.length===1&&J[0].length===0||$.length===1&&$[0].length===0)return new tG([new $9(new f0(1,J.length+1),new f0(1,$.length+1),[new v4(new k(1,1,J.length,J[0].length+1),new k(1,1,$.length,$[0].length+1))])],[],!1);let Y=X.maxComputationTimeMs===0?oY.instance:new pw(X.maxComputationTimeMs),Z=!X.ignoreTrimWhitespace,Q=new Map;function G(R){let O=Q.get(R);if(O===void 0)O=Q.size,Q.set(R,O);return O}let q=J.map((R)=>G(R.trim())),U=$.map((R)=>G(R.trim())),z=new xP(q,J),H=new xP(U,$),j=(()=>{if(z.length+H.length<1700)return this.dynamicProgrammingDiffing.compute(z,H,Y,(R,O)=>J[R]===$[O]?$[O].length===0?0.1:1+Math.log(1+$[O].length):0.99);return this.myersDiffingAlgorithm.compute(z,H)})(),V=j.diffs,W=j.hitTimeout;V=YV(z,H,V),V=Zu(z,H,V);let B=[],K=(R)=>{if(!Z)return;for(let O=0;O<R;O++){let N=P+O,T=A+O;if(J[N]!==$[T]){let S=this.refineDiff(J,$,new J5(new n0(N,N+1),new n0(T,T+1)),Y,Z);for(let v of S.mappings)B.push(v);if(S.hitTimeout)W=!0}}},P=0,A=0;for(let R of V){VX(()=>R.seq1Range.start-P===R.seq2Range.start-A);let O=R.seq1Range.start-P;K(O),P=R.seq1Range.endExclusive,A=R.seq2Range.endExclusive;let N=this.refineDiff(J,$,R,Y,Z);if(N.hitTimeout)W=!0;for(let T of N.mappings)B.push(T)}K(J.length-P);let D=qu(B,J,$),M=[];if(X.computeMoves)M=this.computeMoves(D,J,$,q,U,Y,Z);return VX(()=>{function R(N,T){if(N.lineNumber<1||N.lineNumber>T.length)return!1;let S=T[N.lineNumber-1];if(N.column<1||N.column>S.length+1)return!1;return!0}function O(N,T){if(N.startLineNumber<1||N.startLineNumber>T.length+1)return!1;if(N.endLineNumberExclusive<1||N.endLineNumberExclusive>T.length+1)return!1;return!0}for(let N of D){if(!N.innerChanges)return!1;for(let T of N.innerChanges)if(!(R(T.modifiedRange.getStartPosition(),$)&&R(T.modifiedRange.getEndPosition(),$)&&R(T.originalRange.getStartPosition(),J)&&R(T.originalRange.getEndPosition(),J)))return!1;if(!O(N.modified,$)||!O(N.original,J))return!1}return!0}),new tG(D,M,W)}computeMoves(J,$,X,Y,Z,Q,G){return tm(J,$,X,Y,Z,Q).map((z)=>{let H=this.refineDiff($,X,new J5(z.original.toOffsetRange(),z.modified.toOffsetRange()),Q,G),j=qu(H.mappings,$,X,!0);return new oj(z,j)})}refineDiff(J,$,X,Y,Z){let Q=new X3(J,X.seq1Range,Z),G=new X3($,X.seq2Range,Z),q=Q.length+G.length<500?this.dynamicProgrammingDiffing.compute(Q,G,Y):this.myersDiffingAlgorithm.compute(Q,G,Y),U=q.diffs;return U=YV(Q,G,U),U=Yu(Q,G,U),U=Xu(Q,G,U),U=Qu(Q,G,U),{mappings:U.map((H)=>new v4(Q.translateRange(H.seq1Range),G.translateRange(H.seq2Range))),hitTimeout:q.hitTimeout}}}function qu(J,$,X,Y=!1){let Z=[];for(let Q of kq(J.map((G)=>rY0(G,$,X)),(G,q)=>G.original.overlapOrTouch(q.original)||G.modified.overlapOrTouch(q.modified))){let G=Q[0],q=Q[Q.length-1];Z.push(new $9(G.original.join(q.original),G.modified.join(q.modified),Q.map((U)=>U.innerChanges[0])))}return VX(()=>{if(!Y){if(Z.length>0&&Z[0].original.startLineNumber!==Z[0].modified.startLineNumber)return!1}return uA(Z,(Q,G)=>G.original.startLineNumber-Q.original.endLineNumberExclusive===G.modified.startLineNumber-Q.modified.endLineNumberExclusive&&Q.original.endLineNumberExclusive<G.original.startLineNumber&&Q.modified.endLineNumberExclusive<G.modified.startLineNumber)}),Z}function rY0(J,$,X){let Y=0,Z=0;if(J.modifiedRange.endColumn===1&&J.originalRange.endColumn===1&&J.originalRange.startLineNumber+Y<=J.originalRange.endLineNumber&&J.modifiedRange.startLineNumber+Y<=J.modifiedRange.endLineNumber)Z=-1;if(J.modifiedRange.startColumn-1>=X[J.modifiedRange.startLineNumber-1].length&&J.originalRange.startColumn-1>=$[J.originalRange.startLineNumber-1].length&&J.originalRange.startLineNumber<=J.originalRange.endLineNumber+Z&&J.modifiedRange.startLineNumber<=J.modifiedRange.endLineNumber+Z)Y=1;let Q=new f0(J.originalRange.startLineNumber+Y,J.originalRange.endLineNumber+1+Z),G=new f0(J.modifiedRange.startLineNumber+Y,J.modifiedRange.endLineNumber+1+Z);return new $9(Q,G,[J])}var rw=w(()=>{V1();WX();N9();C4();i0();FU();um();cw();em();aw();SQ();sw()});var iw;var Uu=w(()=>{mm();rw();iw={getLegacy:()=>new gw,getDefault:()=>new ZV}});function CQ(J,$){let X=Math.pow(10,$);return Math.round(J*X)/X}class k1{constructor(J,$,X,Y=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,J))|0,this.g=Math.min(255,Math.max(0,$))|0,this.b=Math.min(255,Math.max(0,X))|0,this.a=CQ(Math.max(Math.min(1,Y),0),3)}static equals(J,$){return J.r===$.r&&J.g===$.g&&J.b===$.b&&J.a===$.a}}class h4{constructor(J,$,X,Y){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,J),0)|0,this.s=CQ(Math.max(Math.min(1,$),0),3),this.l=CQ(Math.max(Math.min(1,X),0),3),this.a=CQ(Math.max(Math.min(1,Y),0),3)}static equals(J,$){return J.h===$.h&&J.s===$.s&&J.l===$.l&&J.a===$.a}static fromRGBA(J){let $=J.r/255,X=J.g/255,Y=J.b/255,Z=J.a,Q=Math.max($,X,Y),G=Math.min($,X,Y),q=0,U=0,z=(G+Q)/2,H=Q-G;if(H>0){switch(U=Math.min(z<=0.5?H/(2*z):H/(2-2*z),1),Q){case $:q=(X-Y)/H+(X<Y?6:0);break;case X:q=(Y-$)/H+2;break;case Y:q=($-X)/H+4;break}q*=60,q=Math.round(q)}return new h4(q,U,z,Z)}static _hue2rgb(J,$,X){if(X<0)X+=1;if(X>1)X-=1;if(X<0.16666666666666666)return J+($-J)*6*X;if(X<0.5)return $;if(X<0.6666666666666666)return J+($-J)*(0.6666666666666666-X)*6;return J}static toRGBA(J){let $=J.h/360,{s:X,l:Y,a:Z}=J,Q,G,q;if(X===0)Q=G=q=Y;else{let U=Y<0.5?Y*(1+X):Y+X-Y*X,z=2*Y-U;Q=h4._hue2rgb(z,U,$+0.3333333333333333),G=h4._hue2rgb(z,U,$),q=h4._hue2rgb(z,U,$-0.3333333333333333)}return new k1(Math.round(Q*255),Math.round(G*255),Math.round(q*255),Z)}}class KU{constructor(J,$,X,Y){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,J),0)|0,this.s=CQ(Math.max(Math.min(1,$),0),3),this.v=CQ(Math.max(Math.min(1,X),0),3),this.a=CQ(Math.max(Math.min(1,Y),0),3)}static equals(J,$){return J.h===$.h&&J.s===$.s&&J.v===$.v&&J.a===$.a}static fromRGBA(J){let $=J.r/255,X=J.g/255,Y=J.b/255,Z=Math.max($,X,Y),Q=Math.min($,X,Y),G=Z-Q,q=Z===0?0:G/Z,U;if(G===0)U=0;else if(Z===$)U=((X-Y)/G%6+6)%6;else if(Z===X)U=(Y-$)/G+2;else U=($-X)/G+4;return new KU(Math.round(U*60),q,Z,J.a)}static toRGBA(J){let{h:$,s:X,v:Y,a:Z}=J,Q=Y*X,G=Q*(1-Math.abs($/60%2-1)),q=Y-Q,[U,z,H]=[0,0,0];if($<60)U=Q,z=G;else if($<120)U=G,z=Q;else if($<180)z=Q,H=G;else if($<240)z=G,H=Q;else if($<300)U=G,H=Q;else if($<=360)U=Q,H=G;return U=Math.round((U+q)*255),z=Math.round((z+q)*255),H=Math.round((H+q)*255),new k1(U,z,H,Z)}}class n{static fromHex(J){return n.Format.CSS.parseHex(J)||n.red}static equals(J,$){if(!J&&!$)return!0;if(!J||!$)return!1;return J.equals($)}get hsla(){if(this._hsla)return this._hsla;else return h4.fromRGBA(this.rgba)}get hsva(){if(this._hsva)return this._hsva;return KU.fromRGBA(this.rgba)}constructor(J){if(!J)throw Error("Color needs a value");else if(J instanceof k1)this.rgba=J;else if(J instanceof h4)this._hsla=J,this.rgba=h4.toRGBA(J);else if(J instanceof KU)this._hsva=J,this.rgba=KU.toRGBA(J);else throw Error("Invalid color ctor argument")}equals(J){return!!J&&k1.equals(this.rgba,J.rgba)&&h4.equals(this.hsla,J.hsla)&&KU.equals(this.hsva,J.hsva)}getRelativeLuminance(){let J=n._relativeLuminanceForComponent(this.rgba.r),$=n._relativeLuminanceForComponent(this.rgba.g),X=n._relativeLuminanceForComponent(this.rgba.b),Y=0.2126*J+0.7152*$+0.0722*X;return CQ(Y,4)}static _relativeLuminanceForComponent(J){let $=J/255;return $<=0.03928?$/12.92:Math.pow(($+0.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1000>=128}isLighterThan(J){let $=this.getRelativeLuminance(),X=J.getRelativeLuminance();return $>X}isDarkerThan(J){let $=this.getRelativeLuminance(),X=J.getRelativeLuminance();return $<X}lighten(J){return new n(new h4(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*J,this.hsla.a))}darken(J){return new n(new h4(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*J,this.hsla.a))}transparent(J){let{r:$,g:X,b:Y,a:Z}=this.rgba;return new n(new k1($,X,Y,Z*J))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new n(new k1(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(J){if(this.isOpaque()||J.rgba.a!==1)return this;let{r:$,g:X,b:Y,a:Z}=this.rgba;return new n(new k1(J.rgba.r-Z*(J.rgba.r-$),J.rgba.g-Z*(J.rgba.g-X),J.rgba.b-Z*(J.rgba.b-Y),1))}toString(){if(!this._toString)this._toString=n.Format.CSS.format(this);return this._toString}static getLighterColor(J,$,X){if(J.isLighterThan($))return J;X=X?X:0.5;let Y=J.getRelativeLuminance(),Z=$.getRelativeLuminance();return X=X*(Z-Y)/Z,J.lighten(X)}static getDarkerColor(J,$,X){if(J.isDarkerThan($))return J;X=X?X:0.5;let Y=J.getRelativeLuminance(),Z=$.getRelativeLuminance();return X=X*(Y-Z)/Y,J.darken(X)}}var T9=w(()=>{n.white=new n(new k1(255,255,255,1));n.black=new n(new k1(0,0,0,1));n.red=new n(new k1(255,0,0,1));n.blue=new n(new k1(0,0,255,1));n.green=new n(new k1(0,255,0,1));n.cyan=new n(new k1(0,255,255,1));n.lightgrey=new n(new k1(211,211,211,1));n.transparent=new n(new k1(0,0,0,0));(function(J){let $;(function(X){let Y;(function(Z){function Q(K){if(K.rgba.a===1)return`rgb(${K.rgba.r}, ${K.rgba.g}, ${K.rgba.b})`;return J.Format.CSS.formatRGBA(K)}Z.formatRGB=Q;function G(K){return`rgba(${K.rgba.r}, ${K.rgba.g}, ${K.rgba.b}, ${+K.rgba.a.toFixed(2)})`}Z.formatRGBA=G;function q(K){if(K.hsla.a===1)return`hsl(${K.hsla.h}, ${(K.hsla.s*100).toFixed(2)}%, ${(K.hsla.l*100).toFixed(2)}%)`;return J.Format.CSS.formatHSLA(K)}Z.formatHSL=q;function U(K){return`hsla(${K.hsla.h}, ${(K.hsla.s*100).toFixed(2)}%, ${(K.hsla.l*100).toFixed(2)}%, ${K.hsla.a.toFixed(2)})`}Z.formatHSLA=U;function z(K){let P=K.toString(16);return P.length!==2?"0"+P:P}function H(K){return`#${z(K.rgba.r)}${z(K.rgba.g)}${z(K.rgba.b)}`}Z.formatHex=H;function j(K,P=!1){if(P&&K.rgba.a===1)return J.Format.CSS.formatHex(K);return`#${z(K.rgba.r)}${z(K.rgba.g)}${z(K.rgba.b)}${z(Math.round(K.rgba.a*255))}`}Z.formatHexA=j;function V(K){if(K.isOpaque())return J.Format.CSS.formatHex(K);return J.Format.CSS.formatRGBA(K)}Z.format=V;function W(K){let P=K.length;if(P===0)return null;if(K.charCodeAt(0)!==35)return null;if(P===7){let A=16*B(K.charCodeAt(1))+B(K.charCodeAt(2)),D=16*B(K.charCodeAt(3))+B(K.charCodeAt(4)),M=16*B(K.charCodeAt(5))+B(K.charCodeAt(6));return new J(new k1(A,D,M,1))}if(P===9){let A=16*B(K.charCodeAt(1))+B(K.charCodeAt(2)),D=16*B(K.charCodeAt(3))+B(K.charCodeAt(4)),M=16*B(K.charCodeAt(5))+B(K.charCodeAt(6)),R=16*B(K.charCodeAt(7))+B(K.charCodeAt(8));return new J(new k1(A,D,M,R/255))}if(P===4){let A=B(K.charCodeAt(1)),D=B(K.charCodeAt(2)),M=B(K.charCodeAt(3));return new J(new k1(16*A+A,16*D+D,16*M+M))}if(P===5){let A=B(K.charCodeAt(1)),D=B(K.charCodeAt(2)),M=B(K.charCodeAt(3)),R=B(K.charCodeAt(4));return new J(new k1(16*A+A,16*D+D,16*M+M,(16*R+R)/255))}return null}Z.parseHex=W;function B(K){switch(K){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(Y=X.CSS||(X.CSS={}))})($=J.Format||(J.Format={}))})(n||(n={}))});function ju(J){let $=[];for(let X of J){let Y=Number(X);if(Y||Y===0&&X.replace(/\s/g,"")!=="")$.push(Y)}return $}function nw(J,$,X,Y){return{red:J/255,blue:X/255,green:$/255,alpha:Y}}function QV(J,$){let X=$.index,Y=$[0].length;if(!X)return;let Z=J.positionAt(X);return{startLineNumber:Z.lineNumber,startColumn:Z.column,endLineNumber:Z.lineNumber,endColumn:Z.column+Y}}function iY0(J,$){if(!J)return;let X=n.Format.CSS.parseHex($);if(!X)return;return{range:J,color:nw(X.rgba.r,X.rgba.g,X.rgba.b,X.rgba.a)}}function zu(J,$,X){if(!J||$.length!==1)return;let Z=$[0].values(),Q=ju(Z);return{range:J,color:nw(Q[0],Q[1],Q[2],X?Q[3]:1)}}function Hu(J,$,X){if(!J||$.length!==1)return;let Z=$[0].values(),Q=ju(Z),G=new n(new h4(Q[0],Q[1]/100,Q[2]/100,X?Q[3]:1));return{range:J,color:nw(G.rgba.r,G.rgba.g,G.rgba.b,G.rgba.a)}}function GV(J,$){if(typeof J==="string")return[...J.matchAll($)];else return J.findMatches($)}function nY0(J){let $=[],Y=GV(J,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(Y.length>0)for(let Z of Y){let Q=Z.filter((z)=>z!==void 0),G=Q[1],q=Q[2];if(!q)continue;let U;if(G==="rgb"){let z=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;U=zu(QV(J,Z),GV(q,z),!1)}else if(G==="rgba"){let z=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;U=zu(QV(J,Z),GV(q,z),!0)}else if(G==="hsl"){let z=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;U=Hu(QV(J,Z),GV(q,z),!1)}else if(G==="hsla"){let z=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;U=Hu(QV(J,Z),GV(q,z),!0)}else if(G==="#")U=iY0(QV(J,Z),G+q);if(U)$.push(U)}return $}function Vu(J){if(!J||typeof J.getValue!=="function"||typeof J.positionAt!=="function")return[];return nY0(J)}var Wu=w(()=>{T9()});class eY{constructor(J,$){this._host=J,this._models=Object.create(null),this._foreignModuleFactory=$,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(J){return this._models[J]}_getModels(){let J=[];return Object.keys(this._models).forEach(($)=>J.push(this._models[$])),J}acceptNewModel(J){this._models[J.url]=new Bu(C0.parse(J.url),J.lines,J.EOL,J.versionId)}acceptModelChanged(J,$){if(!this._models[J])return;this._models[J].onEvents($)}acceptRemovedModel(J){if(!this._models[J])return;delete this._models[J]}async computeUnicodeHighlights(J,$,X){let Y=this._getModel(J);if(!Y)return{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0};return Sw.computeUnicodeHighlights(Y,$,X)}async computeDiff(J,$,X,Y){let Z=this._getModel(J),Q=this._getModel($);if(!Z||!Q)return null;return eY.computeDiff(Z,Q,X,Y)}static computeDiff(J,$,X,Y){let Z=Y==="advanced"?iw.getDefault():iw.getLegacy(),Q=J.getLinesContent(),G=$.getLinesContent(),q=Z.computeDiff(Q,G,X),U=q.changes.length>0?!1:this._modelsAreIdentical(J,$);function z(H){return H.map((j)=>{var V;return[j.original.startLineNumber,j.original.endLineNumberExclusive,j.modified.startLineNumber,j.modified.endLineNumberExclusive,(V=j.innerChanges)===null||V===void 0?void 0:V.map((W)=>[W.originalRange.startLineNumber,W.originalRange.startColumn,W.originalRange.endLineNumber,W.originalRange.endColumn,W.modifiedRange.startLineNumber,W.modifiedRange.startColumn,W.modifiedRange.endLineNumber,W.modifiedRange.endColumn])]})}return{identical:U,quitEarly:q.hitTimeout,changes:z(q.changes),moves:q.moves.map((H)=>[H.lineRangeMapping.original.startLineNumber,H.lineRangeMapping.original.endLineNumberExclusive,H.lineRangeMapping.modified.startLineNumber,H.lineRangeMapping.modified.endLineNumberExclusive,z(H.changes)])}}static _modelsAreIdentical(J,$){let X=J.getLineCount(),Y=$.getLineCount();if(X!==Y)return!1;for(let Z=1;Z<=X;Z++){let Q=J.getLineContent(Z),G=$.getLineContent(Z);if(Q!==G)return!1}return!0}async computeMoreMinimalEdits(J,$,X){let Y=this._getModel(J);if(!Y)return $;let Z=[],Q=void 0;$=$.slice(0).sort((q,U)=>{if(q.range&&U.range)return k.compareRangesUsingStarts(q.range,U.range);let z=q.range?0:1,H=U.range?0:1;return z-H});let G=0;for(let q=1;q<$.length;q++)if(k.getEndPosition($[G].range).equals(k.getStartPosition($[q].range)))$[G].range=k.fromPositions(k.getStartPosition($[G].range),k.getEndPosition($[q].range)),$[G].text+=$[q].text;else G++,$[G]=$[q];$.length=G+1;for(let{range:q,text:U,eol:z}of $){if(typeof z==="number")Q=z;if(k.isEmpty(q)&&!U)continue;let H=Y.getValueInRange(q);if(U=U.replace(/\r\n|\n|\r/g,Y.eol),H===U)continue;if(Math.max(U.length,H.length)>eY._diffLimit){Z.push({range:q,text:U});continue}let j=Mm(H,U,X),V=Y.offsetAt(k.lift(q).getStartPosition());for(let W of j){let B=Y.positionAt(V+W.originalStart),K=Y.positionAt(V+W.originalStart+W.originalLength),P={text:U.substr(W.modifiedStart,W.modifiedLength),range:{startLineNumber:B.lineNumber,startColumn:B.column,endLineNumber:K.lineNumber,endColumn:K.column}};if(Y.getValueInRange(P.range)!==P.text)Z.push(P)}}if(typeof Q==="number")Z.push({eol:Q,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}});return Z}async computeLinks(J){let $=this._getModel(J);if(!$)return null;return Tm($)}async computeDefaultDocumentColors(J){let $=this._getModel(J);if(!$)return null;return Vu($)}async textualSuggest(J,$,X,Y){let Z=new w5,Q=new RegExp(X,Y),G=new Set;J:for(let q of J){let U=this._getModel(q);if(!U)continue;for(let z of U.words(Q)){if(z===$||!isNaN(Number(z)))continue;if(G.add(z),G.size>eY._suggestionsLimit)break J}}return{words:Array.from(G),duration:Z.elapsed()}}async computeWordRanges(J,$,X,Y){let Z=this._getModel(J);if(!Z)return Object.create(null);let Q=new RegExp(X,Y),G=Object.create(null);for(let q=$.startLineNumber;q<$.endLineNumber;q++){let U=Z.getLineWords(q,Q);for(let z of U){if(!isNaN(Number(z.word)))continue;let H=G[z.word];if(!H)H=[],G[z.word]=H;H.push({startLineNumber:q,startColumn:z.startColumn,endLineNumber:q,endColumn:z.endColumn})}}return G}async navigateValueSet(J,$,X,Y,Z){let Q=this._getModel(J);if(!Q)return null;let G=new RegExp(Y,Z);if($.startColumn===$.endColumn)$={startLineNumber:$.startLineNumber,startColumn:$.startColumn,endLineNumber:$.endLineNumber,endColumn:$.endColumn+1};let q=Q.getValueInRange($),U=Q.getWordAtPosition({lineNumber:$.startLineNumber,column:$.startColumn},G);if(!U)return null;let z=Q.getValueInRange(U);return rj.INSTANCE.navigateValueSet($,q,U,z,X)}loadForeignModule(J,$,X){let Q={host:th(X,(G,q)=>{return this._host.fhr(G,q)}),getMirrorModels:()=>{return this._getModels()}};if(this._foreignModuleFactory)return this._foreignModule=this._foreignModuleFactory(Q,$),Promise.resolve(HQ(this._foreignModule));return Promise.reject(Error("Unexpected usage"))}fmr(J,$){if(!this._foreignModule||typeof this._foreignModule[J]!=="function")return Promise.reject(Error("Missing requestHandler or method: "+J));try{return Promise.resolve(this._foreignModule[J].apply(this._foreignModule,$))}catch(X){return Promise.reject(X)}}}var Bu;var Fu=w(()=>{wP();V5();i0();Om();xq();wm();Lm();eN();qX();xm();Uu();n7();Wu();Bu=class Bu extends kw{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(J){let $=[];for(let X=0;X<this._lines.length;X++){let Y=this._lines[X],Z=this.offsetAt(new g(X+1,1)),Q=Y.matchAll(J);for(let G of Q){if(G.index||G.index===0)G.index=G.index+Z;$.push(G)}}return $}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(J){return this._lines[J-1]}getWordAtPosition(J,$){let X=VQ(J.column,eH($),this._lines[J.lineNumber-1],0);if(X)return new k(J.lineNumber,X.startColumn,J.lineNumber,X.endColumn);return null}words(J){let $=this._lines,X=this._wordenize.bind(this),Y=0,Z="",Q=0,G=[];return{*[Symbol.iterator](){while(!0)if(Q<G.length){let q=Z.substring(G[Q].start,G[Q].end);Q+=1,yield q}else if(Y<$.length)Z=$[Y],G=X(Z,J),Q=0,Y+=1;else break}}}getLineWords(J,$){let X=this._lines[J-1],Y=this._wordenize(X,$),Z=[];for(let Q of Y)Z.push({word:X.substring(Q.start,Q.end),startColumn:Q.start+1,endColumn:Q.end+1});return Z}_wordenize(J,$){let X=[],Y;$.lastIndex=0;while(Y=$.exec(J)){if(Y[0].length===0)break;X.push({start:Y.index,end:Y.index+Y[0].length})}return X}getValueInRange(J){if(J=this._validateRange(J),J.startLineNumber===J.endLineNumber)return this._lines[J.startLineNumber-1].substring(J.startColumn-1,J.endColumn-1);let $=this._eol,X=J.startLineNumber-1,Y=J.endLineNumber-1,Z=[];Z.push(this._lines[X].substring(J.startColumn-1));for(let Q=X+1;Q<Y;Q++)Z.push(this._lines[Q]);return Z.push(this._lines[Y].substring(0,J.endColumn-1)),Z.join($)}offsetAt(J){return J=this._validatePosition(J),this._ensureLineStarts(),this._lineStarts.getPrefixSum(J.lineNumber-2)+(J.column-1)}positionAt(J){J=Math.floor(J),J=Math.max(0,J),this._ensureLineStarts();let $=this._lineStarts.getIndexOf(J),X=this._lines[$.index].length;return{lineNumber:1+$.index,column:1+Math.min($.remainder,X)}}_validateRange(J){let $=this._validatePosition({lineNumber:J.startLineNumber,column:J.startColumn}),X=this._validatePosition({lineNumber:J.endLineNumber,column:J.endColumn});if($.lineNumber!==J.startLineNumber||$.column!==J.startColumn||X.lineNumber!==J.endLineNumber||X.column!==J.endColumn)return{startLineNumber:$.lineNumber,startColumn:$.column,endLineNumber:X.lineNumber,endColumn:X.column};return J}_validatePosition(J){if(!g.isIPosition(J))throw Error("bad position");let{lineNumber:$,column:X}=J,Y=!1;if($<1)$=1,X=1,Y=!0;else if($>this._lines.length)$=this._lines.length,X=this._lines[$-1].length+1,Y=!0;else{let Z=this._lines[$-1].length+1;if(X<1)X=1,Y=!0;else if(X>Z)X=Z,Y=!0}if(!Y)return J;else return{lineNumber:$,column:X}}};eY._diffLimit=1e5;eY._suggestionsLimit=1e4;if(typeof importScripts==="function")globalThis.monaco=KA()});var bP,SP;var CP=w(()=>{s0();bP=w0("textResourceConfigurationService"),SP=w0("textResourcePropertiesService")});var D1;var f4=w(()=>{s0();D1=w0("ILanguageFeaturesService")});function Y3(J,$){let X=J.getModel($);if(!X)return!1;if(X.isTooLargeForSyncing())return!1;return!0}class Pu{constructor(J,$,X,Y){this.languageConfigurationService=Y,this._debugDisplayName="wordbasedCompletions",this._workerManager=J,this._configurationService=$,this._modelService=X}async provideCompletionItems(J,$){let X=this._configurationService.getValue(J.uri,$,"editor");if(X.wordBasedSuggestions==="off")return;let Y=[];if(X.wordBasedSuggestions==="currentDocument"){if(Y3(this._modelService,J.uri))Y.push(J.uri)}else for(let H of this._modelService.getModels()){if(!Y3(this._modelService,H.uri))continue;if(H===J)Y.unshift(H.uri);else if(X.wordBasedSuggestions==="allDocuments"||H.getLanguageId()===J.getLanguageId())Y.push(H.uri)}if(Y.length===0)return;let Z=this.languageConfigurationService.getLanguageConfiguration(J.getLanguageId()).getWordDefinition(),Q=J.getWordAtPosition($),G=!Q?k.fromPositions($):new k($.lineNumber,Q.startColumn,$.lineNumber,Q.endColumn),q=G.setEndPosition($.lineNumber,$.column),z=await(await this._workerManager.withWorker()).textualSuggest(Y,Q===null||Q===void 0?void 0:Q.word,Z);if(!z)return;return{duration:z.duration,suggestions:z.words.map((H)=>{return{kind:18,label:H,insertText:H,range:{insert:q,replace:G}}})}}}class ow{constructor(J){this._instance=J,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class vP{constructor(J){this._workerClient=J}fhr(J,$){return this._workerClient.fhr(J,$)}}var oY0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},qV=function(J,$){return function(X,Y){$(X,Y,J)}},Ku=60000,Au=300000,hP,Du,Ru,fP;var tw=w(()=>{e1();z0();rT();lp();i0();j7();Fu();vY();CP();V1();o9();qX();O1();f4();SQ();N9();N8();T0();hP=class extends m{constructor($,X,Y,Z,Q){super();this._modelService=$,this._workerManager=this._register(new Du(this._modelService,Z)),this._logService=Y,this._register(Q.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(G,q)=>{if(!Y3(this._modelService,G.uri))return Promise.resolve({links:[]});return this._workerManager.withWorker().then((U)=>U.computeLinks(G.uri)).then((U)=>{return U&&{links:U}})}})),this._register(Q.completionProvider.register("*",new Pu(this._workerManager,X,this._modelService,Z)))}dispose(){super.dispose()}canComputeUnicodeHighlights($){return Y3(this._modelService,$)}computedUnicodeHighlights($,X,Y){return this._workerManager.withWorker().then((Z)=>Z.computedUnicodeHighlights($,X,Y))}async computeDiff($,X,Y,Z){let Q=await this._workerManager.withWorker().then((U)=>U.computeDiff($,X,Y,Z));if(!Q)return null;return{identical:Q.identical,quitEarly:Q.quitEarly,changes:q(Q.changes),moves:Q.moves.map((U)=>new oj(new w8(new f0(U[0],U[1]),new f0(U[2],U[3])),q(U[4])))};function q(U){return U.map((z)=>{var H;return new $9(new f0(z[0],z[1]),new f0(z[2],z[3]),(H=z[4])===null||H===void 0?void 0:H.map((j)=>new v4(new k(j[0],j[1],j[2],j[3]),new k(j[4],j[5],j[6],j[7]))))})}}computeMoreMinimalEdits($,X,Y=!1){if(K4(X)){if(!Y3(this._modelService,$))return Promise.resolve(X);let Z=w5.create(),Q=this._workerManager.withWorker().then((G)=>G.computeMoreMinimalEdits($,X,Y));return Q.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",$.toString(!0),Z.elapsed())),Promise.race([Q,mY(1000).then(()=>X)])}else return Promise.resolve(void 0)}canNavigateValueSet($){return Y3(this._modelService,$)}navigateValueSet($,X,Y){return this._workerManager.withWorker().then((Z)=>Z.navigateValueSet($,X,Y))}canComputeWordRanges($){return Y3(this._modelService,$)}computeWordRanges($,X){return this._workerManager.withWorker().then((Y)=>Y.computeWordRanges($,X))}};hP=oY0([qV(0,E5),qV(1,bP),qV(2,P5),qV(3,C6),qV(4,D1)],hP);Du=class Du extends m{constructor(J,$){super();this.languageConfigurationService=$,this._modelService=J,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new vG).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Au/2),EY),this._register(this._modelService.onModelRemoved((Y)=>this._checkStopEmptyWorker()))}dispose(){if(this._editorWorkerClient)this._editorWorkerClient.dispose(),this._editorWorkerClient=null;super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;if(this._modelService.getModels().length===0)this._editorWorkerClient.dispose(),this._editorWorkerClient=null}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;if(new Date().getTime()-this._lastWorkerUsedTime>Au)this._editorWorkerClient.dispose(),this._editorWorkerClient=null}withWorker(){if(this._lastWorkerUsedTime=new Date().getTime(),!this._editorWorkerClient)this._editorWorkerClient=new fP(this._modelService,!1,"editorWorkerService",this.languageConfigurationService);return Promise.resolve(this._editorWorkerClient)}};Ru=class Ru extends m{constructor(J,$,X){super();if(this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=J,this._modelService=$,!X){let Y=new SG;Y.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Ku/2)),this._register(Y)}}dispose(){for(let J in this._syncedModels)h1(this._syncedModels[J]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(J,$){for(let X of J){let Y=X.toString();if(!this._syncedModels[Y])this._beginModelSync(X,$);if(this._syncedModels[Y])this._syncedModelsLastUsedTime[Y]=new Date().getTime()}}_checkStopModelSync(){let J=new Date().getTime(),$=[];for(let X in this._syncedModelsLastUsedTime)if(J-this._syncedModelsLastUsedTime[X]>Ku)$.push(X);for(let X of $)this._stopModelSync(X)}_beginModelSync(J,$){let X=this._modelService.getModel(J);if(!X)return;if(!$&&X.isTooLargeForSyncing())return;let Y=J.toString();this._proxy.acceptNewModel({url:X.uri.toString(),lines:X.getLinesContent(),EOL:X.getEOL(),versionId:X.getVersionId()});let Z=new $0;Z.add(X.onDidChangeContent((Q)=>{this._proxy.acceptModelChanged(Y.toString(),Q)})),Z.add(X.onWillDispose(()=>{this._stopModelSync(Y)})),Z.add(N0(()=>{this._proxy.acceptRemovedModel(Y)})),this._syncedModels[Y]=Z}_stopModelSync(J){let $=this._syncedModels[J];delete this._syncedModels[J],delete this._syncedModelsLastUsedTime[J],h1($)}};fP=class fP extends m{constructor(J,$,X,Y){super();this.languageConfigurationService=Y,this._disposed=!1,this._modelService=J,this._keepIdleModels=$,this._workerFactory=new gj(X),this._worker=null,this._modelManager=null}fhr(J,$){throw Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new dT(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new vP(this)))}catch(J){fj(J),this._worker=new ow(new eY(new vP(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,(J)=>{return fj(J),this._worker=new ow(new eY(new vP(this),null)),this._getOrCreateWorker().getProxyObject()})}_getOrCreateModelManager(J){if(!this._modelManager)this._modelManager=this._register(new Ru(J,this._modelService,this._keepIdleModels));return this._modelManager}async _withSyncedResources(J,$=!1){if(this._disposed)return Promise.reject(tf());return this._getProxy().then((X)=>{return this._getOrCreateModelManager(X).ensureSyncedResources(J,$),X})}computedUnicodeHighlights(J,$,X){return this._withSyncedResources([J]).then((Y)=>{return Y.computeUnicodeHighlights(J.toString(),$,X)})}computeDiff(J,$,X,Y){return this._withSyncedResources([J,$],!0).then((Z)=>{return Z.computeDiff(J.toString(),$.toString(),X,Y)})}computeMoreMinimalEdits(J,$,X){return this._withSyncedResources([J]).then((Y)=>{return Y.computeMoreMinimalEdits(J.toString(),$,X)})}computeLinks(J){return this._withSyncedResources([J]).then(($)=>{return $.computeLinks(J.toString())})}computeDefaultDocumentColors(J){return this._withSyncedResources([J]).then(($)=>{return $.computeDefaultDocumentColors(J.toString())})}async textualSuggest(J,$,X){let Y=await this._withSyncedResources(J),Z=X.source,Q=X.flags;return Y.textualSuggest(J.map((G)=>G.toString()),$,Z,Q)}computeWordRanges(J,$){return this._withSyncedResources([J]).then((X)=>{let Y=this._modelService.getModel(J);if(!Y)return Promise.resolve(null);let Z=this.languageConfigurationService.getLanguageConfiguration(Y.getLanguageId()).getWordDefinition(),Q=Z.source,G=Z.flags;return X.computeWordRanges(J.toString(),$,Q,G)})}navigateValueSet(J,$,X){return this._withSyncedResources([J]).then((Y)=>{let Z=this._modelService.getModel(J);if(!Z)return null;let Q=this.languageConfigurationService.getLanguageConfiguration(Z.getLanguageId()).getWordDefinition(),G=Q.source,q=Q.flags;return Y.navigateValueSet(J.toString(),$,X,G,q)})}dispose(){super.dispose(),this._disposed=!0}}});function Mu(J,$,X){return new Ou(J,$,X)}var Ou;var _u=w(()=>{n7();tw();Ou=class Ou extends fP{constructor(J,$,X){super(J,X.keepIdleModels||!1,X.label,$);this._foreignModuleId=X.moduleId,this._foreignModuleCreateData=X.createData||null,this._foreignModuleHost=X.host||null,this._foreignProxy=null}fhr(J,$){if(!this._foreignModuleHost||typeof this._foreignModuleHost[J]!=="function")return Promise.reject(Error("Missing method "+J+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[J].apply(this._foreignModuleHost,$))}catch(X){return Promise.reject(X)}}_getForeignProxy(){if(!this._foreignProxy)this._foreignProxy=this._getProxy().then((J)=>{let $=this._foreignModuleHost?HQ(this._foreignModuleHost):[];return J.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,$).then((X)=>{this._foreignModuleCreateData=null;let Y=(G,q)=>{return J.fmr(G,q)},Z=(G,q)=>{return function(){let U=Array.prototype.slice.call(arguments,0);return q(G,U)}},Q={};for(let G of X)Q[G]=Z(G,Y);return Q})});return this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(J){return this._withSyncedResources(J).then(($)=>this.getProxy())}}});var vQ;var UV=w(()=>{vQ={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}});function gP(J,$){return new MG([new UX(0,"",J)],$)}function AU(J,$){let X=new Uint32Array(2);return X[0]=0,X[1]=(J<<0|0|0|32768|33554432)>>>0,new DQ(X,$===null?hQ:$)}var hQ;var zV=w(()=>{c8();hQ=new class{clone(){return this}equals(J){return this===J}}});class j8{static getLanguageId(J){return(J&255)>>>0}static getTokenType(J){return(J&768)>>>8}static containsBalancedBrackets(J){return(J&1024)!==0}static getFontStyle(J){return(J&30720)>>>11}static getForeground(J){return(J&16744448)>>>15}static getBackground(J){return(J&4278190080)>>>24}static getClassNameFromMetadata(J){let X="mtk"+this.getForeground(J),Y=this.getFontStyle(J);if(Y&1)X+=" mtki";if(Y&2)X+=" mtkb";if(Y&4)X+=" mtku";if(Y&8)X+=" mtks";return X}static getInlineStyleFromMetadata(J,$){let X=this.getForeground(J),Y=this.getFontStyle(J),Z=`color: ${$[X]};`;if(Y&1)Z+="font-style: italic;";if(Y&2)Z+="font-weight: bold;";let Q="";if(Y&4)Q+=" underline";if(Y&8)Q+=" line-through";if(Q)Z+=`text-decoration:${Q};`;return Z}static getPresentationFromMetadata(J){let $=this.getForeground(J),X=this.getFontStyle(J);return{foreground:$,italic:Boolean(X&1),bold:Boolean(X&2),underline:Boolean(X&4),strikethrough:Boolean(X&8)}}}class v6{static createEmpty(J,$){let X=v6.defaultTokenMetadata,Y=new Uint32Array(2);return Y[0]=J.length,Y[1]=X,new v6(Y,J,$)}constructor(J,$,X){this._lineTokensBrand=void 0,this._tokens=J,this._tokensCount=this._tokens.length>>>1,this._text=$,this._languageIdCodec=X}equals(J){if(J instanceof v6)return this.slicedEquals(J,0,this._tokensCount);return!1}slicedEquals(J,$,X){if(this._text!==J._text)return!1;if(this._tokensCount!==J._tokensCount)return!1;let Y=$<<1,Z=Y+(X<<1);for(let Q=Y;Q<Z;Q++)if(this._tokens[Q]!==J._tokens[Q])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(J){if(J>0)return this._tokens[J-1<<1];return 0}getMetadata(J){return this._tokens[(J<<1)+1]}getLanguageId(J){let $=this._tokens[(J<<1)+1],X=j8.getLanguageId($);return this._languageIdCodec.decodeLanguageId(X)}getStandardTokenType(J){let $=this._tokens[(J<<1)+1];return j8.getTokenType($)}getForeground(J){let $=this._tokens[(J<<1)+1];return j8.getForeground($)}getClassName(J){let $=this._tokens[(J<<1)+1];return j8.getClassNameFromMetadata($)}getInlineStyle(J,$){let X=this._tokens[(J<<1)+1];return j8.getInlineStyleFromMetadata(X,$)}getPresentation(J){let $=this._tokens[(J<<1)+1];return j8.getPresentationFromMetadata($)}getEndOffset(J){return this._tokens[J<<1]}findTokenIndexAtOffset(J){return v6.findIndexInTokensArray(this._tokens,J)}inflate(){return this}sliceAndInflate(J,$,X){return new ew(this,J,$,X)}static convertToEndOffset(J,$){let Y=(J.length>>>1)-1;for(let Z=0;Z<Y;Z++)J[Z<<1]=J[Z+1<<1];J[Y<<1]=$}static findIndexInTokensArray(J,$){if(J.length<=2)return 0;let X=0,Y=(J.length>>>1)-1;while(X<Y){let Z=X+Math.floor((Y-X)/2),Q=J[Z<<1];if(Q===$)return Z+1;else if(Q<$)X=Z+1;else if(Q>$)Y=Z}return X}withInserted(J){if(J.length===0)return this;let $=0,X=0,Y="",Z=[],Q=0;while(!0){let G=$<this._tokensCount?this._tokens[$<<1]:-1,q=X<J.length?J[X]:null;if(G!==-1&&(q===null||G<=q.offset)){Y+=this._text.substring(Q,G);let U=this._tokens[($<<1)+1];Z.push(Y.length,U),$++,Q=G}else if(q){if(q.offset>Q){Y+=this._text.substring(Q,q.offset);let U=this._tokens[($<<1)+1];Z.push(Y.length,U),Q=q.offset}Y+=q.text,Z.push(Y.length,q.tokenMetadata),X++}else break}return new v6(new Uint32Array(Z),Y,this._languageIdCodec)}}class ew{constructor(J,$,X,Y){this._source=J,this._startOffset=$,this._endOffset=X,this._deltaOffset=Y,this._firstTokenIndex=J.findTokenIndexAtOffset($),this._tokensCount=0;for(let Z=this._firstTokenIndex,Q=J.getCount();Z<Q;Z++){if(J.getStartOffset(Z)>=X)break;this._tokensCount++}}getMetadata(J){return this._source.getMetadata(this._firstTokenIndex+J)}getLanguageId(J){return this._source.getLanguageId(this._firstTokenIndex+J)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(J){if(J instanceof ew)return this._startOffset===J._startOffset&&this._endOffset===J._endOffset&&this._deltaOffset===J._deltaOffset&&this._source.slicedEquals(J._source,this._firstTokenIndex,this._tokensCount);return!1}getCount(){return this._tokensCount}getForeground(J){return this._source.getForeground(this._firstTokenIndex+J)}getEndOffset(J){let $=this._source.getEndOffset(this._firstTokenIndex+J);return Math.min(this._endOffset,$)-this._startOffset+this._deltaOffset}getClassName(J){return this._source.getClassName(this._firstTokenIndex+J)}getInlineStyle(J,$){return this._source.getInlineStyle(this._firstTokenIndex+J,$)}getPresentation(J){return this._source.getPresentation(this._firstTokenIndex+J)}findTokenIndexAtOffset(J){return this._source.findTokenIndexAtOffset(J+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}var JZ=w(()=>{v6.defaultTokenMetadata=33587200});class w9{constructor(J,$,X,Y){this.startColumn=J,this.endColumn=$,this.className=X,this.type=Y,this._lineDecorationBrand=void 0}static _equals(J,$){return J.startColumn===$.startColumn&&J.endColumn===$.endColumn&&J.className===$.className&&J.type===$.type}static equalsArr(J,$){let X=J.length,Y=$.length;if(X!==Y)return!1;for(let Z=0;Z<X;Z++)if(!w9._equals(J[Z],$[Z]))return!1;return!0}static extractWrapped(J,$,X){if(J.length===0)return J;let Y=$+1,Z=X+1,Q=X-$,G=[],q=0;for(let U of J){if(U.endColumn<=Y||U.startColumn>=Z)continue;G[q++]=new w9(Math.max(1,U.startColumn-Y+1),Math.min(Q+1,U.endColumn-Y+1),U.className,U.type)}return G}static filter(J,$,X,Y){if(J.length===0)return[];let Z=[],Q=0;for(let G=0,q=J.length;G<q;G++){let U=J[G],z=U.range;if(z.endLineNumber<$||z.startLineNumber>$)continue;if(z.isEmpty()&&(U.type===0||U.type===3))continue;let H=z.startLineNumber===$?z.startColumn:X,j=z.endLineNumber===$?z.endColumn:Y;Z[Q++]=new w9(H,j,U.inlineClassName,U.type)}return Z}static _typeCompare(J,$){let X=[2,0,1,3];return X[J]-X[$]}static compare(J,$){if(J.startColumn!==$.startColumn)return J.startColumn-$.startColumn;if(J.endColumn!==$.endColumn)return J.endColumn-$.endColumn;let X=w9._typeCompare(J.type,$.type);if(X!==0)return X;if(J.className!==$.className)return J.className<$.className?-1:1;return 0}}class JL{constructor(J,$,X,Y){this.startOffset=J,this.endOffset=$,this.className=X,this.metadata=Y}}class pP{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(J){let $=0;for(let X=0,Y=J.length;X<Y;X++)$|=J[X];return $}consumeLowerThan(J,$,X){while(this.count>0&&this.stopOffsets[0]<J){let Y=0;while(Y+1<this.count&&this.stopOffsets[Y]===this.stopOffsets[Y+1])Y++;X.push(new JL($,this.stopOffsets[Y],this.classNames.join(" "),pP._metadata(this.metadata))),$=this.stopOffsets[Y]+1,this.stopOffsets.splice(0,Y+1),this.classNames.splice(0,Y+1),this.metadata.splice(0,Y+1),this.count-=Y+1}if(this.count>0&&$<J)X.push(new JL($,J-1,this.classNames.join(" "),pP._metadata(this.metadata))),$=J;return $}insert(J,$,X){if(this.count===0||this.stopOffsets[this.count-1]<=J)this.stopOffsets.push(J),this.classNames.push($),this.metadata.push(X);else for(let Y=0;Y<this.count;Y++)if(this.stopOffsets[Y]>=J){this.stopOffsets.splice(Y,0,J),this.classNames.splice(Y,0,$),this.metadata.splice(Y,0,X);break}this.count++;return}}class $L{static normalize(J,$){if($.length===0)return[];let X=[],Y=new pP,Z=0;for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q],U=q.startColumn,z=q.endColumn,H=q.className,j=q.type===1?2:q.type===2?4:0;if(U>1){let B=J.charCodeAt(U-2);if(P6(B))U--}if(z>1){let B=J.charCodeAt(z-2);if(P6(B))z--}let V=U-1,W=z-2;if(Z=Y.consumeLowerThan(V,Z,X),Y.count===0)Z=V;Y.insert(W,H,j)}return Y.consumeLowerThan(1073741824,Z,X),X}}var mP=w(()=>{X1()});class b5{constructor(J,$,X,Y){this.endIndex=J,this.type=$,this.metadata=X,this.containsRTL=Y,this._linePartBrand=void 0}isWhitespace(){return this.metadata&1?!0:!1}isPseudoAfter(){return this.metadata&4?!0:!1}}class HV{constructor(J,$){this.startOffset=J,this.endOffset=$}equals(J){return this.startOffset===J.startOffset&&this.endOffset===J.endOffset}}class K${constructor(J,$,X,Y,Z,Q,G,q,U,z,H,j,V,W,B,K,P,A,D){this.useMonospaceOptimizations=J,this.canUseHalfwidthRightwardsArrow=$,this.lineContent=X,this.continuesWithWrappedLine=Y,this.isBasicASCII=Z,this.containsRTL=Q,this.fauxIndentLength=G,this.lineTokens=q,this.lineDecorations=U.sort(w9.compare),this.tabSize=z,this.startVisibleColumn=H,this.spaceWidth=j,this.stopRenderingLineAfter=B,this.renderWhitespace=K==="all"?4:K==="boundary"?1:K==="selection"?2:K==="trailing"?3:0,this.renderControlCharacters=P,this.fontLigatures=A,this.selectionsOnLine=D&&D.sort((O,N)=>O.startOffset<N.startOffset?-1:1);let M=Math.abs(W-j),R=Math.abs(V-j);if(M<R)this.renderSpaceWidth=W,this.renderSpaceCharCode=11825;else this.renderSpaceWidth=V,this.renderSpaceCharCode=183}sameSelection(J){if(this.selectionsOnLine===null)return J===null;if(J===null)return!1;if(J.length!==this.selectionsOnLine.length)return!1;for(let $=0;$<this.selectionsOnLine.length;$++)if(!this.selectionsOnLine[$].equals(J[$]))return!1;return!0}equals(J){return this.useMonospaceOptimizations===J.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===J.canUseHalfwidthRightwardsArrow&&this.lineContent===J.lineContent&&this.continuesWithWrappedLine===J.continuesWithWrappedLine&&this.isBasicASCII===J.isBasicASCII&&this.containsRTL===J.containsRTL&&this.fauxIndentLength===J.fauxIndentLength&&this.tabSize===J.tabSize&&this.startVisibleColumn===J.startVisibleColumn&&this.spaceWidth===J.spaceWidth&&this.renderSpaceWidth===J.renderSpaceWidth&&this.renderSpaceCharCode===J.renderSpaceCharCode&&this.stopRenderingLineAfter===J.stopRenderingLineAfter&&this.renderWhitespace===J.renderWhitespace&&this.renderControlCharacters===J.renderControlCharacters&&this.fontLigatures===J.fontLigatures&&w9.equalsArr(this.lineDecorations,J.lineDecorations)&&this.lineTokens.equals(J.lineTokens)&&this.sameSelection(J.selectionsOnLine)}}class cP{constructor(J,$){this.partIndex=J,this.charIndex=$}}class RX{static getPartIndex(J){return(J&4294901760)>>>16}static getCharIndex(J){return(J&65535)>>>0}constructor(J,$){this.length=J,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(J,$,X,Y){let Z=($<<16|X<<0)>>>0;this._data[J-1]=Z,this._horizontalOffset[J-1]=Y}getHorizontalOffset(J){if(this._horizontalOffset.length===0)return 0;return this._horizontalOffset[J-1]}charOffsetToPartData(J){if(this.length===0)return 0;if(J<0)return this._data[0];if(J>=this.length)return this._data[this.length-1];return this._data[J]}getDomPosition(J){let $=this.charOffsetToPartData(J-1),X=RX.getPartIndex($),Y=RX.getCharIndex($);return new cP(X,Y)}getColumn(J,$){return this.partDataToCharOffset(J.partIndex,$,J.charIndex)+1}partDataToCharOffset(J,$,X){if(this.length===0)return 0;let Y=(J<<16|X<<0)>>>0,Z=0,Q=this.length-1;while(Z+1<Q){let B=Z+Q>>>1,K=this._data[B];if(K===Y)return B;else if(K>Y)Q=B;else Z=B}if(Z===Q)return Z;let G=this._data[Z],q=this._data[Q];if(G===Y)return Z;if(q===Y)return Q;let U=RX.getPartIndex(G),z=RX.getCharIndex(G),H=RX.getPartIndex(q),j;if(U!==H)j=$;else j=RX.getCharIndex(q);let V=X-z,W=j-X;if(V<=W)return Z;return Q}}class uP{constructor(J,$,X){this._renderLineOutputBrand=void 0,this.characterMapping=J,this.containsRTL=$,this.containsForeignElements=X}}function jV(J,$){if(J.lineContent.length===0){if(J.lineDecorations.length>0){$.appendString("<span>");let X=0,Y=0,Z=0;for(let G of J.lineDecorations)if(G.type===1||G.type===2){if($.appendString('<span class="'),$.appendString(G.className),$.appendString('"></span>'),G.type===1)Z|=1,X++;if(G.type===2)Z|=2,Y++}$.appendString("</span>");let Q=new RX(1,X+Y);return Q.setColumnInfo(1,X,0,0),new uP(Q,!1,Z)}return $.appendString("<span><span></span></span>"),new uP(new RX(0,0),!1,0)}return ZZ0(tY0(J),$)}class Tu{constructor(J,$,X,Y){this.characterMapping=J,this.html=$,this.containsRTL=X,this.containsForeignElements=Y}}function PU(J){let $=new dY(1e4),X=jV(J,$);return new Tu(X.characterMapping,$.build(),X.containsRTL,X.containsForeignElements)}class wu{constructor(J,$,X,Y,Z,Q,G,q,U,z,H,j,V,W,B,K){this.fontIsMonospace=J,this.canUseHalfwidthRightwardsArrow=$,this.lineContent=X,this.len=Y,this.isOverflowing=Z,this.overflowingCharCount=Q,this.parts=G,this.containsForeignElements=q,this.fauxIndentLength=U,this.tabSize=z,this.startVisibleColumn=H,this.containsRTL=j,this.spaceWidth=V,this.renderSpaceCharCode=W,this.renderWhitespace=B,this.renderControlCharacters=K}}function tY0(J){let $=J.lineContent,X,Y,Z;if(J.stopRenderingLineAfter!==-1&&J.stopRenderingLineAfter<$.length)X=!0,Y=$.length-J.stopRenderingLineAfter,Z=J.stopRenderingLineAfter;else X=!1,Y=0,Z=$.length;let Q=eY0($,J.containsRTL,J.lineTokens,J.fauxIndentLength,Z);if(J.renderControlCharacters&&!J.isBasicASCII)Q=$Z0($,Q);if(J.renderWhitespace===4||J.renderWhitespace===1||J.renderWhitespace===2&&!!J.selectionsOnLine||J.renderWhitespace===3&&!J.continuesWithWrappedLine)Q=XZ0(J,$,Z,Q);let G=0;if(J.lineDecorations.length>0){for(let q=0,U=J.lineDecorations.length;q<U;q++){let z=J.lineDecorations[q];if(z.type===3)G|=1;else if(z.type===1)G|=1;else if(z.type===2)G|=2}Q=YZ0($,Z,Q,J.lineDecorations)}if(!J.containsRTL)Q=JZ0($,Q,!J.isBasicASCII||J.fontLigatures);return new wu(J.useMonospaceOptimizations,J.canUseHalfwidthRightwardsArrow,$,Z,X,Y,Q,G,J.fauxIndentLength,J.tabSize,J.startVisibleColumn,J.containsRTL,J.spaceWidth,J.renderSpaceCharCode,J.renderWhitespace,J.renderControlCharacters)}function eY0(J,$,X,Y,Z){let Q=[],G=0;if(Y>0)Q[G++]=new b5(Y,"",0,!1);let q=Y;for(let U=0,z=X.getCount();U<z;U++){let H=X.getEndOffset(U);if(H<=Y)continue;let j=X.getClassName(U);if(H>=Z){let W=$?xY(J.substring(q,Z)):!1;Q[G++]=new b5(Z,j,0,W);break}let V=$?xY(J.substring(q,H)):!1;Q[G++]=new b5(H,j,0,V),q=H}return Q}function JZ0(J,$,X){let Y=0,Z=[],Q=0;if(X)for(let G=0,q=$.length;G<q;G++){let U=$[G],z=U.endIndex;if(Y+50<z){let{type:H,metadata:j,containsRTL:V}=U,W=-1,B=Y;for(let K=Y;K<z;K++){if(J.charCodeAt(K)===32)W=K;if(W!==-1&&K-B>=50)Z[Q++]=new b5(W+1,H,j,V),B=W+1,W=-1}if(B!==z)Z[Q++]=new b5(z,H,j,V)}else Z[Q++]=U;Y=z}else for(let G=0,q=$.length;G<q;G++){let U=$[G],z=U.endIndex,H=z-Y;if(H>50){let{type:j,metadata:V,containsRTL:W}=U,B=Math.ceil(H/50);for(let K=1;K<B;K++){let P=Y+K*50;Z[Q++]=new b5(P,j,V,W)}Z[Q++]=new b5(z,j,V,W)}else Z[Q++]=U;Y=z}return Z}function Lu(J){if(J<32)return J!==9;if(J===127)return!0;if(J>=8234&&J<=8238||J>=8294&&J<=8297||J>=8206&&J<=8207||J===1564)return!0;return!1}function $Z0(J,$){let X=[],Y=new b5(0,"",0,!1),Z=0;for(let Q of $){let G=Q.endIndex;for(;Z<G;Z++){let q=J.charCodeAt(Z);if(Lu(q)){if(Z>Y.endIndex)Y=new b5(Z,Q.type,Q.metadata,Q.containsRTL),X.push(Y);Y=new b5(Z+1,"mtkcontrol",Q.metadata,!1),X.push(Y)}}if(Z>Y.endIndex)Y=new b5(G,Q.type,Q.metadata,Q.containsRTL),X.push(Y)}return X}function XZ0(J,$,X,Y){let{continuesWithWrappedLine:Z,fauxIndentLength:Q,tabSize:G,startVisibleColumn:q,useMonospaceOptimizations:U,selectionsOnLine:z}=J,H=J.renderWhitespace===1,j=J.renderWhitespace===3,V=J.renderSpaceWidth!==J.spaceWidth,W=[],B=0,K=0,P=Y[K].type,A=Y[K].containsRTL,D=Y[K].endIndex,M=Y.length,R=!1,O=c6($),N;if(O===-1)R=!0,O=X,N=X;else N=r9($);let T=!1,S=0,v=z&&z[S],l=q%G;for(let h=Q;h<X;h++){let L=$.charCodeAt(h);if(v&&h>=v.endOffset)S++,v=z&&z[S];let b;if(h<O||h>N)b=!0;else if(L===9)b=!0;else if(L===32)if(H)if(T)b=!0;else{let p=h+1<X?$.charCodeAt(h+1):0;b=p===32||p===9}else b=!0;else b=!1;if(b&&z)b=!!v&&v.startOffset<=h&&v.endOffset>h;if(b&&j)b=R||h>N;if(b&&A){if(h>=O&&h<=N)b=!1}if(T){if(!b||!U&&l>=G){if(V){let p=B>0?W[B-1].endIndex:Q;for(let d=p+1;d<=h;d++)W[B++]=new b5(d,"mtkw",1,!1)}else W[B++]=new b5(h,"mtkw",1,!1);l=l%G}}else if(h===D||b&&h>Q)W[B++]=new b5(h,P,0,A),l=l%G;if(L===9)l=G;else if(R4(L))l+=2;else l++;T=b;while(h===D)if(K++,K<M)P=Y[K].type,A=Y[K].containsRTL,D=Y[K].endIndex;else break}let f=!1;if(T)if(Z&&H){let h=X>0?$.charCodeAt(X-1):0,L=X>1?$.charCodeAt(X-2):0;if(!(h===32&&(L!==32&&L!==9)))f=!0}else f=!0;if(f)if(V){let h=B>0?W[B-1].endIndex:Q;for(let L=h+1;L<=X;L++)W[B++]=new b5(L,"mtkw",1,!1)}else W[B++]=new b5(X,"mtkw",1,!1);else W[B++]=new b5(X,P,0,A);return W}function YZ0(J,$,X,Y){Y.sort(w9.compare);let Z=$L.normalize(J,Y),Q=Z.length,G=0,q=[],U=0,z=0;for(let j=0,V=X.length;j<V;j++){let W=X[j],B=W.endIndex,K=W.type,P=W.metadata,A=W.containsRTL;while(G<Q&&Z[G].startOffset<B){let D=Z[G];if(D.startOffset>z)z=D.startOffset,q[U++]=new b5(z,K,P,A);if(D.endOffset+1<=B)z=D.endOffset+1,q[U++]=new b5(z,K+" "+D.className,P|D.metadata,A),G++;else{z=B,q[U++]=new b5(z,K+" "+D.className,P|D.metadata,A);break}}if(B>z)z=B,q[U++]=new b5(z,K,P,A)}let H=X[X.length-1].endIndex;if(G<Q&&Z[G].startOffset===H)while(G<Q&&Z[G].startOffset===H){let j=Z[G];q[U++]=new b5(z,j.className,j.metadata,!1),G++}return q}function ZZ0(J,$){let{fontIsMonospace:X,canUseHalfwidthRightwardsArrow:Y,containsForeignElements:Z,lineContent:Q,len:G,isOverflowing:q,overflowingCharCount:U,parts:z,fauxIndentLength:H,tabSize:j,startVisibleColumn:V,containsRTL:W,spaceWidth:B,renderSpaceCharCode:K,renderWhitespace:P,renderControlCharacters:A}=J,D=new RX(G+1,z.length),M=!1,R=0,O=V,N=0,T=0,S=0;if(W)$.appendString('<span dir="ltr">');else $.appendString("<span>");for(let v=0,l=z.length;v<l;v++){let f=z[v],h=f.endIndex,L=f.type,b=f.containsRTL,p=P!==0&&f.isWhitespace(),d=p&&!X&&(L==="mtkw"||!Z),s=R===h&&f.isPseudoAfter();if(N=0,$.appendString("<span "),b)$.appendString('style="unicode-bidi:isolate" ');if($.appendString('class="'),$.appendString(d?"mtkz":L),$.appendASCIICharCode(34),p){let c=0;{let i=R,J0=O;for(;i<h;i++){let M0=(Q.charCodeAt(i)===9?j-J0%j:1)|0;if(c+=M0,i>=H)J0+=M0}}if(d)$.appendString(' style="width:'),$.appendString(String(B*c)),$.appendString('px"');$.appendASCIICharCode(62);for(;R<h;R++){D.setColumnInfo(R+1,v-S,N,T),S=0;let i=Q.charCodeAt(R),J0,W0;if(i===9){if(J0=j-O%j|0,W0=J0,!Y||W0>1)$.appendCharCode(8594);else $.appendCharCode(65515);for(let M0=2;M0<=W0;M0++)$.appendCharCode(160)}else J0=2,W0=1,$.appendCharCode(K),$.appendCharCode(8204);if(N+=J0,T+=W0,R>=H)O+=W0}}else{$.appendASCIICharCode(62);for(;R<h;R++){D.setColumnInfo(R+1,v-S,N,T),S=0;let c=Q.charCodeAt(R),i=1,J0=1;switch(c){case 9:i=j-O%j,J0=i;for(let W0=1;W0<=i;W0++)$.appendCharCode(160);break;case 32:$.appendCharCode(160);break;case 60:$.appendString("&lt;");break;case 62:$.appendString("&gt;");break;case 38:$.appendString("&amp;");break;case 0:if(A)$.appendCharCode(9216);else $.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:$.appendCharCode(65533);break;default:if(R4(c))J0++;if(A&&c<32)$.appendCharCode(9216+c);else if(A&&c===127)$.appendCharCode(9249);else if(A&&Lu(c))$.appendString("[U+"),$.appendString(QZ0(c)),$.appendString("]"),i=8,J0=i;else $.appendCharCode(c)}if(N+=i,T+=J0,R>=H)O+=J0}}if(s)S++;else S=0;if(R>=G&&!M&&f.isPseudoAfter())M=!0,D.setColumnInfo(R+1,v,N,T);$.appendString("</span>")}if(!M)D.setColumnInfo(G+1,z.length-1,N,T);if(q)$.appendString('<span class="mtkoverflow">'),$.appendString(F("showMore","Show more ({0})",GZ0(U))),$.appendString("</span>");return $.appendString("</span>"),new uP(D,W,Z)}function QZ0(J){return J.toString(16).toUpperCase().padStart(4,"0")}function GZ0(J){if(J<1024)return F("overflow.chars","{0} chars",J);if(J<1048576)return`${(J/1024).toFixed(1)} KB`;return`${(J/1024/1024).toFixed(1)} MB`}var DU=w(()=>{c0();X1();mG();mP()});class lP{constructor(J,$,X,Y){this._viewportBrand=void 0,this.top=J|0,this.left=$|0,this.width=X|0,this.height=Y|0}}class XL{constructor(J,$){this.tabSize=J,this.data=$}}class RU{constructor(J,$,X,Y,Z,Q,G){this._viewLineDataBrand=void 0,this.content=J,this.continuesWithWrappedLine=$,this.minColumn=X,this.maxColumn=Y,this.startVisibleColumn=Z,this.tokens=Q,this.inlineDecorations=G}}class V7{constructor(J,$,X,Y,Z,Q,G,q,U,z){this.minColumn=J,this.maxColumn=$,this.content=X,this.continuesWithWrappedLine=Y,this.isBasicASCII=V7.isBasicASCII(X,Q),this.containsRTL=V7.containsRTL(X,this.isBasicASCII,Z),this.tokens=G,this.inlineDecorations=q,this.tabSize=U,this.startVisibleColumn=z}static isBasicASCII(J,$){if($)return dq(J);return!0}static containsRTL(J,$,X){if(!$&&X)return xY(J);return!1}}class fQ{constructor(J,$,X){this.range=J,this.inlineClassName=$,this.type=X}}class YL{constructor(J,$,X,Y){this.startOffset=J,this.endOffset=$,this.inlineClassName=X,this.inlineClassNameAffectsLetterSpacing=Y}toInlineDecoration(J){return new fQ(new k(J,this.startOffset+1,J,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class VV{constructor(J,$){this._viewModelDecorationBrand=void 0,this.range=J,this.options=$}}class Z3{constructor(J,$,X){this.color=J,this.zIndex=$,this.data=X}static compareByRenderingProps(J,$){if(J.zIndex===$.zIndex){if(J.color<$.color)return-1;if(J.color>$.color)return 1;return 0}return J.zIndex-$.zIndex}static equals(J,$){return J.color===$.color&&J.zIndex===$.zIndex&&B6(J.data,$.data)}static equalsArr(J,$){return B6(J,$,Z3.equals)}}var NJ=w(()=>{V1();X1();i0()});function qZ0(J){return Array.isArray(J)}function ku(J){return!qZ0(J)}function ZL(J){return typeof J==="string"}function QL(J){return!ZL(J)}function Q3(J){return J?!1:!0}function MX(J,$){return J.ignoreCase&&$?$.toLowerCase():$}function GL(J){return J.replace(/[&<>'"_]/g,"-")}function Eu(J,$){console.log(`${J.languageId}: ${$}`)}function U6(J,$){return Error(`${J.languageId}: ${$}`)}function OX(J,$,X,Y,Z){let Q=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,G=null;return $.replace(Q,function(q,U,z,H,j,V,W,B,K){if(!Q3(z))return"$";if(!Q3(H))return MX(J,X);if(!Q3(j)&&j<Y.length)return MX(J,Y[j]);if(!Q3(W)&&J&&typeof J[W]==="string")return J[W];if(G===null)G=Z.split("."),G.unshift(Z);if(!Q3(V)&&V<G.length)return MX(J,G[V]);return""})}function WV(J,$){let X=$;while(X&&X.length>0){let Y=J.tokenizer[X];if(Y)return Y;let Z=X.lastIndexOf(".");if(Z<0)X=null;else X=X.substr(0,Z)}return null}function Iu(J,$){let X=$;while(X&&X.length>0){if(J.stateNames[X])return!0;let Z=X.lastIndexOf(".");if(Z<0)X=null;else X=X.substr(0,Z)}return!1}class _U{static create(J,$){return this._INSTANCE.create(J,$)}constructor(J){this._maxCacheDepth=J,this._entries=Object.create(null)}create(J,$){if(J!==null&&J.depth>=this._maxCacheDepth)return new OU(J,$);let X=OU.getStackElementId(J);if(X.length>0)X+="|";X+=$;let Y=this._entries[X];if(Y)return Y;return Y=new OU(J,$),this._entries[X]=Y,Y}}class OU{constructor(J,$){this.parent=J,this.state=$,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(J){let $="";while(J!==null){if($.length>0)$+="|";$+=J.state,J=J.parent}return $}static _equals(J,$){while(J!==null&&$!==null){if(J===$)return!0;if(J.state!==$.state)return!1;J=J.parent,$=$.parent}if(J===null&&$===null)return!0;return!1}equals(J){return OU._equals(this,J)}push(J){return _U.create(this,J)}pop(){return this.parent}popall(){let J=this;while(J.parent)J=J.parent;return J}switchTo(J){return _U.create(this.parent,J)}}class MU{constructor(J,$){this.languageId=J,this.state=$}equals(J){return this.languageId===J.languageId&&this.state.equals(J.state)}clone(){if(this.state.clone()===this.state)return this;return new MU(this.languageId,this.state)}}class $Z{static create(J,$){return this._INSTANCE.create(J,$)}constructor(J){this._maxCacheDepth=J,this._entries=Object.create(null)}create(J,$){if($!==null)return new BV(J,$);if(J!==null&&J.depth>=this._maxCacheDepth)return new BV(J,$);let X=OU.getStackElementId(J),Y=this._entries[X];if(Y)return Y;return Y=new BV(J,null),this._entries[X]=Y,Y}}class BV{constructor(J,$){this.stack=J,this.embeddedLanguageData=$}clone(){if((this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData)return this;return $Z.create(this.stack,this.embeddedLanguageData)}equals(J){if(!(J instanceof BV))return!1;if(!this.stack.equals(J.stack))return!1;if(this.embeddedLanguageData===null&&J.embeddedLanguageData===null)return!0;if(this.embeddedLanguageData===null||J.embeddedLanguageData===null)return!1;return this.embeddedLanguageData.equals(J.embeddedLanguageData)}}class bu{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(J){this._languageId=J}emit(J,$){if(this._lastTokenType===$&&this._lastTokenLanguage===this._languageId)return;this._lastTokenType=$,this._lastTokenLanguage=this._languageId,this._tokens.push(new UX(J,$,this._languageId))}nestedLanguageTokenize(J,$,X,Y){let{languageId:Z,state:Q}=X,G=$6.get(Z);if(!G)return this.enterLanguage(Z),this.emit(Y,""),Q;let q=G.tokenize(J,$,Q);if(Y!==0)for(let U of q.tokens)this._tokens.push(new UX(U.offset+Y,U.type,U.language));else this._tokens=this._tokens.concat(q.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,q.endState}finalize(J){return new MG(this._tokens,J)}}class dP{constructor(J,$){this._languageService=J,this._theme=$,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(J){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(J)}emit(J,$){let X=this._theme.match(this._currentLanguageId,$)|1024;if(this._lastTokenMetadata===X)return;this._lastTokenMetadata=X,this._tokens.push(J),this._tokens.push(X)}static _merge(J,$,X){let Y=J!==null?J.length:0,Z=$.length,Q=X!==null?X.length:0;if(Y===0&&Z===0&&Q===0)return new Uint32Array(0);if(Y===0&&Z===0)return X;if(Z===0&&Q===0)return J;let G=new Uint32Array(Y+Z+Q);if(J!==null)G.set(J);for(let q=0;q<Z;q++)G[Y+q]=$[q];if(X!==null)G.set(X,Y+Z);return G}nestedLanguageTokenize(J,$,X,Y){let{languageId:Z,state:Q}=X,G=$6.get(Z);if(!G)return this.enterLanguage(Z),this.emit(Y,""),Q;let q=G.tokenizeEncoded(J,$,Q);if(Y!==0)for(let U=0,z=q.tokens.length;U<z;U+=2)q.tokens[U]+=Y;return this._prependTokens=dP._merge(this._prependTokens,this._tokens,q.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,q.endState}finalize(J){return new DQ(dP._merge(this._prependTokens,this._tokens,null),J)}}function HZ0(J,$){if(!$)return null;$=MX(J,$);let X=J.brackets;for(let Y of X)if(Y.open===$)return{token:Y.token,bracketType:1};else if(Y.close===$)return{token:Y.token,bracketType:-1};return null}var UZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},zZ0=function(J,$){return function(X,Y){$(X,Y,J)}},qL,xu=5,G3;var UL=w(()=>{z0();c8();zV();H7();_U._INSTANCE=new _U(xu);$Z._INSTANCE=new $Z(xu);G3=qL=class extends m{constructor($,X,Y,Z,Q){super();this._configurationService=Q,this._languageService=$,this._standaloneThemeService=X,this._languageId=Y,this._lexer=Z,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let G=!1;this._register($6.onDidChange((q)=>{if(G)return;let U=!1;for(let z=0,H=q.changedLanguages.length;z<H;z++){let j=q.changedLanguages[z];if(this._embeddedLanguages[j]){U=!0;break}}if(U)G=!0,$6.handleChange([this._languageId]),G=!1})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration((q)=>{if(q.affectsConfiguration("editor.maxTokenizationLineLength"))this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId})}))}getLoadStatus(){let $=[];for(let X in this._embeddedLanguages){let Y=$6.get(X);if(Y){if(Y instanceof qL){let Z=Y.getLoadStatus();if(Z.loaded===!1)$.push(Z.promise)}continue}if(!$6.isResolved(X))$.push($6.getOrCreate(X))}if($.length===0)return{loaded:!0};return{loaded:!1,promise:Promise.all($).then((X)=>{return})}}getInitialState(){let $=_U.create(null,this._lexer.start);return $Z.create($,null)}tokenize($,X,Y){if($.length>=this._maxTokenizationLineLength)return gP(this._languageId,Y);let Z=new bu,Q=this._tokenize($,X,Y,Z);return Z.finalize(Q)}tokenizeEncoded($,X,Y){if($.length>=this._maxTokenizationLineLength)return AU(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),Y);let Z=new dP(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),Q=this._tokenize($,X,Y,Z);return Z.finalize(Q)}_tokenize($,X,Y,Z){if(Y.embeddedLanguageData)return this._nestedTokenize($,X,Y,0,Z);else return this._myTokenize($,X,Y,0,Z)}_findLeavingNestedLanguageOffset($,X){let Y=this._lexer.tokenizer[X.stack.state];if(!Y){if(Y=WV(this._lexer,X.stack.state),!Y)throw U6(this._lexer,"tokenizer state is not defined: "+X.stack.state)}let Z=-1,Q=!1;for(let G of Y){if(!QL(G.action)||G.action.nextEmbedded!=="@pop")continue;Q=!0;let q=G.regex,U=G.regex.source;if(U.substr(0,4)==="^(?:"&&U.substr(U.length-1,1)===")"){let H=(q.ignoreCase?"i":"")+(q.unicode?"u":"");q=new RegExp(U.substr(4,U.length-5),H)}let z=$.search(q);if(z===-1||z!==0&&G.matchOnlyAtLineStart)continue;if(Z===-1||z<Z)Z=z}if(!Q)throw U6(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+X.stack.state);return Z}_nestedTokenize($,X,Y,Z,Q){let G=this._findLeavingNestedLanguageOffset($,Y);if(G===-1){let z=Q.nestedLanguageTokenize($,X,Y.embeddedLanguageData,Z);return $Z.create(Y.stack,new MU(Y.embeddedLanguageData.languageId,z))}let q=$.substring(0,G);if(q.length>0)Q.nestedLanguageTokenize(q,!1,Y.embeddedLanguageData,Z);let U=$.substring(G);return this._myTokenize(U,X,Y,Z+G,Q)}_safeRuleName($){if($)return $.name;return"(unknown)"}_myTokenize($,X,Y,Z,Q){Q.enterLanguage(this._languageId);let G=$.length,q=X&&this._lexer.includeLF?$+`
`:$,U=q.length,z=Y.embeddedLanguageData,H=Y.stack,j=0,V=null,W=!0;while(W||j<U){let B=j,K=H.depth,P=V?V.groups.length:0,A=H.state,D=null,M=null,R=null,O=null,N=null;if(V){D=V.matches;let v=V.groups.shift();if(M=v.matched,R=v.action,O=V.rule,V.groups.length===0)V=null}else{if(!W&&j>=U)break;W=!1;let v=this._lexer.tokenizer[A];if(!v){if(v=WV(this._lexer,A),!v)throw U6(this._lexer,"tokenizer state is not defined: "+A)}let l=q.substr(j);for(let f of v)if(j===0||!f.matchOnlyAtLineStart){if(D=l.match(f.regex),D){M=D[0],R=f.action;break}}}if(!D)D=[""],M="";if(!R){if(j<U)D=[q.charAt(j)],M=D[0];R=this._lexer.defaultToken}if(M===null)break;j+=M.length;while(ku(R)&&QL(R)&&R.test)R=R.test(M,D,A,j===U);let T=null;if(typeof R==="string"||Array.isArray(R))T=R;else if(R.group)T=R.group;else if(R.token!==null&&R.token!==void 0){if(R.tokenSubst)T=OX(this._lexer,R.token,M,D,A);else T=R.token;if(R.nextEmbedded)if(R.nextEmbedded==="@pop"){if(!z)throw U6(this._lexer,"cannot pop embedded language if not inside one");z=null}else if(z)throw U6(this._lexer,"cannot enter embedded language from within an embedded language");else N=OX(this._lexer,R.nextEmbedded,M,D,A);if(R.goBack)j=Math.max(0,j-R.goBack);if(R.switchTo&&typeof R.switchTo==="string"){let v=OX(this._lexer,R.switchTo,M,D,A);if(v[0]==="@")v=v.substr(1);if(!WV(this._lexer,v))throw U6(this._lexer,"trying to switch to a state '"+v+"' that is undefined in rule: "+this._safeRuleName(O));else H=H.switchTo(v)}else if(R.transform&&typeof R.transform==="function")throw U6(this._lexer,"action.transform not supported");else if(R.next)if(R.next==="@push")if(H.depth>=this._lexer.maxStack)throw U6(this._lexer,"maximum tokenizer stack size reached: ["+H.state+","+H.parent.state+",...]");else H=H.push(A);else if(R.next==="@pop")if(H.depth<=1)throw U6(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(O));else H=H.pop();else if(R.next==="@popall")H=H.popall();else{let v=OX(this._lexer,R.next,M,D,A);if(v[0]==="@")v=v.substr(1);if(!WV(this._lexer,v))throw U6(this._lexer,"trying to set a next state '"+v+"' that is undefined in rule: "+this._safeRuleName(O));else H=H.push(v)}if(R.log&&typeof R.log==="string")Eu(this._lexer,this._lexer.languageId+": "+OX(this._lexer,R.log,M,D,A))}if(T===null)throw U6(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(O));let S=(v)=>{let l=this._languageService.getLanguageIdByLanguageName(v)||this._languageService.getLanguageIdByMimeType(v)||v,f=this._getNestedEmbeddedLanguageData(l);if(j<U){let h=$.substr(j);return this._nestedTokenize(h,X,$Z.create(H,f),Z+j,Q)}else return $Z.create(H,f)};if(Array.isArray(T)){if(V&&V.groups.length>0)throw U6(this._lexer,"groups cannot be nested: "+this._safeRuleName(O));if(D.length!==T.length+1)throw U6(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(O));let v=0;for(let l=1;l<D.length;l++)v+=D[l].length;if(v!==M.length)throw U6(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(O));V={rule:O,matches:D,groups:[]};for(let l=0;l<T.length;l++)V.groups[l]={action:T[l],matched:D[l+1]};j-=M.length;continue}else{if(T==="@rematch"){if(j-=M.length,M="",D=null,T="",N!==null)return S(N)}if(M.length===0)if(U===0||K!==H.depth||A!==H.state||(!V?0:V.groups.length)!==P)continue;else throw U6(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(O));let v=null;if(ZL(T)&&T.indexOf("@brackets")===0){let l=T.substr(9),f=HZ0(this._lexer,M);if(!f)throw U6(this._lexer,"@brackets token returned but no bracket defined as: "+M);v=GL(f.token+l)}else{let l=T===""?"":T+this._lexer.tokenPostfix;v=GL(l)}if(B<G)Q.emit(B+Z,v)}if(N!==null)return S(N)}return $Z.create(H,z)}_getNestedEmbeddedLanguageData($){if(!this._languageService.isRegisteredLanguageId($))return new MU($,hQ);if($!==this._languageId)this._languageService.requestBasicLanguageFeatures($),$6.getOrCreate($),this._embeddedLanguages[$]=!0;let X=$6.get($);if(X)return new MU($,X.getInitialState());return new MU($,hQ)}};G3=qL=UZ0([zZ0(4,g1)],G3)});class FV{static colorizeElement(J,$,X,Y){Y=Y||{};let Z=Y.theme||"vs",Q=Y.mimeType||X.getAttribute("lang")||X.getAttribute("data-lang");if(!Q)return console.error("Mode not detected"),Promise.resolve();let G=$.getLanguageIdByMimeType(Q)||Q;J.setTheme(Z);let q=X.firstChild?X.firstChild.nodeValue:"";X.className+=" "+Z;let U=(z)=>{var H;let j=(H=zL===null||zL===void 0?void 0:zL.createHTML(z))!==null&&H!==void 0?H:z;X.innerHTML=j};return this.colorize($,q||"",G,Y).then(U,(z)=>console.error(z))}static async colorize(J,$,X,Y){let Z=J.languageIdCodec,Q=4;if(Y&&typeof Y.tabSize==="number")Q=Y.tabSize;if(sq($))$=$.substr(1);let G=a9($);if(!J.isRegisteredLanguageId(X))return Su(G,Q,Z);let q=await $6.getOrCreate(X);if(q)return jZ0(G,Q,q,Z);return Su(G,Q,Z)}static colorizeLine(J,$,X,Y,Z=4){let Q=V7.isBasicASCII(J,$),G=V7.containsRTL(J,Q,X);return PU(new K$(!1,!0,J,!1,Q,G,0,Y,[],Z,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(J,$,X=4){let Y=J.getLineContent($);J.tokenization.forceTokenization($);let Q=J.tokenization.getLineTokens($).inflate();return this.colorizeLine(Y,J.mightContainNonBasicASCII(),J.mightContainRTL(),Q,X)}}function jZ0(J,$,X,Y){return new Promise((Z,Q)=>{let G=()=>{let q=VZ0(J,$,X,Y);if(X instanceof G3){let U=X.getLoadStatus();if(U.loaded===!1){U.promise.then(G,Q);return}}Z(q)};G()})}function Su(J,$,X){let Y=[],Z=33587200,Q=new Uint32Array(2);Q[0]=0,Q[1]=Z;for(let G=0,q=J.length;G<q;G++){let U=J[G];Q[0]=U.length;let z=new v6(Q,U,X),H=V7.isBasicASCII(U,!0),j=V7.containsRTL(U,H,!0),V=PU(new K$(!1,!0,U,!1,H,j,0,z,[],$,0,0,0,0,-1,"none",!1,!1,null));Y=Y.concat(V.html),Y.push("<br/>")}return Y.join("")}function VZ0(J,$,X,Y){let Z=[],Q=X.getInitialState();for(let G=0,q=J.length;G<q;G++){let U=J[G],z=X.tokenizeEncoded(U,!0,Q);v6.convertToEndOffset(z.tokens,U.length);let H=new v6(z.tokens,U,Y),j=V7.isBasicASCII(U,!0),V=V7.containsRTL(U,j,!0),W=PU(new K$(!1,!0,U,!1,j,V,0,H.inflate(),[],$,0,0,0,0,-1,"none",!1,!1,null));Z=Z.concat(W.html),Z.push("<br/>"),Q=z.endState}return Z.join("")}var zL;var Cu=w(()=>{kQ();X1();c8();JZ();DU();NJ();UL();zL=J4("standaloneColorizer",{createHTML:(J)=>J})});var vu=w(()=>{K0(".monaco-aria-container{position:absolute;left:-999em}")});function fu(J){q3=document.createElement("div"),q3.className="monaco-aria-container";let $=()=>{let Y=document.createElement("div");return Y.className="monaco-alert",Y.setAttribute("role","alert"),Y.setAttribute("aria-atomic","true"),q3.appendChild(Y),Y};sP=$(),HL=$();let X=()=>{let Y=document.createElement("div");return Y.className="monaco-status",Y.setAttribute("aria-live","polite"),Y.setAttribute("aria-atomic","true"),q3.appendChild(Y),Y};aP=X(),jL=X(),J.appendChild(q3)}function NU(J){if(!q3)return;if(sP.textContent!==J)t5(HL),rP(sP,J);else t5(sP),rP(HL,J)}function _X(J){if(!q3)return;if(aP.textContent!==J)t5(jL),rP(aP,J);else t5(aP),rP(jL,J)}function rP(J,$){if(t5(J),$.length>hu)$=$.substr(0,hu);J.textContent=$,J.style.visibility="hidden",J.style.visibility="visible"}var hu=20000,q3,sP,HL,aP,jL;var gQ=w(()=>{T0();vu()});var iP;var VL=w(()=>{s0();iP=w0("markerDecorationsService")});var WZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},BZ0=function(J,$){return function(X,Y){$(X,Y,J)}},KV=class{constructor($,X){}dispose(){}};var pu=w(()=>{VL();L4();KV.ID="editor.contrib.markerDecorations";KV=WZ0([BZ0(1,iP)],KV);w4(KV.ID,KV,0)});var mu=w(()=>{K0("::-ms-clear{display:none}.monaco-editor .editor-widget input{color:inherit}.monaco-editor{-webkit-text-size-adjust:100%;color:var(--vscode-editor-foreground);background-color:var(--vscode-editor-background);position:relative;overflow:visible}.monaco-editor-background{background-color:var(--vscode-editor-background)}.monaco-editor .rangeHighlight{background-color:var(--vscode-editor-rangeHighlightBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-rangeHighlightBorder)}.monaco-editor.hc-black .rangeHighlight,.monaco-editor.hc-light .rangeHighlight{border-style:dotted}.monaco-editor .symbolHighlight{background-color:var(--vscode-editor-symbolHighlightBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-symbolHighlightBorder)}.monaco-editor.hc-black .symbolHighlight,.monaco-editor.hc-light .symbolHighlight{border-style:dotted}.monaco-editor .overflow-guard{position:relative;overflow:hidden}.monaco-editor .view-overlays{position:absolute;top:0}.monaco-editor .squiggly-error{border-bottom:4px double var(--vscode-editorError-border)}.monaco-editor .squiggly-error:before{content:\"\";background:var(--vscode-editorError-background);width:100%;height:100%;display:block}.monaco-editor .squiggly-warning{border-bottom:4px double var(--vscode-editorWarning-border)}.monaco-editor .squiggly-warning:before{content:\"\";background:var(--vscode-editorWarning-background);width:100%;height:100%;display:block}.monaco-editor .squiggly-info{border-bottom:4px double var(--vscode-editorInfo-border)}.monaco-editor .squiggly-info:before{content:\"\";background:var(--vscode-editorInfo-background);width:100%;height:100%;display:block}.monaco-editor .squiggly-hint{border-bottom:2px dotted var(--vscode-editorHint-border)}.monaco-editor.showUnused .squiggly-unnecessary{border-bottom:2px dashed var(--vscode-editorUnnecessaryCode-border)}.monaco-editor.showDeprecated .squiggly-inline-deprecated{text-decoration:line-through;text-decoration-color:var(--vscode-editor-foreground,inherit)}")});var AV;var WL=w(()=>{z0();_0();T0();AV=class AV extends m{constructor(J,$){super();this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._referenceDomElement=J,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,$)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let J=null,$=()=>{if(J)this.observe({width:J.width,height:J.height});else this.observe()},X=!1,Y=!1,Z=()=>{if(X&&!Y)try{X=!1,Y=!0,$()}finally{f5(O0(this._referenceDomElement),()=>{Y=!1,Z()})}};this._resizeObserver=new ResizeObserver((Q)=>{if(Q&&Q[0]&&Q[0].contentRect)J={width:Q[0].contentRect.width,height:Q[0].contentRect.height};else J=null;X=!0,Z()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){if(this._resizeObserver)this._resizeObserver.disconnect(),this._resizeObserver=null}observe(J){this.measureReferenceDomElement(!0,J)}measureReferenceDomElement(J,$){let X=0,Y=0;if($)X=$.width,Y=$.height;else if(this._referenceDomElement)X=this._referenceDomElement.clientWidth,Y=this._referenceDomElement.clientHeight;if(X=Math.max(5,X),Y=Math.max(5,Y),this._width!==X||this._height!==Y){if(this._width=X,this._height=Y,J)this._onDidChange.fire()}}}});class pQ{constructor(J,$){this.key=J,this.migrate=$}apply(J){let $=pQ._read(J,this.key),X=(Z)=>pQ._read(J,Z),Y=(Z,Q)=>pQ._write(J,Z,Q);this.migrate($,X,Y)}static _read(J,$){if(typeof J>"u")return;let X=$.indexOf(".");if(X>=0){let Y=$.substring(0,X);return this._read(J[Y],$.substring(X+1))}return J[$]}static _write(J,$,X){let Y=$.indexOf(".");if(Y>=0){let Z=$.substring(0,Y);J[Z]=J[Z]||{},this._write(J[Z],$.substring(Y+1),X);return}J[$]=X}}function A$(J,$){pQ.items.push(new pQ(J,$))}function L9(J,$){A$(J,(X,Y,Z)=>{if(typeof X<"u"){for(let[Q,G]of $)if(X===Q){Z(J,G);return}}})}function uu(J){pQ.items.forEach(($)=>$.apply(J))}var FZ0;var cu=w(()=>{pQ.items=[];L9("wordWrap",[[!0,"on"],[!1,"off"]]);L9("lineNumbers",[[!0,"on"],[!1,"off"]]);L9("cursorBlinking",[["visible","solid"]]);L9("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);L9("renderLineHighlight",[[!0,"line"],[!1,"none"]]);L9("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);L9("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);L9("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);L9("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);L9("autoIndent",[[!1,"advanced"],[!0,"full"]]);L9("matchBrackets",[[!0,"always"],[!1,"never"]]);L9("renderFinalNewline",[[!0,"on"],[!1,"off"]]);L9("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);L9("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);L9("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);A$("autoClosingBrackets",(J,$,X)=>{if(J===!1){if(X("autoClosingBrackets","never"),typeof $("autoClosingQuotes")>"u")X("autoClosingQuotes","never");if(typeof $("autoSurround")>"u")X("autoSurround","never")}});A$("renderIndentGuides",(J,$,X)=>{if(typeof J<"u"){if(X("renderIndentGuides",void 0),typeof $("guides.indentation")>"u")X("guides.indentation",!!J)}});A$("highlightActiveIndentGuide",(J,$,X)=>{if(typeof J<"u"){if(X("highlightActiveIndentGuide",void 0),typeof $("guides.highlightActiveIndentation")>"u")X("guides.highlightActiveIndentation",!!J)}});FZ0={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};A$("suggest.filteredTypes",(J,$,X)=>{if(J&&typeof J==="object"){for(let Y of Object.entries(FZ0))if(J[Y[0]]===!1){if(typeof $(`suggest.${Y[1]}`)>"u")X(`suggest.${Y[1]}`,!1)}X("suggest.filteredTypes",void 0)}});A$("quickSuggestions",(J,$,X)=>{if(typeof J==="boolean"){let Y=J?"on":"off";X("quickSuggestions",{comments:Y,strings:Y,other:Y})}});A$("experimental.stickyScroll.enabled",(J,$,X)=>{if(typeof J==="boolean"){if(X("experimental.stickyScroll.enabled",void 0),typeof $("stickyScroll.enabled")>"u")X("stickyScroll.enabled",J)}});A$("experimental.stickyScroll.maxLineCount",(J,$,X)=>{if(typeof J==="number"){if(X("experimental.stickyScroll.maxLineCount",void 0),typeof $("stickyScroll.maxLineCount")>"u")X("stickyScroll.maxLineCount",J)}});A$("codeActionsOnSave",(J,$,X)=>{if(J&&typeof J==="object"){let Y=!1,Z={};for(let Q of Object.entries(J))if(typeof Q[1]==="boolean")Y=!0,Z[Q[0]]=Q[1]?"explicit":"never";else Z[Q[0]]=Q[1];if(Y)X("codeActionsOnSave",Z)}});A$("codeActionWidget.includeNearbyQuickfixes",(J,$,X)=>{if(typeof J==="boolean"){if(X("codeActionWidget.includeNearbyQuickfixes",void 0),typeof $("codeActionWidget.includeNearbyQuickFixes")>"u")X("codeActionWidget.includeNearbyQuickFixes",J)}});A$("lightbulb.enabled",(J,$,X)=>{if(typeof J==="boolean")X("lightbulb.enabled",J?void 0:"off")})});class lu{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new x,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(J){this._tabFocus=J,this._onDidChangeTabFocus.fire(this._tabFocus)}}var TU;var BL=w(()=>{_0();TU=new lu});var a8,du;var P$=w(()=>{t1();s0();a8=w0("accessibilityService"),du=new A0("accessibilityModeEnabled",!1)});function PZ0(J){let $=0;while(J)J=Math.floor(J/10),$++;return $?$:1}function DZ0(){let J="";if(!K9&&!LA)J+="no-user-select ";if(K9)J+="no-minimap-shadow ",J+="enable-user-select ";if(t0)J+="mac ";return J}class au{constructor(){this._values=[]}_read(J){return this._values[J]}get(J){return this._values[J]}_write(J,$){this._values[J]=$}}class ru{constructor(){this._values=[]}_read(J){if(J>=this._values.length)throw Error("Cannot read uninitialized value");return this._values[J]}get(J){return this._read(J)}_write(J,$){this._values[J]=$}}class mQ{static validateOptions(J){let $=new au;for(let X of BQ){let Y=X.name==="_never_"?void 0:J[X.name];$._write(X.id,X.validate(Y))}return $}static computeOptions(J,$){let X=new ru;for(let Y of BQ)X._write(Y.id,Y.compute($,X,J._read(Y.id)));return X}static _deepEquals(J,$){if(typeof J!=="object"||typeof $!=="object"||!J||!$)return J===$;if(Array.isArray(J)||Array.isArray($))return Array.isArray(J)&&Array.isArray($)?B6(J,$):!1;if(Object.keys(J).length!==Object.keys($).length)return!1;for(let X in J)if(!mQ._deepEquals(J[X],$[X]))return!1;return!0}static checkEquals(J,$){let X=[],Y=!1;for(let Z of BQ){let Q=!mQ._deepEquals(J._read(Z.id),$._read(Z.id));if(X[Z.id]=Q,Q)Y=!0}return Y?new $j(X):null}static applyUpdate(J,$){let X=!1;for(let Y of BQ)if($.hasOwnProperty(Y.name)){let Z=Y.applyUpdate(J[Y.name],$[Y.name]);J[Y.name]=Z.newValue,X=X||Z.didChange}return X}}function su(J){let $=$X(J);return uu($),$}var KZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},AZ0=function(J,$){return function(X,Y){$(X,Y,J)}},nP;var iu=w(()=>{e7();V1();_0();z0();n7();L1();WL();HT();cu();BL();O8();Fj();EA();P$();nP=class extends m{constructor($,X,Y,Z){super();if(this._accessibilityService=Z,this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new x),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new BK,this.isSimpleWidget=$,this._containerObserver=this._register(new AV(Y,X.dimension)),this._rawOptions=su(X),this._validatedOptions=mQ.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13))this._containerObserver.startObserving();this._register(jJ.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(TU.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(Kj.onDidChange(()=>this._recomputeOptions())),this._register(aq.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){let $=this._computeOptions(),X=mQ.checkEquals(this.options,$);if(X===null)return;this.options=$,this._onDidChangeFast.fire(X),this._onDidChange.fire(X)}_computeOptions(){let $=this._readEnvConfiguration(),X=CY.createFromValidatedSettings(this._validatedOptions,$.pixelRatio,this.isSimpleWidget),Y=this._readFontInfo(X),Z={memory:this._computeOptionsMemory,outerWidth:$.outerWidth,outerHeight:$.outerHeight-this._reservedHeight,fontInfo:Y,extraEditorClassName:$.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:$.emptySelectionClipboard,pixelRatio:$.pixelRatio,tabFocusMode:TU.getTabFocusMode(),accessibilitySupport:$.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return mQ.computeOptions(this._validatedOptions,Z)}_readEnvConfiguration(){return{extraEditorClassName:DZ0(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:G$||U8,pixelRatio:aq.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo($){return Kj.readFontInfo($)}getRawOptions(){return this._rawOptions}updateOptions($){let X=su($);if(!mQ.applyUpdate(this._rawOptions,X))return;this._validatedOptions=mQ.validateOptions(this._rawOptions),this._recomputeOptions()}observeContainer($){this._containerObserver.observe($)}setIsDominatedByLongLines($){if(this._isDominatedByLongLines===$)return;this._isDominatedByLongLines=$,this._recomputeOptions()}setModelLineCount($){let X=PZ0($);if(this._lineNumbersDigitCount===X)return;this._lineNumbersDigitCount=X,this._recomputeOptions()}setViewLineCount($){if(this._viewLineCount===$)return;this._viewLineCount=$,this._recomputeOptions()}setReservedHeight($){if(this._reservedHeight===$)return;this._reservedHeight=$,this._recomputeOptions()}setGlyphMarginDecorationLaneCount($){if(this._glyphMarginDecorationLaneCount===$)return;this._glyphMarginDecorationLaneCount=$,this._recomputeOptions()}};nP=KZ0([AZ0(3,a8)],nP)});var NX;var FL=w(()=>{(function(J){let $={total:0,min:Number.MAX_VALUE,max:0},X={...$},Y={...$},Z={...$},Q=0,G={keydown:0,input:0,render:0};function q(){A(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),G.keydown=1,queueMicrotask(U)}J.onKeyDown=q;function U(){if(G.keydown===1)performance.mark("keydown/end"),G.keydown=2}function z(){performance.mark("input/start"),G.input=1,P()}J.onBeforeInput=z;function H(){if(G.input===0)z();queueMicrotask(j)}J.onInput=H;function j(){if(G.input===1)performance.mark("input/end"),G.input=2}function V(){A()}J.onKeyUp=V;function W(){A()}J.onSelectionChange=W;function B(){if(G.keydown===2&&G.input===2&&G.render===0)performance.mark("render/start"),G.render=1,queueMicrotask(K),P()}J.onRenderStart=B;function K(){if(G.render===1)performance.mark("render/end"),G.render=2}function P(){setTimeout(A)}function A(){if(G.keydown===2&&G.input===2&&G.render===2)performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),D("keydown",$),D("input",X),D("render",Y),D("inputlatency",Z),Q++,M()}function D(T,S){let v=performance.getEntriesByName(T)[0].duration;S.total+=v,S.min=Math.min(S.min,v),S.max=Math.max(S.max,v)}function M(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),G.keydown=0,G.input=0,G.render=0}function R(){if(Q===0)return;let T={keydown:O($),input:O(X),render:O(Y),total:O(Z),sampleCount:Q};return N($),N(X),N(Y),N(Z),Q=0,T}J.getAndClearMeasurements=R;function O(T){return{average:T.total/Q,max:T.max,min:T.min}}function N(T){T.total=0,T.min=Number.MAX_VALUE,T.max=0}})(NX||(NX={}))});class XZ{constructor(){this._hooks=new $0,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(J,$){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let X=this._onStopCallback;if(this._onStopCallback=null,J&&X)X($)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(J,$,X,Y,Z){if(this.isMonitoring())this.stopMonitoring(!1);this._pointerMoveCallback=Y,this._onStopCallback=Z;let Q=J;try{J.setPointerCapture($),this._hooks.add(N0(()=>{try{J.releasePointerCapture($)}catch(G){}}))}catch(G){Q=O0(J)}this._hooks.add(r(Q,U0.POINTER_MOVE,(G)=>{if(G.buttons!==X){this.stopMonitoring(!0);return}G.preventDefault(),this._pointerMoveCallback(G)})),this._hooks.add(r(Q,U0.POINTER_UP,(G)=>this.stopMonitoring(!0)))}}var PV=w(()=>{T0();z0()});function XD(J){return`--vscode-${J.replace(/\./g,"-")}`}function P0(J){return`var(${XD(J)})`}function Qc(J,$){return`var(${XD(J)}, ${$})`}class Gc{constructor(){this._onDidChangeSchema=new x,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(J,$,X,Y=!1,Z){let Q={id:J,description:X,defaults:$,needsTransparency:Y,deprecationMessage:Z};this.colorsById[J]=Q;let G={type:"string",description:X,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};if(Z)G.deprecationMessage=Z;if(Y)G.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",G.patternErrorMessage="This color must be transparent or it will obscure content";return this.colorSchema.properties[J]=G,this.colorReferenceSchema.enum.push(J),this.colorReferenceSchema.enumDescriptions.push(X),this._onDidChangeSchema.fire(),J}getColors(){return Object.keys(this.colorsById).map((J)=>this.colorsById[J])}resolveDefaultColor(J,$){let X=this.colorsById[J];if(X&&X.defaults){let Y=X.defaults[$.type];return D$(Y,$)}return}getColorSchema(){return this.colorSchema}toString(){let J=($,X)=>{let Y=$.indexOf(".")===-1?0:1,Z=X.indexOf(".")===-1?0:1;if(Y!==Z)return Y-Z;return $.localeCompare(X)};return Object.keys(this.colorsById).sort(J).map(($)=>`- \`${$}\`: ${this.colorsById[$].description}`).join(`
`)}}function I(J,$,X,Y,Z){return YD.registerColor(J,$,X,Y,Z)}function RZ0(J,$){var X,Y,Z,Q;switch(J.op){case 0:return(X=D$(J.value,$))===null||X===void 0?void 0:X.darken(J.factor);case 1:return(Y=D$(J.value,$))===null||Y===void 0?void 0:Y.lighten(J.factor);case 2:return(Z=D$(J.value,$))===null||Z===void 0?void 0:Z.transparent(J.factor);case 3:{let G=D$(J.background,$);if(!G)return D$(J.value,$);return(Q=D$(J.value,$))===null||Q===void 0?void 0:Q.makeOpaque(G)}case 4:for(let G of J.values){let q=D$(G,$);if(q)return q}return;case 6:return D$($.defines(J.if)?J.then:J.else,$);case 5:{let G=D$(J.value,$);if(!G)return;let q=D$(J.background,$);if(!q)return G.transparent(J.factor*J.transparency);return G.isDarkerThan(q)?n.getLighterColor(G,q,J.factor).transparent(J.transparency):n.getDarkerColor(G,q,J.factor).transparent(J.transparency)}default:throw nq(J)}}function U3(J,$){return{op:0,value:J,factor:$}}function N$(J,$){return{op:1,value:J,factor:$}}function y0(J,$){return{op:2,value:J,factor:$}}function Xc(...J){return{op:4,values:J}}function MZ0(J,$,X){return{op:6,if:J,then:$,else:X}}function Yc(J,$,X,Y){return{op:5,value:J,background:$,factor:X,transparency:Y}}function D$(J,$){if(J===null)return;else if(typeof J==="string"){if(J[0]==="#")return n.fromHex(J);return $.getColor(J)}else if(J instanceof n)return J;else if(typeof J==="object")return RZ0(J,$);return}var KL,YD,H0,BL0,FL0,KL0,R$,Y4,I1,O6,AL0,PL0,qc,DL0,RL0,ML0,OL0,_L0,NL0,TX,Uc,zc,Hc,jc,Vc,TL0,Wc,Bc,wL0,Fc,Kc,Ac,Pc,Dc,Rc,Mc,Oc,_c,M$,Nc,wX,uQ,wU,Tc,LU,wc,Lc,kc,eP,Ec,DV,Ic,kU,EU,IU,yU,yc,LL0,LX,kL0,OV,r8,RV,EL0,k9,MV,xc,IL0,yL0,V8,IX,xL0,bL0,SL0,CL0,l6,kX,O$,vL0,AL,bc,Sc,ZD,Cc,vc,hc,fc,gc,YZ,pc,PL,DL,hL0,fL0,ZZ,gL0,pL0,xU,mL0,uL0,cL0,lL0,dL0,nu,sL0,mc,aL0,rL0,cQ,lQ,iL0,nL0,oL0,tL0,oP,eL0,Jk0,JD,$D,uc,cc,$k0,Xk0,Yk0,Zk0,lc,dc,Qk0,Gk0,qk0,Uk0,zk0,Hk0,jk0,sc,ac,rc,ic,EX,_$,bU,nc,oc,tc,ec,Jl,RL,ML,$l,Xl,QZ,_V,Vk0,Wk0,Bk0,Yl,Zl,Ql,Gl,Fk0,Kk0,SU,ql,Ul,zl,Ak0,Hl,Pk0,jl,Vl,Dk0,ou,yX,GZ,xX,Wl,Bl,Fl,Kl,Al,Pl,Dl,tu,Rk0,Mk0,Ok0,_k0,Nk0,Tk0,Rl,Ml,OL,Ol,wk0,_l=0.5,eu,Jc,$c,TJ=0.4,fU=1,CU,Lk0,vU,kk0,hU,Ek0,gU,Ik0,yk0,xk0,bk0,Sk0,tP,Ck0,_L,Nl,Tl,wl,Ll,kl,vk0,hk0,fk0,El,Il,yl,gk0,pk0,mk0,uk0,ck0,lk0,dk0,sk0,xl="vscode://schemas/workbench-colors",bl,Zc;var i8=w(()=>{WX();e1();T9();_0();c0();MP();h7();KL={ColorContribution:"base.contributions.colors"};YD=new Gc;G6.add(KL.ColorContribution,YD);H0=I("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},F("foreground","Overall foreground color. This color is only used if not overridden by a component.")),BL0=I("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},F("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),FL0=I("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},F("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),KL0=I("descriptionForeground",{light:"#717171",dark:y0(H0,0.7),hcDark:y0(H0,0.7),hcLight:y0(H0,0.7)},F("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),R$=I("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},F("iconForeground","The default color for icons in the workbench.")),Y4=I("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},F("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),I1=I("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},F("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),O6=I("contrastActiveBorder",{light:null,dark:null,hcDark:Y4,hcLight:Y4},F("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),AL0=I("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},F("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),PL0=I("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:n.black,hcLight:"#292929"},F("textSeparatorForeground","Color for text separators.")),qc=I("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},F("textLinkForeground","Foreground color for links in text.")),DL0=I("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},F("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),RL0=I("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},F("textPreformatForeground","Foreground color for preformatted text segments.")),ML0=I("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},F("textPreformatBackground","Background color for preformatted text segments.")),OL0=I("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},F("textBlockQuoteBackground","Background color for block quotes in text.")),_L0=I("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:n.white,hcLight:"#292929"},F("textBlockQuoteBorder","Border color for block quotes in text.")),NL0=I("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:n.black,hcLight:"#F2F2F2"},F("textCodeBlockBackground","Background color for code blocks in text.")),TX=I("widget.shadow",{dark:y0(n.black,0.36),light:y0(n.black,0.16),hcDark:null,hcLight:null},F("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Uc=I("widget.border",{dark:null,light:null,hcDark:I1,hcLight:I1},F("widgetBorder","Border color of widgets such as find/replace inside the editor.")),zc=I("input.background",{dark:"#3C3C3C",light:n.white,hcDark:n.black,hcLight:n.white},F("inputBoxBackground","Input box background.")),Hc=I("input.foreground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("inputBoxForeground","Input box foreground.")),jc=I("input.border",{dark:null,light:null,hcDark:I1,hcLight:I1},F("inputBoxBorder","Input box border.")),Vc=I("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:I1,hcLight:I1},F("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),TL0=I("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},F("inputOption.hoverBackground","Background color of activated options in input fields.")),Wc=I("inputOption.activeBackground",{dark:y0(Y4,0.4),light:y0(Y4,0.2),hcDark:n.transparent,hcLight:n.transparent},F("inputOption.activeBackground","Background hover color of options in input fields.")),Bc=I("inputOption.activeForeground",{dark:n.white,light:n.black,hcDark:H0,hcLight:H0},F("inputOption.activeForeground","Foreground color of activated options in input fields.")),wL0=I("input.placeholderForeground",{light:y0(H0,0.5),dark:y0(H0,0.5),hcDark:y0(H0,0.7),hcLight:y0(H0,0.7)},F("inputPlaceholderForeground","Input box foreground color for placeholder text.")),Fc=I("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:n.black,hcLight:n.white},F("inputValidationInfoBackground","Input validation background color for information severity.")),Kc=I("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:H0},F("inputValidationInfoForeground","Input validation foreground color for information severity.")),Ac=I("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:I1,hcLight:I1},F("inputValidationInfoBorder","Input validation border color for information severity.")),Pc=I("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:n.black,hcLight:n.white},F("inputValidationWarningBackground","Input validation background color for warning severity.")),Dc=I("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:H0},F("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Rc=I("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:I1,hcLight:I1},F("inputValidationWarningBorder","Input validation border color for warning severity.")),Mc=I("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:n.black,hcLight:n.white},F("inputValidationErrorBackground","Input validation background color for error severity.")),Oc=I("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:H0},F("inputValidationErrorForeground","Input validation foreground color for error severity.")),_c=I("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:I1,hcLight:I1},F("inputValidationErrorBorder","Input validation border color for error severity.")),M$=I("dropdown.background",{dark:"#3C3C3C",light:n.white,hcDark:n.black,hcLight:n.white},F("dropdownBackground","Dropdown background.")),Nc=I("dropdown.listBackground",{dark:null,light:null,hcDark:n.black,hcLight:n.white},F("dropdownListBackground","Dropdown list background.")),wX=I("dropdown.foreground",{dark:"#F0F0F0",light:H0,hcDark:n.white,hcLight:H0},F("dropdownForeground","Dropdown foreground.")),uQ=I("dropdown.border",{dark:M$,light:"#CECECE",hcDark:I1,hcLight:I1},F("dropdownBorder","Dropdown border.")),wU=I("button.foreground",{dark:n.white,light:n.white,hcDark:n.white,hcLight:n.white},F("buttonForeground","Button foreground color.")),Tc=I("button.separator",{dark:y0(wU,0.4),light:y0(wU,0.4),hcDark:y0(wU,0.4),hcLight:y0(wU,0.4)},F("buttonSeparator","Button separator color.")),LU=I("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},F("buttonBackground","Button background color.")),wc=I("button.hoverBackground",{dark:N$(LU,0.2),light:U3(LU,0.2),hcDark:LU,hcLight:LU},F("buttonHoverBackground","Button background color when hovering.")),Lc=I("button.border",{dark:I1,light:I1,hcDark:I1,hcLight:I1},F("buttonBorder","Button border color.")),kc=I("button.secondaryForeground",{dark:n.white,light:n.white,hcDark:n.white,hcLight:H0},F("buttonSecondaryForeground","Secondary button foreground color.")),eP=I("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:n.white},F("buttonSecondaryBackground","Secondary button background color.")),Ec=I("button.secondaryHoverBackground",{dark:N$(eP,0.2),light:U3(eP,0.2),hcDark:null,hcLight:null},F("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),DV=I("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:n.black,hcLight:"#0F4A85"},F("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Ic=I("badge.foreground",{dark:n.white,light:"#333",hcDark:n.white,hcLight:n.white},F("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),kU=I("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},F("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),EU=I("scrollbarSlider.background",{dark:n.fromHex("#797979").transparent(0.4),light:n.fromHex("#646464").transparent(0.4),hcDark:y0(I1,0.6),hcLight:y0(I1,0.4)},F("scrollbarSliderBackground","Scrollbar slider background color.")),IU=I("scrollbarSlider.hoverBackground",{dark:n.fromHex("#646464").transparent(0.7),light:n.fromHex("#646464").transparent(0.7),hcDark:y0(I1,0.8),hcLight:y0(I1,0.8)},F("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),yU=I("scrollbarSlider.activeBackground",{dark:n.fromHex("#BFBFBF").transparent(0.4),light:n.fromHex("#000000").transparent(0.6),hcDark:I1,hcLight:I1},F("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),yc=I("progressBar.background",{dark:n.fromHex("#0E70C0"),light:n.fromHex("#0E70C0"),hcDark:I1,hcLight:I1},F("progressBarBackground","Background color of the progress bar that can show for long running operations.")),LL0=I("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},F("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),LX=I("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},F("editorError.foreground","Foreground color of error squigglies in the editor.")),kL0=I("editorError.border",{dark:null,light:null,hcDark:n.fromHex("#E47777").transparent(0.8),hcLight:"#B5200D"},F("errorBorder","If set, color of double underlines for errors in the editor.")),OV=I("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},F("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),r8=I("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},F("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),RV=I("editorWarning.border",{dark:null,light:null,hcDark:n.fromHex("#FFCC00").transparent(0.8),hcLight:n.fromHex("#FFCC00").transparent(0.8)},F("warningBorder","If set, color of double underlines for warnings in the editor.")),EL0=I("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},F("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),k9=I("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},F("editorInfo.foreground","Foreground color of info squigglies in the editor.")),MV=I("editorInfo.border",{dark:null,light:null,hcDark:n.fromHex("#3794FF").transparent(0.8),hcLight:"#292929"},F("infoBorder","If set, color of double underlines for infos in the editor.")),xc=I("editorHint.foreground",{dark:n.fromHex("#eeeeee").transparent(0.7),light:"#6c6c6c",hcDark:null,hcLight:null},F("editorHint.foreground","Foreground color of hint squigglies in the editor.")),IL0=I("editorHint.border",{dark:null,light:null,hcDark:n.fromHex("#eeeeee").transparent(0.8),hcLight:"#292929"},F("hintBorder","If set, color of double underlines for hints in the editor.")),yL0=I("sash.hoverBorder",{dark:Y4,light:Y4,hcDark:Y4,hcLight:Y4},F("sashActiveBorder","Border color of active sashes.")),V8=I("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:n.black,hcLight:n.white},F("editorBackground","Editor background color.")),IX=I("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:n.white,hcLight:H0},F("editorForeground","Editor default foreground color.")),xL0=I("editorStickyScroll.background",{light:V8,dark:V8,hcDark:V8,hcLight:V8},F("editorStickyScrollBackground","Background color of sticky scroll in the editor")),bL0=I("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:n.fromHex("#0F4A85").transparent(0.1)},F("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),SL0=I("editorStickyScroll.border",{dark:null,light:null,hcDark:I1,hcLight:I1},F("editorStickyScrollBorder","Border color of sticky scroll in the editor")),CL0=I("editorStickyScroll.shadow",{dark:kU,light:kU,hcDark:kU,hcLight:kU},F("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),l6=I("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:n.white},F("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),kX=I("editorWidget.foreground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),O$=I("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:I1,hcLight:I1},F("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),vL0=I("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},F("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),AL=I("quickInput.background",{dark:l6,light:l6,hcDark:l6,hcLight:l6},F("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),bc=I("quickInput.foreground",{dark:kX,light:kX,hcDark:kX,hcLight:kX},F("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Sc=I("quickInputTitle.background",{dark:new n(new k1(255,255,255,0.105)),light:new n(new k1(0,0,0,0.06)),hcDark:"#000000",hcLight:n.white},F("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),ZD=I("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:n.white,hcLight:"#0F4A85"},F("pickerGroupForeground","Quick picker color for grouping labels.")),Cc=I("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:n.white,hcLight:"#0F4A85"},F("pickerGroupBorder","Quick picker color for grouping borders.")),vc=I("keybindingLabel.background",{dark:new n(new k1(128,128,128,0.17)),light:new n(new k1(221,221,221,0.4)),hcDark:n.transparent,hcLight:n.transparent},F("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),hc=I("keybindingLabel.foreground",{dark:n.fromHex("#CCCCCC"),light:n.fromHex("#555555"),hcDark:n.white,hcLight:H0},F("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),fc=I("keybindingLabel.border",{dark:new n(new k1(51,51,51,0.6)),light:new n(new k1(204,204,204,0.4)),hcDark:new n(new k1(111,195,223)),hcLight:I1},F("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),gc=I("keybindingLabel.bottomBorder",{dark:new n(new k1(68,68,68,0.6)),light:new n(new k1(187,187,187,0.4)),hcDark:new n(new k1(111,195,223)),hcLight:H0},F("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),YZ=I("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},F("editorSelectionBackground","Color of the editor selection.")),pc=I("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:n.white},F("editorSelectionForeground","Color of the selected text for high contrast.")),PL=I("editor.inactiveSelectionBackground",{light:y0(YZ,0.5),dark:y0(YZ,0.5),hcDark:y0(YZ,0.7),hcLight:y0(YZ,0.5)},F("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),DL=I("editor.selectionHighlightBackground",{light:Yc(YZ,V8,0.3,0.6),dark:Yc(YZ,V8,0.3,0.6),hcDark:null,hcLight:null},F("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),hL0=I("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:O6,hcLight:O6},F("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),fL0=I("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},F("editorFindMatch","Color of the current search match.")),ZZ=I("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},F("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),gL0=I("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},F("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),pL0=I("editor.findMatchBorder",{light:null,dark:null,hcDark:O6,hcLight:O6},F("editorFindMatchBorder","Border color of the current search match.")),xU=I("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:O6,hcLight:O6},F("findMatchHighlightBorder","Border color of the other search matches.")),mL0=I("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:y0(O6,0.4),hcLight:y0(O6,0.4)},F("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),uL0=I("searchEditor.findMatchBackground",{light:y0(ZZ,0.66),dark:y0(ZZ,0.66),hcDark:ZZ,hcLight:ZZ},F("searchEditor.queryMatch","Color of the Search Editor query matches.")),cL0=I("searchEditor.findMatchBorder",{light:y0(xU,0.66),dark:y0(xU,0.66),hcDark:xU,hcLight:xU},F("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches.")),lL0=I("search.resultsInfoForeground",{light:H0,dark:y0(H0,0.65),hcDark:H0,hcLight:H0},F("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),dL0=I("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},F("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),nu=I("editorHoverWidget.background",{light:l6,dark:l6,hcDark:l6,hcLight:l6},F("hoverBackground","Background color of the editor hover.")),sL0=I("editorHoverWidget.foreground",{light:kX,dark:kX,hcDark:kX,hcLight:kX},F("hoverForeground","Foreground color of the editor hover.")),mc=I("editorHoverWidget.border",{light:O$,dark:O$,hcDark:O$,hcLight:O$},F("hoverBorder","Border color of the editor hover.")),aL0=I("editorHoverWidget.statusBarBackground",{dark:N$(nu,0.2),light:U3(nu,0.05),hcDark:l6,hcLight:l6},F("statusBarBackground","Background color of the editor hover status bar.")),rL0=I("editorLink.activeForeground",{dark:"#4E94CE",light:n.blue,hcDark:n.cyan,hcLight:"#292929"},F("activeLinkForeground","Color of active links.")),cQ=I("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:n.white,hcLight:n.black},F("editorInlayHintForeground","Foreground color of inline hints")),lQ=I("editorInlayHint.background",{dark:y0(DV,0.1),light:y0(DV,0.1),hcDark:y0(n.white,0.1),hcLight:y0(DV,0.1)},F("editorInlayHintBackground","Background color of inline hints")),iL0=I("editorInlayHint.typeForeground",{dark:cQ,light:cQ,hcDark:cQ,hcLight:cQ},F("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),nL0=I("editorInlayHint.typeBackground",{dark:lQ,light:lQ,hcDark:lQ,hcLight:lQ},F("editorInlayHintBackgroundTypes","Background color of inline hints for types")),oL0=I("editorInlayHint.parameterForeground",{dark:cQ,light:cQ,hcDark:cQ,hcLight:cQ},F("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),tL0=I("editorInlayHint.parameterBackground",{dark:lQ,light:lQ,hcDark:lQ,hcLight:lQ},F("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),oP=I("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},F("editorLightBulbForeground","The color used for the lightbulb actions icon.")),eL0=I("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},F("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),Jk0=I("editorLightBulbAi.foreground",{dark:oP,light:oP,hcDark:oP,hcLight:oP},F("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),JD=new n(new k1(155,185,85,0.2)),$D=new n(new k1(255,0,0,0.2)),uc=I("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},F("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),cc=I("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},F("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),$k0=I("diffEditor.insertedLineBackground",{dark:JD,light:JD,hcDark:null,hcLight:null},F("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Xk0=I("diffEditor.removedLineBackground",{dark:$D,light:$D,hcDark:null,hcLight:null},F("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Yk0=I("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},F("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Zk0=I("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},F("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),lc=I("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),dc=I("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),Qk0=I("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},F("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Gk0=I("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},F("diffEditorRemovedOutline","Outline color for text that got removed.")),qk0=I("diffEditor.border",{dark:null,light:null,hcDark:I1,hcLight:I1},F("diffEditorBorder","Border color between the two text editors.")),Uk0=I("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},F("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),zk0=I("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},F("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),Hk0=I("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},F("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),jk0=I("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},F("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),sc=I("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},F("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ac=I("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),rc=I("list.focusOutline",{dark:Y4,light:Y4,hcDark:O6,hcLight:O6},F("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ic=I("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},F("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),EX=I("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:n.fromHex("#0F4A85").transparent(0.1)},F("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),_$=I("list.activeSelectionForeground",{dark:n.white,light:n.white,hcDark:null,hcLight:null},F("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bU=I("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nc=I("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:n.fromHex("#0F4A85").transparent(0.1)},F("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oc=I("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),tc=I("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ec=I("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},F("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Jl=I("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},F("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),RL=I("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:n.white.transparent(0.1),hcLight:n.fromHex("#0F4A85").transparent(0.1)},F("listHoverBackground","List/Tree background when hovering over items using the mouse.")),ML=I("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),$l=I("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},F("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),Xl=I("list.dropBetweenBackground",{dark:R$,light:R$,hcDark:null,hcLight:null},F("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),QZ=I("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Y4,hcLight:Y4},F("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),_V=I("list.focusHighlightForeground",{dark:QZ,light:MZ0(EX,QZ,"#BBE7FF"),hcDark:QZ,hcLight:QZ},F("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),Vk0=I("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},F("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),Wk0=I("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},F("listErrorForeground","Foreground color of list items containing errors.")),Bk0=I("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},F("listWarningForeground","Foreground color of list items containing warnings.")),Yl=I("listFilterWidget.background",{light:U3(l6,0),dark:N$(l6,0),hcDark:l6,hcLight:l6},F("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Zl=I("listFilterWidget.outline",{dark:n.transparent,light:n.transparent,hcDark:"#f38518",hcLight:"#007ACC"},F("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Ql=I("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:I1,hcLight:I1},F("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Gl=I("listFilterWidget.shadow",{dark:TX,light:TX,hcDark:TX,hcLight:TX},F("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),Fk0=I("list.filterMatchBackground",{dark:ZZ,light:ZZ,hcDark:null,hcLight:null},F("listFilterMatchHighlight","Background color of the filtered match.")),Kk0=I("list.filterMatchBorder",{dark:xU,light:xU,hcDark:I1,hcLight:O6},F("listFilterMatchHighlightBorder","Border color of the filtered match.")),SU=I("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},F("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),ql=I("tree.inactiveIndentGuidesStroke",{dark:y0(SU,0.4),light:y0(SU,0.4),hcDark:y0(SU,0.4),hcLight:y0(SU,0.4)},F("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Ul=I("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},F("tableColumnsBorder","Table border color between columns.")),zl=I("tree.tableOddRowsBackground",{dark:y0(H0,0.04),light:y0(H0,0.04),hcDark:null,hcLight:null},F("tableOddRowsBackgroundColor","Background color for odd table rows.")),Ak0=I("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},F("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. ")),Hl=I("checkbox.background",{dark:M$,light:M$,hcDark:M$,hcLight:M$},F("checkbox.background","Background color of checkbox widget.")),Pk0=I("checkbox.selectBackground",{dark:l6,light:l6,hcDark:l6,hcLight:l6},F("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),jl=I("checkbox.foreground",{dark:wX,light:wX,hcDark:wX,hcLight:wX},F("checkbox.foreground","Foreground color of checkbox widget.")),Vl=I("checkbox.border",{dark:uQ,light:uQ,hcDark:uQ,hcLight:uQ},F("checkbox.border","Border color of checkbox widget.")),Dk0=I("checkbox.selectBorder",{dark:R$,light:R$,hcDark:R$,hcLight:R$},F("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),ou=I("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,F("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),yX=I("quickInputList.focusForeground",{dark:_$,light:_$,hcDark:_$,hcLight:_$},F("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),GZ=I("quickInputList.focusIconForeground",{dark:bU,light:bU,hcDark:bU,hcLight:bU},F("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),xX=I("quickInputList.focusBackground",{dark:Xc(ou,EX),light:Xc(ou,EX),hcDark:null,hcLight:null},F("quickInput.listFocusBackground","Quick picker background color for the focused item.")),Wl=I("menu.border",{dark:null,light:null,hcDark:I1,hcLight:I1},F("menuBorder","Border color of menus.")),Bl=I("menu.foreground",{dark:wX,light:wX,hcDark:wX,hcLight:wX},F("menuForeground","Foreground color of menu items.")),Fl=I("menu.background",{dark:M$,light:M$,hcDark:M$,hcLight:M$},F("menuBackground","Background color of menu items.")),Kl=I("menu.selectionForeground",{dark:_$,light:_$,hcDark:_$,hcLight:_$},F("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Al=I("menu.selectionBackground",{dark:EX,light:EX,hcDark:EX,hcLight:EX},F("menuSelectionBackground","Background color of the selected menu item in menus.")),Pl=I("menu.selectionBorder",{dark:null,light:null,hcDark:O6,hcLight:O6},F("menuSelectionBorder","Border color of the selected menu item in menus.")),Dl=I("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:I1,hcLight:I1},F("menuSeparatorBackground","Color of a separator menu item in menus.")),tu=I("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},F("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Rk0=I("toolbar.hoverOutline",{dark:null,light:null,hcDark:O6,hcLight:O6},F("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),Mk0=I("toolbar.activeBackground",{dark:N$(tu,0.1),light:U3(tu,0.1),hcDark:null,hcLight:null},F("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),Ok0=I("editor.snippetTabstopHighlightBackground",{dark:new n(new k1(124,124,124,0.3)),light:new n(new k1(10,50,100,0.2)),hcDark:new n(new k1(124,124,124,0.3)),hcLight:new n(new k1(10,50,100,0.2))},F("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),_k0=I("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},F("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),Nk0=I("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},F("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),Tk0=I("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new n(new k1(10,50,100,0.5)),hcDark:"#525252",hcLight:"#292929"},F("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),Rl=I("breadcrumb.foreground",{light:y0(H0,0.8),dark:y0(H0,0.8),hcDark:y0(H0,0.8),hcLight:y0(H0,0.8)},F("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Ml=I("breadcrumb.background",{light:V8,dark:V8,hcDark:V8,hcLight:V8},F("breadcrumbsBackground","Background color of breadcrumb items.")),OL=I("breadcrumb.focusForeground",{light:U3(H0,0.2),dark:N$(H0,0.1),hcDark:N$(H0,0.1),hcLight:N$(H0,0.1)},F("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Ol=I("breadcrumb.activeSelectionForeground",{light:U3(H0,0.2),dark:N$(H0,0.1),hcDark:N$(H0,0.1),hcLight:N$(H0,0.1)},F("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),wk0=I("breadcrumbPicker.background",{light:l6,dark:l6,hcDark:l6,hcLight:l6},F("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),eu=n.fromHex("#40C8AE").transparent(_l),Jc=n.fromHex("#40A6FF").transparent(_l),$c=n.fromHex("#606060").transparent(0.4),CU=I("merge.currentHeaderBackground",{dark:eu,light:eu,hcDark:null,hcLight:null},F("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Lk0=I("merge.currentContentBackground",{dark:y0(CU,TJ),light:y0(CU,TJ),hcDark:y0(CU,TJ),hcLight:y0(CU,TJ)},F("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),vU=I("merge.incomingHeaderBackground",{dark:Jc,light:Jc,hcDark:null,hcLight:null},F("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),kk0=I("merge.incomingContentBackground",{dark:y0(vU,TJ),light:y0(vU,TJ),hcDark:y0(vU,TJ),hcLight:y0(vU,TJ)},F("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),hU=I("merge.commonHeaderBackground",{dark:$c,light:$c,hcDark:null,hcLight:null},F("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Ek0=I("merge.commonContentBackground",{dark:y0(hU,TJ),light:y0(hU,TJ),hcDark:y0(hU,TJ),hcLight:y0(hU,TJ)},F("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gU=I("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},F("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),Ik0=I("editorOverviewRuler.currentContentForeground",{dark:y0(CU,fU),light:y0(CU,fU),hcDark:gU,hcLight:gU},F("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),yk0=I("editorOverviewRuler.incomingContentForeground",{dark:y0(vU,fU),light:y0(vU,fU),hcDark:gU,hcLight:gU},F("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),xk0=I("editorOverviewRuler.commonContentForeground",{dark:y0(hU,fU),light:y0(hU,fU),hcDark:gU,hcLight:gU},F("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),bk0=I("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},F("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Sk0=I("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},F("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),tP=I("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},F("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),Ck0=I("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},F("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),_L=I("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},F("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),Nl=I("minimap.infoHighlight",{dark:k9,light:k9,hcDark:MV,hcLight:MV},F("minimapInfo","Minimap marker color for infos.")),Tl=I("minimap.warningHighlight",{dark:r8,light:r8,hcDark:RV,hcLight:RV},F("overviewRuleWarning","Minimap marker color for warnings.")),wl=I("minimap.errorHighlight",{dark:new n(new k1(255,18,18,0.7)),light:new n(new k1(255,18,18,0.7)),hcDark:new n(new k1(255,50,50,1)),hcLight:"#B5200D"},F("minimapError","Minimap marker color for errors.")),Ll=I("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},F("minimapBackground","Minimap background color.")),kl=I("minimap.foregroundOpacity",{dark:n.fromHex("#000f"),light:n.fromHex("#000f"),hcDark:n.fromHex("#000f"),hcLight:n.fromHex("#000f")},F("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),vk0=I("minimapSlider.background",{light:y0(EU,0.5),dark:y0(EU,0.5),hcDark:y0(EU,0.5),hcLight:y0(EU,0.5)},F("minimapSliderBackground","Minimap slider background color.")),hk0=I("minimapSlider.hoverBackground",{light:y0(IU,0.5),dark:y0(IU,0.5),hcDark:y0(IU,0.5),hcLight:y0(IU,0.5)},F("minimapSliderHoverBackground","Minimap slider background color when hovering.")),fk0=I("minimapSlider.activeBackground",{light:y0(yU,0.5),dark:y0(yU,0.5),hcDark:y0(yU,0.5),hcLight:y0(yU,0.5)},F("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),El=I("problemsErrorIcon.foreground",{dark:LX,light:LX,hcDark:LX,hcLight:LX},F("problemsErrorIconForeground","The color used for the problems error icon.")),Il=I("problemsWarningIcon.foreground",{dark:r8,light:r8,hcDark:r8,hcLight:r8},F("problemsWarningIconForeground","The color used for the problems warning icon.")),yl=I("problemsInfoIcon.foreground",{dark:k9,light:k9,hcDark:k9,hcLight:k9},F("problemsInfoIconForeground","The color used for the problems info icon.")),gk0=I("charts.foreground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("chartsForeground","The foreground color used in charts.")),pk0=I("charts.lines",{dark:y0(H0,0.5),light:y0(H0,0.5),hcDark:y0(H0,0.5),hcLight:y0(H0,0.5)},F("chartsLines","The color used for horizontal lines in charts.")),mk0=I("charts.red",{dark:LX,light:LX,hcDark:LX,hcLight:LX},F("chartsRed","The red color used in chart visualizations.")),uk0=I("charts.blue",{dark:k9,light:k9,hcDark:k9,hcLight:k9},F("chartsBlue","The blue color used in chart visualizations.")),ck0=I("charts.yellow",{dark:r8,light:r8,hcDark:r8,hcLight:r8},F("chartsYellow","The yellow color used in chart visualizations.")),lk0=I("charts.orange",{dark:tP,light:tP,hcDark:tP,hcLight:tP},F("chartsOrange","The orange color used in chart visualizations.")),dk0=I("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},F("chartsGreen","The green color used in chart visualizations.")),sk0=I("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},F("chartsPurple","The purple color used in chart visualizations."));bl=G6.as(cG.JSONContribution);bl.registerSchema(xl,YD.getColorSchema());Zc=new H6(()=>bl.notifySchemaChanged(xl),200);YD.onDidChangeSchema(()=>{if(!Zc.isScheduled())Zc.schedule()})});class z3{constructor(J,$){this.x=J,this.y=$,this._pageCoordinatesBrand=void 0}toClientCoordinates(J){return new QD(this.x-J.scrollX,this.y-J.scrollY)}}class QD{constructor(J,$){this.clientX=J,this.clientY=$,this._clientCoordinatesBrand=void 0}toPageCoordinates(J){return new z3(this.clientX+J.scrollX,this.clientY+J.scrollY)}}class Sl{constructor(J,$,X,Y){this.x=J,this.y=$,this.width=X,this.height=Y,this._editorPagePositionBrand=void 0}}class Cl{constructor(J,$){this.x=J,this.y=$,this._positionRelativeToEditorBrand=void 0}}function GD(J){let $=g5(J);return new Sl($.left,$.top,$.width,$.height)}function qD(J,$,X){let Y=$.width/J.offsetWidth,Z=$.height/J.offsetHeight,Q=(X.x-$.x)/Y,G=(X.y-$.y)/Z;return new Cl(Q,G)}class NL{constructor(J){this._editorViewDomNode=J}_create(J){return new T$(J,!1,this._editorViewDomNode)}onContextMenu(J,$){return r(J,"contextmenu",(X)=>{$(this._create(X))})}onMouseUp(J,$){return r(J,"mouseup",(X)=>{$(this._create(X))})}onMouseDown(J,$){return r(J,U0.MOUSE_DOWN,(X)=>{$(this._create(X))})}onPointerDown(J,$){return r(J,U0.POINTER_DOWN,(X)=>{$(this._create(X),X.pointerId)})}onMouseLeave(J,$){return r(J,U0.MOUSE_LEAVE,(X)=>{$(this._create(X))})}onMouseMove(J,$){return r(J,"mousemove",(X)=>$(this._create(X)))}}class TL{constructor(J){this._editorViewDomNode=J}_create(J){return new T$(J,!1,this._editorViewDomNode)}onPointerUp(J,$){return r(J,"pointerup",(X)=>{$(this._create(X))})}onPointerDown(J,$){return r(J,U0.POINTER_DOWN,(X)=>{$(this._create(X),X.pointerId)})}onPointerLeave(J,$){return r(J,U0.POINTER_LEAVE,(X)=>{$(this._create(X))})}onPointerMove(J,$){return r(J,"pointermove",(X)=>$(this._create(X)))}}class LL{constructor(J){this._editor=J,this._instanceId=++LL._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new H6(()=>this.garbageCollect(),1000)}createClassNameRef(J){let $=this.getOrCreateRule(J);return $.increaseRefCount(),{className:$.className,dispose:()=>{$.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(J){let $=this.computeUniqueKey(J),X=this._rules.get($);if(!X){let Y=this._counter++;X=new vl($,`dyn-rule-${this._instanceId}-${Y}`,hG(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,J),this._rules.set($,X)}return X}computeUniqueKey(J){return JSON.stringify(J)}garbageCollect(){for(let J of this._rules.values())if(!J.hasReferences())this._rules.delete(J.key),J.dispose()}}class vl{constructor(J,$,X,Y){this.key=J,this.className=$,this.properties=Y,this._referenceCount=0,this._styleElementDisposables=new $0,this._styleElement=p5(X,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(J,$){let X=`.${J} {`;for(let Y in $){let Z=$[Y],Q;if(typeof Z==="object")Q=P0(Z.id);else Q=Z;let G=OZ0(Y);X+=`
	${G}: ${Q};`}return X+=`
}`,X}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function OZ0(J){return J.replace(/(^[A-Z])/,([$])=>$.toLowerCase()).replace(/([A-Z])/g,([$])=>`-${$.toLowerCase()}`)}var T$,wL;var UD=w(()=>{T0();PV();O4();e1();z0();i8();T$=class T$ extends T8{constructor(J,$,X){super(O0(X),J);this._editorMouseEventBrand=void 0,this.isFromPointerCapture=$,this.pos=new z3(this.posx,this.posy),this.editorPos=GD(X),this.relativePos=qD(X,this.editorPos,this.pos)}};wL=class wL extends m{constructor(J){super();this._editorViewDomNode=J,this._globalPointerMoveMonitor=this._register(new XZ),this._keydownListener=null}startMonitoring(J,$,X,Y,Z){this._keydownListener=q6(J.ownerDocument,"keydown",(Q)=>{if(Q.toKeyCodeChord().isModifierKey())return;this._globalPointerMoveMonitor.stopMonitoring(!0,Q.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(J,$,X,(Q)=>{Y(new T$(Q,!0,this._editorViewDomNode))},(Q)=>{this._keydownListener.dispose(),Z(Q)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}};LL._idPool=0});var w$;var pU=w(()=>{z0();w$=class w$ extends m{constructor(){super();this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(J){return!1}onCompositionEnd(J){return!1}onConfigurationChanged(J){return!1}onCursorStateChanged(J){return!1}onDecorationsChanged(J){return!1}onFlushed(J){return!1}onFocusChanged(J){return!1}onLanguageConfigurationChanged(J){return!1}onLineMappingChanged(J){return!1}onLinesChanged(J){return!1}onLinesDeleted(J){return!1}onLinesInserted(J){return!1}onRevealRangeRequest(J){return!1}onScrollChanged(J){return!1}onThemeChanged(J){return!1}onTokensChanged(J){return!1}onTokensColorsChanged(J){return!1}onZonesChanged(J){return!1}handleEvents(J){let $=!1;for(let X=0,Y=J.length;X<Y;X++){let Z=J[X];switch(Z.type){case 0:if(this.onCompositionStart(Z))$=!0;break;case 1:if(this.onCompositionEnd(Z))$=!0;break;case 2:if(this.onConfigurationChanged(Z))$=!0;break;case 3:if(this.onCursorStateChanged(Z))$=!0;break;case 4:if(this.onDecorationsChanged(Z))$=!0;break;case 5:if(this.onFlushed(Z))$=!0;break;case 6:if(this.onFocusChanged(Z))$=!0;break;case 7:if(this.onLanguageConfigurationChanged(Z))$=!0;break;case 8:if(this.onLineMappingChanged(Z))$=!0;break;case 9:if(this.onLinesChanged(Z))$=!0;break;case 10:if(this.onLinesDeleted(Z))$=!0;break;case 11:if(this.onLinesInserted(Z))$=!0;break;case 12:if(this.onRevealRangeRequest(Z))$=!0;break;case 13:if(this.onScrollChanged(Z))$=!0;break;case 15:if(this.onTokensChanged(Z))$=!0;break;case 14:if(this.onThemeChanged(Z))$=!0;break;case 16:if(this.onTokensColorsChanged(Z))$=!0;break;case 17:if(this.onZonesChanged(Z))$=!0;break;default:console.info("View received unknown event: "),console.info(Z)}}if($)this._shouldRender=!0}}});class L8{static write(J,$){J.setAttribute("data-mprt",String($))}static read(J){let $=J.getAttribute("data-mprt");if($===null)return 0;return parseInt($,10)}static collect(J,$){let X=[],Y=0;while(J&&J!==J.ownerDocument.body){if(J===$)break;if(J.nodeType===J.ELEMENT_NODE)X[Y++]=this.read(J);J=J.parentElement}let Z=new Uint8Array(Y);for(let Q=0;Q<Y;Q++)Z[Q]=X[Y-Q-1];return Z}}var w6;var W7=w(()=>{pU();w6=class w6 extends w${constructor(J){super();this._context=J,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}});class hl{constructor(J,$){this._restrictedRenderingContextBrand=void 0,this._viewLayout=J,this.viewportData=$,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let X=this._viewLayout.getCurrentViewport();this.scrollTop=X.top,this.scrollLeft=X.left,this.viewportWidth=X.width,this.viewportHeight=X.height}getScrolledTopFromAbsoluteTop(J){return J-this.scrollTop}getVerticalOffsetForLineNumber(J,$){return this._viewLayout.getVerticalOffsetForLineNumber(J,$)}getVerticalOffsetAfterLineNumber(J,$){return this._viewLayout.getVerticalOffsetAfterLineNumber(J,$)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class EL{constructor(J,$,X,Y){this.outsideRenderedLine=J,this.lineNumber=$,this.ranges=X,this.continuesOnNextLine=Y}}class mU{static from(J){let $=Array(J.length);for(let X=0,Y=J.length;X<Y;X++){let Z=J[X];$[X]=new mU(Z.left,Z.width)}return $}constructor(J,$){this._horizontalRangeBrand=void 0,this.left=Math.round(J),this.width=Math.round($)}toString(){return`[${this.left},${this.width}]`}}class bX{constructor(J,$){this._floatHorizontalRangeBrand=void 0,this.left=J,this.width=$}toString(){return`[${this.left},${this.width}]`}static compare(J,$){return J.left-$.left}}class IL{constructor(J,$){this.outsideRenderedLine=J,this.originalLeft=$,this.left=Math.round(this.originalLeft)}}class zD{constructor(J,$){this.outsideRenderedLine=J,this.ranges=$}}var kL;var uU=w(()=>{kL=class kL extends hl{constructor(J,$,X){super(J,$);this._renderingContextBrand=void 0,this._viewLines=X}linesVisibleRangesForRange(J,$){return this._viewLines.linesVisibleRangesForRange(J,$)}visibleRangeForPosition(J){return this._viewLines.visibleRangeForPosition(J)}}});class cU{static _createRange(){if(!this._handyReadyRange)this._handyReadyRange=document.createRange();return this._handyReadyRange}static _detachRange(J,$){J.selectNodeContents($)}static _readClientRects(J,$,X,Y,Z){let Q=this._createRange();try{return Q.setStart(J,$),Q.setEnd(X,Y),Q.getClientRects()}catch(G){return null}finally{this._detachRange(Q,Z)}}static _mergeAdjacentRanges(J){if(J.length===1)return J;J.sort(bX.compare);let $=[],X=0,Y=J[0];for(let Z=1,Q=J.length;Z<Q;Z++){let G=J[Z];if(Y.left+Y.width+0.9>=G.left)Y.width=Math.max(Y.width,G.left+G.width-Y.left);else $[X++]=Y,Y=G}return $[X++]=Y,$}static _createHorizontalRangesFromClientRects(J,$,X){if(!J||J.length===0)return null;let Y=[];for(let Z=0,Q=J.length;Z<Q;Z++){let G=J[Z];Y[Z]=new bX(Math.max(0,(G.left-$)/X),G.width/X)}return this._mergeAdjacentRanges(Y)}static readHorizontalRanges(J,$,X,Y,Z,Q){let q=J.children.length-1;if(0>q)return null;if($=Math.min(q,Math.max(0,$)),Y=Math.min(q,Math.max(0,Y)),$===Y&&X===Z&&X===0&&!J.children[$].firstChild){let j=J.children[$].getClientRects();return Q.markDidDomLayout(),this._createHorizontalRangesFromClientRects(j,Q.clientRectDeltaLeft,Q.clientRectScale)}if($!==Y){if(Y>0&&Z===0)Y--,Z=1073741824}let U=J.children[$].firstChild,z=J.children[Y].firstChild;if(!U||!z){if(!U&&X===0&&$>0)U=J.children[$-1].firstChild,X=1073741824;if(!z&&Z===0&&Y>0)z=J.children[Y-1].firstChild,Z=1073741824}if(!U||!z)return null;X=Math.min(U.textContent.length,Math.max(0,X)),Z=Math.min(z.textContent.length,Math.max(0,Z));let H=this._readClientRects(U,X,z,Z,Q.endNode);return Q.markDidDomLayout(),this._createHorizontalRangesFromClientRects(H,Q.clientRectDeltaLeft,Q.clientRectScale)}}var fl=w(()=>{uU()});function wJ(J){return J===E9.HIGH_CONTRAST_DARK||J===E9.HIGH_CONTRAST_LIGHT}function H3(J){return J===E9.DARK||J===E9.HIGH_CONTRAST_DARK}var E9;var qZ=w(()=>{(function(J){J.DARK="dark",J.LIGHT="light",J.HIGH_CONTRAST_DARK="hcDark",J.HIGH_CONTRAST_LIGHT="hcLight"})(E9||(E9={}))});class HD{constructor(J,$){this.themeType=$;let X=J.options,Y=X.get(50);if(X.get(38)==="off")this.renderWhitespace=X.get(98);else this.renderWhitespace="none";this.renderControlCharacters=X.get(93),this.spaceWidth=Y.spaceWidth,this.middotWidth=Y.middotWidth,this.wsmiddotWidth=Y.wsmiddotWidth,this.useMonospaceOptimizations=Y.isMonospace&&!X.get(33),this.canUseHalfwidthRightwardsArrow=Y.canUseHalfwidthRightwardsArrow,this.lineHeight=X.get(66),this.stopRenderingLineAfter=X.get(116),this.fontLigatures=X.get(51)}equals(J){return this.themeType===J.themeType&&this.renderWhitespace===J.renderWhitespace&&this.renderControlCharacters===J.renderControlCharacters&&this.spaceWidth===J.spaceWidth&&this.middotWidth===J.middotWidth&&this.wsmiddotWidth===J.wsmiddotWidth&&this.useMonospaceOptimizations===J.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===J.canUseHalfwidthRightwardsArrow&&this.lineHeight===J.lineHeight&&this.stopRenderingLineAfter===J.stopRenderingLineAfter&&this.fontLigatures===J.fontLigatures}}class I9{constructor(J){this._options=J,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){if(this._renderedViewLine&&this._renderedViewLine.domNode)return this._renderedViewLine.domNode.domNode;return null}setDomNode(J){if(this._renderedViewLine)this._renderedViewLine.domNode=Y1(J);else throw Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(J){this._isMaybeInvalid=!0,this._options=J}onSelectionChanged(){if(wJ(this._options.themeType)||this._options.renderWhitespace==="selection")return this._isMaybeInvalid=!0,!0;return!1}renderLine(J,$,X,Y){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;let Z=X.getViewLineRenderingData(J),Q=this._options,G=w9.filter(Z.inlineDecorations,J,Z.minColumn,Z.maxColumn),q=null;if(wJ(Q.themeType)||this._options.renderWhitespace==="selection"){let j=X.selections;for(let V of j){if(V.endLineNumber<J||V.startLineNumber>J)continue;let W=V.startLineNumber===J?V.startColumn:Z.minColumn,B=V.endLineNumber===J?V.endColumn:Z.maxColumn;if(W<B){if(wJ(Q.themeType))G.push(new w9(W,B,"inline-selected-text",0));if(this._options.renderWhitespace==="selection"){if(!q)q=[];q.push(new HV(W-1,B-1))}}}}let U=new K$(Q.useMonospaceOptimizations,Q.canUseHalfwidthRightwardsArrow,Z.content,Z.continuesWithWrappedLine,Z.isBasicASCII,Z.containsRTL,Z.minColumn-1,Z.tokens,G,Z.tabSize,Z.startVisibleColumn,Q.spaceWidth,Q.middotWidth,Q.wsmiddotWidth,Q.stopRenderingLineAfter,Q.renderWhitespace,Q.renderControlCharacters,Q.fontLigatures!==x7.OFF,q);if(this._renderedViewLine&&this._renderedViewLine.input.equals(U))return!1;Y.appendString('<div style="top:'),Y.appendString(String($)),Y.appendString("px;height:"),Y.appendString(String(this._options.lineHeight)),Y.appendString('px;" class="'),Y.appendString(I9.CLASS_NAME),Y.appendString('">');let z=jV(U,Y);Y.appendString("</div>");let H=null;if(lU&&_Z0&&Z.isBasicASCII&&Q.useMonospaceOptimizations&&z.containsForeignElements===0)H=new NV(this._renderedViewLine?this._renderedViewLine.domNode:null,U,z.characterMapping);if(!H)H=pl(this._renderedViewLine?this._renderedViewLine.domNode:null,U,z.characterMapping,z.containsRTL,z.containsForeignElements);return this._renderedViewLine=H,!0}layoutLine(J,$){if(this._renderedViewLine&&this._renderedViewLine.domNode)this._renderedViewLine.domNode.setTop($),this._renderedViewLine.domNode.setHeight(this._options.lineHeight)}getWidth(J){if(!this._renderedViewLine)return 0;return this._renderedViewLine.getWidth(J)}getWidthIsFast(){if(!this._renderedViewLine)return!0;return this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){if(!this._renderedViewLine)return!1;return this._renderedViewLine instanceof NV}monospaceAssumptionsAreValid(){if(!this._renderedViewLine)return lU;if(this._renderedViewLine instanceof NV)return this._renderedViewLine.monospaceAssumptionsAreValid();return lU}onMonospaceAssumptionsInvalidated(){if(this._renderedViewLine&&this._renderedViewLine instanceof NV)this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine()}getVisibleRangesForRange(J,$,X,Y){if(!this._renderedViewLine)return null;$=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,$)),X=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,X));let Z=this._renderedViewLine.input.stopRenderingLineAfter;if(Z!==-1&&$>Z+1&&X>Z+1)return new zD(!0,[new bX(this.getWidth(Y),0)]);if(Z!==-1&&$>Z+1)$=Z+1;if(Z!==-1&&X>Z+1)X=Z+1;let Q=this._renderedViewLine.getVisibleRangesForRange(J,$,X,Y);if(Q&&Q.length>0)return new zD(!1,Q);return null}getColumnOfNodeOffset(J,$){if(!this._renderedViewLine)return 1;return this._renderedViewLine.getColumnOfNodeOffset(J,$)}}class NV{constructor(J,$,X){this._cachedWidth=-1,this.domNode=J,this.input=$;let Y=Math.floor($.lineContent.length/300);if(Y>0){this._keyColumnPixelOffsetCache=new Float32Array(Y);for(let Z=0;Z<Y;Z++)this._keyColumnPixelOffsetCache[Z]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=X,this._charWidth=$.spaceWidth}getWidth(J){if(!this.domNode||this.input.lineContent.length<300){let $=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*$)}if(this._cachedWidth===-1)this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,J===null||J===void 0||J.markDidDomLayout();return this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return lU;if(this.input.lineContent.length<300){let J=this.getWidth(null),$=this.domNode.domNode.firstChild.offsetWidth;if(Math.abs(J-$)>=2)console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),lU=!1}return lU}toSlowRenderedLine(){return pl(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(J,$,X,Y){let Z=this._getColumnPixelOffset(J,$,Y),Q=this._getColumnPixelOffset(J,X,Y);return[new bX(Z,Q-Z)]}_getColumnPixelOffset(J,$,X){if($<=300){let U=this._characterMapping.getHorizontalOffset($);return this._charWidth*U}let Y=Math.floor(($-1)/300)-1,Z=(Y+1)*300+1,Q=-1;if(this._keyColumnPixelOffsetCache){if(Q=this._keyColumnPixelOffsetCache[Y],Q===-1)Q=this._actualReadPixelOffset(J,Z,X),this._keyColumnPixelOffsetCache[Y]=Q}if(Q===-1){let U=this._characterMapping.getHorizontalOffset($);return this._charWidth*U}let G=this._characterMapping.getHorizontalOffset(Z),q=this._characterMapping.getHorizontalOffset($);return Q+this._charWidth*(q-G)}_getReadingTarget(J){return J.domNode.firstChild}_actualReadPixelOffset(J,$,X){if(!this.domNode)return-1;let Y=this._characterMapping.getDomPosition($),Z=cU.readHorizontalRanges(this._getReadingTarget(this.domNode),Y.partIndex,Y.charIndex,Y.partIndex,Y.charIndex,X);if(!Z||Z.length===0)return-1;return Z[0].left}getColumnOfNodeOffset(J,$){return ml(this._characterMapping,J,$)}}class yL{constructor(J,$,X,Y,Z){if(this.domNode=J,this.input=$,this._characterMapping=X,this._isWhitespaceOnly=/^\s*$/.test($.lineContent),this._containsForeignElements=Z,this._cachedWidth=-1,this._pixelOffsetCache=null,!Y||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let Q=0,G=this._characterMapping.length;Q<=G;Q++)this._pixelOffsetCache[Q]=-1}}_getReadingTarget(J){return J.domNode.firstChild}getWidth(J){if(!this.domNode)return 0;if(this._cachedWidth===-1)this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,J===null||J===void 0||J.markDidDomLayout();return this._cachedWidth}getWidthIsFast(){if(this._cachedWidth===-1)return!1;return!0}getVisibleRangesForRange(J,$,X,Y){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){let Z=this._readPixelOffset(this.domNode,J,$,Y);if(Z===-1)return null;let Q=this._readPixelOffset(this.domNode,J,X,Y);if(Q===-1)return null;return[new bX(Z,Q-Z)]}return this._readVisibleRangesForRange(this.domNode,J,$,X,Y)}_readVisibleRangesForRange(J,$,X,Y,Z){if(X===Y){let Q=this._readPixelOffset(J,$,X,Z);if(Q===-1)return null;else return[new bX(Q,0)]}else return this._readRawVisibleRangesForRange(J,X,Y,Z)}_readPixelOffset(J,$,X,Y){if(this._characterMapping.length===0){if(this._containsForeignElements===0)return 0;if(this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(Y);let Z=this._getReadingTarget(J);if(Z.firstChild)return Y.markDidDomLayout(),Z.firstChild.offsetWidth;else return 0}if(this._pixelOffsetCache!==null){let Z=this._pixelOffsetCache[X];if(Z!==-1)return Z;let Q=this._actualReadPixelOffset(J,$,X,Y);return this._pixelOffsetCache[X]=Q,Q}return this._actualReadPixelOffset(J,$,X,Y)}_actualReadPixelOffset(J,$,X,Y){if(this._characterMapping.length===0){let q=cU.readHorizontalRanges(this._getReadingTarget(J),0,0,0,0,Y);if(!q||q.length===0)return-1;return q[0].left}if(X===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(Y);let Z=this._characterMapping.getDomPosition(X),Q=cU.readHorizontalRanges(this._getReadingTarget(J),Z.partIndex,Z.charIndex,Z.partIndex,Z.charIndex,Y);if(!Q||Q.length===0)return-1;let G=Q[0].left;if(this.input.isBasicASCII){let q=this._characterMapping.getHorizontalOffset(X),U=Math.round(this.input.spaceWidth*q);if(Math.abs(U-G)<=1)return U}return G}_readRawVisibleRangesForRange(J,$,X,Y){if($===1&&X===this._characterMapping.length)return[new bX(0,this.getWidth(Y))];let Z=this._characterMapping.getDomPosition($),Q=this._characterMapping.getDomPosition(X);return cU.readHorizontalRanges(this._getReadingTarget(J),Z.partIndex,Z.charIndex,Q.partIndex,Q.charIndex,Y)}getColumnOfNodeOffset(J,$){return ml(this._characterMapping,J,$)}}function NZ0(J,$,X,Y,Z){return new gl(J,$,X,Y,Z)}function TZ0(J,$,X,Y,Z){return new yL(J,$,X,Y,Z)}function ml(J,$,X){let Y=$.textContent.length,Z=-1;while($)$=$.previousSibling,Z++;return J.getColumn(new cP(Z,X),Y)}var _Z0,lU=!0,gl,pl;var xL=w(()=>{e7();L1();fl();uU();mP();DU();qZ();O8();_Z0=function(){if(jQ)return!0;if(N6||U8||K9)return!1;return!0}();I9.CLASS_NAME="view-line";gl=class gl extends yL{_readVisibleRangesForRange(J,$,X,Y,Z){let Q=super._readVisibleRangesForRange(J,$,X,Y,Z);if(!Q||Q.length===0||X===Y||X===1&&Y===this._characterMapping.length)return Q;if(!this.input.containsRTL){let G=this._readPixelOffset(J,$,Y,Z);if(G!==-1){let q=Q[Q.length-1];if(q.left<G)q.width=G-q.left}}return Q}};pl=function(){if(G$)return NZ0;return TZ0}()});class s1{static _nextVisibleColumn(J,$,X){if(J===9)return s1.nextRenderTabStop($,X);if(R4(J)||Bj(J))return $+2;return $+1}static visibleColumnFromColumn(J,$,X){let Y=Math.min($-1,J.length),Z=J.substring(0,Y),Q=new lq(Z),G=0;while(!Q.eol()){let q=cq(Z,Y,Q.offset);Q.nextGraphemeLength(),G=this._nextVisibleColumn(q,G,X)}return G}static columnFromVisibleColumn(J,$,X){if($<=0)return 1;let Y=J.length,Z=new lq(J),Q=0,G=1;while(!Z.eol()){let q=cq(J,Y,Z.offset);Z.nextGraphemeLength();let U=this._nextVisibleColumn(q,Q,X),z=Z.offset+1;if(U>=$){let H=$-Q;if(U-$<H)return z;else return G}Q=U,G=z}return Y+1}static nextRenderTabStop(J,$){return J+$-J%$}static nextIndentTabStop(J,$){return J+$-J%$}static prevRenderTabStop(J,$){return Math.max(0,J-1-(J-1)%$)}static prevIndentTabStop(J,$){return Math.max(0,J-1-(J-1)%$)}}var LJ=w(()=>{X1()});class j3{static whitespaceVisibleColumn(J,$,X){let Y=J.length,Z=0,Q=-1,G=-1;for(let q=0;q<Y;q++){if(q===$)return[Q,G,Z];if(Z%X===0)Q=q,G=Z;switch(J.charCodeAt(q)){case 32:Z+=1;break;case 9:Z=s1.nextRenderTabStop(Z,X);break;default:return[-1,-1,-1]}}if($===Y)return[Q,G,Z];return[-1,-1,-1]}static atomicPosition(J,$,X,Y){let Z=J.length,[Q,G,q]=j3.whitespaceVisibleColumn(J,$,X);if(q===-1)return-1;let U;switch(Y){case 0:U=!0;break;case 1:U=!1;break;case 2:if(q%X===0)return $;U=q%X<=X/2;break}if(U){if(Q===-1)return-1;let j=G;for(let V=Q;V<Z;++V){if(j===G+X)return Q;switch(J.charCodeAt(V)){case 32:j+=1;break;case 9:j=s1.nextRenderTabStop(j,X);break;default:return-1}}if(j===G+X)return Q;return-1}let z=s1.nextRenderTabStop(q,X),H=q;for(let j=$;j<Z;j++){if(H===z)return j;switch(J.charCodeAt(j)){case 32:H+=1;break;case 9:H=s1.nextRenderTabStop(H,X);break;default:return-1}}if(H===z)return Z;return-1}}var bL=w(()=>{LJ()});class UZ{constructor(J=null){this.hitTarget=J,this.type=0}}class CL{constructor(J,$,X){this.position=J,this.spanNode=$,this.injectedText=X,this.type=1}}class vL{constructor(J,$){this.lastViewCursorsRenderData=J,this.lastTextareaPosition=$}}class k8{static _deduceRage(J,$=null){if(!$&&J)return new k(J.lineNumber,J.column,J.lineNumber,J.column);return $!==null&&$!==void 0?$:null}static createUnknown(J,$,X){return{type:0,element:J,mouseColumn:$,position:X,range:this._deduceRage(X)}}static createTextarea(J,$){return{type:1,element:J,mouseColumn:$,position:null,range:null}}static createMargin(J,$,X,Y,Z,Q){return{type:J,element:$,mouseColumn:X,position:Y,range:Z,detail:Q}}static createViewZone(J,$,X,Y,Z){return{type:J,element:$,mouseColumn:X,position:Y,range:this._deduceRage(Y),detail:Z}}static createContentText(J,$,X,Y,Z){return{type:6,element:J,mouseColumn:$,position:X,range:this._deduceRage(X,Y),detail:Z}}static createContentEmpty(J,$,X,Y){return{type:7,element:J,mouseColumn:$,position:X,range:this._deduceRage(X),detail:Y}}static createContentWidget(J,$,X){return{type:9,element:J,mouseColumn:$,position:null,range:null,detail:X}}static createScrollbar(J,$,X){return{type:11,element:J,mouseColumn:$,position:X,range:this._deduceRage(X)}}static createOverlayWidget(J,$,X){return{type:12,element:J,mouseColumn:$,position:null,range:null,detail:X}}static createOutsideEditor(J,$,X,Y){return{type:13,element:null,mouseColumn:J,position:$,range:this._deduceRage($),outsidePosition:X,outsideDistance:Y}}static _typeToString(J){if(J===1)return"TEXTAREA";if(J===2)return"GUTTER_GLYPH_MARGIN";if(J===3)return"GUTTER_LINE_NUMBERS";if(J===4)return"GUTTER_LINE_DECORATIONS";if(J===5)return"GUTTER_VIEW_ZONE";if(J===6)return"CONTENT_TEXT";if(J===7)return"CONTENT_EMPTY";if(J===8)return"CONTENT_VIEW_ZONE";if(J===9)return"CONTENT_WIDGET";if(J===10)return"OVERVIEW_RULER";if(J===11)return"SCROLLBAR";if(J===12)return"OVERLAY_WIDGET";return"UNKNOWN"}static toString(J){return this._typeToString(J.type)+": "+J.position+" - "+J.range+" - "+JSON.stringify(J.detail)}}class B7{static isTextArea(J){return J.length===2&&J[0]===3&&J[1]===7}static isChildOfViewLines(J){return J.length>=4&&J[0]===3&&J[3]===8}static isStrictChildOfViewLines(J){return J.length>4&&J[0]===3&&J[3]===8}static isChildOfScrollableElement(J){return J.length>=2&&J[0]===3&&J[1]===6}static isChildOfMinimap(J){return J.length>=2&&J[0]===3&&J[1]===9}static isChildOfContentWidgets(J){return J.length>=4&&J[0]===3&&J[3]===1}static isChildOfOverflowGuard(J){return J.length>=1&&J[0]===3}static isChildOfOverflowingContentWidgets(J){return J.length>=1&&J[0]===2}static isChildOfOverlayWidgets(J){return J.length>=2&&J[0]===3&&J[1]===4}static isChildOfOverflowingOverlayWidgets(J){return J.length>=1&&J[0]===5}}class B3{constructor(J,$,X){this.viewModel=J.viewModel;let Y=J.configuration.options;this.layoutInfo=Y.get(143),this.viewDomNode=$.viewDomNode,this.lineHeight=Y.get(66),this.stickyTabStops=Y.get(115),this.typicalHalfwidthCharacterWidth=Y.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=X,this._context=J,this._viewHelper=$}getZoneAtCoord(J){return B3.getZoneAtCoord(this._context,J)}static getZoneAtCoord(J,$){let X=J.viewLayout.getWhitespaceAtVerticalOffset($);if(X){let Y=X.verticalOffset+X.height/2,Z=J.viewModel.getLineCount(),Q=null,G,q=null;if(X.afterLineNumber!==Z)q=new g(X.afterLineNumber+1,1);if(X.afterLineNumber>0)Q=new g(X.afterLineNumber,J.viewModel.getLineMaxColumn(X.afterLineNumber));if(q===null)G=Q;else if(Q===null)G=q;else if($<Y)G=Q;else G=q;return{viewZoneId:X.id,afterLineNumber:X.afterLineNumber,positionBefore:Q,positionAfter:q,position:G}}return null}getFullLineRangeAtCoord(J){if(this._context.viewLayout.isAfterLines(J)){let Y=this._context.viewModel.getLineCount(),Z=this._context.viewModel.getLineMaxColumn(Y);return{range:new k(Y,Z,Y,Z),isAfterLines:!0}}let $=this._context.viewLayout.getLineNumberAtVerticalOffset(J),X=this._context.viewModel.getLineMaxColumn($);return{range:new k($,1,$,X),isAfterLines:!1}}getLineNumberAtVerticalOffset(J){return this._context.viewLayout.getLineNumberAtVerticalOffset(J)}isAfterLines(J){return this._context.viewLayout.isAfterLines(J)}isInTopPadding(J){return this._context.viewLayout.isInTopPadding(J)}isInBottomPadding(J){return this._context.viewLayout.isInBottomPadding(J)}getVerticalOffsetForLineNumber(J){return this._context.viewLayout.getVerticalOffsetForLineNumber(J)}findAttribute(J,$){return B3._findAttribute(J,$,this._viewHelper.viewDomNode)}static _findAttribute(J,$,X){while(J&&J!==J.ownerDocument.body){if(J.hasAttribute&&J.hasAttribute($))return J.getAttribute($);if(J===X)return null;J=J.parentNode}return null}getLineWidth(J){return this._viewHelper.getLineWidth(J)}visibleRangeForPosition(J,$){return this._viewHelper.visibleRangeForPosition(J,$)}getPositionFromDOMInfo(J,$){return this._viewHelper.getPositionFromDOMInfo(J,$)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class cl{constructor(J,$,X,Y){this.editorPos=$,this.pos=X,this.relativePos=Y,this.mouseVerticalOffset=Math.max(0,J.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=J.getCurrentScrollLeft()+this.relativePos.x-J.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<J.layoutInfo.contentLeft&&this.relativePos.x>=J.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,W8._getMouseColumn(this.mouseContentHorizontalOffset,J.typicalHalfwidthCharacterWidth))}}function SL(J){return{isAfterLines:!1,horizontalDistanceToText:J}}class W8{constructor(J,$){this._context=J,this._viewHelper=$}mouseTargetIsWidget(J){let $=J.target,X=L8.collect($,this._viewHelper.viewDomNode);if(B7.isChildOfContentWidgets(X)||B7.isChildOfOverflowingContentWidgets(X))return!0;if(B7.isChildOfOverlayWidgets(X)||B7.isChildOfOverflowingOverlayWidgets(X))return!0;return!1}createMouseTarget(J,$,X,Y,Z){let Q=new B3(this._context,this._viewHelper,J),G=new hL(Q,$,X,Y,Z);try{let q=W8._createMouseTarget(Q,G,!1);if(q.type===6){if(Q.stickyTabStops&&q.position!==null){let U=W8._snapToSoftTabBoundary(q.position,Q.viewModel),z=k.fromPositions(U,U).plusRange(q.range);return G.fulfillContentText(U,z,q.detail)}}return q}catch(q){return G.fulfillUnknown()}}static _createMouseTarget(J,$,X){if($.target===null){if(X)return $.fulfillUnknown();let Q=W8._doHitTest(J,$);if(Q.type===1)return W8.createMouseTargetFromHitTestPosition(J,$,Q.spanNode,Q.position,Q.injectedText);return this._createMouseTarget(J,$.withTarget(Q.hitTarget),!0)}let Y=$,Z=null;if(!B7.isChildOfOverflowGuard($.targetPath)&&!B7.isChildOfOverflowingContentWidgets($.targetPath)&&!B7.isChildOfOverflowingOverlayWidgets($.targetPath))Z=Z||$.fulfillUnknown();return Z=Z||W8._hitTestContentWidget(J,Y),Z=Z||W8._hitTestOverlayWidget(J,Y),Z=Z||W8._hitTestMinimap(J,Y),Z=Z||W8._hitTestScrollbarSlider(J,Y),Z=Z||W8._hitTestViewZone(J,Y),Z=Z||W8._hitTestMargin(J,Y),Z=Z||W8._hitTestViewCursor(J,Y),Z=Z||W8._hitTestTextArea(J,Y),Z=Z||W8._hitTestViewLines(J,Y,X),Z=Z||W8._hitTestScrollbar(J,Y),Z||$.fulfillUnknown()}static _hitTestContentWidget(J,$){if(B7.isChildOfContentWidgets($.targetPath)||B7.isChildOfOverflowingContentWidgets($.targetPath)){let X=J.findAttribute($.target,"widgetId");if(X)return $.fulfillContentWidget(X);else return $.fulfillUnknown()}return null}static _hitTestOverlayWidget(J,$){if(B7.isChildOfOverlayWidgets($.targetPath)||B7.isChildOfOverflowingOverlayWidgets($.targetPath)){let X=J.findAttribute($.target,"widgetId");if(X)return $.fulfillOverlayWidget(X);else return $.fulfillUnknown()}return null}static _hitTestViewCursor(J,$){if($.target){let X=J.lastRenderData.lastViewCursorsRenderData;for(let Y of X)if($.target===Y.domNode)return $.fulfillContentText(Y.position,null,{mightBeForeignElement:!1,injectedText:null})}if($.isInContentArea){let X=J.lastRenderData.lastViewCursorsRenderData,Y=$.mouseContentHorizontalOffset,Z=$.mouseVerticalOffset;for(let Q of X){if(Y<Q.contentLeft)continue;if(Y>Q.contentLeft+Q.width)continue;let G=J.getVerticalOffsetForLineNumber(Q.position.lineNumber);if(G<=Z&&Z<=G+Q.height)return $.fulfillContentText(Q.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(J,$){let X=J.getZoneAtCoord($.mouseVerticalOffset);if(X){let Y=$.isInContentArea?8:5;return $.fulfillViewZone(Y,X.position,X)}return null}static _hitTestTextArea(J,$){if(B7.isTextArea($.targetPath)){if(J.lastRenderData.lastTextareaPosition)return $.fulfillContentText(J.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null});return $.fulfillTextarea()}return null}static _hitTestMargin(J,$){if($.isInMarginArea){let X=J.getFullLineRangeAtCoord($.mouseVerticalOffset),Y=X.range.getStartPosition(),Z=Math.abs($.relativePos.x),Q={isAfterLines:X.isAfterLines,glyphMarginLeft:J.layoutInfo.glyphMarginLeft,glyphMarginWidth:J.layoutInfo.glyphMarginWidth,lineNumbersWidth:J.layoutInfo.lineNumbersWidth,offsetX:Z};if(Z-=J.layoutInfo.glyphMarginLeft,Z<=J.layoutInfo.glyphMarginWidth){let G=J.viewModel.coordinatesConverter.convertViewPositionToModelPosition(X.range.getStartPosition()),q=J.viewModel.glyphLanes.getLanesAtLine(G.lineNumber);return Q.glyphMarginLane=q[Math.floor(Z/J.lineHeight)],$.fulfillMargin(2,Y,X.range,Q)}if(Z-=J.layoutInfo.glyphMarginWidth,Z<=J.layoutInfo.lineNumbersWidth)return $.fulfillMargin(3,Y,X.range,Q);return Z-=J.layoutInfo.lineNumbersWidth,$.fulfillMargin(4,Y,X.range,Q)}return null}static _hitTestViewLines(J,$,X){if(!B7.isChildOfViewLines($.targetPath))return null;if(J.isInTopPadding($.mouseVerticalOffset))return $.fulfillContentEmpty(new g(1,1),ul);if(J.isAfterLines($.mouseVerticalOffset)||J.isInBottomPadding($.mouseVerticalOffset)){let Z=J.viewModel.getLineCount(),Q=J.viewModel.getLineMaxColumn(Z);return $.fulfillContentEmpty(new g(Z,Q),ul)}if(X){if(B7.isStrictChildOfViewLines($.targetPath)){let Z=J.getLineNumberAtVerticalOffset($.mouseVerticalOffset);if(J.viewModel.getLineLength(Z)===0){let G=J.getLineWidth(Z),q=SL($.mouseContentHorizontalOffset-G);return $.fulfillContentEmpty(new g(Z,1),q)}let Q=J.getLineWidth(Z);if($.mouseContentHorizontalOffset>=Q){let G=SL($.mouseContentHorizontalOffset-Q),q=new g(Z,J.viewModel.getLineMaxColumn(Z));return $.fulfillContentEmpty(q,G)}}return $.fulfillUnknown()}let Y=W8._doHitTest(J,$);if(Y.type===1)return W8.createMouseTargetFromHitTestPosition(J,$,Y.spanNode,Y.position,Y.injectedText);return this._createMouseTarget(J,$.withTarget(Y.hitTarget),!0)}static _hitTestMinimap(J,$){if(B7.isChildOfMinimap($.targetPath)){let X=J.getLineNumberAtVerticalOffset($.mouseVerticalOffset),Y=J.viewModel.getLineMaxColumn(X);return $.fulfillScrollbar(new g(X,Y))}return null}static _hitTestScrollbarSlider(J,$){if(B7.isChildOfScrollableElement($.targetPath)){if($.target&&$.target.nodeType===1){let X=$.target.className;if(X&&/\b(slider|scrollbar)\b/.test(X)){let Y=J.getLineNumberAtVerticalOffset($.mouseVerticalOffset),Z=J.viewModel.getLineMaxColumn(Y);return $.fulfillScrollbar(new g(Y,Z))}}}return null}static _hitTestScrollbar(J,$){if(B7.isChildOfScrollableElement($.targetPath)){let X=J.getLineNumberAtVerticalOffset($.mouseVerticalOffset),Y=J.viewModel.getLineMaxColumn(X);return $.fulfillScrollbar(new g(X,Y))}return null}getMouseColumn(J){let $=this._context.configuration.options,X=$.get(143),Y=this._context.viewLayout.getCurrentScrollLeft()+J.x-X.contentLeft;return W8._getMouseColumn(Y,$.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(J,$){if(J<0)return 1;return Math.round(J/$)+1}static createMouseTargetFromHitTestPosition(J,$,X,Y,Z){let{lineNumber:Q,column:G}=Y,q=J.getLineWidth(Q);if($.mouseContentHorizontalOffset>q){let P=SL($.mouseContentHorizontalOffset-q);return $.fulfillContentEmpty(Y,P)}let U=J.visibleRangeForPosition(Q,G);if(!U)return $.fulfillUnknown(Y);let z=U.left;if(Math.abs($.mouseContentHorizontalOffset-z)<1)return $.fulfillContentText(Y,null,{mightBeForeignElement:!!Z,injectedText:Z});let H=[];if(H.push({offset:U.left,column:G}),G>1){let P=J.visibleRangeForPosition(Q,G-1);if(P)H.push({offset:P.left,column:G-1})}let j=J.viewModel.getLineMaxColumn(Q);if(G<j){let P=J.visibleRangeForPosition(Q,G+1);if(P)H.push({offset:P.left,column:G+1})}H.sort((P,A)=>P.offset-A.offset);let V=$.pos.toClientCoordinates(O0(J.viewDomNode)),W=X.getBoundingClientRect(),B=W.left<=V.clientX&&V.clientX<=W.right,K=null;for(let P=1;P<H.length;P++){let A=H[P-1],D=H[P];if(A.offset<=$.mouseContentHorizontalOffset&&$.mouseContentHorizontalOffset<=D.offset){K=new k(Q,A.column,Q,D.column);let M=Math.abs(A.offset-$.mouseContentHorizontalOffset),R=Math.abs(D.offset-$.mouseContentHorizontalOffset);Y=M<R?new g(Q,A.column):new g(Q,D.column);break}}return $.fulfillContentText(Y,K,{mightBeForeignElement:!B||!!Z,injectedText:Z})}static _doHitTestWithCaretRangeFromPoint(J,$){let X=J.getLineNumberAtVerticalOffset($.mouseVerticalOffset),Y=J.getVerticalOffsetForLineNumber(X),Z=Y+J.lineHeight;if(!(X===J.viewModel.getLineCount()&&$.mouseVerticalOffset>Z)){let G=Math.floor((Y+Z)/2),q=$.pos.y+(G-$.mouseVerticalOffset);if(q<=$.editorPos.y)q=$.editorPos.y+1;if(q>=$.editorPos.y+$.editorPos.height)q=$.editorPos.y+$.editorPos.height-1;let U=new z3($.pos.x,q),z=this._actualDoHitTestWithCaretRangeFromPoint(J,U.toClientCoordinates(O0(J.viewDomNode)));if(z.type===1)return z}return this._actualDoHitTestWithCaretRangeFromPoint(J,$.pos.toClientCoordinates(O0(J.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(J,$){let X=cY(J.viewDomNode),Y;if(X)if(typeof X.caretRangeFromPoint>"u")Y=wZ0(X,$.clientX,$.clientY);else Y=X.caretRangeFromPoint($.clientX,$.clientY);else Y=J.viewDomNode.ownerDocument.caretRangeFromPoint($.clientX,$.clientY);if(!Y||!Y.startContainer)return new UZ;let Z=Y.startContainer;if(Z.nodeType===Z.TEXT_NODE){let Q=Z.parentNode,G=Q?Q.parentNode:null,q=G?G.parentNode:null;if((q&&q.nodeType===q.ELEMENT_NODE?q.className:null)===I9.CLASS_NAME)return V3.createFromDOMInfo(J,Q,Y.startOffset);else return new UZ(Z.parentNode)}else if(Z.nodeType===Z.ELEMENT_NODE){let Q=Z.parentNode,G=Q?Q.parentNode:null;if((G&&G.nodeType===G.ELEMENT_NODE?G.className:null)===I9.CLASS_NAME)return V3.createFromDOMInfo(J,Z,Z.textContent.length);else return new UZ(Z)}return new UZ}static _doHitTestWithCaretPositionFromPoint(J,$){let X=J.viewDomNode.ownerDocument.caretPositionFromPoint($.clientX,$.clientY);if(X.offsetNode.nodeType===X.offsetNode.TEXT_NODE){let Y=X.offsetNode.parentNode,Z=Y?Y.parentNode:null,Q=Z?Z.parentNode:null;if((Q&&Q.nodeType===Q.ELEMENT_NODE?Q.className:null)===I9.CLASS_NAME)return V3.createFromDOMInfo(J,X.offsetNode.parentNode,X.offset);else return new UZ(X.offsetNode.parentNode)}if(X.offsetNode.nodeType===X.offsetNode.ELEMENT_NODE){let Y=X.offsetNode.parentNode,Z=Y&&Y.nodeType===Y.ELEMENT_NODE?Y.className:null,Q=Y?Y.parentNode:null,G=Q&&Q.nodeType===Q.ELEMENT_NODE?Q.className:null;if(Z===I9.CLASS_NAME){let q=X.offsetNode.childNodes[Math.min(X.offset,X.offsetNode.childNodes.length-1)];if(q)return V3.createFromDOMInfo(J,q,0)}else if(G===I9.CLASS_NAME)return V3.createFromDOMInfo(J,X.offsetNode,0)}return new UZ(X.offsetNode)}static _snapToSoftTabBoundary(J,$){let X=$.getLineContent(J.lineNumber),{tabSize:Y}=$.model.getOptions(),Z=j3.atomicPosition(X,J.column-1,Y,2);if(Z!==-1)return new g(J.lineNumber,Z+1);return J}static _doHitTest(J,$){let X=new UZ;if(typeof J.viewDomNode.ownerDocument.caretRangeFromPoint==="function")X=this._doHitTestWithCaretRangeFromPoint(J,$);else if(J.viewDomNode.ownerDocument.caretPositionFromPoint)X=this._doHitTestWithCaretPositionFromPoint(J,$.pos.toClientCoordinates(O0(J.viewDomNode)));if(X.type===1){let Y=J.viewModel.getInjectedTextAt(X.position),Z=J.viewModel.normalizePosition(X.position,2);if(Y||!Z.equals(X.position))X=new CL(Z,X.spanNode,Y)}return X}}function wZ0(J,$,X){let Y=document.createRange(),Z=J.elementFromPoint($,X);if(Z!==null){while(Z&&Z.firstChild&&Z.firstChild.nodeType!==Z.firstChild.TEXT_NODE&&Z.lastChild&&Z.lastChild.firstChild)Z=Z.lastChild;let Q=Z.getBoundingClientRect(),G=O0(Z),q=G.getComputedStyle(Z,null).getPropertyValue("font-style"),U=G.getComputedStyle(Z,null).getPropertyValue("font-variant"),z=G.getComputedStyle(Z,null).getPropertyValue("font-weight"),H=G.getComputedStyle(Z,null).getPropertyValue("font-size"),j=G.getComputedStyle(Z,null).getPropertyValue("line-height"),V=G.getComputedStyle(Z,null).getPropertyValue("font-family"),W=`${q} ${U} ${z} ${H}/${j} ${V}`,B=Z.innerText,K=Q.left,P=0,A;if($>Q.left+Q.width)P=B.length;else{let D=W3.getInstance();for(let M=0;M<B.length+1;M++){if(A=D.getCharWidth(B.charAt(M),W)/2,K+=A,$<K){P=M;break}K+=A}}Y.setStart(Z.firstChild,P),Y.setEnd(Z.firstChild,P)}return Y}class W3{static getInstance(){if(!W3._INSTANCE)W3._INSTANCE=new W3;return W3._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(J,$){let X=J+$;if(this._cache[X])return this._cache[X];let Y=this._canvas.getContext("2d");Y.font=$;let Q=Y.measureText(J).width;return this._cache[X]=Q,Q}}var V3,hL,ul;var fL=w(()=>{UD();W7();xL();i0();LJ();T0();bL();(function(J){function $(X,Y,Z){let Q=X.getPositionFromDOMInfo(Y,Z);if(Q)return new CL(Q,Y,null);return new UZ(Y)}J.createFromDOMInfo=$})(V3||(V3={}));hL=class hL extends cl{constructor(J,$,X,Y,Z){super(J,$,X,Y);if(this._ctx=J,Z)this.target=Z,this.targetPath=L8.collect(Z,J.viewDomNode);else this.target=null,this.targetPath=new Uint8Array(0)}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(J=null){if(J&&J.column<this._ctx.viewModel.getLineMaxColumn(J.lineNumber))return s1.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(J.lineNumber),J.column,this._ctx.viewModel.model.getOptions().tabSize)+1;return this.mouseColumn}fulfillUnknown(J=null){return k8.createUnknown(this.target,this._getMouseColumn(J),J)}fulfillTextarea(){return k8.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(J,$,X,Y){return k8.createMargin(J,this.target,this._getMouseColumn($),$,X,Y)}fulfillViewZone(J,$,X){return k8.createViewZone(J,this.target,this._getMouseColumn($),$,X)}fulfillContentText(J,$,X){return k8.createContentText(this.target,this._getMouseColumn(J),J,$,X)}fulfillContentEmpty(J,$){return k8.createContentEmpty(this.target,this._getMouseColumn(J),J,$)}fulfillContentWidget(J){return k8.createContentWidget(this.target,this._getMouseColumn(),J)}fulfillScrollbar(J){return k8.createScrollbar(this.target,this._getMouseColumn(J),J)}fulfillOverlayWidget(J){return k8.createOverlayWidget(this.target,this._getMouseColumn(),J)}withTarget(J){return new hL(this._ctx,this.editorPos,this.pos,this.relativePos,J)}};ul={isAfterLines:!0};W3._INSTANCE=null});function F6(J,$,X){let Y=null,Z=null;if(typeof X.value==="function"){if(Y="value",Z=X.value,Z.length!==0)console.warn("Memoize should only be used in functions with zero parameters")}else if(typeof X.get==="function")Y="get",Z=X.get;if(!Z)throw Error("not supported");let Q=`$memoize$${$}`;X[Y]=function(...G){if(!this.hasOwnProperty(Q))Object.defineProperty(this,Q,{configurable:!1,enumerable:!1,writable:!1,value:Z.apply(this,G)});return this[Q]}}var LZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},f1,b1;var g4=w(()=>{T0();N8();V1();_0();z0();D4();(function(J){J.Tap="-monaco-gesturetap",J.Change="-monaco-gesturechange",J.Start="-monaco-gesturestart",J.End="-monaco-gesturesend",J.Contextmenu="-monaco-gesturecontextmenu"})(f1||(f1={}));b1=class b1 extends m{constructor(){super();this.dispatched=!1,this.targets=new m6,this.ignoreTargets=new m6,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(q0.runAndSubscribe(CG,({window:J,disposables:$})=>{$.add(r(J.document,"touchstart",(X)=>this.onTouchStart(X),{passive:!1})),$.add(r(J.document,"touchend",(X)=>this.onTouchEnd(J,X))),$.add(r(J.document,"touchmove",(X)=>this.onTouchMove(X),{passive:!1}))},{window:W1,disposables:this._store}))}static addTarget(J){if(!b1.isTouchDevice())return m.None;if(!b1.INSTANCE)b1.INSTANCE=FG(new b1);let $=b1.INSTANCE.targets.push(J);return N0($)}static ignoreTarget(J){if(!b1.isTouchDevice())return m.None;if(!b1.INSTANCE)b1.INSTANCE=FG(new b1);let $=b1.INSTANCE.ignoreTargets.push(J);return N0($)}static isTouchDevice(){return"ontouchstart"in W1||navigator.maxTouchPoints>0}dispose(){if(this.handle)this.handle.dispose(),this.handle=null;super.dispose()}onTouchStart(J){let $=Date.now();if(this.handle)this.handle.dispose(),this.handle=null;for(let X=0,Y=J.targetTouches.length;X<Y;X++){let Z=J.targetTouches.item(X);this.activeTouches[Z.identifier]={id:Z.identifier,initialTarget:Z.target,initialTimeStamp:$,initialPageX:Z.pageX,initialPageY:Z.pageY,rollingTimestamps:[$],rollingPageX:[Z.pageX],rollingPageY:[Z.pageY]};let Q=this.newGestureEvent(f1.Start,Z.target);Q.pageX=Z.pageX,Q.pageY=Z.pageY,this.dispatchEvent(Q)}if(this.dispatched)J.preventDefault(),J.stopPropagation(),this.dispatched=!1}onTouchEnd(J,$){let X=Date.now(),Y=Object.keys(this.activeTouches).length;for(let Z=0,Q=$.changedTouches.length;Z<Q;Z++){let G=$.changedTouches.item(Z);if(!this.activeTouches.hasOwnProperty(String(G.identifier))){console.warn("move of an UNKNOWN touch",G);continue}let q=this.activeTouches[G.identifier],U=Date.now()-q.initialTimeStamp;if(U<b1.HOLD_DELAY&&Math.abs(q.initialPageX-c9(q.rollingPageX))<30&&Math.abs(q.initialPageY-c9(q.rollingPageY))<30){let z=this.newGestureEvent(f1.Tap,q.initialTarget);z.pageX=c9(q.rollingPageX),z.pageY=c9(q.rollingPageY),this.dispatchEvent(z)}else if(U>=b1.HOLD_DELAY&&Math.abs(q.initialPageX-c9(q.rollingPageX))<30&&Math.abs(q.initialPageY-c9(q.rollingPageY))<30){let z=this.newGestureEvent(f1.Contextmenu,q.initialTarget);z.pageX=c9(q.rollingPageX),z.pageY=c9(q.rollingPageY),this.dispatchEvent(z)}else if(Y===1){let z=c9(q.rollingPageX),H=c9(q.rollingPageY),j=c9(q.rollingTimestamps)-q.rollingTimestamps[0],V=z-q.rollingPageX[0],W=H-q.rollingPageY[0],B=[...this.targets].filter((K)=>q.initialTarget instanceof Node&&K.contains(q.initialTarget));this.inertia(J,B,X,Math.abs(V)/j,V>0?1:-1,z,Math.abs(W)/j,W>0?1:-1,H)}this.dispatchEvent(this.newGestureEvent(f1.End,q.initialTarget)),delete this.activeTouches[G.identifier]}if(this.dispatched)$.preventDefault(),$.stopPropagation(),this.dispatched=!1}newGestureEvent(J,$){let X=document.createEvent("CustomEvent");return X.initEvent(J,!1,!0),X.initialTarget=$,X.tapCount=0,X}dispatchEvent(J){if(J.type===f1.Tap){let $=new Date().getTime(),X=0;if($-this._lastSetTapCountTime>b1.CLEAR_TAP_COUNT_TIME)X=1;else X=2;this._lastSetTapCountTime=$,J.tapCount=X}else if(J.type===f1.Change||J.type===f1.Contextmenu)this._lastSetTapCountTime=0;if(J.initialTarget instanceof Node){for(let $ of this.ignoreTargets)if($.contains(J.initialTarget))return;for(let $ of this.targets)if($.contains(J.initialTarget))$.dispatchEvent(J),this.dispatched=!0}}inertia(J,$,X,Y,Z,Q,G,q,U){this.handle=f5(J,()=>{let z=Date.now(),H=z-X,j=0,V=0,W=!0;if(Y+=b1.SCROLL_FRICTION*H,G+=b1.SCROLL_FRICTION*H,Y>0)W=!1,j=Z*Y*H;if(G>0)W=!1,V=q*G*H;let B=this.newGestureEvent(f1.Change);if(B.translationX=j,B.translationY=V,$.forEach((K)=>K.dispatchEvent(B)),!W)this.inertia(J,$,z,Y,Z,Q+j,G,q,U+V)})}onTouchMove(J){let $=Date.now();for(let X=0,Y=J.changedTouches.length;X<Y;X++){let Z=J.changedTouches.item(X);if(!this.activeTouches.hasOwnProperty(String(Z.identifier))){console.warn("end of an UNKNOWN touch",Z);continue}let Q=this.activeTouches[Z.identifier],G=this.newGestureEvent(f1.Change,Q.initialTarget);if(G.translationX=Z.pageX-c9(Q.rollingPageX),G.translationY=Z.pageY-c9(Q.rollingPageY),G.pageX=Z.pageX,G.pageY=Z.pageY,this.dispatchEvent(G),Q.rollingPageX.length>3)Q.rollingPageX.shift(),Q.rollingPageY.shift(),Q.rollingTimestamps.shift();Q.rollingPageX.push(Z.pageX),Q.rollingPageY.push(Z.pageY),Q.rollingTimestamps.push($)}if(this.dispatched)J.preventDefault(),J.stopPropagation(),this.dispatched=!1}};b1.SCROLL_FRICTION=-0.005;b1.HOLD_DELAY=700;b1.CLEAR_TAP_COUNT_TIME=400;LZ0([F6],b1,"isTouchDevice",null)});var E8;var SX=w(()=>{T0();d8();O4();g4();z0();E8=class E8 extends m{onclick(J,$){this._register(r(J,U0.CLICK,(X)=>$(new T8(O0(J),X))))}onmousedown(J,$){this._register(r(J,U0.MOUSE_DOWN,(X)=>$(new T8(O0(J),X))))}onmouseover(J,$){this._register(r(J,U0.MOUSE_OVER,(X)=>$(new T8(O0(J),X))))}onmouseleave(J,$){this._register(r(J,U0.MOUSE_LEAVE,(X)=>$(new T8(O0(J),X))))}onkeydown(J,$){this._register(r(J,U0.KEY_DOWN,(X)=>$(new R1(X))))}onkeyup(J,$){this._register(r(J,U0.KEY_UP,(X)=>$(new R1(X))))}oninput(J,$){this._register(r(J,U0.INPUT,$))}onblur(J,$){this._register(r(J,U0.BLUR,$))}onfocus(J,$){this._register(r(J,U0.FOCUS,$))}ignoreGesture(J){return b1.ignoreTarget(J)}}});var dQ=11,gL;var jD=w(()=>{PV();SX();e1();I5();T0();gL=class gL extends E8{constructor(J){super();if(this._onActivate=J.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=J.bgWidth+"px",this.bgDomNode.style.height=J.bgHeight+"px",typeof J.top<"u")this.bgDomNode.style.top="0px";if(typeof J.left<"u")this.bgDomNode.style.left="0px";if(typeof J.bottom<"u")this.bgDomNode.style.bottom="0px";if(typeof J.right<"u")this.bgDomNode.style.right="0px";if(this.domNode=document.createElement("div"),this.domNode.className=J.className,this.domNode.classList.add(...h0.asClassNameArray(J.icon)),this.domNode.style.position="absolute",this.domNode.style.width=dQ+"px",this.domNode.style.height=dQ+"px",typeof J.top<"u")this.domNode.style.top=J.top+"px";if(typeof J.left<"u")this.domNode.style.left=J.left+"px";if(typeof J.bottom<"u")this.domNode.style.bottom=J.bottom+"px";if(typeof J.right<"u")this.domNode.style.right=J.right+"px";this._pointerMoveMonitor=this._register(new XZ),this._register(q6(this.bgDomNode,U0.POINTER_DOWN,($)=>this._arrowPointerDown($))),this._register(q6(this.domNode,U0.POINTER_DOWN,($)=>this._arrowPointerDown($))),this._pointerdownRepeatTimer=this._register(new vG),this._pointerdownScheduleRepeatTimer=this._register(new s8)}_arrowPointerDown(J){if(!J.target||!(J.target instanceof Element))return;let $=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664,O0(J))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet($,200),this._pointerMoveMonitor.startMonitoring(J.target,J.pointerId,J.buttons,(X)=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),J.preventDefault()}}});var pL;var ll=w(()=>{e1();z0();pL=class pL extends m{constructor(J,$,X){super();this._visibility=J,this._visibleClassName=$,this._invisibleClassName=X,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new s8)}setVisibility(J){if(this._visibility!==J)this._visibility=J,this._updateShouldBeVisible()}setShouldBeVisible(J){this._rawShouldBeVisible=J,this._updateShouldBeVisible()}_applyVisibilitySetting(){if(this._visibility===2)return!1;if(this._visibility===3)return!0;return this._rawShouldBeVisible}_updateShouldBeVisible(){let J=this._applyVisibilitySetting();if(this._shouldBeVisible!==J)this._shouldBeVisible=J,this.ensureVisibility()}setIsNeeded(J){if(this._isNeeded!==J)this._isNeeded=J,this.ensureVisibility()}setDomNode(J){this._domNode=J,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}if(this._shouldBeVisible)this._reveal();else this._hide(!0)}_reveal(){if(this._isVisible)return;this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var J;(J=this._domNode)===null||J===void 0||J.setClassName(this._visibleClassName)},0)}_hide(J){var $;if(this._revealTimer.cancel(),!this._isVisible)return;this._isVisible=!1,($=this._domNode)===null||$===void 0||$.setClassName(this._invisibleClassName+(J?" fade":""))}}});var kZ0=140,TV;var mL=w(()=>{T0();PV();jD();ll();SX();L1();TV=class TV extends E8{constructor(J){super();this._lazyRender=J.lazyRender,this._host=J.host,this._scrollable=J.scrollable,this._scrollByPage=J.scrollByPage,this._scrollbarState=J.scrollbarState,this._visibilityController=this._register(new pL(J.visibility,"visible scrollbar "+J.extraScrollbarClassName,"invisible scrollbar "+J.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new XZ),this._shouldRender=!0,this.domNode=Y1(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(r(this.domNode.domNode,U0.POINTER_DOWN,($)=>this._domNodePointerDown($)))}_createArrow(J){let $=this._register(new gL(J));this.domNode.domNode.appendChild($.bgDomNode),this.domNode.domNode.appendChild($.domNode)}_createSlider(J,$,X,Y){if(this.slider=Y1(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(J),this.slider.setLeft($),typeof X==="number")this.slider.setWidth(X);if(typeof Y==="number")this.slider.setHeight(Y);this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(r(this.slider.domNode,U0.POINTER_DOWN,(Z)=>{if(Z.button===0)Z.preventDefault(),this._sliderPointerDown(Z)})),this.onclick(this.slider.domNode,(Z)=>{if(Z.leftButton)Z.stopPropagation()})}_onElementSize(J){if(this._scrollbarState.setVisibleSize(J)){if(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,!this._lazyRender)this.render()}return this._shouldRender}_onElementScrollSize(J){if(this._scrollbarState.setScrollSize(J)){if(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,!this._lazyRender)this.render()}return this._shouldRender}_onElementScrollPosition(J){if(this._scrollbarState.setScrollPosition(J)){if(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,!this._lazyRender)this.render()}return this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){if(!this._shouldRender)return;this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition())}_domNodePointerDown(J){if(J.target!==this.domNode.domNode)return;this._onPointerDown(J)}delegatePointerDown(J){let $=this.domNode.domNode.getClientRects()[0].top,X=$+this._scrollbarState.getSliderPosition(),Y=$+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),Z=this._sliderPointerPosition(J);if(X<=Z&&Z<=Y){if(J.button===0)J.preventDefault(),this._sliderPointerDown(J)}else this._onPointerDown(J)}_onPointerDown(J){let $,X;if(J.target===this.domNode.domNode&&typeof J.offsetX==="number"&&typeof J.offsetY==="number")$=J.offsetX,X=J.offsetY;else{let Z=g5(this.domNode.domNode);$=J.pageX-Z.left,X=J.pageY-Z.top}let Y=this._pointerDownRelativePosition($,X);if(this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(Y):this._scrollbarState.getDesiredScrollPositionFromOffset(Y)),J.button===0)J.preventDefault(),this._sliderPointerDown(J)}_sliderPointerDown(J){if(!J.target||!(J.target instanceof Element))return;let $=this._sliderPointerPosition(J),X=this._sliderOrthogonalPointerPosition(J),Y=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(J.target,J.pointerId,J.buttons,(Z)=>{let Q=this._sliderOrthogonalPointerPosition(Z),G=Math.abs(Q-X);if(p6&&G>kZ0){this._setDesiredScrollPositionNow(Y.getScrollPosition());return}let U=this._sliderPointerPosition(Z)-$;this._setDesiredScrollPositionNow(Y.getDesiredScrollPositionFromDelta(U))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(J){let $={};this.writeScrollPosition($,J),this._scrollable.setScrollPositionNow($)}updateScrollbarSize(J){if(this._updateScrollbarSize(J),this._scrollbarState.setScrollbarSize(J),this._shouldRender=!0,!this._lazyRender)this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}});class zZ{constructor(J,$,X,Y,Z,Q){this._scrollbarSize=Math.round($),this._oppositeScrollbarSize=Math.round(X),this._arrowSize=Math.round(J),this._visibleSize=Y,this._scrollSize=Z,this._scrollPosition=Q,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new zZ(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(J){let $=Math.round(J);if(this._visibleSize!==$)return this._visibleSize=$,this._refreshComputedValues(),!0;return!1}setScrollSize(J){let $=Math.round(J);if(this._scrollSize!==$)return this._scrollSize=$,this._refreshComputedValues(),!0;return!1}setScrollPosition(J){let $=Math.round(J);if(this._scrollPosition!==$)return this._scrollPosition=$,this._refreshComputedValues(),!0;return!1}setScrollbarSize(J){this._scrollbarSize=Math.round(J)}setOppositeScrollbarSize(J){this._oppositeScrollbarSize=Math.round(J)}static _computeValues(J,$,X,Y,Z){let Q=Math.max(0,X-J),G=Math.max(0,Q-2*$),q=Y>0&&Y>X;if(!q)return{computedAvailableSize:Math.round(Q),computedIsNeeded:q,computedSliderSize:Math.round(G),computedSliderRatio:0,computedSliderPosition:0};let U=Math.round(Math.max(20,Math.floor(X*G/Y))),z=(G-U)/(Y-X),H=Z*z;return{computedAvailableSize:Math.round(Q),computedIsNeeded:q,computedSliderSize:Math.round(U),computedSliderRatio:z,computedSliderPosition:Math.round(H)}}_refreshComputedValues(){let J=zZ._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=J.computedAvailableSize,this._computedIsNeeded=J.computedIsNeeded,this._computedSliderSize=J.computedSliderSize,this._computedSliderRatio=J.computedSliderRatio,this._computedSliderPosition=J.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(J){if(!this._computedIsNeeded)return 0;let $=J-this._arrowSize-this._computedSliderSize/2;return Math.round($/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(J){if(!this._computedIsNeeded)return 0;let $=J-this._arrowSize,X=this._scrollPosition;if($<this._computedSliderPosition)X-=this._visibleSize;else X+=this._visibleSize;return X}getDesiredScrollPositionFromDelta(J){if(!this._computedIsNeeded)return 0;let $=this._computedSliderPosition+J;return Math.round($/this._computedSliderRatio)}}var uL;var dl=w(()=>{O4();mL();jD();k5();uL=class uL extends TV{constructor(J,$,X){let Y=J.getScrollDimensions(),Z=J.getCurrentScrollPosition();super({lazyRender:$.lazyRender,host:X,scrollbarState:new zZ($.horizontalHasArrows?$.arrowSize:0,$.horizontal===2?0:$.horizontalScrollbarSize,$.vertical===2?0:$.verticalScrollbarSize,Y.width,Y.scrollWidth,Z.scrollLeft),visibility:$.horizontal,extraScrollbarClassName:"horizontal",scrollable:J,scrollByPage:$.scrollByPage});if($.horizontalHasArrows){let Q=($.arrowSize-dQ)/2,G=($.horizontalScrollbarSize-dQ)/2;this._createArrow({className:"scra",icon:F0.scrollbarButtonLeft,top:G,left:Q,bottom:void 0,right:void 0,bgWidth:$.arrowSize,bgHeight:$.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new KJ(null,1,0))}),this._createArrow({className:"scra",icon:F0.scrollbarButtonRight,top:G,left:void 0,bottom:void 0,right:Q,bgWidth:$.arrowSize,bgHeight:$.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new KJ(null,-1,0))})}this._createSlider(Math.floor(($.horizontalScrollbarSize-$.horizontalSliderSize)/2),0,void 0,$.horizontalSliderSize)}_updateSlider(J,$){this.slider.setWidth(J),this.slider.setLeft($)}_renderDomNode(J,$){this.domNode.setWidth(J),this.domNode.setHeight($),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(J){return this._shouldRender=this._onElementScrollSize(J.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(J.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(J.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(J,$){return J}_sliderPointerPosition(J){return J.pageX}_sliderOrthogonalPointerPosition(J){return J.pageY}_updateScrollbarSize(J){this.slider.setHeight(J)}writeScrollPosition(J,$){J.scrollLeft=$}updateOptions(J){this.updateScrollbarSize(J.horizontal===2?0:J.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(J.vertical===2?0:J.verticalScrollbarSize),this._visibilityController.setVisibility(J.horizontal),this._scrollByPage=J.scrollByPage}}});var cL;var sl=w(()=>{O4();mL();jD();k5();cL=class cL extends TV{constructor(J,$,X){let Y=J.getScrollDimensions(),Z=J.getCurrentScrollPosition();super({lazyRender:$.lazyRender,host:X,scrollbarState:new zZ($.verticalHasArrows?$.arrowSize:0,$.vertical===2?0:$.verticalScrollbarSize,0,Y.height,Y.scrollHeight,Z.scrollTop),visibility:$.vertical,extraScrollbarClassName:"vertical",scrollable:J,scrollByPage:$.scrollByPage});if($.verticalHasArrows){let Q=($.arrowSize-dQ)/2,G=($.verticalScrollbarSize-dQ)/2;this._createArrow({className:"scra",icon:F0.scrollbarButtonUp,top:Q,left:G,bottom:void 0,right:void 0,bgWidth:$.verticalScrollbarSize,bgHeight:$.arrowSize,onActivate:()=>this._host.onMouseWheel(new KJ(null,0,1))}),this._createArrow({className:"scra",icon:F0.scrollbarButtonDown,top:void 0,left:G,bottom:Q,right:void 0,bgWidth:$.verticalScrollbarSize,bgHeight:$.arrowSize,onActivate:()=>this._host.onMouseWheel(new KJ(null,0,-1))})}this._createSlider(0,Math.floor(($.verticalScrollbarSize-$.verticalSliderSize)/2),$.verticalSliderSize,void 0)}_updateSlider(J,$){this.slider.setHeight(J),this.slider.setTop($)}_renderDomNode(J,$){this.domNode.setWidth($),this.domNode.setHeight(J),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(J){return this._shouldRender=this._onElementScrollSize(J.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(J.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(J.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(J,$){return $}_sliderPointerPosition(J){return J.pageY}_sliderOrthogonalPointerPosition(J){return J.pageX}_updateScrollbarSize(J){this.slider.setWidth(J)}writeScrollPosition(J,$){J.scrollTop=$}updateOptions(J){this.updateScrollbarSize(J.vertical===2?0:J.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(J.vertical),this._scrollByPage=J.scrollByPage}}});class VD{constructor(J,$,X,Y,Z,Q,G){if(this._forceIntegerValues=J,this._scrollStateBrand=void 0,this._forceIntegerValues)$=$|0,X=X|0,Y=Y|0,Z=Z|0,Q=Q|0,G=G|0;if(this.rawScrollLeft=Y,this.rawScrollTop=G,$<0)$=0;if(Y+$>X)Y=X-$;if(Y<0)Y=0;if(Z<0)Z=0;if(G+Z>Q)G=Q-Z;if(G<0)G=0;this.width=$,this.scrollWidth=X,this.scrollLeft=Y,this.height=Z,this.scrollHeight=Q,this.scrollTop=G}equals(J){return this.rawScrollLeft===J.rawScrollLeft&&this.rawScrollTop===J.rawScrollTop&&this.width===J.width&&this.scrollWidth===J.scrollWidth&&this.scrollLeft===J.scrollLeft&&this.height===J.height&&this.scrollHeight===J.scrollHeight&&this.scrollTop===J.scrollTop}withScrollDimensions(J,$){return new VD(this._forceIntegerValues,typeof J.width<"u"?J.width:this.width,typeof J.scrollWidth<"u"?J.scrollWidth:this.scrollWidth,$?this.rawScrollLeft:this.scrollLeft,typeof J.height<"u"?J.height:this.height,typeof J.scrollHeight<"u"?J.scrollHeight:this.scrollHeight,$?this.rawScrollTop:this.scrollTop)}withScrollPosition(J){return new VD(this._forceIntegerValues,this.width,this.scrollWidth,typeof J.scrollLeft<"u"?J.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof J.scrollTop<"u"?J.scrollTop:this.rawScrollTop)}createScrollEvent(J,$){let X=this.width!==J.width,Y=this.scrollWidth!==J.scrollWidth,Z=this.scrollLeft!==J.scrollLeft,Q=this.height!==J.height,G=this.scrollHeight!==J.scrollHeight,q=this.scrollTop!==J.scrollTop;return{inSmoothScrolling:$,oldWidth:J.width,oldScrollWidth:J.scrollWidth,oldScrollLeft:J.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:J.height,oldScrollHeight:J.scrollHeight,oldScrollTop:J.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:X,scrollWidthChanged:Y,scrollLeftChanged:Z,heightChanged:Q,scrollHeightChanged:G,scrollTopChanged:q}}}class dL{constructor(J,$,X){this.scrollLeft=J,this.scrollTop=$,this.isDone=X}}function lL(J,$){let X=$-J;return function(Y){return J+X*yZ0(Y)}}function EZ0(J,$,X){return function(Y){if(Y<X)return J(Y/X);return $((Y-X)/(1-X))}}class wV{constructor(J,$,X,Y){this.from=J,this.to=$,this.duration=Y,this.startTime=X,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(J,$,X){if(Math.abs(J-$)>2.5*X){let Z,Q;if(J<$)Z=J+0.75*X,Q=$-0.75*X;else Z=J-0.75*X,Q=$+0.75*X;return EZ0(lL(J,Z),lL(Q,$),0.33)}return lL(J,$)}dispose(){if(this.animationFrameDisposable!==null)this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null}acceptScrollDimensions(J){this.to=J.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(J){let $=(J-this.startTime)/this.duration;if($<1){let X=this.scrollLeft($),Y=this.scrollTop($);return new dL(X,Y,!1)}return new dL(this.to.scrollLeft,this.to.scrollTop,!0)}combine(J,$,X){return wV.start(J,$,X)}static start(J,$,X){X=X+10;let Y=Date.now()-10;return new wV(J,$,Y,X)}}function IZ0(J){return Math.pow(J,3)}function yZ0(J){return 1-IZ0(1-J)}var kJ;var dU=w(()=>{_0();z0();kJ=class kJ extends m{constructor(J){super();this._scrollableBrand=void 0,this._onScroll=this._register(new x),this.onScroll=this._onScroll.event,this._smoothScrollDuration=J.smoothScrollDuration,this._scheduleAtNextAnimationFrame=J.scheduleAtNextAnimationFrame,this._state=new VD(J.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){if(this._smoothScrolling)this._smoothScrolling.dispose(),this._smoothScrolling=null;super.dispose()}setSmoothScrollDuration(J){this._smoothScrollDuration=J}validateScrollPosition(J){return this._state.withScrollPosition(J)}getScrollDimensions(){return this._state}setScrollDimensions(J,$){var X;let Y=this._state.withScrollDimensions(J,$);this._setState(Y,Boolean(this._smoothScrolling)),(X=this._smoothScrolling)===null||X===void 0||X.acceptScrollDimensions(this._state)}getFutureScrollPosition(){if(this._smoothScrolling)return this._smoothScrolling.to;return this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(J){let $=this._state.withScrollPosition(J);if(this._smoothScrolling)this._smoothScrolling.dispose(),this._smoothScrolling=null;this._setState($,!1)}setScrollPositionSmooth(J,$){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(J);if(this._smoothScrolling){J={scrollLeft:typeof J.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:J.scrollLeft,scrollTop:typeof J.scrollTop>"u"?this._smoothScrolling.to.scrollTop:J.scrollTop};let X=this._state.withScrollPosition(J);if(this._smoothScrolling.to.scrollLeft===X.scrollLeft&&this._smoothScrolling.to.scrollTop===X.scrollTop)return;let Y;if($)Y=new wV(this._smoothScrolling.from,X,this._smoothScrolling.startTime,this._smoothScrolling.duration);else Y=this._smoothScrolling.combine(this._state,X,this._smoothScrollDuration);this._smoothScrolling.dispose(),this._smoothScrolling=Y}else{let X=this._state.withScrollPosition(J);this._smoothScrolling=wV.start(this._state,X,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{if(!this._smoothScrolling)return;this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling()})}hasPendingScrollAnimation(){return Boolean(this._smoothScrolling)}_performSmoothScrolling(){if(!this._smoothScrolling)return;let J=this._smoothScrolling.tick(),$=this._state.withScrollPosition(J);if(this._setState($,!0),!this._smoothScrolling)return;if(J.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{if(!this._smoothScrolling)return;this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling()})}_setState(J,$){let X=this._state;if(X.equals(J))return;this._state=J,this._onScroll.fire(this._state.createScrollEvent(X,$))}}});var al=w(()=>{K0(".monaco-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px!important}.monaco-scrollable-element>.visible{opacity:1;z-index:11;background:0 0;transition:opacity .1s linear}.monaco-scrollable-element>.invisible{opacity:0;pointer-events:none}.monaco-scrollable-element>.invisible.fade{transition:opacity .8s linear}.monaco-scrollable-element>.shadow{display:none;position:absolute}.monaco-scrollable-element>.shadow.top{width:100%;height:3px;box-shadow:var(--vscode-scrollbar-shadow)0 6px 6px -6px inset;display:block;top:0;left:3px}.monaco-scrollable-element>.shadow.left{width:3px;height:100%;box-shadow:var(--vscode-scrollbar-shadow)6px 0 6px -6px inset;display:block;top:3px;left:0}.monaco-scrollable-element>.shadow.top-left-corner{width:3px;height:3px;display:block;top:0;left:0}.monaco-scrollable-element>.shadow.top.left{box-shadow:var(--vscode-scrollbar-shadow)6px 0 6px -6px inset}.monaco-scrollable-element>.scrollbar>.slider{background:var(--vscode-scrollbarSlider-background)}.monaco-scrollable-element>.scrollbar>.slider:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-scrollable-element>.scrollbar>.slider.active{background:var(--vscode-scrollbarSlider-activeBackground)}")});class nl{constructor(J,$,X){this.timestamp=J,this.deltaX=$,this.deltaY=X,this.score=0}}class sU{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let J=1,$=0,X=1,Y=this._rear;do{let Z=Y===this._front?J:Math.pow(2,-X);if(J-=Z,$+=this._memory[Y].score*Z,Y===this._front)break;Y=(this._capacity+Y-1)%this._capacity,X++}while(!0);return $<=0.5}acceptStandardWheelEvent(J){if(jX){let $=O0(J.browserEvent),X=Sg($);this.accept(Date.now(),J.deltaX*X,J.deltaY*X)}else this.accept(Date.now(),J.deltaX,J.deltaY)}accept(J,$,X){let Y=new nl(J,$,X);if(Y.score=this._computeScore(Y),this._front===-1&&this._rear===-1)this._memory[0]=Y,this._front=0,this._rear=0;else{if(this._rear=(this._rear+1)%this._capacity,this._rear===this._front)this._front=(this._front+1)%this._capacity;this._memory[this._rear]=Y}}_computeScore(J){if(Math.abs(J.deltaX)>0&&Math.abs(J.deltaY)>0)return 1;let $=0.5,X=this._front===-1&&this._rear===-1?null:this._memory[this._rear];if(!this._isAlmostInt(J.deltaX)||!this._isAlmostInt(J.deltaY))$+=0.25;return Math.min(Math.max($,0),1)}_isAlmostInt(J){return Math.abs(Math.round(J)-J)<0.01}}function bZ0(J){let $={lazyRender:typeof J.lazyRender<"u"?J.lazyRender:!1,className:typeof J.className<"u"?J.className:"",useShadows:typeof J.useShadows<"u"?J.useShadows:!0,handleMouseWheel:typeof J.handleMouseWheel<"u"?J.handleMouseWheel:!0,flipAxes:typeof J.flipAxes<"u"?J.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof J.consumeMouseWheelIfScrollbarIsNeeded<"u"?J.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof J.alwaysConsumeMouseWheel<"u"?J.alwaysConsumeMouseWheel:!1,scrollYToX:typeof J.scrollYToX<"u"?J.scrollYToX:!1,mouseWheelScrollSensitivity:typeof J.mouseWheelScrollSensitivity<"u"?J.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof J.fastScrollSensitivity<"u"?J.fastScrollSensitivity:5,scrollPredominantAxis:typeof J.scrollPredominantAxis<"u"?J.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof J.mouseWheelSmoothScroll<"u"?J.mouseWheelSmoothScroll:!0,arrowSize:typeof J.arrowSize<"u"?J.arrowSize:11,listenOnDomNode:typeof J.listenOnDomNode<"u"?J.listenOnDomNode:null,horizontal:typeof J.horizontal<"u"?J.horizontal:1,horizontalScrollbarSize:typeof J.horizontalScrollbarSize<"u"?J.horizontalScrollbarSize:10,horizontalSliderSize:typeof J.horizontalSliderSize<"u"?J.horizontalSliderSize:0,horizontalHasArrows:typeof J.horizontalHasArrows<"u"?J.horizontalHasArrows:!1,vertical:typeof J.vertical<"u"?J.vertical:1,verticalScrollbarSize:typeof J.verticalScrollbarSize<"u"?J.verticalScrollbarSize:10,verticalHasArrows:typeof J.verticalHasArrows<"u"?J.verticalHasArrows:!1,verticalSliderSize:typeof J.verticalSliderSize<"u"?J.verticalSliderSize:0,scrollByPage:typeof J.scrollByPage<"u"?J.scrollByPage:!1};if($.horizontalSliderSize=typeof J.horizontalSliderSize<"u"?J.horizontalSliderSize:$.horizontalScrollbarSize,$.verticalSliderSize=typeof J.verticalSliderSize<"u"?J.verticalSliderSize:$.verticalScrollbarSize,t0)$.className+=" mac";return $}var xZ0=500,rl=50,il=!0,WD,sL,HZ,jZ;var L$=w(()=>{e7();T0();O4();dl();sl();SX();e1();_0();z0();L1();dU();al();sU.INSTANCE=new sU;WD=class WD extends E8{get options(){return this._options}constructor(J,$,X){super();this._onScroll=this._register(new x),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new x),J.style.overflow="hidden",this._options=bZ0($),this._scrollable=X,this._register(this._scrollable.onScroll((Z)=>{this._onWillScroll.fire(Z),this._onDidScroll(Z),this._onScroll.fire(Z)}));let Y={onMouseWheel:(Z)=>this._onMouseWheel(Z),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};if(this._verticalScrollbar=this._register(new cL(this._scrollable,this._options,Y)),this._horizontalScrollbar=this._register(new uL(this._scrollable,this._options,Y)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(J),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows)this._leftShadowDomNode=Y1(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Y1(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Y1(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode);else this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null;this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(Z)=>this._onMouseOver(Z)),this.onmouseleave(this._listenOnDomNode,(Z)=>this._onMouseLeave(Z)),this._hideTimeout=this._register(new s8),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=h1(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(J){this._verticalScrollbar.delegatePointerDown(J)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(J){this._scrollable.setScrollDimensions(J,!1)}updateClassName(J){if(this._options.className=J,t0)this._options.className+=" mac";this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(J){if(typeof J.handleMouseWheel<"u")this._options.handleMouseWheel=J.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel);if(typeof J.mouseWheelScrollSensitivity<"u")this._options.mouseWheelScrollSensitivity=J.mouseWheelScrollSensitivity;if(typeof J.fastScrollSensitivity<"u")this._options.fastScrollSensitivity=J.fastScrollSensitivity;if(typeof J.scrollPredominantAxis<"u")this._options.scrollPredominantAxis=J.scrollPredominantAxis;if(typeof J.horizontal<"u")this._options.horizontal=J.horizontal;if(typeof J.vertical<"u")this._options.vertical=J.vertical;if(typeof J.horizontalScrollbarSize<"u")this._options.horizontalScrollbarSize=J.horizontalScrollbarSize;if(typeof J.verticalScrollbarSize<"u")this._options.verticalScrollbarSize=J.verticalScrollbarSize;if(typeof J.scrollByPage<"u")this._options.scrollByPage=J.scrollByPage;if(this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),!this._options.lazyRender)this._render()}delegateScrollFromMouseWheelEvent(J){this._onMouseWheel(new KJ(J))}_setListeningToMouseWheel(J){if(this._mouseWheelToDispose.length>0===J)return;if(this._mouseWheelToDispose=h1(this._mouseWheelToDispose),J){let X=(Y)=>{this._onMouseWheel(new KJ(Y))};this._mouseWheelToDispose.push(r(this._listenOnDomNode,U0.MOUSE_WHEEL,X,{passive:!1}))}}_onMouseWheel(J){var $;if(($=J.browserEvent)===null||$===void 0?void 0:$.defaultPrevented)return;let X=sU.INSTANCE;if(il)X.acceptStandardWheelEvent(J);let Y=!1;if(J.deltaY||J.deltaX){let Q=J.deltaY*this._options.mouseWheelScrollSensitivity,G=J.deltaX*this._options.mouseWheelScrollSensitivity;if(this._options.scrollPredominantAxis)if(this._options.scrollYToX&&G+Q===0)G=Q=0;else if(Math.abs(Q)>=Math.abs(G))G=0;else Q=0;if(this._options.flipAxes)[Q,G]=[G,Q];let q=!t0&&J.browserEvent&&J.browserEvent.shiftKey;if((this._options.scrollYToX||q)&&!G)G=Q,Q=0;if(J.browserEvent&&J.browserEvent.altKey)G=G*this._options.fastScrollSensitivity,Q=Q*this._options.fastScrollSensitivity;let U=this._scrollable.getFutureScrollPosition(),z={};if(Q){let H=rl*Q,j=U.scrollTop-(H<0?Math.floor(H):Math.ceil(H));this._verticalScrollbar.writeScrollPosition(z,j)}if(G){let H=rl*G,j=U.scrollLeft-(H<0?Math.floor(H):Math.ceil(H));this._horizontalScrollbar.writeScrollPosition(z,j)}if(z=this._scrollable.validateScrollPosition(z),U.scrollLeft!==z.scrollLeft||U.scrollTop!==z.scrollTop){if(il&&this._options.mouseWheelSmoothScroll&&X.isPhysicalMouseWheel())this._scrollable.setScrollPositionSmooth(z);else this._scrollable.setScrollPositionNow(z);Y=!0}}let Z=Y;if(!Z&&this._options.alwaysConsumeMouseWheel)Z=!0;if(!Z&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded()))Z=!0;if(Z)J.preventDefault(),J.stopPropagation()}_onDidScroll(J){if(this._shouldRender=this._horizontalScrollbar.onDidScroll(J)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(J)||this._shouldRender,this._options.useShadows)this._shouldRender=!0;if(this._revealOnScroll)this._reveal();if(!this._options.lazyRender)this._render()}renderNow(){if(!this._options.lazyRender)throw Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!this._shouldRender)return;if(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows){let J=this._scrollable.getCurrentScrollPosition(),$=J.scrollTop>0,X=J.scrollLeft>0,Y=X?" left":"",Z=$?" top":"",Q=X||$?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${Y}`),this._topShadowDomNode.setClassName(`shadow${Z}`),this._topLeftShadowDomNode.setClassName(`shadow${Q}${Z}${Y}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(J){this._mouseIsOver=!1,this._hide()}_onMouseOver(J){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){if(!this._mouseIsOver&&!this._isDragging)this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide()}_scheduleHide(){if(!this._mouseIsOver&&!this._isDragging)this._hideTimeout.cancelAndSet(()=>this._hide(),xZ0)}};sL=class sL extends WD{constructor(J,$){$=$||{},$.mouseWheelSmoothScroll=!1;let X=new kJ({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:(Y)=>f5(O0(J),Y)});super(J,$,X);this._register(X)}setScrollPosition(J){this._scrollable.setScrollPositionNow(J)}};HZ=class HZ extends WD{constructor(J,$,X){super(J,$,X)}setScrollPosition(J){if(J.reuseAnimation)this._scrollable.setScrollPositionSmooth(J,J.reuseAnimation);else this._scrollable.setScrollPositionNow(J)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};jZ=class jZ extends WD{constructor(J,$){$=$||{},$.mouseWheelSmoothScroll=!1;let X=new kJ({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:(Y)=>f5(O0(J),Y)});super(J,$,X);this._register(X),this._element=J,this._register(this.onScroll((Y)=>{if(Y.scrollTopChanged)this._element.scrollTop=Y.scrollTop;if(Y.scrollLeftChanged)this._element.scrollLeft=Y.scrollLeft})),this.scanDomNode()}setScrollPosition(J){this._scrollable.setScrollPositionNow(J)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}});class BD{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(J){this._altKey=J.altKey,this._ctrlKey=J.ctrlKey,this._metaKey=J.metaKey,this._shiftKey=J.shiftKey}setStartButtons(J){this._leftButton=J.leftButton,this._middleButton=J.middleButton}setStartedOnLineNumbers(J){this._startedOnLineNumbers=J}trySetCount(J,$){let X=new Date().getTime();if(X-this._lastSetMouseDownCountTime>BD.CLEAR_MOUSE_DOWN_COUNT_TIME)J=1;if(this._lastSetMouseDownCountTime=X,J>this._lastMouseDownCount+1)J=this._lastMouseDownCount+1;if(this._lastMouseDownPosition&&this._lastMouseDownPosition.equals($))this._lastMouseDownPositionEqualCount++;else this._lastMouseDownPositionEqualCount=1;this._lastMouseDownPosition=$,this._lastMouseDownCount=Math.min(J,this._lastMouseDownPositionEqualCount)}}var LV,ol,tl,el;var Jd=w(()=>{T0();O4();z0();L1();fL();UD();Fj();o5();pU();L$();LV=class LV extends w${constructor(J,$,X){super();this._mouseLeaveMonitor=null,this._context=J,this.viewController=$,this.viewHelper=X,this.mouseTargetFactory=new W8(this._context,X),this._mouseDownOperation=this._register(new ol(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(Q,G)=>this._createMouseTarget(Q,G),(Q)=>this._getMouseColumn(Q))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(143).height;let Y=new NL(this.viewHelper.viewDomNode);this._register(Y.onContextMenu(this.viewHelper.viewDomNode,(Q)=>this._onContextMenu(Q,!0))),this._register(Y.onMouseMove(this.viewHelper.viewDomNode,(Q)=>{if(this._onMouseMove(Q),!this._mouseLeaveMonitor)this._mouseLeaveMonitor=r(this.viewHelper.viewDomNode.ownerDocument,"mousemove",(G)=>{if(!this.viewHelper.viewDomNode.contains(G.target))this._onMouseLeave(new T$(G,!1,this.viewHelper.viewDomNode))})})),this._register(Y.onMouseUp(this.viewHelper.viewDomNode,(Q)=>this._onMouseUp(Q))),this._register(Y.onMouseLeave(this.viewHelper.viewDomNode,(Q)=>this._onMouseLeave(Q)));let Z=0;this._register(Y.onPointerDown(this.viewHelper.viewDomNode,(Q,G)=>{Z=G})),this._register(r(this.viewHelper.viewDomNode,U0.POINTER_UP,(Q)=>{this._mouseDownOperation.onPointerUp()})),this._register(Y.onMouseDown(this.viewHelper.viewDomNode,(Q)=>this._onMouseDown(Q,Z))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){let J=sU.INSTANCE,$=0,X=jJ.getZoomLevel(),Y=!1,Z=0,Q=(q)=>{if(this.viewController.emitMouseWheel(q),!this._context.configuration.options.get(75))return;let U=new KJ(q);if(J.acceptStandardWheelEvent(U),J.isPhysicalMouseWheel()){if(G(q)){let z=jJ.getZoomLevel(),H=U.deltaY>0?1:-1;jJ.setZoomLevel(z+H),U.preventDefault(),U.stopPropagation()}}else{if(Date.now()-$>50)X=jJ.getZoomLevel(),Y=G(q),Z=0;if($=Date.now(),Z+=U.deltaY,Y)jJ.setZoomLevel(X+Z/5),U.preventDefault(),U.stopPropagation()}};this._register(r(this.viewHelper.viewDomNode,U0.MOUSE_WHEEL,Q,{capture:!0,passive:!1}));function G(q){return t0?(q.metaKey||q.ctrlKey)&&!q.shiftKey&&!q.altKey:q.ctrlKey&&!q.metaKey&&!q.shiftKey&&!q.altKey}}dispose(){if(this._context.removeEventHandler(this),this._mouseLeaveMonitor)this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null;super.dispose()}onConfigurationChanged(J){if(J.hasChanged(143)){let $=this._context.configuration.options.get(143).height;if(this._height!==$)this._height=$,this._mouseDownOperation.onHeightChanged()}return!1}onCursorStateChanged(J){return this._mouseDownOperation.onCursorStateChanged(J),!1}onFocusChanged(J){return!1}getTargetAtClientPoint(J,$){let Y=new QD(J,$).toPageCoordinates(O0(this.viewHelper.viewDomNode)),Z=GD(this.viewHelper.viewDomNode);if(Y.y<Z.y||Y.y>Z.y+Z.height||Y.x<Z.x||Y.x>Z.x+Z.width)return null;let Q=qD(this.viewHelper.viewDomNode,Z,Y);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),Z,Y,Q,null)}_createMouseTarget(J,$){let X=J.target;if(!this.viewHelper.viewDomNode.contains(X)){let Y=cY(this.viewHelper.viewDomNode);if(Y)X=Y.elementsFromPoint(J.posx,J.posy).find((Z)=>this.viewHelper.viewDomNode.contains(Z))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),J.editorPos,J.pos,J.relativePos,$?X:null)}_getMouseColumn(J){return this.mouseTargetFactory.getMouseColumn(J.relativePos)}_onContextMenu(J,$){this.viewController.emitContextMenu({event:J,target:this._createMouseTarget(J,$)})}_onMouseMove(J){if(!this.mouseTargetFactory.mouseTargetIsWidget(J))J.preventDefault();if(this._mouseDownOperation.isActive())return;if(J.timestamp<this.lastMouseLeaveTime)return;this.viewController.emitMouseMove({event:J,target:this._createMouseTarget(J,!0)})}_onMouseLeave(J){if(this._mouseLeaveMonitor)this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null;this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:J,target:null})}_onMouseUp(J){this.viewController.emitMouseUp({event:J,target:this._createMouseTarget(J,!0)})}_onMouseDown(J,$){let X=this._createMouseTarget(J,!0),Y=X.type===6||X.type===7,Z=X.type===2||X.type===3||X.type===4,Q=X.type===3,G=this._context.configuration.options.get(108),q=X.type===8||X.type===5,U=X.type===9,z=J.leftButton||J.middleButton;if(t0&&J.leftButton&&J.ctrlKey)z=!1;let H=()=>{J.preventDefault(),this.viewHelper.focusTextArea()};if(z&&(Y||Q&&G))H(),this._mouseDownOperation.start(X.type,J,$);else if(Z)J.preventDefault();else if(q){let j=X.detail;if(z&&this.viewHelper.shouldSuppressMouseDownOnViewZone(j.viewZoneId))H(),this._mouseDownOperation.start(X.type,J,$),J.preventDefault()}else if(U&&this.viewHelper.shouldSuppressMouseDownOnWidget(X.detail))H(),J.preventDefault();this.viewController.emitMouseDown({event:J,target:X})}};ol=class ol extends m{constructor(J,$,X,Y,Z,Q){super();this._context=J,this._viewController=$,this._viewHelper=X,this._mouseTargetFactory=Y,this._createMouseTarget=Z,this._getMouseColumn=Q,this._mouseMoveMonitor=this._register(new wL(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new tl(this._context,this._viewHelper,this._mouseTargetFactory,(G,q,U)=>this._dispatchMouse(G,q,U))),this._mouseState=new BD,this._currentSelection=new p0(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(J){this._lastMouseEvent=J,this._mouseState.setModifiers(J);let $=this._findMousePosition(J,!1);if(!$)return;if(this._mouseState.isDragAndDrop)this._viewController.emitMouseDrag({event:J,target:$});else if($.type===13&&($.outsidePosition==="above"||$.outsidePosition==="below"))this._topBottomDragScrolling.start($,J);else this._topBottomDragScrolling.stop(),this._dispatchMouse($,!0,1)}start(J,$,X){this._lastMouseEvent=$,this._mouseState.setStartedOnLineNumbers(J===3),this._mouseState.setStartButtons($),this._mouseState.setModifiers($);let Y=this._findMousePosition($,!0);if(!Y||!Y.position)return;this._mouseState.trySetCount($.detail,Y.position),$.detail=this._mouseState.count;let Z=this._context.configuration.options;if(!Z.get(90)&&Z.get(35)&&!Z.get(22)&&!this._mouseState.altKey&&$.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&Y.type===6&&Y.position&&this._currentSelection.containsPosition(Y.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,X,$.buttons,(Q)=>this._onMouseDownThenMove(Q),(Q)=>{let G=this._findMousePosition(this._lastMouseEvent,!1);if(QU(Q))this._viewController.emitMouseDropCanceled();else this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:G?this._createMouseTarget(this._lastMouseEvent,!0):null});this._stop()});return}if(this._mouseState.isDragAndDrop=!1,this._dispatchMouse(Y,$.shiftKey,1),!this._isActive)this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,X,$.buttons,(Q)=>this._onMouseDownThenMove(Q),()=>this._stop())}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(J){this._currentSelection=J.selections[0]}_getPositionOutsideEditor(J){let $=J.editorPos,X=this._context.viewModel,Y=this._context.viewLayout,Z=this._getMouseColumn(J);if(J.posy<$.y){let G=$.y-J.posy,q=Math.max(Y.getCurrentScrollTop()-G,0),U=B3.getZoneAtCoord(this._context,q);if(U){let H=this._helpPositionJumpOverViewZone(U);if(H)return k8.createOutsideEditor(Z,H,"above",G)}let z=Y.getLineNumberAtVerticalOffset(q);return k8.createOutsideEditor(Z,new g(z,1),"above",G)}if(J.posy>$.y+$.height){let G=J.posy-$.y-$.height,q=Y.getCurrentScrollTop()+J.relativePos.y,U=B3.getZoneAtCoord(this._context,q);if(U){let H=this._helpPositionJumpOverViewZone(U);if(H)return k8.createOutsideEditor(Z,H,"below",G)}let z=Y.getLineNumberAtVerticalOffset(q);return k8.createOutsideEditor(Z,new g(z,X.getLineMaxColumn(z)),"below",G)}let Q=Y.getLineNumberAtVerticalOffset(Y.getCurrentScrollTop()+J.relativePos.y);if(J.posx<$.x){let G=$.x-J.posx;return k8.createOutsideEditor(Z,new g(Q,1),"left",G)}if(J.posx>$.x+$.width){let G=J.posx-$.x-$.width;return k8.createOutsideEditor(Z,new g(Q,X.getLineMaxColumn(Q)),"right",G)}return null}_findMousePosition(J,$){let X=this._getPositionOutsideEditor(J);if(X)return X;let Y=this._createMouseTarget(J,$);if(!Y.position)return null;if(Y.type===8||Y.type===5){let Q=this._helpPositionJumpOverViewZone(Y.detail);if(Q)return k8.createViewZone(Y.type,Y.element,Y.mouseColumn,Q,Y.detail)}return Y}_helpPositionJumpOverViewZone(J){let $=new g(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),X=J.positionBefore,Y=J.positionAfter;if(X&&Y)if(X.isBefore($))return X;else return Y;return null}_dispatchMouse(J,$,X){if(!J.position)return;this._viewController.dispatchMouse({position:J.position,mouseColumn:J.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:X,inSelectionMode:$,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:J.type===6&&J.detail.injectedText!==null})}};tl=class tl extends m{constructor(J,$,X,Y){super();this._context=J,this._viewHelper=$,this._mouseTargetFactory=X,this._dispatchMouse=Y,this._operation=null}dispose(){super.dispose(),this.stop()}start(J,$){if(this._operation)this._operation.setPosition(J,$);else this._operation=new el(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,J,$)}stop(){if(this._operation)this._operation.dispose(),this._operation=null}};el=class el extends m{constructor(J,$,X,Y,Z,Q){super();this._context=J,this._viewHelper=$,this._mouseTargetFactory=X,this._dispatchMouse=Y,this._position=Z,this._mouseEvent=Q,this._lastTime=Date.now(),this._animationFrameDisposable=f5(O0(Q.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(J,$){this._position=J,this._mouseEvent=$}_tick(){let J=Date.now(),$=J-this._lastTime;return this._lastTime=J,$}_getScrollSpeed(){let J=this._context.configuration.options.get(66),$=this._context.configuration.options.get(143).height/J,X=this._position.outsideDistance/J;if(X<=1.5)return Math.max(30,$*(1+X));if(X<=3)return Math.max(60,$*(2+X));return Math.max(200,$*(7+X))}_execute(){let J=this._context.configuration.options.get(66),$=this._getScrollSpeed(),X=this._tick(),Y=$*(X/1000)*J,Z=this._position.outsidePosition==="above"?-Y:Y;this._context.viewModel.viewLayout.deltaScrollNow(0,Z),this._viewHelper.renderNow();let Q=this._context.viewLayout.getLinesViewportData(),G=this._position.outsidePosition==="above"?Q.startLineNumber:Q.endLineNumber,q;{let U=GD(this._viewHelper.viewDomNode),z=this._context.configuration.options.get(143).horizontalScrollbarHeight,H=new z3(this._mouseEvent.pos.x,U.y+U.height-z-0.1),j=qD(this._viewHelper.viewDomNode,U,H);q=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),U,H,j,null)}if(!q.position||q.position.lineNumber!==G)if(this._position.outsidePosition==="above")q=k8.createOutsideEditor(this._position.mouseColumn,new g(G,1),"above",this._position.outsideDistance);else q=k8.createOutsideEditor(this._position.mouseColumn,new g(G,this._context.viewModel.getLineMaxColumn(G)),"below",this._position.outsideDistance);this._dispatchMouse(q,!0,2),this._animationFrameDisposable=f5(O0(q.element),()=>this._execute())}};BD.CLEAR_MOUSE_DOWN_COUNT_TIME=400});class H1{get event(){return this.emitter.event}constructor(J,$,X){let Y=(Z)=>this.emitter.fire(Z);this.emitter=new x({onWillAddFirstListener:()=>J.addEventListener($,Y,X),onDidRemoveLastListener:()=>J.removeEventListener($,Y,X)})}dispose(){this.emitter.dispose()}}var k$=w(()=>{_0()});class u5{constructor(J,$,X,Y,Z){this.value=J,this.selectionStart=$,this.selectionEnd=X,this.selection=Y,this.newlineCountBeforeSelection=Z}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(J,$){let X=J.getValue(),Y=J.getSelectionStart(),Z=J.getSelectionEnd(),Q=void 0;if($){let G=X.substring(0,Y),q=$.value.substring(0,$.selectionStart);if(G===q)Q=$.newlineCountBeforeSelection}return new u5(X,Y,Z,null,Q)}collapseSelection(){if(this.selectionStart===this.value.length)return this;return new u5(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(J,$,X){if(y9)console.log(`writeToTextArea ${J}: ${this.toString()}`);if($.setValue(J,this.value),X)$.setSelectionRange(J,this.selectionStart,this.selectionEnd)}deduceEditorPosition(J){var $,X,Y,Z,Q,G,q,U;if(J<=this.selectionStart){let j=this.value.substring(J,this.selectionStart);return this._finishDeduceEditorPosition((X=($=this.selection)===null||$===void 0?void 0:$.getStartPosition())!==null&&X!==void 0?X:null,j,-1)}if(J>=this.selectionEnd){let j=this.value.substring(this.selectionEnd,J);return this._finishDeduceEditorPosition((Z=(Y=this.selection)===null||Y===void 0?void 0:Y.getEndPosition())!==null&&Z!==void 0?Z:null,j,1)}let z=this.value.substring(this.selectionStart,J);if(z.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition((G=(Q=this.selection)===null||Q===void 0?void 0:Q.getStartPosition())!==null&&G!==void 0?G:null,z,1);let H=this.value.substring(J,this.selectionEnd);return this._finishDeduceEditorPosition((U=(q=this.selection)===null||q===void 0?void 0:q.getEndPosition())!==null&&U!==void 0?U:null,H,-1)}_finishDeduceEditorPosition(J,$,X){let Y=0,Z=-1;while((Z=$.indexOf(`
`,Z+1))!==-1)Y++;return[J,X*$.length,Y]}static deduceInput(J,$,X){if(!J)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(y9)console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${J.toString()}`),console.log(`CURRENT STATE: ${$.toString()}`);let Y=Math.min(NG(J.value,$.value),J.selectionStart,$.selectionStart),Z=Math.min(Vj(J.value,$.value),J.value.length-J.selectionEnd,$.value.length-$.selectionEnd),Q=J.value.substring(Y,J.value.length-Z),G=$.value.substring(Y,$.value.length-Z),q=J.selectionStart-Y,U=J.selectionEnd-Y,z=$.selectionStart-Y,H=$.selectionEnd-Y;if(y9)console.log(`AFTER DIFFING PREVIOUS STATE: <${Q}>, selectionStart: ${q}, selectionEnd: ${U}`),console.log(`AFTER DIFFING CURRENT STATE: <${G}>, selectionStart: ${z}, selectionEnd: ${H}`);if(z===H){let V=J.selectionStart-Y;if(y9)console.log(`REMOVE PREVIOUS: ${V} chars`);return{text:G,replacePrevCharCnt:V,replaceNextCharCnt:0,positionDelta:0}}let j=U-q;return{text:G,replacePrevCharCnt:j,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(J,$){if(!J)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(y9)console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${J.toString()}`),console.log(`CURRENT STATE: ${$.toString()}`);if(J.value===$.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:$.selectionEnd-J.selectionEnd};let X=Math.min(NG(J.value,$.value),J.selectionEnd),Y=Math.min(Vj(J.value,$.value),J.value.length-J.selectionEnd),Z=J.value.substring(X,J.value.length-Y),Q=$.value.substring(X,$.value.length-Y),G=J.selectionStart-X,q=J.selectionEnd-X,U=$.selectionStart-X,z=$.selectionEnd-X;if(y9)console.log(`AFTER DIFFING PREVIOUS STATE: <${Z}>, selectionStart: ${G}, selectionEnd: ${q}`),console.log(`AFTER DIFFING CURRENT STATE: <${Q}>, selectionStart: ${U}, selectionEnd: ${z}`);return{text:Q,replacePrevCharCnt:q,replaceNextCharCnt:Z.length-q,positionDelta:z-Q.length}}}class F3{static _getPageOfLine(J,$){return Math.floor((J-1)/$)}static _getRangeForPage(J,$){let X=J*$,Y=X+1,Z=X+$;return new k(Y,1,Z+1,1)}static fromEditorSelection(J,$,X,Y){let Q=F3._getPageOfLine($.startLineNumber,X),G=F3._getRangeForPage(Q,X),q=F3._getPageOfLine($.endLineNumber,X),U=F3._getRangeForPage(q,X),z=G.intersectRanges(new k(1,1,$.startLineNumber,$.startColumn));if(Y&&J.getValueLengthInRange(z,1)>500){let P=J.modifyPosition(z.getEndPosition(),-500);z=k.fromPositions(P,z.getEndPosition())}let H=J.getValueInRange(z,1),j=J.getLineCount(),V=J.getLineMaxColumn(j),W=U.intersectRanges(new k($.endLineNumber,$.endColumn,j,V));if(Y&&J.getValueLengthInRange(W,1)>500){let P=J.modifyPosition(W.getStartPosition(),500);W=k.fromPositions(W.getStartPosition(),P)}let B=J.getValueInRange(W,1),K;if(Q===q||Q+1===q)K=J.getValueInRange($,1);else{let P=G.intersectRanges($),A=U.intersectRanges($);K=J.getValueInRange(P,1)+String.fromCharCode(8230)+J.getValueInRange(A,1)}if(Y&&K.length>1000)K=K.substring(0,500)+String.fromCharCode(8230)+K.substring(K.length-500,K.length);return new u5(H+K+B,H.length,H.length+K.length,$,z.endLineNumber-z.startLineNumber)}}var y9=!1;var aL=w(()=>{X1();i0();u5.EMPTY=new u5("",0,0,null,void 0)});class EV{constructor(){this._lastState=null}set(J,$){this._lastState={lastCopiedValue:J,data:$}}get(J){if(this._lastState&&this._lastState.lastCopiedValue===J)return this._lastState.data;return this._lastState=null,null}}class Zd{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(J){J=J||"";let $={text:J,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=J.length,$}}var SZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},$d=function(J,$){return function(X,Y){$(X,Y,J)}},kV,Yd,FD,Xd,rL;var iL=w(()=>{e7();T0();k$();d8();FL();e1();_0();z0();cj();X1();aL();o5();P$();o9();(function(J){J.Tap="-monaco-textarea-synthetic-tap"})(kV||(kV={}));Yd={forceCopyWithSyntaxHighlighting:!1};EV.INSTANCE=new EV;FD=class extends m{get textAreaState(){return this._textAreaState}constructor($,X,Y,Z,Q,G){super();if(this._host=$,this._textArea=X,this._OS=Y,this._browser=Z,this._accessibilityService=Q,this._logService=G,this._onFocus=this._register(new x),this.onFocus=this._onFocus.event,this._onBlur=this._register(new x),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new x),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new x),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new x),this.onCut=this._onCut.event,this._onPaste=this._register(new x),this.onPaste=this._onPaste.event,this._onType=this._register(new x),this.onType=this._onType.event,this._onCompositionStart=this._register(new x),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new x),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new x),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new x),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new q8),this._asyncTriggerCut=this._register(new H6(()=>this._onCut.fire(),0)),this._textAreaState=u5.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized())this.writeNativeTextAreaContent("ctor");this._register(q0.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{if(this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value)this._asyncFocusGainWriteScreenReaderContent.value=this._register(new H6(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0));else this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let q=null;this._register(this._textArea.onKeyDown((U)=>{let z=new R1(U);if(z.keyCode===114||this._currentComposition&&z.keyCode===1)z.stopPropagation();if(z.equals(9))z.preventDefault();q=z,this._onKeyDown.fire(z)})),this._register(this._textArea.onKeyUp((U)=>{let z=new R1(U);this._onKeyUp.fire(z)})),this._register(this._textArea.onCompositionStart((U)=>{if(y9)console.log("[compositionstart]",U);let z=new Zd;if(this._currentComposition){this._currentComposition=z;return}if(this._currentComposition=z,this._OS===2&&q&&q.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===U.data&&(q.code==="ArrowRight"||q.code==="ArrowLeft")){if(y9)console.log("[compositionstart] Handling long press case on macOS + arrow key",U);z.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:U.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:U.data});return}this._onCompositionStart.fire({data:U.data})})),this._register(this._textArea.onCompositionUpdate((U)=>{if(y9)console.log("[compositionupdate]",U);let z=this._currentComposition;if(!z)return;if(this._browser.isAndroid){let j=u5.readFromTextArea(this._textArea,this._textAreaState),V=u5.deduceAndroidCompositionInput(this._textAreaState,j);this._textAreaState=j,this._onType.fire(V),this._onCompositionUpdate.fire(U);return}let H=z.handleCompositionUpdate(U.data);this._textAreaState=u5.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(H),this._onCompositionUpdate.fire(U)})),this._register(this._textArea.onCompositionEnd((U)=>{if(y9)console.log("[compositionend]",U);let z=this._currentComposition;if(!z)return;if(this._currentComposition=null,this._browser.isAndroid){let j=u5.readFromTextArea(this._textArea,this._textAreaState),V=u5.deduceAndroidCompositionInput(this._textAreaState,j);this._textAreaState=j,this._onType.fire(V),this._onCompositionEnd.fire();return}let H=z.handleCompositionUpdate(U.data);this._textAreaState=u5.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(H),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput((U)=>{if(y9)console.log("[input]",U);if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;let z=u5.readFromTextArea(this._textArea,this._textAreaState),H=u5.deduceInput(this._textAreaState,z,this._OS===2);if(H.replacePrevCharCnt===0&&H.text.length===1){if(P6(H.text.charCodeAt(0))||H.text.charCodeAt(0)===127)return}if(this._textAreaState=z,H.text!==""||H.replacePrevCharCnt!==0||H.replaceNextCharCnt!==0||H.positionDelta!==0)this._onType.fire(H)})),this._register(this._textArea.onCut((U)=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(U),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy((U)=>{this._ensureClipboardGetsEditorSelection(U)})),this._register(this._textArea.onPaste((U)=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),U.preventDefault(),!U.clipboardData)return;let[z,H]=Xd.getTextData(U.clipboardData);if(!z)return;H=H||EV.INSTANCE.get(z),this._onPaste.fire({text:z,metadata:H})})),this._register(this._textArea.onFocus(()=>{let U=this._hasFocus;if(this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!U&&this._hasFocus){if(!this._asyncFocusGainWriteScreenReaderContent.value)this._asyncFocusGainWriteScreenReaderContent.value=new H6(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0);this._asyncFocusGainWriteScreenReaderContent.value.schedule()}})),this._register(this._textArea.onBlur(()=>{if(this._currentComposition)this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire();this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{if(this._browser.isAndroid&&this._currentComposition)this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire()}))}_installSelectionChangeListener(){let $=0;return r(this._textArea.ownerDocument,"selectionchange",(X)=>{if(NX.onSelectionChange(),!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;let Y=Date.now(),Z=Y-$;if($=Y,Z<5)return;let Q=Y-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),Q<100)return;if(!this._textAreaState.selection)return;let G=this._textArea.getValue();if(this._textAreaState.value!==G)return;let q=this._textArea.getSelectionStart(),U=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===q&&this._textAreaState.selectionEnd===U)return;let z=this._textAreaState.deduceEditorPosition(q),H=this._host.deduceModelPosition(z[0],z[1],z[2]),j=this._textAreaState.deduceEditorPosition(U),V=this._host.deduceModelPosition(j[0],j[1],j[2]),W=new p0(H.lineNumber,H.column,V.lineNumber,V.column);this._onSelectionChangeRequest.fire(W)})}dispose(){if(super.dispose(),this._selectionChangeListener)this._selectionChangeListener.dispose(),this._selectionChangeListener=null}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus($){if(this._hasFocus===$)return;if(this._hasFocus=$,this._selectionChangeListener)this._selectionChangeListener.dispose(),this._selectionChangeListener=null;if(this._hasFocus)this._selectionChangeListener=this._installSelectionChangeListener();if(this._hasFocus)this.writeNativeTextAreaContent("focusgain");if(this._hasFocus)this._onFocus.fire();else this._onBlur.fire()}_setAndWriteTextAreaState($,X){if(!this._hasFocus)X=X.collapseSelection();X.writeToTextArea($,this._textArea,this._hasFocus),this._textAreaState=X}writeNativeTextAreaContent($){if(!this._accessibilityService.isScreenReaderOptimized()&&$==="render"||this._currentComposition)return;this._logService.trace(`writeTextAreaState(reason: ${$})`),this._setAndWriteTextAreaState($,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection($){let X=this._host.getDataToCopy(),Y={version:1,isFromEmptySelection:X.isFromEmptySelection,multicursorText:X.multicursorText,mode:X.mode};if(EV.INSTANCE.set(this._browser.isFirefox?X.text.replace(/\r\n/g,`
`):X.text,Y),$.preventDefault(),$.clipboardData)Xd.setTextData($.clipboardData,X.text,X.html,Y)}};FD=SZ0([$d(4,a8),$d(5,P5)],FD);Xd={getTextData(J){let $=J.getData(x4.text),X=null,Y=J.getData("vscode-editor-data");if(typeof Y==="string")try{if(X=JSON.parse(Y),X.version!==1)X=null}catch(Z){}if($.length===0&&X===null&&J.files.length>0)return[Array.prototype.slice.call(J.files,0).map((Q)=>Q.name).join(`
`),null];return[$,X]},setTextData(J,$,X,Y){if(J.setData(x4.text,$),typeof X==="string")J.setData("text/html",X);J.setData("vscode-editor-data",JSON.stringify(Y))}};rL=class rL extends m{get ownerDocument(){return this._actual.ownerDocument}constructor(J){super();this._actual=J,this.onKeyDown=this._register(new H1(this._actual,"keydown")).event,this.onKeyUp=this._register(new H1(this._actual,"keyup")).event,this.onCompositionStart=this._register(new H1(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new H1(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new H1(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new H1(this._actual,"beforeinput")).event,this.onInput=this._register(new H1(this._actual,"input")).event,this.onCut=this._register(new H1(this._actual,"cut")).event,this.onCopy=this._register(new H1(this._actual,"copy")).event,this.onPaste=this._register(new H1(this._actual,"paste")).event,this.onFocus=this._register(new H1(this._actual,"focus")).event,this.onBlur=this._register(new H1(this._actual,"blur")).event,this._onSyntheticTap=this._register(new x),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>NX.onKeyDown())),this._register(this.onBeforeInput(()=>NX.onBeforeInput())),this._register(this.onInput(()=>NX.onInput())),this._register(this.onKeyUp(()=>NX.onKeyUp())),this._register(r(this._actual,kV.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){let J=cY(this._actual);if(J)return J.activeElement===this._actual;else if(this._actual.isConnected)return B5()===this._actual;else return!1}setIgnoreSelectionChangeTime(J){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(J,$){let X=this._actual;if(X.value===$)return;this.setIgnoreSelectionChangeTime("setValue"),X.value=$}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(J,$,X){let Y=this._actual,Z=null,Q=cY(Y);if(Q)Z=Q.activeElement;else Z=B5();let G=O0(Z),q=Z===Y,U=Y.selectionStart,z=Y.selectionEnd;if(q&&U===$&&z===X){if(U8&&G.parent!==G)Y.focus();return}if(q){if(this.setIgnoreSelectionChangeTime("setSelectionRange"),Y.setSelectionRange($,X),U8&&G.parent!==G)Y.focus();return}try{let H=wp(Y);this.setIgnoreSelectionChangeTime("setSelectionRange"),Y.focus(),Y.setSelectionRange($,X),Lp(Y,H)}catch(H){}}}});var Qd,Gd,nL;var qd=w(()=>{dA();T0();g4();N8();z0();L1();Jd();iL();UD();Qd=class Qd extends LV{constructor(J,$,X){super(J,$,X);this._register(b1.addTarget(this.viewHelper.linesContentDomNode)),this._register(r(this.viewHelper.linesContentDomNode,f1.Tap,(Z)=>this.onTap(Z))),this._register(r(this.viewHelper.linesContentDomNode,f1.Change,(Z)=>this.onChange(Z))),this._register(r(this.viewHelper.linesContentDomNode,f1.Contextmenu,(Z)=>this._onContextMenu(new T$(Z,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(r(this.viewHelper.linesContentDomNode,"pointerdown",(Z)=>{let Q=Z.pointerType;if(Q==="mouse"){this._lastPointerType="mouse";return}else if(Q==="touch")this._lastPointerType="touch";else this._lastPointerType="pen"}));let Y=new TL(this.viewHelper.viewDomNode);this._register(Y.onPointerMove(this.viewHelper.viewDomNode,(Z)=>this._onMouseMove(Z))),this._register(Y.onPointerUp(this.viewHelper.viewDomNode,(Z)=>this._onMouseUp(Z))),this._register(Y.onPointerLeave(this.viewHelper.viewDomNode,(Z)=>this._onMouseLeave(Z))),this._register(Y.onPointerDown(this.viewHelper.viewDomNode,(Z,Q)=>this._onMouseDown(Z,Q)))}onTap(J){if(!J.initialTarget||!this.viewHelper.linesContentDomNode.contains(J.initialTarget))return;J.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(J,!1)}onChange(J){if(this._lastPointerType==="touch")this._context.viewModel.viewLayout.deltaScrollNow(-J.translationX,-J.translationY);if(this._lastPointerType==="pen")this._dispatchGesture(J,!0)}_dispatchGesture(J,$){let X=this._createMouseTarget(new T$(J,!1,this.viewHelper.viewDomNode),!1);if(X.position)this.viewController.dispatchMouse({position:X.position,mouseColumn:X.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:J.tapCount,inSelectionMode:$,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:X.type===6&&X.detail.injectedText!==null})}_onMouseDown(J,$){if(J.browserEvent.pointerType==="touch")return;super._onMouseDown(J,$)}};Gd=class Gd extends LV{constructor(J,$,X){super(J,$,X);this._register(b1.addTarget(this.viewHelper.linesContentDomNode)),this._register(r(this.viewHelper.linesContentDomNode,f1.Tap,(Y)=>this.onTap(Y))),this._register(r(this.viewHelper.linesContentDomNode,f1.Change,(Y)=>this.onChange(Y))),this._register(r(this.viewHelper.linesContentDomNode,f1.Contextmenu,(Y)=>this._onContextMenu(new T$(Y,!1,this.viewHelper.viewDomNode),!1)))}onTap(J){J.preventDefault(),this.viewHelper.focusTextArea();let $=this._createMouseTarget(new T$(J,!1,this.viewHelper.viewDomNode),!1);if($.position){let X=document.createEvent("CustomEvent");X.initEvent(kV.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(X),this.viewController.moveTo($.position,1)}}onChange(J){this._context.viewModel.viewLayout.deltaScrollNow(-J.translationX,-J.translationY)}};nL=class nL extends m{constructor(J,$,X){super();if((A4||jf&&VK)&&eq.pointerEvents)this.handler=this._register(new Qd(J,$,X));else if(W1.TouchEvent)this.handler=this._register(new Gd(J,$,X));else this.handler=this._register(new LV(J,$,X))}getTargetAtClientPoint(J,$){return this.handler.getTargetAtClientPoint(J,$)}}});var Ud=w(()=>{K0(".monaco-editor .inputarea{resize:none;color:#0000;z-index:-10;background-color:#0000;border:none;min-width:0;min-height:0;margin:0;padding:0;position:absolute;overflow:hidden;outline:none!important}.monaco-editor .inputarea.ime-input{z-index:10;caret-color:var(--vscode-editorCursor-foreground);color:var(--vscode-editor-foreground)}")});var zd=w(()=>{K0(".monaco-editor .margin-view-overlays .line-numbers{font-variant-numeric:tabular-nums;text-align:right;vertical-align:middle;box-sizing:border-box;cursor:default;height:100%;display:inline-block;position:absolute}.monaco-editor .relative-current-line-number{text-align:left;width:100%;display:inline-block}.monaco-editor .margin-view-overlays .line-numbers.lh-odd{margin-top:1px}.monaco-editor .line-numbers{color:var(--vscode-editorLineNumber-foreground)}.monaco-editor .line-numbers.active-line-number{color:var(--vscode-editorLineNumber-activeForeground)}")});var x9;var sQ=w(()=>{pU();x9=class x9 extends w${}});function VZ(J){return{id:J}}function IV(J){switch(J){case E9.DARK:return"vs-dark";case E9.HIGH_CONTRAST_DARK:return"hc-black";case E9.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}class Hd{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new x}onColorThemeChange(J){return this.themingParticipants.push(J),this.onThemingParticipantAddedEmitter.fire(J),N0(()=>{let $=this.themingParticipants.indexOf(J);this.themingParticipants.splice($,1)})}getThemingParticipants(){return this.themingParticipants}}function F7(J){return jd.onColorThemeChange(J)}var Q5,oL,jd,tL;var G5=w(()=>{_0();z0();s0();h7();qZ();Q5=w0("themeService");oL={ThemingContribution:"base.contributions.theming"};jd=new Hd;G6.add(oL.ThemingContribution,jd);tL=class tL extends m{constructor(J){super();this.themeService=J,this.theme=J.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(($)=>this.onThemeChange($)))}onThemeChange(J){this.theme=J,this.updateStyles()}updateStyles(){}}});var eL,Jk,Ry0,My0,Oy0,_y0,RD,Vd,CX,Wd,KD,AD,K3,Bd,Fd,Kd,Ad,Pd,A3,Dd,Rd,Md,Od,_d,PD,Ny0,Nd,Ty0,wy0,Ly0,ky0,Td,wd,Ey0,Iy0,Ld,yy0,xy0,by0,DD,Sy0,kd,Ed,Id,MD,OD,_D,ND,TD,wD,yd,xd,bd,Sd,Cd,vd,hd,fd,gd,pd,md,ud,cd,Cy0,vy0;var E$=w(()=>{c0();T9();i8();G5();eL=I("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},F("lineHighlight","Background color for the highlight of line at the cursor position.")),Jk=I("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:I1},F("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),Ry0=I("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},F("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),My0=I("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:O6,hcLight:O6},F("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),Oy0=I("editor.symbolHighlightBackground",{dark:ZZ,light:ZZ,hcDark:null,hcLight:null},F("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),_y0=I("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:O6,hcLight:O6},F("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),RD=I("editorCursor.foreground",{dark:"#AEAFAD",light:n.black,hcDark:n.white,hcLight:"#0F4A85"},F("caret","Color of the editor cursor.")),Vd=I("editorCursor.background",null,F("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),CX=I("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},F("editorWhitespaces","Color of whitespace characters in the editor.")),Wd=I("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:n.white,hcLight:"#292929"},F("editorLineNumbers","Color of editor line numbers.")),KD=I("editorIndentGuide.background",{dark:CX,light:CX,hcDark:CX,hcLight:CX},F("editorIndentGuides","Color of the editor indentation guides."),!1,F("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),AD=I("editorIndentGuide.activeBackground",{dark:CX,light:CX,hcDark:CX,hcLight:CX},F("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,F("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),K3=I("editorIndentGuide.background1",{dark:KD,light:KD,hcDark:KD,hcLight:KD},F("editorIndentGuides1","Color of the editor indentation guides (1).")),Bd=I("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorIndentGuides2","Color of the editor indentation guides (2).")),Fd=I("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorIndentGuides3","Color of the editor indentation guides (3).")),Kd=I("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorIndentGuides4","Color of the editor indentation guides (4).")),Ad=I("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorIndentGuides5","Color of the editor indentation guides (5).")),Pd=I("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorIndentGuides6","Color of the editor indentation guides (6).")),A3=I("editorIndentGuide.activeBackground1",{dark:AD,light:AD,hcDark:AD,hcLight:AD},F("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),Dd=I("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),Rd=I("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),Md=I("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),Od=I("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),_d=I("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),PD=I("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:O6,hcLight:O6},F("editorActiveLineNumber","Color of editor active line number"),!1,F("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),Ny0=I("editorLineNumber.activeForeground",{dark:PD,light:PD,hcDark:PD,hcLight:PD},F("editorActiveLineNumber","Color of editor active line number")),Nd=I("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},F("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),Ty0=I("editorRuler.foreground",{dark:"#5A5A5A",light:n.lightgrey,hcDark:n.white,hcLight:"#292929"},F("editorRuler","Color of the editor rulers.")),wy0=I("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},F("editorCodeLensForeground","Foreground color of editor CodeLens")),Ly0=I("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},F("editorBracketMatchBackground","Background color behind matching brackets")),ky0=I("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:I1,hcLight:I1},F("editorBracketMatchBorder","Color for matching brackets boxes")),Td=I("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},F("editorOverviewRulerBorder","Color of the overview ruler border.")),wd=I("editorOverviewRuler.background",null,F("editorOverviewRulerBackground","Background color of the editor overview ruler.")),Ey0=I("editorGutter.background",{dark:V8,light:V8,hcDark:V8,hcLight:V8},F("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Iy0=I("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:n.fromHex("#fff").transparent(0.8),hcLight:I1},F("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),Ld=I("editorUnnecessaryCode.opacity",{dark:n.fromHex("#000a"),light:n.fromHex("#0007"),hcDark:null,hcLight:null},F("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),yy0=I("editorGhostText.border",{dark:null,light:null,hcDark:n.fromHex("#fff").transparent(0.8),hcLight:n.fromHex("#292929").transparent(0.8)},F("editorGhostTextBorder","Border color of ghost text in the editor.")),xy0=I("editorGhostText.foreground",{dark:n.fromHex("#ffffff56"),light:n.fromHex("#0007"),hcDark:null,hcLight:null},F("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),by0=I("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},F("editorGhostTextBackground","Background color of the ghost text in the editor.")),DD=new n(new k1(0,122,204,0.6)),Sy0=I("editorOverviewRuler.rangeHighlightForeground",{dark:DD,light:DD,hcDark:DD,hcLight:DD},F("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),kd=I("editorOverviewRuler.errorForeground",{dark:new n(new k1(255,18,18,0.7)),light:new n(new k1(255,18,18,0.7)),hcDark:new n(new k1(255,50,50,1)),hcLight:"#B5200D"},F("overviewRuleError","Overview ruler marker color for errors.")),Ed=I("editorOverviewRuler.warningForeground",{dark:r8,light:r8,hcDark:RV,hcLight:RV},F("overviewRuleWarning","Overview ruler marker color for warnings.")),Id=I("editorOverviewRuler.infoForeground",{dark:k9,light:k9,hcDark:MV,hcLight:MV},F("overviewRuleInfo","Overview ruler marker color for infos.")),MD=I("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},F("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),OD=I("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},F("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),_D=I("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},F("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),ND=I("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),TD=I("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),wD=I("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),yd=I("editorBracketHighlight.unexpectedBracket.foreground",{dark:new n(new k1(255,18,18,0.8)),light:new n(new k1(255,18,18,0.8)),hcDark:new n(new k1(255,50,50,1)),hcLight:""},F("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),xd=I("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),bd=I("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Sd=I("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Cd=I("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),vd=I("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),hd=I("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),fd=I("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),gd=I("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),pd=I("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),md=I("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),ud=I("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),cd=I("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},F("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),Cy0=I("editorUnicodeHighlight.border",{dark:r8,light:r8,hcDark:r8,hcLight:r8},F("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),vy0=I("editorUnicodeHighlight.background",{dark:OV,light:OV,hcDark:OV,hcLight:OV},F("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));F7((J,$)=>{let X=J.getColor(V8),Y=J.getColor(eL),Z=Y&&!Y.isTransparent()?Y:X;if(Z)$.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${Z}; }`)})});var P3;var $k=w(()=>{zd();L1();sQ();i0();G5();E$();P3=class P3 extends x9{constructor(J){super();this._context=J,this._readConfig(),this._lastCursorModelPosition=new g(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let J=this._context.configuration.options;this._lineHeight=J.get(66);let $=J.get(67);this._renderLineNumbers=$.renderType,this._renderCustomLineNumbers=$.renderFn,this._renderFinalNewline=J.get(94);let X=J.get(143);this._lineNumbersLeft=X.lineNumbersLeft,this._lineNumbersWidth=X.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){return this._readConfig(),!0}onCursorStateChanged(J){let $=J.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition($);let X=!1;if(this._activeLineNumber!==$.lineNumber)this._activeLineNumber=$.lineNumber,X=!0;if(this._renderLineNumbers===2||this._renderLineNumbers===3)X=!0;return X}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}onDecorationsChanged(J){return J.affectsLineNumber}_getLineRenderLineNumber(J){let $=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new g(J,1));if($.column!==1)return"";let X=$.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(X);if(this._renderLineNumbers===2){let Y=Math.abs(this._lastCursorModelPosition.lineNumber-X);if(Y===0)return'<span class="relative-current-line-number">'+X+"</span>";return String(Y)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===X)return String(X);if(X%10===0)return String(X);return""}return String(X)}prepareRender(J){if(this._renderLineNumbers===0){this._renderResult=null;return}let $=N6?this._lineHeight%2===0?" lh-even":" lh-odd":"",X=J.visibleRange.startLineNumber,Y=J.visibleRange.endLineNumber,Z=this._context.viewModel.getDecorationsInViewport(J.visibleRange).filter((U)=>!!U.options.lineNumberClassName);Z.sort((U,z)=>k.compareRangesUsingEnds(U.range,z.range));let Q=0,G=this._context.viewModel.getLineCount(),q=[];for(let U=X;U<=Y;U++){let z=U-X,H=this._getLineRenderLineNumber(U),j="";while(Q<Z.length&&Z[Q].range.endLineNumber<U)Q++;for(let V=Q;V<Z.length;V++){let{range:W,options:B}=Z[V];if(W.startLineNumber<=U)j+=" "+B.lineNumberClassName}if(!H&&!j){q[z]="";continue}if(U===G&&this._context.viewModel.getLineLength(U)===0){if(this._renderFinalNewline==="off")H="";if(this._renderFinalNewline==="dimmed")j+=" dimmed-line-number"}if(U===this._activeLineNumber)j+=" active-line-number";q[z]=`<div class="${P3.CLASS_NAME}${$}${j}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${H}</div>`}this._renderResult=q}render(J,$){if(!this._renderResult)return"";let X=$-J;if(X<0||X>=this._renderResult.length)return"";return this._renderResult[X]}};P3.CLASS_NAME="line-numbers";F7((J,$)=>{let X=J.getColor(Wd),Y=J.getColor(Nd);if(Y)$.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${Y}; }`);else if(X)$.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${X.transparent(0.4)}; }`)})});var ld=w(()=>{K0(".monaco-editor .margin{background-color:var(--vscode-editorGutter-background)}")});var WZ;var Xk=w(()=>{ld();W7();WZ=class WZ extends w6{constructor(J){super(J);let $=this._context.configuration.options,X=$.get(143);this._canUseLayerHinting=!$.get(32),this._contentLeft=X.contentLeft,this._glyphMarginLeft=X.glyphMarginLeft,this._glyphMarginWidth=X.glyphMarginWidth,this._domNode=Y1(document.createElement("div")),this._domNode.setClassName(WZ.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Y1(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(WZ.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(J){let $=this._context.configuration.options,X=$.get(143);return this._canUseLayerHinting=!$.get(32),this._contentLeft=X.contentLeft,this._glyphMarginLeft=X.glyphMarginLeft,this._glyphMarginWidth=X.glyphMarginWidth,!0}onScrollChanged(J){return super.onScrollChanged(J)||J.scrollTopChanged}prepareRender(J){}render(J){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let $=J.scrollTop-J.bigNumbersDelta;this._domNode.setTop(-$);let X=Math.min(J.scrollHeight,1e6);this._domNode.setHeight(X),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(X)}};WZ.CLASS_NAME="glyph-margin";WZ.OUTER_CLASS_NAME="margin"});var dd=w(()=>{K0(".monaco-mouse-cursor-text{cursor:text}")});var BZ="monaco-mouse-cursor-text";var LD=w(()=>{dd()});class sd{constructor(){this._onDidChange=new x,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}var aQ;var Yk=w(()=>{_0();aQ=new sd});var $5;var EJ=w(()=>{s0();$5=w0("keybindingService")});class rd{constructor(J,$,X,Y,Z){this._context=J,this.modelLineNumber=$,this.distanceToModelLineStart=X,this.widthOfHiddenLineTextBefore=Y,this.distanceToModelLineEnd=Z,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(J){let $=new g(this.modelLineNumber,this.distanceToModelLineStart+1),X=new g(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);if(this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition($),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(X),this.startPosition.lineNumber===this.endPosition.lineNumber)this.visibleTextareaStart=J.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=J.visibleRangeForPosition(this.endPosition);else this.visibleTextareaStart=null,this.visibleTextareaEnd=null}definePresentation(J){if(!this._previousPresentation)if(J)this._previousPresentation=J;else this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1};return this._previousPresentation}}function vZ0(J,$,X,Y){if($.length===0)return 0;let Z=J.createElement("div");Z.style.position="absolute",Z.style.top="-50000px",Z.style.width="50000px";let Q=J.createElement("span");S6(Q,X),Q.style.whiteSpace="pre",Q.style.tabSize=`${Y*X.spaceWidth}px`,Q.append($),Z.appendChild(Q),J.body.appendChild(Z);let G=Q.offsetWidth;return J.body.removeChild(Z),G}var CZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},ad=function(J,$){return function(X,Y){$(X,Y,J)}},Zk,kD;var id=w(()=>{Ud();c0();e7();L1();X1();HJ();iL();aL();W7();$k();Xk();O8();ij();i0();o5();LD();c8();T9();Yk();EJ();s0();Zk=U8,kD=class extends w6{constructor($,X,Y,Z,Q){super($);this._keybindingService=Z,this._instantiationService=Q,this._primaryCursorPosition=new g(1,1),this._primaryCursorVisibleRange=null,this._viewController=X,this._visibleRangeProvider=Y,this._scrollLeft=0,this._scrollTop=0;let G=this._context.configuration.options,q=G.get(143);this._setAccessibilityOptions(G),this._contentLeft=q.contentLeft,this._contentWidth=q.contentWidth,this._contentHeight=q.height,this._fontInfo=G.get(50),this._lineHeight=G.get(66),this._emptySelectionClipboard=G.get(37),this._copyWithSyntaxHighlighting=G.get(25),this._visibleTextArea=null,this._selections=[new p0(1,1,1,1)],this._modelSelections=[new p0(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Y1(document.createElement("textarea")),L8.write(this.textArea,7),this.textArea.setClassName(`inputarea ${BZ}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:U}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${U*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(G)),this.textArea.setAttribute("aria-required",G.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(G.get(123))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",F("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",G.get(90)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Y1(document.createElement("div")),this.textAreaCover.setPosition("absolute");let z={getLineCount:()=>{return this._context.viewModel.getLineCount()},getLineMaxColumn:(V)=>{return this._context.viewModel.getLineMaxColumn(V)},getValueInRange:(V,W)=>{return this._context.viewModel.getValueInRange(V,W)},getValueLengthInRange:(V,W)=>{return this._context.viewModel.getValueLengthInRange(V,W)},modifyPosition:(V,W)=>{return this._context.viewModel.modifyPosition(V,W)}},H={getDataToCopy:()=>{let V=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,p6),W=this._context.viewModel.model.getEOL(),B=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),K=Array.isArray(V)?V:null,P=Array.isArray(V)?V.join(W):V,A=void 0,D=null;if(Yd.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&P.length<65536){let M=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);if(M)A=M.html,D=M.mode}return{isFromEmptySelection:B,multicursorText:K,text:P,html:A,mode:D}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){let V=this._selections[0];if(t0&&V.isEmpty()){let B=V.getStartPosition(),K=this._getWordBeforePosition(B);if(K.length===0)K=this._getCharacterBeforePosition(B);if(K.length>0)return new u5(K,K.length,K.length,k.fromPositions(B),0)}let W=500;if(t0&&!V.isEmpty()&&z.getValueLengthInRange(V,0)<W){let B=z.getValueInRange(V,0);return new u5(B,0,B.length,V,0)}if(K9&&!V.isEmpty())return new u5("vscode-placeholder",0,18,null,void 0);return u5.EMPTY}if(QT){let V=this._selections[0];if(V.isEmpty()){let W=V.getStartPosition(),[B,K]=this._getAndroidWordAtPosition(W);if(B.length>0)return new u5(B,K,K,k.fromPositions(W),0)}return u5.EMPTY}return F3.fromEditorSelection(z,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(V,W,B)=>{return this._context.viewModel.deduceModelPositionRelativeToViewPosition(V,W,B)}},j=this._register(new rL(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(FD,H,j,Z7,{isAndroid:QT,isChrome:jX,isFirefox:U8,isSafari:K9})),this._register(this._textAreaInput.onKeyDown((V)=>{this._viewController.emitKeyDown(V)})),this._register(this._textAreaInput.onKeyUp((V)=>{this._viewController.emitKeyUp(V)})),this._register(this._textAreaInput.onPaste((V)=>{let W=!1,B=null,K=null;if(V.metadata)W=this._emptySelectionClipboard&&!!V.metadata.isFromEmptySelection,B=typeof V.metadata.multicursorText<"u"?V.metadata.multicursorText:null,K=V.metadata.mode;this._viewController.paste(V.text,W,B,K)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType((V)=>{if(V.replacePrevCharCnt||V.replaceNextCharCnt||V.positionDelta){if(y9)console.log(` => compositionType: <<${V.text}>>, ${V.replacePrevCharCnt}, ${V.replaceNextCharCnt}, ${V.positionDelta}`);this._viewController.compositionType(V.text,V.replacePrevCharCnt,V.replaceNextCharCnt,V.positionDelta)}else{if(y9)console.log(` => type: <<${V.text}>>`);this._viewController.type(V.text)}})),this._register(this._textAreaInput.onSelectionChangeRequest((V)=>{this._viewController.setSelection(V)})),this._register(this._textAreaInput.onCompositionStart((V)=>{let W=this.textArea.domNode,B=this._modelSelections[0],{distanceToModelLineStart:K,widthOfHiddenTextBefore:P}=(()=>{let D=W.value.substring(0,Math.min(W.selectionStart,W.selectionEnd)),M=D.lastIndexOf(`
`),R=D.substring(M+1),O=R.lastIndexOf("\t"),N=R.length-O-1,T=B.getStartPosition(),S=Math.min(T.column-1,N),v=T.column-1-S,l=R.substring(0,R.length-S),{tabSize:f}=this._context.viewModel.model.getOptions(),h=vZ0(this.textArea.domNode.ownerDocument,l,this._fontInfo,f);return{distanceToModelLineStart:v,widthOfHiddenTextBefore:h}})(),{distanceToModelLineEnd:A}=(()=>{let D=W.value.substring(Math.max(W.selectionStart,W.selectionEnd)),M=D.indexOf(`
`),R=M===-1?D:D.substring(0,M),O=R.indexOf("\t"),N=O===-1?R.length:R.length-O-1,T=B.getEndPosition(),S=Math.min(this._context.viewModel.model.getLineMaxColumn(T.lineNumber)-T.column,N);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(T.lineNumber)-T.column-S}})();this._context.viewModel.revealRange("keyboard",!0,k.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new rd(this._context,B.startLineNumber,K,P,A),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${BZ} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate((V)=>{if(!this._visibleTextArea)return;this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render()})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${BZ}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(aQ.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent($){this._textAreaInput.writeNativeTextAreaContent($)}dispose(){super.dispose()}_getAndroidWordAtPosition($){let Y=this._context.viewModel.getLineContent($.lineNumber),Z=DX('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?'),Q=!0,G=$.column,q=!0,U=$.column,z=0;while(z<50&&(Q||q)){if(Q&&G<=1)Q=!1;if(Q){let H=Y.charCodeAt(G-2);if(Z.get(H)!==0)Q=!1;else G--}if(q&&U>Y.length)q=!1;if(q){let H=Y.charCodeAt(U-1);if(Z.get(H)!==0)q=!1;else U++}z++}return[Y.substring(G-1,U-1),$.column-G]}_getWordBeforePosition($){let X=this._context.viewModel.getLineContent($.lineNumber),Y=DX(this._context.configuration.options.get(129)),Z=$.column,Q=0;while(Z>1){let G=X.charCodeAt(Z-2);if(Y.get(G)!==0||Q>50)return X.substring(Z-1,$.column-1);Q++,Z--}return X.substring(0,$.column-1)}_getCharacterBeforePosition($){if($.column>1){let Y=this._context.viewModel.getLineContent($.lineNumber).charAt($.column-2);if(!P6(Y.charCodeAt(0)))return Y}return""}_getAriaLabel($){var X,Y,Z;if($.get(2)===1){let G=(X=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||X===void 0?void 0:X.getAriaLabel(),q=(Y=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||Y===void 0?void 0:Y.getAriaLabel(),U=(Z=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||Z===void 0?void 0:Z.getAriaLabel(),z=F("accessibilityModeOff","The editor is not accessible at this time.");if(G)return F("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",z,G);else if(q)return F("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",z,q);else if(U)return F("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",z,U);else return z}return $.get(4)}_setAccessibilityOptions($){this._accessibilitySupport=$.get(2);let X=$.get(3);if(this._accessibilitySupport===2&&X===$$.accessibilityPageSize.defaultValue)this._accessibilityPageSize=500;else this._accessibilityPageSize=X;let Z=$.get(143).wrappingColumn;if(Z!==-1&&this._accessibilitySupport!==1){let Q=$.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(Z*Q.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=Zk?0:1}onConfigurationChanged($){let X=this._context.configuration.options,Y=X.get(143);this._setAccessibilityOptions(X),this._contentLeft=Y.contentLeft,this._contentWidth=Y.contentWidth,this._contentHeight=Y.height,this._fontInfo=X.get(50),this._lineHeight=X.get(66),this._emptySelectionClipboard=X.get(37),this._copyWithSyntaxHighlighting=X.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:Z}=this._context.viewModel.model.getOptions();if(this.textArea.domNode.style.tabSize=`${Z*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(X)),this.textArea.setAttribute("aria-required",X.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(X.get(123))),$.hasChanged(34)||$.hasChanged(90))this._ensureReadOnlyAttribute();if($.hasChanged(2))this._textAreaInput.writeNativeTextAreaContent("strategy changed");return!0}onCursorStateChanged($){return this._selections=$.selections.slice(0),this._modelSelections=$.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged($){return!0}onFlushed($){return!0}onLinesChanged($){return!0}onLinesDeleted($){return!0}onLinesInserted($){return!0}onScrollChanged($){return this._scrollLeft=$.scrollLeft,this._scrollTop=$.scrollTop,!0}onZonesChanged($){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions($){if($.activeDescendant)this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",$.activeDescendant);else this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant");if($.role)this.textArea.setAttribute("role",$.role)}_ensureReadOnlyAttribute(){let $=this._context.configuration.options;if(!aQ.enabled||$.get(34)&&$.get(90))this.textArea.setAttribute("readonly","true");else this.textArea.removeAttribute("readonly")}prepareRender($){var X;this._primaryCursorPosition=new g(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=$.visibleRangeForPosition(this._primaryCursorPosition),(X=this._visibleTextArea)===null||X===void 0||X.prepareRender($)}render($){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){var $;if(this._visibleTextArea){let Z=this._visibleTextArea.visibleTextareaStart,Q=this._visibleTextArea.visibleTextareaEnd,G=this._visibleTextArea.startPosition,q=this._visibleTextArea.endPosition;if(G&&q&&Z&&Q&&Q.left>=this._scrollLeft&&Z.left<=this._scrollLeft+this._contentWidth){let U=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,z=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),H=this._visibleTextArea.widthOfHiddenLineTextBefore,j=this._contentLeft+Z.left-this._scrollLeft,V=Q.left-Z.left+1;if(j<this._contentLeft){let D=this._contentLeft-j;j+=D,H+=D,V-=D}if(V>this._contentWidth)V=this._contentWidth;let W=this._context.viewModel.getViewLineData(G.lineNumber),B=W.tokens.findTokenIndexAtOffset(G.column-1),K=W.tokens.findTokenIndexAtOffset(q.column-1),P=B===K,A=this._visibleTextArea.definePresentation(P?W.tokens.getPresentation(B):null);this.textArea.domNode.scrollTop=z*this._lineHeight,this.textArea.domNode.scrollLeft=H,this._doRender({lastRenderPosition:null,top:U,left:j,width:V,height:this._lineHeight,useCover:!1,color:($6.getColorMap()||[])[A.foreground],italic:A.italic,bold:A.bold,underline:A.underline,strikethrough:A.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}let X=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(X<this._contentLeft||X>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}let Y=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(Y<0||Y>this._contentHeight){this._renderAtTopLeft();return}if(t0||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:Y,left:this._textAreaWrapping?this._contentLeft:X,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;let Z=($=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&$!==void 0?$:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=Z*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:Y,left:this._textAreaWrapping?this._contentLeft:X,width:this._textAreaWidth,height:Zk?0:1,useCover:!1})}_newlinecount($){let X=0,Y=-1;do{if(Y=$.indexOf(`
`,Y+1),Y===-1)break;X++}while(!0);return X}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:Zk?0:1,useCover:!0})}_doRender($){this._lastRenderPosition=$.lastRenderPosition;let X=this.textArea,Y=this.textAreaCover;if(S6(X,this._fontInfo),X.setTop($.top),X.setLeft($.left),X.setWidth($.width),X.setHeight($.height),X.setColor($.color?n.Format.CSS.formatHex($.color):""),X.setFontStyle($.italic?"italic":""),$.bold)X.setFontWeight("bold");X.setTextDecoration(`${$.underline?" underline":""}${$.strikethrough?" line-through":""}`),Y.setTop($.useCover?$.top:0),Y.setLeft($.useCover?$.left:0),Y.setWidth($.useCover?$.width:0),Y.setHeight($.useCover?$.height:0);let Z=this._context.configuration.options;if(Z.get(57))Y.setClassName("monaco-editor-background textAreaCover "+WZ.OUTER_CLASS_NAME);else if(Z.get(67).renderType!==0)Y.setClassName("monaco-editor-background textAreaCover "+P3.CLASS_NAME);else Y.setClassName("monaco-editor-background textAreaCover")}};kD=CZ0([ad(3,$5),ad(4,l0)],kD)});function hZ0(J,$,X){let Y=0;for(let Q=0;Q<J.length;Q++)if(J.charAt(Q)==="\t")Y=s1.nextIndentTabStop(Y,$);else Y++;let Z="";if(!X){let Q=Math.floor(Y/$);Y=Y%$;for(let G=0;G<Q;G++)Z+="\t"}for(let Q=0;Q<Y;Q++)Z+=" ";return Z}function ED(J,$,X){let Y=c6(J);if(Y===-1)Y=J.length;return hZ0(J.substring(0,Y),$,X)+J.substring(Y)}var Qk=w(()=>{X1();LJ()});class rQ{static shouldRecreate(J){return J.hasChanged(143)||J.hasChanged(129)||J.hasChanged(37)||J.hasChanged(76)||J.hasChanged(78)||J.hasChanged(79)||J.hasChanged(6)||J.hasChanged(7)||J.hasChanged(11)||J.hasChanged(9)||J.hasChanged(10)||J.hasChanged(14)||J.hasChanged(127)||J.hasChanged(50)||J.hasChanged(90)}constructor(J,$,X,Y){var Z;this.languageConfigurationService=Y,this._cursorMoveConfigurationBrand=void 0,this._languageId=J;let Q=X.options,G=Q.get(143),q=Q.get(50);this.readOnly=Q.get(90),this.tabSize=$.tabSize,this.indentSize=$.indentSize,this.insertSpaces=$.insertSpaces,this.stickyTabStops=Q.get(115),this.lineHeight=q.lineHeight,this.typicalHalfwidthCharacterWidth=q.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(G.height/this.lineHeight)-2),this.useTabStops=Q.get(127),this.wordSeparators=Q.get(129),this.emptySelectionClipboard=Q.get(37),this.copyWithSyntaxHighlighting=Q.get(25),this.multiCursorMergeOverlapping=Q.get(76),this.multiCursorPaste=Q.get(78),this.multiCursorLimit=Q.get(79),this.autoClosingBrackets=Q.get(6),this.autoClosingComments=Q.get(7),this.autoClosingQuotes=Q.get(11),this.autoClosingDelete=Q.get(9),this.autoClosingOvertype=Q.get(10),this.autoSurround=Q.get(14),this.autoIndent=Q.get(12),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(J,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(J,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(J,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(J).getAutoClosingPairs();let U=this.languageConfigurationService.getLanguageConfiguration(J).getSurroundingPairs();if(U)for(let H of U)this.surroundingPairs[H.open]=H.close;let z=this.languageConfigurationService.getLanguageConfiguration(J).comments;this.blockCommentStartToken=(Z=z===null||z===void 0?void 0:z.blockCommentStartToken)!==null&&Z!==void 0?Z:null}get electricChars(){var J;if(!this._electricChars){this._electricChars={};let $=(J=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||J===void 0?void 0:J.getElectricCharacters();if($)for(let X of $)this._electricChars[X]=!0}return this._electricChars}onElectricCharacter(J,$,X){let Y=EQ($,X-1),Z=this.languageConfigurationService.getLanguageConfiguration(Y.languageId).electricCharacter;if(!Z)return null;return Z.onElectricCharacter(J,Y,X-Y.firstCharOffset)}normalizeIndentation(J){return ED(J,this.indentSize,this.insertSpaces)}_getShouldAutoClose(J,$,X){switch($){case"beforeWhitespace":return pZ0;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(J,X);case"always":return fZ0;case"never":return gZ0}}_getLanguageDefinedShouldAutoClose(J,$){let X=this.languageConfigurationService.getLanguageConfiguration(J).getAutoCloseBeforeSet($);return(Y)=>X.indexOf(Y)!==-1}visibleColumnFromColumn(J,$){return s1.visibleColumnFromColumn(J.getLineContent($.lineNumber),$.column,this.tabSize)}columnFromVisibleColumn(J,$,X){let Y=s1.columnFromVisibleColumn(J.getLineContent($),X,this.tabSize),Z=J.getLineMinColumn($);if(Y<Z)return Z;let Q=J.getLineMaxColumn($);if(Y>Q)return Q;return Y}}class P1{static fromModelState(J){return new nd(J)}static fromViewState(J){return new od(J)}static fromModelSelection(J){let $=p0.liftSelection(J),X=new K5(k.fromPositions($.getSelectionStart()),0,0,$.getPosition(),0);return P1.fromModelState(X)}static fromModelSelections(J){let $=[];for(let X=0,Y=J.length;X<Y;X++)$[X]=this.fromModelSelection(J[X]);return $}constructor(J,$){this._cursorStateBrand=void 0,this.modelState=J,this.viewState=$}equals(J){return this.viewState.equals(J.viewState)&&this.modelState.equals(J.modelState)}}class nd{constructor(J){this.modelState=J,this.viewState=null}}class od{constructor(J){this.modelState=null,this.viewState=J}}class K5{constructor(J,$,X,Y,Z){this.selectionStart=J,this.selectionStartKind=$,this.selectionStartLeftoverVisibleColumns=X,this.position=Y,this.leftoverVisibleColumns=Z,this._singleCursorStateBrand=void 0,this.selection=K5._computeSelection(this.selectionStart,this.position)}equals(J){return this.selectionStartLeftoverVisibleColumns===J.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===J.leftoverVisibleColumns&&this.selectionStartKind===J.selectionStartKind&&this.position.equals(J.position)&&this.selectionStart.equalsRange(J.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(J,$,X,Y){if(J)return new K5(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new g($,X),Y);else return new K5(new k($,X,$,X),0,Y,new g($,X),Y)}static _computeSelection(J,$){if(J.isEmpty()||!$.isBeforeOrEqual(J.getStartPosition()))return p0.fromPositions(J.getStartPosition(),$);else return p0.fromPositions(J.getEndPosition(),$)}}class I8{constructor(J,$,X){this._editOperationResultBrand=void 0,this.type=J,this.commands=$,this.shouldPushStackElementBefore=X.shouldPushStackElementBefore,this.shouldPushStackElementAfter=X.shouldPushStackElementAfter}}function vX(J){return J==="'"||J==='"'||J==="`"}var fZ0=()=>!0,gZ0=()=>!1,pZ0=(J)=>J===" "||J==="\t";var IJ=w(()=>{i0();o5();LJ();Qk()});class iQ{static columnSelect(J,$,X,Y,Z,Q){let G=Math.abs(Z-X)+1,q=X>Z,U=Y>Q,z=Y<Q,H=[];for(let j=0;j<G;j++){let V=X+(q?-j:j),W=J.columnFromVisibleColumn($,V,Y),B=J.columnFromVisibleColumn($,V,Q),K=J.visibleColumnFromColumn($,new g(V,W)),P=J.visibleColumnFromColumn($,new g(V,B));if(z){if(K>Q)continue;if(P<Y)continue}if(U){if(P>Y)continue;if(K<Q)continue}H.push(new K5(new k(V,W,V,W),0,0,new g(V,B),0))}if(H.length===0)for(let j=0;j<G;j++){let V=X+(q?-j:j),W=$.getLineMaxColumn(V);H.push(new K5(new k(V,W,V,W),0,0,new g(V,W),0))}return{viewStates:H,reversed:q,fromLineNumber:X,fromVisualColumn:Y,toLineNumber:Z,toVisualColumn:Q}}static columnSelectLeft(J,$,X){let Y=X.toViewVisualColumn;if(Y>0)Y--;return iQ.columnSelect(J,$,X.fromViewLineNumber,X.fromViewVisualColumn,X.toViewLineNumber,Y)}static columnSelectRight(J,$,X){let Y=0,Z=Math.min(X.fromViewLineNumber,X.toViewLineNumber),Q=Math.max(X.fromViewLineNumber,X.toViewLineNumber);for(let q=Z;q<=Q;q++){let U=$.getLineMaxColumn(q),z=J.visibleColumnFromColumn($,new g(q,U));Y=Math.max(Y,z)}let G=X.toViewVisualColumn;if(G<Y)G++;return this.columnSelect(J,$,X.fromViewLineNumber,X.fromViewVisualColumn,X.toViewLineNumber,G)}static columnSelectUp(J,$,X,Y){let Z=Y?J.pageSize:1,Q=Math.max(1,X.toViewLineNumber-Z);return this.columnSelect(J,$,X.fromViewLineNumber,X.fromViewVisualColumn,Q,X.toViewVisualColumn)}static columnSelectDown(J,$,X,Y){let Z=Y?J.pageSize:1,Q=Math.min($.getLineCount(),X.toViewLineNumber+Z);return this.columnSelect(J,$,X.fromViewLineNumber,X.fromViewVisualColumn,Q,X.toViewVisualColumn)}}var td=w(()=>{IJ();i0()});class K7{constructor(J,$,X=!1){this._range=J,this._text=$,this.insertsAutoWhitespace=X}getEditOperations(J,$){$.addTrackedEditOperation(this._range,this._text)}computeCursorState(J,$){let Y=$.getInverseEditOperations()[0].range;return p0.fromPositions(Y.getEndPosition())}}class aU{constructor(J,$,X=!1){this._range=J,this._text=$,this.insertsAutoWhitespace=X}getEditOperations(J,$){$.addTrackedEditOperation(this._range,this._text)}computeCursorState(J,$){let Y=$.getInverseEditOperations()[0].range;return p0.fromPositions(Y.getStartPosition())}}class rU{constructor(J,$,X,Y,Z=!1){this._range=J,this._text=$,this._columnDeltaOffset=Y,this._lineNumberDeltaOffset=X,this.insertsAutoWhitespace=Z}getEditOperations(J,$){$.addTrackedEditOperation(this._range,this._text)}computeCursorState(J,$){let Y=$.getInverseEditOperations()[0].range;return p0.fromPositions(Y.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class Gk{constructor(J,$,X,Y=!1){this._range=J,this._text=$,this._initialSelection=X,this._forceMoveMarkers=Y,this._selectionId=null}getEditOperations(J,$){$.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=$.trackSelection(this._initialSelection)}computeCursorState(J,$){return $.getTrackedSelection(this._selectionId)}}var qk=w(()=>{o5()});class ID{constructor(J,$,X){this._cursorPositionBrand=void 0,this.lineNumber=J,this.column=$,this.leftoverVisibleColumns=X}}class c1{static leftPosition(J,$){if($.column>J.getLineMinColumn($.lineNumber))return $.delta(void 0,-XT(J.getLineContent($.lineNumber),$.column-1));else if($.lineNumber>1){let X=$.lineNumber-1;return new g(X,J.getLineMaxColumn(X))}else return $}static leftPositionAtomicSoftTabs(J,$,X){if($.column<=J.getLineIndentColumn($.lineNumber)){let Y=J.getLineMinColumn($.lineNumber),Z=J.getLineContent($.lineNumber),Q=j3.atomicPosition(Z,$.column-1,X,0);if(Q!==-1&&Q+1>=Y)return new g($.lineNumber,Q+1)}return this.leftPosition(J,$)}static left(J,$,X){let Y=J.stickyTabStops?c1.leftPositionAtomicSoftTabs($,X,J.tabSize):c1.leftPosition($,X);return new ID(Y.lineNumber,Y.column,0)}static moveLeft(J,$,X,Y,Z){let Q,G;if(X.hasSelection()&&!Y)Q=X.selection.startLineNumber,G=X.selection.startColumn;else{let q=X.position.delta(void 0,-(Z-1)),U=$.normalizePosition(c1.clipPositionColumn(q,$),0),z=c1.left(J,$,U);Q=z.lineNumber,G=z.column}return X.move(Y,Q,G,0)}static clipPositionColumn(J,$){return new g(J.lineNumber,c1.clipRange(J.column,$.getLineMinColumn(J.lineNumber),$.getLineMaxColumn(J.lineNumber)))}static clipRange(J,$,X){if(J<$)return $;if(J>X)return X;return J}static rightPosition(J,$,X){if(X<J.getLineMaxColumn($))X=X+Wj(J.getLineContent($),X-1);else if($<J.getLineCount())$=$+1,X=J.getLineMinColumn($);return new g($,X)}static rightPositionAtomicSoftTabs(J,$,X,Y,Z){if(X<J.getLineIndentColumn($)){let Q=J.getLineContent($),G=j3.atomicPosition(Q,X-1,Y,1);if(G!==-1)return new g($,G+1)}return this.rightPosition(J,$,X)}static right(J,$,X){let Y=J.stickyTabStops?c1.rightPositionAtomicSoftTabs($,X.lineNumber,X.column,J.tabSize,J.indentSize):c1.rightPosition($,X.lineNumber,X.column);return new ID(Y.lineNumber,Y.column,0)}static moveRight(J,$,X,Y,Z){let Q,G;if(X.hasSelection()&&!Y)Q=X.selection.endLineNumber,G=X.selection.endColumn;else{let q=X.position.delta(void 0,Z-1),U=$.normalizePosition(c1.clipPositionColumn(q,$),1),z=c1.right(J,$,U);Q=z.lineNumber,G=z.column}return X.move(Y,Q,G,0)}static vertical(J,$,X,Y,Z,Q,G,q){let U=s1.visibleColumnFromColumn($.getLineContent(X),Y,J.tabSize)+Z,z=$.getLineCount(),H=X===1&&Y===1,j=X===z&&Y===$.getLineMaxColumn(X),V=Q<X?H:j;if(X=Q,X<1)if(X=1,G)Y=$.getLineMinColumn(X);else Y=Math.min($.getLineMaxColumn(X),Y);else if(X>z)if(X=z,G)Y=$.getLineMaxColumn(X);else Y=Math.min($.getLineMaxColumn(X),Y);else Y=J.columnFromVisibleColumn($,X,U);if(V)Z=0;else Z=U-s1.visibleColumnFromColumn($.getLineContent(X),Y,J.tabSize);if(q!==void 0){let W=new g(X,Y),B=$.normalizePosition(W,q);Z=Z+(Y-B.column),X=B.lineNumber,Y=B.column}return new ID(X,Y,Z)}static down(J,$,X,Y,Z,Q,G){return this.vertical(J,$,X,Y,Z,X+Q,G,4)}static moveDown(J,$,X,Y,Z){let Q,G;if(X.hasSelection()&&!Y)Q=X.selection.endLineNumber,G=X.selection.endColumn;else Q=X.position.lineNumber,G=X.position.column;let q=0,U;do if(U=c1.down(J,$,Q+q,G,X.leftoverVisibleColumns,Z,!0),$.normalizePosition(new g(U.lineNumber,U.column),2).lineNumber>Q)break;while(q++<10&&Q+q<$.getLineCount());return X.move(Y,U.lineNumber,U.column,U.leftoverVisibleColumns)}static translateDown(J,$,X){let Y=X.selection,Z=c1.down(J,$,Y.selectionStartLineNumber,Y.selectionStartColumn,X.selectionStartLeftoverVisibleColumns,1,!1),Q=c1.down(J,$,Y.positionLineNumber,Y.positionColumn,X.leftoverVisibleColumns,1,!1);return new K5(new k(Z.lineNumber,Z.column,Z.lineNumber,Z.column),0,Z.leftoverVisibleColumns,new g(Q.lineNumber,Q.column),Q.leftoverVisibleColumns)}static up(J,$,X,Y,Z,Q,G){return this.vertical(J,$,X,Y,Z,X-Q,G,3)}static moveUp(J,$,X,Y,Z){let Q,G;if(X.hasSelection()&&!Y)Q=X.selection.startLineNumber,G=X.selection.startColumn;else Q=X.position.lineNumber,G=X.position.column;let q=c1.up(J,$,Q,G,X.leftoverVisibleColumns,Z,!0);return X.move(Y,q.lineNumber,q.column,q.leftoverVisibleColumns)}static translateUp(J,$,X){let Y=X.selection,Z=c1.up(J,$,Y.selectionStartLineNumber,Y.selectionStartColumn,X.selectionStartLeftoverVisibleColumns,1,!1),Q=c1.up(J,$,Y.positionLineNumber,Y.positionColumn,X.leftoverVisibleColumns,1,!1);return new K5(new k(Z.lineNumber,Z.column,Z.lineNumber,Z.column),0,Z.leftoverVisibleColumns,new g(Q.lineNumber,Q.column),Q.leftoverVisibleColumns)}static _isBlankLine(J,$){if(J.getLineFirstNonWhitespaceColumn($)===0)return!0;return!1}static moveToPrevBlankLine(J,$,X,Y){let Z=X.position.lineNumber;while(Z>1&&this._isBlankLine($,Z))Z--;while(Z>1&&!this._isBlankLine($,Z))Z--;return X.move(Y,Z,$.getLineMinColumn(Z),0)}static moveToNextBlankLine(J,$,X,Y){let Z=$.getLineCount(),Q=X.position.lineNumber;while(Q<Z&&this._isBlankLine($,Q))Q++;while(Q<Z&&!this._isBlankLine($,Q))Q++;return X.move(Y,Q,$.getLineMinColumn(Q),0)}static moveToBeginningOfLine(J,$,X,Y){let Z=X.position.lineNumber,Q=$.getLineMinColumn(Z),G=$.getLineFirstNonWhitespaceColumn(Z)||Q,q;if(X.position.column===G)q=Q;else q=G;return X.move(Y,Z,q,0)}static moveToEndOfLine(J,$,X,Y,Z){let Q=X.position.lineNumber,G=$.getLineMaxColumn(Q);return X.move(Y,Q,G,Z?1073741824-G:0)}static moveToBeginningOfBuffer(J,$,X,Y){return X.move(Y,1,1,0)}static moveToEndOfBuffer(J,$,X,Y){let Z=$.getLineCount(),Q=$.getLineMaxColumn(Z);return X.move(Y,Z,Q,0)}}var Uk=w(()=>{X1();LJ();i0();bL();IJ()});class hX{static deleteRight(J,$,X,Y){let Z=[],Q=J!==3;for(let G=0,q=Y.length;G<q;G++){let U=Y[G],z=U;if(z.isEmpty()){let H=U.getPosition(),j=c1.right($,X,H);z=new k(j.lineNumber,j.column,H.lineNumber,H.column)}if(z.isEmpty()){Z[G]=null;continue}if(z.startLineNumber!==z.endLineNumber)Q=!0;Z[G]=new K7(z,"")}return[Q,Z]}static isAutoClosingPairDelete(J,$,X,Y,Z,Q,G){if($==="never"&&X==="never")return!1;if(J==="never")return!1;for(let q=0,U=Q.length;q<U;q++){let z=Q[q],H=z.getPosition();if(!z.isEmpty())return!1;let j=Z.getLineContent(H.lineNumber);if(H.column<2||H.column>=j.length+1)return!1;let V=j.charAt(H.column-2),W=Y.get(V);if(!W)return!1;if(vX(V)){if(X==="never")return!1}else if($==="never")return!1;let B=j.charAt(H.column-1),K=!1;for(let P of W)if(P.open===V&&P.close===B)K=!0;if(!K)return!1;if(J==="auto"){let P=!1;for(let A=0,D=G.length;A<D;A++){let M=G[A];if(H.lineNumber===M.startLineNumber&&H.column===M.startColumn){P=!0;break}}if(!P)return!1}}return!0}static _runAutoClosingPairDelete(J,$,X){let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++){let G=X[Z].getPosition(),q=new k(G.lineNumber,G.column-1,G.lineNumber,G.column+1);Y[Z]=new K7(q,"")}return[!0,Y]}static deleteLeft(J,$,X,Y,Z){if(this.isAutoClosingPairDelete($.autoClosingDelete,$.autoClosingBrackets,$.autoClosingQuotes,$.autoClosingPairs.autoClosingPairsOpenByEnd,X,Y,Z))return this._runAutoClosingPairDelete($,X,Y);let Q=[],G=J!==2;for(let q=0,U=Y.length;q<U;q++){let z=hX.getDeleteRange(Y[q],X,$);if(z.isEmpty()){Q[q]=null;continue}if(z.startLineNumber!==z.endLineNumber)G=!0;Q[q]=new K7(z,"")}return[G,Q]}static getDeleteRange(J,$,X){if(!J.isEmpty())return J;let Y=J.getPosition();if(X.useTabStops&&Y.column>1){let Z=$.getLineContent(Y.lineNumber),Q=c6(Z),G=Q===-1?Z.length+1:Q+1;if(Y.column<=G){let q=X.visibleColumnFromColumn($,Y),U=s1.prevIndentTabStop(q,X.indentSize),z=X.columnFromVisibleColumn($,Y.lineNumber,U);return new k(Y.lineNumber,z,Y.lineNumber,Y.column)}}return k.fromPositions(hX.getPositionAfterDeleteLeft(Y,$),Y)}static getPositionAfterDeleteLeft(J,$){if(J.column>1){let X=Eg(J.column-1,$.getLineContent(J.lineNumber));return J.with(void 0,X+1)}else if(J.lineNumber>1){let X=J.lineNumber-1;return new g(X,$.getLineMaxColumn(X))}else return J}static cut(J,$,X){let Y=[],Z=null;X.sort((Q,G)=>g.compare(Q.getStartPosition(),G.getEndPosition()));for(let Q=0,G=X.length;Q<G;Q++){let q=X[Q];if(q.isEmpty())if(J.emptySelectionClipboard){let U=q.getPosition(),z,H,j,V;if(U.lineNumber<$.getLineCount())z=U.lineNumber,H=1,j=U.lineNumber+1,V=1;else if(U.lineNumber>1&&(Z===null||Z===void 0?void 0:Z.endLineNumber)!==U.lineNumber)z=U.lineNumber-1,H=$.getLineMaxColumn(U.lineNumber-1),j=U.lineNumber,V=$.getLineMaxColumn(U.lineNumber);else z=U.lineNumber,H=1,j=U.lineNumber,V=$.getLineMaxColumn(U.lineNumber);let W=new k(z,H,j,V);if(Z=W,!W.isEmpty())Y[Q]=new K7(W,"");else Y[Q]=null}else Y[Q]=null;else Y[Q]=new K7(q,"")}return new I8(0,Y,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}var yD=w(()=>{X1();qk();IJ();LJ();Uk();i0()});class d6{static _createWord(J,$,X,Y,Z){return{start:Y,end:Z,wordType:$,nextCharClass:X}}static _findPreviousWordOnLine(J,$,X){let Y=$.getLineContent(X.lineNumber);return this._doFindPreviousWordOnLine(Y,J,X)}static _doFindPreviousWordOnLine(J,$,X){let Y=0;for(let Z=X.column-2;Z>=0;Z--){let Q=J.charCodeAt(Z),G=$.get(Q);if(G===0){if(Y===2)return this._createWord(J,Y,G,Z+1,this._findEndOfWord(J,$,Y,Z+1));Y=1}else if(G===2){if(Y===1)return this._createWord(J,Y,G,Z+1,this._findEndOfWord(J,$,Y,Z+1));Y=2}else if(G===1){if(Y!==0)return this._createWord(J,Y,G,Z+1,this._findEndOfWord(J,$,Y,Z+1))}}if(Y!==0)return this._createWord(J,Y,1,0,this._findEndOfWord(J,$,Y,0));return null}static _findEndOfWord(J,$,X,Y){let Z=J.length;for(let Q=Y;Q<Z;Q++){let G=J.charCodeAt(Q),q=$.get(G);if(q===1)return Q;if(X===1&&q===2)return Q;if(X===2&&q===0)return Q}return Z}static _findNextWordOnLine(J,$,X){let Y=$.getLineContent(X.lineNumber);return this._doFindNextWordOnLine(Y,J,X)}static _doFindNextWordOnLine(J,$,X){let Y=0,Z=J.length;for(let Q=X.column-1;Q<Z;Q++){let G=J.charCodeAt(Q),q=$.get(G);if(q===0){if(Y===2)return this._createWord(J,Y,q,this._findStartOfWord(J,$,Y,Q-1),Q);Y=1}else if(q===2){if(Y===1)return this._createWord(J,Y,q,this._findStartOfWord(J,$,Y,Q-1),Q);Y=2}else if(q===1){if(Y!==0)return this._createWord(J,Y,q,this._findStartOfWord(J,$,Y,Q-1),Q)}}if(Y!==0)return this._createWord(J,Y,1,this._findStartOfWord(J,$,Y,Z-1),Z);return null}static _findStartOfWord(J,$,X,Y){for(let Z=Y;Z>=0;Z--){let Q=J.charCodeAt(Z),G=$.get(Q);if(G===1)return Z+1;if(X===1&&G===2)return Z+1;if(X===2&&G===0)return Z+1}return 0}static moveWordLeft(J,$,X,Y){let{lineNumber:Z,column:Q}=X;if(Q===1){if(Z>1)Z=Z-1,Q=$.getLineMaxColumn(Z)}let G=d6._findPreviousWordOnLine(J,$,new g(Z,Q));if(Y===0)return new g(Z,G?G.start+1:1);if(Y===1){if(G&&G.wordType===2&&G.end-G.start===1&&G.nextCharClass===0)G=d6._findPreviousWordOnLine(J,$,new g(Z,G.start+1));return new g(Z,G?G.start+1:1)}if(Y===3){while(G&&G.wordType===2)G=d6._findPreviousWordOnLine(J,$,new g(Z,G.start+1));return new g(Z,G?G.start+1:1)}if(G&&Q<=G.end+1)G=d6._findPreviousWordOnLine(J,$,new g(Z,G.start+1));return new g(Z,G?G.end+1:1)}static _moveWordPartLeft(J,$){let X=$.lineNumber,Y=J.getLineMaxColumn(X);if($.column===1)return X>1?new g(X-1,J.getLineMaxColumn(X-1)):$;let Z=J.getLineContent(X);for(let Q=$.column-1;Q>1;Q--){let G=Z.charCodeAt(Q-2),q=Z.charCodeAt(Q-1);if(G===95&&q!==95)return new g(X,Q);if(G===45&&q!==45)return new g(X,Q);if((OG(G)||jj(G))&&zX(q))return new g(X,Q);if(zX(G)&&zX(q)){if(Q+1<Y){let U=Z.charCodeAt(Q);if(OG(U)||jj(U))return new g(X,Q)}}}return new g(X,1)}static moveWordRight(J,$,X,Y){let{lineNumber:Z,column:Q}=X,G=!1;if(Q===$.getLineMaxColumn(Z)){if(Z<$.getLineCount())G=!0,Z=Z+1,Q=1}let q=d6._findNextWordOnLine(J,$,new g(Z,Q));if(Y===2){if(q&&q.wordType===2){if(q.end-q.start===1&&q.nextCharClass===0)q=d6._findNextWordOnLine(J,$,new g(Z,q.end+1))}if(q)Q=q.end+1;else Q=$.getLineMaxColumn(Z)}else if(Y===3){if(G)Q=0;while(q&&(q.wordType===2||q.start+1<=Q))q=d6._findNextWordOnLine(J,$,new g(Z,q.end+1));if(q)Q=q.start+1;else Q=$.getLineMaxColumn(Z)}else{if(q&&!G&&Q>=q.start+1)q=d6._findNextWordOnLine(J,$,new g(Z,q.end+1));if(q)Q=q.start+1;else Q=$.getLineMaxColumn(Z)}return new g(Z,Q)}static _moveWordPartRight(J,$){let X=$.lineNumber,Y=J.getLineMaxColumn(X);if($.column===Y)return X<J.getLineCount()?new g(X+1,1):$;let Z=J.getLineContent(X);for(let Q=$.column+1;Q<Y;Q++){let G=Z.charCodeAt(Q-2),q=Z.charCodeAt(Q-1);if(G!==95&&q===95)return new g(X,Q);if(G!==45&&q===45)return new g(X,Q);if((OG(G)||jj(G))&&zX(q))return new g(X,Q);if(zX(G)&&zX(q)){if(Q+1<Y){let U=Z.charCodeAt(Q);if(OG(U)||jj(U))return new g(X,Q)}}}return new g(X,Y)}static _deleteWordLeftWhitespace(J,$){let X=J.getLineContent($.lineNumber),Y=$.column-2,Z=r9(X,Y);if(Z+1<Y)return new k($.lineNumber,Z+2,$.lineNumber,$.column);return null}static deleteWordLeft(J,$){let{wordSeparators:X,model:Y,selection:Z,whitespaceHeuristics:Q}=J;if(!Z.isEmpty())return Z;if(hX.isAutoClosingPairDelete(J.autoClosingDelete,J.autoClosingBrackets,J.autoClosingQuotes,J.autoClosingPairs.autoClosingPairsOpenByEnd,J.model,[J.selection],J.autoClosedCharacters)){let H=J.selection.getPosition();return new k(H.lineNumber,H.column-1,H.lineNumber,H.column+1)}let G=new g(Z.positionLineNumber,Z.positionColumn),q=G.lineNumber,U=G.column;if(q===1&&U===1)return null;if(Q){let H=this._deleteWordLeftWhitespace(Y,G);if(H)return H}let z=d6._findPreviousWordOnLine(X,Y,G);if($===0)if(z)U=z.start+1;else if(U>1)U=1;else q--,U=Y.getLineMaxColumn(q);else{if(z&&U<=z.end+1)z=d6._findPreviousWordOnLine(X,Y,new g(q,z.start+1));if(z)U=z.end+1;else if(U>1)U=1;else q--,U=Y.getLineMaxColumn(q)}return new k(q,U,G.lineNumber,G.column)}static deleteInsideWord(J,$,X){if(!X.isEmpty())return X;let Y=new g(X.positionLineNumber,X.positionColumn),Z=this._deleteInsideWordWhitespace($,Y);if(Z)return Z;return this._deleteInsideWordDetermineDeleteRange(J,$,Y)}static _charAtIsWhitespace(J,$){let X=J.charCodeAt($);return X===32||X===9}static _deleteInsideWordWhitespace(J,$){let X=J.getLineContent($.lineNumber),Y=X.length;if(Y===0)return null;let Z=Math.max($.column-2,0);if(!this._charAtIsWhitespace(X,Z))return null;let Q=Math.min($.column-1,Y-1);if(!this._charAtIsWhitespace(X,Q))return null;while(Z>0&&this._charAtIsWhitespace(X,Z-1))Z--;while(Q+1<Y&&this._charAtIsWhitespace(X,Q+1))Q++;return new k($.lineNumber,Z+1,$.lineNumber,Q+2)}static _deleteInsideWordDetermineDeleteRange(J,$,X){let Y=$.getLineContent(X.lineNumber),Z=Y.length;if(Z===0)if(X.lineNumber>1)return new k(X.lineNumber-1,$.getLineMaxColumn(X.lineNumber-1),X.lineNumber,1);else if(X.lineNumber<$.getLineCount())return new k(X.lineNumber,1,X.lineNumber+1,1);else return new k(X.lineNumber,1,X.lineNumber,1);let Q=(H)=>{return H.start+1<=X.column&&X.column<=H.end+1},G=(H,j)=>{return H=Math.min(H,X.column),j=Math.max(j,X.column),new k(X.lineNumber,H,X.lineNumber,j)},q=(H)=>{let j=H.start+1,V=H.end+1,W=!1;while(V-1<Z&&this._charAtIsWhitespace(Y,V-1))W=!0,V++;if(!W)while(j>1&&this._charAtIsWhitespace(Y,j-2))j--;return G(j,V)},U=d6._findPreviousWordOnLine(J,$,X);if(U&&Q(U))return q(U);let z=d6._findNextWordOnLine(J,$,X);if(z&&Q(z))return q(z);if(U&&z)return G(U.end+1,z.start+1);if(U)return G(U.start+1,U.end+1);if(z)return G(z.start+1,z.end+1);return G(1,Z+1)}static _deleteWordPartLeft(J,$){if(!$.isEmpty())return $;let X=$.getPosition(),Y=d6._moveWordPartLeft(J,X);return new k(X.lineNumber,X.column,Y.lineNumber,Y.column)}static _findFirstNonWhitespaceChar(J,$){let X=J.length;for(let Y=$;Y<X;Y++){let Z=J.charAt(Y);if(Z!==" "&&Z!=="\t")return Y}return X}static _deleteWordRightWhitespace(J,$){let X=J.getLineContent($.lineNumber),Y=$.column-1,Z=this._findFirstNonWhitespaceChar(X,Y);if(Y+1<Z)return new k($.lineNumber,$.column,$.lineNumber,Z+1);return null}static deleteWordRight(J,$){let{wordSeparators:X,model:Y,selection:Z,whitespaceHeuristics:Q}=J;if(!Z.isEmpty())return Z;let G=new g(Z.positionLineNumber,Z.positionColumn),q=G.lineNumber,U=G.column,z=Y.getLineCount(),H=Y.getLineMaxColumn(q);if(q===z&&U===H)return null;if(Q){let V=this._deleteWordRightWhitespace(Y,G);if(V)return V}let j=d6._findNextWordOnLine(X,Y,G);if($===2)if(j)U=j.end+1;else if(U<H||q===z)U=H;else if(q++,j=d6._findNextWordOnLine(X,Y,new g(q,1)),j)U=j.start+1;else U=Y.getLineMaxColumn(q);else{if(j&&U>=j.start+1)j=d6._findNextWordOnLine(X,Y,new g(q,j.end+1));if(j)U=j.start+1;else if(U<H||q===z)U=H;else if(q++,j=d6._findNextWordOnLine(X,Y,new g(q,1)),j)U=j.start+1;else U=Y.getLineMaxColumn(q)}return new k(q,U,G.lineNumber,G.column)}static _deleteWordPartRight(J,$){if(!$.isEmpty())return $;let X=$.getPosition(),Y=d6._moveWordPartRight(J,X);return new k(X.lineNumber,X.column,Y.lineNumber,Y.column)}static _createWordAtPosition(J,$,X){let Y=new k($,X.start+1,$,X.end+1);return{word:J.getValueInRange(Y),startColumn:Y.startColumn,endColumn:Y.endColumn}}static getWordAtPosition(J,$,X){let Y=DX($),Z=d6._findPreviousWordOnLine(Y,J,X);if(Z&&Z.wordType===1&&Z.start<=X.column-1&&X.column-1<=Z.end)return d6._createWordAtPosition(J,X.lineNumber,Z);let Q=d6._findNextWordOnLine(Y,J,X);if(Q&&Q.wordType===1&&Q.start<=X.column-1&&X.column-1<=Q.end)return d6._createWordAtPosition(J,X.lineNumber,Q);return null}static word(J,$,X,Y,Z){let Q=DX(J.wordSeparators),G=d6._findPreviousWordOnLine(Q,$,Z),q=d6._findNextWordOnLine(Q,$,Z);if(!Y){let V,W;if(G&&G.wordType===1&&G.start<=Z.column-1&&Z.column-1<=G.end)V=G.start+1,W=G.end+1;else if(q&&q.wordType===1&&q.start<=Z.column-1&&Z.column-1<=q.end)V=q.start+1,W=q.end+1;else{if(G)V=G.end+1;else V=1;if(q)W=q.start+1;else W=$.getLineMaxColumn(Z.lineNumber)}return new K5(new k(Z.lineNumber,V,Z.lineNumber,W),1,0,new g(Z.lineNumber,W),0)}let U,z;if(G&&G.wordType===1&&G.start<Z.column-1&&Z.column-1<G.end)U=G.start+1,z=G.end+1;else if(q&&q.wordType===1&&q.start<Z.column-1&&Z.column-1<q.end)U=q.start+1,z=q.end+1;else U=Z.column,z=Z.column;let H=Z.lineNumber,j;if(X.selectionStart.containsPosition(Z))j=X.selectionStart.endColumn;else if(Z.isBeforeOrEqual(X.selectionStart.getStartPosition())){j=U;let V=new g(H,j);if(X.selectionStart.containsPosition(V))j=X.selectionStart.endColumn}else{j=z;let V=new g(H,j);if(X.selectionStart.containsPosition(V))j=X.selectionStart.startColumn}return X.move(!0,H,j,0)}}var zk=w(()=>{X1();IJ();yD();ij();i0()});class B8{static addCursorDown(J,$,X){let Y=[],Z=0;for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];if(Y[Z++]=new P1(q.modelState,q.viewState),X)Y[Z++]=P1.fromModelState(c1.translateDown(J.cursorConfig,J.model,q.modelState));else Y[Z++]=P1.fromViewState(c1.translateDown(J.cursorConfig,J,q.viewState))}return Y}static addCursorUp(J,$,X){let Y=[],Z=0;for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];if(Y[Z++]=new P1(q.modelState,q.viewState),X)Y[Z++]=P1.fromModelState(c1.translateUp(J.cursorConfig,J.model,q.modelState));else Y[Z++]=P1.fromViewState(c1.translateUp(J.cursorConfig,J,q.viewState))}return Y}static moveToBeginningOfLine(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z];Y[Z]=this._moveToLineStart(J,G,X)}return Y}static _moveToLineStart(J,$,X){let Y=$.viewState.position.column,Z=$.modelState.position.column,Q=Y===Z,G=$.viewState.position.lineNumber,q=J.getLineFirstNonWhitespaceColumn(G);if(!Q&&Y!==q)return this._moveToLineStartByView(J,$,X);else return this._moveToLineStartByModel(J,$,X)}static _moveToLineStartByView(J,$,X){return P1.fromViewState(c1.moveToBeginningOfLine(J.cursorConfig,J,$.viewState,X))}static _moveToLineStartByModel(J,$,X){return P1.fromModelState(c1.moveToBeginningOfLine(J.cursorConfig,J.model,$.modelState,X))}static moveToEndOfLine(J,$,X,Y){let Z=[];for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];Z[Q]=this._moveToLineEnd(J,q,X,Y)}return Z}static _moveToLineEnd(J,$,X,Y){let Z=$.viewState.position,Q=J.getLineMaxColumn(Z.lineNumber),G=Z.column===Q,q=$.modelState.position,U=J.model.getLineMaxColumn(q.lineNumber),z=Q-Z.column===U-q.column;if(G||z)return this._moveToLineEndByModel(J,$,X,Y);else return this._moveToLineEndByView(J,$,X,Y)}static _moveToLineEndByView(J,$,X,Y){return P1.fromViewState(c1.moveToEndOfLine(J.cursorConfig,J,$.viewState,X,Y))}static _moveToLineEndByModel(J,$,X,Y){return P1.fromModelState(c1.moveToEndOfLine(J.cursorConfig,J.model,$.modelState,X,Y))}static expandLineSelection(J,$){let X=[];for(let Y=0,Z=$.length;Y<Z;Y++){let Q=$[Y],G=Q.modelState.selection.startLineNumber,q=J.model.getLineCount(),U=Q.modelState.selection.endLineNumber,z;if(U===q)z=J.model.getLineMaxColumn(q);else U++,z=1;X[Y]=P1.fromModelState(new K5(new k(G,1,G,1),0,0,new g(U,z),0))}return X}static moveToBeginningOfBuffer(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z];Y[Z]=P1.fromModelState(c1.moveToBeginningOfBuffer(J.cursorConfig,J.model,G.modelState,X))}return Y}static moveToEndOfBuffer(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z];Y[Z]=P1.fromModelState(c1.moveToEndOfBuffer(J.cursorConfig,J.model,G.modelState,X))}return Y}static selectAll(J,$){let X=J.model.getLineCount(),Y=J.model.getLineMaxColumn(X);return P1.fromModelState(new K5(new k(1,1,1,1),0,0,new g(X,Y),0))}static line(J,$,X,Y,Z){let Q=J.model.validatePosition(Y),G=Z?J.coordinatesConverter.validateViewPosition(new g(Z.lineNumber,Z.column),Q):J.coordinatesConverter.convertModelPositionToViewPosition(Q);if(!X){let U=J.model.getLineCount(),z=Q.lineNumber+1,H=1;if(z>U)z=U,H=J.model.getLineMaxColumn(z);return P1.fromModelState(new K5(new k(Q.lineNumber,1,z,H),2,0,new g(z,H),0))}let q=$.modelState.selectionStart.getStartPosition().lineNumber;if(Q.lineNumber<q)return P1.fromViewState($.viewState.move(!0,G.lineNumber,1,0));else if(Q.lineNumber>q){let U=J.getLineCount(),z=G.lineNumber+1,H=1;if(z>U)z=U,H=J.getLineMaxColumn(z);return P1.fromViewState($.viewState.move(!0,z,H,0))}else{let U=$.modelState.selectionStart.getEndPosition();return P1.fromModelState($.modelState.move(!0,U.lineNumber,U.column,0))}}static word(J,$,X,Y){let Z=J.model.validatePosition(Y);return P1.fromModelState(d6.word(J.cursorConfig,J.model,$.modelState,X,Z))}static cancelSelection(J,$){if(!$.modelState.hasSelection())return new P1($.modelState,$.viewState);let X=$.viewState.position.lineNumber,Y=$.viewState.position.column;return P1.fromViewState(new K5(new k(X,Y,X,Y),0,0,new g(X,Y),0))}static moveTo(J,$,X,Y,Z){if(X){if($.modelState.selectionStartKind===1)return this.word(J,$,X,Y);if($.modelState.selectionStartKind===2)return this.line(J,$,X,Y,Z)}let Q=J.model.validatePosition(Y),G=Z?J.coordinatesConverter.validateViewPosition(new g(Z.lineNumber,Z.column),Q):J.coordinatesConverter.convertModelPositionToViewPosition(Q);return P1.fromViewState($.viewState.move(X,G.lineNumber,G.column,0))}static simpleMove(J,$,X,Y,Z,Q){switch(X){case 0:if(Q===4)return this._moveHalfLineLeft(J,$,Y);else return this._moveLeft(J,$,Y,Z);case 1:if(Q===4)return this._moveHalfLineRight(J,$,Y);else return this._moveRight(J,$,Y,Z);case 2:if(Q===2)return this._moveUpByViewLines(J,$,Y,Z);else return this._moveUpByModelLines(J,$,Y,Z);case 3:if(Q===2)return this._moveDownByViewLines(J,$,Y,Z);else return this._moveDownByModelLines(J,$,Y,Z);case 4:if(Q===2)return $.map((G)=>P1.fromViewState(c1.moveToPrevBlankLine(J.cursorConfig,J,G.viewState,Y)));else return $.map((G)=>P1.fromModelState(c1.moveToPrevBlankLine(J.cursorConfig,J.model,G.modelState,Y)));case 5:if(Q===2)return $.map((G)=>P1.fromViewState(c1.moveToNextBlankLine(J.cursorConfig,J,G.viewState,Y)));else return $.map((G)=>P1.fromModelState(c1.moveToNextBlankLine(J.cursorConfig,J.model,G.modelState,Y)));case 6:return this._moveToViewMinColumn(J,$,Y);case 7:return this._moveToViewFirstNonWhitespaceColumn(J,$,Y);case 8:return this._moveToViewCenterColumn(J,$,Y);case 9:return this._moveToViewMaxColumn(J,$,Y);case 10:return this._moveToViewLastNonWhitespaceColumn(J,$,Y);default:return null}}static viewportMove(J,$,X,Y,Z){let Q=J.getCompletelyVisibleViewRange(),G=J.coordinatesConverter.convertViewRangeToModelRange(Q);switch(X){case 11:{let q=this._firstLineNumberInRange(J.model,G,Z),U=J.model.getLineFirstNonWhitespaceColumn(q);return[this._moveToModelPosition(J,$[0],Y,q,U)]}case 13:{let q=this._lastLineNumberInRange(J.model,G,Z),U=J.model.getLineFirstNonWhitespaceColumn(q);return[this._moveToModelPosition(J,$[0],Y,q,U)]}case 12:{let q=Math.round((G.startLineNumber+G.endLineNumber)/2),U=J.model.getLineFirstNonWhitespaceColumn(q);return[this._moveToModelPosition(J,$[0],Y,q,U)]}case 14:{let q=[];for(let U=0,z=$.length;U<z;U++){let H=$[U];q[U]=this.findPositionInViewportIfOutside(J,H,Q,Y)}return q}default:return null}}static findPositionInViewportIfOutside(J,$,X,Y){let Z=$.viewState.position.lineNumber;if(X.startLineNumber<=Z&&Z<=X.endLineNumber-1)return new P1($.modelState,$.viewState);else{let Q;if(Z>X.endLineNumber-1)Q=X.endLineNumber-1;else if(Z<X.startLineNumber)Q=X.startLineNumber;else Q=Z;let G=c1.vertical(J.cursorConfig,J,Z,$.viewState.position.column,$.viewState.leftoverVisibleColumns,Q,!1);return P1.fromViewState($.viewState.move(Y,G.lineNumber,G.column,G.leftoverVisibleColumns))}}static _firstLineNumberInRange(J,$,X){let Y=$.startLineNumber;if($.startColumn!==J.getLineMinColumn(Y))Y++;return Math.min($.endLineNumber,Y+X-1)}static _lastLineNumberInRange(J,$,X){let Y=$.startLineNumber;if($.startColumn!==J.getLineMinColumn(Y))Y++;return Math.max(Y,$.endLineNumber-X+1)}static _moveLeft(J,$,X,Y){return $.map((Z)=>P1.fromViewState(c1.moveLeft(J.cursorConfig,J,Z.viewState,X,Y)))}static _moveHalfLineLeft(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=Math.round(J.getLineLength(q)/2);Y[Z]=P1.fromViewState(c1.moveLeft(J.cursorConfig,J,G.viewState,X,U))}return Y}static _moveRight(J,$,X,Y){return $.map((Z)=>P1.fromViewState(c1.moveRight(J.cursorConfig,J,Z.viewState,X,Y)))}static _moveHalfLineRight(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=Math.round(J.getLineLength(q)/2);Y[Z]=P1.fromViewState(c1.moveRight(J.cursorConfig,J,G.viewState,X,U))}return Y}static _moveDownByViewLines(J,$,X,Y){let Z=[];for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];Z[Q]=P1.fromViewState(c1.moveDown(J.cursorConfig,J,q.viewState,X,Y))}return Z}static _moveDownByModelLines(J,$,X,Y){let Z=[];for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];Z[Q]=P1.fromModelState(c1.moveDown(J.cursorConfig,J.model,q.modelState,X,Y))}return Z}static _moveUpByViewLines(J,$,X,Y){let Z=[];for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];Z[Q]=P1.fromViewState(c1.moveUp(J.cursorConfig,J,q.viewState,X,Y))}return Z}static _moveUpByModelLines(J,$,X,Y){let Z=[];for(let Q=0,G=$.length;Q<G;Q++){let q=$[Q];Z[Q]=P1.fromModelState(c1.moveUp(J.cursorConfig,J.model,q.modelState,X,Y))}return Z}static _moveToViewPosition(J,$,X,Y,Z){return P1.fromViewState($.viewState.move(X,Y,Z,0))}static _moveToModelPosition(J,$,X,Y,Z){return P1.fromModelState($.modelState.move(X,Y,Z,0))}static _moveToViewMinColumn(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=J.getLineMinColumn(q);Y[Z]=this._moveToViewPosition(J,G,X,q,U)}return Y}static _moveToViewFirstNonWhitespaceColumn(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=J.getLineFirstNonWhitespaceColumn(q);Y[Z]=this._moveToViewPosition(J,G,X,q,U)}return Y}static _moveToViewCenterColumn(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=Math.round((J.getLineMaxColumn(q)+J.getLineMinColumn(q))/2);Y[Z]=this._moveToViewPosition(J,G,X,q,U)}return Y}static _moveToViewMaxColumn(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=J.getLineMaxColumn(q);Y[Z]=this._moveToViewPosition(J,G,X,q,U)}return Y}static _moveToViewLastNonWhitespaceColumn(J,$,X){let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.viewState.position.lineNumber,U=J.getLineLastNonWhitespaceColumn(q);Y[Z]=this._moveToViewPosition(J,G,X,q,U)}return Y}}var yV;var ed=w(()=>{IJ();Uk();zk();i0();(function(J){let $=function(Y){if(!z5(Y))return!1;let Z=Y;if(!N5(Z.to))return!1;if(!M8(Z.select)&&!UK(Z.select))return!1;if(!M8(Z.by)&&!N5(Z.by))return!1;if(!M8(Z.value)&&!l9(Z.value))return!1;return!0};J.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:$,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},J.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},J.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function X(Y){if(!Y.to)return null;let Z;switch(Y.to){case J.RawDirection.Left:Z=0;break;case J.RawDirection.Right:Z=1;break;case J.RawDirection.Up:Z=2;break;case J.RawDirection.Down:Z=3;break;case J.RawDirection.PrevBlankLine:Z=4;break;case J.RawDirection.NextBlankLine:Z=5;break;case J.RawDirection.WrappedLineStart:Z=6;break;case J.RawDirection.WrappedLineFirstNonWhitespaceCharacter:Z=7;break;case J.RawDirection.WrappedLineColumnCenter:Z=8;break;case J.RawDirection.WrappedLineEnd:Z=9;break;case J.RawDirection.WrappedLineLastNonWhitespaceCharacter:Z=10;break;case J.RawDirection.ViewPortTop:Z=11;break;case J.RawDirection.ViewPortBottom:Z=13;break;case J.RawDirection.ViewPortCenter:Z=12;break;case J.RawDirection.ViewPortIfOutside:Z=14;break;default:return null}let Q=0;switch(Y.by){case J.RawUnit.Line:Q=1;break;case J.RawUnit.WrappedLine:Q=2;break;case J.RawUnit.Character:Q=3;break;case J.RawUnit.HalfLine:Q=4;break}return{direction:Z,unit:Q,select:!!Y.select,value:Y.value||1}}J.parse=X})(yV||(yV={}))});function xV(J,$,X,Y){let Z=yQ($,X.startLineNumber,X.startColumn),Q=Y.getLanguageConfiguration(Z.languageId);if(!Q)return null;let G=Z.getLineContent(),q=G.substr(0,X.startColumn-1-Z.firstCharOffset),U;if(X.isEmpty())U=G.substr(X.startColumn-1-Z.firstCharOffset);else U=yQ($,X.endLineNumber,X.endColumn).getLineContent().substr(X.endColumn-1-Z.firstCharOffset);let z="";if(X.startLineNumber>1&&Z.firstCharOffset===0){let K=yQ($,X.startLineNumber-1);if(K.languageId===Z.languageId)z=K.getLineContent()}let H=Q.onEnter(J,z,q,U);if(!H)return null;let{indentAction:j,appendText:V}=H,W=H.removeText||0;if(!V)if(j===H8.Indent||j===H8.IndentOutdent)V="\t";else V="";else if(j===H8.Indent)V="\t"+V;let B=TP($,X.startLineNumber,X.startColumn);if(W)B=B.substring(0,B.length-W);return{indentAction:j,appendText:V,removeText:W,indentation:B}}var Hk=w(()=>{gG();j7()});function D3(J,$){if($<=0)return"";if(!jk[J])jk[J]=["",J];let X=jk[J];for(let Y=X.length;Y<=$;Y++)X[Y]=X[Y-1]+J;return X[$]}var mZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},uZ0=function(J,$){return function(X,Y){$(X,Y,J)}},xD,jk,nQ;var Js=w(()=>{X1();LJ();i0();o5();Hk();j7();jk=Object.create(null);nQ=xD=class{static unshiftIndent($,X,Y,Z,Q){let G=s1.visibleColumnFromColumn($,X,Y);if(Q){let q=D3(" ",Z),z=s1.prevIndentTabStop(G,Z)/Z;return D3(q,z)}else{let z=s1.prevRenderTabStop(G,Y)/Y;return D3("\t",z)}}static shiftIndent($,X,Y,Z,Q){let G=s1.visibleColumnFromColumn($,X,Y);if(Q){let q=D3(" ",Z),z=s1.nextIndentTabStop(G,Z)/Z;return D3(q,z)}else{let z=s1.nextRenderTabStop(G,Y)/Y;return D3("\t",z)}}constructor($,X,Y){this._languageConfigurationService=Y,this._opts=X,this._selection=$,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation($,X,Y){if(this._useLastEditRangeForCursorEndPosition)$.addTrackedEditOperation(X,Y);else $.addEditOperation(X,Y)}getEditOperations($,X){let Y=this._selection.startLineNumber,Z=this._selection.endLineNumber;if(this._selection.endColumn===1&&Y!==Z)Z=Z-1;let{tabSize:Q,indentSize:G,insertSpaces:q}=this._opts,U=Y===Z;if(this._opts.useTabStops){if(this._selection.isEmpty()){if(/^\s*$/.test($.getLineContent(Y)))this._useLastEditRangeForCursorEndPosition=!0}let z=0,H=0;for(let j=Y;j<=Z;j++,z=H){H=0;let V=$.getLineContent(j),W=c6(V);if(this._opts.isUnshift&&(V.length===0||W===0))continue;if(!U&&!this._opts.isUnshift&&V.length===0)continue;if(W===-1)W=V.length;if(j>1){if(s1.visibleColumnFromColumn(V,W+1,Q)%G!==0){if($.tokenization.isCheapToTokenize(j-1)){let P=xV(this._opts.autoIndent,$,new k(j-1,$.getLineMaxColumn(j-1),j-1,$.getLineMaxColumn(j-1)),this._languageConfigurationService);if(P){if(H=z,P.appendText)for(let A=0,D=P.appendText.length;A<D&&H<G;A++)if(P.appendText.charCodeAt(A)===32)H++;else break;if(P.removeText)H=Math.max(0,H-P.removeText);for(let A=0;A<H;A++){if(W===0||V.charCodeAt(W-1)!==32)break;W--}}}}}if(this._opts.isUnshift&&W===0)continue;let B;if(this._opts.isUnshift)B=xD.unshiftIndent(V,W+1,Q,G,q);else B=xD.shiftIndent(V,W+1,Q,G,q);if(this._addEditOperation(X,new k(j,1,j,W+1),B),j===Y&&!this._selection.isEmpty())this._selectionStartColumnStaysPut=this._selection.startColumn<=W+1}}else{if(!this._opts.isUnshift&&this._selection.isEmpty()&&$.getLineLength(Y)===0)this._useLastEditRangeForCursorEndPosition=!0;let z=q?D3(" ",G):"\t";for(let H=Y;H<=Z;H++){let j=$.getLineContent(H),V=c6(j);if(this._opts.isUnshift&&(j.length===0||V===0))continue;if(!U&&!this._opts.isUnshift&&j.length===0)continue;if(V===-1)V=j.length;if(this._opts.isUnshift&&V===0)continue;if(this._opts.isUnshift){V=Math.min(V,G);for(let W=0;W<V;W++)if(j.charCodeAt(W)===9){V=W+1;break}this._addEditOperation(X,new k(H,1,H,V+1),"")}else if(this._addEditOperation(X,new k(H,1,H,1),z),H===Y&&!this._selection.isEmpty())this._selectionStartColumnStaysPut=this._selection.startColumn===1}}this._selectionId=X.trackSelection(this._selection)}computeCursorState($,X){if(this._useLastEditRangeForCursorEndPosition){let Z=X.getInverseEditOperations()[0];return new p0(Z.range.endLineNumber,Z.range.endColumn,Z.range.endLineNumber,Z.range.endColumn)}let Y=X.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let Z=this._selection.startColumn;if(Y.startColumn<=Z)return Y;if(Y.getDirection()===0)return new p0(Y.startLineNumber,Z,Y.endLineNumber,Y.endColumn);return new p0(Y.endLineNumber,Y.endColumn,Y.startLineNumber,Z)}return Y}};nQ=xD=mZ0([uZ0(2,C6)],nQ)});class Vk{constructor(J,$,X){this._range=J,this._charBeforeSelection=$,this._charAfterSelection=X}getEditOperations(J,$){$.addTrackedEditOperation(new k(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),$.addTrackedEditOperation(new k(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(J,$){let X=$.getInverseEditOperations(),Y=X[0].range,Z=X[1].range;return new p0(Y.endLineNumber,Y.endColumn,Z.endLineNumber,Z.endColumn-this._charAfterSelection.length)}}class Wk{constructor(J,$,X){this._position=J,this._text=$,this._charAfter=X}getEditOperations(J,$){$.addTrackedEditOperation(new k(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(J,$){let Y=$.getInverseEditOperations()[0].range;return new p0(Y.endLineNumber,Y.startColumn,Y.endLineNumber,Y.endColumn-this._charAfter.length)}}var $s=w(()=>{i0();o5()});function cZ0(J,$,X){let Y=J.tokenization.getLanguageIdAtPosition($,0);if($>1){let Z,Q=-1;for(Z=$-1;Z>=1;Z--){if(J.tokenization.getLanguageIdAtPosition(Z,0)!==Y)return Q;let G=J.getLineContent(Z);if(X.shouldIgnore(G)||/^\s+$/.test(G)||G===""){Q=Z;continue}return Z}}return-1}function bD(J,$,X,Y=!0,Z){if(J<4)return null;let Q=Z.getLanguageConfiguration($.tokenization.getLanguageId()).indentRulesSupport;if(!Q)return null;if(X<=1)return{indentation:"",action:null};for(let U=X-1;U>0;U--){if($.getLineContent(U)!=="")break;if(U===1)return{indentation:"",action:null}}let G=cZ0($,X,Q);if(G<0)return null;else if(G<1)return{indentation:"",action:null};let q=$.getLineContent(G);if(Q.shouldIncrease(q)||Q.shouldIndentNextLine(q))return{indentation:W5(q),action:H8.Indent,line:G};else if(Q.shouldDecrease(q))return{indentation:W5(q),action:null,line:G};else{if(G===1)return{indentation:W5($.getLineContent(G)),action:null,line:G};let U=G-1,z=Q.getIndentMetadata($.getLineContent(U));if(!(z&3)&&z&4){let H=0;for(let j=U-1;j>0;j--){if(Q.shouldIndentNextLine($.getLineContent(j)))continue;H=j;break}return{indentation:W5($.getLineContent(H+1)),action:null,line:H+1}}if(Y)return{indentation:W5($.getLineContent(G)),action:null,line:G};else{for(let H=G;H>0;H--){let j=$.getLineContent(H);if(Q.shouldIncrease(j))return{indentation:W5(j),action:H8.Indent,line:H};else if(Q.shouldIndentNextLine(j)){let V=0;for(let W=H-1;W>0;W--){if(Q.shouldIndentNextLine($.getLineContent(H)))continue;V=W;break}return{indentation:W5($.getLineContent(V+1)),action:null,line:V+1}}else if(Q.shouldDecrease(j))return{indentation:W5(j),action:null,line:H}}return{indentation:W5($.getLineContent(1)),action:null,line:1}}}}function Xs(J,$,X,Y,Z){if(J<4)return null;$.tokenization.forceTokenization(X.startLineNumber);let Q=$.tokenization.getLineTokens(X.startLineNumber),G=EQ(Q,X.startColumn-1),q=G.getLineContent(),U=!1,z;if(G.firstCharOffset>0&&Q.getLanguageId(0)!==G.languageId)U=!0,z=q.substr(0,X.startColumn-1-G.firstCharOffset);else z=Q.getLineContent().substring(0,X.startColumn-1);let H;if(X.isEmpty())H=q.substr(X.startColumn-1-G.firstCharOffset);else H=yQ($,X.endLineNumber,X.endColumn).getLineContent().substr(X.endColumn-1-G.firstCharOffset);let j=Z.getLanguageConfiguration(G.languageId).indentRulesSupport;if(!j)return null;let V=z,W=W5(z),B={tokenization:{getLineTokens:(D)=>{return $.tokenization.getLineTokens(D)},getLanguageId:()=>{return $.getLanguageId()},getLanguageIdAtPosition:(D,M)=>{return $.getLanguageIdAtPosition(D,M)}},getLineContent:(D)=>{if(D===X.startLineNumber)return V;else return $.getLineContent(D)}},K=W5(Q.getLineContent()),P=bD(J,B,X.startLineNumber+1,void 0,Z);if(!P){let D=U?K:W;return{beforeEnter:D,afterEnter:D}}let A=U?K:P.indentation;if(P.action===H8.Indent)A=Y.shiftIndent(A);if(j.shouldDecrease(H))A=Y.unshiftIndent(A);return{beforeEnter:U?K:W,afterEnter:A}}function Ys(J,$,X,Y,Z,Q){if(J<4)return null;let G=yQ($,X.startLineNumber,X.startColumn);if(G.firstCharOffset)return null;let q=Q.getLanguageConfiguration(G.languageId).indentRulesSupport;if(!q)return null;let U=G.getLineContent(),z=U.substr(0,X.startColumn-1-G.firstCharOffset),H;if(X.isEmpty())H=U.substr(X.startColumn-1-G.firstCharOffset);else H=yQ($,X.endLineNumber,X.endColumn).getLineContent().substr(X.endColumn-1-G.firstCharOffset);if(!q.shouldDecrease(z+H)&&q.shouldDecrease(z+Y+H)){let j=bD(J,$,X.startLineNumber,!1,Q);if(!j)return null;let V=j.indentation;if(j.action!==H8.Indent)V=Z.unshiftIndent(V);return V}return null}var Zs=w(()=>{X1();gG();j7()});class h6{static indent(J,$,X){if($===null||X===null)return[];let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++)Y[Z]=new nQ(X[Z],{isUnshift:!1,tabSize:J.tabSize,indentSize:J.indentSize,insertSpaces:J.insertSpaces,useTabStops:J.useTabStops,autoIndent:J.autoIndent},J.languageConfigurationService);return Y}static outdent(J,$,X){let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++)Y[Z]=new nQ(X[Z],{isUnshift:!0,tabSize:J.tabSize,indentSize:J.indentSize,insertSpaces:J.insertSpaces,useTabStops:J.useTabStops,autoIndent:J.autoIndent},J.languageConfigurationService);return Y}static shiftIndent(J,$,X){return X=X||1,nQ.shiftIndent($,$.length+X,J.tabSize,J.indentSize,J.insertSpaces)}static unshiftIndent(J,$,X){return X=X||1,nQ.unshiftIndent($,$.length+X,J.tabSize,J.indentSize,J.insertSpaces)}static _distributedPaste(J,$,X,Y){let Z=[];for(let Q=0,G=X.length;Q<G;Q++)Z[Q]=new K7(X[Q],Y[Q]);return new I8(0,Z,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(J,$,X,Y,Z){let Q=[];for(let G=0,q=X.length;G<q;G++){let U=X[G],z=U.getPosition();if(Z&&!U.isEmpty())Z=!1;if(Z&&Y.indexOf(`
`)!==Y.length-1)Z=!1;if(Z){let H=new k(z.lineNumber,1,z.lineNumber,1);Q[G]=new Gk(H,Y,U,!0)}else Q[G]=new K7(U,Y)}return new I8(0,Q,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(J,$,X,Y,Z){if(Y)return null;if($.length===1)return null;if(Z&&Z.length===$.length)return Z;if(J.multiCursorPaste==="spread"){if(X.charCodeAt(X.length-1)===10)X=X.substr(0,X.length-1);if(X.charCodeAt(X.length-1)===13)X=X.substr(0,X.length-1);let Q=a9(X);if(Q.length===$.length)return Q}return null}static paste(J,$,X,Y,Z,Q){let G=this._distributePasteToCursors(J,X,Y,Z,Q);if(G)return X=X.sort(k.compareRangesUsingStarts),this._distributedPaste(J,$,X,G);else return this._simplePaste(J,$,X,Y,Z)}static _goodIndentForLine(J,$,X){let Y=null,Z="",Q=bD(J.autoIndent,$,X,!1,J.languageConfigurationService);if(Q)Y=Q.action,Z=Q.indentation;else if(X>1){let G;for(G=X-1;G>=1;G--){let z=$.getLineContent(G);if(r9(z)>=0)break}if(G<1)return null;let q=$.getLineMaxColumn(G),U=xV(J.autoIndent,$,new k(G,q,G,q),J.languageConfigurationService);if(U)Z=U.indentation+U.appendText}if(Y){if(Y===H8.Indent)Z=h6.shiftIndent(J,Z);if(Y===H8.Outdent)Z=h6.unshiftIndent(J,Z);Z=J.normalizeIndentation(Z)}if(!Z)return null;return Z}static _replaceJumpToNextIndent(J,$,X,Y){let Z="",Q=X.getStartPosition();if(J.insertSpaces){let G=J.visibleColumnFromColumn($,Q),q=J.indentSize,U=q-G%q;for(let z=0;z<U;z++)Z+=" "}else Z="\t";return new K7(X,Z,Y)}static tab(J,$,X){let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++){let G=X[Z];if(G.isEmpty()){let q=$.getLineContent(G.startLineNumber);if(/^\s*$/.test(q)&&$.tokenization.isCheapToTokenize(G.startLineNumber)){let U=this._goodIndentForLine(J,$,G.startLineNumber);U=U||"\t";let z=J.normalizeIndentation(U);if(!q.startsWith(z)){Y[Z]=new K7(new k(G.startLineNumber,1,G.startLineNumber,q.length+1),z,!0);continue}}Y[Z]=this._replaceJumpToNextIndent(J,$,G,!0)}else{if(G.startLineNumber===G.endLineNumber){let q=$.getLineMaxColumn(G.startLineNumber);if(G.startColumn!==1||G.endColumn!==q){Y[Z]=this._replaceJumpToNextIndent(J,$,G,!1);continue}}Y[Z]=new nQ(G,{isUnshift:!1,tabSize:J.tabSize,indentSize:J.indentSize,insertSpaces:J.insertSpaces,useTabStops:J.useTabStops,autoIndent:J.autoIndent},J.languageConfigurationService)}}return Y}static compositionType(J,$,X,Y,Z,Q,G,q){let U=Y.map((z)=>this._compositionType(X,z,Z,Q,G,q));return new I8(4,U,{shouldPushStackElementBefore:SD(J,4),shouldPushStackElementAfter:!1})}static _compositionType(J,$,X,Y,Z,Q){if(!$.isEmpty())return null;let G=$.getPosition(),q=Math.max(1,G.column-Y),U=Math.min(J.getLineMaxColumn(G.lineNumber),G.column+Z),z=new k(G.lineNumber,q,G.lineNumber,U);if(J.getValueInRange(z)===X&&Q===0)return null;return new rU(z,X,0,Q)}static _typeCommand(J,$,X){if(X)return new aU(J,$,!0);else return new K7(J,$,!0)}static _enter(J,$,X,Y){if(J.autoIndent===0)return h6._typeCommand(Y,`
`,X);if(!$.tokenization.isCheapToTokenize(Y.getStartPosition().lineNumber)||J.autoIndent===1){let q=$.getLineContent(Y.startLineNumber),U=W5(q).substring(0,Y.startColumn-1);return h6._typeCommand(Y,`
`+J.normalizeIndentation(U),X)}let Z=xV(J.autoIndent,$,Y,J.languageConfigurationService);if(Z){if(Z.indentAction===H8.None)return h6._typeCommand(Y,`
`+J.normalizeIndentation(Z.indentation+Z.appendText),X);else if(Z.indentAction===H8.Indent)return h6._typeCommand(Y,`
`+J.normalizeIndentation(Z.indentation+Z.appendText),X);else if(Z.indentAction===H8.IndentOutdent){let q=J.normalizeIndentation(Z.indentation),U=J.normalizeIndentation(Z.indentation+Z.appendText),z=`
`+U+`
`+q;if(X)return new aU(Y,z,!0);else return new rU(Y,z,-1,U.length-q.length,!0)}else if(Z.indentAction===H8.Outdent){let q=h6.unshiftIndent(J,Z.indentation);return h6._typeCommand(Y,`
`+J.normalizeIndentation(q+Z.appendText),X)}}let Q=$.getLineContent(Y.startLineNumber),G=W5(Q).substring(0,Y.startColumn-1);if(J.autoIndent>=4){let q=Xs(J.autoIndent,$,Y,{unshiftIndent:(U)=>{return h6.unshiftIndent(J,U)},shiftIndent:(U)=>{return h6.shiftIndent(J,U)},normalizeIndentation:(U)=>{return J.normalizeIndentation(U)}},J.languageConfigurationService);if(q){let U=J.visibleColumnFromColumn($,Y.getEndPosition()),z=Y.endColumn,H=$.getLineContent(Y.endLineNumber),j=c6(H);if(j>=0)Y=Y.setEndPosition(Y.endLineNumber,Math.max(Y.endColumn,j+1));else Y=Y.setEndPosition(Y.endLineNumber,$.getLineMaxColumn(Y.endLineNumber));if(X)return new aU(Y,`
`+J.normalizeIndentation(q.afterEnter),!0);else{let V=0;if(z<=j+1){if(!J.insertSpaces)U=Math.ceil(U/J.indentSize);V=Math.min(U+1-J.normalizeIndentation(q.afterEnter).length-1,0)}return new rU(Y,`
`+J.normalizeIndentation(q.afterEnter),0,V,!0)}}}return h6._typeCommand(Y,`
`+J.normalizeIndentation(G),X)}static _isAutoIndentType(J,$,X){if(J.autoIndent<4)return!1;for(let Y=0,Z=X.length;Y<Z;Y++)if(!$.tokenization.isCheapToTokenize(X[Y].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(J,$,X,Y){let Z=TP($,X.startLineNumber,X.startColumn),Q=Ys(J.autoIndent,$,X,Y,{shiftIndent:(G)=>{return h6.shiftIndent(J,G)},unshiftIndent:(G)=>{return h6.unshiftIndent(J,G)}},J.languageConfigurationService);if(Q===null)return null;if(Q!==J.normalizeIndentation(Z)){let G=$.getLineFirstNonWhitespaceColumn(X.startLineNumber);if(G===0)return h6._typeCommand(new k(X.startLineNumber,1,X.endLineNumber,X.endColumn),J.normalizeIndentation(Q)+Y,!1);else return h6._typeCommand(new k(X.startLineNumber,1,X.endLineNumber,X.endColumn),J.normalizeIndentation(Q)+$.getLineContent(X.startLineNumber).substring(G-1,X.startColumn-1)+Y,!1)}return null}static _isAutoClosingOvertype(J,$,X,Y,Z){if(J.autoClosingOvertype==="never")return!1;if(!J.autoClosingPairs.autoClosingPairsCloseSingleChar.has(Z))return!1;for(let Q=0,G=X.length;Q<G;Q++){let q=X[Q];if(!q.isEmpty())return!1;let U=q.getPosition(),z=$.getLineContent(U.lineNumber);if(z.charAt(U.column-1)!==Z)return!1;let j=vX(Z);if((U.column>2?z.charCodeAt(U.column-2):0)===92&&j)return!1;if(J.autoClosingOvertype==="auto"){let W=!1;for(let B=0,K=Y.length;B<K;B++){let P=Y[B];if(U.lineNumber===P.startLineNumber&&U.column===P.startColumn){W=!0;break}}if(!W)return!1}}return!0}static _runAutoClosingOvertype(J,$,X,Y,Z){let Q=[];for(let G=0,q=Y.length;G<q;G++){let z=Y[G].getPosition(),H=new k(z.lineNumber,z.column,z.lineNumber,z.column+1);Q[G]=new K7(H,Z)}return new I8(4,Q,{shouldPushStackElementBefore:SD(J,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(J,$){let X=$.charAt(0),Y=J.autoClosingPairs.autoClosingPairsOpenByStart.get(X)||[],Z=J.autoClosingPairs.autoClosingPairsCloseByStart.get(X)||[],Q=Y.some((q)=>$.startsWith(q.open)),G=Z.some((q)=>$.startsWith(q.close));return!Q&&G}static _findAutoClosingPairOpen(J,$,X,Y){let Z=J.autoClosingPairs.autoClosingPairsOpenByEnd.get(Y);if(!Z)return null;let Q=null;for(let G of Z)if(Q===null||G.open.length>Q.open.length){let q=!0;for(let U of X)if($.getValueInRange(new k(U.lineNumber,U.column-G.open.length+1,U.lineNumber,U.column))+Y!==G.open){q=!1;break}if(q)Q=G}return Q}static _findContainedAutoClosingPair(J,$){if($.open.length<=1)return null;let X=$.close.charAt($.close.length-1),Y=J.autoClosingPairs.autoClosingPairsCloseByEnd.get(X)||[],Z=null;for(let Q of Y)if(Q.open!==$.open&&$.open.includes(Q.open)&&$.close.endsWith(Q.close)){if(!Z||Q.open.length>Z.open.length)Z=Q}return Z}static _getAutoClosingPairClose(J,$,X,Y,Z){for(let W of X)if(!W.isEmpty())return null;let Q=X.map((W)=>{let B=W.getPosition();if(Z)return{lineNumber:B.lineNumber,beforeColumn:B.column-Y.length,afterColumn:B.column};else return{lineNumber:B.lineNumber,beforeColumn:B.column,afterColumn:B.column}}),G=this._findAutoClosingPairOpen(J,$,Q.map((W)=>new g(W.lineNumber,W.beforeColumn)),Y);if(!G)return null;let q,U;if(vX(Y))q=J.autoClosingQuotes,U=J.shouldAutoCloseBefore.quote;else if(J.blockCommentStartToken?G.open.includes(J.blockCommentStartToken):!1)q=J.autoClosingComments,U=J.shouldAutoCloseBefore.comment;else q=J.autoClosingBrackets,U=J.shouldAutoCloseBefore.bracket;if(q==="never")return null;let H=this._findContainedAutoClosingPair(J,G),j=H?H.close:"",V=!0;for(let W of Q){let{lineNumber:B,beforeColumn:K,afterColumn:P}=W,A=$.getLineContent(B),D=A.substring(0,K-1),M=A.substring(P-1);if(!M.startsWith(j))V=!1;if(M.length>0){let T=M.charAt(0);if(!h6._isBeforeClosingBrace(J,M)&&!U(T))return null}if(G.open.length===1&&(Y==="'"||Y==='"')&&q!=="always"){let T=DX(J.wordSeparators);if(D.length>0){let S=D.charCodeAt(D.length-1);if(T.get(S)===0)return null}}if(!$.tokenization.isCheapToTokenize(B))return null;$.tokenization.forceTokenization(B);let R=$.tokenization.getLineTokens(B),O=EQ(R,K-1);if(!G.shouldAutoClose(O,K-O.firstCharOffset))return null;let N=G.findNeutralCharacter();if(N){let T=$.tokenization.getTokenTypeIfInsertingCharacter(B,K,N);if(!G.isOK(T))return null}}if(V)return G.close.substring(0,G.close.length-j.length);else return G.close}static _runAutoClosingOpenCharType(J,$,X,Y,Z,Q,G){let q=[];for(let U=0,z=Y.length;U<z;U++){let H=Y[U];q[U]=new CD(H,Z,!Q,G)}return new I8(4,q,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(J,$){if(vX($))return J.autoSurround==="quotes"||J.autoSurround==="languageDefined";else return J.autoSurround==="brackets"||J.autoSurround==="languageDefined"}static _isSurroundSelectionType(J,$,X,Y){if(!h6._shouldSurroundChar(J,Y)||!J.surroundingPairs.hasOwnProperty(Y))return!1;let Z=vX(Y);for(let Q of X){if(Q.isEmpty())return!1;let G=!0;for(let q=Q.startLineNumber;q<=Q.endLineNumber;q++){let U=$.getLineContent(q),z=q===Q.startLineNumber?Q.startColumn-1:0,H=q===Q.endLineNumber?Q.endColumn-1:U.length,j=U.substring(z,H);if(/[^ \t]/.test(j)){G=!1;break}}if(G)return!1;if(Z&&Q.startLineNumber===Q.endLineNumber&&Q.startColumn+1===Q.endColumn){let q=$.getValueInRange(Q);if(vX(q))return!1}}return!0}static _runSurroundSelectionType(J,$,X,Y,Z){let Q=[];for(let G=0,q=Y.length;G<q;G++){let U=Y[G],z=$.surroundingPairs[Z];Q[G]=new Vk(U,Z,z)}return new I8(0,Q,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(J,$,X){if(X.length===1&&$.tokenization.isCheapToTokenize(X[0].getEndPosition().lineNumber))return!0;return!1}static _typeInterceptorElectricChar(J,$,X,Y,Z){if(!$.electricChars.hasOwnProperty(Z)||!Y.isEmpty())return null;let Q=Y.getPosition();X.tokenization.forceTokenization(Q.lineNumber);let G=X.tokenization.getLineTokens(Q.lineNumber),q;try{q=$.onElectricCharacter(Z,G,Q.column)}catch(U){return $1(U),null}if(!q)return null;if(q.matchOpenBracket){let U=(G.getLineContent()+Z).lastIndexOf(q.matchOpenBracket)+1,z=X.bracketPairs.findMatchingBracketUp(q.matchOpenBracket,{lineNumber:Q.lineNumber,column:U},500);if(z){if(z.startLineNumber===Q.lineNumber)return null;let H=X.getLineContent(z.startLineNumber),j=W5(H),V=$.normalizeIndentation(j),W=X.getLineContent(Q.lineNumber),B=X.getLineFirstNonWhitespaceColumn(Q.lineNumber)||Q.column,K=W.substring(B-1,Q.column-1),P=V+K+Z,A=new k(Q.lineNumber,1,Q.lineNumber,Q.column),D=new K7(A,P);return new I8(Bk(P,J),[D],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(J,$,X,Y,Z,Q){if(!Y)return null;let G=null;for(let H of Y)if(G===null)G=H.insertedText;else if(G!==H.insertedText)return null;if(!G||G.length!==1)return null;let q=G,U=!1;for(let H of Y)if(H.deletedText.length!==0){U=!0;break}if(U){if(!h6._shouldSurroundChar($,q)||!$.surroundingPairs.hasOwnProperty(q))return null;let H=vX(q);for(let W of Y){if(W.deletedSelectionStart!==0||W.deletedSelectionEnd!==W.deletedText.length)return null;if(/^[ \t]+$/.test(W.deletedText))return null;if(H&&vX(W.deletedText))return null}let j=[];for(let W of Z){if(!W.isEmpty())return null;j.push(W.getPosition())}if(j.length!==Y.length)return null;let V=[];for(let W=0,B=j.length;W<B;W++)V.push(new Wk(j[W],Y[W].deletedText,$.surroundingPairs[q]));return new I8(4,V,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype($,X,Z,Q,q)){let H=Z.map((j)=>new K7(new k(j.positionLineNumber,j.positionColumn,j.positionLineNumber,j.positionColumn+1),"",!1));return new I8(4,H,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let z=this._getAutoClosingPairClose($,X,Z,q,!0);if(z!==null)return this._runAutoClosingOpenCharType(J,$,X,Z,q,!0,z);return null}static typeWithInterceptors(J,$,X,Y,Z,Q,G){if(!J&&G===`
`){let z=[];for(let H=0,j=Z.length;H<j;H++)z[H]=h6._enter(X,Y,!1,Z[H]);return new I8(4,z,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!J&&this._isAutoIndentType(X,Y,Z)){let z=[],H=!1;for(let j=0,V=Z.length;j<V;j++)if(z[j]=this._runAutoIndentType(X,Y,Z[j],G),!z[j]){H=!0;break}if(!H)return new I8(4,z,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(X,Y,Z,Q,G))return this._runAutoClosingOvertype($,X,Y,Z,G);if(!J){let z=this._getAutoClosingPairClose(X,Y,Z,G,!1);if(z)return this._runAutoClosingOpenCharType($,X,Y,Z,G,!1,z)}if(!J&&this._isSurroundSelectionType(X,Y,Z,G))return this._runSurroundSelectionType($,X,Y,Z,G);if(!J&&this._isTypeInterceptorElectricChar(X,Y,Z)){let z=this._typeInterceptorElectricChar($,X,Y,Z[0],G);if(z)return z}let q=[];for(let z=0,H=Z.length;z<H;z++)q[z]=new K7(Z[z],G);let U=Bk(G,$);return new I8(U,q,{shouldPushStackElementBefore:SD($,U),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(J,$,X,Y,Z){let Q=[];for(let q=0,U=Y.length;q<U;q++)Q[q]=new K7(Y[q],Z);let G=Bk(Z,J);return new I8(G,Q,{shouldPushStackElementBefore:SD(J,G),shouldPushStackElementAfter:!1})}static lineInsertBefore(J,$,X){if($===null||X===null)return[];let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++){let G=X[Z].positionLineNumber;if(G===1)Y[Z]=new aU(new k(1,1,1,1),`
`);else{G--;let q=$.getLineMaxColumn(G);Y[Z]=this._enter(J,$,!1,new k(G,q,G,q))}}return Y}static lineInsertAfter(J,$,X){if($===null||X===null)return[];let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++){let G=X[Z].positionLineNumber,q=$.getLineMaxColumn(G);Y[Z]=this._enter(J,$,!1,new k(G,q,G,q))}return Y}static lineBreakInsert(J,$,X){let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++)Y[Z]=this._enter(J,$,!0,X[Z]);return Y}}class Fk{constructor(J,$,X,Y,Z,Q){this.deletedText=J,this.deletedSelectionStart=$,this.deletedSelectionEnd=X,this.insertedText=Y,this.insertedSelectionStart=Z,this.insertedSelectionEnd=Q}}function Bk(J,$){if(J===" ")return $===5||$===6?6:5;return 4}function SD(J,$){if(Gs(J)&&!Gs($))return!0;if(J===5)return!1;return Qs(J)!==Qs($)}function Qs(J){return J===6||J===5?"space":J}function Gs(J){return J===4||J===5||J===6}var CD;var Kk=w(()=>{O1();X1();qk();Js();$s();IJ();ij();i0();gG();j7();Zs();Hk();CD=class CD extends rU{constructor(J,$,X,Y){super(J,(X?$:"")+Y,0,-Y.length);this._openCharacter=$,this._closeCharacter=Y,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(J,$){let Y=$.getInverseEditOperations()[0].range;return this.closeCharacterRange=new k(Y.startLineNumber,Y.endColumn-this._closeCharacter.length,Y.endLineNumber,Y.endColumn),this.enclosingRange=new k(Y.startLineNumber,Y.endColumn-this._openCharacter.length-this._closeCharacter.length,Y.endLineNumber,Y.endColumn),super.computeCursorState(J,$)}}});var Z0;var FZ=w(()=>{c0();t1();(function(J){J.editorSimpleInput=new A0("editorSimpleInput",!1,!0),J.editorTextFocus=new A0("editorTextFocus",!1,F("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),J.focus=new A0("editorFocus",!1,F("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),J.textInputFocus=new A0("textInputFocus",!1,F("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),J.readOnly=new A0("editorReadonly",!1,F("editorReadonly","Whether the editor is read-only")),J.inDiffEditor=new A0("inDiffEditor",!1,F("inDiffEditor","Whether the context is a diff editor")),J.isEmbeddedDiffEditor=new A0("isEmbeddedDiffEditor",!1,F("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),J.inMultiDiffEditor=new A0("inMultiDiffEditor",!1,F("inMultiDiffEditor","Whether the context is a multi diff editor")),J.multiDiffEditorAllCollapsed=new A0("multiDiffEditorAllCollapsed",void 0,F("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),J.hasChanges=new A0("diffEditorHasChanges",!1,F("diffEditorHasChanges","Whether the diff editor has changes")),J.comparingMovedCode=new A0("comparingMovedCode",!1,F("comparingMovedCode","Whether a moved code block is selected for comparison")),J.accessibleDiffViewerVisible=new A0("accessibleDiffViewerVisible",!1,F("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),J.diffEditorRenderSideBySideInlineBreakpointReached=new A0("diffEditorRenderSideBySideInlineBreakpointReached",!1,F("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),J.columnSelection=new A0("editorColumnSelection",!1,F("editorColumnSelection","Whether `editor.columnSelection` is enabled")),J.writable=J.readOnly.toNegated(),J.hasNonEmptySelection=new A0("editorHasSelection",!1,F("editorHasSelection","Whether the editor has text selected")),J.hasOnlyEmptySelection=J.hasNonEmptySelection.toNegated(),J.hasMultipleSelections=new A0("editorHasMultipleSelections",!1,F("editorHasMultipleSelections","Whether the editor has multiple selections")),J.hasSingleSelection=J.hasMultipleSelections.toNegated(),J.tabMovesFocus=new A0("editorTabMovesFocus",!1,F("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),J.tabDoesNotMoveFocus=J.tabMovesFocus.toNegated(),J.isInWalkThroughSnippet=new A0("isInEmbeddedEditor",!1,!0),J.canUndo=new A0("canUndo",!1,!0),J.canRedo=new A0("canRedo",!1,!0),J.hoverVisible=new A0("editorHoverVisible",!1,F("editorHoverVisible","Whether the editor hover is visible")),J.hoverFocused=new A0("editorHoverFocused",!1,F("editorHoverFocused","Whether the editor hover is focused")),J.stickyScrollFocused=new A0("stickyScrollFocused",!1,F("stickyScrollFocused","Whether the sticky scroll is focused")),J.stickyScrollVisible=new A0("stickyScrollVisible",!1,F("stickyScrollVisible","Whether the sticky scroll is visible")),J.standaloneColorPickerVisible=new A0("standaloneColorPickerVisible",!1,F("standaloneColorPickerVisible","Whether the standalone color picker is visible")),J.standaloneColorPickerFocused=new A0("standaloneColorPickerFocused",!1,F("standaloneColorPickerFocused","Whether the standalone color picker is focused")),J.inCompositeEditor=new A0("inCompositeEditor",void 0,F("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),J.notInCompositeEditor=J.inCompositeEditor.toNegated(),J.languageId=new A0("editorLangId","",F("editorLangId","The language identifier of the editor")),J.hasCompletionItemProvider=new A0("editorHasCompletionItemProvider",!1,F("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),J.hasCodeActionsProvider=new A0("editorHasCodeActionsProvider",!1,F("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),J.hasCodeLensProvider=new A0("editorHasCodeLensProvider",!1,F("editorHasCodeLensProvider","Whether the editor has a code lens provider")),J.hasDefinitionProvider=new A0("editorHasDefinitionProvider",!1,F("editorHasDefinitionProvider","Whether the editor has a definition provider")),J.hasDeclarationProvider=new A0("editorHasDeclarationProvider",!1,F("editorHasDeclarationProvider","Whether the editor has a declaration provider")),J.hasImplementationProvider=new A0("editorHasImplementationProvider",!1,F("editorHasImplementationProvider","Whether the editor has an implementation provider")),J.hasTypeDefinitionProvider=new A0("editorHasTypeDefinitionProvider",!1,F("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),J.hasHoverProvider=new A0("editorHasHoverProvider",!1,F("editorHasHoverProvider","Whether the editor has a hover provider")),J.hasDocumentHighlightProvider=new A0("editorHasDocumentHighlightProvider",!1,F("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),J.hasDocumentSymbolProvider=new A0("editorHasDocumentSymbolProvider",!1,F("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),J.hasReferenceProvider=new A0("editorHasReferenceProvider",!1,F("editorHasReferenceProvider","Whether the editor has a reference provider")),J.hasRenameProvider=new A0("editorHasRenameProvider",!1,F("editorHasRenameProvider","Whether the editor has a rename provider")),J.hasSignatureHelpProvider=new A0("editorHasSignatureHelpProvider",!1,F("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),J.hasInlayHintsProvider=new A0("editorHasInlayHintsProvider",!1,F("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),J.hasDocumentFormattingProvider=new A0("editorHasDocumentFormattingProvider",!1,F("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),J.hasDocumentSelectionFormattingProvider=new A0("editorHasDocumentSelectionFormattingProvider",!1,F("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),J.hasMultipleDocumentFormattingProvider=new A0("editorHasMultipleDocumentFormattingProvider",!1,F("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),J.hasMultipleDocumentSelectionFormattingProvider=new A0("editorHasMultipleDocumentSelectionFormattingProvider",!1,F("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Z0||(Z0={}))});class vD{constructor(J){J.addImplementation(1e4,"code-editor",($,X)=>{let Y=$.get(X6).getFocusedCodeEditor();if(Y&&Y.hasTextFocus())return this._runEditorCommand($,Y,X);return!1}),J.addImplementation(1000,"generic-dom-input-textarea",($,X)=>{let Y=B5();if(Y&&["input","textarea"].indexOf(Y.tagName.toLowerCase())>=0)return this.runDOMCommand(Y),!0;return!1}),J.addImplementation(0,"generic-dom",($,X)=>{let Y=$.get(X6).getActiveCodeEditor();if(Y)return Y.focus(),this._runEditorCommand($,Y,X);return!1})}_runEditorCommand(J,$,X){let Y=this.runEditorCommand(J,$,X);if(Y)return Y;return!0}}function nU(J,$){z$.registerKeybindingRule({id:J,primary:$,when:lZ0,weight:S1+1})}function qs(J){return J.register(),J}function R3(J,$){qs(new Ak("default:"+J,J)),qs(new Ak(J,J,$))}var S1=0,f6,y8,iU,c5,lZ0,Us,Ak;var zs=w(()=>{c0();e7();gQ();L4();i9();td();IJ();yD();ed();Kk();i0();FZ();t1();oq();T0();f6=class f6 extends R9{runEditorCommand(J,$,X){let Y=$._getViewModel();if(!Y)return;this.runCoreEditorCommand(Y,X||{})}};(function(J){let $=function(Y){if(!z5(Y))return!1;let Z=Y;if(!N5(Z.to))return!1;if(!M8(Z.by)&&!N5(Z.by))return!1;if(!M8(Z.value)&&!l9(Z.value))return!1;if(!M8(Z.revealCursor)&&!UK(Z.revealCursor))return!1;return!0};J.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:$,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},J.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},J.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function X(Y){let Z;switch(Y.to){case J.RawDirection.Up:Z=1;break;case J.RawDirection.Right:Z=2;break;case J.RawDirection.Down:Z=3;break;case J.RawDirection.Left:Z=4;break;default:return null}let Q;switch(Y.by){case J.RawUnit.Line:Q=1;break;case J.RawUnit.WrappedLine:Q=2;break;case J.RawUnit.Page:Q=3;break;case J.RawUnit.HalfPage:Q=4;break;case J.RawUnit.Editor:Q=5;break;case J.RawUnit.Column:Q=6;break;default:Q=2}let G=Math.floor(Y.value||1),q=!!Y.revealCursor;return{direction:Z,unit:Q,value:G,revealCursor:q,select:!!Y.select}}J.parse=X})(y8||(y8={}));(function(J){let $=function(X){if(!z5(X))return!1;let Y=X;if(!l9(Y.lineNumber)&&!N5(Y.lineNumber))return!1;if(!M8(Y.at)&&!N5(Y.at))return!1;return!0};J.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:$,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},J.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(iU||(iU={}));(function(J){class $ extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){if(!D.position)return;if(A.model.pushStackElement(),A.setCursorStates(D.source,3,[B8.moveTo(A,A.getPrimaryCursorState(),this._inSelectionMode,D.position,D.viewPosition)])&&D.revealType!==2)A.revealPrimaryCursor(D.source,!0,!0)}}J.MoveTo=I0(new $({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),J.MoveToSelect=I0(new $({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class X extends f6{runCoreEditorCommand(A,D){A.model.pushStackElement();let M=this._getColumnSelectResult(A,A.getPrimaryCursorState(),A.getCursorColumnSelectData(),D);if(M===null)return;if(A.setCursorStates(D.source,3,M.viewStates.map((R)=>P1.fromViewState(R))),A.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:M.fromLineNumber,fromViewVisualColumn:M.fromVisualColumn,toViewLineNumber:M.toLineNumber,toViewVisualColumn:M.toVisualColumn}),M.reversed)A.revealTopMostCursor(D.source);else A.revealBottomMostCursor(D.source)}}J.ColumnSelect=I0(new class extends X{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(A,D,M,R){if(typeof R.position>"u"||typeof R.viewPosition>"u"||typeof R.mouseColumn>"u")return null;let O=A.model.validatePosition(R.position),N=A.coordinatesConverter.validateViewPosition(new g(R.viewPosition.lineNumber,R.viewPosition.column),O),T=R.doColumnSelect?M.fromViewLineNumber:N.lineNumber,S=R.doColumnSelect?M.fromViewVisualColumn:R.mouseColumn-1;return iQ.columnSelect(A.cursorConfig,A,T,S,N.lineNumber,R.mouseColumn-1)}}),J.CursorColumnSelectLeft=I0(new class extends X{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(A,D,M,R){return iQ.columnSelectLeft(A.cursorConfig,A,M)}}),J.CursorColumnSelectRight=I0(new class extends X{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(A,D,M,R){return iQ.columnSelectRight(A.cursorConfig,A,M)}});class Y extends X{constructor(A){super(A);this._isPaged=A.isPaged}_getColumnSelectResult(A,D,M,R){return iQ.columnSelectUp(A.cursorConfig,A,M,this._isPaged)}}J.CursorColumnSelectUp=I0(new Y({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3600,linux:{primary:0}}})),J.CursorColumnSelectPageUp=I0(new Y({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3595,linux:{primary:0}}}));class Z extends X{constructor(A){super(A);this._isPaged=A.isPaged}_getColumnSelectResult(A,D,M,R){return iQ.columnSelectDown(A.cursorConfig,A,M,this._isPaged)}}J.CursorColumnSelectDown=I0(new Z({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3602,linux:{primary:0}}})),J.CursorColumnSelectPageDown=I0(new Z({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3596,linux:{primary:0}}}));class Q extends f6{constructor(){super({id:"cursorMove",precondition:void 0,metadata:yV.metadata})}runCoreEditorCommand(A,D){let M=yV.parse(D);if(!M)return;this._runCursorMove(A,D.source,M)}_runCursorMove(A,D,M){A.model.pushStackElement(),A.setCursorStates(D,3,Q._move(A,A.getCursorStates(),M)),A.revealPrimaryCursor(D,!0)}static _move(A,D,M){let{select:R,value:O}=M;switch(M.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return B8.simpleMove(A,D,M.direction,R,O,M.unit);case 11:case 13:case 12:case 14:return B8.viewportMove(A,D,M.direction,R,O);default:return null}}}J.CursorMoveImpl=Q,J.CursorMove=I0(new Q);class G extends f6{constructor(A){super(A);this._staticArgs=A.args}runCoreEditorCommand(A,D){let M=this._staticArgs;if(this._staticArgs.value===-1)M={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:D.pageSize||A.cursorConfig.pageSize};A.model.pushStackElement(),A.setCursorStates(D.source,3,B8.simpleMove(A,A.getCursorStates(),M.direction,M.select,M.value,M.unit)),A.revealPrimaryCursor(D.source,!0)}}J.CursorLeft=I0(new G({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),J.CursorLeftSelect=I0(new G({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1039}})),J.CursorRight=I0(new G({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),J.CursorRightSelect=I0(new G({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1041}})),J.CursorUp=I0(new G({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),J.CursorUpSelect=I0(new G({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),J.CursorPageUp=I0(new G({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:11}})),J.CursorPageUpSelect=I0(new G({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1035}})),J.CursorDown=I0(new G({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),J.CursorDownSelect=I0(new G({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),J.CursorPageDown=I0(new G({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:12}})),J.CursorPageDownSelect=I0(new G({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1036}})),J.CreateCursor=I0(new class extends f6{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(A,D){if(!D.position)return;let M;if(D.wholeLine)M=B8.line(A,A.getPrimaryCursorState(),!1,D.position,D.viewPosition);else M=B8.moveTo(A,A.getPrimaryCursorState(),!1,D.position,D.viewPosition);let R=A.getCursorStates();if(R.length>1){let O=M.modelState?M.modelState.position:null,N=M.viewState?M.viewState.position:null;for(let T=0,S=R.length;T<S;T++){let v=R[T];if(O&&!v.modelState.selection.containsPosition(O))continue;if(N&&!v.viewState.selection.containsPosition(N))continue;R.splice(T,1),A.model.pushStackElement(),A.setCursorStates(D.source,3,R);return}}R.push(M),A.model.pushStackElement(),A.setCursorStates(D.source,3,R)}}),J.LastCursorMoveToSelect=I0(new class extends f6{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(A,D){if(!D.position)return;let M=A.getLastAddedCursorIndex(),R=A.getCursorStates(),O=R.slice(0);O[M]=B8.moveTo(A,R[M],!0,D.position,D.viewPosition),A.model.pushStackElement(),A.setCursorStates(D.source,3,O)}});class q extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,B8.moveToBeginningOfLine(A,A.getCursorStates(),this._inSelectionMode)),A.revealPrimaryCursor(D.source,!0)}}J.CursorHome=I0(new q({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),J.CursorHomeSelect=I0(new q({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class U extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,this._exec(A.getCursorStates())),A.revealPrimaryCursor(D.source,!0)}_exec(A){let D=[];for(let M=0,R=A.length;M<R;M++){let O=A[M],N=O.modelState.position.lineNumber;D[M]=P1.fromModelState(O.modelState.move(this._inSelectionMode,N,1,0))}return D}}J.CursorLineStart=I0(new U({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:0,mac:{primary:287}}})),J.CursorLineStartSelect=I0(new U({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:0,mac:{primary:1311}}}));class z extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,B8.moveToEndOfLine(A,A.getCursorStates(),this._inSelectionMode,D.sticky||!1)),A.revealPrimaryCursor(D.source,!0)}}J.CursorEnd=I0(new z({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:S1,kbExpr:Z0.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:F("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),J.CursorEndSelect=I0(new z({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:S1,kbExpr:Z0.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:F("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class H extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,this._exec(A,A.getCursorStates())),A.revealPrimaryCursor(D.source,!0)}_exec(A,D){let M=[];for(let R=0,O=D.length;R<O;R++){let N=D[R],T=N.modelState.position.lineNumber,S=A.model.getLineMaxColumn(T);M[R]=P1.fromModelState(N.modelState.move(this._inSelectionMode,T,S,0))}return M}}J.CursorLineEnd=I0(new H({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:0,mac:{primary:291}}})),J.CursorLineEndSelect=I0(new H({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:0,mac:{primary:1315}}}));class j extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,B8.moveToBeginningOfBuffer(A,A.getCursorStates(),this._inSelectionMode)),A.revealPrimaryCursor(D.source,!0)}}J.CursorTop=I0(new j({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:2062,mac:{primary:2064}}})),J.CursorTopSelect=I0(new j({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3086,mac:{primary:3088}}}));class V extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,B8.moveToEndOfBuffer(A,A.getCursorStates(),this._inSelectionMode)),A.revealPrimaryCursor(D.source,!0)}}J.CursorBottom=I0(new V({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:2061,mac:{primary:2066}}})),J.CursorBottomSelect=I0(new V({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:3085,mac:{primary:3090}}}));class W extends f6{constructor(){super({id:"editorScroll",precondition:void 0,metadata:y8.metadata})}determineScrollMethod(A){let D=[6],M=[1,2,3,4,5,6],R=[4,2],O=[1,3];if(D.includes(A.unit)&&R.includes(A.direction))return this._runHorizontalEditorScroll.bind(this);if(M.includes(A.unit)&&O.includes(A.direction))return this._runVerticalEditorScroll.bind(this);return null}runCoreEditorCommand(A,D){let M=y8.parse(D);if(!M)return;let R=this.determineScrollMethod(M);if(!R)return;R(A,D.source,M)}_runVerticalEditorScroll(A,D,M){let R=this._computeDesiredScrollTop(A,M);if(M.revealCursor){let O=A.getCompletelyVisibleViewRangeAtScrollTop(R);A.setCursorStates(D,3,[B8.findPositionInViewportIfOutside(A,A.getPrimaryCursorState(),O,M.select)])}A.viewLayout.setScrollPosition({scrollTop:R},0)}_computeDesiredScrollTop(A,D){if(D.unit===1){let O=A.viewLayout.getFutureViewport(),N=A.getCompletelyVisibleViewRangeAtScrollTop(O.top),T=A.coordinatesConverter.convertViewRangeToModelRange(N),S;if(D.direction===1)S=Math.max(1,T.startLineNumber-D.value);else S=Math.min(A.model.getLineCount(),T.startLineNumber+D.value);let v=A.coordinatesConverter.convertModelPositionToViewPosition(new g(S,1));return A.viewLayout.getVerticalOffsetForLineNumber(v.lineNumber)}if(D.unit===5){let O=0;if(D.direction===3)O=A.model.getLineCount()-A.cursorConfig.pageSize;return A.viewLayout.getVerticalOffsetForLineNumber(O)}let M;if(D.unit===3)M=A.cursorConfig.pageSize*D.value;else if(D.unit===4)M=Math.round(A.cursorConfig.pageSize/2)*D.value;else M=D.value;let R=(D.direction===1?-1:1)*M;return A.viewLayout.getCurrentScrollTop()+R*A.cursorConfig.lineHeight}_runHorizontalEditorScroll(A,D,M){let R=this._computeDesiredScrollLeft(A,M);A.viewLayout.setScrollPosition({scrollLeft:R},0)}_computeDesiredScrollLeft(A,D){let M=(D.direction===4?-1:1)*D.value;return A.viewLayout.getCurrentScrollLeft()+M*A.cursorConfig.typicalHalfwidthCharacterWidth}}J.EditorScrollImpl=W,J.EditorScroll=I0(new W),J.ScrollLineUp=I0(new class extends f6{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Up,by:y8.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollPageUp=I0(new class extends f6{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Up,by:y8.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollEditorTop=I0(new class extends f6{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Up,by:y8.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollLineDown=I0(new class extends f6{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Down,by:y8.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollPageDown=I0(new class extends f6{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Down,by:y8.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollEditorBottom=I0(new class extends f6{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Down,by:y8.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollLeft=I0(new class extends f6{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Left,by:y8.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:D.source})}}),J.ScrollRight=I0(new class extends f6{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus}})}runCoreEditorCommand(A,D){J.EditorScroll.runCoreEditorCommand(A,{to:y8.RawDirection.Right,by:y8.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:D.source})}});class B extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){if(!D.position)return;if(A.model.pushStackElement(),A.setCursorStates(D.source,3,[B8.word(A,A.getPrimaryCursorState(),this._inSelectionMode,D.position)]),D.revealType!==2)A.revealPrimaryCursor(D.source,!0,!0)}}J.WordSelect=I0(new B({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),J.WordSelectDrag=I0(new B({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),J.LastCursorWordSelect=I0(new class extends f6{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(A,D){if(!D.position)return;let M=A.getLastAddedCursorIndex(),R=A.getCursorStates(),O=R.slice(0),N=R[M];O[M]=B8.word(A,N,N.modelState.hasSelection(),D.position),A.model.pushStackElement(),A.setCursorStates(D.source,3,O)}});class K extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){if(!D.position)return;if(A.model.pushStackElement(),A.setCursorStates(D.source,3,[B8.line(A,A.getPrimaryCursorState(),this._inSelectionMode,D.position,D.viewPosition)]),D.revealType!==2)A.revealPrimaryCursor(D.source,!1,!0)}}J.LineSelect=I0(new K({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),J.LineSelectDrag=I0(new K({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class P extends f6{constructor(A){super(A);this._inSelectionMode=A.inSelectionMode}runCoreEditorCommand(A,D){if(!D.position)return;let M=A.getLastAddedCursorIndex(),R=A.getCursorStates(),O=R.slice(0);O[M]=B8.line(A,R[M],this._inSelectionMode,D.position,D.viewPosition),A.model.pushStackElement(),A.setCursorStates(D.source,3,O)}}J.LastCursorLineSelect=I0(new P({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),J.LastCursorLineSelectDrag=I0(new P({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),J.CancelSelection=I0(new class extends f6{constructor(){super({id:"cancelSelection",precondition:Z0.hasNonEmptySelection,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,[B8.cancelSelection(A,A.getPrimaryCursorState())]),A.revealPrimaryCursor(D.source,!0)}}),J.RemoveSecondaryCursors=I0(new class extends f6{constructor(){super({id:"removeSecondaryCursors",precondition:Z0.hasMultipleSelections,kbOpts:{weight:S1+1,kbExpr:Z0.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates(D.source,3,[A.getPrimaryCursorState()]),A.revealPrimaryCursor(D.source,!0),_X(F("removedCursor","Removed secondary cursors"))}}),J.RevealLine=I0(new class extends f6{constructor(){super({id:"revealLine",precondition:void 0,metadata:iU.metadata})}runCoreEditorCommand(A,D){let M=D,R=M.lineNumber||0,O=typeof R==="number"?R+1:parseInt(R)+1;if(O<1)O=1;let N=A.model.getLineCount();if(O>N)O=N;let T=new k(O,1,O,A.model.getLineMaxColumn(O)),S=0;if(M.at)switch(M.at){case iU.RawAtArgument.Top:S=3;break;case iU.RawAtArgument.Center:S=1;break;case iU.RawAtArgument.Bottom:S=4;break;default:break}let v=A.coordinatesConverter.convertModelRangeToViewRange(T);A.revealRange(D.source,!1,v,S,0)}}),J.SelectAll=new class extends vD{constructor(){super(Sp)}runDOMCommand(A){if(U8)A.focus(),A.select();A.ownerDocument.execCommand("selectAll")}runEditorCommand(A,D,M){let R=D._getViewModel();if(!R)return;this.runCoreEditorCommand(R,M)}runCoreEditorCommand(A,D){A.model.pushStackElement(),A.setCursorStates("keyboard",3,[B8.selectAll(A,A.getPrimaryCursorState())])}},J.SetSelection=I0(new class extends f6{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(A,D){if(!D.selection)return;A.model.pushStackElement(),A.setCursorStates(D.source,3,[P1.fromModelSelection(D.selection)])}})})(c5||(c5={}));lZ0=E0.and(Z0.textInputFocus,Z0.columnSelection);nU(c5.CursorColumnSelectLeft.id,1039);nU(c5.CursorColumnSelectRight.id,1041);nU(c5.CursorColumnSelectUp.id,1040);nU(c5.CursorColumnSelectPageUp.id,1035);nU(c5.CursorColumnSelectDown.id,1042);nU(c5.CursorColumnSelectPageDown.id,1036);(function(J){class $ extends R9{runEditorCommand(X,Y,Z){let Q=Y._getViewModel();if(!Q)return;this.runCoreEditingCommand(Y,Q,Z||{})}}J.CoreEditingCommand=$,J.LineBreakInsert=I0(new class extends ${constructor(){super({id:"lineBreakInsert",precondition:Z0.writable,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(X,Y,Z){X.pushUndoStop(),X.executeCommands(this.id,h6.lineBreakInsert(Y.cursorConfig,Y.model,Y.getCursorStates().map((Q)=>Q.modelState.selection)))}}),J.Outdent=I0(new class extends ${constructor(){super({id:"outdent",precondition:Z0.writable,kbOpts:{weight:S1,kbExpr:E0.and(Z0.editorTextFocus,Z0.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(X,Y,Z){X.pushUndoStop(),X.executeCommands(this.id,h6.outdent(Y.cursorConfig,Y.model,Y.getCursorStates().map((Q)=>Q.modelState.selection))),X.pushUndoStop()}}),J.Tab=I0(new class extends ${constructor(){super({id:"tab",precondition:Z0.writable,kbOpts:{weight:S1,kbExpr:E0.and(Z0.editorTextFocus,Z0.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(X,Y,Z){X.pushUndoStop(),X.executeCommands(this.id,h6.tab(Y.cursorConfig,Y.model,Y.getCursorStates().map((Q)=>Q.modelState.selection))),X.pushUndoStop()}}),J.DeleteLeft=I0(new class extends ${constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(X,Y,Z){let[Q,G]=hX.deleteLeft(Y.getPrevEditOperationType(),Y.cursorConfig,Y.model,Y.getCursorStates().map((q)=>q.modelState.selection),Y.getCursorAutoClosedCharacters());if(Q)X.pushUndoStop();X.executeCommands(this.id,G),Y.setPrevEditOperationType(2)}}),J.DeleteRight=I0(new class extends ${constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:S1,kbExpr:Z0.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(X,Y,Z){let[Q,G]=hX.deleteRight(Y.getPrevEditOperationType(),Y.cursorConfig,Y.model,Y.getCursorStates().map((q)=>q.modelState.selection));if(Q)X.pushUndoStop();X.executeCommands(this.id,G),Y.setPrevEditOperationType(3)}}),J.Undo=new class extends vD{constructor(){super(mT)}runDOMCommand(X){X.ownerDocument.execCommand("undo")}runEditorCommand(X,Y,Z){if(!Y.hasModel()||Y.getOption(90)===!0)return;return Y.getModel().undo()}},J.Redo=new class extends vD{constructor(){super(uT)}runDOMCommand(X){X.ownerDocument.execCommand("redo")}runEditorCommand(X,Y,Z){if(!Y.hasModel()||Y.getOption(90)===!0)return;return Y.getModel().redo()}}})(Us||(Us={}));Ak=class Ak extends qU{constructor(J,$,X){super({id:J,precondition:void 0,metadata:X});this._handlerId=$}runCommand(J,$){let X=J.get(X6).getFocusedCodeEditor();if(!X)return;X.trigger("keyboard",this._handlerId,$)}};R3("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});R3("replacePreviousChar");R3("compositionType");R3("compositionStart");R3("compositionEnd");R3("paste");R3("cut")});class Pk{constructor(J,$,X,Y){this.configuration=J,this.viewModel=$,this.userInputEvents=X,this.commandDelegate=Y}paste(J,$,X,Y){this.commandDelegate.paste(J,$,X,Y)}type(J){this.commandDelegate.type(J)}compositionType(J,$,X,Y){this.commandDelegate.compositionType(J,$,X,Y)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(J){c5.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:J})}_validateViewColumn(J){let $=this.viewModel.getLineMinColumn(J.lineNumber);if(J.column<$)return new g(J.lineNumber,$);return J}_hasMulticursorModifier(J){switch(this.configuration.options.get(77)){case"altKey":return J.altKey;case"ctrlKey":return J.ctrlKey;case"metaKey":return J.metaKey;default:return!1}}_hasNonMulticursorModifier(J){switch(this.configuration.options.get(77)){case"altKey":return J.ctrlKey||J.metaKey;case"ctrlKey":return J.altKey||J.metaKey;case"metaKey":return J.ctrlKey||J.altKey;default:return!1}}dispatchMouse(J){let $=this.configuration.options,X=N6&&$.get(106),Y=$.get(22);if(J.middleButton&&!X)this._columnSelect(J.position,J.mouseColumn,J.inSelectionMode);else if(J.startedOnLineNumbers)if(this._hasMulticursorModifier(J))if(J.inSelectionMode)this._lastCursorLineSelect(J.position,J.revealType);else this._createCursor(J.position,!0);else if(J.inSelectionMode)this._lineSelectDrag(J.position,J.revealType);else this._lineSelect(J.position,J.revealType);else if(J.mouseDownCount>=4)this._selectAll();else if(J.mouseDownCount===3)if(this._hasMulticursorModifier(J))if(J.inSelectionMode)this._lastCursorLineSelectDrag(J.position,J.revealType);else this._lastCursorLineSelect(J.position,J.revealType);else if(J.inSelectionMode)this._lineSelectDrag(J.position,J.revealType);else this._lineSelect(J.position,J.revealType);else if(J.mouseDownCount===2){if(!J.onInjectedText)if(this._hasMulticursorModifier(J))this._lastCursorWordSelect(J.position,J.revealType);else if(J.inSelectionMode)this._wordSelectDrag(J.position,J.revealType);else this._wordSelect(J.position,J.revealType)}else if(this._hasMulticursorModifier(J)){if(!this._hasNonMulticursorModifier(J))if(J.shiftKey)this._columnSelect(J.position,J.mouseColumn,!0);else if(J.inSelectionMode)this._lastCursorMoveToSelect(J.position,J.revealType);else this._createCursor(J.position,!1)}else if(J.inSelectionMode)if(J.altKey)this._columnSelect(J.position,J.mouseColumn,!0);else if(Y)this._columnSelect(J.position,J.mouseColumn,!0);else this._moveToSelect(J.position,J.revealType);else this.moveTo(J.position,J.revealType)}_usualArgs(J,$){return J=this._validateViewColumn(J),{source:"mouse",position:this._convertViewToModelPosition(J),viewPosition:J,revealType:$}}moveTo(J,$){c5.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_moveToSelect(J,$){c5.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_columnSelect(J,$,X){J=this._validateViewColumn(J),c5.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(J),viewPosition:J,mouseColumn:$,doColumnSelect:X})}_createCursor(J,$){J=this._validateViewColumn(J),c5.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(J),viewPosition:J,wholeLine:$})}_lastCursorMoveToSelect(J,$){c5.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_wordSelect(J,$){c5.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_wordSelectDrag(J,$){c5.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_lastCursorWordSelect(J,$){c5.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_lineSelect(J,$){c5.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_lineSelectDrag(J,$){c5.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_lastCursorLineSelect(J,$){c5.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_lastCursorLineSelectDrag(J,$){c5.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(J,$))}_selectAll(){c5.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(J){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(J)}emitKeyDown(J){this.userInputEvents.emitKeyDown(J)}emitKeyUp(J){this.userInputEvents.emitKeyUp(J)}emitContextMenu(J){this.userInputEvents.emitContextMenu(J)}emitMouseMove(J){this.userInputEvents.emitMouseMove(J)}emitMouseLeave(J){this.userInputEvents.emitMouseLeave(J)}emitMouseUp(J){this.userInputEvents.emitMouseUp(J)}emitMouseDown(J){this.userInputEvents.emitMouseDown(J)}emitMouseDrag(J){this.userInputEvents.emitMouseDrag(J)}emitMouseDrop(J){this.userInputEvents.emitMouseDrop(J)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(J){this.userInputEvents.emitMouseWheel(J)}}var Hs=w(()=>{zs();L1()});class hD{constructor(J){this._createLine=J,this._set(1,[])}flush(){this._set(1,[])}_set(J,$){this._lines=$,this._rendLineNumberStart=J}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(J){let $=J-this._rendLineNumberStart;if($<0||$>=this._lines.length)throw new u1("Illegal value for lineNumber");return this._lines[$]}onLinesDeleted(J,$){if(this.getCount()===0)return null;let X=this.getStartLineNumber(),Y=this.getEndLineNumber();if($<X){let q=$-J+1;return this._rendLineNumberStart-=q,null}if(J>Y)return null;let Z=0,Q=0;for(let q=X;q<=Y;q++){let U=q-this._rendLineNumberStart;if(J<=q&&q<=$)if(Q===0)Z=U,Q=1;else Q++}if(J<X){let q=0;if($<X)q=$-J+1;else q=X-J;this._rendLineNumberStart-=q}return this._lines.splice(Z,Q)}onLinesChanged(J,$){let X=J+$-1;if(this.getCount()===0)return!1;let Y=this.getStartLineNumber(),Z=this.getEndLineNumber(),Q=!1;for(let G=J;G<=X;G++)if(G>=Y&&G<=Z)this._lines[G-this._rendLineNumberStart].onContentChanged(),Q=!0;return Q}onLinesInserted(J,$){if(this.getCount()===0)return null;let X=$-J+1,Y=this.getStartLineNumber(),Z=this.getEndLineNumber();if(J<=Y)return this._rendLineNumberStart+=X,null;if(J>Z)return null;if(X+J>Z)return this._lines.splice(J-this._rendLineNumberStart,Z-J+1);let Q=[];for(let H=0;H<X;H++)Q[H]=this._createLine();let G=J-this._rendLineNumberStart,q=this._lines.slice(0,G),U=this._lines.slice(G,this._lines.length-X),z=this._lines.slice(this._lines.length-X,this._lines.length);return this._lines=q.concat(Q).concat(U),z}onTokensChanged(J){if(this.getCount()===0)return!1;let $=this.getStartLineNumber(),X=this.getEndLineNumber(),Y=!1;for(let Z=0,Q=J.length;Z<Q;Z++){let G=J[Z];if(G.toLineNumber<$||G.fromLineNumber>X)continue;let q=Math.max($,G.fromLineNumber),U=Math.min(X,G.toLineNumber);for(let z=q;z<=U;z++){let H=z-this._rendLineNumberStart;this._lines[H].onTokensChanged(),Y=!0}}return Y}}class bV{constructor(J){this._host=J,this.domNode=this._createDomNode(),this._linesCollection=new hD(()=>this._host.createVisibleLine())}_createDomNode(){let J=Y1(document.createElement("div"));return J.setClassName("view-layer"),J.setPosition("absolute"),J.domNode.setAttribute("role","presentation"),J.domNode.setAttribute("aria-hidden","true"),J}onConfigurationChanged(J){if(J.hasChanged(143))return!0;return!1}onFlushed(J){return this._linesCollection.flush(),!0}onLinesChanged(J){return this._linesCollection.onLinesChanged(J.fromLineNumber,J.count)}onLinesDeleted(J){let $=this._linesCollection.onLinesDeleted(J.fromLineNumber,J.toLineNumber);if($)for(let X=0,Y=$.length;X<Y;X++){let Z=$[X].getDomNode();if(Z)this.domNode.domNode.removeChild(Z)}return!0}onLinesInserted(J){let $=this._linesCollection.onLinesInserted(J.fromLineNumber,J.toLineNumber);if($)for(let X=0,Y=$.length;X<Y;X++){let Z=$[X].getDomNode();if(Z)this.domNode.domNode.removeChild(Z)}return!0}onScrollChanged(J){return J.scrollTopChanged}onTokensChanged(J){return this._linesCollection.onTokensChanged(J.ranges)}onZonesChanged(J){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(J){return this._linesCollection.getLine(J)}renderLines(J){let $=this._linesCollection._get(),X=new KZ(this.domNode.domNode,this._host,J),Y={rendLineNumberStart:$.rendLineNumberStart,lines:$.lines,linesLength:$.lines.length},Z=X.render(Y,J.startLineNumber,J.endLineNumber,J.relativeVerticalOffset);this._linesCollection._set(Z.rendLineNumberStart,Z.lines)}}class KZ{constructor(J,$,X){this.domNode=J,this.host=$,this.viewportData=X}render(J,$,X,Y){let Z={rendLineNumberStart:J.rendLineNumberStart,lines:J.lines.slice(0),linesLength:J.linesLength};if(Z.rendLineNumberStart+Z.linesLength-1<$||X<Z.rendLineNumberStart){Z.rendLineNumberStart=$,Z.linesLength=X-$+1,Z.lines=[];for(let Q=$;Q<=X;Q++)Z.lines[Q-$]=this.host.createVisibleLine();return this._finishRendering(Z,!0,Y),Z}if(this._renderUntouchedLines(Z,Math.max($-Z.rendLineNumberStart,0),Math.min(X-Z.rendLineNumberStart,Z.linesLength-1),Y,$),Z.rendLineNumberStart>$){let Q=$,G=Math.min(X,Z.rendLineNumberStart-1);if(Q<=G)this._insertLinesBefore(Z,Q,G,Y,$),Z.linesLength+=G-Q+1}else if(Z.rendLineNumberStart<$){let Q=Math.min(Z.linesLength,$-Z.rendLineNumberStart);if(Q>0)this._removeLinesBefore(Z,Q),Z.linesLength-=Q}if(Z.rendLineNumberStart=$,Z.rendLineNumberStart+Z.linesLength-1<X){let Q=Z.rendLineNumberStart+Z.linesLength,G=X;if(Q<=G)this._insertLinesAfter(Z,Q,G,Y,$),Z.linesLength+=G-Q+1}else if(Z.rendLineNumberStart+Z.linesLength-1>X){let Q=Math.max(0,X-Z.rendLineNumberStart+1),q=Z.linesLength-1-Q+1;if(q>0)this._removeLinesAfter(Z,q),Z.linesLength-=q}return this._finishRendering(Z,!1,Y),Z}_renderUntouchedLines(J,$,X,Y,Z){let{rendLineNumberStart:Q,lines:G}=J;for(let q=$;q<=X;q++){let U=Q+q;G[q].layoutLine(U,Y[U-Z])}}_insertLinesBefore(J,$,X,Y,Z){let Q=[],G=0;for(let q=$;q<=X;q++)Q[G++]=this.host.createVisibleLine();J.lines=Q.concat(J.lines)}_removeLinesBefore(J,$){for(let X=0;X<$;X++){let Y=J.lines[X].getDomNode();if(Y)this.domNode.removeChild(Y)}J.lines.splice(0,$)}_insertLinesAfter(J,$,X,Y,Z){let Q=[],G=0;for(let q=$;q<=X;q++)Q[G++]=this.host.createVisibleLine();J.lines=J.lines.concat(Q)}_removeLinesAfter(J,$){let X=J.linesLength-$;for(let Y=0;Y<$;Y++){let Z=J.lines[X+Y].getDomNode();if(Z)this.domNode.removeChild(Z)}J.lines.splice(X,$)}_finishRenderingNewLines(J,$,X,Y){if(KZ._ttPolicy)X=KZ._ttPolicy.createHTML(X);let Z=this.domNode.lastChild;if($||!Z)this.domNode.innerHTML=X;else Z.insertAdjacentHTML("afterend",X);let Q=this.domNode.lastChild;for(let G=J.linesLength-1;G>=0;G--){let q=J.lines[G];if(Y[G])q.setDomNode(Q),Q=Q.previousSibling}}_finishRenderingInvalidLines(J,$,X){let Y=document.createElement("div");if(KZ._ttPolicy)$=KZ._ttPolicy.createHTML($);Y.innerHTML=$;for(let Z=0;Z<J.linesLength;Z++){let Q=J.lines[Z];if(X[Z]){let G=Y.firstChild,q=Q.getDomNode();q.parentNode.replaceChild(G,q),Q.setDomNode(G)}}}_finishRendering(J,$,X){let Y=KZ._sb,Z=J.linesLength,Q=J.lines,G=J.rendLineNumberStart,q=[];{Y.reset();let U=!1;for(let z=0;z<Z;z++){let H=Q[z];if(q[z]=!1,H.getDomNode())continue;if(!H.renderLine(z+G,X[z],this.viewportData,Y))continue;q[z]=!0,U=!0}if(U)this._finishRenderingNewLines(J,$,Y.build(),q)}{Y.reset();let U=!1,z=[];for(let H=0;H<Z;H++){let j=Q[H];if(z[H]=!1,q[H])continue;if(!j.renderLine(H+G,X[H],this.viewportData,Y))continue;z[H]=!0,U=!0}if(U)this._finishRenderingInvalidLines(J,Y.build(),z)}}}var fD=w(()=>{kQ();O1();mG();KZ._ttPolicy=J4("editorViewLayer",{createHTML:(J)=>J});KZ._sb=new dY(1e5)});class js{constructor(J,$){this._configuration=J,this._lineHeight=this._configuration.options.get(66),this._dynamicOverlays=$,this._domNode=null,this._renderedContent=null}getDomNode(){if(!this._domNode)return null;return this._domNode.domNode}setDomNode(J){this._domNode=Y1(J)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(J){this._lineHeight=this._configuration.options.get(66)}renderLine(J,$,X,Y){let Z="";for(let Q=0,G=this._dynamicOverlays.length;Q<G;Q++){let q=this._dynamicOverlays[Q];Z+=q.render(X.startLineNumber,J)}if(this._renderedContent===Z)return!1;return this._renderedContent=Z,Y.appendString('<div style="position:absolute;top:'),Y.appendString(String($)),Y.appendString("px;width:100%;height:"),Y.appendString(String(this._lineHeight)),Y.appendString('px;">'),Y.appendString(Z),Y.appendString("</div>"),!0}layoutLine(J,$){if(this._domNode)this._domNode.setTop($),this._domNode.setHeight(this._lineHeight)}}var Dk,Rk,Mk;var Vs=w(()=>{HJ();fD();W7();Dk=class Dk extends w6{constructor(J){super(J);this._visibleLines=new bV(this),this.domNode=this._visibleLines.domNode;let X=this._context.configuration.options.get(50);S6(this.domNode,X),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let J=0,$=this._dynamicOverlays.length;J<$;J++)if(this._dynamicOverlays[J].shouldRender())return!0;return!1}dispose(){super.dispose();for(let J=0,$=this._dynamicOverlays.length;J<$;J++)this._dynamicOverlays[J].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new js(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(J){this._dynamicOverlays.push(J)}onConfigurationChanged(J){this._visibleLines.onConfigurationChanged(J);let $=this._visibleLines.getStartLineNumber(),X=this._visibleLines.getEndLineNumber();for(let Q=$;Q<=X;Q++)this._visibleLines.getVisibleLine(Q).onConfigurationChanged(J);let Z=this._context.configuration.options.get(50);return S6(this.domNode,Z),!0}onFlushed(J){return this._visibleLines.onFlushed(J)}onFocusChanged(J){return this._isFocused=J.isFocused,!0}onLinesChanged(J){return this._visibleLines.onLinesChanged(J)}onLinesDeleted(J){return this._visibleLines.onLinesDeleted(J)}onLinesInserted(J){return this._visibleLines.onLinesInserted(J)}onScrollChanged(J){return this._visibleLines.onScrollChanged(J)||!0}onTokensChanged(J){return this._visibleLines.onTokensChanged(J)}onZonesChanged(J){return this._visibleLines.onZonesChanged(J)}prepareRender(J){let $=this._dynamicOverlays.filter((X)=>X.shouldRender());for(let X=0,Y=$.length;X<Y;X++){let Z=$[X];Z.prepareRender(J),Z.onDidRender()}}render(J){this._viewOverlaysRender(J),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(J){this._visibleLines.renderLines(J.viewportData)}};Rk=class Rk extends Dk{constructor(J){super(J);let X=this._context.configuration.options.get(143);this._contentWidth=X.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(J){let X=this._context.configuration.options.get(143);return this._contentWidth=X.contentWidth,super.onConfigurationChanged(J)||!0}onScrollChanged(J){return super.onScrollChanged(J)||J.scrollWidthChanged}_viewOverlaysRender(J){super._viewOverlaysRender(J),this.domNode.setWidth(Math.max(J.scrollWidth,this._contentWidth))}};Mk=class Mk extends Dk{constructor(J){super(J);let $=this._context.configuration.options,X=$.get(143);this._contentLeft=X.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),S6(this.domNode,$.get(50))}onConfigurationChanged(J){let $=this._context.configuration.options;S6(this.domNode,$.get(50));let X=$.get(143);return this._contentLeft=X.contentLeft,super.onConfigurationChanged(J)||!0}onScrollChanged(J){return super.onScrollChanged(J)||J.scrollHeightChanged}_viewOverlaysRender(J){super._viewOverlaysRender(J);let $=Math.min(J.scrollHeight,1e6);this.domNode.setHeight($),this.domNode.setWidth(this._contentLeft)}}});class oU{constructor(J){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=J}emitKeyDown(J){var $;($=this.onKeyDown)===null||$===void 0||$.call(this,J)}emitKeyUp(J){var $;($=this.onKeyUp)===null||$===void 0||$.call(this,J)}emitContextMenu(J){var $;($=this.onContextMenu)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseMove(J){var $;($=this.onMouseMove)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseLeave(J){var $;($=this.onMouseLeave)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseDown(J){var $;($=this.onMouseDown)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseUp(J){var $;($=this.onMouseUp)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseDrag(J){var $;($=this.onMouseDrag)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseDrop(J){var $;($=this.onMouseDrop)===null||$===void 0||$.call(this,this._convertViewToModelMouseEvent(J))}emitMouseDropCanceled(){var J;(J=this.onMouseDropCanceled)===null||J===void 0||J.call(this)}emitMouseWheel(J){var $;($=this.onMouseWheel)===null||$===void 0||$.call(this,J)}_convertViewToModelMouseEvent(J){if(J.target)return{event:J.event,target:this._convertViewToModelMouseTarget(J.target)};return J}_convertViewToModelMouseTarget(J){return oU.convertViewToModelMouseTarget(J,this._coordinatesConverter)}static convertViewToModelMouseTarget(J,$){let X={...J};if(X.position)X.position=$.convertViewPositionToModelPosition(X.position);if(X.range)X.range=$.convertViewRangeToModelRange(X.range);if(X.type===5||X.type===8)X.detail=this.convertViewToModelViewZoneData(X.detail,$);return X}static convertViewToModelViewZoneData(J,$){return{viewZoneId:J.viewZoneId,positionBefore:J.positionBefore?$.convertViewPositionToModelPosition(J.positionBefore):J.positionBefore,positionAfter:J.positionAfter?$.convertViewPositionToModelPosition(J.positionAfter):J.positionAfter,position:$.convertViewPositionToModelPosition(J.position),afterLineNumber:$.convertViewPositionToModelPosition(new g(J.afterLineNumber,1)).lineNumber}}}var Ok=()=>{};var Ws=w(()=>{K0(".monaco-editor .blockDecorations-container{pointer-events:none;position:absolute;top:0}.monaco-editor .blockDecorations-block{box-sizing:border-box;position:absolute}")});var _k;var Bs=w(()=>{Ws();W7();_k=class _k extends w6{constructor(J){super(J);this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Y1(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let J=!1,X=this._context.configuration.options.get(143),Y=X.contentWidth-X.verticalScrollbarWidth;if(this.contentWidth!==Y)this.contentWidth=Y,J=!0;let Z=X.contentLeft;if(this.contentLeft!==Z)this.contentLeft=Z,J=!0;return J}dispose(){super.dispose()}onConfigurationChanged(J){return this.update()}onScrollChanged(J){return J.scrollTopChanged||J.scrollLeftChanged}onDecorationsChanged(J){return!0}onZonesChanged(J){return!0}prepareRender(J){}render(J){var $;let X=0,Y=J.getDecorationsInViewport();for(let Z of Y){if(!Z.options.blockClassName)continue;let Q=this.blocks[X];if(!Q)Q=this.blocks[X]=Y1(document.createElement("div")),this.domNode.appendChild(Q);let G,q;if(Z.options.blockIsAfterEnd)G=J.getVerticalOffsetAfterLineNumber(Z.range.endLineNumber,!1),q=J.getVerticalOffsetAfterLineNumber(Z.range.endLineNumber,!0);else G=J.getVerticalOffsetForLineNumber(Z.range.startLineNumber,!0),q=Z.range.isEmpty()&&!Z.options.blockDoesNotCollapse?J.getVerticalOffsetForLineNumber(Z.range.startLineNumber,!1):J.getVerticalOffsetAfterLineNumber(Z.range.endLineNumber,!0);let[U,z,H,j]=($=Z.options.blockPadding)!==null&&$!==void 0?$:[0,0,0,0];Q.setClassName("blockDecorations-block "+Z.options.blockClassName),Q.setLeft(this.contentLeft-j),Q.setWidth(this.contentWidth+j+z),Q.setTop(G-J.scrollTop-U),Q.setHeight(q-G+U+H),X++}for(let Z=X;Z<this.blocks.length;Z++)this.blocks[Z].domNode.remove();this.blocks.length=X}}});class Fs{constructor(J,$,X){this._primaryAnchor=new tU(null,null),this._secondaryAnchor=new tU(null,null),this._context=J,this._viewDomNode=$,this._actual=X,this.domNode=Y1(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let Y=this._context.configuration.options,Z=Y.get(143);this._fixedOverflowWidgets=Y.get(42),this._contentWidth=Z.contentWidth,this._contentLeft=Z.contentLeft,this._lineHeight=Y.get(66),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(J){let $=this._context.configuration.options;if(this._lineHeight=$.get(66),J.hasChanged(143)){let X=$.get(143);this._contentLeft=X.contentLeft,this._contentWidth=X.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(J,$,X){this._affinity=J,this._primaryAnchor=Y($,this._context.viewModel,this._affinity),this._secondaryAnchor=Y(X,this._context.viewModel,this._affinity);function Y(Z,Q,G){if(!Z)return new tU(null,null);let q=Q.model.validatePosition(Z);if(Q.coordinatesConverter.modelPositionIsVisible(q)){let U=Q.coordinatesConverter.convertModelPositionToViewPosition(q,G!==null&&G!==void 0?G:void 0);return new tU(Z,U)}return new tU(Z,null)}}_getMaxWidth(){let J=this.domNode.domNode.ownerDocument,$=J.defaultView;return this.allowEditorOverflow?($===null||$===void 0?void 0:$.innerWidth)||J.documentElement.offsetWidth||J.body.offsetWidth:this._contentWidth}setPosition(J,$,X,Y){if(this._setPosition(Y,J,$),this._preference=X,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0)this.domNode.setDisplay("block");else this.domNode.setDisplay("none");this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(J,$,X,Y){let Z=J.top,Q=Z,G=J.top+J.height,q=Y.viewportHeight-G,U=Z-X,z=Q>=X,H=G,j=q>=X,V=J.left;if(V+$>Y.scrollLeft+Y.viewportWidth)V=Y.scrollLeft+Y.viewportWidth-$;if(V<Y.scrollLeft)V=Y.scrollLeft;return{fitsAbove:z,aboveTop:U,fitsBelow:j,belowTop:H,left:V}}_layoutHorizontalSegmentInPage(J,$,X,Y){var Z;let Q=15,G=15,q=Math.max(15,$.left-Y),U=Math.min($.left+$.width+Y,J.width-15),H=this._viewDomNode.domNode.ownerDocument.defaultView,j=$.left+X-((Z=H===null||H===void 0?void 0:H.scrollX)!==null&&Z!==void 0?Z:0);if(j+Y>U){let V=j-(U-Y);j-=V,X-=V}if(j<q){let V=j-q;j-=V,X-=V}return[X,j]}_layoutBoxInPage(J,$,X,Y){var Z,Q;let G=J.top-X,q=J.top+J.height,U=g5(this._viewDomNode.domNode),z=this._viewDomNode.domNode.ownerDocument,H=z.defaultView,j=U.top+G-((Z=H===null||H===void 0?void 0:H.scrollY)!==null&&Z!==void 0?Z:0),V=U.top+q-((Q=H===null||H===void 0?void 0:H.scrollY)!==null&&Q!==void 0?Q:0),W=AX(z.body),[B,K]=this._layoutHorizontalSegmentInPage(W,U,J.left-Y.scrollLeft+this._contentLeft,$),P=22,A=22,D=j>=22,M=V+X<=W.height-22;if(this._fixedOverflowWidgets)return{fitsAbove:D,aboveTop:Math.max(j,22),fitsBelow:M,belowTop:V,left:K};return{fitsAbove:D,aboveTop:G,fitsBelow:M,belowTop:q,left:B}}_prepareRenderWidgetAtExactPositionOverflowing(J){return new eU(J.top,J.left+this._contentLeft)}_getAnchorsCoordinates(J){var $,X;let Y=G(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),Z=(($=this._secondaryAnchor.viewPosition)===null||$===void 0?void 0:$.lineNumber)===((X=this._primaryAnchor.viewPosition)===null||X===void 0?void 0:X.lineNumber)?this._secondaryAnchor.viewPosition:null,Q=G(Z,this._affinity,this._lineHeight);return{primary:Y,secondary:Q};function G(q,U,z){if(!q)return null;let H=J.visibleRangeForPosition(q);if(!H)return null;let j=q.column===1&&U===3?0:H.left,V=J.getVerticalOffsetForLineNumber(q.lineNumber)-J.scrollTop;return new Tk(V,j,z)}}_reduceAnchorCoordinates(J,$,X){if(!$)return J;let Y=this._context.configuration.options.get(50),Z=$.left;if(Z<J.left)Z=Math.max(Z,J.left-X+Y.typicalFullwidthCharacterWidth);else Z=Math.min(Z,J.left+X-Y.typicalFullwidthCharacterWidth);return new Tk(J.top,Z,J.height)}_prepareRenderWidget(J){if(!this._preference||this._preference.length===0)return null;let{primary:$,secondary:X}=this._getAnchorsCoordinates(J);if(!$)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let Q=null;if(typeof this._actual.beforeRender==="function")Q=Nk(this._actual.beforeRender,this._actual);if(Q)this._cachedDomNodeOffsetWidth=Q.width,this._cachedDomNodeOffsetHeight=Q.height;else{let q=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(q.width),this._cachedDomNodeOffsetHeight=Math.round(q.height)}}let Y=this._reduceAnchorCoordinates($,X,this._cachedDomNodeOffsetWidth),Z;if(this.allowEditorOverflow)Z=this._layoutBoxInPage(Y,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,J);else Z=this._layoutBoxInViewport(Y,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,J);for(let Q=1;Q<=2;Q++)for(let G of this._preference)if(G===1){if(!Z)return null;if(Q===2||Z.fitsAbove)return{coordinate:new eU(Z.aboveTop,Z.left),position:1}}else if(G===2){if(!Z)return null;if(Q===2||Z.fitsBelow)return{coordinate:new eU(Z.belowTop,Z.left),position:2}}else if(this.allowEditorOverflow)return{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new eU(Y.top,Y.left)),position:0};else return{coordinate:new eU(Y.top,Y.left),position:0};return null}onBeforeRender(J){if(!this._primaryAnchor.viewPosition||!this._preference)return;if(this._primaryAnchor.viewPosition.lineNumber<J.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>J.endLineNumber)return;this.domNode.setMaxWidth(this._maxWidth)}prepareRender(J){this._renderData=this._prepareRenderWidget(J)}render(J){if(!this._renderData){if(this._isVisible)this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden");if(typeof this._actual.afterRender==="function")Nk(this._actual.afterRender,this._actual,null);return}if(this.allowEditorOverflow)this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left);else this.domNode.setTop(this._renderData.coordinate.top+J.scrollTop-J.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left);if(!this._isVisible)this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0;if(typeof this._actual.afterRender==="function")Nk(this._actual.afterRender,this._actual,this._renderData.position)}}class tU{constructor(J,$){this.modelPosition=J,this.viewPosition=$}}class eU{constructor(J,$){this.top=J,this.left=$,this._coordinateBrand=void 0}}class Tk{constructor(J,$,X){this.top=J,this.left=$,this.height=X,this._anchorCoordinateBrand=void 0}}function Nk(J,$,...X){try{return J.call($,...X)}catch(Y){return null}}var wk;var Ks=w(()=>{T0();W7();wk=class wk extends w6{constructor(J,$){super(J);this._viewDomNode=$,this._widgets={},this.domNode=Y1(document.createElement("div")),L8.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Y1(document.createElement("div")),L8.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(J){let $=Object.keys(this._widgets);for(let X of $)this._widgets[X].onConfigurationChanged(J);return!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLineMappingChanged(J){return this._updateAnchorsViewPositions(),!0}onLinesChanged(J){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(J){return this._updateAnchorsViewPositions(),!0}onLinesInserted(J){return this._updateAnchorsViewPositions(),!0}onScrollChanged(J){return!0}onZonesChanged(J){return!0}_updateAnchorsViewPositions(){let J=Object.keys(this._widgets);for(let $ of J)this._widgets[$].updateAnchorViewPosition()}addWidget(J){let $=new Fs(this._context,this._viewDomNode,J);if(this._widgets[$.id]=$,$.allowEditorOverflow)this.overflowingContentWidgetsDomNode.appendChild($.domNode);else this.domNode.appendChild($.domNode);this.setShouldRender()}setWidgetPosition(J,$,X,Y,Z){this._widgets[J.getId()].setPosition($,X,Y,Z),this.setShouldRender()}removeWidget(J){let $=J.getId();if(this._widgets.hasOwnProperty($)){let X=this._widgets[$];delete this._widgets[$];let Y=X.domNode.domNode;Y.parentNode.removeChild(Y),Y.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(J){if(this._widgets.hasOwnProperty(J))return this._widgets[J].suppressMouseDown;return!1}onBeforeRender(J){let $=Object.keys(this._widgets);for(let X of $)this._widgets[X].onBeforeRender(J)}prepareRender(J){let $=Object.keys(this._widgets);for(let X of $)this._widgets[X].prepareRender(J)}render(J){let $=Object.keys(this._widgets);for(let X of $)this._widgets[X].render(J)}}});var As=w(()=>{K0(".monaco-editor .view-overlays .current-line,.monaco-editor .margin-view-overlays .current-line{box-sizing:border-box;display:block;position:absolute;top:0;left:0}.monaco-editor .margin-view-overlays .current-line.current-line-margin.current-line-margin-both{border-right:0}")});var Lk,kk,Ek;var Ps=w(()=>{As();sQ();E$();V1();G5();o5();qZ();Lk=class Lk extends x9{constructor(J){super();this._context=J;let $=this._context.configuration.options,X=$.get(143);this._lineHeight=$.get(66),this._renderLineHighlight=$.get(95),this._renderLineHighlightOnlyWhenFocus=$.get(96),this._wordWrap=X.isViewportWrapping,this._contentLeft=X.contentLeft,this._contentWidth=X.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new p0(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let J=!1,$=new Set;for(let Z of this._selections)$.add(Z.positionLineNumber);let X=Array.from($);if(X.sort((Z,Q)=>Z-Q),!B6(this._cursorLineNumbers,X))this._cursorLineNumbers=X,J=!0;let Y=this._selections.every((Z)=>Z.isEmpty());if(this._selectionIsEmpty!==Y)this._selectionIsEmpty=Y,J=!0;return J}onThemeChanged(J){return this._readFromSelections()}onConfigurationChanged(J){let $=this._context.configuration.options,X=$.get(143);return this._lineHeight=$.get(66),this._renderLineHighlight=$.get(95),this._renderLineHighlightOnlyWhenFocus=$.get(96),this._wordWrap=X.isViewportWrapping,this._contentLeft=X.contentLeft,this._contentWidth=X.contentWidth,!0}onCursorStateChanged(J){return this._selections=J.selections,this._readFromSelections()}onFlushed(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollWidthChanged||J.scrollTopChanged}onZonesChanged(J){return!0}onFocusChanged(J){if(!this._renderLineHighlightOnlyWhenFocus)return!1;return this._focused=J.isFocused,!0}prepareRender(J){if(!this._shouldRenderThis()){this._renderData=null;return}let $=J.visibleRange.startLineNumber,X=J.visibleRange.endLineNumber,Y=[];for(let Q=$;Q<=X;Q++){let G=Q-$;Y[G]=""}if(this._wordWrap){let Q=this._renderOne(J,!1);for(let G of this._cursorLineNumbers){let q=this._context.viewModel.coordinatesConverter,U=q.convertViewPositionToModelPosition(new g(G,1)).lineNumber,z=q.convertModelPositionToViewPosition(new g(U,1)).lineNumber,H=q.convertModelPositionToViewPosition(new g(U,this._context.viewModel.model.getLineMaxColumn(U))).lineNumber,j=Math.max(z,$),V=Math.min(H,X);for(let W=j;W<=V;W++){let B=W-$;Y[B]=Q}}}let Z=this._renderOne(J,!0);for(let Q of this._cursorLineNumbers){if(Q<$||Q>X)continue;let G=Q-$;Y[G]=Z}this._renderData=Y}render(J,$){if(!this._renderData)return"";let X=$-J;if(X>=this._renderData.length)return"";return this._renderData[X]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}};kk=class kk extends Lk{_renderOne(J,$){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+($?" current-line-exact":"")}" style="width:${Math.max(J.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}};Ek=class Ek extends Lk{_renderOne(J,$){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&$?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}};F7((J,$)=>{let X=J.getColor(eL);if(X)$.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${X}; }`),$.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${X}; border: none; }`);if(!X||X.isTransparent()||J.defines(Jk)){let Y=J.getColor(Jk);if(Y){if($.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${Y}; }`),$.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${Y}; }`),wJ(J.type))$.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),$.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")}}})});var Ds=w(()=>{K0(".monaco-editor .lines-content .cdr{position:absolute}")});var Ik;var Rs=w(()=>{Ds();sQ();uU();i0();Ik=class Ik extends x9{constructor(J){super();this._context=J;let $=this._context.configuration.options;this._lineHeight=$.get(66),this._typicalHalfwidthCharacterWidth=$.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){let $=this._context.configuration.options;return this._lineHeight=$.get(66),this._typicalHalfwidthCharacterWidth=$.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged||J.scrollWidthChanged}onZonesChanged(J){return!0}prepareRender(J){let $=J.getDecorationsInViewport(),X=[],Y=0;for(let q=0,U=$.length;q<U;q++){let z=$[q];if(z.options.className)X[Y++]=z}X=X.sort((q,U)=>{if(q.options.zIndex<U.options.zIndex)return-1;if(q.options.zIndex>U.options.zIndex)return 1;let z=q.options.className,H=U.options.className;if(z<H)return-1;if(z>H)return 1;return k.compareRangesUsingStarts(q.range,U.range)});let Z=J.visibleRange.startLineNumber,Q=J.visibleRange.endLineNumber,G=[];for(let q=Z;q<=Q;q++){let U=q-Z;G[U]=""}this._renderWholeLineDecorations(J,X,G),this._renderNormalDecorations(J,X,G),this._renderResult=G}_renderWholeLineDecorations(J,$,X){let Y=String(this._lineHeight),Z=J.visibleRange.startLineNumber,Q=J.visibleRange.endLineNumber;for(let G=0,q=$.length;G<q;G++){let U=$[G];if(!U.options.isWholeLine)continue;let z='<div class="cdr '+U.options.className+'" style="left:0;width:100%;height:'+Y+'px;"></div>',H=Math.max(U.range.startLineNumber,Z),j=Math.min(U.range.endLineNumber,Q);for(let V=H;V<=j;V++){let W=V-Z;X[W]+=z}}}_renderNormalDecorations(J,$,X){var Y;let Z=String(this._lineHeight),Q=J.visibleRange.startLineNumber,G=null,q=!1,U=null,z=!1;for(let H=0,j=$.length;H<j;H++){let V=$[H];if(V.options.isWholeLine)continue;let W=V.options.className,B=Boolean(V.options.showIfCollapsed),K=V.range;if(B&&K.endColumn===1&&K.endLineNumber!==K.startLineNumber)K=new k(K.startLineNumber,K.startColumn,K.endLineNumber-1,this._context.viewModel.getLineMaxColumn(K.endLineNumber-1));if(G===W&&q===B&&k.areIntersectingOrTouching(U,K)){U=k.plusRange(U,K);continue}if(G!==null)this._renderNormalDecoration(J,U,G,z,q,Z,Q,X);G=W,q=B,U=K,z=(Y=V.options.shouldFillLineOnLineBreak)!==null&&Y!==void 0?Y:!1}if(G!==null)this._renderNormalDecoration(J,U,G,z,q,Z,Q,X)}_renderNormalDecoration(J,$,X,Y,Z,Q,G,q){let U=J.linesVisibleRangesForRange($,X==="findMatch");if(!U)return;for(let z=0,H=U.length;z<H;z++){let j=U[z];if(j.outsideRenderedLine)continue;let V=j.lineNumber-G;if(Z&&j.ranges.length===1){let W=j.ranges[0];if(W.width<this._typicalHalfwidthCharacterWidth){let B=Math.round(W.left+W.width/2),K=Math.max(0,Math.round(B-this._typicalHalfwidthCharacterWidth/2));j.ranges[0]=new mU(K,this._typicalHalfwidthCharacterWidth)}}for(let W=0,B=j.ranges.length;W<B;W++){let K=Y&&j.continuesOnNextLine&&B===1,P=j.ranges[W],A='<div class="cdr '+X+'" style="left:'+String(P.left)+(K?"px;width:100%;height:":"px;width:"+String(P.width)+"px;height:")+Q+'px;"></div>';q[V]+=A}}}render(J,$){if(!this._renderResult)return"";let X=$-J;if(X<0||X>=this._renderResult.length)return"";return this._renderResult[X]}}});var yk;var Ms=w(()=>{T0();L$();W7();G5();yk=class yk extends w6{constructor(J,$,X,Y){super(J);let Z=this._context.configuration.options,Q=Z.get(102),G=Z.get(74),q=Z.get(40),U=Z.get(105),z={listenOnDomNode:X.domNode,className:"editor-scrollable "+IV(J.theme.type),useShadows:!1,lazyRender:!0,vertical:Q.vertical,horizontal:Q.horizontal,verticalHasArrows:Q.verticalHasArrows,horizontalHasArrows:Q.horizontalHasArrows,verticalScrollbarSize:Q.verticalScrollbarSize,verticalSliderSize:Q.verticalSliderSize,horizontalScrollbarSize:Q.horizontalScrollbarSize,horizontalSliderSize:Q.horizontalSliderSize,handleMouseWheel:Q.handleMouseWheel,alwaysConsumeMouseWheel:Q.alwaysConsumeMouseWheel,arrowSize:Q.arrowSize,mouseWheelScrollSensitivity:G,fastScrollSensitivity:q,scrollPredominantAxis:U,scrollByPage:Q.scrollByPage};this.scrollbar=this._register(new HZ($.domNode,z,this._context.viewLayout.getScrollable())),L8.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Y1(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let H=(j,V,W)=>{let B={};if(V){let K=j.scrollTop;if(K)B.scrollTop=this._context.viewLayout.getCurrentScrollTop()+K,j.scrollTop=0}if(W){let K=j.scrollLeft;if(K)B.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+K,j.scrollLeft=0}this._context.viewModel.viewLayout.setScrollPosition(B,1)};this._register(r(X.domNode,"scroll",(j)=>H(X.domNode,!0,!0))),this._register(r($.domNode,"scroll",(j)=>H($.domNode,!0,!1))),this._register(r(Y.domNode,"scroll",(j)=>H(Y.domNode,!0,!1))),this._register(r(this.scrollbarDomNode.domNode,"scroll",(j)=>H(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let J=this._context.configuration.options,$=J.get(143);if(this.scrollbarDomNode.setLeft($.contentLeft),J.get(72).side==="right")this.scrollbarDomNode.setWidth($.contentWidth+$.minimap.minimapWidth);else this.scrollbarDomNode.setWidth($.contentWidth);this.scrollbarDomNode.setHeight($.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(J){this.scrollbar.delegateVerticalScrollbarPointerDown(J)}delegateScrollFromMouseWheelEvent(J){this.scrollbar.delegateScrollFromMouseWheelEvent(J)}onConfigurationChanged(J){if(J.hasChanged(102)||J.hasChanged(74)||J.hasChanged(40)){let $=this._context.configuration.options,X=$.get(102),Y=$.get(74),Z=$.get(40),Q=$.get(105),G={vertical:X.vertical,horizontal:X.horizontal,verticalScrollbarSize:X.verticalScrollbarSize,horizontalScrollbarSize:X.horizontalScrollbarSize,scrollByPage:X.scrollByPage,handleMouseWheel:X.handleMouseWheel,mouseWheelScrollSensitivity:Y,fastScrollSensitivity:Z,scrollPredominantAxis:Q};this.scrollbar.updateOptions(G)}if(J.hasChanged(143))this._setLayout();return!0}onScrollChanged(J){return!0}onThemeChanged(J){return this.scrollbar.updateClassName("editor-scrollable "+IV(this._context.theme.type)),!0}prepareRender(J){}render(J){this.scrollbar.renderNow()}}});var Os=w(()=>{K0(".monaco-editor .glyph-margin{position:absolute;top:0}.monaco-editor .glyph-margin-widgets .cgmr{justify-content:center;align-items:center;display:flex;position:absolute}.monaco-editor .glyph-margin-widgets .cgmr.codicon-modifier-spin:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}")});class Jz{constructor(J,$,X,Y,Z){this.startLineNumber=J,this.endLineNumber=$,this.className=X,this.tooltip=Y,this._decorationToRenderBrand=void 0,this.zIndex=Z!==null&&Z!==void 0?Z:0}}class _s{constructor(J,$,X){this.className=J,this.zIndex=$,this.tooltip=X}}class Ns{constructor(){this.decorations=[]}add(J){this.decorations.push(J)}getDecorations(){return this.decorations}}class Ts{constructor(J,$,X,Y){this.lineNumber=J,this.laneIndex=$,this.zIndex=X,this.className=Y,this.type=0}accept(J){return new Ls(this.lineNumber,this.laneIndex,J)}}class ws{constructor(J,$,X,Y){this.lineNumber=J,this.laneIndex=$,this.zIndex=X,this.widget=Y,this.type=1}}class Ls{constructor(J,$,X){this.lineNumber=J,this.laneIndex=$,this.combinedClassName=X}}var SV,xk;var gD=w(()=>{V1();Os();sQ();W7();i0();O9();SV=class SV extends x9{_render(J,$,X){let Y=[];for(let G=J;G<=$;G++){let q=G-J;Y[q]=new Ns}if(X.length===0)return Y;X.sort((G,q)=>{if(G.className===q.className){if(G.startLineNumber===q.startLineNumber)return G.endLineNumber-q.endLineNumber;return G.startLineNumber-q.startLineNumber}return G.className<q.className?-1:1});let Z=null,Q=0;for(let G=0,q=X.length;G<q;G++){let U=X[G],z=U.className,H=U.zIndex,j=Math.max(U.startLineNumber,J)-J,V=Math.min(U.endLineNumber,$)-J;if(Z===z)j=Math.max(Q+1,j),Q=Math.max(Q,V);else Z=z,Q=V;for(let W=j;W<=Q;W++)Y[W].add(new _s(z,H,U.tooltip))}return Y}};xk=class xk extends w6{constructor(J){super(J);this._widgets={},this._context=J;let $=this._context.configuration.options,X=$.get(143);this.domNode=Y1(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=$.get(66),this._glyphMargin=$.get(57),this._glyphMarginLeft=X.glyphMarginLeft,this._glyphMarginWidth=X.glyphMarginWidth,this._glyphMarginDecorationLaneCount=X.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(J){let $=this._context.configuration.options,X=$.get(143);return this._lineHeight=$.get(66),this._glyphMargin=$.get(57),this._glyphMarginLeft=X.glyphMarginLeft,this._glyphMarginWidth=X.glyphMarginWidth,this._glyphMarginDecorationLaneCount=X.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}addWidget(J){let $=Y1(J.getDomNode());this._widgets[J.getId()]={widget:J,preference:J.getPosition(),domNode:$,renderInfo:null},$.setPosition("absolute"),$.setDisplay("none"),$.setAttribute("widgetId",J.getId()),this.domNode.appendChild($),this.setShouldRender()}setWidgetPosition(J,$){let X=this._widgets[J.getId()];if(X.preference.lane===$.lane&&X.preference.zIndex===$.zIndex&&k.equalsRange(X.preference.range,$.range))return!1;return X.preference=$,this.setShouldRender(),!0}removeWidget(J){var $;let X=J.getId();if(this._widgets[X]){let Z=this._widgets[X].domNode.domNode;delete this._widgets[X],($=Z.parentNode)===null||$===void 0||$.removeChild(Z),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(J,$){var X,Y,Z;let Q=J.visibleRange.startLineNumber,G=J.visibleRange.endLineNumber,q=J.getDecorationsInViewport();for(let U of q){let z=U.options.glyphMarginClassName;if(!z)continue;let H=Math.max(U.range.startLineNumber,Q),j=Math.min(U.range.endLineNumber,G),V=(Y=(X=U.options.glyphMargin)===null||X===void 0?void 0:X.position)!==null&&Y!==void 0?Y:S4.Center,W=(Z=U.options.zIndex)!==null&&Z!==void 0?Z:0;for(let B=H;B<=j;B++){let K=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new g(B,0)),P=this._context.viewModel.glyphLanes.getLanesAtLine(K.lineNumber).indexOf(V);$.push(new Ts(B,P,W,z))}}}_collectWidgetBasedGlyphRenderRequest(J,$){let X=J.visibleRange.startLineNumber,Y=J.visibleRange.endLineNumber;for(let Z of Object.values(this._widgets)){let Q=Z.preference.range,{startLineNumber:G,endLineNumber:q}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(k.lift(Q));if(!G||!q||q<X||G>Y)continue;let U=Math.max(G,X),z=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new g(U,0)),H=this._context.viewModel.glyphLanes.getLanesAtLine(z.lineNumber).indexOf(Z.preference.lane);$.push(new ws(U,H,Z.preference.zIndex,Z))}}_collectSortedGlyphRenderRequests(J){let $=[];return this._collectDecorationBasedGlyphRenderRequest(J,$),this._collectWidgetBasedGlyphRenderRequest(J,$),$.sort((X,Y)=>{if(X.lineNumber===Y.lineNumber){if(X.laneIndex===Y.laneIndex){if(X.zIndex===Y.zIndex){if(Y.type===X.type){if(X.type===0&&Y.type===0)return X.className<Y.className?-1:1;return 0}return Y.type-X.type}return Y.zIndex-X.zIndex}return X.laneIndex-Y.laneIndex}return X.lineNumber-Y.lineNumber}),$}prepareRender(J){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(let Y of Object.values(this._widgets))Y.renderInfo=null;let $=new I7(this._collectSortedGlyphRenderRequests(J)),X=[];while($.length>0){let Y=$.peek();if(!Y)break;let Z=$.takeWhile((G)=>G.lineNumber===Y.lineNumber&&G.laneIndex===Y.laneIndex);if(!Z||Z.length===0)break;let Q=Z[0];if(Q.type===0){let G=[];for(let q of Z){if(q.zIndex!==Q.zIndex||q.type!==Q.type)break;if(G.length===0||G[G.length-1]!==q.className)G.push(q.className)}X.push(Q.accept(G.join(" ")))}else Q.widget.renderInfo={lineNumber:Q.lineNumber,laneIndex:Q.laneIndex}}this._decorationGlyphsToRender=X}render(J){if(!this._glyphMargin){for(let X of Object.values(this._widgets))X.domNode.setDisplay("none");while(this._managedDomNodes.length>0){let X=this._managedDomNodes.pop();X===null||X===void 0||X.domNode.remove()}return}let $=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(let X of Object.values(this._widgets))if(!X.renderInfo)X.domNode.setDisplay("none");else{let Y=J.viewportData.relativeVerticalOffset[X.renderInfo.lineNumber-J.viewportData.startLineNumber],Z=this._glyphMarginLeft+X.renderInfo.laneIndex*this._lineHeight;X.domNode.setDisplay("block"),X.domNode.setTop(Y),X.domNode.setLeft(Z),X.domNode.setWidth($),X.domNode.setHeight(this._lineHeight)}for(let X=0;X<this._decorationGlyphsToRender.length;X++){let Y=this._decorationGlyphsToRender[X],Z=J.viewportData.relativeVerticalOffset[Y.lineNumber-J.viewportData.startLineNumber],Q=this._glyphMarginLeft+Y.laneIndex*this._lineHeight,G;if(X<this._managedDomNodes.length)G=this._managedDomNodes[X];else G=Y1(document.createElement("div")),this._managedDomNodes.push(G),this.domNode.appendChild(G);G.setClassName("cgmr codicon "+Y.combinedClassName),G.setPosition("absolute"),G.setTop(Z),G.setLeft(Q),G.setWidth($),G.setHeight(this._lineHeight)}while(this._managedDomNodes.length>this._decorationGlyphsToRender.length){let X=this._managedDomNodes.pop();X===null||X===void 0||X.domNode.remove()}}}});var ks=w(()=>{K0(".monaco-editor .lines-content .core-guide{box-sizing:border-box;position:absolute}")});var CV;var bk=w(()=>{z0();CV=class CV extends m{constructor(){super(...arguments);this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw Error("TextModelPart is disposed!")}}});function vV(J,$){let X=0,Y=0,Z=J.length;while(Y<Z){let Q=J.charCodeAt(Y);if(Q===32)X++;else if(Q===9)X=X-X%$+$;else break;Y++}if(Y===Z)return-1;return X}class I${constructor(J,$,X,Y,Z,Q){if(this.visibleColumn=J,this.column=$,this.className=X,this.horizontalLine=Y,this.forWrappedLinesAfterColumn=Z,this.forWrappedLinesBeforeOrAtColumn=Q,J!==-1===($!==-1))throw Error()}}class oQ{constructor(J,$){this.top=J,this.endColumn=$}}var AZ;var pD=w(()=>{(function(J){J[J.Disabled=0]="Disabled",J[J.EnabledForActive=1]="EnabledForActive",J[J.Enabled=2]="Enabled"})(AZ||(AZ={}))});class mD{constructor(){this.activeClassName="indent-active"}getInlineClassName(J,$,X){return this.getInlineClassNameOfLevel(X?$:J)}getInlineClassNameOfLevel(J){return`bracket-indent-guide lvl-${J%30}`}}var Sk;var Ck=w(()=>{W$();X1();LJ();i0();bk();pD();O1();Sk=class Sk extends CV{constructor(J,$){super();this.textModel=J,this.languageConfigurationService=$}getLanguageConfiguration(J){return this.languageConfigurationService.getLanguageConfiguration(J)}_computeIndentLevel(J){return vV(this.textModel.getLineContent(J+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(J,$,X){this.assertNotDisposed();let Y=this.textModel.getLineCount();if(J<1||J>Y)throw new u1("Illegal value for lineNumber");let Z=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,Q=Boolean(Z&&Z.offSide),G=-2,q=-1,U=-2,z=-1,H=(N)=>{if(G!==-1&&(G===-2||G>N-1)){G=-1,q=-1;for(let T=N-2;T>=0;T--){let S=this._computeIndentLevel(T);if(S>=0){G=T,q=S;break}}}if(U===-2){U=-1,z=-1;for(let T=N;T<Y;T++){let S=this._computeIndentLevel(T);if(S>=0){U=T,z=S;break}}}},j=-2,V=-1,W=-2,B=-1,K=(N)=>{if(j===-2){j=-1,V=-1;for(let T=N-2;T>=0;T--){let S=this._computeIndentLevel(T);if(S>=0){j=T,V=S;break}}}if(W!==-1&&(W===-2||W<N-1)){W=-1,B=-1;for(let T=N;T<Y;T++){let S=this._computeIndentLevel(T);if(S>=0){W=T,B=S;break}}}},P=0,A=!0,D=0,M=!0,R=0,O=0;for(let N=0;A||M;N++){let T=J-N,S=J+N;if(N>1&&(T<1||T<$))A=!1;if(N>1&&(S>Y||S>X))M=!1;if(N>50000)A=!1,M=!1;let v=-1;if(A&&T>=1){let f=this._computeIndentLevel(T-1);if(f>=0)U=T-1,z=f,v=Math.ceil(f/this.textModel.getOptions().indentSize);else H(T),v=this._getIndentLevelForWhitespaceLine(Q,q,z)}let l=-1;if(M&&S<=Y){let f=this._computeIndentLevel(S-1);if(f>=0)j=S-1,V=f,l=Math.ceil(f/this.textModel.getOptions().indentSize);else K(S),l=this._getIndentLevelForWhitespaceLine(Q,V,B)}if(N===0){O=v;continue}if(N===1){if(S<=Y&&l>=0&&O+1===l){A=!1,P=S,D=S,R=l;continue}if(T>=1&&v>=0&&v-1===O){M=!1,P=T,D=T,R=v;continue}if(P=J,D=J,R=O,R===0)return{startLineNumber:P,endLineNumber:D,indent:R}}if(A)if(v>=R)P=T;else A=!1;if(M)if(l>=R)D=S;else M=!1}return{startLineNumber:P,endLineNumber:D,indent:R}}getLinesBracketGuides(J,$,X,Y){var Z;let Q=[];for(let j=J;j<=$;j++)Q.push([]);let G=!0,q=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new k(J,1,$,this.textModel.getLineMaxColumn($))).toArray(),U=void 0;if(X&&q.length>0){let j=(J<=X.lineNumber&&X.lineNumber<=$?q:this.textModel.bracketPairs.getBracketPairsInRange(k.fromPositions(X)).toArray()).filter((V)=>k.strictContainsPosition(V.range,X));U=(Z=eG(j,(V)=>G||V.range.startLineNumber!==V.range.endLineNumber))===null||Z===void 0?void 0:Z.range}let z=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,H=new mD;for(let j of q){if(!j.closingBracketRange)continue;let V=U&&j.range.equalsRange(U);if(!V&&!Y.includeInactive)continue;let W=H.getInlineClassName(j.nestingLevel,j.nestingLevelOfEqualBracketType,z)+(Y.highlightActive&&V?" "+H.activeClassName:""),B=j.openingBracketRange.getStartPosition(),K=j.closingBracketRange.getStartPosition(),P=Y.horizontalGuides===AZ.Enabled||Y.horizontalGuides===AZ.EnabledForActive&&V;if(j.range.startLineNumber===j.range.endLineNumber){if(G&&P)Q[j.range.startLineNumber-J].push(new I$(-1,j.openingBracketRange.getEndPosition().column,W,new oQ(!1,K.column),-1,-1));continue}let A=this.getVisibleColumnFromPosition(K),D=this.getVisibleColumnFromPosition(j.openingBracketRange.getStartPosition()),M=Math.min(D,A,j.minVisibleColumnIndentation+1),R=!1;if(c6(this.textModel.getLineContent(j.closingBracketRange.startLineNumber))<j.closingBracketRange.startColumn-1)R=!0;let T=Math.max(B.lineNumber,J),S=Math.min(K.lineNumber,$),v=R?1:0;for(let l=T;l<S+v;l++)Q[l-J].push(new I$(M,-1,W,null,l===B.lineNumber?B.column:-1,l===K.lineNumber?K.column:-1));if(P){if(B.lineNumber>=J&&D>M)Q[B.lineNumber-J].push(new I$(M,-1,W,new oQ(!1,B.column),-1,-1));if(K.lineNumber<=$&&A>M)Q[K.lineNumber-J].push(new I$(M,-1,W,new oQ(!R,K.column),-1,-1))}}for(let j of Q)j.sort((V,W)=>V.visibleColumn-W.visibleColumn);return Q}getVisibleColumnFromPosition(J){return s1.visibleColumnFromColumn(this.textModel.getLineContent(J.lineNumber),J.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(J,$){this.assertNotDisposed();let X=this.textModel.getLineCount();if(J<1||J>X)throw Error("Illegal value for startLineNumber");if($<1||$>X)throw Error("Illegal value for endLineNumber");let Y=this.textModel.getOptions(),Z=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,Q=Boolean(Z&&Z.offSide),G=Array($-J+1),q=-2,U=-1,z=-2,H=-1;for(let j=J;j<=$;j++){let V=j-J,W=this._computeIndentLevel(j-1);if(W>=0){q=j-1,U=W,G[V]=Math.ceil(W/Y.indentSize);continue}if(q===-2){q=-1,U=-1;for(let B=j-2;B>=0;B--){let K=this._computeIndentLevel(B);if(K>=0){q=B,U=K;break}}}if(z!==-1&&(z===-2||z<j-1)){z=-1,H=-1;for(let B=j;B<X;B++){let K=this._computeIndentLevel(B);if(K>=0){z=B,H=K;break}}}G[V]=this._getIndentLevelForWhitespaceLine(Q,U,H)}return G}_getIndentLevelForWhitespaceLine(J,$,X){let Y=this.textModel.getOptions();if($===-1||X===-1)return 0;else if($<X)return 1+Math.floor($/Y.indentSize);else if($===X)return Math.ceil(X/Y.indentSize);else if(J)return Math.ceil(X/Y.indentSize);else return 1+Math.floor(X/Y.indentSize)}}});function $z(J){if(J&&J.isTransparent())return;return J}var vk;var Es=w(()=>{ks();sQ();E$();G5();V1();Ck();pD();vk=class vk extends x9{constructor(J){super();this._context=J,this._primaryPosition=null;let $=this._context.configuration.options,X=$.get(144),Y=$.get(50);this._lineHeight=$.get(66),this._spaceWidth=Y.spaceWidth,this._maxIndentLeft=X.wrappingColumn===-1?-1:X.wrappingColumn*Y.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=$.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){let $=this._context.configuration.options,X=$.get(144),Y=$.get(50);return this._lineHeight=$.get(66),this._spaceWidth=Y.spaceWidth,this._maxIndentLeft=X.wrappingColumn===-1?-1:X.wrappingColumn*Y.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=$.get(16),!0}onCursorStateChanged(J){var $;let Y=J.selections[0].getPosition();if(!(($=this._primaryPosition)===null||$===void 0?void 0:$.equals(Y)))return this._primaryPosition=Y,!0;return!1}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}onLanguageConfigurationChanged(J){return!0}prepareRender(J){var $,X,Y,Z;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}let Q=J.visibleRange.startLineNumber,G=J.visibleRange.endLineNumber,q=J.scrollWidth,U=this._lineHeight,z=this._primaryPosition,H=this.getGuidesByLine(Q,Math.min(G+1,this._context.viewModel.getLineCount()),z),j=[];for(let V=Q;V<=G;V++){let W=V-Q,B=H[W],K="",P=(X=($=J.visibleRangeForPosition(new g(V,1)))===null||$===void 0?void 0:$.left)!==null&&X!==void 0?X:0;for(let A of B){let D=A.column===-1?P+(A.visibleColumn-1)*this._spaceWidth:J.visibleRangeForPosition(new g(V,A.column)).left;if(D>q||this._maxIndentLeft>0&&D>this._maxIndentLeft)break;let M=A.horizontalLine?A.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",R=A.horizontalLine?((Z=(Y=J.visibleRangeForPosition(new g(V,A.horizontalLine.endColumn)))===null||Y===void 0?void 0:Y.left)!==null&&Z!==void 0?Z:D+this._spaceWidth)-D:this._spaceWidth;K+=`<div class="core-guide ${A.className} ${M}" style="left:${D}px;height:${U}px;width:${R}px"></div>`}j[W]=K}this._renderResult=j}getGuidesByLine(J,$,X){let Y=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(J,$,X,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?AZ.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?AZ.EnabledForActive:AZ.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,Z=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(J,$):null,Q=0,G=0,q=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&X){let H=this._context.viewModel.getActiveIndentGuide(X.lineNumber,J,$);Q=H.startLineNumber,G=H.endLineNumber,q=H.indent}let{indentSize:U}=this._context.viewModel.model.getOptions(),z=[];for(let H=J;H<=$;H++){let j=[];z.push(j);let V=Y?Y[H-J]:[],W=new I7(V),B=Z?Z[H-J]:0;for(let K=1;K<=B;K++){let P=(K-1)*U+1,A=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||V.length===0)&&Q<=H&&H<=G&&K===q;j.push(...W.takeWhile((M)=>M.visibleColumn<P)||[]);let D=W.peek();if(!D||D.visibleColumn!==P||D.horizontalLine)j.push(new I$(P,-1,`core-guide-indent lvl-${(K-1)%30}`+(A?" indent-active":""),null,-1,-1))}j.push(...W.takeWhile((K)=>!0)||[])}return z}render(J,$){if(!this._renderResult)return"";let X=$-J;if(X<0||X>=this._renderResult.length)return"";return this._renderResult[X]}};F7((J,$)=>{let X=[{bracketColor:MD,guideColor:xd,guideColorActive:fd},{bracketColor:OD,guideColor:bd,guideColorActive:gd},{bracketColor:_D,guideColor:Sd,guideColorActive:pd},{bracketColor:ND,guideColor:Cd,guideColorActive:md},{bracketColor:TD,guideColor:vd,guideColorActive:ud},{bracketColor:wD,guideColor:hd,guideColorActive:cd}],Y=new mD,Z=[{indentColor:K3,indentColorActive:A3},{indentColor:Bd,indentColorActive:Dd},{indentColor:Fd,indentColorActive:Rd},{indentColor:Kd,indentColorActive:Md},{indentColor:Ad,indentColorActive:Od},{indentColor:Pd,indentColorActive:_d}],Q=X.map((q)=>{var U,z;let H=J.getColor(q.bracketColor),j=J.getColor(q.guideColor),V=J.getColor(q.guideColorActive),W=$z((U=$z(j))!==null&&U!==void 0?U:H===null||H===void 0?void 0:H.transparent(0.3)),B=$z((z=$z(V))!==null&&z!==void 0?z:H);if(!W||!B)return;return{guideColor:W,guideColorActive:B}}).filter(OY),G=Z.map((q)=>{let U=J.getColor(q.indentColor),z=J.getColor(q.indentColorActive),H=$z(U),j=$z(z);if(!H||!j)return;return{indentColor:H,indentColorActive:j}}).filter(OY);if(Q.length>0){for(let q=0;q<30;q++){let U=Q[q%Q.length];$.addRule(`.monaco-editor .${Y.getInlineClassNameOfLevel(q).replace(/ /g,".")} { --guide-color: ${U.guideColor}; --guide-color-active: ${U.guideColorActive}; }`)}$.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),$.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),$.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),$.addRule(`.monaco-editor .vertical.${Y.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),$.addRule(`.monaco-editor .horizontal-top.${Y.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),$.addRule(`.monaco-editor .horizontal-bottom.${Y.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(G.length>0){for(let q=0;q<30;q++){let U=G[q%G.length];$.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${q} { --indent-color: ${U.indentColor}; --indent-color-active: ${U.indentColorActive}; }`)}$.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),$.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}})});var Is=w(()=>{K0(".mtkcontrol{color:#fff!important;background:#960000!important}.mtkoverflow{background-color:var(--vscode-button-background,var(--vscode-editor-background));color:var(--vscode-button-foreground,var(--vscode-editor-foreground));border-style:solid;border-width:1px;border-color:var(--vscode-contrastBorder);cursor:pointer;border-radius:2px;padding:4px}.mtkoverflow:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-editor.no-user-select .lines-content,.monaco-editor.no-user-select .view-line,.monaco-editor.no-user-select .view-lines{-webkit-user-select:none;user-select:none}.monaco-editor.mac .lines-content:hover,.monaco-editor.mac .view-line:hover,.monaco-editor.mac .view-lines:hover{-webkit-user-select:text;-ms-user-select:text;user-select:text}.monaco-editor.enable-user-select{user-select:initial;-webkit-user-select:initial}.monaco-editor .view-lines{white-space:nowrap}.monaco-editor .view-line{width:100%;position:absolute}.monaco-editor .mtkw{color:var(--vscode-editorWhitespace-foreground)!important}.monaco-editor .mtkz{display:inline-block;color:var(--vscode-editorWhitespace-foreground)!important}")});class hV{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;let J=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=J.left,this._clientRectScale=J.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){if(!this._clientRectRead)this.readClientRect();return this._clientRectDeltaLeft}get clientRectScale(){if(!this._clientRectRead)this.readClientRect();return this._clientRectScale}constructor(J,$){this._domNode=J,this.endNode=$,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class ys{constructor(){this._currentVisibleRange=new k(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(J){this._currentVisibleRange=J}}class xs{constructor(J,$,X,Y,Z,Q,G){this.minimalReveal=J,this.lineNumber=$,this.startColumn=X,this.endColumn=Y,this.startScrollTop=Z,this.stopScrollTop=Q,this.scrollType=G,this.type="range",this.minLineNumber=$,this.maxLineNumber=$}}class bs{constructor(J,$,X,Y,Z){this.minimalReveal=J,this.selections=$,this.startScrollTop=X,this.stopScrollTop=Y,this.scrollType=Z,this.type="selections";let Q=$[0].startLineNumber,G=$[0].endLineNumber;for(let q=1,U=$.length;q<U;q++){let z=$[q];Q=Math.min(Q,z.startLineNumber),G=Math.max(G,z.endLineNumber)}this.minLineNumber=Q,this.maxLineNumber=G}}var fV;var Ss=w(()=>{LD();e1();L1();Is();HJ();uU();fD();W7();xL();i0();fV=class fV extends w6{constructor(J,$){super(J);this._linesContent=$,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new bV(this),this.domNode=this._visibleLines.domNode;let X=this._context.configuration,Y=this._context.configuration.options,Z=Y.get(50),Q=Y.get(144);this._lineHeight=Y.get(66),this._typicalHalfwidthCharacterWidth=Z.typicalHalfwidthCharacterWidth,this._isViewportWrapping=Q.isViewportWrapping,this._revealHorizontalRightPadding=Y.get(99),this._cursorSurroundingLines=Y.get(29),this._cursorSurroundingLinesStyle=Y.get(30),this._canUseLayerHinting=!Y.get(32),this._viewLineOptions=new HD(X,this._context.theme.type),L8.write(this.domNode,8),this.domNode.setClassName(`view-lines ${BZ}`),S6(this.domNode,Z),this._maxLineWidth=0,this._asyncUpdateLineWidths=new H6(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new H6(()=>{this._checkMonospaceFontAssumptions()},2000),this._lastRenderedData=new ys,this._horizontalRevealRequest=null,this._stickyScrollEnabled=Y.get(114).enabled,this._maxNumberStickyLines=Y.get(114).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new I9(this._viewLineOptions)}onConfigurationChanged(J){if(this._visibleLines.onConfigurationChanged(J),J.hasChanged(144))this._maxLineWidth=0;let $=this._context.configuration.options,X=$.get(50),Y=$.get(144);if(this._lineHeight=$.get(66),this._typicalHalfwidthCharacterWidth=X.typicalHalfwidthCharacterWidth,this._isViewportWrapping=Y.isViewportWrapping,this._revealHorizontalRightPadding=$.get(99),this._cursorSurroundingLines=$.get(29),this._cursorSurroundingLinesStyle=$.get(30),this._canUseLayerHinting=!$.get(32),this._stickyScrollEnabled=$.get(114).enabled,this._maxNumberStickyLines=$.get(114).maxLineCount,S6(this.domNode,X),this._onOptionsMaybeChanged(),J.hasChanged(143))this._maxLineWidth=0;return!0}_onOptionsMaybeChanged(){let J=this._context.configuration,$=new HD(J,this._context.theme.type);if(!this._viewLineOptions.equals($)){this._viewLineOptions=$;let X=this._visibleLines.getStartLineNumber(),Y=this._visibleLines.getEndLineNumber();for(let Z=X;Z<=Y;Z++)this._visibleLines.getVisibleLine(Z).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(J){let $=this._visibleLines.getStartLineNumber(),X=this._visibleLines.getEndLineNumber(),Y=!1;for(let Z=$;Z<=X;Z++)Y=this._visibleLines.getVisibleLine(Z).onSelectionChanged()||Y;return Y}onDecorationsChanged(J){{let $=this._visibleLines.getStartLineNumber(),X=this._visibleLines.getEndLineNumber();for(let Y=$;Y<=X;Y++)this._visibleLines.getVisibleLine(Y).onDecorationsChanged()}return!0}onFlushed(J){let $=this._visibleLines.onFlushed(J);return this._maxLineWidth=0,$}onLinesChanged(J){return this._visibleLines.onLinesChanged(J)}onLinesDeleted(J){return this._visibleLines.onLinesDeleted(J)}onLinesInserted(J){return this._visibleLines.onLinesInserted(J)}onRevealRangeRequest(J){let $=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),J.source,J.minimalReveal,J.range,J.selections,J.verticalType);if($===-1)return!1;let X=this._context.viewLayout.validateScrollPosition({scrollTop:$});if(J.revealHorizontal){if(J.range&&J.range.startLineNumber!==J.range.endLineNumber)X={scrollTop:X.scrollTop,scrollLeft:0};else if(J.range)this._horizontalRevealRequest=new xs(J.minimalReveal,J.range.startLineNumber,J.range.startColumn,J.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),X.scrollTop,J.scrollType);else if(J.selections&&J.selections.length>0)this._horizontalRevealRequest=new bs(J.minimalReveal,J.selections,this._context.viewLayout.getCurrentScrollTop(),X.scrollTop,J.scrollType)}else this._horizontalRevealRequest=null;let Z=Math.abs(this._context.viewLayout.getCurrentScrollTop()-X.scrollTop)<=this._lineHeight?1:J.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(X,Z),!0}onScrollChanged(J){if(this._horizontalRevealRequest&&J.scrollLeftChanged)this._horizontalRevealRequest=null;if(this._horizontalRevealRequest&&J.scrollTopChanged){let $=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),X=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);if(J.scrollTop<$||J.scrollTop>X)this._horizontalRevealRequest=null}return this.domNode.setWidth(J.scrollWidth),this._visibleLines.onScrollChanged(J)||!0}onTokensChanged(J){return this._visibleLines.onTokensChanged(J)}onZonesChanged(J){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(J)}onThemeChanged(J){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(J,$){let X=this._getViewLineDomNode(J);if(X===null)return null;let Y=this._getLineNumberFor(X);if(Y===-1)return null;if(Y<1||Y>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(Y)===1)return new g(Y,1);let Z=this._visibleLines.getStartLineNumber(),Q=this._visibleLines.getEndLineNumber();if(Y<Z||Y>Q)return null;let G=this._visibleLines.getVisibleLine(Y).getColumnOfNodeOffset(J,$),q=this._context.viewModel.getLineMinColumn(Y);if(G<q)G=q;return new g(Y,G)}_getViewLineDomNode(J){while(J&&J.nodeType===1){if(J.className===I9.CLASS_NAME)return J;J=J.parentElement}return null}_getLineNumberFor(J){let $=this._visibleLines.getStartLineNumber(),X=this._visibleLines.getEndLineNumber();for(let Y=$;Y<=X;Y++){let Z=this._visibleLines.getVisibleLine(Y);if(J===Z.getDomNode())return Y}return-1}getLineWidth(J){let $=this._visibleLines.getStartLineNumber(),X=this._visibleLines.getEndLineNumber();if(J<$||J>X)return-1;let Y=new hV(this.domNode.domNode,this._textRangeRestingSpot),Z=this._visibleLines.getVisibleLine(J).getWidth(Y);return this._updateLineWidthsSlowIfDomDidLayout(Y),Z}linesVisibleRangesForRange(J,$){if(this.shouldRender())return null;let X=J.endLineNumber,Y=k.intersectRanges(J,this._lastRenderedData.getCurrentVisibleRange());if(!Y)return null;let Z=[],Q=0,G=new hV(this.domNode.domNode,this._textRangeRestingSpot),q=0;if($)q=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new g(Y.startLineNumber,1)).lineNumber;let U=this._visibleLines.getStartLineNumber(),z=this._visibleLines.getEndLineNumber();for(let H=Y.startLineNumber;H<=Y.endLineNumber;H++){if(H<U||H>z)continue;let j=H===Y.startLineNumber?Y.startColumn:1,V=H!==Y.endLineNumber,W=V?this._context.viewModel.getLineMaxColumn(H):Y.endColumn,B=this._visibleLines.getVisibleLine(H).getVisibleRangesForRange(H,j,W,G);if(!B)continue;if($&&H<X){let K=q;if(q=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new g(H+1,1)).lineNumber,K!==q)B.ranges[B.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth}Z[Q++]=new EL(B.outsideRenderedLine,H,mU.from(B.ranges),V)}if(this._updateLineWidthsSlowIfDomDidLayout(G),Q===0)return null;return Z}_visibleRangesForLineRange(J,$,X){if(this.shouldRender())return null;if(J<this._visibleLines.getStartLineNumber()||J>this._visibleLines.getEndLineNumber())return null;let Y=new hV(this.domNode.domNode,this._textRangeRestingSpot),Z=this._visibleLines.getVisibleLine(J).getVisibleRangesForRange(J,$,X,Y);return this._updateLineWidthsSlowIfDomDidLayout(Y),Z}visibleRangeForPosition(J){let $=this._visibleRangesForLineRange(J.lineNumber,J.column,J.column);if(!$)return null;return new IL($.outsideRenderedLine,$.ranges[0].left)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(J){if(!J.didDomLayout)return;if(this._asyncUpdateLineWidths.isScheduled())return;this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()}_updateLineWidths(J){let $=this._visibleLines.getStartLineNumber(),X=this._visibleLines.getEndLineNumber(),Y=1,Z=!0;for(let Q=$;Q<=X;Q++){let G=this._visibleLines.getVisibleLine(Q);if(J&&!G.getWidthIsFast()){Z=!1;continue}Y=Math.max(Y,G.getWidth(null))}if(Z&&$===1&&X===this._context.viewModel.getLineCount())this._maxLineWidth=0;return this._ensureMaxLineWidth(Y),Z}_checkMonospaceFontAssumptions(){let J=-1,$=-1,X=this._visibleLines.getStartLineNumber(),Y=this._visibleLines.getEndLineNumber();for(let Z=X;Z<=Y;Z++){let Q=this._visibleLines.getVisibleLine(Z);if(Q.needsMonospaceFontCheck()){let G=Q.getWidth(null);if(G>$)$=G,J=Z}}if(J===-1)return;if(!this._visibleLines.getVisibleLine(J).monospaceAssumptionsAreValid())for(let Z=X;Z<=Y;Z++)this._visibleLines.getVisibleLine(Z).onMonospaceAssumptionsInvalidated()}prepareRender(){throw Error("Not supported")}render(){throw Error("Not supported")}renderText(J){if(this._visibleLines.renderLines(J),this._lastRenderedData.setCurrentVisibleRange(J.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let X=this._horizontalRevealRequest;if(J.startLineNumber<=X.minLineNumber&&X.maxLineNumber<=J.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let Y=this._computeScrollLeftToReveal(X);if(Y){if(!this._isViewportWrapping)this._ensureMaxLineWidth(Y.maxHorizontalOffset);this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:Y.scrollLeft},X.scrollType)}}}if(!this._updateLineWidthsFast())this._asyncUpdateLineWidths.schedule();else this._asyncUpdateLineWidths.cancel();if(N6&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let X=this._visibleLines.getStartLineNumber(),Y=this._visibleLines.getEndLineNumber();for(let Z=X;Z<=Y;Z++)if(this._visibleLines.getVisibleLine(Z).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let $=this._context.viewLayout.getCurrentScrollTop()-J.bigNumbersDelta;this._linesContent.setTop(-$),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(J){let $=Math.ceil(J);if(this._maxLineWidth<$)this._maxLineWidth=$,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth)}_computeScrollTopToRevealRange(J,$,X,Y,Z,Q){let{top:G,height:q}=J,U=G+q,z,H,j;if(Z&&Z.length>0){let P=Z[0].startLineNumber,A=Z[0].endLineNumber;for(let D=1,M=Z.length;D<M;D++){let R=Z[D];P=Math.min(P,R.startLineNumber),A=Math.max(A,R.endLineNumber)}z=!1,H=this._context.viewLayout.getVerticalOffsetForLineNumber(P),j=this._context.viewLayout.getVerticalOffsetForLineNumber(A)+this._lineHeight}else if(Y)z=!0,H=this._context.viewLayout.getVerticalOffsetForLineNumber(Y.startLineNumber),j=this._context.viewLayout.getVerticalOffsetForLineNumber(Y.endLineNumber)+this._lineHeight;else return-1;let V=($==="mouse"||X)&&this._cursorSurroundingLinesStyle==="default",W=0,B=0;if(!V){let P=Math.min(q/this._lineHeight/2,this._cursorSurroundingLines);if(this._stickyScrollEnabled)W=Math.max(P,this._maxNumberStickyLines)*this._lineHeight;else W=P*this._lineHeight;B=Math.max(0,P-1)*this._lineHeight}else if(!X)W=this._lineHeight;if(!X){if(Q===0||Q===4)B+=this._lineHeight}H-=W,j+=B;let K;if(j-H>q){if(!z)return-1;K=H}else if(Q===5||Q===6)if(Q===6&&G<=H&&j<=U)K=G;else{let P=Math.max(5*this._lineHeight,q*0.2),A=H-P,D=j-q;K=Math.max(D,A)}else if(Q===1||Q===2)if(Q===2&&G<=H&&j<=U)K=G;else{let P=(H+j)/2;K=Math.max(0,P-q/2)}else K=this._computeMinimumScrolling(G,U,H,j,Q===3,Q===4);return K}_computeScrollLeftToReveal(J){let $=this._context.viewLayout.getCurrentViewport(),X=this._context.configuration.options.get(143),Y=$.left,Z=Y+$.width-X.verticalScrollbarWidth,Q=1073741824,G=0;if(J.type==="range"){let U=this._visibleRangesForLineRange(J.lineNumber,J.startColumn,J.endColumn);if(!U)return null;for(let z of U.ranges)Q=Math.min(Q,Math.round(z.left)),G=Math.max(G,Math.round(z.left+z.width))}else for(let U of J.selections){if(U.startLineNumber!==U.endLineNumber)return null;let z=this._visibleRangesForLineRange(U.startLineNumber,U.startColumn,U.endColumn);if(!z)return null;for(let H of z.ranges)Q=Math.min(Q,Math.round(H.left)),G=Math.max(G,Math.round(H.left+H.width))}if(!J.minimalReveal)Q=Math.max(0,Q-fV.HORIZONTAL_EXTRA_PX),G+=this._revealHorizontalRightPadding;if(J.type==="selections"&&G-Q>$.width)return null;return{scrollLeft:this._computeMinimumScrolling(Y,Z,Q,G),maxHorizontalOffset:G}}_computeMinimumScrolling(J,$,X,Y,Z,Q){J=J|0,$=$|0,X=X|0,Y=Y|0,Z=!!Z,Q=!!Q;let G=$-J;if(Y-X<G){if(Z)return X;if(Q)return Math.max(0,Y-G);if(X<J)return X;else if(Y>$)return Math.max(0,Y-G)}else return X;return J}};fV.HORIZONTAL_EXTRA_PX=30});var Cs=w(()=>{K0(".monaco-editor .lines-decorations{background:#fff;position:absolute;top:0}.monaco-editor .margin-view-overlays .cldr{height:100%;position:absolute}")});var hk;var vs=w(()=>{Cs();gD();hk=class hk extends SV{constructor(J){super();this._context=J;let X=this._context.configuration.options.get(143);this._decorationsLeft=X.decorationsLeft,this._decorationsWidth=X.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){let X=this._context.configuration.options.get(143);return this._decorationsLeft=X.decorationsLeft,this._decorationsWidth=X.decorationsWidth,!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}_getDecorations(J){var $,X;let Y=J.getDecorationsInViewport(),Z=[],Q=0;for(let G=0,q=Y.length;G<q;G++){let U=Y[G],z=U.options.linesDecorationsClassName,H=U.options.zIndex;if(z)Z[Q++]=new Jz(U.range.startLineNumber,U.range.endLineNumber,z,($=U.options.linesDecorationsTooltip)!==null&&$!==void 0?$:null,H);let j=U.options.firstLineDecorationClassName;if(j)Z[Q++]=new Jz(U.range.startLineNumber,U.range.startLineNumber,j,(X=U.options.linesDecorationsTooltip)!==null&&X!==void 0?X:null,H)}return Z}prepareRender(J){let $=J.visibleRange.startLineNumber,X=J.visibleRange.endLineNumber,Y=this._render($,X,this._getDecorations(J)),Z=this._decorationsLeft.toString(),Q=this._decorationsWidth.toString(),G='" style="left:'+Z+"px;width:"+Q+'px;"></div>',q=[];for(let U=$;U<=X;U++){let z=U-$,H=Y[z].getDecorations(),j="";for(let V of H){let W='<div class="cldr '+V.className;if(V.tooltip!==null)W+='" title="'+V.tooltip;W+=G,j+=W}q[z]=j}this._renderResult=q}render(J,$){if(!this._renderResult)return"";return this._renderResult[$-J]}}});var hs=w(()=>{K0(".monaco-editor .margin-view-overlays .cmdr{width:100%;height:100%;position:absolute;left:0}")});var fk;var fs=w(()=>{hs();gD();fk=class fk extends SV{constructor(J){super();this._context=J,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){return!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}_getDecorations(J){let $=J.getDecorationsInViewport(),X=[],Y=0;for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=G.options.marginClassName,U=G.options.zIndex;if(q)X[Y++]=new Jz(G.range.startLineNumber,G.range.endLineNumber,q,null,U)}return X}prepareRender(J){let $=J.visibleRange.startLineNumber,X=J.visibleRange.endLineNumber,Y=this._render($,X,this._getDecorations(J)),Z=[];for(let Q=$;Q<=X;Q++){let G=Q-$,q=Y[G].getDecorations(),U="";for(let z of q)U+='<div class="cmdr '+z.className+'" style=""></div>';Z[G]=U}this._renderResult=Z}render(J,$){if(!this._renderResult)return"";return this._renderResult[$-J]}}});var gs=w(()=>{K0(".monaco-editor .minimap.slider-mouseover .minimap-slider{opacity:0;transition:opacity .1s linear}.monaco-editor .minimap.slider-mouseover:hover .minimap-slider,.monaco-editor .minimap.slider-mouseover .minimap-slider.active{opacity:1}.monaco-editor .minimap-slider .minimap-slider-horizontal{background:var(--vscode-minimapSlider-background)}.monaco-editor .minimap-slider:hover .minimap-slider-horizontal{background:var(--vscode-minimapSlider-hoverBackground)}.monaco-editor .minimap-slider.active .minimap-slider-horizontal{background:var(--vscode-minimapSlider-activeBackground)}.monaco-editor .minimap-shadow-visible{box-shadow:var(--vscode-scrollbar-shadow)-6px 0 6px -6px inset}.monaco-editor .minimap-shadow-hidden{width:0;position:absolute}.monaco-editor .minimap-shadow-visible{width:6px;position:absolute;left:-6px}.monaco-editor.no-minimap-shadow .minimap-shadow-visible{width:1px;position:absolute;left:-1px}.minimap.autohide{opacity:0;transition:opacity .5s}.minimap.autohide:hover{opacity:1}.monaco-editor .minimap{z-index:5}")});class b9{constructor(J,$,X,Y){this._rgba8Brand=void 0,this.r=b9._clamp(J),this.g=b9._clamp($),this.b=b9._clamp(X),this.a=b9._clamp(Y)}equals(J){return this.r===J.r&&this.g===J.g&&this.b===J.b&&this.a===J.a}static _clamp(J){if(J<0)return 0;if(J>255)return 255;return J|0}}var gk=w(()=>{b9.Empty=new b9(0,0,0,0)});var M3;var pk=w(()=>{_0();z0();gk();c8();M3=class M3 extends m{static getInstance(){if(!this._INSTANCE)this._INSTANCE=FG(new M3);return this._INSTANCE}constructor(){super();this._onDidChange=new x,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register($6.onDidChange((J)=>{if(J.changedColorMap)this._updateColorMap()}))}_updateColorMap(){let J=$6.getColorMap();if(!J){this._colors=[b9.Empty],this._backgroundIsLight=!0;return}this._colors=[b9.Empty];for(let X=1;X<J.length;X++){let Y=J[X].rgba;this._colors[X]=new b9(Y.r,Y.g,Y.b,Math.round(Y.a*255))}let $=J[2].getRelativeLuminance();this._backgroundIsLight=$>=0.5,this._onDidChange.fire(void 0)}getColor(J){if(J<1||J>=this._colors.length)J=2;return this._colors[J]}backgroundIsLight(){return this._backgroundIsLight}};M3._INSTANCE=null});var ps,ms=(J,$)=>{if(J-=32,J<0||J>96){if($<=2)return(J+96)%96;return 95}return J};var mk=w(()=>{ps=(()=>{let J=[];for(let $=32;$<=126;$++)J.push($);return J.push(65533),J})()});class Xz{constructor(J,$){this.scale=$,this._minimapCharRendererBrand=void 0,this.charDataNormal=Xz.soften(J,0.8),this.charDataLight=Xz.soften(J,0.8333333333333334)}static soften(J,$){let X=new Uint8ClampedArray(J.length);for(let Y=0,Z=J.length;Y<Z;Y++)X[Y]=rG(J[Y]*$);return X}renderChar(J,$,X,Y,Z,Q,G,q,U,z,H){let j=1*this.scale,V=2*this.scale,W=H?1:V;if($+j>J.width||X+W>J.height){console.warn("bad render request outside image data");return}let B=z?this.charDataLight:this.charDataNormal,K=ms(Y,U),P=J.width*4,A=G.r,D=G.g,M=G.b,R=Z.r-A,O=Z.g-D,N=Z.b-M,T=Math.max(Q,q),S=J.data,v=K*j*V,l=X*P+$*4;for(let f=0;f<W;f++){let h=l;for(let L=0;L<j;L++){let b=B[v++]/255*(Q/255);S[h++]=A+R*b,S[h++]=D+O*b,S[h++]=M+N*b,S[h++]=T}l+=P}}blockRenderChar(J,$,X,Y,Z,Q,G,q){let U=1*this.scale,z=2*this.scale,H=q?1:z;if($+U>J.width||X+H>J.height){console.warn("bad render request outside image data");return}let j=J.width*4,V=0.5*(Z/255),W=Q.r,B=Q.g,K=Q.b,P=Y.r-W,A=Y.g-B,D=Y.b-K,M=W+P*V,R=B+A*V,O=K+D*V,N=Math.max(Z,G),T=J.data,S=X*j+$*4;for(let v=0;v<H;v++){let l=S;for(let f=0;f<U;f++)T[l++]=M,T[l++]=R,T[l++]=O,T[l++]=N;S+=j}}}var us=w(()=>{mk()});var cs,ls=(J)=>{let $=new Uint8ClampedArray(J.length/2);for(let X=0;X<J.length;X+=2)$[X>>1]=cs[J[X]]<<4|cs[J[X+1]]&15;return $},uk;var ds=w(()=>{cs={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15},uk={1:Y$(()=>ls("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Y$(()=>ls("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))}});class Yz{static create(J,$){if(this.lastCreated&&J===this.lastCreated.scale&&$===this.lastFontFamily)return this.lastCreated;let X;if(uk[J])X=new Xz(uk[J](),J);else X=Yz.createFromSampleData(Yz.createSampleData($).data,J);return this.lastFontFamily=$,this.lastCreated=X,X}static createSampleData(J){let $=document.createElement("canvas"),X=$.getContext("2d");$.style.height="16px",$.height=16,$.width=960,$.style.width="960px",X.fillStyle="#ffffff",X.font=`bold 16px ${J}`,X.textBaseline="middle";let Y=0;for(let Z of ps)X.fillText(String.fromCharCode(Z),Y,8),Y+=10;return X.getImageData(0,0,960,16)}static createFromSampleData(J,$){if(J.length!==61440)throw Error("Unexpected source in MinimapCharRenderer");let Y=Yz._downsample(J,$);return new Xz(Y,$)}static _downsampleChar(J,$,X,Y,Z){let Q=1*Z,G=2*Z,q=Y,U=0;for(let z=0;z<G;z++){let H=z/G*16,j=(z+1)/G*16;for(let V=0;V<Q;V++){let W=V/Q*10,B=(V+1)/Q*10,K=0,P=0;for(let D=H;D<j;D++){let M=$+Math.floor(D)*3840,R=1-(D-Math.floor(D));for(let O=W;O<B;O++){let N=1-(O-Math.floor(O)),T=M+Math.floor(O)*4,S=N*R;P+=S,K+=J[T]*J[T+3]/255*S}}let A=K/P;U=Math.max(U,A),X[q++]=rG(A)}}return U}static _downsample(J,$){let X=2*$*1*$,Y=X*96,Z=new Uint8ClampedArray(Y),Q=0,G=0,q=0;for(let U=0;U<96;U++)q=Math.max(q,this._downsampleChar(J,G,Z,Q,$)),Q+=X,G+=40;if(q>0){let U=255/q;for(let z=0;z<Y;z++)Z[z]*=U}return Z}}var ss=w(()=>{us();mk();ds()});class pV{constructor(J,$,X){let Y=J.options,Z=Y.get(141),Q=Y.get(143),G=Q.minimap,q=Y.get(50),U=Y.get(72);this.renderMinimap=G.renderMinimap,this.size=U.size,this.minimapHeightIsEditorHeight=G.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=Y.get(104),this.paddingTop=Y.get(83).top,this.paddingBottom=Y.get(83).bottom,this.showSlider=U.showSlider,this.autohide=U.autohide,this.pixelRatio=Z,this.typicalHalfwidthCharacterWidth=q.typicalHalfwidthCharacterWidth,this.lineHeight=Y.get(66),this.minimapLeft=G.minimapLeft,this.minimapWidth=G.minimapWidth,this.minimapHeight=Q.height,this.canvasInnerWidth=G.minimapCanvasInnerWidth,this.canvasInnerHeight=G.minimapCanvasInnerHeight,this.canvasOuterWidth=G.minimapCanvasOuterWidth,this.canvasOuterHeight=G.minimapCanvasOuterHeight,this.isSampling=G.minimapIsSampling,this.editorHeight=Q.height,this.fontScale=G.minimapScale,this.minimapLineHeight=G.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Y$(()=>Yz.create(this.fontScale,q.fontFamily)),this.defaultBackgroundColor=X.getColor(2),this.backgroundColor=pV._getMinimapBackground($,this.defaultBackgroundColor),this.foregroundAlpha=pV._getMinimapForegroundOpacity($)}static _getMinimapBackground(J,$){let X=J.getColor(Ll);if(X)return new b9(X.rgba.r,X.rgba.g,X.rgba.b,Math.round(255*X.rgba.a));return $}static _getMinimapForegroundOpacity(J){let $=J.getColor(kl);if($)return b9._clamp(Math.round(255*$.rgba.a));return 255}equals(J){return this.renderMinimap===J.renderMinimap&&this.size===J.size&&this.minimapHeightIsEditorHeight===J.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===J.scrollBeyondLastLine&&this.paddingTop===J.paddingTop&&this.paddingBottom===J.paddingBottom&&this.showSlider===J.showSlider&&this.autohide===J.autohide&&this.pixelRatio===J.pixelRatio&&this.typicalHalfwidthCharacterWidth===J.typicalHalfwidthCharacterWidth&&this.lineHeight===J.lineHeight&&this.minimapLeft===J.minimapLeft&&this.minimapWidth===J.minimapWidth&&this.minimapHeight===J.minimapHeight&&this.canvasInnerWidth===J.canvasInnerWidth&&this.canvasInnerHeight===J.canvasInnerHeight&&this.canvasOuterWidth===J.canvasOuterWidth&&this.canvasOuterHeight===J.canvasOuterHeight&&this.isSampling===J.isSampling&&this.editorHeight===J.editorHeight&&this.fontScale===J.fontScale&&this.minimapLineHeight===J.minimapLineHeight&&this.minimapCharWidth===J.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(J.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(J.backgroundColor)&&this.foregroundAlpha===J.foregroundAlpha}}class gV{constructor(J,$,X,Y,Z,Q,G,q,U){this.scrollTop=J,this.scrollHeight=$,this.sliderNeeded=X,this._computedSliderRatio=Y,this.sliderTop=Z,this.sliderHeight=Q,this.topPaddingLineCount=G,this.startLineNumber=q,this.endLineNumber=U}getDesiredScrollTopFromDelta(J){return Math.round(this.scrollTop+J/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(J){return Math.round((J-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(J){let $=Math.max(this.startLineNumber,J.startLineNumber),X=Math.min(this.endLineNumber,J.endLineNumber);if($>X)return null;return[$,X]}getYForLineNumber(J,$){return+(J-this.startLineNumber+this.topPaddingLineCount)*$}static create(J,$,X,Y,Z,Q,G,q,U,z,H){let{pixelRatio:j,minimapLineHeight:V}=J,W=Math.floor(J.canvasInnerHeight/V),B=J.lineHeight;if(J.minimapHeightIsEditorHeight){let O=q*J.lineHeight+J.paddingTop+J.paddingBottom;if(J.scrollBeyondLastLine)O+=Math.max(0,Z-J.lineHeight-J.paddingBottom);let N=Math.max(1,Math.floor(Z*Z/O)),T=Math.max(0,J.minimapHeight-N),S=T/(z-Z),v=U*S,l=T>0,f=Math.floor(J.canvasInnerHeight/J.minimapLineHeight),h=Math.floor(J.paddingTop/J.lineHeight);return new gV(U,z,l,S,v,N,h,1,Math.min(G,f))}let K;if(Q&&X!==G){let O=X-$+1;K=Math.floor(O*V/j)}else{let O=Z/B;K=Math.floor(O*V/j)}let P=Math.floor(J.paddingTop/B),A=Math.floor(J.paddingBottom/B);if(J.scrollBeyondLastLine){let O=Z/B;A=Math.max(A,O-1)}let D;if(A>0){let O=Z/B;D=(P+G+A-O-1)*V/j}else D=Math.max(0,(P+G)*V/j-K);D=Math.min(J.minimapHeight-K,D);let M=D/(z-Z),R=U*M;if(W>=P+G+A){let O=D>0;return new gV(U,z,O,M,R,K,P,1,G)}else{let O;if($>1)O=$+P;else O=Math.max(1,U/B);let N,T=Math.max(1,Math.floor(O-R*j/V));if(T<P)N=P-T+1,T=1;else N=0,T=Math.max(1,T-P);if(H&&H.scrollHeight===z){if(H.scrollTop>U)T=Math.min(T,H.startLineNumber),N=Math.max(N,H.topPaddingLineCount);if(H.scrollTop<U)T=Math.max(T,H.startLineNumber),N=Math.min(N,H.topPaddingLineCount)}let S=Math.min(G,T-N+W-1),v=(U-Y)/B,l;if(U>=J.paddingTop)l=($-T+N+v)*V/j;else l=U/J.paddingTop*(N+v)*V/j;return new gV(U,z,!0,M,l,K,N,T,S)}}}class mV{constructor(J){this.dy=J}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}class ck{constructor(J,$,X){this.renderedLayout=J,this._imageData=$,this._renderedLines=new hD(()=>mV.INVALID),this._renderedLines._set(J.startLineNumber,X)}linesEquals(J){if(!this.scrollEquals(J))return!1;let X=this._renderedLines._get().lines;for(let Y=0,Z=X.length;Y<Z;Y++)if(X[Y].dy===-1)return!1;return!0}scrollEquals(J){return this.renderedLayout.startLineNumber===J.startLineNumber&&this.renderedLayout.endLineNumber===J.endLineNumber}_get(){let J=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:J.rendLineNumberStart,lines:J.lines}}onLinesChanged(J,$){return this._renderedLines.onLinesChanged(J,$)}onLinesDeleted(J,$){this._renderedLines.onLinesDeleted(J,$)}onLinesInserted(J,$){this._renderedLines.onLinesInserted(J,$)}onTokensChanged(J){return this._renderedLines.onTokensChanged(J)}}class dk{constructor(J,$,X,Y){this._backgroundFillData=dk._createBackgroundFillData($,X,Y),this._buffers=[J.createImageData($,X),J.createImageData($,X)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let J=this._buffers[this._lastUsedBuffer];return J.data.set(this._backgroundFillData),J}static _createBackgroundFillData(J,$,X){let{r:Y,g:Z,b:Q,a:G}=X,q=new Uint8ClampedArray(J*$*4),U=0;for(let z=0;z<$;z++)for(let H=0;H<J;H++)q[U]=Y,q[U+1]=Z,q[U+2]=Q,q[U+3]=G,U+=4;return q}}class uV{static compute(J,$,X){if(J.renderMinimap===0||!J.isSampling)return[null,[]];let{minimapLineCount:Y}=HG.computeContainedMinimapLineCount({viewLineCount:$,scrollBeyondLastLine:J.scrollBeyondLastLine,paddingTop:J.paddingTop,paddingBottom:J.paddingBottom,height:J.editorHeight,lineHeight:J.lineHeight,pixelRatio:J.pixelRatio}),Z=$/Y,Q=Z/2;if(!X||X.minimapLines.length===0){let K=[];if(K[0]=1,Y>1){for(let P=0,A=Y-1;P<A;P++)K[P]=Math.round(P*Z+Q);K[Y-1]=$}return[new uV(Z,K),[]]}let G=X.minimapLines,q=G.length,U=[],z=0,H=0,j=1,V=10,W=[],B=null;for(let K=0;K<Y;K++){let P=Math.max(j,Math.round(K*Z)),A=Math.max(P,Math.round((K+1)*Z));while(z<q&&G[z]<P){if(W.length<V){let M=z+1+H;if(B&&B.type==="deleted"&&B._oldIndex===z-1)B.deleteToLineNumber++;else B={type:"deleted",_oldIndex:z,deleteFromLineNumber:M,deleteToLineNumber:M},W.push(B);H--}z++}let D;if(z<q&&G[z]<=A)D=G[z],z++;else{if(K===0)D=1;else if(K+1===Y)D=$;else D=Math.round(K*Z+Q);if(W.length<V){let M=z+1+H;if(B&&B.type==="inserted"&&B._i===K-1)B.insertToLineNumber++;else B={type:"inserted",_i:K,insertFromLineNumber:M,insertToLineNumber:M},W.push(B);H++}}U[K]=D,j=D}if(W.length<V)while(z<q){let K=z+1+H;if(B&&B.type==="deleted"&&B._oldIndex===z-1)B.deleteToLineNumber++;else B={type:"deleted",_oldIndex:z,deleteFromLineNumber:K,deleteToLineNumber:K},W.push(B);H--,z++}else W=[{type:"flush"}];return[new uV(Z,U),W]}constructor(J,$){this.samplingRatio=J,this.minimapLines=$}modelLineToMinimapLine(J){return Math.min(this.minimapLines.length,Math.max(1,Math.round(J/this.samplingRatio)))}modelLineRangeToMinimapLineRange(J,$){let X=this.modelLineToMinimapLine(J)-1;while(X>0&&this.minimapLines[X-1]>=J)X--;let Y=this.modelLineToMinimapLine($)-1;while(Y+1<this.minimapLines.length&&this.minimapLines[Y+1]<=$)Y++;if(X===Y){let Z=this.minimapLines[X];if(Z<J||Z>$)return null}return[X+1,Y+1]}decorationLineRangeToMinimapLineRange(J,$){let X=this.modelLineToMinimapLine(J),Y=this.modelLineToMinimapLine($);if(J!==$&&Y===X)if(Y===this.minimapLines.length){if(X>1)X--}else Y++;return[X,Y]}onLinesDeleted(J){let $=J.toLineNumber-J.fromLineNumber+1,X=this.minimapLines.length,Y=0;for(let Z=this.minimapLines.length-1;Z>=0;Z--){if(this.minimapLines[Z]<J.fromLineNumber)break;if(this.minimapLines[Z]<=J.toLineNumber)this.minimapLines[Z]=Math.max(1,J.fromLineNumber-1),X=Math.min(X,Z),Y=Math.max(Y,Z);else this.minimapLines[Z]-=$}return[X,Y]}onLinesInserted(J){let $=J.toLineNumber-J.fromLineNumber+1;for(let X=this.minimapLines.length-1;X>=0;X--){if(this.minimapLines[X]<J.fromLineNumber)break;this.minimapLines[X]+=$}}}class lk{constructor(J,$,X){this._startLineNumber=J,this._endLineNumber=$,this._defaultValue=X,this._values=[];for(let Y=0,Z=this._endLineNumber-this._startLineNumber+1;Y<Z;Y++)this._values[Y]=X}has(J){return this.get(J)!==this._defaultValue}set(J,$){if(J<this._startLineNumber||J>this._endLineNumber)return;this._values[J-this._startLineNumber]=$}get(J){if(J<this._startLineNumber||J>this._endLineNumber)return this._defaultValue;return this._values[J-this._startLineNumber]}}var dZ0=140,sZ0=2,sk,uD;var as=w(()=>{gs();T0();PV();z0();L1();X1();fD();W7();O8();i0();gk();pk();NJ();i8();o5();g4();ss();O9();mV.INVALID=new mV(-1);sk=class sk extends w6{constructor(J){super(J);this.tokensColorTracker=M3.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new pV(this._context.configuration,this._context.theme,this.tokensColorTracker);let[$]=uV.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=$,this._shouldCheckSampling=!1,this._actual=new uD(J.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let J=new pV(this._context.configuration,this._context.theme,this.tokensColorTracker);if(this.options.equals(J))return!1;return this.options=J,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0}onConfigurationChanged(J){return this._onOptionsMaybeChanged()}onCursorStateChanged(J){return this._selections=J.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(J){if(J.affectsMinimap)return this._actual.onDecorationsChanged();return!1}onFlushed(J){if(this._samplingState)this._shouldCheckSampling=!0;return this._actual.onFlushed()}onLinesChanged(J){if(this._samplingState){let $=this._samplingState.modelLineRangeToMinimapLineRange(J.fromLineNumber,J.fromLineNumber+J.count-1);if($)return this._actual.onLinesChanged($[0],$[1]-$[0]+1);else return!1}else return this._actual.onLinesChanged(J.fromLineNumber,J.count)}onLinesDeleted(J){if(this._samplingState){let[$,X]=this._samplingState.onLinesDeleted(J);if($<=X)this._actual.onLinesChanged($+1,X-$+1);return this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(J.fromLineNumber,J.toLineNumber)}onLinesInserted(J){if(this._samplingState)return this._samplingState.onLinesInserted(J),this._shouldCheckSampling=!0,!0;else return this._actual.onLinesInserted(J.fromLineNumber,J.toLineNumber)}onScrollChanged(J){return this._actual.onScrollChanged()}onThemeChanged(J){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(J){if(this._samplingState){let $=[];for(let X of J.ranges){let Y=this._samplingState.modelLineRangeToMinimapLineRange(X.fromLineNumber,X.toLineNumber);if(Y)$.push({fromLineNumber:Y[0],toLineNumber:Y[1]})}if($.length)return this._actual.onTokensChanged($);else return!1}else return this._actual.onTokensChanged(J.ranges)}onTokensColorsChanged(J){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(J){return this._actual.onZonesChanged()}prepareRender(J){if(this._shouldCheckSampling)this._shouldCheckSampling=!1,this._recreateLineSampling()}render(J){let $=J.visibleRange.startLineNumber,X=J.visibleRange.endLineNumber;if(this._samplingState)$=this._samplingState.modelLineToMinimapLine($),X=this._samplingState.modelLineToMinimapLine(X);let Y={viewportContainsWhitespaceGaps:J.viewportData.whitespaceViewportData.length>0,scrollWidth:J.scrollWidth,scrollHeight:J.scrollHeight,viewportStartLineNumber:$,viewportEndLineNumber:X,viewportStartLineNumberVerticalOffset:J.getVerticalOffsetForLineNumber($),scrollTop:J.scrollTop,scrollLeft:J.scrollLeft,viewportWidth:J.viewportWidth,viewportHeight:J.viewportHeight};this._actual.render(Y)}_recreateLineSampling(){this._minimapSelections=null;let J=Boolean(this._samplingState),[$,X]=uV.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=$,J&&this._samplingState)for(let Y of X)switch(Y.type){case"deleted":this._actual.onLinesDeleted(Y.deleteFromLineNumber,Y.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(Y.insertFromLineNumber,Y.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){if(this._samplingState)return this._samplingState.minimapLines.length;return this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(J){if(this._samplingState)return this._context.viewModel.getLineContent(this._samplingState.minimapLines[J-1]);return this._context.viewModel.getLineContent(J)}getLineMaxColumn(J){if(this._samplingState)return this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[J-1]);return this._context.viewModel.getLineMaxColumn(J)}getMinimapLinesRenderingData(J,$,X){if(this._samplingState){let Y=[];for(let Z=0,Q=$-J+1;Z<Q;Z++)if(X[Z])Y[Z]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[J+Z-1]);else Y[Z]=null;return Y}return this._context.viewModel.getMinimapLinesRenderingData(J,$,X).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(let J of this._selections){let[$,X]=this._samplingState.decorationLineRangeToMinimapLineRange(J.startLineNumber,J.endLineNumber);this._minimapSelections.push(new p0($,J.startColumn,X,J.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(J,$){let X;if(this._samplingState){let Z=this._samplingState.minimapLines[J-1],Q=this._samplingState.minimapLines[$-1];X=new k(Z,1,Q,this._context.viewModel.getLineMaxColumn(Q))}else X=new k(J,1,$,this._context.viewModel.getLineMaxColumn($));let Y=this._context.viewModel.getMinimapDecorationsInRange(X);if(this._samplingState){let Z=[];for(let Q of Y){if(!Q.options.minimap)continue;let G=Q.range,q=this._samplingState.modelLineToMinimapLine(G.startLineNumber),U=this._samplingState.modelLineToMinimapLine(G.endLineNumber);Z.push(new VV(new k(q,G.startColumn,U,G.endColumn),Q.options))}return Z}return Y}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(J){if(this._samplingState)J=this._samplingState.minimapLines[J-1];this._context.viewModel.revealRange("mouse",!1,new k(J,1,J,1),1,0)}setScrollTop(J){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:J},1)}};uD=class uD extends m{constructor(J,$){super();this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=J,this._model=$,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(_L),this._domNode=Y1(document.createElement("div")),L8.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Y1(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Y1(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Y1(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Y1(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Y1(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=q6(this._domNode.domNode,U0.POINTER_DOWN,(X)=>{if(X.preventDefault(),this._model.options.renderMinimap===0)return;if(!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(X.button===0&&this._lastRenderData){let U=g5(this._slider.domNode),z=U.top+U.height/2;this._startSliderDragging(X,z,this._lastRenderData.renderedLayout)}return}let Z=this._model.options.minimapLineHeight,Q=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*X.offsetY,q=Math.floor(Q/Z)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;q=Math.min(q,this._model.getLineCount()),this._model.revealLineNumber(q)}),this._sliderPointerMoveMonitor=new XZ,this._sliderPointerDownListener=q6(this._slider.domNode,U0.POINTER_DOWN,(X)=>{if(X.preventDefault(),X.stopPropagation(),X.button===0&&this._lastRenderData)this._startSliderDragging(X,X.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=b1.addTarget(this._domNode.domNode),this._sliderTouchStartListener=r(this._domNode.domNode,f1.Start,(X)=>{if(X.preventDefault(),X.stopPropagation(),this._lastRenderData)this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(X)},{passive:!1}),this._sliderTouchMoveListener=r(this._domNode.domNode,f1.Change,(X)=>{if(X.preventDefault(),X.stopPropagation(),this._lastRenderData&&this._gestureInProgress)this.scrollDueToTouchEvent(X)},{passive:!1}),this._sliderTouchEndListener=q6(this._domNode.domNode,f1.End,(X)=>{X.preventDefault(),X.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(J,$,X){if(!J.target||!(J.target instanceof Element))return;let Y=J.pageX;this._slider.toggleClassName("active",!0);let Z=(Q,G)=>{let q=g5(this._domNode.domNode),U=Math.min(Math.abs(G-Y),Math.abs(G-q.left),Math.abs(G-q.left-q.width));if(p6&&U>dZ0){this._model.setScrollTop(X.scrollTop);return}let z=Q-$;this._model.setScrollTop(X.getDesiredScrollTopFromDelta(z))};if(J.pageY!==$)Z(J.pageY,Y);this._sliderPointerMoveMonitor.startMonitoring(J.target,J.pointerId,J.buttons,(Q)=>Z(Q.pageY,Q.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(J){let $=this._domNode.domNode.getBoundingClientRect().top,X=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(J.pageY-$);this._model.setScrollTop(X)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){let J=["minimap"];if(this._model.options.showSlider==="always")J.push("slider-always");else J.push("slider-mouseover");if(this._model.options.autohide)J.push("autohide");return J.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){if(!this._buffers){if(this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0)this._buffers=new dk(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)}return this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(J,$){if(this._lastRenderData)return this._lastRenderData.onLinesChanged(J,$);return!1}onLinesDeleted(J,$){var X;return(X=this._lastRenderData)===null||X===void 0||X.onLinesDeleted(J,$),!0}onLinesInserted(J,$){var X;return(X=this._lastRenderData)===null||X===void 0||X.onLinesInserted(J,$),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(_L),this._renderDecorations=!0,!0}onTokensChanged(J){if(this._lastRenderData)return this._lastRenderData.onTokensChanged(J);return!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(J){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}if(J.scrollLeft+J.viewportWidth>=J.scrollWidth)this._shadow.setClassName("minimap-shadow-hidden");else this._shadow.setClassName("minimap-shadow-visible");let X=gV.create(this._model.options,J.viewportStartLineNumber,J.viewportEndLineNumber,J.viewportStartLineNumberVerticalOffset,J.viewportHeight,J.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),J.scrollTop,J.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(X.sliderNeeded?"block":"none"),this._slider.setTop(X.sliderTop),this._slider.setHeight(X.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(X.sliderHeight),this.renderDecorations(X),this._lastRenderData=this.renderLines(X)}renderDecorations(J){if(this._renderDecorations){this._renderDecorations=!1;let $=this._model.getSelections();$.sort(k.compareRangesUsingStarts);let X=this._model.getMinimapDecorationsInViewport(J.startLineNumber,J.endLineNumber);X.sort((j,V)=>(j.options.zIndex||0)-(V.options.zIndex||0));let{canvasInnerWidth:Y,canvasInnerHeight:Z}=this._model.options,Q=this._model.options.minimapLineHeight,G=this._model.options.minimapCharWidth,q=this._model.getOptions().tabSize,U=this._decorationsCanvas.domNode.getContext("2d");U.clearRect(0,0,Y,Z);let z=new lk(J.startLineNumber,J.endLineNumber,!1);this._renderSelectionLineHighlights(U,$,z,J,Q),this._renderDecorationsLineHighlights(U,X,z,J,Q);let H=new lk(J.startLineNumber,J.endLineNumber,null);this._renderSelectionsHighlights(U,$,H,J,Q,q,G,Y),this._renderDecorationsHighlights(U,X,H,J,Q,q,G,Y)}}_renderSelectionLineHighlights(J,$,X,Y,Z){if(!this._selectionColor||this._selectionColor.isTransparent())return;J.fillStyle=this._selectionColor.transparent(0.5).toString();let Q=0,G=0;for(let q of $){let U=Y.intersectWithViewport(q);if(!U)continue;let[z,H]=U;for(let W=z;W<=H;W++)X.set(W,!0);let j=Y.getYForLineNumber(z,Z),V=Y.getYForLineNumber(H,Z);if(G>=j)G=V;else{if(G>Q)J.fillRect(wY,Q,J.canvas.width,G-Q);Q=j,G=V}}if(G>Q)J.fillRect(wY,Q,J.canvas.width,G-Q)}_renderDecorationsLineHighlights(J,$,X,Y,Z){let Q=new Map;for(let G=$.length-1;G>=0;G--){let q=$[G],U=q.options.minimap;if(!U||U.position!==_J.Inline)continue;let z=Y.intersectWithViewport(q.range);if(!z)continue;let[H,j]=z,V=U.getColor(this._theme.value);if(!V||V.isTransparent())continue;let W=Q.get(V.toString());if(!W)W=V.transparent(0.5).toString(),Q.set(V.toString(),W);J.fillStyle=W;for(let B=H;B<=j;B++){if(X.has(B))continue;X.set(B,!0);let K=Y.getYForLineNumber(H,Z);J.fillRect(wY,K,J.canvas.width,Z)}}}_renderSelectionsHighlights(J,$,X,Y,Z,Q,G,q){if(!this._selectionColor||this._selectionColor.isTransparent())return;for(let U of $){let z=Y.intersectWithViewport(U);if(!z)continue;let[H,j]=z;for(let V=H;V<=j;V++)this.renderDecorationOnLine(J,X,U,this._selectionColor,Y,V,Z,Z,Q,G,q)}}_renderDecorationsHighlights(J,$,X,Y,Z,Q,G,q){for(let U of $){let z=U.options.minimap;if(!z)continue;let H=Y.intersectWithViewport(U.range);if(!H)continue;let[j,V]=H,W=z.getColor(this._theme.value);if(!W||W.isTransparent())continue;for(let B=j;B<=V;B++)switch(z.position){case _J.Inline:this.renderDecorationOnLine(J,X,U.range,W,Y,B,Z,Z,Q,G,q);continue;case _J.Gutter:{let K=Y.getYForLineNumber(B,Z),P=2;this.renderDecoration(J,W,2,K,sZ0,Z);continue}}}}renderDecorationOnLine(J,$,X,Y,Z,Q,G,q,U,z,H){let j=Z.getYForLineNumber(Q,q);if(j+G<0||j>this._model.options.canvasInnerHeight)return;let{startLineNumber:V,endLineNumber:W}=X,B=V===Q?X.startColumn:1,K=W===Q?X.endColumn:this._model.getLineMaxColumn(Q),P=this.getXOffsetForPosition($,Q,B,U,z,H),A=this.getXOffsetForPosition($,Q,K,U,z,H);this.renderDecoration(J,Y,P,j,A-P,G)}getXOffsetForPosition(J,$,X,Y,Z,Q){if(X===1)return wY;if((X-1)*Z>=Q)return Q;let q=J.get($);if(!q){let U=this._model.getLineContent($);q=[wY];let z=wY;for(let H=1;H<U.length+1;H++){let j=U.charCodeAt(H-1),V=j===9?Y*Z:R4(j)?2*Z:Z,W=z+V;if(W>=Q){q[H]=Q;break}q[H]=W,z=W}J.set($,q)}if(X-1<q.length)return q[X-1];return Q}renderDecoration(J,$,X,Y,Z,Q){J.fillStyle=$&&$.toString()||"",J.fillRect(X,Y,Z,Q)}renderLines(J){let{startLineNumber:$,endLineNumber:X}=J,Y=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(J)){let b=this._lastRenderData._get();return new ck(J,b.imageData,b.lines)}let Z=this._getBuffer();if(!Z)return null;let[Q,G,q]=uD._renderUntouchedLines(Z,J.topPaddingLineCount,$,X,Y,this._lastRenderData),U=this._model.getMinimapLinesRenderingData($,X,q),z=this._model.getOptions().tabSize,H=this._model.options.defaultBackgroundColor,j=this._model.options.backgroundColor,V=this._model.options.foregroundAlpha,W=this._model.tokensColorTracker,B=W.backgroundIsLight(),K=this._model.options.renderMinimap,P=this._model.options.charRenderer(),A=this._model.options.fontScale,D=this._model.options.minimapCharWidth,R=(K===1?2:3)*A,O=Y>R?Math.floor((Y-R)/2):0,N=j.a/255,T=new b9(Math.round((j.r-H.r)*N+H.r),Math.round((j.g-H.g)*N+H.g),Math.round((j.b-H.b)*N+H.b),255),S=J.topPaddingLineCount*Y,v=[];for(let b=0,p=X-$+1;b<p;b++){if(q[b])uD._renderLine(Z,T,j.a,B,K,D,W,V,P,S,O,z,U[b],A,Y);v[b]=new mV(S),S+=Y}let l=Q===-1?0:Q,h=(G===-1?Z.height:G)-l;return this._canvas.domNode.getContext("2d").putImageData(Z,0,0,0,l,Z.width,h),new ck(J,Z,v)}static _renderUntouchedLines(J,$,X,Y,Z,Q){let G=[];if(!Q){for(let S=0,v=Y-X+1;S<v;S++)G[S]=!0;return[-1,-1,G]}let q=Q._get(),U=q.imageData.data,z=q.rendLineNumberStart,H=q.lines,j=H.length,V=J.width,W=J.data,B=(Y-X+1)*Z*V*4,K=-1,P=-1,A=-1,D=-1,M=-1,R=-1,O=$*Z;for(let S=X;S<=Y;S++){let v=S-X,l=S-z,f=l>=0&&l<j?H[l].dy:-1;if(f===-1){G[v]=!0,O+=Z;continue}let h=f*V*4,L=(f+Z)*V*4,b=O*V*4,p=(O+Z)*V*4;if(D===h&&R===b)D=L,R=p;else{if(A!==-1){if(W.set(U.subarray(A,D),M),K===-1&&A===0&&A===M)K=D;if(P===-1&&D===B&&A===M)P=A}A=h,D=L,M=b,R=p}G[v]=!1,O+=Z}if(A!==-1){if(W.set(U.subarray(A,D),M),K===-1&&A===0&&A===M)K=D;if(P===-1&&D===B&&A===M)P=A}let N=K===-1?-1:K/(V*4),T=P===-1?-1:P/(V*4);return[N,T,G]}static _renderLine(J,$,X,Y,Z,Q,G,q,U,z,H,j,V,W,B){let{content:K,tokens:P}=V,A=J.width-Q,D=B===1,M=wY,R=0,O=0;for(let N=0,T=P.getCount();N<T;N++){let S=P.getEndOffset(N),v=P.getForeground(N),l=G.getColor(v);for(;R<S;R++){if(M>A)return;let f=K.charCodeAt(R);if(f===9){let h=j-(R+O)%j;O+=h-1,M+=h*Q}else if(f===32)M+=Q;else{let h=R4(f)?2:1;for(let L=0;L<h;L++){if(Z===2)U.blockRenderChar(J,M,z+H,l,q,$,X,D);else U.renderChar(J,M,z+H,f,l,q,$,X,W,Y,D);if(M+=Q,M>A)return}}}}}}});var rs=w(()=>{K0(".monaco-editor .overlayWidgets{position:absolute;top:0;left:0}")});var ak;var is=w(()=>{rs();W7();T0();ak=class ak extends w6{constructor(J,$){super(J);this._viewDomNode=$;let Y=this._context.configuration.options.get(143);this._widgets={},this._verticalScrollbarWidth=Y.verticalScrollbarWidth,this._minimapWidth=Y.minimap.minimapWidth,this._horizontalScrollbarHeight=Y.horizontalScrollbarHeight,this._editorHeight=Y.height,this._editorWidth=Y.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Y1(document.createElement("div")),L8.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Y1(document.createElement("div")),L8.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(J){let X=this._context.configuration.options.get(143);return this._verticalScrollbarWidth=X.verticalScrollbarWidth,this._minimapWidth=X.minimap.minimapWidth,this._horizontalScrollbarHeight=X.horizontalScrollbarHeight,this._editorHeight=X.height,this._editorWidth=X.width,!0}addWidget(J){let $=Y1(J.getDomNode());if(this._widgets[J.getId()]={widget:J,preference:null,domNode:$},$.setPosition("absolute"),$.setAttribute("widgetId",J.getId()),J.allowEditorOverflow)this.overflowingOverlayWidgetsDomNode.appendChild($);else this._domNode.appendChild($);this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(J,$){let X=this._widgets[J.getId()];if(X.preference===$)return this._updateMaxMinWidth(),!1;return X.preference=$,this.setShouldRender(),this._updateMaxMinWidth(),!0}removeWidget(J){let $=J.getId();if(this._widgets.hasOwnProperty($)){let Y=this._widgets[$].domNode.domNode;delete this._widgets[$],Y.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var J,$;let X=0,Y=Object.keys(this._widgets);for(let Z=0,Q=Y.length;Z<Q;Z++){let G=Y[Z],U=($=(J=this._widgets[G].widget).getMinContentWidthInPx)===null||$===void 0?void 0:$.call(J);if(typeof U<"u")X=Math.max(X,U)}this._context.viewLayout.setOverlayWidgetsMinWidth(X)}_renderWidget(J){let $=J.domNode;if(J.preference===null){$.setTop("");return}if(J.preference===0)$.setTop(0),$.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(J.preference===1){let X=$.domNode.clientHeight;$.setTop(this._editorHeight-X-2*this._horizontalScrollbarHeight),$.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else if(J.preference===2)$.setTop(0),$.domNode.style.right="50%";else{let{top:X,left:Y}=J.preference;if(this._context.configuration.options.get(42)&&J.widget.allowEditorOverflow){let Q=this._viewDomNodeRect;$.setTop(X+Q.top),$.setLeft(Y+Q.left),$.setPosition("fixed")}else $.setTop(X),$.setLeft(Y),$.setPosition("absolute")}}prepareRender(J){this._viewDomNodeRect=g5(this._viewDomNode.domNode)}render(J){this._domNode.setWidth(this._editorWidth);let $=Object.keys(this._widgets);for(let X=0,Y=$.length;X<Y;X++){let Z=$[X];this._renderWidget(this._widgets[Z])}}}});class ns{constructor(J,$){let X=J.options;this.lineHeight=X.get(66),this.pixelRatio=X.get(141),this.overviewRulerLanes=X.get(82),this.renderBorder=X.get(81);let Y=$.getColor(Td);this.borderColor=Y?Y.toString():null,this.hideCursor=X.get(59);let Z=$.getColor(RD);this.cursorColor=Z?Z.transparent(0.7).toString():null,this.themeType=$.type;let Q=X.get(72),G=Q.enabled,q=Q.side,U=$.getColor(wd),z=$6.getDefaultBackground();if(U)this.backgroundColor=U;else if(G&&q==="right")this.backgroundColor=z;else this.backgroundColor=null;let j=X.get(143).overviewRuler;if(this.top=j.top,this.right=j.right,this.domWidth=j.width,this.domHeight=j.height,this.overviewRulerLanes===0)this.canvasWidth=0,this.canvasHeight=0;else this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0;let[V,W]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=V,this.w=W}_initLanes(J,$,X){let Y=$-J;if(X>=3){let Z=Math.floor(Y/3),Q=Math.floor(Y/3),G=Y-Z-Q,q=J,U=q+Z,z=q+Z+G;return[[0,q,U,q,z,q,U,q],[0,Z,G,Z+G,Q,Z+G+Q,G+Q,Z+G+Q]]}else if(X===2){let Z=Math.floor(Y/2),Q=Y-Z,G=J,q=G+Z;return[[0,G,G,G,q,G,G,G],[0,Z,Z,Z,Q,Z+Q,Z+Q,Z+Q]]}else{let Z=J,Q=Y;return[[0,Z,Z,Z,Z,Z,Z,Z],[0,Q,Q,Q,Q,Q,Q,Q]]}}equals(J){return this.lineHeight===J.lineHeight&&this.pixelRatio===J.pixelRatio&&this.overviewRulerLanes===J.overviewRulerLanes&&this.renderBorder===J.renderBorder&&this.borderColor===J.borderColor&&this.hideCursor===J.hideCursor&&this.cursorColor===J.cursorColor&&this.themeType===J.themeType&&n.equals(this.backgroundColor,J.backgroundColor)&&this.top===J.top&&this.right===J.right&&this.domWidth===J.domWidth&&this.domHeight===J.domHeight&&this.canvasWidth===J.canvasWidth&&this.canvasHeight===J.canvasHeight}}var rk;var os=w(()=>{T9();W7();c8();E$();NJ();V1();rk=class rk extends w6{constructor(J){super(J);this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Y1(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=$6.onDidChange(($)=>{if($.changedColorMap)this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(J){let $=new ns(this._context.configuration,this._context.theme);if(this._settings&&this._settings.equals($))return!1;if(this._settings=$,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,J)this._render();return!0}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(J){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(J){this._cursorPositions=[];for(let $=0,X=J.selections.length;$<X;$++)this._cursorPositions[$]=J.selections[$].getPosition();return this._cursorPositions.sort(g.compare),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(J){if(J.affectsOverviewRuler)return this._markRenderingIsMaybeNeeded();return!1}onFlushed(J){return this._markRenderingIsNeeded()}onScrollChanged(J){return J.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(J){return this._markRenderingIsNeeded()}onThemeChanged(J){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(J){}render(J){this._render(),this._actualShouldRender=0}_render(){let J=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(J?n.Format.CSS.formatHexA(J):""),this._domNode.setDisplay("none");return}let $=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if($.sort(Z3.compareByRenderingProps),this._actualShouldRender===1&&!Z3.equalsArr(this._renderedDecorations,$))this._actualShouldRender=2;if(this._actualShouldRender===1&&!B6(this._renderedCursorPositions,this._cursorPositions,(W,B)=>W.lineNumber===B.lineNumber))this._actualShouldRender=2;if(this._actualShouldRender===1)return;this._renderedDecorations=$,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");let X=this._settings.canvasWidth,Y=this._settings.canvasHeight,Z=this._settings.lineHeight,Q=this._context.viewLayout,G=this._context.viewLayout.getScrollHeight(),q=Y/G,U=6*this._settings.pixelRatio|0,z=U/2|0,H=this._domNode.domNode.getContext("2d");if(J)if(J.isOpaque())H.fillStyle=n.Format.CSS.formatHexA(J),H.fillRect(0,0,X,Y);else H.clearRect(0,0,X,Y),H.fillStyle=n.Format.CSS.formatHexA(J),H.fillRect(0,0,X,Y);else H.clearRect(0,0,X,Y);let j=this._settings.x,V=this._settings.w;for(let W of $){let{color:B,data:K}=W;H.fillStyle=B;let P=0,A=0,D=0;for(let M=0,R=K.length/3;M<R;M++){let O=K[3*M],N=K[3*M+1],T=K[3*M+2],S=Q.getVerticalOffsetForLineNumber(N)*q|0,v=(Q.getVerticalOffsetForLineNumber(T)+Z)*q|0;if(v-S<U){let f=(S+v)/2|0;if(f<z)f=z;else if(f+z>Y)f=Y-z;S=f-z,v=f+z}if(S>D+1||O!==P){if(M!==0)H.fillRect(j[P],A,V[P],D-A);P=O,A=S,D=v}else if(v>D)D=v}H.fillRect(j[P],A,V[P],D-A)}if(!this._settings.hideCursor&&this._settings.cursorColor){let W=2*this._settings.pixelRatio|0,B=W/2|0,K=this._settings.x[7],P=this._settings.w[7];H.fillStyle=this._settings.cursorColor;let A=-100,D=-100;for(let M=0,R=this._cursorPositions.length;M<R;M++){let O=this._cursorPositions[M],N=Q.getVerticalOffsetForLineNumber(O.lineNumber)*q|0;if(N<B)N=B;else if(N+B>Y)N=Y-B;let T=N-B,S=T+W;if(T>D+1){if(M!==0)H.fillRect(K,A,P,D-A);A=T,D=S}else if(S>D)D=S}H.fillRect(K,A,P,D-A)}if(this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0)H.beginPath(),H.lineWidth=1,H.strokeStyle=this._settings.borderColor,H.moveTo(0,0),H.lineTo(0,Y),H.stroke(),H.moveTo(0,0),H.lineTo(X,0),H.stroke()}}});class ik{constructor(J,$,X){this._colorZoneBrand=void 0,this.from=J|0,this.to=$|0,this.colorId=X|0}static compare(J,$){if(J.colorId===$.colorId){if(J.from===$.from)return J.to-$.to;return J.from-$.from}return J.colorId-$.colorId}}class cD{constructor(J,$,X,Y){this._overviewRulerZoneBrand=void 0,this.startLineNumber=J,this.endLineNumber=$,this.heightInLines=X,this.color=Y,this._colorZone=null}static compare(J,$){if(J.color===$.color){if(J.startLineNumber===$.startLineNumber){if(J.heightInLines===$.heightInLines)return J.endLineNumber-$.endLineNumber;return J.heightInLines-$.heightInLines}return J.startLineNumber-$.startLineNumber}return J.color<$.color?-1:1}setColorZone(J){this._colorZone=J}getColorZones(){return this._colorZone}}class nk{constructor(J){this._getVerticalOffsetForLine=J,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(J){this._zones=J,this._zones.sort(cD.compare)}setLineHeight(J){if(this._lineHeight===J)return!1;return this._lineHeight=J,this._colorZonesInvalid=!0,!0}setPixelRatio(J){this._pixelRatio=J,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(J){if(this._domWidth===J)return!1;return this._domWidth=J,this._colorZonesInvalid=!0,!0}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(J){if(this._domHeight===J)return!1;return this._domHeight=J,this._colorZonesInvalid=!0,!0}getOuterHeight(){return this._outerHeight}setOuterHeight(J){if(this._outerHeight===J)return!1;return this._outerHeight=J,this._colorZonesInvalid=!0,!0}resolveColorZones(){let J=this._colorZonesInvalid,$=Math.floor(this._lineHeight),X=Math.floor(this.getCanvasHeight()),Y=Math.floor(this._outerHeight),Z=X/Y,Q=Math.floor(4*this._pixelRatio/2),G=[];for(let q=0,U=this._zones.length;q<U;q++){let z=this._zones[q];if(!J){let M=z.getColorZones();if(M){G.push(M);continue}}let H=this._getVerticalOffsetForLine(z.startLineNumber),j=z.heightInLines===0?this._getVerticalOffsetForLine(z.endLineNumber)+$:H+z.heightInLines*$,V=Math.floor(Z*H),W=Math.floor(Z*j),B=Math.floor((V+W)/2),K=W-B;if(K<Q)K=Q;if(B-K<0)B=K;if(B+K>X)B=X-K;let P=z.color,A=this._color2Id[P];if(!A)A=++this._lastAssignedId,this._color2Id[P]=A,this._id2Color[A]=P;let D=new ik(B-K,B+K,A);z.setColorZone(D),G.push(D)}return this._colorZonesInvalid=!1,G.sort(ik.compare),G}}var ok;var ts=w(()=>{pU();ok=class ok extends w${constructor(J,$){super();this._context=J;let X=this._context.configuration.options;this._domNode=Y1(document.createElement("canvas")),this._domNode.setClassName($),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new nk((Y)=>this._context.viewLayout.getVerticalOffsetForLineNumber(Y)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(X.get(66)),this._zoneManager.setPixelRatio(X.get(141)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(J){let $=this._context.configuration.options;if(J.hasChanged(66))this._zoneManager.setLineHeight($.get(66)),this._render();if(J.hasChanged(141))this._zoneManager.setPixelRatio($.get(141)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render();return!0}onFlushed(J){return this._render(),!0}onScrollChanged(J){if(J.scrollHeightChanged)this._zoneManager.setOuterHeight(J.scrollHeight),this._render();return!0}onZonesChanged(J){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(J){this._domNode.setTop(J.top),this._domNode.setRight(J.right);let $=!1;if($=this._zoneManager.setDOMWidth(J.width)||$,$=this._zoneManager.setDOMHeight(J.height)||$,$)this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()}setZones(J){this._zoneManager.setZones(J),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;let J=this._zoneManager.getCanvasWidth(),$=this._zoneManager.getCanvasHeight(),X=this._zoneManager.resolveColorZones(),Y=this._zoneManager.getId2Color(),Z=this._domNode.domNode.getContext("2d");if(Z.clearRect(0,0,J,$),X.length>0)this._renderOneLane(Z,X,Y,J);return!0}_renderOneLane(J,$,X,Y){let Z=0,Q=0,G=0;for(let q of $){let{colorId:U,from:z,to:H}=q;if(U!==Z)J.fillRect(0,Q,Y,G-Q),Z=U,J.fillStyle=X[Z],Q=z,G=H;else if(G>=z)G=Math.max(G,H);else J.fillRect(0,Q,Y,G-Q),Q=z,G=H}J.fillRect(0,Q,Y,G-Q)}}});var es=w(()=>{K0(".monaco-editor .view-ruler{box-shadow:1px 0 0 0 var(--vscode-editorRuler-foreground)inset;position:absolute;top:0}")});var tk;var Ja=w(()=>{es();W7();tk=class tk extends w6{constructor(J){super(J);this.domNode=Y1(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let $=this._context.configuration.options;this._rulers=$.get(101),this._typicalHalfwidthCharacterWidth=$.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(J){let $=this._context.configuration.options;return this._rulers=$.get(101),this._typicalHalfwidthCharacterWidth=$.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(J){return J.scrollHeightChanged}prepareRender(J){}_ensureRulersCount(){let J=this._renderedRulers.length,$=this._rulers.length;if(J===$)return;if(J<$){let{tabSize:Y}=this._context.viewModel.model.getOptions(),Z=Y,Q=$-J;while(Q>0){let G=Y1(document.createElement("div"));G.setClassName("view-ruler"),G.setWidth(Z),this.domNode.appendChild(G),this._renderedRulers.push(G),Q--}return}let X=J-$;while(X>0){let Y=this._renderedRulers.pop();this.domNode.removeChild(Y),X--}}render(J){this._ensureRulersCount();for(let $=0,X=this._rulers.length;$<X;$++){let Y=this._renderedRulers[$],Z=this._rulers[$];Y.setBoxShadow(Z.color?`1px 0 0 0 ${Z.color} inset`:""),Y.setHeight(Math.min(J.scrollHeight,1e6)),Y.setLeft(Z.column*this._typicalHalfwidthCharacterWidth)}}}});var $a=w(()=>{K0(".monaco-editor .scroll-decoration{height:6px;box-shadow:var(--vscode-scrollbar-shadow)0 6px 6px -6px inset;position:absolute;top:0;left:0}")});var ek;var Xa=w(()=>{$a();W7();ek=class ek extends w6{constructor(J){super(J);this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let X=this._context.configuration.options.get(102);this._useShadows=X.useShadows,this._domNode=Y1(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){let J=this._useShadows&&this._scrollTop>0;if(this._shouldShow!==J)return this._shouldShow=J,!0;return!1}getDomNode(){return this._domNode}_updateWidth(){let $=this._context.configuration.options.get(143);if($.minimap.renderMinimap===0||$.minimap.minimapWidth>0&&$.minimap.minimapLeft===0)this._width=$.width;else this._width=$.width-$.verticalScrollbarWidth}onConfigurationChanged(J){let X=this._context.configuration.options.get(102);return this._useShadows=X.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(J){return this._scrollTop=J.scrollTop,this._updateShouldShow()}prepareRender(J){}render(J){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}});var Ya=w(()=>{K0(".monaco-editor .lines-content .cslr{position:absolute}.monaco-editor .focused .selected-text{background-color:var(--vscode-editor-selectionBackground)}.monaco-editor .selected-text{background-color:var(--vscode-editor-inactiveSelectionBackground)}.monaco-editor .top-left-radius{border-top-left-radius:3px}.monaco-editor .bottom-left-radius{border-bottom-left-radius:3px}.monaco-editor .top-right-radius{border-top-right-radius:3px}.monaco-editor .bottom-right-radius{border-bottom-right-radius:3px}.monaco-editor.hc-black .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-black .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-black .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-black .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor.hc-light .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-light .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-light .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-light .bottom-right-radius{border-bottom-right-radius:0}")});class Za{constructor(J){this.left=J.left,this.width=J.width,this.startStyle=null,this.endStyle=null}}class Qa{constructor(J,$){this.lineNumber=J,this.ranges=$}}function aZ0(J){return new Za(J)}function rZ0(J){return new Qa(J.lineNumber,J.ranges.map(aZ0))}function lD(J){return J<0?-J:J}var s6;var Ga=w(()=>{Ya();sQ();i8();G5();s6=class s6 extends x9{constructor(J){super();this._previousFrameVisibleRangesWithStyle=[],this._context=J;let $=this._context.configuration.options;this._lineHeight=$.get(66),this._roundedSelection=$.get(100),this._typicalHalfwidthCharacterWidth=$.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){let $=this._context.configuration.options;return this._lineHeight=$.get(66),this._roundedSelection=$.get(100),this._typicalHalfwidthCharacterWidth=$.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(J){return this._selections=J.selections.slice(0),!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}_visibleRangesHaveGaps(J){for(let $=0,X=J.length;$<X;$++)if(J[$].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(J,$,X){let Y=this._typicalHalfwidthCharacterWidth/4,Z=null,Q=null;if(X&&X.length>0&&$.length>0){let G=$[0].lineNumber;if(G===J.startLineNumber){for(let U=0;!Z&&U<X.length;U++)if(X[U].lineNumber===G)Z=X[U].ranges[0]}let q=$[$.length-1].lineNumber;if(q===J.endLineNumber){for(let U=X.length-1;!Q&&U>=0;U--)if(X[U].lineNumber===q)Q=X[U].ranges[0]}if(Z&&!Z.startStyle)Z=null;if(Q&&!Q.startStyle)Q=null}for(let G=0,q=$.length;G<q;G++){let U=$[G].ranges[0],z=U.left,H=U.left+U.width,j={top:0,bottom:0},V={top:0,bottom:0};if(G>0){let W=$[G-1].ranges[0].left,B=$[G-1].ranges[0].left+$[G-1].ranges[0].width;if(lD(z-W)<Y)j.top=2;else if(z>W)j.top=1;if(lD(H-B)<Y)V.top=2;else if(W<H&&H<B)V.top=1}else if(Z)j.top=Z.startStyle.top,V.top=Z.endStyle.top;if(G+1<q){let W=$[G+1].ranges[0].left,B=$[G+1].ranges[0].left+$[G+1].ranges[0].width;if(lD(z-W)<Y)j.bottom=2;else if(W<z&&z<B)j.bottom=1;if(lD(H-B)<Y)V.bottom=2;else if(H<B)V.bottom=1}else if(Q)j.bottom=Q.startStyle.bottom,V.bottom=Q.endStyle.bottom;U.startStyle=j,U.endStyle=V}}_getVisibleRangesWithStyle(J,$,X){let Z=($.linesVisibleRangesForRange(J,!0)||[]).map(rZ0);if(!this._visibleRangesHaveGaps(Z)&&this._roundedSelection)this._enrichVisibleRangesWithStyle($.visibleRange,Z,X);return Z}_createSelectionPiece(J,$,X,Y,Z){return'<div class="cslr '+X+'" style="top:'+J.toString()+"px;left:"+Y.toString()+"px;width:"+Z.toString()+"px;height:"+$+'px;"></div>'}_actualRenderOneSelection(J,$,X,Y){if(Y.length===0)return;let Z=!!Y[0].ranges[0].startStyle,Q=this._lineHeight.toString(),G=(this._lineHeight-1).toString(),q=Y[0].lineNumber,U=Y[Y.length-1].lineNumber;for(let z=0,H=Y.length;z<H;z++){let j=Y[z],V=j.lineNumber,W=V-$,B=X?V===U||V===q?G:Q:Q,K=X?V===q?1:0:0,P="",A="";for(let D=0,M=j.ranges.length;D<M;D++){let R=j.ranges[D];if(Z){let{startStyle:N,endStyle:T}=R;if(N.top===1||N.bottom===1){P+=this._createSelectionPiece(K,B,s6.SELECTION_CLASS_NAME,R.left-s6.ROUNDED_PIECE_WIDTH,s6.ROUNDED_PIECE_WIDTH);let S=s6.EDITOR_BACKGROUND_CLASS_NAME;if(N.top===1)S+=" "+s6.SELECTION_TOP_RIGHT;if(N.bottom===1)S+=" "+s6.SELECTION_BOTTOM_RIGHT;P+=this._createSelectionPiece(K,B,S,R.left-s6.ROUNDED_PIECE_WIDTH,s6.ROUNDED_PIECE_WIDTH)}if(T.top===1||T.bottom===1){P+=this._createSelectionPiece(K,B,s6.SELECTION_CLASS_NAME,R.left+R.width,s6.ROUNDED_PIECE_WIDTH);let S=s6.EDITOR_BACKGROUND_CLASS_NAME;if(T.top===1)S+=" "+s6.SELECTION_TOP_LEFT;if(T.bottom===1)S+=" "+s6.SELECTION_BOTTOM_LEFT;P+=this._createSelectionPiece(K,B,S,R.left+R.width,s6.ROUNDED_PIECE_WIDTH)}}let O=s6.SELECTION_CLASS_NAME;if(Z){let{startStyle:N,endStyle:T}=R;if(N.top===0)O+=" "+s6.SELECTION_TOP_LEFT;if(N.bottom===0)O+=" "+s6.SELECTION_BOTTOM_LEFT;if(T.top===0)O+=" "+s6.SELECTION_TOP_RIGHT;if(T.bottom===0)O+=" "+s6.SELECTION_BOTTOM_RIGHT}A+=this._createSelectionPiece(K,B,O,R.left,R.width)}J[W][0]+=P,J[W][1]+=A}}prepareRender(J){let $=[],X=J.visibleRange.startLineNumber,Y=J.visibleRange.endLineNumber;for(let Q=X;Q<=Y;Q++){let G=Q-X;$[G]=["",""]}let Z=[];for(let Q=0,G=this._selections.length;Q<G;Q++){let q=this._selections[Q];if(q.isEmpty()){Z[Q]=null;continue}let U=this._getVisibleRangesWithStyle(q,J,this._previousFrameVisibleRangesWithStyle[Q]);Z[Q]=U,this._actualRenderOneSelection($,X,this._selections.length>1,U)}this._previousFrameVisibleRangesWithStyle=Z,this._renderResult=$.map(([Q,G])=>Q+G)}render(J,$){if(!this._renderResult)return"";let X=$-J;if(X<0||X>=this._renderResult.length)return"";return this._renderResult[X]}};s6.SELECTION_CLASS_NAME="selected-text";s6.SELECTION_TOP_LEFT="top-left-radius";s6.SELECTION_BOTTOM_LEFT="bottom-left-radius";s6.SELECTION_TOP_RIGHT="top-right-radius";s6.SELECTION_BOTTOM_RIGHT="bottom-right-radius";s6.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";s6.ROUNDED_PIECE_WIDTH=10;F7((J,$)=>{let X=J.getColor(pc);if(X&&!X.isTransparent())$.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${X}; }`)})});var qa=w(()=>{K0(".monaco-editor .cursors-layer{position:absolute;top:0}.monaco-editor .cursors-layer>.cursor{box-sizing:border-box;position:absolute;overflow:hidden}.monaco-editor .cursors-layer.cursor-smooth-caret-animation>.cursor{transition:all 80ms}.monaco-editor .cursors-layer.cursor-block-outline-style>.cursor{border-style:solid;border-width:1px;background:0 0!important}.monaco-editor .cursors-layer.cursor-underline-style>.cursor{border-bottom-style:solid;border-bottom-width:2px;background:0 0!important}.monaco-editor .cursors-layer.cursor-underline-thin-style>.cursor{border-bottom-style:solid;border-bottom-width:1px;background:0 0!important}@keyframes monaco-cursor-smooth{0%,20%{opacity:1}60%,to{opacity:0}}@keyframes monaco-cursor-phase{0%,20%{opacity:1}90%,to{opacity:0}}@keyframes monaco-cursor-expand{0%,20%{transform:scaleY(1)}80%,to{transform:scaleY(0)}}.cursor-smooth{animation:.5s ease-in-out 20 alternate monaco-cursor-smooth}.cursor-phase{animation:.5s ease-in-out 20 alternate monaco-cursor-phase}.cursor-expand>.cursor{animation:.5s ease-in-out 20 alternate monaco-cursor-expand}")});class JE{constructor(J,$,X,Y,Z,Q,G){this.top=J,this.left=$,this.paddingLeft=X,this.width=Y,this.height=Z,this.textContent=Q,this.textContentClassName=G}}class dD{constructor(J){this._context=J;let $=this._context.configuration.options,X=$.get(50);this._cursorStyle=$.get(28),this._lineHeight=$.get(66),this._typicalHalfwidthCharacterWidth=X.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min($.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Y1(document.createElement("div")),this._domNode.setClassName(`cursor ${BZ}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),S6(this._domNode,X),this._domNode.setDisplay("none"),this._position=new g(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){if(!this._isVisible)this._domNode.setVisibility("inherit"),this._isVisible=!0}hide(){if(this._isVisible)this._domNode.setVisibility("hidden"),this._isVisible=!1}onConfigurationChanged(J){let $=this._context.configuration.options,X=$.get(50);return this._cursorStyle=$.get(28),this._lineHeight=$.get(66),this._typicalHalfwidthCharacterWidth=X.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min($.get(31),this._typicalHalfwidthCharacterWidth),S6(this._domNode,X),!0}onCursorPositionChanged(J,$){if($)this._domNode.domNode.style.transitionProperty="none";else this._domNode.domNode.style.transitionProperty="";return this._position=J,!0}_getGraphemeAwarePosition(){let{lineNumber:J,column:$}=this._position,X=this._context.viewModel.getLineContent(J),[Y,Z]=Lg(X,$-1);return[new g(J,Y+1),X.substring(Y,Z)]}_prepareRender(J){let $="",X="",[Y,Z]=this._getGraphemeAwarePosition();if(this._cursorStyle===h5.Line||this._cursorStyle===h5.LineThin){let j=J.visibleRangeForPosition(Y);if(!j||j.outsideRenderedLine)return null;let V=O0(this._domNode.domNode),W;if(this._cursorStyle===h5.Line){if(W=hT(V,this._lineCursorWidth>0?this._lineCursorWidth:2),W>2)$=Z,X=this._getTokenClassName(Y)}else W=hT(V,1);let B=j.left,K=0;if(W>=2&&B>=1)K=1,B-=K;let P=J.getVerticalOffsetForLineNumber(Y.lineNumber)-J.bigNumbersDelta;return new JE(P,B,K,W,this._lineHeight,$,X)}let Q=J.linesVisibleRangesForRange(new k(Y.lineNumber,Y.column,Y.lineNumber,Y.column+Z.length),!1);if(!Q||Q.length===0)return null;let G=Q[0];if(G.outsideRenderedLine||G.ranges.length===0)return null;let q=G.ranges[0],U=Z==="\t"?this._typicalHalfwidthCharacterWidth:q.width<1?this._typicalHalfwidthCharacterWidth:q.width;if(this._cursorStyle===h5.Block)$=Z,X=this._getTokenClassName(Y);let z=J.getVerticalOffsetForLineNumber(Y.lineNumber)-J.bigNumbersDelta,H=this._lineHeight;if(this._cursorStyle===h5.Underline||this._cursorStyle===h5.UnderlineThin)z+=this._lineHeight-2,H=2;return new JE(z,q.left,0,U,H,$,X)}_getTokenClassName(J){let $=this._context.viewModel.getViewLineData(J.lineNumber),X=$.tokens.findTokenIndexAtOffset(J.column-1);return $.tokens.getClassName(X)}prepareRender(J){this._renderData=this._prepareRender(J)}render(J){if(!this._renderData)return this._domNode.setDisplay("none"),null;if(this._lastRenderedContent!==this._renderData.textContent)this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent;return this._domNode.setClassName(`cursor ${BZ} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}}}var Ua=w(()=>{T0();X1();HJ();O8();i0();LD()});var Zz;var za=w(()=>{qa();e1();W7();Ua();O8();E$();G5();qZ();T0();Zz=class Zz extends w6{constructor(J){super(J);let $=this._context.configuration.options;this._readOnly=$.get(90),this._cursorBlinking=$.get(26),this._cursorStyle=$.get(28),this._cursorSmoothCaretAnimation=$.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new dD(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Y1(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new s8,this._cursorFlatBlinkInterval=new vG,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(J){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(J){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(J){let $=this._context.configuration.options;this._readOnly=$.get(90),this._cursorBlinking=$.get(26),this._cursorStyle=$.get(28),this._cursorSmoothCaretAnimation=$.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(J);for(let X=0,Y=this._secondaryCursors.length;X<Y;X++)this._secondaryCursors[X].onConfigurationChanged(J);return!0}_onCursorPositionChanged(J,$,X){let Y=this._secondaryCursors.length!==$.length||this._cursorSmoothCaretAnimation==="explicit"&&X!==3;if(this._primaryCursor.onCursorPositionChanged(J,Y),this._updateBlinking(),this._secondaryCursors.length<$.length){let Z=$.length-this._secondaryCursors.length;for(let Q=0;Q<Z;Q++){let G=new dD(this._context);this._domNode.domNode.insertBefore(G.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(G)}}else if(this._secondaryCursors.length>$.length){let Z=this._secondaryCursors.length-$.length;for(let Q=0;Q<Z;Q++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let Z=0;Z<$.length;Z++)this._secondaryCursors[Z].onCursorPositionChanged($[Z],Y)}onCursorStateChanged(J){let $=[];for(let Y=0,Z=J.selections.length;Y<Z;Y++)$[Y]=J.selections[Y].getPosition();this._onCursorPositionChanged($[0],$.slice(1),J.reason);let X=J.selections[0].isEmpty();if(this._selectionIsEmpty!==X)this._selectionIsEmpty=X,this._updateDomClassName();return!0}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onFocusChanged(J){return this._editorHasFocus=J.isFocused,this._updateBlinking(),!1}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return!0}onTokensChanged(J){let $=(X)=>{for(let Y=0,Z=J.ranges.length;Y<Z;Y++)if(J.ranges[Y].fromLineNumber<=X.lineNumber&&X.lineNumber<=J.ranges[Y].toLineNumber)return!0;return!1};if($(this._primaryCursor.getPosition()))return!0;for(let X of this._secondaryCursors)if($(X.getPosition()))return!0;return!1}onZonesChanged(J){return!0}_getCursorBlinking(){if(this._isComposingInput)return 0;if(!this._editorHasFocus)return 0;if(this._readOnly)return 5;return this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let J=this._getCursorBlinking(),$=J===0,X=J===5;if($)this._hide();else this._show();if(this._blinkingEnabled=!1,this._updateDomClassName(),!$&&!X)if(J===1)this._cursorFlatBlinkInterval.cancelAndSet(()=>{if(this._isVisible)this._hide();else this._show()},Zz.BLINK_INTERVAL,O0(this._domNode.domNode));else this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Zz.BLINK_INTERVAL)}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let J="cursors-layer";if(!this._selectionIsEmpty)J+=" has-selection";switch(this._cursorStyle){case h5.Line:J+=" cursor-line-style";break;case h5.Block:J+=" cursor-block-style";break;case h5.Underline:J+=" cursor-underline-style";break;case h5.LineThin:J+=" cursor-line-thin-style";break;case h5.BlockOutline:J+=" cursor-block-outline-style";break;case h5.UnderlineThin:J+=" cursor-underline-thin-style";break;default:J+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:J+=" cursor-blink";break;case 2:J+=" cursor-smooth";break;case 3:J+=" cursor-phase";break;case 4:J+=" cursor-expand";break;case 5:J+=" cursor-solid";break;default:J+=" cursor-solid"}else J+=" cursor-solid";if(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")J+=" cursor-smooth-caret-animation";return J}_show(){this._primaryCursor.show();for(let J=0,$=this._secondaryCursors.length;J<$;J++)this._secondaryCursors[J].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let J=0,$=this._secondaryCursors.length;J<$;J++)this._secondaryCursors[J].hide();this._isVisible=!1}prepareRender(J){this._primaryCursor.prepareRender(J);for(let $=0,X=this._secondaryCursors.length;$<X;$++)this._secondaryCursors[$].prepareRender(J)}render(J){let $=[],X=0,Y=this._primaryCursor.render(J);if(Y)$[X++]=Y;for(let Z=0,Q=this._secondaryCursors.length;Z<Q;Z++){let G=this._secondaryCursors[Z].render(J);if(G)$[X++]=G}this._renderData=$}getLastRenderData(){return this._renderData}};Zz.BLINK_INTERVAL=500;F7((J,$)=>{let X=J.getColor(RD);if(X){let Y=J.getColor(Vd);if(!Y)Y=X.opposite();if($.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${X}; border-color: ${X}; color: ${Y}; }`),wJ(J.type))$.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${Y}; border-right: 1px solid ${Y}; }`)}})});function iZ0(J,$){try{return J($)}catch(X){$1(X)}}var $E=()=>{throw Error("Invalid change accessor")},XE;var Ha=w(()=>{O1();W7();XE=class XE extends w6{constructor(J){super(J);let $=this._context.configuration.options,X=$.get(143);this._lineHeight=$.get(66),this._contentWidth=X.contentWidth,this._contentLeft=X.contentLeft,this.domNode=Y1(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Y1(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let J=this._context.viewLayout.getWhitespaces(),$=new Map;for(let Y of J)$.set(Y.id,Y);let X=!1;return this._context.viewModel.changeWhitespace((Y)=>{let Z=Object.keys(this._zones);for(let Q=0,G=Z.length;Q<G;Q++){let q=Z[Q],U=this._zones[q],z=this._computeWhitespaceProps(U.delegate);U.isInHiddenArea=z.isInHiddenArea;let H=$.get(q);if(H&&(H.afterLineNumber!==z.afterViewLineNumber||H.height!==z.heightInPx))Y.changeOneWhitespace(q,z.afterViewLineNumber,z.heightInPx),this._safeCallOnComputedHeight(U.delegate,z.heightInPx),X=!0}}),X}onConfigurationChanged(J){let $=this._context.configuration.options,X=$.get(143);if(this._lineHeight=$.get(66),this._contentWidth=X.contentWidth,this._contentLeft=X.contentLeft,J.hasChanged(66))this._recomputeWhitespacesProps();return!0}onLineMappingChanged(J){return this._recomputeWhitespacesProps()}onLinesDeleted(J){return!0}onScrollChanged(J){return J.scrollTopChanged||J.scrollWidthChanged}onZonesChanged(J){return!0}onLinesInserted(J){return!0}_getZoneOrdinal(J){var $,X;return(X=($=J.ordinal)!==null&&$!==void 0?$:J.afterColumn)!==null&&X!==void 0?X:1e4}_computeWhitespaceProps(J){if(J.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(J),minWidthInPx:this._minWidthInPixels(J)};let $;if(typeof J.afterColumn<"u")$=this._context.viewModel.model.validatePosition({lineNumber:J.afterLineNumber,column:J.afterColumn});else{let Q=this._context.viewModel.model.validatePosition({lineNumber:J.afterLineNumber,column:1}).lineNumber;$=new g(Q,this._context.viewModel.model.getLineMaxColumn(Q))}let X;if($.column===this._context.viewModel.model.getLineMaxColumn($.lineNumber))X=this._context.viewModel.model.validatePosition({lineNumber:$.lineNumber+1,column:1});else X=this._context.viewModel.model.validatePosition({lineNumber:$.lineNumber,column:$.column+1});let Y=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition($,J.afterColumnAffinity,!0),Z=J.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(X);return{isInHiddenArea:!Z,afterViewLineNumber:Y.lineNumber,heightInPx:Z?this._heightInPixels(J):0,minWidthInPx:this._minWidthInPixels(J)}}changeViewZones(J){let $=!1;return this._context.viewModel.changeWhitespace((X)=>{let Y={addZone:(Z)=>{return $=!0,this._addZone(X,Z)},removeZone:(Z)=>{if(!Z)return;$=this._removeZone(X,Z)||$},layoutZone:(Z)=>{if(!Z)return;$=this._layoutZone(X,Z)||$}};iZ0(J,Y),Y.addZone=$E,Y.removeZone=$E,Y.layoutZone=$E}),$}_addZone(J,$){let X=this._computeWhitespaceProps($),Z={whitespaceId:J.insertWhitespace(X.afterViewLineNumber,this._getZoneOrdinal($),X.heightInPx,X.minWidthInPx),delegate:$,isInHiddenArea:X.isInHiddenArea,isVisible:!1,domNode:Y1($.domNode),marginDomNode:$.marginDomNode?Y1($.marginDomNode):null};if(this._safeCallOnComputedHeight(Z.delegate,X.heightInPx),Z.domNode.setPosition("absolute"),Z.domNode.domNode.style.width="100%",Z.domNode.setDisplay("none"),Z.domNode.setAttribute("monaco-view-zone",Z.whitespaceId),this.domNode.appendChild(Z.domNode),Z.marginDomNode)Z.marginDomNode.setPosition("absolute"),Z.marginDomNode.domNode.style.width="100%",Z.marginDomNode.setDisplay("none"),Z.marginDomNode.setAttribute("monaco-view-zone",Z.whitespaceId),this.marginDomNode.appendChild(Z.marginDomNode);return this._zones[Z.whitespaceId]=Z,this.setShouldRender(),Z.whitespaceId}_removeZone(J,$){if(this._zones.hasOwnProperty($)){let X=this._zones[$];if(delete this._zones[$],J.removeWhitespace(X.whitespaceId),X.domNode.removeAttribute("monaco-visible-view-zone"),X.domNode.removeAttribute("monaco-view-zone"),X.domNode.domNode.parentNode.removeChild(X.domNode.domNode),X.marginDomNode)X.marginDomNode.removeAttribute("monaco-visible-view-zone"),X.marginDomNode.removeAttribute("monaco-view-zone"),X.marginDomNode.domNode.parentNode.removeChild(X.marginDomNode.domNode);return this.setShouldRender(),!0}return!1}_layoutZone(J,$){if(this._zones.hasOwnProperty($)){let X=this._zones[$],Y=this._computeWhitespaceProps(X.delegate);return X.isInHiddenArea=Y.isInHiddenArea,J.changeOneWhitespace(X.whitespaceId,Y.afterViewLineNumber,Y.heightInPx),this._safeCallOnComputedHeight(X.delegate,Y.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(J){if(this._zones.hasOwnProperty(J)){let $=this._zones[J];return Boolean($.delegate.suppressMouseDown)}return!1}_heightInPixels(J){if(typeof J.heightInPx==="number")return J.heightInPx;if(typeof J.heightInLines==="number")return this._lineHeight*J.heightInLines;return this._lineHeight}_minWidthInPixels(J){if(typeof J.minWidthInPx==="number")return J.minWidthInPx;return 0}_safeCallOnComputedHeight(J,$){if(typeof J.onComputedHeight==="function")try{J.onComputedHeight($)}catch(X){$1(X)}}_safeCallOnDomNodeTop(J,$){if(typeof J.onDomNodeTop==="function")try{J.onDomNodeTop($)}catch(X){$1(X)}}prepareRender(J){}render(J){let $=J.viewportData.whitespaceViewportData,X={},Y=!1;for(let Q of $){if(this._zones[Q.id].isInHiddenArea)continue;X[Q.id]=Q,Y=!0}let Z=Object.keys(this._zones);for(let Q=0,G=Z.length;Q<G;Q++){let q=Z[Q],U=this._zones[q],z=0,H=0,j="none";if(X.hasOwnProperty(q)){if(z=X[q].verticalOffset-J.bigNumbersDelta,H=X[q].height,j="block",!U.isVisible)U.domNode.setAttribute("monaco-visible-view-zone","true"),U.isVisible=!0;this._safeCallOnDomNodeTop(U.delegate,J.getScrolledTopFromAbsoluteTop(X[q].verticalOffset))}else{if(U.isVisible)U.domNode.removeAttribute("monaco-visible-view-zone"),U.isVisible=!1;this._safeCallOnDomNodeTop(U.delegate,J.getScrolledTopFromAbsoluteTop(-1e6))}if(U.domNode.setTop(z),U.domNode.setHeight(H),U.domNode.setDisplay(j),U.marginDomNode)U.marginDomNode.setTop(z),U.marginDomNode.setHeight(H),U.marginDomNode.setDisplay(j)}if(Y)this.domNode.setWidth(Math.max(J.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft)}}});var ja=w(()=>{K0(".monaco-editor .mwh{position:absolute;color:var(--vscode-editorWhitespace-foreground)!important}")});class YE{constructor(J){let $=J.options,X=$.get(50),Y=$.get(38);if(Y==="off")this.renderWhitespace="none",this.renderWithSVG=!1;else if(Y==="svg")this.renderWhitespace=$.get(98),this.renderWithSVG=!0;else this.renderWhitespace=$.get(98),this.renderWithSVG=!1;this.spaceWidth=X.spaceWidth,this.middotWidth=X.middotWidth,this.wsmiddotWidth=X.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=X.canUseHalfwidthRightwardsArrow,this.lineHeight=$.get(66),this.stopRenderingLineAfter=$.get(116)}equals(J){return this.renderWhitespace===J.renderWhitespace&&this.renderWithSVG===J.renderWithSVG&&this.spaceWidth===J.spaceWidth&&this.middotWidth===J.middotWidth&&this.wsmiddotWidth===J.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===J.canUseHalfwidthRightwardsArrow&&this.lineHeight===J.lineHeight&&this.stopRenderingLineAfter===J.stopRenderingLineAfter}}var ZE;var Va=w(()=>{ja();sQ();X1();DU();E$();ZE=class ZE extends x9{constructor(J){super();this._context=J,this._options=new YE(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(J){let $=new YE(this._context.configuration);if(this._options.equals($))return J.hasChanged(143);return this._options=$,!0}onCursorStateChanged(J){if(this._selection=J.selections,this._options.renderWhitespace==="selection")return!0;return!1}onDecorationsChanged(J){return!0}onFlushed(J){return!0}onLinesChanged(J){return!0}onLinesDeleted(J){return!0}onLinesInserted(J){return!0}onScrollChanged(J){return J.scrollTopChanged}onZonesChanged(J){return!0}prepareRender(J){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}let $=J.visibleRange.startLineNumber,Y=J.visibleRange.endLineNumber-$+1,Z=Array(Y);for(let G=0;G<Y;G++)Z[G]=!0;let Q=this._context.viewModel.getMinimapLinesRenderingData(J.viewportData.startLineNumber,J.viewportData.endLineNumber,Z);this._renderResult=[];for(let G=J.viewportData.startLineNumber;G<=J.viewportData.endLineNumber;G++){let q=G-J.viewportData.startLineNumber,U=Q.data[q],z=null;if(this._options.renderWhitespace==="selection"){let H=this._selection;for(let j of H){if(j.endLineNumber<G||j.startLineNumber>G)continue;let V=j.startLineNumber===G?j.startColumn:U.minColumn,W=j.endLineNumber===G?j.endColumn:U.maxColumn;if(V<W){if(!z)z=[];z.push(new HV(V-1,W-1))}}}this._renderResult[q]=this._applyRenderWhitespace(J,G,z,U)}}_applyRenderWhitespace(J,$,X,Y){if(this._options.renderWhitespace==="selection"&&!X)return"";if(this._options.renderWhitespace==="trailing"&&Y.continuesWithWrappedLine)return"";let Z=this._context.theme.getColor(CX),Q=this._options.renderWithSVG,G=Y.content,q=this._options.stopRenderingLineAfter===-1?G.length:Math.min(this._options.stopRenderingLineAfter,G.length),U=Y.continuesWithWrappedLine,z=Y.minColumn-1,H=this._options.renderWhitespace==="boundary",j=this._options.renderWhitespace==="trailing",V=this._options.lineHeight,W=this._options.middotWidth,B=this._options.wsmiddotWidth,K=this._options.spaceWidth,P=Math.abs(B-K),A=Math.abs(W-K),D=P<A?11825:183,M=this._options.canUseHalfwidthRightwardsArrow,R="",O=!1,N=c6(G),T;if(N===-1)O=!0,N=q,T=q;else T=r9(G);let S=0,v=X&&X[S],l=0;for(let f=z;f<q;f++){let h=G.charCodeAt(f);if(v&&f>=v.endOffset)S++,v=X&&X[S];if(h!==9&&h!==32)continue;if(j&&!O&&f<=T)continue;if(H&&f>=N&&f<=T&&h===32){let b=f-1>=0?G.charCodeAt(f-1):0,p=f+1<q?G.charCodeAt(f+1):0;if(b!==32&&p!==32)continue}if(H&&U&&f===q-1){let b=f-1>=0?G.charCodeAt(f-1):0;if(h===32&&(b!==32&&b!==9))continue}if(X&&(!v||v.startOffset>f||v.endOffset<=f))continue;let L=J.visibleRangeForPosition(new g($,f+1));if(!L)continue;if(Q)if(l=Math.max(l,L.left),h===9)R+=this._renderArrow(V,K,L.left);else R+=`<circle cx="${(L.left+K/2).toFixed(2)}" cy="${(V/2).toFixed(2)}" r="${(K/7).toFixed(2)}" />`;else if(h===9)R+=`<div class="mwh" style="left:${L.left}px;height:${V}px;">${M?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`;else R+=`<div class="mwh" style="left:${L.left}px;height:${V}px;">${String.fromCharCode(D)}</div>`}if(Q)return l=Math.round(l+K),`<svg style="position:absolute;width:${l}px;height:${V}px" viewBox="0 0 ${l} ${V}" xmlns="http://www.w3.org/2000/svg" fill="${Z}">`+R+"</svg>";return R}_renderArrow(J,$,X){let Y=$/7,Z=$,Q=J/2,G=X,q={x:0,y:Y/2},U={x:0.8*Z,y:q.y},z={x:U.x-0.2*U.x,y:U.y+0.2*U.x},H={x:z.x+0.1*U.x,y:z.y+0.1*U.x},j={x:H.x+0.35*U.x,y:H.y-0.35*U.x},V={x:j.x,y:-j.y},W={x:H.x,y:-H.y},B={x:z.x,y:-z.y},K={x:U.x,y:-U.y},P={x:q.x,y:-q.y};return`<path d="M ${[q,U,z,H,j,V,W,B,K,P].map((M)=>`${(G+M.x).toFixed(2)} ${(Q+M.y).toFixed(2)}`).join(" L ")}" />`}render(J,$){if(!this._renderResult)return"";let X=$-J;if(X<0||X>=this._renderResult.length)return"";return this._renderResult[X]}}});class QE{constructor(J,$,X,Y){this.selections=J,this.startLineNumber=$.startLineNumber|0,this.endLineNumber=$.endLineNumber|0,this.relativeVerticalOffset=$.relativeVerticalOffset,this.bigNumbersDelta=$.bigNumbersDelta|0,this.whitespaceViewportData=X,this._model=Y,this.visibleRange=new k($.startLineNumber,this._model.getLineMinColumn($.startLineNumber),$.endLineNumber,this._model.getLineMaxColumn($.endLineNumber))}getViewLineRenderingData(J){return this._model.getViewportViewLineRenderingData(this.visibleRange,J)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}var Wa=w(()=>{i0()});class GE{get type(){return this._theme.type}get value(){return this._theme}constructor(J){this._theme=J}update(J){this._theme=J}getColor(J){return this._theme.getColor(J)}}class qE{constructor(J,$,X){this.configuration=J,this.theme=new GE($),this.viewModel=X,this.viewLayout=X.viewLayout}addEventHandler(J){this.viewModel.addViewEventHandler(J)}removeEventHandler(J){this.viewModel.removeViewEventHandler(J)}}var Ba=()=>{};function tQ(J){try{return J()}catch($){return $1($),null}}class aD{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(J){return this._coordinatedRenderings.push(J),this._scheduleRender(J.window),{dispose:()=>{let $=this._coordinatedRenderings.indexOf(J);if($===-1)return;if(this._coordinatedRenderings.splice($,1),this._coordinatedRenderings.length===0){for(let[X,Y]of this._animationFrameRunners)Y.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(J){if(!this._animationFrameRunners.has(J)){let $=()=>{this._animationFrameRunners.delete(J),this._onRenderScheduled()};this._animationFrameRunners.set(J,XU(J,$,100))}}_onRenderScheduled(){let J=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(let X of J)tQ(()=>X.prepareRenderText());let $=[];for(let X=0,Y=J.length;X<Y;X++){let Z=J[X];$[X]=tQ(()=>Z.renderText())}for(let X=0,Y=J.length;X<Y;X++){let Z=J[X],Q=$[X];if(!Q)continue;let[G,q]=Q;tQ(()=>Z.prepareRender(G,q))}for(let X=0,Y=J.length;X<Y;X++){let Z=J[X],Q=$[X];if(!Q)continue;let[G,q]=Q;tQ(()=>Z.render(G,q))}}}var nZ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},oZ0=function(J,$){return function(X,Y){$(X,Y,J)}},sD;var Fa=w(()=>{T0();FL();O1();fL();qd();id();uU();Hs();Vs();W7();Ok();Bs();Ks();Ps();Rs();Ms();gD();Es();$k();Ss();vs();Xk();fs();as();is();os();ts();Ja();Xa();Ga();za();Ha();Va();i0();o5();O9();pU();Wa();Ba();s0();G5();sD=class extends w${constructor($,X,Y,Z,Q,G,q){super();this._instantiationService=q,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new p0(1,1,1,1)],this._renderAnimationFrame=null;let U=new Pk(X,Z,Q,$);this._context=new qE(X,Y,Z),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(kD,this._context,U,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Y1(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Y1(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Y1(document.createElement("div")),L8.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new yk(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new fV(this._context,this._linesContent),this._viewZones=new XE(this._context),this._viewParts.push(this._viewZones);let z=new rk(this._context);this._viewParts.push(z);let H=new ek(this._context);this._viewParts.push(H);let j=new Rk(this._context);this._viewParts.push(j),j.addDynamicOverlay(new kk(this._context)),j.addDynamicOverlay(new s6(this._context)),j.addDynamicOverlay(new vk(this._context)),j.addDynamicOverlay(new Ik(this._context)),j.addDynamicOverlay(new ZE(this._context));let V=new Mk(this._context);this._viewParts.push(V),V.addDynamicOverlay(new Ek(this._context)),V.addDynamicOverlay(new fk(this._context)),V.addDynamicOverlay(new hk(this._context)),V.addDynamicOverlay(new P3(this._context)),this._glyphMarginWidgets=new xk(this._context),this._viewParts.push(this._glyphMarginWidgets);let W=new WZ(this._context);W.getDomNode().appendChild(this._viewZones.marginDomNode),W.getDomNode().appendChild(V.getDomNode()),W.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(W),this._contentWidgets=new wk(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Zz(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new ak(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);let B=new tk(this._context);this._viewParts.push(B);let K=new _k(this._context);this._viewParts.push(K);let P=new sk(this._context);if(this._viewParts.push(P),z){let A=this._scrollbar.getOverviewRulerLayoutInfo();A.parent.insertBefore(z.getDomNode(),A.insertBefore)}if(this._linesContent.appendChild(j.getDomNode()),this._linesContent.appendChild(B.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(W.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(H.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(P.getDomNode()),this._overflowGuardContainer.appendChild(K.domNode),this.domNode.appendChild(this._overflowGuardContainer),G)G.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),G.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode);else this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode);this._applyLayout(),this._pointerHandler=this._register(new nL(this._context,U,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){let $=this._context.viewModel.model,X=this._context.viewModel.glyphLanes,Y=[],Z=0;Y=Y.concat($.getAllMarginDecorations().map((Q)=>{var G,q,U;let z=(q=(G=Q.options.glyphMargin)===null||G===void 0?void 0:G.position)!==null&&q!==void 0?q:S4.Center;return Z=Math.max(Z,Q.range.endLineNumber),{range:Q.range,lane:z,persist:(U=Q.options.glyphMargin)===null||U===void 0?void 0:U.persistLane}})),Y=Y.concat(this._glyphMarginWidgets.getWidgets().map((Q)=>{let G=$.validateRange(Q.preference.range);return Z=Math.max(Z,G.endLineNumber),{range:G,lane:Q.preference.lane}})),Y.sort((Q,G)=>k.compareRangesUsingStarts(Q.range,G.range)),X.reset(Z);for(let Q of Y)X.push(Q.lane,Q.range,Q.persist);return X}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:($)=>{this._textAreaHandler.textArea.domNode.dispatchEvent($)},getLastRenderData:()=>{let $=this._viewCursors.getLastRenderData()||[],X=this._textAreaHandler.getLastRenderData();return new vL($,X)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:($)=>{return this._viewZones.shouldSuppressMouseDownOnViewZone($)},shouldSuppressMouseDownOnWidget:($)=>{return this._contentWidgets.shouldSuppressMouseDownOnWidget($)},getPositionFromDOMInfo:($,X)=>{return this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo($,X)},visibleRangeForPosition:($,X)=>{return this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new g($,X))},getLineWidth:($)=>{return this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth($)}}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:($)=>{return this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition($)}}}_applyLayout(){let X=this._context.configuration.options.get(143);this.domNode.setWidth(X.width),this.domNode.setHeight(X.height),this._overflowGuardContainer.setWidth(X.width),this._overflowGuardContainer.setHeight(X.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){let $=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(140)+" "+IV(this._context.theme.type)+$}handleEvents($){super.handleEvents($),this._scheduleRender()}onConfigurationChanged($){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged($){return this._selections=$.selections,!1}onDecorationsChanged($){if($.affectsGlyphMargin)this._shouldRecomputeGlyphMarginLanes=!0;return!1}onFocusChanged($){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged($){return this._context.theme.update($.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){if(this._renderAnimationFrame!==null)this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null;this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(let $ of this._viewParts)$.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new u1;if(this._renderAnimationFrame===null){let $=this._createCoordinatedRendering();this._renderAnimationFrame=aD.INSTANCE.scheduleCoordinatedRendering({window:O0(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new u1;try{return $.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new u1;return $.renderText()},prepareRender:(X,Y)=>{if(this._store.isDisposed)throw new u1;return $.prepareRender(X,Y)},render:(X,Y)=>{if(this._store.isDisposed)throw new u1;return $.render(X,Y)}})}}_flushAccumulatedAndRenderNow(){let $=this._createCoordinatedRendering();tQ(()=>$.prepareRenderText());let X=tQ(()=>$.renderText());if(X){let[Y,Z]=X;tQ(()=>$.prepareRender(Y,Z)),tQ(()=>$.render(Y,Z))}}_getViewPartsToRender(){let $=[],X=0;for(let Y of this._viewParts)if(Y.shouldRender())$[X++]=Y;return $}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;let $=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount($.requiredLanes)}NX.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let $=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&$.length===0)return null;let X=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(X.startLineNumber,X.endLineNumber,X.centeredLineNumber);let Y=new QE(this._selections,X,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);if(this._contentWidgets.shouldRender())this._contentWidgets.onBeforeRender(Y);if(this._viewLines.shouldRender())this._viewLines.renderText(Y),this._viewLines.onDidRender(),$=this._getViewPartsToRender();return[$,new kL(this._context.viewLayout,Y,this._viewLines)]},prepareRender:($,X)=>{for(let Y of $)Y.prepareRender(X)},render:($,X)=>{for(let Y of $)Y.render(X),Y.onDidRender()}}}delegateVerticalScrollbarPointerDown($){this._scrollbar.delegateVerticalScrollbarPointerDown($)}delegateScrollFromMouseWheelEvent($){this._scrollbar.delegateScrollFromMouseWheelEvent($)}restoreState($){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:$.scrollTop,scrollLeft:$.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn($,X){let Y=this._context.viewModel.model.validatePosition({lineNumber:$,column:X}),Z=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Y);this._flushAccumulatedAndRenderNow();let Q=this._viewLines.visibleRangeForPosition(new g(Z.lineNumber,Z.column));if(!Q)return-1;return Q.left}getTargetAtClientPoint($,X){let Y=this._pointerHandler.getTargetAtClientPoint($,X);if(!Y)return null;return oU.convertViewToModelMouseTarget(Y,this._context.viewModel.coordinatesConverter)}createOverviewRuler($){return new ok(this._context,$)}change($){this._viewZones.changeViewZones($),this._scheduleRender()}render($,X){if(X){this._viewLines.forceShouldRender();for(let Y of this._viewParts)Y.forceShouldRender()}if($)this._flushAccumulatedAndRenderNow();else this._scheduleRender()}writeScreenReaderContent($){this._textAreaHandler.writeScreenReaderContent($)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions($){this._textAreaHandler.setAriaOptions($)}addContentWidget($){this._contentWidgets.addWidget($.widget),this.layoutContentWidget($),this._scheduleRender()}layoutContentWidget($){var X,Y,Z,Q,G,q,U,z;this._contentWidgets.setWidgetPosition($.widget,(Y=(X=$.position)===null||X===void 0?void 0:X.position)!==null&&Y!==void 0?Y:null,(Q=(Z=$.position)===null||Z===void 0?void 0:Z.secondaryPosition)!==null&&Q!==void 0?Q:null,(q=(G=$.position)===null||G===void 0?void 0:G.preference)!==null&&q!==void 0?q:null,(z=(U=$.position)===null||U===void 0?void 0:U.positionAffinity)!==null&&z!==void 0?z:null),this._scheduleRender()}removeContentWidget($){this._contentWidgets.removeWidget($.widget),this._scheduleRender()}addOverlayWidget($){this._overlayWidgets.addWidget($.widget),this.layoutOverlayWidget($),this._scheduleRender()}layoutOverlayWidget($){let X=$.position?$.position.preference:null;if(this._overlayWidgets.setWidgetPosition($.widget,X))this._scheduleRender()}removeOverlayWidget($){this._overlayWidgets.removeWidget($.widget),this._scheduleRender()}addGlyphMarginWidget($){this._glyphMarginWidgets.addWidget($.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget($){let X=$.position;if(this._glyphMarginWidgets.setWidgetPosition($.widget,X))this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}removeGlyphMarginWidget($){this._glyphMarginWidgets.removeWidget($.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};sD=nZ0([oZ0(6,l0)],sD);aD.INSTANCE=new aD});class cV{constructor(J,$,X,Y,Z,Q,G){this.id=J,this.label=$,this.alias=X,this.metadata=Y,this._precondition=Z,this._run=Q,this._contextKeyService=G}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(J){if(!this.isSupported())return Promise.resolve(void 0);return this._run(J)}}function p4(J){let $=0,X=0,Y=0,Z=0;for(let Q=0,G=J.length;Q<G;Q++){let q=J.charCodeAt(Q);if(q===13){if($===0)X=Q;if($++,Q+1<G&&J.charCodeAt(Q+1)===10)Z|=2,Q++;else Z|=3;Y=Q+1}else if(q===10){if(Z|=1,$===0)X=Q;$++,Y=Q+1}}if($===0)X=J.length;return[$,X,J.length-Y,Z]}class rD{constructor(J,$,X,Y){this.range=J,this.nestingLevel=$,this.nestingLevelOfEqualBracketType=X,this.isInvalid=Y}}class Ka{constructor(J,$,X,Y,Z,Q){this.range=J,this.openingBracketRange=$,this.closingBracketRange=X,this.nestingLevel=Y,this.nestingLevelOfEqualBracketType=Z,this.bracketPairNode=Q}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}var UE;var Aa=w(()=>{UE=class UE extends Ka{constructor(J,$,X,Y,Z,Q,G){super(J,$,X,Y,Z,Q);this.minVisibleColumnIndentation=G}}});class O3{constructor(J,$){this.lineCount=J,this.columnCount=$}toString(){return`${this.lineCount},${this.columnCount}`}}function Pa(J,$,X,Y){return J!==X?L6(X-J,Y):L6(0,Y-$)}function Qz(J){return J===0}function L6(J,$){return J*Z4+$}function g7(J){let $=J,X=Math.floor($/Z4),Y=$-X*Z4;return new O3(X,Y)}function Da(J){return Math.floor(J/Z4)}function zE(J){return J}function k6(J,$){let X=J+$;if($>=Z4)X=X-J%Z4;return X}function Ra(J,$){return J.reduce((X,Y)=>k6(X,$(Y)),F8)}function HE(J,$){return J===$}function _3(J,$){let X=J,Y=$;if(Y-X<=0)return F8;let Q=Math.floor(X/Z4),G=Math.floor(Y/Z4),q=Y-G*Z4;if(Q===G){let U=X-Q*Z4;return L6(0,q-U)}else return L6(G-Q,q)}function PZ(J,$){return J<$}function eQ(J,$){return J<=$}function Gz(J,$){return J>=$}function J2(J){return L6(J.lineNumber-1,J.column-1)}function $2(J,$){let X=J,Y=Math.floor(X/Z4),Z=X-Y*Z4,Q=$,G=Math.floor(Q/Z4),q=Q-G*Z4;return new k(Y+1,Z+1,G+1,q+1)}function Ma(J){let $=a9(J);return L6($.length-1,$[$.length-1].length)}var F8=0,Z4=67108864;var fX=w(()=>{X1();i0();O3.zero=new O3(0,0)});class yJ{static fromModelContentChanges(J){return J.map((X)=>{let Y=k.lift(X.range);return new yJ(J2(Y.getStartPosition()),J2(Y.getEndPosition()),Ma(X.text))}).reverse()}constructor(J,$,X){this.startOffset=J,this.endOffset=$,this.newLength=X}toString(){return`[${g7(this.startOffset)}...${g7(this.endOffset)}) -> ${g7(this.newLength)}`}}class jE{constructor(J){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=J.map(($)=>VE.from($))}getOffsetBeforeChange(J){return this.adjustNextEdit(J),this.translateCurToOld(J)}getDistanceToNextChange(J){this.adjustNextEdit(J);let $=this.edits[this.nextEditIdx],X=$?this.translateOldToCur($.offsetObj):null;if(X===null)return null;return _3(J,X)}translateOldToCur(J){if(J.lineCount===this.deltaLineIdxInOld)return L6(J.lineCount+this.deltaOldToNewLineCount,J.columnCount+this.deltaOldToNewColumnCount);else return L6(J.lineCount+this.deltaOldToNewLineCount,J.columnCount)}translateCurToOld(J){let $=g7(J);if($.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld)return L6($.lineCount-this.deltaOldToNewLineCount,$.columnCount-this.deltaOldToNewColumnCount);else return L6($.lineCount-this.deltaOldToNewLineCount,$.columnCount)}adjustNextEdit(J){while(this.nextEditIdx<this.edits.length){let $=this.edits[this.nextEditIdx],X=this.translateOldToCur($.endOffsetAfterObj);if(eQ(X,J)){this.nextEditIdx++;let Y=g7(X),Z=g7(this.translateOldToCur($.endOffsetBeforeObj)),Q=Y.lineCount-Z.lineCount;this.deltaOldToNewLineCount+=Q;let G=this.deltaLineIdxInOld===$.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,q=Y.columnCount-Z.columnCount;this.deltaOldToNewColumnCount=G+q,this.deltaLineIdxInOld=$.endOffsetBeforeObj.lineCount}else break}}}class VE{static from(J){return new VE(J.startOffset,J.endOffset,J.newLength)}constructor(J,$,X){this.endOffsetBeforeObj=g7($),this.endOffsetAfterObj=g7(k6(J,X)),this.offsetObj=g7(J)}}var lV=w(()=>{i0();fX()});class a6{static create(J,$){if(J<=128&&$.length===0){let X=a6.cache[J];if(!X)X=new a6(J,$),a6.cache[J]=X;return X}return new a6(J,$)}static getEmpty(){return this.empty}constructor(J,$){this.items=J,this.additionalItems=$}add(J,$){let X=$.getKey(J),Y=X>>5;if(Y===0){let Q=1<<X|this.items;if(Q===this.items)return this;return a6.create(Q,this.additionalItems)}Y--;let Z=this.additionalItems.slice(0);while(Z.length<Y)Z.push(0);return Z[Y]|=1<<(X&31),a6.create(this.items,Z)}merge(J){let $=this.items|J.items;if(this.additionalItems===iD&&J.additionalItems===iD){if($===this.items)return this;if($===J.items)return J;return a6.create($,iD)}let X=[];for(let Y=0;Y<Math.max(this.additionalItems.length,J.additionalItems.length);Y++){let Z=this.additionalItems[Y]||0,Q=J.additionalItems[Y]||0;X.push(Z|Q)}return a6.create($,X)}intersects(J){if((this.items&J.items)!==0)return!0;for(let $=0;$<Math.min(this.additionalItems.length,J.additionalItems.length);$++)if((this.additionalItems[$]&J.additionalItems[$])!==0)return!0;return!1}}class BE{constructor(){this.items=new Map}getKey(J){let $=this.items.get(J);if($===void 0)$=this.items.size,this.items.set(J,$);return $}}var iD,WE;var qz=w(()=>{iD=[];a6.cache=Array(129);a6.empty=a6.create(0,iD);WE={getKey(J){return J}}});class oD{get length(){return this._length}constructor(J){this._length=J}}var Uz,m4,dV,Oa,nD,_a,tZ0,tD,gX,sV,FE;var aV=w(()=>{O1();LJ();fX();qz();Uz=class Uz extends oD{static create(J,$,X){let Y=J.length;if($)Y=k6(Y,$.length);if(X)Y=k6(Y,X.length);return new Uz(Y,J,$,X,$?$.missingOpeningBracketIds:a6.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(J){switch(J){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw Error("Invalid child index")}get children(){let J=[];if(J.push(this.openingBracket),this.child)J.push(this.child);if(this.closingBracket)J.push(this.closingBracket);return J}constructor(J,$,X,Y,Z){super(J);this.openingBracket=$,this.child=X,this.closingBracket=Y,this.missingOpeningBracketIds=Z}canBeReused(J){if(this.closingBracket===null)return!1;if(J.intersects(this.missingOpeningBracketIds))return!1;return!0}deepClone(){return new Uz(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(J,$){return this.child?this.child.computeMinIndentation(k6(J,this.openingBracket.length),$):Number.MAX_SAFE_INTEGER}};m4=class m4 extends oD{static create23(J,$,X,Y=!1){let{length:Z,missingOpeningBracketIds:Q}=J;if(J.listHeight!==$.listHeight)throw Error("Invalid list heights");if(Z=k6(Z,$.length),Q=Q.merge($.missingOpeningBracketIds),X){if(J.listHeight!==X.listHeight)throw Error("Invalid list heights");Z=k6(Z,X.length),Q=Q.merge(X.missingOpeningBracketIds)}return Y?new Oa(Z,J.listHeight+1,J,$,X,Q):new dV(Z,J.listHeight+1,J,$,X,Q)}static getEmpty(){return new _a(F8,0,[],a6.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(J,$,X){super(J);this.listHeight=$,this._missingOpeningBracketIds=X,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let J=this.childrenLength;if(J===0)return;let $=this.getChild(J-1),X=$.kind===4?$.toMutable():$;if($!==X)this.setChild(J-1,X);return X}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let $=this.getChild(0),X=$.kind===4?$.toMutable():$;if($!==X)this.setChild(0,X);return X}canBeReused(J){if(J.intersects(this.missingOpeningBracketIds))return!1;if(this.childrenLength===0)return!1;let $=this;while($.kind===4){let X=$.childrenLength;if(X===0)throw new u1;$=$.getChild(X-1)}return $.canBeReused(J)}handleChildrenChanged(){this.throwIfImmutable();let J=this.childrenLength,$=this.getChild(0).length,X=this.getChild(0).missingOpeningBracketIds;for(let Y=1;Y<J;Y++){let Z=this.getChild(Y);$=k6($,Z.length),X=X.merge(Z.missingOpeningBracketIds)}this._length=$,this._missingOpeningBracketIds=X,this.cachedMinIndentation=-1}computeMinIndentation(J,$){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let X=Number.MAX_SAFE_INTEGER,Y=J;for(let Z=0;Z<this.childrenLength;Z++){let Q=this.getChild(Z);if(Q)X=Math.min(X,Q.computeMinIndentation(Y,$)),Y=k6(Y,Q.length)}return this.cachedMinIndentation=X,X}};dV=class dV extends m4{get childrenLength(){return this._item3!==null?3:2}getChild(J){switch(J){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw Error("Invalid child index")}setChild(J,$){switch(J){case 0:this._item1=$;return;case 1:this._item2=$;return;case 2:this._item3=$;return}throw Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(J,$,X,Y,Z,Q){super(J,$,Q);this._item1=X,this._item2=Y,this._item3=Z}deepClone(){return new dV(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(J){if(this._item3)throw Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=J,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let J=this._item3;return this._item3=null,this.handleChildrenChanged(),J}prependChildOfSameHeight(J){if(this._item3)throw Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=J,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let J=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),J}toMutable(){return this}};Oa=class Oa extends dV{toMutable(){return new dV(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw Error("this instance is immutable")}};nD=class nD extends m4{get childrenLength(){return this._children.length}getChild(J){return this._children[J]}setChild(J,$){this._children[J]=$}get children(){return this._children}constructor(J,$,X,Y){super(J,$,Y);this._children=X}deepClone(){let J=Array(this._children.length);for(let $=0;$<this._children.length;$++)J[$]=this._children[$].deepClone();return new nD(this.length,this.listHeight,J,this.missingOpeningBracketIds)}appendChildOfSameHeight(J){this.throwIfImmutable(),this._children.push(J),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let J=this._children.pop();return this.handleChildrenChanged(),J}prependChildOfSameHeight(J){this.throwIfImmutable(),this._children.unshift(J),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let J=this._children.shift();return this.handleChildrenChanged(),J}toMutable(){return this}};_a=class _a extends nD{toMutable(){return new nD(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw Error("this instance is immutable")}};tZ0=[];tD=class tD extends oD{get listHeight(){return 0}get childrenLength(){return 0}getChild(J){return null}get children(){return tZ0}deepClone(){return this}};gX=class gX extends tD{get kind(){return 0}get missingOpeningBracketIds(){return a6.getEmpty()}canBeReused(J){return!0}computeMinIndentation(J,$){let X=g7(J),Y=(X.columnCount===0?X.lineCount:X.lineCount+1)+1,Z=Da(k6(J,this.length))+1,Q=Number.MAX_SAFE_INTEGER;for(let G=Y;G<=Z;G++){let q=$.getLineFirstNonWhitespaceColumn(G),U=$.getLineContent(G);if(q===0)continue;let z=s1.visibleColumnFromColumn(U,q,$.getOptions().tabSize);Q=Math.min(Q,z)}return Q}};sV=class sV extends tD{static create(J,$,X){return new sV(J,$,X)}get kind(){return 1}get missingOpeningBracketIds(){return a6.getEmpty()}constructor(J,$,X){super(J);this.bracketInfo=$,this.bracketIds=X}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(J){return!1}computeMinIndentation(J,$){return Number.MAX_SAFE_INTEGER}};FE=class FE extends tD{get kind(){return 3}constructor(J,$){super($);this.missingOpeningBracketIds=J}canBeReused(J){return!J.intersects(this.missingOpeningBracketIds)}computeMinIndentation(J,$){return Number.MAX_SAFE_INTEGER}}});class pX{constructor(J,$,X,Y,Z){this.length=J,this.kind=$,this.bracketId=X,this.bracketIds=Y,this.astNode=Z}}class KE{constructor(J,$){this.textModel=J,this.bracketTokens=$,this.reader=new Na(this.textModel,this.bracketTokens),this._offset=F8,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=J.getLineCount(),this.textBufferLastLineLength=J.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return L6(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(J){this.didPeek=!1,this._offset=k6(this._offset,J);let $=g7(this._offset);this.reader.setPosition($.lineCount,$.columnCount)}read(){let J;if(this.peeked)this.didPeek=!1,J=this.peeked;else J=this.reader.read();if(J)this._offset=k6(this._offset,J.length);return J}peek(){if(!this.didPeek)this.peeked=this.reader.read(),this.didPeek=!0;return this.peeked}}class Na{constructor(J,$){this.textModel=J,this.bracketTokens=$,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=J.getLineCount(),this.textBufferLastLineLength=J.getLineLength(this.textBufferLineCount)}setPosition(J,$){if(J===this.lineIdx){if(this.lineCharOffset=$,this.line!==null)this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)}else this.lineIdx=J,this.lineCharOffset=$,this.line=null;this.peekedToken=null}read(){if(this.peekedToken){let Z=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=zE(Z.length),Z}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;if(this.line===null)this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset);let J=this.lineIdx,$=this.lineCharOffset,X=0;while(!0){let Z=this.lineTokens,Q=Z.getCount(),G=null;if(this.lineTokenOffset<Q){let q=Z.getMetadata(this.lineTokenOffset);while(this.lineTokenOffset+1<Q&&q===Z.getMetadata(this.lineTokenOffset+1))this.lineTokenOffset++;let U=j8.getTokenType(q)===0,z=j8.containsBalancedBrackets(q),H=Z.getEndOffset(this.lineTokenOffset);if(z&&U&&this.lineCharOffset<H){let j=Z.getLanguageId(this.lineTokenOffset),V=this.line.substring(this.lineCharOffset,H),W=this.bracketTokens.getSingleLanguageBracketTokens(j),B=W.regExpGlobal;if(B){B.lastIndex=0;let K=B.exec(V);if(K){if(G=W.getToken(K[0]),G)this.lineCharOffset+=K.index}}}if(X+=H-this.lineCharOffset,G)if(J!==this.lineIdx||$!==this.lineCharOffset){this.peekedToken=G;break}else return this.lineCharOffset+=zE(G.length),G;else this.lineTokenOffset++,this.lineCharOffset=H}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,X+=33,X>1000)break}if(X>1500)break}let Y=Pa(J,$,this.lineIdx,this.lineCharOffset);return new pX(Y,0,-1,a6.getEmpty(),new gX(Y))}}class AE{constructor(J,$){this.text=J,this._offset=F8,this.idx=0;let X=$.getRegExpStr(),Y=X?new RegExp(X+`|
`,"gi"):null,Z=[],Q,G=0,q=0,U=0,z=0,H=[];for(let W=0;W<60;W++)H.push(new pX(L6(0,W),0,-1,a6.getEmpty(),new gX(L6(0,W))));let j=[];for(let W=0;W<60;W++)j.push(new pX(L6(1,W),0,-1,a6.getEmpty(),new gX(L6(1,W))));if(Y){Y.lastIndex=0;while((Q=Y.exec(J))!==null){let W=Q.index,B=Q[0];if(B===`
`)G++,q=W+1;else{if(U!==W){let K;if(z===G){let P=W-U;if(P<H.length)K=H[P];else{let A=L6(0,P);K=new pX(A,0,-1,a6.getEmpty(),new gX(A))}}else{let P=G-z,A=W-q;if(P===1&&A<j.length)K=j[A];else{let D=L6(P,A);K=new pX(D,0,-1,a6.getEmpty(),new gX(D))}}Z.push(K)}Z.push($.getToken(B)),U=W+B.length,z=G}}}let V=J.length;if(U!==V){let W=z===G?L6(0,V-U):L6(G-z,V-q);Z.push(new pX(W,0,-1,a6.getEmpty(),new gX(W)))}this.length=L6(G,V-q),this.tokens=Z}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(J){throw new xN}}var PE=w(()=>{O1();aV();fX();qz()});class DE{static createFromLanguage(J,$){function X(Z){return $.getKey(`${Z.languageId}:::${Z.bracketText}`)}let Y=new Map;for(let Z of J.bracketsNew.openingBrackets){let Q=L6(0,Z.bracketText.length),G=X(Z),q=a6.getEmpty().add(G,WE);Y.set(Z.bracketText,new pX(Q,1,G,q,sV.create(Q,Z,q)))}for(let Z of J.bracketsNew.closingBrackets){let Q=L6(0,Z.bracketText.length),G=a6.getEmpty(),q=Z.getOpeningBrackets();for(let U of q)G=G.add(X(U),WE);Y.set(Z.bracketText,new pX(Q,2,X(q[0]),G,sV.create(Q,Z,G)))}return new DE(Y)}constructor(J){this.map=J,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;else{let J=[...this.map.keys()];return J.sort(),J.reverse(),J.map(($)=>eZ0($)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let J=this.getRegExpStr();this._regExpGlobal=J?new RegExp(J,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(J){return this.map.get(J.toLowerCase())}findClosingTokenText(J){for(let[$,X]of this.map)if(X.kind===2&&X.bracketIds.intersects(J))return $;return}get isEmpty(){return this.map.size===0}}function eZ0(J){let $=b7(J);if(/^[\w ]+/.test(J))$=`\\b${$}`;if(/[\w ]+$/.test(J))$=`${$}\\b`;return $}class RE{constructor(J,$){this.denseKeyProvider=J,this.getLanguageConfiguration=$,this.languageIdToBracketTokens=new Map}didLanguageChange(J){return this.languageIdToBracketTokens.has(J)}getSingleLanguageBracketTokens(J){let $=this.languageIdToBracketTokens.get(J);if(!$)$=DE.createFromLanguage(this.getLanguageConfiguration(J),this.denseKeyProvider),this.languageIdToBracketTokens.set(J,$);return $}}var Ta=w(()=>{X1();aV();fX();qz();PE()});function La(J){if(J.length===0)return null;if(J.length===1)return J[0];let $=0;function X(){if($>=J.length)return null;let G=$,q=J[G].listHeight;$++;while($<J.length&&J[$].listHeight===q)$++;if($-G>=2)return OE(G===0&&$===J.length?J:J.slice(G,$),!1);else return J[G]}let Y=X(),Z=X();if(!Z)return Y;for(let G=X();G;G=X())if(wa(Y,Z)<=wa(Z,G))Y=ME(Y,Z),Z=G;else Z=ME(Z,G);return ME(Y,Z)}function OE(J,$=!1){if(J.length===0)return null;if(J.length===1)return J[0];let X=J.length;while(X>3){let Y=X>>1;for(let Z=0;Z<Y;Z++){let Q=Z<<1;J[Z]=m4.create23(J[Q],J[Q+1],Q+3===X?J[Q+2]:null,$)}X=Y}return m4.create23(J[0],J[1],X>=3?J[2]:null,$)}function wa(J,$){return Math.abs(J.listHeight-$.listHeight)}function ME(J,$){if(J.listHeight===$.listHeight)return m4.create23(J,$,null,!1);else if(J.listHeight>$.listHeight)return JQ0(J,$);else return $Q0($,J)}function JQ0(J,$){J=J.toMutable();let X=J,Y=[],Z;while(!0){if($.listHeight===X.listHeight){Z=$;break}if(X.kind!==4)throw Error("unexpected");Y.push(X),X=X.makeLastElementMutable()}for(let Q=Y.length-1;Q>=0;Q--){let G=Y[Q];if(Z)if(G.childrenLength>=3)Z=m4.create23(G.unappendChild(),Z,null,!1);else G.appendChildOfSameHeight(Z),Z=void 0;else G.handleChildrenChanged()}if(Z)return m4.create23(J,Z,null,!1);else return J}function $Q0(J,$){J=J.toMutable();let X=J,Y=[];while($.listHeight!==X.listHeight){if(X.kind!==4)throw Error("unexpected");Y.push(X),X=X.makeFirstElementMutable()}let Z=$;for(let Q=Y.length-1;Q>=0;Q--){let G=Y[Q];if(Z)if(G.childrenLength>=3)Z=m4.create23(Z,G.unprependChild(),null,!1);else G.prependChildOfSameHeight(Z),Z=void 0;else G.handleChildrenChanged()}if(Z)return m4.create23(Z,J,null,!1);else return J}var ka=w(()=>{aV()});class NE{constructor(J){this.lastOffset=F8,this.nextNodes=[J],this.offsets=[F8],this.idxs=[]}readLongestNodeAt(J,$){if(PZ(J,this.lastOffset))throw Error("Invalid offset");this.lastOffset=J;while(!0){let X=rV(this.nextNodes);if(!X)return;let Y=rV(this.offsets);if(PZ(J,Y))return;if(PZ(Y,J))if(k6(Y,X.length)<=J)this.nextNodeAfterCurrent();else{let Z=_E(X);if(Z!==-1)this.nextNodes.push(X.getChild(Z)),this.offsets.push(Y),this.idxs.push(Z);else this.nextNodeAfterCurrent()}else if($(X))return this.nextNodeAfterCurrent(),X;else{let Z=_E(X);if(Z===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(X.getChild(Z)),this.offsets.push(Y),this.idxs.push(Z)}}}nextNodeAfterCurrent(){while(!0){let J=rV(this.offsets),$=rV(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let X=rV(this.nextNodes),Y=_E(X,this.idxs[this.idxs.length-1]);if(Y!==-1){this.nextNodes.push(X.getChild(Y)),this.offsets.push(k6(J,$.length)),this.idxs[this.idxs.length-1]=Y;break}else this.idxs.pop()}}}function _E(J,$=-1){while(!0){if($++,$>=J.childrenLength)return-1;if(J.getChild($))return $}}function rV(J){return J.length>0?J[J.length-1]:void 0}var Ea=w(()=>{fX()});function TE(J,$,X,Y){return new Ia(J,$,X,Y).parseDocument()}class Ia{constructor(J,$,X,Y){if(this.tokenizer=J,this.createImmutableLists=Y,this._itemsConstructed=0,this._itemsFromCache=0,X&&Y)throw Error("Not supported");this.oldNodeReader=X?new NE(X):void 0,this.positionMapper=new jE($)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let J=this.parseList(a6.getEmpty(),0);if(!J)J=m4.getEmpty();return J}parseList(J,$){let X=[];while(!0){let Z=this.tryReadChildFromCache(J);if(!Z){let Q=this.tokenizer.peek();if(!Q||Q.kind===2&&Q.bracketIds.intersects(J))break;Z=this.parseChild(J,$+1)}if(Z.kind===4&&Z.childrenLength===0)continue;X.push(Z)}return this.oldNodeReader?La(X):OE(X,this.createImmutableLists)}tryReadChildFromCache(J){if(this.oldNodeReader){let $=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if($===null||!Qz($)){let X=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(Y)=>{if($!==null&&!PZ(Y.length,$))return!1;return Y.canBeReused(J)});if(X)return this._itemsFromCache++,this.tokenizer.skip(X.length),X}}return}parseChild(J,$){this._itemsConstructed++;let X=this.tokenizer.read();switch(X.kind){case 2:return new FE(X.bracketIds,X.length);case 0:return X.astNode;case 1:{if($>300)return new gX(X.length);let Y=J.merge(X.bracketIds),Z=this.parseList(Y,$+1),Q=this.tokenizer.peek();if(Q&&Q.kind===2&&(Q.bracketId===X.bracketId||Q.bracketIds.intersects(X.bracketIds)))return this.tokenizer.read(),Uz.create(X.astNode,Z,Q.astNode);else return Uz.create(X.astNode,Z,null)}default:throw Error("unexpected")}}}var ya=w(()=>{aV();lV();qz();fX();ka();Ea()});function zz(J,$){if(J.length===0)return $;if($.length===0)return J;let X=new I7(xa(J)),Y=xa($);Y.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let Z=X.dequeue();function Q(z){if(z===void 0){let j=X.takeWhile((V)=>!0)||[];if(Z)j.unshift(Z);return j}let H=[];while(Z&&!Qz(z)){let[j,V]=Z.splitAt(z);H.push(j),z=_3(j.lengthAfter,z),Z=V!==null&&V!==void 0?V:X.dequeue()}if(!Qz(z))H.push(new X2(!1,z,z));return H}let G=[];function q(z,H,j){if(G.length>0&&HE(G[G.length-1].endOffset,z)){let V=G[G.length-1];G[G.length-1]=new yJ(V.startOffset,H,k6(V.newLength,j))}else G.push({startOffset:z,endOffset:H,newLength:j})}let U=F8;for(let z of Y){let H=Q(z.lengthBefore);if(z.modified){let j=Ra(H,(W)=>W.lengthBefore),V=k6(U,j);q(U,V,z.lengthAfter),U=V}else for(let j of H){let V=U;if(U=k6(U,j.lengthBefore),j.modified)q(V,U,j.lengthAfter)}}return G}class X2{constructor(J,$,X){this.modified=J,this.lengthBefore=$,this.lengthAfter=X}splitAt(J){let $=_3(J,this.lengthAfter);if(HE($,F8))return[this,void 0];else if(this.modified)return[new X2(this.modified,this.lengthBefore,J),new X2(this.modified,F8,$)];else return[new X2(this.modified,J,J),new X2(this.modified,$,$)]}toString(){return`${this.modified?"M":"U"}:${g7(this.lengthBefore)} -> ${g7(this.lengthAfter)}`}}function xa(J){let $=[],X=F8;for(let Y of J){let Z=_3(X,Y.startOffset);if(!Qz(Z))$.push(new X2(!1,Z,Z));let Q=_3(Y.startOffset,Y.endOffset);$.push(new X2(!0,Q,Y.newLength)),X=Y.endOffset}return $}var wE=w(()=>{V1();lV();fX()});function ba(J,$,X,Y){if(J.kind===4||J.kind===2){let Z=[];for(let Q of J.children)X=k6($,Q.length),Z.push({nodeOffsetStart:$,nodeOffsetEnd:X}),$=X;for(let Q=Z.length-1;Q>=0;Q--){let{nodeOffsetStart:G,nodeOffsetEnd:q}=Z[Q];if(PZ(G,Y)){let U=ba(J.children[Q],G,q,Y);if(U)return U}}return null}else if(J.kind===3)return null;else if(J.kind===1){let Z=$2($,X);return{bracketInfo:J.bracketInfo,range:Z}}return null}function Sa(J,$,X,Y){if(J.kind===4||J.kind===2){for(let Z of J.children){if(X=k6($,Z.length),PZ(Y,X)){let Q=Sa(Z,$,X,Y);if(Q)return Q}$=X}return null}else if(J.kind===3)return null;else if(J.kind===1){let Z=$2($,X);return{bracketInfo:J.bracketInfo,range:Z}}return null}function LE(J,$,X,Y,Z,Q,G,q,U,z,H=!1){if(G>200)return!0;J:while(!0)switch(J.kind){case 4:{let j=J.childrenLength;for(let V=0;V<j;V++){let W=J.getChild(V);if(!W)continue;if(X=k6($,W.length),eQ($,Z)&&Gz(X,Y)){if(Gz(X,Z)){J=W;continue J}if(!LE(W,$,X,Y,Z,Q,G,0,U,z))return!1}$=X}return!0}case 2:{let j=!z||!J.closingBracket||J.closingBracket.bracketInfo.closesColorized(J.openingBracket.bracketInfo),V=0;if(U){let B=U.get(J.openingBracket.text);if(B===void 0)B=0;if(V=B,j)B++,U.set(J.openingBracket.text,B)}let W=J.childrenLength;for(let B=0;B<W;B++){let K=J.getChild(B);if(!K)continue;if(X=k6($,K.length),eQ($,Z)&&Gz(X,Y)){if(Gz(X,Z)&&K.kind!==1){if(J=K,j)G++,q=V+1;else q=V;continue J}if(j||K.kind!==1||!J.closingBracket){if(!LE(K,$,X,Y,Z,Q,j?G+1:G,j?V+1:V,U,z,!J.closingBracket))return!1}}$=X}return U===null||U===void 0||U.set(J.openingBracket.text,V),!0}case 3:{let j=$2($,X);return Q(new rD(j,G-1,0,!0))}case 1:{let j=$2($,X);return Q(new rD(j,G-1,q-1,H))}case 0:return!0}}class Ca{constructor(J,$,X){this.push=J,this.includeMinIndentation=$,this.textModel=X}}function kE(J,$,X,Y,Z,Q,G,q){var U;if(G>200)return!0;let z=!0;if(J.kind===2){let H=0;if(q){let W=q.get(J.openingBracket.text);if(W===void 0)W=0;H=W,W++,q.set(J.openingBracket.text,W)}let j=k6($,J.openingBracket.length),V=-1;if(Q.includeMinIndentation)V=J.computeMinIndentation($,Q.textModel);if(z=Q.push(new UE($2($,X),$2($,j),J.closingBracket?$2(k6(j,((U=J.child)===null||U===void 0?void 0:U.length)||F8),X):void 0,G,H,J,V)),$=j,z&&J.child){let W=J.child;if(X=k6($,W.length),eQ($,Z)&&Gz(X,Y)){if(z=kE(W,$,X,Y,Z,Q,G+1,q),!z)return!1}}q===null||q===void 0||q.set(J.openingBracket.text,H)}else{let H=$;for(let j of J.children){let V=H;if(H=k6(H,j.length),eQ(V,Z)&&eQ(Y,H)){if(z=kE(j,V,H,Y,Z,Q,G,q),!z)return!1}}}return z}var EE;var va=w(()=>{_0();z0();Aa();lV();Ta();fX();ya();qz();PE();V1();wE();EE=class EE extends m{didLanguageChange(J){return this.brackets.didLanguageChange(J)}constructor(J,$){super();if(this.textModel=J,this.getLanguageConfiguration=$,this.didChangeEmitter=new x,this.denseKeyProvider=new BE,this.brackets=new RE(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],!J.tokenization.hasTokens){let X=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),Y=new AE(this.textModel.getValue(),X);this.initialAstWithoutTokens=TE(Y,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else if(J.tokenization.backgroundTokenizationState===2)this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1);else this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let J=this.initialAstWithoutTokens===void 0;if(this.initialAstWithoutTokens=void 0,!J)this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:J}){let $=J.map((X)=>new yJ(L6(X.fromLineNumber-1,0),L6(X.toLineNumber,0),L6(X.toLineNumber-X.fromLineNumber+1,0)));if(this.handleEdits($,!0),!this.initialAstWithoutTokens)this.didChangeEmitter.fire()}handleContentChanged(J){let $=yJ.fromModelContentChanges(J.changes);this.handleEdits($,!1)}handleEdits(J,$){let X=zz(this.queuedTextEdits,J);if(this.queuedTextEdits=X,this.initialAstWithoutTokens&&!$)this.queuedTextEditsForInitialAstWithoutTokens=zz(this.queuedTextEditsForInitialAstWithoutTokens,J)}flushQueue(){if(this.queuedTextEdits.length>0)this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[];if(this.queuedTextEditsForInitialAstWithoutTokens.length>0){if(this.initialAstWithoutTokens)this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1);this.queuedTextEditsForInitialAstWithoutTokens=[]}}parseDocumentFromTextBuffer(J,$,X){let Z=$,Q=new KE(this.textModel,this.brackets);return TE(Q,J,Z,X)}getBracketsInRange(J,$){this.flushQueue();let X=L6(J.startLineNumber-1,J.startColumn-1),Y=L6(J.endLineNumber-1,J.endColumn-1);return new YJ((Z)=>{let Q=this.initialAstWithoutTokens||this.astWithTokens;LE(Q,F8,Q.length,X,Y,Z,0,0,new Map,$)})}getBracketPairsInRange(J,$){this.flushQueue();let X=J2(J.getStartPosition()),Y=J2(J.getEndPosition());return new YJ((Z)=>{let Q=this.initialAstWithoutTokens||this.astWithTokens,G=new Ca(Z,$,this.textModel);kE(Q,F8,Q.length,X,Y,G,0,new Map)})}getFirstBracketAfter(J){this.flushQueue();let $=this.initialAstWithoutTokens||this.astWithTokens;return Sa($,F8,$.length,J2(J))}getFirstBracketBefore(J){this.flushQueue();let $=this.initialAstWithoutTokens||this.astWithTokens;return ba($,F8,$.length,J2(J))}}});function XQ0(J,$){return{object:J,dispose:()=>$===null||$===void 0?void 0:$.dispose()}}function IE(J){if(typeof J>"u")return()=>!0;else{let $=Date.now();return()=>{return Date.now()-$<=J}}}class mX{constructor(){this._searchCanceledBrand=void 0}}function eD(J){if(J instanceof mX)return null;return J}var yE;var ha=w(()=>{V1();_0();z0();i0();PP();va();yE=class yE extends m{get canBuildAST(){return this.textModel.getValueLength()<=5000000}constructor(J,$){super();this.textModel=J,this.languageConfigurationService=$,this.bracketPairsTree=this._register(new q8),this.onDidChangeEmitter=new x,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange((X)=>{var Y;if(!X.languageId||((Y=this.bracketPairsTree.value)===null||Y===void 0?void 0:Y.object.didLanguageChange(X.languageId)))this.bracketPairsTree.clear(),this.updateBracketPairsTree()}))}handleDidChangeOptions(J){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(J){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(J){var $;($=this.bracketPairsTree.value)===null||$===void 0||$.object.handleContentChanged(J)}handleDidChangeBackgroundTokenizationState(){var J;(J=this.bracketPairsTree.value)===null||J===void 0||J.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(J){var $;($=this.bracketPairsTree.value)===null||$===void 0||$.object.handleDidChangeTokens(J)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let J=new $0;this.bracketPairsTree.value=XQ0(J.add(new EE(this.textModel,($)=>{return this.languageConfigurationService.getLanguageConfiguration($)})),J),J.add(this.bracketPairsTree.value.object.onDidChange(($)=>this.onDidChangeEmitter.fire($))),this.onDidChangeEmitter.fire()}}else if(this.bracketPairsTree.value)this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire()}getBracketPairsInRange(J){var $;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(($=this.bracketPairsTree.value)===null||$===void 0?void 0:$.object.getBracketPairsInRange(J,!1))||YJ.empty}getBracketPairsInRangeWithMinIndentation(J){var $;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(($=this.bracketPairsTree.value)===null||$===void 0?void 0:$.object.getBracketPairsInRange(J,!0))||YJ.empty}getBracketsInRange(J,$=!1){var X;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((X=this.bracketPairsTree.value)===null||X===void 0?void 0:X.object.getBracketsInRange(J,$))||YJ.empty}findMatchingBracketUp(J,$,X){let Y=this.textModel.validatePosition($),Z=this.textModel.getLanguageIdAtPosition(Y.lineNumber,Y.column);if(this.canBuildAST){let Q=this.languageConfigurationService.getLanguageConfiguration(Z).bracketsNew.getClosingBracketInfo(J);if(!Q)return null;let G=this.getBracketPairsInRange(k.fromPositions($,$)).findLast((q)=>Q.closes(q.openingBracketInfo));if(G)return G.openingBracketRange;return null}else{let Q=J.toLowerCase(),G=this.languageConfigurationService.getLanguageConfiguration(Z).brackets;if(!G)return null;let q=G.textIsBracket[Q];if(!q)return null;return eD(this._findMatchingBracketUp(q,Y,IE(X)))}}matchBracket(J,$){if(this.canBuildAST){let X=this.getBracketPairsInRange(k.fromPositions(J,J)).filter((Y)=>Y.closingBracketRange!==void 0&&(Y.openingBracketRange.containsPosition(J)||Y.closingBracketRange.containsPosition(J))).findLastMaxBy(B9((Y)=>Y.openingBracketRange.containsPosition(J)?Y.openingBracketRange:Y.closingBracketRange,k.compareRangesUsingStarts));if(X)return[X.openingBracketRange,X.closingBracketRange];return null}else{let X=IE($);return this._matchBracket(this.textModel.validatePosition(J),X)}}_establishBracketSearchOffsets(J,$,X,Y){let Z=$.getCount(),Q=$.getLanguageId(Y),G=Math.max(0,J.column-1-X.maxBracketLength);for(let U=Y-1;U>=0;U--){let z=$.getEndOffset(U);if(z<=G)break;if(MJ($.getStandardTokenType(U))||$.getLanguageId(U)!==Q){G=z;break}}let q=Math.min($.getLineContent().length,J.column-1+X.maxBracketLength);for(let U=Y+1;U<Z;U++){let z=$.getStartOffset(U);if(z>=q)break;if(MJ($.getStandardTokenType(U))||$.getLanguageId(U)!==Q){q=z;break}}return{searchStartOffset:G,searchEndOffset:q}}_matchBracket(J,$){let X=J.lineNumber,Y=this.textModel.tokenization.getLineTokens(X),Z=this.textModel.getLineContent(X),Q=Y.findTokenIndexAtOffset(J.column-1);if(Q<0)return null;let G=this.languageConfigurationService.getLanguageConfiguration(Y.getLanguageId(Q)).brackets;if(G&&!MJ(Y.getStandardTokenType(Q))){let{searchStartOffset:q,searchEndOffset:U}=this._establishBracketSearchOffsets(J,Y,G,Q),z=null;while(!0){let H=M9.findNextBracketInRange(G.forwardRegex,X,Z,q,U);if(!H)break;if(H.startColumn<=J.column&&J.column<=H.endColumn){let j=Z.substring(H.startColumn-1,H.endColumn-1).toLowerCase(),V=this._matchFoundBracket(H,G.textIsBracket[j],G.textIsOpenBracket[j],$);if(V){if(V instanceof mX)return null;z=V}}q=H.endColumn-1}if(z)return z}if(Q>0&&Y.getStartOffset(Q)===J.column-1){let q=Q-1,U=this.languageConfigurationService.getLanguageConfiguration(Y.getLanguageId(q)).brackets;if(U&&!MJ(Y.getStandardTokenType(q))){let{searchStartOffset:z,searchEndOffset:H}=this._establishBracketSearchOffsets(J,Y,U,q),j=M9.findPrevBracketInRange(U.reversedRegex,X,Z,z,H);if(j&&j.startColumn<=J.column&&J.column<=j.endColumn){let V=Z.substring(j.startColumn-1,j.endColumn-1).toLowerCase(),W=this._matchFoundBracket(j,U.textIsBracket[V],U.textIsOpenBracket[V],$);if(W){if(W instanceof mX)return null;return W}}}}return null}_matchFoundBracket(J,$,X,Y){if(!$)return null;let Z=X?this._findMatchingBracketDown($,J.getEndPosition(),Y):this._findMatchingBracketUp($,J.getStartPosition(),Y);if(!Z)return null;if(Z instanceof mX)return Z;return[J,Z]}_findMatchingBracketUp(J,$,X){let{languageId:Y,reversedRegex:Z}=J,Q=-1,G=0,q=(U,z,H,j)=>{while(!0){if(X&&++G%100===0&&!X())return mX.INSTANCE;let V=M9.findPrevBracketInRange(Z,U,z,H,j);if(!V)break;let W=z.substring(V.startColumn-1,V.endColumn-1).toLowerCase();if(J.isOpen(W))Q++;else if(J.isClose(W))Q--;if(Q===0)return V;j=V.startColumn-1}return null};for(let U=$.lineNumber;U>=1;U--){let z=this.textModel.tokenization.getLineTokens(U),H=z.getCount(),j=this.textModel.getLineContent(U),V=H-1,W=j.length,B=j.length;if(U===$.lineNumber)V=z.findTokenIndexAtOffset($.column-1),W=$.column-1,B=$.column-1;let K=!0;for(;V>=0;V--){let P=z.getLanguageId(V)===Y&&!MJ(z.getStandardTokenType(V));if(P)if(K)W=z.getStartOffset(V);else W=z.getStartOffset(V),B=z.getEndOffset(V);else if(K&&W!==B){let A=q(U,j,W,B);if(A)return A}K=P}if(K&&W!==B){let P=q(U,j,W,B);if(P)return P}}return null}_findMatchingBracketDown(J,$,X){let{languageId:Y,forwardRegex:Z}=J,Q=1,G=0,q=(z,H,j,V)=>{while(!0){if(X&&++G%100===0&&!X())return mX.INSTANCE;let W=M9.findNextBracketInRange(Z,z,H,j,V);if(!W)break;let B=H.substring(W.startColumn-1,W.endColumn-1).toLowerCase();if(J.isOpen(B))Q++;else if(J.isClose(B))Q--;if(Q===0)return W;j=W.endColumn-1}return null},U=this.textModel.getLineCount();for(let z=$.lineNumber;z<=U;z++){let H=this.textModel.tokenization.getLineTokens(z),j=H.getCount(),V=this.textModel.getLineContent(z),W=0,B=0,K=0;if(z===$.lineNumber)W=H.findTokenIndexAtOffset($.column-1),B=$.column-1,K=$.column-1;let P=!0;for(;W<j;W++){let A=H.getLanguageId(W)===Y&&!MJ(H.getStandardTokenType(W));if(A)if(P)K=H.getEndOffset(W);else B=H.getStartOffset(W),K=H.getEndOffset(W);else if(P&&B!==K){let D=q(z,V,B,K);if(D)return D}P=A}if(P&&B!==K){let A=q(z,V,B,K);if(A)return A}}return null}findPrevBracket(J){var $;let X=this.textModel.validatePosition(J);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(($=this.bracketPairsTree.value)===null||$===void 0?void 0:$.object.getFirstBracketBefore(X))||null;let Y=null,Z=null,Q=null;for(let G=X.lineNumber;G>=1;G--){let q=this.textModel.tokenization.getLineTokens(G),U=q.getCount(),z=this.textModel.getLineContent(G),H=U-1,j=z.length,V=z.length;if(G===X.lineNumber){H=q.findTokenIndexAtOffset(X.column-1),j=X.column-1,V=X.column-1;let B=q.getLanguageId(H);if(Y!==B)Y=B,Z=this.languageConfigurationService.getLanguageConfiguration(Y).brackets,Q=this.languageConfigurationService.getLanguageConfiguration(Y).bracketsNew}let W=!0;for(;H>=0;H--){let B=q.getLanguageId(H);if(Y!==B){if(Z&&Q&&W&&j!==V){let P=M9.findPrevBracketInRange(Z.reversedRegex,G,z,j,V);if(P)return this._toFoundBracket(Q,P);W=!1}Y=B,Z=this.languageConfigurationService.getLanguageConfiguration(Y).brackets,Q=this.languageConfigurationService.getLanguageConfiguration(Y).bracketsNew}let K=!!Z&&!MJ(q.getStandardTokenType(H));if(K)if(W)j=q.getStartOffset(H);else j=q.getStartOffset(H),V=q.getEndOffset(H);else if(Q&&Z&&W&&j!==V){let P=M9.findPrevBracketInRange(Z.reversedRegex,G,z,j,V);if(P)return this._toFoundBracket(Q,P)}W=K}if(Q&&Z&&W&&j!==V){let B=M9.findPrevBracketInRange(Z.reversedRegex,G,z,j,V);if(B)return this._toFoundBracket(Q,B)}}return null}findNextBracket(J){var $;let X=this.textModel.validatePosition(J);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(($=this.bracketPairsTree.value)===null||$===void 0?void 0:$.object.getFirstBracketAfter(X))||null;let Y=this.textModel.getLineCount(),Z=null,Q=null,G=null;for(let q=X.lineNumber;q<=Y;q++){let U=this.textModel.tokenization.getLineTokens(q),z=U.getCount(),H=this.textModel.getLineContent(q),j=0,V=0,W=0;if(q===X.lineNumber){j=U.findTokenIndexAtOffset(X.column-1),V=X.column-1,W=X.column-1;let K=U.getLanguageId(j);if(Z!==K)Z=K,Q=this.languageConfigurationService.getLanguageConfiguration(Z).brackets,G=this.languageConfigurationService.getLanguageConfiguration(Z).bracketsNew}let B=!0;for(;j<z;j++){let K=U.getLanguageId(j);if(Z!==K){if(G&&Q&&B&&V!==W){let A=M9.findNextBracketInRange(Q.forwardRegex,q,H,V,W);if(A)return this._toFoundBracket(G,A);B=!1}Z=K,Q=this.languageConfigurationService.getLanguageConfiguration(Z).brackets,G=this.languageConfigurationService.getLanguageConfiguration(Z).bracketsNew}let P=!!Q&&!MJ(U.getStandardTokenType(j));if(P)if(B)W=U.getEndOffset(j);else V=U.getStartOffset(j),W=U.getEndOffset(j);else if(G&&Q&&B&&V!==W){let A=M9.findNextBracketInRange(Q.forwardRegex,q,H,V,W);if(A)return this._toFoundBracket(G,A)}B=P}if(G&&Q&&B&&V!==W){let K=M9.findNextBracketInRange(Q.forwardRegex,q,H,V,W);if(K)return this._toFoundBracket(G,K)}}return null}findEnclosingBrackets(J,$){let X=this.textModel.validatePosition(J);if(this.canBuildAST){let V=k.fromPositions(X),W=this.getBracketPairsInRange(k.fromPositions(X,X)).findLast((B)=>B.closingBracketRange!==void 0&&B.range.strictContainsRange(V));if(W)return[W.openingBracketRange,W.closingBracketRange];return null}let Y=IE($),Z=this.textModel.getLineCount(),Q=new Map,G=[],q=(V,W)=>{if(!Q.has(V)){let B=[];for(let K=0,P=W?W.brackets.length:0;K<P;K++)B[K]=0;Q.set(V,B)}G=Q.get(V)},U=0,z=(V,W,B,K,P)=>{while(!0){if(Y&&++U%100===0&&!Y())return mX.INSTANCE;let A=M9.findNextBracketInRange(V.forwardRegex,W,B,K,P);if(!A)break;let D=B.substring(A.startColumn-1,A.endColumn-1).toLowerCase(),M=V.textIsBracket[D];if(M){if(M.isOpen(D))G[M.index]++;else if(M.isClose(D))G[M.index]--;if(G[M.index]===-1)return this._matchFoundBracket(A,M,!1,Y)}K=A.endColumn-1}return null},H=null,j=null;for(let V=X.lineNumber;V<=Z;V++){let W=this.textModel.tokenization.getLineTokens(V),B=W.getCount(),K=this.textModel.getLineContent(V),P=0,A=0,D=0;if(V===X.lineNumber){P=W.findTokenIndexAtOffset(X.column-1),A=X.column-1,D=X.column-1;let R=W.getLanguageId(P);if(H!==R)H=R,j=this.languageConfigurationService.getLanguageConfiguration(H).brackets,q(H,j)}let M=!0;for(;P<B;P++){let R=W.getLanguageId(P);if(H!==R){if(j&&M&&A!==D){let N=z(j,V,K,A,D);if(N)return eD(N);M=!1}H=R,j=this.languageConfigurationService.getLanguageConfiguration(H).brackets,q(H,j)}let O=!!j&&!MJ(W.getStandardTokenType(P));if(O)if(M)D=W.getEndOffset(P);else A=W.getStartOffset(P),D=W.getEndOffset(P);else if(j&&M&&A!==D){let N=z(j,V,K,A,D);if(N)return eD(N)}M=O}if(j&&M&&A!==D){let R=z(j,V,K,A,D);if(R)return eD(R)}}return null}_toFoundBracket(J,$){if(!$)return null;let X=this.textModel.getValueInRange($);X=X.toLowerCase();let Y=J.getBracketInfo(X);if(!Y)return null;return{range:$,bracketInfo:Y}}};mX.INSTANCE=new mX});class bE{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(J,$){if(J.isInvalid)return this.unexpectedClosingBracketClassName;return this.getInlineClassNameOfLevel($?J.nestingLevelOfEqualBracketType:J.nestingLevel)}getInlineClassNameOfLevel(J){return`bracket-highlighting-${J%30}`}}var xE;var fa=w(()=>{_0();z0();i0();E$();G5();xE=class xE extends m{constructor(J){super();this.textModel=J,this.colorProvider=new bE,this.onDidChangeEmitter=new x,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=J.getOptions().bracketPairColorizationOptions,this._register(J.bracketPairs.onDidChange(($)=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(J){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(J,$,X,Y){if(Y)return[];if($===void 0)return[];if(!this.colorizationOptions.enabled)return[];return this.textModel.bracketPairs.getBracketsInRange(J,!0).map((Q)=>({id:`bracket${Q.range.toString()}-${Q.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(Q,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:Q.range})).toArray()}getAllDecorations(J,$){if(J===void 0)return[];if(!this.colorizationOptions.enabled)return[];return this.getDecorationsInRange(new k(1,1,this.textModel.getLineCount(),1),J,$)}};F7((J,$)=>{let X=[MD,OD,_D,ND,TD,wD],Y=new bE;$.addRule(`.monaco-editor .${Y.unexpectedClosingBracketClassName} { color: ${J.getColor(yd)}; }`);let Z=X.map((Q)=>J.getColor(Q)).filter((Q)=>!!Q).filter((Q)=>!Q.isTransparent());for(let Q=0;Q<30;Q++){let G=Z[Q%Z.length];$.addRule(`.monaco-editor .${Y.getInlineClassNameOfLevel(Q)} { color: ${G}; }`)}})});function JR(J){return J.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class J8{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(J,$,X,Y){this.oldPosition=J,this.oldText=$,this.newPosition=X,this.newText=Y}toString(){if(this.oldText.length===0)return`(insert@${this.oldPosition} "${JR(this.newText)}")`;if(this.newText.length===0)return`(delete@${this.oldPosition} "${JR(this.oldText)}")`;return`(replace@${this.oldPosition} "${JR(this.oldText)}" with "${JR(this.newText)}")`}static _writeStringSize(J){return 4+2*J.length}static _writeString(J,$,X){let Y=$.length;E4(J,Y,X),X+=4;for(let Z=0;Z<Y;Z++)ip(J,$.charCodeAt(Z),X),X+=2;return X}static _readString(J,$){let X=k4(J,$);return $+=4,op(J,$,X)}writeSize(){return 8+J8._writeStringSize(this.oldText)+J8._writeStringSize(this.newText)}write(J,$){return E4(J,this.oldPosition,$),$+=4,E4(J,this.newPosition,$),$+=4,$=J8._writeString(J,this.oldText,$),$=J8._writeString(J,this.newText,$),$}static read(J,$,X){let Y=k4(J,$);$+=4;let Z=k4(J,$);$+=4;let Q=J8._readString(J,$);$+=J8._writeStringSize(Q);let G=J8._readString(J,$);return $+=J8._writeStringSize(G),X.push(new J8(Y,Q,Z,G)),$}}function ga(J,$){if(J===null||J.length===0)return $;return new uX(J,$).compress()}class uX{constructor(J,$){this._prevEdits=J,this._currEdits=$,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let J=0,$=0,X=this._getPrev(J),Y=this._getCurr($);while(J<this._prevLen||$<this._currLen){if(X===null){this._acceptCurr(Y),Y=this._getCurr(++$);continue}if(Y===null){this._acceptPrev(X),X=this._getPrev(++J);continue}if(Y.oldEnd<=X.newPosition){this._acceptCurr(Y),Y=this._getCurr(++$);continue}if(X.newEnd<=Y.oldPosition){this._acceptPrev(X),X=this._getPrev(++J);continue}if(Y.oldPosition<X.newPosition){let[U,z]=uX._splitCurr(Y,X.newPosition-Y.oldPosition);this._acceptCurr(U),Y=z;continue}if(X.newPosition<Y.oldPosition){let[U,z]=uX._splitPrev(X,Y.oldPosition-X.newPosition);this._acceptPrev(U),X=z;continue}let G,q;if(Y.oldEnd===X.newEnd)G=X,q=Y,X=this._getPrev(++J),Y=this._getCurr(++$);else if(Y.oldEnd<X.newEnd){let[U,z]=uX._splitPrev(X,Y.oldLength);G=U,q=Y,X=z,Y=this._getCurr(++$)}else{let[U,z]=uX._splitCurr(Y,X.newLength);G=X,q=U,X=this._getPrev(++J),Y=z}this._result[this._resultLen++]=new J8(G.oldPosition,G.oldText,q.newPosition,q.newText),this._prevDeltaOffset+=G.newLength-G.oldLength,this._currDeltaOffset+=q.newLength-q.oldLength}let Z=uX._merge(this._result);return uX._removeNoOps(Z)}_acceptCurr(J){this._result[this._resultLen++]=uX._rebaseCurr(this._prevDeltaOffset,J),this._currDeltaOffset+=J.newLength-J.oldLength}_getCurr(J){return J<this._currLen?this._currEdits[J]:null}_acceptPrev(J){this._result[this._resultLen++]=uX._rebasePrev(this._currDeltaOffset,J),this._prevDeltaOffset+=J.newLength-J.oldLength}_getPrev(J){return J<this._prevLen?this._prevEdits[J]:null}static _rebaseCurr(J,$){return new J8($.oldPosition-J,$.oldText,$.newPosition,$.newText)}static _rebasePrev(J,$){return new J8($.oldPosition,$.oldText,$.newPosition+J,$.newText)}static _splitPrev(J,$){let X=J.newText.substr(0,$),Y=J.newText.substr($);return[new J8(J.oldPosition,J.oldText,J.newPosition,X),new J8(J.oldEnd,"",J.newPosition+$,Y)]}static _splitCurr(J,$){let X=J.oldText.substr(0,$),Y=J.oldText.substr($);return[new J8(J.oldPosition,X,J.newPosition,J.newText),new J8(J.oldPosition+$,Y,J.newEnd,"")]}static _merge(J){if(J.length===0)return J;let $=[],X=0,Y=J[0];for(let Z=1;Z<J.length;Z++){let Q=J[Z];if(Y.oldEnd===Q.oldPosition)Y=new J8(Y.oldPosition,Y.oldText+Q.oldText,Y.newPosition,Y.newText+Q.newText);else $[X++]=Y,Y=Q}return $[X++]=Y,$}static _removeNoOps(J){if(J.length===0)return J;let $=[],X=0;for(let Y=0;Y<J.length;Y++){let Z=J[Y];if(Z.oldText===Z.newText)continue;$[X++]=Z}return $}}var SE=w(()=>{uj();mG()});function Y2(J){return J===47||J===92}function CE(J){return J.replace(/[\\/]/g,b6.sep)}function pa(J){if(J.indexOf("/")===-1)J=CE(J);if(/^[a-zA-Z]:(\/|$)/.test(J))J="/"+J;return J}function vE(J,$=b6.sep){if(!J)return"";let X=J.length,Y=J.charCodeAt(0);if(Y2(Y)){if(Y2(J.charCodeAt(1))){if(!Y2(J.charCodeAt(2))){let Q=3,G=Q;for(;Q<X;Q++)if(Y2(J.charCodeAt(Q)))break;if(G!==Q&&!Y2(J.charCodeAt(Q+1))){Q+=1;for(;Q<X;Q++)if(Y2(J.charCodeAt(Q)))return J.slice(0,Q+1).replace(/[\\/]/g,$)}}}return $}else if(ma(Y)){if(J.charCodeAt(1)===58)if(Y2(J.charCodeAt(2)))return J.slice(0,2)+$;else return J.slice(0,2)}let Z=J.indexOf("://");if(Z!==-1){Z+=3;for(;Z<X;Z++)if(Y2(J.charCodeAt(Z)))return J.slice(0,Z+1)}return""}function iV(J,$,X,Y=Z$){if(J===$)return!0;if(!J||!$)return!1;if($.length>J.length)return!1;if(X){if(!uq(J,$))return!1;if($.length===J.length)return!0;let Q=$.length;if($.charAt($.length-1)===Y)Q--;return J.charAt(Q)===Y}if($.charAt($.length-1)!==Y)$+=Y;return J.indexOf($)===0}function ma(J){return J>=65&&J<=90||J>=97&&J<=122}function ua(J,$=p6){if($)return ma(J.charCodeAt(0))&&J.charCodeAt(1)===58;return!1}var $R=w(()=>{kY();L1();X1()});function DZ(J){return Uj(J,!0)}class XR{constructor(J){this._ignorePathCasing=J}compare(J,$,X=!1){if(J===$)return 0;return zj(this.getComparisonKey(J,X),this.getComparisonKey($,X))}isEqual(J,$,X=!1){if(J===$)return!0;if(!J||!$)return!1;return this.getComparisonKey(J,X)===this.getComparisonKey($,X)}getComparisonKey(J,$=!1){return J.with({path:this._ignorePathCasing(J)?J.path.toLowerCase():void 0,fragment:$?null:void 0}).toString()}isEqualOrParent(J,$,X=!1){if(J.scheme===$.scheme){if(J.scheme===G1.file)return iV(DZ(J),DZ($),this._ignorePathCasing(J))&&J.query===$.query&&(X||J.fragment===$.fragment);if(ca(J.authority,$.authority))return iV(J.path,$.path,this._ignorePathCasing(J),"/")&&J.query===$.query&&(X||J.fragment===$.fragment)}return!1}joinPath(J,...$){return C0.joinPath(J,...$)}basenameOrAuthority(J){return N3(J)||J.authority}basename(J){return b6.basename(J.path)}extname(J){return b6.extname(J.path)}dirname(J){if(J.path.length===0)return J;let $;if(J.scheme===G1.file)$=C0.file(TK(DZ(J))).path;else if($=b6.dirname(J.path),J.authority&&$.length&&$.charCodeAt(0)!==47)console.error(`dirname("${J.toString})) resulted in a relative path`),$="/";return J.with({path:$})}normalizePath(J){if(!J.path.length)return J;let $;if(J.scheme===G1.file)$=C0.file(NK(DZ(J))).path;else $=b6.normalize(J.path);return J.with({path:$})}relativePath(J,$){if(J.scheme!==$.scheme||!ca(J.authority,$.authority))return;if(J.scheme===G1.file){let Z=qg(DZ(J),DZ($));return p6?CE(Z):Z}let X=J.path||"/",Y=$.path||"/";if(this._ignorePathCasing(J)){let Z=0;for(let Q=Math.min(X.length,Y.length);Z<Q;Z++)if(X.charCodeAt(Z)!==Y.charCodeAt(Z)){if(X.charAt(Z).toLowerCase()!==Y.charAt(Z).toLowerCase())break}X=Y.substr(0,Z)+X.substr(Z)}return b6.relative(X,Y)}resolvePath(J,$){if(J.scheme===G1.file){let X=C0.file(Gg(DZ(J),$));return J.with({authority:X.authority,path:X.path})}return $=pa($),J.with({path:b6.resolve(J.path,$)})}isAbsolutePath(J){return!!J.path&&J.path[0]==="/"}isEqualAuthority(J,$){return J===$||J!==void 0&&$!==void 0&&yY(J,$)}hasTrailingPathSeparator(J,$=Z$){if(J.scheme===G1.file){let X=DZ(J);return X.length>vE(X).length&&X[X.length-1]===$}else{let X=J.path;return X.length>1&&X.charCodeAt(X.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(J.fsPath)}}removeTrailingPathSeparator(J,$=Z$){if(la(J,$))return J.with({path:J.path.substr(0,J.path.length-1)});return J}addTrailingPathSeparator(J,$=Z$){let X=!1;if(J.scheme===G1.file){let Y=DZ(J);X=Y!==void 0&&Y.length===vE(Y).length&&Y[Y.length-1]===$}else{$="/";let Y=J.path;X=Y.length===1&&Y.charCodeAt(Y.length-1)===47}if(!X&&!la(J,$))return J.with({path:J.path+"/"});return J}}var _6,Ip0,yp0,da,xp0,bp0,Sp0,N3,sa,YR,Cp0,aa,vp0,hE,hp0,ca,la,fp0,gp0,Q4;var cX=w(()=>{$R();e9();kY();L1();X1();V5();_6=new XR(()=>!1),Ip0=new XR((J)=>{return J.scheme===G1.file?!N6:!0}),yp0=new XR((J)=>!0),da=_6.isEqual.bind(_6),xp0=_6.isEqualOrParent.bind(_6),bp0=_6.getComparisonKey.bind(_6),Sp0=_6.basenameOrAuthority.bind(_6),N3=_6.basename.bind(_6),sa=_6.extname.bind(_6),YR=_6.dirname.bind(_6),Cp0=_6.joinPath.bind(_6),aa=_6.normalizePath.bind(_6),vp0=_6.relativePath.bind(_6),hE=_6.resolvePath.bind(_6),hp0=_6.isAbsolutePath.bind(_6),ca=_6.isEqualAuthority.bind(_6),la=_6.hasTrailingPathSeparator.bind(_6),fp0=_6.removeTrailingPathSeparator.bind(_6),gp0=_6.addTrailingPathSeparator.bind(_6);(function(J){J.META_DATA_LABEL="label",J.META_DATA_DESCRIPTION="description",J.META_DATA_SIZE="size",J.META_DATA_MIME="mime";function $(X){let Y=new Map;X.path.substring(X.path.indexOf(";")+1,X.path.lastIndexOf(";")).split(";").forEach((G)=>{let[q,U]=G.split(":");if(q&&U)Y.set(q,U)});let Q=X.path.substring(0,X.path.indexOf(";"));if(Q)Y.set(J.META_DATA_MIME,Q);return Y}J.parseMetaData=$})(Q4||(Q4={}))});function Hz(J){return J.toString()}class $8{static create(J,$){let X=J.getAlternativeVersionId(),Y=fE(J);return new $8(X,X,Y,Y,$,$,[])}constructor(J,$,X,Y,Z,Q,G){this.beforeVersionId=J,this.afterVersionId=$,this.beforeEOL=X,this.afterEOL=Y,this.beforeCursorState=Z,this.afterCursorState=Q,this.changes=G}append(J,$,X,Y,Z){if($.length>0)this.changes=ga(this.changes,$);this.afterEOL=X,this.afterVersionId=Y,this.afterCursorState=Z}static _writeSelectionsSize(J){return 4+16*(J?J.length:0)}static _writeSelections(J,$,X){if(E4(J,$?$.length:0,X),X+=4,$)for(let Y of $)E4(J,Y.selectionStartLineNumber,X),X+=4,E4(J,Y.selectionStartColumn,X),X+=4,E4(J,Y.positionLineNumber,X),X+=4,E4(J,Y.positionColumn,X),X+=4;return X}static _readSelections(J,$,X){let Y=k4(J,$);$+=4;for(let Z=0;Z<Y;Z++){let Q=k4(J,$);$+=4;let G=k4(J,$);$+=4;let q=k4(J,$);$+=4;let U=k4(J,$);$+=4,X.push(new p0(Q,G,q,U))}return $}serialize(){let J=10+$8._writeSelectionsSize(this.beforeCursorState)+$8._writeSelectionsSize(this.afterCursorState)+4;for(let Y of this.changes)J+=Y.writeSize();let $=new Uint8Array(J),X=0;E4($,this.beforeVersionId,X),X+=4,E4($,this.afterVersionId,X),X+=4,tT($,this.beforeEOL,X),X+=1,tT($,this.afterEOL,X),X+=1,X=$8._writeSelections($,this.beforeCursorState,X),X=$8._writeSelections($,this.afterCursorState,X),E4($,this.changes.length,X),X+=4;for(let Y of this.changes)X=Y.write($,X);return $.buffer}static deserialize(J){let $=new Uint8Array(J),X=0,Y=k4($,X);X+=4;let Z=k4($,X);X+=4;let Q=oT($,X);X+=1;let G=oT($,X);X+=1;let q=[];X=$8._readSelections($,X,q);let U=[];X=$8._readSelections($,X,U);let z=k4($,X);X+=4;let H=[];for(let j=0;j<z;j++)X=J8.read($,X,H);return new $8(Y,Z,Q,G,q,U,H)}}class gE{get type(){return 0}get resource(){if(C0.isUri(this.model))return this.model;return this.model.uri}constructor(J,$,X,Y){this.label=J,this.code=$,this.model=X,this._data=$8.create(X,Y)}toString(){return(this._data instanceof $8?this._data:$8.deserialize(this._data)).changes.map(($)=>$.toString()).join(", ")}matchesResource(J){return(C0.isUri(this.model)?this.model:this.model.uri).toString()===J.toString()}setModel(J){this.model=J}canAppend(J){return this.model===J&&this._data instanceof $8}append(J,$,X,Y,Z){if(this._data instanceof $8)this._data.append(J,$,X,Y,Z)}close(){if(this._data instanceof $8)this._data=this._data.serialize()}open(){if(!(this._data instanceof $8))this._data=$8.deserialize(this._data)}undo(){if(C0.isUri(this.model))throw Error("Invalid SingleModelEditStackElement");if(this._data instanceof $8)this._data=this._data.serialize();let J=$8.deserialize(this._data);this.model._applyUndo(J.changes,J.beforeEOL,J.beforeVersionId,J.beforeCursorState)}redo(){if(C0.isUri(this.model))throw Error("Invalid SingleModelEditStackElement");if(this._data instanceof $8)this._data=this._data.serialize();let J=$8.deserialize(this._data);this.model._applyRedo(J.changes,J.afterEOL,J.afterVersionId,J.afterCursorState)}heapSize(){if(this._data instanceof $8)this._data=this._data.serialize();return this._data.byteLength+168}}class ra{get resources(){return this._editStackElementsArr.map((J)=>J.resource)}constructor(J,$,X){this.label=J,this.code=$,this.type=1,this._isOpen=!0,this._editStackElementsArr=X.slice(0),this._editStackElementsMap=new Map;for(let Y of this._editStackElementsArr){let Z=Hz(Y.resource);this._editStackElementsMap.set(Z,Y)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(J){let $=Hz(J);return this._editStackElementsMap.has($)}setModel(J){let $=Hz(C0.isUri(J)?J:J.uri);if(this._editStackElementsMap.has($))this._editStackElementsMap.get($).setModel(J)}canAppend(J){if(!this._isOpen)return!1;let $=Hz(J.uri);if(this._editStackElementsMap.has($))return this._editStackElementsMap.get($).canAppend(J);return!1}append(J,$,X,Y,Z){let Q=Hz(J.uri);this._editStackElementsMap.get(Q).append(J,$,X,Y,Z)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let J of this._editStackElementsArr)J.undo()}redo(){for(let J of this._editStackElementsArr)J.redo()}heapSize(J){let $=Hz(J);if(this._editStackElementsMap.has($))return this._editStackElementsMap.get($).heapSize();return 0}split(){return this._editStackElementsArr}toString(){let J=[];for(let $ of this._editStackElementsArr)J.push(`${N3($.resource)}: ${$}`);return`{${J.join(", ")}}`}}function fE(J){if(J.getEOL()===`
`)return 0;else return 1}function lX(J){if(!J)return!1;return J instanceof gE||J instanceof ra}class ZR{constructor(J,$){this._model=J,this._undoRedoService=$}pushStackElement(){let J=this._undoRedoService.getLastElement(this._model.uri);if(lX(J))J.close()}popStackElement(){let J=this._undoRedoService.getLastElement(this._model.uri);if(lX(J))J.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(J,$){let X=this._undoRedoService.getLastElement(this._model.uri);if(lX(X)&&X.canAppend(this._model))return X;let Y=new gE(F("edit","Typing"),"undoredo.textBufferEdit",this._model,J);return this._undoRedoService.pushElement(Y,$),Y}pushEOL(J){let $=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(J),$.append(this._model,[],fE(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(J,$,X,Y){let Z=this._getOrCreateEditStackElement(J,Y),Q=this._model.applyEdits($,!0),G=ZR._computeCursorState(X,Q),q=Q.map((U,z)=>({index:z,textChange:U.textChange}));return q.sort((U,z)=>{if(U.textChange.oldPosition===z.textChange.oldPosition)return U.index-z.index;return U.textChange.oldPosition-z.textChange.oldPosition}),Z.append(this._model,q.map((U)=>U.textChange),fE(this._model),this._model.getAlternativeVersionId(),G),G}static _computeCursorState(J,$){try{return J?J($):null}catch(X){return $1(X),null}}}var pE=w(()=>{c0();O1();o5();V5();SE();uj();cX()});class ia{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function ZQ0(J,$,X,Y,Z){Z.spacesDiff=0,Z.looksLikeAlignment=!1;let Q;for(Q=0;Q<$&&Q<Y;Q++){let V=J.charCodeAt(Q),W=X.charCodeAt(Q);if(V!==W)break}let G=0,q=0;for(let V=Q;V<$;V++)if(J.charCodeAt(V)===32)G++;else q++;let U=0,z=0;for(let V=Q;V<Y;V++)if(X.charCodeAt(V)===32)U++;else z++;if(G>0&&q>0)return;if(U>0&&z>0)return;let H=Math.abs(q-z),j=Math.abs(G-U);if(H===0){if(Z.spacesDiff=j,j>0&&0<=U-1&&U-1<J.length&&U<X.length){if(X.charCodeAt(U)!==32&&J.charCodeAt(U-1)===32){if(J.charCodeAt(J.length-1)===44)Z.looksLikeAlignment=!0}}return}if(j%H===0){Z.spacesDiff=j/H;return}}function mE(J,$,X){let Y=Math.min(J.getLineCount(),1e4),Z=0,Q=0,G="",q=0,U=[2,4,6,8,3,5,7],z=8,H=[0,0,0,0,0,0,0,0,0],j=new ia;for(let B=1;B<=Y;B++){let K=J.getLineLength(B),P=J.getLineContent(B),A=K<=65536,D=!1,M=0,R=0,O=0;for(let T=0,S=K;T<S;T++){let v=A?P.charCodeAt(T):J.getLineCharCode(B,T);if(v===9)O++;else if(v===32)R++;else{D=!0,M=T;break}}if(!D)continue;if(O>0)Z++;else if(R>1)Q++;if(ZQ0(G,q,P,M,j),j.looksLikeAlignment){if(!(X&&$===j.spacesDiff))continue}let N=j.spacesDiff;if(N<=z)H[N]++;G=P,q=M}let V=X;if(Z!==Q)V=Z<Q;let W=$;if(V){let B=V?0:0.1*Y;if(U.forEach((K)=>{let P=H[K];if(P>B)B=P,W=K}),W===4&&H[4]>0&&H[2]>0&&H[2]>=H[4]/2)W=2}return{insertSpaces:V,tabSize:W}}function X9(J){return(J.metadata&1)>>>0}function K6(J,$){J.metadata=J.metadata&254|$<<0}function x8(J){return(J.metadata&2)>>>1===1}function V6(J,$){J.metadata=J.metadata&253|($?1:0)<<1}function Xr(J){return(J.metadata&4)>>>2===1}function na(J,$){J.metadata=J.metadata&251|($?1:0)<<2}function Yr(J){return(J.metadata&64)>>>6===1}function oa(J,$){J.metadata=J.metadata&191|($?1:0)<<6}function QQ0(J){return(J.metadata&24)>>>3}function ta(J,$){J.metadata=J.metadata&231|$<<3}function GQ0(J){return(J.metadata&32)>>>5===1}function ea(J,$){J.metadata=J.metadata&223|($?1:0)<<5}class QR{constructor(J,$,X){this.metadata=0,this.parent=this,this.left=this,this.right=this,K6(this,1),this.start=$,this.end=X,this.delta=0,this.maxEnd=X,this.id=J,this.ownerId=0,this.options=null,na(this,!1),oa(this,!1),ta(this,1),ea(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=$,this.cachedAbsoluteEnd=X,this.range=null,V6(this,!1)}reset(J,$,X,Y){this.start=$,this.end=X,this.maxEnd=X,this.cachedVersionId=J,this.cachedAbsoluteStart=$,this.cachedAbsoluteEnd=X,this.range=Y}setOptions(J){this.options=J;let $=this.options.className;na(this,$==="squiggly-error"||$==="squiggly-warning"||$==="squiggly-info"),oa(this,this.options.glyphMarginClassName!==null),ta(this,this.options.stickiness),ea(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(J,$,X){if(this.cachedVersionId!==X)this.range=null;this.cachedVersionId=X,this.cachedAbsoluteStart=J,this.cachedAbsoluteEnd=$}detach(){this.parent=null,this.left=null,this.right=null}}class tV{constructor(){this.root=F1,this.requestNormalizeDelta=!1}intervalSearch(J,$,X,Y,Z,Q){if(this.root===F1)return[];return BQ0(this,J,$,X,Y,Z,Q)}search(J,$,X,Y){if(this.root===F1)return[];return WQ0(this,J,$,X,Y)}collectNodesFromOwner(J){return jQ0(this,J)}collectNodesPostOrder(){return VQ0(this)}insert(J){Jr(this,J),this._normalizeDeltaIfNecessary()}delete(J){$r(this,J),this._normalizeDeltaIfNecessary()}resolveNode(J,$){let X=J,Y=0;while(J!==this.root){if(J===J.parent.right)Y+=J.parent.delta;J=J.parent}let Z=X.start+Y,Q=X.end+Y;X.setCachedOffsets(Z,Q,$)}acceptReplace(J,$,X,Y){let Z=zQ0(this,J,J+$);for(let Q=0,G=Z.length;Q<G;Q++){let q=Z[Q];$r(this,q)}this._normalizeDeltaIfNecessary(),HQ0(this,J,J+$,X),this._normalizeDeltaIfNecessary();for(let Q=0,G=Z.length;Q<G;Q++){let q=Z[Q];q.start=q.cachedAbsoluteStart,q.end=q.cachedAbsoluteEnd,UQ0(q,J,J+$,X,Y),q.maxEnd=q.end,Jr(this,q)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){if(!this.requestNormalizeDelta)return;this.requestNormalizeDelta=!1,qQ0(this)}}function qQ0(J){let $=J.root,X=0;while($!==F1){if($.left!==F1&&!x8($.left)){$=$.left;continue}if($.right!==F1&&!x8($.right)){X+=$.delta,$=$.right;continue}if($.start=X+$.start,$.end=X+$.end,$.delta=0,RZ($),V6($,!0),V6($.left,!1),V6($.right,!1),$===$.parent.right)X-=$.parent.delta;$=$.parent}V6(J.root,!1)}function jz(J,$,X,Y){if(J<X)return!0;if(J>X)return!1;if(Y===1)return!1;if(Y===2)return!0;return $}function UQ0(J,$,X,Y,Z){let Q=QQ0(J),G=Q===0||Q===2,q=Q===1||Q===2,U=X-$,z=Y,H=Math.min(U,z),j=J.start,V=!1,W=J.end,B=!1;if($<=j&&W<=X&&GQ0(J))J.start=$,V=!0,J.end=$,B=!0;{let P=Z?1:U>0?2:0;if(!V&&jz(j,G,$,P))V=!0;if(!B&&jz(W,q,$,P))B=!0}if(H>0&&!Z){let P=U>z?2:0;if(!V&&jz(j,G,$+H,P))V=!0;if(!B&&jz(W,q,$+H,P))B=!0}{let P=Z?1:0;if(!V&&jz(j,G,X,P))J.start=$+z,V=!0;if(!B&&jz(W,q,X,P))J.end=$+z,B=!0}let K=z-U;if(!V)J.start=Math.max(0,j+K);if(!B)J.end=Math.max(0,W+K);if(J.start>J.end)J.end=J.start}function zQ0(J,$,X){let Y=J.root,Z=0,Q=0,G=0,q=0,U=[],z=0;while(Y!==F1){if(x8(Y)){if(V6(Y.left,!1),V6(Y.right,!1),Y===Y.parent.right)Z-=Y.parent.delta;Y=Y.parent;continue}if(!x8(Y.left)){if(Q=Z+Y.maxEnd,Q<$){V6(Y,!0);continue}if(Y.left!==F1){Y=Y.left;continue}}if(G=Z+Y.start,G>X){V6(Y,!0);continue}if(q=Z+Y.end,q>=$)Y.setCachedOffsets(G,q,0),U[z++]=Y;if(V6(Y,!0),Y.right!==F1&&!x8(Y.right)){Z+=Y.delta,Y=Y.right;continue}}return V6(J.root,!1),U}function HQ0(J,$,X,Y){let Z=J.root,Q=0,G=0,q=0,U=Y-(X-$);while(Z!==F1){if(x8(Z)){if(V6(Z.left,!1),V6(Z.right,!1),Z===Z.parent.right)Q-=Z.parent.delta;RZ(Z),Z=Z.parent;continue}if(!x8(Z.left)){if(G=Q+Z.maxEnd,G<$){V6(Z,!0);continue}if(Z.left!==F1){Z=Z.left;continue}}if(q=Q+Z.start,q>X){if(Z.start+=U,Z.end+=U,Z.delta+=U,Z.delta<-1073741824||Z.delta>1073741824)J.requestNormalizeDelta=!0;V6(Z,!0);continue}if(V6(Z,!0),Z.right!==F1&&!x8(Z.right)){Q+=Z.delta,Z=Z.right;continue}}V6(J.root,!1)}function jQ0(J,$){let X=J.root,Y=[],Z=0;while(X!==F1){if(x8(X)){V6(X.left,!1),V6(X.right,!1),X=X.parent;continue}if(X.left!==F1&&!x8(X.left)){X=X.left;continue}if(X.ownerId===$)Y[Z++]=X;if(V6(X,!0),X.right!==F1&&!x8(X.right)){X=X.right;continue}}return V6(J.root,!1),Y}function VQ0(J){let $=J.root,X=[],Y=0;while($!==F1){if(x8($)){V6($.left,!1),V6($.right,!1),$=$.parent;continue}if($.left!==F1&&!x8($.left)){$=$.left;continue}if($.right!==F1&&!x8($.right)){$=$.right;continue}X[Y++]=$,V6($,!0)}return V6(J.root,!1),X}function WQ0(J,$,X,Y,Z){let Q=J.root,G=0,q=0,U=0,z=[],H=0;while(Q!==F1){if(x8(Q)){if(V6(Q.left,!1),V6(Q.right,!1),Q===Q.parent.right)G-=Q.parent.delta;Q=Q.parent;continue}if(Q.left!==F1&&!x8(Q.left)){Q=Q.left;continue}q=G+Q.start,U=G+Q.end,Q.setCachedOffsets(q,U,Y);let j=!0;if($&&Q.ownerId&&Q.ownerId!==$)j=!1;if(X&&Xr(Q))j=!1;if(Z&&!Yr(Q))j=!1;if(j)z[H++]=Q;if(V6(Q,!0),Q.right!==F1&&!x8(Q.right)){G+=Q.delta,Q=Q.right;continue}}return V6(J.root,!1),z}function BQ0(J,$,X,Y,Z,Q,G){let q=J.root,U=0,z=0,H=0,j=0,V=[],W=0;while(q!==F1){if(x8(q)){if(V6(q.left,!1),V6(q.right,!1),q===q.parent.right)U-=q.parent.delta;q=q.parent;continue}if(!x8(q.left)){if(z=U+q.maxEnd,z<$){V6(q,!0);continue}if(q.left!==F1){q=q.left;continue}}if(H=U+q.start,H>X){V6(q,!0);continue}if(j=U+q.end,j>=$){q.setCachedOffsets(H,j,Q);let B=!0;if(Y&&q.ownerId&&q.ownerId!==Y)B=!1;if(Z&&Xr(q))B=!1;if(G&&!Yr(q))B=!1;if(B)V[W++]=q}if(V6(q,!0),q.right!==F1&&!x8(q.right)){U+=q.delta,q=q.right;continue}}return V6(J.root,!1),V}function Jr(J,$){if(J.root===F1)return $.parent=F1,$.left=F1,$.right=F1,K6($,0),J.root=$,J.root;FQ0(J,$),Z2($.parent);let X=$;while(X!==J.root&&X9(X.parent)===1)if(X.parent===X.parent.parent.left){let Y=X.parent.parent.right;if(X9(Y)===1)K6(X.parent,0),K6(Y,0),K6(X.parent.parent,1),X=X.parent.parent;else{if(X===X.parent.right)X=X.parent,nV(J,X);K6(X.parent,0),K6(X.parent.parent,1),oV(J,X.parent.parent)}}else{let Y=X.parent.parent.left;if(X9(Y)===1)K6(X.parent,0),K6(Y,0),K6(X.parent.parent,1),X=X.parent.parent;else{if(X===X.parent.left)X=X.parent,oV(J,X);K6(X.parent,0),K6(X.parent.parent,1),nV(J,X.parent.parent)}}return K6(J.root,0),$}function FQ0(J,$){let X=0,Y=J.root,Z=$.start,Q=$.end;while(!0)if(AQ0(Z,Q,Y.start+X,Y.end+X)<0)if(Y.left===F1){$.start-=X,$.end-=X,$.maxEnd-=X,Y.left=$;break}else Y=Y.left;else if(Y.right===F1){$.start-=X+Y.delta,$.end-=X+Y.delta,$.maxEnd-=X+Y.delta,Y.right=$;break}else X+=Y.delta,Y=Y.right;$.parent=Y,$.left=F1,$.right=F1,K6($,1)}function $r(J,$){let X,Y;if($.left===F1){if(X=$.right,Y=$,X.delta+=$.delta,X.delta<-1073741824||X.delta>1073741824)J.requestNormalizeDelta=!0;X.start+=$.delta,X.end+=$.delta}else if($.right===F1)X=$.left,Y=$;else{if(Y=KQ0($.right),X=Y.right,X.start+=Y.delta,X.end+=Y.delta,X.delta+=Y.delta,X.delta<-1073741824||X.delta>1073741824)J.requestNormalizeDelta=!0;if(Y.start+=$.delta,Y.end+=$.delta,Y.delta=$.delta,Y.delta<-1073741824||Y.delta>1073741824)J.requestNormalizeDelta=!0}if(Y===J.root){J.root=X,K6(X,0),$.detach(),uE(),RZ(X),J.root.parent=F1;return}let Z=X9(Y)===1;if(Y===Y.parent.left)Y.parent.left=X;else Y.parent.right=X;if(Y===$)X.parent=Y.parent;else{if(Y.parent===$)X.parent=Y;else X.parent=Y.parent;if(Y.left=$.left,Y.right=$.right,Y.parent=$.parent,K6(Y,X9($)),$===J.root)J.root=Y;else if($===$.parent.left)$.parent.left=Y;else $.parent.right=Y;if(Y.left!==F1)Y.left.parent=Y;if(Y.right!==F1)Y.right.parent=Y}if($.detach(),Z){if(Z2(X.parent),Y!==$)Z2(Y),Z2(Y.parent);uE();return}if(Z2(X),Z2(X.parent),Y!==$)Z2(Y),Z2(Y.parent);let Q;while(X!==J.root&&X9(X)===0)if(X===X.parent.left){if(Q=X.parent.right,X9(Q)===1)K6(Q,0),K6(X.parent,1),nV(J,X.parent),Q=X.parent.right;if(X9(Q.left)===0&&X9(Q.right)===0)K6(Q,1),X=X.parent;else{if(X9(Q.right)===0)K6(Q.left,0),K6(Q,1),oV(J,Q),Q=X.parent.right;K6(Q,X9(X.parent)),K6(X.parent,0),K6(Q.right,0),nV(J,X.parent),X=J.root}}else{if(Q=X.parent.left,X9(Q)===1)K6(Q,0),K6(X.parent,1),oV(J,X.parent),Q=X.parent.left;if(X9(Q.left)===0&&X9(Q.right)===0)K6(Q,1),X=X.parent;else{if(X9(Q.left)===0)K6(Q.right,0),K6(Q,1),nV(J,Q),Q=X.parent.left;K6(Q,X9(X.parent)),K6(X.parent,0),K6(Q.left,0),oV(J,X.parent),X=J.root}}K6(X,0),uE()}function KQ0(J){while(J.left!==F1)J=J.left;return J}function uE(){F1.parent=F1,F1.delta=0,F1.start=0,F1.end=0}function nV(J,$){let X=$.right;if(X.delta+=$.delta,X.delta<-1073741824||X.delta>1073741824)J.requestNormalizeDelta=!0;if(X.start+=$.delta,X.end+=$.delta,$.right=X.left,X.left!==F1)X.left.parent=$;if(X.parent=$.parent,$.parent===F1)J.root=X;else if($===$.parent.left)$.parent.left=X;else $.parent.right=X;X.left=$,$.parent=X,RZ($),RZ(X)}function oV(J,$){let X=$.left;if($.delta-=X.delta,$.delta<-1073741824||$.delta>1073741824)J.requestNormalizeDelta=!0;if($.start-=X.delta,$.end-=X.delta,$.left=X.right,X.right!==F1)X.right.parent=$;if(X.parent=$.parent,$.parent===F1)J.root=X;else if($===$.parent.right)$.parent.right=X;else $.parent.left=X;X.right=$,$.parent=X,RZ($),RZ(X)}function Zr(J){let $=J.end;if(J.left!==F1){let X=J.left.maxEnd;if(X>$)$=X}if(J.right!==F1){let X=J.right.maxEnd+J.delta;if(X>$)$=X}return $}function RZ(J){J.maxEnd=Zr(J)}function Z2(J){while(J!==F1){let $=Zr(J);if(J.maxEnd===$)return;J.maxEnd=$,J=J.parent}}function AQ0(J,$,X,Y){if(J===X)return $-Y;return J-X}var F1;var Qr=w(()=>{F1=new QR(null,0,0);F1.parent=F1;F1.left=F1;F1.right=F1;K6(F1,0)});class XW{constructor(J,$){this.piece=J,this.color=$,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Z1)return GR(this.right);let J=this;while(J.parent!==Z1){if(J.parent.left===J)break;J=J.parent}if(J.parent===Z1)return Z1;else return J.parent}prev(){if(this.left!==Z1)return lE(this.left);let J=this;while(J.parent!==Z1){if(J.parent.right===J)break;J=J.parent}if(J.parent===Z1)return Z1;else return J.parent}detach(){this.parent=null,this.left=null,this.right=null}}function GR(J){while(J.left!==Z1)J=J.left;return J}function lE(J){while(J.right!==Z1)J=J.right;return J}function dE(J){if(J===Z1)return 0;return J.size_left+J.piece.length+dE(J.right)}function sE(J){if(J===Z1)return 0;return J.lf_left+J.piece.lineFeedCnt+sE(J.right)}function cE(){Z1.parent=Z1}function JW(J,$){let X=$.right;if(X.size_left+=$.size_left+($.piece?$.piece.length:0),X.lf_left+=$.lf_left+($.piece?$.piece.lineFeedCnt:0),$.right=X.left,X.left!==Z1)X.left.parent=$;if(X.parent=$.parent,$.parent===Z1)J.root=X;else if($.parent.left===$)$.parent.left=X;else $.parent.right=X;X.left=$,$.parent=X}function $W(J,$){let X=$.left;if($.left=X.right,X.right!==Z1)X.right.parent=$;if(X.parent=$.parent,$.size_left-=X.size_left+(X.piece?X.piece.length:0),$.lf_left-=X.lf_left+(X.piece?X.piece.lineFeedCnt:0),$.parent===Z1)J.root=X;else if($===$.parent.right)$.parent.right=X;else $.parent.left=X;X.right=$,$.parent=X}function YW(J,$){let X,Y;if($.left===Z1)Y=$,X=Y.right;else if($.right===Z1)Y=$,X=Y.left;else Y=GR($.right),X=Y.right;if(Y===J.root){J.root=X,X.color=0,$.detach(),cE(),J.root.parent=Z1;return}let Z=Y.color===1;if(Y===Y.parent.left)Y.parent.left=X;else Y.parent.right=X;if(Y===$)X.parent=Y.parent,eV(J,X);else{if(Y.parent===$)X.parent=Y;else X.parent=Y.parent;if(eV(J,X),Y.left=$.left,Y.right=$.right,Y.parent=$.parent,Y.color=$.color,$===J.root)J.root=Y;else if($===$.parent.left)$.parent.left=Y;else $.parent.right=Y;if(Y.left!==Z1)Y.left.parent=Y;if(Y.right!==Z1)Y.right.parent=Y;Y.size_left=$.size_left,Y.lf_left=$.lf_left,eV(J,Y)}if($.detach(),X.parent.left===X){let G=dE(X),q=sE(X);if(G!==X.parent.size_left||q!==X.parent.lf_left){let U=G-X.parent.size_left,z=q-X.parent.lf_left;X.parent.size_left=G,X.parent.lf_left=q,dX(J,X.parent,U,z)}}if(eV(J,X.parent),Z){cE();return}let Q;while(X!==J.root&&X.color===0)if(X===X.parent.left){if(Q=X.parent.right,Q.color===1)Q.color=0,X.parent.color=1,JW(J,X.parent),Q=X.parent.right;if(Q.left.color===0&&Q.right.color===0)Q.color=1,X=X.parent;else{if(Q.right.color===0)Q.left.color=0,Q.color=1,$W(J,Q),Q=X.parent.right;Q.color=X.parent.color,X.parent.color=0,Q.right.color=0,JW(J,X.parent),X=J.root}}else{if(Q=X.parent.left,Q.color===1)Q.color=0,X.parent.color=1,$W(J,X.parent),Q=X.parent.left;if(Q.left.color===0&&Q.right.color===0)Q.color=1,X=X.parent;else{if(Q.left.color===0)Q.right.color=0,Q.color=1,JW(J,Q),Q=X.parent.left;Q.color=X.parent.color,X.parent.color=0,Q.left.color=0,$W(J,X.parent),X=J.root}}X.color=0,cE()}function aE(J,$){eV(J,$);while($!==J.root&&$.parent.color===1)if($.parent===$.parent.parent.left){let X=$.parent.parent.right;if(X.color===1)$.parent.color=0,X.color=0,$.parent.parent.color=1,$=$.parent.parent;else{if($===$.parent.right)$=$.parent,JW(J,$);$.parent.color=0,$.parent.parent.color=1,$W(J,$.parent.parent)}}else{let X=$.parent.parent.left;if(X.color===1)$.parent.color=0,X.color=0,$.parent.parent.color=1,$=$.parent.parent;else{if($===$.parent.left)$=$.parent,$W(J,$);$.parent.color=0,$.parent.parent.color=1,JW(J,$.parent.parent)}}J.root.color=0}function dX(J,$,X,Y){while($!==J.root&&$!==Z1){if($.parent.left===$)$.parent.size_left+=X,$.parent.lf_left+=Y;$=$.parent}}function eV(J,$){let X=0,Y=0;if($===J.root)return;while($!==J.root&&$===$.parent.right)$=$.parent;if($===J.root)return;$=$.parent,X=dE($.left)-$.size_left,Y=sE($.left)-$.lf_left,$.size_left+=X,$.lf_left+=Y;while($!==J.root&&(X!==0||Y!==0)){if($.parent.left===$)$.parent.size_left+=X,$.parent.lf_left+=Y;$=$.parent}}var Z1;var Gr=w(()=>{Z1=new XW(null,0);Z1.parent=Z1;Z1.left=Z1;Z1.right=Z1;Z1.color=0});function qr(J){let $;if(J[J.length-1]<65536)$=new Uint16Array(J.length);else $=new Uint32Array(J.length);return $.set(J,0),$}class Ur{constructor(J,$,X,Y,Z){this.lineStarts=J,this.cr=$,this.lf=X,this.crlf=Y,this.isBasicASCII=Z}}function sX(J,$=!0){let X=[0],Y=1;for(let Z=0,Q=J.length;Z<Q;Z++){let G=J.charCodeAt(Z);if(G===13)if(Z+1<Q&&J.charCodeAt(Z+1)===10)X[Y++]=Z+2,Z++;else X[Y++]=Z+1;else if(G===10)X[Y++]=Z+1}if($)return qr(X);else return X}function zr(J,$){J.length=0,J[0]=0;let X=1,Y=0,Z=0,Q=0,G=!0;for(let U=0,z=$.length;U<z;U++){let H=$.charCodeAt(U);if(H===13)if(U+1<z&&$.charCodeAt(U+1)===10)Q++,J[X++]=U+2,U++;else Y++,J[X++]=U+1;else if(H===10)Z++,J[X++]=U+1;else if(G){if(H!==9&&(H<32||H>126))G=!1}}let q=new Ur(qr(J),Y,Z,Q,G);return J.length=0,q}class Y9{constructor(J,$,X,Y,Z){this.bufferIndex=J,this.start=$,this.end=X,this.lineFeedCnt=Y,this.length=Z}}class OZ{constructor(J,$){this.buffer=J,this.lineStarts=$}}class Hr{constructor(J,$){if(this._pieces=[],this._tree=J,this._BOM=$,this._index=0,J.root!==Z1)J.iterate(J.root,(X)=>{if(X!==Z1)this._pieces.push(X.piece);return!0})}read(){if(this._pieces.length===0)if(this._index===0)return this._index++,this._BOM;else return null;if(this._index>this._pieces.length-1)return null;if(this._index===0)return this._BOM+this._tree.getPieceContent(this._pieces[this._index++]);return this._tree.getPieceContent(this._pieces[this._index++])}}class jr{constructor(J){this._limit=J,this._cache=[]}get(J){for(let $=this._cache.length-1;$>=0;$--){let X=this._cache[$];if(X.nodeStartOffset<=J&&X.nodeStartOffset+X.node.piece.length>=J)return X}return null}get2(J){for(let $=this._cache.length-1;$>=0;$--){let X=this._cache[$];if(X.nodeStartLineNumber&&X.nodeStartLineNumber<J&&X.nodeStartLineNumber+X.node.piece.lineFeedCnt>=J)return X}return null}set(J){if(this._cache.length>=this._limit)this._cache.shift();this._cache.push(J)}validate(J){let $=!1,X=this._cache;for(let Y=0;Y<X.length;Y++){let Z=X[Y];if(Z.node.parent===null||Z.nodeStartOffset>=J){X[Y]=null,$=!0;continue}}if($){let Y=[];for(let Z of X)if(Z!==null)Y.push(Z);this._cache=Y}}}class rE{constructor(J,$,X){this.create(J,$,X)}create(J,$,X){this._buffers=[new OZ("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Z1,this._lineCnt=1,this._length=0,this._EOL=$,this._EOLLength=$.length,this._EOLNormalized=X;let Y=null;for(let Z=0,Q=J.length;Z<Q;Z++)if(J[Z].buffer.length>0){if(!J[Z].lineStarts)J[Z].lineStarts=sX(J[Z].buffer);let G=new Y9(Z+1,{line:0,column:0},{line:J[Z].lineStarts.length-1,column:J[Z].buffer.length-J[Z].lineStarts[J[Z].lineStarts.length-1]},J[Z].lineStarts.length-1,J[Z].buffer.length);this._buffers.push(J[Z]),Y=this.rbInsertRight(Y,G)}this._searchCache=new jr(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(J){let $=MZ,X=$-Math.floor($/3),Y=X*2,Z="",Q=0,G=[];if(this.iterate(this.root,(q)=>{let U=this.getNodeContent(q),z=U.length;if(Q<=X||Q+z<Y)return Z+=U,Q+=z,!0;let H=Z.replace(/\r\n|\r|\n/g,J);return G.push(new OZ(H,sX(H))),Z=U,Q=z,!0}),Q>0){let q=Z.replace(/\r\n|\r|\n/g,J);G.push(new OZ(q,sX(q)))}this.create(G,J,!0)}getEOL(){return this._EOL}setEOL(J){this._EOL=J,this._EOLLength=this._EOL.length,this.normalizeEOL(J)}createSnapshot(J){return new Hr(this,J)}getOffsetAt(J,$){let X=0,Y=this.root;while(Y!==Z1)if(Y.left!==Z1&&Y.lf_left+1>=J)Y=Y.left;else if(Y.lf_left+Y.piece.lineFeedCnt+1>=J){X+=Y.size_left;let Z=this.getAccumulatedValue(Y,J-Y.lf_left-2);return X+=Z+$-1}else J-=Y.lf_left+Y.piece.lineFeedCnt,X+=Y.size_left+Y.piece.length,Y=Y.right;return X}getPositionAt(J){J=Math.floor(J),J=Math.max(0,J);let $=this.root,X=0,Y=J;while($!==Z1)if($.size_left!==0&&$.size_left>=J)$=$.left;else if($.size_left+$.piece.length>=J){let Z=this.getIndexOf($,J-$.size_left);if(X+=$.lf_left+Z.index,Z.index===0){let Q=this.getOffsetAt(X+1,1),G=Y-Q;return new g(X+1,G+1)}return new g(X+1,Z.remainder+1)}else if(J-=$.size_left+$.piece.length,X+=$.lf_left+$.piece.lineFeedCnt,$.right===Z1){let Z=this.getOffsetAt(X+1,1),Q=Y-J-Z;return new g(X+1,Q+1)}else $=$.right;return new g(1,1)}getValueInRange(J,$){if(J.startLineNumber===J.endLineNumber&&J.startColumn===J.endColumn)return"";let X=this.nodeAt2(J.startLineNumber,J.startColumn),Y=this.nodeAt2(J.endLineNumber,J.endColumn),Z=this.getValueInRange2(X,Y);if($){if($!==this._EOL||!this._EOLNormalized)return Z.replace(/\r\n|\r|\n/g,$);if($===this.getEOL()&&this._EOLNormalized)return Z;return Z.replace(/\r\n|\r|\n/g,$)}return Z}getValueInRange2(J,$){if(J.node===$.node){let G=J.node,q=this._buffers[G.piece.bufferIndex].buffer,U=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);return q.substring(U+J.remainder,U+$.remainder)}let X=J.node,Y=this._buffers[X.piece.bufferIndex].buffer,Z=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start),Q=Y.substring(Z+J.remainder,Z+X.piece.length);X=X.next();while(X!==Z1){let G=this._buffers[X.piece.bufferIndex].buffer,q=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start);if(X===$.node){Q+=G.substring(q,q+$.remainder);break}else Q+=G.substr(q,X.piece.length);X=X.next()}return Q}getLinesContent(){let J=[],$=0,X="",Y=!1;if(this.iterate(this.root,(Z)=>{if(Z===Z1)return!0;let Q=Z.piece,G=Q.length;if(G===0)return!0;let q=this._buffers[Q.bufferIndex].buffer,U=this._buffers[Q.bufferIndex].lineStarts,z=Q.start.line,H=Q.end.line,j=U[z]+Q.start.column;if(Y){if(q.charCodeAt(j)===10)j++,G--;if(J[$++]=X,X="",Y=!1,G===0)return!0}if(z===H){if(!this._EOLNormalized&&q.charCodeAt(j+G-1)===13)Y=!0,X+=q.substr(j,G-1);else X+=q.substr(j,G);return!0}X+=this._EOLNormalized?q.substring(j,Math.max(j,U[z+1]-this._EOLLength)):q.substring(j,U[z+1]).replace(/(\r\n|\r|\n)$/,""),J[$++]=X;for(let V=z+1;V<H;V++)X=this._EOLNormalized?q.substring(U[V],U[V+1]-this._EOLLength):q.substring(U[V],U[V+1]).replace(/(\r\n|\r|\n)$/,""),J[$++]=X;if(!this._EOLNormalized&&q.charCodeAt(U[H]+Q.end.column-1)===13)if(Y=!0,Q.end.column===0)$--;else X=q.substr(U[H],Q.end.column-1);else X=q.substr(U[H],Q.end.column);return!0}),Y)J[$++]=X,X="";return J[$++]=X,J}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(J){if(this._lastVisitedLine.lineNumber===J)return this._lastVisitedLine.value;if(this._lastVisitedLine.lineNumber=J,J===this._lineCnt)this._lastVisitedLine.value=this.getLineRawContent(J);else if(this._EOLNormalized)this._lastVisitedLine.value=this.getLineRawContent(J,this._EOLLength);else this._lastVisitedLine.value=this.getLineRawContent(J).replace(/(\r\n|\r|\n)$/,"");return this._lastVisitedLine.value}_getCharCode(J){if(J.remainder===J.node.piece.length){let $=J.node.next();if(!$)return 0;let X=this._buffers[$.piece.bufferIndex],Y=this.offsetInBuffer($.piece.bufferIndex,$.piece.start);return X.buffer.charCodeAt(Y)}else{let $=this._buffers[J.node.piece.bufferIndex],Y=this.offsetInBuffer(J.node.piece.bufferIndex,J.node.piece.start)+J.remainder;return $.buffer.charCodeAt(Y)}}getLineCharCode(J,$){let X=this.nodeAt2(J,$+1);return this._getCharCode(X)}getLineLength(J){if(J===this.getLineCount()){let $=this.getOffsetAt(J,1);return this.getLength()-$}return this.getOffsetAt(J+1,1)-this.getOffsetAt(J,1)-this._EOLLength}findMatchesInNode(J,$,X,Y,Z,Q,G,q,U,z,H){let j=this._buffers[J.piece.bufferIndex],V=this.offsetInBuffer(J.piece.bufferIndex,J.piece.start),W=this.offsetInBuffer(J.piece.bufferIndex,Z),B=this.offsetInBuffer(J.piece.bufferIndex,Q),K,P={line:0,column:0},A,D;if($._wordSeparators)A=j.buffer.substring(W,B),D=(M)=>M+W,$.reset(0);else A=j.buffer,D=(M)=>M,$.reset(W);do if(K=$.next(A),K){if(D(K.index)>=B)return z;this.positionInBuffer(J,D(K.index)-V,P);let M=this.getLineFeedCnt(J.piece.bufferIndex,Z,P),R=P.line===Z.line?P.column-Z.column+Y:P.column+1,O=R+K[0].length;if(H[z++]=xQ(new k(X+M,R,X+M,O),K,q),D(K.index)+K[0].length>=B)return z;if(z>=U)return z}while(K);return z}findMatchesLineByLine(J,$,X,Y){let Z=[],Q=0,G=new iY($.wordSeparators,$.regex),q=this.nodeAt2(J.startLineNumber,J.startColumn);if(q===null)return[];let U=this.nodeAt2(J.endLineNumber,J.endColumn);if(U===null)return[];let z=this.positionInBuffer(q.node,q.remainder),H=this.positionInBuffer(U.node,U.remainder);if(q.node===U.node)return this.findMatchesInNode(q.node,G,J.startLineNumber,J.startColumn,z,H,$,X,Y,Q,Z),Z;let j=J.startLineNumber,V=q.node;while(V!==U.node){let B=this.getLineFeedCnt(V.piece.bufferIndex,z,V.piece.end);if(B>=1){let P=this._buffers[V.piece.bufferIndex].lineStarts,A=this.offsetInBuffer(V.piece.bufferIndex,V.piece.start),D=P[z.line+B],M=j===J.startLineNumber?J.startColumn:1;if(Q=this.findMatchesInNode(V,G,j,M,z,this.positionInBuffer(V,D-A),$,X,Y,Q,Z),Q>=Y)return Z;j+=B}let K=j===J.startLineNumber?J.startColumn-1:0;if(j===J.endLineNumber){let P=this.getLineContent(j).substring(K,J.endColumn-1);return Q=this._findMatchesInLine($,G,P,J.endLineNumber,K,Q,Z,X,Y),Z}if(Q=this._findMatchesInLine($,G,this.getLineContent(j).substr(K),j,K,Q,Z,X,Y),Q>=Y)return Z;j++,q=this.nodeAt2(j,1),V=q.node,z=this.positionInBuffer(q.node,q.remainder)}if(j===J.endLineNumber){let B=j===J.startLineNumber?J.startColumn-1:0,K=this.getLineContent(j).substring(B,J.endColumn-1);return Q=this._findMatchesInLine($,G,K,J.endLineNumber,B,Q,Z,X,Y),Z}let W=j===J.startLineNumber?J.startColumn:1;return Q=this.findMatchesInNode(U.node,G,j,W,z,H,$,X,Y,Q,Z),Z}_findMatchesInLine(J,$,X,Y,Z,Q,G,q,U){let z=J.wordSeparators;if(!q&&J.simpleSearch){let j=J.simpleSearch,V=j.length,W=X.length,B=-V;while((B=X.indexOf(j,B+V))!==-1)if(!z||kP(z,X,W,B,V)){if(G[Q++]=new rY(new k(Y,B+1+Z,Y,B+1+V+Z),null),Q>=U)return Q}return Q}let H;$.reset(0);do if(H=$.next(X),H){if(G[Q++]=xQ(new k(Y,H.index+1+Z,Y,H.index+1+H[0].length+Z),H,q),Q>=U)return Q}while(H);return Q}insert(J,$,X=!1){if(this._EOLNormalized=this._EOLNormalized&&X,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Z1){let{node:Y,remainder:Z,nodeStartOffset:Q}=this.nodeAt(J),G=Y.piece,q=G.bufferIndex,U=this.positionInBuffer(Y,Z);if(Y.piece.bufferIndex===0&&G.end.line===this._lastChangeBufferPos.line&&G.end.column===this._lastChangeBufferPos.column&&Q+G.length===J&&$.length<MZ){this.appendToNode(Y,$),this.computeBufferMetadata();return}if(Q===J)this.insertContentToNodeLeft($,Y),this._searchCache.validate(J);else if(Q+Y.piece.length>J){let z=[],H=new Y9(G.bufferIndex,U,G.end,this.getLineFeedCnt(G.bufferIndex,U,G.end),this.offsetInBuffer(q,G.end)-this.offsetInBuffer(q,U));if(this.shouldCheckCRLF()&&this.endWithCR($)){if(this.nodeCharCodeAt(Y,Z)===10){let B={line:H.start.line+1,column:0};H=new Y9(H.bufferIndex,B,H.end,this.getLineFeedCnt(H.bufferIndex,B,H.end),H.length-1),$+=`
`}}if(this.shouldCheckCRLF()&&this.startWithLF($))if(this.nodeCharCodeAt(Y,Z-1)===13){let B=this.positionInBuffer(Y,Z-1);if(this.deleteNodeTail(Y,B),$="\r"+$,Y.piece.length===0)z.push(Y)}else this.deleteNodeTail(Y,U);else this.deleteNodeTail(Y,U);let j=this.createNewPieces($);if(H.length>0)this.rbInsertRight(Y,H);let V=Y;for(let W=0;W<j.length;W++)V=this.rbInsertRight(V,j[W]);this.deleteNodes(z)}else this.insertContentToNodeRight($,Y)}else{let Y=this.createNewPieces($),Z=this.rbInsertLeft(null,Y[0]);for(let Q=1;Q<Y.length;Q++)Z=this.rbInsertRight(Z,Y[Q])}this.computeBufferMetadata()}delete(J,$){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",$<=0||this.root===Z1)return;let X=this.nodeAt(J),Y=this.nodeAt(J+$),Z=X.node,Q=Y.node;if(Z===Q){let j=this.positionInBuffer(Z,X.remainder),V=this.positionInBuffer(Z,Y.remainder);if(X.nodeStartOffset===J){if($===Z.piece.length){let W=Z.next();YW(this,Z),this.validateCRLFWithPrevNode(W),this.computeBufferMetadata();return}this.deleteNodeHead(Z,V),this._searchCache.validate(J),this.validateCRLFWithPrevNode(Z),this.computeBufferMetadata();return}if(X.nodeStartOffset+Z.piece.length===J+$){this.deleteNodeTail(Z,j),this.validateCRLFWithNextNode(Z),this.computeBufferMetadata();return}this.shrinkNode(Z,j,V),this.computeBufferMetadata();return}let G=[],q=this.positionInBuffer(Z,X.remainder);if(this.deleteNodeTail(Z,q),this._searchCache.validate(J),Z.piece.length===0)G.push(Z);let U=this.positionInBuffer(Q,Y.remainder);if(this.deleteNodeHead(Q,U),Q.piece.length===0)G.push(Q);let z=Z.next();for(let j=z;j!==Z1&&j!==Q;j=j.next())G.push(j);let H=Z.piece.length===0?Z.prev():Z;this.deleteNodes(G),this.validateCRLFWithNextNode(H),this.computeBufferMetadata()}insertContentToNodeLeft(J,$){let X=[];if(this.shouldCheckCRLF()&&this.endWithCR(J)&&this.startWithLF($)){let Q=$.piece,G={line:Q.start.line+1,column:0},q=new Y9(Q.bufferIndex,G,Q.end,this.getLineFeedCnt(Q.bufferIndex,G,Q.end),Q.length-1);if($.piece=q,J+=`
`,dX(this,$,-1,-1),$.piece.length===0)X.push($)}let Y=this.createNewPieces(J),Z=this.rbInsertLeft($,Y[Y.length-1]);for(let Q=Y.length-2;Q>=0;Q--)Z=this.rbInsertLeft(Z,Y[Q]);this.validateCRLFWithPrevNode(Z),this.deleteNodes(X)}insertContentToNodeRight(J,$){if(this.adjustCarriageReturnFromNext(J,$))J+=`
`;let X=this.createNewPieces(J),Y=this.rbInsertRight($,X[0]),Z=Y;for(let Q=1;Q<X.length;Q++)Z=this.rbInsertRight(Z,X[Q]);this.validateCRLFWithPrevNode(Y)}positionInBuffer(J,$,X){let Y=J.piece,Z=J.piece.bufferIndex,Q=this._buffers[Z].lineStarts,q=Q[Y.start.line]+Y.start.column+$,U=Y.start.line,z=Y.end.line,H=0,j=0,V=0;while(U<=z){if(H=U+(z-U)/2|0,V=Q[H],H===z)break;if(j=Q[H+1],q<V)z=H-1;else if(q>=j)U=H+1;else break}if(X)return X.line=H,X.column=q-V,null;return{line:H,column:q-V}}getLineFeedCnt(J,$,X){if(X.column===0)return X.line-$.line;let Y=this._buffers[J].lineStarts;if(X.line===Y.length-1)return X.line-$.line;let Z=Y[X.line+1],Q=Y[X.line]+X.column;if(Z>Q+1)return X.line-$.line;let G=Q-1;if(this._buffers[J].buffer.charCodeAt(G)===13)return X.line-$.line+1;else return X.line-$.line}offsetInBuffer(J,$){return this._buffers[J].lineStarts[$.line]+$.column}deleteNodes(J){for(let $=0;$<J.length;$++)YW(this,J[$])}createNewPieces(J){if(J.length>MZ){let z=[];while(J.length>MZ){let j=J.charCodeAt(MZ-1),V;if(j===13||j>=55296&&j<=56319)V=J.substring(0,MZ-1),J=J.substring(MZ-1);else V=J.substring(0,MZ),J=J.substring(MZ);let W=sX(V);z.push(new Y9(this._buffers.length,{line:0,column:0},{line:W.length-1,column:V.length-W[W.length-1]},W.length-1,V.length)),this._buffers.push(new OZ(V,W))}let H=sX(J);return z.push(new Y9(this._buffers.length,{line:0,column:0},{line:H.length-1,column:J.length-H[H.length-1]},H.length-1,J.length)),this._buffers.push(new OZ(J,H)),z}let $=this._buffers[0].buffer.length,X=sX(J,!1),Y=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===$&&$!==0&&this.startWithLF(J)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},Y=this._lastChangeBufferPos;for(let z=0;z<X.length;z++)X[z]+=$+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(X.slice(1)),this._buffers[0].buffer+="_"+J,$+=1}else{if($!==0)for(let z=0;z<X.length;z++)X[z]+=$;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(X.slice(1)),this._buffers[0].buffer+=J}let Z=this._buffers[0].buffer.length,Q=this._buffers[0].lineStarts.length-1,G=Z-this._buffers[0].lineStarts[Q],q={line:Q,column:G},U=new Y9(0,Y,q,this.getLineFeedCnt(0,Y,q),Z-$);return this._lastChangeBufferPos=q,[U]}getLineRawContent(J,$=0){let X=this.root,Y="",Z=this._searchCache.get2(J);if(Z){X=Z.node;let Q=this.getAccumulatedValue(X,J-Z.nodeStartLineNumber-1),G=this._buffers[X.piece.bufferIndex].buffer,q=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start);if(Z.nodeStartLineNumber+X.piece.lineFeedCnt===J)Y=G.substring(q+Q,q+X.piece.length);else{let U=this.getAccumulatedValue(X,J-Z.nodeStartLineNumber);return G.substring(q+Q,q+U-$)}}else{let Q=0,G=J;while(X!==Z1)if(X.left!==Z1&&X.lf_left>=J-1)X=X.left;else if(X.lf_left+X.piece.lineFeedCnt>J-1){let q=this.getAccumulatedValue(X,J-X.lf_left-2),U=this.getAccumulatedValue(X,J-X.lf_left-1),z=this._buffers[X.piece.bufferIndex].buffer,H=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start);return Q+=X.size_left,this._searchCache.set({node:X,nodeStartOffset:Q,nodeStartLineNumber:G-(J-1-X.lf_left)}),z.substring(H+q,H+U-$)}else if(X.lf_left+X.piece.lineFeedCnt===J-1){let q=this.getAccumulatedValue(X,J-X.lf_left-2),U=this._buffers[X.piece.bufferIndex].buffer,z=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start);Y=U.substring(z+q,z+X.piece.length);break}else J-=X.lf_left+X.piece.lineFeedCnt,Q+=X.size_left+X.piece.length,X=X.right}X=X.next();while(X!==Z1){let Q=this._buffers[X.piece.bufferIndex].buffer;if(X.piece.lineFeedCnt>0){let G=this.getAccumulatedValue(X,0),q=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start);return Y+=Q.substring(q,q+G-$),Y}else{let G=this.offsetInBuffer(X.piece.bufferIndex,X.piece.start);Y+=Q.substr(G,X.piece.length)}X=X.next()}return Y}computeBufferMetadata(){let J=this.root,$=1,X=0;while(J!==Z1)$+=J.lf_left+J.piece.lineFeedCnt,X+=J.size_left+J.piece.length,J=J.right;this._lineCnt=$,this._length=X,this._searchCache.validate(this._length)}getIndexOf(J,$){let X=J.piece,Y=this.positionInBuffer(J,$),Z=Y.line-X.start.line;if(this.offsetInBuffer(X.bufferIndex,X.end)-this.offsetInBuffer(X.bufferIndex,X.start)===$){let Q=this.getLineFeedCnt(J.piece.bufferIndex,X.start,Y);if(Q!==Z)return{index:Q,remainder:0}}return{index:Z,remainder:Y.column}}getAccumulatedValue(J,$){if($<0)return 0;let X=J.piece,Y=this._buffers[X.bufferIndex].lineStarts,Z=X.start.line+$+1;if(Z>X.end.line)return Y[X.end.line]+X.end.column-Y[X.start.line]-X.start.column;else return Y[Z]-Y[X.start.line]-X.start.column}deleteNodeTail(J,$){let X=J.piece,Y=X.lineFeedCnt,Z=this.offsetInBuffer(X.bufferIndex,X.end),Q=$,G=this.offsetInBuffer(X.bufferIndex,Q),q=this.getLineFeedCnt(X.bufferIndex,X.start,Q),U=q-Y,z=G-Z,H=X.length+z;J.piece=new Y9(X.bufferIndex,X.start,Q,q,H),dX(this,J,z,U)}deleteNodeHead(J,$){let X=J.piece,Y=X.lineFeedCnt,Z=this.offsetInBuffer(X.bufferIndex,X.start),Q=$,G=this.getLineFeedCnt(X.bufferIndex,Q,X.end),q=this.offsetInBuffer(X.bufferIndex,Q),U=G-Y,z=Z-q,H=X.length+z;J.piece=new Y9(X.bufferIndex,Q,X.end,G,H),dX(this,J,z,U)}shrinkNode(J,$,X){let Y=J.piece,Z=Y.start,Q=Y.end,G=Y.length,q=Y.lineFeedCnt,U=$,z=this.getLineFeedCnt(Y.bufferIndex,Y.start,U),H=this.offsetInBuffer(Y.bufferIndex,$)-this.offsetInBuffer(Y.bufferIndex,Z);J.piece=new Y9(Y.bufferIndex,Y.start,U,z,H),dX(this,J,H-G,z-q);let j=new Y9(Y.bufferIndex,X,Q,this.getLineFeedCnt(Y.bufferIndex,X,Q),this.offsetInBuffer(Y.bufferIndex,Q)-this.offsetInBuffer(Y.bufferIndex,X)),V=this.rbInsertRight(J,j);this.validateCRLFWithPrevNode(V)}appendToNode(J,$){if(this.adjustCarriageReturnFromNext($,J))$+=`
`;let X=this.shouldCheckCRLF()&&this.startWithLF($)&&this.endWithCR(J),Y=this._buffers[0].buffer.length;this._buffers[0].buffer+=$;let Z=sX($,!1);for(let V=0;V<Z.length;V++)Z[V]+=Y;if(X){let V=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:Y-V}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(Z.slice(1));let Q=this._buffers[0].lineStarts.length-1,G=this._buffers[0].buffer.length-this._buffers[0].lineStarts[Q],q={line:Q,column:G},U=J.piece.length+$.length,z=J.piece.lineFeedCnt,H=this.getLineFeedCnt(0,J.piece.start,q),j=H-z;J.piece=new Y9(J.piece.bufferIndex,J.piece.start,q,H,U),this._lastChangeBufferPos=q,dX(this,J,$.length,j)}nodeAt(J){let $=this.root,X=this._searchCache.get(J);if(X)return{node:X.node,nodeStartOffset:X.nodeStartOffset,remainder:J-X.nodeStartOffset};let Y=0;while($!==Z1)if($.size_left>J)$=$.left;else if($.size_left+$.piece.length>=J){Y+=$.size_left;let Z={node:$,remainder:J-$.size_left,nodeStartOffset:Y};return this._searchCache.set(Z),Z}else J-=$.size_left+$.piece.length,Y+=$.size_left+$.piece.length,$=$.right;return null}nodeAt2(J,$){let X=this.root,Y=0;while(X!==Z1)if(X.left!==Z1&&X.lf_left>=J-1)X=X.left;else if(X.lf_left+X.piece.lineFeedCnt>J-1){let Z=this.getAccumulatedValue(X,J-X.lf_left-2),Q=this.getAccumulatedValue(X,J-X.lf_left-1);return Y+=X.size_left,{node:X,remainder:Math.min(Z+$-1,Q),nodeStartOffset:Y}}else if(X.lf_left+X.piece.lineFeedCnt===J-1){let Z=this.getAccumulatedValue(X,J-X.lf_left-2);if(Z+$-1<=X.piece.length)return{node:X,remainder:Z+$-1,nodeStartOffset:Y};else{$-=X.piece.length-Z;break}}else J-=X.lf_left+X.piece.lineFeedCnt,Y+=X.size_left+X.piece.length,X=X.right;X=X.next();while(X!==Z1){if(X.piece.lineFeedCnt>0){let Z=this.getAccumulatedValue(X,0),Q=this.offsetOfNode(X);return{node:X,remainder:Math.min($-1,Z),nodeStartOffset:Q}}else if(X.piece.length>=$-1){let Z=this.offsetOfNode(X);return{node:X,remainder:$-1,nodeStartOffset:Z}}else $-=X.piece.length;X=X.next()}return null}nodeCharCodeAt(J,$){if(J.piece.lineFeedCnt<1)return-1;let X=this._buffers[J.piece.bufferIndex],Y=this.offsetInBuffer(J.piece.bufferIndex,J.piece.start)+$;return X.buffer.charCodeAt(Y)}offsetOfNode(J){if(!J)return 0;let $=J.size_left;while(J!==this.root){if(J.parent.right===J)$+=J.parent.size_left+J.parent.piece.length;J=J.parent}return $}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(J){if(typeof J==="string")return J.charCodeAt(0)===10;if(J===Z1||J.piece.lineFeedCnt===0)return!1;let $=J.piece,X=this._buffers[$.bufferIndex].lineStarts,Y=$.start.line,Z=X[Y]+$.start.column;if(Y===X.length-1)return!1;if(X[Y+1]>Z+1)return!1;return this._buffers[$.bufferIndex].buffer.charCodeAt(Z)===10}endWithCR(J){if(typeof J==="string")return J.charCodeAt(J.length-1)===13;if(J===Z1||J.piece.lineFeedCnt===0)return!1;return this.nodeCharCodeAt(J,J.piece.length-1)===13}validateCRLFWithPrevNode(J){if(this.shouldCheckCRLF()&&this.startWithLF(J)){let $=J.prev();if(this.endWithCR($))this.fixCRLF($,J)}}validateCRLFWithNextNode(J){if(this.shouldCheckCRLF()&&this.endWithCR(J)){let $=J.next();if(this.startWithLF($))this.fixCRLF(J,$)}}fixCRLF(J,$){let X=[],Y=this._buffers[J.piece.bufferIndex].lineStarts,Z;if(J.piece.end.column===0)Z={line:J.piece.end.line-1,column:Y[J.piece.end.line]-Y[J.piece.end.line-1]-1};else Z={line:J.piece.end.line,column:J.piece.end.column-1};let Q=J.piece.length-1,G=J.piece.lineFeedCnt-1;if(J.piece=new Y9(J.piece.bufferIndex,J.piece.start,Z,G,Q),dX(this,J,-1,-1),J.piece.length===0)X.push(J);let q={line:$.piece.start.line+1,column:0},U=$.piece.length-1,z=this.getLineFeedCnt($.piece.bufferIndex,q,$.piece.end);if($.piece=new Y9($.piece.bufferIndex,q,$.piece.end,z,U),dX(this,$,-1,-1),$.piece.length===0)X.push($);let H=this.createNewPieces(`\r
`);this.rbInsertRight(J,H[0]);for(let j=0;j<X.length;j++)YW(this,X[j])}adjustCarriageReturnFromNext(J,$){if(this.shouldCheckCRLF()&&this.endWithCR(J)){let X=$.next();if(this.startWithLF(X)){if(J+=`
`,X.piece.length===1)YW(this,X);else{let Y=X.piece,Z={line:Y.start.line+1,column:0},Q=Y.length-1,G=this.getLineFeedCnt(Y.bufferIndex,Z,Y.end);X.piece=new Y9(Y.bufferIndex,Z,Y.end,G,Q),dX(this,X,-1,-1)}return!0}}return!1}iterate(J,$){if(J===Z1)return $(Z1);let X=this.iterate(J.left,$);if(!X)return X;return $(J)&&this.iterate(J.right,$)}getNodeContent(J){if(J===Z1)return"";let $=this._buffers[J.piece.bufferIndex],X=J.piece,Y=this.offsetInBuffer(X.bufferIndex,X.start),Z=this.offsetInBuffer(X.bufferIndex,X.end);return $.buffer.substring(Y,Z)}getPieceContent(J){let $=this._buffers[J.bufferIndex],X=this.offsetInBuffer(J.bufferIndex,J.start),Y=this.offsetInBuffer(J.bufferIndex,J.end);return $.buffer.substring(X,Y)}rbInsertRight(J,$){let X=new XW($,1);if(X.left=Z1,X.right=Z1,X.parent=Z1,X.size_left=0,X.lf_left=0,this.root===Z1)this.root=X,X.color=0;else if(J.right===Z1)J.right=X,X.parent=J;else{let Z=GR(J.right);Z.left=X,X.parent=Z}return aE(this,X),X}rbInsertLeft(J,$){let X=new XW($,1);if(X.left=Z1,X.right=Z1,X.parent=Z1,X.size_left=0,X.lf_left=0,this.root===Z1)this.root=X,X.color=0;else if(J.left===Z1)J.left=X,X.parent=J;else{let Y=lE(J.left);Y.right=X,X.parent=Y}return aE(this,X),X}}var MZ=65535;var iE=w(()=>{i0();O9();Gr();EP()});var Q2;var nE=w(()=>{_0();X1();i0();O9();iE();SE();z0();Q2=class Q2 extends m{constructor(J,$,X,Y,Z,Q,G){super();this._onDidChangeContent=this._register(new x),this._BOM=$,this._mightContainNonBasicASCII=!Q,this._mightContainRTL=Y,this._mightContainUnusualLineTerminators=Z,this._pieceTree=new rE(J,X,G)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(J){return this._pieceTree.createSnapshot(J?this._BOM:"")}getOffsetAt(J,$){return this._pieceTree.getOffsetAt(J,$)}getPositionAt(J){return this._pieceTree.getPositionAt(J)}getRangeAt(J,$){let X=J+$,Y=this.getPositionAt(J),Z=this.getPositionAt(X);return new k(Y.lineNumber,Y.column,Z.lineNumber,Z.column)}getValueInRange(J,$=0){if(J.isEmpty())return"";let X=this._getEndOfLine($);return this._pieceTree.getValueInRange(J,X)}getValueLengthInRange(J,$=0){if(J.isEmpty())return 0;if(J.startLineNumber===J.endLineNumber)return J.endColumn-J.startColumn;let X=this.getOffsetAt(J.startLineNumber,J.startColumn),Y=this.getOffsetAt(J.endLineNumber,J.endColumn),Z=0,Q=this._getEndOfLine($),G=this.getEOL();if(Q.length!==G.length){let q=Q.length-G.length,U=J.endLineNumber-J.startLineNumber;Z=q*U}return Y-X+Z}getCharacterCountInRange(J,$=0){if(this._mightContainNonBasicASCII){let X=0,Y=J.startLineNumber,Z=J.endLineNumber;for(let Q=Y;Q<=Z;Q++){let G=this.getLineContent(Q),q=Q===Y?J.startColumn-1:0,U=Q===Z?J.endColumn-1:G.length;for(let z=q;z<U;z++)if(P6(G.charCodeAt(z)))X=X+1,z=z+1;else X=X+1}return X+=this._getEndOfLine($).length*(Z-Y),X}return this.getValueLengthInRange(J,$)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(J){return this._pieceTree.getLineContent(J)}getLineCharCode(J,$){return this._pieceTree.getLineCharCode(J,$)}getLineLength(J){return this._pieceTree.getLineLength(J)}getLineFirstNonWhitespaceColumn(J){let $=c6(this.getLineContent(J));if($===-1)return 0;return $+1}getLineLastNonWhitespaceColumn(J){let $=r9(this.getLineContent(J));if($===-1)return 0;return $+2}_getEndOfLine(J){switch(J){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw Error("Unknown EOL preference")}}setEOL(J){this._pieceTree.setEOL(J)}applyEdits(J,$,X){let Y=this._mightContainRTL,Z=this._mightContainUnusualLineTerminators,Q=this._mightContainNonBasicASCII,G=!0,q=[];for(let B=0;B<J.length;B++){let K=J[B];if(G&&K._isTracked)G=!1;let P=K.range;if(K.text){let O=!0;if(!Q)O=!dq(K.text),Q=O;if(!Y&&O)Y=xY(K.text);if(!Z&&O)Z=_A(K.text)}let A="",D=0,M=0,R=0;if(K.text){let O;[D,M,R,O]=p4(K.text);let N=this.getEOL();if(O===0||O===(N===`\r
`?2:1))A=K.text;else A=K.text.replace(/\r\n|\r|\n/g,N)}q[B]={sortIndex:B,identifier:K.identifier||null,range:P,rangeOffset:this.getOffsetAt(P.startLineNumber,P.startColumn),rangeLength:this.getValueLengthInRange(P),text:A,eolCount:D,firstLineLength:M,lastLineLength:R,forceMoveMarkers:Boolean(K.forceMoveMarkers),isAutoWhitespaceEdit:K.isAutoWhitespaceEdit||!1}}q.sort(Q2._sortOpsAscending);let U=!1;for(let B=0,K=q.length-1;B<K;B++){let P=q[B].range.getEndPosition(),A=q[B+1].range.getStartPosition();if(A.isBeforeOrEqual(P)){if(A.isBefore(P))throw Error("Overlapping ranges are not allowed!");U=!0}}if(G)q=this._reduceOperations(q);let z=X||$?Q2._getInverseEditRanges(q):[],H=[];if($)for(let B=0;B<q.length;B++){let K=q[B],P=z[B];if(K.isAutoWhitespaceEdit&&K.range.isEmpty())for(let A=P.startLineNumber;A<=P.endLineNumber;A++){let D="";if(A===P.startLineNumber){if(D=this.getLineContent(K.range.startLineNumber),c6(D)!==-1)continue}H.push({lineNumber:A,oldContent:D})}}let j=null;if(X){let B=0;j=[];for(let K=0;K<q.length;K++){let P=q[K],A=z[K],D=this.getValueInRange(P.range),M=P.rangeOffset+B;B+=P.text.length-D.length,j[K]={sortIndex:P.sortIndex,identifier:P.identifier,range:A,text:D,textChange:new J8(P.rangeOffset,D,M,P.text)}}if(!U)j.sort((K,P)=>K.sortIndex-P.sortIndex)}this._mightContainRTL=Y,this._mightContainUnusualLineTerminators=Z,this._mightContainNonBasicASCII=Q;let V=this._doApplyEdits(q),W=null;if($&&H.length>0){H.sort((B,K)=>K.lineNumber-B.lineNumber),W=[];for(let B=0,K=H.length;B<K;B++){let P=H[B].lineNumber;if(B>0&&H[B-1].lineNumber===P)continue;let A=H[B].oldContent,D=this.getLineContent(P);if(D.length===0||D===A||c6(D)!==-1)continue;W.push(P)}}return this._onDidChangeContent.fire(),new yw(j,V,W)}_reduceOperations(J){if(J.length<1000)return J;return[this._toSingleEditOperation(J)]}_toSingleEditOperation(J){let $=!1,X=J[0].range,Y=J[J.length-1].range,Z=new k(X.startLineNumber,X.startColumn,Y.endLineNumber,Y.endColumn),Q=X.startLineNumber,G=X.startColumn,q=[];for(let V=0,W=J.length;V<W;V++){let B=J[V],K=B.range;if($=$||B.forceMoveMarkers,q.push(this.getValueInRange(new k(Q,G,K.startLineNumber,K.startColumn))),B.text.length>0)q.push(B.text);Q=K.endLineNumber,G=K.endColumn}let U=q.join(""),[z,H,j]=p4(U);return{sortIndex:0,identifier:J[0].identifier,range:Z,rangeOffset:this.getOffsetAt(Z.startLineNumber,Z.startColumn),rangeLength:this.getValueLengthInRange(Z,0),text:U,eolCount:z,firstLineLength:H,lastLineLength:j,forceMoveMarkers:$,isAutoWhitespaceEdit:!1}}_doApplyEdits(J){J.sort(Q2._sortOpsDescending);let $=[];for(let X=0;X<J.length;X++){let Y=J[X],Z=Y.range.startLineNumber,Q=Y.range.startColumn,G=Y.range.endLineNumber,q=Y.range.endColumn;if(Z===G&&Q===q&&Y.text.length===0)continue;if(Y.text)this._pieceTree.delete(Y.rangeOffset,Y.rangeLength),this._pieceTree.insert(Y.rangeOffset,Y.text,!0);else this._pieceTree.delete(Y.rangeOffset,Y.rangeLength);let U=new k(Z,Q,G,q);$.push({range:U,rangeLength:Y.rangeLength,text:Y.text,rangeOffset:Y.rangeOffset,forceMoveMarkers:Y.forceMoveMarkers})}return $}findMatchesLineByLine(J,$,X,Y){return this._pieceTree.findMatchesLineByLine(J,$,X,Y)}static _getInverseEditRanges(J){let $=[],X=0,Y=0,Z=null;for(let Q=0,G=J.length;Q<G;Q++){let q=J[Q],U,z;if(Z)if(Z.range.endLineNumber===q.range.startLineNumber)U=X,z=Y+(q.range.startColumn-Z.range.endColumn);else U=X+(q.range.startLineNumber-Z.range.endLineNumber),z=q.range.startColumn;else U=q.range.startLineNumber,z=q.range.startColumn;let H;if(q.text.length>0){let j=q.eolCount+1;if(j===1)H=new k(U,z,U,z+q.firstLineLength);else H=new k(U,z,U+j-1,q.lastLineLength+1)}else H=new k(U,z,U,z);X=H.endLineNumber,Y=H.endColumn,$.push(H),Z=q}return $}static _sortOpsAscending(J,$){let X=k.compareRangesUsingEnds(J.range,$.range);if(X===0)return J.sortIndex-$.sortIndex;return X}static _sortOpsDescending(J,$){let X=k.compareRangesUsingEnds(J.range,$.range);if(X===0)return $.sortIndex-J.sortIndex;return-X}}});class Vr{constructor(J,$,X,Y,Z,Q,G,q,U){this._chunks=J,this._bom=$,this._cr=X,this._lf=Y,this._crlf=Z,this._containsRTL=Q,this._containsUnusualLineTerminators=G,this._isBasicASCII=q,this._normalizeEOL=U}_getEOL(J){let $=this._cr+this._lf+this._crlf,X=this._cr+this._crlf;if($===0)return J===1?`
`:`\r
`;if(X>$/2)return`\r
`;return`
`}create(J){let $=this._getEOL(J),X=this._chunks;if(this._normalizeEOL&&($===`\r
`&&(this._cr>0||this._lf>0)||$===`
`&&(this._cr>0||this._crlf>0)))for(let Z=0,Q=X.length;Z<Q;Z++){let G=X[Z].buffer.replace(/\r\n|\r|\n/g,$),q=sX(G);X[Z]=new OZ(G,q)}let Y=new Q2(X,this._bom,$,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:Y,disposable:Y}}}class qR{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(J){if(J.length===0)return;if(this.chunks.length===0){if(sq(J))this.BOM=kg,J=J.substr(1)}let $=J.charCodeAt(J.length-1);if($===13||$>=55296&&$<=56319)this._acceptChunk1(J.substr(0,J.length-1),!1),this._hasPreviousChar=!0,this._previousChar=$;else this._acceptChunk1(J,!1),this._hasPreviousChar=!1,this._previousChar=$}_acceptChunk1(J,$){if(!$&&J.length===0)return;if(this._hasPreviousChar)this._acceptChunk2(String.fromCharCode(this._previousChar)+J);else this._acceptChunk2(J)}_acceptChunk2(J){let $=zr(this._tmpLineStarts,J);if(this.chunks.push(new OZ(J,$.lineStarts)),this.cr+=$.cr,this.lf+=$.lf,this.crlf+=$.crlf,!$.isBasicASCII){if(this.isBasicASCII=!1,!this.containsRTL)this.containsRTL=xY(J);if(!this.containsUnusualLineTerminators)this.containsUnusualLineTerminators=_A(J)}}finish(J=!0){return this._finish(),new Vr(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,J)}_finish(){if(this.chunks.length===0)this._acceptChunk1("",!0);if(this._hasPreviousChar){this._hasPreviousChar=!1;let J=this.chunks[this.chunks.length-1];J.buffer+=String.fromCharCode(this._previousChar);let $=sX(J.buffer);if(J.lineStarts=$,this._previousChar===13)this.cr++}}}var Wr=w(()=>{X1();iE();nE()});class oE{constructor(J){this._default=J,this._store=[]}get(J){if(J<this._store.length)return this._store[J];return this._default}set(J,$){while(J>=this._store.length)this._store[this._store.length]=this._default;this._store[J]=$}replace(J,$,X){if(J>=this._store.length)return;if($===0){this.insert(J,X);return}else if(X===0){this.delete(J,$);return}let Y=this._store.slice(0,J),Z=this._store.slice(J+$),Q=PQ0(X,this._default);this._store=Y.concat(Q,Z)}delete(J,$){if($===0||J>=this._store.length)return;this._store.splice(J,$)}insert(J,$){if($===0||J>=this._store.length)return;let X=[];for(let Y=0;Y<$;Y++)X[Y]=this._default;this._store=zQ(this._store,J,X)}}function PQ0(J,$){let X=[];for(let Y=0;Y<J;Y++)X[Y]=$;return X}var Br=w(()=>{V1()});class tE{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(J,$){this._startLineNumber=J,this._tokens=$}getLineTokens(J){return this._tokens[J-this._startLineNumber]}appendLineTokens(J){this._tokens.push(J)}}class Vz{constructor(){this._tokens=[]}add(J,$){if(this._tokens.length>0){let X=this._tokens[this._tokens.length-1];if(X.endLineNumber+1===J){X.appendLineTokens($);return}}this._tokens.push(new tE(J,[$]))}finalize(){return this._tokens}}var eE=()=>{};class Fr{constructor(J,$){this.tokenizationSupport=$,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new QW(J)}getStartState(J){return this.store.getStartState(J,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class QW{constructor(J){this.lineCount=J,this._tokenizationStateStore=new Kr,this._invalidEndStatesLineNumbers=new Ar,this._invalidEndStatesLineNumbers.addRange(new n0(1,J+1))}getEndState(J){return this._tokenizationStateStore.getEndState(J)}setEndState(J,$){if(!$)throw new u1("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(J);let X=this._tokenizationStateStore.setEndState(J,$);if(X&&J<this.lineCount)this._invalidEndStatesLineNumbers.addRange(new n0(J+1,J+2));return X}acceptChange(J,$){this.lineCount+=$-J.length,this._tokenizationStateStore.acceptChange(J,$),this._invalidEndStatesLineNumbers.addRangeAndResize(new n0(J.startLineNumber,J.endLineNumberExclusive),$)}acceptChanges(J){for(let $ of J){let[X]=p4($.text);this.acceptChange(new f0($.range.startLineNumber,$.range.endLineNumber+1),X+1)}}invalidateEndStateRange(J){this._invalidEndStatesLineNumbers.addRange(new n0(J.startLineNumber,J.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(J,$){if(J===1)return $;return this.getEndState(J-1)}getFirstInvalidLine(J){let $=this.getFirstInvalidEndStateLineNumber();if($===null)return null;let X=this.getStartState($,J);if(!X)throw new u1("Start state must be defined");return{lineNumber:$,startState:X}}}class Kr{constructor(){this._lineEndStates=new oE(null)}getEndState(J){return this._lineEndStates.get(J)}setEndState(J,$){let X=this._lineEndStates.get(J);if(X&&X.equals($))return!1;return this._lineEndStates.set(J,$),!0}acceptChange(J,$){let X=J.length;if($>0&&X>0)X--,$--;this._lineEndStates.replace(J.startLineNumber,X,$)}}class Ar{constructor(){this._ranges=[]}get min(){if(this._ranges.length===0)return null;return this._ranges[0].start}delete(J){let $=this._ranges.findIndex((X)=>X.contains(J));if($!==-1){let X=this._ranges[$];if(X.start===J)if(X.endExclusive===J+1)this._ranges.splice($,1);else this._ranges[$]=new n0(J+1,X.endExclusive);else if(X.endExclusive===J+1)this._ranges[$]=new n0(X.start,J);else this._ranges.splice($,1,new n0(X.start,J),new n0(J+1,X.endExclusive))}}addRange(J){n0.addRange(J,this._ranges)}addRangeAndResize(J,$){let X=0;while(!(X>=this._ranges.length||J.start<=this._ranges[X].endExclusive))X++;let Y=X;while(!(Y>=this._ranges.length||J.endExclusive<this._ranges[Y].start))Y++;let Z=$-J.length;for(let Q=Y;Q<this._ranges.length;Q++)this._ranges[Q]=this._ranges[Q].delta(Z);if(X===Y){let Q=new n0(J.start,J.start+$);if(!Q.isEmpty)this._ranges.splice(X,0,Q)}else{let Q=Math.min(J.start,this._ranges[X].start),G=Math.max(J.endExclusive,this._ranges[Y-1].endExclusive),q=new n0(Q,G+Z);if(!q.isEmpty)this._ranges.splice(X,Y-X,q);else this._ranges.splice(X,Y-X)}}toString(){return this._ranges.map((J)=>J.toString()).join(" + ")}}function ZW(J,$,X,Y,Z,Q){let G=null;if(X)try{G=X.tokenizeEncoded(Y,Z,Q.clone())}catch(q){$1(q)}if(!G)G=AU(J.encodeLanguageId($),Q);return v6.convertToEndOffset(G.tokens,Y.length),G}class $I{constructor(J,$){this._tokenizerWithStateStore=J,this._backgroundTokenStore=$,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){if(this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize())return;this._isScheduled=!0,_T((J)=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(J)})}_backgroundTokenizeWithDeadline(J){let $=Date.now()+J.timeRemaining(),X=()=>{if(this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize())return;if(this._backgroundTokenizeForAtLeast1ms(),Date.now()<$)WK(X);else this._beginBackgroundTokenization()};X()}_backgroundTokenizeForAtLeast1ms(){let J=this._tokenizerWithStateStore._textModel.getLineCount(),$=new Vz,X=w5.create(!1);do{if(X.elapsed()>1)break;if(this._tokenizeOneInvalidLine($)>=J)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens($.finalize()),this.checkFinished()}_hasLinesToTokenize(){if(!this._tokenizerWithStateStore)return!1;return!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(J){var $;let X=($=this._tokenizerWithStateStore)===null||$===void 0?void 0:$.getFirstInvalidLine();if(!X)return this._tokenizerWithStateStore._textModel.getLineCount()+1;return this._tokenizerWithStateStore.updateTokensUntilLine(J,X.lineNumber),X.lineNumber}checkFinished(){if(this._isDisposed)return;if(this._tokenizerWithStateStore.store.allStatesValid())this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(J,$){this._tokenizerWithStateStore.store.invalidateEndStateRange(new f0(J,$))}}var JI;var Pr=w(()=>{e1();O1();L1();qX();N9();C4();zV();Br();eE();JZ();JI=class JI extends Fr{constructor(J,$,X,Y){super(J,$);this._textModel=X,this._languageIdCodec=Y}updateTokensUntilLine(J,$){let X=this._textModel.getLanguageId();while(!0){let Y=this.getFirstInvalidLine();if(!Y||Y.lineNumber>$)break;let Z=this._textModel.getLineContent(Y.lineNumber),Q=ZW(this._languageIdCodec,X,this.tokenizationSupport,Z,!0,Y.startState);J.add(Y.lineNumber,Q.tokens),this.store.setEndState(Y.lineNumber,Q.endState)}}getTokenTypeIfInsertingCharacter(J,$){let X=this.getStartState(J.lineNumber);if(!X)return 0;let Y=this._textModel.getLanguageId(),Z=this._textModel.getLineContent(J.lineNumber),Q=Z.substring(0,J.column-1)+$+Z.substring(J.column-1),G=ZW(this._languageIdCodec,Y,this.tokenizationSupport,Q,!0,X),q=new v6(G.tokens,Q,this._languageIdCodec);if(q.getCount()===0)return 0;let U=q.findTokenIndexAtOffset(J.column-1);return q.getStandardTokenType(U)}tokenizeLineWithEdit(J,$,X){let{lineNumber:Y,column:Z}=J,Q=this.getStartState(Y);if(!Q)return null;let G=this._textModel.getLineContent(Y),q=G.substring(0,Z-1)+X+G.substring(Z-1+$),U=this._textModel.getLanguageIdAtPosition(Y,0),z=ZW(this._languageIdCodec,U,this.tokenizationSupport,q,!0,Q);return new v6(z.tokens,q,this._languageIdCodec)}isCheapToTokenize(J){let $=this.store.getFirstInvalidEndStateLineNumberOrMax();if(J<$)return!0;if(J===$&&this._textModel.getLineLength(J)<2048)return!0;return!1}tokenizeHeuristically(J,$,X){if(X<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if($<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(J,X),{heuristicTokens:!1};let Y=this.guessStartState($),Z=this._textModel.getLanguageId();for(let Q=$;Q<=X;Q++){let G=this._textModel.getLineContent(Q),q=ZW(this._languageIdCodec,Z,this.tokenizationSupport,G,!0,Y);J.add(Q,q.tokens),Y=q.endState}return{heuristicTokens:!0}}guessStartState(J){let $=this._textModel.getLineFirstNonWhitespaceColumn(J),X=[],Y=null;for(let G=J-1;$>1&&G>=1;G--){let q=this._textModel.getLineFirstNonWhitespaceColumn(G);if(q===0)continue;if(q<$){if(X.push(this._textModel.getLineContent(G)),$=q,Y=this.getStartState(G),Y)break}}if(!Y)Y=this.tokenizationSupport.getInitialState();X.reverse();let Z=this._textModel.getLanguageId(),Q=Y;for(let G of X)Q=ZW(this._languageIdCodec,Z,this.tokenizationSupport,G,!1,Q).endState;return Q}}});class y${static deleteBeginning(J,$){if(J===null||J===aX)return J;return y$.delete(J,0,$)}static deleteEnding(J,$){if(J===null||J===aX)return J;let X=rX(J),Y=X[X.length-2];return y$.delete(J,$,Y)}static delete(J,$,X){if(J===null||J===aX||$===X)return J;let Y=rX(J),Z=Y.length>>>1;if($===0&&Y[Y.length-2]===X)return aX;let Q=v6.findIndexInTokensArray(Y,$),G=Q>0?Y[Q-1<<1]:0,q=Y[Q<<1];if(X<q){let V=X-$;for(let W=Q;W<Z;W++)Y[W<<1]-=V;return J}let U,z;if(G!==$)Y[Q<<1]=$,U=Q+1<<1,z=$;else U=Q<<1,z=G;let H=X-$;for(let V=Q+1;V<Z;V++){let W=Y[V<<1]-H;if(W>z)Y[U++]=W,Y[U++]=Y[(V<<1)+1],z=W}if(U===Y.length)return J;let j=new Uint32Array(U);return j.set(Y.subarray(0,U),0),j.buffer}static append(J,$){if($===aX)return J;if(J===aX)return $;if(J===null)return J;if($===null)return null;let X=rX(J),Y=rX($),Z=Y.length>>>1,Q=new Uint32Array(X.length+Y.length);Q.set(X,0);let G=X.length,q=X[X.length-2];for(let U=0;U<Z;U++)Q[G++]=Y[U<<1]+q,Q[G++]=Y[(U<<1)+1];return Q.buffer}static insert(J,$,X){if(J===null||J===aX)return J;let Y=rX(J),Z=Y.length>>>1,Q=v6.findIndexInTokensArray(Y,$);if(Q>0){if(Y[Q-1<<1]===$)Q--}for(let G=Q;G<Z;G++)Y[G<<1]+=X;return J}}function rX(J){if(J instanceof Uint32Array)return J;else return new Uint32Array(J)}var aX;var Dr=w(()=>{JZ();aX=new Uint32Array(0).buffer});class Wz{constructor(J){this._lineTokens=[],this._len=0,this._languageIdCodec=J}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(J,$,X){let Y=null;if($<this._len)Y=this._lineTokens[$];if(Y!==null&&Y!==aX)return new v6(rX(Y),X,this._languageIdCodec);let Z=new Uint32Array(2);return Z[0]=X.length,Z[1]=Rr(this._languageIdCodec.encodeLanguageId(J)),new v6(Z,X,this._languageIdCodec)}static _massageTokens(J,$,X){let Y=X?rX(X):null;if($===0){let Z=!1;if(Y&&Y.length>1)Z=j8.getLanguageId(Y[1])!==J;if(!Z)return aX}if(!Y||Y.length===0){let Z=new Uint32Array(2);return Z[0]=$,Z[1]=Rr(J),Z.buffer}if(Y[Y.length-2]=$,Y.byteOffset===0&&Y.byteLength===Y.buffer.byteLength)return Y.buffer;return Y}_ensureLine(J){while(J>=this._len)this._lineTokens[this._len]=null,this._len++}_deleteLines(J,$){if($===0)return;if(J+$>this._len)$=this._len-J;this._lineTokens.splice(J,$),this._len-=$}_insertLines(J,$){if($===0)return;let X=[];for(let Y=0;Y<$;Y++)X[Y]=null;this._lineTokens=zQ(this._lineTokens,J,X),this._len+=$}setTokens(J,$,X,Y,Z){let Q=Wz._massageTokens(this._languageIdCodec.encodeLanguageId(J),X,Y);this._ensureLine($);let G=this._lineTokens[$];if(this._lineTokens[$]=Q,Z)return!Wz._equals(G,Q);return!1}static _equals(J,$){if(!J||!$)return!J&&!$;let X=rX(J),Y=rX($);if(X.length!==Y.length)return!1;for(let Z=0,Q=X.length;Z<Q;Z++)if(X[Z]!==Y[Z])return!1;return!0}acceptEdit(J,$,X){this._acceptDeleteRange(J),this._acceptInsertText(new g(J.startLineNumber,J.startColumn),$,X)}_acceptDeleteRange(J){let $=J.startLineNumber-1;if($>=this._len)return;if(J.startLineNumber===J.endLineNumber){if(J.startColumn===J.endColumn)return;this._lineTokens[$]=y$.delete(this._lineTokens[$],J.startColumn-1,J.endColumn-1);return}this._lineTokens[$]=y$.deleteEnding(this._lineTokens[$],J.startColumn-1);let X=J.endLineNumber-1,Y=null;if(X<this._len)Y=y$.deleteBeginning(this._lineTokens[X],J.endColumn-1);this._lineTokens[$]=y$.append(this._lineTokens[$],Y),this._deleteLines(J.startLineNumber,J.endLineNumber-J.startLineNumber)}_acceptInsertText(J,$,X){if($===0&&X===0)return;let Y=J.lineNumber-1;if(Y>=this._len)return;if($===0){this._lineTokens[Y]=y$.insert(this._lineTokens[Y],J.column-1,X);return}this._lineTokens[Y]=y$.deleteEnding(this._lineTokens[Y],J.column-1),this._lineTokens[Y]=y$.insert(this._lineTokens[Y],J.column-1,X),this._insertLines(J.lineNumber,$)}setMultilineTokens(J,$){if(J.length===0)return{changes:[]};let X=[];for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y],G=0,q=0,U=!1;for(let z=Q.startLineNumber;z<=Q.endLineNumber;z++)if(U)this.setTokens($.getLanguageId(),z-1,$.getLineLength(z),Q.getLineTokens(z),!1),q=z;else if(this.setTokens($.getLanguageId(),z-1,$.getLineLength(z),Q.getLineTokens(z),!0))U=!0,G=z,q=z;if(U)X.push({fromLineNumber:G,toLineNumber:q})}return{changes:X}}}function Rr(J){return(J<<0|0|0|32768|33554432|1024)>>>0}var Mr=w(()=>{V1();Dr();JZ()});class UR{constructor(J){this._pieces=[],this._isComplete=!1,this._languageIdCodec=J}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(J,$){this._pieces=J||[],this._isComplete=$}setPartial(J,$){let X=J;if($.length>0){let Z=$[0].getRange(),Q=$[$.length-1].getRange();if(!Z||!Q)return J;X=J.plusRange(Z).plusRange(Q)}let Y=null;for(let Z=0,Q=this._pieces.length;Z<Q;Z++){let G=this._pieces[Z];if(G.endLineNumber<X.startLineNumber)continue;if(G.startLineNumber>X.endLineNumber){Y=Y||{index:Z};break}if(G.removeTokens(X),G.isEmpty()){this._pieces.splice(Z,1),Z--,Q--;continue}if(G.endLineNumber<X.startLineNumber)continue;if(G.startLineNumber>X.endLineNumber){Y=Y||{index:Z};continue}let[q,U]=G.split(X);if(q.isEmpty()){Y=Y||{index:Z};continue}if(U.isEmpty())continue;this._pieces.splice(Z,1,q,U),Z++,Q++,Y=Y||{index:Z}}if(Y=Y||{index:this._pieces.length},$.length>0)this._pieces=zQ(this._pieces,Y.index,$);return X}isComplete(){return this._isComplete}addSparseTokens(J,$){if($.getLineContent().length===0)return $;let X=this._pieces;if(X.length===0)return $;let Y=UR._findFirstPieceWithLine(X,J),Z=X[Y].getLineTokens(J);if(!Z)return $;let Q=$.getCount(),G=Z.getCount(),q=0,U=[],z=0,H=0,j=(V,W)=>{if(V===H)return;H=V,U[z++]=V,U[z++]=W};for(let V=0;V<G;V++){let W=Z.getStartCharacter(V),B=Z.getEndCharacter(V),K=Z.getMetadata(V),P=((K&1?2048:0)|(K&2?4096:0)|(K&4?8192:0)|(K&8?16384:0)|(K&16?16744448:0)|(K&32?4278190080:0))>>>0,A=~P>>>0;while(q<Q&&$.getEndOffset(q)<=W)j($.getEndOffset(q),$.getMetadata(q)),q++;if(q<Q&&$.getStartOffset(q)<W)j(W,$.getMetadata(q));while(q<Q&&$.getEndOffset(q)<B)j($.getEndOffset(q),$.getMetadata(q)&A|K&P),q++;if(q<Q){if(j(B,$.getMetadata(q)&A|K&P),$.getEndOffset(q)===B)q++}else{let D=Math.min(Math.max(0,q-1),Q-1);j(B,$.getMetadata(D)&A|K&P)}}while(q<Q)j($.getEndOffset(q),$.getMetadata(q)),q++;return new v6(new Uint32Array(U),$.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(J,$){let X=0,Y=J.length-1;while(X<Y){let Z=X+Math.floor((Y-X)/2);if(J[Z].endLineNumber<$)X=Z+1;else if(J[Z].startLineNumber>$)Y=Z-1;else{while(Z>X&&J[Z-1].startLineNumber<=$&&$<=J[Z-1].endLineNumber)Z--;return Z}}return X}acceptEdit(J,$,X,Y,Z){for(let Q of this._pieces)Q.acceptEdit(J,$,X,Y,Z)}}var Or=w(()=>{V1();JZ()});var GW,_r,Nr;var Tr=w(()=>{V1();e1();O1();_0();z0();N9();xq();c8();bk();Pr();eE();Mr();Or();GW=class GW extends CV{constructor(J,$,X,Y,Z,Q){super();this._languageService=J,this._languageConfigurationService=$,this._textModel=X,this._bracketPairsTextModelPart=Y,this._languageId=Z,this._attachedViews=Q,this._semanticTokens=new UR(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new x),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new x),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new x),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new _r(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange((G)=>{if(G.affects(this._languageId))this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens((G)=>{this._emitModelTokensChangedEvent(G)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState((G)=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(J){if(J.isFlush)this._semanticTokens.flush();else if(!J.isEolChange)for(let $ of J.changes){let[X,Y,Z]=p4($.text);this._semanticTokens.acceptEdit($.range,X,Y,Z,$.text.length>0?$.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(J)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(J){this.validateLineNumber(J);let $=this.grammarTokens.getLineTokens(J);return this._semanticTokens.addSparseTokens(J,$)}_emitModelTokensChangedEvent(J){if(!this._textModel._isDisposing())this._bracketPairsTextModelPart.handleDidChangeTokens(J),this._onDidChangeTokens.fire(J)}validateLineNumber(J){if(J<1||J>this._textModel.getLineCount())throw new u1("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(J){this.validateLineNumber(J),this.grammarTokens.forceTokenization(J)}isCheapToTokenize(J){return this.validateLineNumber(J),this.grammarTokens.isCheapToTokenize(J)}tokenizeIfCheap(J){this.validateLineNumber(J),this.grammarTokens.tokenizeIfCheap(J)}getTokenTypeIfInsertingCharacter(J,$,X){return this.grammarTokens.getTokenTypeIfInsertingCharacter(J,$,X)}tokenizeLineWithEdit(J,$,X){return this.grammarTokens.tokenizeLineWithEdit(J,$,X)}setSemanticTokens(J,$){this._semanticTokens.set(J,$),this._emitModelTokensChangedEvent({semanticTokensApplied:J!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(J,$){if(this.hasCompleteSemanticTokens())return;let X=this._textModel.validateRange(this._semanticTokens.setPartial(J,$));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:X.startLineNumber,toLineNumber:X.endLineNumber}]})}getWordAtPosition(J){this.assertNotDisposed();let $=this._textModel.validatePosition(J),X=this._textModel.getLineContent($.lineNumber),Y=this.getLineTokens($.lineNumber),Z=Y.findTokenIndexAtOffset($.column-1),[Q,G]=GW._findLanguageBoundaries(Y,Z),q=VQ($.column,this.getLanguageConfiguration(Y.getLanguageId(Z)).getWordDefinition(),X.substring(Q,G),Q);if(q&&q.startColumn<=J.column&&J.column<=q.endColumn)return q;if(Z>0&&Q===$.column-1){let[U,z]=GW._findLanguageBoundaries(Y,Z-1),H=VQ($.column,this.getLanguageConfiguration(Y.getLanguageId(Z-1)).getWordDefinition(),X.substring(U,z),U);if(H&&H.startColumn<=J.column&&J.column<=H.endColumn)return H}return null}getLanguageConfiguration(J){return this._languageConfigurationService.getLanguageConfiguration(J)}static _findLanguageBoundaries(J,$){let X=J.getLanguageId($),Y=0;for(let Q=$;Q>=0&&J.getLanguageId(Q)===X;Q--)Y=J.getStartOffset(Q);let Z=J.getLineContent().length;for(let Q=$,G=J.getCount();Q<G&&J.getLanguageId(Q)===X;Q++)Z=J.getEndOffset(Q);return[Y,Z]}getWordUntilPosition(J){let $=this.getWordAtPosition(J);if(!$)return{word:"",startColumn:J.column,endColumn:J.column};return{word:$.word.substr(0,J.column-$.startColumn),startColumn:$.startColumn,endColumn:J.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(J,$){let X=this._textModel.validatePosition(new g(J,$)),Y=this.getLineTokens(X.lineNumber);return Y.getLanguageId(Y.findTokenIndexAtOffset(X.column-1))}setLanguageId(J,$="api"){if(this._languageId===J)return;let X={oldLanguage:this._languageId,newLanguage:J,source:$};this._languageId=J,this._bracketPairsTextModelPart.handleDidChangeLanguage(X),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(X),this._onDidChangeLanguageConfiguration.fire({})}};_r=class _r extends m{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(J,$,X,Y){super();this._languageIdCodec=J,this._textModel=$,this.getLanguageId=X,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new q8),this._tokens=new Wz(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new q8),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new x),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new x),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new KG),this._register($6.onDidChange((Z)=>{let Q=this.getLanguageId();if(Z.changedLanguages.indexOf(Q)===-1)return;this.resetTokenization()})),this.resetTokenization(),this._register(Y.onDidChangeVisibleRanges(({view:Z,state:Q})=>{if(Q){let G=this._attachedViewStates.get(Z);if(!G)G=new Nr(()=>this.refreshRanges(G.lineRanges)),this._attachedViewStates.set(Z,G);G.handleStateChange(Q)}else this._attachedViewStates.deleteAndDispose(Z)}))}resetTokenization(J=!0){var $;if(this._tokens.flush(),($=this._debugBackgroundTokens)===null||$===void 0||$.flush(),this._debugBackgroundStates)this._debugBackgroundStates=new QW(this._textModel.getLineCount());if(J)this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let X=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let Q=$6.get(this.getLanguageId());if(!Q)return[null,null];let G;try{G=Q.getInitialState()}catch(q){return $1(q),[null,null]}return[Q,G]},[Y,Z]=X();if(Y&&Z)this._tokenizer=new JI(this._textModel.getLineCount(),Y,this._textModel,this._languageIdCodec);else this._tokenizer=null;if(this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let Q={setTokens:(G)=>{this.setTokens(G)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;let G=2;this._backgroundTokenizationState=G,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(G,q)=>{var U;if(!this._tokenizer)return;let z=this._tokenizer.store.getFirstInvalidEndStateLineNumber();if(z!==null&&G>=z)(U=this._tokenizer)===null||U===void 0||U.store.setEndState(G,q)}};if(Y&&Y.createBackgroundTokenizer&&!Y.backgroundTokenizerShouldOnlyVerifyTokens)this._backgroundTokenizer.value=Y.createBackgroundTokenizer(this._textModel,Q);if(!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization())this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new $I(this._tokenizer,Q),this._defaultBackgroundTokenizer.handleChanges();if((Y===null||Y===void 0?void 0:Y.backgroundTokenizerShouldOnlyVerifyTokens)&&Y.createBackgroundTokenizer)this._debugBackgroundTokens=new Wz(this._languageIdCodec),this._debugBackgroundStates=new QW(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=Y.createBackgroundTokenizer(this._textModel,{setTokens:(G)=>{var q;(q=this._debugBackgroundTokens)===null||q===void 0||q.setMultilineTokens(G,this._textModel)},backgroundTokenizationFinished(){},setEndState:(G,q)=>{var U;(U=this._debugBackgroundStates)===null||U===void 0||U.setEndState(G,q)}});else this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var J;(J=this._defaultBackgroundTokenizer)===null||J===void 0||J.handleChanges()}handleDidChangeContent(J){var $,X,Y;if(J.isFlush)this.resetTokenization(!1);else if(!J.isEolChange){for(let Z of J.changes){let[Q,G]=p4(Z.text);this._tokens.acceptEdit(Z.range,Q,G),($=this._debugBackgroundTokens)===null||$===void 0||$.acceptEdit(Z.range,Q,G)}if((X=this._debugBackgroundStates)===null||X===void 0||X.acceptChanges(J.changes),this._tokenizer)this._tokenizer.store.acceptChanges(J.changes);(Y=this._defaultBackgroundTokenizer)===null||Y===void 0||Y.handleChanges()}}setTokens(J){let{changes:$}=this._tokens.setMultilineTokens(J,this._textModel);if($.length>0)this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:$});return{changes:$}}refreshAllVisibleLineTokens(){let J=f0.joinMany([...this._attachedViewStates].map(([$,X])=>X.lineRanges));this.refreshRanges(J)}refreshRanges(J){for(let $ of J)this.refreshRange($.startLineNumber,$.endLineNumberExclusive-1)}refreshRange(J,$){var X,Y;if(!this._tokenizer)return;J=Math.max(1,Math.min(this._textModel.getLineCount(),J)),$=Math.min(this._textModel.getLineCount(),$);let Z=new Vz,{heuristicTokens:Q}=this._tokenizer.tokenizeHeuristically(Z,J,$),G=this.setTokens(Z.finalize());if(Q)for(let q of G.changes)(X=this._backgroundTokenizer.value)===null||X===void 0||X.requestTokens(q.fromLineNumber,q.toLineNumber+1);(Y=this._defaultBackgroundTokenizer)===null||Y===void 0||Y.checkFinished()}forceTokenization(J){var $,X;let Y=new Vz;($=this._tokenizer)===null||$===void 0||$.updateTokensUntilLine(Y,J),this.setTokens(Y.finalize()),(X=this._defaultBackgroundTokenizer)===null||X===void 0||X.checkFinished()}isCheapToTokenize(J){if(!this._tokenizer)return!0;return this._tokenizer.isCheapToTokenize(J)}tokenizeIfCheap(J){if(this.isCheapToTokenize(J))this.forceTokenization(J)}getLineTokens(J){var $;let X=this._textModel.getLineContent(J),Y=this._tokens.getTokens(this._textModel.getLanguageId(),J-1,X);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer){if(this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>J&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>J){let Z=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),J-1,X);if(!Y.equals(Z)&&(($=this._debugBackgroundTokenizer.value)===null||$===void 0?void 0:$.reportMismatchingTokens))this._debugBackgroundTokenizer.value.reportMismatchingTokens(J)}}return Y}getTokenTypeIfInsertingCharacter(J,$,X){if(!this._tokenizer)return 0;let Y=this._textModel.validatePosition(new g(J,$));return this.forceTokenization(Y.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(Y,X)}tokenizeLineWithEdit(J,$,X){if(!this._tokenizer)return null;let Y=this._textModel.validatePosition(J);return this.forceTokenization(Y.lineNumber),this._tokenizer.tokenizeLineWithEdit(Y,$,X)}get hasTokens(){return this._tokens.hasTokens}};Nr=class Nr extends m{get lineRanges(){return this._lineRanges}constructor(J){super();this._refreshTokens=J,this.runner=this._register(new H6(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){if(B6(this._computedLineRanges,this._lineRanges,(J,$)=>J.equals($)))return;this._computedLineRanges=this._lineRanges,this._refreshTokens()}handleStateChange(J){if(this._lineRanges=J.visibleLineRanges,J.stabilized)this.runner.cancel(),this.update();else this.runner.schedule()}}});class XI{constructor(){this.changeType=1}}class Z9{static applyInjectedText(J,$){if(!$||$.length===0)return J;let X="",Y=0;for(let Z of $)X+=J.substring(Y,Z.column-1),Y=Z.column-1,X+=Z.options.content;return X+=J.substring(Y),X}static fromDecorations(J){let $=[];for(let X of J){if(X.options.before&&X.options.before.content.length>0)$.push(new Z9(X.ownerId,X.range.startLineNumber,X.range.startColumn,X.options.before,0));if(X.options.after&&X.options.after.content.length>0)$.push(new Z9(X.ownerId,X.range.endLineNumber,X.range.endColumn,X.options.after,1))}return $.sort((X,Y)=>{if(X.lineNumber===Y.lineNumber){if(X.column===Y.column)return X.order-Y.order;return X.column-Y.column}return X.lineNumber-Y.lineNumber}),$}constructor(J,$,X,Y,Z){this.ownerId=J,this.lineNumber=$,this.column=X,this.options=Y,this.order=Z}}class zR{constructor(J,$,X){this.changeType=2,this.lineNumber=J,this.detail=$,this.injectedText=X}}class YI{constructor(J,$){this.changeType=3,this.fromLineNumber=J,this.toLineNumber=$}}class ZI{constructor(J,$,X,Y){this.changeType=4,this.injectedTexts=Y,this.fromLineNumber=J,this.toLineNumber=$,this.detail=X}}class QI{constructor(){this.changeType=5}}class T3{constructor(J,$,X,Y){this.changes=J,this.versionId=$,this.isUndoing=X,this.isRedoing=Y,this.resultingSelection=null}containsEvent(J){for(let $=0,X=this.changes.length;$<X;$++)if(this.changes[$].changeType===J)return!0;return!1}static merge(J,$){let X=[].concat(J.changes).concat($.changes),Y=$.versionId,Z=J.isUndoing||$.isUndoing,Q=J.isRedoing||$.isRedoing;return new T3(X,Y,Z,Q)}}class qW{constructor(J){this.changes=J}}class _Z{constructor(J,$){this.rawContentChangedEvent=J,this.contentChangedEvent=$}merge(J){let $=T3.merge(this.rawContentChangedEvent,J.rawContentChangedEvent),X=_Z._mergeChangeEvents(this.contentChangedEvent,J.contentChangedEvent);return new _Z($,X)}static _mergeChangeEvents(J,$){let X=[].concat(J.changes).concat($.changes),Y=$.eol,Z=$.versionId,Q=J.isUndoing||$.isUndoing,G=J.isRedoing||$.isRedoing,q=J.isFlush||$.isFlush,U=J.isEolChange&&$.isEolChange;return{changes:X,eol:Y,isEolChange:U,versionId:Z,isUndoing:Q,isRedoing:G,isFlush:q}}}class HR{constructor(J,$){this.resource=J,this.elements=$}}class w3{constructor(){this.id=w3._ID++,this.order=1}nextOrder(){if(this.id===0)return 0;return this.order++}}class x${constructor(){this.id=x$._ID++,this.order=1}nextOrder(){if(this.id===0)return 0;return this.order++}}var Bz;var jR=w(()=>{s0();Bz=w0("undoRedoService");w3._ID=0;w3.None=new w3;x$._ID=0;x$.None=new x$});function MQ0(J){let $=new qR;return $.acceptChunk(J),$.finish()}function OQ0(J){let $=new qR,X;while(typeof(X=J.read())==="string")$.acceptChunk(X);return $.finish()}function wr(J,$){let X;if(typeof J==="string")X=MQ0(J);else if(Em(J))X=OQ0(J);else X=J;return X.create($)}class Er{constructor(J){this._source=J,this._eos=!1}read(){if(this._eos)return null;let J=[],$=0,X=0;do{let Y=this._source.read();if(Y===null)if(this._eos=!0,$===0)return null;else return J.join("");if(Y.length>0)J[$++]=Y,X+=Y.length;if(X>=65536)return J.join("")}while(!0)}}function TQ0(J){let $=0;for(let X of J)if(X===" "||X==="\t")$++;else break;return $}function qI(J){return J.options.overviewRuler&&J.options.overviewRuler.color?!0:!1}function wQ0(J){return!!J.after||!!J.before}function WR(J){return!!J.options.after||!!J.options.before}class UI{constructor(){this._decorationsTree0=new tV,this._decorationsTree1=new tV,this._injectedTextDecorationsTree=new tV}ensureAllNodesHaveRanges(J){this.getAll(J,0,!1,!1,!1)}_ensureNodesHaveRanges(J,$){for(let X of $)if(X.range===null)X.range=J.getRangeAt(X.cachedAbsoluteStart,X.cachedAbsoluteEnd);return $}getAllInInterval(J,$,X,Y,Z,Q){let G=J.getVersionId(),q=this._intervalSearch($,X,Y,Z,G,Q);return this._ensureNodesHaveRanges(J,q)}_intervalSearch(J,$,X,Y,Z,Q){let G=this._decorationsTree0.intervalSearch(J,$,X,Y,Z,Q),q=this._decorationsTree1.intervalSearch(J,$,X,Y,Z,Q),U=this._injectedTextDecorationsTree.intervalSearch(J,$,X,Y,Z,Q);return G.concat(q).concat(U)}getInjectedTextInInterval(J,$,X,Y){let Z=J.getVersionId(),Q=this._injectedTextDecorationsTree.intervalSearch($,X,Y,!1,Z,!1);return this._ensureNodesHaveRanges(J,Q).filter((G)=>G.options.showIfCollapsed||!G.range.isEmpty())}getAllInjectedText(J,$){let X=J.getVersionId(),Y=this._injectedTextDecorationsTree.search($,!1,X,!1);return this._ensureNodesHaveRanges(J,Y).filter((Z)=>Z.options.showIfCollapsed||!Z.range.isEmpty())}getAll(J,$,X,Y,Z){let Q=J.getVersionId(),G=this._search($,X,Y,Q,Z);return this._ensureNodesHaveRanges(J,G)}_search(J,$,X,Y,Z){if(X)return this._decorationsTree1.search(J,$,Y,Z);else{let Q=this._decorationsTree0.search(J,$,Y,Z),G=this._decorationsTree1.search(J,$,Y,Z),q=this._injectedTextDecorationsTree.search(J,$,Y,Z);return Q.concat(G).concat(q)}}collectNodesFromOwner(J){let $=this._decorationsTree0.collectNodesFromOwner(J),X=this._decorationsTree1.collectNodesFromOwner(J),Y=this._injectedTextDecorationsTree.collectNodesFromOwner(J);return $.concat(X).concat(Y)}collectNodesPostOrder(){let J=this._decorationsTree0.collectNodesPostOrder(),$=this._decorationsTree1.collectNodesPostOrder(),X=this._injectedTextDecorationsTree.collectNodesPostOrder();return J.concat($).concat(X)}insert(J){if(WR(J))this._injectedTextDecorationsTree.insert(J);else if(qI(J))this._decorationsTree1.insert(J);else this._decorationsTree0.insert(J)}delete(J){if(WR(J))this._injectedTextDecorationsTree.delete(J);else if(qI(J))this._decorationsTree1.delete(J);else this._decorationsTree0.delete(J)}getNodeRange(J,$){let X=J.getVersionId();if($.cachedVersionId!==X)this._resolveNode($,X);if($.range===null)$.range=J.getRangeAt($.cachedAbsoluteStart,$.cachedAbsoluteEnd);return $.range}_resolveNode(J,$){if(WR(J))this._injectedTextDecorationsTree.resolveNode(J,$);else if(qI(J))this._decorationsTree1.resolveNode(J,$);else this._decorationsTree0.resolveNode(J,$)}acceptReplace(J,$,X,Y){this._decorationsTree0.acceptReplace(J,$,X,Y),this._decorationsTree1.acceptReplace(J,$,X,Y),this._injectedTextDecorationsTree.acceptReplace(J,$,X,Y)}}function iX(J){return J.replace(/[^a-z0-9\-_]/gi," ")}class zI{constructor(J){this.color=J.color||"",this.darkColor=J.darkColor||""}}class yr{constructor(J){var $;this.position=($=J===null||J===void 0?void 0:J.position)!==null&&$!==void 0?$:S4.Center,this.persistLane=J===null||J===void 0?void 0:J.persistLane}}class zW{static from(J){if(J instanceof zW)return J;return new zW(J)}constructor(J){this.content=J.content||"",this.inlineClassName=J.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=J.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=J.attachedData||null,this.cursorStops=J.cursorStops||null}}class C1{static register(J){return new C1(J)}static createDynamic(J){return new C1(J)}constructor(J){var $,X,Y,Z,Q,G;this.description=J.description,this.blockClassName=J.blockClassName?iX(J.blockClassName):null,this.blockDoesNotCollapse=($=J.blockDoesNotCollapse)!==null&&$!==void 0?$:null,this.blockIsAfterEnd=(X=J.blockIsAfterEnd)!==null&&X!==void 0?X:null,this.blockPadding=(Y=J.blockPadding)!==null&&Y!==void 0?Y:null,this.stickiness=J.stickiness||0,this.zIndex=J.zIndex||0,this.className=J.className?iX(J.className):null,this.shouldFillLineOnLineBreak=(Z=J.shouldFillLineOnLineBreak)!==null&&Z!==void 0?Z:null,this.hoverMessage=J.hoverMessage||null,this.glyphMarginHoverMessage=J.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=J.lineNumberHoverMessage||null,this.isWholeLine=J.isWholeLine||!1,this.showIfCollapsed=J.showIfCollapsed||!1,this.collapseOnReplaceEdit=J.collapseOnReplaceEdit||!1,this.overviewRuler=J.overviewRuler?new Ir(J.overviewRuler):null,this.minimap=J.minimap?new xr(J.minimap):null,this.glyphMargin=J.glyphMarginClassName?new yr(J.glyphMargin):null,this.glyphMarginClassName=J.glyphMarginClassName?iX(J.glyphMarginClassName):null,this.linesDecorationsClassName=J.linesDecorationsClassName?iX(J.linesDecorationsClassName):null,this.lineNumberClassName=J.lineNumberClassName?iX(J.lineNumberClassName):null,this.linesDecorationsTooltip=J.linesDecorationsTooltip?_g(J.linesDecorationsTooltip):null,this.firstLineDecorationClassName=J.firstLineDecorationClassName?iX(J.firstLineDecorationClassName):null,this.marginClassName=J.marginClassName?iX(J.marginClassName):null,this.inlineClassName=J.inlineClassName?iX(J.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=J.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=J.beforeContentClassName?iX(J.beforeContentClassName):null,this.afterContentClassName=J.afterContentClassName?iX(J.afterContentClassName):null,this.after=J.after?zW.from(J.after):null,this.before=J.before?zW.from(J.before):null,this.hideInCommentTokens=(Q=J.hideInCommentTokens)!==null&&Q!==void 0?Q:!1,this.hideInStringTokens=(G=J.hideInStringTokens)!==null&&G!==void 0?G:!1}}function kr(J){if(J instanceof C1)return J;return C1.createDynamic(J)}class Cr{constructor(){this._onDidChangeVisibleRanges=new x,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){let J=new vr(($)=>{this._onDidChangeVisibleRanges.fire({view:J,state:$})});return this._views.add(J),J}detachView(J){this._views.delete(J),this._onDidChangeVisibleRanges.fire({view:J,state:void 0})}}class vr{constructor(J){this.handleStateChange=J}setVisibleLines(J,$){let X=J.map((Y)=>new f0(Y.startLineNumber,Y.endLineNumber+1));this.handleStateChange({visibleLineRanges:X,stabilized:$})}}var RQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},GI=function(J,$){return function(X,Y){$(X,Y,J)}},L3,VR=0,_Q0=999,NQ0=1e4,UW=()=>{throw Error("Invalid change accessor")},NZ,Ir,xr,Lr,br,Sr;var G2=w(()=>{V1();T9();O1();_0();z0();X1();V5();Qk();N9();i0();o5();oH();I4();j7();O9();ha();fa();pE();Ck();Qr();nE();Wr();EP();Tr();jR();NZ=L3=class extends m{static resolveOptions($,X){if(X.detectIndentation){let Y=mE($,X.tabSize,X.insertSpaces);return new oG({tabSize:Y.tabSize,indentSize:"tabSize",insertSpaces:Y.insertSpaces,trimAutoWhitespace:X.trimAutoWhitespace,defaultEOL:X.defaultEOL,bracketPairColorizationOptions:X.bracketPairColorizationOptions})}return new oG(X)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent($){return this._eventEmitter.slowEvent((X)=>$(X.contentChangedEvent))}onDidChangeContentOrInjectedText($){return G7(this._eventEmitter.fastEvent((X)=>$(X)),this._onDidChangeInjectedText.event((X)=>$(X)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor($,X,Y,Z=null,Q,G,q){super();if(this._undoRedoService=Q,this._languageService=G,this._languageConfigurationService=q,this._onWillDispose=this._register(new x),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new br((W)=>this.handleBeforeFireDecorationsChangedEvent(W))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new x),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new x),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new x),this._eventEmitter=this._register(new Sr),this._languageSelectionListener=this._register(new q8),this._deltaDecorationCallCnt=0,this._attachedViews=new Cr,VR++,this.id="$model"+VR,this.isForSimpleWidget=Y.isForSimpleWidget,typeof Z>"u"||Z===null)this._associatedResource=C0.parse("inmemory://model/"+VR);else this._associatedResource=Z;this._attachedEditorCount=0;let{textBuffer:U,disposable:z}=wr($,Y.defaultEOL);this._buffer=U,this._bufferDisposable=z,this._options=L3.resolveOptions(this._buffer,Y);let H=typeof X==="string"?X:X.languageId;if(typeof X!=="string")this._languageSelectionListener.value=X.onDidChange(()=>this._setLanguage(X.languageId));this._bracketPairs=this._register(new yE(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Sk(this,this._languageConfigurationService)),this._decorationProvider=this._register(new xE(this)),this._tokenizationTextModelPart=new GW(this._languageService,this._languageConfigurationService,this,this._bracketPairs,H,this._attachedViews);let j=this._buffer.getLineCount(),V=this._buffer.getValueLengthInRange(new k(1,1,j,this._buffer.getLineLength(j)+1),0);if(Y.largeFileOptimizations)this._isTooLargeForTokenization=V>L3.LARGE_FILE_SIZE_THRESHOLD||j>L3.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=V>L3.LARGE_FILE_HEAP_OPERATION_THRESHOLD;else this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1;this._isTooLargeForSyncing=V>L3._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=NA(VR),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new UI,this._commandManager=new ZR(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(H)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let $=new Q2([],"",`
`,!1,!1,!0,!0);$.dispose(),this._buffer=$,this._bufferDisposable=m.None}_assertNotDisposed(){if(this._isDisposed)throw Error("Model is disposed!")}_emitContentChangedEvent($,X){if(this.__isDisposing)return;this._tokenizationTextModelPart.handleDidChangeContent(X),this._bracketPairs.handleDidChangeContent(X),this._eventEmitter.fire(new _Z($,X))}setValue($){if(this._assertNotDisposed(),$===null||$===void 0)throw X$();let{textBuffer:X,disposable:Y}=wr($,this._options.defaultEOL);this._setValueFromTextBuffer(X,Y)}_createContentChanged2($,X,Y,Z,Q,G,q,U){return{changes:[{range:$,rangeOffset:X,rangeLength:Y,text:Z}],eol:this._buffer.getEOL(),isEolChange:U,versionId:this.getVersionId(),isUndoing:Q,isRedoing:G,isFlush:q}}_setValueFromTextBuffer($,X){this._assertNotDisposed();let Y=this.getFullModelRange(),Z=this.getValueLengthInRange(Y),Q=this.getLineCount(),G=this.getLineMaxColumn(Q);this._buffer=$,this._bufferDisposable.dispose(),this._bufferDisposable=X,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new UI,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new T3([new XI],this._versionId,!1,!1),this._createContentChanged2(new k(1,1,Q,G),0,Z,this.getValue(),!1,!1,!0,!1))}setEOL($){this._assertNotDisposed();let X=$===1?`\r
`:`
`;if(this._buffer.getEOL()===X)return;let Y=this.getFullModelRange(),Z=this.getValueLengthInRange(Y),Q=this.getLineCount(),G=this.getLineMaxColumn(Q);this._onBeforeEOLChange(),this._buffer.setEOL(X),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new T3([new QI],this._versionId,!1,!1),this._createContentChanged2(new k(1,1,Q,G),0,Z,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let $=this.getVersionId(),X=this._decorationsTree.collectNodesPostOrder();for(let Y=0,Z=X.length;Y<Z;Y++){let Q=X[Y],G=Q.range,q=Q.cachedAbsoluteStart-Q.start,U=this._buffer.getOffsetAt(G.startLineNumber,G.startColumn),z=this._buffer.getOffsetAt(G.endLineNumber,G.endColumn);Q.cachedAbsoluteStart=U,Q.cachedAbsoluteEnd=z,Q.cachedVersionId=$,Q.start=U-q,Q.end=z-q,RZ(Q)}}onBeforeAttached(){if(this._attachedEditorCount++,this._attachedEditorCount===1)this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0);return this._attachedViews.attachView()}onBeforeDetached($){if(this._attachedEditorCount--,this._attachedEditorCount===0)this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0);this._attachedViews.detachView($)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let $=0,X=0,Y=this._buffer.getLineCount();for(let Z=1;Z<=Y;Z++){let Q=this._buffer.getLineLength(Z);if(Q>=NQ0)X+=Q;else $+=Q}return X>$}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions($){this._assertNotDisposed();let X=typeof $.tabSize<"u"?$.tabSize:this._options.tabSize,Y=typeof $.indentSize<"u"?$.indentSize:this._options.originalIndentSize,Z=typeof $.insertSpaces<"u"?$.insertSpaces:this._options.insertSpaces,Q=typeof $.trimAutoWhitespace<"u"?$.trimAutoWhitespace:this._options.trimAutoWhitespace,G=typeof $.bracketColorizationOptions<"u"?$.bracketColorizationOptions:this._options.bracketPairColorizationOptions,q=new oG({tabSize:X,indentSize:Y,insertSpaces:Z,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:Q,bracketPairColorizationOptions:G});if(this._options.equals(q))return;let U=this._options.createChangeEvent(q);this._options=q,this._bracketPairs.handleDidChangeOptions(U),this._decorationProvider.handleDidChangeOptions(U),this._onDidChangeOptions.fire(U)}detectIndentation($,X){this._assertNotDisposed();let Y=mE(this._buffer,X,$);this.updateOptions({insertSpaces:Y.insertSpaces,tabSize:Y.tabSize,indentSize:Y.tabSize})}normalizeIndentation($){return this._assertNotDisposed(),ED($,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators($=null){let X=this.findMatches(YT.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations($,X.map((Y)=>({range:Y.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt($){this._assertNotDisposed();let X=this._validatePosition($.lineNumber,$.column,0);return this._buffer.getOffsetAt(X.lineNumber,X.column)}getPositionAt($){this._assertNotDisposed();let X=Math.min(this._buffer.getLength(),Math.max(0,$));return this._buffer.getPositionAt(X)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId($){this._versionId=$}_overwriteAlternativeVersionId($){this._alternativeVersionId=$}_overwriteInitialUndoRedoSnapshot($){this._initialUndoRedoSnapshot=$}getValue($,X=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new u1("Operation would exceed heap memory limits");let Y=this.getFullModelRange(),Z=this.getValueInRange(Y,$);if(X)return this._buffer.getBOM()+Z;return Z}createSnapshot($=!1){return new Er(this._buffer.createSnapshot($))}getValueLength($,X=!1){this._assertNotDisposed();let Y=this.getFullModelRange(),Z=this.getValueLengthInRange(Y,$);if(X)return this._buffer.getBOM().length+Z;return Z}getValueInRange($,X=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange($),X)}getValueLengthInRange($,X=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange($),X)}getCharacterCountInRange($,X=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange($),X)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent($){if(this._assertNotDisposed(),$<1||$>this.getLineCount())throw new u1("Illegal value for lineNumber");return this._buffer.getLineContent($)}getLineLength($){if(this._assertNotDisposed(),$<1||$>this.getLineCount())throw new u1("Illegal value for lineNumber");return this._buffer.getLineLength($)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new u1("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn($){return this._assertNotDisposed(),1}getLineMaxColumn($){if(this._assertNotDisposed(),$<1||$>this.getLineCount())throw new u1("Illegal value for lineNumber");return this._buffer.getLineLength($)+1}getLineFirstNonWhitespaceColumn($){if(this._assertNotDisposed(),$<1||$>this.getLineCount())throw new u1("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn($)}getLineLastNonWhitespaceColumn($){if(this._assertNotDisposed(),$<1||$>this.getLineCount())throw new u1("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn($)}_validateRangeRelaxedNoAllocations($){let X=this._buffer.getLineCount(),Y=$.startLineNumber,Z=$.startColumn,Q=Math.floor(typeof Y==="number"&&!isNaN(Y)?Y:1),G=Math.floor(typeof Z==="number"&&!isNaN(Z)?Z:1);if(Q<1)Q=1,G=1;else if(Q>X)Q=X,G=this.getLineMaxColumn(Q);else if(G<=1)G=1;else{let j=this.getLineMaxColumn(Q);if(G>=j)G=j}let{endLineNumber:q,endColumn:U}=$,z=Math.floor(typeof q==="number"&&!isNaN(q)?q:1),H=Math.floor(typeof U==="number"&&!isNaN(U)?U:1);if(z<1)z=1,H=1;else if(z>X)z=X,H=this.getLineMaxColumn(z);else if(H<=1)H=1;else{let j=this.getLineMaxColumn(z);if(H>=j)H=j}if(Y===Q&&Z===G&&q===z&&U===H&&$ instanceof k&&!($ instanceof p0))return $;return new k(Q,G,z,H)}_isValidPosition($,X,Y){if(typeof $!=="number"||typeof X!=="number")return!1;if(isNaN($)||isNaN(X))return!1;if($<1||X<1)return!1;if(($|0)!==$||(X|0)!==X)return!1;let Z=this._buffer.getLineCount();if($>Z)return!1;if(X===1)return!0;let Q=this.getLineMaxColumn($);if(X>Q)return!1;if(Y===1){let G=this._buffer.getLineCharCode($,X-2);if(P6(G))return!1}return!0}_validatePosition($,X,Y){let Z=Math.floor(typeof $==="number"&&!isNaN($)?$:1),Q=Math.floor(typeof X==="number"&&!isNaN(X)?X:1),G=this._buffer.getLineCount();if(Z<1)return new g(1,1);if(Z>G)return new g(G,this.getLineMaxColumn(G));if(Q<=1)return new g(Z,1);let q=this.getLineMaxColumn(Z);if(Q>=q)return new g(Z,q);if(Y===1){let U=this._buffer.getLineCharCode(Z,Q-2);if(P6(U))return new g(Z,Q-1)}return new g(Z,Q)}validatePosition($){if(this._assertNotDisposed(),$ instanceof g){if(this._isValidPosition($.lineNumber,$.column,1))return $}return this._validatePosition($.lineNumber,$.column,1)}_isValidRange($,X){let{startLineNumber:Y,startColumn:Z,endLineNumber:Q,endColumn:G}=$;if(!this._isValidPosition(Y,Z,0))return!1;if(!this._isValidPosition(Q,G,0))return!1;if(X===1){let q=Z>1?this._buffer.getLineCharCode(Y,Z-2):0,U=G>1&&G<=this._buffer.getLineLength(Q)?this._buffer.getLineCharCode(Q,G-2):0,z=P6(q),H=P6(U);if(!z&&!H)return!0;return!1}return!0}validateRange($){if(this._assertNotDisposed(),$ instanceof k&&!($ instanceof p0)){if(this._isValidRange($,1))return $}let Y=this._validatePosition($.startLineNumber,$.startColumn,0),Z=this._validatePosition($.endLineNumber,$.endColumn,0),Q=Y.lineNumber,G=Y.column,q=Z.lineNumber,U=Z.column;{let z=G>1?this._buffer.getLineCharCode(Q,G-2):0,H=U>1&&U<=this._buffer.getLineLength(q)?this._buffer.getLineCharCode(q,U-2):0,j=P6(z),V=P6(H);if(!j&&!V)return new k(Q,G,q,U);if(Q===q&&G===U)return new k(Q,G-1,q,U-1);if(j&&V)return new k(Q,G-1,q,U+1);if(j)return new k(Q,G-1,q,U);return new k(Q,G,q,U+1)}return new k(Q,G,q,U)}modifyPosition($,X){this._assertNotDisposed();let Y=this.getOffsetAt($)+X;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,Y)))}getFullModelRange(){this._assertNotDisposed();let $=this.getLineCount();return new k(1,1,$,this.getLineMaxColumn($))}findMatchesLineByLine($,X,Y,Z){return this._buffer.findMatchesLineByLine($,X,Y,Z)}findMatches($,X,Y,Z,Q,G,q=_Q0){this._assertNotDisposed();let U=null;if(X!==null){if(!Array.isArray(X))X=[X];if(X.every((j)=>k.isIRange(j)))U=X.map((j)=>this.validateRange(j))}if(U===null)U=[this.getFullModelRange()];U=U.sort((j,V)=>j.startLineNumber-V.startLineNumber||j.startColumn-V.startColumn);let z=[];z.push(U.reduce((j,V)=>{if(k.areIntersecting(j,V))return j.plusRange(V);return z.push(j),V}));let H;if(!Y&&$.indexOf(`
`)<0){let V=new bQ($,Y,Z,Q).parseSearchRequest();if(!V)return[];H=(W)=>this.findMatchesLineByLine(W,V,G,q)}else H=(j)=>jU.findMatches(this,new bQ($,Y,Z,Q),j,G,q);return z.map(H).reduce((j,V)=>j.concat(V),[])}findNextMatch($,X,Y,Z,Q,G){this._assertNotDisposed();let q=this.validatePosition(X);if(!Y&&$.indexOf(`
`)<0){let z=new bQ($,Y,Z,Q).parseSearchRequest();if(!z)return null;let H=this.getLineCount(),j=new k(q.lineNumber,q.column,H,this.getLineMaxColumn(H)),V=this.findMatchesLineByLine(j,z,G,1);if(jU.findNextMatch(this,new bQ($,Y,Z,Q),q,G),V.length>0)return V[0];if(j=new k(1,1,q.lineNumber,this.getLineMaxColumn(q.lineNumber)),V=this.findMatchesLineByLine(j,z,G,1),V.length>0)return V[0];return null}return jU.findNextMatch(this,new bQ($,Y,Z,Q),q,G)}findPreviousMatch($,X,Y,Z,Q,G){this._assertNotDisposed();let q=this.validatePosition(X);return jU.findPreviousMatch(this,new bQ($,Y,Z,Q),q,G)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL($){if((this.getEOL()===`
`?0:1)===$)return;try{if(this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null)this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri);this._commandManager.pushEOL($)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation($){if($ instanceof nj)return $;return new nj($.identifier||null,this.validateRange($.range),$.text,$.forceMoveMarkers||!1,$.isAutoWhitespaceEdit||!1,$._isTracked||!1)}_validateEditOperations($){let X=[];for(let Y=0,Z=$.length;Y<Z;Y++)X[Y]=this._validateEditOperation($[Y]);return X}pushEditOperations($,X,Y,Z){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations($,this._validateEditOperations(X),Y,Z)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations($,X,Y,Z){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let Q=X.map((q)=>{return{range:this.validateRange(q.range),text:q.text}}),G=!0;if($)for(let q=0,U=$.length;q<U;q++){let z=$[q],H=!1;for(let j=0,V=Q.length;j<V;j++){let W=Q[j].range,B=W.startLineNumber>z.endLineNumber,K=z.startLineNumber>W.endLineNumber;if(!B&&!K){H=!0;break}}if(!H){G=!1;break}}if(G)for(let q=0,U=this._trimAutoWhitespaceLines.length;q<U;q++){let z=this._trimAutoWhitespaceLines[q],H=this.getLineMaxColumn(z),j=!0;for(let V=0,W=Q.length;V<W;V++){let B=Q[V].range,K=Q[V].text;if(z<B.startLineNumber||z>B.endLineNumber)continue;if(z===B.startLineNumber&&B.startColumn===H&&B.isEmpty()&&K&&K.length>0&&K.charAt(0)===`
`)continue;if(z===B.startLineNumber&&B.startColumn===1&&B.isEmpty()&&K&&K.length>0&&K.charAt(K.length-1)===`
`)continue;j=!1;break}if(j){let V=new k(z,1,z,H);X.push(new nj(null,V,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}if(this._initialUndoRedoSnapshot===null)this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri);return this._commandManager.pushEditOperation($,X,Y,Z)}_applyUndo($,X,Y,Z){let Q=$.map((G)=>{let q=this.getPositionAt(G.newPosition),U=this.getPositionAt(G.newEnd);return{range:new k(q.lineNumber,q.column,U.lineNumber,U.column),text:G.oldText}});this._applyUndoRedoEdits(Q,X,!0,!1,Y,Z)}_applyRedo($,X,Y,Z){let Q=$.map((G)=>{let q=this.getPositionAt(G.oldPosition),U=this.getPositionAt(G.oldEnd);return{range:new k(q.lineNumber,q.column,U.lineNumber,U.column),text:G.newText}});this._applyUndoRedoEdits(Q,X,!1,!0,Y,Z)}_applyUndoRedoEdits($,X,Y,Z,Q,G){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=Y,this._isRedoing=Z,this.applyEdits($,!1),this.setEOL(X),this._overwriteAlternativeVersionId(Q)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(G),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits($,X=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let Y=this._validateEditOperations($);return this._doApplyEdits(Y,X)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits($,X){let Y=this._buffer.getLineCount(),Z=this._buffer.applyEdits($,this._options.trimAutoWhitespace,X),Q=this._buffer.getLineCount(),G=Z.changes;if(this._trimAutoWhitespaceLines=Z.trimAutoWhitespaceLineNumbers,G.length!==0){for(let z=0,H=G.length;z<H;z++){let j=G[z];this._decorationsTree.acceptReplace(j.rangeOffset,j.rangeLength,j.text.length,j.forceMoveMarkers)}let q=[];this._increaseVersionId();let U=Y;for(let z=0,H=G.length;z<H;z++){let j=G[z],[V]=p4(j.text);this._onDidChangeDecorations.fire();let W=j.range.startLineNumber,B=j.range.endLineNumber,K=B-W,P=V,A=Math.min(K,P),D=P-K,M=Q-U-D+W,R=M,O=M+P,N=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new g(R,1)),this.getOffsetAt(new g(O,this.getLineMaxColumn(O))),0),T=Z9.fromDecorations(N),S=new I7(T);for(let v=A;v>=0;v--){let l=W+v,f=M+v;S.takeFromEndWhile((L)=>L.lineNumber>f);let h=S.takeFromEndWhile((L)=>L.lineNumber===f);q.push(new zR(l,this.getLineContent(f),h))}if(A<K){let v=W+A;q.push(new YI(v+1,B))}if(A<P){let v=new I7(T),l=W+A,f=P-A,h=Q-U-f+l+1,L=[],b=[];for(let p=0;p<f;p++){let d=h+p;b[p]=this.getLineContent(d),v.takeWhile((s)=>s.lineNumber<d),L[p]=v.takeWhile((s)=>s.lineNumber===d)}q.push(new ZI(l+1,W+P,b,L))}U+=D}this._emitContentChangedEvent(new T3(q,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:G,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return Z.reverseEdits===null?void 0:Z.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent($){if($===null||$.size===0)return;let Y=Array.from($).map((Z)=>new zR(Z,this.getLineContent(Z),this._getInjectedTextInLine(Z)));this._onDidChangeInjectedText.fire(new qW(Y))}changeDecorations($,X=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(X,$)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations($,X){let Y={addDecoration:(Q,G)=>{return this._deltaDecorationsImpl($,[],[{range:Q,options:G}])[0]},changeDecoration:(Q,G)=>{this._changeDecorationImpl(Q,G)},changeDecorationOptions:(Q,G)=>{this._changeDecorationOptionsImpl(Q,kr(G))},removeDecoration:(Q)=>{this._deltaDecorationsImpl($,[Q],[])},deltaDecorations:(Q,G)=>{if(Q.length===0&&G.length===0)return[];return this._deltaDecorationsImpl($,Q,G)}},Z=null;try{Z=X(Y)}catch(Q){$1(Q)}return Y.addDecoration=UW,Y.changeDecoration=UW,Y.changeDecorationOptions=UW,Y.removeDecoration=UW,Y.deltaDecorations=UW,Z}deltaDecorations($,X,Y=0){if(this._assertNotDisposed(),!$)$=[];if($.length===0&&X.length===0)return[];try{if(this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1)console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),$1(Error("Invoking deltaDecorations recursively could lead to leaking decorations."));return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(Y,$,X)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange($){return this.getDecorationRange($)}_setTrackedRange($,X,Y){let Z=$?this._decorations[$]:null;if(!Z){if(!X)return null;return this._deltaDecorationsImpl(0,[],[{range:X,options:Lr[Y]}],!0)[0]}if(!X)return this._decorationsTree.delete(Z),delete this._decorations[Z.id],null;let Q=this._validateRangeRelaxedNoAllocations(X),G=this._buffer.getOffsetAt(Q.startLineNumber,Q.startColumn),q=this._buffer.getOffsetAt(Q.endLineNumber,Q.endColumn);return this._decorationsTree.delete(Z),Z.reset(this.getVersionId(),G,q,Q),Z.setOptions(Lr[Y]),this._decorationsTree.insert(Z),Z.id}removeAllDecorationsWithOwnerId($){if(this._isDisposed)return;let X=this._decorationsTree.collectNodesFromOwner($);for(let Y=0,Z=X.length;Y<Z;Y++){let Q=X[Y];this._decorationsTree.delete(Q),delete this._decorations[Q.id]}}getDecorationOptions($){let X=this._decorations[$];if(!X)return null;return X.options}getDecorationRange($){let X=this._decorations[$];if(!X)return null;return this._decorationsTree.getNodeRange(this,X)}getLineDecorations($,X=0,Y=!1){if($<1||$>this.getLineCount())return[];return this.getLinesDecorations($,$,X,Y)}getLinesDecorations($,X,Y=0,Z=!1,Q=!1){let G=this.getLineCount(),q=Math.min(G,Math.max(1,$)),U=Math.min(G,Math.max(1,X)),z=this.getLineMaxColumn(U),H=new k(q,1,U,z),j=this._getDecorationsInRange(H,Y,Z,Q);return sH(j,this._decorationProvider.getDecorationsInRange(H,Y,Z)),j}getDecorationsInRange($,X=0,Y=!1,Z=!1,Q=!1){let G=this.validateRange($),q=this._getDecorationsInRange(G,X,Y,Q);return sH(q,this._decorationProvider.getDecorationsInRange(G,X,Y,Z)),q}getOverviewRulerDecorations($=0,X=!1){return this._decorationsTree.getAll(this,$,X,!0,!1)}getInjectedTextDecorations($=0){return this._decorationsTree.getAllInjectedText(this,$)}_getInjectedTextInLine($){let X=this._buffer.getOffsetAt($,1),Y=X+this._buffer.getLineLength($),Z=this._decorationsTree.getInjectedTextInInterval(this,X,Y,0);return Z9.fromDecorations(Z).filter((Q)=>Q.lineNumber===$)}getAllDecorations($=0,X=!1){let Y=this._decorationsTree.getAll(this,$,X,!1,!1);return Y=Y.concat(this._decorationProvider.getAllDecorations($,X)),Y}getAllMarginDecorations($=0){return this._decorationsTree.getAll(this,$,!1,!1,!0)}_getDecorationsInRange($,X,Y,Z){let Q=this._buffer.getOffsetAt($.startLineNumber,$.startColumn),G=this._buffer.getOffsetAt($.endLineNumber,$.endColumn);return this._decorationsTree.getAllInInterval(this,Q,G,X,Y,Z)}getRangeAt($,X){return this._buffer.getRangeAt($,X-$)}_changeDecorationImpl($,X){let Y=this._decorations[$];if(!Y)return;if(Y.options.after){let q=this.getDecorationRange($);this._onDidChangeDecorations.recordLineAffectedByInjectedText(q.endLineNumber)}if(Y.options.before){let q=this.getDecorationRange($);this._onDidChangeDecorations.recordLineAffectedByInjectedText(q.startLineNumber)}let Z=this._validateRangeRelaxedNoAllocations(X),Q=this._buffer.getOffsetAt(Z.startLineNumber,Z.startColumn),G=this._buffer.getOffsetAt(Z.endLineNumber,Z.endColumn);if(this._decorationsTree.delete(Y),Y.reset(this.getVersionId(),Q,G,Z),this._decorationsTree.insert(Y),this._onDidChangeDecorations.checkAffectedAndFire(Y.options),Y.options.after)this._onDidChangeDecorations.recordLineAffectedByInjectedText(Z.endLineNumber);if(Y.options.before)this._onDidChangeDecorations.recordLineAffectedByInjectedText(Z.startLineNumber)}_changeDecorationOptionsImpl($,X){let Y=this._decorations[$];if(!Y)return;let Z=Y.options.overviewRuler&&Y.options.overviewRuler.color?!0:!1,Q=X.overviewRuler&&X.overviewRuler.color?!0:!1;if(this._onDidChangeDecorations.checkAffectedAndFire(Y.options),this._onDidChangeDecorations.checkAffectedAndFire(X),Y.options.after||X.after){let U=this._decorationsTree.getNodeRange(this,Y);this._onDidChangeDecorations.recordLineAffectedByInjectedText(U.endLineNumber)}if(Y.options.before||X.before){let U=this._decorationsTree.getNodeRange(this,Y);this._onDidChangeDecorations.recordLineAffectedByInjectedText(U.startLineNumber)}let G=Z!==Q,q=wQ0(X)!==WR(Y);if(G||q)this._decorationsTree.delete(Y),Y.setOptions(X),this._decorationsTree.insert(Y);else Y.setOptions(X)}_deltaDecorationsImpl($,X,Y,Z=!1){let Q=this.getVersionId(),G=X.length,q=0,U=Y.length,z=0;this._onDidChangeDecorations.beginDeferredEmit();try{let H=Array(U);while(q<G||z<U){let j=null;if(q<G){do j=this._decorations[X[q++]];while(!j&&q<G);if(j){if(j.options.after){let V=this._decorationsTree.getNodeRange(this,j);this._onDidChangeDecorations.recordLineAffectedByInjectedText(V.endLineNumber)}if(j.options.before){let V=this._decorationsTree.getNodeRange(this,j);this._onDidChangeDecorations.recordLineAffectedByInjectedText(V.startLineNumber)}if(this._decorationsTree.delete(j),!Z)this._onDidChangeDecorations.checkAffectedAndFire(j.options)}}if(z<U){if(!j){let A=++this._lastDecorationId,D=`${this._instanceId};${A}`;j=new QR(D,0,0),this._decorations[D]=j}let V=Y[z],W=this._validateRangeRelaxedNoAllocations(V.range),B=kr(V.options),K=this._buffer.getOffsetAt(W.startLineNumber,W.startColumn),P=this._buffer.getOffsetAt(W.endLineNumber,W.endColumn);if(j.ownerId=$,j.reset(Q,K,P,W),j.setOptions(B),j.options.after)this._onDidChangeDecorations.recordLineAffectedByInjectedText(W.endLineNumber);if(j.options.before)this._onDidChangeDecorations.recordLineAffectedByInjectedText(W.startLineNumber);if(!Z)this._onDidChangeDecorations.checkAffectedAndFire(B);this._decorationsTree.insert(j),H[z]=j.id,z++}else if(j)delete this._decorations[j.id]}return H}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage($,X){if(typeof $==="string")this._languageSelectionListener.clear(),this._setLanguage($,X);else this._languageSelectionListener.value=$.onDidChange(()=>this._setLanguage($.languageId,X)),this._setLanguage($.languageId,X)}_setLanguage($,X){this.tokenization.setLanguageId($,X),this._languageService.requestRichLanguageFeatures($)}getLanguageIdAtPosition($,X){return this.tokenization.getLanguageIdAtPosition($,X)}getWordAtPosition($){return this._tokenizationTextModelPart.getWordAtPosition($)}getWordUntilPosition($){return this._tokenizationTextModelPart.getWordUntilPosition($)}normalizePosition($,X){return $}getLineIndentColumn($){return TQ0(this.getLineContent($))+1}};NZ._MODEL_SYNC_LIMIT=52428800;NZ.LARGE_FILE_SIZE_THRESHOLD=20971520;NZ.LARGE_FILE_LINE_COUNT_THRESHOLD=300000;NZ.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456;NZ.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:v5.tabSize,indentSize:v5.indentSize,insertSpaces:v5.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:v5.trimAutoWhitespace,largeFileOptimizations:v5.largeFileOptimizations,bracketPairColorizationOptions:v5.bracketPairColorizationOptions};NZ=L3=RQ0([GI(4,Bz),GI(5,j6),GI(6,C6)],NZ);Ir=class Ir extends zI{constructor(J){super(J);this._resolvedColor=null,this.position=typeof J.position==="number"?J.position:HU.Center}getColor(J){if(!this._resolvedColor)if(J.type!=="light"&&this.darkColor)this._resolvedColor=this._resolveColor(this.darkColor,J);else this._resolvedColor=this._resolveColor(this.color,J);return this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(J,$){if(typeof J==="string")return J;let X=J?$.getColor(J.id):null;if(!X)return"";return X.toString()}};xr=class xr extends zI{constructor(J){super(J);this.position=J.position}getColor(J){if(!this._resolvedColor)if(J.type!=="light"&&this.darkColor)this._resolvedColor=this._resolveColor(this.darkColor,J);else this._resolvedColor=this._resolveColor(this.color,J);return this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(J,$){if(typeof J==="string")return n.fromHex(J);return $.getColor(J.id)}};C1.EMPTY=C1.register({description:"empty"});Lr=[C1.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),C1.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),C1.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),C1.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];br=class br extends m{constructor(J){super();this.handleBeforeFire=J,this._actual=this._register(new x),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var J;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFireDeferred)this.doFire();(J=this._affectedInjectedTextLines)===null||J===void 0||J.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(J){if(!this._affectedInjectedTextLines)this._affectedInjectedTextLines=new Set;this._affectedInjectedTextLines.add(J)}checkAffectedAndFire(J){var $,X;this._affectsMinimap||(this._affectsMinimap=!!(($=J.minimap)===null||$===void 0?void 0:$.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((X=J.overviewRuler)===null||X===void 0?void 0:X.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!J.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!J.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){if(this._deferredCnt===0)this.doFire();else this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let J={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(J)}};Sr=class Sr extends m{constructor(){super();this._fastEmitter=this._register(new x),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new x),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(J=null){if(this._deferredCnt--,this._deferredCnt===0){if(this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=J;let $=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire($),this._slowEmitter.fire($)}}}fire(J){if(this._deferredCnt>0){if(this._deferredEvent)this._deferredEvent=this._deferredEvent.merge(J);else this._deferredEvent=J;return}this._fastEmitter.fire(J),this._slowEmitter.fire(J)}}});class HW{constructor(J){this._selTrackedRange=null,this._trackSelection=!0,this._setState(J,new K5(new k(1,1,1,1),0,0,new g(1,1),0),new K5(new k(1,1,1,1),0,0,new g(1,1),0))}dispose(J){this._removeTrackedRange(J)}startTrackingSelection(J){this._trackSelection=!0,this._updateTrackedRange(J)}stopTrackingSelection(J){this._trackSelection=!1,this._removeTrackedRange(J)}_updateTrackedRange(J){if(!this._trackSelection)return;this._selTrackedRange=J.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0)}_removeTrackedRange(J){this._selTrackedRange=J.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new P1(this.modelState,this.viewState)}readSelectionFromMarkers(J){let $=J.model._getTrackedRange(this._selTrackedRange);if(this.modelState.selection.isEmpty()&&!$.isEmpty())return p0.fromRange($.collapseToEnd(),this.modelState.selection.getDirection());return p0.fromRange($,this.modelState.selection.getDirection())}ensureValidState(J){this._setState(J,this.modelState,this.viewState)}setState(J,$,X){this._setState(J,$,X)}static _validatePositionWithCache(J,$,X,Y){if($.equals(X))return Y;return J.normalizePosition($,2)}static _validateViewState(J,$){let X=$.position,Y=$.selectionStart.getStartPosition(),Z=$.selectionStart.getEndPosition(),Q=J.normalizePosition(X,2),G=this._validatePositionWithCache(J,Y,X,Q),q=this._validatePositionWithCache(J,Z,Y,G);if(X.equals(Q)&&Y.equals(G)&&Z.equals(q))return $;return new K5(k.fromPositions(G,q),$.selectionStartKind,$.selectionStartLeftoverVisibleColumns+Y.column-G.column,Q,$.leftoverVisibleColumns+X.column-Q.column)}_setState(J,$,X){if(X)X=HW._validateViewState(J.viewModel,X);if(!$){if(!X)return;let Y=J.model.validateRange(J.coordinatesConverter.convertViewRangeToModelRange(X.selectionStart)),Z=J.model.validatePosition(J.coordinatesConverter.convertViewPositionToModelPosition(X.position));$=new K5(Y,X.selectionStartKind,X.selectionStartLeftoverVisibleColumns,Z,X.leftoverVisibleColumns)}else{let Y=J.model.validateRange($.selectionStart),Z=$.selectionStart.equalsRange(Y)?$.selectionStartLeftoverVisibleColumns:0,Q=J.model.validatePosition($.position),G=$.position.equals(Q)?$.leftoverVisibleColumns:0;$=new K5(Y,$.selectionStartKind,Z,Q,G)}if(!X){let Y=J.coordinatesConverter.convertModelPositionToViewPosition(new g($.selectionStart.startLineNumber,$.selectionStart.startColumn)),Z=J.coordinatesConverter.convertModelPositionToViewPosition(new g($.selectionStart.endLineNumber,$.selectionStart.endColumn)),Q=new k(Y.lineNumber,Y.column,Z.lineNumber,Z.column),G=J.coordinatesConverter.convertModelPositionToViewPosition($.position);X=new K5(Q,$.selectionStartKind,$.selectionStartLeftoverVisibleColumns,G,$.leftoverVisibleColumns)}else{let Y=J.coordinatesConverter.validateViewRange(X.selectionStart,$.selectionStart),Z=J.coordinatesConverter.validateViewPosition(X.position,$.position);X=new K5(Y,$.selectionStartKind,$.selectionStartLeftoverVisibleColumns,Z,$.leftoverVisibleColumns)}this.modelState=$,this.viewState=X,this._updateTrackedRange(J)}}var hr=w(()=>{IJ();i0();o5()});class BR{constructor(J){this.context=J,this.cursors=[new HW(J)],this.lastAddedCursorIndex=0}dispose(){for(let J of this.cursors)J.dispose(this.context)}startTrackingSelections(){for(let J of this.cursors)J.startTrackingSelection(this.context)}stopTrackingSelections(){for(let J of this.cursors)J.stopTrackingSelection(this.context)}updateContext(J){this.context=J}ensureValidState(){for(let J of this.cursors)J.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map((J)=>J.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map((J)=>J.asCursorState())}getViewPositions(){return this.cursors.map((J)=>J.viewState.position)}getTopMostViewPosition(){return Cm(this.cursors,B9((J)=>J.viewState.position,g.compare)).viewState.position}getBottomMostViewPosition(){return Sm(this.cursors,B9((J)=>J.viewState.position,g.compare)).viewState.position}getSelections(){return this.cursors.map((J)=>J.modelState.selection)}getViewSelections(){return this.cursors.map((J)=>J.viewState.selection)}setSelections(J){this.setStates(P1.fromModelSelections(J))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(J){if(J===null)return;this.cursors[0].setState(this.context,J[0].modelState,J[0].viewState),this._setSecondaryStates(J.slice(1))}_setSecondaryStates(J){let $=this.cursors.length-1,X=J.length;if($<X){let Y=X-$;for(let Z=0;Z<Y;Z++)this._addSecondaryCursor()}else if($>X){let Y=$-X;for(let Z=0;Z<Y;Z++)this._removeSecondaryCursor(this.cursors.length-2)}for(let Y=0;Y<X;Y++)this.cursors[Y+1].setState(this.context,J[Y].modelState,J[Y].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new HW(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){if(this.cursors.length===1||this.lastAddedCursorIndex===0)return 0;return this.lastAddedCursorIndex}_removeSecondaryCursor(J){if(this.lastAddedCursorIndex>=J+1)this.lastAddedCursorIndex--;this.cursors[J+1].dispose(this.context),this.cursors.splice(J+1,1)}normalize(){if(this.cursors.length===1)return;let J=this.cursors.slice(0),$=[];for(let X=0,Y=J.length;X<Y;X++)$.push({index:X,selection:J[X].modelState.selection});$.sort(B9((X)=>X.selection,k.compareRangesUsingStarts));for(let X=0;X<$.length-1;X++){let Y=$[X],Z=$[X+1],Q=Y.selection,G=Z.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let q;if(G.isEmpty()||Q.isEmpty())q=G.getStartPosition().isBeforeOrEqual(Q.getEndPosition());else q=G.getStartPosition().isBefore(Q.getEndPosition());if(q){let U=Y.index<Z.index?X:X+1,z=Y.index<Z.index?X+1:X,H=$[z].index,j=$[U].index,V=$[z].selection,W=$[U].selection;if(!V.equalsSelection(W)){let B=V.plusRange(W),K=V.selectionStartLineNumber===V.startLineNumber&&V.selectionStartColumn===V.startColumn,P=W.selectionStartLineNumber===W.startLineNumber&&W.selectionStartColumn===W.startColumn,A;if(H===this.lastAddedCursorIndex)A=K,this.lastAddedCursorIndex=j;else A=P;let D;if(A)D=new p0(B.startLineNumber,B.startColumn,B.endLineNumber,B.endColumn);else D=new p0(B.endLineNumber,B.endColumn,B.startLineNumber,B.startColumn);$[U].selection=D;let M=P1.fromModelSelection(D);J[j].setState(this.context,M.modelState,M.viewState)}for(let B of $)if(B.index>H)B.index--;J.splice(H,1),$.splice(z,1),this._removeSecondaryCursor(H-1),X--}}}}var fr=w(()=>{V1();W$();IJ();hr();i0();o5()});class FR{constructor(J,$,X,Y){this._cursorContextBrand=void 0,this.model=J,this.viewModel=$,this.coordinatesConverter=X,this.cursorConfig=Y}}class HI{constructor(){this.type=0}}class jI{constructor(){this.type=1}}class VI{constructor(J){this.type=2,this._source=J}hasChanged(J){return this._source.hasChanged(J)}}class WI{constructor(J,$,X){this.selections=J,this.modelSelections=$,this.reason=X,this.type=3}}class TZ{constructor(J){if(this.type=4,J)this.affectsMinimap=J.affectsMinimap,this.affectsOverviewRuler=J.affectsOverviewRuler,this.affectsGlyphMargin=J.affectsGlyphMargin,this.affectsLineNumber=J.affectsLineNumber;else this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0}}class Fz{constructor(){this.type=5}}class BI{constructor(J){this.type=6,this.isFocused=J}}class FI{constructor(){this.type=7}}class Kz{constructor(){this.type=8}}class KR{constructor(J,$){this.fromLineNumber=J,this.count=$,this.type=9}}class jW{constructor(J,$){this.type=10,this.fromLineNumber=J,this.toLineNumber=$}}class VW{constructor(J,$){this.type=11,this.fromLineNumber=J,this.toLineNumber=$}}class k3{constructor(J,$,X,Y,Z,Q,G){this.source=J,this.minimalReveal=$,this.range=X,this.selections=Y,this.verticalType=Z,this.revealHorizontal=Q,this.scrollType=G,this.type=12}}class KI{constructor(J){this.type=13,this.scrollWidth=J.scrollWidth,this.scrollLeft=J.scrollLeft,this.scrollHeight=J.scrollHeight,this.scrollTop=J.scrollTop,this.scrollWidthChanged=J.scrollWidthChanged,this.scrollLeftChanged=J.scrollLeftChanged,this.scrollHeightChanged=J.scrollHeightChanged,this.scrollTopChanged=J.scrollTopChanged}}class AI{constructor(J){this.theme=J,this.type=14}}class PI{constructor(J){this.type=15,this.ranges=J}}class DI{constructor(){this.type=16}}class RI{constructor(){this.type=17}}class pr{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(J){this.viewEvents.push(J)}emitOutgoingEvent(J){this.outgoingEvents.push(J)}}class AR{constructor(J,$,X,Y){this.kind=0,this._oldContentWidth=J,this._oldContentHeight=$,this.contentWidth=X,this.contentHeight=Y,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(J){if(J.kind!==this.kind)return null;return new AR(this._oldContentWidth,this._oldContentHeight,J.contentWidth,J.contentHeight)}}class PR{constructor(J,$){this.kind=1,this.oldHasFocus=J,this.hasFocus=$}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(J){if(J.kind!==this.kind)return null;return new PR(this.oldHasFocus,J.hasFocus)}}class DR{constructor(J,$,X,Y,Z,Q,G,q){this.kind=2,this._oldScrollWidth=J,this._oldScrollLeft=$,this._oldScrollHeight=X,this._oldScrollTop=Y,this.scrollWidth=Z,this.scrollLeft=Q,this.scrollHeight=G,this.scrollTop=q,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(J){if(J.kind!==this.kind)return null;return new DR(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,J.scrollWidth,J.scrollLeft,J.scrollHeight,J.scrollTop)}}class OI{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(J){if(J.kind!==this.kind)return null;return this}}class _I{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(J){if(J.kind!==this.kind)return null;return this}}class WW{constructor(J,$,X,Y,Z,Q,G){this.kind=6,this.oldSelections=J,this.selections=$,this.oldModelVersionId=X,this.modelVersionId=Y,this.source=Z,this.reason=Q,this.reachedMaxCursorCount=G}static _selectionsAreEqual(J,$){if(!J&&!$)return!0;if(!J||!$)return!1;let X=J.length,Y=$.length;if(X!==Y)return!1;for(let Z=0;Z<X;Z++)if(!J[Z].equalsSelection($[Z]))return!1;return!0}isNoOp(){return WW._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(J){if(J.kind!==this.kind)return null;return new WW(this.oldSelections,J.selections,this.oldModelVersionId,J.modelVersionId,J.source,J.reason,this.reachedMaxCursorCount||J.reachedMaxCursorCount)}}class NI{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(J){if(J.kind!==this.kind)return null;return this}}class TI{constructor(J){this.event=J,this.kind=7}isNoOp(){return!1}attemptToMerge(J){return null}}class wI{constructor(J){this.event=J,this.kind=8}isNoOp(){return!1}attemptToMerge(J){return null}}class LI{constructor(J){this.event=J,this.kind=9}isNoOp(){return!1}attemptToMerge(J){return null}}class kI{constructor(J){this.event=J,this.kind=10}isNoOp(){return!1}attemptToMerge(J){return null}}class EI{constructor(J){this.event=J,this.kind=11}isNoOp(){return!1}attemptToMerge(J){return null}}class II{constructor(J){this.event=J,this.kind=12}isNoOp(){return!1}attemptToMerge(J){return null}}var MI;var RR=w(()=>{_0();z0();MI=class MI extends m{constructor(){super();this._onEvent=this._register(new x),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(J){this._addOutgoingEvent(J),this._emitOutgoingEvents()}_addOutgoingEvent(J){for(let $=0,X=this._outgoingEvents.length;$<X;$++){let Y=this._outgoingEvents[$].kind===J.kind?this._outgoingEvents[$].attemptToMerge(J):null;if(Y){this._outgoingEvents[$]=Y;return}}this._outgoingEvents.push(J)}_emitOutgoingEvents(){while(this._outgoingEvents.length>0){if(this._collector||this._isConsumingViewEventQueue)return;let J=this._outgoingEvents.shift();if(J.isNoOp())continue;this._onEvent.fire(J)}}addViewEventHandler(J){for(let $=0,X=this._eventHandlers.length;$<X;$++)if(this._eventHandlers[$]===J)console.warn("Detected duplicate listener in ViewEventDispatcher",J);this._eventHandlers.push(J)}removeViewEventHandler(J){for(let $=0;$<this._eventHandlers.length;$++)if(this._eventHandlers[$]===J){this._eventHandlers.splice($,1);break}}beginEmitViewEvents(){if(this._collectorCnt++,this._collectorCnt===1)this._collector=new pr;return this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){let J=this._collector.outgoingEvents,$=this._collector.viewEvents;this._collector=null;for(let X of J)this._addOutgoingEvent(X);if($.length>0)this._emitMany($)}this._emitOutgoingEvents()}emitSingleViewEvent(J){try{this.beginEmitViewEvents().emitViewEvent(J)}finally{this.endEmitViewEvents()}}_emitMany(J){if(this._viewEventQueue)this._viewEventQueue=this._viewEventQueue.concat(J);else this._viewEventQueue=J;if(!this._isConsumingViewEventQueue)this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){while(this._viewEventQueue){let J=this._viewEventQueue;this._viewEventQueue=null;let $=this._eventHandlers.slice(0);for(let X of $)X.handleEvents(J)}}}});class BW{static from(J,$){return new BW(J.getVersionId(),$.getCursorStates())}constructor(J,$){this.modelVersionId=J,this.cursorState=$}equals(J){if(!J)return!1;if(this.modelVersionId!==J.modelVersionId)return!1;if(this.cursorState.length!==J.cursorState.length)return!1;for(let $=0,X=this.cursorState.length;$<X;$++)if(!this.cursorState[$].equals(J.cursorState[$]))return!1;return!0}}class yI{static getAllAutoClosedCharacters(J){let $=[];for(let X of J)$=$.concat(X.getAutoClosedCharactersRanges());return $}constructor(J,$,X){this._model=J,this._autoClosedCharactersDecorations=$,this._autoClosedEnclosingDecorations=X}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let J=[];for(let $=0;$<this._autoClosedCharactersDecorations.length;$++){let X=this._model.getDecorationRange(this._autoClosedCharactersDecorations[$]);if(X)J.push(X)}return J}isValid(J){let $=[];for(let X=0;X<this._autoClosedEnclosingDecorations.length;X++){let Y=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[X]);if(Y){if($.push(Y),Y.startLineNumber!==Y.endLineNumber)return!1}}$.sort(k.compareRangesUsingStarts),J.sort(k.compareRangesUsingStarts);for(let X=0;X<J.length;X++){if(X>=$.length)return!1;if(!$[X].strictContainsRange(J[X]))return!1}return!0}}class mr{static executeCommands(J,$,X){let Y={model:J,selectionsBefore:$,trackedRanges:[],trackedRangesDirection:[]},Z=this._innerExecuteCommands(Y,X);for(let Q=0,G=Y.trackedRanges.length;Q<G;Q++)Y.model._setTrackedRange(Y.trackedRanges[Q],null,0);return Z}static _innerExecuteCommands(J,$){if(this._arrayIsEmpty($))return null;let X=this._getEditOperations(J,$);if(X.operations.length===0)return null;let Y=X.operations,Z=this._getLoserCursorMap(Y);if(Z.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let Q=[];for(let U=0,z=Y.length;U<z;U++)if(!Z.hasOwnProperty(Y[U].identifier.major.toString()))Q.push(Y[U]);if(X.hadTrackedEditOperation&&Q.length>0)Q[0]._isTracked=!0;let G=J.model.pushEditOperations(J.selectionsBefore,Q,(U)=>{let z=[];for(let V=0;V<J.selectionsBefore.length;V++)z[V]=[];for(let V of U){if(!V.identifier)continue;z[V.identifier.major].push(V)}let H=(V,W)=>{return V.identifier.minor-W.identifier.minor},j=[];for(let V=0;V<J.selectionsBefore.length;V++)if(z[V].length>0)z[V].sort(H),j[V]=$[V].computeCursorState(J.model,{getInverseEditOperations:()=>{return z[V]},getTrackedSelection:(W)=>{let B=parseInt(W,10),K=J.model._getTrackedRange(J.trackedRanges[B]);if(J.trackedRangesDirection[B]===0)return new p0(K.startLineNumber,K.startColumn,K.endLineNumber,K.endColumn);return new p0(K.endLineNumber,K.endColumn,K.startLineNumber,K.startColumn)}});else j[V]=J.selectionsBefore[V];return j});if(!G)G=J.selectionsBefore;let q=[];for(let U in Z)if(Z.hasOwnProperty(U))q.push(parseInt(U,10));q.sort((U,z)=>{return z-U});for(let U of q)G.splice(U,1);return G}static _arrayIsEmpty(J){for(let $=0,X=J.length;$<X;$++)if(J[$])return!1;return!0}static _getEditOperations(J,$){let X=[],Y=!1;for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z];if(G){let q=this._getEditOperationsFromCommand(J,Z,G);X=X.concat(q.operations),Y=Y||q.hadTrackedEditOperation}}return{operations:X,hadTrackedEditOperation:Y}}static _getEditOperationsFromCommand(J,$,X){let Y=[],Z=0,Q=(H,j,V=!1)=>{if(k.isEmpty(H)&&j==="")return;Y.push({identifier:{major:$,minor:Z++},range:H,text:j,forceMoveMarkers:V,isAutoWhitespaceEdit:X.insertsAutoWhitespace})},G=!1,z={addEditOperation:Q,addTrackedEditOperation:(H,j,V)=>{G=!0,Q(H,j,V)},trackSelection:(H,j)=>{let V=p0.liftSelection(H),W;if(V.isEmpty())if(typeof j==="boolean")if(j)W=2;else W=3;else{let P=J.model.getLineMaxColumn(V.startLineNumber);if(V.startColumn===P)W=2;else W=3}else W=1;let B=J.trackedRanges.length,K=J.model._setTrackedRange(null,V,W);return J.trackedRanges[B]=K,J.trackedRangesDirection[B]=V.getDirection(),B.toString()}};try{X.getEditOperations(J.model,z)}catch(H){return $1(H),{operations:[],hadTrackedEditOperation:!1}}return{operations:Y,hadTrackedEditOperation:G}}static _getLoserCursorMap(J){J=J.slice(0),J.sort((X,Y)=>{return-k.compareRangesUsingEnds(X.range,Y.range)});let $={};for(let X=1;X<J.length;X++){let Y=J[X-1],Z=J[X];if(k.getStartPosition(Y.range).isBefore(k.getEndPosition(Z.range))){let Q;if(Y.identifier.major>Z.identifier.major)Q=Y.identifier.major;else Q=Z.identifier.major;$[Q.toString()]=!0;for(let G=0;G<J.length;G++)if(J[G].identifier.major===Q){if(J.splice(G,1),G<X)X--;G--}if(X>0)X--}}return $}}class ur{constructor(J,$,X){this.text=J,this.startSelection=$,this.endSelection=X}}class FW{static _capture(J,$){let X=[];for(let Y of $){if(Y.startLineNumber!==Y.endLineNumber)return null;X.push(new ur(J.getLineContent(Y.startLineNumber),Y.startColumn-1,Y.endColumn-1))}return X}constructor(J,$){this._original=FW._capture(J,$)}deduceOutcome(J,$){if(!this._original)return null;let X=FW._capture(J,$);if(!X)return null;if(this._original.length!==X.length)return null;let Y=[];for(let Z=0,Q=this._original.length;Z<Q;Z++)Y.push(FW._deduceOutcome(this._original[Z],X[Z]));return Y}static _deduceOutcome(J,$){let X=Math.min(J.startSelection,$.startSelection,NG(J.text,$.text)),Y=Math.min(J.text.length-J.endSelection,$.text.length-$.endSelection,Vj(J.text,$.text)),Z=J.text.substring(X,J.text.length-Y),Q=$.text.substring(X,$.text.length-Y);return new Fk(Z,J.startSelection-X,J.endSelection-X,Q,$.startSelection-X,$.endSelection-X)}}var xI;var cr=w(()=>{O1();X1();fr();IJ();yD();Kk();i0();o5();z0();RR();xI=class xI extends m{constructor(J,$,X,Y){super();this._model=J,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=$,this._coordinatesConverter=X,this.context=new FR(this._model,this._viewModel,this._coordinatesConverter,Y),this._cursors=new BR(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=h1(this._autoClosedActions),super.dispose()}updateConfiguration(J){this.context=new FR(this._model,this._viewModel,this._coordinatesConverter,J),this._cursors.updateContext(this.context)}onLineMappingChanged(J){if(this._knownModelVersionId!==this._model.getVersionId())return;this.setStates(J,"viewModel",0,this.getCursorStates())}setHasFocus(J){this._hasFocus=J}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let J=this._cursors.getSelections();for(let $=0;$<this._autoClosedActions.length;$++){let X=this._autoClosedActions[$];if(!X.isValid(J))X.dispose(),this._autoClosedActions.splice($,1),$--}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(J,$,X,Y){let Z=!1,Q=this.context.cursorConfig.multiCursorLimit;if(Y!==null&&Y.length>Q)Y=Y.slice(0,Q),Z=!0;let G=BW.from(this._model,this);return this._cursors.setStates(Y),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(J,$,X,G,Z)}setCursorColumnSelectData(J){this._columnSelectData=J}revealPrimary(J,$,X,Y,Z,Q){let G=this._cursors.getViewPositions(),q=null,U=null;if(G.length>1)U=this._cursors.getViewSelections();else q=k.fromPositions(G[0],G[0]);J.emitViewEvent(new k3($,X,q,U,Y,Z,Q))}saveState(){let J=[],$=this._cursors.getSelections();for(let X=0,Y=$.length;X<Y;X++){let Z=$[X];J.push({inSelectionMode:!Z.isEmpty(),selectionStart:{lineNumber:Z.selectionStartLineNumber,column:Z.selectionStartColumn},position:{lineNumber:Z.positionLineNumber,column:Z.positionColumn}})}return J}restoreState(J,$){let X=[];for(let Y=0,Z=$.length;Y<Z;Y++){let Q=$[Y],G=1,q=1;if(Q.position&&Q.position.lineNumber)G=Q.position.lineNumber;if(Q.position&&Q.position.column)q=Q.position.column;let U=G,z=q;if(Q.selectionStart&&Q.selectionStart.lineNumber)U=Q.selectionStart.lineNumber;if(Q.selectionStart&&Q.selectionStart.column)z=Q.selectionStart.column;X.push({selectionStartLineNumber:U,selectionStartColumn:z,positionLineNumber:G,positionColumn:q})}this.setStates(J,"restoreState",0,P1.fromModelSelections(X)),this.revealPrimary(J,"restoreState",!1,0,!0,1)}onModelContentChanged(J,$){if($ instanceof qW){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(J,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{let X=$.rawContentChangedEvent;if(this._knownModelVersionId=X.versionId,this._isHandling)return;let Y=X.containsEvent(1);if(this._prevEditOperationType=0,Y)this._cursors.dispose(),this._cursors=new BR(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(J,"model",1,null,!1);else if(this._hasFocus&&X.resultingSelection&&X.resultingSelection.length>0){let Z=P1.fromModelSelections(X.resultingSelection);if(this.setStates(J,"modelChange",X.isUndoing?5:X.isRedoing?6:2,Z))this.revealPrimary(J,"modelChange",!1,0,!0,0)}else{let Z=this._cursors.readSelectionFromMarkers();this.setStates(J,"modelChange",2,P1.fromModelSelections(Z))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let J=this._cursors.getPrimaryCursor(),$=J.viewState.selectionStart.getStartPosition(),X=J.viewState.position;return{isReal:!1,fromViewLineNumber:$.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,$),toViewLineNumber:X.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,X)}}getSelections(){return this._cursors.getSelections()}setSelections(J,$,X,Y){this.setStates(J,$,Y,P1.fromModelSelections(X))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(J){this._prevEditOperationType=J}_pushAutoClosedAction(J,$){let X=[],Y=[];for(let G=0,q=J.length;G<q;G++)X.push({range:J[G],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),Y.push({range:$[G],options:{description:"auto-closed-enclosing",stickiness:1}});let Z=this._model.deltaDecorations([],X),Q=this._model.deltaDecorations([],Y);this._autoClosedActions.push(new yI(this._model,Z,Q))}_executeEditOperation(J){if(!J)return;if(J.shouldPushStackElementBefore)this._model.pushStackElement();let $=mr.executeCommands(this._model,this._cursors.getSelections(),J.commands);if($){this._interpretCommandResult($);let X=[],Y=[];for(let Z=0;Z<J.commands.length;Z++){let Q=J.commands[Z];if(Q instanceof CD&&Q.enclosingRange&&Q.closeCharacterRange)X.push(Q.closeCharacterRange),Y.push(Q.enclosingRange)}if(X.length>0)this._pushAutoClosedAction(X,Y);this._prevEditOperationType=J.type}if(J.shouldPushStackElementAfter)this._model.pushStackElement()}_interpretCommandResult(J){if(!J||J.length===0)J=this._cursors.readSelectionFromMarkers();this._columnSelectData=null,this._cursors.setSelections(J),this._cursors.normalize()}_emitStateChangedIfNecessary(J,$,X,Y,Z){let Q=BW.from(this._model,this);if(Q.equals(Y))return!1;let G=this._cursors.getSelections(),q=this._cursors.getViewSelections();if(J.emitViewEvent(new WI(q,G,X)),!Y||Y.cursorState.length!==Q.cursorState.length||Q.cursorState.some((U,z)=>!U.modelState.equals(Y.cursorState[z].modelState))){let U=Y?Y.cursorState.map((H)=>H.modelState.selection):null,z=Y?Y.modelVersionId:0;J.emitOutgoingEvent(new WW(U,G,z,Q.modelVersionId,$||"keyboard",X,Z))}return!0}_findAutoClosingPairs(J){if(!J.length)return null;let $=[];for(let X=0,Y=J.length;X<Y;X++){let Z=J[X];if(!Z.text||Z.text.indexOf(`
`)>=0)return null;let Q=Z.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!Q)return null;let G=Q[1],q=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(G);if(!q||q.length!==1)return null;let U=q[0].open,z=Z.text.length-Q[2].length-1,H=Z.text.lastIndexOf(U,z-1);if(H===-1)return null;$.push([H,z])}return $}executeEdits(J,$,X,Y){let Z=null;if($==="snippet")Z=this._findAutoClosingPairs(X);if(Z)X[0]._isTracked=!0;let Q=[],G=[],q=this._model.pushEditOperations(this.getSelections(),X,(U)=>{if(Z)for(let H=0,j=Z.length;H<j;H++){let[V,W]=Z[H],B=U[H],K=B.range.startLineNumber,P=B.range.startColumn-1+V,A=B.range.startColumn-1+W;Q.push(new k(K,A+1,K,A+2)),G.push(new k(K,P+1,K,A+2))}let z=Y(U);if(z)this._isHandling=!0;return z});if(q)this._isHandling=!1,this.setSelections(J,$,q,0);if(Q.length>0)this._pushAutoClosedAction(Q,G)}_executeEdit(J,$,X,Y=0){if(this.context.cursorConfig.readOnly)return;let Z=BW.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),J()}catch(Q){$1(Q)}if(this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary($,X,Y,Z,!1))this.revealPrimary($,X,!1,0,!0,0)}getAutoClosedCharacters(){return yI.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(J){this._compositionState=new FW(this._model,this.getSelections())}endComposition(J,$){let X=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{if($==="keyboard")this._executeEditOperation(h6.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,X,this.getSelections(),this.getAutoClosedCharacters()))},J,$)}type(J,$,X){this._executeEdit(()=>{if(X==="keyboard"){let Y=$.length,Z=0;while(Z<Y){let Q=Wj($,Z),G=$.substr(Z,Q);this._executeEditOperation(h6.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),G)),Z+=Q}}else this._executeEditOperation(h6.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),$))},J,X)}compositionType(J,$,X,Y,Z,Q){if($.length===0&&X===0&&Y===0){if(Z!==0){let G=this.getSelections().map((q)=>{let U=q.getPosition();return new p0(U.lineNumber,U.column+Z,U.lineNumber,U.column+Z)});this.setSelections(J,Q,G,0)}return}this._executeEdit(()=>{this._executeEditOperation(h6.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),$,X,Y,Z))},J,Q)}paste(J,$,X,Y,Z){this._executeEdit(()=>{this._executeEditOperation(h6.paste(this.context.cursorConfig,this._model,this.getSelections(),$,X,Y||[]))},J,Z,4)}cut(J,$){this._executeEdit(()=>{this._executeEditOperation(hX.cut(this.context.cursorConfig,this._model,this.getSelections()))},J,$)}executeCommand(J,$,X){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new I8(0,[$],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},J,X)}executeCommands(J,$,X){this._executeEdit(()=>{this._executeEditOperation(new I8(0,$,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},J,X)}}});async function sr(J,$,X){if(!X)return dr($,J.languageIdCodec,lr);let Y=await $6.getOrCreate(X);return dr($,J.languageIdCodec,Y||lr)}function ar(J,$,X,Y,Z,Q,G){let q="<div>",U=Y,z=0,H=!0;for(let j=0,V=$.getCount();j<V;j++){let W=$.getEndOffset(j);if(W<=Y)continue;let B="";for(;U<W&&U<Z;U++){let K=J.charCodeAt(U);switch(K){case 9:{let P=Q-(U+z)%Q;z+=P-1;while(P>0){if(G&&H)B+="&#160;",H=!1;else B+=" ",H=!0;P--}break}case 60:B+="&lt;",H=!1;break;case 62:B+="&gt;",H=!1;break;case 38:B+="&amp;",H=!1;break;case 0:B+="&#00;",H=!1;break;case 65279:case 8232:case 8233:case 133:B+="�",H=!1;break;case 13:B+="&#8203",H=!1;break;case 32:if(G&&H)B+="&#160;",H=!1;else B+=" ",H=!0;break;default:B+=String.fromCharCode(K),H=!1}}if(q+=`<span style="${$.getInlineStyle(j,X)}">${B}</span>`,W>Z||U>=Z)break}return q+="</div>",q}function dr(J,$,X){let Y='<div class="monaco-tokenized-source">',Z=a9(J),Q=X.getInitialState();for(let G=0,q=Z.length;G<q;G++){let U=Z[G];if(G>0)Y+="<br/>";let z=X.tokenizeEncoded(U,!0,Q);v6.convertToEndOffset(z.tokens,U.length);let j=new v6(z.tokens,U,$).inflate(),V=0;for(let W=0,B=j.getCount();W<B;W++){let K=j.getClassName(W),P=j.getEndOffset(W);Y+=`<span class="${K}">${_G(U.substring(V,P))}</span>`,V=P}Q=z.endState}return Y+="</div>",Y}var lr;var bI=w(()=>{X1();JZ();c8();zV();lr={getInitialState:()=>hQ,tokenizeEncoded:(J,$,X)=>AU(0,X)}});class rr{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(J){this._hasPending=!0,this._inserts.push(J)}change(J){this._hasPending=!0,this._changes.push(J)}remove(J){this._hasPending=!0,this._removes.push(J)}mustCommit(){return this._hasPending}commit(J){if(!this._hasPending)return;let $=this._inserts,X=this._changes,Y=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],J._commitPendingChanges($,X,Y)}}class ir{constructor(J,$,X,Y,Z){this.id=J,this.afterLineNumber=$,this.ordinal=X,this.height=Y,this.minWidth=Z,this.prefixSum=0}}class Az{constructor(J,$,X,Y){this._instanceId=NA(++Az.INSTANCE_COUNT),this._pendingChanges=new rr,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=J,this._lineHeight=$,this._paddingTop=X,this._paddingBottom=Y}static findInsertionIndex(J,$,X){let Y=0,Z=J.length;while(Y<Z){let Q=Y+Z>>>1;if($===J[Q].afterLineNumber)if(X<J[Q].ordinal)Z=Q;else Y=Q+1;else if($<J[Q].afterLineNumber)Z=Q;else Y=Q+1}return Y}setLineHeight(J){this._checkPendingChanges(),this._lineHeight=J}setPadding(J,$){this._paddingTop=J,this._paddingBottom=$}onFlushed(J){this._checkPendingChanges(),this._lineCount=J}changeWhitespace(J){let $=!1;try{J({insertWhitespace:(Y,Z,Q,G)=>{$=!0,Y=Y|0,Z=Z|0,Q=Q|0,G=G|0;let q=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new ir(q,Y,Z,Q,G)),q},changeOneWhitespace:(Y,Z,Q)=>{$=!0,Z=Z|0,Q=Q|0,this._pendingChanges.change({id:Y,newAfterLineNumber:Z,newHeight:Q})},removeWhitespace:(Y)=>{$=!0,this._pendingChanges.remove({id:Y})}})}finally{this._pendingChanges.commit(this)}return $}_commitPendingChanges(J,$,X){if(J.length>0||X.length>0)this._minWidth=-1;if(J.length+$.length+X.length<=1){for(let q of J)this._insertWhitespace(q);for(let q of $)this._changeOneWhitespace(q.id,q.newAfterLineNumber,q.newHeight);for(let q of X){let U=this._findWhitespaceIndex(q.id);if(U===-1)continue;this._removeWhitespace(U)}return}let Y=new Set;for(let q of X)Y.add(q.id);let Z=new Map;for(let q of $)Z.set(q.id,q);let Q=(q)=>{let U=[];for(let z of q){if(Y.has(z.id))continue;if(Z.has(z.id)){let H=Z.get(z.id);z.afterLineNumber=H.newAfterLineNumber,z.height=H.newHeight}U.push(z)}return U},G=Q(this._arr).concat(Q(J));G.sort((q,U)=>{if(q.afterLineNumber===U.afterLineNumber)return q.ordinal-U.ordinal;return q.afterLineNumber-U.afterLineNumber}),this._arr=G,this._prefixSumValidIndex=-1}_checkPendingChanges(){if(this._pendingChanges.mustCommit())this._pendingChanges.commit(this)}_insertWhitespace(J){let $=Az.findInsertionIndex(this._arr,J.afterLineNumber,J.ordinal);this._arr.splice($,0,J),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,$-1)}_findWhitespaceIndex(J){let $=this._arr;for(let X=0,Y=$.length;X<Y;X++)if($[X].id===J)return X;return-1}_changeOneWhitespace(J,$,X){let Y=this._findWhitespaceIndex(J);if(Y===-1)return;if(this._arr[Y].height!==X)this._arr[Y].height=X,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,Y-1);if(this._arr[Y].afterLineNumber!==$){let Z=this._arr[Y];this._removeWhitespace(Y),Z.afterLineNumber=$,this._insertWhitespace(Z)}}_removeWhitespace(J){this._arr.splice(J,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,J-1)}onLinesDeleted(J,$){this._checkPendingChanges(),J=J|0,$=$|0,this._lineCount-=$-J+1;for(let X=0,Y=this._arr.length;X<Y;X++){let Z=this._arr[X].afterLineNumber;if(J<=Z&&Z<=$)this._arr[X].afterLineNumber=J-1;else if(Z>$)this._arr[X].afterLineNumber-=$-J+1}}onLinesInserted(J,$){this._checkPendingChanges(),J=J|0,$=$|0,this._lineCount+=$-J+1;for(let X=0,Y=this._arr.length;X<Y;X++){let Z=this._arr[X].afterLineNumber;if(J<=Z)this._arr[X].afterLineNumber+=$-J+1}}getWhitespacesTotalHeight(){if(this._checkPendingChanges(),this._arr.length===0)return 0;return this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(J){this._checkPendingChanges(),J=J|0;let $=Math.max(0,this._prefixSumValidIndex+1);if($===0)this._arr[0].prefixSum=this._arr[0].height,$++;for(let X=$;X<=J;X++)this._arr[X].prefixSum=this._arr[X-1].prefixSum+this._arr[X].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,J),this._arr[J].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();let J=this._lineHeight*this._lineCount,$=this.getWhitespacesTotalHeight();return J+$+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(J){this._checkPendingChanges(),J=J|0;let $=this._findLastWhitespaceBeforeLineNumber(J);if($===-1)return 0;return this.getWhitespacesAccumulatedHeight($)}_findLastWhitespaceBeforeLineNumber(J){J=J|0;let $=this._arr,X=0,Y=$.length-1;while(X<=Y){let Q=(Y-X|0)/2|0,G=X+Q|0;if($[G].afterLineNumber<J)if(G+1>=$.length||$[G+1].afterLineNumber>=J)return G;else X=G+1|0;else Y=G-1|0}return-1}_findFirstWhitespaceAfterLineNumber(J){J=J|0;let X=this._findLastWhitespaceBeforeLineNumber(J)+1;if(X<this._arr.length)return X;return-1}getFirstWhitespaceIndexAfterLineNumber(J){return this._checkPendingChanges(),J=J|0,this._findFirstWhitespaceAfterLineNumber(J)}getVerticalOffsetForLineNumber(J,$=!1){this._checkPendingChanges(),J=J|0;let X;if(J>1)X=this._lineHeight*(J-1);else X=0;let Y=this.getWhitespaceAccumulatedHeightBeforeLineNumber(J-($?1:0));return X+Y+this._paddingTop}getVerticalOffsetAfterLineNumber(J,$=!1){this._checkPendingChanges(),J=J|0;let X=this._lineHeight*J,Y=this.getWhitespaceAccumulatedHeightBeforeLineNumber(J+($?1:0));return X+Y+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let J=0;for(let $=0,X=this._arr.length;$<X;$++)J=Math.max(J,this._arr[$].minWidth);this._minWidth=J}return this._minWidth}isAfterLines(J){this._checkPendingChanges();let $=this.getLinesTotalHeight();return J>$}isInTopPadding(J){if(this._paddingTop===0)return!1;return this._checkPendingChanges(),J<this._paddingTop}isInBottomPadding(J){if(this._paddingBottom===0)return!1;this._checkPendingChanges();let $=this.getLinesTotalHeight();return J>=$-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(J){if(this._checkPendingChanges(),J=J|0,J<0)return 1;let $=this._lineCount|0,X=this._lineHeight,Y=1,Z=$;while(Y<Z){let Q=(Y+Z)/2|0,G=this.getVerticalOffsetForLineNumber(Q)|0;if(J>=G+X)Y=Q+1;else if(J>=G)return Q;else Z=Q}if(Y>$)return $;return Y}getLinesViewportData(J,$){this._checkPendingChanges(),J=J|0,$=$|0;let X=this._lineHeight,Y=this.getLineNumberAtOrAfterVerticalOffset(J)|0,Z=this.getVerticalOffsetForLineNumber(Y)|0,Q=this._lineCount|0,G=this.getFirstWhitespaceIndexAfterLineNumber(Y)|0,q=this.getWhitespacesCount()|0,U,z;if(G===-1)G=q,z=Q+1,U=0;else z=this.getAfterLineNumberForWhitespaceIndex(G)|0,U=this.getHeightForWhitespaceIndex(G)|0;let H=Z,j=H,V=500000,W=0;if(Z>=V)W=Math.floor(Z/V)*V,W=Math.floor(W/X)*X,j-=W;let B=[],K=J+($-J)/2,P=-1;for(let R=Y;R<=Q;R++){if(P===-1){let O=H,N=H+X;if(O<=K&&K<N||O>K)P=R}H+=X,B[R-Y]=j,j+=X;while(z===R)if(j+=U,H+=U,G++,G>=q)z=Q+1;else z=this.getAfterLineNumberForWhitespaceIndex(G)|0,U=this.getHeightForWhitespaceIndex(G)|0;if(H>=$){Q=R;break}}if(P===-1)P=Q;let A=this.getVerticalOffsetForLineNumber(Q)|0,D=Y,M=Q;if(D<M){if(Z<J)D++}if(D<M){if(A+X>$)M--}return{bigNumbersDelta:W,startLineNumber:Y,endLineNumber:Q,relativeVerticalOffset:B,centeredLineNumber:P,completelyVisibleStartLineNumber:D,completelyVisibleEndLineNumber:M}}getVerticalOffsetForWhitespaceIndex(J){this._checkPendingChanges(),J=J|0;let $=this.getAfterLineNumberForWhitespaceIndex(J),X;if($>=1)X=this._lineHeight*$;else X=0;let Y;if(J>0)Y=this.getWhitespacesAccumulatedHeight(J-1);else Y=0;return X+Y+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(J){this._checkPendingChanges(),J=J|0;let $=0,X=this.getWhitespacesCount()-1;if(X<0)return-1;let Y=this.getVerticalOffsetForWhitespaceIndex(X),Z=this.getHeightForWhitespaceIndex(X);if(J>=Y+Z)return-1;while($<X){let Q=Math.floor(($+X)/2),G=this.getVerticalOffsetForWhitespaceIndex(Q),q=this.getHeightForWhitespaceIndex(Q);if(J>=G+q)$=Q+1;else if(J>=G)return Q;else X=Q}return $}getWhitespaceAtVerticalOffset(J){this._checkPendingChanges(),J=J|0;let $=this.getWhitespaceIndexAtOrAfterVerticallOffset(J);if($<0)return null;if($>=this.getWhitespacesCount())return null;let X=this.getVerticalOffsetForWhitespaceIndex($);if(X>J)return null;let Y=this.getHeightForWhitespaceIndex($),Z=this.getIdForWhitespaceIndex($),Q=this.getAfterLineNumberForWhitespaceIndex($);return{id:Z,afterLineNumber:Q,verticalOffset:X,height:Y}}getWhitespaceViewportData(J,$){this._checkPendingChanges(),J=J|0,$=$|0;let X=this.getWhitespaceIndexAtOrAfterVerticallOffset(J),Y=this.getWhitespacesCount()-1;if(X<0)return[];let Z=[];for(let Q=X;Q<=Y;Q++){let G=this.getVerticalOffsetForWhitespaceIndex(Q),q=this.getHeightForWhitespaceIndex(Q);if(G>=$)break;Z.push({id:this.getIdForWhitespaceIndex(Q),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(Q),verticalOffset:G,height:q})}return Z}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(J){return this._checkPendingChanges(),J=J|0,this._arr[J].id}getAfterLineNumberForWhitespaceIndex(J){return this._checkPendingChanges(),J=J|0,this._arr[J].afterLineNumber}getHeightForWhitespaceIndex(J){return this._checkPendingChanges(),J=J|0,this._arr[J].height}}var nr=w(()=>{X1();Az.INSTANCE_COUNT=0});class Pz{constructor(J,$,X,Y){if(J=J|0,$=$|0,X=X|0,Y=Y|0,J<0)J=0;if($<0)$=0;if(X<0)X=0;if(Y<0)Y=0;this.width=J,this.contentWidth=$,this.scrollWidth=Math.max(J,$),this.height=X,this.contentHeight=Y,this.scrollHeight=Math.max(X,Y)}equals(J){return this.width===J.width&&this.contentWidth===J.contentWidth&&this.height===J.height&&this.contentHeight===J.contentHeight}}var LQ0=125,or,SI;var tr=w(()=>{_0();z0();dU();nr();NJ();RR();or=class or extends m{constructor(J,$){super();this._onDidContentSizeChange=this._register(new x),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Pz(0,0,0,0),this._scrollable=this._register(new kJ({forceIntegerValues:!0,smoothScrollDuration:J,scheduleAtNextAnimationFrame:$})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(J){this._scrollable.setSmoothScrollDuration(J)}validateScrollPosition(J){return this._scrollable.validateScrollPosition(J)}getScrollDimensions(){return this._dimensions}setScrollDimensions(J){if(this._dimensions.equals(J))return;let $=this._dimensions;this._dimensions=J,this._scrollable.setScrollDimensions({width:J.width,scrollWidth:J.scrollWidth,height:J.height,scrollHeight:J.scrollHeight},!0);let X=$.contentWidth!==J.contentWidth,Y=$.contentHeight!==J.contentHeight;if(X||Y)this._onDidContentSizeChange.fire(new AR($.contentWidth,$.contentHeight,J.contentWidth,J.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(J){this._scrollable.setScrollPositionNow(J)}setScrollPositionSmooth(J){this._scrollable.setScrollPositionSmooth(J)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}};SI=class SI extends m{constructor(J,$,X){super();this._configuration=J;let Y=this._configuration.options,Z=Y.get(143),Q=Y.get(83);this._linesLayout=new Az($,Y.get(66),Q.top,Q.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new or(0,X)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Pz(Z.contentWidth,0,Z.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(113)?LQ0:0)}onConfigurationChanged(J){let $=this._configuration.options;if(J.hasChanged(66))this._linesLayout.setLineHeight($.get(66));if(J.hasChanged(83)){let X=$.get(83);this._linesLayout.setPadding(X.top,X.bottom)}if(J.hasChanged(143)){let X=$.get(143),Y=X.contentWidth,Z=X.height,Q=this._scrollable.getScrollDimensions(),G=Q.contentWidth;this._scrollable.setScrollDimensions(new Pz(Y,Q.contentWidth,Z,this._getContentHeight(Y,Z,G)))}else this._updateHeight();if(J.hasChanged(113))this._configureSmoothScrollDuration()}onFlushed(J){this._linesLayout.onFlushed(J)}onLinesDeleted(J,$){this._linesLayout.onLinesDeleted(J,$)}onLinesInserted(J,$){this._linesLayout.onLinesInserted(J,$)}_getHorizontalScrollbarHeight(J,$){let Y=this._configuration.options.get(102);if(Y.horizontal===2)return 0;if(J>=$)return 0;return Y.horizontalScrollbarSize}_getContentHeight(J,$,X){let Y=this._configuration.options,Z=this._linesLayout.getLinesTotalHeight();if(Y.get(104))Z+=Math.max(0,$-Y.get(66)-Y.get(83).bottom);else if(!Y.get(102).ignoreHorizontalScrollbarInContentHeight)Z+=this._getHorizontalScrollbarHeight(J,X);return Z}_updateHeight(){let J=this._scrollable.getScrollDimensions(),$=J.width,X=J.height,Y=J.contentWidth;this._scrollable.setScrollDimensions(new Pz($,J.contentWidth,X,this._getContentHeight($,X,Y)))}getCurrentViewport(){let J=this._scrollable.getScrollDimensions(),$=this._scrollable.getCurrentScrollPosition();return new lP($.scrollTop,$.scrollLeft,J.width,J.height)}getFutureViewport(){let J=this._scrollable.getScrollDimensions(),$=this._scrollable.getFutureScrollPosition();return new lP($.scrollTop,$.scrollLeft,J.width,J.height)}_computeContentWidth(){let J=this._configuration.options,$=this._maxLineWidth,X=J.get(144),Y=J.get(50),Z=J.get(143);if(X.isViewportWrapping){let Q=J.get(72);if($>Z.contentWidth+Y.typicalHalfwidthCharacterWidth){if(Q.enabled&&Q.side==="right")return $+Z.verticalScrollbarWidth}return $}else{let Q=J.get(103)*Y.typicalHalfwidthCharacterWidth,G=this._linesLayout.getWhitespaceMinWidth();return Math.max($+Q+Z.verticalScrollbarWidth,G,this._overlayWidgetsMinWidth)}}setMaxLineWidth(J){this._maxLineWidth=J,this._updateContentWidth()}setOverlayWidgetsMinWidth(J){this._overlayWidgetsMinWidth=J,this._updateContentWidth()}_updateContentWidth(){let J=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Pz(J.width,this._computeContentWidth(),J.height,J.contentHeight)),this._updateHeight()}saveState(){let J=this._scrollable.getFutureScrollPosition(),$=J.scrollTop,X=this._linesLayout.getLineNumberAtOrAfterVerticalOffset($),Y=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(X);return{scrollTop:$,scrollTopWithoutViewZones:$-Y,scrollLeft:J.scrollLeft}}changeWhitespace(J){let $=this._linesLayout.changeWhitespace(J);if($)this.onHeightMaybeChanged();return $}getVerticalOffsetForLineNumber(J,$=!1){return this._linesLayout.getVerticalOffsetForLineNumber(J,$)}getVerticalOffsetAfterLineNumber(J,$=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(J,$)}isAfterLines(J){return this._linesLayout.isAfterLines(J)}isInTopPadding(J){return this._linesLayout.isInTopPadding(J)}isInBottomPadding(J){return this._linesLayout.isInBottomPadding(J)}getLineNumberAtVerticalOffset(J){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(J)}getWhitespaceAtVerticalOffset(J){return this._linesLayout.getWhitespaceAtVerticalOffset(J)}getLinesViewportData(){let J=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(J.top,J.top+J.height)}getLinesViewportDataAtScrollTop(J){let $=this._scrollable.getScrollDimensions();if(J+$.height>$.scrollHeight)J=$.scrollHeight-$.height;if(J<0)J=0;return this._linesLayout.getLinesViewportData(J,J+$.height)}getWhitespaceViewportData(){let J=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(J.top,J.top+J.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(J){return this._scrollable.validateScrollPosition(J)}setScrollPosition(J,$){if($===1)this._scrollable.setScrollPositionNow(J);else this._scrollable.setScrollPositionSmooth(J)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(J,$){let X=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:X.scrollLeft+J,scrollTop:X.scrollTop+$})}}});class CI{constructor(J,$,X,Y,Z){this.editorId=J,this.model=$,this.configuration=X,this._linesCollection=Y,this._coordinatesConverter=Z,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(J){let $=J.id,X=this._decorationsCache[$];if(!X){let{range:Y,options:Z}=J,Q;if(Z.isWholeLine){let G=this._coordinatesConverter.convertModelPositionToViewPosition(new g(Y.startLineNumber,1),0,!1,!0),q=this._coordinatesConverter.convertModelPositionToViewPosition(new g(Y.endLineNumber,this.model.getLineMaxColumn(Y.endLineNumber)),1);Q=new k(G.lineNumber,G.column,q.lineNumber,q.column)}else Q=this._coordinatesConverter.convertModelRangeToViewRange(Y,1);X=new VV(Q,Z),this._decorationsCache[$]=X}return X}getMinimapDecorationsInRange(J){return this._getDecorationsInRange(J,!0,!1).decorations}getDecorationsViewportData(J){let $=this._cachedModelDecorationsResolver!==null;if($=$&&J.equalsRange(this._cachedModelDecorationsResolverViewRange),!$)this._cachedModelDecorationsResolver=this._getDecorationsInRange(J,!1,!1),this._cachedModelDecorationsResolverViewRange=J;return this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(J,$=!1,X=!1){let Y=new k(J,this._linesCollection.getViewLineMinColumn(J),J,this._linesCollection.getViewLineMaxColumn(J));return this._getDecorationsInRange(Y,$,X).inlineDecorations[0]}_getDecorationsInRange(J,$,X){let Y=this._linesCollection.getDecorationsInRange(J,this.editorId,VG(this.configuration.options),$,X),Z=J.startLineNumber,Q=J.endLineNumber,G=[],q=0,U=[];for(let z=Z;z<=Q;z++)U[z-Z]=[];for(let z=0,H=Y.length;z<H;z++){let j=Y[z],V=j.options;if(!kQ0(this.model,j))continue;let W=this._getOrCreateViewModelDecoration(j),B=W.range;if(G[q++]=W,V.inlineClassName){let K=new fQ(B,V.inlineClassName,V.inlineClassNameAffectsLetterSpacing?3:0),P=Math.max(Z,B.startLineNumber),A=Math.min(Q,B.endLineNumber);for(let D=P;D<=A;D++)U[D-Z].push(K)}if(V.beforeContentClassName){if(Z<=B.startLineNumber&&B.startLineNumber<=Q){let K=new fQ(new k(B.startLineNumber,B.startColumn,B.startLineNumber,B.startColumn),V.beforeContentClassName,1);U[B.startLineNumber-Z].push(K)}}if(V.afterContentClassName){if(Z<=B.endLineNumber&&B.endLineNumber<=Q){let K=new fQ(new k(B.endLineNumber,B.endColumn,B.endLineNumber,B.endColumn),V.afterContentClassName,2);U[B.endLineNumber-Z].push(K)}}}return{decorations:G,inlineDecorations:U}}}function kQ0(J,$){if($.options.hideInCommentTokens&&EQ0(J,$))return!1;if($.options.hideInStringTokens&&IQ0(J,$))return!1;return!0}function EQ0(J,$){return er(J,$.range,(X)=>X===1)}function IQ0(J,$){return er(J,$.range,(X)=>X===2)}function er(J,$,X){for(let Y=$.startLineNumber;Y<=$.endLineNumber;Y++){let Z=J.tokenization.getLineTokens(Y),Q=Y===$.startLineNumber,G=Y===$.endLineNumber,q=Q?Z.findTokenIndexAtOffset($.startColumn-1):0;while(q<Z.getCount()){if(G){if(Z.getStartOffset(q)>$.endColumn-1)break}if(!X(Z.getStandardTokenType(q)))return!1;q++}}return!0}var Ji=w(()=>{i0();NJ();O8()});function MR(J,$){if(J===null){if($)return KW.INSTANCE;return AW.INSTANCE}else return new Xi(J,$)}class Xi{constructor(J,$){this._projectionData=J,this._isVisible=$}isVisible(){return this._isVisible}setVisible(J){return this._isVisible=J,this}getProjectionData(){return this._projectionData}getViewLineCount(){if(!this._isVisible)return 0;return this._projectionData.getOutputLineCount()}getViewLineContent(J,$,X){this._assertVisible();let Y=X>0?this._projectionData.breakOffsets[X-1]:0,Z=this._projectionData.breakOffsets[X],Q;if(this._projectionData.injectionOffsets!==null){let G=this._projectionData.injectionOffsets.map((U,z)=>new Z9(0,0,U+1,this._projectionData.injectionOptions[z],0));Q=Z9.applyInjectedText(J.getLineContent($),G).substring(Y,Z)}else Q=J.getValueInRange({startLineNumber:$,startColumn:Y+1,endLineNumber:$,endColumn:Z+1});if(X>0)Q=$i(this._projectionData.wrappedTextIndentLength)+Q;return Q}getViewLineLength(J,$,X){return this._assertVisible(),this._projectionData.getLineLength(X)}getViewLineMinColumn(J,$,X){return this._assertVisible(),this._projectionData.getMinOutputOffset(X)+1}getViewLineMaxColumn(J,$,X){return this._assertVisible(),this._projectionData.getMaxOutputOffset(X)+1}getViewLineData(J,$,X){let Y=[];return this.getViewLinesData(J,$,X,1,0,[!0],Y),Y[0]}getViewLinesData(J,$,X,Y,Z,Q,G){this._assertVisible();let q=this._projectionData,U=q.injectionOffsets,z=q.injectionOptions,H=null;if(U){H=[];let V=0,W=0;for(let B=0;B<q.getOutputLineCount();B++){let K=[];H[B]=K;let P=B>0?q.breakOffsets[B-1]:0,A=q.breakOffsets[B];while(W<U.length){let D=z[W].content.length,M=U[W]+V,R=M+D;if(M>A)break;if(P<R){let O=z[W];if(O.inlineClassName){let N=B>0?q.wrappedTextIndentLength:0,T=N+Math.max(M-P,0),S=N+Math.min(R-P,A-P);if(T!==S)K.push(new YL(T,S,O.inlineClassName,O.inlineClassNameAffectsLetterSpacing))}}if(R<=A)V+=D,W++;else break}}}let j;if(U)j=J.tokenization.getLineTokens($).withInserted(U.map((V,W)=>({offset:V,text:z[W].content,tokenMetadata:v6.defaultTokenMetadata})));else j=J.tokenization.getLineTokens($);for(let V=X;V<X+Y;V++){let W=Z+V-X;if(!Q[W]){G[W]=null;continue}G[W]=this._getViewLineData(j,H?H[V]:null,V)}}_getViewLineData(J,$,X){this._assertVisible();let Y=this._projectionData,Z=X>0?Y.wrappedTextIndentLength:0,Q=X>0?Y.breakOffsets[X-1]:0,G=Y.breakOffsets[X],q=J.sliceAndInflate(Q,G,Z),U=q.getLineContent();if(X>0)U=$i(Y.wrappedTextIndentLength)+U;let z=this._projectionData.getMinOutputOffset(X)+1,H=U.length+1,j=X+1<this.getViewLineCount(),V=X===0?0:Y.breakOffsetsVisibleColumn[X-1];return new RU(U,j,z,H,V,q,$)}getModelColumnOfViewPosition(J,$){return this._assertVisible(),this._projectionData.translateToInputOffset(J,$-1)+1}getViewPositionOfModelPosition(J,$,X=2){return this._assertVisible(),this._projectionData.translateToOutputPosition($-1,X).toPosition(J)}getViewLineNumberOfModelPosition(J,$){this._assertVisible();let X=this._projectionData.translateToOutputPosition($-1);return J+X.outputLineIndex}normalizePosition(J,$,X){let Y=$.lineNumber-J;return this._projectionData.normalizeOutputPosition(J,$.column-1,X).toPosition(Y)}getInjectedTextAt(J,$){return this._projectionData.getInjectedText(J,$-1)}_assertVisible(){if(!this._isVisible)throw Error("Not supported")}}class KW{constructor(){}isVisible(){return!0}setVisible(J){if(J)return this;return AW.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(J,$,X){return J.getLineContent($)}getViewLineLength(J,$,X){return J.getLineLength($)}getViewLineMinColumn(J,$,X){return J.getLineMinColumn($)}getViewLineMaxColumn(J,$,X){return J.getLineMaxColumn($)}getViewLineData(J,$,X){let Y=J.tokenization.getLineTokens($),Z=Y.getLineContent();return new RU(Z,!1,1,Z.length+1,0,Y.inflate(),null)}getViewLinesData(J,$,X,Y,Z,Q,G){if(!Q[Z]){G[Z]=null;return}G[Z]=this.getViewLineData(J,$,0)}getModelColumnOfViewPosition(J,$){return $}getViewPositionOfModelPosition(J,$){return new g(J,$)}getViewLineNumberOfModelPosition(J,$){return J}normalizePosition(J,$,X){return $}getInjectedTextAt(J,$){return null}}class AW{constructor(){}isVisible(){return!1}setVisible(J){if(!J)return this;return KW.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(J,$,X){throw Error("Not supported")}getViewLineLength(J,$,X){throw Error("Not supported")}getViewLineMinColumn(J,$,X){throw Error("Not supported")}getViewLineMaxColumn(J,$,X){throw Error("Not supported")}getViewLineData(J,$,X){throw Error("Not supported")}getViewLinesData(J,$,X,Y,Z,Q,G){throw Error("Not supported")}getModelColumnOfViewPosition(J,$){throw Error("Not supported")}getViewPositionOfModelPosition(J,$){throw Error("Not supported")}getViewLineNumberOfModelPosition(J,$){throw Error("Not supported")}normalizePosition(J,$,X){throw Error("Not supported")}getInjectedTextAt(J,$){throw Error("Not supported")}}function $i(J){if(J>=vI.length)for(let $=1;$<=J;$++)vI[$]=yQ0($);return vI[J]}function yQ0(J){return Array(J+1).join(" ")}var vI;var Yi=w(()=>{JZ();NJ();KW.INSTANCE=new KW;AW.INSTANCE=new AW;vI=[""]});class gI{constructor(J,$,X,Y,Z,Q,G,q,U,z){this._editorId=J,this.model=$,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=X,this._monospaceLineBreaksComputerFactory=Y,this.fontInfo=Z,this.tabSize=Q,this.wrappingStrategy=G,this.wrappingColumn=q,this.wrappingIndent=U,this.wordBreak=z,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Zi(this)}_constructLines(J,$){if(this.modelLineProjections=[],J)this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]);let X=this.model.getLinesContent(),Y=this.model.getInjectedTextDecorations(this._editorId),Z=X.length,Q=this.createLineBreaksComputer(),G=new I7(Z9.fromDecorations(Y));for(let B=0;B<Z;B++){let K=G.takeWhile((P)=>P.lineNumber===B+1);Q.addRequest(X[B],K,$?$[B]:null)}let q=Q.finalize(),U=[],z=this.hiddenAreasDecorationIds.map((B)=>this.model.getDecorationRange(B)).sort(k.compareRangesUsingStarts),H=1,j=0,V=-1,W=V+1<z.length?j+1:Z+2;for(let B=0;B<Z;B++){let K=B+1;if(K===W)V++,H=z[V].startLineNumber,j=z[V].endLineNumber,W=V+1<z.length?j+1:Z+2;let P=K>=H&&K<=j,A=MR(q[B],!P);U[B]=A.getViewLineCount(),this.modelLineProjections[B]=A}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Tw(U)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((J)=>this.model.getDecorationRange(J))}setHiddenAreas(J){let $=J.map((j)=>this.model.validateRange(j)),X=xQ0($),Y=this.hiddenAreasDecorationIds.map((j)=>this.model.getDecorationRange(j)).sort(k.compareRangesUsingStarts);if(X.length===Y.length){let j=!1;for(let V=0;V<X.length;V++)if(!X[V].equalsRange(Y[V])){j=!0;break}if(!j)return!1}let Z=X.map((j)=>({range:j,options:C1.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,Z);let Q=X,G=1,q=0,U=-1,z=U+1<Q.length?q+1:this.modelLineProjections.length+2,H=!1;for(let j=0;j<this.modelLineProjections.length;j++){let V=j+1;if(V===z)U++,G=Q[U].startLineNumber,q=Q[U].endLineNumber,z=U+1<Q.length?q+1:this.modelLineProjections.length+2;let W=!1;if(V>=G&&V<=q){if(this.modelLineProjections[j].isVisible())this.modelLineProjections[j]=this.modelLineProjections[j].setVisible(!1),W=!0}else if(H=!0,!this.modelLineProjections[j].isVisible())this.modelLineProjections[j]=this.modelLineProjections[j].setVisible(!0),W=!0;if(W){let B=this.modelLineProjections[j].getViewLineCount();this.projectedModelLineLineCounts.setValue(j,B)}}if(!H)this.setHiddenAreas([]);return!0}modelPositionIsVisible(J,$){if(J<1||J>this.modelLineProjections.length)return!1;return this.modelLineProjections[J-1].isVisible()}getModelLineViewLineCount(J){if(J<1||J>this.modelLineProjections.length)return 1;return this.modelLineProjections[J-1].getViewLineCount()}setTabSize(J){if(this.tabSize===J)return!1;return this.tabSize=J,this._constructLines(!1,null),!0}setWrappingSettings(J,$,X,Y,Z){let Q=this.fontInfo.equals(J),G=this.wrappingStrategy===$,q=this.wrappingColumn===X,U=this.wrappingIndent===Y,z=this.wordBreak===Z;if(Q&&G&&q&&U&&z)return!1;let H=Q&&G&&!q&&U&&z;this.fontInfo=J,this.wrappingStrategy=$,this.wrappingColumn=X,this.wrappingIndent=Y,this.wordBreak=Z;let j=null;if(H){j=[];for(let V=0,W=this.modelLineProjections.length;V<W;V++)j[V]=this.modelLineProjections[V].getProjectionData()}return this._constructLines(!1,j),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(J,$,X){if(!J||J<=this._validModelVersionId)return null;let Y=$===1?1:this.projectedModelLineLineCounts.getPrefixSum($-1)+1,Z=this.projectedModelLineLineCounts.getPrefixSum(X);return this.modelLineProjections.splice($-1,X-$+1),this.projectedModelLineLineCounts.removeValues($-1,X-$+1),new jW(Y,Z)}onModelLinesInserted(J,$,X,Y){if(!J||J<=this._validModelVersionId)return null;let Z=$>2&&!this.modelLineProjections[$-2].isVisible(),Q=$===1?1:this.projectedModelLineLineCounts.getPrefixSum($-1)+1,G=0,q=[],U=[];for(let z=0,H=Y.length;z<H;z++){let j=MR(Y[z],!Z);q.push(j);let V=j.getViewLineCount();G+=V,U[z]=V}return this.modelLineProjections=this.modelLineProjections.slice(0,$-1).concat(q).concat(this.modelLineProjections.slice($-1)),this.projectedModelLineLineCounts.insertValues($-1,U),new VW(Q,Q+G-1)}onModelLineChanged(J,$,X){if(J!==null&&J<=this._validModelVersionId)return[!1,null,null,null];let Y=$-1,Z=this.modelLineProjections[Y].getViewLineCount(),Q=this.modelLineProjections[Y].isVisible(),G=MR(X,Q);this.modelLineProjections[Y]=G;let q=this.modelLineProjections[Y].getViewLineCount(),U=!1,z=0,H=-1,j=0,V=-1,W=0,B=-1;if(Z>q)z=this.projectedModelLineLineCounts.getPrefixSum($-1)+1,H=z+q-1,W=H+1,B=W+(Z-q)-1,U=!0;else if(Z<q)z=this.projectedModelLineLineCounts.getPrefixSum($-1)+1,H=z+Z-1,j=H+1,V=j+(q-Z)-1,U=!0;else z=this.projectedModelLineLineCounts.getPrefixSum($-1)+1,H=z+q-1;this.projectedModelLineLineCounts.setValue(Y,q);let K=z<=H?new KR(z,H-z+1):null,P=j<=V?new VW(j,V):null,A=W<=B?new jW(W,B):null;return[U,K,P,A]}acceptVersionId(J){if(this._validModelVersionId=J,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible())this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(J){if(J<1)return 1;let $=this.getViewLineCount();if(J>$)return $;return J|0}getActiveIndentGuide(J,$,X){J=this._toValidViewLineNumber(J),$=this._toValidViewLineNumber($),X=this._toValidViewLineNumber(X);let Y=this.convertViewPositionToModelPosition(J,this.getViewLineMinColumn(J)),Z=this.convertViewPositionToModelPosition($,this.getViewLineMinColumn($)),Q=this.convertViewPositionToModelPosition(X,this.getViewLineMinColumn(X)),G=this.model.guides.getActiveIndentGuide(Y.lineNumber,Z.lineNumber,Q.lineNumber),q=this.convertModelPositionToViewPosition(G.startLineNumber,1),U=this.convertModelPositionToViewPosition(G.endLineNumber,this.model.getLineMaxColumn(G.endLineNumber));return{startLineNumber:q.lineNumber,endLineNumber:U.lineNumber,indent:G.indent}}getViewLineInfo(J){J=this._toValidViewLineNumber(J);let $=this.projectedModelLineLineCounts.getIndexOf(J-1),X=$.index,Y=$.remainder;return new hI(X+1,Y)}getMinColumnOfViewLine(J){return this.modelLineProjections[J.modelLineNumber-1].getViewLineMinColumn(this.model,J.modelLineNumber,J.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(J){return this.modelLineProjections[J.modelLineNumber-1].getViewLineMaxColumn(this.model,J.modelLineNumber,J.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(J){let $=this.modelLineProjections[J.modelLineNumber-1],X=$.getViewLineMinColumn(this.model,J.modelLineNumber,J.modelLineWrappedLineIdx),Y=$.getModelColumnOfViewPosition(J.modelLineWrappedLineIdx,X);return new g(J.modelLineNumber,Y)}getModelEndPositionOfViewLine(J){let $=this.modelLineProjections[J.modelLineNumber-1],X=$.getViewLineMaxColumn(this.model,J.modelLineNumber,J.modelLineWrappedLineIdx),Y=$.getModelColumnOfViewPosition(J.modelLineWrappedLineIdx,X);return new g(J.modelLineNumber,Y)}getViewLineInfosGroupedByModelRanges(J,$){let X=this.getViewLineInfo(J),Y=this.getViewLineInfo($),Z=[],Q=this.getModelStartPositionOfViewLine(X),G=[];for(let q=X.modelLineNumber;q<=Y.modelLineNumber;q++){let U=this.modelLineProjections[q-1];if(U.isVisible()){let z=q===X.modelLineNumber?X.modelLineWrappedLineIdx:0,H=q===Y.modelLineNumber?Y.modelLineWrappedLineIdx+1:U.getViewLineCount();for(let j=z;j<H;j++)G.push(new hI(q,j))}if(!U.isVisible()&&Q){let z=new g(q-1,this.model.getLineMaxColumn(q-1)+1),H=k.fromPositions(Q,z);Z.push(new fI(H,G)),G=[],Q=null}else if(U.isVisible()&&!Q)Q=new g(q,1)}if(Q){let q=k.fromPositions(Q,this.getModelEndPositionOfViewLine(Y));Z.push(new fI(q,G))}return Z}getViewLinesBracketGuides(J,$,X,Y){let Z=X?this.convertViewPositionToModelPosition(X.lineNumber,X.column):null,Q=[];for(let G of this.getViewLineInfosGroupedByModelRanges(J,$)){let q=G.modelRange.startLineNumber,U=this.model.guides.getLinesBracketGuides(q,G.modelRange.endLineNumber,Z,Y);for(let z of G.viewLines){let j=U[z.modelLineNumber-q].map((V)=>{if(V.forWrappedLinesAfterColumn!==-1){if(this.modelLineProjections[z.modelLineNumber-1].getViewPositionOfModelPosition(0,V.forWrappedLinesAfterColumn).lineNumber>=z.modelLineWrappedLineIdx)return}if(V.forWrappedLinesBeforeOrAtColumn!==-1){if(this.modelLineProjections[z.modelLineNumber-1].getViewPositionOfModelPosition(0,V.forWrappedLinesBeforeOrAtColumn).lineNumber<z.modelLineWrappedLineIdx)return}if(!V.horizontalLine)return V;let W=-1;if(V.column!==-1){let P=this.modelLineProjections[z.modelLineNumber-1].getViewPositionOfModelPosition(0,V.column);if(P.lineNumber===z.modelLineWrappedLineIdx)W=P.column;else if(P.lineNumber<z.modelLineWrappedLineIdx)W=this.getMinColumnOfViewLine(z);else if(P.lineNumber>z.modelLineWrappedLineIdx)return}let B=this.convertModelPositionToViewPosition(z.modelLineNumber,V.horizontalLine.endColumn),K=this.modelLineProjections[z.modelLineNumber-1].getViewPositionOfModelPosition(0,V.horizontalLine.endColumn);if(K.lineNumber===z.modelLineWrappedLineIdx)return new I$(V.visibleColumn,W,V.className,new oQ(V.horizontalLine.top,B.column),-1,-1);else if(K.lineNumber<z.modelLineWrappedLineIdx)return;else{if(V.visibleColumn!==-1)return;return new I$(V.visibleColumn,W,V.className,new oQ(V.horizontalLine.top,this.getMaxColumnOfViewLine(z)),-1,-1)}});Q.push(j.filter((V)=>!!V))}}return Q}getViewLinesIndentGuides(J,$){J=this._toValidViewLineNumber(J),$=this._toValidViewLineNumber($);let X=this.convertViewPositionToModelPosition(J,this.getViewLineMinColumn(J)),Y=this.convertViewPositionToModelPosition($,this.getViewLineMaxColumn($)),Z=[],Q=[],G=[],q=X.lineNumber-1,U=Y.lineNumber-1,z=null;for(let W=q;W<=U;W++){let B=this.modelLineProjections[W];if(B.isVisible()){let K=B.getViewLineNumberOfModelPosition(0,W===q?X.column:1),P=B.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(W+1)),A=P-K+1,D=0;if(A>1&&B.getViewLineMinColumn(this.model,W+1,P)===1)D=K===0?1:2;if(Q.push(A),G.push(D),z===null)z=new g(W+1,0)}else if(z!==null)Z=Z.concat(this.model.guides.getLinesIndentGuides(z.lineNumber,W)),z=null}if(z!==null)Z=Z.concat(this.model.guides.getLinesIndentGuides(z.lineNumber,Y.lineNumber)),z=null;let H=$-J+1,j=Array(H),V=0;for(let W=0,B=Z.length;W<B;W++){let K=Z[W],P=Math.min(H-V,Q[W]),A=G[W],D;if(A===2)D=0;else if(A===1)D=1;else D=P;for(let M=0;M<P;M++){if(M===D)K=0;j[V++]=K}}return j}getViewLineContent(J){let $=this.getViewLineInfo(J);return this.modelLineProjections[$.modelLineNumber-1].getViewLineContent(this.model,$.modelLineNumber,$.modelLineWrappedLineIdx)}getViewLineLength(J){let $=this.getViewLineInfo(J);return this.modelLineProjections[$.modelLineNumber-1].getViewLineLength(this.model,$.modelLineNumber,$.modelLineWrappedLineIdx)}getViewLineMinColumn(J){let $=this.getViewLineInfo(J);return this.modelLineProjections[$.modelLineNumber-1].getViewLineMinColumn(this.model,$.modelLineNumber,$.modelLineWrappedLineIdx)}getViewLineMaxColumn(J){let $=this.getViewLineInfo(J);return this.modelLineProjections[$.modelLineNumber-1].getViewLineMaxColumn(this.model,$.modelLineNumber,$.modelLineWrappedLineIdx)}getViewLineData(J){let $=this.getViewLineInfo(J);return this.modelLineProjections[$.modelLineNumber-1].getViewLineData(this.model,$.modelLineNumber,$.modelLineWrappedLineIdx)}getViewLinesData(J,$,X){J=this._toValidViewLineNumber(J),$=this._toValidViewLineNumber($);let Y=this.projectedModelLineLineCounts.getIndexOf(J-1),Z=J,Q=Y.index,G=Y.remainder,q=[];for(let U=Q,z=this.model.getLineCount();U<z;U++){let H=this.modelLineProjections[U];if(!H.isVisible())continue;let j=U===Q?G:0,V=H.getViewLineCount()-j,W=!1;if(Z+V>$)W=!0,V=$-Z+1;if(H.getViewLinesData(this.model,U+1,j,V,Z-J,X,q),Z+=V,W)break}return q}validateViewPosition(J,$,X){J=this._toValidViewLineNumber(J);let Y=this.projectedModelLineLineCounts.getIndexOf(J-1),Z=Y.index,Q=Y.remainder,G=this.modelLineProjections[Z],q=G.getViewLineMinColumn(this.model,Z+1,Q),U=G.getViewLineMaxColumn(this.model,Z+1,Q);if($<q)$=q;if($>U)$=U;let z=G.getModelColumnOfViewPosition(Q,$);if(this.model.validatePosition(new g(Z+1,z)).equals(X))return new g(J,$);return this.convertModelPositionToViewPosition(X.lineNumber,X.column)}validateViewRange(J,$){let X=this.validateViewPosition(J.startLineNumber,J.startColumn,$.getStartPosition()),Y=this.validateViewPosition(J.endLineNumber,J.endColumn,$.getEndPosition());return new k(X.lineNumber,X.column,Y.lineNumber,Y.column)}convertViewPositionToModelPosition(J,$){let X=this.getViewLineInfo(J),Y=this.modelLineProjections[X.modelLineNumber-1].getModelColumnOfViewPosition(X.modelLineWrappedLineIdx,$);return this.model.validatePosition(new g(X.modelLineNumber,Y))}convertViewRangeToModelRange(J){let $=this.convertViewPositionToModelPosition(J.startLineNumber,J.startColumn),X=this.convertViewPositionToModelPosition(J.endLineNumber,J.endColumn);return new k($.lineNumber,$.column,X.lineNumber,X.column)}convertModelPositionToViewPosition(J,$,X=2,Y=!1,Z=!1){let Q=this.model.validatePosition(new g(J,$)),G=Q.lineNumber,q=Q.column,U=G-1,z=!1;if(Z)while(U<this.modelLineProjections.length&&!this.modelLineProjections[U].isVisible())U++,z=!0;else while(U>0&&!this.modelLineProjections[U].isVisible())U--,z=!0;if(U===0&&!this.modelLineProjections[U].isVisible())return new g(Y?0:1,1);let H=1+this.projectedModelLineLineCounts.getPrefixSum(U),j;if(z)if(Z)j=this.modelLineProjections[U].getViewPositionOfModelPosition(H,1,X);else j=this.modelLineProjections[U].getViewPositionOfModelPosition(H,this.model.getLineMaxColumn(U+1),X);else j=this.modelLineProjections[G-1].getViewPositionOfModelPosition(H,q,X);return j}convertModelRangeToViewRange(J,$=0){if(J.isEmpty()){let X=this.convertModelPositionToViewPosition(J.startLineNumber,J.startColumn,$);return k.fromPositions(X)}else{let X=this.convertModelPositionToViewPosition(J.startLineNumber,J.startColumn,1),Y=this.convertModelPositionToViewPosition(J.endLineNumber,J.endColumn,0);return new k(X.lineNumber,X.column,Y.lineNumber,Y.column)}}getViewLineNumberOfModelPosition(J,$){let X=J-1;if(this.modelLineProjections[X].isVisible()){let Z=1+this.projectedModelLineLineCounts.getPrefixSum(X);return this.modelLineProjections[X].getViewLineNumberOfModelPosition(Z,$)}while(X>0&&!this.modelLineProjections[X].isVisible())X--;if(X===0&&!this.modelLineProjections[X].isVisible())return 1;let Y=1+this.projectedModelLineLineCounts.getPrefixSum(X);return this.modelLineProjections[X].getViewLineNumberOfModelPosition(Y,this.model.getLineMaxColumn(X+1))}getDecorationsInRange(J,$,X,Y,Z){let Q=this.convertViewPositionToModelPosition(J.startLineNumber,J.startColumn),G=this.convertViewPositionToModelPosition(J.endLineNumber,J.endColumn);if(G.lineNumber-Q.lineNumber<=J.endLineNumber-J.startLineNumber)return this.model.getDecorationsInRange(new k(Q.lineNumber,1,G.lineNumber,G.column),$,X,Y,Z);let q=[],U=Q.lineNumber-1,z=G.lineNumber-1,H=null;for(let B=U;B<=z;B++)if(this.modelLineProjections[B].isVisible()){if(H===null)H=new g(B+1,B===U?Q.column:1)}else if(H!==null){let P=this.model.getLineMaxColumn(B);q=q.concat(this.model.getDecorationsInRange(new k(H.lineNumber,H.column,B,P),$,X,Y)),H=null}if(H!==null)q=q.concat(this.model.getDecorationsInRange(new k(H.lineNumber,H.column,G.lineNumber,G.column),$,X,Y)),H=null;q.sort((B,K)=>{let P=k.compareRangesUsingStarts(B.range,K.range);if(P===0){if(B.id<K.id)return-1;if(B.id>K.id)return 1;return 0}return P});let j=[],V=0,W=null;for(let B of q){let K=B.id;if(W===K)continue;W=K,j[V++]=B}return j}getInjectedTextAt(J){let $=this.getViewLineInfo(J.lineNumber);return this.modelLineProjections[$.modelLineNumber-1].getInjectedTextAt($.modelLineWrappedLineIdx,J.column)}normalizePosition(J,$){let X=this.getViewLineInfo(J.lineNumber);return this.modelLineProjections[X.modelLineNumber-1].normalizePosition(X.modelLineWrappedLineIdx,J,$)}getLineIndentColumn(J){let $=this.getViewLineInfo(J);if($.modelLineWrappedLineIdx===0)return this.model.getLineIndentColumn($.modelLineNumber);return 0}}function xQ0(J){if(J.length===0)return[];let $=J.slice();$.sort(k.compareRangesUsingStarts);let X=[],Y=$[0].startLineNumber,Z=$[0].endLineNumber;for(let Q=1,G=$.length;Q<G;Q++){let q=$[Q];if(q.startLineNumber>Z+1)X.push(new k(Y,1,Z,1)),Y=q.startLineNumber,Z=q.endLineNumber;else if(q.endLineNumber>Z)Z=q.endLineNumber}return X.push(new k(Y,1,Z,1)),X}class hI{constructor(J,$){this.modelLineNumber=J,this.modelLineWrappedLineIdx=$}}class fI{constructor(J,$){this.modelRange=J,this.viewLines=$}}class Zi{constructor(J){this._lines=J}convertViewPositionToModelPosition(J){return this._lines.convertViewPositionToModelPosition(J.lineNumber,J.column)}convertViewRangeToModelRange(J){return this._lines.convertViewRangeToModelRange(J)}validateViewPosition(J,$){return this._lines.validateViewPosition(J.lineNumber,J.column,$)}validateViewRange(J,$){return this._lines.validateViewRange(J,$)}convertModelPositionToViewPosition(J,$,X,Y){return this._lines.convertModelPositionToViewPosition(J.lineNumber,J.column,$,X,Y)}convertModelRangeToViewRange(J,$){return this._lines.convertModelRangeToViewRange(J,$)}modelPositionIsVisible(J){return this._lines.modelPositionIsVisible(J.lineNumber,J.column)}getModelLineViewLineCount(J){return this._lines.getModelLineViewLineCount(J)}getViewLineNumberOfModelPosition(J,$){return this._lines.getViewLineNumberOfModelPosition(J,$)}}class pI{constructor(J){this.model=J}dispose(){}createCoordinatesConverter(){return new Qi(this)}getHiddenAreas(){return[]}setHiddenAreas(J){return!1}setTabSize(J){return!1}setWrappingSettings(J,$,X,Y){return!1}createLineBreaksComputer(){let J=[];return{addRequest:($,X,Y)=>{J.push(null)},finalize:()=>{return J}}}onModelFlushed(){}onModelLinesDeleted(J,$,X){return new jW($,X)}onModelLinesInserted(J,$,X,Y){return new VW($,X)}onModelLineChanged(J,$,X){return[!1,new KR($,1),null,null]}acceptVersionId(J){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(J,$,X){return{startLineNumber:J,endLineNumber:J,indent:0}}getViewLinesBracketGuides(J,$,X){return Array($-J+1).fill([])}getViewLinesIndentGuides(J,$){let X=$-J+1,Y=Array(X);for(let Z=0;Z<X;Z++)Y[Z]=0;return Y}getViewLineContent(J){return this.model.getLineContent(J)}getViewLineLength(J){return this.model.getLineLength(J)}getViewLineMinColumn(J){return this.model.getLineMinColumn(J)}getViewLineMaxColumn(J){return this.model.getLineMaxColumn(J)}getViewLineData(J){let $=this.model.tokenization.getLineTokens(J),X=$.getLineContent();return new RU(X,!1,1,X.length+1,0,$.inflate(),null)}getViewLinesData(J,$,X){let Y=this.model.getLineCount();J=Math.min(Math.max(1,J),Y),$=Math.min(Math.max(1,$),Y);let Z=[];for(let Q=J;Q<=$;Q++){let G=Q-J;Z[G]=X[G]?this.getViewLineData(Q):null}return Z}getDecorationsInRange(J,$,X,Y,Z){return this.model.getDecorationsInRange(J,$,X,Y,Z)}normalizePosition(J,$){return this.model.normalizePosition(J,$)}getLineIndentColumn(J){return this.model.getLineIndentColumn(J)}getInjectedTextAt(J){return null}}class Qi{constructor(J){this._lines=J}_validPosition(J){return this._lines.model.validatePosition(J)}_validRange(J){return this._lines.model.validateRange(J)}convertViewPositionToModelPosition(J){return this._validPosition(J)}convertViewRangeToModelRange(J){return this._validRange(J)}validateViewPosition(J,$){return this._validPosition($)}validateViewRange(J,$){return this._validRange($)}convertModelPositionToViewPosition(J){return this._validPosition(J)}convertModelRangeToViewRange(J){return this._validRange(J)}modelPositionIsVisible(J){let $=this._lines.model.getLineCount();if(J.lineNumber<1||J.lineNumber>$)return!1;return!0}getModelLineViewLineCount(J){return 1}getViewLineNumberOfModelPosition(J,$){return J}}var Gi=w(()=>{V1();i0();pD();G2();Yi();Lw();NJ()});class mI{constructor(J){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((J+1)*E3/8))}reset(J){let $=Math.ceil((J+1)*E3/8);if(this.lanes.length<$)this.lanes=new Uint8Array($);else this.lanes.fill(0);this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(J,$,X){if(X)this.persist|=1<<J-1;for(let Y=$.startLineNumber;Y<=$.endLineNumber;Y++){let Z=E3*Y+(J-1);this.lanes[Z>>>3]|=1<<Z%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(Y))}}getLanesAtLine(J){let $=[],X=E3*J;for(let Y=0;Y<E3;Y++){if(this.persist&1<<Y||this.lanes[X>>>3]&1<<X%8)$.push(Y+1);X++}return $.length?$:[S4.Center]}countAtLine(J){let $=E3*J,X=0;for(let Y=0;Y<E3;Y++){if(this.persist&1<<Y||this.lanes[$>>>3]&1<<$%8)X++;$++}return X}}var E3;var qi=w(()=>{O9();E3=S4.Right});class lI{static create(J){let $=J._setTrackedRange(null,new k(1,1,1,1),1);return new lI(J,1,!1,$,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(J,$,X,Y,Z){this._model=J,this._viewLineNumber=$,this._isValid=X,this._modelTrackedRange=Y,this._startLineDelta=Z}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(J,$){let X=J.coordinatesConverter.convertViewPositionToModelPosition(new g($,J.getLineMinColumn($))),Y=J.model._setTrackedRange(this._modelTrackedRange,new k(X.lineNumber,X.column,X.lineNumber,X.column),1),Z=J.viewLayout.getVerticalOffsetForLineNumber($),Q=J.viewLayout.getCurrentScrollTop();this._viewLineNumber=$,this._isValid=!0,this._modelTrackedRange=Y,this._startLineDelta=Q-Z}invalidate(){this._isValid=!1}}class zi{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(J,$,X,Y,Z){let Q=this._asMap[J];if(Q){let G=Q.data,q=G[G.length-3],U=G[G.length-1];if(q===Z&&U+1>=X){if(Y>U)G[G.length-1]=Y;return}G.push(Z,X,Y)}else{let G=new Z3(J,$,[Z,X,Y]);this._asMap[J]=G,this.asArray.push(G)}}}class Hi{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(J,$){let X=this.hiddenAreas.get(J);if(X&&Ui(X,$))return;this.hiddenAreas.set(J,$),this.shouldRecompute=!0}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;let J=Array.from(this.hiddenAreas.values()).reduce(($,X)=>SQ0($,X),[]);if(Ui(this.ranges,J))return this.ranges;return this.ranges=J,this.ranges}}function SQ0(J,$){let X=[],Y=0,Z=0;while(Y<J.length&&Z<$.length){let Q=J[Y],G=$[Z];if(Q.endLineNumber<G.startLineNumber-1)X.push(J[Y++]);else if(G.endLineNumber<Q.startLineNumber-1)X.push($[Z++]);else{let q=Math.min(Q.startLineNumber,G.startLineNumber),U=Math.max(Q.endLineNumber,G.endLineNumber);X.push(new k(q,1,U,1)),Y++,Z++}}while(Y<J.length)X.push(J[Y++]);while(Z<$.length)X.push($[Z++]);return X}function Ui(J,$){if(J.length!==$.length)return!1;for(let X=0;X<J.length;X++)if(!J[X].equalsRange($[X]))return!1;return!0}class uI{constructor(J,$){this.viewportStartModelPosition=J,this.startLineDelta=$}recoverViewportStart(J,$){if(!this.viewportStartModelPosition)return;let X=J.convertModelPositionToViewPosition(this.viewportStartModelPosition),Y=$.getVerticalOffsetForLineNumber(X.lineNumber);$.setScrollPosition({scrollTop:Y+this.startLineDelta},1)}}var bQ0=!0,cI;var ji=w(()=>{V1();e1();T9();z0();L1();X1();O8();cr();IJ();i0();c8();OJ();bI();tr();pk();NJ();Ji();RR();Gi();qi();cI=class cI extends m{constructor(J,$,X,Y,Z,Q,G,q,U){super();if(this.languageConfigurationService=G,this._themeService=q,this._attachedView=U,this.hiddenAreasModel=new Hi,this.previousHiddenAreas=[],this._editorId=J,this._configuration=$,this.model=X,this._eventDispatcher=new MI,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new rQ(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new H6(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=lI.create(this.model),this.glyphLanes=new mI(0),bQ0&&this.model.isTooLargeForTokenization())this._lines=new pI(this.model);else{let z=this._configuration.options,H=z.get(50),j=z.get(137),V=z.get(144),W=z.get(136),B=z.get(128);this._lines=new gI(this._editorId,this.model,Y,Z,H,this.model.getOptions().tabSize,j,V.wrappingColumn,W,B)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new xI(X,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new SI(this._configuration,this.getLineCount(),Q)),this._register(this.viewLayout.onDidScroll((z)=>{if(z.scrollTopChanged)this._handleVisibleLinesChanged();if(z.scrollTopChanged)this._viewportStart.invalidate();this._eventDispatcher.emitSingleViewEvent(new KI(z)),this._eventDispatcher.emitOutgoingEvent(new DR(z.oldScrollWidth,z.oldScrollLeft,z.oldScrollHeight,z.oldScrollTop,z.scrollWidth,z.scrollLeft,z.scrollHeight,z.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange((z)=>{this._eventDispatcher.emitOutgoingEvent(z)})),this._decorations=new CI(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((z)=>{try{let H=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(H,z)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(M3.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new DI)})),this._register(this._themeService.onDidColorThemeChange((z)=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new AI(z))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(J){this._eventDispatcher.addViewEventHandler(J)}removeViewEventHandler(J){this._eventDispatcher.removeViewEventHandler(J)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){let J=this.viewLayout.getLinesViewportData(),$=new k(J.startLineNumber,this.getLineMinColumn(J.startLineNumber),J.endLineNumber,this.getLineMaxColumn(J.endLineNumber));return this._toModelVisibleRanges($)}visibleLinesStabilized(){let J=this.getModelVisibleRanges();this._attachedView.setVisibleLines(J,!0)}_handleVisibleLinesChanged(){let J=this.getModelVisibleRanges();this._attachedView.setVisibleLines(J,!1)}setHasFocus(J){this._hasFocus=J,this._cursor.setHasFocus(J),this._eventDispatcher.emitSingleViewEvent(new BI(J)),this._eventDispatcher.emitOutgoingEvent(new PR(!J,J))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new HI)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new jI)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){let J=new g(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),$=this.coordinatesConverter.convertViewPositionToModelPosition(J);return new uI($,this._viewportStart.startLineDelta)}return new uI(null,0)}_onConfigurationChanged(J,$){let X=this._captureStableViewport(),Y=this._configuration.options,Z=Y.get(50),Q=Y.get(137),G=Y.get(144),q=Y.get(136),U=Y.get(128);if(this._lines.setWrappingSettings(Z,Q,G.wrappingColumn,q,U))J.emitViewEvent(new Fz),J.emitViewEvent(new Kz),J.emitViewEvent(new TZ(null)),this._cursor.onLineMappingChanged(J),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule();if($.hasChanged(90))this._decorations.reset(),J.emitViewEvent(new TZ(null));if($.hasChanged(97))this._decorations.reset(),J.emitViewEvent(new TZ(null));if(J.emitViewEvent(new VI($)),this.viewLayout.onConfigurationChanged($),X.recoverViewportStart(this.coordinatesConverter,this.viewLayout),rQ.shouldRecreate($))this.cursorConfig=new rQ(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText((J)=>{try{let X=this._eventDispatcher.beginEmitViewEvents(),Y=!1,Z=!1,Q=J instanceof _Z?J.rawContentChangedEvent.changes:J.changes,G=J instanceof _Z?J.rawContentChangedEvent.versionId:null,q=this._lines.createLineBreaksComputer();for(let H of Q)switch(H.changeType){case 4:{for(let j=0;j<H.detail.length;j++){let V=H.detail[j],W=H.injectedTexts[j];if(W)W=W.filter((B)=>!B.ownerId||B.ownerId===this._editorId);q.addRequest(V,W,null)}break}case 2:{let j=null;if(H.injectedText)j=H.injectedText.filter((V)=>!V.ownerId||V.ownerId===this._editorId);q.addRequest(H.detail,j,null);break}}let U=q.finalize(),z=new I7(U);for(let H of Q)switch(H.changeType){case 1:{this._lines.onModelFlushed(),X.emitViewEvent(new Fz),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),Y=!0;break}case 3:{let j=this._lines.onModelLinesDeleted(G,H.fromLineNumber,H.toLineNumber);if(j!==null)X.emitViewEvent(j),this.viewLayout.onLinesDeleted(j.fromLineNumber,j.toLineNumber);Y=!0;break}case 4:{let j=z.takeCount(H.detail.length),V=this._lines.onModelLinesInserted(G,H.fromLineNumber,H.toLineNumber,j);if(V!==null)X.emitViewEvent(V),this.viewLayout.onLinesInserted(V.fromLineNumber,V.toLineNumber);Y=!0;break}case 2:{let j=z.dequeue(),[V,W,B,K]=this._lines.onModelLineChanged(G,H.lineNumber,j);if(Z=V,W)X.emitViewEvent(W);if(B)X.emitViewEvent(B),this.viewLayout.onLinesInserted(B.fromLineNumber,B.toLineNumber);if(K)X.emitViewEvent(K),this.viewLayout.onLinesDeleted(K.fromLineNumber,K.toLineNumber);break}case 5:break}if(G!==null)this._lines.acceptVersionId(G);if(this.viewLayout.onHeightMaybeChanged(),!Y&&Z)X.emitViewEvent(new Kz),X.emitViewEvent(new TZ(null)),this._cursor.onLineMappingChanged(X),this._decorations.onLineMappingChanged()}finally{this._eventDispatcher.endEmitViewEvents()}let $=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&$){let X=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(X){let Y=this.coordinatesConverter.convertModelPositionToViewPosition(X.getStartPosition()),Z=this.viewLayout.getVerticalOffsetForLineNumber(Y.lineNumber);this.viewLayout.setScrollPosition({scrollTop:Z+this._viewportStart.startLineDelta},1)}}try{let X=this._eventDispatcher.beginEmitViewEvents();if(J instanceof _Z)X.emitOutgoingEvent(new kI(J.contentChangedEvent));this._cursor.onModelContentChanged(X,J)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens((J)=>{let $=[];for(let X=0,Y=J.ranges.length;X<Y;X++){let Z=J.ranges[X],Q=this.coordinatesConverter.convertModelPositionToViewPosition(new g(Z.fromLineNumber,1)).lineNumber,G=this.coordinatesConverter.convertModelPositionToViewPosition(new g(Z.toLineNumber,this.model.getLineMaxColumn(Z.toLineNumber))).lineNumber;$[X]={fromLineNumber:Q,toLineNumber:G}}this._eventDispatcher.emitSingleViewEvent(new PI($)),this._eventDispatcher.emitOutgoingEvent(new II(J))})),this._register(this.model.onDidChangeLanguageConfiguration((J)=>{this._eventDispatcher.emitSingleViewEvent(new FI),this.cursorConfig=new rQ(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new LI(J))})),this._register(this.model.onDidChangeLanguage((J)=>{this.cursorConfig=new rQ(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new wI(J))})),this._register(this.model.onDidChangeOptions((J)=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let $=this._eventDispatcher.beginEmitViewEvents();$.emitViewEvent(new Fz),$.emitViewEvent(new Kz),$.emitViewEvent(new TZ(null)),this._cursor.onLineMappingChanged($),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new rQ(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new EI(J))})),this._register(this.model.onDidChangeDecorations((J)=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new TZ(J)),this._eventDispatcher.emitOutgoingEvent(new TI(J))}))}setHiddenAreas(J,$){var X;this.hiddenAreasModel.setHiddenAreas($,J);let Y=this.hiddenAreasModel.getMergedRanges();if(Y===this.previousHiddenAreas)return;this.previousHiddenAreas=Y;let Z=this._captureStableViewport(),Q=!1;try{let G=this._eventDispatcher.beginEmitViewEvents();if(Q=this._lines.setHiddenAreas(Y),Q)G.emitViewEvent(new Fz),G.emitViewEvent(new Kz),G.emitViewEvent(new TZ(null)),this._cursor.onLineMappingChanged(G),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged();let q=(X=Z.viewportStartModelPosition)===null||X===void 0?void 0:X.lineNumber;if(!(q&&Y.some((z)=>z.startLineNumber<=q&&q<=z.endLineNumber)))Z.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}if(this._updateConfigurationViewLineCount.schedule(),Q)this._eventDispatcher.emitOutgoingEvent(new _I)}getVisibleRangesPlusViewportAboveBelow(){let J=this._configuration.options.get(143),$=this._configuration.options.get(66),X=Math.max(20,Math.round(J.height/$)),Y=this.viewLayout.getLinesViewportData(),Z=Math.max(1,Y.completelyVisibleStartLineNumber-X),Q=Math.min(this.getLineCount(),Y.completelyVisibleEndLineNumber+X);return this._toModelVisibleRanges(new k(Z,this.getLineMinColumn(Z),Q,this.getLineMaxColumn(Q)))}getVisibleRanges(){let J=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(J)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(J){let $=this.coordinatesConverter.convertViewRangeToModelRange(J),X=this._lines.getHiddenAreas();if(X.length===0)return[$];let Y=[],Z=0,Q=$.startLineNumber,G=$.startColumn,q=$.endLineNumber,U=$.endColumn;for(let z=0,H=X.length;z<H;z++){let j=X[z].startLineNumber,V=X[z].endLineNumber;if(V<Q)continue;if(j>q)continue;if(Q<j)Y[Z++]=new k(Q,G,j-1,this.model.getLineMaxColumn(j-1));Q=V+1,G=1}if(Q<q||Q===q&&G<U)Y[Z++]=new k(Q,G,q,U);return Y}getCompletelyVisibleViewRange(){let J=this.viewLayout.getLinesViewportData(),$=J.completelyVisibleStartLineNumber,X=J.completelyVisibleEndLineNumber;return new k($,this.getLineMinColumn($),X,this.getLineMaxColumn(X))}getCompletelyVisibleViewRangeAtScrollTop(J){let $=this.viewLayout.getLinesViewportDataAtScrollTop(J),X=$.completelyVisibleStartLineNumber,Y=$.completelyVisibleEndLineNumber;return new k(X,this.getLineMinColumn(X),Y,this.getLineMaxColumn(Y))}saveState(){let J=this.viewLayout.saveState(),$=J.scrollTop,X=this.viewLayout.getLineNumberAtVerticalOffset($),Y=this.coordinatesConverter.convertViewPositionToModelPosition(new g(X,this.getLineMinColumn(X))),Z=this.viewLayout.getVerticalOffsetForLineNumber(X)-$;return{scrollLeft:J.scrollLeft,firstPosition:Y,firstPositionDeltaTop:Z}}reduceRestoreState(J){if(typeof J.firstPosition>"u")return this._reduceRestoreStateCompatibility(J);let $=this.model.validatePosition(J.firstPosition),X=this.coordinatesConverter.convertModelPositionToViewPosition($),Y=this.viewLayout.getVerticalOffsetForLineNumber(X.lineNumber)-J.firstPositionDeltaTop;return{scrollLeft:J.scrollLeft,scrollTop:Y}}_reduceRestoreStateCompatibility(J){return{scrollLeft:J.scrollLeft,scrollTop:J.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(J,$,X){this._viewportStart.update(this,J)}getActiveIndentGuide(J,$,X){return this._lines.getActiveIndentGuide(J,$,X)}getLinesIndentGuides(J,$){return this._lines.getViewLinesIndentGuides(J,$)}getBracketGuidesInRangeByLine(J,$,X,Y){return this._lines.getViewLinesBracketGuides(J,$,X,Y)}getLineContent(J){return this._lines.getViewLineContent(J)}getLineLength(J){return this._lines.getViewLineLength(J)}getLineMinColumn(J){return this._lines.getViewLineMinColumn(J)}getLineMaxColumn(J){return this._lines.getViewLineMaxColumn(J)}getLineFirstNonWhitespaceColumn(J){let $=c6(this.getLineContent(J));if($===-1)return 0;return $+1}getLineLastNonWhitespaceColumn(J){let $=r9(this.getLineContent(J));if($===-1)return 0;return $+2}getMinimapDecorationsInRange(J){return this._decorations.getMinimapDecorationsInRange(J)}getDecorationsInViewport(J){return this._decorations.getDecorationsViewportData(J).decorations}getInjectedTextAt(J){return this._lines.getInjectedTextAt(J)}getViewportViewLineRenderingData(J,$){let Y=this._decorations.getDecorationsViewportData(J).inlineDecorations[$-J.startLineNumber];return this._getViewLineRenderingData($,Y)}getViewLineRenderingData(J){let $=this._decorations.getInlineDecorationsOnLine(J);return this._getViewLineRenderingData(J,$)}_getViewLineRenderingData(J,$){let X=this.model.mightContainRTL(),Y=this.model.mightContainNonBasicASCII(),Z=this.getTabSize(),Q=this._lines.getViewLineData(J);if(Q.inlineDecorations)$=[...$,...Q.inlineDecorations.map((G)=>G.toInlineDecoration(J))];return new V7(Q.minColumn,Q.maxColumn,Q.content,Q.continuesWithWrappedLine,X,Y,Q.tokens,$,Z,Q.startVisibleColumn)}getViewLineData(J){return this._lines.getViewLineData(J)}getMinimapLinesRenderingData(J,$,X){let Y=this._lines.getViewLinesData(J,$,X);return new XL(this.getTabSize(),Y)}getAllOverviewRulerDecorations(J){let $=this.model.getOverviewRulerDecorations(this._editorId,VG(this._configuration.options)),X=new zi;for(let Y of $){let Z=Y.options,Q=Z.overviewRuler;if(!Q)continue;let G=Q.position;if(G===0)continue;let q=Q.getColor(J.value),U=this.coordinatesConverter.getViewLineNumberOfModelPosition(Y.range.startLineNumber,Y.range.startColumn),z=this.coordinatesConverter.getViewLineNumberOfModelPosition(Y.range.endLineNumber,Y.range.endColumn);X.accept(q,Z.zIndex,U,z,G)}return X.asArray}_invalidateDecorationsColorCache(){let J=this.model.getOverviewRulerDecorations();for(let $ of J){let X=$.options.overviewRuler;X===null||X===void 0||X.invalidateCachedColor();let Y=$.options.minimap;Y===null||Y===void 0||Y.invalidateCachedColor()}}getValueInRange(J,$){let X=this.coordinatesConverter.convertViewRangeToModelRange(J);return this.model.getValueInRange(X,$)}getValueLengthInRange(J,$){let X=this.coordinatesConverter.convertViewRangeToModelRange(J);return this.model.getValueLengthInRange(X,$)}modifyPosition(J,$){let X=this.coordinatesConverter.convertViewPositionToModelPosition(J),Y=this.model.modifyPosition(X,$);return this.coordinatesConverter.convertModelPositionToViewPosition(Y)}deduceModelPositionRelativeToViewPosition(J,$,X){let Y=this.coordinatesConverter.convertViewPositionToModelPosition(J);if(this.model.getEOL().length===2)if($<0)$-=X;else $+=X;let Q=this.model.getOffsetAt(Y)+$;return this.model.getPositionAt(Q)}getPlainTextToCopy(J,$,X){let Y=X?`\r
`:this.model.getEOL();J=J.slice(0),J.sort(k.compareRangesUsingStarts);let Z=!1,Q=!1;for(let q of J)if(q.isEmpty())Z=!0;else Q=!0;if(!Q){if(!$)return"";let q=J.map((z)=>z.startLineNumber),U="";for(let z=0;z<q.length;z++){if(z>0&&q[z-1]===q[z])continue;U+=this.model.getLineContent(q[z])+Y}return U}if(Z&&$){let q=[],U=0;for(let z of J){let H=z.startLineNumber;if(z.isEmpty()){if(H!==U)q.push(this.model.getLineContent(H))}else q.push(this.model.getValueInRange(z,X?2:0));U=H}return q.length===1?q[0]:q}let G=[];for(let q of J)if(!q.isEmpty())G.push(this.model.getValueInRange(q,X?2:0));return G.length===1?G[0]:G}getRichTextToCopy(J,$){let X=this.model.getLanguageId();if(X===m5)return null;if(J.length!==1)return null;let Y=J[0];if(Y.isEmpty()){if(!$)return null;let z=Y.startLineNumber;Y=new k(z,this.model.getLineMinColumn(z),z,this.model.getLineMaxColumn(z))}let Z=this._configuration.options.get(50),Q=this._getColorMap(),q=/[:;\\\/<>]/.test(Z.fontFamily)||Z.fontFamily===Q7.fontFamily,U;if(q)U=Q7.fontFamily;else{if(U=Z.fontFamily,U=U.replace(/"/g,"'"),!/[,']/.test(U)){if(/[+ ]/.test(U))U=`'${U}'`}U=`${U}, ${Q7.fontFamily}`}return{mode:X,html:`<div style="color: ${Q[1]};background-color: ${Q[2]};font-family: ${U};font-weight: ${Z.fontWeight};font-size: ${Z.fontSize}px;line-height: ${Z.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(Y,Q)+"</div>"}}_getHTMLToCopy(J,$){let{startLineNumber:X,startColumn:Y,endLineNumber:Z,endColumn:Q}=J,G=this.getTabSize(),q="";for(let U=X;U<=Z;U++){let z=this.model.tokenization.getLineTokens(U),H=z.getLineContent(),j=U===X?Y-1:0,V=U===Z?Q-1:H.length;if(H==="")q+="<br>";else q+=ar(H,z.inflate(),$,j,V,G,p6)}return q}_getColorMap(){let J=$6.getColorMap(),$=["#000000"];if(J)for(let X=1,Y=J.length;X<Y;X++)$[X]=n.Format.CSS.formatHex(J[X]);return $}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(J,$,X){return this._withViewEventsCollector((Y)=>this._cursor.setStates(Y,J,$,X))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(J){this._cursor.setCursorColumnSelectData(J)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(J){this._cursor.setPrevEditOperationType(J)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(J,$,X=0){this._withViewEventsCollector((Y)=>this._cursor.setSelections(Y,J,$,X))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(J){this._withViewEventsCollector(($)=>this._cursor.restoreState($,J))}_executeCursorEdit(J){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new NI);return}this._withViewEventsCollector(J)}executeEdits(J,$,X){this._executeCursorEdit((Y)=>this._cursor.executeEdits(Y,J,$,X))}startComposition(){this._executeCursorEdit((J)=>this._cursor.startComposition(J))}endComposition(J){this._executeCursorEdit(($)=>this._cursor.endComposition($,J))}type(J,$){this._executeCursorEdit((X)=>this._cursor.type(X,J,$))}compositionType(J,$,X,Y,Z){this._executeCursorEdit((Q)=>this._cursor.compositionType(Q,J,$,X,Y,Z))}paste(J,$,X,Y){this._executeCursorEdit((Z)=>this._cursor.paste(Z,J,$,X,Y))}cut(J){this._executeCursorEdit(($)=>this._cursor.cut($,J))}executeCommand(J,$){this._executeCursorEdit((X)=>this._cursor.executeCommand(X,J,$))}executeCommands(J,$){this._executeCursorEdit((X)=>this._cursor.executeCommands(X,J,$))}revealPrimaryCursor(J,$,X=!1){this._withViewEventsCollector((Y)=>this._cursor.revealPrimary(Y,J,X,0,$,0))}revealTopMostCursor(J){let $=this._cursor.getTopMostViewPosition(),X=new k($.lineNumber,$.column,$.lineNumber,$.column);this._withViewEventsCollector((Y)=>Y.emitViewEvent(new k3(J,!1,X,null,0,!0,0)))}revealBottomMostCursor(J){let $=this._cursor.getBottomMostViewPosition(),X=new k($.lineNumber,$.column,$.lineNumber,$.column);this._withViewEventsCollector((Y)=>Y.emitViewEvent(new k3(J,!1,X,null,0,!0,0)))}revealRange(J,$,X,Y,Z){this._withViewEventsCollector((Q)=>Q.emitViewEvent(new k3(J,!1,X,null,Y,$,Z)))}changeWhitespace(J){if(this.viewLayout.changeWhitespace(J))this._eventDispatcher.emitSingleViewEvent(new RI),this._eventDispatcher.emitOutgoingEvent(new OI)}_withViewEventsCollector(J){try{let $=this._eventDispatcher.beginEmitViewEvents();return J($)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(J,$){return this._lines.normalizePosition(J,$)}getLineIndentColumn(J){return this._lines.getLineIndentColumn(J)}}});class b${constructor(...J){this._entries=new Map;for(let[$,X]of J)this.set($,X)}set(J,$){let X=this._entries.get(J);return this._entries.set(J,$),X}get(J){return this._entries.get(J)}}var PW,E6;var q2=w(()=>{X1();(function(J){J[J.Ignore=0]="Ignore",J[J.Info=1]="Info",J[J.Warning=2]="Warning",J[J.Error=3]="Error"})(PW||(PW={}));(function(J){function G(U){if(!U)return J.Ignore;if(yY("error",U))return J.Error;if(yY("warning",U)||yY("warn",U))return J.Warning;if(yY("info",U))return J.Info;return J.Ignore}J.fromValue=G;function q(U){switch(U){case J.Error:return"error";case J.Warning:return"warning";case J.Info:return"info";default:return"ignore"}}J.toString=q})(PW||(PW={}));E6=PW});class dI{}var Vi,K8;var wZ=w(()=>{q2();s0();Vi=E6,K8=w0("notificationService")});class U2{constructor(J,$,X,Y,Z){this.injectionOffsets=J,this.injectionOptions=$,this.breakOffsets=X,this.breakOffsetsVisibleColumn=Y,this.wrappedTextIndentLength=Z}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(J){if(J>0)return this.wrappedTextIndentLength;return 0}getLineLength(J){let $=J>0?this.breakOffsets[J-1]:0,Y=this.breakOffsets[J]-$;if(J>0)Y+=this.wrappedTextIndentLength;return Y}getMaxOutputOffset(J){return this.getLineLength(J)}translateToInputOffset(J,$){if(J>0)$=Math.max(0,$-this.wrappedTextIndentLength);let Y=J===0?$:this.breakOffsets[J-1]+$;if(this.injectionOffsets!==null)for(let Z=0;Z<this.injectionOffsets.length;Z++)if(Y>this.injectionOffsets[Z])if(Y<this.injectionOffsets[Z]+this.injectionOptions[Z].content.length)Y=this.injectionOffsets[Z];else Y-=this.injectionOptions[Z].content.length;else break;return Y}translateToOutputPosition(J,$=2){let X=J;if(this.injectionOffsets!==null)for(let Y=0;Y<this.injectionOffsets.length;Y++){if(J<this.injectionOffsets[Y])break;if($!==1&&J===this.injectionOffsets[Y])break;X+=this.injectionOptions[Y].content.length}return this.offsetInInputWithInjectionsToOutputPosition(X,$)}offsetInInputWithInjectionsToOutputPosition(J,$=2){let X=0,Y=this.breakOffsets.length-1,Z=0,Q=0;while(X<=Y){Z=X+(Y-X)/2|0;let q=this.breakOffsets[Z];if(Q=Z>0?this.breakOffsets[Z-1]:0,$===0)if(J<=Q)Y=Z-1;else if(J>q)X=Z+1;else break;else if(J<Q)Y=Z-1;else if(J>=q)X=Z+1;else break}let G=J-Q;if(Z>0)G+=this.wrappedTextIndentLength;return new DW(Z,G)}normalizeOutputPosition(J,$,X){if(this.injectionOffsets!==null){let Y=this.outputPositionToOffsetInInputWithInjections(J,$),Z=this.normalizeOffsetInInputWithInjectionsAroundInjections(Y,X);if(Z!==Y)return this.offsetInInputWithInjectionsToOutputPosition(Z,X)}if(X===0){if(J>0&&$===this.getMinOutputOffset(J))return new DW(J-1,this.getMaxOutputOffset(J-1))}else if(X===1){let Y=this.getOutputLineCount()-1;if(J<Y&&$===this.getMaxOutputOffset(J))return new DW(J+1,this.getMinOutputOffset(J+1))}return new DW(J,$)}outputPositionToOffsetInInputWithInjections(J,$){if(J>0)$=Math.max(0,$-this.wrappedTextIndentLength);return(J>0?this.breakOffsets[J-1]:0)+$}normalizeOffsetInInputWithInjectionsAroundInjections(J,$){let X=this.getInjectedTextAtOffset(J);if(!X)return J;if($===2)if(J===X.offsetInInputWithInjections+X.length&&Wi(this.injectionOptions[X.injectedTextIndex].cursorStops))return X.offsetInInputWithInjections+X.length;else{let Y=X.offsetInInputWithInjections;if(Bi(this.injectionOptions[X.injectedTextIndex].cursorStops))return Y;let Z=X.injectedTextIndex-1;while(Z>=0&&this.injectionOffsets[Z]===this.injectionOffsets[X.injectedTextIndex]){if(Wi(this.injectionOptions[Z].cursorStops))break;if(Y-=this.injectionOptions[Z].content.length,Bi(this.injectionOptions[Z].cursorStops))break;Z--}return Y}else if($===1||$===4){let Y=X.offsetInInputWithInjections+X.length,Z=X.injectedTextIndex;while(Z+1<this.injectionOffsets.length&&this.injectionOffsets[Z+1]===this.injectionOffsets[Z])Y+=this.injectionOptions[Z+1].content.length,Z++;return Y}else if($===0||$===3){let{offsetInInputWithInjections:Y,injectedTextIndex:Z}=X;while(Z-1>=0&&this.injectionOffsets[Z-1]===this.injectionOffsets[Z])Y-=this.injectionOptions[Z-1].content.length,Z--;return Y}nq($)}getInjectedText(J,$){let X=this.outputPositionToOffsetInInputWithInjections(J,$),Y=this.getInjectedTextAtOffset(X);if(!Y)return null;return{options:this.injectionOptions[Y.injectedTextIndex]}}getInjectedTextAtOffset(J){let $=this.injectionOffsets,X=this.injectionOptions;if($!==null){let Y=0;for(let Z=0;Z<$.length;Z++){let Q=X[Z].content.length,G=$[Z]+Y,q=$[Z]+Y+Q;if(G>J)break;if(J<=q)return{injectedTextIndex:Z,offsetInInputWithInjections:G,length:Q};Y+=Q}}return}}function Wi(J){if(J===null||J===void 0)return!0;return J===nG.Right||J===nG.Both}function Bi(J){if(J===null||J===void 0)return!0;return J===nG.Left||J===nG.Both}class DW{constructor(J,$){this.outputLineIndex=J,this.outputOffset=$}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(J){return new g(J+this.outputLineIndex,this.outputOffset+1)}}var sI=w(()=>{WX();O9()});class OR{static create(J){return new OR(J.get(132),J.get(131))}constructor(J,$){this.classifier=new Ki(J,$)}createLineBreaksComputer(J,$,X,Y,Z){let Q=[],G=[],q=[];return{addRequest:(U,z,H)=>{Q.push(U),G.push(z),q.push(H)},finalize:()=>{let U=J.typicalFullwidthCharacterWidth/J.typicalHalfwidthCharacterWidth,z=[];for(let H=0,j=Q.length;H<j;H++){let V=G[H],W=q[H];if(W&&!W.injectionOptions&&!V)z[H]=CQ0(this.classifier,W,Q[H],$,X,U,Y,Z);else z[H]=vQ0(this.classifier,Q[H],V,$,X,U,Y,Z)}return aI.length=0,rI.length=0,z}}}}function CQ0(J,$,X,Y,Z,Q,G,q){if(Z===-1)return null;let U=X.length;if(U<=1)return null;let z=q==="keepAll",H=$.breakOffsets,j=$.breakOffsetsVisibleColumn,V=Ai(X,Y,Z,Q,G),W=Z-V,B=aI,K=rI,P=0,A=0,D=0,M=Z,R=H.length,O=0;if(O>=0){let N=Math.abs(j[O]-M);while(O+1<R){let T=Math.abs(j[O+1]-M);if(T>=N)break;N=T,O++}}while(O<R){let N=O<0?0:H[O],T=O<0?0:j[O];if(A>N)N=A,T=D;let S=0,v=0,l=0,f=0;if(T<=M){let L=T,b=N===0?0:X.charCodeAt(N-1),p=N===0?0:J.get(b),d=!0;for(let s=N;s<U;s++){let c=s,i=X.charCodeAt(s),J0,W0;if(P6(i))s++,J0=0,W0=2;else J0=J.get(i),W0=RW(i,L,Y,Q);if(c>A&&iI(b,p,i,J0,z))S=c,v=L;if(L+=W0,L>M){if(c>A)l=c,f=L-W0;else l=s+1,f=L;if(L-v>W)S=0;d=!1;break}b=i,p=J0}if(d){if(P>0)B[P]=H[H.length-1],K[P]=j[H.length-1],P++;break}}if(S===0){let L=T,b=X.charCodeAt(N),p=J.get(b),d=!1;for(let s=N-1;s>=A;s--){let c=s+1,i=X.charCodeAt(s);if(i===9){d=!0;break}let J0,W0;if(HX(i))s--,J0=0,W0=2;else J0=J.get(i),W0=R4(i)?Q:1;if(L<=M){if(l===0)l=c,f=L;if(L<=M-W)break;if(iI(i,J0,b,p,z)){S=c,v=L;break}}L-=W0,b=i,p=J0}if(S!==0){let s=W-(f-v);if(s<=Y){let c=X.charCodeAt(l),i;if(P6(c))i=2;else i=RW(c,f,Y,Q);if(s-i<0)S=0}}if(d){O--;continue}}if(S===0)S=l,v=f;if(S<=A){let L=X.charCodeAt(A);if(P6(L))S=A+2,v=D+2;else S=A+1,v=D+RW(L,D,Y,Q)}A=S,B[P]=S,D=v,K[P]=v,P++,M=v+W;while(O<0||O<R&&j[O]<v)O++;let h=Math.abs(j[O]-M);while(O+1<R){let L=Math.abs(j[O+1]-M);if(L>=h)break;h=L,O++}}if(P===0)return null;return B.length=P,K.length=P,aI=$.breakOffsets,rI=$.breakOffsetsVisibleColumn,$.breakOffsets=B,$.breakOffsetsVisibleColumn=K,$.wrappedTextIndentLength=V,$}function vQ0(J,$,X,Y,Z,Q,G,q){let U=Z9.applyInjectedText($,X),z,H;if(X&&X.length>0)z=X.map((v)=>v.options),H=X.map((v)=>v.column-1);else z=null,H=null;if(Z===-1){if(!z)return null;return new U2(H,z,[U.length],[],0)}let j=U.length;if(j<=1){if(!z)return null;return new U2(H,z,[U.length],[],0)}let V=q==="keepAll",W=Ai(U,Y,Z,Q,G),B=Z-W,K=[],P=[],A=0,D=0,M=0,R=Z,O=U.charCodeAt(0),N=J.get(O),T=RW(O,0,Y,Q),S=1;if(P6(O))T+=1,O=U.charCodeAt(1),N=J.get(O),S++;for(let v=S;v<j;v++){let l=v,f=U.charCodeAt(v),h,L;if(P6(f))v++,h=0,L=2;else h=J.get(f),L=RW(f,T,Y,Q);if(iI(O,N,f,h,V))D=l,M=T;if(T+=L,T>R){if(D===0||T-M>B)D=l,M=T-L;K[A]=D,P[A]=M,A++,R=M+B,D=0}O=f,N=h}if(A===0&&(!X||X.length===0))return null;return K[A]=j,P[A]=T,new U2(H,z,K,P,W)}function RW(J,$,X,Y){if(J===9)return X-$%X;if(R4(J))return Y;if(J<32)return Y;return 1}function Fi(J,$){return $-J%$}function iI(J,$,X,Y,Z){return X!==32&&($===2&&Y!==2||$!==1&&Y===1||!Z&&$===3&&Y!==2||!Z&&Y===3&&$!==1)}function Ai(J,$,X,Y,Z){let Q=0;if(Z!==0){let G=c6(J);if(G!==-1){for(let U=0;U<G;U++){let z=J.charCodeAt(U)===9?Fi(Q,$):1;Q+=z}let q=Z===3?2:Z===2?1:0;for(let U=0;U<q;U++){let z=Fi(Q,$);Q+=z}if(Q+Y>X)Q=0}}return Q}var Ki,aI,rI;var Pi=w(()=>{X1();zU();sI();Ki=class Ki extends aY{constructor(J,$){super(0);for(let X=0;X<J.length;X++)this.set(J.charCodeAt(X),1);for(let X=0;X<$.length;X++)this.set($.charCodeAt(X),2)}get(J){if(J>=0&&J<256)return this._asciiMap[J];else{if(J>=12352&&J<=12543||J>=13312&&J<=19903||J>=19968&&J<=40959)return 3;return this._map.get(J)||this._defaultValue}}};aI=[],rI=[]});class _R{static create(J){return new _R(new WeakRef(J))}constructor(J){this.targetWindow=J}createLineBreaksComputer(J,$,X,Y,Z){let Q=[],G=[];return{addRequest:(q,U,z)=>{Q.push(q),G.push(U)},finalize:()=>{return hQ0(zK(this.targetWindow.deref()),Q,J,$,X,Y,Z,G)}}}}function hQ0(J,$,X,Y,Z,Q,G,q){var U;function z(l){let f=q[l];if(f){let h=Z9.applyInjectedText($[l],f),L=f.map((p)=>p.options),b=f.map((p)=>p.column-1);return new U2(b,L,[h.length],[],0)}else return null}if(Z===-1){let l=[];for(let f=0,h=$.length;f<h;f++)l[f]=z(f);return l}let H=Math.round(Z*X.typicalHalfwidthCharacterWidth),V=Math.round(Y*(Q===3?2:Q===2?1:0)),W=Math.ceil(X.spaceWidth*V),B=document.createElement("div");S6(B,X);let K=new dY(1e4),P=[],A=[],D=[],M=[],R=[];for(let l=0;l<$.length;l++){let f=Z9.applyInjectedText($[l],q[l]),h=0,L=0,b=H;if(Q!==0)if(h=c6(f),h===-1)h=0;else{for(let c=0;c<h;c++){let i=f.charCodeAt(c)===9?Y-L%Y:1;L+=i}let s=Math.ceil(X.spaceWidth*L);if(s+X.typicalFullwidthCharacterWidth>H)h=0,L=0;else b=H-s}let p=f.substr(h),d=fQ0(p,L,Y,b,K,W);P[l]=h,A[l]=L,D[l]=p,M[l]=d[0],R[l]=d[1]}let O=K.build(),N=(U=nI===null||nI===void 0?void 0:nI.createHTML(O))!==null&&U!==void 0?U:O;if(B.innerHTML=N,B.style.position="absolute",B.style.top="10000",G==="keepAll")B.style.wordBreak="keep-all",B.style.overflowWrap="anywhere";else B.style.wordBreak="inherit",B.style.overflowWrap="break-word";J.document.body.appendChild(B);let T=document.createRange(),S=Array.prototype.slice.call(B.children,0),v=[];for(let l=0;l<$.length;l++){let f=S[l],h=gQ0(T,f,D[l],M[l]);if(h===null){v[l]=z(l);continue}let L=P[l],b=A[l]+V,p=R[l],d=[];for(let J0=0,W0=h.length;J0<W0;J0++)d[J0]=p[h[J0]];if(L!==0)for(let J0=0,W0=h.length;J0<W0;J0++)h[J0]+=L;let s,c,i=q[l];if(i)s=i.map((J0)=>J0.options),c=i.map((J0)=>J0.column-1);else s=null,c=null;v[l]=new U2(c,s,h,d,b)}return J.document.body.removeChild(B),v}function fQ0(J,$,X,Y,Z,Q){if(Q!==0){let V=String(Q);Z.appendString('<div style="text-indent: -'),Z.appendString(V),Z.appendString("px; padding-left: "),Z.appendString(V),Z.appendString("px; box-sizing: border-box; width:")}else Z.appendString('<div style="width:');Z.appendString(String(Y)),Z.appendString('px;">');let G=J.length,q=$,U=0,z=[],H=[],j=0<G?J.charCodeAt(0):0;Z.appendString("<span>");for(let V=0;V<G;V++){if(V!==0&&V%16384===0)Z.appendString("</span><span>");z[V]=U,H[V]=q;let W=j;j=V+1<G?J.charCodeAt(V+1):0;let B=1,K=1;switch(W){case 9:B=X-q%X,K=B;for(let P=1;P<=B;P++)if(P<B)Z.appendCharCode(160);else Z.appendASCIICharCode(32);break;case 32:if(j===32)Z.appendCharCode(160);else Z.appendASCIICharCode(32);break;case 60:Z.appendString("&lt;");break;case 62:Z.appendString("&gt;");break;case 38:Z.appendString("&amp;");break;case 0:Z.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:Z.appendCharCode(65533);break;default:if(R4(W))K++;if(W<32)Z.appendCharCode(9216+W);else Z.appendCharCode(W)}U+=B,q+=K}return Z.appendString("</span>"),z[J.length]=U,H[J.length]=q,Z.appendString("</div>"),[z,H]}function gQ0(J,$,X,Y){if(X.length<=1)return null;let Z=Array.prototype.slice.call($.children,0),Q=[];try{tI(J,Z,Y,0,null,X.length-1,null,Q)}catch(G){return console.log(G),null}if(Q.length===0)return null;return Q.push(X.length),Q}function tI(J,$,X,Y,Z,Q,G,q){if(Y===Q)return;if(Z=Z||oI(J,$,X[Y],X[Y+1]),G=G||oI(J,$,X[Q],X[Q+1]),Math.abs(Z[0].top-G[0].top)<=0.1)return;if(Y+1===Q){q.push(Q);return}let U=Y+(Q-Y)/2|0,z=oI(J,$,X[U],X[U+1]);tI(J,$,X,Y,Z,U,z,q),tI(J,$,X,U,z,Q,G,q)}function oI(J,$,X,Y){return J.setStart($[X/16384|0].firstChild,X%16384),J.setEnd($[Y/16384|0].firstChild,Y%16384),J.getClientRects()}var nI;var Di=w(()=>{kQ();X1();HJ();mG();sI();nI=J4("domLineBreaksComputer",{createHTML:(J)=>J})});var eI;var Ri=w(()=>{T0();O1();z0();eI=class eI extends m{constructor(){super();this._editor=null,this._instantiationService=null,this._instances=this._register(new KG),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(J,$,X){this._editor=J,this._instantiationService=X;for(let Y of $){if(this._pending.has(Y.id)){$1(Error(`Cannot have two contributions with the same id ${Y.id}`));continue}this._pending.set(Y.id,Y)}this._instantiateSome(0),this._register(Sj(O0(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(Sj(O0(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(Sj(O0(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5000))}saveViewState(){let J={};for(let[$,X]of this._instances)if(typeof X.saveViewState==="function")J[$]=X.saveViewState();return J}restoreViewState(J){for(let[$,X]of this._instances)if(typeof X.restoreViewState==="function")X.restoreViewState(J[$])}get(J){return this._instantiateById(J),this._instances.get(J)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var J;this._register(Sj(O0((J=this._editor)===null||J===void 0?void 0:J.getDomNode()),()=>{this._instantiateSome(1)},50))}_instantiateSome(J){if(this._finishedInstantiation[J])return;this._finishedInstantiation[J]=!0;let $=this._findPendingContributionsByInstantiation(J);for(let X of $)this._instantiateById(X.id)}_findPendingContributionsByInstantiation(J){let $=[];for(let[,X]of this._pending)if(X.instantiation===J)$.push(X);return $}_instantiateById(J){let $=this._pending.get(J);if(!$)return;if(this._pending.delete(J),!this._instantiationService||!this._editor)throw Error("Cannot instantiate contributions before being initialized!");try{let X=this._instantiationService.createInstance($.ctor,this._editor);if(this._instances.set($.id,X),typeof X.restoreViewState==="function"&&$.instantiation!==0)console.warn(`Editor contribution '${$.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(X){$1(X)}}}});class Mi{constructor(J,$,X,Y,Z,Q){this.model=J,this.viewModel=$,this.view=X,this.hasRealView=Y,this.listenersToRemove=Z,this.attachedView=Q}dispose(){if(h1(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView)this.view.dispose();this.viewModel.dispose()}}class Ti{get length(){return this._decorationIds.length}constructor(J,$){if(this._editor=J,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray($)&&$.length>0)this.set($)}onDidChange(J,$,X){return this._editor.onDidChangeModelDecorations((Y)=>{if(this._isChangingDecorations)return;J.call($,Y)},X)}getRange(J){if(!this._editor.hasModel())return null;if(J>=this._decorationIds.length)return null;return this._editor.getModel().getDecorationRange(this._decorationIds[J])}getRanges(){if(!this._editor.hasModel())return[];let J=this._editor.getModel(),$=[];for(let X of this._decorationIds){let Y=J.getDecorationRange(X);if(Y)$.push(Y)}return $}has(J){return this._decorationIds.includes(J.id)}clear(){if(this._decorationIds.length===0)return;this.set([])}set(J){try{this._isChangingDecorations=!0,this._editor.changeDecorations(($)=>{this._decorationIds=$.deltaDecorations(this._decorationIds,J)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(J){let $=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((X)=>{$=X.deltaDecorations([],J),this._decorationIds=this._decorationIds.concat($)})}finally{this._isChangingDecorations=!1}return $}}function Jy(J){return uQ0+encodeURIComponent(J.toString())+cQ0}function sQ0(J){return lQ0+encodeURIComponent(J.toString())+dQ0}var pQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},LZ=function(J,$){return function(X,Y){$(X,Y,J)}},I3,mQ0=0,kZ,$y,n8,Oi,_i,Ni,uQ0,cQ0,lQ0,dQ0;var NR=w(()=>{pu();mu();c0();T0();O1();_0();z0();e9();iu();L4();i9();Fa();Ok();O8();LJ();i0();o5();UV();FZ();G2();E$();i8();ji();C7();t1();s0();wZ();G5();P$();Pi();Di();zk();j7();HJ();f4();Ri();BL();kZ=I3=class extends m{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor($,X,Y,Z,Q,G,q,U,z,H,j,V){var W;super();this.languageConfigurationService=j,this._deliveryQueue=Xg(),this._contributions=this._register(new eI),this._onDidDispose=this._register(new x),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new n8(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new $y({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new $y({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new n8(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new n8(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new n8(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new n8(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new n8(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new n8(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new n8(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new n8(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new n8(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new n8(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new x({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),Q.willCreateCodeEditor();let B={...X};this._domElement=$,this._overflowWidgetsDomNode=B.overflowWidgetsDomNode,delete B.overflowWidgetsDomNode,this._id=++mQ0,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=Y.telemetryData,this._configuration=this._register(this._createConfiguration(Y.isSimpleWidget||!1,B,H)),this._register(this._configuration.onDidChange((A)=>{this._onDidChangeConfiguration.fire(A);let D=this._configuration.options;if(A.hasChanged(143)){let M=D.get(143);this._onDidLayoutChange.fire(M)}})),this._contextKeyService=this._register(q.createScoped(this._domElement)),this._notificationService=z,this._codeEditorService=Q,this._commandService=G,this._themeService=U,this._register(new Oi(this,this._contextKeyService)),this._register(new _i(this,this._contextKeyService,V)),this._instantiationService=Z.createChild(new b$([m0,this._contextKeyService])),this._modelData=null,this._focusTracker=new Ni($,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let K;if(Array.isArray(Y.contributions))K=Y.contributions;else K=LQ.getEditorContributions();this._contributions.initialize(this,K,this._instantiationService);for(let A of LQ.getEditorActions()){if(this._actions.has(A.id)){$1(Error(`Cannot have two actions with the same id ${A.id}`));continue}let D=new cV(A.id,A.label,A.alias,A.metadata,(W=A.precondition)!==null&&W!==void 0?W:void 0,(M)=>{return this._instantiationService.invokeFunction((R)=>{return Promise.resolve(A.runEditorCommand(R,this,M))})},this._contextKeyService);this._actions.set(D.id,D)}let P=()=>{return!this._configuration.options.get(90)&&this._configuration.options.get(36).enabled};this._register(new gT(this._domElement,{onDragOver:(A)=>{if(!P())return;let D=this.getTargetAtClientPoint(A.clientX,A.clientY);if(D===null||D===void 0?void 0:D.position)this.showDropIndicatorAt(D.position)},onDrop:async(A)=>{if(!P())return;if(this.removeDropIndicator(),!A.dataTransfer)return;let D=this.getTargetAtClientPoint(A.clientX,A.clientY);if(D===null||D===void 0?void 0:D.position)this._onDropIntoEditor.fire({position:D.position,event:A})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent($){var X;(X=this._modelData)===null||X===void 0||X.view.writeScreenReaderContent($)}_createConfiguration($,X,Y){return new nP($,X,this._domElement,Y)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return vQ.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext($){return this._instantiationService.invokeFunction($)}updateOptions($){this._configuration.updateOptions($||{})}getOptions(){return this._configuration.options}getOption($){return this._configuration.options.get($)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition($){if(!this._modelData)return null;return d6.getWordAtPosition(this._modelData.model,this._configuration.options.get(129),$)}getValue($=null){if(!this._modelData)return"";let X=$&&$.preserveBOM?!0:!1,Y=0;if($&&$.lineEnding&&$.lineEnding===`
`)Y=1;else if($&&$.lineEnding&&$.lineEnding===`\r
`)Y=2;return this._modelData.model.getValue(Y,X)}setValue($){if(!this._modelData)return;this._modelData.model.setValue($)}getModel(){if(!this._modelData)return null;return this._modelData.model}setModel($=null){var X;let Y=$;if(this._modelData===null&&Y===null)return;if(this._modelData&&this._modelData.model===Y)return;let Z={oldModelUrl:((X=this._modelData)===null||X===void 0?void 0:X.model.uri)||null,newModelUrl:(Y===null||Y===void 0?void 0:Y.uri)||null};this._onWillChangeModel.fire(Z);let Q=this.hasTextFocus(),G=this._detachModel();if(this._attachModel(Y),Q&&this.hasModel())this.focus();this._removeDecorationTypes(),this._onDidChangeModel.fire(Z),this._postDetachModelCleanup(G),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let $ in this._decorationTypeSubtypes){let X=this._decorationTypeSubtypes[$];for(let Y in X)this._removeDecorationType($+"-"+Y)}this._decorationTypeSubtypes={}}}getVisibleRanges(){if(!this._modelData)return[];return this._modelData.viewModel.getVisibleRanges()}getVisibleRangesPlusViewportAboveBelow(){if(!this._modelData)return[];return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow()}getWhitespaces(){if(!this._modelData)return[];return this._modelData.viewModel.viewLayout.getWhitespaces()}static _getVerticalOffsetAfterPosition($,X,Y,Z){let Q=$.model.validatePosition({lineNumber:X,column:Y}),G=$.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Q);return $.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(G.lineNumber,Z)}getTopForLineNumber($,X=!1){if(!this._modelData)return-1;return I3._getVerticalOffsetForPosition(this._modelData,$,1,X)}getTopForPosition($,X){if(!this._modelData)return-1;return I3._getVerticalOffsetForPosition(this._modelData,$,X,!1)}static _getVerticalOffsetForPosition($,X,Y,Z=!1){let Q=$.model.validatePosition({lineNumber:X,column:Y}),G=$.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Q);return $.viewModel.viewLayout.getVerticalOffsetForLineNumber(G.lineNumber,Z)}getBottomForLineNumber($,X=!1){if(!this._modelData)return-1;return I3._getVerticalOffsetAfterPosition(this._modelData,$,1,X)}setHiddenAreas($,X){var Y;(Y=this._modelData)===null||Y===void 0||Y.viewModel.setHiddenAreas($.map((Z)=>k.lift(Z)),X)}getVisibleColumnFromPosition($){if(!this._modelData)return $.column;let X=this._modelData.model.validatePosition($),Y=this._modelData.model.getOptions().tabSize;return s1.visibleColumnFromColumn(this._modelData.model.getLineContent(X.lineNumber),X.column,Y)+1}getPosition(){if(!this._modelData)return null;return this._modelData.viewModel.getPosition()}setPosition($,X="api"){if(!this._modelData)return;if(!g.isIPosition($))throw Error("Invalid arguments");this._modelData.viewModel.setSelections(X,[{selectionStartLineNumber:$.lineNumber,selectionStartColumn:$.column,positionLineNumber:$.lineNumber,positionColumn:$.column}])}_sendRevealRange($,X,Y,Z){if(!this._modelData)return;if(!k.isIRange($))throw Error("Invalid arguments");let Q=this._modelData.model.validateRange($),G=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(Q);this._modelData.viewModel.revealRange("api",Y,G,X,Z)}revealLine($,X=0){this._revealLine($,0,X)}revealLineInCenter($,X=0){this._revealLine($,1,X)}revealLineInCenterIfOutsideViewport($,X=0){this._revealLine($,2,X)}revealLineNearTop($,X=0){this._revealLine($,5,X)}_revealLine($,X,Y){if(typeof $!=="number")throw Error("Invalid arguments");this._sendRevealRange(new k($,1,$,1),X,!1,Y)}revealPosition($,X=0){this._revealPosition($,0,!0,X)}revealPositionInCenter($,X=0){this._revealPosition($,1,!0,X)}revealPositionInCenterIfOutsideViewport($,X=0){this._revealPosition($,2,!0,X)}revealPositionNearTop($,X=0){this._revealPosition($,5,!0,X)}_revealPosition($,X,Y,Z){if(!g.isIPosition($))throw Error("Invalid arguments");this._sendRevealRange(new k($.lineNumber,$.column,$.lineNumber,$.column),X,Y,Z)}getSelection(){if(!this._modelData)return null;return this._modelData.viewModel.getSelection()}getSelections(){if(!this._modelData)return null;return this._modelData.viewModel.getSelections()}setSelection($,X="api"){let Y=p0.isISelection($),Z=k.isIRange($);if(!Y&&!Z)throw Error("Invalid arguments");if(Y)this._setSelectionImpl($,X);else if(Z){let Q={selectionStartLineNumber:$.startLineNumber,selectionStartColumn:$.startColumn,positionLineNumber:$.endLineNumber,positionColumn:$.endColumn};this._setSelectionImpl(Q,X)}}_setSelectionImpl($,X){if(!this._modelData)return;let Y=new p0($.selectionStartLineNumber,$.selectionStartColumn,$.positionLineNumber,$.positionColumn);this._modelData.viewModel.setSelections(X,[Y])}revealLines($,X,Y=0){this._revealLines($,X,0,Y)}revealLinesInCenter($,X,Y=0){this._revealLines($,X,1,Y)}revealLinesInCenterIfOutsideViewport($,X,Y=0){this._revealLines($,X,2,Y)}revealLinesNearTop($,X,Y=0){this._revealLines($,X,5,Y)}_revealLines($,X,Y,Z){if(typeof $!=="number"||typeof X!=="number")throw Error("Invalid arguments");this._sendRevealRange(new k($,1,X,1),Y,!1,Z)}revealRange($,X=0,Y=!1,Z=!0){this._revealRange($,Y?1:0,Z,X)}revealRangeInCenter($,X=0){this._revealRange($,1,!0,X)}revealRangeInCenterIfOutsideViewport($,X=0){this._revealRange($,2,!0,X)}revealRangeNearTop($,X=0){this._revealRange($,5,!0,X)}revealRangeNearTopIfOutsideViewport($,X=0){this._revealRange($,6,!0,X)}revealRangeAtTop($,X=0){this._revealRange($,3,!0,X)}_revealRange($,X,Y,Z){if(!k.isIRange($))throw Error("Invalid arguments");this._sendRevealRange(k.lift($),X,Y,Z)}setSelections($,X="api",Y=0){if(!this._modelData)return;if(!$||$.length===0)throw Error("Invalid arguments");for(let Z=0,Q=$.length;Z<Q;Z++)if(!p0.isISelection($[Z]))throw Error("Invalid arguments");this._modelData.viewModel.setSelections(X,$,Y)}getContentWidth(){if(!this._modelData)return-1;return this._modelData.viewModel.viewLayout.getContentWidth()}getScrollWidth(){if(!this._modelData)return-1;return this._modelData.viewModel.viewLayout.getScrollWidth()}getScrollLeft(){if(!this._modelData)return-1;return this._modelData.viewModel.viewLayout.getCurrentScrollLeft()}getContentHeight(){if(!this._modelData)return-1;return this._modelData.viewModel.viewLayout.getContentHeight()}getScrollHeight(){if(!this._modelData)return-1;return this._modelData.viewModel.viewLayout.getScrollHeight()}getScrollTop(){if(!this._modelData)return-1;return this._modelData.viewModel.viewLayout.getCurrentScrollTop()}setScrollLeft($,X=1){if(!this._modelData)return;if(typeof $!=="number")throw Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:$},X)}setScrollTop($,X=1){if(!this._modelData)return;if(typeof $!=="number")throw Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:$},X)}setScrollPosition($,X=1){if(!this._modelData)return;this._modelData.viewModel.viewLayout.setScrollPosition($,X)}hasPendingScrollAnimation(){if(!this._modelData)return!1;return this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;let $=this._contributions.saveViewState(),X=this._modelData.viewModel.saveCursorState(),Y=this._modelData.viewModel.saveState();return{cursorState:X,viewState:Y,contributionsState:$}}restoreViewState($){if(!this._modelData||!this._modelData.hasRealView)return;let X=$;if(X&&X.cursorState&&X.viewState){let Y=X.cursorState;if(Array.isArray(Y)){if(Y.length>0)this._modelData.viewModel.restoreCursorState(Y)}else this._modelData.viewModel.restoreCursorState([Y]);this._contributions.restoreViewState(X.contributionsState||{});let Z=this._modelData.viewModel.reduceRestoreState(X.viewState);this._modelData.view.restoreState(Z)}}handleInitialized(){var $;($=this._getViewModel())===null||$===void 0||$.visibleLinesStabilized()}getContribution($){return this._contributions.get($)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let $=this.getActions();return $=$.filter((X)=>X.isSupported()),$}getAction($){return this._actions.get($)||null}trigger($,X,Y){switch(Y=Y||{},X){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition($);return;case"type":{let Q=Y;this._type($,Q.text||"");return}case"replacePreviousChar":{let Q=Y;this._compositionType($,Q.text||"",Q.replaceCharCnt||0,0,0);return}case"compositionType":{let Q=Y;this._compositionType($,Q.text||"",Q.replacePrevCharCnt||0,Q.replaceNextCharCnt||0,Q.positionDelta||0);return}case"paste":{let Q=Y;this._paste($,Q.text||"",Q.pasteOnNewLine||!1,Q.multicursorText||null,Q.mode||null);return}case"cut":this._cut($);return}let Z=this.getAction(X);if(Z){Promise.resolve(Z.run(Y)).then(void 0,$1);return}if(!this._modelData)return;if(this._triggerEditorCommand($,X,Y))return;this._triggerCommand(X,Y)}_triggerCommand($,X){this._commandService.executeCommand($,X)}_startComposition(){if(!this._modelData)return;this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire()}_endComposition($){if(!this._modelData)return;this._modelData.viewModel.endComposition($),this._onDidCompositionEnd.fire()}_type($,X){if(!this._modelData||X.length===0)return;if($==="keyboard")this._onWillType.fire(X);if(this._modelData.viewModel.type(X,$),$==="keyboard")this._onDidType.fire(X)}_compositionType($,X,Y,Z,Q){if(!this._modelData)return;this._modelData.viewModel.compositionType(X,Y,Z,Q,$)}_paste($,X,Y,Z,Q){if(!this._modelData||X.length===0)return;let G=this._modelData.viewModel,q=G.getSelection().getStartPosition();G.paste(X,Y,Z,$);let U=G.getSelection().getStartPosition();if($==="keyboard")this._onDidPaste.fire({range:new k(q.lineNumber,q.column,U.lineNumber,U.column),languageId:Q})}_cut($){if(!this._modelData)return;this._modelData.viewModel.cut($)}_triggerEditorCommand($,X,Y){let Z=LQ.getEditorCommand(X);if(Z)return Y=Y||{},Y.source=$,this._instantiationService.invokeFunction((Q)=>{Promise.resolve(Z.runEditorCommand(Q,this,Y)).then(void 0,$1)}),!0;return!1}_getViewModel(){if(!this._modelData)return null;return this._modelData.viewModel}pushUndoStop(){if(!this._modelData)return!1;if(this._configuration.options.get(90))return!1;return this._modelData.model.pushStackElement(),!0}popUndoStop(){if(!this._modelData)return!1;if(this._configuration.options.get(90))return!1;return this._modelData.model.popStackElement(),!0}executeEdits($,X,Y){if(!this._modelData)return!1;if(this._configuration.options.get(90))return!1;let Z;if(!Y)Z=()=>null;else if(Array.isArray(Y))Z=()=>Y;else Z=Y;return this._modelData.viewModel.executeEdits($,X,Z),!0}executeCommand($,X){if(!this._modelData)return;this._modelData.viewModel.executeCommand(X,$)}executeCommands($,X){if(!this._modelData)return;this._modelData.viewModel.executeCommands(X,$)}createDecorationsCollection($){return new Ti(this,$)}changeDecorations($){if(!this._modelData)return null;return this._modelData.model.changeDecorations($,this._id)}getLineDecorations($){if(!this._modelData)return null;return this._modelData.model.getLineDecorations($,this._id,VG(this._configuration.options))}getDecorationsInRange($){if(!this._modelData)return null;return this._modelData.model.getDecorationsInRange($,this._id,VG(this._configuration.options))}deltaDecorations($,X){if(!this._modelData)return[];if($.length===0&&X.length===0)return $;return this._modelData.model.deltaDecorations($,X,this._id)}removeDecorations($){if(!this._modelData||$.length===0)return;this._modelData.model.changeDecorations((X)=>{X.deltaDecorations($,[])})}removeDecorationsByType($){let X=this._decorationTypeKeysToIds[$];if(X)this.deltaDecorations(X,[]);if(this._decorationTypeKeysToIds.hasOwnProperty($))delete this._decorationTypeKeysToIds[$];if(this._decorationTypeSubtypes.hasOwnProperty($))delete this._decorationTypeSubtypes[$]}getLayoutInfo(){return this._configuration.options.get(143)}createOverviewRuler($){if(!this._modelData||!this._modelData.hasRealView)return null;return this._modelData.view.createOverviewRuler($)}getContainerDomNode(){return this._domElement}getDomNode(){if(!this._modelData||!this._modelData.hasRealView)return null;return this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown($){if(!this._modelData||!this._modelData.hasRealView)return;this._modelData.view.delegateVerticalScrollbarPointerDown($)}delegateScrollFromMouseWheelEvent($){if(!this._modelData||!this._modelData.hasRealView)return;this._modelData.view.delegateScrollFromMouseWheelEvent($)}layout($,X=!1){if(this._configuration.observeContainer($),!X)this.render()}focus(){if(!this._modelData||!this._modelData.hasRealView)return;this._modelData.view.focus()}hasTextFocus(){if(!this._modelData||!this._modelData.hasRealView)return!1;return this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget($){let X={widget:$,position:$.getPosition()};if(this._contentWidgets.hasOwnProperty($.getId()))console.warn("Overwriting a content widget with the same id:"+$.getId());if(this._contentWidgets[$.getId()]=X,this._modelData&&this._modelData.hasRealView)this._modelData.view.addContentWidget(X)}layoutContentWidget($){let X=$.getId();if(this._contentWidgets.hasOwnProperty(X)){let Y=this._contentWidgets[X];if(Y.position=$.getPosition(),this._modelData&&this._modelData.hasRealView)this._modelData.view.layoutContentWidget(Y)}}removeContentWidget($){let X=$.getId();if(this._contentWidgets.hasOwnProperty(X)){let Y=this._contentWidgets[X];if(delete this._contentWidgets[X],this._modelData&&this._modelData.hasRealView)this._modelData.view.removeContentWidget(Y)}}addOverlayWidget($){let X={widget:$,position:$.getPosition()};if(this._overlayWidgets.hasOwnProperty($.getId()))console.warn("Overwriting an overlay widget with the same id.");if(this._overlayWidgets[$.getId()]=X,this._modelData&&this._modelData.hasRealView)this._modelData.view.addOverlayWidget(X)}layoutOverlayWidget($){let X=$.getId();if(this._overlayWidgets.hasOwnProperty(X)){let Y=this._overlayWidgets[X];if(Y.position=$.getPosition(),this._modelData&&this._modelData.hasRealView)this._modelData.view.layoutOverlayWidget(Y)}}removeOverlayWidget($){let X=$.getId();if(this._overlayWidgets.hasOwnProperty(X)){let Y=this._overlayWidgets[X];if(delete this._overlayWidgets[X],this._modelData&&this._modelData.hasRealView)this._modelData.view.removeOverlayWidget(Y)}}addGlyphMarginWidget($){let X={widget:$,position:$.getPosition()};if(this._glyphMarginWidgets.hasOwnProperty($.getId()))console.warn("Overwriting a glyph margin widget with the same id.");if(this._glyphMarginWidgets[$.getId()]=X,this._modelData&&this._modelData.hasRealView)this._modelData.view.addGlyphMarginWidget(X)}layoutGlyphMarginWidget($){let X=$.getId();if(this._glyphMarginWidgets.hasOwnProperty(X)){let Y=this._glyphMarginWidgets[X];if(Y.position=$.getPosition(),this._modelData&&this._modelData.hasRealView)this._modelData.view.layoutGlyphMarginWidget(Y)}}removeGlyphMarginWidget($){let X=$.getId();if(this._glyphMarginWidgets.hasOwnProperty(X)){let Y=this._glyphMarginWidgets[X];if(delete this._glyphMarginWidgets[X],this._modelData&&this._modelData.hasRealView)this._modelData.view.removeGlyphMarginWidget(Y)}}changeViewZones($){if(!this._modelData||!this._modelData.hasRealView)return;this._modelData.view.change($)}getTargetAtClientPoint($,X){if(!this._modelData||!this._modelData.hasRealView)return null;return this._modelData.view.getTargetAtClientPoint($,X)}getScrolledVisiblePosition($){if(!this._modelData||!this._modelData.hasRealView)return null;let X=this._modelData.model.validatePosition($),Y=this._configuration.options,Z=Y.get(143),Q=I3._getVerticalOffsetForPosition(this._modelData,X.lineNumber,X.column)-this.getScrollTop(),G=this._modelData.view.getOffsetForColumn(X.lineNumber,X.column)+Z.glyphMarginWidth+Z.lineNumbersWidth+Z.decorationsWidth-this.getScrollLeft();return{top:Q,left:G,height:Y.get(66)}}getOffsetForColumn($,X){if(!this._modelData||!this._modelData.hasRealView)return-1;return this._modelData.view.getOffsetForColumn($,X)}render($=!1){if(!this._modelData||!this._modelData.hasRealView)return;this._modelData.view.render(!0,$)}setAriaOptions($){if(!this._modelData||!this._modelData.hasRealView)return;this._modelData.view.setAriaOptions($)}applyFontInfo($){S6($,this._configuration.options.get(50))}setBanner($,X){if(this._bannerDomNode&&this._domElement.contains(this._bannerDomNode))this._domElement.removeChild(this._bannerDomNode);if(this._bannerDomNode=$,this._configuration.setReservedHeight($?X:0),this._bannerDomNode)this._domElement.prepend(this._bannerDomNode)}_attachModel($){if(!$){this._modelData=null;return}let X=[];this._domElement.setAttribute("data-mode-id",$.getLanguageId()),this._configuration.setIsDominatedByLongLines($.isDominatedByLongLines()),this._configuration.setModelLineCount($.getLineCount());let Y=$.onBeforeAttached(),Z=new cI(this._id,this._configuration,$,_R.create(O0(this._domElement)),OR.create(this._configuration.options),(q)=>f5(O0(this._domElement),q),this.languageConfigurationService,this._themeService,Y);X.push($.onWillDispose(()=>this.setModel(null))),X.push(Z.onEvent((q)=>{switch(q.kind){case 0:this._onDidContentSizeChange.fire(q);break;case 1:this._editorTextFocus.setValue(q.hasFocus);break;case 2:this._onDidScrollChange.fire(q);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(q.reachedMaxCursorCount){let j=this.getOption(79),V=F("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",j);this._notificationService.prompt(Vi.Warning,V,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:F("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}let U=[];for(let j=0,V=q.selections.length;j<V;j++)U[j]=q.selections[j].getPosition();let z={position:U[0],secondaryPositions:U.slice(1),reason:q.reason,source:q.source};this._onDidChangeCursorPosition.fire(z);let H={selection:q.selections[0],secondarySelections:q.selections.slice(1),modelVersionId:q.modelVersionId,oldSelections:q.oldSelections,oldModelVersionId:q.oldModelVersionId,source:q.source,reason:q.reason};this._onDidChangeCursorSelection.fire(H);break}case 7:this._onDidChangeModelDecorations.fire(q.event);break;case 8:this._domElement.setAttribute("data-mode-id",$.getLanguageId()),this._onDidChangeModelLanguage.fire(q.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(q.event);break;case 10:this._onDidChangeModelContent.fire(q.event);break;case 11:this._onDidChangeModelOptions.fire(q.event);break;case 12:this._onDidChangeModelTokens.fire(q.event);break}}));let[Q,G]=this._createView(Z);if(G){this._domElement.appendChild(Q.domNode.domNode);let q=Object.keys(this._contentWidgets);for(let U=0,z=q.length;U<z;U++){let H=q[U];Q.addContentWidget(this._contentWidgets[H])}q=Object.keys(this._overlayWidgets);for(let U=0,z=q.length;U<z;U++){let H=q[U];Q.addOverlayWidget(this._overlayWidgets[H])}q=Object.keys(this._glyphMarginWidgets);for(let U=0,z=q.length;U<z;U++){let H=q[U];Q.addGlyphMarginWidget(this._glyphMarginWidgets[H])}Q.render(!1,!0),Q.domNode.domNode.setAttribute("data-uri",$.uri.toString())}this._modelData=new Mi($,Z,Q,G,X,Y)}_createView($){let X;if(this.isSimpleWidget)X={paste:(Q,G,q,U)=>{this._paste("keyboard",Q,G,q,U)},type:(Q)=>{this._type("keyboard",Q)},compositionType:(Q,G,q,U)=>{this._compositionType("keyboard",Q,G,q,U)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}};else X={paste:(Q,G,q,U)=>{let z={text:Q,pasteOnNewLine:G,multicursorText:q,mode:U};this._commandService.executeCommand("paste",z)},type:(Q)=>{let G={text:Q};this._commandService.executeCommand("type",G)},compositionType:(Q,G,q,U)=>{if(q||U){let z={text:Q,replacePrevCharCnt:G,replaceNextCharCnt:q,positionDelta:U};this._commandService.executeCommand("compositionType",z)}else{let z={text:Q,replaceCharCnt:G};this._commandService.executeCommand("replacePreviousChar",z)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let Y=new oU($.coordinatesConverter);return Y.onKeyDown=(Q)=>this._onKeyDown.fire(Q),Y.onKeyUp=(Q)=>this._onKeyUp.fire(Q),Y.onContextMenu=(Q)=>this._onContextMenu.fire(Q),Y.onMouseMove=(Q)=>this._onMouseMove.fire(Q),Y.onMouseLeave=(Q)=>this._onMouseLeave.fire(Q),Y.onMouseDown=(Q)=>this._onMouseDown.fire(Q),Y.onMouseUp=(Q)=>this._onMouseUp.fire(Q),Y.onMouseDrag=(Q)=>this._onMouseDrag.fire(Q),Y.onMouseDrop=(Q)=>this._onMouseDrop.fire(Q),Y.onMouseDropCanceled=(Q)=>this._onMouseDropCanceled.fire(Q),Y.onMouseWheel=(Q)=>this._onMouseWheel.fire(Q),[new sD(X,this._configuration,this._themeService.getColorTheme(),$,Y,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup($){$===null||$===void 0||$.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;let $=this._modelData.model,X=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;if(this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),X&&this._domElement.contains(X))this._domElement.removeChild(X);if(this._bannerDomNode&&this._domElement.contains(this._bannerDomNode))this._domElement.removeChild(this._bannerDomNode);return $}_removeDecorationType($){this._codeEditorService.removeDecorationType($)}hasModel(){return this._modelData!==null}showDropIndicatorAt($){let X=[{range:new k($.lineNumber,$.column,$.lineNumber,$.column),options:I3.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(X),this.revealPosition($,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue($,X){this._contextKeyService.createKey($,X)}};kZ.dropIntoEditorDecorationOptions=C1.register({description:"workbench-dnd-target",className:"dnd-target"});kZ=I3=pQ0([LZ(3,l0),LZ(4,X6),LZ(5,y5),LZ(6,m0),LZ(7,Q5),LZ(8,K8),LZ(9,a8),LZ(10,C6),LZ(11,D1)],kZ);$y=class $y extends m{constructor(J){super();this._emitterOptions=J,this._onDidChangeToTrue=this._register(new x(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new x(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(J){let $=J?2:1;if(this._value===$)return;if(this._value=$,this._value===2)this._onDidChangeToTrue.fire();else if(this._value===1)this._onDidChangeToFalse.fire()}};n8=class n8 extends x{constructor(J,$){super({deliveryQueue:$});this._contributions=J}fire(J){this._contributions.onBeforeInteractionEvent(),super.fire(J)}};Oi=class Oi extends m{constructor(J,$){super();this._editor=J,$.createKey("editorId",J.getId()),this._editorSimpleInput=Z0.editorSimpleInput.bindTo($),this._editorFocus=Z0.focus.bindTo($),this._textInputFocus=Z0.textInputFocus.bindTo($),this._editorTextFocus=Z0.editorTextFocus.bindTo($),this._tabMovesFocus=Z0.tabMovesFocus.bindTo($),this._editorReadonly=Z0.readOnly.bindTo($),this._inDiffEditor=Z0.inDiffEditor.bindTo($),this._editorColumnSelection=Z0.columnSelection.bindTo($),this._hasMultipleSelections=Z0.hasMultipleSelections.bindTo($),this._hasNonEmptySelection=Z0.hasNonEmptySelection.bindTo($),this._canUndo=Z0.canUndo.bindTo($),this._canRedo=Z0.canRedo.bindTo($),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(TU.onDidChangeTabFocus((X)=>this._tabMovesFocus.set(X))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let J=this._editor.getOptions();this._tabMovesFocus.set(TU.getTabFocusMode()),this._editorReadonly.set(J.get(90)),this._inDiffEditor.set(J.get(61)),this._editorColumnSelection.set(J.get(22))}_updateFromSelection(){let J=this._editor.getSelections();if(!J)this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset();else this._hasMultipleSelections.set(J.length>1),this._hasNonEmptySelection.set(J.some(($)=>!$.isEmpty()))}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let J=this._editor.getModel();this._canUndo.set(Boolean(J&&J.canUndo())),this._canRedo.set(Boolean(J&&J.canRedo()))}};_i=class _i extends m{constructor(J,$,X){super();this._editor=J,this._contextKeyService=$,this._languageFeaturesService=X,this._langId=Z0.languageId.bindTo($),this._hasCompletionItemProvider=Z0.hasCompletionItemProvider.bindTo($),this._hasCodeActionsProvider=Z0.hasCodeActionsProvider.bindTo($),this._hasCodeLensProvider=Z0.hasCodeLensProvider.bindTo($),this._hasDefinitionProvider=Z0.hasDefinitionProvider.bindTo($),this._hasDeclarationProvider=Z0.hasDeclarationProvider.bindTo($),this._hasImplementationProvider=Z0.hasImplementationProvider.bindTo($),this._hasTypeDefinitionProvider=Z0.hasTypeDefinitionProvider.bindTo($),this._hasHoverProvider=Z0.hasHoverProvider.bindTo($),this._hasDocumentHighlightProvider=Z0.hasDocumentHighlightProvider.bindTo($),this._hasDocumentSymbolProvider=Z0.hasDocumentSymbolProvider.bindTo($),this._hasReferenceProvider=Z0.hasReferenceProvider.bindTo($),this._hasRenameProvider=Z0.hasRenameProvider.bindTo($),this._hasSignatureHelpProvider=Z0.hasSignatureHelpProvider.bindTo($),this._hasInlayHintsProvider=Z0.hasInlayHintsProvider.bindTo($),this._hasDocumentFormattingProvider=Z0.hasDocumentFormattingProvider.bindTo($),this._hasDocumentSelectionFormattingProvider=Z0.hasDocumentSelectionFormattingProvider.bindTo($),this._hasMultipleDocumentFormattingProvider=Z0.hasMultipleDocumentFormattingProvider.bindTo($),this._hasMultipleDocumentSelectionFormattingProvider=Z0.hasMultipleDocumentSelectionFormattingProvider.bindTo($),this._isInWalkThrough=Z0.isInWalkThroughSnippet.bindTo($);let Y=()=>this._update();this._register(J.onDidChangeModel(Y)),this._register(J.onDidChangeModelLanguage(Y)),this._register(X.completionProvider.onDidChange(Y)),this._register(X.codeActionProvider.onDidChange(Y)),this._register(X.codeLensProvider.onDidChange(Y)),this._register(X.definitionProvider.onDidChange(Y)),this._register(X.declarationProvider.onDidChange(Y)),this._register(X.implementationProvider.onDidChange(Y)),this._register(X.typeDefinitionProvider.onDidChange(Y)),this._register(X.hoverProvider.onDidChange(Y)),this._register(X.documentHighlightProvider.onDidChange(Y)),this._register(X.documentSymbolProvider.onDidChange(Y)),this._register(X.referenceProvider.onDidChange(Y)),this._register(X.renameProvider.onDidChange(Y)),this._register(X.documentFormattingEditProvider.onDidChange(Y)),this._register(X.documentRangeFormattingEditProvider.onDidChange(Y)),this._register(X.signatureHelpProvider.onDidChange(Y)),this._register(X.inlayHintsProvider.onDidChange(Y)),Y()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){let J=this._editor.getModel();if(!J){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(J.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(J)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(J)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(J)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(J)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(J)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(J)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(J)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(J)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(J)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(J)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(J)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(J)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(J)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(J)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(J)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(J)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(J)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(J).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(J).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(J).length>1),this._isInWalkThrough.set(J.uri.scheme===G1.walkThroughSnippet)})}};Ni=class Ni extends m{constructor(J,$){super();if(this._onChange=this._register(new x),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(lY(J)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),$)this._overflowWidgetsDomNode=this._register(lY($)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()}))}_update(){let J=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;if(this._hadFocus!==J)this._hadFocus=J,this._onChange.fire(void 0)}hasFocus(){var J;return(J=this._hadFocus)!==null&&J!==void 0?J:!1}};uQ0=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),cQ0=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");lQ0=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),dQ0=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');F7((J,$)=>{let X=J.getColor(LX);if(X)$.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Jy(X)}") repeat-x bottom left; }`);let Y=J.getColor(r8);if(Y)$.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Jy(Y)}") repeat-x bottom left; }`);let Z=J.getColor(k9);if(Z)$.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Jy(Z)}") repeat-x bottom left; }`);let Q=J.getColor(xc);if(Q)$.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${sQ0(Q)}") no-repeat bottom left; }`);let G=J.getColor(Ld);if(G)$.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${G.rgba.a}; }`)})});var aQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},rQ0=function(J,$){return function(X,Y){$(X,Y,J)}},TR;var wi=w(()=>{_0();z0();D4();G5();TR=class extends m{constructor($){super();this._themeService=$,this._onWillCreateCodeEditor=this._register(new x),this._onCodeEditorAdd=this._register(new x),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new x),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new x),this._onDiffEditorAdd=this._register(new x),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new x),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new m6,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor($){this._codeEditors[$.getId()]=$,this._onCodeEditorAdd.fire($)}removeCodeEditor($){if(delete this._codeEditors[$.getId()])this._onCodeEditorRemove.fire($)}listCodeEditors(){return Object.keys(this._codeEditors).map(($)=>this._codeEditors[$])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor($){this._diffEditors[$.getId()]=$,this._onDiffEditorAdd.fire($)}listDiffEditors(){return Object.keys(this._diffEditors).map(($)=>this._diffEditors[$])}getFocusedCodeEditor(){let $=null,X=this.listCodeEditors();for(let Y of X){if(Y.hasTextFocus())return Y;if(Y.hasWidgetFocus())$=Y}return $}removeDecorationType($){let X=this._decorationOptionProviders.get($);if(X){if(X.refCount--,X.refCount<=0)this._decorationOptionProviders.delete($),X.dispose(),this.listCodeEditors().forEach((Y)=>Y.removeDecorationsByType($))}}setModelProperty($,X,Y){let Z=$.toString(),Q;if(this._modelProperties.has(Z))Q=this._modelProperties.get(Z);else Q=new Map,this._modelProperties.set(Z,Q);Q.set(X,Y)}getModelProperty($,X){let Y=$.toString();if(this._modelProperties.has(Y))return this._modelProperties.get(Y).get(X);return}async openCodeEditor($,X,Y){for(let Z of this._codeEditorOpenHandlers){let Q=await Z($,X,Y);if(Q!==null)return Q}return null}registerCodeEditorOpenHandler($){let X=this._codeEditorOpenHandlers.unshift($);return N0(X)}};TR=aQ0([rQ0(0,Q5)],TR)});var iQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Li=function(J,$){return function(X,Y){$(X,Y,J)}},MW;var Xy=w(()=>{T0();e9();wi();i9();t1();y4();G5();MW=class extends TR{constructor($,X){super(X);this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=$.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(Y,Z,Q)=>{if(!Z)return null;return this.doOpenEditor(Z,Y)}))}_checkContextKey(){let $=!1;for(let X of this.listCodeEditors())if(!X.isSimpleWidget){$=!0;break}this._editorIsOpen.set($)}setActiveCodeEditor($){this._activeCodeEditor=$}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor($,X){if(!this.findModel($,X.resource)){if(X.resource){let Q=X.resource.scheme;if(Q===G1.http||Q===G1.https)return VP(X.resource.toString()),$}return null}let Z=X.options?X.options.selection:null;if(Z)if(typeof Z.endLineNumber==="number"&&typeof Z.endColumn==="number")$.setSelection(Z),$.revealRangeInCenter(Z,1);else{let Q={lineNumber:Z.startLineNumber,column:Z.startColumn};$.setPosition(Q),$.revealPositionInCenter(Q,1)}return $}findModel($,X){let Y=$.getModel();if(Y&&Y.uri.toString()!==X.toString())return null;return Y}};MW=iQ0([Li(0,m0),Li(1,Q5)],MW);B1(X6,MW,0)});var G4;var z2=w(()=>{s0();G4=w0("layoutService")});var ki=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Ei=function(J,$){return function(X,Y){$(X,Y,J)}},wR=class{get mainContainer(){var $,X;return(X=($=Eq(this._codeEditorService.listCodeEditors()))===null||$===void 0?void 0:$.getContainerDomNode())!==null&&X!==void 0?X:W1.document.body}get activeContainer(){var $,X;let Y=($=this._codeEditorService.getFocusedCodeEditor())!==null&&$!==void 0?$:this._codeEditorService.getActiveCodeEditor();return(X=Y===null||Y===void 0?void 0:Y.getContainerDomNode())!==null&&X!==void 0?X:this.mainContainer}get mainContainerDimension(){return AX(this.mainContainer)}get activeContainerDimension(){return AX(this.activeContainer)}get containers(){return QK(this._codeEditorService.listCodeEditors().map(($)=>$.getContainerDomNode()))}getContainer(){return this.activeContainer}focus(){var $;($=this._codeEditorService.getFocusedCodeEditor())===null||$===void 0||$.focus()}constructor($){this._codeEditorService=$,this.onDidLayoutMainContainer=q0.None,this.onDidLayoutActiveContainer=q0.None,this.onDidLayoutContainer=q0.None,this.onDidChangeActiveContainer=q0.None,this.onDidAddContainer=q0.None,this.whenActiveContainerStylesLoaded=Promise.resolve(),this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}},LR;var Yy=w(()=>{T0();N8();V1();_0();i9();y4();z2();wR=ki([Ei(0,X6)],wR);LR=class extends wR{get mainContainer(){return this._container}constructor($,X){super(X);this._container=$}};LR=ki([Ei(1,X6)],LR);B1(G4,wR,1)});var kR;var Zy=w(()=>{s0();kR=w0("dialogService")});function ER(J){return J.scheme===G1.file?J.fsPath:J.path}class OW{constructor(J,$,X,Y,Z,Q,G){this.id=++yi,this.type=0,this.actual=J,this.label=J.label,this.confirmBeforeUndo=J.confirmBeforeUndo||!1,this.resourceLabel=$,this.strResource=X,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=Y,this.groupOrder=Z,this.sourceId=Q,this.sourceOrder=G,this.isValid=!0}setValid(J){this.isValid=J}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Qy{constructor(J,$){this.resourceLabel=J,this.reason=$}}class Gy{constructor(){this.elements=new Map}createMessage(){let J=[],$=[];for(let[,Y]of this.elements)(Y.reason===0?J:$).push(Y.resourceLabel);let X=[];if(J.length>0)X.push(F({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",J.join(", ")));if($.length>0)X.push(F({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",$.join(", ")));return X.join(`
`)}get size(){return this.elements.size}has(J){return this.elements.has(J)}set(J,$){this.elements.set(J,$)}delete(J){return this.elements.delete(J)}}class xi{constructor(J,$,X,Y,Z,Q,G){this.id=++yi,this.type=1,this.actual=J,this.label=J.label,this.confirmBeforeUndo=J.confirmBeforeUndo||!1,this.resourceLabels=$,this.strResources=X,this.groupId=Y,this.groupOrder=Z,this.sourceId=Q,this.sourceOrder=G,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split==="function"}removeResource(J,$,X){if(!this.removedResources)this.removedResources=new Gy;if(!this.removedResources.has($))this.removedResources.set($,new Qy(J,X))}setValid(J,$,X){if(X){if(this.invalidatedResources){if(this.invalidatedResources.delete($),this.invalidatedResources.size===0)this.invalidatedResources=null}}else{if(!this.invalidatedResources)this.invalidatedResources=new Gy;if(!this.invalidatedResources.has($))this.invalidatedResources.set($,new Qy(J,0))}}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Uy{constructor(J,$){this.resourceLabel=J,this.strResource=$,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let J of this._past)if(J.type===1)J.removeResource(this.resourceLabel,this.strResource,0);for(let J of this._future)if(J.type===1)J.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let J=[];J.push(`* ${this.strResource}:`);for(let $=0;$<this._past.length;$++)J.push(`   * [UNDO] ${this._past[$]}`);for(let $=this._future.length-1;$>=0;$--)J.push(`   * [REDO] ${this._future[$]}`);return J.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(J,$){if(J.type===1)J.setValid(this.resourceLabel,this.strResource,$);else J.setValid($)}setElementsValidFlag(J,$){for(let X of this._past)if($(X.actual))this._setElementValidFlag(X,J);for(let X of this._future)if($(X.actual))this._setElementValidFlag(X,J)}pushElement(J){for(let $ of this._future)if($.type===1)$.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(J),this.versionId++}createSnapshot(J){let $=[];for(let X=0,Y=this._past.length;X<Y;X++)$.push(this._past[X].id);for(let X=this._future.length-1;X>=0;X--)$.push(this._future[X].id);return new HR(J,$)}restoreSnapshot(J){let $=J.elements.length,X=!0,Y=0,Z=-1;for(let G=0,q=this._past.length;G<q;G++,Y++){let U=this._past[G];if(X&&(Y>=$||U.id!==J.elements[Y]))X=!1,Z=0;if(!X&&U.type===1)U.removeResource(this.resourceLabel,this.strResource,0)}let Q=-1;for(let G=this._future.length-1;G>=0;G--,Y++){let q=this._future[G];if(X&&(Y>=$||q.id!==J.elements[Y]))X=!1,Q=G;if(!X&&q.type===1)q.removeResource(this.resourceLabel,this.strResource,0)}if(Z!==-1)this._past=this._past.slice(0,Z);if(Q!==-1)this._future=this._future.slice(Q+1);this.versionId++}getElements(){let J=[],$=[];for(let X of this._past)J.push(X.actual);for(let X of this._future)$.push(X.actual);return{past:J,future:$}}getClosestPastElement(){if(this._past.length===0)return null;return this._past[this._past.length-1]}getSecondClosestPastElement(){if(this._past.length<2)return null;return this._past[this._past.length-2]}getClosestFutureElement(){if(this._future.length===0)return null;return this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(J,$){for(let X=this._past.length-1;X>=0;X--)if(this._past[X]===J){if($.has(this.strResource))this._past[X]=$.get(this.strResource);else this._past.splice(X,1);break}this.versionId++}splitFutureWorkspaceElement(J,$){for(let X=this._future.length-1;X>=0;X--)if(this._future[X]===J){if($.has(this.strResource))this._future[X]=$.get(this.strResource);else this._future.splice(X,1);break}this.versionId++}moveBackward(J){this._past.pop(),this._future.push(J),this.versionId++}moveForward(J){this._future.pop(),this._past.push(J),this.versionId++}}class IR{constructor(J){this.editStacks=J,this._versionIds=[];for(let $=0,X=this.editStacks.length;$<X;$++)this._versionIds[$]=this.editStacks[$].versionId}isValid(){for(let J=0,$=this.editStacks.length;J<$;J++)if(this._versionIds[J]!==this.editStacks[J].versionId)return!1;return!0}}class _W{constructor(J){this.returnValue=J}}var nQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Ii=function(J,$){return function(X,Y){$(X,Y,J)}},Dz=!1,yi=0,bi,qy=class{constructor($,X){this._dialogService=$,this._notificationService=X,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey($){for(let X of this._uriComparisonKeyComputers)if(X[0]===$.scheme)return X[1].getComparisonKey($);return $.toString()}_print($){console.log("------------------------------------"),console.log(`AFTER ${$}: `);let X=[];for(let Y of this._editStacks)X.push(Y[1].toString());console.log(X.join(`
`))}pushElement($,X=w3.None,Y=x$.None){if($.type===0){let Z=ER($.resource),Q=this.getUriComparisonKey($.resource);this._pushElement(new OW($,Z,Q,X.id,X.nextOrder(),Y.id,Y.nextOrder()))}else{let Z=new Set,Q=[],G=[];for(let q of $.resources){let U=ER(q),z=this.getUriComparisonKey(q);if(Z.has(z))continue;Z.add(z),Q.push(U),G.push(z)}if(Q.length===1)this._pushElement(new OW($,Q[0],G[0],X.id,X.nextOrder(),Y.id,Y.nextOrder()));else this._pushElement(new xi($,Q,G,X.id,X.nextOrder(),Y.id,Y.nextOrder()))}if(Dz)this._print("pushElement")}_pushElement($){for(let X=0,Y=$.strResources.length;X<Y;X++){let Z=$.resourceLabels[X],Q=$.strResources[X],G;if(this._editStacks.has(Q))G=this._editStacks.get(Q);else G=new Uy(Z,Q),this._editStacks.set(Q,G);G.pushElement($)}}getLastElement($){let X=this.getUriComparisonKey($);if(this._editStacks.has(X)){let Y=this._editStacks.get(X);if(Y.hasFutureElements())return null;let Z=Y.getClosestPastElement();return Z?Z.actual:null}return null}_splitPastWorkspaceElement($,X){let Y=$.actual.split(),Z=new Map;for(let Q of Y){let G=ER(Q.resource),q=this.getUriComparisonKey(Q.resource),U=new OW(Q,G,q,0,0,0,0);Z.set(U.strResource,U)}for(let Q of $.strResources){if(X&&X.has(Q))continue;this._editStacks.get(Q).splitPastWorkspaceElement($,Z)}}_splitFutureWorkspaceElement($,X){let Y=$.actual.split(),Z=new Map;for(let Q of Y){let G=ER(Q.resource),q=this.getUriComparisonKey(Q.resource),U=new OW(Q,G,q,0,0,0,0);Z.set(U.strResource,U)}for(let Q of $.strResources){if(X&&X.has(Q))continue;this._editStacks.get(Q).splitFutureWorkspaceElement($,Z)}}removeElements($){let X=typeof $==="string"?$:this.getUriComparisonKey($);if(this._editStacks.has(X))this._editStacks.get(X).dispose(),this._editStacks.delete(X);if(Dz)this._print("removeElements")}setElementsValidFlag($,X,Y){let Z=this.getUriComparisonKey($);if(this._editStacks.has(Z))this._editStacks.get(Z).setElementsValidFlag(X,Y);if(Dz)this._print("setElementsValidFlag")}createSnapshot($){let X=this.getUriComparisonKey($);if(this._editStacks.has(X))return this._editStacks.get(X).createSnapshot($);return new HR($,[])}restoreSnapshot($){let X=this.getUriComparisonKey($.resource);if(this._editStacks.has(X)){let Y=this._editStacks.get(X);if(Y.restoreSnapshot($),!Y.hasPastElements()&&!Y.hasFutureElements())Y.dispose(),this._editStacks.delete(X)}if(Dz)this._print("restoreSnapshot")}getElements($){let X=this.getUriComparisonKey($);if(this._editStacks.has(X))return this._editStacks.get(X).getElements();return{past:[],future:[]}}_findClosestUndoElementWithSource($){if(!$)return[null,null];let X=null,Y=null;for(let[Z,Q]of this._editStacks){let G=Q.getClosestPastElement();if(!G)continue;if(G.sourceId===$){if(!X||G.sourceOrder>X.sourceOrder)X=G,Y=Z}}return[X,Y]}canUndo($){if($ instanceof x$){let[,Y]=this._findClosestUndoElementWithSource($.id);return Y?!0:!1}let X=this.getUriComparisonKey($);if(this._editStacks.has(X))return this._editStacks.get(X).hasPastElements();return!1}_onError($,X){$1($);for(let Y of X.strResources)this.removeElements(Y);this._notificationService.error($)}_acquireLocks($){for(let X of $.editStacks)if(X.locked)throw Error("Cannot acquire edit stack lock");for(let X of $.editStacks)X.locked=!0;return()=>{for(let X of $.editStacks)X.locked=!1}}_safeInvokeWithLocks($,X,Y,Z,Q){let G=this._acquireLocks(Y),q;try{q=X()}catch(U){return G(),Z.dispose(),this._onError(U,$)}if(q)return q.then(()=>{return G(),Z.dispose(),Q()},(U)=>{return G(),Z.dispose(),this._onError(U,$)});else return G(),Z.dispose(),Q()}async _invokeWorkspacePrepare($){if(typeof $.actual.prepareUndoRedo>"u")return m.None;let X=$.actual.prepareUndoRedo();if(typeof X>"u")return m.None;return X}_invokeResourcePrepare($,X){if($.actual.type!==1||typeof $.actual.prepareUndoRedo>"u")return X(m.None);let Y=$.actual.prepareUndoRedo();if(!Y)return X(m.None);if(PK(Y))return X(Y);return Y.then((Z)=>{return X(Z)})}_getAffectedEditStacks($){let X=[];for(let Y of $.strResources)X.push(this._editStacks.get(Y)||bi);return new IR(X)}_tryToSplitAndUndo($,X,Y,Z){if(X.canSplit())return this._splitPastWorkspaceElement(X,Y),this._notificationService.warn(Z),new _W(this._undo($,0,!0));else{for(let Q of X.strResources)this.removeElements(Q);return this._notificationService.warn(Z),new _W}}_checkWorkspaceUndo($,X,Y,Z){if(X.removedResources)return this._tryToSplitAndUndo($,X,X.removedResources,F({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",X.label,X.removedResources.createMessage()));if(Z&&X.invalidatedResources)return this._tryToSplitAndUndo($,X,X.invalidatedResources,F({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",X.label,X.invalidatedResources.createMessage()));let Q=[];for(let q of Y.editStacks)if(q.getClosestPastElement()!==X)Q.push(q.resourceLabel);if(Q.length>0)return this._tryToSplitAndUndo($,X,null,F({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",X.label,Q.join(", ")));let G=[];for(let q of Y.editStacks)if(q.locked)G.push(q.resourceLabel);if(G.length>0)return this._tryToSplitAndUndo($,X,null,F({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",X.label,G.join(", ")));if(!Y.isValid())return this._tryToSplitAndUndo($,X,null,F({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",X.label));return null}_workspaceUndo($,X,Y){let Z=this._getAffectedEditStacks(X),Q=this._checkWorkspaceUndo($,X,Z,!1);if(Q)return Q.returnValue;return this._confirmAndExecuteWorkspaceUndo($,X,Z,Y)}_isPartOfUndoGroup($){if(!$.groupId)return!1;for(let[,X]of this._editStacks){let Y=X.getClosestPastElement();if(!Y)continue;if(Y===$){let Z=X.getSecondClosestPastElement();if(Z&&Z.groupId===$.groupId)return!0}if(Y.groupId===$.groupId)return!0}return!1}async _confirmAndExecuteWorkspaceUndo($,X,Y,Z){if(X.canSplit()&&!this._isPartOfUndoGroup(X)){let q;(function(H){H[H.All=0]="All",H[H.This=1]="This",H[H.Cancel=2]="Cancel"})(q||(q={}));let{result:U}=await this._dialogService.prompt({type:E6.Info,message:F("confirmWorkspace","Would you like to undo '{0}' across all files?",X.label),buttons:[{label:F({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",Y.editStacks.length),run:()=>q.All},{label:F({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>q.This}],cancelButton:{run:()=>q.Cancel}});if(U===q.Cancel)return;if(U===q.This)return this._splitPastWorkspaceElement(X,null),this._undo($,0,!0);let z=this._checkWorkspaceUndo($,X,Y,!1);if(z)return z.returnValue;Z=!0}let Q;try{Q=await this._invokeWorkspacePrepare(X)}catch(q){return this._onError(q,X)}let G=this._checkWorkspaceUndo($,X,Y,!0);if(G)return Q.dispose(),G.returnValue;for(let q of Y.editStacks)q.moveBackward(X);return this._safeInvokeWithLocks(X,()=>X.actual.undo(),Y,Q,()=>this._continueUndoInGroup(X.groupId,Z))}_resourceUndo($,X,Y){if(!X.isValid){$.flushAllElements();return}if($.locked){let Z=F({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",X.label);this._notificationService.warn(Z);return}return this._invokeResourcePrepare(X,(Z)=>{return $.moveBackward(X),this._safeInvokeWithLocks(X,()=>X.actual.undo(),new IR([$]),Z,()=>this._continueUndoInGroup(X.groupId,Y))})}_findClosestUndoElementInGroup($){if(!$)return[null,null];let X=null,Y=null;for(let[Z,Q]of this._editStacks){let G=Q.getClosestPastElement();if(!G)continue;if(G.groupId===$){if(!X||G.groupOrder>X.groupOrder)X=G,Y=Z}}return[X,Y]}_continueUndoInGroup($,X){if(!$)return;let[,Y]=this._findClosestUndoElementInGroup($);if(Y)return this._undo(Y,0,X)}undo($){if($ instanceof x$){let[,X]=this._findClosestUndoElementWithSource($.id);return X?this._undo(X,$.id,!1):void 0}if(typeof $==="string")return this._undo($,0,!1);return this._undo(this.getUriComparisonKey($),0,!1)}_undo($,X=0,Y){if(!this._editStacks.has($))return;let Z=this._editStacks.get($),Q=Z.getClosestPastElement();if(!Q)return;if(Q.groupId){let[q,U]=this._findClosestUndoElementInGroup(Q.groupId);if(Q!==q&&U)return this._undo(U,X,Y)}if((Q.sourceId!==X||Q.confirmBeforeUndo)&&!Y)return this._confirmAndContinueUndo($,X,Q);try{if(Q.type===1)return this._workspaceUndo($,Q,Y);else return this._resourceUndo(Z,Q,Y)}finally{if(Dz)this._print("undo")}}async _confirmAndContinueUndo($,X,Y){if(!(await this._dialogService.confirm({message:F("confirmDifferentSource","Would you like to undo '{0}'?",Y.label),primaryButton:F({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:F("confirmDifferentSource.no","No")})).confirmed)return;return this._undo($,X,!0)}_findClosestRedoElementWithSource($){if(!$)return[null,null];let X=null,Y=null;for(let[Z,Q]of this._editStacks){let G=Q.getClosestFutureElement();if(!G)continue;if(G.sourceId===$){if(!X||G.sourceOrder<X.sourceOrder)X=G,Y=Z}}return[X,Y]}canRedo($){if($ instanceof x$){let[,Y]=this._findClosestRedoElementWithSource($.id);return Y?!0:!1}let X=this.getUriComparisonKey($);if(this._editStacks.has(X))return this._editStacks.get(X).hasFutureElements();return!1}_tryToSplitAndRedo($,X,Y,Z){if(X.canSplit())return this._splitFutureWorkspaceElement(X,Y),this._notificationService.warn(Z),new _W(this._redo($));else{for(let Q of X.strResources)this.removeElements(Q);return this._notificationService.warn(Z),new _W}}_checkWorkspaceRedo($,X,Y,Z){if(X.removedResources)return this._tryToSplitAndRedo($,X,X.removedResources,F({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",X.label,X.removedResources.createMessage()));if(Z&&X.invalidatedResources)return this._tryToSplitAndRedo($,X,X.invalidatedResources,F({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",X.label,X.invalidatedResources.createMessage()));let Q=[];for(let q of Y.editStacks)if(q.getClosestFutureElement()!==X)Q.push(q.resourceLabel);if(Q.length>0)return this._tryToSplitAndRedo($,X,null,F({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",X.label,Q.join(", ")));let G=[];for(let q of Y.editStacks)if(q.locked)G.push(q.resourceLabel);if(G.length>0)return this._tryToSplitAndRedo($,X,null,F({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",X.label,G.join(", ")));if(!Y.isValid())return this._tryToSplitAndRedo($,X,null,F({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",X.label));return null}_workspaceRedo($,X){let Y=this._getAffectedEditStacks(X),Z=this._checkWorkspaceRedo($,X,Y,!1);if(Z)return Z.returnValue;return this._executeWorkspaceRedo($,X,Y)}async _executeWorkspaceRedo($,X,Y){let Z;try{Z=await this._invokeWorkspacePrepare(X)}catch(G){return this._onError(G,X)}let Q=this._checkWorkspaceRedo($,X,Y,!0);if(Q)return Z.dispose(),Q.returnValue;for(let G of Y.editStacks)G.moveForward(X);return this._safeInvokeWithLocks(X,()=>X.actual.redo(),Y,Z,()=>this._continueRedoInGroup(X.groupId))}_resourceRedo($,X){if(!X.isValid){$.flushAllElements();return}if($.locked){let Y=F({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",X.label);this._notificationService.warn(Y);return}return this._invokeResourcePrepare(X,(Y)=>{return $.moveForward(X),this._safeInvokeWithLocks(X,()=>X.actual.redo(),new IR([$]),Y,()=>this._continueRedoInGroup(X.groupId))})}_findClosestRedoElementInGroup($){if(!$)return[null,null];let X=null,Y=null;for(let[Z,Q]of this._editStacks){let G=Q.getClosestFutureElement();if(!G)continue;if(G.groupId===$){if(!X||G.groupOrder<X.groupOrder)X=G,Y=Z}}return[X,Y]}_continueRedoInGroup($){if(!$)return;let[,X]=this._findClosestRedoElementInGroup($);if(X)return this._redo(X)}redo($){if($ instanceof x$){let[,X]=this._findClosestRedoElementWithSource($.id);return X?this._redo(X):void 0}if(typeof $==="string")return this._redo($);return this._redo(this.getUriComparisonKey($))}_redo($){if(!this._editStacks.has($))return;let X=this._editStacks.get($),Y=X.getClosestFutureElement();if(!Y)return;if(Y.groupId){let[Z,Q]=this._findClosestRedoElementInGroup(Y.groupId);if(Y!==Z&&Q)return this._redo(Q)}try{if(Y.type===1)return this._workspaceRedo($,Y);else return this._resourceRedo(X,Y)}finally{if(Dz)this._print("redo")}}};var Si=w(()=>{O1();z0();e9();q2();c0();Zy();y4();wZ();jR();bi=new Uy("","");bi.locked=!0;qy=nQ0([Ii(0,kR),Ii(1,K8)],qy);B1(Bz,qy,1)});function A8(J,$,X){return Math.min(Math.max(J,$),X)}class yR{constructor(){this._n=1,this._val=0}update(J){return this._val=this._val+(J-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class zy{constructor(J){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=Array(J),this._values.fill(0,0,J)}update(J){let $=this._values[this._index];if(this._values[this._index]=J,this._index=(this._index+1)%this._values.length,this._sum-=$,this._sum+=J,this._n<this._values.length)this._n+=1;return this._val=this._sum/this._n,this._val}get value(){return this._val}}var Rz;var xR=w(()=>{s0();Rz=w0("environmentService")});class vi{constructor(J){this._default=J}get(J){return this._default}update(J,$){return this._default}default(){return this._default}}class hi{constructor(J,$,X,Y,Z,Q){this._logService=J,this._name=$,this._registry=X,this._default=Y,this._min=Z,this._max=Q,this._cache=new tY(50,0.7)}_key(J){return J.id+this._registry.all(J).reduce(($,X)=>yj(bR.of(X),$),0)}get(J){let $=this._key(J),X=this._cache.get($);return X?A8(X.value,this._min,this._max):this.default()}update(J,$){let X=this._key(J),Y=this._cache.get(X);if(!Y)Y=new zy(6),this._cache.set(X,Y);let Z=A8(Y.update($),this._min,this._max);if(!Ej(J.uri,"output"))this._logService.trace(`[DEBOUNCE: ${this._name}] for ${J.uri.toString()} is ${Z}ms`);return Z}_overall(){let J=new yR;for(let[,$]of this._cache)J.update($.value);return J.value}default(){let J=this._overall()|0||this._default;return A8(J,this._min,this._max)}}var oQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Ci=function(J,$){return function(X,Y){$(X,Y,J)}},jy,bR,Hy=class{constructor($,X){this._logService=$,this._data=new Map,this._isDev=X.isExtensionDevelopment||!X.isBuilt}for($,X,Y){var Z,Q,G;let q=(Z=Y===null||Y===void 0?void 0:Y.min)!==null&&Z!==void 0?Z:50,U=(Q=Y===null||Y===void 0?void 0:Y.max)!==null&&Q!==void 0?Q:q**2,z=(G=Y===null||Y===void 0?void 0:Y.key)!==null&&G!==void 0?G:void 0,H=`${bR.of($)},${q}${z?","+z:""}`,j=this._data.get(H);if(!j){if(!this._isDev)this._logService.debug(`[DEBOUNCE: ${X}] is disabled in developed mode`),j=new vi(q*1.5);else j=new hi(this._logService,X,$,this._overallAverage()|0||q*1.5,q,U);this._data.set(H,j)}return j}_overallAverage(){let $=new yR;for(let X of this._data.values())$.update(X.default());return $.value}};var Vy=w(()=>{wQ();F$();xR();y4();s0();o9();e9();jy=w0("ILanguageFeatureDebounceService");(function(J){let $=new WeakMap,X=0;function Y(Z){let Q=$.get(Z);if(Q===void 0)Q=++X,$.set(Z,Q);return Q}J.of=Y})(bR||(bR={}));Hy=oQ0([Ci(0,P5),Ci(1,Rz)],Hy);B1(jy,Hy,1)});var fi=w(()=>{i0()});class gi{constructor(J,$,X,Y){this.tokenTypeIndex=J,this.tokenModifierSet=$,this.languageId=X,this.metadata=Y,this.next=null}}class EZ{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=EZ._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<EZ._SIZES.length?0.6666666666666666*this._currentLength:0),this._elements=[],EZ._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(J,$){for(let X=0;X<$;X++)J[X]=null}_hash2(J,$){return(J<<5)-J+$|0}_hashFunc(J,$,X){return this._hash2(this._hash2(J,$),X)%this._currentLength}get(J,$,X){let Y=this._hashFunc(J,$,X),Z=this._elements[Y];while(Z){if(Z.tokenTypeIndex===J&&Z.tokenModifierSet===$&&Z.languageId===X)return Z;Z=Z.next}return null}add(J,$,X,Y){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){let Z=this._elements;this._currentLengthIndex++,this._currentLength=EZ._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<EZ._SIZES.length?0.6666666666666666*this._currentLength:0),this._elements=[],EZ._nullOutEntries(this._elements,this._currentLength);for(let Q of Z){let G=Q;while(G){let q=G.next;G.next=null,this._add(G),G=q}}}this._add(new gi(J,$,X,Y))}_add(J){let $=this._hashFunc(J.tokenTypeIndex,J.tokenModifierSet,J.languageId);J.next=this._elements[$],this._elements[$]=J}}var tQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Wy=function(J,$){return function(X,Y){$(X,Y,J)}},SR=class{constructor($,X,Y,Z){this._legend=$,this._themeService=X,this._languageService=Y,this._logService=Z,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new EZ}getMetadata($,X,Y){let Z=this._languageService.languageIdCodec.encodeLanguageId(Y),Q=this._hashTable.get($,X,Z),G;if(Q){if(G=Q.metadata,this._logService.getLevel()===z8.Trace)this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${$} / ${X}: foreground ${j8.getForeground(G)}, fontStyle ${j8.getFontStyle(G).toString(2)}`)}else{let q=this._legend.tokenTypes[$],U=[];if(q){let z=X;for(let j=0;z>0&&j<this._legend.tokenModifiers.length;j++){if(z&1)U.push(this._legend.tokenModifiers[j]);z=z>>1}if(z>0&&this._logService.getLevel()===z8.Trace)this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${X.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),U.push("not-in-legend");let H=this._themeService.getColorTheme().getTokenStyleMetadata(q,U,Y);if(typeof H>"u")G=2147483647;else{if(G=0,typeof H.italic<"u"){let j=(H.italic?1:0)<<11;G|=j|1}if(typeof H.bold<"u"){let j=(H.bold?2:0)<<11;G|=j|2}if(typeof H.underline<"u"){let j=(H.underline?4:0)<<11;G|=j|4}if(typeof H.strikethrough<"u"){let j=(H.strikethrough?8:0)<<11;G|=j|8}if(H.foreground){let j=H.foreground<<15;G|=j|16}if(G===0)G=2147483647}}else{if(this._logService.getLevel()===z8.Trace)this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${$} for legend: ${JSON.stringify(this._legend.tokenTypes)}`);G=2147483647,q="not-in-legend"}if(this._hashTable.add($,X,Z,G),this._logService.getLevel()===z8.Trace)this._logService.trace(`SemanticTokensProviderStyling ${$} (${q}) / ${X} (${U.join(" ")}): foreground ${j8.getForeground(G)}, fontStyle ${j8.getFontStyle(G).toString(2)}`)}return G}warnOverlappingSemanticTokens($,X){if(!this._hasWarnedOverlappingTokens)this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${$}, column ${X}`)}warnInvalidLengthSemanticTokens($,X){if(!this._hasWarnedInvalidLengthTokens)this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${$}, column ${X}`)}warnInvalidEditStart($,X,Y,Z,Q){if(!this._hasWarnedInvalidEditStart)this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${$}, resultId: ${X}) at edit #${Y}: The provided start offset ${Z} is outside the previous data (length ${Q}).`)}};var pi=w(()=>{G5();o9();fi();I4();SR=tQ0([Wy(1,Q5),Wy(2,j6),Wy(3,P5)],SR);EZ._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]});var mi;var ui=w(()=>{s0();mi=w0("semanticTokensStylingService")});var eQ0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},By=function(J,$){return function(X,Y){$(X,Y,J)}},Fy;var ci=w(()=>{z0();I4();G5();o9();pi();ui();y4();Fy=class extends m{constructor($,X,Y){super();this._themeService=$,this._logService=X,this._languageService=Y,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling($){if(!this._caches.has($))this._caches.set($,new SR($.getLegend(),this._themeService,this._languageService,this._logService));return this._caches.get($)}};Fy=eQ0([By(0,Q5),By(1,P5),By(2,j6)],Fy);B1(mi,Fy,1)});function di(J,$){switch(J){case 0:return"";case 1:return`${hR}*?`;default:return`(?:${vR}|${hR}+${vR}${$?`|${vR}${hR}+`:""})*?`}}function si(J,$){if(!J)return[];let X=[],Y=!1,Z=!1,Q="";for(let G of J){switch(G){case $:if(!Y&&!Z){X.push(Q),Q="";continue}break;case"{":Y=!0;break;case"}":Y=!1;break;case"[":Z=!0;break;case"]":Z=!1;break}Q+=G}if(Q)X.push(Q);return X}function oi(J){if(!J)return"";let $="",X=si(J,li);if(X.every((Y)=>Y===CR))$=".*";else{let Y=!1;X.forEach((Z,Q)=>{if(Z===CR){if(Y)return;$+=di(2,Q===X.length-1)}else{let G=!1,q="",U=!1,z="";for(let H of Z){if(H!=="}"&&G){q+=H;continue}if(U&&(H!=="]"||!z)){let j;if(H==="-")j=H;else if((H==="^"||H==="!")&&!z)j="^";else if(H===li)j="";else j=b7(H);z+=j;continue}switch(H){case"{":G=!0;continue;case"[":U=!0;continue;case"}":{let V=`(?:${si(q,",").map((W)=>oi(W)).join("|")})`;$+=V,G=!1,q="";break}case"]":{$+="["+z+"]",U=!1,z="";break}case"?":$+=hR;continue;case"*":$+=di(1);continue;default:$+=b7(H)}}if(Q<X.length-1&&(X[Q+1]!==CR||Q+2<X.length))$+=vR}Y=Z===CR})}return $}function Ay(J,$){if(!J)return nX;let X;if(typeof J!=="string")X=J.pattern;else X=J;X=X.trim();let Y=`${X}_${!!$.trimForExclusions}`,Z=ai.get(Y);if(Z)return ii(Z,J);let Q;if($20.test(X))Z=q20(X.substr(4),X);else if(Q=X20.exec(Ky(X,$)))Z=U20(Q[1],X);else if(($.trimForExclusions?Z20:Y20).test(X))Z=z20(X,$);else if(Q=Q20.exec(Ky(X,$)))Z=ni(Q[1].substr(1),X,!0);else if(Q=G20.exec(Ky(X,$)))Z=ni(Q[1],X,!1);else Z=H20(X);return ai.set(Y,Z),ii(Z,J)}function ii(J,$){if(typeof $==="string")return J;let X=function(Y,Z){if(!iV(Y,$.base,!N6))return null;return J(OQ(Y.substr($.base.length),Z$),Z)};return X.allBasenames=J.allBasenames,X.allPaths=J.allPaths,X.basenames=J.basenames,X.patterns=J.patterns,X}function Ky(J,$){return $.trimForExclusions&&J.endsWith("/**")?J.substr(0,J.length-2):J}function q20(J,$){return function(X,Y){return typeof X==="string"&&X.endsWith(J)?$:null}}function U20(J,$){let X=`/${J}`,Y=`\\${J}`,Z=function(G,q){if(typeof G!=="string")return null;if(q)return q===J?$:null;return G===J||G.endsWith(X)||G.endsWith(Y)?$:null},Q=[J];return Z.basenames=Q,Z.patterns=[$],Z.allBasenames=Q,Z}function z20(J,$){let X=ei(J.slice(1,-1).split(",").map((q)=>Ay(q,$)).filter((q)=>q!==nX),J),Y=X.length;if(!Y)return nX;if(Y===1)return X[0];let Z=function(q,U){for(let z=0,H=X.length;z<H;z++)if(X[z](q,U))return J;return null},Q=X.find((q)=>!!q.allBasenames);if(Q)Z.allBasenames=Q.allBasenames;let G=X.reduce((q,U)=>U.allPaths?q.concat(U.allPaths):q,[]);if(G.length)Z.allPaths=G;return Z}function ni(J,$,X){let Y=Z$===b6.sep,Z=Y?J:J.replace(J20,Z$),Q=Z$+Z,G=b6.sep+J,q;if(X)q=function(U,z){return typeof U==="string"&&(U===Z||U.endsWith(Q)||!Y&&(U===J||U.endsWith(G)))?$:null};else q=function(U,z){return typeof U==="string"&&(U===Z||!Y&&U===J)?$:null};return q.allPaths=[(X?"*/":"./")+J],q}function H20(J){try{let $=new RegExp(`^${oi(J)}$`);return function(X){return $.lastIndex=0,typeof X==="string"&&$.test(X)?J:null}}catch($){return nX}}function ti(J,$,X){if(!J||typeof $!=="string")return!1;return Py(J)($,void 0,X)}function Py(J,$={}){if(!J)return ri;if(typeof J==="string"||j20(J)){let X=Ay(J,$);if(X===nX)return ri;let Y=function(Z,Q){return!!X(Z,Q)};if(X.allBasenames)Y.allBasenames=X.allBasenames;if(X.allPaths)Y.allPaths=X.allPaths;return Y}return V20(J,$)}function j20(J){let $=J;if(!$)return!1;return typeof $.base==="string"&&typeof $.pattern==="string"}function V20(J,$){let X=ei(Object.getOwnPropertyNames(J).map((q)=>W20(q,J[q],$)).filter((q)=>q!==nX)),Y=X.length;if(!Y)return nX;if(!X.some((q)=>!!q.requiresSiblings)){if(Y===1)return X[0];let q=function(H,j){let V=void 0;for(let W=0,B=X.length;W<B;W++){let K=X[W](H,j);if(typeof K==="string")return K;if(rA(K)){if(!V)V=[];V.push(K)}}if(V)return(async()=>{for(let W of V){let B=await W;if(typeof B==="string")return B}return null})();return null},U=X.find((H)=>!!H.allBasenames);if(U)q.allBasenames=U.allBasenames;let z=X.reduce((H,j)=>j.allPaths?H.concat(j.allPaths):H,[]);if(z.length)q.allPaths=z;return q}let Z=function(q,U,z){let H=void 0,j=void 0;for(let V=0,W=X.length;V<W;V++){let B=X[V];if(B.requiresSiblings&&z){if(!U)U=zJ(q);if(!H)H=U.substr(0,U.length-Ug(q).length)}let K=B(q,U,H,z);if(typeof K==="string")return K;if(rA(K)){if(!j)j=[];j.push(K)}}if(j)return(async()=>{for(let V of j){let W=await V;if(typeof W==="string")return W}return null})();return null},Q=X.find((q)=>!!q.allBasenames);if(Q)Z.allBasenames=Q.allBasenames;let G=X.reduce((q,U)=>U.allPaths?q.concat(U.allPaths):q,[]);if(G.length)Z.allPaths=G;return Z}function W20(J,$,X){if($===!1)return nX;let Y=Ay(J,X);if(Y===nX)return nX;if(typeof $==="boolean")return Y;if($){let Z=$.when;if(typeof Z==="string"){let Q=(G,q,U,z)=>{if(!z||!Y(G,q))return null;let H=Z.replace("$(basename)",()=>U),j=z(H);return rA(j)?j.then((V)=>V?J:null):j?J:null};return Q.requiresSiblings=!0,Q}}return Y}function ei(J,$){let X=J.filter((q)=>!!q.basenames);if(X.length<2)return J;let Y=X.reduce((q,U)=>{let z=U.basenames;return z?q.concat(z):q},[]),Z;if($){Z=[];for(let q=0,U=Y.length;q<U;q++)Z.push($)}else Z=X.reduce((q,U)=>{let z=U.patterns;return z?q.concat(z):q},[]);let Q=function(q,U){if(typeof q!=="string")return null;if(!U){let H;for(H=q.length;H>0;H--){let j=q.charCodeAt(H-1);if(j===47||j===92)break}U=q.substr(H)}let z=Y.indexOf(U);return z!==-1?Z[z]:null};Q.basenames=Y,Q.patterns=Z,Q.allBasenames=Y;let G=J.filter((q)=>!q.basenames);return G.push(Q),G}var CR="**",li="/",vR="[/\\\\]",hR="[^/\\\\]",J20,$20,X20,Y20,Z20,Q20,G20,ai,ri=function(){return!1},nX=function(){return null};var Dy=w(()=>{e1();$R();F$();kY();L1();X1();J20=/\//g;$20=/^\*\*\/\*\.[\w\.-]+$/,X20=/^\*\*\/([\w\.-]+)\/?$/,Y20=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Z20=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Q20=/^\*\*((\/[\w\.-]+)+)\/?$/,G20=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,ai=new tY(1e4)});function Ry(J,$,X,Y,Z,Q){if(Array.isArray(J)){let G=0;for(let q of J){let U=Ry(q,$,X,Y,Z,Q);if(U===10)return U;if(U>G)G=U}return G}else if(typeof J==="string"){if(!Y)return 0;if(J==="*")return 5;else if(J===X)return 10;else return 0}else if(J){let{language:G,pattern:q,scheme:U,hasAccessToAllModels:z,notebookType:H}=J;if(!Y&&!z)return 0;if(H&&Z)$=Z;let j=0;if(U)if(U===$.scheme)j=10;else if(U==="*")j=5;else return 0;if(G)if(G===X)j=10;else if(G==="*")j=Math.max(j,5);else return 0;if(H)if(H===Q)j=10;else if(H==="*"&&Q!==void 0)j=Math.max(j,5);else return 0;if(q){let V;if(typeof q==="string")V=q;else V={...q,base:NK(q.base)};if(V===$.fsPath||ti(V,$.fsPath))j=10;else return 0}return j}else return 0}var Jn=w(()=>{Dy();kY()});function $n(J){if(typeof J==="string")return!1;else if(Array.isArray(J))return J.every($n);else return!!J.exclusive}class My{constructor(J,$,X,Y){this.uri=J,this.languageId=$,this.notebookUri=X,this.notebookType=Y}equals(J){var $,X;return this.notebookType===J.notebookType&&this.languageId===J.languageId&&this.uri.toString()===J.uri.toString()&&(($=this.notebookUri)===null||$===void 0?void 0:$.toString())===((X=J.notebookUri)===null||X===void 0?void 0:X.toString())}}class I6{constructor(J){this._notebookInfoResolver=J,this._clock=0,this._entries=[],this._onDidChange=new x,this.onDidChange=this._onDidChange.event}register(J,$){let X={selector:J,provider:$,_score:-1,_time:this._clock++};return this._entries.push(X),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),N0(()=>{if(X){let Y=this._entries.indexOf(X);if(Y>=0)this._entries.splice(Y,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),X=void 0}})}has(J){return this.all(J).length>0}all(J){if(!J)return[];this._updateScores(J);let $=[];for(let X of this._entries)if(X._score>0)$.push(X.provider);return $}ordered(J){let $=[];return this._orderedForEach(J,(X)=>$.push(X.provider)),$}orderedGroups(J){let $=[],X,Y;return this._orderedForEach(J,(Z)=>{if(X&&Y===Z._score)X.push(Z.provider);else Y=Z._score,X=[Z.provider],$.push(X)}),$}_orderedForEach(J,$){this._updateScores(J);for(let X of this._entries)if(X._score>0)$(X)}_updateScores(J){var $,X;let Y=($=this._notebookInfoResolver)===null||$===void 0?void 0:$.call(this,J.uri),Z=Y?new My(J.uri,J.getLanguageId(),Y.uri,Y.type):new My(J.uri,J.getLanguageId(),void 0,void 0);if((X=this._lastCandidate)===null||X===void 0?void 0:X.equals(Z))return;this._lastCandidate=Z;for(let Q of this._entries)if(Q._score=Ry(Q.selector,Z.uri,Z.languageId,Im(J),Z.notebookUri,Z.notebookType),$n(Q.selector)&&Q._score>0){for(let G of this._entries)G._score=0;Q._score=1000;break}this._entries.sort(I6._compareByScoreAndTime)}static _compareByScoreAndTime(J,$){if(J._score<$._score)return 1;else if(J._score>$._score)return-1;if(NW(J.selector)&&!NW($.selector))return 1;else if(!NW(J.selector)&&NW($.selector))return-1;if(J._time<$._time)return 1;else if(J._time>$._time)return-1;else return 0}}function NW(J){if(typeof J==="string")return!1;if(Array.isArray(J))return J.some(NW);return Boolean(J.isBuiltin)}var Xn=w(()=>{_0();z0();O9();Jn()});class Yn{constructor(){this.referenceProvider=new I6(this._score.bind(this)),this.renameProvider=new I6(this._score.bind(this)),this.codeActionProvider=new I6(this._score.bind(this)),this.definitionProvider=new I6(this._score.bind(this)),this.typeDefinitionProvider=new I6(this._score.bind(this)),this.declarationProvider=new I6(this._score.bind(this)),this.implementationProvider=new I6(this._score.bind(this)),this.documentSymbolProvider=new I6(this._score.bind(this)),this.inlayHintsProvider=new I6(this._score.bind(this)),this.colorProvider=new I6(this._score.bind(this)),this.codeLensProvider=new I6(this._score.bind(this)),this.documentFormattingEditProvider=new I6(this._score.bind(this)),this.documentRangeFormattingEditProvider=new I6(this._score.bind(this)),this.onTypeFormattingEditProvider=new I6(this._score.bind(this)),this.signatureHelpProvider=new I6(this._score.bind(this)),this.hoverProvider=new I6(this._score.bind(this)),this.documentHighlightProvider=new I6(this._score.bind(this)),this.multiDocumentHighlightProvider=new I6(this._score.bind(this)),this.selectionRangeProvider=new I6(this._score.bind(this)),this.foldingRangeProvider=new I6(this._score.bind(this)),this.linkProvider=new I6(this._score.bind(this)),this.inlineCompletionsProvider=new I6(this._score.bind(this)),this.completionProvider=new I6(this._score.bind(this)),this.linkedEditingRangeProvider=new I6(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new I6(this._score.bind(this)),this.documentSemanticTokensProvider=new I6(this._score.bind(this)),this.documentOnDropEditProvider=new I6(this._score.bind(this)),this.documentPasteEditProvider=new I6(this._score.bind(this))}_score(J){var $;return($=this._notebookTypeResolver)===null||$===void 0?void 0:$.call(this,J)}}var Zn=w(()=>{Xn();f4();y4();B1(D1,Yn,1)});var Mz;var fR=w(()=>{s0();Mz=w0("hoverService")});var S$,S9;var IZ=w(()=>{s0();S$=w0("contextViewService"),S9=w0("contextMenuService")});var Qn=w(()=>{K0(".monaco-workbench .workbench-hover{z-index:40;background:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);max-width:700px;color:var(--vscode-editorHoverWidget-foreground);box-shadow:0 2px 8px var(--vscode-widget-shadow);border-radius:3px;font-size:13px;line-height:19px;position:relative;overflow:hidden}.monaco-workbench .workbench-hover hr{border-bottom:none}.monaco-workbench .workbench-hover:not(.skip-fade-in){animation:.1s linear fadein}.monaco-workbench .workbench-hover.compact{font-size:12px}.monaco-workbench .workbench-hover.compact .hover-contents{padding:2px 8px}.monaco-workbench .workbench-hover-container.locked .workbench-hover{outline:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .workbench-hover-container.locked .workbench-hover:focus,.monaco-workbench .workbench-hover-lock:focus{outline:1px solid var(--vscode-focusBorder)}.monaco-workbench .workbench-hover-container.locked .workbench-hover-lock:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-workbench .workbench-hover-pointer{z-index:41;pointer-events:none;position:absolute}.monaco-workbench .workbench-hover-pointer:after{content:\"\";background-color:var(--vscode-editorHoverWidget-background);border-right:1px solid var(--vscode-editorHoverWidget-border);border-bottom:1px solid var(--vscode-editorHoverWidget-border);width:5px;height:5px;position:absolute}.monaco-workbench .locked .workbench-hover-pointer:after{border-bottom-width:2px;border-right-width:2px;width:4px;height:4px}.monaco-workbench .workbench-hover-pointer.left{left:-3px}.monaco-workbench .workbench-hover-pointer.right{right:3px}.monaco-workbench .workbench-hover-pointer.top{top:-3px}.monaco-workbench .workbench-hover-pointer.bottom{bottom:3px}.monaco-workbench .workbench-hover-pointer.left:after{transform:rotate(135deg)}.monaco-workbench .workbench-hover-pointer.right:after{transform:rotate(315deg)}.monaco-workbench .workbench-hover-pointer.top:after{transform:rotate(225deg)}.monaco-workbench .workbench-hover-pointer.bottom:after{transform:rotate(45deg)}.monaco-workbench .workbench-hover a{color:var(--vscode-textLink-foreground)}.monaco-workbench .workbench-hover a:focus{outline-offset:-1px;outline:1px solid;outline-color:var(--vscode-focusBorder);text-decoration:underline}.monaco-workbench .workbench-hover a:hover,.monaco-workbench .workbench-hover a:active{color:var(--vscode-textLink-activeForeground)}.monaco-workbench .workbench-hover code{background:var(--vscode-textCodeBlock-background)}.monaco-workbench .workbench-hover .hover-row .actions{background:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-workbench .workbench-hover.right-aligned{left:1px}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions{flex-direction:row-reverse}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions .action-container{margin-left:16px;margin-right:0}")});var Gn=w(()=>{K0(".monaco-hover{cursor:default;-webkit-user-select:text;user-select:text;box-sizing:border-box;white-space:var(--vscode-hover-whiteSpace,normal);line-height:1.5em;animation:.1s linear fadein;position:absolute;overflow:hidden}.monaco-hover.hidden{display:none}.monaco-hover a:hover:not(.disabled){cursor:pointer}.monaco-hover .hover-contents:not(.html-hover-contents){padding:4px 8px}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents){max-width:var(--vscode-hover-maxWidth,500px);word-wrap:break-word}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents) hr{min-width:100%}.monaco-hover p,.monaco-hover .code,.monaco-hover ul,.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{margin:8px 0}.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{line-height:1.1}.monaco-hover code{font-family:var(--monaco-monospace-font)}.monaco-hover hr{box-sizing:border-box;border-left:0;border-right:0;height:1px;margin:4px -8px -4px}.monaco-hover p:first-child,.monaco-hover .code:first-child,.monaco-hover ul:first-child{margin-top:0}.monaco-hover p:last-child,.monaco-hover .code:last-child,.monaco-hover ul:last-child{margin-bottom:0}.monaco-hover ul,.monaco-hover ol{padding-left:20px}.monaco-hover li>p{margin-bottom:0}.monaco-hover li>ul{margin-top:0}.monaco-hover code{border-radius:3px;padding:0 .4em}.monaco-hover .monaco-tokenized-source{white-space:var(--vscode-hover-sourceWhiteSpace,pre-wrap)}.monaco-hover .hover-row.status-bar{font-size:12px;line-height:22px}.monaco-hover .hover-row.status-bar .info{padding:0 8px;font-style:italic}.monaco-hover .hover-row.status-bar .actions{padding:0 8px;display:flex}.monaco-hover .hover-row.status-bar .actions .action-container{cursor:pointer;margin-right:16px}.monaco-hover .hover-row.status-bar .actions .action-container .action .icon{padding-right:4px}.monaco-hover .markdown-hover .hover-contents .codicon{color:inherit;font-size:inherit;vertical-align:middle}.monaco-hover .hover-contents a.code-link:hover,.monaco-hover .hover-contents a.code-link{color:inherit}.monaco-hover .hover-contents a.code-link:before{content:\"(\"}.monaco-hover .hover-contents a.code-link:after{content:\")\"}.monaco-hover .hover-contents a.code-link>span{text-underline-position:under;color:var(--vscode-textLink-foreground);border-bottom:1px solid #0000;text-decoration:underline}.monaco-hover .hover-contents a.code-link>span:hover{color:var(--vscode-textLink-activeForeground)}.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span{margin-bottom:4px;display:inline-block}.monaco-hover-content .action-container a{-webkit-user-select:none;user-select:none}.monaco-hover-content .action-container.disabled{pointer-events:none;opacity:.4;cursor:default}")});function qn(J,$){return J&&$?F("acessibleViewHint","Inspect this in the accessible view with {0}.",$):J?F("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}var gR,Oy,pR;var Un=w(()=>{T0();d8();L$();z0();Gn();c0();gR=B0;Oy=class Oy extends m{constructor(){super();this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new jZ(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};pR=class pR extends m{static render(J,$,X){return new pR(J,$,X)}constructor(J,$,X){super();if(this.actionContainer=j0(J,gR("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=j0(this.actionContainer,gR("a.action")),this.action.setAttribute("role","button"),$.iconClass)j0(this.action,gR(`span.icon.${$.iconClass}`));let Y=j0(this.action,gR("span"));Y.textContent=X?`${$.label} (${X})`:$.label,this._register(r(this.actionContainer,U0.CLICK,(Z)=>{Z.stopPropagation(),Z.preventDefault(),$.run(this.actionContainer)})),this._register(r(this.actionContainer,U0.KEY_DOWN,(Z)=>{let Q=new R1(Z);if(Q.equals(3)||Q.equals(10))Z.stopPropagation(),Z.preventDefault(),$.run(this.actionContainer)})),this.setEnabled(!0)}setEnabled(J){if(J)this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled");else this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true")}}});function zn(J){let $=void 0,X=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(J.fragment);if(X)$={startLineNumber:parseInt(X[1]),startColumn:X[2]?parseInt(X[2]):1,endLineNumber:X[4]?parseInt(X[4]):void 0,endColumn:X[4]?X[5]?parseInt(X[5]):1:void 0},J=J.with({fragment:""});return{selection:$,uri:J}}var oX;var y3=w(()=>{s0();oX=w0("openerService")});function Hn(J,$={}){let X=mR($);return X.textContent=J,X}function jn(J,$={}){let X=mR($);return Wn(X,B20(J,!!$.renderCodeSegments),$.actionHandler,$.renderCodeSegments),X}function mR(J){let $=J.inline?"span":"div",X=document.createElement($);if(J.className)X.className=J.className;return X}class Vn{constructor(J){this.source=J,this.index=0}eos(){return this.index>=this.source.length}next(){let J=this.peek();return this.advance(),J}peek(){return this.source[this.index]}advance(){this.index++}}function Wn(J,$,X,Y){let Z;if($.type===2)Z=document.createTextNode($.content||"");else if($.type===3)Z=document.createElement("b");else if($.type===4)Z=document.createElement("i");else if($.type===7&&Y)Z=document.createElement("code");else if($.type===5&&X){let Q=document.createElement("a");X.disposables.add(q6(Q,"click",(G)=>{X.callback(String($.index),G)})),Z=Q}else if($.type===8)Z=document.createElement("br");else if($.type===1)Z=J;if(Z&&J!==Z)J.appendChild(Z);if(Z&&Array.isArray($.children))$.children.forEach((Q)=>{Wn(Z,Q,X,Y)})}function B20(J,$){let X={type:1,children:[]},Y=0,Z=X,Q=[],G=new Vn(J);while(!G.eos()){let q=G.next(),U=q==="\\"&&_y(G.peek(),$)!==0;if(U)q=G.next();if(!U&&F20(q,$)&&q===G.peek()){if(G.advance(),Z.type===2)Z=Q.pop();let z=_y(q,$);if(Z.type===z||Z.type===5&&z===6)Z=Q.pop();else{let H={type:z,children:[]};if(z===5)H.index=Y,Y++;Z.children.push(H),Q.push(Z),Z=H}}else if(q===`
`){if(Z.type===2)Z=Q.pop();Z.children.push({type:8})}else if(Z.type!==2){let z={type:2,content:q};Z.children.push(z),Q.push(Z),Z=z}else Z.content+=q}if(Z.type===2)Z=Q.pop();if(Q.length);return X}function F20(J,$){return _y(J,$)!==0}function _y(J,$){switch(J){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return $?7:0;default:return 0}}var Ny=w(()=>{T0()});function xJ(J){let $=[],X,Y=0,Z=0;while((X=K20.exec(J))!==null){if(Z=X.index||0,Y<Z)$.push(J.substring(Y,Z));Y=(X.index||0)+X[0].length;let[,Q,G]=X;$.push(Q?`$(${G})`:Oz({id:G}))}if(Y<J.length)$.push(J.substring(Y));return $}function Oz(J){let $=B0("span");return $.classList.add(...h0.asClassNameArray(J)),$}var K20;var x3=w(()=>{T0();I5();K20=new RegExp(`(\\\\)?\\$\\((${h0.iconNameExpression}(?:${h0.iconModifierExpression})?)\\)`,"g")});var Ua0,za0,Ha0,ja0,Va0;var Bn=w(()=>{Ua0=new Uint32Array(10),za0=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),Ha0=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),ja0=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Va0=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108])});function An(...J){return function($,X){for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y]($,X);if(Q)return Q}return null}}function Pn(J,$,X){if(!X||X.length<$.length)return null;let Y;if(J)Y=uq(X,$);else Y=X.indexOf($)===0;if(!Y)return null;return $.length>0?[{start:0,end:$.length}]:[]}function A20(J,$){let X=$.toLowerCase().indexOf(J.toLowerCase());if(X===-1)return null;return[{start:X,end:X+J.length}]}function P20(J,$){return wy(J.toLowerCase(),$.toLowerCase(),0,0)}function wy(J,$,X,Y){if(X===J.length)return[];else if(Y===$.length)return null;else{if(J[X]===$[Y]){let Z=null;if(Z=wy(J,$,X+1,Y+1))return Rn({start:Y,end:Y+1},Z);return null}return wy(J,$,X,Y+1)}}function Ey(J){return 97<=J&&J<=122}function lR(J){return 65<=J&&J<=90}function Iy(J){return 48<=J&&J<=57}function D20(J){return J===32||J===9||J===10||J===13}function Dn(J){return Ey(J)||lR(J)||Iy(J)}function Rn(J,$){if($.length===0)$=[J];else if(J.end===$[0].start)$[0].start=J.start;else $.unshift(J);return $}function Mn(J,$){for(let X=$;X<J.length;X++){let Y=J.charCodeAt(X);if(lR(Y)||Iy(Y)||X>0&&!Dn(J.charCodeAt(X-1)))return X}return J.length}function Ly(J,$,X,Y){if(X===J.length)return[];else if(Y===$.length)return null;else if(J[X]!==$[Y].toLowerCase())return null;else{let Z=null,Q=Y+1;Z=Ly(J,$,X+1,Y+1);while(!Z&&(Q=Mn($,Q))<$.length)Z=Ly(J,$,X+1,Q),Q++;return Z===null?null:Rn({start:Y,end:Y+1},Z)}}function M20(J){let $=0,X=0,Y=0,Z=0,Q=0;for(let H=0;H<J.length;H++){if(Q=J.charCodeAt(H),lR(Q))$++;if(Ey(Q))X++;if(Dn(Q))Y++;if(Iy(Q))Z++}let G=$/J.length,q=X/J.length,U=Y/J.length,z=Z/J.length;return{upperPercent:G,lowerPercent:q,alphaPercent:U,numericPercent:z}}function O20(J){let{upperPercent:$,lowerPercent:X}=J;return X===0&&$>0.6}function _20(J){let{upperPercent:$,lowerPercent:X,alphaPercent:Y,numericPercent:Z}=J;return X>0.2&&$<0.8&&Y>0.6&&Z<0.2}function N20(J){let $=0,X=0,Y=0,Z=0;for(let Q=0;Q<J.length;Q++){if(Y=J.charCodeAt(Q),lR(Y))$++;if(Ey(Y))X++;if(D20(Y))Z++}if(($===0||X===0)&&Z===0)return J.length<=30;else return $<=5}function On(J,$){if(!$)return null;if($=$.trim(),$.length===0)return null;if(!N20(J))return null;if($.length>60)return null;let X=M20($);if(!_20(X)){if(!O20(X))return null;$=$.toLowerCase()}let Y=null,Z=0;J=J.toLowerCase();while(Z<$.length&&(Y=Ly(J,$,0,Z))===null)Z=Mn($,Z+1);return Y}function yy(J,$,X=!1){if(typeof J!=="string"||typeof $!=="string")return null;let Y=Fn.get(J);if(!Y)Y=new RegExp(Tg(J),"i"),Fn.set(J,Y);let Z=Y.exec($);if(Z)return[{start:Z.index,end:Z.index+Z[0].length}];return X?w20(J,$):T20(J,$)}function _n(J,$){let X=V2(J,J.toLowerCase(),0,$,$.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return X?xy(X):null}function Nn(J,$,X,Y,Z,Q){let G=Math.min(13,J.length);for(;X<G;X++){let q=V2(J,$,X,Y,Z,Q,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(q)return q}return[0,Q]}function xy(J){if(typeof J>"u")return[];let $=[],X=J[1];for(let Y=J.length-1;Y>1;Y--){let Z=J[Y]+X,Q=$[$.length-1];if(Q&&Q.end===Z)Q.end=Z+1;else $.push({start:Z,end:Z+1})}return $}function by(){let J=[],$=[];for(let X=0;X<=j2;X++)$[X]=0;for(let X=0;X<=j2;X++)J.push($.slice(0));return J}function Tn(J){let $=[];for(let X=0;X<=J;X++)$[X]=0;return $}function Ty(J,$,X,Y,Z){function Q(q,U,z=" "){while(q.length<U)q=z+q;return q}let G=` |   |${Y.split("").map((q)=>Q(q,3)).join("|")}
`;for(let q=0;q<=X;q++){if(q===0)G+=" |";else G+=`${$[q-1]}|`;G+=J[q].slice(0,Z+1).map((U)=>Q(U.toString(),3)).join("|")+`
`}return G}function k20(J,$,X,Y){J=J.substr($),X=X.substr(Y),console.log(Ty(H2,J,J.length,X,X.length)),console.log(Ty(TW,J,J.length,X,X.length)),console.log(Ty(tX,J,J.length,X,X.length))}function uR(J,$){if($<0||$>=J.length)return!1;let X=J.codePointAt($);switch(X){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:if(Bj(X))return!0;return!1}}function Kn(J,$){if($<0||$>=J.length)return!1;switch(J.charCodeAt($)){case 32:case 9:return!0;default:return!1}}function cR(J,$,X){return $[J]!==X[J]}function E20(J,$,X,Y,Z,Q,G=!1){while($<X&&Z<Q){if(J[$]===Y[Z]){if(G)wn[$]=Z;$+=1}Z+=1}return $===X}class b3{constructor(J,$){this.firstMatchCanBeWeak=J,this.boostFullMatch=$}}function V2(J,$,X,Y,Z,Q,G=b3.default){let q=J.length>j2?j2:J.length,U=Y.length>j2?j2:Y.length;if(X>=q||Q>=U||q-X>U-Q)return;if(!E20($,X,q,Z,Q,U,!0))return;I20(q,U,X,Q,$,Z);let z=1,H=1,j=X,V=Q,W=[!1];for(z=1,j=X;j<q;z++,j++){let D=wn[j],M=ky[j],R=j+1<q?ky[j+1]:U;for(H=D-Q+1,V=D;V<R;H++,V++){let O=Number.MIN_SAFE_INTEGER,N=!1;if(V<=M)O=y20(J,$,j,X,Y,Z,V,U,Q,tX[z-1][H-1]===0,W);let T=0;if(O!==Number.MAX_SAFE_INTEGER)N=!0,T=O+H2[z-1][H-1];let S=V>D,v=S?H2[z][H-1]+(tX[z][H-1]>0?-5:0):0,l=V>D+1&&tX[z][H-1]>0,f=l?H2[z][H-2]+(tX[z][H-2]>0?-5:0):0;if(l&&(!S||f>=v)&&(!N||f>=T))H2[z][H]=f,TW[z][H]=3,tX[z][H]=0;else if(S&&(!N||v>=T))H2[z][H]=v,TW[z][H]=2,tX[z][H]=0;else if(N)H2[z][H]=T,TW[z][H]=1,tX[z][H]=tX[z-1][H-1]+1;else throw Error("not possible")}}if(L20)k20(J,X,Y,Q);if(!W[0]&&!G.firstMatchCanBeWeak)return;z--,H--;let B=[H2[z][H],Q],K=0,P=0;while(z>=1){let D=H;do{let M=TW[z][D];if(M===3)D=D-2;else if(M===2)D=D-1;else break}while(D>=1);if(K>1&&$[X+z-1]===Z[Q+H-1]&&!cR(D+Q-1,Y,Z)&&K+1>tX[z][D])D=H;if(D===H)K++;else K=1;if(!P)P=D;z--,H=D-1,B.push(H)}if(U===q&&G.boostFullMatch)B[0]+=2;let A=P-q;return B[0]-=A,B}function I20(J,$,X,Y,Z,Q){let G=J-1,q=$-1;while(G>=X&&q>=Y){if(Z[G]===Q[q])ky[G]=q,G--;q--}}function y20(J,$,X,Y,Z,Q,G,q,U,z,H){if($[X]!==Q[G])return Number.MIN_SAFE_INTEGER;let j=1,V=!1;if(G===X-Y)j=J[X]===Z[G]?7:5;else if(cR(G,Z,Q)&&(G===0||!cR(G-1,Z,Q)))j=J[X]===Z[G]?7:5,V=!0;else if(uR(Q,G)&&(G===0||!uR(Q,G-1)))j=5;else if(uR(Q,G-1)||Kn(Q,G-1))j=5,V=!0;if(j>1&&X===Y)H[0]=!0;if(!V)V=cR(G,Z,Q)||uR(Q,G-1)||Kn(Q,G-1);if(X===Y){if(G>U)j-=V?3:5}else if(z)j+=V?2:0;else j+=V?0:1;if(G+1===q)j-=V?3:5;return j}function Ln(J,$,X,Y,Z,Q,G){return x20(J,$,X,Y,Z,Q,!0,G)}function x20(J,$,X,Y,Z,Q,G,q){let U=V2(J,$,X,Y,Z,Q,q);if(U&&!G)return U;if(J.length>=3){let z=Math.min(7,J.length-1);for(let H=X+1;H<z;H++){let j=b20(J,H);if(j){let V=V2(j,j.toLowerCase(),X,Y,Z,Q,q);if(V){if(V[0]-=3,!U||V[0]>U[0])U=V}}}}return U}function b20(J,$){if($+1>=J.length)return;let X=J[$],Y=J[$+1];if(X===Y)return;return J.slice(0,$)+Y+X+J.slice($+2)}var Aa0,wW,R20,T20,w20,Fn,j2=128,wn,ky,tX,H2,TW,L20=!1,bJ;var W2=w(()=>{F$();Bn();X1();Aa0=Pn.bind(void 0,!1),wW=Pn.bind(void 0,!0);R20=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach((J)=>R20.add(J.charCodeAt(0)));T20=An(wW,On,A20),w20=An(wW,On,P20),Fn=new tY(1e4);wn=Tn(2*j2),ky=Tn(2*j2),tX=by(),H2=by(),TW=by();(function(J){J.Default=[-100,0];function $(X){return!X||X.length===2&&X[0]===-100&&X[1]===0}J.isDefault=$})(bJ||(bJ={}));b3.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}});function kn(J){return J.replace(C20,($,X)=>X?$:`\\${$}`)}function En(J){return J.replace(v20,($)=>`\\${$}`)}function dR(J){if(J.indexOf(S20)===-1)return J;return J.replace(h20,($,X,Y,Z)=>Y?$:X||Z||"")}function In(J){if(!J)return"";return J.replace(/\$\((.*?)\)/g,($,X)=>` ${X} `).trim()}function _z(J){Sy.lastIndex=0;let $="",X=[],Y=0;while(!0){let Z=Sy.lastIndex,Q=Sy.exec(J),G=J.substring(Z,Q===null||Q===void 0?void 0:Q.index);if(G.length>0){$+=G;for(let q=0;q<G.length;q++)X.push(Y)}if(!Q)break;Y+=Q[0].length}return{text:$,iconOffsets:X}}function sR(J,$,X=!1){let{text:Y,iconOffsets:Z}=$;if(!Z||Z.length===0)return yy(J,Y,X);let Q=OQ(Y," "),G=Y.length-Q.length,q=yy(J,Q,X);if(q)for(let U of q){let z=Z[U.start+G]+G;U.start+=z,U.end+=z}return q}var S20="$(",Cy,C20,v20,h20,Sy;var Nz=w(()=>{W2();X1();I5();Cy=new RegExp(`\\$\\(${h0.iconNameExpression}(?:${h0.iconModifierExpression})?\\)`,"g"),C20=new RegExp(`(\\\\)?${Cy.source}`,"g");v20=new RegExp(`\\\\${Cy.source}`,"g");h20=new RegExp(`(\\s)?(\\\\)?${Cy.source}(\\s)?`,"g");Sy=new RegExp(`\\$\\(${h0.iconNameCharacter}+\\)`,"g")});class Tz{constructor(J="",$=!1){var X,Y,Z;if(this.value=J,typeof this.value!=="string")throw X$("value");if(typeof $==="boolean")this.isTrusted=$,this.supportThemeIcons=!1,this.supportHtml=!1;else this.isTrusted=(X=$.isTrusted)!==null&&X!==void 0?X:void 0,this.supportThemeIcons=(Y=$.supportThemeIcons)!==null&&Y!==void 0?Y:!1,this.supportHtml=(Z=$.supportHtml)!==null&&Z!==void 0?Z:!1}appendText(J,$=0){return this.value+=f20(this.supportThemeIcons?kn(J):J).replace(/([ \t]+)/g,(X,Y)=>"&nbsp;".repeat(Y.length)).replace(/\>/gm,"\\>").replace(/\n/g,$===1?"\\\n":`

`),this}appendMarkdown(J){return this.value+=J,this}appendCodeblock(J,$){return this.value+=`
${g20($,J)}
`,this}appendLink(J,$,X){if(this.value+="[",this.value+=this._escape($,"]"),this.value+="](",this.value+=this._escape(String(J),")"),X)this.value+=` "${this._escape(this._escape(X,'"'),")")}"`;return this.value+=")",this}_escape(J,$){let X=new RegExp(b7($),"g");return J.replace(X,(Y,Z)=>{if(J.charAt(Z-1)!=="\\")return`\\${Y}`;else return Y})}}function yZ(J){if(J instanceof Tz)return!0;else if(J&&typeof J==="object")return typeof J.value==="string"&&(typeof J.isTrusted==="boolean"||typeof J.isTrusted==="object"||J.isTrusted===void 0)&&(typeof J.supportThemeIcons==="boolean"||J.supportThemeIcons===void 0);return!1}function yn(J,$){if(J===$)return!0;else if(!J||!$)return!1;else return J.value===$.value&&J.isTrusted===$.isTrusted&&J.supportThemeIcons===$.supportThemeIcons&&J.supportHtml===$.supportHtml&&(J.baseUri===$.baseUri||!!J.baseUri&&!!$.baseUri&&da(C0.from(J.baseUri),C0.from($.baseUri)))}function f20(J){return J.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function g20(J,$){var X,Y;let Z=(Y=(X=J.match(/^`+/gm))===null||X===void 0?void 0:X.reduce((G,q)=>G.length>q.length?G:q).length)!==null&&Y!==void 0?Y:0,Q=Z>=3?Z+1:3;return[`${"`".repeat(Q)}${$}`,J,`${"`".repeat(Q)}`].join(`
`)}function LW(J){return J.replace(/"/g,"&quot;")}function aR(J){if(!J)return J;return J.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function xn(J){let $=[],X=J.split("|").map((Z)=>Z.trim());J=X[0];let Y=X[1];if(Y){let Z=/height=(\d+)/.exec(Y),Q=/width=(\d+)/.exec(Y),G=Z?Z[1]:"",q=Q?Q[1]:"",U=isFinite(parseInt(q)),z=isFinite(parseInt(G));if(U)$.push(`width="${q}"`);if(z)$.push(`height="${G}"`)}return{href:J,dimensions:$}}var S3=w(()=>{O1();Nz();cX();X1();V5()});class rR{constructor(J){this._prefix=J,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}var vy;var hy=w(()=>{vy=new rR("id#")});var fy={};UQ(fy,{walkTokens:()=>JG0,use:()=>e20,setOptions:()=>t20,parser:()=>o20,parseInline:()=>n20,parse:()=>i20,options:()=>r20,marked:()=>SJ,lexer:()=>a20,getDefaults:()=>s20,Tokenizer:()=>d20,TextRenderer:()=>l20,Slugger:()=>c20,Renderer:()=>u20,Parser:()=>m20,Lexer:()=>p20});var p7,p20,m20,u20,c20,l20,d20,s20,a20,SJ,r20,i20,n20,o20,t20,e20,JG0;var bn=w(()=>{p7={};(function(){function J($,X){X(p7)}J.amd=!0,function($,X){typeof J==="function"&&J.amd?J(["exports"],X):typeof fy==="object"&&typeof $G0<"u"?X(fy):($=typeof globalThis<"u"?globalThis:$||self,X($.marked={}))}(this,function($){function X(Y0,t){for(var o=0;o<t.length;o++){var E=t[o];if(E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E)E.writable=!0;Object.defineProperty(Y0,E.key,E)}}function Y(Y0,t,o){if(t)X(Y0.prototype,t);if(o)X(Y0,o);return Object.defineProperty(Y0,"prototype",{writable:!1}),Y0}function Z(Y0,t){if(!Y0)return;if(typeof Y0==="string")return Q(Y0,t);var o=Object.prototype.toString.call(Y0).slice(8,-1);if(o==="Object"&&Y0.constructor)o=Y0.constructor.name;if(o==="Map"||o==="Set")return Array.from(Y0);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Q(Y0,t)}function Q(Y0,t){if(t==null||t>Y0.length)t=Y0.length;for(var o=0,E=Array(t);o<t;o++)E[o]=Y0[o];return E}function G(Y0,t){var o=typeof Symbol<"u"&&Y0[Symbol.iterator]||Y0["@@iterator"];if(o)return(o=o.call(Y0)).next.bind(o);if(Array.isArray(Y0)||(o=Z(Y0))||t&&Y0&&typeof Y0.length==="number"){if(o)Y0=o;var E=0;return function(){if(E>=Y0.length)return{done:!0};return{done:!1,value:Y0[E++]}}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}$.defaults=q();function U(Y0){$.defaults=Y0}var z=/[&<>"']/,H=/[&<>"']/g,j=/[<>"']|&(?!#?\w+;)/,V=/[<>"']|&(?!#?\w+;)/g,W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B=function(t){return W[t]};function K(Y0,t){if(t){if(z.test(Y0))return Y0.replace(H,B)}else if(j.test(Y0))return Y0.replace(V,B);return Y0}var P=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function A(Y0){return Y0.replace(P,function(t,o){if(o=o.toLowerCase(),o==="colon")return":";if(o.charAt(0)==="#")return o.charAt(1)==="x"?String.fromCharCode(parseInt(o.substring(2),16)):String.fromCharCode(+o.substring(1));return""})}var D=/(^|[^\[])\^/g;function M(Y0,t){Y0=typeof Y0==="string"?Y0:Y0.source,t=t||"";var o={replace:function(C,a){return a=a.source||a,a=a.replace(D,"$1"),Y0=Y0.replace(C,a),o},getRegex:function(){return new RegExp(Y0,t)}};return o}var R=/[^\w:]/g,O=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function N(Y0,t,o){if(Y0){var E;try{E=decodeURIComponent(A(o)).replace(R,"").toLowerCase()}catch(C){return null}if(E.indexOf("javascript:")===0||E.indexOf("vbscript:")===0||E.indexOf("data:")===0)return null}if(t&&!O.test(o))o=f(t,o);try{o=encodeURI(o).replace(/%25/g,"%")}catch(C){return null}return o}var T={},S=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,l=/^([^:]+:\/*[^/]*)[\s\S]*$/;function f(Y0,t){if(!T[" "+Y0])if(S.test(Y0))T[" "+Y0]=Y0+"/";else T[" "+Y0]=p(Y0,"/",!0);Y0=T[" "+Y0];var o=Y0.indexOf(":")===-1;if(t.substring(0,2)==="//"){if(o)return t;return Y0.replace(v,"$1")+t}else if(t.charAt(0)==="/"){if(o)return t;return Y0.replace(l,"$1")+t}else return Y0+t}var h={exec:function(){}};function L(Y0){var t=1,o,E;for(;t<arguments.length;t++){o=arguments[t];for(E in o)if(Object.prototype.hasOwnProperty.call(o,E))Y0[E]=o[E]}return Y0}function b(Y0,t){var o=Y0.replace(/\|/g,function(a,u,Q0){var R0=!1,b0=u;while(--b0>=0&&Q0[b0]==="\\")R0=!R0;if(R0)return"|";else return" |"}),E=o.split(/ \|/),C=0;if(!E[0].trim())E.shift();if(E.length>0&&!E[E.length-1].trim())E.pop();if(E.length>t)E.splice(t);else while(E.length<t)E.push("");for(;C<E.length;C++)E[C]=E[C].trim().replace(/\\\|/g,"|");return E}function p(Y0,t,o){var E=Y0.length;if(E===0)return"";var C=0;while(C<E){var a=Y0.charAt(E-C-1);if(a===t&&!o)C++;else if(a!==t&&o)C++;else break}return Y0.slice(0,E-C)}function d(Y0,t){if(Y0.indexOf(t[1])===-1)return-1;var o=Y0.length,E=0,C=0;for(;C<o;C++)if(Y0[C]==="\\")C++;else if(Y0[C]===t[0])E++;else if(Y0[C]===t[1]){if(E--,E<0)return C}return-1}function s(Y0){if(Y0&&Y0.sanitize&&!Y0.silent)console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function c(Y0,t){if(t<1)return"";var o="";while(t>1){if(t&1)o+=Y0;t>>=1,Y0+=Y0}return o+Y0}function i(Y0,t,o,E){var C=t.href,a=t.title?K(t.title):null,u=Y0[1].replace(/\\([\[\]])/g,"$1");if(Y0[0].charAt(0)!=="!"){E.state.inLink=!0;var Q0={type:"link",raw:o,href:C,title:a,text:u,tokens:E.inlineTokens(u)};return E.state.inLink=!1,Q0}return{type:"image",raw:o,href:C,title:a,text:K(u)}}function J0(Y0,t){var o=Y0.match(/^(\s+)(?:```)/);if(o===null)return t;var E=o[1];return t.split(`
`).map(function(C){var a=C.match(/^\s+/);if(a===null)return C;var u=a[0];if(u.length>=E.length)return C.slice(E.length);return C}).join(`
`)}var W0=function(){function Y0(o){this.options=o||$.defaults}var t=Y0.prototype;return t.space=function(E){var C=this.rules.block.newline.exec(E);if(C&&C[0].length>0)return{type:"space",raw:C[0]}},t.code=function(E){var C=this.rules.block.code.exec(E);if(C){var a=C[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:C[0],codeBlockStyle:"indented",text:!this.options.pedantic?p(a,`
`):a}}},t.fences=function(E){var C=this.rules.block.fences.exec(E);if(C){var a=C[0],u=J0(a,C[3]||"");return{type:"code",raw:a,lang:C[2]?C[2].trim():C[2],text:u}}},t.heading=function(E){var C=this.rules.block.heading.exec(E);if(C){var a=C[2].trim();if(/#$/.test(a)){var u=p(a,"#");if(this.options.pedantic)a=u.trim();else if(!u||/ $/.test(u))a=u.trim()}return{type:"heading",raw:C[0],depth:C[1].length,text:a,tokens:this.lexer.inline(a)}}},t.hr=function(E){var C=this.rules.block.hr.exec(E);if(C)return{type:"hr",raw:C[0]}},t.blockquote=function(E){var C=this.rules.block.blockquote.exec(E);if(C){var a=C[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:C[0],tokens:this.lexer.blockTokens(a,[]),text:a}}},t.list=function(E){var C=this.rules.block.list.exec(E);if(C){var a,u,Q0,R0,b0,g0,j1,z1,z6,Z6,o0,r6,i6=C[1].trim(),$J=i6.length>1,m1={type:"list",raw:"",ordered:$J,start:$J?+i6.slice(0,-1):"",loose:!1,items:[]};if(i6=$J?"\\d{1,9}\\"+i6.slice(-1):"\\"+i6,this.options.pedantic)i6=$J?i6:"[*+-]";var _5=new RegExp("^( {0,3}"+i6+")((?:[\t ][^\\n]*)?(?:\\n|$))");while(E){if(r6=!1,!(C=_5.exec(E)))break;if(this.rules.block.hr.test(E))break;if(a=C[0],E=E.substring(a.length),z1=C[2].split(`
`,1)[0],z6=E.split(`
`,1)[0],this.options.pedantic)R0=2,o0=z1.trimLeft();else R0=C[2].search(/[^ ]/),R0=R0>4?1:R0,o0=z1.slice(R0),R0+=C[1].length;if(g0=!1,!z1&&/^ *$/.test(z6))a+=z6+`
`,E=E.substring(z6.length+1),r6=!0;if(!r6){var YG=new RegExp("^ {0,"+Math.min(3,R0-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),ZG=new RegExp("^ {0,"+Math.min(3,R0-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),oJ=new RegExp("^ {0,"+Math.min(3,R0-1)+"}(?:```|~~~)"),qQ=new RegExp("^ {0,"+Math.min(3,R0-1)+"}#");while(E){if(Z6=E.split(`
`,1)[0],z1=Z6,this.options.pedantic)z1=z1.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ");if(oJ.test(z1))break;if(qQ.test(z1))break;if(YG.test(z1))break;if(ZG.test(E))break;if(z1.search(/[^ ]/)>=R0||!z1.trim())o0+=`
`+z1.slice(R0);else if(!g0)o0+=`
`+z1;else break;if(!g0&&!z1.trim())g0=!0;a+=Z6+`
`,E=E.substring(Z6.length+1)}}if(!m1.loose){if(j1)m1.loose=!0;else if(/\n *\n *$/.test(a))j1=!0}if(this.options.gfm){if(u=/^\[[ xX]\] /.exec(o0),u)Q0=u[0]!=="[ ] ",o0=o0.replace(/^\[[ xX]\] +/,"")}m1.items.push({type:"list_item",raw:a,task:!!u,checked:Q0,loose:!1,text:o0}),m1.raw+=a}m1.items[m1.items.length-1].raw=a.trimRight(),m1.items[m1.items.length-1].text=o0.trimRight(),m1.raw=m1.raw.trimRight();var QG=m1.items.length;for(b0=0;b0<QG;b0++){this.lexer.state.top=!1,m1.items[b0].tokens=this.lexer.blockTokens(m1.items[b0].text,[]);var GG=m1.items[b0].tokens.filter(function(qG){return qG.type==="space"}),Lq=GG.every(function(qG){var KN=qG.raw.split(""),e$=0;for(var uH=G(KN),cH;!(cH=uH()).done;){var JK=cH.value;if(JK===`
`)e$+=1;if(e$>1)return!0}return!1});if(!m1.loose&&GG.length&&Lq)m1.loose=!0,m1.items[b0].loose=!0}return m1}},t.html=function(E){var C=this.rules.block.html.exec(E);if(C){var a={type:"html",raw:C[0],pre:!this.options.sanitizer&&(C[1]==="pre"||C[1]==="script"||C[1]==="style"),text:C[0]};if(this.options.sanitize){var u=this.options.sanitizer?this.options.sanitizer(C[0]):K(C[0]);a.type="paragraph",a.text=u,a.tokens=this.lexer.inline(u)}return a}},t.def=function(E){var C=this.rules.block.def.exec(E);if(C){if(C[3])C[3]=C[3].substring(1,C[3].length-1);var a=C[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:a,raw:C[0],href:C[2],title:C[3]}}},t.table=function(E){var C=this.rules.block.table.exec(E);if(C){var a={type:"table",header:b(C[1]).map(function(j1){return{text:j1}}),align:C[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:C[3]&&C[3].trim()?C[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=C[0];var u=a.align.length,Q0,R0,b0,g0;for(Q0=0;Q0<u;Q0++)if(/^ *-+: *$/.test(a.align[Q0]))a.align[Q0]="right";else if(/^ *:-+: *$/.test(a.align[Q0]))a.align[Q0]="center";else if(/^ *:-+ *$/.test(a.align[Q0]))a.align[Q0]="left";else a.align[Q0]=null;u=a.rows.length;for(Q0=0;Q0<u;Q0++)a.rows[Q0]=b(a.rows[Q0],a.header.length).map(function(j1){return{text:j1}});u=a.header.length;for(R0=0;R0<u;R0++)a.header[R0].tokens=this.lexer.inline(a.header[R0].text);u=a.rows.length;for(R0=0;R0<u;R0++){g0=a.rows[R0];for(b0=0;b0<g0.length;b0++)g0[b0].tokens=this.lexer.inline(g0[b0].text)}return a}}},t.lheading=function(E){var C=this.rules.block.lheading.exec(E);if(C)return{type:"heading",raw:C[0],depth:C[2].charAt(0)==="="?1:2,text:C[1],tokens:this.lexer.inline(C[1])}},t.paragraph=function(E){var C=this.rules.block.paragraph.exec(E);if(C){var a=C[1].charAt(C[1].length-1)===`
`?C[1].slice(0,-1):C[1];return{type:"paragraph",raw:C[0],text:a,tokens:this.lexer.inline(a)}}},t.text=function(E){var C=this.rules.block.text.exec(E);if(C)return{type:"text",raw:C[0],text:C[0],tokens:this.lexer.inline(C[0])}},t.escape=function(E){var C=this.rules.inline.escape.exec(E);if(C)return{type:"escape",raw:C[0],text:K(C[1])}},t.tag=function(E){var C=this.rules.inline.tag.exec(E);if(C){if(!this.lexer.state.inLink&&/^<a /i.test(C[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&/^<\/a>/i.test(C[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(C[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(C[0]))this.lexer.state.inRawBlock=!1;return{type:this.options.sanitize?"text":"html",raw:C[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(C[0]):K(C[0]):C[0]}}},t.link=function(E){var C=this.rules.inline.link.exec(E);if(C){var a=C[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;var u=p(a.slice(0,-1),"\\");if((a.length-u.length)%2===0)return}else{var Q0=d(C[2],"()");if(Q0>-1){var R0=C[0].indexOf("!")===0?5:4,b0=R0+C[1].length+Q0;C[2]=C[2].substring(0,Q0),C[0]=C[0].substring(0,b0).trim(),C[3]=""}}var g0=C[2],j1="";if(this.options.pedantic){var z1=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(g0);if(z1)g0=z1[1],j1=z1[3]}else j1=C[3]?C[3].slice(1,-1):"";if(g0=g0.trim(),/^</.test(g0))if(this.options.pedantic&&!/>$/.test(a))g0=g0.slice(1);else g0=g0.slice(1,-1);return i(C,{href:g0?g0.replace(this.rules.inline._escapes,"$1"):g0,title:j1?j1.replace(this.rules.inline._escapes,"$1"):j1},C[0],this.lexer)}},t.reflink=function(E,C){var a;if((a=this.rules.inline.reflink.exec(E))||(a=this.rules.inline.nolink.exec(E))){var u=(a[2]||a[1]).replace(/\s+/g," ");if(u=C[u.toLowerCase()],!u||!u.href){var Q0=a[0].charAt(0);return{type:"text",raw:Q0,text:Q0}}return i(a,u,a[0],this.lexer)}},t.emStrong=function(E,C,a){if(a===void 0)a="";var u=this.rules.inline.emStrong.lDelim.exec(E);if(!u)return;if(u[3]&&a.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))return;var Q0=u[1]||u[2]||"";if(!Q0||Q0&&(a===""||this.rules.inline.punctuation.exec(a))){var R0=u[0].length-1,b0,g0,j1=R0,z1=0,z6=u[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;z6.lastIndex=0,C=C.slice(-1*E.length+R0);while((u=z6.exec(C))!=null){if(b0=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!b0)continue;if(g0=b0.length,u[3]||u[4]){j1+=g0;continue}else if(u[5]||u[6]){if(R0%3&&!((R0+g0)%3)){z1+=g0;continue}}if(j1-=g0,j1>0)continue;if(g0=Math.min(g0,g0+j1+z1),Math.min(R0,g0)%2){var Z6=E.slice(1,R0+u.index+g0);return{type:"em",raw:E.slice(0,R0+u.index+g0+1),text:Z6,tokens:this.lexer.inlineTokens(Z6)}}var o0=E.slice(2,R0+u.index+g0-1);return{type:"strong",raw:E.slice(0,R0+u.index+g0+1),text:o0,tokens:this.lexer.inlineTokens(o0)}}}},t.codespan=function(E){var C=this.rules.inline.code.exec(E);if(C){var a=C[2].replace(/\n/g," "),u=/[^ ]/.test(a),Q0=/^ /.test(a)&&/ $/.test(a);if(u&&Q0)a=a.substring(1,a.length-1);return a=K(a,!0),{type:"codespan",raw:C[0],text:a}}},t.br=function(E){var C=this.rules.inline.br.exec(E);if(C)return{type:"br",raw:C[0]}},t.del=function(E){var C=this.rules.inline.del.exec(E);if(C)return{type:"del",raw:C[0],text:C[2],tokens:this.lexer.inlineTokens(C[2])}},t.autolink=function(E,C){var a=this.rules.inline.autolink.exec(E);if(a){var u,Q0;if(a[2]==="@")u=K(this.options.mangle?C(a[1]):a[1]),Q0="mailto:"+u;else u=K(a[1]),Q0=u;return{type:"link",raw:a[0],text:u,href:Q0,tokens:[{type:"text",raw:u,text:u}]}}},t.url=function(E,C){var a;if(a=this.rules.inline.url.exec(E)){var u,Q0;if(a[2]==="@")u=K(this.options.mangle?C(a[0]):a[0]),Q0="mailto:"+u;else{var R0;do R0=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(R0!==a[0]);if(u=K(a[0]),a[1]==="www.")Q0="http://"+u;else Q0=u}return{type:"link",raw:a[0],text:u,href:Q0,tokens:[{type:"text",raw:u,text:u}]}}},t.inlineText=function(E,C){var a=this.rules.inline.text.exec(E);if(a){var u;if(this.lexer.state.inRawBlock)u=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):K(a[0]):a[0];else u=K(this.options.smartypants?C(a[0]):a[0]);return{type:"text",raw:a[0],text:u}}},Y0}(),M0={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:h,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};M0._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,M0._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,M0.def=M(M0.def).replace("label",M0._label).replace("title",M0._title).getRegex(),M0.bullet=/(?:[*+-]|\d{1,9}[.)])/,M0.listItemStart=M(/^( *)(bull) */).replace("bull",M0.bullet).getRegex(),M0.list=M(M0.list).replace(/bull/g,M0.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+M0.def.source+")").getRegex(),M0._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",M0._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,M0.html=M(M0.html,"i").replace("comment",M0._comment).replace("tag",M0._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),M0.paragraph=M(M0._paragraph).replace("hr",M0.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M0._tag).getRegex(),M0.blockquote=M(M0.blockquote).replace("paragraph",M0.paragraph).getRegex(),M0.normal=L({},M0),M0.gfm=L({},M0.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),M0.gfm.table=M(M0.gfm.table).replace("hr",M0.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M0._tag).getRegex(),M0.gfm.paragraph=M(M0._paragraph).replace("hr",M0.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",M0.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M0._tag).getRegex(),M0.pedantic=L({},M0.normal,{html:M(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",M0._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:h,paragraph:M(M0.normal._paragraph).replace("hr",M0.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",M0.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var X0={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:h,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:h,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};X0._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",X0.punctuation=M(X0.punctuation).replace(/punctuation/g,X0._punctuation).getRegex(),X0.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,X0.escapedEmSt=/\\\*|\\_/g,X0._comment=M(M0._comment).replace("(?:-->|$)","-->").getRegex(),X0.emStrong.lDelim=M(X0.emStrong.lDelim).replace(/punct/g,X0._punctuation).getRegex(),X0.emStrong.rDelimAst=M(X0.emStrong.rDelimAst,"g").replace(/punct/g,X0._punctuation).getRegex(),X0.emStrong.rDelimUnd=M(X0.emStrong.rDelimUnd,"g").replace(/punct/g,X0._punctuation).getRegex(),X0._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,X0._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,X0._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,X0.autolink=M(X0.autolink).replace("scheme",X0._scheme).replace("email",X0._email).getRegex(),X0._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,X0.tag=M(X0.tag).replace("comment",X0._comment).replace("attribute",X0._attribute).getRegex(),X0._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,X0._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,X0._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,X0.link=M(X0.link).replace("label",X0._label).replace("href",X0._href).replace("title",X0._title).getRegex(),X0.reflink=M(X0.reflink).replace("label",X0._label).replace("ref",M0._label).getRegex(),X0.nolink=M(X0.nolink).replace("ref",M0._label).getRegex(),X0.reflinkSearch=M(X0.reflinkSearch,"g").replace("reflink",X0.reflink).replace("nolink",X0.nolink).getRegex(),X0.normal=L({},X0),X0.pedantic=L({},X0.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:M(/^!?\[(label)\]\((.*?)\)/).replace("label",X0._label).getRegex(),reflink:M(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",X0._label).getRegex()}),X0.gfm=L({},X0.normal,{escape:M(X0.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),X0.gfm.url=M(X0.gfm.url,"i").replace("email",X0.gfm._extended_email).getRegex(),X0.breaks=L({},X0.gfm,{br:M(X0.br).replace("{2,}","*").getRegex(),text:M(X0.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function N1(Y0){return Y0.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function o1(Y0){var t="",o,E,C=Y0.length;for(o=0;o<C;o++){if(E=Y0.charCodeAt(o),Math.random()>0.5)E="x"+E.toString(16);t+="&#"+E+";"}return t}var E1=function(){function Y0(o){this.tokens=[],this.tokens.links=Object.create(null),this.options=o||$.defaults,this.options.tokenizer=this.options.tokenizer||new W0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var E={block:M0.normal,inline:X0.normal};if(this.options.pedantic)E.block=M0.pedantic,E.inline=X0.pedantic;else if(this.options.gfm)if(E.block=M0.gfm,this.options.breaks)E.inline=X0.breaks;else E.inline=X0.gfm;this.tokenizer.rules=E}Y0.lex=function(E,C){var a=new Y0(C);return a.lex(E)},Y0.lexInline=function(E,C){var a=new Y0(C);return a.inlineTokens(E)};var t=Y0.prototype;return t.lex=function(E){E=E.replace(/\r\n|\r/g,`
`),this.blockTokens(E,this.tokens);var C;while(C=this.inlineQueue.shift())this.inlineTokens(C.src,C.tokens);return this.tokens},t.blockTokens=function(E,C){var a=this;if(C===void 0)C=[];if(this.options.pedantic)E=E.replace(/\t/g,"    ").replace(/^ +$/gm,"");else E=E.replace(/^( *)(\t+)/gm,function(j1,z1,z6){return z1+"    ".repeat(z6.length)});var u,Q0,R0,b0;while(E){if(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(j1){if(u=j1.call({lexer:a},E,C))return E=E.substring(u.raw.length),C.push(u),!0;return!1}))continue;if(u=this.tokenizer.space(E)){if(E=E.substring(u.raw.length),u.raw.length===1&&C.length>0)C[C.length-1].raw+=`
`;else C.push(u);continue}if(u=this.tokenizer.code(E)){if(E=E.substring(u.raw.length),Q0=C[C.length-1],Q0&&(Q0.type==="paragraph"||Q0.type==="text"))Q0.raw+=`
`+u.raw,Q0.text+=`
`+u.text,this.inlineQueue[this.inlineQueue.length-1].src=Q0.text;else C.push(u);continue}if(u=this.tokenizer.fences(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.heading(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.hr(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.blockquote(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.list(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.html(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.def(E)){if(E=E.substring(u.raw.length),Q0=C[C.length-1],Q0&&(Q0.type==="paragraph"||Q0.type==="text"))Q0.raw+=`
`+u.raw,Q0.text+=`
`+u.raw,this.inlineQueue[this.inlineQueue.length-1].src=Q0.text;else if(!this.tokens.links[u.tag])this.tokens.links[u.tag]={href:u.href,title:u.title};continue}if(u=this.tokenizer.table(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.lheading(E)){E=E.substring(u.raw.length),C.push(u);continue}if(R0=E,this.options.extensions&&this.options.extensions.startBlock)(function(){var j1=1/0,z1=E.slice(1),z6=void 0;if(a.options.extensions.startBlock.forEach(function(Z6){if(z6=Z6.call({lexer:this},z1),typeof z6==="number"&&z6>=0)j1=Math.min(j1,z6)}),j1<1/0&&j1>=0)R0=E.substring(0,j1+1)})();if(this.state.top&&(u=this.tokenizer.paragraph(R0))){if(Q0=C[C.length-1],b0&&Q0.type==="paragraph")Q0.raw+=`
`+u.raw,Q0.text+=`
`+u.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Q0.text;else C.push(u);b0=R0.length!==E.length,E=E.substring(u.raw.length);continue}if(u=this.tokenizer.text(E)){if(E=E.substring(u.raw.length),Q0=C[C.length-1],Q0&&Q0.type==="text")Q0.raw+=`
`+u.raw,Q0.text+=`
`+u.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Q0.text;else C.push(u);continue}if(E){var g0="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(g0);break}else throw Error(g0)}}return this.state.top=!0,C},t.inline=function(E,C){if(C===void 0)C=[];return this.inlineQueue.push({src:E,tokens:C}),C},t.inlineTokens=function(E,C){var a=this;if(C===void 0)C=[];var u,Q0,R0,b0=E,g0,j1,z1;if(this.tokens.links){var z6=Object.keys(this.tokens.links);if(z6.length>0){while((g0=this.tokenizer.rules.inline.reflinkSearch.exec(b0))!=null)if(z6.includes(g0[0].slice(g0[0].lastIndexOf("[")+1,-1)))b0=b0.slice(0,g0.index)+"["+c("a",g0[0].length-2)+"]"+b0.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((g0=this.tokenizer.rules.inline.blockSkip.exec(b0))!=null)b0=b0.slice(0,g0.index)+"["+c("a",g0[0].length-2)+"]"+b0.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while((g0=this.tokenizer.rules.inline.escapedEmSt.exec(b0))!=null)b0=b0.slice(0,g0.index)+"++"+b0.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);while(E){if(!j1)z1="";if(j1=!1,this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(o0){if(u=o0.call({lexer:a},E,C))return E=E.substring(u.raw.length),C.push(u),!0;return!1}))continue;if(u=this.tokenizer.escape(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.tag(E)){if(E=E.substring(u.raw.length),Q0=C[C.length-1],Q0&&u.type==="text"&&Q0.type==="text")Q0.raw+=u.raw,Q0.text+=u.text;else C.push(u);continue}if(u=this.tokenizer.link(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.reflink(E,this.tokens.links)){if(E=E.substring(u.raw.length),Q0=C[C.length-1],Q0&&u.type==="text"&&Q0.type==="text")Q0.raw+=u.raw,Q0.text+=u.text;else C.push(u);continue}if(u=this.tokenizer.emStrong(E,b0,z1)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.codespan(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.br(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.del(E)){E=E.substring(u.raw.length),C.push(u);continue}if(u=this.tokenizer.autolink(E,o1)){E=E.substring(u.raw.length),C.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(E,o1))){E=E.substring(u.raw.length),C.push(u);continue}if(R0=E,this.options.extensions&&this.options.extensions.startInline)(function(){var o0=1/0,r6=E.slice(1),i6=void 0;if(a.options.extensions.startInline.forEach(function($J){if(i6=$J.call({lexer:this},r6),typeof i6==="number"&&i6>=0)o0=Math.min(o0,i6)}),o0<1/0&&o0>=0)R0=E.substring(0,o0+1)})();if(u=this.tokenizer.inlineText(R0,N1)){if(E=E.substring(u.raw.length),u.raw.slice(-1)!=="_")z1=u.raw.slice(-1);if(j1=!0,Q0=C[C.length-1],Q0&&Q0.type==="text")Q0.raw+=u.raw,Q0.text+=u.text;else C.push(u);continue}if(E){var Z6="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(Z6);break}else throw Error(Z6)}}return C},Y(Y0,null,[{key:"rules",get:function(){return{block:M0,inline:X0}}}]),Y0}(),Q1=function(){function Y0(o){this.options=o||$.defaults}var t=Y0.prototype;return t.code=function(E,C,a){var u=(C||"").match(/\S*/)[0];if(this.options.highlight){var Q0=this.options.highlight(E,u);if(Q0!=null&&Q0!==E)a=!0,E=Q0}if(E=E.replace(/\n$/,"")+`
`,!u)return"<pre><code>"+(a?E:K(E,!0))+`</code></pre>
`;return'<pre><code class="'+this.options.langPrefix+K(u,!0)+'">'+(a?E:K(E,!0))+`</code></pre>
`},t.blockquote=function(E){return`<blockquote>
`+E+`</blockquote>
`},t.html=function(E){return E},t.heading=function(E,C,a,u){if(this.options.headerIds){var Q0=this.options.headerPrefix+u.slug(a);return"<h"+C+' id="'+Q0+'">'+E+"</h"+C+`>
`}return"<h"+C+">"+E+"</h"+C+`>
`},t.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},t.list=function(E,C,a){var u=C?"ol":"ul",Q0=C&&a!==1?' start="'+a+'"':"";return"<"+u+Q0+`>
`+E+"</"+u+`>
`},t.listitem=function(E){return"<li>"+E+`</li>
`},t.checkbox=function(E){return"<input "+(E?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(E){return"<p>"+E+`</p>
`},t.table=function(E,C){if(C)C="<tbody>"+C+"</tbody>";return`<table>
<thead>
`+E+`</thead>
`+C+`</table>
`},t.tablerow=function(E){return`<tr>
`+E+`</tr>
`},t.tablecell=function(E,C){var a=C.header?"th":"td",u=C.align?"<"+a+' align="'+C.align+'">':"<"+a+">";return u+E+("</"+a+`>
`)},t.strong=function(E){return"<strong>"+E+"</strong>"},t.em=function(E){return"<em>"+E+"</em>"},t.codespan=function(E){return"<code>"+E+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(E){return"<del>"+E+"</del>"},t.link=function(E,C,a){if(E=N(this.options.sanitize,this.options.baseUrl,E),E===null)return a;var u='<a href="'+K(E)+'"';if(C)u+=' title="'+C+'"';return u+=">"+a+"</a>",u},t.image=function(E,C,a){if(E=N(this.options.sanitize,this.options.baseUrl,E),E===null)return a;var u='<img src="'+E+'" alt="'+a+'"';if(C)u+=' title="'+C+'"';return u+=this.options.xhtml?"/>":">",u},t.text=function(E){return E},Y0}(),T1=function(){function Y0(){}var t=Y0.prototype;return t.strong=function(E){return E},t.em=function(E){return E},t.codespan=function(E){return E},t.del=function(E){return E},t.html=function(E){return E},t.text=function(E){return E},t.link=function(E,C,a){return""+a},t.image=function(E,C,a){return""+a},t.br=function(){return""},Y0}(),r1=function(){function Y0(){this.seen={}}var t=Y0.prototype;return t.serialize=function(E){return E.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(E,C){var a=E,u=0;if(this.seen.hasOwnProperty(a)){u=this.seen[E];do u++,a=E+"-"+u;while(this.seen.hasOwnProperty(a))}if(!C)this.seen[E]=u,this.seen[a]=0;return a},t.slug=function(E,C){if(C===void 0)C={};var a=this.serialize(E);return this.getNextSafeSlug(a,C.dryrun)},Y0}(),x6=function(){function Y0(o){this.options=o||$.defaults,this.options.renderer=this.options.renderer||new Q1,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new T1,this.slugger=new r1}Y0.parse=function(E,C){var a=new Y0(C);return a.parse(E)},Y0.parseInline=function(E,C){var a=new Y0(C);return a.parseInline(E)};var t=Y0.prototype;return t.parse=function(E,C){if(C===void 0)C=!0;var a="",u,Q0,R0,b0,g0,j1,z1,z6,Z6,o0,r6,i6,$J,m1,_5,YG,ZG,oJ,qQ,QG=E.length;for(u=0;u<QG;u++){if(o0=E[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o0.type]){if(qQ=this.options.extensions.renderers[o0.type].call({parser:this},o0),qQ!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o0.type)){a+=qQ||"";continue}}switch(o0.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(o0.tokens),o0.depth,A(this.parseInline(o0.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(o0.text,o0.lang,o0.escaped);continue}case"table":{z6="",z1="",b0=o0.header.length;for(Q0=0;Q0<b0;Q0++)z1+=this.renderer.tablecell(this.parseInline(o0.header[Q0].tokens),{header:!0,align:o0.align[Q0]});z6+=this.renderer.tablerow(z1),Z6="",b0=o0.rows.length;for(Q0=0;Q0<b0;Q0++){j1=o0.rows[Q0],z1="",g0=j1.length;for(R0=0;R0<g0;R0++)z1+=this.renderer.tablecell(this.parseInline(j1[R0].tokens),{header:!1,align:o0.align[R0]});Z6+=this.renderer.tablerow(z1)}a+=this.renderer.table(z6,Z6);continue}case"blockquote":{Z6=this.parse(o0.tokens),a+=this.renderer.blockquote(Z6);continue}case"list":{r6=o0.ordered,i6=o0.start,$J=o0.loose,b0=o0.items.length,Z6="";for(Q0=0;Q0<b0;Q0++){if(_5=o0.items[Q0],YG=_5.checked,ZG=_5.task,m1="",_5.task)if(oJ=this.renderer.checkbox(YG),$J)if(_5.tokens.length>0&&_5.tokens[0].type==="paragraph"){if(_5.tokens[0].text=oJ+" "+_5.tokens[0].text,_5.tokens[0].tokens&&_5.tokens[0].tokens.length>0&&_5.tokens[0].tokens[0].type==="text")_5.tokens[0].tokens[0].text=oJ+" "+_5.tokens[0].tokens[0].text}else _5.tokens.unshift({type:"text",text:oJ});else m1+=oJ;m1+=this.parse(_5.tokens,$J),Z6+=this.renderer.listitem(m1,ZG,YG)}a+=this.renderer.list(Z6,r6,i6);continue}case"html":{a+=this.renderer.html(o0.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(o0.tokens));continue}case"text":{Z6=o0.tokens?this.parseInline(o0.tokens):o0.text;while(u+1<QG&&E[u+1].type==="text")o0=E[++u],Z6+=`
`+(o0.tokens?this.parseInline(o0.tokens):o0.text);a+=C?this.renderer.paragraph(Z6):Z6;continue}default:{var GG='Token with "'+o0.type+'" type was not found.';if(this.options.silent){console.error(GG);return}else throw Error(GG)}}}return a},t.parseInline=function(E,C){C=C||this.renderer;var a="",u,Q0,R0,b0=E.length;for(u=0;u<b0;u++){if(Q0=E[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Q0.type]){if(R0=this.options.extensions.renderers[Q0.type].call({parser:this},Q0),R0!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Q0.type)){a+=R0||"";continue}}switch(Q0.type){case"escape":{a+=C.text(Q0.text);break}case"html":{a+=C.html(Q0.text);break}case"link":{a+=C.link(Q0.href,Q0.title,this.parseInline(Q0.tokens,C));break}case"image":{a+=C.image(Q0.href,Q0.title,Q0.text);break}case"strong":{a+=C.strong(this.parseInline(Q0.tokens,C));break}case"em":{a+=C.em(this.parseInline(Q0.tokens,C));break}case"codespan":{a+=C.codespan(Q0.text);break}case"br":{a+=C.br();break}case"del":{a+=C.del(this.parseInline(Q0.tokens,C));break}case"text":{a+=C.text(Q0.text);break}default:{var g0='Token with "'+Q0.type+'" type was not found.';if(this.options.silent){console.error(g0);return}else throw Error(g0)}}}return a},Y0}();function u0(Y0,t,o){if(typeof Y0>"u"||Y0===null)throw Error("marked(): input parameter is undefined or null");if(typeof Y0!=="string")throw Error("marked(): input parameter is of type "+Object.prototype.toString.call(Y0)+", string expected");if(typeof t==="function")o=t,t=null;if(t=L({},u0.defaults,t||{}),s(t),o){var E=t.highlight,C;try{C=E1.lex(Y0,t)}catch(b0){return o(b0)}var a=function(g0){var j1;if(!g0)try{if(t.walkTokens)u0.walkTokens(C,t.walkTokens);j1=x6.parse(C,t)}catch(z1){g0=z1}return t.highlight=E,g0?o(g0):o(null,j1)};if(!E||E.length<3)return a();if(delete t.highlight,!C.length)return a();var u=0;if(u0.walkTokens(C,function(b0){if(b0.type==="code")u++,setTimeout(function(){E(b0.text,b0.lang,function(g0,j1){if(g0)return a(g0);if(j1!=null&&j1!==b0.text)b0.text=j1,b0.escaped=!0;if(u--,u===0)a()})},0)}),u===0)a();return}function Q0(b0){if(b0.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+K(b0.message+"",!0)+"</pre>";throw b0}try{var R0=E1.lex(Y0,t);if(t.walkTokens){if(t.async)return Promise.all(u0.walkTokens(R0,t.walkTokens)).then(function(){return x6.parse(R0,t)}).catch(Q0);u0.walkTokens(R0,t.walkTokens)}return x6.parse(R0,t)}catch(b0){Q0(b0)}}u0.options=u0.setOptions=function(Y0){return L(u0.defaults,Y0),U(u0.defaults),u0},u0.getDefaults=q,u0.defaults=$.defaults,u0.use=function(){for(var Y0=arguments.length,t=Array(Y0),o=0;o<Y0;o++)t[o]=arguments[o];var E=L.apply(void 0,[{}].concat(t)),C=u0.defaults.extensions||{renderers:{},childTokens:{}},a;t.forEach(function(u){if(u.extensions)a=!0,u.extensions.forEach(function(R0){if(!R0.name)throw Error("extension name required");if(R0.renderer){var b0=C.renderers?C.renderers[R0.name]:null;if(b0)C.renderers[R0.name]=function(){for(var g0=arguments.length,j1=Array(g0),z1=0;z1<g0;z1++)j1[z1]=arguments[z1];var z6=R0.renderer.apply(this,j1);if(z6===!1)z6=b0.apply(this,j1);return z6};else C.renderers[R0.name]=R0.renderer}if(R0.tokenizer){if(!R0.level||R0.level!=="block"&&R0.level!=="inline")throw Error("extension level must be 'block' or 'inline'");if(C[R0.level])C[R0.level].unshift(R0.tokenizer);else C[R0.level]=[R0.tokenizer];if(R0.start){if(R0.level==="block")if(C.startBlock)C.startBlock.push(R0.start);else C.startBlock=[R0.start];else if(R0.level==="inline")if(C.startInline)C.startInline.push(R0.start);else C.startInline=[R0.start]}}if(R0.childTokens)C.childTokens[R0.name]=R0.childTokens});if(u.renderer)(function(){var R0=u0.defaults.renderer||new Q1,b0=function(z1){var z6=R0[z1];R0[z1]=function(){for(var Z6=arguments.length,o0=Array(Z6),r6=0;r6<Z6;r6++)o0[r6]=arguments[r6];var i6=u.renderer[z1].apply(R0,o0);if(i6===!1)i6=z6.apply(R0,o0);return i6}};for(var g0 in u.renderer)b0(g0);E.renderer=R0})();if(u.tokenizer)(function(){var R0=u0.defaults.tokenizer||new W0,b0=function(z1){var z6=R0[z1];R0[z1]=function(){for(var Z6=arguments.length,o0=Array(Z6),r6=0;r6<Z6;r6++)o0[r6]=arguments[r6];var i6=u.tokenizer[z1].apply(R0,o0);if(i6===!1)i6=z6.apply(R0,o0);return i6}};for(var g0 in u.tokenizer)b0(g0);E.tokenizer=R0})();if(u.walkTokens){var Q0=u0.defaults.walkTokens;E.walkTokens=function(R0){var b0=[];if(b0.push(u.walkTokens.call(this,R0)),Q0)b0=b0.concat(Q0.call(this,R0));return b0}}if(a)E.extensions=C;u0.setOptions(E)})},u0.walkTokens=function(Y0,t){var o=[],E=function(){var Q0=a.value;switch(o=o.concat(t.call(u0,Q0)),Q0.type){case"table":{for(var R0=G(Q0.header),b0;!(b0=R0()).done;){var g0=b0.value;o=o.concat(u0.walkTokens(g0.tokens,t))}for(var j1=G(Q0.rows),z1;!(z1=j1()).done;){var z6=z1.value;for(var Z6=G(z6),o0;!(o0=Z6()).done;){var r6=o0.value;o=o.concat(u0.walkTokens(r6.tokens,t))}}break}case"list":{o=o.concat(u0.walkTokens(Q0.items,t));break}default:if(u0.defaults.extensions&&u0.defaults.extensions.childTokens&&u0.defaults.extensions.childTokens[Q0.type])u0.defaults.extensions.childTokens[Q0.type].forEach(function(i6){o=o.concat(u0.walkTokens(Q0[i6],t))});else if(Q0.tokens)o=o.concat(u0.walkTokens(Q0.tokens,t))}};for(var C=G(Y0),a;!(a=C()).done;)E();return o},u0.parseInline=function(Y0,t){if(typeof Y0>"u"||Y0===null)throw Error("marked.parseInline(): input parameter is undefined or null");if(typeof Y0!=="string")throw Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Y0)+", string expected");t=L({},u0.defaults,t||{}),s(t);try{var o=E1.lexInline(Y0,t);if(t.walkTokens)u0.walkTokens(o,t.walkTokens);return x6.parseInline(o,t)}catch(E){if(E.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+K(E.message+"",!0)+"</pre>";throw E}},u0.Parser=x6,u0.parser=x6.parse,u0.Renderer=Q1,u0.TextRenderer=T1,u0.Lexer=E1,u0.lexer=E1.lex,u0.Tokenizer=W0,u0.Slugger=r1,u0.parse=u0;var{options:U5,setOptions:v1,use:S5,walkTokens:nJ,parseInline:O5}=u0,W9=u0,XG=x6.parse,wq=E1.lex;$.Lexer=E1,$.Parser=x6,$.Renderer=Q1,$.Slugger=r1,$.TextRenderer=T1,$.Tokenizer=W0,$.getDefaults=q,$.lexer=wq,$.marked=u0,$.options=U5,$.parse=W9,$.parseInline=O5,$.parser=XG,$.setOptions=v1,$.use=S5,$.walkTokens=nJ,Object.defineProperty($,"__esModule",{value:!0})})})();p20=p7.Lexer||fy.Lexer,m20=p7.Parser||fy.Parser,u20=p7.Renderer||fy.Renderer,c20=p7.Slugger||fy.Slugger,l20=p7.TextRenderer||fy.TextRenderer,d20=p7.Tokenizer||fy.Tokenizer,s20=p7.getDefaults||fy.getDefaults,a20=p7.lexer||fy.lexer,SJ=p7.marked||fy.marked,r20=p7.options||fy.options,i20=p7.parse||fy.parse,n20=p7.parseInline||fy.parseInline,o20=p7.parser||fy.parser,t20=p7.setOptions||fy.setOptions,e20=p7.use||fy.use,JG0=p7.walkTokens||fy.walkTokens});function Sn(J){return JSON.stringify(J,XG0)}function kW(J){let $=JSON.parse(J);return $=gy($),$}function XG0(J,$){if($ instanceof RegExp)return{$mid:2,source:$.source,flags:$.flags};return $}function gy(J,$=0){if(!J||$>200)return J;if(typeof J==="object"){switch(J.$mid){case 1:return C0.revive(J);case 2:return new RegExp(J.source,J.flags);case 17:return new Date(J.source)}if(J instanceof BP||J instanceof Uint8Array)return J;if(Array.isArray(J))for(let X=0;X<J.length;++X)J[X]=gy(J[X],$+1);else for(let X in J)if(Object.hasOwnProperty.call(J,X))J[X]=gy(J[X],$+1)}return J}var iR=w(()=>{uj();V5()});function wz(J,$={},X={}){var Y,Z;let Q=new $0,G=!1,q=mR($),U=function(A){let D;try{D=kW(decodeURIComponent(A))}catch(M){}if(!D)return A;return D=HK(D,(M)=>{if(J.uris&&J.uris[M])return C0.revive(J.uris[M]);else return}),encodeURIComponent(JSON.stringify(D))},z=function(A,D){let M=J.uris&&J.uris[A],R=C0.revive(M);if(D){if(A.startsWith(G1.data+":"))return A;if(!R)R=C0.parse(A);return XP.uriToBrowserUri(R).toString(!0)}if(!R)return A;if(C0.parse(A).toString()===R.toString())return A;if(R.query)R=R.with({query:U(R.query)});return R.toString()},H=new SJ.Renderer;H.image=py.image,H.link=py.link,H.paragraph=py.paragraph;let j=[],V=[];if($.codeBlockRendererSync)H.code=(A,D)=>{let M=vy.nextId(),R=$.codeBlockRendererSync(Cn(D),A);return V.push([M,R]),`<div class="code" data-code="${M}">${_G(A)}</div>`};else if($.codeBlockRenderer)H.code=(A,D)=>{let M=vy.nextId(),R=$.codeBlockRenderer(Cn(D),A);return j.push(R.then((O)=>[M,O])),`<div class="code" data-code="${M}">${_G(A)}</div>`};if($.actionHandler){let A=function(R){let O=R.target;if(O.tagName!=="A"){if(O=O.parentElement,!O||O.tagName!=="A")return}try{let N=O.dataset.href;if(N){if(J.baseUri)N=my(C0.from(J.baseUri),N);$.actionHandler.callback(N,R)}}catch(N){$1(N)}finally{R.preventDefault()}},D=$.actionHandler.disposables.add(new H1(q,"click")),M=$.actionHandler.disposables.add(new H1(q,"auxclick"));$.actionHandler.disposables.add(q0.any(D.event,M.event)((R)=>{let O=new T8(O0(q),R);if(!O.leftButton&&!O.middleButton)return;A(O)})),$.actionHandler.disposables.add(r(q,"keydown",(R)=>{let O=new R1(R);if(!O.equals(10)&&!O.equals(3))return;A(O)}))}if(!J.supportHtml)X.sanitizer=(A)=>{return(J.isTrusted?A.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?A:""},X.sanitize=!0,X.silent=!0;X.renderer=H;let W=(Y=J.value)!==null&&Y!==void 0?Y:"";if(W.length>1e5)W=`${W.substr(0,1e5)}…`;if(J.supportThemeIcons)W=En(W);let B;if($.fillInIncompleteTokens){let A={...SJ.defaults,...X},D=SJ.lexer(W,A),M=zG0(D);B=SJ.parser(M,A)}else B=SJ.parse(W,X);if(J.supportThemeIcons)B=xJ(B).map((D)=>typeof D==="string"?D:D.outerHTML).join("");let P=new DOMParser().parseFromString(uy(J,B),"text/html");if(P.body.querySelectorAll("img").forEach((A)=>{let D=A.getAttribute("src");if(D){let M=D;try{if(J.baseUri)M=my(C0.from(J.baseUri),M)}catch(R){}A.src=z(M,!0)}}),P.body.querySelectorAll("a").forEach((A)=>{let D=A.getAttribute("href");if(A.setAttribute("href",""),!D||/^data:|javascript:/i.test(D)||/^command:/i.test(D)&&!J.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(D))A.replaceWith(...A.childNodes);else{let M=z(D,!1);if(J.baseUri)M=my(C0.from(J.baseUri),D);A.dataset.href=M}}),q.innerHTML=uy(J,P.body.innerHTML),j.length>0)Promise.all(j).then((A)=>{var D,M;if(G)return;let R=new Map(A),O=q.querySelectorAll("div[data-code]");for(let N of O){let T=R.get((D=N.dataset.code)!==null&&D!==void 0?D:"");if(T)x5(N,T)}(M=$.asyncRenderCallback)===null||M===void 0||M.call($)});else if(V.length>0){let A=new Map(V),D=q.querySelectorAll("div[data-code]");for(let M of D){let R=A.get((Z=M.dataset.code)!==null&&Z!==void 0?Z:"");if(R)x5(M,R)}}if($.asyncRenderCallback)for(let A of q.getElementsByTagName("img")){let D=Q.add(r(A,"load",()=>{D.dispose(),$.asyncRenderCallback()}))}return{element:q,dispose:()=>{G=!0,Q.dispose()}}}function Cn(J){if(!J)return"";let $=J.split(/[\s+|:|,|\{|\?]/,1);if($.length)return $[0];return J}function my(J,$){if(/^\w[\w\d+.-]*:/.test($))return $;if(J.path.endsWith("/"))return hE(J,$).toString();else return hE(YR(J),$).toString()}function uy(J,$){let{config:X,allowedSchemes:Y}=ZG0(J);Lj("uponSanitizeAttribute",(Q,G)=>{var q;if(G.attrName==="style"||G.attrName==="class"){if(Q.tagName==="SPAN"){if(G.attrName==="style"){G.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(G.attrValue);return}else if(G.attrName==="class"){G.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(G.attrValue);return}}G.keepAttr=!1;return}else if(Q.tagName==="INPUT"&&((q=Q.attributes.getNamedItem("type"))===null||q===void 0?void 0:q.value)==="checkbox"){if(G.attrName==="type"&&G.attrValue==="checkbox"||G.attrName==="disabled"||G.attrName==="checked"){G.keepAttr=!0;return}G.keepAttr=!1}}),Lj("uponSanitizeElement",(Q,G)=>{var q,U;if(G.tagName==="input")if(((q=Q.attributes.getNamedItem("type"))===null||q===void 0?void 0:q.value)==="checkbox")Q.setAttribute("disabled","");else(U=Q.parentElement)===null||U===void 0||U.removeChild(Q)});let Z=yp(Y);try{return eA($,{...X,RETURN_TRUSTED_TYPE:!0})}finally{JP("uponSanitizeAttribute"),Z.dispose()}}function ZG0(J){let $=[G1.http,G1.https,G1.mailto,G1.data,G1.file,G1.vscodeFileResource,G1.vscodeRemote,G1.vscodeRemoteResource];if(J.isTrusted)$.push(G1.command);return{config:{ALLOWED_TAGS:[...xp],ALLOWED_ATTR:YG0,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:$}}function vn(J){return typeof J==="string"?J:QG0(J)}function QG0(J){var $;let X=($=J.value)!==null&&$!==void 0?$:"";if(X.length>1e5)X=`${X.substr(0,1e5)}…`;let Y=SJ.parse(X,{renderer:qG0.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(Z)=>{var Q;return(Q=GG0.get(Z))!==null&&Q!==void 0?Q:Z});return uy({isTrusted:!1},Y).toString()}function cy(J){let $="";return J.forEach((X)=>{$+=X.raw}),$}function UG0(J){var $,X;for(let Y=0;Y<J.tokens.length;Y++){let Z=J.tokens[Y];if(Z.type==="text"){let Q=Z.raw.split(`
`),G=Q[Q.length-1];if(G.includes("`"))return jG0(J);else if(G.includes("**"))return AG0(J);else if(G.match(/\*\w/))return VG0(J);else if(G.match(/(^|\s)__\w/))return PG0(J);else if(G.match(/(^|\s)_\w/))return WG0(J);else if(G.match(/(^|\s)\[.*\]\(\w*/)){let q=J.tokens.slice(Y+1);if((($=q[0])===null||$===void 0?void 0:$.type)==="link"&&((X=q[1])===null||X===void 0?void 0:X.type)==="text"&&q[1].raw.match(/^ *"[^"]*$/))return FG0(J);return BG0(J)}else if(G.match(/(^|\s)\[\w/))return KG0(J)}}return}function zG0(J){let $,X;for($=0;$<J.length;$++){let Y=J[$];if(Y.type==="paragraph"&&Y.raw.match(/(\n|^)```/)){X=HG0(J.slice($));break}if(Y.type==="paragraph"&&Y.raw.match(/(\n|^)\|/)){X=DG0(J.slice($));break}if($===J.length-1&&Y.type==="paragraph"){let Z=UG0(Y);if(Z){X=[Z];break}}}if(X){let Y=[...J.slice(0,$),...X];return Y.links=J.links,Y}return J}function HG0(J){let $=cy(J);return SJ.lexer($+"\n```")}function jG0(J){return B2(J,"`")}function VG0(J){return B2(J,"*")}function WG0(J){return B2(J,"_")}function BG0(J){return B2(J,")")}function FG0(J){return B2(J,'")')}function KG0(J){return B2(J,"](about:blank)")}function AG0(J){return B2(J,"**")}function PG0(J){return B2(J,"__")}function B2(J,$){let X=cy(Array.isArray(J)?J:[J]);return SJ.lexer(X+$)[0]}function DG0(J){let $=cy(J),X=$.split(`
`),Y,Z=!1;for(let Q=0;Q<X.length;Q++){let G=X[Q].trim();if(typeof Y>"u"&&G.match(/^\s*\|/)){let q=G.match(/(\|[^\|]+)(?=\||$)/g);if(q)Y=q.length}else if(typeof Y==="number")if(G.match(/^\s*\|/)){if(Q!==X.length-1)return;Z=!0}else return}if(typeof Y==="number"&&Y>0){let Q=Z?X.slice(0,-1).join(`
`):$,G=!!Q.match(/\|\s*$/),q=Q+(G?"":"|")+`
|${" --- |".repeat(Y)}`;return SJ.lexer(q)}return}var py,YG0,GG0,qG0;var nR=w(()=>{T0();$P();k$();Ny();d8();O4();x3();O1();_0();S3();Nz();hy();z0();bn();iR();e9();n7();cX();X1();V5();py=Object.freeze({image:(J,$,X)=>{let Y=[],Z=[];if(J)({href:J,dimensions:Y}=xn(J)),Z.push(`src="${LW(J)}"`);if(X)Z.push(`alt="${LW(X)}"`);if($)Z.push(`title="${LW($)}"`);if(Y.length)Z=Z.concat(Y);return"<img "+Z.join(" ")+">"},paragraph:(J)=>{return`<p>${J}</p>`},link:(J,$,X)=>{if(typeof J!=="string")return"";if(J===X)X=aR(X);return $=typeof $==="string"?LW(aR($)):"",J=aR(J),J=J.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${J}" title="${$||J}" draggable="false">${X}</a>`}});YG0=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];GG0=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),qG0=new s9(()=>{let J=new SJ.Renderer;return J.code=($)=>{return $},J.blockquote=($)=>{return $},J.html=($)=>{return""},J.heading=($,X,Y)=>{return $+`
`},J.hr=()=>{return""},J.list=($,X)=>{return $},J.listitem=($)=>{return $+`
`},J.paragraph=($)=>{return $+`
`},J.table=($,X)=>{return $+X+`
`},J.tablerow=($)=>{return $},J.tablecell=($,X)=>{return $+" "},J.strong=($)=>{return $},J.em=($)=>{return $},J.codespan=($)=>{return $},J.br=()=>{return`
`},J.del=($)=>{return $},J.image=($,X,Y)=>{return""},J.text=($)=>{return $},J.link=($,X,Y)=>{return Y},J})});var hn=w(()=>{K0(".monaco-editor .rendered-markdown kbd{background-color:var(--vscode-keybindingLabel-background);color:var(--vscode-keybindingLabel-foreground);border-style:solid;border-width:1px;border-color:var(--vscode-keybindingLabel-border);border-bottom-color:var(--vscode-keybindingLabel-bottomBorder);box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);vertical-align:middle;border-radius:3px;padding:1px 3px}")});async function dy(J,$,X){try{return await J.open($,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:MG0(X)})}catch(Y){return $1(Y),!1}}function MG0(J){if(J===!0)return!0;if(J&&Array.isArray(J.enabledCommands))return J.enabledCommands;return!1}var RG0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},fn=function(J,$){return function(X,Y){$(X,Y,J)}},ly,C3;var sy=w(()=>{nR();kQ();O1();_0();z0();hn();HJ();I4();OJ();bI();y3();C3=ly=class{constructor($,X,Y){this._options=$,this._languageService=X,this._openerService=Y,this._onDidRenderAsync=new x,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render($,X,Y){if(!$)return{element:document.createElement("span"),dispose:()=>{}};let Z=new $0,Q=Z.add(wz($,{...this._getRenderOptions($,Z),...X},Y));return Q.element.classList.add("rendered-markdown"),{element:Q.element,dispose:()=>Z.dispose()}}_getRenderOptions($,X){return{codeBlockRenderer:async(Y,Z)=>{var Q,G,q;let U;if(Y)U=this._languageService.getLanguageIdByLanguageName(Y);else if(this._options.editor)U=(Q=this._options.editor.getModel())===null||Q===void 0?void 0:Q.getLanguageId();if(!U)U=m5;let z=await sr(this._languageService,Z,U),H=document.createElement("span");if(H.innerHTML=(q=(G=ly._ttpTokenizer)===null||G===void 0?void 0:G.createHTML(z))!==null&&q!==void 0?q:z,this._options.editor){let j=this._options.editor.getOption(50);S6(H,j)}else if(this._options.codeBlockFontFamily)H.style.fontFamily=this._options.codeBlockFontFamily;if(this._options.codeBlockFontSize!==void 0)H.style.fontSize=this._options.codeBlockFontSize;return H},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:(Y)=>dy(this._openerService,Y,$.isTrusted),disposables:X}}}};C3._ttpTokenizer=J4("tokenizeToString",{createHTML(J){return J}});C3=ly=RG0([fn(1,j6),fn(2,oX)],C3)});class gn{constructor(J){this._element=J,this.targetElements=[this._element]}dispose(){}}var OG0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},EW=function(J,$){return function(X,Y){$(X,Y,J)}},eX,oR,ay;var pn=w(()=>{Qn();z0();_0();T0();EJ();H7();O8();Un();SX();y3();s0();sy();S3();c0();L1();P$();gQ();eX=B0,oR=class extends E8{get _targetWindow(){return O0(this._target.targetElements[0])}get _targetDocumentElement(){return O0(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked($){if(this._isLocked===$)return;this._isLocked=$,this._hoverContainer.classList.toggle("locked",this._isLocked)}constructor($,X,Y,Z,Q,G){var q,U,z,H,j,V,W,B;super();if(this._keybindingService=X,this._configurationService=Y,this._openerService=Z,this._instantiationService=Q,this._accessibilityService=G,this._messageListeners=new $0,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new x),this._onRequestLayout=this._register(new x),this._linkHandler=$.linkHandler||((R)=>{return dy(this._openerService,R,yZ($.content)?$.content.isTrusted:void 0)}),this._target="targetElements"in $.target?$.target:new gn($.target),this._hoverPointer=((q=$.appearance)===null||q===void 0?void 0:q.showPointer)?eX("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Oy),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(U=$.appearance)===null||U===void 0?void 0:U.compact)this._hover.containerDomNode.classList.add("workbench-hover","compact");if((z=$.appearance)===null||z===void 0?void 0:z.skipFadeInAnimation)this._hover.containerDomNode.classList.add("skip-fade-in");if($.additionalClasses)this._hover.containerDomNode.classList.add(...$.additionalClasses);if((H=$.position)===null||H===void 0?void 0:H.forcePosition)this._forcePosition=!0;if($.trapFocus)this._enableFocusTraps=!0;this._hoverPosition=(V=(j=$.position)===null||j===void 0?void 0:j.hoverPosition)!==null&&V!==void 0?V:3,this.onmousedown(this._hover.containerDomNode,(R)=>R.stopPropagation()),this.onkeydown(this._hover.containerDomNode,(R)=>{if(R.equals(9))this.dispose()}),this._register(r(this._targetWindow,"blur",()=>this.dispose()));let K=eX("div.hover-row.markdown-hover"),P=eX("div.hover-contents");if(typeof $.content==="string")P.textContent=$.content,P.style.whiteSpace="pre-wrap";else if($.content instanceof HTMLElement)P.appendChild($.content),P.classList.add("html-hover-contents");else{let R=$.content,O=this._instantiationService.createInstance(C3,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Q7.fontFamily}),{element:N}=O.render(R,{actionHandler:{callback:(T)=>this._linkHandler(T),disposables:this._messageListeners},asyncRenderCallback:()=>{P.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});P.appendChild(N)}if(K.appendChild(P),this._hover.contentsDomNode.appendChild(K),$.actions&&$.actions.length>0){let R=eX("div.hover-row.status-bar"),O=eX("div.actions");$.actions.forEach((N)=>{let T=this._keybindingService.lookupKeybinding(N.commandId),S=T?T.getLabel():null;pR.render(O,{label:N.label,commandId:N.commandId,run:(v)=>{N.run(v),this.dispose()},iconClass:N.iconClass},S)}),R.appendChild(O),this._hover.containerDomNode.appendChild(R)}if(this._hoverContainer=eX("div.workbench-hover-container"),this._hoverPointer)this._hoverContainer.appendChild(this._hoverPointer);this._hoverContainer.appendChild(this._hover.containerDomNode);let A;if($.actions&&$.actions.length>0)A=!1;else if(((W=$.persistence)===null||W===void 0?void 0:W.hideOnHover)===void 0)A=typeof $.content==="string"||yZ($.content)&&!$.content.value.includes("](")&&!$.content.value.includes("</a>");else A=$.persistence.hideOnHover;if(A&&((B=$.appearance)===null||B===void 0?void 0:B.showHoverHint)){let R=eX("div.hover-row.status-bar"),O=eX("div.info");O.textContent=F("hoverhint","Hold {0} key to mouse over",t0?"Option":"Alt"),R.appendChild(O),this._hover.containerDomNode.appendChild(R)}let D=[...this._target.targetElements];if(!A)D.push(this._hoverContainer);let M=this._register(new ay(D));if(this._register(M.onMouseOut(()=>{if(!this._isLocked)this.dispose()})),A){let R=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new ay(R)),this._register(this._lockMouseTracker.onMouseOut(()=>{if(!this._isLocked)this.dispose()}))}else this._lockMouseTracker=M}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;let $=this._hover.containerDomNode,X=this.findLastFocusableChild(this._hover.containerDomNode);if(X){let Y=GU(this._hoverContainer,eX("div")),Z=j0(this._hoverContainer,eX("div"));Y.tabIndex=0,Z.tabIndex=0,this._register(r(Z,"focus",(Q)=>{$.focus(),Q.preventDefault()})),this._register(r(Y,"focus",(Q)=>{X.focus(),Q.preventDefault()}))}}findLastFocusableChild($){if($.hasChildNodes())for(let X=0;X<$.childNodes.length;X++){let Y=$.childNodes.item($.childNodes.length-X-1);if(Y.nodeType===Y.ELEMENT_NODE){let Q=Y;if(typeof Q.tabIndex==="number"&&Q.tabIndex>=0)return Q}let Z=this.findLastFocusableChild(Y);if(Z)return Z}return}render($){var X;$.appendChild(this._hoverContainer);let Z=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&qn(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(X=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||X===void 0?void 0:X.getAriaLabel());if(Z)_X(Z);this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";let $=(H)=>{let j=GP(H),V=H.getBoundingClientRect();return{top:V.top*j,bottom:V.bottom*j,right:V.right*j,left:V.left*j}},X=this._target.targetElements.map((H)=>$(H)),Y=Math.min(...X.map((H)=>H.top)),Z=Math.max(...X.map((H)=>H.right)),Q=Math.max(...X.map((H)=>H.bottom)),G=Math.min(...X.map((H)=>H.left)),q=Z-G,U=Q-Y,z={top:Y,right:Z,bottom:Q,left:G,width:q,height:U,center:{x:G+q/2,y:Y+U/2}};if(this.adjustHorizontalHoverPosition(z),this.adjustVerticalHoverPosition(z),this.adjustHoverMaxHeight(z),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:z.left+=3,z.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:z.left-=3,z.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:z.top+=3,z.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:z.top-=3,z.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}z.center.x=z.left+q/2,z.center.y=z.top+U/2}if(this.computeXCordinate(z),this.computeYCordinate(z),this._hoverPointer)this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(z);this._hover.onContentsChanged()}computeXCordinate($){let X=this._hover.containerDomNode.clientWidth+2;if(this._target.x!==void 0)this._x=this._target.x;else if(this._hoverPosition===1)this._x=$.right;else if(this._hoverPosition===0)this._x=$.left-X;else{if(this._hoverPointer)this._x=$.center.x-this._hover.containerDomNode.clientWidth/2;else this._x=$.left;if(this._x+X>=this._targetDocumentElement.clientWidth)this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-X-2,this._targetDocumentElement.clientLeft)}if(this._x<this._targetDocumentElement.clientLeft)this._x=$.left+2}computeYCordinate($){if(this._target.y!==void 0)this._y=this._target.y;else if(this._hoverPosition===3)this._y=$.top;else if(this._hoverPosition===2)this._y=$.bottom-2;else if(this._hoverPointer)this._y=$.center.y+this._hover.containerDomNode.clientHeight/2;else this._y=$.bottom;if(this._y>this._targetWindow.innerHeight)this._y=$.bottom}adjustHorizontalHoverPosition($){if(this._target.x!==void 0)return;if(this._forcePosition){let X=(this._hoverPointer?3:0)+2;if(this._hoverPosition===1)this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-$.right-X}px`;else if(this._hoverPosition===0)this._hover.containerDomNode.style.maxWidth=`${$.left-X}px`;return}if(this._hoverPosition===1){if(this._targetDocumentElement.clientWidth-$.right<this._hover.containerDomNode.clientWidth)if($.left>=this._hover.containerDomNode.clientWidth)this._hoverPosition=0;else this._hoverPosition=2}else if(this._hoverPosition===0){if($.left<this._hover.containerDomNode.clientWidth)if(this._targetDocumentElement.clientWidth-$.right>=this._hover.containerDomNode.clientWidth)this._hoverPosition=1;else this._hoverPosition=2;if($.left-this._hover.containerDomNode.clientWidth<=this._targetDocumentElement.clientLeft)this._hoverPosition=1}}adjustVerticalHoverPosition($){if(this._target.y!==void 0||this._forcePosition)return;if(this._hoverPosition===3){if($.top-this._hover.containerDomNode.clientHeight<0)this._hoverPosition=2}else if(this._hoverPosition===2){if($.bottom+this._hover.containerDomNode.clientHeight>this._targetWindow.innerHeight)this._hoverPosition=3}}adjustHoverMaxHeight($){let X=this._targetWindow.innerHeight/2;if(this._forcePosition){let Y=(this._hoverPointer?3:0)+2;if(this._hoverPosition===3)X=Math.min(X,$.top-Y);else if(this._hoverPosition===2)X=Math.min(X,this._targetWindow.innerHeight-$.bottom-Y)}if(this._hover.containerDomNode.style.maxHeight=`${X}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){let Y=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;if(this._hover.contentsDomNode.style.paddingRight!==Y)this._hover.contentsDomNode.style.paddingRight=Y}}setHoverPointerPosition($){if(!this._hoverPointer)return;switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");let X=this._hover.containerDomNode.clientHeight;if(X>$.height)this._hoverPointer.style.top=`${$.center.y-(this._y-X)-3}px`;else this._hoverPointer.style.top=`${Math.round(X/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");let X=this._hover.containerDomNode.clientWidth,Y=Math.round(X/2)-3,Z=this._x+Y;if(Z<$.left||Z>$.right)Y=$.center.x-this._x-3;this._hoverPointer.style.left=`${Y}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){if(!this._isDisposed)this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose();this._isDisposed=!0}};oR=OG0([EW(1,$5),EW(2,g1),EW(3,oX),EW(4,l0),EW(5,a8)],oR);ay=class ay extends E8{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(J){super();this._elements=J,this._isMouseIn=!0,this._onMouseOut=this._register(new x),this._elements.forEach(($)=>this.onmouseover($,()=>this._onTargetMouseOver($))),this._elements.forEach(($)=>this.onmouseleave($,()=>this._onTargetMouseLeave($)))}_onTargetMouseOver(J){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(J)}_onTargetMouseLeave(J){this._isMouseIn=!1,this._evaluateMouseState(J)}_evaluateMouseState(J){this._clearEvaluateMouseStateTimeout(J),this._mouseTimeout=O0(J).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(J){if(this._mouseTimeout)O0(J).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0}_fireIfMouseOutside(){if(!this._isMouseIn)this._onMouseOut.fire()}}});function mn(J){var $;if(J===void 0)return;return($=J===null||J===void 0?void 0:J.id)!==null&&$!==void 0?$:J}class un{get anchorPosition(){return this._hover.anchor}constructor(J,$=!1){this._hover=J,this._focus=$}render(J){if(this._hover.render(J),this._focus)this._hover.focus();return this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}var _G0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Lz=function(J,$){return function(X,Y){$(X,Y,J)}},ry=class{constructor($,X,Y,Z,Q,G){this._instantiationService=$,this._contextViewService=X,this._keybindingService=Z,this._layoutService=Q,this._accessibilityService=G,Y.onDidShowContextMenu(()=>this.hideHover())}showHover($,X,Y){var Z,Q,G,q;if(mn(this._currentHoverOptions)===mn($))return;if(this._currentHover&&((Q=(Z=this._currentHoverOptions)===null||Z===void 0?void 0:Z.persistence)===null||Q===void 0?void 0:Q.sticky))return;this._currentHoverOptions=$,this._lastHoverOptions=$;let U=$.trapFocus||this._accessibilityService.isScreenReaderOptimized(),z=B5();if(!Y)if(U&&z)this._lastFocusedElementBeforeOpen=z;else this._lastFocusedElementBeforeOpen=void 0;let H=new $0,j=this._instantiationService.createInstance(oR,$);if((G=$.persistence)===null||G===void 0?void 0:G.sticky)j.isLocked=!0;if(j.onDispose(()=>{var W,B;if(((W=this._currentHover)===null||W===void 0?void 0:W.domNode)&&zP(this._currentHover.domNode))(B=this._lastFocusedElementBeforeOpen)===null||B===void 0||B.focus();if(this._currentHoverOptions===$)this._currentHoverOptions=void 0;H.dispose()}),!$.container){let W=$.target instanceof HTMLElement?$.target:$.target.targetElements[0];$.container=this._layoutService.getContainer(O0(W))}let V=this._contextViewService;if(V.showContextView(new un(j,X),$.container),j.onRequestLayout(()=>V.layout()),(q=$.persistence)===null||q===void 0?void 0:q.sticky)H.add(r(O0($.container).document,U0.MOUSE_DOWN,(W)=>{if(!e6(W.target,j.domNode))this.doHideHover()}));else{if("targetElements"in $.target)for(let B of $.target.targetElements)H.add(r(B,U0.CLICK,()=>this.hideHover()));else H.add(r($.target,U0.CLICK,()=>this.hideHover()));let W=B5();if(W){let B=O0(W).document;H.add(r(W,U0.KEY_DOWN,(K)=>{var P;return this._keyDown(K,j,!!((P=$.persistence)===null||P===void 0?void 0:P.hideOnKeyDown))})),H.add(r(B,U0.KEY_DOWN,(K)=>{var P;return this._keyDown(K,j,!!((P=$.persistence)===null||P===void 0?void 0:P.hideOnKeyDown))})),H.add(r(W,U0.KEY_UP,(K)=>this._keyUp(K,j))),H.add(r(B,U0.KEY_UP,(K)=>this._keyUp(K,j)))}}if("IntersectionObserver"in W1){let W=new IntersectionObserver((K)=>this._intersectionChange(K,j),{threshold:0}),B="targetElements"in $.target?$.target.targetElements[0]:$.target;W.observe(B),H.add(N0(()=>W.disconnect()))}return this._currentHover=j,j}hideHover(){var $;if((($=this._currentHover)===null||$===void 0?void 0:$.isLocked)||!this._currentHoverOptions)return;this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewService.hideContextView()}_intersectionChange($,X){if(!$[$.length-1].isIntersecting)X.dispose()}_keyDown($,X,Y){var Z,Q;if($.key==="Alt"){X.isLocked=!0;return}let G=new R1($);if(this._keybindingService.resolveKeyboardEvent(G).getSingleModifierDispatchChords().some((U)=>!!U)||this._keybindingService.softDispatch(G,G.target).kind!==0)return;if(Y&&(!((Z=this._currentHoverOptions)===null||Z===void 0?void 0:Z.trapFocus)||$.key!=="Tab"))this.hideHover(),(Q=this._lastFocusedElementBeforeOpen)===null||Q===void 0||Q.focus()}_keyUp($,X){var Y;if($.key==="Alt"){if(X.isLocked=!1,!X.isMouseIn)this.hideHover(),(Y=this._lastFocusedElementBeforeOpen)===null||Y===void 0||Y.focus()}}};var cn=w(()=>{y4();G5();i8();fR();IZ();s0();pn();z0();T0();EJ();d8();P$();z2();N8();ry=_G0([Lz(0,l0),Lz(1,S$),Lz(2,S9),Lz(3,$5),Lz(4,G4),Lz(5,a8)],ry);B1(Mz,ry,1);F7((J,$)=>{let X=J.getColor(mc);if(X)$.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${X.transparent(0.5)}; }`),$.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${X.transparent(0.5)}; }`)})});class IW{constructor(J){this.metadata=J}static convert(J){return J.edits.map(($)=>{if(F2.is($))return F2.lift($);if(kz.is($))return kz.lift($);throw Error("Unsupported edit")})}}var ln,F2,kz;var dn=w(()=>{s0();V5();ln=w0("IWorkspaceEditService");F2=class F2 extends IW{static is(J){if(J instanceof F2)return!0;return z5(J)&&C0.isUri(J.resource)&&z5(J.textEdit)}static lift(J){if(J instanceof F2)return J;else return new F2(J.resource,J.textEdit,J.versionId,J.metadata)}constructor(J,$,X=void 0,Y){super(Y);this.resource=J,this.textEdit=$,this.versionId=X}};kz=class kz extends IW{static is(J){if(J instanceof kz)return!0;else return z5(J)&&(Boolean(J.newResource)||Boolean(J.oldResource))}static lift(J){if(J instanceof kz)return J;else return new kz(J.oldResource,J.newResource,J.options,J.metadata)}constructor(J,$,X={},Y){super(Y);this.oldResource=J,this.newResource=$,this.options=X}}});var b8;var iy=w(()=>{b8={enableSplitViewResizing:!0,splitViewDefaultRatio:0.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5000,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0}});function TG0(J){return typeof J.type<"u"||typeof J.anyOf<"u"}function sn(){if(tR===null)tR=Object.create(null),Object.keys(eR.properties).forEach((J)=>{tR[J]=!0});return tR}function an(J){return sn()[`editor.${J}`]||!1}function rn(J){return sn()[`diffEditor.${J}`]||!1}var NG0,eR,tR=null,wG0;var nn=w(()=>{iy();O8();oH();c0();dG();h7();NG0=Object.freeze({id:"editor",order:5,type:"object",title:F("editorConfigurationTitle","Editor"),scope:5}),eR={...NG0,properties:{"editor.tabSize":{type:"number",default:v5.tabSize,minimum:1,markdownDescription:F("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:F("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:v5.insertSpaces,markdownDescription:F("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:v5.detectIndentation,markdownDescription:F("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:v5.trimAutoWhitespace,description:F("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:v5.largeFileOptimizations,description:F("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[F("wordBasedSuggestions.off","Turn off Word Based Suggestions."),F("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),F("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),F("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:F("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[F("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),F("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),F("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:F("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:F("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:20000,description:F("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:F("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:F("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:F("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:F("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:F("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:F("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:F("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:F("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:F("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:b8.maxComputationTime,description:F("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:b8.maxFileSize,description:F("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:b8.renderSideBySide,description:F("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:b8.renderSideBySideInlineBreakpoint,description:F("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:b8.useInlineViewWhenSpaceIsLimited,description:F("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:b8.renderMarginRevertIcon,description:F("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:b8.ignoreTrimWhitespace,description:F("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:b8.renderIndicators,description:F("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:b8.diffCodeLens,description:F("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:b8.diffWordWrap,markdownEnumDescriptions:[F("wordWrap.off","Lines will never wrap."),F("wordWrap.on","Lines will wrap at the viewport width."),F("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:b8.diffAlgorithm,markdownEnumDescriptions:[F("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),F("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:b8.hideUnchangedRegions.enabled,markdownDescription:F("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:b8.hideUnchangedRegions.revealLineCount,markdownDescription:F("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:b8.hideUnchangedRegions.minimumLineCount,markdownDescription:F("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:b8.hideUnchangedRegions.contextLineCount,markdownDescription:F("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:b8.experimental.showMoves,markdownDescription:F("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:b8.experimental.showEmptyDecorations,description:F("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};for(let J of BQ){let $=J.schema;if(typeof $<"u"){if(TG0($))eR.properties[`editor.${J.name}`]=$;else for(let X in $)if(Object.hasOwnProperty.call($,X))eR.properties[X]=$[X]}}wG0=G6.as(b4.Configuration);wG0.registerConfiguration(eR)});class u4{static insert(J,$){return{range:new k(J.lineNumber,J.column,J.lineNumber,J.column),text:$,forceMoveMarkers:!0}}static delete(J){return{range:J,text:null}}static replace(J,$){return{range:J,text:$}}static replaceMove(J,$){return{range:J,text:$,forceMoveMarkers:!0}}}var yW=w(()=>{i0()});function ny(J){return Object.isFrozen(J)?J:nh(J)}class P8{constructor(J={},$=[],X=[],Y){this._contents=J,this._keys=$,this._overrides=X,this.raw=Y,this.overrideConfigurations=new Map}get rawConfiguration(){var J;if(!this._rawConfiguration)if((J=this.raw)===null||J===void 0?void 0:J.length){let $=this.raw.map((X)=>{if(X instanceof P8)return X;let Y=new on("");return Y.parseRaw(X),Y.configurationModel});this._rawConfiguration=$.reduce((X,Y)=>Y===X?Y:X.merge(Y),$[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(J){return J?zw(this.contents,J):this.contents}inspect(J,$){let X=this.rawConfiguration.getValue(J),Y=$?this.rawConfiguration.getOverrideValue(J,$):void 0,Z=$?this.rawConfiguration.override($).getValue(J):X;return{value:X,override:Y,merged:Z}}getOverrideValue(J,$){let X=this.getContentsForOverrideIdentifer($);return X?J?zw(X,J):X:void 0}override(J){let $=this.overrideConfigurations.get(J);if(!$)$=this.createOverrideConfigurationModel(J),this.overrideConfigurations.set(J,$);return $}merge(...J){var $,X;let Y=$X(this.contents),Z=$X(this.overrides),Q=[...this.keys],G=(($=this.raw)===null||$===void 0?void 0:$.length)?[...this.raw]:[this];for(let q of J){if(G.push(...((X=q.raw)===null||X===void 0?void 0:X.length)?q.raw:[q]),q.isEmpty())continue;this.mergeContents(Y,q.contents);for(let U of q.overrides){let[z]=Z.filter((H)=>B6(H.identifiers,U.identifiers));if(z)this.mergeContents(z.contents,U.contents),z.keys.push(...U.keys),z.keys=ZJ(z.keys);else Z.push($X(U))}for(let U of q.keys)if(Q.indexOf(U)===-1)Q.push(U)}return new P8(Y,Q,Z,G.every((q)=>q instanceof P8)?void 0:G)}createOverrideConfigurationModel(J){let $=this.getContentsForOverrideIdentifer(J);if(!$||typeof $!=="object"||!Object.keys($).length)return this;let X={};for(let Y of ZJ([...Object.keys(this.contents),...Object.keys($)])){let Z=this.contents[Y],Q=$[Y];if(Q)if(typeof Z==="object"&&typeof Q==="object")Z=$X(Z),this.mergeContents(Z,Q);else Z=Q;X[Y]=Z}return new P8(X,this.keys,this.overrides)}mergeContents(J,$){for(let X of Object.keys($)){if(X in J){if(z5(J[X])&&z5($[X])){this.mergeContents(J[X],$[X]);continue}}J[X]=$X($[X])}}getContentsForOverrideIdentifer(J){let $=null,X=null,Y=(Z)=>{if(Z)if(X)this.mergeContents(X,Z);else X=$X(Z)};for(let Z of this.overrides)if(Z.identifiers.length===1&&Z.identifiers[0]===J)$=Z.contents;else if(Z.identifiers.includes(J))Y(Z.contents);return Y($),X}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(J,$){this.updateValue(J,$,!0)}setValue(J,$){this.updateValue(J,$,!1)}removeValue(J){let $=this.keys.indexOf(J);if($===-1)return;if(this.keys.splice($,1),Xm(this.contents,J),sY.test(J))this.overrides.splice(this.overrides.findIndex((X)=>B6(X.identifiers,dj(J))),1)}updateValue(J,$,X){if(Uw(this.contents,J,$,(Y)=>console.error(Y)),X=X||this.keys.indexOf(J)===-1,X)this.keys.push(J);if(sY.test(J))this.overrides.push({identifiers:dj(J),keys:Object.keys(this.contents[J]),contents:RP(this.contents[J],(Y)=>console.error(Y))})}}class on{constructor(J){this._name=J,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new P8}parseRaw(J,$){this._raw=J;let{contents:X,keys:Y,overrides:Z,restricted:Q,hasExcludedProperties:G}=this.doParseRaw(J,$);this._configurationModel=new P8(X,Y,Z,G?[J]:void 0),this._restrictedConfigurations=Q||[]}doParseRaw(J,$){let X=G6.as(b4.Configuration).getConfigurationProperties(),Y=this.filter(J,X,!0,$);J=Y.raw;let Z=RP(J,(q)=>console.error(`Conflict in settings file ${this._name}: ${q}`)),Q=Object.keys(J),G=this.toOverrides(J,(q)=>console.error(`Conflict in settings file ${this._name}: ${q}`));return{contents:Z,keys:Q,overrides:G,restricted:Y.restricted,hasExcludedProperties:Y.hasExcludedProperties}}filter(J,$,X,Y){var Z,Q,G;let q=!1;if(!(Y===null||Y===void 0?void 0:Y.scopes)&&!(Y===null||Y===void 0?void 0:Y.skipRestricted)&&!((Z=Y===null||Y===void 0?void 0:Y.exclude)===null||Z===void 0?void 0:Z.length))return{raw:J,restricted:[],hasExcludedProperties:q};let U={},z=[];for(let H in J)if(sY.test(H)&&X){let j=this.filter(J[H],$,!1,Y);U[H]=j.raw,q=q||j.hasExcludedProperties,z.push(...j.restricted)}else{let j=$[H],V=j?typeof j.scope<"u"?j.scope:3:void 0;if(j===null||j===void 0?void 0:j.restricted)z.push(H);if(!((Q=Y.exclude)===null||Q===void 0?void 0:Q.includes(H))&&(((G=Y.include)===null||G===void 0?void 0:G.includes(H))||(V===void 0||Y.scopes===void 0||Y.scopes.includes(V))&&!(Y.skipRestricted&&(j===null||j===void 0?void 0:j.restricted))))U[H]=J[H];else q=!0}return{raw:U,restricted:z,hasExcludedProperties:q}}toOverrides(J,$){let X=[];for(let Y of Object.keys(J))if(sY.test(Y)){let Z={};for(let Q in J[Y])Z[Q]=J[Y][Q];X.push({identifiers:dj(Y),keys:Object.keys(Z),contents:RP(Z,$)})}return X}}class tn{constructor(J,$,X,Y,Z,Q,G,q,U,z,H,j,V){this.key=J,this.overrides=$,this._value=X,this.overrideIdentifiers=Y,this.defaultConfiguration=Z,this.policyConfiguration=Q,this.applicationConfiguration=G,this.userConfiguration=q,this.localUserConfiguration=U,this.remoteUserConfiguration=z,this.workspaceConfiguration=H,this.folderConfigurationModel=j,this.memoryConfigurationModel=V}inspect(J,$,X){let Y=J.inspect($,X);return{get value(){return ny(Y.value)},get override(){return ny(Y.override)},get merged(){return ny(Y.merged)}}}get userInspectValue(){if(!this._userInspectValue)this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier);return this._userInspectValue}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}}class xW{constructor(J,$,X,Y,Z=new P8,Q=new P8,G=new e5,q=new P8,U=new e5){this._defaultConfiguration=J,this._policyConfiguration=$,this._applicationConfiguration=X,this._localUserConfiguration=Y,this._remoteUserConfiguration=Z,this._workspaceConfiguration=Q,this._folderConfigurations=G,this._memoryConfiguration=q,this._memoryConfigurationByResource=U,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new e5,this._userConfiguration=null}getValue(J,$,X){return this.getConsolidatedConfigurationModel(J,$,X).getValue(J)}updateValue(J,$,X={}){let Y;if(X.resource){if(Y=this._memoryConfigurationByResource.get(X.resource),!Y)Y=new P8,this._memoryConfigurationByResource.set(X.resource,Y)}else Y=this._memoryConfiguration;if($===void 0)Y.removeValue(J);else Y.setValue(J,$);if(!X.resource)this._workspaceConsolidatedConfiguration=null}inspect(J,$,X){let Y=this.getConsolidatedConfigurationModel(J,$,X),Z=this.getFolderConfigurationModelForResource($.resource,X),Q=$.resource?this._memoryConfigurationByResource.get($.resource)||this._memoryConfiguration:this._memoryConfiguration,G=new Set;for(let q of Y.overrides)for(let U of q.identifiers)if(Y.getOverrideValue(J,U)!==void 0)G.add(U);return new tn(J,$,Y.getValue(J),G.size?[...G]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,X?this._workspaceConfiguration:void 0,Z?Z:void 0,Q)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){if(!this._userConfiguration)this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration);return this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(J,$,X){let Y=this.getConsolidatedConfigurationModelForResource($,X);if($.overrideIdentifier)Y=Y.override($.overrideIdentifier);if(!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(J)!==void 0)Y=Y.merge(this._policyConfiguration);return Y}getConsolidatedConfigurationModelForResource({resource:J},$){let X=this.getWorkspaceConsolidatedConfiguration();if($&&J){let Y=$.getFolder(J);if(Y)X=this.getFolderConsolidatedConfiguration(Y.uri)||X;let Z=this._memoryConfigurationByResource.get(J);if(Z)X=X.merge(Z)}return X}getWorkspaceConsolidatedConfiguration(){if(!this._workspaceConsolidatedConfiguration)this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration);return this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(J){let $=this._foldersConsolidatedConfigurations.get(J);if(!$){let X=this.getWorkspaceConsolidatedConfiguration(),Y=this._folderConfigurations.get(J);if(Y)$=X.merge(Y),this._foldersConsolidatedConfigurations.set(J,$);else $=X}return $}getFolderConfigurationModelForResource(J,$){if($&&J){let X=$.getFolder(J);if(X)return this._folderConfigurations.get(X.uri)}return}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((J,$)=>{let{contents:X,overrides:Y,keys:Z}=this._folderConfigurations.get($);return J.push([$,{contents:X,overrides:Y,keys:Z}]),J},[])}}static parse(J){let $=this.parseConfigurationModel(J.defaults),X=this.parseConfigurationModel(J.policy),Y=this.parseConfigurationModel(J.application),Z=this.parseConfigurationModel(J.user),Q=this.parseConfigurationModel(J.workspace),G=J.folders.reduce((q,U)=>{return q.set(C0.revive(U[0]),this.parseConfigurationModel(U[1])),q},new e5);return new xW($,X,Y,Z,new P8,Q,G,new P8,new e5)}static parseConfigurationModel(J){return new P8(J.contents,J.keys,J.overrides)}}class oy{constructor(J,$,X,Y){this.change=J,this.previous=$,this.currentConfiguraiton=X,this.currentWorkspace=Y,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(let Z of J.keys)this.affectedKeys.add(Z);for(let[,Z]of J.overrides)for(let Q of Z)this.affectedKeys.add(Q);this._affectsConfigStr=this._marker;for(let Z of this.affectedKeys)this._affectsConfigStr+=Z+this._marker}get previousConfiguration(){if(!this._previousConfiguration&&this.previous)this._previousConfiguration=xW.parse(this.previous.data);return this._previousConfiguration}affectsConfiguration(J,$){var X;let Y=this._marker+J,Z=this._affectsConfigStr.indexOf(Y);if(Z<0)return!1;let Q=Z+Y.length;if(Q>=this._affectsConfigStr.length)return!1;let G=this._affectsConfigStr.charCodeAt(Q);if(G!==this._markerCode1&&G!==this._markerCode2)return!1;if($){let q=this.previousConfiguration?this.previousConfiguration.getValue(J,$,(X=this.previous)===null||X===void 0?void 0:X.workspace):void 0,U=this.currentConfiguraiton.getValue(J,$,this.currentWorkspace);return!i5(q,U)}return!0}}var ty=w(()=>{V1();F$();n7();V5();H7();dG();h7()});function kG0(J,$,X){return{kind:2,commandId:J,commandArgs:$,isBubble:X}}class Ez{constructor(J,$,X){var Y;this._log=X,this._defaultKeybindings=J,this._defaultBoundCommands=new Map;for(let Z of J){let Q=Z.command;if(Q&&Q.charAt(0)!=="-")this._defaultBoundCommands.set(Q,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Ez.handleRemovals([].concat(J).concat($));for(let Z=0,Q=this._keybindings.length;Z<Q;Z++){let G=this._keybindings[Z];if(G.chords.length===0)continue;let q=(Y=G.when)===null||Y===void 0?void 0:Y.substituteConstants();if(q&&q.type===0)continue;this._addKeyPress(G.chords[0],G)}}static _isTargetedForRemoval(J,$,X){if($){for(let Y=0;Y<$.length;Y++)if($[Y]!==J.chords[Y])return!1}if(X&&X.type!==1){if(!J.when)return!1;if(!cg(X,J.when))return!1}return!0}static handleRemovals(J){let $=new Map;for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y];if(Q.command&&Q.command.charAt(0)==="-"){let G=Q.command.substring(1);if(!$.has(G))$.set(G,[Q]);else $.get(G).push(Q)}}if($.size===0)return J;let X=[];for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y];if(!Q.command||Q.command.length===0){X.push(Q);continue}if(Q.command.charAt(0)==="-")continue;let G=$.get(Q.command);if(!G||!Q.isDefault){X.push(Q);continue}let q=!1;for(let U of G){let z=U.when;if(this._isTargetedForRemoval(Q,U.chords,z)){q=!0;break}}if(!q){X.push(Q);continue}}return X}_addKeyPress(J,$){let X=this._map.get(J);if(typeof X>"u"){this._map.set(J,[$]),this._addToLookupMap($);return}for(let Y=X.length-1;Y>=0;Y--){let Z=X[Y];if(Z.command===$.command)continue;let Q=!0;for(let G=1;G<Z.chords.length&&G<$.chords.length;G++)if(Z.chords[G]!==$.chords[G]){Q=!1;break}if(!Q)continue;if(Ez.whenIsEntirelyIncluded(Z.when,$.when))this._removeFromLookupMap(Z)}X.push($),this._addToLookupMap($)}_addToLookupMap(J){if(!J.command)return;let $=this._lookupMap.get(J.command);if(typeof $>"u")$=[J],this._lookupMap.set(J.command,$);else $.push(J)}_removeFromLookupMap(J){if(!J.command)return;let $=this._lookupMap.get(J.command);if(typeof $>"u")return;for(let X=0,Y=$.length;X<Y;X++)if($[X]===J){$.splice(X,1);return}}static whenIsEntirelyIncluded(J,$){if(!$||$.type===1)return!0;if(!J||J.type===1)return!1;return IA(J,$)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(J,$){let X=this._lookupMap.get(J);if(typeof X>"u"||X.length===0)return null;if(X.length===1)return X[0];for(let Y=X.length-1;Y>=0;Y--){let Z=X[Y];if($.contextMatchesRules(Z.when))return Z}return X[X.length-1]}resolve(J,$,X){let Y=[...$,X];this._log(`| Resolving ${Y}`);let Z=this._map.get(Y[0]);if(Z===void 0)return this._log("\\ No keybinding entries."),bW;let Q=null;if(Y.length<2)Q=Z;else{Q=[];for(let q=0,U=Z.length;q<U;q++){let z=Z[q];if(Y.length>z.chords.length)continue;let H=!0;for(let j=1;j<Y.length;j++)if(z.chords[j]!==Y[j]){H=!1;break}if(H)Q.push(z)}}let G=this._findCommand(J,Q);if(!G)return this._log(`\\ From ${Q.length} keybinding entries, no when clauses matched the context.`),bW;if(Y.length<G.chords.length)return this._log(`\\ From ${Q.length} keybinding entries, awaiting ${G.chords.length-Y.length} more chord(s), when: ${en(G.when)}, source: ${Jo(G)}.`),LG0;return this._log(`\\ From ${Q.length} keybinding entries, matched ${G.command}, when: ${en(G.when)}, source: ${Jo(G)}.`),kG0(G.command,G.commandArgs,G.bubble)}_findCommand(J,$){for(let X=$.length-1;X>=0;X--){let Y=$[X];if(!Ez._contextMatchesRules(J,Y.when))continue;return Y}return null}static _contextMatchesRules(J,$){if(!$)return!0;return $.evaluate(J)}}function en(J){if(!J)return"no when condition";return`${J.serialize()}`}function Jo(J){return J.extensionId?J.isBuiltinExtension?`built-in extension ${J.extensionId}`:`user extension ${J.extensionId}`:J.isDefault?"built-in":"user"}var bW,LG0;var ey=w(()=>{t1();bW={kind:0},LG0={kind:1}});class v3{constructor(J){this._ctrlKey=J?J.ctrlKey:!1,this._shiftKey=J?J.shiftKey:!1,this._altKey=J?J.altKey:!1,this._metaKey=J?J.metaKey:!1}has(J){switch(J){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}var EG0,Jx;var $o=w(()=>{e1();O1();_0();Yk();z0();c0();ey();EG0=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;Jx=class Jx extends m{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:q0.None}get inChordMode(){return this._currentChords.length>0}constructor(J,$,X,Y,Z){super();this._contextKeyService=J,this._commandService=$,this._telemetryService=X,this._notificationService=Y,this._logService=Z,this._onDidUpdateKeybindings=this._register(new x),this._currentChords=[],this._currentChordChecker=new SG,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=v3.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new s8,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(J){if(this._logging)this._logService.info(`[KeybindingService]: ${J}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(J,$){let X=this._getResolver().lookupPrimaryKeybinding(J,$||this._contextKeyService);if(!X)return;return X.resolvedKeybinding}dispatchEvent(J,$){return this._dispatch(J,$)}softDispatch(J,$){this._log("/ Soft dispatching keyboard event");let X=this.resolveKeyboardEvent(J);if(X.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),bW;let[Y]=X.getDispatchChords();if(Y===null)return this._log("\\ Keyboard event cannot be dispatched"),bW;let Z=this._contextKeyService.getContext($),Q=this._currentChords.map(({keypress:G})=>G);return this._getResolver().resolve(Z,Q,Y)}_scheduleLeaveChordMode(){let J=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}if(Date.now()-J>5000)this._leaveChordMode()},500)}_expectAnotherChord(J,$){switch(this._currentChords.push({keypress:J,label:$}),this._currentChords.length){case 0:throw vq("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(F("first.chord","({0}) was pressed. Waiting for second key of chord...",$));break;default:{let X=this._currentChords.map(({label:Y})=>Y).join(", ");this._currentChordStatusMessage=this._notificationService.status(F("next.chord","({0}) was pressed. Waiting for next key of chord...",X))}}if(this._scheduleLeaveChordMode(),aQ.enabled)aQ.disable()}_leaveChordMode(){if(this._currentChordStatusMessage)this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null;this._currentChordChecker.cancel(),this._currentChords=[],aQ.enable()}_dispatch(J,$){return this._doDispatch(this.resolveKeyboardEvent(J),$,!1)}_singleModifierDispatch(J,$){let X=this.resolveKeyboardEvent(J),[Y]=X.getSingleModifierDispatchChords();if(Y){if(this._ignoreSingleModifiers.has(Y))return this._log(`+ Ignoring single modifier ${Y} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=v3.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1;if(this._ignoreSingleModifiers=v3.EMPTY,this._currentSingleModifier===null)return this._log(`+ Storing single modifier for possible chord ${Y}.`),this._currentSingleModifier=Y,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1;if(Y===this._currentSingleModifier)return this._log(`/ Dispatching single modifier chord ${Y} ${Y}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(X,$,!0);return this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${Y}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}let[Z]=X.getChords();if(this._ignoreSingleModifiers=new v3(Z),this._currentSingleModifier!==null)this._log("+ Clearing single modifier due to other key up.");return this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(J,$,X=!1){var Y;let Z=!1;if(J.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let Q=null,G=null;if(X){let[H]=J.getSingleModifierDispatchChords();Q=H,G=H?[H]:[]}else[Q]=J.getDispatchChords(),G=this._currentChords.map(({keypress:H})=>H);if(Q===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),Z;let q=this._contextKeyService.getContext($),U=J.getLabel(),z=this._getResolver().resolve(q,G,Q);switch(z.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",U,"[ No matching keybinding ]"),this.inChordMode){let H=this._currentChords.map(({label:j})=>j).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${H}, ${U}".`),this._notificationService.status(F("missing.chord","The key combination ({0}, {1}) is not a command.",H,U),{hideAfter:1e4}),this._leaveChordMode(),Z=!0}return Z}case 1:return this._logService.trace("KeybindingService#dispatch",U,"[ Several keybindings match - more chords needed ]"),Z=!0,this._expectAnotherChord(Q,U),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),Z;case 2:{if(this._logService.trace("KeybindingService#dispatch",U,`[ Will dispatch command ${z.commandId} ]`),z.commandId===null||z.commandId===""){if(this.inChordMode){let H=this._currentChords.map(({label:j})=>j).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${H}, ${U}".`),this._notificationService.status(F("missing.chord","The key combination ({0}, {1}) is not a command.",H,U),{hideAfter:1e4}),this._leaveChordMode(),Z=!0}}else{if(this.inChordMode)this._leaveChordMode();if(!z.isBubble)Z=!0;this._log(`+ Invoking command ${z.commandId}.`),this._currentlyDispatchingCommandId=z.commandId;try{if(typeof z.commandArgs>"u")this._commandService.executeCommand(z.commandId).then(void 0,(H)=>this._notificationService.warn(H));else this._commandService.executeCommand(z.commandId,z.commandArgs).then(void 0,(H)=>this._notificationService.warn(H))}finally{this._currentlyDispatchingCommandId=null}if(!EG0.test(z.commandId))this._telemetryService.publicLog2("workbenchActionExecuted",{id:z.commandId,from:"keybinding",detail:(Y=J.getUserSettingsLabel())!==null&&Y!==void 0?Y:void 0})}return Z}}}mightProducePrintableCharacter(J){if(J.ctrlKey||J.metaKey)return!1;if(J.keyCode>=31&&J.keyCode<=56||J.keyCode>=21&&J.keyCode<=30)return!0;return!1}};v3.EMPTY=new v3(null)});class $M{constructor(J,$,X,Y,Z,Q,G){if(this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=J,this.chords=J?JM(J.getDispatchChords()):[],J&&this.chords.length===0)this.chords=JM(J.getSingleModifierDispatchChords());this.bubble=$?$.charCodeAt(0)===94:!1,this.command=this.bubble?$.substr(1):$,this.commandArgs=X,this.when=Y,this.isDefault=Z,this.extensionId=Q,this.isBuiltinExtension=G}}function JM(J){let $=[];for(let X=0,Y=J.length;X<Y;X++){let Z=J[X];if(!Z)return[];$.push(Z)}return $}class SW{constructor(J,$,X=$){this.modifierLabels=[null],this.modifierLabels[2]=J,this.modifierLabels[1]=$,this.modifierLabels[3]=X}toLabel(J,$,X){if($.length===0)return null;let Y=[];for(let Z=0,Q=$.length;Z<Q;Z++){let G=$[Z],q=X(G);if(q===null)return null;Y[Z]=IG0(G,q,this.modifierLabels[J])}return Y.join(" ")}}function IG0(J,$,X){if($===null)return"";let Y=[];if(J.ctrlKey)Y.push(X.ctrlKey);if(J.shiftKey)Y.push(X.shiftKey);if(J.altKey)Y.push(X.altKey);if(J.metaKey)Y.push(X.metaKey);if($!=="")Y.push($);return Y.join(X.separator)}var Iz,Xo,Yo,Zo;var XM=w(()=>{c0();Iz=new SW({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:F({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:F({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:F({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:F({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:F({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:F({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:F({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:F({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),Xo=new SW({ctrlKey:F({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:F({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:F({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:F({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:F({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:F({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:F({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:F({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:F({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:F({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:F({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:F({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),Yo=new SW({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),Zo=new SW({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"})});var $x;var Qo=w(()=>{O1();XM();yG();$x=class $x extends FT{constructor(J,$){super();if($.length===0)throw X$("chords");this._os=J,this._chords=$}getLabel(){return Iz.toLabel(this._os,this._chords,(J)=>this._getLabel(J))}getAriaLabel(){return Xo.toLabel(this._os,this._chords,(J)=>this._getAriaLabel(J))}getElectronAccelerator(){if(this._chords.length>1)return null;if(this._chords[0].isDuplicateModifierCase())return null;return Yo.toLabel(this._os,this._chords,(J)=>this._getElectronAccelerator(J))}getUserSettingsLabel(){return Zo.toLabel(this._os,this._chords,(J)=>this._getUserSettingsLabel(J))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map((J)=>this._getChord(J))}_getChord(J){return new BT(J.ctrlKey,J.shiftKey,J.altKey,J.metaKey,this._getLabel(J),this._getAriaLabel(J))}getDispatchChords(){return this._chords.map((J)=>this._getChordDispatch(J))}getSingleModifierDispatchChords(){return this._chords.map((J)=>this._getSingleModifierChordDispatch(J))}}});var yz;var Go=w(()=>{PG();yG();Qo();yz=class yz extends $x{constructor(J,$){super($,J)}_keyCodeToUILabel(J){if(this._os===2)switch(J){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return UJ.toString(J)}_getLabel(J){if(J.isDuplicateModifierCase())return"";return this._keyCodeToUILabel(J.keyCode)}_getAriaLabel(J){if(J.isDuplicateModifierCase())return"";return UJ.toString(J.keyCode)}_getElectronAccelerator(J){return UJ.toElectronAccelerator(J.keyCode)}_getUserSettingsLabel(J){if(J.isDuplicateModifierCase())return"";let $=UJ.toUserSettingsUS(J.keyCode);return $?$.toLowerCase():$}_getChordDispatch(J){return yz.getDispatchStr(J)}static getDispatchStr(J){if(J.isModifierKey())return null;let $="";if(J.ctrlKey)$+="ctrl+";if(J.shiftKey)$+="shift+";if(J.altKey)$+="alt+";if(J.metaKey)$+="meta+";return $+=UJ.toString(J.keyCode),$}_getSingleModifierChordDispatch(J){if(J.keyCode===5&&!J.shiftKey&&!J.altKey&&!J.metaKey)return"ctrl";if(J.keyCode===4&&!J.ctrlKey&&!J.altKey&&!J.metaKey)return"shift";if(J.keyCode===6&&!J.ctrlKey&&!J.shiftKey&&!J.metaKey)return"alt";if(J.keyCode===57&&!J.ctrlKey&&!J.shiftKey&&!J.altKey)return"meta";return null}static _scanCodeToKeyCode(J){let $=OK[J];if($!==-1)return $;switch(J){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(J){if(!J)return null;if(J instanceof M4)return J;let $=this._scanCodeToKeyCode(J.scanCode);if($===0)return null;return new M4(J.ctrlKey,J.shiftKey,J.altKey,J.metaKey,$)}static resolveKeybinding(J,$){let X=JM(J.chords.map((Y)=>this._toKeyCodeChord(Y)));if(X.length>0)return[new yz(X,$)];return[]}}});var CW;var Xx=w(()=>{s0();CW=w0("labelService")});class xz{constructor(J){this.callback=J}report(J){this._value=J,this.callback(this._value)}}var qo,ri0,xZ;var vW=w(()=>{s0();qo=w0("progressService"),ri0=Object.freeze({total(){},worked(){},done(){}});xz.None=Object.freeze({report(){}});xZ=w0("editorProgressService")});class Uo{constructor(){this._value="",this._pos=0}reset(J){return this._value=J,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(J){let $=J.charCodeAt(0),X=this._value.charCodeAt(this._pos);return $-X}value(){return this._value[this._pos]}}class zo{constructor(J=!0){this._caseSensitive=J}reset(J){return this._value=J,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let J=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(J)this._from++;else break;else J=!1;return this}cmp(J){return this._caseSensitive?RA(J,this._value,0,J.length,this._from,this._to):mq(J,this._value,0,J.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Ho{constructor(J=!0,$=!0){this._splitOnBackslash=J,this._caseSensitive=$}reset(J){this._from=0,this._to=0,this._value=J,this._valueLen=J.length;for(let $=J.length-1;$>=0;$--,this._valueLen--){let X=this._value.charCodeAt($);if(!(X===47||this._splitOnBackslash&&X===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let J=!0;for(;this._to<this._valueLen;this._to++){let $=this._value.charCodeAt(this._to);if($===47||this._splitOnBackslash&&$===92)if(J)this._from++;else break;else J=!1}return this}cmp(J){return this._caseSensitive?RA(J,this._value,0,J.length,this._from,this._to):mq(J,this._value,0,J.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class jo{constructor(J,$){this._ignorePathCasing=J,this._ignoreQueryAndFragment=$,this._states=[],this._stateIdx=0}reset(J){if(this._value=J,this._states=[],this._value.scheme)this._states.push(1);if(this._value.authority)this._states.push(2);if(this._value.path){if(this._pathIterator=new Ho(!1,!this._ignorePathCasing(J)),this._pathIterator.reset(J.path),this._pathIterator.value())this._states.push(3)}if(!this._ignoreQueryAndFragment(J)){if(this._value.query)this._states.push(4);if(this._value.fragment)this._states.push(5)}return this._stateIdx=0,this}next(){if(this._states[this._stateIdx]===3&&this._pathIterator.hasNext())this._pathIterator.next();else this._stateIdx+=1;return this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(J){if(this._states[this._stateIdx]===1)return Hj(J,this._value.scheme);else if(this._states[this._stateIdx]===2)return Hj(J,this._value.authority);else if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(J);else if(this._states[this._stateIdx]===4)return zj(J,this._value.query);else if(this._states[this._stateIdx]===5)return zj(J,this._value.fragment);throw Error()}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;else if(this._states[this._stateIdx]===2)return this._value.authority;else if(this._states[this._stateIdx]===3)return this._pathIterator.value();else if(this._states[this._stateIdx]===4)return this._value.query;else if(this._states[this._stateIdx]===5)return this._value.fragment;throw Error()}}class hW{constructor(){this.height=1}rotateLeft(){let J=this.right;return this.right=J.left,J.left=this,this.updateHeight(),J.updateHeight(),J}rotateRight(){let J=this.left;return this.left=J.right,J.right=this,this.updateHeight(),J.updateHeight(),J}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var J,$;return($=(J=this.left)===null||J===void 0?void 0:J.height)!==null&&$!==void 0?$:0}get heightRight(){var J,$;return($=(J=this.right)===null||J===void 0?void 0:J.height)!==null&&$!==void 0?$:0}}var bZ;var YM=w(()=>{X1();bZ=class bZ{static forUris(J=()=>!1,$=()=>!1){return new bZ(new jo(J,$))}static forStrings(){return new bZ(new Uo)}static forConfigKeys(){return new bZ(new zo)}constructor(J){this._iter=J}clear(){this._root=void 0}set(J,$){let X=this._iter.reset(J),Y;if(!this._root)this._root=new hW,this._root.segment=X.value();let Z=[];Y=this._root;while(!0){let G=X.cmp(Y.segment);if(G>0){if(!Y.left)Y.left=new hW,Y.left.segment=X.value();Z.push([-1,Y]),Y=Y.left}else if(G<0){if(!Y.right)Y.right=new hW,Y.right.segment=X.value();Z.push([1,Y]),Y=Y.right}else if(X.hasNext()){if(X.next(),!Y.mid)Y.mid=new hW,Y.mid.segment=X.value();Z.push([0,Y]),Y=Y.mid}else break}let Q=Y.value;Y.value=$,Y.key=J;for(let G=Z.length-1;G>=0;G--){let q=Z[G][1];q.updateHeight();let U=q.balanceFactor();if(U<-1||U>1){let z=Z[G][0],H=Z[G+1][0];if(z===1&&H===1)Z[G][1]=q.rotateLeft();else if(z===-1&&H===-1)Z[G][1]=q.rotateRight();else if(z===1&&H===-1)q.right=Z[G+1][1]=Z[G+1][1].rotateRight(),Z[G][1]=q.rotateLeft();else if(z===-1&&H===1)q.left=Z[G+1][1]=Z[G+1][1].rotateLeft(),Z[G][1]=q.rotateRight();else throw Error();if(G>0)switch(Z[G-1][0]){case-1:Z[G-1][1].left=Z[G][1];break;case 1:Z[G-1][1].right=Z[G][1];break;case 0:Z[G-1][1].mid=Z[G][1];break}else this._root=Z[0][1]}}return Q}get(J){var $;return($=this._getNode(J))===null||$===void 0?void 0:$.value}_getNode(J){let $=this._iter.reset(J),X=this._root;while(X){let Y=$.cmp(X.segment);if(Y>0)X=X.left;else if(Y<0)X=X.right;else if($.hasNext())$.next(),X=X.mid;else break}return X}has(J){let $=this._getNode(J);return!(($===null||$===void 0?void 0:$.value)===void 0&&($===null||$===void 0?void 0:$.mid)===void 0)}delete(J){return this._delete(J,!1)}deleteSuperstr(J){return this._delete(J,!0)}_delete(J,$){var X;let Y=this._iter.reset(J),Z=[],Q=this._root;while(Q){let G=Y.cmp(Q.segment);if(G>0)Z.push([-1,Q]),Q=Q.left;else if(G<0)Z.push([1,Q]),Q=Q.right;else if(Y.hasNext())Y.next(),Z.push([0,Q]),Q=Q.mid;else break}if(!Q)return;if($)Q.left=void 0,Q.mid=void 0,Q.right=void 0,Q.height=1;else Q.key=void 0,Q.value=void 0;if(!Q.mid&&!Q.value)if(Q.left&&Q.right){let G=this._min(Q.right);if(G.key){let{key:q,value:U,segment:z}=G;this._delete(G.key,!1),Q.key=q,Q.value=U,Q.segment=z}}else{let G=(X=Q.left)!==null&&X!==void 0?X:Q.right;if(Z.length>0){let[q,U]=Z[Z.length-1];switch(q){case-1:U.left=G;break;case 0:U.mid=G;break;case 1:U.right=G;break}}else this._root=G}for(let G=Z.length-1;G>=0;G--){let q=Z[G][1];q.updateHeight();let U=q.balanceFactor();if(U>1)if(q.right.balanceFactor()>=0)Z[G][1]=q.rotateLeft();else q.right=q.right.rotateRight(),Z[G][1]=q.rotateLeft();else if(U<-1)if(q.left.balanceFactor()<=0)Z[G][1]=q.rotateRight();else q.left=q.left.rotateLeft(),Z[G][1]=q.rotateRight();if(G>0)switch(Z[G-1][0]){case-1:Z[G-1][1].left=Z[G][1];break;case 1:Z[G-1][1].right=Z[G][1];break;case 0:Z[G-1][1].mid=Z[G][1];break}else this._root=Z[0][1]}}_min(J){while(J.left)J=J.left;return J}findSubstr(J){let $=this._iter.reset(J),X=this._root,Y=void 0;while(X){let Z=$.cmp(X.segment);if(Z>0)X=X.left;else if(Z<0)X=X.right;else if($.hasNext())$.next(),Y=X.value||Y,X=X.mid;else break}return X&&X.value||Y}findSuperstr(J){return this._findSuperstrOrElement(J,!1)}_findSuperstrOrElement(J,$){let X=this._iter.reset(J),Y=this._root;while(Y){let Z=X.cmp(Y.segment);if(Z>0)Y=Y.left;else if(Z<0)Y=Y.right;else if(X.hasNext())X.next(),Y=Y.mid;else if(!Y.mid)if($)return Y.value;else return;else return this._entries(Y.mid)}return}forEach(J){for(let[$,X]of this)J(X,$)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(J){let $=[];return this._dfsEntries(J,$),$[Symbol.iterator]()}_dfsEntries(J,$){if(!J)return;if(J.left)this._dfsEntries(J.left,$);if(J.value)$.push([J.key,J.value]);if(J.mid)this._dfsEntries(J.mid,$);if(J.right)this._dfsEntries(J.right,$)}}});function ZM(J){let $=J;return typeof($===null||$===void 0?void 0:$.id)==="string"&&C0.isUri($.uri)}function Vo(J){let $=J;return typeof($===null||$===void 0?void 0:$.id)==="string"&&!ZM(J)&&!bG0(J)}function Wo(J,$){if(typeof J==="string"||typeof J>"u"){if(typeof J==="string")return{id:zJ(J)};if($)return yG0;return xG0}let X=J;if(X.configuration)return{id:X.id,configPath:X.configuration};if(X.folders.length===1)return{id:X.id,uri:X.folders[0].uri};return{id:X.id}}function bG0(J){let $=J;return typeof($===null||$===void 0?void 0:$.id)==="string"&&C0.isUri($.configPath)}class Yx{constructor(J,$){this.raw=$,this.uri=J.uri,this.index=J.index,this.name=J.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var fW,yG0,xG0,QM="code-workspace",Yn0,Bo="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var GM=w(()=>{c0();kY();YM();V5();s0();fW=w0("contextService");yG0={id:"ext-dev"},xG0={id:"empty-window"};Yn0=[{name:F("codeWorkspace","Code Workspace"),extensions:[QM]}]});var Fo,Ko,Ao,Po,Do,gW,Ro,qM;var Zx=w(()=>{c0();(function(J){J.inspectTokensAction=F("inspectTokens","Developer: Inspect Tokens")})(Fo||(Fo={}));(function(J){J.gotoLineActionLabel=F("gotoLineActionLabel","Go to Line/Column...")})(Ko||(Ko={}));(function(J){J.helpQuickAccessActionLabel=F("helpQuickAccess","Show all Quick Access Providers")})(Ao||(Ao={}));(function(J){J.quickCommandActionLabel=F("quickCommandActionLabel","Command Palette"),J.quickCommandHelp=F("quickCommandActionHelp","Show And Run Commands")})(Po||(Po={}));(function(J){J.quickOutlineActionLabel=F("quickOutlineActionLabel","Go to Symbol..."),J.quickOutlineByCategoryActionLabel=F("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Do||(Do={}));(function(J){J.editorViewAccessibleLabel=F("editorViewAccessibleLabel","Editor content"),J.accessibilityHelpMessage=F("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(gW||(gW={}));(function(J){J.toggleHighContrast=F("toggleHighContrast","Toggle High Contrast Theme")})(Ro||(Ro={}));(function(J){J.bulkEditServiceSummary=F("bulkEditServiceSummary","Made {0} edits in {1} files")})(qM||(qM={}))});var Mo;var Oo=w(()=>{s0();Mo=w0("workspaceTrustManagementService")});var l5;var pW=w(()=>{(function(J){function $(Q,G){if(Q.start>=G.end||G.start>=Q.end)return{start:0,end:0};let q=Math.max(Q.start,G.start),U=Math.min(Q.end,G.end);if(U-q<=0)return{start:0,end:0};return{start:q,end:U}}J.intersect=$;function X(Q){return Q.end-Q.start<=0}J.isEmpty=X;function Y(Q,G){return!X($(Q,G))}J.intersects=Y;function Z(Q,G){let q=[],U={start:Q.start,end:Math.min(G.start,Q.end)},z={start:Math.max(G.end,Q.start),end:Q.end};if(!X(U))q.push(U);if(!X(z))q.push(z);return q}J.relativeComplement=Z})(l5||(l5={}))});var _o=w(()=>{K0(".context-view{position:absolute}.context-view.fixed{all:initial;color:inherit;font-family:inherit;font-size:13px;position:fixed}")});function SG0(J){let $=J;return!!$&&typeof $.x==="number"&&typeof $.y==="number"}function h3(J,$,X){let Y=X.mode===K2.ALIGN?X.offset:X.offset+X.size,Z=X.mode===K2.ALIGN?X.offset+X.size:X.offset;if(X.position===0){if($<=J-Y)return Y;if($<=Z)return Z-$;return Math.max(J-$,0)}else{if($<=Z)return Z-$;if($<=J-Y)return Y;return 0}}var K2,f3,CG0=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var Qx=w(()=>{dA();T0();z0();L1();pW();_o();(function(J){J[J.AVOID=0]="AVOID",J[J.ALIGN=1]="ALIGN"})(K2||(K2={}));f3=class f3 extends m{constructor(J,$){super();this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=m.None,this.toDisposeOnSetContainer=m.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=B0(".context-view"),D9(this.view),this.setContainer(J,$),this._register(N0(()=>this.setContainer(null,1)))}setContainer(J,$){var X;this.useFixedPosition=$!==1;let Y=this.useShadowDOM;if(this.useShadowDOM=$===3,J===this.container&&Y===this.useShadowDOM)return;if(this.container){if(this.toDisposeOnSetContainer.dispose(),this.shadowRoot)this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(X=this.shadowRootHostElement)===null||X===void 0||X.remove(),this.shadowRootHostElement=null;else this.container.removeChild(this.view);this.container=null}if(J){if(this.container=J,this.useShadowDOM){this.shadowRootHostElement=B0(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});let Q=document.createElement("style");Q.textContent=CG0,this.shadowRoot.appendChild(Q),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(B0("slot"))}else this.container.appendChild(this.view);let Z=new $0;f3.BUBBLE_UP_EVENTS.forEach((Q)=>{Z.add(q6(this.container,Q,(G)=>{this.onDOMEvent(G,!1)}))}),f3.BUBBLE_DOWN_EVENTS.forEach((Q)=>{Z.add(q6(this.container,Q,(G)=>{this.onDOMEvent(G,!0)},!0))}),this.toDisposeOnSetContainer=Z}}show(J){var $,X;if(this.isVisible())this.hide();t5(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",P9(this.view),this.toDisposeOnClean=J.render(this.view)||m.None,this.delegate=J,this.doLayout(),(X=($=this.delegate).focus)===null||X===void 0||X.call($)}getViewElement(){return this.view}layout(){if(!this.isVisible())return;if(this.delegate.canRelayout===!1&&!(A4&&eq.pointerEvents)){this.hide();return}if(this.delegate.layout)this.delegate.layout();this.doLayout()}doLayout(){if(!this.isVisible())return;let J=this.delegate.getAnchor(),$;if(J instanceof HTMLElement){let j=g5(J),V=GP(J);$={top:j.top*V,left:j.left*V,width:j.width*V,height:j.height*V}}else if(SG0(J))$={top:J.y,left:J.x,width:J.width||1,height:J.height||2};else $={top:J.posy,left:J.posx,width:2,height:2};let X=YU(this.view),Y=vj(this.view),Z=this.delegate.anchorPosition||0,Q=this.delegate.anchorAlignment||0,G=this.delegate.anchorAxisAlignment||0,q,U,z=_p();if(G===0){let j={offset:$.top-z.pageYOffset,size:$.height,position:Z===0?0:1},V={offset:$.left,size:$.width,position:Q===0?0:1,mode:K2.ALIGN};if(q=h3(z.innerHeight,Y,j)+z.pageYOffset,l5.intersects({start:q,end:q+Y},{start:j.offset,end:j.offset+j.size}))V.mode=K2.AVOID;U=h3(z.innerWidth,X,V)}else{let j={offset:$.left,size:$.width,position:Q===0?0:1},V={offset:$.top,size:$.height,position:Z===0?0:1,mode:K2.ALIGN};if(U=h3(z.innerWidth,X,j),l5.intersects({start:U,end:U+X},{start:j.offset,end:j.offset+j.size}))V.mode=K2.AVOID;q=h3(z.innerHeight,Y,V)+z.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(Z===0?"bottom":"top"),this.view.classList.add(Q===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);let H=g5(this.container);this.view.style.top=`${q-(this.useFixedPosition?g5(this.view).top:H.top)}px`,this.view.style.left=`${U-(this.useFixedPosition?g5(this.view).left:H.left)}px`,this.view.style.width="initial"}hide(J){let $=this.delegate;if(this.delegate=null,$===null||$===void 0?void 0:$.onHide)$.onHide(J);this.toDisposeOnClean.dispose(),D9(this.view)}isVisible(){return!!this.delegate}onDOMEvent(J,$){if(this.delegate){if(this.delegate.onDOMEvent)this.delegate.onDOMEvent(J,O0(J).document.activeElement);else if($&&!e6(J.target,this.container))this.hide()}}dispose(){this.hide(),super.dispose()}};f3.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];f3.BUBBLE_DOWN_EVENTS=["click"]});var vG0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},hG0=function(J,$){return function(X,Y){$(X,Y,J)}},UM;var No=w(()=>{Qx();z0();z2();T0();UM=class extends m{constructor($){super();this.layoutService=$,this.currentViewDisposable=m.None,this.contextView=this._register(new f3(this.layoutService.mainContainer,1)),this.layout(),this._register($.onDidLayoutContainer(()=>this.layout()))}showContextView($,X,Y){let Z;if(X)if(X===this.layoutService.getContainer(O0(X)))Z=1;else if(Y)Z=3;else Z=2;else Z=1;this.contextView.setContainer(X!==null&&X!==void 0?X:this.layoutService.activeContainer,Z),this.contextView.show($);let Q=N0(()=>{if(this.currentViewDisposable===Q)this.hideContextView()});return this.currentViewDisposable=Q,Q}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView($){this.contextView.hide($)}dispose(){super.dispose(),this.currentViewDisposable.dispose(),this.currentViewDisposable=m.None}};UM=vG0([hG0(0,G4)],UM)});function mW(J,$=!1){fG0(J,!1,$)}function fG0(J,$,X){let Y=gG0(J,$);if(bz.push(Y),!Y.userConfigured)Gx.push(Y);else wo.push(Y);if(X&&!Y.userConfigured)bz.forEach((Z)=>{if(Z.mime===Y.mime||Z.userConfigured)return;if(Y.extension&&Z.extension===Y.extension)console.warn(`Overwriting extension <<${Y.extension}>> to now point to mime <<${Y.mime}>>`);if(Y.filename&&Z.filename===Y.filename)console.warn(`Overwriting filename <<${Y.filename}>> to now point to mime <<${Y.mime}>>`);if(Y.filepattern&&Z.filepattern===Y.filepattern)console.warn(`Overwriting filepattern <<${Y.filepattern}>> to now point to mime <<${Y.mime}>>`);if(Y.firstline&&Z.firstline===Y.firstline)console.warn(`Overwriting firstline <<${Y.firstline}>> to now point to mime <<${Y.mime}>>`)})}function gG0(J,$){return{id:J.id,mime:J.mime,filename:J.filename,extension:J.extension,filepattern:J.filepattern,firstline:J.firstline,userConfigured:$,filenameLowercase:J.filename?J.filename.toLowerCase():void 0,extensionLowercase:J.extension?J.extension.toLowerCase():void 0,filepatternLowercase:J.filepattern?Py(J.filepattern.toLowerCase()):void 0,filepatternOnPath:J.filepattern?J.filepattern.indexOf(b6.sep)>=0:!1}}function Lo(){bz=bz.filter((J)=>J.userConfigured),Gx=[]}function ko(J,$){return pG0(J,$).map((X)=>X.id)}function pG0(J,$){let X;if(J)switch(J.scheme){case G1.file:X=J.fsPath;break;case G1.data:{X=Q4.parseMetaData(J).get(Q4.META_DATA_LABEL);break}case G1.vscodeNotebookCell:X=void 0;break;default:X=J.path}if(!X)return[{id:"unknown",mime:x4.unknown}];X=X.toLowerCase();let Y=zJ(X),Z=To(X,Y,wo);if(Z)return[Z,{id:m5,mime:x4.text}];let Q=To(X,Y,Gx);if(Q)return[Q,{id:m5,mime:x4.text}];if($){let G=mG0($);if(G)return[G,{id:m5,mime:x4.text}]}return[{id:"unknown",mime:x4.unknown}]}function To(J,$,X){var Y;let Z=void 0,Q=void 0,G=void 0;for(let q=X.length-1;q>=0;q--){let U=X[q];if($===U.filenameLowercase){Z=U;break}if(U.filepattern){if(!Q||U.filepattern.length>Q.filepattern.length){let z=U.filepatternOnPath?J:$;if((Y=U.filepatternLowercase)===null||Y===void 0?void 0:Y.call(U,z))Q=U}}if(U.extension){if(!G||U.extension.length>G.extension.length){if($.endsWith(U.extensionLowercase))G=U}}}if(Z)return Z;if(Q)return Q;if(G)return G;return}function mG0(J){if(sq(J))J=J.substr(1);if(J.length>0)for(let $=bz.length-1;$>=0;$--){let X=bz[$];if(!X.firstline)continue;let Y=J.match(X.firstline);if(Y&&Y.length>0)return X}return}var bz,Gx,wo;var Eo=w(()=>{Dy();cj();e9();kY();cX();X1();OJ();bz=[],Gx=[],wo=[]});class yo{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Io,0),this._register(m5,1),this._nextLanguageId=2}_register(J,$){this._languageIdToLanguage[$]=J,this._languageToLanguageId.set(J,$)}register(J){if(this._languageToLanguageId.has(J))return;let $=this._nextLanguageId++;this._register(J,$)}encodeLanguageId(J){return this._languageToLanguageId.get(J)||0}decodeLanguageId(J){return this._languageIdToLanguage[J]||Io}}var zM,Io="vs.editor.nullLanguage",Sz;var xo=w(()=>{_0();z0();X1();Eo();OJ();dG();h7();zM=Object.prototype.hasOwnProperty;Sz=class Sz extends m{constructor(J=!0,$=!1){super();if(this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,Sz.instanceCount++,this._warnOnOverwrite=$,this.languageIdCodec=new yo,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},J)this._initializeFromRegistry(),this._register(IQ.onDidChangeLanguages((X)=>{this._initializeFromRegistry()}))}dispose(){Sz.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Lo();let J=[].concat(IQ.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(J)}_registerLanguages(J){for(let $ of J)this._registerLanguage($);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(($)=>{let X=this._languages[$];if(X.name)this._nameMap[X.name]=X.identifier;X.aliases.forEach((Y)=>{this._lowercaseNameMap[Y.toLowerCase()]=X.identifier}),X.mimetypes.forEach((Y)=>{this._mimeTypesMap[Y]=X.identifier})}),G6.as(b4.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(J){let $=J.id,X;if(zM.call(this._languages,$))X=this._languages[$];else this.languageIdCodec.register($),X={identifier:$,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[$]=X;this._mergeLanguage(X,J)}_mergeLanguage(J,$){let X=$.id,Y=null;if(Array.isArray($.mimetypes)&&$.mimetypes.length>0)J.mimetypes.push(...$.mimetypes),Y=$.mimetypes[0];if(!Y)Y=`text/x-${X}`,J.mimetypes.push(Y);if(Array.isArray($.extensions)){if($.configuration)J.extensions=$.extensions.concat(J.extensions);else J.extensions=J.extensions.concat($.extensions);for(let G of $.extensions)mW({id:X,mime:Y,extension:G},this._warnOnOverwrite)}if(Array.isArray($.filenames))for(let G of $.filenames)mW({id:X,mime:Y,filename:G},this._warnOnOverwrite),J.filenames.push(G);if(Array.isArray($.filenamePatterns))for(let G of $.filenamePatterns)mW({id:X,mime:Y,filepattern:G},this._warnOnOverwrite);if(typeof $.firstLine==="string"&&$.firstLine.length>0){let G=$.firstLine;if(G.charAt(0)!=="^")G="^"+G;try{let q=new RegExp(G);if(!wg(q))mW({id:X,mime:Y,firstline:q},this._warnOnOverwrite)}catch(q){console.warn(`[${$.id}]: Invalid regular expression \`${G}\`: `,q)}}J.aliases.push(X);let Z=null;if(typeof $.aliases<"u"&&Array.isArray($.aliases))if($.aliases.length===0)Z=[null];else Z=$.aliases;if(Z!==null)for(let G of Z){if(!G||G.length===0)continue;J.aliases.push(G)}let Q=Z!==null&&Z.length>0;if(Q&&Z[0]===null);else{let G=(Q?Z[0]:null)||X;if(Q||!J.name)J.name=G}if($.configuration)J.configurationFiles.push($.configuration);if($.icon)J.icons.push($.icon)}isRegisteredLanguageId(J){if(!J)return!1;return zM.call(this._languages,J)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(J){let $=J.toLowerCase();if(!zM.call(this._lowercaseNameMap,$))return null;return this._lowercaseNameMap[$]}getLanguageIdByMimeType(J){if(!J)return null;if(zM.call(this._mimeTypesMap,J))return this._mimeTypesMap[J];return null}guessLanguageIdByFilepathOrFirstLine(J,$){if(!J&&!$)return[];return ko(J,$)}};Sz.instanceCount=0});class qx{constructor(J,$){this._onDidChangeLanguages=J,this._selector=$,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){if(this._listener)this._listener.dispose(),this._listener=null;if(this._emitter)this._emitter.dispose(),this._emitter=null}get onDidChange(){if(!this._listener)this._listener=this._onDidChangeLanguages(()=>this._evaluate());if(!this._emitter)this._emitter=new x({onDidRemoveLastListener:()=>{this._dispose()}});return this._emitter.event}_evaluate(){var J;let $=this._selector();if($===this.languageId)return;this.languageId=$,(J=this._emitter)===null||J===void 0||J.fire(this.languageId)}}var Cz;var bo=w(()=>{_0();z0();xo();V1();c8();OJ();Cz=class Cz extends m{constructor(J=!1){super();this._onDidRequestBasicLanguageFeatures=this._register(new x),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new x),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new x({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,Cz.instanceCount++,this._registry=this._register(new Sz(!0,J)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){Cz.instanceCount--,super.dispose()}isRegisteredLanguageId(J){return this._registry.isRegisteredLanguageId(J)}getLanguageIdByLanguageName(J){return this._registry.getLanguageIdByLanguageName(J)}getLanguageIdByMimeType(J){return this._registry.getLanguageIdByMimeType(J)}guessLanguageIdByFilepathOrFirstLine(J,$){let X=this._registry.guessLanguageIdByFilepathOrFirstLine(J,$);return Eq(X,null)}createById(J){return new qx(this.onDidChange,()=>{return this._createAndGetLanguageIdentifier(J)})}createByFilepathOrFirstLine(J,$){return new qx(this.onDidChange,()=>{let X=this.guessLanguageIdByFilepathOrFirstLine(J,$);return this._createAndGetLanguageIdentifier(X)})}_createAndGetLanguageIdentifier(J){if(!J||!this.isRegisteredLanguageId(J))J=m5;return J}requestBasicLanguageFeatures(J){if(!this._requestedBasicLanguages.has(J))this._requestedBasicLanguages.add(J),this._onDidRequestBasicLanguageFeatures.fire(J)}requestRichLanguageFeatures(J){if(!this._requestedRichLanguages.has(J))this._requestedRichLanguages.add(J),this.requestBasicLanguageFeatures(J),$6.getOrCreate(J),this._onDidRequestRichLanguageFeatures.fire(J)}};Cz.instanceCount=0});var HM;var Ux=w(()=>{cj();HM={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:x4.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"}});function So(J,$){if(N5($))J.title=dR($);else if($===null||$===void 0?void 0:$.markdownNotSupportedFallback)J.title=$.markdownNotSupportedFallback;else J.removeAttribute("title")}class Co{constructor(J,$,X){this.hoverDelegate=J,this.target=$,this.fadeInAnimation=X}async update(J,$,X){var Y;if(this._cancellationTokenSource)this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0;if(this.isDisposed)return;let Z;if(J===void 0||N5(J)||J instanceof HTMLElement)Z=J;else if(!Iq(J.markdown))Z=(Y=J.markdown)!==null&&Y!==void 0?Y:J.markdownNotSupportedFallback;else{if(!this._hoverWidget)this.show(F("iconLabel.loading","Loading..."),$);this._cancellationTokenSource=new L5;let Q=this._cancellationTokenSource.token;if(Z=await J.markdown(Q),Z===void 0)Z=J.markdownNotSupportedFallback;if(this.isDisposed||Q.isCancellationRequested)return}this.show(Z,$,X)}show(J,$,X){let Y=this._hoverWidget;if(this.hasContent(J)){let Z={content:J,target:this.target,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!Y},position:{hoverPosition:2},...X};this._hoverWidget=this.hoverDelegate.showHover(Z,$)}Y===null||Y===void 0||Y.dispose()}hasContent(J){if(!J)return!1;if(yZ(J))return!!J.value;return!0}get isDisposed(){var J;return(J=this._hoverWidget)===null||J===void 0?void 0:J.isDisposed}dispose(){var J,$;(J=this._hoverWidget)===null||J===void 0||J.dispose(),($=this._cancellationTokenSource)===null||$===void 0||$.dispose(!0),this._cancellationTokenSource=void 0}}function jM(J,$,X,Y){let Z,Q,G=(A,D)=>{var M;let R=Q!==void 0;if(A)Q===null||Q===void 0||Q.dispose(),Q=void 0;if(D)Z===null||Z===void 0||Z.dispose(),Z=void 0;if(R)(M=J.onDidHideHover)===null||M===void 0||M.call(J)},q=(A,D,M)=>{return new s8(async()=>{if(!Q||Q.isDisposed)Q=new Co(J,M||$,A>0),await Q.update(X,D,Y)},A)},U=!1,z=r($,U0.MOUSE_DOWN,()=>{U=!0,G(!0,!0)},!0),H=r($,U0.MOUSE_UP,()=>{U=!1},!0),j=r($,U0.MOUSE_LEAVE,(A)=>{U=!1,G(!1,A.fromElement===$)},!0),V=()=>{if(Z)return;let A=new $0,D={targetElements:[$],dispose:()=>{}};if(J.placement===void 0||J.placement==="mouse"){let M=(R)=>{if(D.x=R.x+10,R.target instanceof HTMLElement&&R.target.classList.contains("action-label"))G(!0,!0)};A.add(r($,U0.MOUSE_MOVE,M,!0))}A.add(q(J.delay,!1,D)),Z=A},W=r($,U0.MOUSE_OVER,V,!0),B=()=>{if(U||Z)return;let A={targetElements:[$],dispose:()=>{}},D=new $0,M=()=>G(!0,!0);D.add(r($,U0.BLUR,M,!0)),D.add(q(J.delay,!1,A)),Z=D},K=r($,U0.FOCUS,B,!0);return{show:(A)=>{G(!1,!0),q(0,A)},hide:()=>{G(!0,!0)},update:async(A,D)=>{X=A,await(Q===null||Q===void 0?void 0:Q.update(X,void 0,D))},dispose:()=>{W.dispose(),j.dispose(),z.dispose(),H.dispose(),K.dispose(),G(!0,!0)}}}var zx=w(()=>{T0();e1();_8();S3();Nz();z0();c0()});class Hx{constructor(J){this.spliceables=J}splice(J,$,X){this.spliceables.forEach((Y)=>Y.splice(J,$,X))}}var jx=w(()=>{K0(".monaco-list{white-space:nowrap;width:100%;height:100%;position:relative}.monaco-list.mouse-support{-webkit-user-select:none;user-select:none}.monaco-list>.monaco-scrollable-element{height:100%}.monaco-list-rows{width:100%;height:100%;position:relative}.monaco-list.horizontal-scrolling .monaco-list-rows{width:auto;min-width:100%}.monaco-list-row{box-sizing:border-box;width:100%;position:absolute;overflow:hidden}.monaco-list.mouse-support .monaco-list-row{cursor:pointer;touch-action:none}.monaco-list .monaco-scrollable-element>.scrollbar.vertical,.monaco-pane-view>.monaco-split-view2.vertical>.monaco-scrollable-element>.scrollbar.vertical{z-index:14}.monaco-list-row.scrolling{display:none!important}.monaco-list.element-focused,.monaco-list.selection-single,.monaco-list.selection-multiple{outline:0!important}.monaco-drag-image{z-index:1000;border-radius:10px;padding:1px 7px;font-size:12px;display:inline-block;position:absolute}.monaco-list-type-filter-message{box-sizing:border-box;text-align:center;white-space:normal;opacity:.7;pointer-events:none;width:100%;height:100%;padding:40px 1em 1em;position:absolute;top:0;left:0}.monaco-list-type-filter-message:empty{display:none}")});var SZ;var vo=w(()=>{SZ=class SZ extends Error{constructor(J,$){super(`ListError [${J}] ${$}`)}}});function ho(J,$){let X=[];for(let Y of $){if(J.start>=Y.range.end)continue;if(J.end<Y.range.start)break;let Z=l5.intersect(J,Y.range);if(l5.isEmpty(Z))continue;X.push({range:Z,size:Y.size})}return X}function VM({start:J,end:$},X){return{start:J+X,end:$+X}}function uG0(J){let $=[],X=null;for(let Y of J){let Z=Y.range.start,Q=Y.range.end,G=Y.size;if(X&&G===X.size){X.range.end=Q;continue}X={range:{start:Z,end:Q},size:G},$.push(X)}return $}function cG0(...J){return uG0(J.reduce(($,X)=>$.concat(X),[]))}class WM{get paddingTop(){return this._paddingTop}set paddingTop(J){this._size=this._size+J-this._paddingTop,this._paddingTop=J}constructor(J){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=J!==null&&J!==void 0?J:0,this._size=this._paddingTop}splice(J,$,X=[]){let Y=X.length-$,Z=ho({start:0,end:J},this.groups),Q=ho({start:J+$,end:Number.POSITIVE_INFINITY},this.groups).map((q)=>({range:VM(q.range,Y),size:q.size})),G=X.map((q,U)=>({range:{start:J+U,end:J+U+1},size:q.size}));this.groups=cG0(Z,G,Q),this._size=this._paddingTop+this.groups.reduce((q,U)=>q+U.size*(U.range.end-U.range.start),0)}get count(){let J=this.groups.length;if(!J)return 0;return this.groups[J-1].range.end}get size(){return this._size}indexAt(J){if(J<0)return-1;if(J<this._paddingTop)return 0;let $=0,X=this._paddingTop;for(let Y of this.groups){let Z=Y.range.end-Y.range.start,Q=X+Z*Y.size;if(J<Q)return $+Math.floor((J-X)/Y.size);$+=Z,X=Q}return $}indexAfter(J){return Math.min(this.indexAt(J)+1,this.count)}positionAt(J){if(J<0)return-1;let $=0,X=0;for(let Y of this.groups){let Z=Y.range.end-Y.range.start,Q=X+Z;if(J<Q)return this._paddingTop+$+(J-X)*Y.size;$+=Z*Y.size,X=Q}return-1}}var fo=w(()=>{pW()});function lG0(J){var $;try{($=J.parentElement)===null||$===void 0||$.removeChild(J)}catch(X){}}class Vx{constructor(J){this.renderers=J,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(J){let $=this.getTemplateCache(J).pop(),X=!1;if($){if(X=this.transactionNodesPendingRemoval.has($.domNode),X)this.transactionNodesPendingRemoval.delete($.domNode)}else{let Y=B0(".monaco-list-row"),Q=this.getRenderer(J).renderTemplate(Y);$={domNode:Y,templateId:J,templateData:Q}}return{row:$,isReusingConnectedDomNode:X}}release(J){if(!J)return;this.releaseRow(J)}transact(J){if(this.inTransaction)throw Error("Already in transaction");this.inTransaction=!0;try{J()}finally{for(let $ of this.transactionNodesPendingRemoval)this.doRemoveNode($);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(J){let{domNode:$,templateId:X}=J;if($)if(this.inTransaction)this.transactionNodesPendingRemoval.add($);else this.doRemoveNode($);this.getTemplateCache(X).push(J)}doRemoveNode(J){J.classList.remove("scrolling"),lG0(J)}getTemplateCache(J){let $=this.cache.get(J);if(!$)$=[],this.cache.set(J,$);return $}dispose(){this.cache.forEach((J,$)=>{for(let X of J)this.getRenderer($).disposeTemplate(X.templateData),X.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(J){let $=this.renderers.get(J);if(!$)throw Error(`No renderer found for ${J}`);return $}}var go=w(()=>{T0()});class A2{constructor(J){this.elements=J}update(){}getData(){return this.elements}}class po{constructor(J){this.elements=J}update(){}getData(){return this.elements}}class mo{constructor(){this.types=[],this.files=[]}update(J){if(J.types)this.types.splice(0,this.types.length,...J.types);if(J.files){this.files.splice(0,this.files.length);for(let $=0;$<J.files.length;$++){let X=J.files.item($);if(X&&(X.size||X.type))this.files.push(X)}}}getData(){return{types:this.types,files:this.files}}}function dG0(J,$){if(Array.isArray(J)&&Array.isArray($))return B6(J,$);return J===$}class uo{constructor(J){if(J===null||J===void 0?void 0:J.getSetSize)this.getSetSize=J.getSetSize.bind(J);else this.getSetSize=($,X,Y)=>Y;if(J===null||J===void 0?void 0:J.getPosInSet)this.getPosInSet=J.getPosInSet.bind(J);else this.getPosInSet=($,X)=>X+1;if(J===null||J===void 0?void 0:J.getRole)this.getRole=J.getRole.bind(J);else this.getRole=($)=>"listitem";if(J===null||J===void 0?void 0:J.isChecked)this.isChecked=J.isChecked.bind(J);else this.isChecked=($)=>{return}}}class q4{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(J){if(J===this._horizontalScrolling)return;if(J&&this.supportDynamicHeights)throw Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=J,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let $ of this.items)this.measureItemWidth($);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:qP(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}constructor(J,$,X,Y=JY){var Z,Q,G,q,U,z,H,j,V,W,B,K,P;if(this.virtualDelegate=$,this.domId=`list_id_${++q4.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new AJ(50),this.splicing=!1,this.dragOverAnimationStopDisposable=m.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=m.None,this.onDragLeaveTimeout=m.None,this.disposables=new $0,this._onDidChangeContentHeight=new x,this._onDidChangeContentWidth=new x,this.onDidChangeContentHeight=q0.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,Y.horizontalScrolling&&Y.supportDynamicHeights)throw Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new WM((Z=Y.paddingTop)!==null&&Z!==void 0?Z:0);for(let D of X)this.renderers.set(D.templateId,D);if(this.cache=this.disposables.add(new Vx(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof Y.mouseSupport==="boolean"?Y.mouseSupport:!0),this._horizontalScrolling=(Q=Y.horizontalScrolling)!==null&&Q!==void 0?Q:JY.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof Y.paddingBottom>"u"?0:Y.paddingBottom,this.accessibilityProvider=new uo(Y.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(G=Y.transformOptimization)!==null&&G!==void 0?G:JY.transformOptimization)this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict";this.disposables.add(b1.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new kJ({forceIntegerValues:!0,smoothScrollDuration:((q=Y.smoothScrolling)!==null&&q!==void 0?q:!1)?125:0,scheduleAtNextAnimationFrame:(D)=>f5(O0(this.domNode),D)})),this.scrollableElement=this.disposables.add(new HZ(this.rowsContainer,{alwaysConsumeMouseWheel:(U=Y.alwaysConsumeMouseWheel)!==null&&U!==void 0?U:JY.alwaysConsumeMouseWheel,horizontal:1,vertical:(z=Y.verticalScrollMode)!==null&&z!==void 0?z:JY.verticalScrollMode,useShadows:(H=Y.useShadows)!==null&&H!==void 0?H:JY.useShadows,mouseWheelScrollSensitivity:Y.mouseWheelScrollSensitivity,fastScrollSensitivity:Y.fastScrollSensitivity,scrollByPage:Y.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),J.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(r(this.rowsContainer,f1.Change,(D)=>this.onTouchChange(D))),this.disposables.add(r(this.scrollableElement.getDomNode(),"scroll",(D)=>D.target.scrollTop=0)),this.disposables.add(r(this.domNode,"dragover",(D)=>this.onDragOver(this.toDragEvent(D)))),this.disposables.add(r(this.domNode,"drop",(D)=>this.onDrop(this.toDragEvent(D)))),this.disposables.add(r(this.domNode,"dragleave",(D)=>this.onDragLeave(this.toDragEvent(D)))),this.disposables.add(r(this.domNode,"dragend",(D)=>this.onDragEnd(D))),this.setRowLineHeight=(j=Y.setRowLineHeight)!==null&&j!==void 0?j:JY.setRowLineHeight,this.setRowHeight=(V=Y.setRowHeight)!==null&&V!==void 0?V:JY.setRowHeight,this.supportDynamicHeights=(W=Y.supportDynamicHeights)!==null&&W!==void 0?W:JY.supportDynamicHeights,this.dnd=(B=Y.dnd)!==null&&B!==void 0?B:this.disposables.add(JY.dnd),this.layout((K=Y.initialSize)===null||K===void 0?void 0:K.height,(P=Y.initialSize)===null||P===void 0?void 0:P.width)}updateOptions(J){if(J.paddingBottom!==void 0)this.paddingBottom=J.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight});if(J.smoothScrolling!==void 0)this.scrollable.setSmoothScrollDuration(J.smoothScrolling?125:0);if(J.horizontalScrolling!==void 0)this.horizontalScrolling=J.horizontalScrolling;let $;if(J.scrollByPage!==void 0)$={...$!==null&&$!==void 0?$:{},scrollByPage:J.scrollByPage};if(J.mouseWheelScrollSensitivity!==void 0)$={...$!==null&&$!==void 0?$:{},mouseWheelScrollSensitivity:J.mouseWheelScrollSensitivity};if(J.fastScrollSensitivity!==void 0)$={...$!==null&&$!==void 0?$:{},fastScrollSensitivity:J.fastScrollSensitivity};if($)this.scrollableElement.updateOptions($);if(J.paddingTop!==void 0&&J.paddingTop!==this.rangeMap.paddingTop){let X=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),Y=J.paddingTop-this.rangeMap.paddingTop;if(this.rangeMap.paddingTop=J.paddingTop,this.render(X,Math.max(0,this.lastRenderTop+Y),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights)this._rerender(this.lastRenderTop,this.lastRenderHeight)}}splice(J,$,X=[]){if(this.splicing)throw Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(J,$,X)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(J,$,X=[]){let Y=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),Z={start:J,end:J+$},Q=l5.intersect(Y,Z),G=new Map;for(let O=Q.end-1;O>=Q.start;O--){let N=this.items[O];if(N.dragStartDisposable.dispose(),N.checkedDisposable.dispose(),N.row){let T=G.get(N.templateId);if(!T)T=[],G.set(N.templateId,T);let S=this.renderers.get(N.templateId);if(S&&S.disposeElement)S.disposeElement(N.element,O,N.row.templateData,N.size);T.push(N.row)}N.row=null}let q={start:J+$,end:this.items.length},U=l5.intersect(q,Y),z=l5.relativeComplement(q,Y),H=X.map((O)=>({id:String(this.itemId++),element:O,templateId:this.virtualDelegate.getTemplateId(O),size:this.virtualDelegate.getHeight(O),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(O),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:m.None,checkedDisposable:m.None})),j;if(J===0&&$>=this.items.length)this.rangeMap=new WM(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,H),j=this.items,this.items=H;else this.rangeMap.splice(J,$,H),j=this.items.splice(J,$,...H);let V=X.length-$,W=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),B=VM(U,V),K=l5.intersect(W,B);for(let O=K.start;O<K.end;O++)this.updateItemInDOM(this.items[O],O);let P=l5.relativeComplement(B,W);for(let O of P)for(let N=O.start;N<O.end;N++)this.removeItemFromDOM(N);let A=z.map((O)=>VM(O,V)),M=[{start:J,end:J+X.length},...A].map((O)=>l5.intersect(W,O)),R=this.getNextToLastElement(M);for(let O of M)for(let N=O.start;N<O.end;N++){let T=this.items[N],S=G.get(T.templateId),v=S===null||S===void 0?void 0:S.pop();this.insertItemInDOM(N,R,v)}for(let O of G.values())for(let N of O)this.cache.release(N);if(this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights)this._rerender(this.scrollTop,this.renderHeight);return j.map((O)=>O.element)}eventuallyUpdateScrollDimensions(){if(this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,!this.scrollableElementUpdateDisposable)this.scrollableElementUpdateDisposable=f5(O0(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let J=0;for(let $ of this.items)if(typeof $.width<"u")J=Math.max(J,$.width);this.scrollWidth=J,this.scrollableElement.setScrollDimensions({scrollWidth:J===0?0:J+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(!this.supportDynamicHeights)return;for(let J of this.items)J.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(J){return this.items[J].element}indexOf(J){return this.items.findIndex(($)=>$.element===J)}domElement(J){let $=this.items[J].row;return $&&$.domNode}elementHeight(J){return this.items[J].size}elementTop(J){return this.rangeMap.positionAt(J)}indexAt(J){return this.rangeMap.indexAt(J)}indexAfter(J){return this.rangeMap.indexAfter(J)}layout(J,$){let X={height:typeof J==="number"?J:Mp(this.domNode)};if(this.scrollableElementUpdateDisposable)this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,X.scrollHeight=this.scrollHeight;if(this.scrollableElement.setScrollDimensions(X),typeof $<"u"){if(this.renderWidth=$,this.supportDynamicHeights)this._rerender(this.scrollTop,this.renderHeight)}if(this.horizontalScrolling)this.scrollableElement.setScrollDimensions({width:typeof $==="number"?$:qP(this.domNode)})}render(J,$,X,Y,Z,Q=!1){let G=this.getRenderRange($,X),q=l5.relativeComplement(G,J),U=l5.relativeComplement(J,G),z=this.getNextToLastElement(q);if(Q){let H=l5.intersect(J,G);for(let j=H.start;j<H.end;j++)this.updateItemInDOM(this.items[j],j)}if(this.cache.transact(()=>{for(let H of U)for(let j=H.start;j<H.end;j++)this.removeItemFromDOM(j);for(let H of q)for(let j=H.start;j<H.end;j++)this.insertItemInDOM(j,z)}),Y!==void 0)this.rowsContainer.style.left=`-${Y}px`;if(this.rowsContainer.style.top=`-${$}px`,this.horizontalScrolling&&Z!==void 0)this.rowsContainer.style.width=`${Math.max(Z,this.renderWidth)}px`;this.lastRenderTop=$,this.lastRenderHeight=X}insertItemInDOM(J,$,X){let Y=this.items[J],Z=!1;if(!Y.row)if(X)Y.row=X;else{let z=this.cache.alloc(Y.templateId);Y.row=z.row,Z=z.isReusingConnectedDomNode}let Q=this.accessibilityProvider.getRole(Y.element)||"listitem";Y.row.domNode.setAttribute("role",Q);let G=this.accessibilityProvider.isChecked(Y.element);if(typeof G==="boolean")Y.row.domNode.setAttribute("aria-checked",String(!!G));else if(G){let z=(H)=>Y.row.domNode.setAttribute("aria-checked",String(!!H));z(G.value),Y.checkedDisposable=G.onDidChange(z)}if(Z||!Y.row.domNode.parentElement)if($)this.rowsContainer.insertBefore(Y.row.domNode,$);else this.rowsContainer.appendChild(Y.row.domNode);this.updateItemInDOM(Y,J);let q=this.renderers.get(Y.templateId);if(!q)throw Error(`No renderer found for template id ${Y.templateId}`);q===null||q===void 0||q.renderElement(Y.element,J,Y.row.templateData,Y.size);let U=this.dnd.getDragURI(Y.element);if(Y.dragStartDisposable.dispose(),Y.row.domNode.draggable=!!U,U)Y.dragStartDisposable=r(Y.row.domNode,"dragstart",(z)=>this.onDragStart(Y.element,U,z));if(this.horizontalScrolling)this.measureItemWidth(Y),this.eventuallyUpdateScrollWidth()}measureItemWidth(J){if(!J.row||!J.row.domNode)return;J.row.domNode.style.width="fit-content",J.width=qP(J.row.domNode);let $=O0(J.row.domNode).getComputedStyle(J.row.domNode);if($.paddingLeft)J.width+=parseFloat($.paddingLeft);if($.paddingRight)J.width+=parseFloat($.paddingRight);J.row.domNode.style.width=""}updateItemInDOM(J,$){if(J.row.domNode.style.top=`${this.elementTop($)}px`,this.setRowHeight)J.row.domNode.style.height=`${J.size}px`;if(this.setRowLineHeight)J.row.domNode.style.lineHeight=`${J.size}px`;J.row.domNode.setAttribute("data-index",`${$}`),J.row.domNode.setAttribute("data-last-element",$===this.length-1?"true":"false"),J.row.domNode.setAttribute("data-parity",$%2===0?"even":"odd"),J.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(J.element,$,this.length))),J.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(J.element,$))),J.row.domNode.setAttribute("id",this.getElementDomId($)),J.row.domNode.classList.toggle("drop-target",J.dropTarget)}removeItemFromDOM(J){let $=this.items[J];if($.dragStartDisposable.dispose(),$.checkedDisposable.dispose(),$.row){let X=this.renderers.get($.templateId);if(X&&X.disposeElement)X.disposeElement($.element,J,$.row.templateData,$.size);this.cache.release($.row),$.row=null}if(this.horizontalScrolling)this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(J,$){if(this.scrollableElementUpdateDisposable)this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight});this.scrollableElement.setScrollPosition({scrollTop:J,reuseAnimation:$})}get scrollTop(){return this.getScrollTop()}set scrollTop(J){this.setScrollTop(J)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return q0.map(this.disposables.add(new H1(this.domNode,"click")).event,(J)=>this.toMouseEvent(J),this.disposables)}get onMouseDblClick(){return q0.map(this.disposables.add(new H1(this.domNode,"dblclick")).event,(J)=>this.toMouseEvent(J),this.disposables)}get onMouseMiddleClick(){return q0.filter(q0.map(this.disposables.add(new H1(this.domNode,"auxclick")).event,(J)=>this.toMouseEvent(J),this.disposables),(J)=>J.browserEvent.button===1,this.disposables)}get onMouseDown(){return q0.map(this.disposables.add(new H1(this.domNode,"mousedown")).event,(J)=>this.toMouseEvent(J),this.disposables)}get onMouseOver(){return q0.map(this.disposables.add(new H1(this.domNode,"mouseover")).event,(J)=>this.toMouseEvent(J),this.disposables)}get onMouseOut(){return q0.map(this.disposables.add(new H1(this.domNode,"mouseout")).event,(J)=>this.toMouseEvent(J),this.disposables)}get onContextMenu(){return q0.any(q0.map(this.disposables.add(new H1(this.domNode,"contextmenu")).event,(J)=>this.toMouseEvent(J),this.disposables),q0.map(this.disposables.add(new H1(this.domNode,f1.Contextmenu)).event,(J)=>this.toGestureEvent(J),this.disposables))}get onTouchStart(){return q0.map(this.disposables.add(new H1(this.domNode,"touchstart")).event,(J)=>this.toTouchEvent(J),this.disposables)}get onTap(){return q0.map(this.disposables.add(new H1(this.rowsContainer,f1.Tap)).event,(J)=>this.toGestureEvent(J),this.disposables)}toMouseEvent(J){let $=this.getItemIndexFromEventTarget(J.target||null),X=typeof $>"u"?void 0:this.items[$],Y=X&&X.element;return{browserEvent:J,index:$,element:Y}}toTouchEvent(J){let $=this.getItemIndexFromEventTarget(J.target||null),X=typeof $>"u"?void 0:this.items[$],Y=X&&X.element;return{browserEvent:J,index:$,element:Y}}toGestureEvent(J){let $=this.getItemIndexFromEventTarget(J.initialTarget||null),X=typeof $>"u"?void 0:this.items[$],Y=X&&X.element;return{browserEvent:J,index:$,element:Y}}toDragEvent(J){let $=this.getItemIndexFromEventTarget(J.target||null),X=typeof $>"u"?void 0:this.items[$],Y=X&&X.element,Z=this.getTargetSector(J,$);return{browserEvent:J,index:$,element:Y,sector:Z}}onScroll(J){try{let $=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);if(this.render($,J.scrollTop,J.height,J.scrollLeft,J.scrollWidth),this.supportDynamicHeights)this._rerender(J.scrollTop,J.height,J.inSmoothScrolling)}catch($){throw console.error("Got bad scroll event:",J),$}}onTouchChange(J){J.preventDefault(),J.stopPropagation(),this.scrollTop-=J.translationY}onDragStart(J,$,X){var Y,Z;if(!X.dataTransfer)return;let Q=this.dnd.getDragElements(J);if(X.dataTransfer.effectAllowed="copyMove",X.dataTransfer.setData(HM.TEXT,$),X.dataTransfer.setDragImage){let G;if(this.dnd.getDragLabel)G=this.dnd.getDragLabel(Q,X);if(typeof G>"u")G=String(Q.length);let q=B0(".monaco-drag-image");q.textContent=G;let z=((H)=>{while(H&&!H.classList.contains("monaco-workbench"))H=H.parentElement;return H||this.domNode.ownerDocument})(this.domNode);z.appendChild(q),X.dataTransfer.setDragImage(q,-10,-10),setTimeout(()=>z.removeChild(q),0)}this.domNode.classList.add("dragging"),this.currentDragData=new A2(Q),g3.CurrentDragAndDropData=new po(Q),(Z=(Y=this.dnd).onDragStart)===null||Z===void 0||Z.call(Y,this.currentDragData,X)}onDragOver(J){var $,X;if(J.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),g3.CurrentDragAndDropData&&g3.CurrentDragAndDropData.getData()==="vscode-ui")return!1;if(this.setupDragAndDropScrollTopAnimation(J.browserEvent),!J.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(g3.CurrentDragAndDropData)this.currentDragData=g3.CurrentDragAndDropData;else{if(!J.browserEvent.dataTransfer.types)return!1;this.currentDragData=new mo}let Y=this.dnd.onDragOver(this.currentDragData,J.element,J.index,J.sector,J.browserEvent);if(this.canDrop=typeof Y==="boolean"?Y:Y.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;J.browserEvent.dataTransfer.dropEffect=typeof Y!=="boolean"&&(($=Y.effect)===null||$===void 0?void 0:$.type)===0?"copy":"move";let Z;if(typeof Y!=="boolean"&&Y.feedback)Z=Y.feedback;else if(typeof J.index>"u")Z=[-1];else Z=[J.index];Z=ZJ(Z).filter((G)=>G>=-1&&G<this.length).sort((G,q)=>G-q),Z=Z[0]===-1?[-1]:Z;let Q=typeof Y!=="boolean"&&Y.effect&&Y.effect.position?Y.effect.position:"drop-target";if(dG0(this.currentDragFeedback,Z)&&this.currentDragFeedbackPosition===Q)return!0;if(this.currentDragFeedback=Z,this.currentDragFeedbackPosition=Q,this.currentDragFeedbackDisposable.dispose(),Z[0]===-1)this.domNode.classList.add(Q),this.rowsContainer.classList.add(Q),this.currentDragFeedbackDisposable=N0(()=>{this.domNode.classList.remove(Q),this.rowsContainer.classList.remove(Q)});else{if(Z.length>1&&Q!=="drop-target")throw Error("Can't use multiple feedbacks with position different than 'over'");if(Q==="drop-target-after"){if(Z[0]<this.length-1)Z[0]+=1,Q="drop-target-before"}for(let G of Z){let q=this.items[G];q.dropTarget=!0,(X=q.row)===null||X===void 0||X.domNode.classList.add(Q)}this.currentDragFeedbackDisposable=N0(()=>{var G;for(let q of Z){let U=this.items[q];U.dropTarget=!1,(G=U.row)===null||G===void 0||G.domNode.classList.remove(Q)}})}return!0}onDragLeave(J){var $,X;if(this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=NQ(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData)(X=($=this.dnd).onDragLeave)===null||X===void 0||X.call($,this.currentDragData,J.element,J.index,J.browserEvent)}onDrop(J){if(!this.canDrop)return;let $=this.currentDragData;if(this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,g3.CurrentDragAndDropData=void 0,!$||!J.browserEvent.dataTransfer)return;J.browserEvent.preventDefault(),$.update(J.browserEvent.dataTransfer),this.dnd.drop($,J.element,J.index,J.sector,J.browserEvent)}onDragEnd(J){var $,X;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,g3.CurrentDragAndDropData=void 0,(X=($=this.dnd).onDragEnd)===null||X===void 0||X.call($,J)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=m.None}setupDragAndDropScrollTopAnimation(J){if(!this.dragOverAnimationDisposable){let $=Dp(this.domNode).top;this.dragOverAnimationDisposable=Ip(O0(this.domNode),this.animateDragAndDropScrollTop.bind(this,$))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=NQ(()=>{if(this.dragOverAnimationDisposable)this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0},1000,this.disposables),this.dragOverMouseY=J.pageY}animateDragAndDropScrollTop(J){if(this.dragOverMouseY===void 0)return;let $=this.dragOverMouseY-J,X=this.renderHeight-35;if($<35)this.scrollTop+=Math.max(-14,Math.floor(0.3*($-35)));else if($>X)this.scrollTop+=Math.min(14,Math.floor(0.3*($-X)))}teardownDragAndDropScrollTopAnimation(){if(this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable)this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0}getTargetSector(J,$){if($===void 0)return;let X=J.offsetY/this.items[$].size;return Math.floor(X/0.25)}getItemIndexFromEventTarget(J){let $=this.scrollableElement.getDomNode(),X=J;while(X instanceof HTMLElement&&X!==this.rowsContainer&&$.contains(X)){let Y=X.getAttribute("data-index");if(Y){let Z=Number(Y);if(!isNaN(Z))return Z}X=X.parentElement}return}getRenderRange(J,$){return{start:this.rangeMap.indexAt(J),end:this.rangeMap.indexAfter(J+$-1)}}_rerender(J,$,X){let Y=this.getRenderRange(J,$),Z,Q;if(J===this.elementTop(Y.start))Z=Y.start,Q=0;else if(Y.end-Y.start>1)Z=Y.start+1,Q=this.elementTop(Z)-J;let G=0;while(!0){let q=this.getRenderRange(J,$),U=!1;for(let z=q.start;z<q.end;z++){let H=this.probeDynamicHeight(z);if(H!==0)this.rangeMap.splice(z,1,[this.items[z]]);G+=H,U=U||H!==0}if(!U){if(G!==0)this.eventuallyUpdateScrollDimensions();let z=l5.relativeComplement(Y,q);for(let j of z)for(let V=j.start;V<j.end;V++)if(this.items[V].row)this.removeItemFromDOM(V);let H=l5.relativeComplement(q,Y);for(let j of H)for(let V=j.start;V<j.end;V++){let W=V+1,B=W<this.items.length?this.items[W].row:null,K=B?B.domNode:null;this.insertItemInDOM(V,K)}for(let j=q.start;j<q.end;j++)if(this.items[j].row)this.updateItemInDOM(this.items[j],j);if(typeof Z==="number"){let j=this.scrollable.getFutureScrollPosition().scrollTop-J,V=this.elementTop(Z)-Q+j;this.setScrollTop(V,X)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(J){var $,X,Y;let Z=this.items[J];if(this.virtualDelegate.getDynamicHeight){let U=this.virtualDelegate.getDynamicHeight(Z.element);if(U!==null){let z=Z.size;return Z.size=U,Z.lastDynamicHeightWidth=this.renderWidth,U-z}}if(!Z.hasDynamicHeight||Z.lastDynamicHeightWidth===this.renderWidth)return 0;if(!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(Z.element))return 0;let Q=Z.size;if(Z.row)return Z.row.domNode.style.height="",Z.size=Z.row.domNode.offsetHeight,Z.lastDynamicHeightWidth=this.renderWidth,Z.size-Q;let{row:G}=this.cache.alloc(Z.templateId);G.domNode.style.height="",this.rowsContainer.appendChild(G.domNode);let q=this.renderers.get(Z.templateId);if(!q)throw new u1("Missing renderer for templateId: "+Z.templateId);return q.renderElement(Z.element,J,G.templateData,void 0),Z.size=G.domNode.offsetHeight,($=q.disposeElement)===null||$===void 0||$.call(q,Z.element,J,G.templateData,void 0),(Y=(X=this.virtualDelegate).setDynamicHeight)===null||Y===void 0||Y.call(X,Z.element,Z.size),Z.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(G.domNode),this.cache.release(G),Z.size-Q}getNextToLastElement(J){let $=J[J.length-1];if(!$)return null;let X=this.items[$.end];if(!X)return null;if(!X.row)return null;return X.row.domNode}getElementDomId(J){return`${this.domId}_${J}`}dispose(){var J,$;for(let X of this.items)if(X.dragStartDisposable.dispose(),X.checkedDisposable.dispose(),X.row){let Y=this.renderers.get(X.row.templateId);if(Y)(J=Y.disposeElement)===null||J===void 0||J.call(Y,X.element,-1,X.row.templateData,void 0),Y.disposeTemplate(X.row.templateData)}if(this.items=[],this.domNode&&this.domNode.parentNode)this.domNode.parentNode.removeChild(this.domNode);($=this.dragOverAnimationDisposable)===null||$===void 0||$.dispose(),this.disposables.dispose()}}var CZ=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},g3,JY;var BM=w(()=>{Ux();T0();k$();g4();L$();V1();e1();_0();z0();pW();dU();fo();go();O1();g3={CurrentDragAndDropData:void 0},JY={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(J){return[J]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};q4.InstanceCount=0;CZ([F6],q4.prototype,"onMouseClick",null);CZ([F6],q4.prototype,"onMouseDblClick",null);CZ([F6],q4.prototype,"onMouseMiddleClick",null);CZ([F6],q4.prototype,"onMouseDown",null);CZ([F6],q4.prototype,"onMouseOver",null);CZ([F6],q4.prototype,"onMouseOut",null);CZ([F6],q4.prototype,"onContextMenu",null);CZ([F6],q4.prototype,"onTouchStart",null);CZ([F6],q4.prototype,"onTap",null)});class so{constructor(J){this.trait=J,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(J){return J}renderElement(J,$,X){let Y=this.renderedElements.findIndex((Z)=>Z.templateData===X);if(Y>=0){let Z=this.renderedElements[Y];this.trait.unrender(X),Z.index=$}else{let Z={index:$,templateData:X};this.renderedElements.push(Z)}this.trait.renderIndex($,X)}splice(J,$,X){let Y=[];for(let Z of this.renderedElements)if(Z.index<J)Y.push(Z);else if(Z.index>=J+$)Y.push({index:Z.index+X-$,templateData:Z.templateData});this.renderedElements=Y}renderIndexes(J){for(let{index:$,templateData:X}of this.renderedElements)if(J.indexOf($)>-1)this.trait.renderIndex($,X)}disposeTemplate(J){let $=this.renderedElements.findIndex((X)=>X.templateData===J);if($<0)return;this.renderedElements.splice($,1)}}class uW{get name(){return this._trait}get renderer(){return new so(this)}constructor(J){this._trait=J,this.indexes=[],this.sortedIndexes=[],this._onChange=new x,this.onChange=this._onChange.event}splice(J,$,X){let Y=X.length-$,Z=J+$,Q=[],G=0;while(G<this.sortedIndexes.length&&this.sortedIndexes[G]<J)Q.push(this.sortedIndexes[G++]);for(let q=0;q<X.length;q++)if(X[q])Q.push(q+J);while(G<this.sortedIndexes.length&&this.sortedIndexes[G]>=Z)Q.push(this.sortedIndexes[G++]+Y);this.renderer.splice(J,$,X.length),this._set(Q,Q)}renderIndex(J,$){$.classList.toggle(this._trait,this.contains(J))}unrender(J){J.classList.remove(this._trait)}set(J,$){return this._set(J,[...J].sort(lo),$)}_set(J,$,X){let Y=this.indexes,Z=this.sortedIndexes;this.indexes=J,this.sortedIndexes=$;let Q=Wx(Z,J);return this.renderer.renderIndexes(Q),this._onChange.fire({indexes:J,browserEvent:X}),Y}get(){return this.indexes}contains(J){return YK(this.sortedIndexes,J,lo)>=0}dispose(){h1(this._onChange)}}class FM{constructor(J,$,X){this.trait=J,this.view=$,this.identityProvider=X}splice(J,$,X){if(!this.identityProvider)return this.trait.splice(J,$,Array(X.length).fill(!1));let Y=this.trait.get().map((G)=>this.identityProvider.getId(this.view.element(G)).toString());if(Y.length===0)return this.trait.splice(J,$,Array(X.length).fill(!1));let Z=new Set(Y),Q=X.map((G)=>Z.has(this.identityProvider.getId(G).toString()));this.trait.splice(J,$,Q)}}function vZ(J){return J.tagName==="INPUT"||J.tagName==="TEXTAREA"}function cW(J,$){if(J.classList.contains($))return!0;if(J.classList.contains("monaco-list"))return!1;if(!J.parentElement)return!1;return cW(J.parentElement,$)}function vz(J){return cW(J,"monaco-editor")}function ro(J){return cW(J,"monaco-custom-toggle")}function io(J){return cW(J,"action-item")}function fz(J){return cW(J,"monaco-tree-sticky-row")}function lW(J){return J.classList.contains("monaco-tree-sticky-container")}function Bx(J){if(J.tagName==="A"&&J.classList.contains("monaco-button")||J.tagName==="DIV"&&J.classList.contains("monaco-button-dropdown"))return!0;if(J.classList.contains("monaco-list"))return!1;if(!J.parentElement)return!1;return Bx(J.parentElement)}class Fx{get onKeyDown(){return q0.chain(this.disposables.add(new H1(this.view.domNode,"keydown")).event,(J)=>J.filter(($)=>!vZ($.target)).map(($)=>new R1($)))}constructor(J,$,X){this.list=J,this.view=$,this.disposables=new $0,this.multipleSelectionDisposables=new $0,this.multipleSelectionSupport=X.multipleSelectionSupport,this.disposables.add(this.onKeyDown((Y)=>{switch(Y.keyCode){case 3:return this.onEnter(Y);case 16:return this.onUpArrow(Y);case 18:return this.onDownArrow(Y);case 11:return this.onPageUpArrow(Y);case 12:return this.onPageDownArrow(Y);case 9:return this.onEscape(Y);case 31:if(this.multipleSelectionSupport&&(t0?Y.metaKey:Y.ctrlKey))this.onCtrlA(Y)}}))}updateOptions(J){if(J.multipleSelectionSupport!==void 0)this.multipleSelectionSupport=J.multipleSelectionSupport}onEnter(J){J.preventDefault(),J.stopPropagation(),this.list.setSelection(this.list.getFocus(),J.browserEvent)}onUpArrow(J){J.preventDefault(),J.stopPropagation(),this.list.focusPrevious(1,!1,J.browserEvent);let $=this.list.getFocus()[0];this.list.setAnchor($),this.list.reveal($),this.view.domNode.focus()}onDownArrow(J){J.preventDefault(),J.stopPropagation(),this.list.focusNext(1,!1,J.browserEvent);let $=this.list.getFocus()[0];this.list.setAnchor($),this.list.reveal($),this.view.domNode.focus()}onPageUpArrow(J){J.preventDefault(),J.stopPropagation(),this.list.focusPreviousPage(J.browserEvent);let $=this.list.getFocus()[0];this.list.setAnchor($),this.list.reveal($),this.view.domNode.focus()}onPageDownArrow(J){J.preventDefault(),J.stopPropagation(),this.list.focusNextPage(J.browserEvent);let $=this.list.getFocus()[0];this.list.setAnchor($),this.list.reveal($),this.view.domNode.focus()}onCtrlA(J){J.preventDefault(),J.stopPropagation(),this.list.setSelection(r5(this.list.length),J.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(J){if(this.list.getSelection().length)J.preventDefault(),J.stopPropagation(),this.list.setSelection([],J.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}class no{constructor(J,$,X,Y,Z){this.list=J,this.view=$,this.keyboardNavigationLabelProvider=X,this.keyboardNavigationEventFilter=Y,this.delegate=Z,this.enabled=!1,this.state=hz.Idle,this.mode=C$.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new $0,this.disposables=new $0,this.updateOptions(J.options)}updateOptions(J){var $,X;if(($=J.typeNavigationEnabled)!==null&&$!==void 0?$:!0)this.enable();else this.disable();this.mode=(X=J.typeNavigationMode)!==null&&X!==void 0?X:C$.Automatic}enable(){if(this.enabled)return;let J=!1,$=q0.chain(this.enabledDisposables.add(new H1(this.view.domNode,"keydown")).event,(Z)=>Z.filter((Q)=>!vZ(Q.target)).filter(()=>this.mode===C$.Automatic||this.triggered).map((Q)=>new R1(Q)).filter((Q)=>J||this.keyboardNavigationEventFilter(Q)).filter((Q)=>this.delegate.mightProducePrintableCharacter(Q)).forEach((Q)=>a0.stop(Q,!0)).map((Q)=>Q.browserEvent.key)),X=q0.debounce($,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);q0.reduce(q0.any($,X),(Z,Q)=>Q===null?null:(Z||"")+Q,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),X(this.onClear,this,this.enabledDisposables),$(()=>J=!0,void 0,this.enabledDisposables),X(()=>J=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){if(!this.enabled)return;this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1}onClear(){var J;let $=this.list.getFocus();if($.length>0&&$[0]===this.previouslyFocused){let X=(J=this.list.options.accessibilityProvider)===null||J===void 0?void 0:J.getAriaLabel(this.list.element($[0]));if(X)NU(X)}this.previouslyFocused=-1}onInput(J){if(!J){this.state=hz.Idle,this.triggered=!1;return}let $=this.list.getFocus(),X=$.length>0?$[0]:0,Y=this.state===hz.Idle?1:0;this.state=hz.Typing;for(let Z=0;Z<this.list.length;Z++){let Q=(X+Z+Y)%this.list.length,G=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(Q)),q=G&&G.toString();if(this.list.options.typeNavigationEnabled){if(typeof q<"u"){if(wW(J,q)){this.previouslyFocused=X,this.list.setFocus([Q]),this.list.reveal(Q);return}let U=_n(J,q);if(U){if(U[0].end-U[0].start>1&&U.length===1){this.previouslyFocused=X,this.list.setFocus([Q]),this.list.reveal(Q);return}}}}else if(typeof q>"u"||wW(J,q)){this.previouslyFocused=X,this.list.setFocus([Q]),this.list.reveal(Q);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class oo{constructor(J,$){this.list=J,this.view=$,this.disposables=new $0;let X=q0.chain(this.disposables.add(new H1($.domNode,"keydown")).event,(Z)=>Z.filter((Q)=>!vZ(Q.target)).map((Q)=>new R1(Q)));q0.chain(X,(Z)=>Z.filter((Q)=>Q.keyCode===2&&!Q.ctrlKey&&!Q.metaKey&&!Q.shiftKey&&!Q.altKey))(this.onTab,this,this.disposables)}onTab(J){if(J.target!==this.view.domNode)return;let $=this.list.getFocus();if($.length===0)return;let X=this.view.domElement($[0]);if(!X)return;let Y=X.querySelector("[tabIndex]");if(!Y||!(Y instanceof HTMLElement)||Y.tabIndex===-1)return;let Z=O0(Y).getComputedStyle(Y);if(Z.visibility==="hidden"||Z.display==="none")return;J.preventDefault(),J.stopPropagation(),Y.focus()}dispose(){this.disposables.dispose()}}function Kx(J){return t0?J.browserEvent.metaKey:J.browserEvent.ctrlKey}function Ax(J){return J.browserEvent.shiftKey}function aG0(J){return ZU(J)&&J.button===2}class KM{constructor(J){if(this.list=J,this.disposables=new $0,this._onPointer=new x,this.onPointer=this._onPointer.event,J.options.multipleSelectionSupport!==!1)this.multipleSelectionController=this.list.options.multipleSelectionController||co;if(this.mouseSupport=typeof J.options.mouseSupport>"u"||!!J.options.mouseSupport,this.mouseSupport)J.onMouseDown(this.onMouseDown,this,this.disposables),J.onContextMenu(this.onContextMenu,this,this.disposables),J.onMouseDblClick(this.onDoubleClick,this,this.disposables),J.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(b1.addTarget(J.getHTMLElement()));q0.any(J.onMouseClick,J.onMouseMiddleClick,J.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(J){if(J.multipleSelectionSupport!==void 0){if(this.multipleSelectionController=void 0,J.multipleSelectionSupport)this.multipleSelectionController=this.list.options.multipleSelectionController||co}}isSelectionSingleChangeEvent(J){if(!this.multipleSelectionController)return!1;return this.multipleSelectionController.isSelectionSingleChangeEvent(J)}isSelectionRangeChangeEvent(J){if(!this.multipleSelectionController)return!1;return this.multipleSelectionController.isSelectionRangeChangeEvent(J)}isSelectionChangeEvent(J){return this.isSelectionSingleChangeEvent(J)||this.isSelectionRangeChangeEvent(J)}onMouseDown(J){if(vz(J.browserEvent.target))return;if(B5()!==J.browserEvent.target)this.list.domFocus()}onContextMenu(J){if(vZ(J.browserEvent.target)||vz(J.browserEvent.target))return;let $=typeof J.index>"u"?[]:[J.index];this.list.setFocus($,J.browserEvent)}onViewPointer(J){if(!this.mouseSupport)return;if(vZ(J.browserEvent.target)||vz(J.browserEvent.target))return;if(J.browserEvent.isHandledByList)return;J.browserEvent.isHandledByList=!0;let $=J.index;if(typeof $>"u"){this.list.setFocus([],J.browserEvent),this.list.setSelection([],J.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(J))return this.changeSelection(J);if(this.list.setFocus([$],J.browserEvent),this.list.setAnchor($),!aG0(J.browserEvent))this.list.setSelection([$],J.browserEvent);this._onPointer.fire(J)}onDoubleClick(J){if(vZ(J.browserEvent.target)||vz(J.browserEvent.target))return;if(this.isSelectionChangeEvent(J))return;if(J.browserEvent.isHandledByList)return;J.browserEvent.isHandledByList=!0;let $=this.list.getFocus();this.list.setSelection($,J.browserEvent)}changeSelection(J){let $=J.index,X=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(J)){if(typeof X>"u"){let z=this.list.getFocus()[0];X=z!==null&&z!==void 0?z:$,this.list.setAnchor(X)}let Y=Math.min(X,$),Z=Math.max(X,$),Q=r5(Y,Z+1),G=this.list.getSelection(),q=iG0(Wx(G,[X]),X);if(q.length===0)return;let U=Wx(Q,nG0(G,q));this.list.setSelection(U,J.browserEvent),this.list.setFocus([$],J.browserEvent)}else if(this.isSelectionSingleChangeEvent(J)){let Y=this.list.getSelection(),Z=Y.filter((Q)=>Q!==$);if(this.list.setFocus([$]),this.list.setAnchor($),Y.length===Z.length)this.list.setSelection([...Z,$],J.browserEvent);else this.list.setSelection(Z,J.browserEvent)}}dispose(){this.disposables.dispose()}}class AM{constructor(J,$){this.styleElement=J,this.selectorSuffix=$}style(J){var $,X;let Y=this.selectorSuffix&&`.${this.selectorSuffix}`,Z=[];if(J.listBackground)Z.push(`.monaco-list${Y} .monaco-list-rows { background: ${J.listBackground}; }`);if(J.listFocusBackground)Z.push(`.monaco-list${Y}:focus .monaco-list-row.focused { background-color: ${J.listFocusBackground}; }`),Z.push(`.monaco-list${Y}:focus .monaco-list-row.focused:hover { background-color: ${J.listFocusBackground}; }`);if(J.listFocusForeground)Z.push(`.monaco-list${Y}:focus .monaco-list-row.focused { color: ${J.listFocusForeground}; }`);if(J.listActiveSelectionBackground)Z.push(`.monaco-list${Y}:focus .monaco-list-row.selected { background-color: ${J.listActiveSelectionBackground}; }`),Z.push(`.monaco-list${Y}:focus .monaco-list-row.selected:hover { background-color: ${J.listActiveSelectionBackground}; }`);if(J.listActiveSelectionForeground)Z.push(`.monaco-list${Y}:focus .monaco-list-row.selected { color: ${J.listActiveSelectionForeground}; }`);if(J.listActiveSelectionIconForeground)Z.push(`.monaco-list${Y}:focus .monaco-list-row.selected .codicon { color: ${J.listActiveSelectionIconForeground}; }`);if(J.listFocusAndSelectionBackground)Z.push(`
				.monaco-drag-image,
				.monaco-list${Y}:focus .monaco-list-row.selected.focused { background-color: ${J.listFocusAndSelectionBackground}; }
			`);if(J.listFocusAndSelectionForeground)Z.push(`
				.monaco-drag-image,
				.monaco-list${Y}:focus .monaco-list-row.selected.focused { color: ${J.listFocusAndSelectionForeground}; }
			`);if(J.listInactiveFocusForeground)Z.push(`.monaco-list${Y} .monaco-list-row.focused { color:  ${J.listInactiveFocusForeground}; }`),Z.push(`.monaco-list${Y} .monaco-list-row.focused:hover { color:  ${J.listInactiveFocusForeground}; }`);if(J.listInactiveSelectionIconForeground)Z.push(`.monaco-list${Y} .monaco-list-row.focused .codicon { color:  ${J.listInactiveSelectionIconForeground}; }`);if(J.listInactiveFocusBackground)Z.push(`.monaco-list${Y} .monaco-list-row.focused { background-color:  ${J.listInactiveFocusBackground}; }`),Z.push(`.monaco-list${Y} .monaco-list-row.focused:hover { background-color:  ${J.listInactiveFocusBackground}; }`);if(J.listInactiveSelectionBackground)Z.push(`.monaco-list${Y} .monaco-list-row.selected { background-color:  ${J.listInactiveSelectionBackground}; }`),Z.push(`.monaco-list${Y} .monaco-list-row.selected:hover { background-color:  ${J.listInactiveSelectionBackground}; }`);if(J.listInactiveSelectionForeground)Z.push(`.monaco-list${Y} .monaco-list-row.selected { color: ${J.listInactiveSelectionForeground}; }`);if(J.listHoverBackground)Z.push(`.monaco-list${Y}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${J.listHoverBackground}; }`);if(J.listHoverForeground)Z.push(`.monaco-list${Y}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${J.listHoverForeground}; }`);let Q=N4(J.listFocusAndSelectionOutline,N4(J.listSelectionOutline,($=J.listFocusOutline)!==null&&$!==void 0?$:""));if(Q)Z.push(`.monaco-list${Y}:focus .monaco-list-row.focused.selected { outline: 1px solid ${Q}; outline-offset: -1px;}`);if(J.listFocusOutline)Z.push(`
				.monaco-drag-image,
				.monaco-list${Y}:focus .monaco-list-row.focused { outline: 1px solid ${J.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${Y}.last-focused .monaco-list-row.focused { outline: 1px solid ${J.listFocusOutline}; outline-offset: -1px; }
			`);let G=N4(J.listSelectionOutline,(X=J.listInactiveFocusOutline)!==null&&X!==void 0?X:"");if(G)Z.push(`.monaco-list${Y} .monaco-list-row.focused.selected { outline: 1px dotted ${G}; outline-offset: -1px; }`);if(J.listSelectionOutline)Z.push(`.monaco-list${Y} .monaco-list-row.selected { outline: 1px dotted ${J.listSelectionOutline}; outline-offset: -1px; }`);if(J.listInactiveFocusOutline)Z.push(`.monaco-list${Y} .monaco-list-row.focused { outline: 1px dotted ${J.listInactiveFocusOutline}; outline-offset: -1px; }`);if(J.listHoverOutline)Z.push(`.monaco-list${Y} .monaco-list-row:hover { outline: 1px dashed ${J.listHoverOutline}; outline-offset: -1px; }`);if(J.listDropOverBackground)Z.push(`
				.monaco-list${Y}.drop-target,
				.monaco-list${Y} .monaco-list-rows.drop-target,
				.monaco-list${Y} .monaco-list-row.drop-target { background-color: ${J.listDropOverBackground} !important; color: inherit !important; }
			`);if(J.listDropBetweenBackground)Z.push(`
			.monaco-list${Y} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${Y} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${J.listDropBetweenBackground};
			}`),Z.push(`
			.monaco-list${Y} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${Y} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${J.listDropBetweenBackground};
			}`);if(J.tableColumnsBorder)Z.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${J.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`);if(J.tableOddRowsBackgroundColor)Z.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${J.tableOddRowsBackgroundColor};
				}
			`);this.styleElement.textContent=Z.join(`
`)}}function iG0(J,$){let X=J.indexOf($);if(X===-1)return[];let Y=[],Z=X-1;while(Z>=0&&J[Z]===$-(X-Z))Y.push(J[Z--]);Y.reverse(),Z=X;while(Z<J.length&&J[Z]===$+(Z-X))Y.push(J[Z++]);return Y}function Wx(J,$){let X=[],Y=0,Z=0;while(Y<J.length||Z<$.length)if(Y>=J.length)X.push($[Z++]);else if(Z>=$.length)X.push(J[Y++]);else if(J[Y]===$[Z]){X.push(J[Y]),Y++,Z++;continue}else if(J[Y]<$[Z])X.push(J[Y++]);else X.push($[Z++]);return X}function nG0(J,$){let X=[],Y=0,Z=0;while(Y<J.length||Z<$.length)if(Y>=J.length)X.push($[Z++]);else if(Z>=$.length)X.push(J[Y++]);else if(J[Y]===$[Z]){Y++,Z++;continue}else if(J[Y]<$[Z])X.push(J[Y++]);else Z++;return X}class eo{constructor(J,$){this._templateId=J,this.renderers=$}get templateId(){return this._templateId}renderTemplate(J){return this.renderers.map(($)=>$.renderTemplate(J))}renderElement(J,$,X,Y){let Z=0;for(let Q of this.renderers)Q.renderElement(J,$,X[Z++],Y)}disposeElement(J,$,X,Y){var Z;let Q=0;for(let G of this.renderers)(Z=G.disposeElement)===null||Z===void 0||Z.call(G,J,$,X[Q],Y),Q+=1}disposeTemplate(J){let $=0;for(let X of this.renderers)X.disposeTemplate(J[$++])}}class Jt{constructor(J){this.accessibilityProvider=J,this.templateId="a18n"}renderTemplate(J){return J}renderElement(J,$,X){let Y=this.accessibilityProvider.getAriaLabel(J);if(Y)X.setAttribute("aria-label",Y);else X.removeAttribute("aria-label");let Z=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(J);if(typeof Z==="number")X.setAttribute("aria-level",`${Z}`);else X.removeAttribute("aria-level")}disposeTemplate(J){}}class $t{constructor(J,$){this.list=J,this.dnd=$}getDragElements(J){let $=this.list.getSelectedElements();return $.indexOf(J)>-1?$:[J]}getDragURI(J){return this.dnd.getDragURI(J)}getDragLabel(J,$){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(J,$);return}onDragStart(J,$){var X,Y;(Y=(X=this.dnd).onDragStart)===null||Y===void 0||Y.call(X,J,$)}onDragOver(J,$,X,Y,Z){return this.dnd.onDragOver(J,$,X,Y,Z)}onDragLeave(J,$,X,Y){var Z,Q;(Q=(Z=this.dnd).onDragLeave)===null||Q===void 0||Q.call(Z,J,$,X,Y)}onDragEnd(J){var $,X;(X=($=this.dnd).onDragEnd)===null||X===void 0||X.call($,J)}drop(J,$,X,Y,Z){this.dnd.drop(J,$,X,Y,Z)}dispose(){this.dnd.dispose()}}class A7{get onDidChangeFocus(){return q0.map(this.eventBufferer.wrapEvent(this.focus.onChange),(J)=>this.toListEvent(J),this.disposables)}get onDidChangeSelection(){return q0.map(this.eventBufferer.wrapEvent(this.selection.onChange),(J)=>this.toListEvent(J),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let J=!1,$=q0.chain(this.disposables.add(new H1(this.view.domNode,"keydown")).event,(Z)=>Z.map((Q)=>new R1(Q)).filter((Q)=>J=Q.keyCode===58||Q.shiftKey&&Q.keyCode===68).map((Q)=>a0.stop(Q,!0)).filter(()=>!1)),X=q0.chain(this.disposables.add(new H1(this.view.domNode,"keyup")).event,(Z)=>Z.forEach(()=>J=!1).map((Q)=>new R1(Q)).filter((Q)=>Q.keyCode===58||Q.shiftKey&&Q.keyCode===68).map((Q)=>a0.stop(Q,!0)).map(({browserEvent:Q})=>{let G=this.getFocus(),q=G.length?G[0]:void 0,U=typeof q<"u"?this.view.element(q):void 0,z=typeof q<"u"?this.view.domElement(q):this.view.domNode;return{index:q,element:U,anchor:z,browserEvent:Q}})),Y=q0.chain(this.view.onContextMenu,(Z)=>Z.filter((Q)=>!J).map(({element:Q,index:G,browserEvent:q})=>({element:Q,index:G,anchor:new T8(O0(this.view.domNode),q),browserEvent:q})));return q0.any($,X,Y)}get onKeyDown(){return this.disposables.add(new H1(this.view.domNode,"keydown")).event}get onDidFocus(){return q0.signal(this.disposables.add(new H1(this.view.domNode,"focus",!0)).event)}constructor(J,$,X,Y,Z=rG0){var Q,G,q,U;this.user=J,this._options=Z,this.focus=new uW("focused"),this.anchor=new uW("anchor"),this.eventBufferer=new AG,this._ariaLabel="",this.disposables=new $0,this._onDidDispose=new x,this.onDidDispose=this._onDidDispose.event;let z=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(Q=this._options.accessibilityProvider)===null||Q===void 0?void 0:Q.getWidgetRole():"list";this.selection=new ao(z!=="listbox");let H=[this.focus.renderer,this.selection.renderer];if(this.accessibilityProvider=Z.accessibilityProvider,this.accessibilityProvider)H.push(new Jt(this.accessibilityProvider)),(q=(G=this.accessibilityProvider).onDidChangeActiveDescendant)===null||q===void 0||q.call(G,this.onDidChangeActiveDescendant,this,this.disposables);Y=Y.map((V)=>new eo(V.templateId,[...H,V]));let j={...Z,dnd:Z.dnd&&new $t(this,Z.dnd)};if(this.view=this.createListView($,X,Y,j),this.view.domNode.setAttribute("role",z),Z.styleController)this.styleController=Z.styleController(this.view.domId);else{let V=p5(this.view.domNode);this.styleController=new AM(V,this.view.domId)}if(this.spliceable=new Hx([new FM(this.focus,this.view,Z.identityProvider),new FM(this.selection,this.view,Z.identityProvider),new FM(this.anchor,this.view,Z.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new oo(this,this.view)),typeof Z.keyboardSupport!=="boolean"||Z.keyboardSupport)this.keyboardController=new Fx(this,this.view,Z),this.disposables.add(this.keyboardController);if(Z.keyboardNavigationLabelProvider){let V=Z.keyboardNavigationDelegate||sG0;this.typeNavigationController=new no(this,this.view,Z.keyboardNavigationLabelProvider,(U=Z.keyboardNavigationEventFilter)!==null&&U!==void 0?U:()=>!0,V),this.disposables.add(this.typeNavigationController)}if(this.mouseController=this.createMouseController(Z),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider)this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel();if(this._options.multipleSelectionSupport!==!1)this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(J,$,X,Y){return new q4(J,$,X,Y)}createMouseController(J){return new KM(this)}updateOptions(J={}){var $,X;if(this._options={...this._options,...J},($=this.typeNavigationController)===null||$===void 0||$.updateOptions(this._options),this._options.multipleSelectionController!==void 0)if(this._options.multipleSelectionSupport)this.view.domNode.setAttribute("aria-multiselectable","true");else this.view.domNode.removeAttribute("aria-multiselectable");this.mouseController.updateOptions(J),(X=this.keyboardController)===null||X===void 0||X.updateOptions(J),this.view.updateOptions(J)}get options(){return this._options}splice(J,$,X=[]){if(J<0||J>this.view.length)throw new SZ(this.user,`Invalid start index: ${J}`);if($<0)throw new SZ(this.user,`Invalid delete count: ${$}`);if($===0&&X.length===0)return;this.eventBufferer.bufferEvents(()=>this.spliceable.splice(J,$,X))}rerender(){this.view.rerender()}element(J){return this.view.element(J)}indexOf(J){return this.view.indexOf(J)}indexAt(J){return this.view.indexAt(J)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(J){this.view.setScrollTop(J)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(J){this._ariaLabel=J,this.view.domNode.setAttribute("aria-label",J)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(J,$){this.view.layout(J,$)}setSelection(J,$){for(let X of J)if(X<0||X>=this.length)throw new SZ(this.user,`Invalid index ${X}`);this.selection.set(J,$)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((J)=>this.view.element(J))}setAnchor(J){if(typeof J>"u"){this.anchor.set([]);return}if(J<0||J>=this.length)throw new SZ(this.user,`Invalid index ${J}`);this.anchor.set([J])}getAnchor(){return Eq(this.anchor.get(),void 0)}getAnchorElement(){let J=this.getAnchor();return typeof J>"u"?void 0:this.element(J)}setFocus(J,$){for(let X of J)if(X<0||X>=this.length)throw new SZ(this.user,`Invalid index ${X}`);this.focus.set(J,$)}focusNext(J=1,$=!1,X,Y){if(this.length===0)return;let Z=this.focus.get(),Q=this.findNextIndex(Z.length>0?Z[0]+J:0,$,Y);if(Q>-1)this.setFocus([Q],X)}focusPrevious(J=1,$=!1,X,Y){if(this.length===0)return;let Z=this.focus.get(),Q=this.findPreviousIndex(Z.length>0?Z[0]-J:0,$,Y);if(Q>-1)this.setFocus([Q],X)}async focusNextPage(J,$){let X=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);X=X===0?0:X-1;let Y=this.getFocus()[0];if(Y!==X&&(Y===void 0||X>Y)){let Z=this.findPreviousIndex(X,!1,$);if(Z>-1&&Y!==Z)this.setFocus([Z],J);else this.setFocus([X],J)}else{let Z=this.view.getScrollTop(),Q=Z+this.view.renderHeight;if(X>Y)Q-=this.view.elementHeight(X);if(this.view.setScrollTop(Q),this.view.getScrollTop()!==Z)this.setFocus([]),await mY(0),await this.focusNextPage(J,$)}}async focusPreviousPage(J,$,X=()=>0){let Y,Z=X(),Q=this.view.getScrollTop()+Z;if(Q===0)Y=this.view.indexAt(Q);else Y=this.view.indexAfter(Q-1);let G=this.getFocus()[0];if(G!==Y&&(G===void 0||G>=Y)){let q=this.findNextIndex(Y,!1,$);if(q>-1&&G!==q)this.setFocus([q],J);else this.setFocus([Y],J)}else{let q=Q;if(this.view.setScrollTop(Q-this.view.renderHeight-Z),this.view.getScrollTop()+X()!==q)this.setFocus([]),await mY(0),await this.focusPreviousPage(J,$,X)}}focusLast(J,$){if(this.length===0)return;let X=this.findPreviousIndex(this.length-1,!1,$);if(X>-1)this.setFocus([X],J)}focusFirst(J,$){this.focusNth(0,J,$)}focusNth(J,$,X){if(this.length===0)return;let Y=this.findNextIndex(J,!1,X);if(Y>-1)this.setFocus([Y],$)}findNextIndex(J,$=!1,X){for(let Y=0;Y<this.length;Y++){if(J>=this.length&&!$)return-1;if(J=J%this.length,!X||X(this.element(J)))return J;J++}return-1}findPreviousIndex(J,$=!1,X){for(let Y=0;Y<this.length;Y++){if(J<0&&!$)return-1;if(J=(this.length+J%this.length)%this.length,!X||X(this.element(J)))return J;J--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((J)=>this.view.element(J))}reveal(J,$,X=0){if(J<0||J>=this.length)throw new SZ(this.user,`Invalid index ${J}`);let Y=this.view.getScrollTop(),Z=this.view.elementTop(J),Q=this.view.elementHeight(J);if(l9($)){let G=Q-this.view.renderHeight+X;this.view.setScrollTop(G*A8($,0,1)+Z-X)}else{let G=Z+Q,q=Y+this.view.renderHeight;if(Z<Y+X&&G>=q);else if(Z<Y+X||G>=q&&Q>=this.view.renderHeight)this.view.setScrollTop(Z-X);else if(G>=q)this.view.setScrollTop(G-this.view.renderHeight)}}getRelativeTop(J,$=0){if(J<0||J>=this.length)throw new SZ(this.user,`Invalid index ${J}`);let X=this.view.getScrollTop(),Y=this.view.elementTop(J),Z=this.view.elementHeight(J);if(Y<X+$||Y+Z>X+this.view.renderHeight)return null;let Q=Z-this.view.renderHeight+$;return Math.abs((X+$-Y)/Q)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(J){return this.view.getElementDomId(J)}getElementTop(J){return this.view.elementTop(J)}style(J){this.styleController.style(J)}toListEvent({indexes:J,browserEvent:$}){return{indexes:J,elements:J.map((X)=>this.view.element(X)),browserEvent:$}}_onFocusChange(){let J=this.focus.get();this.view.domNode.classList.toggle("element-focused",J.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var J;let $=this.focus.get();if($.length>0){let X;if((J=this.accessibilityProvider)===null||J===void 0?void 0:J.getActiveDescendantId)X=this.accessibilityProvider.getActiveDescendantId(this.view.element($[0]));this.view.domNode.setAttribute("aria-activedescendant",X||this.view.getElementDomId($[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let J=this.selection.get();this.view.domNode.classList.toggle("selection-none",J.length===0),this.view.domNode.classList.toggle("selection-single",J.length===1),this.view.domNode.classList.toggle("selection-multiple",J.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}var p3=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},ao,C$,hz,sG0,co,to,rG0,lo=(J,$)=>J-$;var m3=w(()=>{T0();k$();d8();g4();gQ();V1();e1();T9();_0();W2();z0();L1();jx();vo();BM();O4();p3([F6],uW.prototype,"renderer",null);ao=class ao extends uW{constructor(J){super("selected");this.setAriaSelected=J}renderIndex(J,$){if(super.renderIndex(J,$),this.setAriaSelected)if(this.contains(J))$.setAttribute("aria-selected","true");else $.setAttribute("aria-selected","false")}};p3([F6],Fx.prototype,"onKeyDown",null);(function(J){J[J.Automatic=0]="Automatic",J[J.Trigger=1]="Trigger"})(C$||(C$={}));(function(J){J[J.Idle=0]="Idle",J[J.Typing=1]="Typing"})(hz||(hz={}));sG0=new class{mightProducePrintableCharacter(J){if(J.ctrlKey||J.metaKey||J.altKey)return!1;return J.keyCode>=31&&J.keyCode<=56||J.keyCode>=21&&J.keyCode<=30||J.keyCode>=98&&J.keyCode<=107||J.keyCode>=85&&J.keyCode<=95}};co={isSelectionSingleChangeEvent:Kx,isSelectionRangeChangeEvent:Ax};to={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:n.fromHex("#a9a9a9").transparent(0.4).toString(),tableColumnsBorder:n.fromHex("#cccccc").transparent(0.2).toString(),tableOddRowsBackgroundColor:n.fromHex("#cccccc").transparent(0.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},rG0={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};p3([F6],A7.prototype,"onDidChangeFocus",null);p3([F6],A7.prototype,"onDidChangeSelection",null);p3([F6],A7.prototype,"onContextMenu",null);p3([F6],A7.prototype,"onKeyDown",null);p3([F6],A7.prototype,"onDidFocus",null)});var Xt=w(()=>{K0(".monaco-select-box-dropdown-padding{--dropdown-padding-top:1px;--dropdown-padding-bottom:1px}.hc-black .monaco-select-box-dropdown-padding,.hc-light .monaco-select-box-dropdown-padding{--dropdown-padding-top:3px;--dropdown-padding-bottom:4px}.monaco-select-box-dropdown-container{box-sizing:border-box;display:none}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown *{margin:0}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown code{line-height:15px;font-family:var(--monaco-monospace-font)}.monaco-select-box-dropdown-container.visible{text-align:left;border-bottom-right-radius:3px;border-bottom-left-radius:3px;flex-direction:column;width:1px;display:flex;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container{padding-top:var(--dropdown-padding-top);padding-bottom:var(--dropdown-padding-bottom);box-sizing:border-box;flex:none;align-self:flex-start;width:100%;padding-left:1px;padding-right:1px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-details-pane{padding:5px}.hc-black .monaco-select-box-dropdown-container>.select-box-dropdown-list-container{padding-top:var(--dropdown-padding-top);padding-bottom:var(--dropdown-padding-bottom)}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row{cursor:pointer}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-text{text-overflow:ellipsis;white-space:nowrap;float:left;padding-left:3.5px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-detail{text-overflow:ellipsis;white-space:nowrap;float:left;opacity:.7;padding-left:3.5px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-decorator-right{text-overflow:ellipsis;white-space:nowrap;float:right;padding-right:10px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.visually-hidden{width:1px;height:1px;position:absolute;top:auto;left:-10000px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control{opacity:0;flex:auto;align-self:flex-start}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div{max-height:0;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div>.option-text-width-control{white-space:nowrap;padding-left:4px;padding-right:8px}")});class Zt{get templateId(){return Yt}renderTemplate(J){let $=Object.create(null);return $.root=J,$.text=j0(J,u3(".option-text")),$.detail=j0(J,u3(".option-detail")),$.decoratorRight=j0(J,u3(".option-decorator-right")),$}renderElement(J,$,X){let Y=X,Z=J.text,Q=J.detail,G=J.decoratorRight,q=J.isDisabled;if(Y.text.textContent=Z,Y.detail.textContent=Q?Q:"",Y.decoratorRight.innerText=G?G:"",q)Y.root.classList.add("option-disabled");else Y.root.classList.remove("option-disabled")}disposeTemplate(J){}}var u3,Yt="selectOption.entry.template",v$;var Qt=w(()=>{T0();k$();d8();nR();m3();V1();_0();PG();z0();L1();Xt();c0();u3=B0;v$=class v$ extends m{constructor(J,$,X,Y,Z){super();if(this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=Y,this.selectBoxOptions=Z||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!=="number")this.selectBoxOptions.minBottomMargin=v$.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN;else if(this.selectBoxOptions.minBottomMargin<0)this.selectBoxOptions.minBottomMargin=0;if(this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel==="string")this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel);if(typeof this.selectBoxOptions.ariaDescription==="string")this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription);if(this._onDidSelect=new x,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(X),this.selected=$||0,J)this.setOptions(J,$);this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return Yt}constructSelectDropDown(J){this.contextViewProvider=J,this.selectDropDownContainer=B0(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=j0(this.selectDropDownContainer,u3(".select-box-details-pane"));let $=j0(this.selectDropDownContainer,u3(".select-box-dropdown-container-width-control")),X=j0($,u3(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",j0(X,this.widthControlElement),this._dropDownPosition=0,this.styleElement=p5(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(r(this.selectDropDownContainer,U0.DRAG_START,(Y)=>{a0.stop(Y,!0)}))}registerListeners(){this._register(q6(this.selectElement,"change",($)=>{if(this.selected=$.target.selectedIndex,this._onDidSelect.fire({index:$.target.selectedIndex,selected:$.target.value}),!!this.options[this.selected]&&!!this.options[this.selected].text)this.selectElement.title=this.options[this.selected].text})),this._register(r(this.selectElement,U0.CLICK,($)=>{if(a0.stop($),this._isVisible)this.hideSelectDropDown(!0);else this.showSelectDropDown()})),this._register(r(this.selectElement,U0.MOUSE_DOWN,($)=>{a0.stop($)}));let J;this._register(r(this.selectElement,"touchstart",($)=>{J=this._isVisible})),this._register(r(this.selectElement,"touchend",($)=>{if(a0.stop($),J)this.hideSelectDropDown(!0);else this.showSelectDropDown()})),this._register(r(this.selectElement,U0.KEY_DOWN,($)=>{let X=new R1($),Y=!1;if(t0){if(X.keyCode===18||X.keyCode===16||X.keyCode===10||X.keyCode===3)Y=!0}else if(X.keyCode===18&&X.altKey||X.keyCode===16&&X.altKey||X.keyCode===10||X.keyCode===3)Y=!0;if(Y)this.showSelectDropDown(),a0.stop($,!0)}))}get onDidSelect(){return this._onDidSelect.event}setOptions(J,$){if(!B6(this.options,J))this.options=J,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((X,Y)=>{if(this.selectElement.add(this.createOption(X.text,Y,X.isDisabled)),typeof X.description==="string")this._hasDetails=!0});if($!==void 0)this.select($),this._currentSelection=this.selected}setOptionsList(){var J;(J=this.selectList)===null||J===void 0||J.splice(0,this.selectList.length,this.options)}select(J){if(J>=0&&J<this.options.length)this.selected=J;else if(J>this.options.length-1)this.select(this.options.length-1);else if(this.selected<0)this.selected=0;if(this.selectElement.selectedIndex=this.selected,!!this.options[this.selected]&&!!this.options[this.selected].text)this.selectElement.title=this.options[this.selected].text}focus(){if(this.selectElement)this.selectElement.tabIndex=0,this.selectElement.focus()}blur(){if(this.selectElement)this.selectElement.tabIndex=-1,this.selectElement.blur()}setFocusable(J){this.selectElement.tabIndex=J?0:-1}render(J){this.container=J,J.classList.add("select-container"),J.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let J=[];if(this.styles.listFocusBackground)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`);if(this.styles.listFocusForeground)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`);if(this.styles.decoratorRightForeground)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`);if(this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground)J.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),J.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),J.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `);else if(this.styles.selectListBorder)J.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),J.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `);if(this.styles.listHoverForeground)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`);if(this.styles.listHoverBackground)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`);if(this.styles.listFocusOutline)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`);if(this.styles.listHoverOutline)J.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`);J.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),J.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=J.join(`
`)}styleSelectElement(){var J,$,X;let Y=(J=this.styles.selectBackground)!==null&&J!==void 0?J:"",Z=($=this.styles.selectForeground)!==null&&$!==void 0?$:"",Q=(X=this.styles.selectBorder)!==null&&X!==void 0?X:"";this.selectElement.style.backgroundColor=Y,this.selectElement.style.color=Z,this.selectElement.style.borderColor=Q}styleList(){var J,$;let X=(J=this.styles.selectBackground)!==null&&J!==void 0?J:"",Y=N4(this.styles.selectListBackground,X);this.selectDropDownListContainer.style.backgroundColor=Y,this.selectionDetailsPane.style.backgroundColor=Y;let Z=($=this.styles.focusBorder)!==null&&$!==void 0?$:"";this.selectDropDownContainer.style.outlineColor=Z,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(J,$,X){let Y=document.createElement("option");return Y.value=J,Y.text=J,Y.disabled=!!X,Y}showSelectDropDown(){if(this.selectionDetailsPane.innerText="",!this.contextViewProvider||this._isVisible)return;this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:(J)=>this.renderSelectDropDown(J,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:(J)=>this.renderSelectDropDown(J),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true")}hideSelectDropDown(J){if(!this.contextViewProvider||!this._isVisible)return;if(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),J)this.selectElement.focus();this.contextViewProvider.hideContextView()}renderSelectDropDown(J,$){return J.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown($),{dispose:()=>{try{J.removeChild(this.selectDropDownContainer)}catch(X){}}}}measureMaxDetailsHeight(){let J=0;return this.options.forEach(($,X)=>{if(this.updateDetail(X),this.selectionDetailsPane.offsetHeight>J)J=this.selectionDetailsPane.offsetHeight}),J}layoutSelectDropDown(J){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");let $=O0(this.selectElement),X=g5(this.selectElement),Y=O0(this.selectElement).getComputedStyle(this.selectElement),Z=parseFloat(Y.getPropertyValue("--dropdown-padding-top"))+parseFloat(Y.getPropertyValue("--dropdown-padding-bottom")),Q=$.innerHeight-X.top-X.height-(this.selectBoxOptions.minBottomMargin||0),G=X.top-v$.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,q=this.selectElement.offsetWidth,U=this.setWidthControlElement(this.widthControlElement),z=Math.max(U,Math.round(q)).toString()+"px";this.selectDropDownContainer.style.width=z,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let H=this.selectList.contentHeight;if(this._hasDetails&&this._cachedMaxDetailsHeight===void 0)this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight();let j=this._hasDetails?this._cachedMaxDetailsHeight:0,V=H+Z+j,W=Math.floor((Q-Z-j)/this.getHeight()),B=Math.floor((G-Z-j)/this.getHeight());if(J){if(X.top+X.height>$.innerHeight-22||X.top<v$.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||W<1&&B<1)return!1;if(W<v$.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&B>W&&this.options.length>W)this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom");else this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top");return!0}if(X.top+X.height>$.innerHeight-22||X.top<v$.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&W<1||this._dropDownPosition===1&&B<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&W+B<1)return this.hideSelectDropDown(!0),!1;if(V>Q)H=W*this.getHeight()}else if(V>G)H=B*this.getHeight();if(this.selectList.layout(H),this.selectList.domFocus(),this.selectList.length>0)this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0);if(this._hasDetails)this.selectList.getHTMLElement().style.height=H+Z+"px",this.selectDropDownContainer.style.height="";else this.selectDropDownContainer.style.height=H+Z+"px";return this.updateDetail(this.selected),this.selectDropDownContainer.style.width=z,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(J){let $=0;if(J){let X=0,Y=0;this.options.forEach((Z,Q)=>{let G=Z.detail?Z.detail.length:0,q=Z.decoratorRight?Z.decoratorRight.length:0,U=Z.text.length+G+q;if(U>Y)X=Q,Y=U}),J.textContent=this.options[X].text+(this.options[X].decoratorRight?this.options[X].decoratorRight+" ":""),$=YU(J)}return $}createSelectList(J){if(this.selectList)return;if(this.selectDropDownListContainer=j0(J,u3(".select-box-dropdown-list-container")),this.listRenderer=new Zt,this.selectList=new A7("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:(Y)=>{let Z=Y.text;if(Y.detail)Z+=`. ${Y.detail}`;if(Y.decoratorRight)Z+=`. ${Y.decoratorRight}`;if(Y.description)Z+=`. ${Y.description}`;return Z},getWidgetAriaLabel:()=>F({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>t0?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel)this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel;let $=this._register(new H1(this.selectDropDownListContainer,"keydown")),X=q0.chain($.event,(Y)=>Y.filter(()=>this.selectList.length>0).map((Z)=>new R1(Z)));this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===3))(this.onEnter,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===2))(this.onEnter,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===9))(this.onEscape,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===16))(this.onUpArrow,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===18))(this.onDownArrow,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===12))(this.onPageDown,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===11))(this.onPageUp,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===14))(this.onHome,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode===13))(this.onEnd,this)),this._register(q0.chain(X,(Y)=>Y.filter((Z)=>Z.keyCode>=21&&Z.keyCode<=56||Z.keyCode>=85&&Z.keyCode<=113))(this.onCharacter,this)),this._register(r(this.selectList.getHTMLElement(),U0.POINTER_UP,(Y)=>this.onPointerUp(Y))),this._register(this.selectList.onMouseOver((Y)=>typeof Y.index<"u"&&this.selectList.setFocus([Y.index]))),this._register(this.selectList.onDidChangeFocus((Y)=>this.onListFocus(Y))),this._register(r(this.selectDropDownContainer,U0.FOCUS_OUT,(Y)=>{if(!this._isVisible||e6(Y.relatedTarget,this.selectDropDownContainer))return;this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(J){if(!this.selectList.length)return;a0.stop(J);let $=J.target;if(!$)return;if($.classList.contains("slider"))return;let X=$.closest(".monaco-list-row");if(!X)return;let Y=Number(X.getAttribute("data-index")),Z=X.classList.contains("option-disabled");if(Y>=0&&Y<this.options.length&&!Z){if(this.selected=Y,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection){if(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),!!this.options[this.selected]&&!!this.options[this.selected].text)this.selectElement.title=this.options[this.selected].text}this.hideSelectDropDown(!0)}}onListBlur(){if(this._sticky)return;if(this.selected!==this._currentSelection)this.select(this._currentSelection);this.hideSelectDropDown(!1)}renderDescriptionMarkdown(J,$){let X=(Z)=>{for(let Q=0;Q<Z.childNodes.length;Q++){let G=Z.childNodes.item(Q);if((G.tagName&&G.tagName.toLowerCase())==="img")Z.removeChild(G);else X(G)}},Y=wz({value:J,supportThemeIcons:!0},{actionHandler:$});return Y.element.classList.add("select-box-description-markdown"),X(Y.element),Y.element}onListFocus(J){if(!this._isVisible||!this._hasDetails)return;this.updateDetail(J.indexes[0])}updateDetail(J){var $,X;this.selectionDetailsPane.innerText="";let Y=this.options[J],Z=($=Y===null||Y===void 0?void 0:Y.description)!==null&&$!==void 0?$:"",Q=(X=Y===null||Y===void 0?void 0:Y.descriptionIsMarkdown)!==null&&X!==void 0?X:!1;if(Z){if(Q){let G=Y.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(Z,G))}else this.selectionDetailsPane.innerText=Z;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(J){a0.stop(J),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(J){if(a0.stop(J),this.selected!==this._currentSelection){if(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),!!this.options[this.selected]&&!!this.options[this.selected].text)this.selectElement.title=this.options[this.selected].text}this.hideSelectDropDown(!0)}onDownArrow(J){if(this.selected<this.options.length-1){a0.stop(J,!0);let $=this.options[this.selected+1].isDisabled;if($&&this.options.length>this.selected+2)this.selected+=2;else if($)return;else this.selected++;this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(J){if(this.selected>0){if(a0.stop(J,!0),this.options[this.selected-1].isDisabled&&this.selected>1)this.selected-=2;else this.selected--;this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onPageUp(J){a0.stop(J),this.selectList.focusPreviousPage(),setTimeout(()=>{if(this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1)this.selected++,this.selectList.setFocus([this.selected]);this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(J){a0.stop(J),this.selectList.focusNextPage(),setTimeout(()=>{if(this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0)this.selected--,this.selectList.setFocus([this.selected]);this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(J){if(a0.stop(J),this.options.length<2)return;if(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1)this.selected++;this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected)}onEnd(J){if(a0.stop(J),this.options.length<2)return;if(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1)this.selected--;this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected)}onCharacter(J){let $=UJ.toString(J.keyCode),X=-1;for(let Y=0;Y<this.options.length-1;Y++)if(X=(Y+this.selected+1)%this.options.length,this.options[X].text.charAt(0).toUpperCase()===$&&!this.options[X].isDisabled){this.select(X),this.selectList.setFocus([X]),this.selectList.reveal(this.selectList.getFocus()[0]),a0.stop(J);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};v$.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;v$.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;v$.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3});var Px;var Gt=w(()=>{T0();g4();V1();_0();z0();L1();Px=class Px extends m{constructor(J,$,X,Y){super();if(this.selected=0,this.selectBoxOptions=Y||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel==="string")this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel);if(typeof this.selectBoxOptions.ariaDescription==="string")this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription);this._onDidSelect=this._register(new x),this.styles=X,this.registerListeners(),this.setOptions(J,$)}registerListeners(){this._register(b1.addTarget(this.selectElement)),[f1.Tap].forEach((J)=>{this._register(r(this.selectElement,J,($)=>{this.selectElement.focus()}))}),this._register(q6(this.selectElement,"click",(J)=>{a0.stop(J,!0)})),this._register(q6(this.selectElement,"change",(J)=>{this.selectElement.title=J.target.value,this._onDidSelect.fire({index:J.target.selectedIndex,selected:J.target.value})})),this._register(q6(this.selectElement,"keydown",(J)=>{let $=!1;if(t0){if(J.keyCode===18||J.keyCode===16||J.keyCode===10)$=!0}else if(J.keyCode===18&&J.altKey||J.keyCode===10||J.keyCode===3)$=!0;if($)J.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(J,$){if(!this.options||!B6(this.options,J))this.options=J,this.selectElement.options.length=0,this.options.forEach((X,Y)=>{this.selectElement.add(this.createOption(X.text,Y,X.isDisabled))});if($!==void 0)this.select($)}select(J){if(this.options.length===0)this.selected=0;else if(J>=0&&J<this.options.length)this.selected=J;else if(J>this.options.length-1)this.select(this.options.length-1);else if(this.selected<0)this.selected=0;if(this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text==="string")this.selectElement.title=this.options[this.selected].text;else this.selectElement.title=""}focus(){if(this.selectElement)this.selectElement.tabIndex=0,this.selectElement.focus()}blur(){if(this.selectElement)this.selectElement.tabIndex=-1,this.selectElement.blur()}setFocusable(J){this.selectElement.tabIndex=J?0:-1}render(J){J.classList.add("select-container"),J.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var J,$,X;if(this.selectElement)this.selectElement.style.backgroundColor=(J=this.styles.selectBackground)!==null&&J!==void 0?J:"",this.selectElement.style.color=($=this.styles.selectForeground)!==null&&$!==void 0?$:"",this.selectElement.style.borderColor=(X=this.styles.selectBorder)!==null&&X!==void 0?X:""}createOption(J,$,X){let Y=document.createElement("option");return Y.value=J,Y.text=J,Y.disabled=!!X,Y}}});var qt=w(()=>{K0(".monaco-select-box{cursor:pointer;border-radius:2px;width:100%}.monaco-select-box-dropdown-container{text-transform:none;font-size:13px;font-weight:400}.monaco-action-bar .action-item.select-container{cursor:default}.monaco-action-bar .action-item .monaco-select-box{cursor:pointer;min-width:100px;min-height:18px;padding:2px 23px 2px 8px}.mac .monaco-action-bar .action-item .monaco-select-box{border-radius:5px;font-size:11px}")});var Dx;var Ut=w(()=>{Qt();Gt();SX();L1();qt();Dx=class Dx extends E8{constructor(J,$,X,Y,Z){super();if(t0&&!(Z===null||Z===void 0?void 0:Z.useCustomDrawn))this.selectBoxDelegate=new Px(J,$,Y,Z);else this.selectBoxDelegate=new v$(J,$,X,Y,Z);this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(J,$){this.selectBoxDelegate.setOptions(J,$)}select(J){this.selectBoxDelegate.select(J)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(J){this.selectBoxDelegate.setFocusable(J)}render(J){this.selectBoxDelegate.render(J)}}});var Rx=w(()=>{K0(".monaco-action-bar{white-space:nowrap;height:100%}.monaco-action-bar .actions-container{align-items:center;width:100%;height:100%;margin:0 auto;padding:0;display:flex}.monaco-action-bar.vertical .actions-container{display:inline-block}.monaco-action-bar .action-item{cursor:pointer;justify-content:center;align-items:center;display:block;position:relative}.monaco-action-bar .action-item.disabled{cursor:default}.monaco-action-bar .action-item .icon,.monaco-action-bar .action-item .codicon{display:block}.monaco-action-bar .action-item .codicon{align-items:center;width:16px;height:16px;display:flex}.monaco-action-bar .action-label{border-radius:5px;padding:3px;font-size:11px;display:flex}.monaco-action-bar .action-item.disabled .action-label,.monaco-action-bar .action-item.disabled .action-label:before,.monaco-action-bar .action-item.disabled .action-label:hover{opacity:.6}.monaco-action-bar.vertical{text-align:left}.monaco-action-bar.vertical .action-item{display:block}.monaco-action-bar.vertical .action-label.separator{border-bottom:1px solid #bbb;margin-left:.8em;margin-right:.8em;padding-top:1px;display:block}.monaco-action-bar .action-item .action-label.separator{cursor:default;background-color:#bbb;width:1px;min-width:1px;height:16px;padding:0;margin:5px 4px!important}.secondary-actions .monaco-action-bar .action-label{margin-left:6px}.monaco-action-bar .action-item.select-container{flex:1;justify-content:center;align-items:center;min-width:60px;max-width:170px;margin-right:10px;display:flex;overflow:hidden}.monaco-action-bar .action-item.action-dropdown-item{display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator{cursor:default;align-items:center;display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator>div{width:1px}")});var Q9,c3,Mx;var dW=w(()=>{e7();Ux();T0();g4();zx();Ut();S7();z0();L1();Rx();c0();Q9=class Q9 extends m{get action(){return this._action}constructor(J,$,X={}){super();if(this.options=X,this._context=J||this,this._action=$,$ instanceof J9)this._register($.onDidChange((Y)=>{if(!this.element)return;this.handleActionChangeEvent(Y)}))}handleActionChangeEvent(J){if(J.enabled!==void 0)this.updateEnabled();if(J.checked!==void 0)this.updateChecked();if(J.class!==void 0)this.updateClass();if(J.label!==void 0)this.updateLabel(),this.updateTooltip();if(J.tooltip!==void 0)this.updateTooltip()}get actionRunner(){if(!this._actionRunner)this._actionRunner=this._register(new n9);return this._actionRunner}set actionRunner(J){this._actionRunner=J}isEnabled(){return this._action.enabled}setActionContext(J){this._context=J}render(J){let $=this.element=J;this._register(b1.addTarget(J));let X=this.options&&this.options.draggable;if(X){if(J.draggable=!0,U8)this._register(r(J,U0.DRAG_START,(Y)=>{var Z;return(Z=Y.dataTransfer)===null||Z===void 0?void 0:Z.setData(HM.TEXT,this._action.label)}))}if(this._register(r($,f1.Tap,(Y)=>this.onClick(Y,!0))),this._register(r($,U0.MOUSE_DOWN,(Y)=>{if(!X)a0.stop(Y,!0);if(this._action.enabled&&Y.button===0)$.classList.add("active")})),t0)this._register(r($,U0.CONTEXT_MENU,(Y)=>{if(Y.button===0&&Y.ctrlKey===!0)this.onClick(Y)}));this._register(r($,U0.CLICK,(Y)=>{if(a0.stop(Y,!0),!(this.options&&this.options.isMenu))this.onClick(Y)})),this._register(r($,U0.DBLCLICK,(Y)=>{a0.stop(Y,!0)})),[U0.MOUSE_UP,U0.MOUSE_OUT].forEach((Y)=>{this._register(r($,Y,(Z)=>{a0.stop(Z),$.classList.remove("active")}))})}onClick(J,$=!1){var X;a0.stop(J,!0);let Y=m8(this._context)?((X=this.options)===null||X===void 0?void 0:X.useEventAsContext)?J:{preserveFocus:$}:this._context;this.actionRunner.run(this._action,Y)}focus(){if(this.element)this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused")}blur(){if(this.element)this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused")}setFocusable(J){if(this.element)this.element.tabIndex=J?0:-1}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var J;if(!this.element)return;let $=(J=this.getTooltip())!==null&&J!==void 0?J:"";if(this.updateAriaLabel(),!this.options.hoverDelegate)this.element.title=$;else if(this.element.title="",!this.customHover)this.customHover=jM(this.options.hoverDelegate,this.element,$),this._store.add(this.customHover);else this.customHover.update($)}updateAriaLabel(){var J;if(this.element){let $=(J=this.getTooltip())!==null&&J!==void 0?J:"";this.element.setAttribute("aria-label",$)}}updateClass(){}updateChecked(){}dispose(){if(this.element)this.element.remove(),this.element=void 0;this._context=void 0,super.dispose()}};c3=class c3 extends Q9{constructor(J,$,X){super(J,$,X);this.options=X,this.options.icon=X.icon!==void 0?X.icon:!1,this.options.label=X.label!==void 0?X.label:!0,this.cssClass=""}render(J){super.render(J),T5(this.element);let $=document.createElement("a");if($.classList.add("action-label"),$.setAttribute("role",this.getDefaultAriaRole()),this.label=$,this.element.appendChild($),this.options.label&&this.options.keybinding){let X=document.createElement("span");X.classList.add("keybinding"),X.textContent=this.options.keybinding,this.element.appendChild(X)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){if(this._action.id===Z5.ID)return"presentation";else if(this.options.isMenu)return"menuitem";else return"button"}focus(){if(this.label)this.label.tabIndex=0,this.label.focus()}blur(){if(this.label)this.label.tabIndex=-1}setFocusable(J){if(this.label)this.label.tabIndex=J?0:-1}updateLabel(){if(this.options.label&&this.label)this.label.textContent=this.action.label}getTooltip(){let J=null;if(this.action.tooltip)J=this.action.tooltip;else if(!this.options.label&&this.action.label&&this.options.icon){if(J=this.action.label,this.options.keybinding)J=F({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",J,this.options.keybinding)}return J!==null&&J!==void 0?J:void 0}updateClass(){var J;if(this.cssClass&&this.label)this.label.classList.remove(...this.cssClass.split(" "));if(this.options.icon){if(this.cssClass=this.getClass(),this.label){if(this.label.classList.add("codicon"),this.cssClass)this.label.classList.add(...this.cssClass.split(" "))}this.updateEnabled()}else(J=this.label)===null||J===void 0||J.classList.remove("codicon")}updateEnabled(){var J,$;if(this.action.enabled){if(this.label)this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled");(J=this.element)===null||J===void 0||J.classList.remove("disabled")}else{if(this.label)this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled");($=this.element)===null||$===void 0||$.classList.add("disabled")}}updateAriaLabel(){var J;if(this.label){let $=(J=this.getTooltip())!==null&&J!==void 0?J:"";this.label.setAttribute("aria-label",$)}}updateChecked(){if(this.label)if(this.action.checked!==void 0)this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox");else this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())}};Mx=class Mx extends Q9{constructor(J,$,X,Y,Z,Q,G){super(J,$);this.selectBox=new Dx(X,Y,Z,Q,G),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(J){this.selectBox.select(J)}registerListeners(){this._register(this.selectBox.onDidSelect((J)=>this.runAction(J.selected,J.index)))}runAction(J,$){this.actionRunner.run(this._action,this.getActionContext(J,$))}getActionContext(J,$){return J}setFocusable(J){this.selectBox.setFocusable(J)}focus(){var J;(J=this.selectBox)===null||J===void 0||J.focus()}blur(){var J;(J=this.selectBox)===null||J===void 0||J.blur()}render(J){this.selectBox.render(J)}}});var Ox=w(()=>{K0(".monaco-dropdown{height:100%;padding:0}.monaco-dropdown>.dropdown-label{cursor:pointer;justify-content:center;align-items:center;height:100%;display:flex}.monaco-dropdown>.dropdown-label>.action-label.disabled{cursor:default}.monaco-dropdown-with-primary{border-radius:5px;flex-direction:row;display:flex!important}.monaco-dropdown-with-primary>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{margin-left:-3px;padding-left:0;padding-right:0;font-size:12px;line-height:16px}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}")});var zt,_x;var Ht=w(()=>{T0();d8();g4();S7();_0();Ox();zt=class zt extends n9{constructor(J,$){super();this._onDidChangeVisibility=this._register(new x),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=j0(J,B0(".monaco-dropdown")),this._label=j0(this._element,B0(".dropdown-label"));let X=$.labelRenderer;if(!X)X=(Z)=>{return Z.textContent=$.label||"",null};for(let Z of[U0.CLICK,U0.MOUSE_DOWN,f1.Tap])this._register(r(this.element,Z,(Q)=>a0.stop(Q,!0)));for(let Z of[U0.MOUSE_DOWN,f1.Tap])this._register(r(this._label,Z,(Q)=>{if(ZU(Q)&&(Q.detail>1||Q.button!==0))return;if(this.visible)this.hide();else this.show()}));this._register(r(this._label,U0.KEY_UP,(Z)=>{let Q=new R1(Z);if(Q.equals(3)||Q.equals(10))if(a0.stop(Z,!0),this.visible)this.hide();else this.show()}));let Y=X(this._label);if(Y)this._register(Y);this._register(b1.addTarget(this._label))}get element(){return this._element}show(){if(!this.visible)this.visible=!0,this._onDidChangeVisibility.fire(!0)}hide(){if(this.visible)this.visible=!1,this._onDidChangeVisibility.fire(!1)}dispose(){if(super.dispose(),this.hide(),this.boxContainer)this.boxContainer.remove(),this.boxContainer=void 0;if(this.contents)this.contents.remove(),this.contents=void 0;if(this._label)this._label.remove(),this._label=void 0}};_x=class _x extends zt{constructor(J,$){super(J,$);this._options=$,this._actions=[],this.actions=$.actions||[]}set menuOptions(J){this._menuOptions=J}get menuOptions(){return this._menuOptions}get actions(){if(this._options.actionProvider)return this._options.actionProvider.getActions();return this._actions}set actions(J){this._actions=J}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(J,$)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(J,$):void 0,getKeyBinding:(J)=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(J):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}});var l3;var Nx=w(()=>{T0();dW();Ht();_0();Ox();l3=class l3 extends Q9{constructor(J,$,X,Y=Object.create(null)){super(null,J,Y);if(this.actionItem=null,this._onDidChangeVisibility=this._register(new x),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=$,this.contextMenuProvider=X,this.options=Y,this.options.actionRunner)this.actionRunner=this.options.actionRunner}render(J){this.actionItem=J;let $=(Z)=>{this.element=j0(Z,B0("a.action-label"));let Q=[];if(typeof this.options.classNames==="string")Q=this.options.classNames.split(/\s+/g).filter((G)=>!!G);else if(this.options.classNames)Q=this.options.classNames;if(!Q.find((G)=>G==="icon"))Q.push("codicon");return this.element.classList.add(...Q),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},X=Array.isArray(this.menuActionsOrProvider),Y={contextMenuProvider:this.contextMenuProvider,labelRenderer:$,menuAsChild:this.options.menuAsChild,actions:X?this.menuActionsOrProvider:void 0,actionProvider:X?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new _x(J,Y)),this._register(this.dropdownMenu.onDidChangeVisibility((Z)=>{var Q;(Q=this.element)===null||Q===void 0||Q.setAttribute("aria-expanded",`${Z}`),this._onDidChangeVisibility.fire(Z)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let Z=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return Z.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let J=null;if(this.action.tooltip)J=this.action.tooltip;else if(this.action.label)J=this.action.label;return J!==null&&J!==void 0?J:void 0}setActionContext(J){if(super.setActionContext(J),this.dropdownMenu)if(this.dropdownMenu.menuOptions)this.dropdownMenu.menuOptions.context=J;else this.dropdownMenu.menuOptions={context:J}}show(){var J;(J=this.dropdownMenu)===null||J===void 0||J.show()}updateEnabled(){var J,$;let X=!this.action.enabled;(J=this.actionItem)===null||J===void 0||J.classList.toggle("disabled",X),($=this.element)===null||$===void 0||$.classList.toggle("disabled",X)}}});var jt=w(()=>{K0(".monaco-action-bar .action-item.menu-entry .action-label.icon{background-position:50%;background-repeat:no-repeat;background-size:16px;width:16px;height:16px}.monaco-dropdown-with-default{border-radius:5px;flex-direction:row;display:flex!important}.monaco-dropdown-with-default>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-default>.action-container.menu-entry>.action-label.icon{background-position:50%;background-repeat:no-repeat;background-size:16px;width:16px;height:16px}.monaco-dropdown-with-default:hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{margin-left:-3px;padding-left:0;padding-right:0;font-size:12px;line-height:16px}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}")});function Vt(J){return J?J.condition!==void 0:!1}class sW{constructor(){this.onDidChangeItemsExternal=q0.None,this.items=new Map}async updateItems(J){var $,X;($=J.insert)===null||$===void 0||$.forEach((Y,Z)=>this.items.set(Z,Y)),(X=J.delete)===null||X===void 0||X.forEach((Y)=>this.items.delete(Y))}}var d3,gz,s3;var Wt=w(()=>{e1();_0();z0();iR();(function(J){J[J.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",J[J.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(d3||(d3={}));(function(J){J[J.None=0]="None",J[J.Initialized=1]="Initialized",J[J.Closed=2]="Closed"})(gz||(gz={}));s3=class s3 extends m{constructor(J,$=Object.create(null)){super();this.database=J,this.options=$,this._onDidChangeStorage=this._register(new qJ),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=gz.None,this.cache=new Map,this.flushDelayer=this._register(new _j(s3.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((J)=>this.onDidChangeItemsExternal(J)))}onDidChangeItemsExternal(J){var $,X;this._onDidChangeStorage.pause();try{($=J.changed)===null||$===void 0||$.forEach((Y,Z)=>this.acceptExternal(Z,Y)),(X=J.deleted)===null||X===void 0||X.forEach((Y)=>this.acceptExternal(Y,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(J,$){if(this.state===gz.Closed)return;let X=!1;if(m8($))X=this.cache.delete(J);else if(this.cache.get(J)!==$)this.cache.set(J,$),X=!0;if(X)this._onDidChangeStorage.fire({key:J,external:!0})}get(J,$){let X=this.cache.get(J);if(m8(X))return $;return X}getBoolean(J,$){let X=this.get(J);if(m8(X))return $;return X==="true"}getNumber(J,$){let X=this.get(J);if(m8(X))return $;return parseInt(X,10)}async set(J,$,X=!1){if(this.state===gz.Closed)return;if(m8($))return this.delete(J,X);let Y=z5($)||Array.isArray($)?Sn($):String($);if(this.cache.get(J)===Y)return;return this.cache.set(J,Y),this.pendingInserts.set(J,Y),this.pendingDeletes.delete(J),this._onDidChangeStorage.fire({key:J,external:X}),this.doFlush()}async delete(J,$=!1){if(this.state===gz.Closed)return;if(!this.cache.delete(J))return;if(!this.pendingDeletes.has(J))this.pendingDeletes.add(J);return this.pendingInserts.delete(J),this._onDidChangeStorage.fire({key:J,external:$}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;let J={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(J).finally(()=>{var $;if(!this.hasPending)while(this.whenFlushedCallbacks.length)($=this.whenFlushedCallbacks.pop())===null||$===void 0||$()})}async doFlush(J){if(this.options.hint===d3.STORAGE_IN_MEMORY)return this.flushPending();return this.flushDelayer.trigger(()=>this.flushPending(),J)}};s3.DEFAULT_FLUSH_DELAY=100});function oG0(J){let $=J.get(PM);if($)try{return JSON.parse($)}catch(X){}return Object.create(null)}var PM="__$__targetStorageMarker",h$,DM,RM,Tx;var pz=w(()=>{_0();z0();Wt();s0();h$=w0("storageService");(function(J){J[J.NONE=0]="NONE",J[J.SHUTDOWN=1]="SHUTDOWN"})(DM||(DM={}));RM=class RM extends m{constructor(J={flushInterval:RM.DEFAULT_FLUSH_INTERVAL}){super();this.options=J,this._onDidChangeValue=this._register(new qJ),this._onDidChangeTarget=this._register(new qJ),this._onWillSaveState=this._register(new x),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(J,$,X){return q0.filter(this._onDidChangeValue.event,(Y)=>Y.scope===J&&($===void 0||Y.key===$),X)}emitDidChangeValue(J,$){let{key:X,external:Y}=$;if(X===PM){switch(J){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:J})}else this._onDidChangeValue.fire({scope:J,key:X,target:this.getKeyTargets(J)[X],external:Y})}get(J,$,X){var Y;return(Y=this.getStorage($))===null||Y===void 0?void 0:Y.get(J,X)}getBoolean(J,$,X){var Y;return(Y=this.getStorage($))===null||Y===void 0?void 0:Y.getBoolean(J,X)}getNumber(J,$,X){var Y;return(Y=this.getStorage($))===null||Y===void 0?void 0:Y.getNumber(J,X)}store(J,$,X,Y,Z=!1){if(m8($)){this.remove(J,X,Z);return}this.withPausedEmitters(()=>{var Q;this.updateKeyTarget(J,X,Y),(Q=this.getStorage(X))===null||Q===void 0||Q.set(J,$,Z)})}remove(J,$,X=!1){this.withPausedEmitters(()=>{var Y;this.updateKeyTarget(J,$,void 0),(Y=this.getStorage($))===null||Y===void 0||Y.delete(J,X)})}withPausedEmitters(J){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{J()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(J,$,X,Y=!1){var Z,Q;let G=this.getKeyTargets($);if(typeof X==="number"){if(G[J]!==X)G[J]=X,(Z=this.getStorage($))===null||Z===void 0||Z.set(PM,JSON.stringify(G),Y)}else if(typeof G[J]==="number")delete G[J],(Q=this.getStorage($))===null||Q===void 0||Q.set(PM,JSON.stringify(G),Y)}get workspaceKeyTargets(){if(!this._workspaceKeyTargets)this._workspaceKeyTargets=this.loadKeyTargets(1);return this._workspaceKeyTargets}get profileKeyTargets(){if(!this._profileKeyTargets)this._profileKeyTargets=this.loadKeyTargets(0);return this._profileKeyTargets}get applicationKeyTargets(){if(!this._applicationKeyTargets)this._applicationKeyTargets=this.loadKeyTargets(-1);return this._applicationKeyTargets}getKeyTargets(J){switch(J){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(J){let $=this.getStorage(J);return $?oG0($):Object.create(null)}};RM.DEFAULT_FLUSH_INTERVAL=60000;Tx=class Tx extends RM{constructor(){super();this.applicationStorage=this._register(new s3(new sW,{hint:d3.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new s3(new sW,{hint:d3.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new s3(new sW,{hint:d3.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage((J)=>this.emitDidChangeValue(1,J))),this._register(this.profileStorage.onDidChangeStorage((J)=>this.emitDidChangeValue(0,J))),this._register(this.applicationStorage.onDidChangeStorage((J)=>this.emitDidChangeValue(-1,J)))}getStorage(J){switch(J){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}});function tG0(J,$){let X={...$};for(let Y in J){let Z=J[Y];X[Y]=Z!==void 0?P0(Z):void 0}return X}function hZ(J){return tG0(J,a3)}var Bt,Ft,Kt,wx,Je0,$e0,Lx,At,Pt,Xe0,a3,Dt,Rt;var mz=w(()=>{i8();T9();Bt={keybindingLabelBackground:P0(vc),keybindingLabelForeground:P0(hc),keybindingLabelBorder:P0(fc),keybindingLabelBottomBorder:P0(gc),keybindingLabelShadow:P0(TX)},Ft={buttonForeground:P0(wU),buttonSeparator:P0(Tc),buttonBackground:P0(LU),buttonHoverBackground:P0(wc),buttonSecondaryForeground:P0(kc),buttonSecondaryBackground:P0(eP),buttonSecondaryHoverBackground:P0(Ec),buttonBorder:P0(Lc)},Kt={progressBarBackground:P0(yc)},wx={inputActiveOptionBorder:P0(Vc),inputActiveOptionForeground:P0(Bc),inputActiveOptionBackground:P0(Wc)},Je0={checkboxBackground:P0(Hl),checkboxBorder:P0(Vl),checkboxForeground:P0(jl)},$e0={dialogBackground:P0(l6),dialogForeground:P0(kX),dialogShadow:P0(TX),dialogBorder:P0(I1),errorIconForeground:P0(El),warningIconForeground:P0(Il),infoIconForeground:P0(yl),textLinkForeground:P0(qc)},Lx={inputBackground:P0(zc),inputForeground:P0(Hc),inputBorder:P0(jc),inputValidationInfoBorder:P0(Ac),inputValidationInfoBackground:P0(Fc),inputValidationInfoForeground:P0(Kc),inputValidationWarningBorder:P0(Rc),inputValidationWarningBackground:P0(Pc),inputValidationWarningForeground:P0(Dc),inputValidationErrorBorder:P0(_c),inputValidationErrorBackground:P0(Mc),inputValidationErrorForeground:P0(Oc)},At={listFilterWidgetBackground:P0(Yl),listFilterWidgetOutline:P0(Zl),listFilterWidgetNoMatchesOutline:P0(Ql),listFilterWidgetShadow:P0(Gl),inputBoxStyles:Lx,toggleStyles:wx},Pt={badgeBackground:P0(DV),badgeForeground:P0(Ic),badgeBorder:P0(I1)},Xe0={breadcrumbsBackground:P0(Ml),breadcrumbsForeground:P0(Rl),breadcrumbsHoverForeground:P0(OL),breadcrumbsFocusForeground:P0(OL),breadcrumbsFocusAndSelectionForeground:P0(Ol)},a3={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:P0(sc),listFocusForeground:P0(ac),listFocusOutline:P0(rc),listActiveSelectionBackground:P0(EX),listActiveSelectionForeground:P0(_$),listActiveSelectionIconForeground:P0(bU),listFocusAndSelectionOutline:P0(ic),listFocusAndSelectionBackground:P0(EX),listFocusAndSelectionForeground:P0(_$),listInactiveSelectionBackground:P0(nc),listInactiveSelectionIconForeground:P0(tc),listInactiveSelectionForeground:P0(oc),listInactiveFocusBackground:P0(ec),listInactiveFocusOutline:P0(Jl),listHoverBackground:P0(RL),listHoverForeground:P0(ML),listDropOverBackground:P0($l),listDropBetweenBackground:P0(Xl),listSelectionOutline:P0(O6),listHoverOutline:P0(O6),treeIndentGuidesStroke:P0(SU),treeInactiveIndentGuidesStroke:P0(ql),tableColumnsBorder:P0(Ul),tableOddRowsBackgroundColor:P0(zl)};Dt={selectBackground:P0(M$),selectListBackground:P0(Nc),selectForeground:P0(wX),decoratorRightForeground:P0(ZD),selectBorder:P0(uQ),focusBorder:P0(Y4),listFocusBackground:P0(xX),listInactiveSelectionIconForeground:P0(GZ),listFocusForeground:P0(yX),listFocusOutline:Qc(O6,n.transparent.toString()),listHoverBackground:P0(RL),listHoverForeground:P0(ML),listHoverOutline:P0(O6),selectListBorder:P0(O$),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},Rt={shadowColor:P0(TX),borderColor:P0(Wl),foregroundColor:P0(Bl),backgroundColor:P0(Fl),selectionForegroundColor:P0(Kl),selectionBackgroundColor:P0(Al),selectionBorderColor:P0(Pl),separatorColor:P0(Dl),scrollbarShadow:P0(kU),scrollbarSliderBackground:P0(EU),scrollbarSliderHoverBackground:P0(IU),scrollbarSliderActiveBackground:P0(yU)}});function Nt(J,$,X,Y){let Z=J.getActions($),Q=KX.getInstance(),G=Q.keyStatus.altKey||(p6||N6)&&Q.keyStatus.shiftKey;wt(Z,X,G,Y?(q)=>q===Y:(q)=>q==="navigation")}function Tt(J,$,X,Y,Z,Q){let G=J.getActions($);wt(G,X,!1,typeof Y==="string"?(U)=>U===Y:Y,Z,Q)}function wt(J,$,X,Y=(G)=>G==="navigation",Z=()=>!1,Q=!1){let G,q;if(Array.isArray($))G=$,q=$;else G=$.primary,q=$.secondary;let U=new Set;for(let[z,H]of J){let j;if(Y(z)){if(j=G,j.length>0&&Q)j.push(new Z5)}else if(j=q,j.length>0)j.push(new Z5);for(let V of H){if(X)V=V instanceof WJ&&V.alt?V.alt:V;let W=j.push(V);if(V instanceof fY)U.add({group:z,action:V,index:W-1})}}for(let{group:z,action:H,index:j}of U){let V=Y(z)?G:q,W=H.actions;if(Z(H,z,V.length))V.splice(j,1,...W)}}var MM=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},G9=function(J,$){return function(X,Y){$(X,Y,J)}},uz,Mt,Ot,_t;var OM=w(()=>{T0();d8();dW();Nx();S7();XM();z0();L1();jt();c0();FJ();t1();IZ();s0();EJ();wZ();pz();G5();I5();qZ();i8();mz();P$();uz=class extends c3{constructor($,X,Y,Z,Q,G,q,U){super(void 0,$,{icon:!!($.class||$.item.icon),label:!$.class&&!$.item.icon,draggable:X===null||X===void 0?void 0:X.draggable,keybinding:X===null||X===void 0?void 0:X.keybinding,hoverDelegate:X===null||X===void 0?void 0:X.hoverDelegate});this._keybindingService=Y,this._notificationService=Z,this._contextKeyService=Q,this._themeService=G,this._contextMenuService=q,this._accessibilityService=U,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new q8),this._altKey=KX.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick($){$.preventDefault(),$.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(X){this._notificationService.error(X)}}render($){if(super.render($),$.classList.add("menu-entry"),this.options.icon)this._updateItemClass(this._menuItemAction.item);if(this._menuItemAction.alt){let X=!1,Y=()=>{var Z;let Q=!!((Z=this._menuItemAction.alt)===null||Z===void 0?void 0:Z.enabled)&&(!this._accessibilityService.isMotionReduced()||X)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&X);if(Q!==this._wantsAltCommand)this._wantsAltCommand=Q,this.updateLabel(),this.updateTooltip(),this.updateClass()};this._register(this._altKey.event(Y)),this._register(r($,"mouseleave",(Z)=>{X=!1,Y()})),this._register(r($,"mouseenter",(Z)=>{X=!0,Y()})),Y()}}updateLabel(){if(this.options.label&&this.label)this.label.textContent=this._commandAction.label}getTooltip(){var $;let X=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),Y=X&&X.getLabel(),Z=this._commandAction.tooltip||this._commandAction.label,Q=Y?F("titleAndKb","{0} ({1})",Z,Y):Z;if(!this._wantsAltCommand&&(($=this._menuItemAction.alt)===null||$===void 0?void 0:$.enabled)){let G=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,q=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),U=q&&q.getLabel(),z=U?F("titleAndKb","{0} ({1})",G,U):G;Q=F("titleAndKbAndAlt",`{0}
[{1}] {2}`,Q,Iz.modifierLabels[Z7].altKey,z)}return Q}updateClass(){if(this.options.icon)if(this._commandAction!==this._menuItemAction){if(this._menuItemAction.alt)this._updateItemClass(this._menuItemAction.alt.item)}else this._updateItemClass(this._menuItemAction.item)}_updateItemClass($){this._itemClassDispose.value=void 0;let{element:X,label:Y}=this;if(!X||!Y)return;let Z=this._commandAction.checked&&Vt($.toggled)&&$.toggled.icon?$.toggled.icon:$.icon;if(!Z)return;if(h0.isThemeIcon(Z)){let Q=h0.asClassNameArray(Z);Y.classList.add(...Q),this._itemClassDispose.value=N0(()=>{Y.classList.remove(...Q)})}else Y.style.backgroundImage=H3(this._themeService.getColorTheme().type)?DJ(Z.dark):DJ(Z.light),Y.classList.add("icon"),this._itemClassDispose.value=G7(N0(()=>{Y.style.backgroundImage="",Y.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};uz=MM([G9(2,$5),G9(3,K8),G9(4,m0),G9(5,Q5),G9(6,S9),G9(7,a8)],uz);Mt=class extends l3{constructor($,X,Y,Z,Q){var G,q,U;let z={...X,menuAsChild:(G=X===null||X===void 0?void 0:X.menuAsChild)!==null&&G!==void 0?G:!1,classNames:(q=X===null||X===void 0?void 0:X.classNames)!==null&&q!==void 0?q:h0.isThemeIcon($.item.icon)?h0.asClassName($.item.icon):void 0,keybindingProvider:(U=X===null||X===void 0?void 0:X.keybindingProvider)!==null&&U!==void 0?U:(H)=>Y.lookupKeybinding(H.id)};super($,{getActions:()=>$.actions},Z,z);this._keybindingService=Y,this._contextMenuService=Z,this._themeService=Q}render($){super.render($),T5(this.element),$.classList.add("menu-entry");let X=this._action,{icon:Y}=X.item;if(Y&&!h0.isThemeIcon(Y)){this.element.classList.add("icon");let Z=()=>{if(this.element)this.element.style.backgroundImage=H3(this._themeService.getColorTheme().type)?DJ(Y.dark):DJ(Y.light)};Z(),this._register(this._themeService.onDidColorThemeChange(()=>{Z()}))}}};Mt=MM([G9(2,$5),G9(3,S9),G9(4,Q5)],Mt);Ot=class extends Q9{constructor($,X,Y,Z,Q,G,q,U){var z,H,j;super(null,$);this._keybindingService=Y,this._notificationService=Z,this._contextMenuService=Q,this._menuService=G,this._instaService=q,this._storageService=U,this._container=null,this._options=X,this._storageKey=`${$.item.submenu.id}_lastActionId`;let V,W=(X===null||X===void 0?void 0:X.persistLastActionId)?U.get(this._storageKey,1):void 0;if(W)V=$.actions.find((K)=>W===K.id);if(!V)V=$.actions[0];this._defaultAction=this._instaService.createInstance(uz,V,{keybinding:this._getDefaultActionKeybindingLabel(V)});let B={keybindingProvider:(K)=>this._keybindingService.lookupKeybinding(K.id),...X,menuAsChild:(z=X===null||X===void 0?void 0:X.menuAsChild)!==null&&z!==void 0?z:!0,classNames:(H=X===null||X===void 0?void 0:X.classNames)!==null&&H!==void 0?H:["codicon","codicon-chevron-down"],actionRunner:(j=X===null||X===void 0?void 0:X.actionRunner)!==null&&j!==void 0?j:new n9};this._dropdown=new l3($,$.actions,this._contextMenuService,B),this._register(this._dropdown.actionRunner.onDidRun((K)=>{if(K.action instanceof WJ)this.update(K.action)}))}update($){var X;if((X=this._options)===null||X===void 0?void 0:X.persistLastActionId)this._storageService.store(this._storageKey,$.id,1,1);if(this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(uz,$,{keybinding:this._getDefaultActionKeybindingLabel($)}),this._defaultAction.actionRunner=new class extends n9{async runAction(Y,Z){await Y.run(void 0)}},this._container)this._defaultAction.render(GU(this._container,B0(".action-container")))}_getDefaultActionKeybindingLabel($){var X;let Y;if((X=this._options)===null||X===void 0?void 0:X.renderKeybindingWithDefaultActionLabel){let Z=this._keybindingService.lookupKeybinding($.id);if(Z)Y=`(${Z.getLabel()})`}return Y}setActionContext($){super.setActionContext($),this._defaultAction.setActionContext($),this._dropdown.setActionContext($)}render($){this._container=$,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let X=B0(".action-container");this._defaultAction.render(j0(this._container,X)),this._register(r(X,U0.KEY_DOWN,(Z)=>{let Q=new R1(Z);if(Q.equals(17))this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),Q.stopPropagation()}));let Y=B0(".dropdown-action-container");this._dropdown.render(j0(this._container,Y)),this._register(r(Y,U0.KEY_DOWN,(Z)=>{var Q;let G=new R1(Z);if(G.equals(15))this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(Q=this._defaultAction.element)===null||Q===void 0||Q.focus(),G.stopPropagation()}))}focus($){if($)this._dropdown.focus();else this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus()}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable($){if($)this._defaultAction.element.tabIndex=0;else this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1)}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};Ot=MM([G9(2,$5),G9(3,K8),G9(4,S9),G9(5,BJ),G9(6,l0),G9(7,h$)],Ot);_t=class extends Mx{constructor($,X){super(null,$,$.actions.map((Y)=>({text:Y.id===Z5.ID?"─────────":Y.label,isDisabled:!Y.enabled})),0,X,Dt,{ariaLabel:$.tooltip,optionsAsChildren:!0});this.select(Math.max(0,$.actions.findIndex((Y)=>Y.checked)))}render($){super.render($),$.style.borderColor=P0(uQ)}runAction($,X){let Y=this.action.actions[X];if(Y)this.actionRunner.run(Y)}};_t=MM([G9(1,S$)],_t)});var S8;var $Y=w(()=>{T0();d8();dW();S7();_0();z0();Rx();S8=class S8 extends m{constructor(J,$={}){var X,Y,Z,Q,G,q;super();if(this._actionRunnerDisposables=this._register(new $0),this.viewItemDisposables=this._register(new KG),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new x),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new x({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new x),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new x),this.onWillRun=this._onWillRun.event,this.options=$,this._context=(X=$.context)!==null&&X!==void 0?X:null,this._orientation=(Y=this.options.orientation)!==null&&Y!==void 0?Y:0,this._triggerKeys={keyDown:(Q=(Z=this.options.triggerKeys)===null||Z===void 0?void 0:Z.keyDown)!==null&&Q!==void 0?Q:!1,keys:(q=(G=this.options.triggerKeys)===null||G===void 0?void 0:G.keys)!==null&&q!==void 0?q:[3,10]},this.options.actionRunner)this._actionRunner=this.options.actionRunner;else this._actionRunner=new n9,this._actionRunnerDisposables.add(this._actionRunner);if(this._actionRunnerDisposables.add(this._actionRunner.onDidRun((H)=>this._onDidRun.fire(H))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((H)=>this._onWillRun.fire(H))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",$.animated!==!1)this.domNode.classList.add("animated");let U,z;switch(this._orientation){case 0:U=[15],z=[17];break;case 1:U=[16],z=[18],this.domNode.className+=" vertical";break}if(this._register(r(this.domNode,U0.KEY_DOWN,(H)=>{let j=new R1(H),V=!0,W=typeof this.focusedItem==="number"?this.viewItems[this.focusedItem]:void 0;if(U&&(j.equals(U[0])||j.equals(U[1])))V=this.focusPrevious();else if(z&&(j.equals(z[0])||j.equals(z[1])))V=this.focusNext();else if(j.equals(9)&&this.cancelHasListener)this._onDidCancel.fire();else if(j.equals(14))V=this.focusFirst();else if(j.equals(13))V=this.focusLast();else if(j.equals(2)&&W instanceof Q9&&W.trapsArrowNavigation)V=this.focusNext();else if(this.isTriggerKeyEvent(j))if(this._triggerKeys.keyDown)this.doTrigger(j);else this.triggerKeyDown=!0;else V=!1;if(V)j.preventDefault(),j.stopPropagation()})),this._register(r(this.domNode,U0.KEY_UP,(H)=>{let j=new R1(H);if(this.isTriggerKeyEvent(j)){if(!this._triggerKeys.keyDown&&this.triggerKeyDown)this.triggerKeyDown=!1,this.doTrigger(j);j.preventDefault(),j.stopPropagation()}else if(j.equals(2)||j.equals(1026)||j.equals(16)||j.equals(18)||j.equals(15)||j.equals(17))this.updateFocusedItem()})),this.focusTracker=this._register(lY(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{if(B5()===this.domNode||!e6(B5(),this.domNode))this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems)this.actionsList.classList.add("highlight-toggled");if(this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel)this.actionsList.setAttribute("aria-label",this.options.ariaLabel);this.domNode.appendChild(this.actionsList),J.appendChild(this.domNode)}refreshRole(){if(this.length()>=1)this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar");else this.actionsList.setAttribute("role","presentation")}setFocusable(J){if(this.focusable=J,this.focusable){let $=this.viewItems.find((X)=>X instanceof Q9&&X.isEnabled());if($ instanceof Q9)$.setFocusable(!0)}else this.viewItems.forEach(($)=>{if($ instanceof Q9)$.setFocusable(!1)})}isTriggerKeyEvent(J){let $=!1;return this._triggerKeys.keys.forEach((X)=>{$=$||J.equals(X)}),$}updateFocusedItem(){var J,$;for(let X=0;X<this.actionsList.children.length;X++){let Y=this.actionsList.children[X];if(e6(B5(),Y)){this.focusedItem=X,($=(J=this.viewItems[this.focusedItem])===null||J===void 0?void 0:J.showHover)===null||$===void 0||$.call(J);break}}}get context(){return this._context}set context(J){this._context=J,this.viewItems.forEach(($)=>$.setActionContext(J))}get actionRunner(){return this._actionRunner}set actionRunner(J){this._actionRunner=J,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(($)=>this._onDidRun.fire($))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(($)=>this._onWillRun.fire($))),this.viewItems.forEach(($)=>$.actionRunner=J)}getContainer(){return this.domNode}getAction(J){var $;if(typeof J==="number")return($=this.viewItems[J])===null||$===void 0?void 0:$.action;if(J instanceof HTMLElement){while(J.parentElement!==this.actionsList){if(!J.parentElement)return;J=J.parentElement}for(let X=0;X<this.actionsList.childNodes.length;X++)if(this.actionsList.childNodes[X]===J)return this.viewItems[X].action}return}push(J,$={}){let X=Array.isArray(J)?J:[J],Y=l9($.index)?$.index:null;if(X.forEach((Z)=>{let Q=document.createElement("li");Q.className="action-item",Q.setAttribute("role","presentation");let G,q={hoverDelegate:this.options.hoverDelegate,...$};if(this.options.actionViewItemProvider)G=this.options.actionViewItemProvider(Z,q);if(!G)G=new c3(this.context,Z,q);if(!this.options.allowContextMenu)this.viewItemDisposables.set(G,r(Q,U0.CONTEXT_MENU,(U)=>{a0.stop(U,!0)}));if(G.actionRunner=this._actionRunner,G.setActionContext(this.context),G.render(Q),this.focusable&&G instanceof Q9&&this.viewItems.length===0)G.setFocusable(!0);if(Y===null||Y<0||Y>=this.actionsList.children.length)this.actionsList.appendChild(Q),this.viewItems.push(G);else this.actionsList.insertBefore(Q,this.actionsList.children[Y]),this.viewItems.splice(Y,0,G),Y++}),typeof this.focusedItem==="number")this.focus(this.focusedItem);this.refreshRole()}clear(){if(this.isEmpty())return;this.viewItems=h1(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),t5(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(J){let $=!1,X=void 0;if(J===void 0)$=!0;else if(typeof J==="number")X=J;else if(typeof J==="boolean")$=J;if($&&typeof this.focusedItem>"u"){let Y=this.viewItems.findIndex((Z)=>Z.isEnabled());this.focusedItem=Y===-1?void 0:Y,this.updateFocus(void 0,void 0,!0)}else{if(X!==void 0)this.focusedItem=X;this.updateFocus(void 0,void 0,!0)}}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(J){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let $=this.focusedItem,X;do{if(!J&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=$,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,X=this.viewItems[this.focusedItem]}while(this.focusedItem!==$&&(this.options.focusOnlyEnabledItems&&!X.isEnabled()||X.action.id===Z5.ID));return this.updateFocus(),!0}focusPrevious(J){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let $=this.focusedItem,X;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!J&&this.options.preventLoopNavigation)return this.focusedItem=$,!1;this.focusedItem=this.viewItems.length-1}X=this.viewItems[this.focusedItem]}while(this.focusedItem!==$&&(this.options.focusOnlyEnabledItems&&!X.isEnabled()||X.action.id===Z5.ID));return this.updateFocus(!0),!0}updateFocus(J,$,X=!1){var Y,Z;if(typeof this.focusedItem>"u")this.actionsList.focus({preventScroll:$});if(this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem)(Y=this.viewItems[this.previouslyFocusedItem])===null||Y===void 0||Y.blur();let Q=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(Q){let G=!0;if(!Iq(Q.focus))G=!1;if(this.options.focusOnlyEnabledItems&&Iq(Q.isEnabled)&&!Q.isEnabled())G=!1;if(Q.action.id===Z5.ID)G=!1;if(!G)this.actionsList.focus({preventScroll:$}),this.previouslyFocusedItem=void 0;else if(X||this.previouslyFocusedItem!==this.focusedItem)Q.focus(J),this.previouslyFocusedItem=this.focusedItem;if(G)(Z=Q.showHover)===null||Z===void 0||Z.call(Q)}}doTrigger(J){if(typeof this.focusedItem>"u")return;let $=this.viewItems[this.focusedItem];if($ instanceof Q9){let X=$._context===null||$._context===void 0?J:$._context;this.run($._action,X)}}async run(J,$){await this._actionRunner.run(J,$)}dispose(){this._context=void 0,this.viewItems=h1(this.viewItems),this.getContainer().remove(),super.dispose()}}});function eG0(J){let $=Ex,X=$.exec(J);if(!X)return J;let Y=!X[1];return J.replace($,Y?"$2$3":"").trim()}function Lt(J){let $=LK()[J.id];return`.codicon-${J.id}:before { content: '\\${$.toString(16)}'; }`}function J30(J,$){let X=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${Lt(F0.menuSelection)}
${Lt(F0.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if($){X+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;let Y=J.scrollbarShadow;if(Y)X+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${Y} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${Y} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${Y} 6px 6px 6px -6px inset;
				}
			`;let Z=J.scrollbarSliderBackground;if(Z)X+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${Z};
				}
			`;let Q=J.scrollbarSliderHoverBackground;if(Q)X+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${Q};
				}
			`;let G=J.scrollbarSliderActiveBackground;if(G)X+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${G};
				}
			`}return X}var Ex,kx,_M,r3,xx,Ix,yx;var kt=w(()=>{e7();g4();T0();d8();O4();$Y();dW();Qx();L$();S7();e1();k5();I5();Nz();z0();L1();X1();Ex=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,kx=/(&amp;)?(&amp;)([^\s&])/g;(function(J){J[J.Right=0]="Right",J[J.Left=1]="Left"})(_M||(_M={}));r3=class r3 extends S8{constructor(J,$,X,Y){J.classList.add("monaco-menu-container"),J.setAttribute("role","presentation");let Z=document.createElement("div");Z.classList.add("monaco-menu"),Z.setAttribute("role","presentation");super(Z,{orientation:1,actionViewItemProvider:(U)=>this.doGetActionViewItem(U,X,Q),context:X.context,actionRunner:X.actionRunner,ariaLabel:X.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...t0||N6?[10]:[]],keyDown:!0}});if(this.menuStyles=Y,this.menuElement=Z,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(J,Y),this._register(b1.addTarget(Z)),this._register(r(Z,U0.KEY_DOWN,(U)=>{if(new R1(U).equals(2))U.preventDefault()})),X.enableMnemonics)this._register(r(Z,U0.KEY_DOWN,(U)=>{let z=U.key.toLocaleLowerCase();if(this.mnemonics.has(z)){a0.stop(U,!0);let H=this.mnemonics.get(z);if(H.length===1){if(H[0]instanceof Ix&&H[0].container)this.focusItemByElement(H[0].container);H[0].onClick(U)}if(H.length>1){let j=H.shift();if(j&&j.container)this.focusItemByElement(j.container),H.push(j);this.mnemonics.set(z,H)}}}));if(N6)this._register(r(Z,U0.KEY_DOWN,(U)=>{let z=new R1(U);if(z.equals(14)||z.equals(11))this.focusedItem=this.viewItems.length-1,this.focusNext(),a0.stop(U,!0);else if(z.equals(13)||z.equals(12))this.focusedItem=0,this.focusPrevious(),a0.stop(U,!0)}));this._register(r(this.domNode,U0.MOUSE_OUT,(U)=>{let z=U.relatedTarget;if(!e6(z,this.domNode))this.focusedItem=void 0,this.updateFocus(),U.stopPropagation()})),this._register(r(this.actionsList,U0.MOUSE_OVER,(U)=>{let z=U.target;if(!z||!e6(z,this.actionsList)||z===this.actionsList)return;while(z.parentElement!==this.actionsList&&z.parentElement!==null)z=z.parentElement;if(z.classList.contains("action-item")){let H=this.focusedItem;if(this.setFocusedItem(z),H!==this.focusedItem)this.updateFocus()}})),this._register(b1.addTarget(this.actionsList)),this._register(r(this.actionsList,f1.Tap,(U)=>{let z=U.initialTarget;if(!z||!e6(z,this.actionsList)||z===this.actionsList)return;while(z.parentElement!==this.actionsList&&z.parentElement!==null)z=z.parentElement;if(z.classList.contains("action-item")){let H=this.focusedItem;if(this.setFocusedItem(z),H!==this.focusedItem)this.updateFocus()}}));let Q={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new jZ(Z,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let G=this.scrollableElement.getDomNode();G.style.position="",this.styleScrollElement(G,Y),this._register(r(Z,f1.Change,(U)=>{a0.stop(U,!0);let z=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:z-U.translationY})})),this._register(r(G,U0.MOUSE_UP,(U)=>{U.preventDefault()}));let q=O0(J);Z.style.maxHeight=`${Math.max(10,q.innerHeight-J.getBoundingClientRect().top-35)}px`,$=$.filter((U,z)=>{var H;if((H=X.submenuIds)===null||H===void 0?void 0:H.has(U.id))return console.warn(`Found submenu cycle: ${U.id}`),!1;if(U instanceof Z5){if(z===$.length-1||z===0)return!1;if($[z-1]instanceof Z5)return!1}return!0}),this.push($,{icon:!0,label:!0,isMenu:!0}),J.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((U)=>!(U instanceof yx)).forEach((U,z,H)=>{U.updatePositionInSet(z+1,H.length)})}initializeOrUpdateStyleSheet(J,$){if(!this.styleSheet)if(hG(J))this.styleSheet=p5(J);else{if(!r3.globalStyleSheet)r3.globalStyleSheet=p5();this.styleSheet=r3.globalStyleSheet}this.styleSheet.textContent=J30($,hG(J))}styleScrollElement(J,$){var X,Y;let Z=(X=$.foregroundColor)!==null&&X!==void 0?X:"",Q=(Y=$.backgroundColor)!==null&&Y!==void 0?Y:"",G=$.borderColor?`1px solid ${$.borderColor}`:"",q="5px",U=$.shadowColor?`0 2px 8px ${$.shadowColor}`:"";J.style.outline=G,J.style.borderRadius="5px",J.style.color=Z,J.style.backgroundColor=Q,J.style.boxShadow=U}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(J){let $=this.focusedItem;if(this.setFocusedItem(J),$!==this.focusedItem)this.updateFocus()}setFocusedItem(J){for(let $=0;$<this.actionsList.children.length;$++){let X=this.actionsList.children[$];if(J===X){this.focusedItem=$;break}}}updateFocus(J){if(super.updateFocus(J,!0,!0),typeof this.focusedItem<"u")this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(J,$,X){if(J instanceof Z5)return new yx($.context,J,{icon:!0},this.menuStyles);else if(J instanceof fY){let Y=new Ix(J,J.actions,X,{...$,submenuIds:new Set([...$.submenuIds||[],J.id])},this.menuStyles);if($.enableMnemonics){let Z=Y.getMnemonic();if(Z&&Y.isEnabled()){let Q=[];if(this.mnemonics.has(Z))Q=this.mnemonics.get(Z);Q.push(Y),this.mnemonics.set(Z,Q)}}return Y}else{let Y={enableMnemonics:$.enableMnemonics,useEventAsContext:$.useEventAsContext};if($.getKeyBinding){let Q=$.getKeyBinding(J);if(Q){let G=Q.getLabel();if(G)Y.keybinding=G}}let Z=new xx($.context,J,Y,this.menuStyles);if($.enableMnemonics){let Q=Z.getMnemonic();if(Q&&Z.isEnabled()){let G=[];if(this.mnemonics.has(Q))G=this.mnemonics.get(Q);G.push(Z),this.mnemonics.set(Q,G)}}return Z}}};xx=class xx extends Q9{constructor(J,$,X,Y){X.isMenu=!0;super($,$,X);if(this.menuStyle=Y,this.options=X,this.options.icon=X.icon!==void 0?X.icon:!1,this.options.label=X.label!==void 0?X.label:!0,this.cssClass="",this.options.label&&X.enableMnemonics){let Z=this.action.label;if(Z){let Q=Ex.exec(Z);if(Q)this.mnemonic=(Q[1]?Q[1]:Q[3]).toLocaleLowerCase()}}this.runOnceToEnableMouseUp=new H6(()=>{if(!this.element)return;this._register(r(this.element,U0.MOUSE_UP,(Z)=>{if(a0.stop(Z,!0),U8){if(new T8(O0(this.element),Z).rightButton)return;this.onClick(Z)}else setTimeout(()=>{this.onClick(Z)},0)})),this._register(r(this.element,U0.CONTEXT_MENU,(Z)=>{a0.stop(Z,!0)}))},100),this._register(this.runOnceToEnableMouseUp)}render(J){if(super.render(J),!this.element)return;if(this.container=J,this.item=j0(this.element,B0("a.action-menu-item")),this._action.id===Z5.ID)this.item.setAttribute("role","presentation");else if(this.item.setAttribute("role","menuitem"),this.mnemonic)this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`);if(this.check=j0(this.item,B0("span.menu-item-check"+h0.asCSSSelector(F0.menuSelection))),this.check.setAttribute("role","none"),this.label=j0(this.item,B0("span.action-label")),this.options.label&&this.options.keybinding)j0(this.item,B0("span.keybinding")).textContent=this.options.keybinding;this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle()}blur(){super.blur(),this.applyStyle()}focus(){var J;super.focus(),(J=this.item)===null||J===void 0||J.focus(),this.applyStyle()}updatePositionInSet(J,$){if(this.item)this.item.setAttribute("aria-posinset",`${J}`),this.item.setAttribute("aria-setsize",`${$}`)}updateLabel(){var J;if(!this.label)return;if(this.options.label){t5(this.label);let $=dR(this.action.label);if($){let X=eG0($);if(!this.options.enableMnemonics)$=X;this.label.setAttribute("aria-label",X.replace(/&&/g,"&"));let Y=Ex.exec($);if(Y){$=_G($),kx.lastIndex=0;let Z=kx.exec($);while(Z&&Z[1])Z=kx.exec($);let Q=(G)=>G.replace(/&amp;&amp;/g,"&amp;");if(Z)this.label.append(OQ(Q($.substr(0,Z.index))," "),B0("u",{"aria-hidden":"true"},Z[3]),Ng(Q($.substr(Z.index+Z[0].length))," "));else this.label.innerText=Q($).trim();(J=this.item)===null||J===void 0||J.setAttribute("aria-keyshortcuts",(Y[1]?Y[1]:Y[3]).toLocaleLowerCase())}else this.label.innerText=$.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){if(this.cssClass&&this.item)this.item.classList.remove(...this.cssClass.split(" "));if(this.options.icon&&this.label){if(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass)this.label.classList.add(...this.cssClass.split(" "));this.updateEnabled()}else if(this.label)this.label.classList.remove("icon")}updateEnabled(){if(this.action.enabled){if(this.element)this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled");if(this.item)this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0}else{if(this.element)this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true");if(this.item)this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")}}updateChecked(){if(!this.item)return;let J=this.action.checked;if(this.item.classList.toggle("checked",!!J),J!==void 0)this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",J?"true":"false");else this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked","")}getMnemonic(){return this.mnemonic}applyStyle(){let J=this.element&&this.element.classList.contains("focused"),$=J&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,X=J&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,Y=J&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",Z=J&&this.menuStyle.selectionBorderColor?"-1px":"";if(this.item)this.item.style.color=$!==null&&$!==void 0?$:"",this.item.style.backgroundColor=X!==null&&X!==void 0?X:"",this.item.style.outline=Y,this.item.style.outlineOffset=Z;if(this.check)this.check.style.color=$!==null&&$!==void 0?$:""}};Ix=class Ix extends xx{constructor(J,$,X,Y,Z){super(J,J,Y,Z);this.submenuActions=$,this.parentData=X,this.submenuOptions=Y,this.mysubmenu=null,this.submenuDisposables=this._register(new $0),this.mouseOver=!1,this.expandDirection=Y&&Y.expandDirection!==void 0?Y.expandDirection:_M.Right,this.showScheduler=new H6(()=>{if(this.mouseOver)this.cleanupExistingSubmenu(!1),this.createSubmenu(!1)},250),this.hideScheduler=new H6(()=>{if(this.element&&(!e6(B5(),this.element)&&this.parentData.submenu===this.mysubmenu))this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0)},750)}render(J){if(super.render(J),!this.element)return;if(this.item)this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=j0(this.item,B0("span.submenu-indicator"+h0.asCSSSelector(F0.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true");this._register(r(this.element,U0.KEY_UP,($)=>{let X=new R1($);if(X.equals(17)||X.equals(3))a0.stop($,!0),this.createSubmenu(!0)})),this._register(r(this.element,U0.KEY_DOWN,($)=>{let X=new R1($);if(B5()===this.item){if(X.equals(17)||X.equals(3))a0.stop($,!0)}})),this._register(r(this.element,U0.MOUSE_OVER,($)=>{if(!this.mouseOver)this.mouseOver=!0,this.showScheduler.schedule()})),this._register(r(this.element,U0.MOUSE_LEAVE,($)=>{this.mouseOver=!1})),this._register(r(this.element,U0.FOCUS_OUT,($)=>{if(this.element&&!e6(B5(),this.element))this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{if(this.parentData.submenu===this.mysubmenu)this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0)}))}updateEnabled(){}onClick(J){a0.stop(J,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(J){if(this.parentData.submenu&&(J||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch($){}if(this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer)this.submenuDisposables.clear(),this.submenuContainer=void 0}}calculateSubmenuMenuLayout(J,$,X,Y){let Z={top:0,left:0};if(Z.left=h3(J.width,$.width,{position:Y===_M.Right?0:1,offset:X.left,size:X.width}),Z.left>=X.left&&Z.left<X.left+X.width){if(X.left+10+$.width<=J.width)Z.left=X.left+10;X.top+=10,X.height=0}if(Z.top=h3(J.height,$.height,{position:0,offset:X.top,size:0}),Z.top+$.height===X.top&&Z.top+X.height+$.height<=J.height)Z.top+=X.height;return Z}createSubmenu(J=!0){if(!this.element)return;if(!this.parentData.submenu){this.updateAriaExpanded("true"),this.submenuContainer=j0(this.element,B0("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");let $=O0(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),X=parseFloat($.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new r3(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Pj],this.submenuOptions,this.menuStyle);let Y=this.element.getBoundingClientRect(),Z={top:Y.top-X,left:Y.left,height:Y.height+2*X,width:Y.width},Q=this.submenuContainer.getBoundingClientRect(),G=O0(this.element),{top:q,left:U}=this.calculateSubmenuMenuLayout(new Y6(G.innerWidth,G.innerHeight),Y6.lift(Q),Z,this.expandDirection);this.submenuContainer.style.left=`${U-Q.left}px`,this.submenuContainer.style.top=`${q-Q.top}px`,this.submenuDisposables.add(r(this.submenuContainer,U0.KEY_UP,(z)=>{if(new R1(z).equals(15))a0.stop(z,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.submenuDisposables.add(r(this.submenuContainer,U0.KEY_DOWN,(z)=>{if(new R1(z).equals(15))a0.stop(z,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(J),this.mysubmenu=this.parentData.submenu}else this.parentData.submenu.focus(!1)}updateAriaExpanded(J){var $;if(this.item)($=this.item)===null||$===void 0||$.setAttribute("aria-expanded",J)}applyStyle(){super.applyStyle();let $=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;if(this.submenuIndicator)this.submenuIndicator.style.color=$!==null&&$!==void 0?$:""}dispose(){if(super.dispose(),this.hideScheduler.dispose(),this.mysubmenu)this.mysubmenu.dispose(),this.mysubmenu=null;if(this.submenuContainer)this.submenuContainer=void 0}};yx=class yx extends c3{constructor(J,$,X,Y){super(J,$,X);this.menuStyles=Y}render(J){if(super.render(J),this.label)this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:""}}});class bx{constructor(J,$,X,Y){this.contextViewService=J,this.telemetryService=$,this.notificationService=X,this.keybindingService=Y,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(J){this.options=J}showContextMenu(J){let $=J.getActions();if(!$.length)return;this.focusToReturn=B5();let X,Y=J.domForShadowRoot instanceof HTMLElement?J.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>J.getAnchor(),canRelayout:!1,anchorAlignment:J.anchorAlignment,anchorAxisAlignment:J.anchorAxisAlignment,render:(Z)=>{var Q;this.lastContainer=Z;let G=J.getMenuClassName?J.getMenuClassName():"";if(G)Z.className+=" "+G;if(this.options.blockMouse)this.block=Z.appendChild(B0(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(Q=this.blockDisposable)===null||Q===void 0||Q.dispose(),this.blockDisposable=r(this.block,U0.MOUSE_DOWN,(H)=>H.stopPropagation());let q=new $0,U=J.actionRunner||new n9;U.onWillRun((H)=>this.onActionRun(H,!J.skipTelemetry),this,q),U.onDidRun(this.onDidActionRun,this,q),X=new r3(Z,$,{actionViewItemProvider:J.getActionViewItem,context:J.getActionsContext?J.getActionsContext():null,actionRunner:U,getKeyBinding:J.getKeyBinding?J.getKeyBinding:(H)=>this.keybindingService.lookupKeybinding(H.id)},Rt),X.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,q),X.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,q);let z=O0(Z);return q.add(r(z,U0.BLUR,()=>this.contextViewService.hideContextView(!0))),q.add(r(z,U0.MOUSE_DOWN,(H)=>{if(H.defaultPrevented)return;let j=new T8(z,H),V=j.target;if(j.rightButton)return;while(V){if(V===Z)return;V=V.parentElement}this.contextViewService.hideContextView(!0)})),G7(q,X)},focus:()=>{X===null||X===void 0||X.focus(!!J.autoSelectFirstItem)},onHide:(Z)=>{var Q,G,q;if((Q=J.onHide)===null||Q===void 0||Q.call(J,!!Z),this.block)this.block.remove(),this.block=null;if((G=this.blockDisposable)===null||G===void 0||G.dispose(),this.blockDisposable=null,!!this.lastContainer&&(B5()===this.lastContainer||e6(B5(),this.lastContainer)))(q=this.focusToReturn)===null||q===void 0||q.focus();this.lastContainer=null}},Y,!!Y)}onActionRun(J,$){if($)this.telemetryService.publicLog2("workbenchActionExecuted",{id:J.action.id,from:"contextMenu"});this.contextViewService.hideContextView(!1)}onDidActionRun(J){if(J.error&&!GX(J.error))this.notificationService.error(J.error)}}var Et=w(()=>{T0();O4();kt();S7();O1();z0();mz()});var $30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},cz=function(J,$){return function(X,Y){$(X,Y,J)}},NM,Sx;var It=w(()=>{T0();S7();_0();z0();OM();FJ();t1();EJ();wZ();_Q();Et();IZ();NM=class extends m{get contextMenuHandler(){if(!this._contextMenuHandler)this._contextMenuHandler=new bx(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService);return this._contextMenuHandler}constructor($,X,Y,Z,Q,G){super();this.telemetryService=$,this.notificationService=X,this.contextViewService=Y,this.keybindingService=Z,this.menuService=Q,this.contextKeyService=G,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new x),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new x)}configure($){this.contextMenuHandler.configure($)}showContextMenu($){$=Sx.transform($,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...$,onHide:(X)=>{var Y;(Y=$.onHide)===null||Y===void 0||Y.call($,X),this._onDidHideContextMenu.fire()}}),KX.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};NM=$30([cz(0,f7),cz(1,K8),cz(2,S$),cz(3,$5),cz(4,BJ),cz(5,m0)],NM);(function(J){function $(Y){return Y&&Y.menuId instanceof y}function X(Y,Z,Q){if(!$(Y))return Y;let{menuId:G,menuActionOptions:q,contextKeyService:U}=Y;return{...Y,getActions:()=>{let z=[];if(G){let H=Z.createMenu(G,U!==null&&U!==void 0?U:Q);Nt(H,q,z),H.dispose()}if(!Y.getActions)return z;else return Z5.join(Y.getActions(),z)}}}J.transform=X})(Sx||(Sx={}))});var aW;var yt=w(()=>{(function(J){J[J.API=0]="API",J[J.USER=1]="USER"})(aW||(aW={}))});var hx=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},TM=function(J,$){return function(X,Y){$(X,Y,J)}},Cx=class{constructor($){this._commandService=$}async open($,X){if(!Ej($,G1.command))return!1;if(!(X===null||X===void 0?void 0:X.allowCommands))return!0;if(typeof $==="string")$=C0.parse($);if(Array.isArray(X.allowCommands)){if(!X.allowCommands.includes($.path))return!0}let Y=[];try{Y=kW(decodeURIComponent($.query))}catch(Z){try{Y=kW($.query)}catch(Q){}}if(!Array.isArray(Y))Y=[Y];return await this._commandService.executeCommand($.path,...Y),!0}},vx=class{constructor($){this._editorService=$}async open($,X){if(typeof $==="string")$=C0.parse($);let{selection:Y,uri:Z}=zn($);if($=Z,$.scheme===G1.file)$=aa($);return await this._editorService.openCodeEditor({resource:$,options:{selection:Y,source:(X===null||X===void 0?void 0:X.fromUserGesture)?aW.USER:aW.API,...X===null||X===void 0?void 0:X.editorOptions}},this._editorService.getFocusedCodeEditor(),X===null||X===void 0?void 0:X.openToSide),!0}},wM=class{constructor($,X){this._openers=new m6,this._validators=new m6,this._resolvers=new m6,this._resolvedUriTargets=new e5((Y)=>Y.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new m6,this._defaultExternalOpener={openExternal:async(Y)=>{if(xT(Y,G1.http,G1.https))VP(Y);else W1.location.href=Y;return!0}},this._openers.push({open:async(Y,Z)=>{if((Z===null||Z===void 0?void 0:Z.openExternal)||xT(Y,G1.mailto,G1.http,G1.https,G1.vsls))return await this._doOpenExternal(Y,Z),!0;return!1}}),this._openers.push(new Cx(X)),this._openers.push(new vx($))}registerOpener($){return{dispose:this._openers.unshift($)}}async open($,X){var Y;let Z=typeof $==="string"?C0.parse($):$,Q=(Y=this._resolvedUriTargets.get(Z))!==null&&Y!==void 0?Y:$;for(let G of this._validators)if(!await G.shouldOpen(Q,X))return!1;for(let G of this._openers)if(await G.open($,X))return!0;return!1}async resolveExternalUri($,X){for(let Y of this._resolvers)try{let Z=await Y.resolveExternalUri($,X);if(Z){if(!this._resolvedUriTargets.has(Z.resolved))this._resolvedUriTargets.set(Z.resolved,$);return Z}}catch(Z){}throw Error("Could not resolve external URI: "+$.toString())}async _doOpenExternal($,X){let Y=typeof $==="string"?C0.parse($):$,Z;try{Z=(await this.resolveExternalUri(Y,X)).resolved}catch(G){Z=Y}let Q;if(typeof $==="string"&&Y.toString()===Z.toString())Q=$;else Q=encodeURI(Z.toString(!0));if(X===null||X===void 0?void 0:X.allowContributedOpeners){let G=typeof(X===null||X===void 0?void 0:X.allowContributedOpeners)==="string"?X===null||X===void 0?void 0:X.allowContributedOpeners:void 0;for(let q of this._externalOpeners)if(await q.openExternal(Q,{sourceUri:Y,preferredOpenerId:G},j5.None))return!0}return this._defaultExternalOpener.openExternal(Q,{sourceUri:Y},j5.None)}dispose(){this._validators.clear()}};var xt=w(()=>{T0();N8();_8();D4();F$();iR();e9();cX();V5();i9();C7();yt();y3();Cx=hx([TM(0,y5)],Cx);vx=hx([TM(0,X6)],vx);wM=hx([TM(0,X6),TM(1,y5)],wM)});var U4;var lz=w(()=>{s0();U4=w0("editorWorkerService")});var C9,bt,f$;var dz=w(()=>{q2();c0();s0();(function(J){J[J.Hint=1]="Hint",J[J.Info=2]="Info",J[J.Warning=4]="Warning",J[J.Error=8]="Error"})(C9||(C9={}));(function(J){function $(G,q){return q-G}J.compare=$;let X=Object.create(null);X[J.Error]=F("sev.error","Error"),X[J.Warning]=F("sev.warning","Warning"),X[J.Info]=F("sev.info","Info");function Y(G){return X[G]||""}J.toString=Y;function Z(G){switch(G){case E6.Error:return J.Error;case E6.Warning:return J.Warning;case E6.Info:return J.Info;case E6.Ignore:return J.Hint}}J.fromSeverity=Z;function Q(G){switch(G){case J.Error:return E6.Error;case J.Warning:return E6.Warning;case J.Info:return E6.Info;case J.Hint:return E6.Ignore}}J.toSeverity=Q})(C9||(C9={}));(function(J){function X(Z){return Y(Z,!0)}J.makeKey=X;function Y(Z,Q){let G=[""];if(Z.source)G.push(Z.source.replace("¦","\\¦"));else G.push("");if(Z.code)if(typeof Z.code==="string")G.push(Z.code.replace("¦","\\¦"));else G.push(Z.code.value.replace("¦","\\¦"));else G.push("");if(Z.severity!==void 0&&Z.severity!==null)G.push(C9.toString(Z.severity));else G.push("");if(Z.message&&Q)G.push(Z.message.replace("¦","\\¦"));else G.push("");if(Z.startLineNumber!==void 0&&Z.startLineNumber!==null)G.push(Z.startLineNumber.toString());else G.push("");if(Z.startColumn!==void 0&&Z.startColumn!==null)G.push(Z.startColumn.toString());else G.push("");if(Z.endLineNumber!==void 0&&Z.endLineNumber!==null)G.push(Z.endLineNumber.toString());else G.push("");if(Z.endColumn!==void 0&&Z.endColumn!==null)G.push(Z.endColumn.toString());else G.push("");return G.push(""),G.join("¦")}J.makeKeyOptionalMessage=Y})(bt||(bt={}));f$=w0("markerService")});function St(J,$){let X=[],Y=[];for(let Z of J)if(!$.has(Z))X.push(Z);for(let Z of $)if(!J.has(Z))Y.push(Z);return{removed:X,added:Y}}function Ct(J,$){let X=new Set;for(let Y of $)if(J.has(Y))X.add(Y);return X}var X30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},vt=function(J,$){return function(X,Y){$(X,Y,J)}},LM,ht;var ft=w(()=>{dz();z0();O9();G5();E$();vY();i0();e9();_0();i8();F$();LM=class extends m{constructor($,X){super();this._markerService=X,this._onDidChangeMarker=this._register(new x),this._markerDecorations=new e5,$.getModels().forEach((Y)=>this._onModelAdded(Y)),this._register($.onModelAdded(this._onModelAdded,this)),this._register($.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(($)=>$.dispose()),this._markerDecorations.clear()}getMarker($,X){let Y=this._markerDecorations.get($);return Y?Y.getMarker(X)||null:null}_handleMarkerChange($){$.forEach((X)=>{let Y=this._markerDecorations.get(X);if(Y)this._updateDecorations(Y)})}_onModelAdded($){let X=new ht($);this._markerDecorations.set($.uri,X),this._updateDecorations(X)}_onModelRemoved($){var X;let Y=this._markerDecorations.get($.uri);if(Y)Y.dispose(),this._markerDecorations.delete($.uri);if($.uri.scheme===G1.inMemory||$.uri.scheme===G1.internal||$.uri.scheme===G1.vscode)(X=this._markerService)===null||X===void 0||X.read({resource:$.uri}).map((Z)=>Z.owner).forEach((Z)=>this._markerService.remove(Z,[$.uri]))}_updateDecorations($){let X=this._markerService.read({resource:$.model.uri,take:500});if($.update(X))this._onDidChangeMarker.fire($.model)}};LM=X30([vt(0,E5),vt(1,f$)],LM);ht=class ht extends m{constructor(J){super();this.model=J,this._map=new lw,this._register(N0(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(J){let{added:$,removed:X}=St(new Set(this._map.keys()),new Set(J));if($.length===0&&X.length===0)return!1;let Y=X.map((G)=>this._map.get(G)),Z=$.map((G)=>{return{range:this._createDecorationRange(this.model,G),options:this._createDecorationOption(G)}}),Q=this.model.deltaDecorations(Y,Z);for(let G of X)this._map.delete(G);for(let G=0;G<Q.length;G++)this._map.set($[G],Q[G]);return!0}getMarker(J){return this._map.getKey(J.id)}_createDecorationRange(J,$){let X=k.lift($);if($.severity===C9.Hint&&!this._hasMarkerTag($,1)&&!this._hasMarkerTag($,2))X=X.setEndPosition(X.startLineNumber,X.startColumn+2);if(X=J.validateRange(X),X.isEmpty()){let Y=J.getLineLastNonWhitespaceColumn(X.startLineNumber)||J.getLineMaxColumn(X.startLineNumber);if(Y===1||X.endColumn>=Y)return X;let Z=J.getWordAtPosition(X.getStartPosition());if(Z)X=new k(X.startLineNumber,Z.startColumn,X.endLineNumber,Z.endColumn)}else if($.endColumn===Number.MAX_VALUE&&$.startColumn===1&&X.startLineNumber===X.endLineNumber){let Y=J.getLineFirstNonWhitespaceColumn($.startLineNumber);if(Y<X.endColumn)X=new k(X.startLineNumber,Y,X.endLineNumber,X.endColumn),$.startColumn=Y}return X}_createDecorationOption(J){let $,X=void 0,Y,Z=void 0,Q;switch(J.severity){case C9.Hint:if(this._hasMarkerTag(J,2))$=void 0;else if(this._hasMarkerTag(J,1))$="squiggly-unnecessary";else $="squiggly-hint";Y=0;break;case C9.Info:$="squiggly-info",X=VZ(Id),Y=10,Q={color:VZ(Nl),position:_J.Inline};break;case C9.Warning:$="squiggly-warning",X=VZ(Ed),Y=20,Q={color:VZ(Tl),position:_J.Inline};break;case C9.Error:default:$="squiggly-error",X=VZ(kd),Y=30,Q={color:VZ(wl),position:_J.Inline};break}if(J.tags){if(J.tags.indexOf(1)!==-1)Z="squiggly-inline-unnecessary";if(J.tags.indexOf(2)!==-1)Z="squiggly-inline-deprecated"}return{description:"marker-decoration",stickiness:1,className:$,showIfCollapsed:!0,overviewRuler:{color:X,position:HU.Right},minimap:Q,zIndex:Y,inlineClassName:Z}}_hasMarkerTag(J,$){if(J.tags)return J.tags.indexOf($)>=0;return!1}}});function i3(J){return J.toString()}class gt{constructor(J,$,X){this.model=J,this._modelEventListeners=new $0,this.model=J,this._modelEventListeners.add(J.onWillDispose(()=>$(J))),this._modelEventListeners.add(J.onDidChangeLanguage((Y)=>X(J,Y)))}dispose(){this._modelEventListeners.dispose()}}class pt{constructor(J,$,X,Y,Z,Q,G,q){this.uri=J,this.initialUndoRedoSnapshot=$,this.time=X,this.sharesUndoRedoStack=Y,this.heapSize=Z,this.sha1=Q,this.versionId=G,this.alternativeVersionId=q}}class kM{canComputeSHA1(J){return J.getValueLength()<=kM.MAX_MODEL_SIZE}computeSHA1(J){let $=new xj,X=J.createSnapshot(),Y;while(Y=X.read())$.update(Y);return $.digest()}}var Y30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},rW=function(J,$){return function(X,Y){$(X,Y,J)}},sz,Z30,iW;var mt=w(()=>{_0();z0();L1();G2();oH();OJ();I4();CP();H7();jR();wQ();pE();e9();n7();j7();Z30=N6||t0?1:2;iW=sz=class extends m{constructor($,X,Y,Z,Q){super();this._configurationService=$,this._resourcePropertiesService=X,this._undoRedoService=Y,this._languageService=Z,this._languageConfigurationService=Q,this._onModelAdded=this._register(new x),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new x),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new x),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration((G)=>this._updateModelOptions(G))),this._updateModelOptions(void 0)}static _readModelOptions($,X){var Y;let Z=v5.tabSize;if($.editor&&typeof $.editor.tabSize<"u"){let W=parseInt($.editor.tabSize,10);if(!isNaN(W))Z=W;if(Z<1)Z=1}let Q="tabSize";if($.editor&&typeof $.editor.indentSize<"u"&&$.editor.indentSize!=="tabSize"){let W=parseInt($.editor.indentSize,10);if(!isNaN(W))Q=Math.max(W,1)}let G=v5.insertSpaces;if($.editor&&typeof $.editor.insertSpaces<"u")G=$.editor.insertSpaces==="false"?!1:Boolean($.editor.insertSpaces);let q=Z30,U=$.eol;if(U===`\r
`)q=2;else if(U===`
`)q=1;let z=v5.trimAutoWhitespace;if($.editor&&typeof $.editor.trimAutoWhitespace<"u")z=$.editor.trimAutoWhitespace==="false"?!1:Boolean($.editor.trimAutoWhitespace);let H=v5.detectIndentation;if($.editor&&typeof $.editor.detectIndentation<"u")H=$.editor.detectIndentation==="false"?!1:Boolean($.editor.detectIndentation);let j=v5.largeFileOptimizations;if($.editor&&typeof $.editor.largeFileOptimizations<"u")j=$.editor.largeFileOptimizations==="false"?!1:Boolean($.editor.largeFileOptimizations);let V=v5.bracketPairColorizationOptions;if(((Y=$.editor)===null||Y===void 0?void 0:Y.bracketPairColorization)&&typeof $.editor.bracketPairColorization==="object")V={enabled:!!$.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!$.editor.bracketPairColorization.independentColorPoolPerBracketType};return{isForSimpleWidget:X,tabSize:Z,indentSize:Q,insertSpaces:G,detectIndentation:H,defaultEOL:q,trimAutoWhitespace:z,largeFileOptimizations:j,bracketPairColorizationOptions:V}}_getEOL($,X){if($)return this._resourcePropertiesService.getEOL($,X);let Y=this._configurationService.getValue("files.eol",{overrideIdentifier:X});if(Y&&typeof Y==="string"&&Y!=="auto")return Y;return Z7===3||Z7===2?`
`:`\r
`}_shouldRestoreUndoStack(){let $=this._configurationService.getValue("files.restoreUndoStack");if(typeof $==="boolean")return $;return!0}getCreationOptions($,X,Y){let Z=typeof $==="string"?$:$.languageId,Q=this._modelCreationOptionsByLanguageAndResource[Z+X];if(!Q){let G=this._configurationService.getValue("editor",{overrideIdentifier:Z,resource:X}),q=this._getEOL(X,Z);Q=sz._readModelOptions({editor:G,eol:q},Y),this._modelCreationOptionsByLanguageAndResource[Z+X]=Q}return Q}_updateModelOptions($){let X=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let Y=Object.keys(this._models);for(let Z=0,Q=Y.length;Z<Q;Z++){let G=Y[Z],q=this._models[G],U=q.model.getLanguageId(),z=q.model.uri;if($&&!$.affectsConfiguration("editor",{overrideIdentifier:U,resource:z})&&!$.affectsConfiguration("files.eol",{overrideIdentifier:U,resource:z}))continue;let H=X[U+z],j=this.getCreationOptions(U,z,q.model.isForSimpleWidget);sz._setModelOptionsForModel(q.model,j,H)}}static _setModelOptionsForModel($,X,Y){if(Y&&Y.defaultEOL!==X.defaultEOL&&$.getLineCount()===1)$.setEOL(X.defaultEOL===1?0:1);if(Y&&Y.detectIndentation===X.detectIndentation&&Y.insertSpaces===X.insertSpaces&&Y.tabSize===X.tabSize&&Y.indentSize===X.indentSize&&Y.trimAutoWhitespace===X.trimAutoWhitespace&&i5(Y.bracketPairColorizationOptions,X.bracketPairColorizationOptions))return;if(X.detectIndentation)$.detectIndentation(X.insertSpaces,X.tabSize),$.updateOptions({trimAutoWhitespace:X.trimAutoWhitespace,bracketColorizationOptions:X.bracketPairColorizationOptions});else $.updateOptions({insertSpaces:X.insertSpaces,tabSize:X.tabSize,indentSize:X.indentSize,trimAutoWhitespace:X.trimAutoWhitespace,bracketColorizationOptions:X.bracketPairColorizationOptions})}_insertDisposedModel($){this._disposedModels.set(i3($.uri),$),this._disposedModelsHeapSize+=$.heapSize}_removeDisposedModel($){let X=this._disposedModels.get(i3($));if(X)this._disposedModelsHeapSize-=X.heapSize;return this._disposedModels.delete(i3($)),X}_ensureDisposedModelsHeapSize($){if(this._disposedModelsHeapSize>$){let X=[];this._disposedModels.forEach((Y)=>{if(!Y.sharesUndoRedoStack)X.push(Y)}),X.sort((Y,Z)=>Y.time-Z.time);while(X.length>0&&this._disposedModelsHeapSize>$){let Y=X.shift();if(this._removeDisposedModel(Y.uri),Y.initialUndoRedoSnapshot!==null)this._undoRedoService.restoreSnapshot(Y.initialUndoRedoSnapshot)}}}_createModelData($,X,Y,Z){let Q=this.getCreationOptions(X,Y,Z),G=new NZ($,X,Q,Y,this._undoRedoService,this._languageService,this._languageConfigurationService);if(Y&&this._disposedModels.has(i3(Y))){let z=this._removeDisposedModel(Y),H=this._undoRedoService.getElements(Y),j=this._getSHA1Computer(),V=j.canComputeSHA1(G)?j.computeSHA1(G)===z.sha1:!1;if(V||z.sharesUndoRedoStack){for(let W of H.past)if(lX(W)&&W.matchesResource(Y))W.setModel(G);for(let W of H.future)if(lX(W)&&W.matchesResource(Y))W.setModel(G);if(this._undoRedoService.setElementsValidFlag(Y,!0,(W)=>lX(W)&&W.matchesResource(Y)),V)G._overwriteVersionId(z.versionId),G._overwriteAlternativeVersionId(z.alternativeVersionId),G._overwriteInitialUndoRedoSnapshot(z.initialUndoRedoSnapshot)}else if(z.initialUndoRedoSnapshot!==null)this._undoRedoService.restoreSnapshot(z.initialUndoRedoSnapshot)}let q=i3(G.uri);if(this._models[q])throw Error("ModelService: Cannot add model because it already exists!");let U=new gt(G,(z)=>this._onWillDispose(z),(z,H)=>this._onDidChangeLanguage(z,H));return this._models[q]=U,U}createModel($,X,Y,Z=!1){let Q;if(X)Q=this._createModelData($,X,Y,Z);else Q=this._createModelData($,m5,Y,Z);return this._onModelAdded.fire(Q.model),Q.model}getModels(){let $=[],X=Object.keys(this._models);for(let Y=0,Z=X.length;Y<Z;Y++){let Q=X[Y];$.push(this._models[Q].model)}return $}getModel($){let X=i3($),Y=this._models[X];if(!Y)return null;return Y.model}_schemaShouldMaintainUndoRedoElements($){return $.scheme===G1.file||$.scheme===G1.vscodeRemote||$.scheme===G1.vscodeUserData||$.scheme===G1.vscodeNotebookCell||$.scheme==="fake-fs"}_onWillDispose($){let X=i3($.uri),Y=this._models[X],Z=this._undoRedoService.getUriComparisonKey($.uri)!==$.uri.toString(),Q=!1,G=0;if(Z||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements($.uri)){let z=this._undoRedoService.getElements($.uri);if(z.past.length>0||z.future.length>0){for(let H of z.past)if(lX(H)&&H.matchesResource($.uri))Q=!0,G+=H.heapSize($.uri),H.setModel($.uri);for(let H of z.future)if(lX(H)&&H.matchesResource($.uri))Q=!0,G+=H.heapSize($.uri),H.setModel($.uri)}}let q=sz.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,U=this._getSHA1Computer();if(!Q){if(!Z){let z=Y.model.getInitialUndoRedoSnapshot();if(z!==null)this._undoRedoService.restoreSnapshot(z)}}else if(!Z&&(G>q||!U.canComputeSHA1($))){let z=Y.model.getInitialUndoRedoSnapshot();if(z!==null)this._undoRedoService.restoreSnapshot(z)}else this._ensureDisposedModelsHeapSize(q-G),this._undoRedoService.setElementsValidFlag($.uri,!1,(z)=>lX(z)&&z.matchesResource($.uri)),this._insertDisposedModel(new pt($.uri,Y.model.getInitialUndoRedoSnapshot(),Date.now(),Z,G,U.computeSHA1($),$.getVersionId(),$.getAlternativeVersionId()));delete this._models[X],Y.dispose(),delete this._modelCreationOptionsByLanguageAndResource[$.getLanguageId()+$.uri],this._onModelRemoved.fire($)}_onDidChangeLanguage($,X){let Y=X.oldLanguage,Z=$.getLanguageId(),Q=this.getCreationOptions(Y,$.uri,$.isForSimpleWidget),G=this.getCreationOptions(Z,$.uri,$.isForSimpleWidget);sz._setModelOptionsForModel($,G,Q),this._onModelModeChanged.fire({model:$,oldLanguageId:Y})}_getSHA1Computer(){return new kM}};iW.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520;iW=sz=Y30([rW(0,g1),rW(1,SP),rW(2,Bz),rW(3,j6),rW(4,C6)],iW);kM.MAX_MODEL_SIZE=10485760});var ut=w(()=>{K0(".quick-input-widget{font-size:13px}.quick-input-widget .monaco-highlighted-label .highlight,.quick-input-widget .monaco-highlighted-label .highlight{color:#0066bf}.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight,.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight{color:#9dddff}.vs-dark .quick-input-widget .monaco-highlighted-label .highlight,.vs-dark .quick-input-widget .monaco-highlighted-label .highlight{color:#0097fb}.hc-black .quick-input-widget .monaco-highlighted-label .highlight,.hc-black .quick-input-widget .monaco-highlighted-label .highlight{color:#f38518}.hc-light .quick-input-widget .monaco-highlighted-label .highlight,.hc-light .quick-input-widget .monaco-highlighted-label .highlight{color:#0f4a85}.monaco-keybinding>.monaco-keybinding-key{color:#555;background-color:#ddd6;border:1px solid #ccc6;border-bottom-color:#bbb6;box-shadow:inset 0 -1px #bbb6}.hc-black .monaco-keybinding>.monaco-keybinding-key{box-shadow:none;color:#fff;background-color:#0000;border:1px solid #6fc3df}.hc-light .monaco-keybinding>.monaco-keybinding-key{box-shadow:none;color:#292929;background-color:#0000;border:1px solid #0f4a85}.vs-dark .monaco-keybinding>.monaco-keybinding-key{color:#ccc;background-color:#8080802b;border:1px solid #3339;border-bottom-color:#4449;box-shadow:inset 0 -1px #4449}")});class ct{get templateId(){return this.renderer.templateId}constructor(J,$){this.renderer=J,this.modelProvider=$}renderTemplate(J){return{data:this.renderer.renderTemplate(J),disposable:m.None}}renderElement(J,$,X,Y){var Z;if((Z=X.disposable)===null||Z===void 0||Z.dispose(),!X.data)return;let Q=this.modelProvider();if(Q.isResolved(J))return this.renderer.renderElement(Q.get(J),J,X.data,Y);let G=new L5,q=Q.resolve(J,G.token);X.disposable={dispose:()=>G.cancel()},this.renderer.renderPlaceholder(J,X.data),q.then((U)=>this.renderer.renderElement(U,J,X.data,Y))}disposeTemplate(J){if(J.disposable)J.disposable.dispose(),J.disposable=void 0;if(J.data)this.renderer.disposeTemplate(J.data),J.data=void 0}}class lt{constructor(J,$){this.modelProvider=J,this.accessibilityProvider=$}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(J){let $=this.modelProvider();if(!$.isResolved(J))return null;return this.accessibilityProvider.getAriaLabel($.get(J))}}function Q30(J,$){return{...$,accessibilityProvider:$.accessibilityProvider&&new lt(J,$.accessibilityProvider)}}class fx{constructor(J,$,X,Y,Z={}){let Q=()=>this.model,G=Y.map((q)=>new ct(q,Q));this.list=new A7(J,$,X,G,Q30(Q,Z))}updateOptions(J){this.list.updateOptions(J)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return q0.map(this.list.onMouseDblClick,({element:J,index:$,browserEvent:X})=>({element:J===void 0?void 0:this._model.get(J),index:$,browserEvent:X}))}get onPointer(){return q0.map(this.list.onPointer,({element:J,index:$,browserEvent:X})=>({element:J===void 0?void 0:this._model.get(J),index:$,browserEvent:X}))}get onDidChangeSelection(){return q0.map(this.list.onDidChangeSelection,({elements:J,indexes:$,browserEvent:X})=>({elements:J.map((Y)=>this._model.get(Y)),indexes:$,browserEvent:X}))}get model(){return this._model}set model(J){this._model=J,this.list.splice(0,this.list.length,r5(J.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((J)=>this.model.get(J))}style(J){this.list.style(J)}dispose(){this.list.dispose()}}var dt=w(()=>{V1();_8();_0();z0();jx();m3()});var st=w(()=>{K0(':root{--vscode-sash-size:4px;--vscode-sash-hover-size:4px}.monaco-sash{z-index:35;touch-action:none;position:absolute}.monaco-sash.disabled{pointer-events:none}.monaco-sash.mac.vertical{cursor:col-resize}.monaco-sash.vertical.minimum{cursor:e-resize}.monaco-sash.vertical.maximum{cursor:w-resize}.monaco-sash.mac.horizontal{cursor:row-resize}.monaco-sash.horizontal.minimum{cursor:s-resize}.monaco-sash.horizontal.maximum{cursor:n-resize}.monaco-sash.disabled{cursor:default!important;pointer-events:none!important}.monaco-sash.vertical{cursor:ew-resize;width:var(--vscode-sash-size);height:100%;top:0}.monaco-sash.horizontal{cursor:ns-resize;width:100%;height:var(--vscode-sash-size);left:0}.monaco-sash:not(.disabled)>.orthogonal-drag-handle{content:" ";height:calc(var(--vscode-sash-size)*2);width:calc(var(--vscode-sash-size)*2);z-index:100;cursor:all-scroll;display:block;position:absolute}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.start,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.end{cursor:nwse-resize}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.end,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.start{cursor:nesw-resize}.monaco-sash.vertical>.orthogonal-drag-handle.start{left:calc(var(--vscode-sash-size)*-.5);top:calc(var(--vscode-sash-size)*-1)}.monaco-sash.vertical>.orthogonal-drag-handle.end{left:calc(var(--vscode-sash-size)*-.5);bottom:calc(var(--vscode-sash-size)*-1)}.monaco-sash.horizontal>.orthogonal-drag-handle.start{top:calc(var(--vscode-sash-size)*-.5);left:calc(var(--vscode-sash-size)*-1)}.monaco-sash.horizontal>.orthogonal-drag-handle.end{top:calc(var(--vscode-sash-size)*-.5);right:calc(var(--vscode-sash-size)*-1)}.monaco-sash:before{content:"";pointer-events:none;background:0 0;width:100%;height:100%;position:absolute}.monaco-workbench:not(.reduce-motion) .monaco-sash:before{transition:background-color .1s ease-out}.monaco-sash.hover:before,.monaco-sash.active:before{background:var(--vscode-sash-hoverBorder)}.monaco-sash.vertical:before{width:var(--vscode-sash-hover-size);left:calc(50% - (var(--vscode-sash-hover-size)/2))}.monaco-sash.horizontal:before{height:var(--vscode-sash-hover-size);top:calc(50% - (var(--vscode-sash-hover-size)/2))}.pointer-events-disabled{pointer-events:none!important}.monaco-sash.debug{background:#0ff}.monaco-sash.debug.disabled{background:#0ff3}.monaco-sash.debug:not(.disabled)>.orthogonal-drag-handle{background:red}')});class EM{constructor(J){this.el=J,this.disposables=new $0}get onPointerMove(){return this.disposables.add(new H1(O0(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new H1(O0(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}class IM{get onPointerMove(){return this.disposables.add(new H1(this.el,f1.Change)).event}get onPointerUp(){return this.disposables.add(new H1(this.el,f1.End)).event}constructor(J){this.el=J,this.disposables=new $0}dispose(){this.disposables.dispose()}}class oW{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(J){this.factory=J}dispose(){}}var az=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},G30=!1,nW,q30=4,U30,z30=300,H30,at="pointer-events-disabled",C8;var yM=w(()=>{T0();k$();g4();e1();_0();z0();L1();st();(function(J){J.North="north",J.South="south",J.East="east",J.West="west"})(nW||(nW={}));U30=new x,H30=new x;az([F6],EM.prototype,"onPointerMove",null);az([F6],EM.prototype,"onPointerUp",null);az([F6],IM.prototype,"onPointerMove",null);az([F6],IM.prototype,"onPointerUp",null);az([F6],oW.prototype,"onPointerMove",null);az([F6],oW.prototype,"onPointerUp",null);C8=class C8 extends m{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(J){if(this._state===J)return;this.el.classList.toggle("disabled",J===0),this.el.classList.toggle("minimum",J===1),this.el.classList.toggle("maximum",J===2),this._state=J,this.onDidEnablementChange.fire(J)}set orthogonalStartSash(J){if(this._orthogonalStartSash===J)return;if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),J){let $=(X)=>{if(this.orthogonalStartDragHandleDisposables.clear(),X!==0)this._orthogonalStartDragHandle=j0(this.el,B0(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(N0(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new H1(this._orthogonalStartDragHandle,"mouseenter")).event(()=>C8.onMouseEnter(J),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new H1(this._orthogonalStartDragHandle,"mouseleave")).event(()=>C8.onMouseLeave(J),void 0,this.orthogonalStartDragHandleDisposables)};this.orthogonalStartSashDisposables.add(J.onDidEnablementChange.event($,this)),$(J.state)}this._orthogonalStartSash=J}set orthogonalEndSash(J){if(this._orthogonalEndSash===J)return;if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),J){let $=(X)=>{if(this.orthogonalEndDragHandleDisposables.clear(),X!==0)this._orthogonalEndDragHandle=j0(this.el,B0(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(N0(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new H1(this._orthogonalEndDragHandle,"mouseenter")).event(()=>C8.onMouseEnter(J),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new H1(this._orthogonalEndDragHandle,"mouseleave")).event(()=>C8.onMouseLeave(J),void 0,this.orthogonalEndDragHandleDisposables)};this.orthogonalEndSashDisposables.add(J.onDidEnablementChange.event($,this)),$(J.state)}this._orthogonalEndSash=J}constructor(J,$,X){super();if(this.hoverDelay=z30,this.hoverDelayer=this._register(new AJ(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new x),this._onDidStart=this._register(new x),this._onDidChange=this._register(new x),this._onDidReset=this._register(new x),this._onDidEnd=this._register(new x),this.orthogonalStartSashDisposables=this._register(new $0),this.orthogonalStartDragHandleDisposables=this._register(new $0),this.orthogonalEndSashDisposables=this._register(new $0),this.orthogonalEndDragHandleDisposables=this._register(new $0),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=j0(J,B0(".monaco-sash")),X.orthogonalEdge)this.el.classList.add(`orthogonal-edge-${X.orthogonalEdge}`);if(t0)this.el.classList.add("mac");let Y=this._register(new H1(this.el,"mousedown")).event;this._register(Y((H)=>this.onPointerStart(H,new EM(J)),this));let Z=this._register(new H1(this.el,"dblclick")).event;this._register(Z(this.onPointerDoublePress,this));let Q=this._register(new H1(this.el,"mouseenter")).event;this._register(Q(()=>C8.onMouseEnter(this)));let G=this._register(new H1(this.el,"mouseleave")).event;this._register(G(()=>C8.onMouseLeave(this))),this._register(b1.addTarget(this.el));let q=this._register(new H1(this.el,f1.Start)).event;this._register(q((H)=>this.onPointerStart(H,new IM(this.el)),this));let U=this._register(new H1(this.el,f1.Tap)).event,z=void 0;if(this._register(U((H)=>{if(z){clearTimeout(z),z=void 0,this.onPointerDoublePress(H);return}clearTimeout(z),z=setTimeout(()=>z=void 0,250)},this)),typeof X.size==="number")if(this.size=X.size,X.orientation===0)this.el.style.width=`${this.size}px`;else this.el.style.height=`${this.size}px`;else this.size=q30,this._register(U30.event((H)=>{this.size=H,this.layout()}));if(this._register(H30.event((H)=>this.hoverDelay=H)),this.layoutProvider=$,this.orthogonalStartSash=X.orthogonalStartSash,this.orthogonalEndSash=X.orthogonalEndSash,this.orientation=X.orientation||0,this.orientation===1)this.el.classList.add("horizontal"),this.el.classList.remove("vertical");else this.el.classList.remove("horizontal"),this.el.classList.add("vertical");this.el.classList.toggle("debug",G30),this.layout()}onPointerStart(J,$){a0.stop(J);let X=!1;if(!J.__orthogonalSashEvent){let W=this.getOrthogonalSash(J);if(W)X=!0,J.__orthogonalSashEvent=!0,W.onPointerStart(J,new oW($))}if(this.linkedSash&&!J.__linkedSashEvent)J.__linkedSashEvent=!0,this.linkedSash.onPointerStart(J,new oW($));if(!this.state)return;let Y=this.el.ownerDocument.getElementsByTagName("iframe");for(let W of Y)W.classList.add(at);let{pageX:Z,pageY:Q,altKey:G}=J,q={startX:Z,currentX:Z,startY:Q,currentY:Q,altKey:G};this.el.classList.add("active"),this._onDidStart.fire(q);let U=p5(this.el),z=()=>{let W="";if(X)W="all-scroll";else if(this.orientation===1)if(this.state===1)W="s-resize";else if(this.state===2)W="n-resize";else W=t0?"row-resize":"ns-resize";else if(this.state===1)W="e-resize";else if(this.state===2)W="w-resize";else W=t0?"col-resize":"ew-resize";U.textContent=`* { cursor: ${W} !important; }`},H=new $0;if(z(),!X)this.onDidEnablementChange.event(z,null,H);let j=(W)=>{a0.stop(W,!1);let B={startX:Z,currentX:W.pageX,startY:Q,currentY:W.pageY,altKey:G};this._onDidChange.fire(B)},V=(W)=>{a0.stop(W,!1),this.el.removeChild(U),this.el.classList.remove("active"),this._onDidEnd.fire(),H.dispose();for(let B of Y)B.classList.remove(at)};$.onPointerMove(j,null,H),$.onPointerUp(V,null,H),H.add($)}onPointerDoublePress(J){let $=this.getOrthogonalSash(J);if($)$._onDidReset.fire();if(this.linkedSash)this.linkedSash._onDidReset.fire();this._onDidReset.fire()}static onMouseEnter(J,$=!1){if(J.el.classList.contains("active"))J.hoverDelayer.cancel(),J.el.classList.add("hover");else J.hoverDelayer.trigger(()=>J.el.classList.add("hover"),J.hoverDelay).then(void 0,()=>{});if(!$&&J.linkedSash)C8.onMouseEnter(J.linkedSash,!0)}static onMouseLeave(J,$=!1){if(J.hoverDelayer.cancel(),J.el.classList.remove("hover"),!$&&J.linkedSash)C8.onMouseLeave(J.linkedSash,!0)}clearSashHoverState(){C8.onMouseLeave(this)}layout(){if(this.orientation===0){let J=this.layoutProvider;if(this.el.style.left=J.getVerticalSashLeft(this)-this.size/2+"px",J.getVerticalSashTop)this.el.style.top=J.getVerticalSashTop(this)+"px";if(J.getVerticalSashHeight)this.el.style.height=J.getVerticalSashHeight(this)+"px"}else{let J=this.layoutProvider;if(this.el.style.top=J.getHorizontalSashTop(this)-this.size/2+"px",J.getHorizontalSashLeft)this.el.style.left=J.getHorizontalSashLeft(this)+"px";if(J.getHorizontalSashWidth)this.el.style.width=J.getHorizontalSashWidth(this)+"px"}}getOrthogonalSash(J){var $;let X=($=J.initialTarget)!==null&&$!==void 0?$:J.target;if(!X||!(X instanceof HTMLElement))return;if(X.classList.contains("orthogonal-drag-handle"))return X.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash;return}dispose(){super.dispose(),this.el.remove()}}});var rt=w(()=>{K0('.monaco-split-view2{width:100%;height:100%;position:relative}.monaco-split-view2>.sash-container{pointer-events:none;width:100%;height:100%;position:absolute}.monaco-split-view2>.sash-container>.monaco-sash{pointer-events:initial}.monaco-split-view2>.monaco-scrollable-element{width:100%;height:100%}.monaco-split-view2>.monaco-scrollable-element>.split-view-container{white-space:nowrap;width:100%;height:100%;position:relative}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view{white-space:initial;position:absolute}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view:not(.visible){display:none}.monaco-split-view2.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view{width:100%}.monaco-split-view2.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view{height:100%}.monaco-split-view2.separator-border>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{content:" ";z-index:5;pointer-events:none;background-color:var(--separator-border);position:absolute;top:0;left:0}.monaco-split-view2.separator-border.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{width:1px;height:100%}.monaco-split-view2.separator-border.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{width:100%;height:1px}')});class gx{set size(J){this._size=J}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(J,$){var X,Y;if(J===this.visible)return;if(J)this.size=A8(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0;else this._cachedVisibleSize=typeof $==="number"?$:this.size,this.size=0;this.container.classList.toggle("visible",J);try{(Y=(X=this.view).setVisible)===null||Y===void 0||Y.call(X,J)}catch(Z){console.error("Splitview: Failed to set visible view"),console.error(Z)}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var J;return(J=this.view.proportionalLayout)!==null&&J!==void 0?J:!0}get snap(){return!!this.view.snap}set enabled(J){this.container.style.pointerEvents=J?"":"none"}constructor(J,$,X,Y){if(this.container=J,this.view=$,this.disposable=Y,this._cachedVisibleSize=void 0,typeof X==="number")this._size=X,this._cachedVisibleSize=void 0,J.classList.add("visible");else this._size=0,this._cachedVisibleSize=X.cachedVisibleSize}layout(J,$){this.layoutContainer(J);try{this.view.layout(this.size,J,$)}catch(X){console.error("Splitview: Failed to layout view"),console.error(X)}}dispose(){this.disposable.dispose()}}var j30,nt,ot,fZ,it,px;var tt=w(()=>{T0();k$();yM();L$();V1();T9();_0();z0();dU();rt();j30={separatorBorder:n.transparent};nt=class nt extends gx{layoutContainer(J){this.container.style.top=`${J}px`,this.container.style.height=`${this.size}px`}};ot=class ot extends gx{layoutContainer(J){this.container.style.left=`${J}px`,this.container.style.width=`${this.size}px`}};(function(J){J[J.Idle=0]="Idle",J[J.Busy=1]="Busy"})(fZ||(fZ={}));(function(J){J.Distribute={type:"distribute"};function $(Z){return{type:"split",index:Z}}J.Split=$;function X(Z){return{type:"auto",index:Z}}J.Auto=X;function Y(Z){return{type:"invisible",cachedVisibleSize:Z}}J.Invisible=Y})(it||(it={}));px=class px extends m{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(J){for(let $ of this.sashItems)$.sash.orthogonalStartSash=J;this._orthogonalStartSash=J}set orthogonalEndSash(J){for(let $ of this.sashItems)$.sash.orthogonalEndSash=J;this._orthogonalEndSash=J}set startSnappingEnabled(J){if(this._startSnappingEnabled===J)return;this._startSnappingEnabled=J,this.updateSashEnablement()}set endSnappingEnabled(J){if(this._endSnappingEnabled===J)return;this._endSnappingEnabled=J,this.updateSashEnablement()}constructor(J,$={}){var X,Y,Z,Q,G;super();this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=fZ.Idle,this._onDidSashChange=this._register(new x),this._onDidSashReset=this._register(new x),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(X=$.orientation)!==null&&X!==void 0?X:0,this.inverseAltBehavior=(Y=$.inverseAltBehavior)!==null&&Y!==void 0?Y:!1,this.proportionalLayout=(Z=$.proportionalLayout)!==null&&Z!==void 0?Z:!0,this.getSashOrthogonalSize=$.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),J.appendChild(this.el),this.sashContainer=j0(this.el,B0(".sash-container")),this.viewContainer=B0(".split-view-container"),this.scrollable=this._register(new kJ({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:(U)=>f5(O0(this.el),U)})),this.scrollableElement=this._register(new HZ(this.viewContainer,{vertical:this.orientation===0?(Q=$.scrollbarVisibility)!==null&&Q!==void 0?Q:1:2,horizontal:this.orientation===1?(G=$.scrollbarVisibility)!==null&&G!==void 0?G:1:2},this.scrollable));let q=this._register(new H1(this.viewContainer,"scroll")).event;if(this._register(q((U)=>{let z=this.scrollableElement.getScrollPosition(),H=Math.abs(this.viewContainer.scrollLeft-z.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,j=Math.abs(this.viewContainer.scrollTop-z.scrollTop)<=1?void 0:this.viewContainer.scrollTop;if(H!==void 0||j!==void 0)this.scrollableElement.setScrollPosition({scrollLeft:H,scrollTop:j})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((U)=>{if(U.scrollTopChanged)this.viewContainer.scrollTop=U.scrollTop;if(U.scrollLeftChanged)this.viewContainer.scrollLeft=U.scrollLeft})),j0(this.el,this.scrollableElement.getDomNode()),this.style($.styles||j30),$.descriptor)this.size=$.descriptor.size,$.descriptor.views.forEach((U,z)=>{let H=M8(U.visible)||U.visible?U.size:{type:"invisible",cachedVisibleSize:U.size},j=U.view;this.doAddView(j,H,z,!0)}),this._contentSize=this.viewItems.reduce((U,z)=>U+z.size,0),this.saveProportions()}style(J){if(J.separatorBorder.isTransparent())this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border");else this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",J.separatorBorder.toString())}addView(J,$,X=this.viewItems.length,Y){this.doAddView(J,$,X,Y)}layout(J,$){let X=Math.max(this.size,this._contentSize);if(this.size=J,this.layoutContext=$,!this.proportions){let Y=r5(this.viewItems.length),Z=Y.filter((G)=>this.viewItems[G].priority===1),Q=Y.filter((G)=>this.viewItems[G].priority===2);this.resize(this.viewItems.length-1,J-X,void 0,Z,Q)}else{let Y=0;for(let Z=0;Z<this.viewItems.length;Z++){let Q=this.viewItems[Z],G=this.proportions[Z];if(typeof G==="number")Y+=G;else J-=Q.size}for(let Z=0;Z<this.viewItems.length;Z++){let Q=this.viewItems[Z],G=this.proportions[Z];if(typeof G==="number"&&Y>0)Q.size=A8(Math.round(G*J/Y),Q.minimumSize,Q.maximumSize)}}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){if(this.proportionalLayout&&this._contentSize>0)this.proportions=this.viewItems.map((J)=>J.proportionalLayout&&J.visible?J.size/this._contentSize:void 0)}onSashStart({sash:J,start:$,alt:X}){for(let G of this.viewItems)G.enabled=!1;let Y=this.sashItems.findIndex((G)=>G.sash===J),Z=G7(r(this.el.ownerDocument.body,"keydown",(G)=>Q(this.sashDragState.current,G.altKey)),r(this.el.ownerDocument.body,"keyup",()=>Q(this.sashDragState.current,!1))),Q=(G,q)=>{let U=this.viewItems.map((W)=>W.size),z=Number.NEGATIVE_INFINITY,H=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior)q=!q;if(q)if(Y===this.sashItems.length-1){let B=this.viewItems[Y];z=(B.minimumSize-B.size)/2,H=(B.maximumSize-B.size)/2}else{let B=this.viewItems[Y+1];z=(B.size-B.maximumSize)/2,H=(B.size-B.minimumSize)/2}let j,V;if(!q){let W=r5(Y,-1),B=r5(Y+1,this.viewItems.length),K=W.reduce((T,S)=>T+(this.viewItems[S].minimumSize-U[S]),0),P=W.reduce((T,S)=>T+(this.viewItems[S].viewMaximumSize-U[S]),0),A=B.length===0?Number.POSITIVE_INFINITY:B.reduce((T,S)=>T+(U[S]-this.viewItems[S].minimumSize),0),D=B.length===0?Number.NEGATIVE_INFINITY:B.reduce((T,S)=>T+(U[S]-this.viewItems[S].viewMaximumSize),0),M=Math.max(K,D),R=Math.min(A,P),O=this.findFirstSnapIndex(W),N=this.findFirstSnapIndex(B);if(typeof O==="number"){let T=this.viewItems[O],S=Math.floor(T.viewMinimumSize/2);j={index:O,limitDelta:T.visible?M-S:M+S,size:T.size}}if(typeof N==="number"){let T=this.viewItems[N],S=Math.floor(T.viewMinimumSize/2);V={index:N,limitDelta:T.visible?R+S:R-S,size:T.size}}}this.sashDragState={start:G,current:G,index:Y,sizes:U,minDelta:z,maxDelta:H,alt:q,snapBefore:j,snapAfter:V,disposable:Z}};Q($,X)}onSashChange({current:J}){let{index:$,start:X,sizes:Y,alt:Z,minDelta:Q,maxDelta:G,snapBefore:q,snapAfter:U}=this.sashDragState;this.sashDragState.current=J;let z=J-X,H=this.resize($,z,Y,void 0,void 0,Q,G,q,U);if(Z){let j=$===this.sashItems.length-1,V=this.viewItems.map((D)=>D.size),W=j?$:$+1,B=this.viewItems[W],K=B.size-B.maximumSize,P=B.size-B.minimumSize,A=j?$-1:$+1;this.resize(A,-H,V,void 0,void 0,K,P)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(J){this._onDidSashChange.fire(J),this.sashDragState.disposable.dispose(),this.saveProportions();for(let $ of this.viewItems)$.enabled=!0}onViewChange(J,$){let X=this.viewItems.indexOf(J);if(X<0||X>=this.viewItems.length)return;if($=typeof $==="number"?$:J.size,$=A8($,J.minimumSize,J.maximumSize),this.inverseAltBehavior&&X>0)this.resize(X-1,Math.floor((J.size-$)/2)),this.distributeEmptySpace(),this.layoutViews();else J.size=$,this.relayout([X],void 0)}resizeView(J,$){if(J<0||J>=this.viewItems.length)return;if(this.state!==fZ.Idle)throw Error("Cant modify splitview");this.state=fZ.Busy;try{let X=r5(this.viewItems.length).filter((G)=>G!==J),Y=[...X.filter((G)=>this.viewItems[G].priority===1),J],Z=X.filter((G)=>this.viewItems[G].priority===2),Q=this.viewItems[J];$=Math.round($),$=A8($,Q.minimumSize,Math.min(Q.maximumSize,this.size)),Q.size=$,this.relayout(Y,Z)}finally{this.state=fZ.Idle}}distributeViewSizes(){let J=[],$=0;for(let G of this.viewItems)if(G.maximumSize-G.minimumSize>0)J.push(G),$+=G.size;let X=Math.floor($/J.length);for(let G of J)G.size=A8(X,G.minimumSize,G.maximumSize);let Y=r5(this.viewItems.length),Z=Y.filter((G)=>this.viewItems[G].priority===1),Q=Y.filter((G)=>this.viewItems[G].priority===2);this.relayout(Z,Q)}getViewSize(J){if(J<0||J>=this.viewItems.length)return-1;return this.viewItems[J].size}doAddView(J,$,X=this.viewItems.length,Y){if(this.state!==fZ.Idle)throw Error("Cant modify splitview");this.state=fZ.Busy;try{let Z=B0(".split-view-view");if(X===this.viewItems.length)this.viewContainer.appendChild(Z);else this.viewContainer.insertBefore(Z,this.viewContainer.children.item(X));let Q=J.onDidChange((j)=>this.onViewChange(z,j)),G=N0(()=>this.viewContainer.removeChild(Z)),q=G7(Q,G),U;if(typeof $==="number")U=$;else{if($.type==="auto")if(this.areViewsDistributed())$={type:"distribute"};else $={type:"split",index:$.index};if($.type==="split")U=this.getViewSize($.index)/2;else if($.type==="invisible")U={cachedVisibleSize:$.cachedVisibleSize};else U=J.minimumSize}let z=this.orientation===0?new nt(Z,J,U,q):new ot(Z,J,U,q);if(this.viewItems.splice(X,0,z),this.viewItems.length>1){let j={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},V=this.orientation===0?new C8(this.sashContainer,{getHorizontalSashTop:(T)=>this.getSashPosition(T),getHorizontalSashWidth:this.getSashOrthogonalSize},{...j,orientation:1}):new C8(this.sashContainer,{getVerticalSashLeft:(T)=>this.getSashPosition(T),getVerticalSashHeight:this.getSashOrthogonalSize},{...j,orientation:0}),W=this.orientation===0?(T)=>({sash:V,start:T.startY,current:T.currentY,alt:T.altKey}):(T)=>({sash:V,start:T.startX,current:T.currentX,alt:T.altKey}),K=q0.map(V.onDidStart,W)(this.onSashStart,this),A=q0.map(V.onDidChange,W)(this.onSashChange,this),M=q0.map(V.onDidEnd,()=>this.sashItems.findIndex((T)=>T.sash===V))(this.onSashEnd,this),R=V.onDidReset(()=>{let T=this.sashItems.findIndex((h)=>h.sash===V),S=r5(T,-1),v=r5(T+1,this.viewItems.length),l=this.findFirstSnapIndex(S),f=this.findFirstSnapIndex(v);if(typeof l==="number"&&!this.viewItems[l].visible)return;if(typeof f==="number"&&!this.viewItems[f].visible)return;this._onDidSashReset.fire(T)}),O=G7(K,A,M,R,V),N={sash:V,disposable:O};this.sashItems.splice(X-1,0,N)}Z.appendChild(J.element);let H;if(typeof $!=="number"&&$.type==="split")H=[$.index];if(!Y)this.relayout([X],H);if(!Y&&typeof $!=="number"&&$.type==="distribute")this.distributeViewSizes()}finally{this.state=fZ.Idle}}relayout(J,$){let X=this.viewItems.reduce((Y,Z)=>Y+Z.size,0);this.resize(this.viewItems.length-1,this.size-X,void 0,J,$),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(J,$,X=this.viewItems.map((z)=>z.size),Y,Z,Q=Number.NEGATIVE_INFINITY,G=Number.POSITIVE_INFINITY,q,U){if(J<0||J>=this.viewItems.length)return 0;let z=r5(J,-1),H=r5(J+1,this.viewItems.length);if(Z)for(let N of Z)qK(z,N),qK(H,N);if(Y)for(let N of Y)dH(z,N),dH(H,N);let j=z.map((N)=>this.viewItems[N]),V=z.map((N)=>X[N]),W=H.map((N)=>this.viewItems[N]),B=H.map((N)=>X[N]),K=z.reduce((N,T)=>N+(this.viewItems[T].minimumSize-X[T]),0),P=z.reduce((N,T)=>N+(this.viewItems[T].maximumSize-X[T]),0),A=H.length===0?Number.POSITIVE_INFINITY:H.reduce((N,T)=>N+(X[T]-this.viewItems[T].minimumSize),0),D=H.length===0?Number.NEGATIVE_INFINITY:H.reduce((N,T)=>N+(X[T]-this.viewItems[T].maximumSize),0),M=Math.max(K,D,Q),R=Math.min(A,P,G),O=!1;if(q){let N=this.viewItems[q.index],T=$>=q.limitDelta;O=T!==N.visible,N.setVisible(T,q.size)}if(!O&&U){let N=this.viewItems[U.index],T=$<U.limitDelta;O=T!==N.visible,N.setVisible(T,U.size)}if(O)return this.resize(J,$,X,Y,Z,Q,G);$=A8($,M,R);for(let N=0,T=$;N<j.length;N++){let S=j[N],v=A8(V[N]+T,S.minimumSize,S.maximumSize),l=v-V[N];T-=l,S.size=v}for(let N=0,T=$;N<W.length;N++){let S=W[N],v=A8(B[N]-T,S.minimumSize,S.maximumSize),l=v-B[N];T+=l,S.size=v}return $}distributeEmptySpace(J){let $=this.viewItems.reduce((G,q)=>G+q.size,0),X=this.size-$,Y=r5(this.viewItems.length-1,-1),Z=Y.filter((G)=>this.viewItems[G].priority===1),Q=Y.filter((G)=>this.viewItems[G].priority===2);for(let G of Q)qK(Y,G);for(let G of Z)dH(Y,G);if(typeof J==="number")dH(Y,J);for(let G=0;X!==0&&G<Y.length;G++){let q=this.viewItems[Y[G]],U=A8(q.size+X,q.minimumSize,q.maximumSize),z=U-q.size;X-=z,q.size=U}}layoutViews(){this._contentSize=this.viewItems.reduce(($,X)=>$+X.size,0);let J=0;for(let $ of this.viewItems)$.layout(J,this.layoutContext),J+=$.size;this.sashItems.forEach(($)=>$.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){if(this.orientation===0)this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize});else this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let J=!1,$=this.viewItems.map((q)=>J=q.size-q.minimumSize>0||J);J=!1;let X=this.viewItems.map((q)=>J=q.maximumSize-q.size>0||J),Y=[...this.viewItems].reverse();J=!1;let Z=Y.map((q)=>J=q.size-q.minimumSize>0||J).reverse();J=!1;let Q=Y.map((q)=>J=q.maximumSize-q.size>0||J).reverse(),G=0;for(let q=0;q<this.sashItems.length;q++){let{sash:U}=this.sashItems[q],z=this.viewItems[q];G+=z.size;let H=!($[q]&&Q[q+1]),j=!(X[q]&&Z[q+1]);if(H&&j){let V=r5(q,-1),W=r5(q+1,this.viewItems.length),B=this.findFirstSnapIndex(V),K=this.findFirstSnapIndex(W),P=typeof B==="number"&&!this.viewItems[B].visible,A=typeof K==="number"&&!this.viewItems[K].visible;if(P&&Z[q]&&(G>0||this.startSnappingEnabled))U.state=1;else if(A&&$[q]&&(G<this._contentSize||this.endSnappingEnabled))U.state=2;else U.state=0}else if(H&&!j)U.state=1;else if(!H&&j)U.state=2;else U.state=3}}getSashPosition(J){let $=0;for(let X=0;X<this.sashItems.length;X++)if($+=this.viewItems[X].size,this.sashItems[X].sash===J)return $;return 0}findFirstSnapIndex(J){for(let $ of J){let X=this.viewItems[$];if(!X.visible)continue;if(X.snap)return $}for(let $ of J){let X=this.viewItems[$];if(X.visible&&X.maximumSize-X.minimumSize>0)return;if(!X.visible&&X.snap)return $}return}areViewsDistributed(){let J=void 0,$=void 0;for(let X of this.viewItems)if(J=J===void 0?X.size:Math.min(J,X.size),$=$===void 0?X.size:Math.max($,X.size),$-J>2)return!1;return!0}dispose(){var J;(J=this.sashDragState)===null||J===void 0||J.disposable.dispose(),h1(this.viewItems),this.viewItems=[],this.sashItems.forEach(($)=>$.disposable.dispose()),this.sashItems=[],super.dispose()}}});var et=w(()=>{K0('.monaco-table{white-space:nowrap;flex-direction:column;width:100%;height:100%;display:flex;position:relative;overflow:hidden}.monaco-table>.monaco-split-view2{border-bottom:1px solid #0000}.monaco-table>.monaco-list{flex:1}.monaco-table-tr{height:100%;display:flex}.monaco-table-th{text-overflow:ellipsis;width:100%;height:100%;font-weight:700;overflow:hidden}.monaco-table-th,.monaco-table-td{box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;flex-shrink:0;overflow:hidden}.monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{content:"";left:calc(var(--vscode-sash-size)/2);border-left:1px solid #0000;width:0;position:absolute}.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2,.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{transition:border-color .2s ease-out}')});class tW{constructor(J,$,X){this.columns=J,this.getColumnSize=X,this.templateId=tW.TemplateId,this.renderedTemplates=new Set;let Y=new Map($.map((Z)=>[Z.templateId,Z]));this.renderers=[];for(let Z of J){let Q=Y.get(Z.templateId);if(!Q)throw Error(`Table cell renderer for template id ${Z.templateId} not found.`);this.renderers.push(Q)}}renderTemplate(J){let $=j0(J,B0(".monaco-table-tr")),X=[],Y=[];for(let Q=0;Q<this.columns.length;Q++){let G=this.renderers[Q],q=j0($,B0(".monaco-table-td",{"data-col-index":Q}));q.style.width=`${this.getColumnSize(Q)}px`,X.push(q),Y.push(G.renderTemplate(q))}let Z={container:J,cellContainers:X,cellTemplateData:Y};return this.renderedTemplates.add(Z),Z}renderElement(J,$,X,Y){for(let Z=0;Z<this.columns.length;Z++){let G=this.columns[Z].project(J);this.renderers[Z].renderElement(G,$,X.cellTemplateData[Z],Y)}}disposeElement(J,$,X,Y){for(let Z=0;Z<this.columns.length;Z++){let Q=this.renderers[Z];if(Q.disposeElement){let q=this.columns[Z].project(J);Q.disposeElement(q,$,X.cellTemplateData[Z],Y)}}}disposeTemplate(J){for(let $=0;$<this.columns.length;$++)this.renderers[$].disposeTemplate(J.cellTemplateData[$]);t5(J.container),this.renderedTemplates.delete(J)}layoutColumn(J,$){for(let{cellContainers:X}of this.renderedTemplates)X[J].style.width=`${$}px`}}function V30(J){return{getHeight($){return J.getHeight($)},getTemplateId(){return tW.TemplateId}}}class Je{get minimumSize(){var J;return(J=this.column.minimumWidth)!==null&&J!==void 0?J:120}get maximumSize(){var J;return(J=this.column.maximumWidth)!==null&&J!==void 0?J:Number.POSITIVE_INFINITY}get onDidChange(){var J;return(J=this.column.onDidChangeWidthConstraints)!==null&&J!==void 0?J:q0.None}constructor(J,$){this.column=J,this.index=$,this._onDidLayout=new x,this.onDidLayout=this._onDidLayout.event,this.element=B0(".monaco-table-th",{"data-col-index":$,title:J.tooltip},J.label)}layout(J){this._onDidLayout.fire([this.index,J])}}class eW{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(J){this.list.scrollTop=J}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(J,$,X,Y,Z,Q){this.virtualDelegate=X,this.domId=`table_id_${++eW.InstanceCount}`,this.disposables=new $0,this.cachedWidth=0,this.cachedHeight=0,this.domNode=j0($,B0(`.monaco-table.${this.domId}`));let G=Y.map((z,H)=>new Je(z,H)),q={size:G.reduce((z,H)=>z+H.column.weight,0),views:G.map((z)=>({size:z.column.weight,view:z}))};this.splitview=this.disposables.add(new px(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:q})),this.splitview.el.style.height=`${X.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${X.headerRowHeight}px`;let U=new tW(Y,Z,(z)=>this.splitview.getViewSize(z));this.list=this.disposables.add(new A7(J,this.domNode,V30(X),[U],Q)),q0.any(...G.map((z)=>z.onDidLayout))(([z,H])=>U.layoutColumn(z,H),null,this.disposables),this.splitview.onDidSashReset((z)=>{let H=Y.reduce((V,W)=>V+W.weight,0),j=Y[z].weight/H*this.cachedWidth;this.splitview.resizeView(z,j)},null,this.disposables),this.styleElement=p5(this.domNode),this.style(to)}updateOptions(J){this.list.updateOptions(J)}splice(J,$,X=[]){this.list.splice(J,$,X)}getHTMLElement(){return this.domNode}style(J){let $=[];$.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=$.join(`
`),this.list.style(J)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}var $e=w(()=>{T0();m3();tt();_0();z0();et();tW.TemplateId="row";eW.InstanceCount=0});var Xe=w(()=>{K0(".monaco-custom-toggle{float:left;cursor:pointer;box-sizing:border-box;-webkit-user-select:none;user-select:none;border:1px solid #0000;border-radius:3px;width:20px;height:20px;margin-left:2px;padding:1px;overflow:hidden}.monaco-custom-toggle:hover{background-color:var(--vscode-inputOption-hoverBackground)}.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{border:1px dashed var(--vscode-focusBorder)}.hc-black .monaco-custom-toggle,.hc-light .monaco-custom-toggle,.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{background:0 0}.monaco-custom-toggle.monaco-checkbox{opacity:1;border:1px solid #0000;border-radius:3px;width:18px;height:18px;margin-left:0;margin-right:9px;padding:0;background-size:16px!important}.monaco-action-bar .checkbox-action-item{align-items:center;display:flex}.monaco-action-bar .checkbox-action-item>.monaco-custom-toggle.monaco-checkbox{margin-right:4px}.monaco-action-bar .checkbox-action-item>.checkbox-label{font-size:12px}.monaco-custom-toggle.monaco-checkbox:not(.checked):before{visibility:hidden}")});var XY;var JB=w(()=>{SX();I5();_0();Xe();XY=class XY extends E8{constructor(J){super();this._onChange=this._register(new x),this.onChange=this._onChange.event,this._onKeyDown=this._register(new x),this.onKeyDown=this._onKeyDown.event,this._opts=J,this._checked=this._opts.isChecked;let $=["monaco-custom-toggle"];if(this._opts.icon)this._icon=this._opts.icon,$.push(...h0.asClassNameArray(this._icon));if(this._opts.actionClassName)$.push(...this._opts.actionClassName.split(" "));if(this._checked)$.push("checked");if(this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...$),!this._opts.notFocusable)this.domNode.tabIndex=0;this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(X)=>{if(this.enabled)this.checked=!this._checked,this._onChange.fire(!1),X.preventDefault()}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,(X)=>{if(X.keyCode===10||X.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),X.preventDefault(),X.stopPropagation();return}this._onKeyDown.fire(X)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(J){this._checked=J,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){if(this.domNode)this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||""}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}});var W30,B30,F30,mx,ux,cx;var Ye=w(()=>{JB();k5();c0();W30=F("caseDescription","Match Case"),B30=F("wordsDescription","Match Whole Word"),F30=F("regexDescription","Use Regular Expression");mx=class mx extends XY{constructor(J){super({icon:F0.caseSensitive,title:W30+J.appendTitle,isChecked:J.isChecked,inputActiveOptionBorder:J.inputActiveOptionBorder,inputActiveOptionForeground:J.inputActiveOptionForeground,inputActiveOptionBackground:J.inputActiveOptionBackground})}};ux=class ux extends XY{constructor(J){super({icon:F0.wholeWord,title:B30+J.appendTitle,isChecked:J.isChecked,inputActiveOptionBorder:J.inputActiveOptionBorder,inputActiveOptionForeground:J.inputActiveOptionForeground,inputActiveOptionBackground:J.inputActiveOptionBackground})}};cx=class cx extends XY{constructor(J){super({icon:F0.regex,title:F30+J.appendTitle,isChecked:J.isChecked,inputActiveOptionBorder:J.inputActiveOptionBorder,inputActiveOptionForeground:J.inputActiveOptionForeground,inputActiveOptionBackground:J.inputActiveOptionBackground})}}});class lx{constructor(J,$=0,X=J.length,Y=$-1){this.items=J,this.start=$,this.end=X,this.index=Y}current(){if(this.index===this.start-1||this.index===this.end)return null;return this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class dx{constructor(J=[],$=10){this._initialize(J),this._limit=$,this._onChange()}getHistory(){return this._elements}add(J){this._history.delete(J),this._history.add(J),this._onChange()}next(){return this._navigator.next()}previous(){if(this._currentPosition()!==0)return this._navigator.previous();return null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(J){return this._history.has(J)}_onChange(){this._reduceToLimit();let J=this._elements;this._navigator=new lx(J,0,J.length,J.length)}_reduceToLimit(){let J=this._elements;if(J.length>this._limit)this._initialize(J.slice(J.length-this._limit))}_currentPosition(){let J=this._navigator.current();if(!J)return-1;return this._elements.indexOf(J)}_initialize(J){this._history=new Set;for(let $ of J)this._history.add($)}get _elements(){let J=[];return this._history.forEach(($)=>J.push($)),J}}var Ze=()=>{};var Qe=w(()=>{K0(".monaco-inputbox{box-sizing:border-box;font-size:inherit;border-radius:2px;padding:0;display:block;position:relative}.monaco-inputbox>.ibwrapper>.input,.monaco-inputbox>.ibwrapper>.mirror{padding:4px 6px}.monaco-inputbox>.ibwrapper{width:100%;height:100%;position:relative}.monaco-inputbox>.ibwrapper>.input{box-sizing:border-box;width:100%;height:100%;line-height:inherit;font-family:inherit;font-size:inherit;resize:none;color:inherit;border:none;display:inline-block}.monaco-inputbox>.ibwrapper>input{text-overflow:ellipsis}.monaco-inputbox>.ibwrapper>textarea.input{scrollbar-width:none;outline:none;display:block}.monaco-inputbox>.ibwrapper>textarea.input::-webkit-scrollbar{display:none}.monaco-inputbox>.ibwrapper>textarea.input.empty{white-space:nowrap}.monaco-inputbox>.ibwrapper>.mirror{box-sizing:border-box;white-space:pre-wrap;visibility:hidden;word-wrap:break-word;width:100%;display:inline-block;position:absolute;top:0;left:0}.monaco-inputbox-container{text-align:right}.monaco-inputbox-container .monaco-inputbox-message{text-align:left;box-sizing:border-box;word-wrap:break-word;width:100%;margin-top:-1px;padding:.4em;font-size:12px;line-height:17px;display:inline-block;overflow:hidden}.monaco-inputbox .monaco-action-bar{position:absolute;top:4px;right:2px}.monaco-inputbox .monaco-action-bar .action-item{margin-left:2px}.monaco-inputbox .monaco-action-bar .action-item .codicon{background-repeat:no-repeat;width:16px;height:16px}")});var $B,Ge,XB;var xM=w(()=>{T0();k$();Ny();$Y();gQ();L$();SX();_0();Ze();n7();Qe();c0();$B=B0;Ge=class Ge extends E8{constructor(J,$,X){var Y;super();if(this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new x),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new x),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=$,this.options=X,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(Y=this.options.tooltip)!==null&&Y!==void 0?Y:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions)this.validation=this.options.validationOptions.validation;this.element=j0(J,$B(".monaco-inputbox.idle"));let Z=this.options.flexibleHeight?"textarea":"input",Q=j0(this.element,$B(".ibwrapper"));if(this.input=j0(Q,$B(Z+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){if(this.maxHeight=typeof this.options.flexibleMaxHeight==="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=j0(Q,$B("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new sL(this.element,{vertical:1}),this.options.flexibleWidth)this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial";j0(J,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((U)=>this.input.scrollTop=U.scrollTop));let G=this._register(new H1(J.ownerDocument,"selectionchange")),q=q0.filter(G.event,()=>{let U=J.ownerDocument.getSelection();return(U===null||U===void 0?void 0:U.anchorNode)===Q});this._register(q(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");if(this.ariaLabel)this.input.setAttribute("aria-label",this.ariaLabel);if(this.placeholder&&!this.options.showPlaceholderOnFocus)this.setPlaceHolder(this.placeholder);if(this.tooltip)this.setTooltip(this.tooltip);if(this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions)this.actionbar=this._register(new S8(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1});this.applyStyles()}onBlur(){if(this._hideMessage(),this.options.showPlaceholderOnFocus)this.input.setAttribute("placeholder","")}onFocus(){if(this._showMessage(),this.options.showPlaceholderOnFocus)this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(J){this.placeholder=J,this.input.setAttribute("placeholder",J)}setTooltip(J){this.tooltip=J,this.input.title=J}get inputElement(){return this.input}get value(){return this.input.value}set value(J){if(this.input.value!==J)this.input.value=J,this.onValueChange()}get height(){return typeof this.cachedHeight==="number"?this.cachedHeight:vj(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return fG(this.input)}select(J=null){if(this.input.select(),J){if(this.input.setSelectionRange(J.start,J.end),J.end===this.input.value.length)this.input.scrollLeft=this.input.scrollWidth}}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(J){if(this.input.style.width=`calc(100% - ${J}px)`,this.mirror)this.mirror.style.paddingRight=J+"px"}updateScrollDimensions(){if(typeof this.cachedContentHeight!=="number"||typeof this.cachedHeight!=="number"||!this.scrollableElement)return;let J=this.cachedContentHeight,$=this.cachedHeight,X=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:J,height:$}),this.scrollableElement.setScrollPosition({scrollTop:X})}showMessage(J,$){if(this.state==="open"&&i5(this.message,J))return;this.message=J,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(J.type));let X=this.stylesForType(this.message.type);if(this.element.style.border=`1px solid ${N4(X.border,"transparent")}`,this.message.content&&(this.hasFocus()||$))this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let J=null;if(this.validation){if(J=this.validation(this.value),J)this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(J);else if(this.inputElement.hasAttribute("aria-invalid"))this.inputElement.removeAttribute("aria-invalid"),this.hideMessage()}return J===null||J===void 0?void 0:J.type}stylesForType(J){let $=this.options.inputBoxStyles;switch(J){case 1:return{border:$.inputValidationInfoBorder,background:$.inputValidationInfoBackground,foreground:$.inputValidationInfoForeground};case 2:return{border:$.inputValidationWarningBorder,background:$.inputValidationWarningBackground,foreground:$.inputValidationWarningForeground};default:return{border:$.inputValidationErrorBorder,background:$.inputValidationErrorBackground,foreground:$.inputValidationErrorForeground}}}classForType(J){switch(J){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let J,$=()=>J.style.width=YU(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:(Y)=>{var Z,Q;if(!this.message)return null;J=j0(Y,$B(".monaco-inputbox-container")),$();let G={inline:!0,className:"monaco-inputbox-message"},q=this.message.formatContent?jn(this.message.content,G):Hn(this.message.content,G);q.classList.add(this.classForType(this.message.type));let U=this.stylesForType(this.message.type);return q.style.backgroundColor=(Z=U.background)!==null&&Z!==void 0?Z:"",q.style.color=(Q=U.foreground)!==null&&Q!==void 0?Q:"",q.style.border=U.border?`1px solid ${U.border}`:"",j0(J,q),null},onHide:()=>{this.state="closed"},layout:$});let X;if(this.message.type===3)X=F("alertErrorMessage","Error: {0}",this.message.content);else if(this.message.type===2)X=F("alertWarningMessage","Warning: {0}",this.message.content);else X=F("alertInfoMessage","Info: {0}",this.message.content);NU(X),this.state="open"}_hideMessage(){if(!this.contextViewProvider)return;if(this.state==="open")this.contextViewProvider.hideContextView();this.state="idle"}onValueChange(){if(this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider)this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let J=this.value,X=J.charCodeAt(J.length-1)===10?" ":"";if((J+X).replace(/\u000c/g,""))this.mirror.textContent=J+X;else this.mirror.innerText=" ";this.layout()}applyStyles(){var J,$,X;let Y=this.options.inputBoxStyles,Z=(J=Y.inputBackground)!==null&&J!==void 0?J:"",Q=($=Y.inputForeground)!==null&&$!==void 0?$:"",G=(X=Y.inputBorder)!==null&&X!==void 0?X:"";this.element.style.backgroundColor=Z,this.element.style.color=Q,this.input.style.backgroundColor="inherit",this.input.style.color=Q,this.element.style.border=`1px solid ${N4(G,"transparent")}`}layout(){if(!this.mirror)return;let J=this.cachedContentHeight;if(this.cachedContentHeight=vj(this.mirror),J!==this.cachedContentHeight)this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight)}insertAtCursor(J){let $=this.inputElement,X=$.selectionStart,Y=$.selectionEnd,Z=$.value;if(X!==null&&Y!==null)this.value=Z.substr(0,X)+J+Z.substr(Y),$.setSelectionRange(X+1,X+1),this.layout()}dispose(){var J;this._hideMessage(),this.message=null,(J=this.actionbar)===null||J===void 0||J.dispose(),super.dispose()}};XB=class XB extends Ge{constructor(J,$,X){let Y=F({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),Z=F({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");super(J,$,X);this._onDidFocus=this._register(new x),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new x),this.onDidBlur=this._onDidBlur.event,this.history=new dx(X.history,100);let Q=()=>{if(X.showHistoryHint&&X.showHistoryHint()&&!this.placeholder.endsWith(Y)&&!this.placeholder.endsWith(Z)&&this.history.getHistory().length){let G=this.placeholder.endsWith(")")?Y:Z,q=this.placeholder+G;if(X.showPlaceholderOnFocus&&!fG(this.input))this.placeholder=q;else this.setPlaceHolder(q)}};this.observer=new MutationObserver((G,q)=>{G.forEach((U)=>{if(!U.target.textContent)Q()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>Q()),this.onblur(this.input,()=>{let G=(q)=>{if(!this.placeholder.endsWith(q))return!1;else{let U=this.placeholder.slice(0,this.placeholder.length-q.length);if(X.showPlaceholderOnFocus)this.placeholder=U;else this.setPlaceHolder(U);return!0}};if(!G(Z))G(Y)})}dispose(){if(super.dispose(),this.observer)this.observer.disconnect(),this.observer=void 0}addToHistory(J){if(this.value&&(J||this.value!==this.getCurrentValue()))this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){if(!this.history.has(this.value))this.addToHistory();let J=this.getNextValue();if(J)J=J===this.value?this.getNextValue():J;this.value=J!==null&&J!==void 0?J:"",_X(this.value?this.value:F("clearedInput","Cleared Input"))}showPreviousValue(){if(!this.history.has(this.value))this.addToHistory();let J=this.getPreviousValue();if(J)J=J===this.value?this.getPreviousValue():J;if(J)this.value=J,_X(this.value)}setPlaceHolder(J){super.setPlaceHolder(J),this.setTooltip(J)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let J=this.history.current();if(!J)J=this.history.last(),this.history.next();return J}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}});var sx=w(()=>{K0(".monaco-findInput{position:relative}.monaco-findInput .monaco-inputbox{width:100%;font-size:13px}.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.vs .monaco-findInput.disabled{background-color:#e1e1e1}.vs-dark .monaco-findInput.disabled{background-color:#333}.monaco-findInput.highlight-0 .controls,.hc-light .monaco-findInput.highlight-0 .controls{animation:.1s linear monaco-findInput-highlight-0}.monaco-findInput.highlight-1 .controls,.hc-light .monaco-findInput.highlight-1 .controls{animation:.1s linear monaco-findInput-highlight-1}.hc-black .monaco-findInput.highlight-0 .controls,.vs-dark .monaco-findInput.highlight-0 .controls{animation:.1s linear monaco-findInput-highlight-dark-0}.hc-black .monaco-findInput.highlight-1 .controls,.vs-dark .monaco-findInput.highlight-1 .controls{animation:.1s linear monaco-findInput-highlight-dark-1}@keyframes monaco-findInput-highlight-0{0%{background:#fdff00cc}to{background:0 0}}@keyframes monaco-findInput-highlight-1{0%{background:#fdff00cc}99%{background:0 0}}@keyframes monaco-findInput-highlight-dark-0{0%{background:#ffffff70}to{background:0 0}}@keyframes monaco-findInput-highlight-dark-1{0%{background:#ffffff70}99%{background:0 0}}")});var K30,rz;var bM=w(()=>{T0();Ye();xM();SX();_0();sx();c0();z0();K30=F("defaultLabel","input");rz=class rz extends E8{constructor(J,$,X){super();this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new q8),this.additionalToggles=[],this._onDidOptionChange=this._register(new x),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new x),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new x),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new x),this._onKeyUp=this._register(new x),this._onCaseSensitiveKeyDown=this._register(new x),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new x),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=X.placeholder||"",this.validation=X.validation,this.label=X.label||K30,this.showCommonFindToggles=!!X.showCommonFindToggles;let Y=X.appendCaseSensitiveLabel||"",Z=X.appendWholeWordsLabel||"",Q=X.appendRegexLabel||"",G=X.history||[],q=!!X.flexibleHeight,U=!!X.flexibleWidth,z=X.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new XB(this.domNode,$,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:G,showHistoryHint:X.showHistoryHint,flexibleHeight:q,flexibleWidth:U,flexibleMaxHeight:z,inputBoxStyles:X.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new cx({appendTitle:Q,isChecked:!1,...X.toggleStyles})),this._register(this.regex.onChange((j)=>{if(this._onDidOptionChange.fire(j),!j&&this.fixFocusOnOptionClickEnabled)this.inputBox.focus();this.validate()})),this._register(this.regex.onKeyDown((j)=>{this._onRegexKeyDown.fire(j)})),this.wholeWords=this._register(new ux({appendTitle:Z,isChecked:!1,...X.toggleStyles})),this._register(this.wholeWords.onChange((j)=>{if(this._onDidOptionChange.fire(j),!j&&this.fixFocusOnOptionClickEnabled)this.inputBox.focus();this.validate()})),this.caseSensitive=this._register(new mx({appendTitle:Y,isChecked:!1,...X.toggleStyles})),this._register(this.caseSensitive.onChange((j)=>{if(this._onDidOptionChange.fire(j),!j&&this.fixFocusOnOptionClickEnabled)this.inputBox.focus();this.validate()})),this._register(this.caseSensitive.onKeyDown((j)=>{this._onCaseSensitiveKeyDown.fire(j)}));let H=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(j)=>{if(j.equals(15)||j.equals(17)||j.equals(9)){let V=H.indexOf(this.domNode.ownerDocument.activeElement);if(V>=0){let W=-1;if(j.equals(17))W=(V+1)%H.length;else if(j.equals(15))if(V===0)W=H.length-1;else W=V-1;if(j.equals(9))H[V].blur(),this.inputBox.focus();else if(W>=0)H[W].focus();a0.stop(j,!0)}}})}if(this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive)this.controls.append(this.caseSensitive.domNode);if(this.wholeWords)this.controls.appendChild(this.wholeWords.domNode);if(this.regex)this.controls.appendChild(this.regex.domNode);if(this.setAdditionalToggles(X===null||X===void 0?void 0:X.additionalToggles),this.controls)this.domNode.appendChild(this.controls);J===null||J===void 0||J.appendChild(this.domNode),this._register(r(this.inputBox.inputElement,"compositionstart",(H)=>{this.imeSessionInProgress=!0})),this._register(r(this.inputBox.inputElement,"compositionend",(H)=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,(H)=>this._onKeyDown.fire(H)),this.onkeyup(this.inputBox.inputElement,(H)=>this._onKeyUp.fire(H)),this.oninput(this.inputBox.inputElement,(H)=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,(H)=>this._onMouseDown.fire(H))}get onDidChange(){return this.inputBox.onDidChange}layout(J){this.inputBox.layout(),this.updateInputBoxPadding(J.collapsedFindWidget)}enable(){var J,$,X;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(J=this.regex)===null||J===void 0||J.enable(),($=this.wholeWords)===null||$===void 0||$.enable(),(X=this.caseSensitive)===null||X===void 0||X.enable();for(let Y of this.additionalToggles)Y.enable()}disable(){var J,$,X;this.domNode.classList.add("disabled"),this.inputBox.disable(),(J=this.regex)===null||J===void 0||J.disable(),($=this.wholeWords)===null||$===void 0||$.disable(),(X=this.caseSensitive)===null||X===void 0||X.disable();for(let Y of this.additionalToggles)Y.disable()}setFocusInputOnOptionClick(J){this.fixFocusOnOptionClickEnabled=J}setEnabled(J){if(J)this.enable();else this.disable()}setAdditionalToggles(J){for(let $ of this.additionalToggles)$.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new $0;for(let $ of J!==null&&J!==void 0?J:[])this.additionalTogglesDisposables.value.add($),this.controls.appendChild($.domNode),this.additionalTogglesDisposables.value.add($.onChange((X)=>{if(this._onDidOptionChange.fire(X),!X&&this.fixFocusOnOptionClickEnabled)this.inputBox.focus()})),this.additionalToggles.push($);if(this.additionalToggles.length>0)this.controls.style.display="";this.updateInputBoxPadding()}updateInputBoxPadding(J=!1){var $,X,Y,Z,Q,G;if(J)this.inputBox.paddingRight=0;else this.inputBox.paddingRight=((X=($=this.caseSensitive)===null||$===void 0?void 0:$.width())!==null&&X!==void 0?X:0)+((Z=(Y=this.wholeWords)===null||Y===void 0?void 0:Y.width())!==null&&Z!==void 0?Z:0)+((G=(Q=this.regex)===null||Q===void 0?void 0:Q.width())!==null&&G!==void 0?G:0)+this.additionalToggles.reduce((q,U)=>q+U.width(),0)}getValue(){return this.inputBox.value}setValue(J){if(this.inputBox.value!==J)this.inputBox.value=J}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var J,$;return($=(J=this.caseSensitive)===null||J===void 0?void 0:J.checked)!==null&&$!==void 0?$:!1}setCaseSensitive(J){if(this.caseSensitive)this.caseSensitive.checked=J}getWholeWords(){var J,$;return($=(J=this.wholeWords)===null||J===void 0?void 0:J.checked)!==null&&$!==void 0?$:!1}setWholeWords(J){if(this.wholeWords)this.wholeWords.checked=J}getRegex(){var J,$;return($=(J=this.regex)===null||J===void 0?void 0:J.checked)!==null&&$!==void 0?$:!1}setRegex(J){if(this.regex)this.regex.checked=J,this.validate()}focusOnCaseSensitive(){var J;(J=this.caseSensitive)===null||J===void 0||J.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(J){this.inputBox.showMessage(J)}clearMessage(){this.inputBox.hideMessage()}}});class iz{constructor(J){this.fn=J,this._map=new WeakMap}map(J){let $=this._map.get(J);if(!$)$=this.fn(J),this._map.set(J,$);return $}}var q9,P2,o8;var nz=w(()=>{(function(J){J[J.Expanded=0]="Expanded",J[J.Collapsed=1]="Collapsed",J[J.PreserveOrExpanded=2]="PreserveOrExpanded",J[J.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(q9||(q9={}));(function(J){J[J.Unknown=0]="Unknown",J[J.Twistie=1]="Twistie",J[J.Element=2]="Element",J[J.Filter=3]="Filter"})(P2||(P2={}));o8=class o8 extends Error{constructor(J,$){super(`TreeError [${J}] ${$}`)}}});function YB(J){return typeof J==="object"&&"visibility"in J&&"data"in J}function n3(J){switch(J){case!0:return 1;case!1:return 0;default:return J}}function ax(J){return typeof J.collapsible==="boolean"}class rx{constructor(J,$,X,Y={}){this.user=J,this.list=$,this.rootRef=[],this.eventBufferer=new AG,this._onDidChangeCollapseState=new x,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new x,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new x,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new AJ(sA),this.collapseByDefault=typeof Y.collapseByDefault>"u"?!1:Y.collapseByDefault,this.filter=Y.filter,this.autoExpandSingleChildren=typeof Y.autoExpandSingleChildren>"u"?!1:Y.autoExpandSingleChildren,this.root={parent:void 0,element:X,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(J,$,X=A1.empty(),Y={}){if(J.length===0)throw new o8(this.user,"Invalid tree location");if(Y.diffIdentityProvider)this.spliceSmart(Y.diffIdentityProvider,J,$,X,Y);else this.spliceSimple(J,$,X,Y)}spliceSmart(J,$,X,Y,Z,Q){var G;if(Y===void 0)Y=A1.empty();if(Q===void 0)Q=(G=Z.diffDepth)!==null&&G!==void 0?G:0;let{parentNode:q}=this.getParentNodeWithListIndex($);if(!q.lastDiffIds)return this.spliceSimple($,X,Y,Z);let U=[...Y],z=$[$.length-1],H=new V$({getElements:()=>q.lastDiffIds},{getElements:()=>[...q.children.slice(0,z),...U,...q.children.slice(z+X)].map((K)=>J.getId(K.element).toString())}).ComputeDiff(!1);if(H.quitEarly)return q.lastDiffIds=void 0,this.spliceSimple($,X,U,Z);let j=$.slice(0,-1),V=(K,P,A)=>{if(Q>0)for(let D=0;D<A;D++)K--,P--,this.spliceSmart(J,[...j,K,0],Number.MAX_SAFE_INTEGER,U[P].children,Z,Q-1)},W=Math.min(q.children.length,z+X),B=U.length;for(let K of H.changes.sort((P,A)=>A.originalStart-P.originalStart))V(W,B,W-(K.originalStart+K.originalLength)),W=K.originalStart,B=K.modifiedStart-z,this.spliceSimple([...j,W],K.originalLength,A1.slice(U,B,B+K.modifiedLength),Z);V(W,B,W)}spliceSimple(J,$,X=A1.empty(),{onDidCreateNode:Y,onDidDeleteNode:Z,diffIdentityProvider:Q}){let{parentNode:G,listIndex:q,revealed:U,visible:z}=this.getParentNodeWithListIndex(J),H=[],j=A1.map(X,(R)=>this.createTreeNode(R,G,G.visible?1:0,U,H,Y)),V=J[J.length-1],W=0;for(let R=V;R>=0&&R<G.children.length;R--){let O=G.children[R];if(O.visible){W=O.visibleChildIndex;break}}let B=[],K=0,P=0;for(let R of j)if(B.push(R),P+=R.renderNodeCount,R.visible)R.visibleChildIndex=W+K++;let A=RN(G.children,V,$,B);if(!Q)G.lastDiffIds=void 0;else if(G.lastDiffIds)RN(G.lastDiffIds,V,$,B.map((R)=>Q.getId(R.element).toString()));else G.lastDiffIds=G.children.map((R)=>Q.getId(R.element).toString());let D=0;for(let R of A)if(R.visible)D++;if(D!==0)for(let R=V+B.length;R<G.children.length;R++){let O=G.children[R];if(O.visible)O.visibleChildIndex-=D}if(G.visibleChildrenCount+=K-D,U&&z){let R=A.reduce((O,N)=>O+(N.visible?N.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(G,P-R),this.list.splice(q,R,H)}if(A.length>0&&Z){let R=(O)=>{Z(O),O.children.forEach(R)};A.forEach(R)}this._onDidSplice.fire({insertedNodes:B,deletedNodes:A});let M=G;while(M){if(M.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}M=M.parent}}rerender(J){if(J.length===0)throw new o8(this.user,"Invalid tree location");let{node:$,listIndex:X,revealed:Y}=this.getTreeNodeWithListIndex(J);if($.visible&&Y)this.list.splice(X,1,[$])}has(J){return this.hasTreeNode(J)}getListIndex(J){let{listIndex:$,visible:X,revealed:Y}=this.getTreeNodeWithListIndex(J);return X&&Y?$:-1}getListRenderCount(J){return this.getTreeNode(J).renderNodeCount}isCollapsible(J){return this.getTreeNode(J).collapsible}setCollapsible(J,$){let X=this.getTreeNode(J);if(typeof $>"u")$=!X.collapsible;let Y={collapsible:$};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(J,Y))}isCollapsed(J){return this.getTreeNode(J).collapsed}setCollapsed(J,$,X){let Y=this.getTreeNode(J);if(typeof $>"u")$=!Y.collapsed;let Z={collapsed:$,recursive:X||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(J,Z))}_setCollapseState(J,$){let{node:X,listIndex:Y,revealed:Z}=this.getTreeNodeWithListIndex(J),Q=this._setListNodeCollapseState(X,Y,Z,$);if(X!==this.root&&this.autoExpandSingleChildren&&Q&&!ax($)&&X.collapsible&&!X.collapsed&&!$.recursive){let G=-1;for(let q=0;q<X.children.length;q++)if(X.children[q].visible)if(G>-1){G=-1;break}else G=q;if(G>-1)this._setCollapseState([...J,G],$)}return Q}_setListNodeCollapseState(J,$,X,Y){let Z=this._setNodeCollapseState(J,Y,!1);if(!X||!J.visible||!Z)return Z;let Q=J.renderNodeCount,G=this.updateNodeAfterCollapseChange(J),q=Q-($===-1?0:1);return this.list.splice($+1,q,G.slice(1)),Z}_setNodeCollapseState(J,$,X){let Y;if(J===this.root)Y=!1;else{if(ax($))Y=J.collapsible!==$.collapsible,J.collapsible=$.collapsible;else if(!J.collapsible)Y=!1;else Y=J.collapsed!==$.collapsed,J.collapsed=$.collapsed;if(Y)this._onDidChangeCollapseState.fire({node:J,deep:X})}if(!ax($)&&$.recursive)for(let Z of J.children)Y=this._setNodeCollapseState(Z,$,!0)||Y;return Y}expandTo(J){this.eventBufferer.bufferEvents(()=>{let $=this.getTreeNode(J);while($.parent)if($=$.parent,J=J.slice(0,J.length-1),$.collapsed)this._setCollapseState(J,{collapsed:!1,recursive:!1})})}refilter(){let J=this.root.renderNodeCount,$=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,J,$),this.refilterDelayer.cancel()}createTreeNode(J,$,X,Y,Z,Q){let G={parent:$,element:J.element,children:[],depth:$.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof J.collapsible==="boolean"?J.collapsible:typeof J.collapsed<"u",collapsed:typeof J.collapsed>"u"?this.collapseByDefault:J.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},q=this._filterNode(G,X);if(G.visibility=q,Y)Z.push(G);let U=J.children||A1.empty(),z=Y&&q!==0&&!G.collapsed,H=0,j=1;for(let V of U){let W=this.createTreeNode(V,G,q,z,Z,Q);if(G.children.push(W),j+=W.renderNodeCount,W.visible)W.visibleChildIndex=H++}if(G.collapsible=G.collapsible||G.children.length>0,G.visibleChildrenCount=H,G.visible=q===2?H>0:q===1,!G.visible){if(G.renderNodeCount=0,Y)Z.pop()}else if(!G.collapsed)G.renderNodeCount=j;return Q===null||Q===void 0||Q(G),G}updateNodeAfterCollapseChange(J){let $=J.renderNodeCount,X=[];return this._updateNodeAfterCollapseChange(J,X),this._updateAncestorsRenderNodeCount(J.parent,X.length-$),X}_updateNodeAfterCollapseChange(J,$){if(J.visible===!1)return 0;if($.push(J),J.renderNodeCount=1,!J.collapsed)for(let X of J.children)J.renderNodeCount+=this._updateNodeAfterCollapseChange(X,$);return this._onDidChangeRenderNodeCount.fire(J),J.renderNodeCount}updateNodeAfterFilterChange(J){let $=J.renderNodeCount,X=[];return this._updateNodeAfterFilterChange(J,J.visible?1:0,X),this._updateAncestorsRenderNodeCount(J.parent,X.length-$),X}_updateNodeAfterFilterChange(J,$,X,Y=!0){let Z;if(J!==this.root){if(Z=this._filterNode(J,$),Z===0)return J.visible=!1,J.renderNodeCount=0,!1;if(Y)X.push(J)}let Q=X.length;J.renderNodeCount=J===this.root?0:1;let G=!1;if(!J.collapsed||Z!==0){let q=0;for(let U of J.children)if(G=this._updateNodeAfterFilterChange(U,Z,X,Y&&!J.collapsed)||G,U.visible)U.visibleChildIndex=q++;J.visibleChildrenCount=q}else J.visibleChildrenCount=0;if(J!==this.root)J.visible=Z===2?G:Z===1,J.visibility=Z;if(!J.visible){if(J.renderNodeCount=0,Y)X.pop()}else if(!J.collapsed)J.renderNodeCount+=X.length-Q;return this._onDidChangeRenderNodeCount.fire(J),J.visible}_updateAncestorsRenderNodeCount(J,$){if($===0)return;while(J)J.renderNodeCount+=$,this._onDidChangeRenderNodeCount.fire(J),J=J.parent}_filterNode(J,$){let X=this.filter?this.filter.filter(J.element,$):1;if(typeof X==="boolean")return J.filterData=void 0,X?1:0;else if(YB(X))return J.filterData=X.data,n3(X.visibility);else return J.filterData=void 0,n3(X)}hasTreeNode(J,$=this.root){if(!J||J.length===0)return!0;let[X,...Y]=J;if(X<0||X>$.children.length)return!1;return this.hasTreeNode(Y,$.children[X])}getTreeNode(J,$=this.root){if(!J||J.length===0)return $;let[X,...Y]=J;if(X<0||X>$.children.length)throw new o8(this.user,"Invalid tree location");return this.getTreeNode(Y,$.children[X])}getTreeNodeWithListIndex(J){if(J.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:$,listIndex:X,revealed:Y,visible:Z}=this.getParentNodeWithListIndex(J),Q=J[J.length-1];if(Q<0||Q>$.children.length)throw new o8(this.user,"Invalid tree location");let G=$.children[Q];return{node:G,listIndex:X,revealed:Y,visible:Z&&G.visible}}getParentNodeWithListIndex(J,$=this.root,X=0,Y=!0,Z=!0){let[Q,...G]=J;if(Q<0||Q>$.children.length)throw new o8(this.user,"Invalid tree location");for(let q=0;q<Q;q++)X+=$.children[q].renderNodeCount;if(Y=Y&&!$.collapsed,Z=Z&&$.visible,G.length===0)return{parentNode:$,listIndex:X,revealed:Y,visible:Z};return this.getParentNodeWithListIndex(G,$.children[Q],X+1,Y,Z)}getNode(J=[]){return this.getTreeNode(J)}getNodeLocation(J){let $=[],X=J;while(X.parent)$.push(X.parent.children.indexOf(X)),X=X.parent;return $.reverse()}getParentNodeLocation(J){if(J.length===0)return;else if(J.length===1)return[];else return ph(J)[0]}getFirstElementChild(J){let $=this.getTreeNode(J);if($.children.length===0)return;return $.children[0].element}}var SM=w(()=>{nz();V1();e1();OT();wP();_0();P4()});var qe=w(()=>{K0(".monaco-tl-row{align-items:center;height:100%;display:flex;position:relative}.monaco-tl-row.disabled{cursor:default}.monaco-tl-indent{pointer-events:none;height:100%;position:absolute;top:0;left:16px}.hide-arrows .monaco-tl-indent{left:12px}.monaco-tl-indent>.indent-guide{box-sizing:border-box;border-left:1px solid #0000;height:100%;display:inline-block}.monaco-workbench:not(.reduce-motion) .monaco-tl-indent>.indent-guide{transition:border-color .1s linear}.monaco-tl-twistie,.monaco-tl-contents{height:100%}.monaco-tl-twistie{text-align:right;flex-shrink:0;justify-content:center;align-items:center;width:16px;padding-right:6px;font-size:10px;transform:translate(3px);display:flex!important}.monaco-tl-contents{flex:1;overflow:hidden}.monaco-tl-twistie:before{border-radius:20px}.monaco-tl-twistie.collapsed:before{transform:rotate(-90deg)}.monaco-tl-twistie.codicon-tree-item-loading:before{animation:1.25s steps(30,end) infinite codicon-spin}.monaco-tree-type-filter{z-index:100;border:1px solid var(--vscode-widget-border);border-bottom-right-radius:4px;border-bottom-left-radius:4px;max-width:200px;margin:0 6px;padding:3px;display:flex;position:absolute;top:0}.monaco-workbench:not(.reduce-motion) .monaco-tree-type-filter{transition:top .3s}.monaco-tree-type-filter.disabled{top:-40px!important}.monaco-tree-type-filter-grab{cursor:grab;justify-content:center;align-items:center;margin-right:2px;display:flex!important}.monaco-tree-type-filter-grab.grabbing{cursor:grabbing}.monaco-tree-type-filter-input{flex:1}.monaco-tree-type-filter-input .monaco-inputbox{height:23px}.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.input,.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.mirror{padding:2px 4px}.monaco-tree-type-filter-input .monaco-findInput>.controls{top:2px}.monaco-tree-type-filter-actionbar{margin-left:4px}.monaco-tree-type-filter-actionbar .monaco-action-bar .action-label{padding:2px}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container{z-index:13;background-color:var(--vscode-sideBar-background);width:100%;height:0;position:absolute;top:0;left:0}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row.monaco-list-row{background-color:var(--vscode-sideBar-background);width:100%;position:absolute;overflow:hidden;opacity:1!important}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row:hover{cursor:pointer;background-color:var(--vscode-list-hoverBackground)!important}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty,.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty .monaco-tree-sticky-container-shadow{display:none}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow{width:100%;height:3px;box-shadow:var(--vscode-scrollbar-shadow)0 6px 6px -6px inset;position:absolute;bottom:-3px;left:0}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container[tabindex=\"0\"]:focus{outline:none}")});function ix(J){if(J instanceof A2)return new ze(J);return J}class He{constructor(J,$){this.modelProvider=J,this.dnd=$,this.autoExpandDisposable=m.None,this.disposables=new $0}getDragURI(J){return this.dnd.getDragURI(J.element)}getDragLabel(J,$){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(J.map((X)=>X.element),$);return}onDragStart(J,$){var X,Y;(Y=(X=this.dnd).onDragStart)===null||Y===void 0||Y.call(X,ix(J),$)}onDragOver(J,$,X,Y,Z,Q=!0){let G=this.dnd.onDragOver(ix(J),$&&$.element,X,Y,Z),q=this.autoExpandNode!==$;if(q)this.autoExpandDisposable.dispose(),this.autoExpandNode=$;if(typeof $>"u")return G;if(q&&typeof G!=="boolean"&&G.autoExpand)this.autoExpandDisposable=NQ(()=>{let V=this.modelProvider(),W=V.getNodeLocation($);if(V.isCollapsed(W))V.setCollapsed(W,!1);this.autoExpandNode=void 0},500,this.disposables);if(typeof G==="boolean"||!G.accept||typeof G.bubble>"u"||G.feedback){if(!Q){let V=typeof G==="boolean"?G:G.accept,W=typeof G==="boolean"?void 0:G.effect;return{accept:V,effect:W,feedback:[X]}}return G}if(G.bubble===1){let V=this.modelProvider(),W=V.getNodeLocation($),B=V.getParentNodeLocation(W),K=V.getNode(B),P=B&&V.getListIndex(B);return this.onDragOver(J,K,P,Y,Z,!1)}let U=this.modelProvider(),z=U.getNodeLocation($),H=U.getListIndex(z),j=U.getListRenderCount(z);return{...G,feedback:r5(H,H+j)}}drop(J,$,X,Y,Z){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(ix(J),$&&$.element,X,Y,Z)}onDragEnd(J){var $,X;(X=($=this.dnd).onDragEnd)===null||X===void 0||X.call($,J)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function A30(J,$){return $&&{...$,identityProvider:$.identityProvider&&{getId(X){return $.identityProvider.getId(X.element)}},dnd:$.dnd&&new He(J,$.dnd),multipleSelectionController:$.multipleSelectionController&&{isSelectionSingleChangeEvent(X){return $.multipleSelectionController.isSelectionSingleChangeEvent({...X,element:X.element})},isSelectionRangeChangeEvent(X){return $.multipleSelectionController.isSelectionRangeChangeEvent({...X,element:X.element})}},accessibilityProvider:$.accessibilityProvider&&{...$.accessibilityProvider,getSetSize(X){let Y=J(),Z=Y.getNodeLocation(X),Q=Y.getParentNodeLocation(Z);return Y.getNode(Q).visibleChildrenCount},getPosInSet(X){return X.visibleChildIndex+1},isChecked:$.accessibilityProvider&&$.accessibilityProvider.isChecked?(X)=>{return $.accessibilityProvider.isChecked(X.element)}:void 0,getRole:$.accessibilityProvider&&$.accessibilityProvider.getRole?(X)=>{return $.accessibilityProvider.getRole(X.element)}:()=>"treeitem",getAriaLabel(X){return $.accessibilityProvider.getAriaLabel(X.element)},getWidgetAriaLabel(){return $.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:$.accessibilityProvider&&$.accessibilityProvider.getWidgetRole?()=>$.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:$.accessibilityProvider&&$.accessibilityProvider.getAriaLevel?(X)=>$.accessibilityProvider.getAriaLevel(X.element):(X)=>{return X.depth},getActiveDescendantId:$.accessibilityProvider.getActiveDescendantId&&((X)=>{return $.accessibilityProvider.getActiveDescendantId(X.element)})},keyboardNavigationLabelProvider:$.keyboardNavigationLabelProvider&&{...$.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(X){return $.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(X.element)}}}}class GB{constructor(J){this.delegate=J}getHeight(J){return this.delegate.getHeight(J.element)}getTemplateId(J){return this.delegate.getTemplateId(J.element)}hasDynamicHeight(J){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(J.element)}setDynamicHeight(J,$){var X,Y;(Y=(X=this.delegate).setDynamicHeight)===null||Y===void 0||Y.call(X,J.element,$)}}class je{get elements(){return this._elements}constructor(J,$=[]){this._elements=$,this.disposables=new $0,this.onDidChange=q0.forEach(J,(X)=>this._elements=X,this.disposables)}dispose(){this.disposables.dispose()}}class QB{constructor(J,$,X,Y,Z,Q={}){var G;this.renderer=J,this.modelProvider=$,this.activeNodes=Y,this.renderedIndentGuides=Z,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=QB.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=m.None,this.disposables=new $0,this.templateId=J.templateId,this.updateOptions(Q),q0.map(X,(q)=>q.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(G=J.onDidChangeTwistieState)===null||G===void 0||G.call(J,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(J={}){if(typeof J.indent<"u"){let $=A8(J.indent,0,40);if($!==this.indent){this.indent=$;for(let[X,Y]of this.renderedNodes)this.renderTreeElement(X,Y)}}if(typeof J.renderIndentGuides<"u"){let $=J.renderIndentGuides!==ZB.None;if($!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=$;for(let[X,Y]of this.renderedNodes)this._renderIndentGuides(X,Y);if(this.indentGuidesDisposable.dispose(),$){let X=new $0;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,X),this.indentGuidesDisposable=X,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}if(typeof J.hideTwistiesOfChildlessElements<"u")this.hideTwistiesOfChildlessElements=J.hideTwistiesOfChildlessElements}renderTemplate(J){let $=j0(J,B0(".monaco-tl-row")),X=j0($,B0(".monaco-tl-indent")),Y=j0($,B0(".monaco-tl-twistie")),Z=j0($,B0(".monaco-tl-contents")),Q=this.renderer.renderTemplate(Z);return{container:J,indent:X,twistie:Y,indentGuidesDisposable:m.None,templateData:Q}}renderElement(J,$,X,Y){this.renderedNodes.set(J,X),this.renderedElements.set(J.element,J),this.renderTreeElement(J,X),this.renderer.renderElement(J,$,X.templateData,Y)}disposeElement(J,$,X,Y){var Z,Q;if(X.indentGuidesDisposable.dispose(),(Q=(Z=this.renderer).disposeElement)===null||Q===void 0||Q.call(Z,J,$,X.templateData,Y),typeof Y==="number")this.renderedNodes.delete(J),this.renderedElements.delete(J.element)}disposeTemplate(J){this.renderer.disposeTemplate(J.templateData)}onDidChangeTwistieState(J){let $=this.renderedElements.get(J);if(!$)return;this.onDidChangeNodeTwistieState($)}onDidChangeNodeTwistieState(J){let $=this.renderedNodes.get(J);if(!$)return;this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(J,$)}renderTreeElement(J,$){let X=QB.DefaultIndent+(J.depth-1)*this.indent;if($.twistie.style.paddingLeft=`${X}px`,$.indent.style.width=`${X+this.indent-16}px`,J.collapsible)$.container.setAttribute("aria-expanded",String(!J.collapsed));else $.container.removeAttribute("aria-expanded");$.twistie.classList.remove(...h0.asClassNameArray(F0.treeItemExpanded));let Y=!1;if(this.renderer.renderTwistie)Y=this.renderer.renderTwistie(J.element,$.twistie);if(J.collapsible&&(!this.hideTwistiesOfChildlessElements||J.visibleChildrenCount>0)){if(!Y)$.twistie.classList.add(...h0.asClassNameArray(F0.treeItemExpanded));$.twistie.classList.add("collapsible"),$.twistie.classList.toggle("collapsed",J.collapsed)}else $.twistie.classList.remove("collapsible","collapsed");this._renderIndentGuides(J,$)}_renderIndentGuides(J,$){if(t5($.indent),$.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let X=new $0,Y=this.modelProvider();while(!0){let Z=Y.getNodeLocation(J),Q=Y.getParentNodeLocation(Z);if(!Q)break;let G=Y.getNode(Q),q=B0(".indent-guide",{style:`width: ${this.indent}px`});if(this.activeIndentNodes.has(G))q.classList.add("active");if($.indent.childElementCount===0)$.indent.appendChild(q);else $.indent.insertBefore(q,$.indent.firstElementChild);this.renderedIndentGuides.add(G,q),X.add(N0(()=>this.renderedIndentGuides.delete(G,q))),J=G}$.indentGuidesDisposable=X}_onDidChangeActiveNodes(J){if(!this.shouldRenderIndentGuides)return;let $=new Set,X=this.modelProvider();J.forEach((Y)=>{let Z=X.getNodeLocation(Y);try{let Q=X.getParentNodeLocation(Z);if(Y.collapsible&&Y.children.length>0&&!Y.collapsed)$.add(Y);else if(Q)$.add(X.getNode(Q))}catch(Q){}}),this.activeIndentNodes.forEach((Y)=>{if(!$.has(Y))this.renderedIndentGuides.forEach(Y,(Z)=>Z.classList.remove("active"))}),$.forEach((Y)=>{if(!this.activeIndentNodes.has(Y))this.renderedIndentGuides.forEach(Y,(Z)=>Z.classList.add("active"))}),this.activeIndentNodes=$}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),h1(this.disposables)}}class Ve{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(J,$,X){this.tree=J,this.keyboardNavigationLabelProvider=$,this._filter=X,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new $0,J.onWillRefilter(this.reset,this,this.disposables)}filter(J,$){let X=1;if(this._filter){let Q=this._filter.filter(J,$);if(typeof Q==="boolean")X=Q?1:0;else if(YB(Q))X=n3(Q.visibility);else X=Q;if(X===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:bJ.Default,visibility:X};let Y=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(J),Z=Array.isArray(Y)?Y:[Y];for(let Q of Z){let G=Q&&Q.toString();if(typeof G>"u")return{data:bJ.Default,visibility:X};let q;if(this.tree.findMatchType===D2.Contiguous){let U=G.toLowerCase().indexOf(this._lowercasePattern);if(U>-1){q=[Number.MAX_SAFE_INTEGER,0];for(let z=this._lowercasePattern.length;z>0;z--)q.push(U+z-1)}}else q=V2(this._pattern,this._lowercasePattern,0,G,G.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(q)return this._matchCount++,Z.length===1?{data:q,visibility:X}:{data:{label:G,score:q},visibility:X}}if(this.tree.findMode===YY.Filter)if(typeof this.tree.options.defaultFindVisibility==="number")return this.tree.options.defaultFindVisibility;else if(this.tree.options.defaultFindVisibility)return this.tree.options.defaultFindVisibility(J);else return 2;else return{data:bJ.Default,visibility:X}}reset(){this._totalCount=0,this._matchCount=0}dispose(){h1(this.disposables)}}class We{get pattern(){return this._pattern}get mode(){return this._mode}set mode(J){if(J===this._mode)return;if(this._mode=J,this.widget)this.widget.mode=this._mode;this.tree.refilter(),this.render(),this._onDidChangeMode.fire(J)}get matchType(){return this._matchType}set matchType(J){if(J===this._matchType)return;if(this._matchType=J,this.widget)this.widget.matchType=this._matchType;this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(J)}constructor(J,$,X,Y,Z,Q={}){var G,q;this.tree=J,this.view=X,this.filter=Y,this.contextViewProvider=Z,this.options=Q,this._pattern="",this.width=0,this._onDidChangeMode=new x,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new x,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new x,this._onDidChangeOpenState=new x,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new $0,this.disposables=new $0,this._mode=(G=J.options.defaultFindMode)!==null&&G!==void 0?G:YY.Highlight,this._matchType=(q=J.options.defaultFindMatchType)!==null&&q!==void 0?q:D2.Fuzzy,$.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(J={}){if(J.defaultFindMode!==void 0)this.mode=J.defaultFindMode;if(J.defaultFindMatchType!==void 0)this.matchType=J.defaultFindMatchType}onDidSpliceModel(){if(!this.widget||this.pattern.length===0)return;this.tree.refilter(),this.render()}render(){var J,$,X,Y;let Z=this.filter.totalCount>0&&this.filter.matchCount===0;if(this.pattern&&Z)if((J=this.tree.options.showNotFoundMessage)!==null&&J!==void 0?J:!0)($=this.widget)===null||$===void 0||$.showMessage({type:2,content:F("not found","No elements found.")});else(X=this.widget)===null||X===void 0||X.showMessage({type:2});else(Y=this.widget)===null||Y===void 0||Y.clearMessage()}shouldAllowFocus(J){if(!this.widget||!this.pattern)return!0;if(this.filter.totalCount>0&&this.filter.matchCount<=1)return!0;return!bJ.isDefault(J.filterData)}layout(J){var $;this.width=J,($=this.widget)===null||$===void 0||$.layout(J)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function P30(J,$){return J.position===$.position&&Be(J,$)}function Be(J,$){return J.node.element===$.node.element&&J.startIndex===$.startIndex&&J.height===$.height&&J.endIndex===$.endIndex}class Fe{constructor(J=[]){this.stickyNodes=J}get count(){return this.stickyNodes.length}equal(J){return B6(this.stickyNodes,J.stickyNodes,P30)}lastNodePartiallyVisible(){if(this.count===0)return!1;let J=this.stickyNodes[this.count-1];if(this.count===1)return J.position!==0;let $=this.stickyNodes[this.count-2];return $.position+$.height!==J.position}animationStateChanged(J){if(!B6(this.stickyNodes,J.stickyNodes,Be))return!1;if(this.count===0)return!1;let $=this.stickyNodes[this.count-1],X=J.stickyNodes[J.count-1];return $.position!==X.position}}class Ke{constrainStickyScrollNodes(J,$,X){for(let Y=0;Y<J.length;Y++){let Z=J[Y];if(Z.position+Z.height>X||Y>=$)return J.slice(0,Y)}return J}}class Ae{constructor(J,$,X,Y,Z,Q){this.view=$,this.tree=X,this.treeRenderers=Y,this.treeDelegate=Z,this.accessibilityProvider=Q,this._previousElements=[],this._previousStateDisposables=new $0,this._rootDomNode=B0(".monaco-tree-sticky-container.empty"),J.appendChild(this._rootDomNode);let G=B0(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(G),this.stickyScrollFocus=new Pe(this._rootDomNode,$),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}setState(J){let $=!!this._previousState&&this._previousState.count>0,X=!!J&&J.count>0;if(!$&&!X||$&&X&&this._previousState.equal(J))return;if($!==X)this.setVisible(X);if(!X){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}let Y=J.stickyNodes[J.count-1];if(this._previousState&&J.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${Y.position}px`;else{this._previousStateDisposables.clear();let Z=Array(J.count);for(let Q=J.count-1;Q>=0;Q--){let G=J.stickyNodes[Q],{element:q,disposable:U}=this.createElement(G,Q,J.count);Z[Q]=q,this._rootDomNode.appendChild(q),this._previousStateDisposables.add(U)}this.stickyScrollFocus.updateElements(Z,J),this._previousElements=Z}this._previousState=J,this._rootDomNode.style.height=`${Y.position+Y.height}px`}createElement(J,$,X){let Y=J.startIndex,Z=document.createElement("div");Z.style.top=`${J.position}px`,Z.style.height=`${J.height}px`,Z.style.lineHeight=`${J.height}px`,Z.classList.add("monaco-tree-sticky-row"),Z.classList.add("monaco-list-row"),Z.setAttribute("data-index",`${Y}`),Z.setAttribute("data-parity",Y%2===0?"even":"odd"),Z.setAttribute("id",this.view.getElementID(Y)),this.setAccessibilityAttributes(Z,J.node.element,$,X);let Q=this.treeDelegate.getTemplateId(J.node),G=this.treeRenderers.find((H)=>H.templateId===Q);if(!G)throw Error(`No renderer found for template id ${Q}`);let q=J.node;if(q===this.tree.getNode(this.tree.getNodeLocation(J.node)))q=new Proxy(J.node,{});let U=G.renderTemplate(Z);G.renderElement(q,J.startIndex,U,J.height);let z=N0(()=>{G.disposeElement(q,J.startIndex,U,J.height),G.disposeTemplate(U),Z.remove()});return{element:Z,disposable:z}}setAccessibilityAttributes(J,$,X,Y){var Z;if(!this.accessibilityProvider)return;if(this.accessibilityProvider.getSetSize)J.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize($,X,Y)));if(this.accessibilityProvider.getPosInSet)J.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet($,X)));if(this.accessibilityProvider.getRole)J.setAttribute("role",(Z=this.accessibilityProvider.getRole($))!==null&&Z!==void 0?Z:"treeitem");let Q=this.accessibilityProvider.getAriaLabel($);if(Q)J.setAttribute("aria-label",Q);let G=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel($);if(typeof G==="number")J.setAttribute("aria-level",`${G}`);J.setAttribute("aria-selected",String(!1))}setVisible(J){if(this._rootDomNode.classList.toggle("empty",!J),!J)this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}function Ue(J){let $=P2.Unknown;if(UP(J.browserEvent.target,"monaco-tl-twistie","monaco-tl-row"))$=P2.Twistie;else if(UP(J.browserEvent.target,"monaco-tl-contents","monaco-tl-row"))$=P2.Element;else if(UP(J.browserEvent.target,"monaco-tree-type-filter","monaco-list"))$=P2.Filter;return{browserEvent:J.browserEvent,element:J.element?J.element.element:null,target:$}}function CM(J,$){$(J),J.children.forEach((X)=>CM(X,$))}class vM{get nodeSet(){if(!this._nodeSet)this._nodeSet=this.createNodeSet();return this._nodeSet}constructor(J,$){this.getFirstViewElementWithTrait=J,this.identityProvider=$,this.nodes=[],this._onDidChange=new x,this.onDidChange=this._onDidChange.event}set(J,$){if(!($===null||$===void 0?void 0:$.__forceEvent)&&B6(this.nodes,J))return;this._set(J,!1,$)}_set(J,$,X){if(this.nodes=[...J],this.elements=void 0,this._nodeSet=void 0,!$){let Y=this;this._onDidChange.fire({get elements(){return Y.get()},browserEvent:X})}}get(){if(!this.elements)this.elements=this.nodes.map((J)=>J.element);return[...this.elements]}getNodes(){return this.nodes}has(J){return this.nodeSet.has(J)}onDidModelSplice({insertedNodes:J,deletedNodes:$}){if(!this.identityProvider){let q=this.createNodeSet(),U=(z)=>q.delete(z);$.forEach((z)=>CM(z,U)),this.set([...q.values()]);return}let X=new Set,Y=(q)=>X.add(this.identityProvider.getId(q.element).toString());$.forEach((q)=>CM(q,Y));let Z=new Map,Q=(q)=>Z.set(this.identityProvider.getId(q.element).toString(),q);J.forEach((q)=>CM(q,Q));let G=[];for(let q of this.nodes){let U=this.identityProvider.getId(q.element).toString();if(!X.has(U))G.push(q);else{let H=Z.get(U);if(H&&H.visible)G.push(H)}}if(this.nodes.length>0&&G.length===0){let q=this.getFirstViewElementWithTrait();if(q)G.push(q)}this._set(G,!0)}createNodeSet(){let J=new Set;for(let $ of this.nodes)J.add($);return J}}class qB{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return q0.filter(q0.map(this.view.onMouseDblClick,Ue),(J)=>J.target!==P2.Filter)}get onPointer(){return q0.map(this.view.onPointer,Ue)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return q0.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var J,$;return($=(J=this.findController)===null||J===void 0?void 0:J.mode)!==null&&$!==void 0?$:YY.Highlight}set findMode(J){if(this.findController)this.findController.mode=J}get findMatchType(){var J,$;return($=(J=this.findController)===null||J===void 0?void 0:J.matchType)!==null&&$!==void 0?$:D2.Fuzzy}set findMatchType(J){if(this.findController)this.findController.matchType=J}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(J,$,X,Y,Z={}){var Q;this._user=J,this._options=Z,this.eventBufferer=new AG,this.onDidChangeFindOpenState=q0.None,this.onDidChangeStickyScrollFocused=q0.None,this.disposables=new $0,this._onWillRefilter=new x,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new x,this.treeDelegate=new GB(X);let G=new DK,q=new DK,U=this.disposables.add(new je(q.event)),z=new XV;this.renderers=Y.map((B)=>new QB(B,()=>this.model,G.event,U,z,Z));for(let B of this.renderers)this.disposables.add(B);let H;if(Z.keyboardNavigationLabelProvider)H=new Ve(this,Z.keyboardNavigationLabelProvider,Z.filter),Z={...Z,filter:H},this.disposables.add(H);this.focus=new vM(()=>this.view.getFocusedElements()[0],Z.identityProvider),this.selection=new vM(()=>this.view.getSelectedElements()[0],Z.identityProvider),this.anchor=new vM(()=>this.view.getAnchorElement(),Z.identityProvider),this.view=new Re(J,$,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...A30(()=>this.model,Z),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(J,this.view,Z),G.input=this.model.onDidChangeCollapseState;let j=q0.forEach(this.model.onDidSplice,(B)=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(B),this.selection.onDidModelSplice(B)})},this.disposables);j(()=>null,null,this.disposables);let V=this.disposables.add(new x),W=this.disposables.add(new AJ(0));if(this.disposables.add(q0.any(j,this.focus.onDidChange,this.selection.onDidChange)(()=>{W.trigger(()=>{let B=new Set;for(let K of this.focus.getNodes())B.add(K);for(let K of this.selection.getNodes())B.add(K);V.fire([...B.values()])})})),q.input=V.event,Z.keyboardSupport!==!1){let B=q0.chain(this.view.onKeyDown,(K)=>K.filter((P)=>!vZ(P.target)).map((P)=>new R1(P)));q0.chain(B,(K)=>K.filter((P)=>P.keyCode===15))(this.onLeftArrow,this,this.disposables),q0.chain(B,(K)=>K.filter((P)=>P.keyCode===17))(this.onRightArrow,this,this.disposables),q0.chain(B,(K)=>K.filter((P)=>P.keyCode===10))(this.onSpace,this,this.disposables)}if(((Q=Z.findWidgetEnabled)!==null&&Q!==void 0?Q:!0)&&Z.keyboardNavigationLabelProvider&&Z.contextViewProvider){let B=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new We(this,this.model,this.view,H,Z.contextViewProvider,B),this.focusNavigationFilter=(K)=>this.findController.shouldAllowFocus(K),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=q0.None,this.onDidChangeFindMatchType=q0.None;if(Z.enableStickyScroll)this.stickyScrollController=new nx(this,this.model,this.view,this.renderers,this.treeDelegate,Z),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus;this.styleElement=p5(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===ZB.Always)}updateOptions(J={}){var $;this._options={...this._options,...J};for(let X of this.renderers)X.updateOptions(J);this.view.updateOptions(this._options),($=this.findController)===null||$===void 0||$.updateOptions(J),this.updateStickyScroll(J),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===ZB.Always)}get options(){return this._options}updateStickyScroll(J){var $;if(!this.stickyScrollController&&this._options.enableStickyScroll)this.stickyScrollController=new nx(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus;else if(this.stickyScrollController&&!this._options.enableStickyScroll)this.onDidChangeStickyScrollFocused=q0.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0;($=this.stickyScrollController)===null||$===void 0||$.updateOptions(J)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(J){this.view.scrollTop=J}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){var J;if((J=this.stickyScrollController)===null||J===void 0?void 0:J.focusedLast())this.stickyScrollController.domFocus();else this.view.domFocus()}layout(J,$){var X;if(this.view.layout(J,$),l9($))(X=this.findController)===null||X===void 0||X.layout($)}style(J){var $;let X=`.${this.view.domId}`,Y=[];if(J.treeIndentGuidesStroke)Y.push(`.monaco-list${X}:hover .monaco-tl-indent > .indent-guide, .monaco-list${X}.always .monaco-tl-indent > .indent-guide  { border-color: ${J.treeInactiveIndentGuidesStroke}; }`),Y.push(`.monaco-list${X} .monaco-tl-indent > .indent-guide.active { border-color: ${J.treeIndentGuidesStroke}; }`);if(J.listBackground)Y.push(`.monaco-list${X} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${J.listBackground}; }`),Y.push(`.monaco-list${X} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${J.listBackground}; }`);if(J.listFocusForeground)Y.push(`.monaco-list${X}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${J.listFocusForeground}; }`),Y.push(`.monaco-list${X}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`);let Z=N4(J.listFocusAndSelectionOutline,N4(J.listSelectionOutline,($=J.listFocusOutline)!==null&&$!==void 0?$:""));if(Z)Y.push(`.monaco-list${X}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${Z}; outline-offset: -1px;}`),Y.push(`.monaco-list${X}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`);if(J.listFocusOutline)Y.push(`.monaco-list${X}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${J.listFocusOutline}; outline-offset: -1px; }`),Y.push(`.monaco-list${X}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),Y.push(`.monaco-workbench.context-menu-visible .monaco-list${X}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),Y.push(`.monaco-workbench.context-menu-visible .monaco-list${X}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`);this.styleElement.textContent=Y.join(`
`),this.view.style(J)}getParentElement(J){let $=this.model.getParentNodeLocation(J);return this.model.getNode($).element}getFirstElementChild(J){return this.model.getFirstElementChild(J)}getNode(J){return this.model.getNode(J)}getNodeLocation(J){return this.model.getNodeLocation(J)}collapse(J,$=!1){return this.model.setCollapsed(J,!0,$)}expand(J,$=!1){return this.model.setCollapsed(J,!1,$)}toggleCollapsed(J,$=!1){return this.model.setCollapsed(J,void 0,$)}isCollapsible(J){return this.model.isCollapsible(J)}setCollapsible(J,$){return this.model.setCollapsible(J,$)}isCollapsed(J){return this.model.isCollapsed(J)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(J,$){this.eventBufferer.bufferEvents(()=>{let X=J.map((Z)=>this.model.getNode(Z));this.selection.set(X,$);let Y=J.map((Z)=>this.model.getListIndex(Z)).filter((Z)=>Z>-1);this.view.setSelection(Y,$,!0)})}getSelection(){return this.selection.get()}setFocus(J,$){this.eventBufferer.bufferEvents(()=>{let X=J.map((Z)=>this.model.getNode(Z));this.focus.set(X,$);let Y=J.map((Z)=>this.model.getListIndex(Z)).filter((Z)=>Z>-1);this.view.setFocus(Y,$,!0)})}getFocus(){return this.focus.get()}reveal(J,$){this.model.expandTo(J);let X=this.model.getListIndex(J);if(X===-1)return;if(!this.stickyScrollController)this.view.reveal(X,$);else{let Y=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(J));this.view.reveal(X,$,Y)}}onLeftArrow(J){J.preventDefault(),J.stopPropagation();let $=this.view.getFocusedElements();if($.length===0)return;let X=$[0],Y=this.model.getNodeLocation(X);if(!this.model.setCollapsed(Y,!0)){let Q=this.model.getParentNodeLocation(Y);if(!Q)return;let G=this.model.getListIndex(Q);this.view.reveal(G),this.view.setFocus([G])}}onRightArrow(J){J.preventDefault(),J.stopPropagation();let $=this.view.getFocusedElements();if($.length===0)return;let X=$[0],Y=this.model.getNodeLocation(X);if(!this.model.setCollapsed(Y,!1)){if(!X.children.some((q)=>q.visible))return;let[Q]=this.view.getFocus(),G=Q+1;this.view.reveal(G),this.view.setFocus([G])}}onSpace(J){J.preventDefault(),J.stopPropagation();let $=this.view.getFocusedElements();if($.length===0)return;let X=$[0],Y=this.model.getNodeLocation(X),Z=J.browserEvent.altKey;this.model.setCollapsed(Y,void 0,Z)}dispose(){var J;h1(this.disposables),(J=this.stickyScrollController)===null||J===void 0||J.dispose(),this.view.dispose()}}var ze,ZB,YY,D2,nx,Pe,De,Re;var UB=w(()=>{T0();k$();d8();$Y();bM();xM();BM();m3();JB();SM();nz();S7();V1();e1();k5();I5();F$();_0();W2();z0();qe();c0();ze=class ze extends A2{constructor(J){super(J.elements.map(($)=>$.element));this.data=J}};(function(J){J.None="none",J.OnHover="onHover",J.Always="always"})(ZB||(ZB={}));QB.DefaultIndent=8;(function(J){J[J.Highlight=0]="Highlight",J[J.Filter=1]="Filter"})(YY||(YY={}));(function(J){J[J.Fuzzy=0]="Fuzzy",J[J.Contiguous=1]="Contiguous"})(D2||(D2={}));nx=class nx extends m{constructor(J,$,X,Y,Z,Q={}){var G;super();this.tree=J,this.model=$,this.view=X,this.treeDelegate=Z,this.maxWidgetViewRatio=0.4;let q=this.validateStickySettings(Q);this.stickyScrollMaxItemCount=q.stickyScrollMaxItemCount,this.stickyScrollDelegate=(G=Q.stickyScrollDelegate)!==null&&G!==void 0?G:new Ke,this._widget=this._register(new Ae(X.getScrollableElement(),X,J,Y,Z,Q.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(X.onDidScroll(()=>this.update())),this._register(X.onDidChangeContentHeight(()=>this.update())),this._register(J.onDidChangeCollapseState(()=>this.update())),this.update()}getNodeAtHeight(J){let $;if(J===0)$=this.view.firstVisibleIndex;else $=this.view.indexAt(J+this.view.scrollTop);if($<0||$>=this.view.length)return;return this.view.element($)}update(){let J=this.getNodeAtHeight(0);if(!J||this.tree.scrollTop===0){this._widget.setState(void 0);return}let $=this.findStickyState(J);this._widget.setState($)}findStickyState(J){let $=[],X=J,Y=0,Z=this.getNextStickyNode(X,void 0,Y);while(Z){if($.push(Z),Y+=Z.height,$.length<=this.stickyScrollMaxItemCount){if(X=this.getNextVisibleNode(Z),!X)break}Z=this.getNextStickyNode(X,Z.node,Y)}let Q=this.constrainStickyNodes($);return Q.length?new Fe(Q):void 0}getNextVisibleNode(J){return this.getNodeAtHeight(J.position+J.height)}getNextStickyNode(J,$,X){let Y=this.getAncestorUnderPrevious(J,$);if(!Y)return;if(Y===J){if(!this.nodeIsUncollapsedParent(J))return;if(this.nodeTopAlignsWithStickyNodesBottom(J,X))return}return this.createStickyScrollNode(Y,X)}nodeTopAlignsWithStickyNodesBottom(J,$){let X=this.getNodeIndex(J),Y=this.view.getElementTop(X),Z=$;return this.view.scrollTop===Y-Z}createStickyScrollNode(J,$){let X=this.treeDelegate.getHeight(J),{startIndex:Y,endIndex:Z}=this.getNodeRange(J),Q=this.calculateStickyNodePosition(Z,$,X);return{node:J,position:Q,height:X,startIndex:Y,endIndex:Z}}getAncestorUnderPrevious(J,$=void 0){let X=J,Y=this.getParentNode(X);while(Y){if(Y===$)return X;X=Y,Y=this.getParentNode(X)}if($===void 0)return X;return}calculateStickyNodePosition(J,$,X){let Y=this.view.getRelativeTop(J);if(Y===null&&this.view.firstVisibleIndex===J&&J+1<this.view.length){let U=this.treeDelegate.getHeight(this.view.element(J)),z=this.view.getRelativeTop(J+1);Y=z?z-U/this.view.renderHeight:null}if(Y===null)return $;let Z=this.view.element(J),Q=this.treeDelegate.getHeight(Z),q=Y*this.view.renderHeight+Q;if($+X>q&&$<=q)return q-X;return $}constrainStickyNodes(J){if(J.length===0)return[];let $=this.view.renderHeight*this.maxWidgetViewRatio,X=J[J.length-1];if(J.length<=this.stickyScrollMaxItemCount&&X.position+X.height<=$)return J;let Y=this.stickyScrollDelegate.constrainStickyScrollNodes(J,this.stickyScrollMaxItemCount,$);if(!Y.length)return[];let Z=Y[Y.length-1];if(Y.length>this.stickyScrollMaxItemCount||Z.position+Z.height>$)throw Error("stickyScrollDelegate violates constraints");return Y}getParentNode(J){let $=this.model.getNodeLocation(J),X=this.model.getParentNodeLocation($);return X?this.model.getNode(X):void 0}nodeIsUncollapsedParent(J){let $=this.model.getNodeLocation(J);return this.model.getListRenderCount($)>1}getNodeIndex(J){let $=this.model.getNodeLocation(J);return this.model.getListIndex($)}getNodeRange(J){let $=this.model.getNodeLocation(J),X=this.model.getListIndex($);if(X<0)throw Error("Node not found in tree");let Y=this.model.getListRenderCount($),Z=X+Y-1;return{startIndex:X,endIndex:Z}}nodePositionTopBelowWidget(J){let $=[],X=this.getParentNode(J);while(X)$.push(X),X=this.getParentNode(X);let Y=0;for(let Z=0;Z<$.length&&Z<this.stickyScrollMaxItemCount;Z++)Y+=this.treeDelegate.getHeight($[Z]);return Y}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(J={}){if(!J.stickyScrollMaxItemCount)return;let $=this.validateStickySettings(J);if(this.stickyScrollMaxItemCount!==$.stickyScrollMaxItemCount)this.stickyScrollMaxItemCount=$.stickyScrollMaxItemCount,this.update()}validateStickySettings(J){let $=7;if(typeof J.stickyScrollMaxItemCount==="number")$=Math.max(J.stickyScrollMaxItemCount,1);return{stickyScrollMaxItemCount:$}}};Pe=class Pe extends m{get domHasFocus(){return this._domHasFocus}set domHasFocus(J){if(J!==this._domHasFocus)this._onDidChangeHasFocus.fire(J),this._domHasFocus=J}constructor(J,$){super();this.container=J,this.view=$,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new x,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new x,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",()=>this.onFocus()),this.container.addEventListener("blur",()=>this.onBlur()),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown((X)=>this.onKeyDown(X))),this._register(this.view.onMouseDown((X)=>this.onMouseDown(X))),this._register(this.view.onContextMenu((X)=>this.handleContextMenu(X)))}handleContextMenu(J){let $=J.browserEvent.target;if(!lW($)&&!fz($)){if(this.focusedLast())this.view.domFocus();return}if(!QU(J.browserEvent)){if(!this.state)throw Error("Context menu should not be triggered when state is undefined");let Q=this.state.stickyNodes.findIndex((G)=>{var q;return G.node.element===((q=J.element)===null||q===void 0?void 0:q.element)});if(Q===-1)throw Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(Q);return}if(!this.state||this.focusedIndex<0)throw Error("Context menu key should not be triggered when focus is not in sticky scroll widget");let Y=this.state.stickyNodes[this.focusedIndex].node.element,Z=this.elements[this.focusedIndex];this._onContextMenu.fire({element:Y,anchor:Z,browserEvent:J.browserEvent,isStickyScroll:!0})}onKeyDown(J){if(this.domHasFocus&&this.state){if(J.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),J.preventDefault(),J.stopPropagation();else if(J.key==="ArrowDown"||J.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){let $=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([$]),this.scrollNodeUnderWidget($,this.state)}else this.setFocusedElement(this.focusedIndex+1);J.preventDefault(),J.stopPropagation()}}}onMouseDown(J){let $=J.browserEvent.target;if(!lW($)&&!fz($))return;J.browserEvent.preventDefault(),J.browserEvent.stopPropagation()}updateElements(J,$){if($&&$.count===0)throw Error("Sticky scroll state must be undefined when there are no sticky nodes");if($&&$.count!==J.length)throw Error("Sticky scroll focus received illigel state");let X=this.focusedIndex;if(this.removeFocus(),this.elements=J,this.state=$,$){let Y=A8(X,0,$.count-1);this.setFocus(Y)}else if(this.domHasFocus)this.view.domFocus();this.container.tabIndex=$?0:-1}setFocusedElement(J){let $=this.state;if(!$)throw Error("Cannot set focus when state is undefined");if(this.setFocus(J),J<$.count-1)return;if($.lastNodePartiallyVisible()){let X=$.stickyNodes[J];this.scrollNodeUnderWidget(X.endIndex+1,$)}}scrollNodeUnderWidget(J,$){let X=$.stickyNodes[$.count-1],Y=$.count>1?$.stickyNodes[$.count-2]:void 0,Z=this.view.getElementTop(J),Q=Y?Y.position+Y.height+X.height:X.height;this.view.scrollTop=Z-Q}domFocus(){if(!this.state)throw Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){if(!this.state)return!1;return this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){if(this.focusedIndex===-1)return;this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1}setFocus(J){if(0>J)throw Error("addFocus() can not remove focus");if(!this.state&&J>=0)throw Error("Cannot set focus index when state is undefined");if(this.state&&J>=this.state.count)throw Error("Cannot set focus index to an index that does not exist");let $=this.focusedIndex;if($>=0)this.toggleElementFocus(this.elements[$],!1);if(J>=0)this.toggleElementFocus(this.elements[J],!0);this.focusedIndex=J}toggleElementFocus(J,$){J.classList.toggle("focused",$)}toggleStickyScrollFocused(J){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",J)}onFocus(){if(!this.state||this.elements.length===0)throw Error("Cannot focus when state is undefined or elements are empty");if(this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.focusedIndex===-1)this.setFocus(0)}onBlur(){this.domHasFocus=!1}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}};De=class De extends KM{constructor(J,$,X){super(J);this.tree=$,this.stickyScrollProvider=X}onViewPointer(J){if(Bx(J.browserEvent.target)||vZ(J.browserEvent.target)||vz(J.browserEvent.target))return;if(J.browserEvent.isHandledByList)return;let $=J.element;if(!$)return super.onViewPointer(J);if(this.isSelectionRangeChangeEvent(J)||this.isSelectionSingleChangeEvent(J))return super.onViewPointer(J);let X=J.browserEvent.target,Y=X.classList.contains("monaco-tl-twistie")||X.classList.contains("monaco-icon-label")&&X.classList.contains("folder-icon")&&J.browserEvent.offsetX<16,Z=fz(J.browserEvent.target),Q=!1;if(Z)Q=!0;else if(typeof this.tree.expandOnlyOnTwistieClick==="function")Q=this.tree.expandOnlyOnTwistieClick($.element);else Q=!!this.tree.expandOnlyOnTwistieClick;if(!Z){if(Q&&!Y&&J.browserEvent.detail!==2)return super.onViewPointer(J);if(!this.tree.expandOnDoubleClick&&J.browserEvent.detail===2)return super.onViewPointer(J)}else this.handleStickyScrollMouseEvent(J,$);if($.collapsible&&(!Z||Y)){let G=this.tree.getNodeLocation($),q=J.browserEvent.altKey;if(this.tree.setFocus([G]),this.tree.toggleCollapsed(G,q),Q&&Y){J.browserEvent.isHandledByList=!0;return}}if(!Z)super.onViewPointer(J)}handleStickyScrollMouseEvent(J,$){if(ro(J.browserEvent.target)||io(J.browserEvent.target))return;let X=this.stickyScrollProvider();if(!X)throw Error("Sticky scroll controller not found");let Y=this.list.indexOf($),Z=this.list.getElementTop(Y),Q=X.nodePositionTopBelowWidget($);this.tree.scrollTop=Z-Q,this.list.domFocus(),this.list.setFocus([Y]),this.list.setSelection([Y])}onDoubleClick(J){if(J.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick)return;if(J.browserEvent.isHandledByList)return;super.onDoubleClick(J)}onMouseDown(J){let $=J.browserEvent.target;if(!lW($)&&!fz($)){super.onMouseDown(J);return}}onContextMenu(J){let $=J.browserEvent.target;if(!lW($)&&!fz($)){super.onContextMenu(J);return}}};Re=class Re extends A7{constructor(J,$,X,Y,Z,Q,G,q){super(J,$,X,Y,q);this.focusTrait=Z,this.selectionTrait=Q,this.anchorTrait=G}createMouseController(J){return new De(this,J.tree,J.stickyScrollProvider)}splice(J,$,X=[]){if(super.splice(J,$,X),X.length===0)return;let Y=[],Z=[],Q;if(X.forEach((G,q)=>{if(this.focusTrait.has(G))Y.push(J+q);if(this.selectionTrait.has(G))Z.push(J+q);if(this.anchorTrait.has(G))Q=J+q}),Y.length>0)super.setFocus(ZJ([...super.getFocus(),...Y]));if(Z.length>0)super.setSelection(ZJ([...super.getSelection(),...Z]));if(typeof Q==="number")super.setAnchor(Q)}setFocus(J,$,X=!1){if(super.setFocus(J,$),!X)this.focusTrait.set(J.map((Y)=>this.element(Y)),$)}setSelection(J,$,X=!1){if(super.setSelection(J,$),!X)this.selectionTrait.set(J.map((Y)=>this.element(Y)),$)}setAnchor(J,$=!1){if(super.setAnchor(J),!$)if(typeof J>"u")this.anchorTrait.set([]);else this.anchorTrait.set([this.element(J)])}}});class o3{constructor(J,$,X={}){if(this.user=J,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new rx(J,$,null,X),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,X.sorter)this.sorter={compare(Y,Z){return X.sorter.compare(Y.element,Z.element)}};this.identityProvider=X.identityProvider}setChildren(J,$=A1.empty(),X={}){let Y=this.getElementLocation(J);this._setChildren(Y,this.preserveCollapseState($),X)}_setChildren(J,$=A1.empty(),X){let Y=new Set,Z=new Set,Q=(q)=>{var U;if(q.element===null)return;let z=q;if(Y.add(z.element),this.nodes.set(z.element,z),this.identityProvider){let H=this.identityProvider.getId(z.element).toString();Z.add(H),this.nodesByIdentity.set(H,z)}(U=X.onDidCreateNode)===null||U===void 0||U.call(X,z)},G=(q)=>{var U;if(q.element===null)return;let z=q;if(!Y.has(z.element))this.nodes.delete(z.element);if(this.identityProvider){let H=this.identityProvider.getId(z.element).toString();if(!Z.has(H))this.nodesByIdentity.delete(H)}(U=X.onDidDeleteNode)===null||U===void 0||U.call(X,z)};this.model.splice([...J,0],Number.MAX_VALUE,$,{...X,onDidCreateNode:Q,onDidDeleteNode:G})}preserveCollapseState(J=A1.empty()){if(this.sorter)J=[...J].sort(this.sorter.compare.bind(this.sorter));return A1.map(J,($)=>{let X=this.nodes.get($.element);if(!X&&this.identityProvider){let Q=this.identityProvider.getId($.element).toString();X=this.nodesByIdentity.get(Q)}if(!X){let Q;if(typeof $.collapsed>"u")Q=void 0;else if($.collapsed===q9.Collapsed||$.collapsed===q9.PreserveOrCollapsed)Q=!0;else if($.collapsed===q9.Expanded||$.collapsed===q9.PreserveOrExpanded)Q=!1;else Q=Boolean($.collapsed);return{...$,children:this.preserveCollapseState($.children),collapsed:Q}}let Y=typeof $.collapsible==="boolean"?$.collapsible:X.collapsible,Z;if(typeof $.collapsed>"u"||$.collapsed===q9.PreserveOrCollapsed||$.collapsed===q9.PreserveOrExpanded)Z=X.collapsed;else if($.collapsed===q9.Collapsed)Z=!0;else if($.collapsed===q9.Expanded)Z=!1;else Z=Boolean($.collapsed);return{...$,collapsible:Y,collapsed:Z,children:this.preserveCollapseState($.children)}})}rerender(J){let $=this.getElementLocation(J);this.model.rerender($)}getFirstElementChild(J=null){let $=this.getElementLocation(J);return this.model.getFirstElementChild($)}has(J){return this.nodes.has(J)}getListIndex(J){let $=this.getElementLocation(J);return this.model.getListIndex($)}getListRenderCount(J){let $=this.getElementLocation(J);return this.model.getListRenderCount($)}isCollapsible(J){let $=this.getElementLocation(J);return this.model.isCollapsible($)}setCollapsible(J,$){let X=this.getElementLocation(J);return this.model.setCollapsible(X,$)}isCollapsed(J){let $=this.getElementLocation(J);return this.model.isCollapsed($)}setCollapsed(J,$,X){let Y=this.getElementLocation(J);return this.model.setCollapsed(Y,$,X)}expandTo(J){let $=this.getElementLocation(J);this.model.expandTo($)}refilter(){this.model.refilter()}getNode(J=null){if(J===null)return this.model.getNode(this.model.rootRef);let $=this.nodes.get(J);if(!$)throw new o8(this.user,`Tree element not found: ${J}`);return $}getNodeLocation(J){return J.element}getParentNodeLocation(J){if(J===null)throw new o8(this.user,"Invalid getParentNodeLocation call");let $=this.nodes.get(J);if(!$)throw new o8(this.user,`Tree element not found: ${J}`);let X=this.model.getNodeLocation($),Y=this.model.getParentNodeLocation(X);return this.model.getNode(Y).element}getElementLocation(J){if(J===null)return[];let $=this.nodes.get(J);if(!$)throw new o8(this.user,`Tree element not found: ${J}`);return this.model.getNodeLocation($)}}var hM=w(()=>{SM();nz();P4()});function fM(J){let $=[J.element],X=J.incompressible||!1;return{element:{elements:$,incompressible:X},children:A1.map(A1.from(J.children),fM),collapsible:J.collapsible,collapsed:J.collapsed}}function gM(J){let $=[J.element],X=J.incompressible||!1,Y,Z;while(!0){if([Z,Y]=A1.consume(A1.from(J.children),2),Z.length!==1)break;if(Z[0].incompressible)break;J=Z[0],$.push(J.element)}return{element:{elements:$,incompressible:X},children:A1.map(A1.concat(Z,Y),gM),collapsible:J.collapsible,collapsed:J.collapsed}}function ox(J,$=0){let X;if($<J.element.elements.length-1)X=[ox(J,$+1)];else X=A1.map(A1.from(J.children),(Y)=>ox(Y,0));if($===0&&J.element.incompressible)return{element:J.element.elements[$],children:X,incompressible:!0,collapsible:J.collapsible,collapsed:J.collapsed};return{element:J.element.elements[$],children:X,collapsible:J.collapsible,collapsed:J.collapsed}}function Me(J){return ox(J,0)}function Oe(J,$,X){if(J.element===$)return{...J,children:X};return{...J,children:A1.map(A1.from(J.children),(Y)=>Oe(Y,$,X))}}class _e{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(J,$,X={}){this.user=J,this.rootRef=null,this.nodes=new Map,this.model=new o3(J,$,X),this.enabled=typeof X.compressionEnabled>"u"?!0:X.compressionEnabled,this.identityProvider=X.identityProvider}setChildren(J,$=A1.empty(),X){let Y=X.diffIdentityProvider&&D30(X.diffIdentityProvider);if(J===null){let W=A1.map($,this.enabled?gM:fM);this._setChildren(null,W,{diffIdentityProvider:Y,diffDepth:1/0});return}let Z=this.nodes.get(J);if(!Z)throw new o8(this.user,"Unknown compressed tree node");let Q=this.model.getNode(Z),G=this.model.getParentNodeLocation(Z),q=this.model.getNode(G),U=Me(Q),z=Oe(U,J,$),H=(this.enabled?gM:fM)(z),j=X.diffIdentityProvider?(W,B)=>X.diffIdentityProvider.getId(W)===X.diffIdentityProvider.getId(B):void 0;if(B6(H.element.elements,Q.element.elements,j)){this._setChildren(Z,H.children||A1.empty(),{diffIdentityProvider:Y,diffDepth:1});return}let V=q.children.map((W)=>W===Q?H:W);this._setChildren(q.element,V,{diffIdentityProvider:Y,diffDepth:Q.depth-q.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(J){if(J===this.enabled)return;this.enabled=J;let X=this.model.getNode().children,Y=A1.map(X,Me),Z=A1.map(Y,J?gM:fM);this._setChildren(null,Z,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(J,$,X){let Y=new Set,Z=(G)=>{for(let q of G.element.elements)Y.add(q),this.nodes.set(q,G.element)},Q=(G)=>{for(let q of G.element.elements)if(!Y.has(q))this.nodes.delete(q)};this.model.setChildren(J,$,{...X,onDidCreateNode:Z,onDidDeleteNode:Q})}has(J){return this.nodes.has(J)}getListIndex(J){let $=this.getCompressedNode(J);return this.model.getListIndex($)}getListRenderCount(J){let $=this.getCompressedNode(J);return this.model.getListRenderCount($)}getNode(J){if(typeof J>"u")return this.model.getNode();let $=this.getCompressedNode(J);return this.model.getNode($)}getNodeLocation(J){let $=this.model.getNodeLocation(J);if($===null)return null;return $.elements[$.elements.length-1]}getParentNodeLocation(J){let $=this.getCompressedNode(J),X=this.model.getParentNodeLocation($);if(X===null)return null;return X.elements[X.elements.length-1]}getFirstElementChild(J){let $=this.getCompressedNode(J);return this.model.getFirstElementChild($)}isCollapsible(J){let $=this.getCompressedNode(J);return this.model.isCollapsible($)}setCollapsible(J,$){let X=this.getCompressedNode(J);return this.model.setCollapsible(X,$)}isCollapsed(J){let $=this.getCompressedNode(J);return this.model.isCollapsed($)}setCollapsed(J,$,X){let Y=this.getCompressedNode(J);return this.model.setCollapsed(Y,$,X)}expandTo(J){let $=this.getCompressedNode(J);this.model.expandTo($)}rerender(J){let $=this.getCompressedNode(J);this.model.rerender($)}refilter(){this.model.refilter()}getCompressedNode(J){if(J===null)return null;let $=this.nodes.get(J);if(!$)throw new o8(this.user,`Tree element not found: ${J}`);return $}}class tx{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((J)=>new tx(this.unwrapper,J))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(J,$){this.unwrapper=J,this.node=$}}function M30(J,$){return{splice(X,Y,Z){$.splice(X,Y,Z.map((Q)=>J.map(Q)))},updateElementHeight(X,Y){$.updateElementHeight(X,Y)}}}function O30(J,$){return{...$,identityProvider:$.identityProvider&&{getId(X){return $.identityProvider.getId(J(X))}},sorter:$.sorter&&{compare(X,Y){return $.sorter.compare(X.elements[0],Y.elements[0])}},filter:$.filter&&{filter(X,Y){return $.filter.filter(J(X),Y)}}}}class ex{get onDidSplice(){return q0.map(this.model.onDidSplice,({insertedNodes:J,deletedNodes:$})=>({insertedNodes:J.map((X)=>this.nodeMapper.map(X)),deletedNodes:$.map((X)=>this.nodeMapper.map(X))}))}get onDidChangeCollapseState(){return q0.map(this.model.onDidChangeCollapseState,({node:J,deep:$})=>({node:this.nodeMapper.map(J),deep:$}))}get onDidChangeRenderNodeCount(){return q0.map(this.model.onDidChangeRenderNodeCount,(J)=>this.nodeMapper.map(J))}constructor(J,$,X={}){this.rootRef=null,this.elementMapper=X.elementMapper||R30;let Y=(Z)=>this.elementMapper(Z.elements);this.nodeMapper=new iz((Z)=>new tx(Y,Z)),this.model=new _e(J,M30(this.nodeMapper,$),O30(Y,X))}setChildren(J,$=A1.empty(),X={}){this.model.setChildren(J,$,X)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(J){this.model.setCompressionEnabled(J)}has(J){return this.model.has(J)}getListIndex(J){return this.model.getListIndex(J)}getListRenderCount(J){return this.model.getListRenderCount(J)}getNode(J){return this.nodeMapper.map(this.model.getNode(J))}getNodeLocation(J){return J.element}getParentNodeLocation(J){return this.model.getParentNodeLocation(J)}getFirstElementChild(J){let $=this.model.getFirstElementChild(J);if($===null||typeof $>"u")return $;return this.elementMapper($.elements)}isCollapsible(J){return this.model.isCollapsible(J)}setCollapsible(J,$){return this.model.setCollapsible(J,$)}isCollapsed(J){return this.model.isCollapsed(J)}setCollapsed(J,$,X){return this.model.setCollapsed(J,$,X)}expandTo(J){return this.model.expandTo(J)}rerender(J){return this.model.rerender(J)}refilter(){return this.model.refilter()}getCompressedTreeNode(J=null){return this.model.getNode(J)}}var D30=(J)=>({getId($){return $.elements.map((X)=>J.getId(X).toString()).join("\x00")}}),R30=(J)=>J[J.length-1];var Ne=w(()=>{hM();nz();V1();_0();P4()});class Jb{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(J,$,X){if(this._compressedTreeNodeProvider=J,this.stickyScrollDelegate=$,this.renderer=X,this.templateId=X.templateId,X.onDidChangeTwistieState)this.onDidChangeTwistieState=X.onDidChangeTwistieState}renderTemplate(J){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(J)}}renderElement(J,$,X,Y){let Z=this.stickyScrollDelegate.getCompressedNode(J);if(!Z)Z=this.compressedTreeNodeProvider.getCompressedTreeNode(J.element);if(Z.element.elements.length===1)X.compressedTreeNode=void 0,this.renderer.renderElement(J,$,X.data,Y);else X.compressedTreeNode=Z,this.renderer.renderCompressedElements(Z,$,X.data,Y)}disposeElement(J,$,X,Y){var Z,Q,G,q;if(X.compressedTreeNode)(Q=(Z=this.renderer).disposeCompressedElements)===null||Q===void 0||Q.call(Z,X.compressedTreeNode,$,X.data,Y);else(q=(G=this.renderer).disposeElement)===null||q===void 0||q.call(G,J,$,X.data,Y)}disposeTemplate(J){this.renderer.disposeTemplate(J.data)}renderTwistie(J,$){if(this.renderer.renderTwistie)return this.renderer.renderTwistie(J,$);return!1}}class Te{constructor(J){this.modelProvider=J,this.compressedStickyNodes=new Map}getCompressedNode(J){return this.compressedStickyNodes.get(J)}constrainStickyScrollNodes(J,$,X){if(this.compressedStickyNodes.clear(),J.length===0)return[];for(let Y=0;Y<J.length;Y++){let Z=J[Y],Q=Z.position+Z.height;if(Y+1<J.length&&Q+J[Y+1].height>X||Y>=$-1&&$<J.length){let q=J.slice(0,Y),U=J.slice(Y),z=this.compressStickyNodes(U);return[...q,z]}}return J}compressStickyNodes(J){if(J.length===0)throw Error("Can't compress empty sticky nodes");if(!this.modelProvider().isCompressionEnabled())return J[0];let $=[];for(let q of J){let U=this.modelProvider().getCompressedTreeNode(q.node.element);if(U.element){if(U.element.incompressible)break;$.push(...U.element.elements)}}if($.length<2)return J[0];let X=J[J.length-1],Y={elements:$,incompressible:!1},Z={...X.node,children:[],element:Y},Q=new Proxy(J[0].node,{}),G={node:Q,startIndex:J[0].startIndex,endIndex:X.endIndex,position:J[0].position,height:J[0].height};return this.compressedStickyNodes.set(Q,Z),G}}function N30(J,$){return $&&{...$,keyboardNavigationLabelProvider:$.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(X){let Y;try{Y=J().getCompressedTreeNode(X)}catch(Z){return $.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(X)}if(Y.element.elements.length===1)return $.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(X);else return $.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(Y.element.elements)}}}}var _30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},oz,zB;var $b=w(()=>{UB();Ne();hM();P4();oz=class oz extends qB{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(J,$,X,Y,Z={}){super(J,$,X,Y,Z);this.user=J}setChildren(J,$=A1.empty(),X){this.model.setChildren(J,$,X)}rerender(J){if(J===void 0){this.view.rerender();return}this.model.rerender(J)}hasElement(J){return this.model.has(J)}createModel(J,$,X){return new o3(J,$,X)}};_30([F6],Jb.prototype,"compressedTreeNodeProvider",null);zB=class zB extends oz{constructor(J,$,X,Y,Z={}){let Q=()=>this,G=new Te(()=>this.model),q=Y.map((U)=>new Jb(Q,G,U));super(J,$,X,q,{...N30(Q,Z),stickyScrollDelegate:G})}setChildren(J,$=A1.empty(),X){this.model.setChildren(J,$,X)}createModel(J,$,X){return new ex(J,$,X)}updateOptions(J={}){if(super.updateOptions(J),typeof J.compressionEnabled<"u")this.model.setCompressionEnabled(J.compressionEnabled)}getCompressedTreeNode(J=null){return this.model.getCompressedTreeNode(J)}}});function Xb(J){return{...J,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function Zb(J,$){if(!$.parent)return!1;else if($.parent===J)return!0;else return Zb(J,$.parent)}function T30(J,$){return J===$||Zb(J,$)||Zb($,J)}class Gb{get element(){return this.node.element.element}get children(){return this.node.children.map((J)=>new Gb(J))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(J){this.node=J}}class ke{constructor(J,$,X){this.renderer=J,this.nodeMapper=$,this.onDidChangeTwistieState=X,this.renderedNodes=new Map,this.templateId=J.templateId}renderTemplate(J){return{templateData:this.renderer.renderTemplate(J)}}renderElement(J,$,X,Y){this.renderer.renderElement(this.nodeMapper.map(J),$,X.templateData,Y)}renderTwistie(J,$){if(J.slow)return $.classList.add(...h0.asClassNameArray(F0.treeItemLoading)),!0;else return $.classList.remove(...h0.asClassNameArray(F0.treeItemLoading)),!1}disposeElement(J,$,X,Y){var Z,Q;(Q=(Z=this.renderer).disposeElement)===null||Q===void 0||Q.call(Z,this.nodeMapper.map(J),$,X.templateData,Y)}disposeTemplate(J){this.renderer.disposeTemplate(J.templateData)}dispose(){this.renderedNodes.clear()}}function we(J){return{browserEvent:J.browserEvent,elements:J.elements.map(($)=>$.element)}}function Le(J){return{browserEvent:J.browserEvent,element:J.element&&J.element.element,target:J.target}}function Yb(J){if(J instanceof A2)return new Ee(J);return J}class Ie{constructor(J){this.dnd=J}getDragURI(J){return this.dnd.getDragURI(J.element)}getDragLabel(J,$){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(J.map((X)=>X.element),$);return}onDragStart(J,$){var X,Y;(Y=(X=this.dnd).onDragStart)===null||Y===void 0||Y.call(X,Yb(J),$)}onDragOver(J,$,X,Y,Z,Q=!0){return this.dnd.onDragOver(Yb(J),$&&$.element,X,Y,Z)}drop(J,$,X,Y,Z){this.dnd.drop(Yb(J),$&&$.element,X,Y,Z)}onDragEnd(J){var $,X;(X=($=this.dnd).onDragEnd)===null||X===void 0||X.call($,J)}dispose(){this.dnd.dispose()}}function ye(J){return J&&{...J,collapseByDefault:!0,identityProvider:J.identityProvider&&{getId($){return J.identityProvider.getId($.element)}},dnd:J.dnd&&new Ie(J.dnd),multipleSelectionController:J.multipleSelectionController&&{isSelectionSingleChangeEvent($){return J.multipleSelectionController.isSelectionSingleChangeEvent({...$,element:$.element})},isSelectionRangeChangeEvent($){return J.multipleSelectionController.isSelectionRangeChangeEvent({...$,element:$.element})}},accessibilityProvider:J.accessibilityProvider&&{...J.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:J.accessibilityProvider.getRole?($)=>{return J.accessibilityProvider.getRole($.element)}:()=>"treeitem",isChecked:J.accessibilityProvider.isChecked?($)=>{var X;return!!((X=J.accessibilityProvider)===null||X===void 0?void 0:X.isChecked($.element))}:void 0,getAriaLabel($){return J.accessibilityProvider.getAriaLabel($.element)},getWidgetAriaLabel(){return J.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:J.accessibilityProvider.getWidgetRole?()=>J.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:J.accessibilityProvider.getAriaLevel&&(($)=>{return J.accessibilityProvider.getAriaLevel($.element)}),getActiveDescendantId:J.accessibilityProvider.getActiveDescendantId&&(($)=>{return J.accessibilityProvider.getActiveDescendantId($.element)})},filter:J.filter&&{filter($,X){return J.filter.filter($.element,X)}},keyboardNavigationLabelProvider:J.keyboardNavigationLabelProvider&&{...J.keyboardNavigationLabelProvider,getKeyboardNavigationLabel($){return J.keyboardNavigationLabelProvider.getKeyboardNavigationLabel($.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof J.expandOnlyOnTwistieClick>"u"?void 0:typeof J.expandOnlyOnTwistieClick!=="function"?J.expandOnlyOnTwistieClick:($)=>J.expandOnlyOnTwistieClick($.element),defaultFindVisibility:($)=>{if($.hasChildren&&$.stale)return 1;else if(typeof J.defaultFindVisibility==="number")return J.defaultFindVisibility;else if(typeof J.defaultFindVisibility>"u")return 2;else return J.defaultFindVisibility($.element)}}}function Qb(J,$){$(J),J.children.forEach((X)=>Qb(X,$))}class pM{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return q0.map(this.tree.onDidChangeFocus,we)}get onDidChangeSelection(){return q0.map(this.tree.onDidChangeSelection,we)}get onMouseDblClick(){return q0.map(this.tree.onMouseDblClick,Le)}get onPointer(){return q0.map(this.tree.onPointer,Le)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(J,$,X,Y,Z,Q={}){if(this.user=J,this.dataSource=Z,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new x,this._onDidChangeNodeSlowState=new x,this.nodeMapper=new iz((G)=>new Gb(G)),this.disposables=new $0,this.identityProvider=Q.identityProvider,this.autoExpandSingleChildren=typeof Q.autoExpandSingleChildren>"u"?!1:Q.autoExpandSingleChildren,this.sorter=Q.sorter,this.getDefaultCollapseState=(G)=>Q.collapseByDefault?Q.collapseByDefault(G)?q9.PreserveOrCollapsed:q9.PreserveOrExpanded:void 0,this.tree=this.createTree(J,$,X,Y,Q),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=Xb({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider)this.root={...this.root,id:null};this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(J,$,X,Y,Z){let Q=new GB(X),G=Y.map((U)=>new ke(U,this.nodeMapper,this._onDidChangeNodeSlowState.event)),q=ye(Z)||{};return new oz(J,$,Q,G,q)}updateOptions(J={}){this.tree.updateOptions(J)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(J){this.tree.scrollTop=J}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(J,$){this.tree.layout(J,$)}style(J){this.tree.style(J)}getInput(){return this.root.element}async setInput(J,$){this.refreshPromises.forEach((Y)=>Y.cancel()),this.refreshPromises.clear(),this.root.element=J;let X=$&&{viewState:$,focus:[],selection:[]};if(await this._updateChildren(J,!0,!1,X),X)this.tree.setFocus(X.focus),this.tree.setSelection(X.selection);if($&&typeof $.scrollTop==="number")this.scrollTop=$.scrollTop}async _updateChildren(J=this.root.element,$=!0,X=!1,Y,Z){if(typeof this.root.element>"u")throw new o8(this.user,"Tree input not set");if(this.root.refreshPromise)await this.root.refreshPromise,await q0.toPromise(this._onDidRender.event);let Q=this.getDataNode(J);if(await this.refreshAndRenderNode(Q,$,Y,Z),X)try{this.tree.rerender(Q)}catch(G){}}rerender(J){if(J===void 0||J===this.root.element){this.tree.rerender();return}let $=this.getDataNode(J);this.tree.rerender($)}getNode(J=this.root.element){let $=this.getDataNode(J),X=this.tree.getNode($===this.root?null:$);return this.nodeMapper.map(X)}collapse(J,$=!1){let X=this.getDataNode(J);return this.tree.collapse(X===this.root?null:X,$)}async expand(J,$=!1){if(typeof this.root.element>"u")throw new o8(this.user,"Tree input not set");if(this.root.refreshPromise)await this.root.refreshPromise,await q0.toPromise(this._onDidRender.event);let X=this.getDataNode(J);if(this.tree.hasElement(X)&&!this.tree.isCollapsible(X))return!1;if(X.refreshPromise)await this.root.refreshPromise,await q0.toPromise(this._onDidRender.event);if(X!==this.root&&!X.refreshPromise&&!this.tree.isCollapsed(X))return!1;let Y=this.tree.expand(X===this.root?null:X,$);if(X.refreshPromise)await this.root.refreshPromise,await q0.toPromise(this._onDidRender.event);return Y}setSelection(J,$){let X=J.map((Y)=>this.getDataNode(Y));this.tree.setSelection(X,$)}getSelection(){return this.tree.getSelection().map(($)=>$.element)}setFocus(J,$){let X=J.map((Y)=>this.getDataNode(Y));this.tree.setFocus(X,$)}getFocus(){return this.tree.getFocus().map(($)=>$.element)}reveal(J,$){this.tree.reveal(this.getDataNode(J),$)}getParentElement(J){let $=this.tree.getParentElement(this.getDataNode(J));return $&&$.element}getFirstElementChild(J=this.root.element){let $=this.getDataNode(J),X=this.tree.getFirstElementChild($===this.root?null:$);return X&&X.element}getDataNode(J){let $=this.nodes.get(J===this.root.element?null:J);if(!$)throw new o8(this.user,`Data tree node not found: ${J}`);return $}async refreshAndRenderNode(J,$,X,Y){if(await this.refreshNode(J,$,X),this.disposables.isDisposed)return;this.render(J,X,Y)}async refreshNode(J,$,X){let Y;if(this.subTreeRefreshPromises.forEach((Z,Q)=>{if(!Y&&T30(Q,J))Y=Z.then(()=>this.refreshNode(J,$,X))}),Y)return Y;if(J!==this.root){if(this.tree.getNode(J).collapsed){J.hasChildren=!!this.dataSource.hasChildren(J.element),J.stale=!0;return}}return this.doRefreshSubTree(J,$,X)}async doRefreshSubTree(J,$,X){let Y;J.refreshPromise=new Promise((Z)=>Y=Z),this.subTreeRefreshPromises.set(J,J.refreshPromise),J.refreshPromise.finally(()=>{J.refreshPromise=void 0,this.subTreeRefreshPromises.delete(J)});try{let Z=await this.doRefreshNode(J,$,X);J.stale=!1,await aA.settled(Z.map((Q)=>this.doRefreshSubTree(Q,$,X)))}finally{Y()}}async doRefreshNode(J,$,X){J.hasChildren=!!this.dataSource.hasChildren(J.element);let Y;if(!J.hasChildren)Y=Promise.resolve(A1.empty());else{let Z=this.doGetChildren(J);if(MN(Z))Y=Promise.resolve(Z);else{let Q=mY(800);Q.then(()=>{J.slow=!0,this._onDidChangeNodeSlowState.fire(J)},(G)=>null),Y=Z.finally(()=>Q.cancel())}}try{let Z=await Y;return this.setChildren(J,Z,$,X)}catch(Z){if(J!==this.root&&this.tree.hasElement(J))this.tree.collapse(J);if(GX(Z))return[];throw Z}finally{if(J.slow)J.slow=!1,this._onDidChangeNodeSlowState.fire(J)}}doGetChildren(J){let $=this.refreshPromises.get(J);if($)return $;let X=this.dataSource.getChildren(J.element);if(MN(X))return this.processChildren(X);else return $=bG(async()=>this.processChildren(await X)),this.refreshPromises.set(J,$),$.finally(()=>{this.refreshPromises.delete(J)})}_onDidChangeCollapseState({node:J,deep:$}){if(J.element===null)return;if(!J.collapsed&&J.element.stale)if($)this.collapse(J.element.element);else this.refreshAndRenderNode(J.element,!1).catch($1)}setChildren(J,$,X,Y){let Z=[...$];if(J.children.length===0&&Z.length===0)return[];let Q=new Map,G=new Map;for(let z of J.children)if(Q.set(z.element,z),this.identityProvider)G.set(z.id,{node:z,collapsed:this.tree.hasElement(z)&&this.tree.isCollapsed(z)});let q=[],U=Z.map((z)=>{let H=!!this.dataSource.hasChildren(z);if(!this.identityProvider){let B=Xb({element:z,parent:J,hasChildren:H,defaultCollapseState:this.getDefaultCollapseState(z)});if(H&&B.defaultCollapseState===q9.PreserveOrExpanded)q.push(B);return B}let j=this.identityProvider.getId(z).toString(),V=G.get(j);if(V){let B=V.node;if(Q.delete(B.element),this.nodes.delete(B.element),this.nodes.set(z,B),B.element=z,B.hasChildren=H,X)if(V.collapsed)B.children.forEach((K)=>Qb(K,(P)=>this.nodes.delete(P.element))),B.children.splice(0,B.children.length),B.stale=!0;else q.push(B);else if(H&&!V.collapsed)q.push(B);return B}let W=Xb({element:z,parent:J,id:j,hasChildren:H,defaultCollapseState:this.getDefaultCollapseState(z)});if(Y&&Y.viewState.focus&&Y.viewState.focus.indexOf(j)>-1)Y.focus.push(W);if(Y&&Y.viewState.selection&&Y.viewState.selection.indexOf(j)>-1)Y.selection.push(W);if(Y&&Y.viewState.expanded&&Y.viewState.expanded.indexOf(j)>-1)q.push(W);else if(H&&W.defaultCollapseState===q9.PreserveOrExpanded)q.push(W);return W});for(let z of Q.values())Qb(z,(H)=>this.nodes.delete(H.element));for(let z of U)this.nodes.set(z.element,z);if(J.children.splice(0,J.children.length,...U),J!==this.root&&this.autoExpandSingleChildren&&U.length===1&&q.length===0)U[0].forceExpanded=!0,q.push(U[0]);return q}render(J,$,X){let Y=J.children.map((Q)=>this.asTreeElement(Q,$)),Z=X&&{...X,diffIdentityProvider:X.diffIdentityProvider&&{getId(Q){return X.diffIdentityProvider.getId(Q.element)}}};if(this.tree.setChildren(J===this.root?null:J,Y,Z),J!==this.root)this.tree.setCollapsible(J,J.hasChildren);this._onDidRender.fire()}asTreeElement(J,$){if(J.stale)return{element:J,collapsible:J.hasChildren,collapsed:!0};let X;if($&&$.viewState.expanded&&J.id&&$.viewState.expanded.indexOf(J.id)>-1)X=!1;else if(J.forceExpanded)X=!1,J.forceExpanded=!1;else X=J.defaultCollapseState;return{element:J,children:J.hasChildren?A1.map(J.children,(Y)=>this.asTreeElement(Y,$)):[],collapsible:J.hasChildren,collapsed:X}}processChildren(J){if(this.sorter)J=[...J].sort(this.sorter.compare.bind(this.sorter));return J}dispose(){this.disposables.dispose(),this.tree.dispose()}}class qb{get element(){return{elements:this.node.element.elements.map((J)=>J.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((J)=>new qb(J))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(J){this.node=J}}class xe{constructor(J,$,X,Y){this.renderer=J,this.nodeMapper=$,this.compressibleNodeMapperProvider=X,this.onDidChangeTwistieState=Y,this.renderedNodes=new Map,this.disposables=[],this.templateId=J.templateId}renderTemplate(J){return{templateData:this.renderer.renderTemplate(J)}}renderElement(J,$,X,Y){this.renderer.renderElement(this.nodeMapper.map(J),$,X.templateData,Y)}renderCompressedElements(J,$,X,Y){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(J),$,X.templateData,Y)}renderTwistie(J,$){if(J.slow)return $.classList.add(...h0.asClassNameArray(F0.treeItemLoading)),!0;else return $.classList.remove(...h0.asClassNameArray(F0.treeItemLoading)),!1}disposeElement(J,$,X,Y){var Z,Q;(Q=(Z=this.renderer).disposeElement)===null||Q===void 0||Q.call(Z,this.nodeMapper.map(J),$,X.templateData,Y)}disposeCompressedElements(J,$,X,Y){var Z,Q;(Q=(Z=this.renderer).disposeCompressedElements)===null||Q===void 0||Q.call(Z,this.compressibleNodeMapperProvider().map(J),$,X.templateData,Y)}disposeTemplate(J){this.renderer.disposeTemplate(J.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=h1(this.disposables)}}function w30(J){let $=J&&ye(J);return $&&{...$,keyboardNavigationLabelProvider:$.keyboardNavigationLabelProvider&&{...$.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(X){return J.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(X.map((Y)=>Y.element))}}}}function L30(J){if(typeof J==="boolean")return J?1:0;else if(YB(J))return n3(J.visibility);else return n3(J)}var Ee,Ub;var be=w(()=>{BM();UB();SM();$b();nz();e1();k5();I5();O1();_0();P4();z0();Ee=class Ee extends A2{constructor(J){super(J.elements.map(($)=>$.element));this.data=J}};Ub=class Ub extends pM{constructor(J,$,X,Y,Z,Q,G={}){super(J,$,X,Z,Q,G);this.compressionDelegate=Y,this.compressibleNodeMapper=new iz((q)=>new qb(q)),this.filter=G.filter}createTree(J,$,X,Y,Z){let Q=new GB(X),G=Y.map((U)=>new xe(U,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),q=w30(Z)||{};return new zB(J,$,Q,G,q)}asTreeElement(J,$){return{incompressible:this.compressionDelegate.isIncompressible(J.element),...super.asTreeElement(J,$)}}updateOptions(J={}){this.tree.updateOptions(J)}render(J,$,X){if(!this.identityProvider)return super.render(J,$);let Y=(V)=>this.identityProvider.getId(V).toString(),Z=(V)=>{let W=new Set;for(let B of V){let K=this.tree.getCompressedTreeNode(B===this.root?null:B);if(!K.element)continue;for(let P of K.element.elements)W.add(Y(P.element))}return W},Q=Z(this.tree.getSelection()),G=Z(this.tree.getFocus());super.render(J,$,X);let q=this.getSelection(),U=!1,z=this.getFocus(),H=!1,j=(V)=>{let W=V.element;if(W)for(let B=0;B<W.elements.length;B++){let K=Y(W.elements[B].element),P=W.elements[W.elements.length-1].element;if(Q.has(K)&&q.indexOf(P)===-1)q.push(P),U=!0;if(G.has(K)&&z.indexOf(P)===-1)z.push(P),H=!0}V.children.forEach(j)};if(j(this.tree.getCompressedTreeNode(J===this.root?null:J)),U)this.setSelection(q);if(H)this.setFocus(z)}processChildren(J){if(this.filter)J=A1.filter(J,($)=>{let X=this.filter.filter($,1),Y=L30(X);if(Y===2)throw Error("Recursive tree visibility not supported in async data compressed trees");return Y===1});return super.processChildren(J)}}});var zb;var Se=w(()=>{UB();hM();zb=class zb extends qB{constructor(J,$,X,Y,Z,Q={}){super(J,$,X,Y,Q);this.user=J,this.dataSource=Z,this.identityProvider=Q.identityProvider}createModel(J,$,X){return new o3(J,$,X)}}});var e51,J81,$81,X81,Y81,Z81,Q81,G81,q81,Hb="inputFocus",U81;var Ce=w(()=>{L1();c0();t1();e51=new A0("isMac",t0,F("isMac","Whether the operating system is macOS")),J81=new A0("isLinux",N6,F("isLinux","Whether the operating system is Linux")),$81=new A0("isWindows",p6,F("isWindows","Whether the operating system is Windows")),X81=new A0("isWeb",YX,F("isWeb","Whether the platform is a web browser")),Y81=new A0("isMacNative",t0&&!YX,F("isMacNative","Whether the operating system is macOS on a non-browser platform")),Z81=new A0("isIOS",A4,F("isIOS","Whether the operating system is iOS")),Q81=new A0("isMobile",VK,F("isMobile","Whether the platform is a mobile web browser")),G81=new A0("isDevelopment",!1,!0),q81=new A0("productQualityType","",F("productQualityType","Quality type of VS Code")),U81=new A0(Hb,!1,F("inputFocus","Whether keyboard focus is inside an input box"))});class jb{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new $0,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(J){var $,X;if(J===this._lastFocusedWidget)return;($=this._lastFocusedWidget)===null||$===void 0||$.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=J,(X=this._lastFocusedWidget)===null||X===void 0||X.getHTMLElement().classList.add("last-focused")}register(J,$){if(!this._hasCreatedStyleController)this._hasCreatedStyleController=!0,new AM(p5(),"").style(a3);if(this.lists.some((Y)=>Y.widget===J))throw Error("Cannot register the same widget multiple times");let X={widget:J,extraContextKeys:$};if(this.lists.push(X),fG(J.getHTMLElement()))this.setLastFocusedList(J);return G7(J.onDidFocus(()=>this.setLastFocusedList(J)),N0(()=>this.lists.splice(this.lists.indexOf(X),1)),J.onDidDispose(()=>{if(this.lists=this.lists.filter((Y)=>Y!==X),this._lastFocusedWidget===J)this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}function nM(J,$){let X=J.createScoped($.getHTMLElement());return ce.bindTo(X),X}function oM(J,$){let X=HB.bindTo(J),Y=()=>{let Z=$.scrollTop===0,Q=$.scrollHeight-$.renderHeight-$.scrollTop<1;if(Z&&Q)X.set("both");else if(Z)X.set("top");else if(Q)X.set("bottom");else X.set("none")};return Y(),$.onDidScroll(Y)}function GY(J){return J.getValue(e3)==="alt"}function tM(J,$){var X;let Y=J.get(g1),Z=J.get($5),Q=new $0;return[{...$,keyboardNavigationDelegate:{mightProducePrintableCharacter(q){return Z.mightProducePrintableCharacter(q)}},smoothScrolling:Boolean(Y.getValue(p$)),mouseWheelScrollSensitivity:Y.getValue(ZY),fastScrollSensitivity:Y.getValue(QY),multipleSelectionController:(X=$.multipleSelectionController)!==null&&X!==void 0?X:Q.add(new ae(Y)),keyboardNavigationEventFilter:S30(Z),scrollByPage:Boolean(Y.getValue(g$))},Q]}function S30(J){let $=!1;return(X)=>{if(X.toKeyCodeChord().isModifierKey())return!1;if($)return $=!1,!1;let Y=J.softDispatch(X,X.target);if(Y.kind===1)return $=!0,!1;return $=!1,Y.kind===0}}function ne(J){let $=J.getValue(Fb);if($==="highlight")return YY.Highlight;else if($==="filter")return YY.Filter;let X=J.getValue(uM);if(X==="simple"||X==="highlight")return YY.Highlight;else if(X==="filter")return YY.Filter;return}function oe(J){let $=J.getValue(Ab);if($==="fuzzy")return D2.Fuzzy;else if($==="contiguous")return D2.Contiguous;return}function VB(J,$){var X;let Y=J.get(g1),Z=J.get(S$),Q=J.get(m0),G=J.get(l0),q=()=>{let W=Q.getContextKeyValue(de);if(W==="automatic")return C$.Automatic;else if(W==="trigger")return C$.Trigger;if(Q.getContextKeyValue(se)===!1)return C$.Trigger;let K=Y.getValue(Kb);if(K==="automatic")return C$.Automatic;else if(K==="trigger")return C$.Trigger;return},U=$.horizontalScrolling!==void 0?$.horizontalScrolling:Boolean(Y.getValue(c4)),[z,H]=G.invokeFunction(tM,$),j=$.paddingBottom,V=$.renderIndentGuides!==void 0?$.renderIndentGuides:Y.getValue(cM);return{getTypeNavigationMode:q,disposable:H,options:{keyboardSupport:!1,...z,indent:typeof Y.getValue(jB)==="number"?Y.getValue(jB):void 0,renderIndentGuides:V,smoothScrolling:Boolean(Y.getValue(p$)),defaultFindMode:ne(Y),defaultFindMatchType:oe(Y),horizontalScrolling:U,scrollByPage:Boolean(Y.getValue(g$)),paddingBottom:j,hideTwistiesOfChildlessElements:$.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(X=$.expandOnlyOnTwistieClick)!==null&&X!==void 0?X:Y.getValue(lM)==="doubleClick",contextViewProvider:Z,findWidgetStyles:At,enableStickyScroll:Boolean(Y.getValue(dM)),stickyScrollMaxItemCount:Number(Y.getValue(sM))}}}var gZ=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},W6=function(J,$){return function(X,Y){$(X,Y,J)}},m$,HB,I81,y81,ce,le,rM,x81,Vb,Wb,Bb,iM,k30,E30,I30,y30,x30,b30,de="listTypeNavigationMode",se="listAutomaticKeyboardNavigation",e3="workbench.list.multiSelectModifier",mM="workbench.list.openMode",c4="workbench.list.horizontalScrolling",Fb="workbench.list.defaultFindMode",Kb="workbench.list.typeNavigationMode",uM="workbench.list.keyboardNavigation",g$="workbench.list.scrollByPage",Ab="workbench.list.defaultFindMatchType",jB="workbench.tree.indent",cM="workbench.tree.renderIndentGuides",p$="workbench.list.smoothScrolling",ZY="workbench.list.mouseWheelScrollSensitivity",QY="workbench.list.fastScrollSensitivity",lM="workbench.tree.expandMode",dM="workbench.tree.enableStickyScroll",sM="workbench.tree.stickyScrollMaxItemCount",ae,aM,ve,he,eM,Pb,re,ie,fe,ge,pe,me,ue,t3=class{get onDidOpen(){return this.navigator.onDidOpen}constructor($,X,Y,Z,Q,G,q){var U;this.tree=$,this.disposables=[],this.contextKeyService=nM(Q,$),this.disposables.push(oM(this.contextKeyService,$)),this.listSupportsMultiSelect=rM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(X.multipleSelectionSupport!==!1),iM.bindTo(this.contextKeyService).set(Boolean(X.selectionNavigation)),this.listSupportFindWidget=k30.bindTo(this.contextKeyService),this.listSupportFindWidget.set((U=X.findWidgetEnabled)!==null&&U!==void 0?U:!0),this.hasSelectionOrFocus=Vb.bindTo(this.contextKeyService),this.hasDoubleSelection=Wb.bindTo(this.contextKeyService),this.hasMultiSelection=Bb.bindTo(this.contextKeyService),this.treeElementCanCollapse=E30.bindTo(this.contextKeyService),this.treeElementHasParent=I30.bindTo(this.contextKeyService),this.treeElementCanExpand=y30.bindTo(this.contextKeyService),this.treeElementHasChild=x30.bindTo(this.contextKeyService),this.treeFindOpen=b30.bindTo(this.contextKeyService),this.treeStickyScrollFocused=le.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=GY(q),this.updateStyleOverrides(Z);let H=()=>{let V=$.getFocus()[0];if(!V)return;let W=$.getNode(V);this.treeElementCanCollapse.set(W.collapsible&&!W.collapsed),this.treeElementHasParent.set(!!$.getParentElement(V)),this.treeElementCanExpand.set(W.collapsible&&W.collapsed),this.treeElementHasChild.set(!!$.getFirstElementChild(V))},j=new Set;j.add(de),j.add(se),this.disposables.push(this.contextKeyService,G.register($),$.onDidChangeSelection(()=>{let V=$.getSelection(),W=$.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(V.length>0||W.length>0),this.hasMultiSelection.set(V.length>1),this.hasDoubleSelection.set(V.length===2)})}),$.onDidChangeFocus(()=>{let V=$.getSelection(),W=$.getFocus();this.hasSelectionOrFocus.set(V.length>0||W.length>0),H()}),$.onDidChangeCollapseState(H),$.onDidChangeModel(H),$.onDidChangeFindOpenState((V)=>this.treeFindOpen.set(V)),$.onDidChangeStickyScrollFocused((V)=>this.treeStickyScrollFocused.set(V)),q.onDidChangeConfiguration((V)=>{let W={};if(V.affectsConfiguration(e3))this._useAltAsMultipleSelectionModifier=GY(q);if(V.affectsConfiguration(jB)){let B=q.getValue(jB);W={...W,indent:B}}if(V.affectsConfiguration(cM)&&X.renderIndentGuides===void 0){let B=q.getValue(cM);W={...W,renderIndentGuides:B}}if(V.affectsConfiguration(p$)){let B=Boolean(q.getValue(p$));W={...W,smoothScrolling:B}}if(V.affectsConfiguration(Fb)||V.affectsConfiguration(uM)){let B=ne(q);W={...W,defaultFindMode:B}}if(V.affectsConfiguration(Kb)||V.affectsConfiguration(uM)){let B=Y();W={...W,typeNavigationMode:B}}if(V.affectsConfiguration(Ab)){let B=oe(q);W={...W,defaultFindMatchType:B}}if(V.affectsConfiguration(c4)&&X.horizontalScrolling===void 0){let B=Boolean(q.getValue(c4));W={...W,horizontalScrolling:B}}if(V.affectsConfiguration(g$)){let B=Boolean(q.getValue(g$));W={...W,scrollByPage:B}}if(V.affectsConfiguration(lM)&&X.expandOnlyOnTwistieClick===void 0)W={...W,expandOnlyOnTwistieClick:q.getValue(lM)==="doubleClick"};if(V.affectsConfiguration(dM)){let B=q.getValue(dM);W={...W,enableStickyScroll:B}}if(V.affectsConfiguration(sM)){let B=Math.max(1,q.getValue(sM));W={...W,stickyScrollMaxItemCount:B}}if(V.affectsConfiguration(ZY)){let B=q.getValue(ZY);W={...W,mouseWheelScrollSensitivity:B}}if(V.affectsConfiguration(QY)){let B=q.getValue(QY);W={...W,fastScrollSensitivity:B}}if(Object.keys(W).length>0)$.updateOptions(W)}),this.contextKeyService.onDidChangeContext((V)=>{if(V.affectsSome(j))$.updateOptions({typeNavigationMode:Y()})})),this.navigator=new ie($,{configurationService:q,...X}),this.disposables.push(this.navigator)}updateOptions($){if($.multipleSelectionSupport!==void 0)this.listSupportsMultiSelect.set(!!$.multipleSelectionSupport)}updateStyleOverrides($){this.tree.style($?hZ($):a3)}dispose(){this.disposables=h1(this.disposables)}},C30;var Db=w(()=>{T0();dt();m3();$e();UB();be();Se();$b();_0();z0();c0();H7();dG();t1();Ce();IZ();s0();EJ();h7();mz();m$=w0("listService");HB=new A0("listScrollAtBoundary","none"),I81=E0.or(HB.isEqualTo("top"),HB.isEqualTo("both")),y81=E0.or(HB.isEqualTo("bottom"),HB.isEqualTo("both")),ce=new A0("listFocus",!0),le=new A0("treestickyScrollFocused",!1),rM=new A0("listSupportsMultiselect",!0),x81=E0.and(ce,E0.not(Hb),le.negate()),Vb=new A0("listHasSelectionOrFocus",!1),Wb=new A0("listDoubleSelection",!1),Bb=new A0("listMultiSelection",!1),iM=new A0("listSelectionNavigation",!1),k30=new A0("listSupportsFind",!0),E30=new A0("treeElementCanCollapse",!1),I30=new A0("treeElementHasParent",!1),y30=new A0("treeElementCanExpand",!1),x30=new A0("treeElementHasChild",!1),b30=new A0("treeFindOpen",!1);ae=class ae extends m{constructor(J){super();this.configurationService=J,this.useAltAsMultipleSelectionModifier=GY(J),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((J)=>{if(J.affectsConfiguration(e3))this.useAltAsMultipleSelectionModifier=GY(this.configurationService)}))}isSelectionSingleChangeEvent(J){if(this.useAltAsMultipleSelectionModifier)return J.browserEvent.altKey;return Kx(J)}isSelectionRangeChangeEvent(J){return Ax(J)}};aM=class extends A7{constructor($,X,Y,Z,Q,G,q,U,z){let H=typeof Q.horizontalScrolling<"u"?Q.horizontalScrolling:Boolean(U.getValue(c4)),[j,V]=z.invokeFunction(tM,Q);super($,X,Y,Z,{keyboardSupport:!1,...j,horizontalScrolling:H});this.disposables.add(V),this.contextKeyService=nM(G,this),this.disposables.add(oM(this.contextKeyService,this)),this.listSupportsMultiSelect=rM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Q.multipleSelectionSupport!==!1),iM.bindTo(this.contextKeyService).set(Boolean(Q.selectionNavigation)),this.listHasSelectionOrFocus=Vb.bindTo(this.contextKeyService),this.listDoubleSelection=Wb.bindTo(this.contextKeyService),this.listMultiSelection=Bb.bindTo(this.contextKeyService),this.horizontalScrolling=Q.horizontalScrolling,this._useAltAsMultipleSelectionModifier=GY(U),this.disposables.add(this.contextKeyService),this.disposables.add(q.register(this)),this.updateStyles(Q.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let B=this.getSelection(),K=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(B.length>0||K.length>0),this.listMultiSelection.set(B.length>1),this.listDoubleSelection.set(B.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let B=this.getSelection(),K=this.getFocus();this.listHasSelectionOrFocus.set(B.length>0||K.length>0)})),this.disposables.add(U.onDidChangeConfiguration((B)=>{if(B.affectsConfiguration(e3))this._useAltAsMultipleSelectionModifier=GY(U);let K={};if(B.affectsConfiguration(c4)&&this.horizontalScrolling===void 0){let P=Boolean(U.getValue(c4));K={...K,horizontalScrolling:P}}if(B.affectsConfiguration(g$)){let P=Boolean(U.getValue(g$));K={...K,scrollByPage:P}}if(B.affectsConfiguration(p$)){let P=Boolean(U.getValue(p$));K={...K,smoothScrolling:P}}if(B.affectsConfiguration(ZY)){let P=U.getValue(ZY);K={...K,mouseWheelScrollSensitivity:P}}if(B.affectsConfiguration(QY)){let P=U.getValue(QY);K={...K,fastScrollSensitivity:P}}if(Object.keys(K).length>0)this.updateOptions(K)})),this.navigator=new Pb(this,{configurationService:U,...Q}),this.disposables.add(this.navigator)}updateOptions($){if(super.updateOptions($),$.overrideStyles!==void 0)this.updateStyles($.overrideStyles);if($.multipleSelectionSupport!==void 0)this.listSupportsMultiSelect.set(!!$.multipleSelectionSupport)}updateStyles($){this.style($?hZ($):a3)}};aM=gZ([W6(5,m0),W6(6,m$),W6(7,g1),W6(8,l0)],aM);ve=class extends fx{constructor($,X,Y,Z,Q,G,q,U,z){let H=typeof Q.horizontalScrolling<"u"?Q.horizontalScrolling:Boolean(U.getValue(c4)),[j,V]=z.invokeFunction(tM,Q);super($,X,Y,Z,{keyboardSupport:!1,...j,horizontalScrolling:H});this.disposables=new $0,this.disposables.add(V),this.contextKeyService=nM(G,this),this.disposables.add(oM(this.contextKeyService,this.widget)),this.horizontalScrolling=Q.horizontalScrolling,this.listSupportsMultiSelect=rM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Q.multipleSelectionSupport!==!1),iM.bindTo(this.contextKeyService).set(Boolean(Q.selectionNavigation)),this._useAltAsMultipleSelectionModifier=GY(U),this.disposables.add(this.contextKeyService),this.disposables.add(q.register(this)),this.updateStyles(Q.overrideStyles),this.disposables.add(U.onDidChangeConfiguration((B)=>{if(B.affectsConfiguration(e3))this._useAltAsMultipleSelectionModifier=GY(U);let K={};if(B.affectsConfiguration(c4)&&this.horizontalScrolling===void 0){let P=Boolean(U.getValue(c4));K={...K,horizontalScrolling:P}}if(B.affectsConfiguration(g$)){let P=Boolean(U.getValue(g$));K={...K,scrollByPage:P}}if(B.affectsConfiguration(p$)){let P=Boolean(U.getValue(p$));K={...K,smoothScrolling:P}}if(B.affectsConfiguration(ZY)){let P=U.getValue(ZY);K={...K,mouseWheelScrollSensitivity:P}}if(B.affectsConfiguration(QY)){let P=U.getValue(QY);K={...K,fastScrollSensitivity:P}}if(Object.keys(K).length>0)this.updateOptions(K)})),this.navigator=new Pb(this,{configurationService:U,...Q}),this.disposables.add(this.navigator)}updateOptions($){if(super.updateOptions($),$.overrideStyles!==void 0)this.updateStyles($.overrideStyles);if($.multipleSelectionSupport!==void 0)this.listSupportsMultiSelect.set(!!$.multipleSelectionSupport)}updateStyles($){this.style($?hZ($):a3)}dispose(){this.disposables.dispose(),super.dispose()}};ve=gZ([W6(5,m0),W6(6,m$),W6(7,g1),W6(8,l0)],ve);he=class extends eW{constructor($,X,Y,Z,Q,G,q,U,z,H){let j=typeof G.horizontalScrolling<"u"?G.horizontalScrolling:Boolean(z.getValue(c4)),[V,W]=H.invokeFunction(tM,G);super($,X,Y,Z,Q,{keyboardSupport:!1,...V,horizontalScrolling:j});this.disposables.add(W),this.contextKeyService=nM(q,this),this.disposables.add(oM(this.contextKeyService,this)),this.listSupportsMultiSelect=rM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(G.multipleSelectionSupport!==!1),iM.bindTo(this.contextKeyService).set(Boolean(G.selectionNavigation)),this.listHasSelectionOrFocus=Vb.bindTo(this.contextKeyService),this.listDoubleSelection=Wb.bindTo(this.contextKeyService),this.listMultiSelection=Bb.bindTo(this.contextKeyService),this.horizontalScrolling=G.horizontalScrolling,this._useAltAsMultipleSelectionModifier=GY(z),this.disposables.add(this.contextKeyService),this.disposables.add(U.register(this)),this.updateStyles(G.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let K=this.getSelection(),P=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(K.length>0||P.length>0),this.listMultiSelection.set(K.length>1),this.listDoubleSelection.set(K.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let K=this.getSelection(),P=this.getFocus();this.listHasSelectionOrFocus.set(K.length>0||P.length>0)})),this.disposables.add(z.onDidChangeConfiguration((K)=>{if(K.affectsConfiguration(e3))this._useAltAsMultipleSelectionModifier=GY(z);let P={};if(K.affectsConfiguration(c4)&&this.horizontalScrolling===void 0){let A=Boolean(z.getValue(c4));P={...P,horizontalScrolling:A}}if(K.affectsConfiguration(g$)){let A=Boolean(z.getValue(g$));P={...P,scrollByPage:A}}if(K.affectsConfiguration(p$)){let A=Boolean(z.getValue(p$));P={...P,smoothScrolling:A}}if(K.affectsConfiguration(ZY)){let A=z.getValue(ZY);P={...P,mouseWheelScrollSensitivity:A}}if(K.affectsConfiguration(QY)){let A=z.getValue(QY);P={...P,fastScrollSensitivity:A}}if(Object.keys(P).length>0)this.updateOptions(P)})),this.navigator=new re(this,{configurationService:z,...G}),this.disposables.add(this.navigator)}updateOptions($){if(super.updateOptions($),$.overrideStyles!==void 0)this.updateStyles($.overrideStyles);if($.multipleSelectionSupport!==void 0)this.listSupportsMultiSelect.set(!!$.multipleSelectionSupport)}updateStyles($){this.style($?hZ($):a3)}dispose(){this.disposables.dispose(),super.dispose()}};he=gZ([W6(6,m0),W6(7,m$),W6(8,g1),W6(9,l0)],he);eM=class eM extends m{constructor(J,$){var X;super();if(this.widget=J,this._onDidOpen=this._register(new x),this.onDidOpen=this._onDidOpen.event,this._register(q0.filter(this.widget.onDidChangeSelection,(Y)=>QU(Y.browserEvent))((Y)=>this.onSelectionFromKeyboard(Y))),this._register(this.widget.onPointer((Y)=>this.onPointer(Y.element,Y.browserEvent))),this._register(this.widget.onMouseDblClick((Y)=>this.onMouseDblClick(Y.element,Y.browserEvent))),typeof($===null||$===void 0?void 0:$.openOnSingleClick)!=="boolean"&&($===null||$===void 0?void 0:$.configurationService))this.openOnSingleClick=($===null||$===void 0?void 0:$.configurationService.getValue(mM))!=="doubleClick",this._register($===null||$===void 0?void 0:$.configurationService.onDidChangeConfiguration((Y)=>{if(Y.affectsConfiguration(mM))this.openOnSingleClick=($===null||$===void 0?void 0:$.configurationService.getValue(mM))!=="doubleClick"}));else this.openOnSingleClick=(X=$===null||$===void 0?void 0:$.openOnSingleClick)!==null&&X!==void 0?X:!0}onSelectionFromKeyboard(J){if(J.elements.length!==1)return;let $=J.browserEvent,X=typeof $.preserveFocus==="boolean"?$.preserveFocus:!0,Y=typeof $.pinned==="boolean"?$.pinned:!X,Z=!1;this._open(this.getSelectedElement(),X,Y,Z,J.browserEvent)}onPointer(J,$){if(!this.openOnSingleClick)return;if($.detail===2)return;let Y=$.button===1,Z=!0,Q=Y,G=$.ctrlKey||$.metaKey||$.altKey;this._open(J,Z,Q,G,$)}onMouseDblClick(J,$){if(!$)return;let X=$.target;if(X.classList.contains("monaco-tl-twistie")||X.classList.contains("monaco-icon-label")&&X.classList.contains("folder-icon")&&$.offsetX<16)return;let Z=!1,Q=!0,G=$.ctrlKey||$.metaKey||$.altKey;this._open(J,Z,Q,G,$)}_open(J,$,X,Y,Z){if(!J)return;this._onDidOpen.fire({editorOptions:{preserveFocus:$,pinned:X,revealIfVisible:!0},sideBySide:Y,element:J,browserEvent:Z})}};Pb=class Pb extends eM{constructor(J,$){super(J,$);this.widget=J}getSelectedElement(){return this.widget.getSelectedElements()[0]}};re=class re extends eM{constructor(J,$){super(J,$)}getSelectedElement(){return this.widget.getSelectedElements()[0]}};ie=class ie extends eM{constructor(J,$){super(J,$)}getSelectedElement(){var J;return(J=this.widget.getSelection()[0])!==null&&J!==void 0?J:void 0}};fe=class extends oz{constructor($,X,Y,Z,Q,G,q,U,z){let{options:H,getTypeNavigationMode:j,disposable:V}=G.invokeFunction(VB,Q);super($,X,Y,Z,H);this.disposables.add(V),this.internals=new t3(this,Q,j,Q.overrideStyles,q,U,z),this.disposables.add(this.internals)}updateOptions($){super.updateOptions($),this.internals.updateOptions($)}};fe=gZ([W6(5,l0),W6(6,m0),W6(7,m$),W6(8,g1)],fe);ge=class extends zB{constructor($,X,Y,Z,Q,G,q,U,z){let{options:H,getTypeNavigationMode:j,disposable:V}=G.invokeFunction(VB,Q);super($,X,Y,Z,H);this.disposables.add(V),this.internals=new t3(this,Q,j,Q.overrideStyles,q,U,z),this.disposables.add(this.internals)}updateOptions($={}){if(super.updateOptions($),$.overrideStyles)this.internals.updateStyleOverrides($.overrideStyles);this.internals.updateOptions($)}};ge=gZ([W6(5,l0),W6(6,m0),W6(7,m$),W6(8,g1)],ge);pe=class extends zb{constructor($,X,Y,Z,Q,G,q,U,z,H){let{options:j,getTypeNavigationMode:V,disposable:W}=q.invokeFunction(VB,G);super($,X,Y,Z,Q,j);this.disposables.add(W),this.internals=new t3(this,G,V,G.overrideStyles,U,z,H),this.disposables.add(this.internals)}updateOptions($={}){if(super.updateOptions($),$.overrideStyles!==void 0)this.internals.updateStyleOverrides($.overrideStyles);this.internals.updateOptions($)}};pe=gZ([W6(6,l0),W6(7,m0),W6(8,m$),W6(9,g1)],pe);me=class extends pM{get onDidOpen(){return this.internals.onDidOpen}constructor($,X,Y,Z,Q,G,q,U,z,H){let{options:j,getTypeNavigationMode:V,disposable:W}=q.invokeFunction(VB,G);super($,X,Y,Z,Q,j);this.disposables.add(W),this.internals=new t3(this,G,V,G.overrideStyles,U,z,H),this.disposables.add(this.internals)}updateOptions($={}){if(super.updateOptions($),$.overrideStyles)this.internals.updateStyleOverrides($.overrideStyles);this.internals.updateOptions($)}};me=gZ([W6(6,l0),W6(7,m0),W6(8,m$),W6(9,g1)],me);ue=class extends Ub{constructor($,X,Y,Z,Q,G,q,U,z,H,j){let{options:V,getTypeNavigationMode:W,disposable:B}=U.invokeFunction(VB,q);super($,X,Y,Z,Q,G,V);this.disposables.add(B),this.internals=new t3(this,q,W,q.overrideStyles,z,H,j),this.disposables.add(this.internals)}updateOptions($){super.updateOptions($),this.internals.updateOptions($)}};ue=gZ([W6(7,l0),W6(8,m0),W6(9,m$),W6(10,g1)],ue);t3=gZ([W6(4,m0),W6(5,m$),W6(6,g1)],t3);C30=G6.as(b4.Configuration);C30.registerConfiguration({id:"workbench",order:7,title:F("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[e3]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[F("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),F("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:F({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[mM]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:F({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[c4]:{type:"boolean",default:!1,description:F("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[g$]:{type:"boolean",default:!1,description:F("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[jB]:{type:"number",default:8,minimum:4,maximum:40,description:F("tree indent setting","Controls tree indentation in pixels.")},[cM]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:F("render tree indent guides","Controls whether the tree should render indent guides.")},[p$]:{type:"boolean",default:!1,description:F("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[ZY]:{type:"number",default:1,markdownDescription:F("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[QY]:{type:"number",default:5,markdownDescription:F("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[Fb]:{type:"string",enum:["highlight","filter"],enumDescriptions:[F("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),F("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:F("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[uM]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[F("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),F("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),F("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:F("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:F("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},[Ab]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[F("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),F("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:F("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[lM]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:F("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[dM]:{type:"boolean",default:!0,description:F("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[sM]:{type:"number",minimum:1,default:7,markdownDescription:F("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[Kb]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:F("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}})});class te{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(J){if(J.prefix.length===0)this.defaultProvider=J;else this.providers.push(J);return this.providers.sort(($,X)=>X.prefix.length-$.prefix.length),N0(()=>{if(this.providers.splice(this.providers.indexOf(J),1),this.defaultProvider===J)this.defaultProvider=void 0})}getQuickAccessProviders(){return QK([this.defaultProvider,...this.providers])}getQuickAccessProvider(J){return(J?this.providers.find((X)=>J.startsWith(X.prefix))||void 0:void 0)||this.defaultProvider}}var JO,Rb;var ee=w(()=>{V1();z0();h7();(function(J){J[J.PRESERVE=0]="PRESERVE",J[J.LAST=1]="LAST"})(JO||(JO={}));Rb={Quickaccess:"workbench.contributions.quickaccess"};G6.add(Rb.Quickaccess,new te)});class $00{constructor(J){this.options=J}}var J00,Jq,CJ,g81,$O;var WB=w(()=>{s0();J00={ctrlCmd:!1,alt:!1};(function(J){J[J.Blur=1]="Blur",J[J.Gesture=2]="Gesture",J[J.Other=3]="Other"})(Jq||(Jq={}));(function(J){J[J.NONE=0]="NONE",J[J.FIRST=1]="FIRST",J[J.SECOND=2]="SECOND",J[J.LAST=3]="LAST"})(CJ||(CJ={}));g81=new $00,$O=w0("quickInputService")});var v30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},X00=function(J,$){return function(X,Y){$(X,Y,J)}},XO;var Y00=w(()=>{e1();_8();_0();z0();s0();ee();WB();h7();XO=class extends m{constructor($,X){super();this.quickInputService=$,this.instantiationService=X,this.registry=G6.as(Rb.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show($="",X){this.doShowOrPick($,!1,X)}doShowOrPick($,X,Y){var Z;let[Q,G]=this.getOrInstantiateProvider($),q=this.visibleQuickAccess,U=q===null||q===void 0?void 0:q.descriptor;if(q&&G&&U===G){if($!==G.prefix&&!(Y===null||Y===void 0?void 0:Y.preserveValue))q.picker.value=$;this.adjustValueSelection(q.picker,G,Y);return}if(G&&!(Y===null||Y===void 0?void 0:Y.preserveValue)){let W=void 0;if(q&&U&&U!==G){let B=q.value.substr(U.prefix.length);if(B)W=`${G.prefix}${B}`}if(!W){let B=Q===null||Q===void 0?void 0:Q.defaultFilterValue;if(B===JO.LAST)W=this.lastAcceptedPickerValues.get(G);else if(typeof B==="string")W=`${G.prefix}${B}`}if(typeof W==="string")$=W}let z=new $0,H=z.add(this.quickInputService.createQuickPick());if(H.value=$,this.adjustValueSelection(H,G,Y),H.placeholder=G===null||G===void 0?void 0:G.placeholder,H.quickNavigate=Y===null||Y===void 0?void 0:Y.quickNavigateConfiguration,H.hideInput=!!H.quickNavigate&&!q,typeof(Y===null||Y===void 0?void 0:Y.itemActivation)==="number"||(Y===null||Y===void 0?void 0:Y.quickNavigateConfiguration))H.itemActivation=(Z=Y===null||Y===void 0?void 0:Y.itemActivation)!==null&&Z!==void 0?Z:CJ.SECOND;H.contextKey=G===null||G===void 0?void 0:G.contextKey,H.filterValue=(W)=>W.substring(G?G.prefix.length:0);let j=void 0;if(X)j=new Nj,z.add(q0.once(H.onWillAccept)((W)=>{W.veto(),H.hide()}));z.add(this.registerPickerListeners(H,Q,G,$,Y===null||Y===void 0?void 0:Y.providerOptions));let V=z.add(new L5);if(Q)z.add(Q.provide(H,V.token,Y===null||Y===void 0?void 0:Y.providerOptions));if(q0.once(H.onDidHide)(()=>{if(H.selectedItems.length===0)V.cancel();z.dispose(),j===null||j===void 0||j.complete(H.selectedItems.slice(0))}),H.show(),X)return j===null||j===void 0?void 0:j.p}adjustValueSelection($,X,Y){var Z;let Q;if(Y===null||Y===void 0?void 0:Y.preserveValue)Q=[$.value.length,$.value.length];else Q=[(Z=X===null||X===void 0?void 0:X.prefix.length)!==null&&Z!==void 0?Z:0,$.value.length];$.valueSelection=Q}registerPickerListeners($,X,Y,Z,Q){let G=new $0,q=this.visibleQuickAccess={picker:$,descriptor:Y,value:Z};if(G.add(N0(()=>{if(q===this.visibleQuickAccess)this.visibleQuickAccess=void 0})),G.add($.onDidChangeValue((U)=>{let[z]=this.getOrInstantiateProvider(U);if(z!==X)this.show(U,{preserveValue:!0,providerOptions:Q});else q.value=U})),Y)G.add($.onDidAccept(()=>{this.lastAcceptedPickerValues.set(Y,$.value)}));return G}getOrInstantiateProvider($){let X=this.registry.getQuickAccessProvider($);if(!X)return[void 0,void 0];let Y=this.mapProviderToDescriptor.get(X);if(!Y)Y=this.instantiationService.createInstance(X.ctor),this.mapProviderToDescriptor.set(X,Y);return[Y,X]}};XO=v30([X00(0,$O),X00(1,l0)],XO)});var BB=w(()=>{K0(".quick-input-widget{z-index:2550;-webkit-app-region:no-drag;border-radius:6px;width:600px;margin-left:-300px;position:absolute;left:50%}.quick-input-titlebar{border-top-left-radius:5px;border-top-right-radius:5px;align-items:center;display:flex}.quick-input-left-action-bar{flex:1;margin-left:4px;display:flex}.quick-input-title{text-align:center;text-overflow:ellipsis;padding:3px 0;overflow:hidden}.quick-input-right-action-bar{flex:1;margin-right:4px;display:flex}.quick-input-right-action-bar>.actions-container{justify-content:flex-end}.quick-input-titlebar .monaco-action-bar .action-label.codicon{background-position:50%;background-repeat:no-repeat;padding:2px}.quick-input-description{margin:6px 6px 6px 11px}.quick-input-header .quick-input-description{flex:1;margin:4px 2px}.quick-input-header{padding:8px 6px 6px;display:flex}.quick-input-widget.hidden-input .quick-input-header{margin-bottom:0;padding:0}.quick-input-and-message{flex-direction:column;flex-grow:1;min-width:0;display:flex;position:relative}.quick-input-check-all{align-self:center;margin:0}.quick-input-filter{flex-grow:1;display:flex;position:relative}.quick-input-box{flex-grow:1}.quick-input-widget.show-checkboxes .quick-input-box,.quick-input-widget.show-checkboxes .quick-input-message{margin-left:5px}.quick-input-visible-count{position:absolute;left:-10000px}.quick-input-count{align-self:center;align-items:center;display:flex;position:absolute;right:4px}.quick-input-count .monaco-count-badge{vertical-align:middle;border-radius:2px;min-height:auto;padding:2px 4px;line-height:normal}.quick-input-action{margin-left:6px}.quick-input-action .monaco-text-button{align-items:center;height:25px;padding:0 6px;font-size:11px;display:flex}.quick-input-message{overflow-wrap:break-word;margin-top:-1px;padding:5px}.quick-input-message>.codicon{vertical-align:text-bottom;margin:0 .2em}.quick-input-message a{color:inherit}.quick-input-progress.monaco-progress-container{position:relative}.quick-input-list{line-height:22px}.quick-input-widget.hidden-input .quick-input-list{margin-top:4px;padding-bottom:4px}.quick-input-list .monaco-list{max-height:440px;padding-bottom:5px;overflow:hidden}.quick-input-list .monaco-scrollable-element{padding:0 5px}.quick-input-list .quick-input-list-entry{box-sizing:border-box;height:100%;padding:0 6px;display:flex;overflow:hidden}.quick-input-list .quick-input-list-entry.quick-input-list-separator-border{border-top-style:solid;border-top-width:1px}.quick-input-list .monaco-list-row{border-radius:3px}.quick-input-list .monaco-list-row[data-index=\"0\"] .quick-input-list-entry.quick-input-list-separator-border{border-top-style:none}.quick-input-list .quick-input-list-label{flex:1;height:100%;display:flex;overflow:hidden}.quick-input-list .quick-input-list-checkbox{align-self:center;margin:0}.quick-input-list .quick-input-list-icon{background-position:0;background-repeat:no-repeat;background-size:16px;justify-content:center;align-items:center;width:16px;height:22px;padding-right:6px;display:flex}.quick-input-list .quick-input-list-rows{text-overflow:ellipsis;flex-direction:column;flex:1;height:100%;margin-left:5px;display:flex;overflow:hidden}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-rows{margin-left:10px}.quick-input-widget .quick-input-list .quick-input-list-checkbox{display:none}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-checkbox{display:inline}.quick-input-list .quick-input-list-rows>.quick-input-list-row{align-items:center;display:flex}.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label,.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.quick-input-list .quick-input-list-rows>.quick-input-list-row .codicon[class*=codicon-]{vertical-align:text-bottom}.quick-input-list .quick-input-list-rows .monaco-highlighted-label>span{opacity:1}.quick-input-list .quick-input-list-entry .quick-input-list-entry-keybinding{margin-right:8px}.quick-input-list .quick-input-list-label-meta{opacity:.7;text-overflow:ellipsis;line-height:normal;overflow:hidden}.quick-input-list .monaco-highlighted-label .highlight{font-weight:700}.quick-input-list .quick-input-list-entry .quick-input-list-separator{margin-right:4px}.quick-input-list .quick-input-list-entry-action-bar{flex:0;display:flex;overflow:visible}.quick-input-list .quick-input-list-entry-action-bar .action-label{display:none}.quick-input-list .quick-input-list-entry-action-bar .action-label.codicon{margin-right:4px;padding:0 2px 2px}.quick-input-list .quick-input-list-entry-action-bar{margin-top:1px;margin-right:4px}.quick-input-list .quick-input-list-entry .quick-input-list-entry-action-bar .action-label.always-visible,.quick-input-list .quick-input-list-entry:hover .quick-input-list-entry-action-bar .action-label,.quick-input-list .monaco-list-row.focused .quick-input-list-entry-action-bar .action-label{display:flex}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key,.quick-input-list .monaco-list-row.focused .quick-input-list-entry .quick-input-list-separator{color:inherit}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key{background:0 0}.quick-input-list .quick-input-list-separator-as-item{font-size:12px;font-weight:600}")});var Z00=w(()=>{K0(".monaco-icon-label{text-overflow:ellipsis;display:flex;overflow:hidden}.monaco-icon-label:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:top;background-position:0;background-repeat:no-repeat;background-size:16px;flex-shrink:0;width:16px;height:22px;padding-right:6px;display:inline-block;line-height:inherit!important}.monaco-icon-label-container.disabled{color:var(--vscode-disabledForeground)}.monaco-icon-label>.monaco-icon-label-container{text-overflow:ellipsis;flex:1;min-width:0;overflow:hidden}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{color:inherit;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name>.label-separator{opacity:.5;margin:0 2px}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-suffix-container>.label-suffix{opacity:.7;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.7;white-space:pre;margin-left:.5em;font-size:.9em}.monaco-icon-label.nowrap>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{white-space:nowrap}.vs .monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.95}.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-name-container>.label-name,.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{font-style:italic}.monaco-icon-label.deprecated{opacity:.66;text-decoration:line-through}.monaco-icon-label.italic:after{font-style:italic}.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-name-container>.label-name,.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{text-decoration:line-through}.monaco-icon-label:after{opacity:.75;text-align:center;margin:auto 16px 0 5px;font-size:90%;font-weight:600}.monaco-list:focus .selected .monaco-icon-label,.monaco-list:focus .selected .monaco-icon-label:after{color:inherit!important}.monaco-list-row.focused.selected .label-description,.monaco-list-row.selected .label-description{opacity:.8}")});class R2{constructor(J,$){var X;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(X=$===null||$===void 0?void 0:$.supportIcons)!==null&&X!==void 0?X:!1,this.domNode=j0(J,B0("span.monaco-highlighted-label"))}get element(){return this.domNode}set(J,$=[],X="",Y){if(!J)J="";if(Y)J=R2.escapeNewLines(J,$);if(this.didEverRender&&this.text===J&&this.title===X&&i5(this.highlights,$))return;this.text=J,this.title=X,this.highlights=$,this.render()}render(){let J=[],$=0;for(let X of this.highlights){if(X.end===X.start)continue;if($<X.start){let Q=this.text.substring($,X.start);if(this.supportIcons)J.push(...xJ(Q));else J.push(Q);$=X.start}let Y=this.text.substring($,X.end),Z=B0("span.highlight",void 0,...this.supportIcons?xJ(Y):[Y]);if(X.extraClasses)Z.classList.add(...X.extraClasses);J.push(Z),$=X.end}if($<this.text.length){let X=this.text.substring($);if(this.supportIcons)J.push(...xJ(X));else J.push(X)}if(x5(this.domNode,...J),this.title)this.domNode.title=this.title;else this.domNode.removeAttribute("title");this.didEverRender=!0}static escapeNewLines(J,$){let X=0,Y=0;return J.replace(/\r\n|\r|\n/g,(Z,Q)=>{Y=Z===`\r
`?-1:0,Q+=X;for(let G of $){if(G.end<=Q)continue;if(G.start>=Q)G.start+=Y;if(G.end>=Q)G.end+=Y}return X+=Y,"⏎"})}}var Q00=w(()=>{T0();x3();n7()});class tz{constructor(J){this._element=J}get element(){return this._element}set textContent(J){if(this.disposed||J===this._textContent)return;this._textContent=J,this._element.textContent=J}set className(J){if(this.disposed||J===this._className)return;this._className=J,this._element.className=J}set empty(J){if(this.disposed||J===this._empty)return;this._empty=J,this._element.style.marginLeft=J?"0":""}dispose(){this.disposed=!0}}class G00{constructor(J){this.container=J,this.label=void 0,this.singleLabel=void 0}setLabel(J,$){if(this.label===J&&i5(this.options,$))return;if(this.label=J,this.options=$,typeof J==="string"){if(!this.singleLabel)this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=j0(this.container,B0("a.label-name",{id:$===null||$===void 0?void 0:$.domId}));this.singleLabel.textContent=J}else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let X=0;X<J.length;X++){let Y=J[X],Z=($===null||$===void 0?void 0:$.domId)&&`${$===null||$===void 0?void 0:$.domId}_${X}`;if(j0(this.container,B0("a.label-name",{id:Z,"data-icon-label-count":J.length,"data-icon-label-index":X,role:"treeitem"},Y)),X<J.length-1)j0(this.container,B0("span.label-separator",void 0,($===null||$===void 0?void 0:$.separator)||"/"))}}}}function h30(J,$,X){if(!X)return;let Y=0;return J.map((Z)=>{let Q={start:Y,end:Y+Z.length},G=X.map((q)=>l5.intersect(Q,q)).filter((q)=>!l5.isEmpty(q)).map(({start:q,end:U})=>({start:q-Y,end:U-Y}));return Y=Q.end+$.length,G})}class q00{constructor(J,$){this.container=J,this.supportIcons=$,this.label=void 0,this.singleLabel=void 0}setLabel(J,$){if(this.label===J&&i5(this.options,$))return;if(this.label=J,this.options=$,typeof J==="string"){if(!this.singleLabel)this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new R2(j0(this.container,B0("a.label-name",{id:$===null||$===void 0?void 0:$.domId})),{supportIcons:this.supportIcons});this.singleLabel.set(J,$===null||$===void 0?void 0:$.matches,void 0,$===null||$===void 0?void 0:$.labelEscapeNewLines)}else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;let X=($===null||$===void 0?void 0:$.separator)||"/",Y=h30(J,X,$===null||$===void 0?void 0:$.matches);for(let Z=0;Z<J.length;Z++){let Q=J[Z],G=Y?Y[Z]:void 0,q=($===null||$===void 0?void 0:$.domId)&&`${$===null||$===void 0?void 0:$.domId}_${Z}`,U=B0("a.label-name",{id:q,"data-icon-label-count":J.length,"data-icon-label-index":Z,role:"treeitem"});if(new R2(j0(this.container,U),{supportIcons:this.supportIcons}).set(Q,G,void 0,$===null||$===void 0?void 0:$.labelEscapeNewLines),Z<J.length-1)j0(U,B0("span.label-separator",void 0,X))}}}}var ez;var Mb=w(()=>{Z00();T0();Q00();zx();z0();n7();pW();ez=class ez extends m{constructor(J,$){super();if(this.customHovers=new Map,this.creationOptions=$,this.domNode=this._register(new tz(j0(J,B0(".monaco-icon-label")))),this.labelContainer=j0(this.domNode.element,B0(".monaco-icon-label-container")),this.nameContainer=j0(this.labelContainer,B0("span.monaco-icon-name-container")),($===null||$===void 0?void 0:$.supportHighlights)||($===null||$===void 0?void 0:$.supportIcons))this.nameNode=new q00(this.nameContainer,!!$.supportIcons);else this.nameNode=new G00(this.nameContainer);this.hoverDelegate=$===null||$===void 0?void 0:$.hoverDelegate}get element(){return this.domNode.element}setLabel(J,$,X){var Y;let Z=["monaco-icon-label"],Q=["monaco-icon-label-container"],G="";if(X){if(X.extraClasses)Z.push(...X.extraClasses);if(X.italic)Z.push("italic");if(X.strikethrough)Z.push("strikethrough");if(X.disabledCommand)Q.push("disabled");if(X.title)if(typeof X.title==="string")G+=X.title;else G+=J}if(this.domNode.className=Z.join(" "),this.domNode.element.setAttribute("aria-label",G),this.labelContainer.className=Q.join(" "),this.setupHover((X===null||X===void 0?void 0:X.descriptionTitle)?this.labelContainer:this.element,X===null||X===void 0?void 0:X.title),this.nameNode.setLabel(J,X),$||this.descriptionNode){let q=this.getOrCreateDescriptionNode();if(q instanceof R2)q.set($||"",X?X.descriptionMatches:void 0,void 0,X===null||X===void 0?void 0:X.labelEscapeNewLines),this.setupHover(q.element,X===null||X===void 0?void 0:X.descriptionTitle);else q.textContent=$&&(X===null||X===void 0?void 0:X.labelEscapeNewLines)?R2.escapeNewLines($,[]):$||"",this.setupHover(q.element,(X===null||X===void 0?void 0:X.descriptionTitle)||""),q.empty=!$}if((X===null||X===void 0?void 0:X.suffix)||this.suffixNode){let q=this.getOrCreateSuffixNode();q.textContent=(Y=X===null||X===void 0?void 0:X.suffix)!==null&&Y!==void 0?Y:""}}setupHover(J,$){let X=this.customHovers.get(J);if(X)X.dispose(),this.customHovers.delete(J);if(!$){J.removeAttribute("title");return}if(!this.hoverDelegate)So(J,$);else{let Y=jM(this.hoverDelegate,J,$);if(Y)this.customHovers.set(J,Y)}}dispose(){super.dispose();for(let J of this.customHovers.values())J.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){let J=this._register(new tz(kp(this.nameContainer,B0("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new tz(j0(J.element,B0("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var J;if(!this.descriptionNode){let $=this._register(new tz(j0(this.labelContainer,B0("span.monaco-icon-description-container"))));if((J=this.creationOptions)===null||J===void 0?void 0:J.supportDescriptionHighlights)this.descriptionNode=new R2(j0($.element,B0("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons});else this.descriptionNode=this._register(new tz(j0($.element,B0("span.label-description"))))}return this.descriptionNode}}});var U00=w(()=>{K0(".monaco-keybinding{align-items:center;line-height:10px;display:flex}.monaco-keybinding>.monaco-keybinding-key{vertical-align:middle;border-style:solid;border-width:1px;border-radius:3px;margin:0 2px;padding:3px 5px;font-size:11px;display:inline-block}.monaco-keybinding>.monaco-keybinding-key:first-child{margin-left:0}.monaco-keybinding>.monaco-keybinding-key:last-child{margin-right:0}.monaco-keybinding>.monaco-keybinding-key-separator{display:inline-block}.monaco-keybinding>.monaco-keybinding-key-chord-separator{width:6px}")});class ZO{constructor(J,$,X){this.os=$,this.keyElements=new Set,this.options=X||Object.create(null);let Y=this.options.keybindingLabelForeground;if(this.domNode=j0(J,YO(".monaco-keybinding")),Y)this.domNode.style.color=Y;this.didEverRender=!1,J.appendChild(this.domNode)}get element(){return this.domNode}set(J,$){if(this.didEverRender&&this.keybinding===J&&ZO.areSame(this.matches,$))return;this.keybinding=J,this.matches=$,this.render()}render(){var J;if(this.clear(),this.keybinding){let $=this.keybinding.getChords();if($[0])this.renderChord(this.domNode,$[0],this.matches?this.matches.firstPart:null);for(let Y=1;Y<$.length;Y++)j0(this.domNode,YO("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,$[Y],this.matches?this.matches.chordPart:null);let X=((J=this.options.disableTitle)!==null&&J!==void 0?J:!1)?void 0:this.keybinding.getAriaLabel()||void 0;if(X!==void 0)this.domNode.title=X;else this.domNode.removeAttribute("title")}else if(this.options&&this.options.renderUnboundKeybindings)this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){t5(this.domNode),this.keyElements.clear()}renderChord(J,$,X){let Y=Iz.modifierLabels[this.os];if($.ctrlKey)this.renderKey(J,Y.ctrlKey,Boolean(X===null||X===void 0?void 0:X.ctrlKey),Y.separator);if($.shiftKey)this.renderKey(J,Y.shiftKey,Boolean(X===null||X===void 0?void 0:X.shiftKey),Y.separator);if($.altKey)this.renderKey(J,Y.altKey,Boolean(X===null||X===void 0?void 0:X.altKey),Y.separator);if($.metaKey)this.renderKey(J,Y.metaKey,Boolean(X===null||X===void 0?void 0:X.metaKey),Y.separator);let Z=$.keyLabel;if(Z)this.renderKey(J,Z,Boolean(X===null||X===void 0?void 0:X.keyCode),"")}renderKey(J,$,X,Y){if(j0(J,this.createKeyElement($,X?".highlight":"")),Y)j0(J,YO("span.monaco-keybinding-key-separator",void 0,Y))}renderUnbound(J){j0(J,this.createKeyElement(F("unbound","Unbound")))}createKeyElement(J,$=""){let X=YO("span.monaco-keybinding-key"+$,void 0,J);if(this.keyElements.add(X),this.options.keybindingLabelBackground)X.style.backgroundColor=this.options.keybindingLabelBackground;if(this.options.keybindingLabelBorder)X.style.borderColor=this.options.keybindingLabelBorder;if(this.options.keybindingLabelBottomBorder)X.style.borderBottomColor=this.options.keybindingLabelBottomBorder;if(this.options.keybindingLabelShadow)X.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;return X}static areSame(J,$){if(J===$||!J&&!$)return!0;return!!J&&!!$&&i5(J.firstPart,$.firstPart)&&i5(J.chordPart,$.chordPart)}}var YO;var z00=w(()=>{T0();XM();n7();U00();c0();YO=B0});function f30(J,$,X=!1){let Y=J||"",Z=$||"",Q=H00.value.collator.compare(Y,Z);if(H00.value.collatorIsNumeric&&Q===0&&Y!==Z)return Y<Z?-1:1;return Q}function j00(J,$,X){let Y=J.toLowerCase(),Z=$.toLowerCase(),Q=g30(J,$,X);if(Q)return Q;let G=Y.endsWith(X),q=Z.endsWith(X);if(G!==q)return G?-1:1;let U=f30(Y,Z);if(U!==0)return U;return Y.localeCompare(Z)}function g30(J,$,X){let Y=J.toLowerCase(),Z=$.toLowerCase(),Q=Y.startsWith(X),G=Z.startsWith(X);if(Q!==G)return Q?-1:1;else if(Q&&G){if(Y.length<Z.length)return-1;if(Y.length>Z.length)return 1}return 0}var H00,B71,F71;var V00=w(()=>{H00=new s9(()=>{let J=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:J,collatorIsNumeric:J.resolvedOptions().numeric}}),B71=new s9(()=>{return{collator:new Intl.Collator(void 0,{numeric:!0})}}),F71=new s9(()=>{return{collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}})});class Ob{constructor(J){this.nodes=J}toString(){return this.nodes.map((J)=>typeof J==="string"?J:J.label).join("")}}function W00(J){let $=[],X=0,Y;while(Y=m30.exec(J)){if(Y.index-X>0)$.push(J.substring(X,Y.index));let[,Z,Q,,G]=Y;if(G)$.push({label:Z,href:Q,title:G});else $.push({label:Z,href:Q});X=Y.index+Y[0].length}if(X<J.length)$.push(J.substring(X));return new Ob($)}var p30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},m30;var B00=w(()=>{p30([F6],Ob.prototype,"toString",null);m30=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi});function c30(J){if(!J)return;let $,X=J.dark.toString();if(_b[X])$=_b[X];else $=u30.nextId(),jP(`.${$}, .hc-light .${$}`,`background-image: ${DJ(J.light||J.dark)}`),jP(`.vs-dark .${$}, .hc-black .${$}`,`background-image: ${DJ(J.dark)}`),_b[X]=$;return $}function FB(J,$,X){let Y=J.iconClass||c30(J.iconPath);if(J.alwaysVisible)Y=Y?`${Y} always-visible`:"always-visible";return{id:$,label:"",tooltip:J.tooltip||"",class:Y,enabled:!0,run:X}}function F00(J,$,X){x5($);let Y=W00(J),Z=0;for(let Q of Y.nodes)if(typeof Q==="string")$.append(...xJ(Q));else{let G=Q.title;if(!G&&Q.href.startsWith("command:"))G=F("executeCommand","Click to execute command '{0}'",Q.href.substring(8));else if(!G)G=Q.href;let q=B0("a",{href:Q.href,title:G,tabIndex:Z++},Q.label);q.style.textDecoration="underline";let U=(W)=>{if(Tp(W))a0.stop(W,!0);X.callback(Q.href)},z=X.disposables.add(new H1(q,U0.CLICK)).event,H=X.disposables.add(new H1(q,U0.KEY_DOWN)).event,j=q0.chain(H,(W)=>W.filter((B)=>{let K=new R1(B);return K.equals(10)||K.equals(3)}));X.disposables.add(b1.addTarget(q));let V=X.disposables.add(new H1(q,f1.Tap)).event;q0.any(z,V,j)(U,null,X.disposables),$.appendChild(q)}}var _b,u30;var Nb=w(()=>{T0();k$();_0();d8();g4();x3();hy();B00();BB();c0();_b={},u30=new rR("quick-input-button-icon-")});class P00{constructor(J,$,X,Y,Z,Q,G){var q,U,z;if(this._checked=!1,this._hidden=!1,this.hasCheckbox=Y,this.index=X,this.fireButtonTriggered=Z,this.fireSeparatorButtonTriggered=Q,this._onChecked=G,this.onChecked=Y?q0.map(q0.filter(this._onChecked.event,(H)=>H.listElement===this),(H)=>H.checked):q0.None,J.type==="separator")this._separator=J;else{if(this.item=J,$&&$.type==="separator"&&!$.buttons)this._separator=$;this.saneDescription=this.item.description,this.saneDetail=this.item.detail,this._labelHighlights=(q=this.item.highlights)===null||q===void 0?void 0:q.label,this._descriptionHighlights=(U=this.item.highlights)===null||U===void 0?void 0:U.description,this._detailHighlights=(z=this.item.highlights)===null||z===void 0?void 0:z.detail,this.saneTooltip=this.item.tooltip}this._init=new s9(()=>{var H;let j=(H=J.label)!==null&&H!==void 0?H:"",V=_z(j).text.trim(),W=J.ariaLabel||[j,this.saneDescription,this.saneDetail].map((B)=>In(B)).filter((B)=>!!B).join(", ");return{saneLabel:j,saneSortLabel:V,saneAriaLabel:W}})}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(J){this._element=J}get hidden(){return this._hidden}set hidden(J){this._hidden=J}get checked(){return this._checked}set checked(J){if(J!==this._checked)this._checked=J,this._onChecked.fire({listElement:this,checked:J})}get separator(){return this._separator}set separator(J){this._separator=J}get labelHighlights(){return this._labelHighlights}set labelHighlights(J){this._labelHighlights=J}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(J){this._descriptionHighlights=J}get detailHighlights(){return this._detailHighlights}set detailHighlights(J){this._detailHighlights=J}}class KB{constructor(J,$){this.themeService=J,this.hoverDelegate=$}get templateId(){return KB.ID}renderTemplate(J){let $=Object.create(null);$.toDisposeElement=[],$.toDisposeTemplate=[],$.entry=j0(J,u$(".quick-input-list-entry"));let X=j0($.entry,u$("label.quick-input-list-label"));$.toDisposeTemplate.push(q6(X,U0.CLICK,(U)=>{if(!$.checkbox.offsetParent)U.preventDefault()})),$.checkbox=j0(X,u$("input.quick-input-list-checkbox")),$.checkbox.type="checkbox",$.toDisposeTemplate.push(q6($.checkbox,U0.CHANGE,(U)=>{$.element.checked=$.checkbox.checked}));let Y=j0(X,u$(".quick-input-list-rows")),Z=j0(Y,u$(".quick-input-list-row")),Q=j0(Y,u$(".quick-input-list-row"));$.label=new ez(Z,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),$.toDisposeTemplate.push($.label),$.icon=GU($.label.element,u$(".quick-input-list-icon"));let G=j0(Z,u$(".quick-input-list-entry-keybinding"));$.keybinding=new ZO(G,Z7);let q=j0(Q,u$(".quick-input-list-label-meta"));return $.detail=new ez(q,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),$.toDisposeTemplate.push($.detail),$.separator=j0($.entry,u$(".quick-input-list-separator")),$.actionBar=new S8($.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),$.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),$.toDisposeTemplate.push($.actionBar),$}renderElement(J,$,X){var Y,Z,Q,G;X.element=J,J.element=(Y=X.entry)!==null&&Y!==void 0?Y:void 0;let q=J.item?J.item:J.separator;X.checkbox.checked=J.checked,X.toDisposeElement.push(J.onChecked((W)=>X.checkbox.checked=W));let{labelHighlights:U,descriptionHighlights:z,detailHighlights:H}=J;if((Z=J.item)===null||Z===void 0?void 0:Z.iconPath){let W=H3(this.themeService.getColorTheme().type)?J.item.iconPath.dark:(Q=J.item.iconPath.light)!==null&&Q!==void 0?Q:J.item.iconPath.dark,B=C0.revive(W);X.icon.className="quick-input-list-icon",X.icon.style.backgroundImage=DJ(B)}else X.icon.style.backgroundImage="",X.icon.className=((G=J.item)===null||G===void 0?void 0:G.iconClass)?`quick-input-list-icon ${J.item.iconClass}`:"";let j={matches:U||[],descriptionTitle:J.saneTooltip?void 0:J.saneDescription,descriptionMatches:z||[],labelEscapeNewLines:!0};if(q.type!=="separator")j.extraClasses=q.iconClasses,j.italic=q.italic,j.strikethrough=q.strikethrough,X.entry.classList.remove("quick-input-list-separator-as-item");else X.entry.classList.add("quick-input-list-separator-as-item");if(X.label.setLabel(J.saneLabel,J.saneDescription,j),X.keybinding.set(q.type==="separator"?void 0:q.keybinding),J.saneDetail)X.detail.element.style.display="",X.detail.setLabel(J.saneDetail,void 0,{matches:H,title:J.saneTooltip?void 0:J.saneDetail,labelEscapeNewLines:!0});else X.detail.element.style.display="none";if(J.item&&J.separator&&J.separator.label)X.separator.textContent=J.separator.label,X.separator.style.display="";else X.separator.style.display="none";X.entry.classList.toggle("quick-input-list-separator-border",!!J.separator);let V=q.buttons;if(V&&V.length)X.actionBar.push(V.map((W,B)=>FB(W,`id-${B}`,()=>q.type!=="separator"?J.fireButtonTriggered({button:W,item:q}):J.fireSeparatorButtonTriggered({button:W,separator:q}))),{icon:!0,label:!1}),X.entry.classList.add("has-actions");else X.entry.classList.remove("has-actions")}disposeElement(J,$,X){X.toDisposeElement=h1(X.toDisposeElement),X.actionBar.clear()}disposeTemplate(J){J.toDisposeElement=h1(J.toDisposeElement),J.toDisposeTemplate=h1(J.toDisposeTemplate)}}class D00{getHeight(J){if(!J.item)return 24;return J.saneDetail?44:22}getTemplateId(J){return KB.ID}}class AB{constructor(J,$,X,Y){this.parent=J,this.options=X,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.sortByLabel=!0,this._onChangedAllVisibleChecked=new x,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new x,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new x,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new x,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new x,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new x,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new x,this.onKeyDown=this._onKeyDown.event,this._onLeave=new x,this.onLeave=this._onLeave.event,this._listElementChecked=new x,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=$,this.container=j0(this.parent,u$(".quick-input-list"));let Z=new D00,Q=new R00;this.list=X.createList("QuickInput",this.container,Z,[new KB(Y,X.hoverDelegate)],{identityProvider:{getId:(q)=>{var U,z,H,j,V,W,B,K;return(K=(W=(j=(z=(U=q.item)===null||U===void 0?void 0:U.id)!==null&&z!==void 0?z:(H=q.item)===null||H===void 0?void 0:H.label)!==null&&j!==void 0?j:(V=q.separator)===null||V===void 0?void 0:V.id)!==null&&W!==void 0?W:(B=q.separator)===null||B===void 0?void 0:B.label)!==null&&K!==void 0?K:""}},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:Q}),this.list.getHTMLElement().id=$,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown((q)=>{let U=new R1(q);switch(U.keyCode){case 10:this.toggleCheckbox();break;case 31:if(t0?q.metaKey:q.ctrlKey)this.list.setFocus(r5(this.list.length));break;case 16:{let z=this.list.getFocus();if(z.length===1&&z[0]===0)this._onLeave.fire();break}case 18:{let z=this.list.getFocus();if(z.length===1&&z[0]===this.list.length-1)this._onLeave.fire();break}}this._onKeyDown.fire(U)})),this.disposables.push(this.list.onMouseDown((q)=>{if(q.browserEvent.button!==2)q.browserEvent.preventDefault()})),this.disposables.push(r(this.container,U0.CLICK,(q)=>{if(q.x||q.y)this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick((q)=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu((q)=>{if(typeof q.index==="number")q.browserEvent.preventDefault(),this.list.setSelection([q.index])}));let G=new _j(X.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(async(q)=>{var U;if(q.browserEvent.target instanceof HTMLAnchorElement){G.cancel();return}if(!(q.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&e6(q.browserEvent.relatedTarget,(U=q.element)===null||U===void 0?void 0:U.element))return;try{await G.trigger(async()=>{if(q.element)this.showHover(q.element)})}catch(z){if(!GX(z))throw z}})),this.disposables.push(this.list.onMouseOut((q)=>{var U;if(e6(q.browserEvent.relatedTarget,(U=q.element)===null||U===void 0?void 0:U.element))return;G.cancel()})),this.disposables.push(G),this.disposables.push(this._listElementChecked.event((q)=>this.fireCheckedEvents())),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return q0.map(this.list.onDidChangeFocus,(J)=>J.elements.map(($)=>$.item))}get onDidChangeSelection(){return q0.map(this.list.onDidChangeSelection,(J)=>({items:J.elements.map(($)=>$.item),event:J.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(J){this.list.scrollTop=J}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(J){this.list.getHTMLElement().ariaLabel=J}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(J,$=!0){for(let X=0,Y=J.length;X<Y;X++){let Z=J[X];if(!Z.hidden)if(!Z.checked)return!1;else $=!0}return $}getCheckedCount(){let J=0,$=this.elements;for(let X=0,Y=$.length;X<Y;X++)if($[X].checked)J++;return J}getVisibleCount(){let J=0,$=this.elements;for(let X=0,Y=$.length;X<Y;X++)if(!$[X].hidden)J++;return J}setAllVisibleChecked(J){try{this._fireCheckedEvents=!1,this.elements.forEach(($)=>{if(!$.hidden)$.checked=J})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(J){this.elementDisposables=h1(this.elementDisposables);let $=(Q)=>this.fireButtonTriggered(Q),X=(Q)=>this.fireSeparatorButtonTriggered(Q);this.inputElements=J;let Y=new Map,Z=this.parent.classList.contains("show-checkboxes");this.elements=J.reduce((Q,G,q)=>{var U;let z=q>0?J[q-1]:void 0;if(G.type==="separator"){if(!G.buttons)return Q}let H=new P00(G,z,q,Z,$,X,this._listElementChecked),j=Q.length;return Q.push(H),Y.set((U=H.item)!==null&&U!==void 0?U:H.separator,j),Q},[]),this.elementsToIndexes=Y,this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map((J)=>J.item)}setFocusedElements(J){if(this.list.setFocus(J.filter(($)=>this.elementsToIndexes.has($)).map(($)=>this.elementsToIndexes.get($))),J.length>0){let $=this.list.getFocus()[0];if(typeof $==="number")this.list.reveal($)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(J){this.list.setSelection(J.filter(($)=>this.elementsToIndexes.has($)).map(($)=>this.elementsToIndexes.get($)))}getCheckedElements(){return this.elements.filter((J)=>J.checked).map((J)=>J.item).filter((J)=>!!J)}setCheckedElements(J){try{this._fireCheckedEvents=!1;let $=new Set;for(let X of J)$.add(X);for(let X of this.elements)X.checked=$.has(X.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(J){this.list.getHTMLElement().style.pointerEvents=J?"":"none"}focus(J){if(!this.list.length)return;if(J===d5.Second&&this.list.length<2)J=d5.First;switch(J){case d5.First:this.list.scrollTop=0,this.list.focusFirst(void 0,(X)=>!!X.item);break;case d5.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,(X)=>!!X.item);break;case d5.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,(X)=>!!X.item);break;case d5.Next:{this.list.focusNext(void 0,!0,void 0,(Y)=>!!Y.item);let X=this.list.getFocus()[0];if(X!==0&&!this.elements[X-1].item&&this.list.firstVisibleIndex>X-1)this.list.reveal(X-1);break}case d5.Previous:{this.list.focusPrevious(void 0,!0,void 0,(Y)=>!!Y.item);let X=this.list.getFocus()[0];if(X!==0&&!this.elements[X-1].item&&this.list.firstVisibleIndex>X-1)this.list.reveal(X-1);break}case d5.NextPage:this.list.focusNextPage(void 0,(X)=>!!X.item);break;case d5.PreviousPage:this.list.focusPreviousPage(void 0,(X)=>!!X.item);break}let $=this.list.getFocus()[0];if(typeof $==="number")this.list.reveal($)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(J){var $,X,Y;if(this._lastHover&&!this._lastHover.isDisposed)(X=($=this.options.hoverDelegate).onDidHideHover)===null||X===void 0||X.call($),(Y=this._lastHover)===null||Y===void 0||Y.dispose();if(!J.element||!J.saneTooltip)return;this._lastHover=this.options.hoverDelegate.showHover({content:J.saneTooltip,target:J.element,linkHandler:(Z)=>{this.options.linkOpenerDelegate(Z)},appearance:{showPointer:!0},container:this.container,position:{hoverPosition:1}},!1)}layout(J){this.list.getHTMLElement().style.maxHeight=J?`${Math.floor(J/44)*44+6}px`:"",this.list.layout()}filter(J){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;let $=J;if(J=J.trim(),!J||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach((Y)=>{Y.labelHighlights=void 0,Y.descriptionHighlights=void 0,Y.detailHighlights=void 0,Y.hidden=!1;let Z=Y.index&&this.inputElements[Y.index-1];if(Y.item)Y.separator=Z&&Z.type==="separator"&&!Z.buttons?Z:void 0});else{let Y;this.elements.forEach((Z)=>{var Q,G,q,U;let z;if(this.matchOnLabelMode==="fuzzy")z=this.matchOnLabel?(Q=sR(J,_z(Z.saneLabel)))!==null&&Q!==void 0?Q:void 0:void 0;else z=this.matchOnLabel?(G=l30($,_z(Z.saneLabel)))!==null&&G!==void 0?G:void 0:void 0;let H=this.matchOnDescription?(q=sR(J,_z(Z.saneDescription||"")))!==null&&q!==void 0?q:void 0:void 0,j=this.matchOnDetail?(U=sR(J,_z(Z.saneDetail||"")))!==null&&U!==void 0?U:void 0:void 0;if(z||H||j)Z.labelHighlights=z,Z.descriptionHighlights=H,Z.detailHighlights=j,Z.hidden=!1;else Z.labelHighlights=void 0,Z.descriptionHighlights=void 0,Z.detailHighlights=void 0,Z.hidden=Z.item?!Z.item.alwaysShow:!0;if(Z.item)Z.separator=void 0;else if(Z.separator)Z.hidden=!0;if(!this.sortByLabel){let V=Z.index&&this.inputElements[Z.index-1];if(Y=V&&V.type==="separator"?V:Y,Y&&!Z.hidden)Z.separator=Y,Y=void 0}})}let X=this.elements.filter((Y)=>!Y.hidden);if(this.sortByLabel&&J){let Y=J.toLowerCase();X.sort((Z,Q)=>{return d30(Z,Q,Y)})}return this.elementsToIndexes=X.reduce((Y,Z,Q)=>{var G;return Y.set((G=Z.item)!==null&&G!==void 0?G:Z.separator,Q),Y},new Map),this.list.splice(0,this.list.length,X),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(X.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;let J=this.list.getFocusedElements(),$=this.allVisibleChecked(J);for(let X of J)X.checked=!$}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(J){this.container.style.display=J?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=h1(this.elementDisposables),this.disposables=h1(this.disposables)}fireCheckedEvents(){if(this._fireCheckedEvents)this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements())}fireButtonTriggered(J){this._onButtonTriggered.fire(J)}fireSeparatorButtonTriggered(J){this._onSeparatorButtonTriggered.fire(J)}style(J){this.list.style(J)}toggleHover(){let J=this.list.getFocusedElements()[0];if(!(J===null||J===void 0?void 0:J.saneTooltip))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}let $=this.list.getFocusedElements()[0];if(!$)return;this.showHover($);let X=new $0;if(X.add(this.list.onDidChangeFocus((Y)=>{if(Y.indexes.length)this.showHover(Y.elements[0])})),this._lastHover)X.add(this._lastHover);this._toggleHover=X,this.elementDisposables.push(this._toggleHover)}}function l30(J,$){let{text:X,iconOffsets:Y}=$;if(!Y||Y.length===0)return K00(J,X);let Z=OQ(X," "),Q=X.length-Z.length,G=K00(J,Z);if(G)for(let q of G){let U=Y[q.start+Q]+Q;q.start+=U,q.end+=U}return G}function K00(J,$){let X=$.toLowerCase().indexOf(J.toLowerCase());if(X!==-1)return[{start:X,end:X+J.length}];return null}function d30(J,$,X){let Y=J.labelHighlights||[],Z=$.labelHighlights||[];if(Y.length&&!Z.length)return-1;if(!Y.length&&Z.length)return 1;if(Y.length===0&&Z.length===0)return 0;return j00(J.saneSortLabel,$.saneSortLabel,X)}class R00{getWidgetAriaLabel(){return F("quickInput","Quick Input")}getAriaLabel(J){var $;return(($=J.separator)===null||$===void 0?void 0:$.label)?`${J.saneAriaLabel}, ${J.separator.label}`:J.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(J){return J.hasCheckbox?"checkbox":"option"}isChecked(J){if(!J.hasCheckbox)return;return{value:J.checked,onDidChange:J.onChecked}}}var A00=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},u$,d5;var Tb=w(()=>{T0();d8();$Y();Mb();z00();V1();e1();V00();O1();_0();Nz();z0();L1();X1();BB();c0();Nb();V5();qZ();u$=B0;KB.ID="listelement";(function(J){J[J.First=1]="First",J[J.Second=2]="Second",J[J.Last=3]="Last",J[J.Next=4]="Next",J[J.Previous=5]="Previous",J[J.NextPage=6]="NextPage",J[J.PreviousPage=7]="PreviousPage"})(d5||(d5={}));A00([F6],AB.prototype,"onDidChangeFocus",null);A00([F6],AB.prototype,"onDidChangeSelection",null)});class Lb{get delay(){if(Date.now()-this.lastHoverHideTime<200)return 0;return this.configurationService.getValue("workbench.hover.delay")}constructor(J,$){this.configurationService=J,this.hoverService=$,this.lastHoverHideTime=0,this.placement="element"}showHover(J,$){var X;let Y=(J.content instanceof HTMLElement?(X=J.content.textContent)!==null&&X!==void 0?X:"":typeof J.content==="string"?J.content:J.content.value).length>20;return this.hoverService.showHover({...J,persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:Y,skipFadeInAnimation:!0}},$)}onDidHideHover(){this.lastHoverHideTime=Date.now()}}var QO,PB,JH,wb;var kb=w(()=>{T0();d8();JB();V1();e1();k5();_0();z0();L1();q2();I5();BB();c0();WB();Tb();Nb();QO={iconClass:h0.asClassName(F0.quickInputBack),tooltip:F("quickInput.back","Back"),handle:-1};PB=class PB extends m{constructor(J){super();this.ui=J,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=PB.noPromptMessage,this._severity=E6.Ignore,this.onDidTriggerButtonEmitter=this._register(new x),this.onDidHideEmitter=this._register(new x),this.onDisposeEmitter=this._register(new x),this.visibleDisposables=this._register(new $0),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(J){this._title=J,this.update()}get description(){return this._description}set description(J){this._description=J,this.update()}get step(){return this._steps}set step(J){this._steps=J,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(J){this._totalSteps=J,this.update()}get enabled(){return this._enabled}set enabled(J){this._enabled=J,this.update()}get contextKey(){return this._contextKey}set contextKey(J){this._contextKey=J,this.update()}get busy(){return this._busy}set busy(J){this._busy=J,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(J){let $=this._ignoreFocusOut!==J&&!A4;if(this._ignoreFocusOut=J&&!A4,$)this.update()}get buttons(){return this._buttons}set buttons(J){this._buttons=J,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(J){this._toggles=J!==null&&J!==void 0?J:[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(J){this._validationMessage=J,this.update()}get severity(){return this._severity}set severity(J){this._severity=J,this.update()}show(){if(this.visible)return;if(this.visibleDisposables.add(this.ui.onDidTriggerButton((J)=>{if(this.buttons.indexOf(J)!==-1)this.onDidTriggerButtonEmitter.fire(J)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length)this.buttonsUpdated=!0;if(this.toggles.length)this.togglesUpdated=!0;this.update()}hide(){if(!this.visible)return;this.ui.hide()}didHide(J=Jq.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:J})}update(){var J,$;if(!this.visible)return;let X=this.getTitle();if(X&&this.ui.title.textContent!==X)this.ui.title.textContent=X;else if(!X&&this.ui.title.innerHTML!=="&nbsp;")this.ui.title.innerText=" ";let Y=this.getDescription();if(this.ui.description1.textContent!==Y)this.ui.description1.textContent=Y;if(this.ui.description2.textContent!==Y)this.ui.description2.textContent=Y;if(this._widgetUpdated)if(this._widgetUpdated=!1,this._widget)x5(this.ui.widget,this._widget);else x5(this.ui.widget);if(this.busy&&!this.busyDelay)this.busyDelay=new s8,this.busyDelay.setIfNotSet(()=>{if(this.visible)this.ui.progressBar.infinite()},800);if(!this.busy&&this.busyDelay)this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0;if(this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let Q=this.buttons.filter((q)=>q===QO).map((q,U)=>FB(q,`id-${U}`,async()=>this.onDidTriggerButtonEmitter.fire(q)));this.ui.leftActionBar.push(Q,{icon:!0,label:!1}),this.ui.rightActionBar.clear();let G=this.buttons.filter((q)=>q!==QO).map((q,U)=>FB(q,`id-${U}`,async()=>this.onDidTriggerButtonEmitter.fire(q)));this.ui.rightActionBar.push(G,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;let Q=($=(J=this.toggles)===null||J===void 0?void 0:J.filter((G)=>G instanceof XY))!==null&&$!==void 0?$:[];this.ui.inputBox.toggles=Q}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let Z=this.validationMessage||this.noValidationMessage;if(this._lastValidationMessage!==Z)this._lastValidationMessage=Z,x5(this.ui.message),F00(Z,this.ui.message,{callback:(Q)=>{this.ui.linkOpenerDelegate(Q)},disposables:this.visibleDisposables});if(this._lastSeverity!==this.severity)this._lastSeverity=this.severity,this.showMessageDecoration(this.severity)}getTitle(){if(this.title&&this.step)return`${this.title} (${this.getSteps()})`;if(this.title)return this.title;if(this.step)return this.getSteps();return""}getDescription(){return this.description||""}getSteps(){if(this.step&&this.totalSteps)return F("quickInput.steps","{0}/{1}",this.step,this.totalSteps);if(this.step)return String(this.step);return""}showMessageDecoration(J){if(this.ui.inputBox.showDecoration(J),J!==E6.Ignore){let $=this.ui.inputBox.stylesForType(J);this.ui.message.style.color=$.foreground?`${$.foreground}`:"",this.ui.message.style.backgroundColor=$.background?`${$.background}`:"",this.ui.message.style.border=$.border?`1px solid ${$.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};PB.noPromptMessage=F("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");JH=class JH extends PB{constructor(){super(...arguments);this._value="",this.onDidChangeValueEmitter=this._register(new x),this.onWillAcceptEmitter=this._register(new x),this.onDidAcceptEmitter=this._register(new x),this.onDidCustomEmitter=this._register(new x),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=CJ.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new x),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new x),this.onDidTriggerItemButtonEmitter=this._register(new x),this.onDidTriggerSeparatorButtonEmitter=this._register(new x),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=(J)=>J,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(J){this._quickNavigate=J,this.update()}get value(){return this._value}set value(J){this.doSetValue(J)}doSetValue(J,$){if(this._value!==J){if(this._value=J,!$)this.update();if(this.visible){if(this.ui.list.filter(this.filterValue(this._value)))this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(J){this._ariaLabel=J,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(J){this._placeholder=J,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(J){this.ui.list.scrollTop=J}set items(J){this._items=J,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(J){this._canSelectMany=J,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(J){this._canAcceptInBackground=J}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(J){this._matchOnDescription=J,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(J){this._matchOnDetail=J,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(J){this._matchOnLabel=J,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(J){this._matchOnLabelMode=J,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(J){this._sortByLabel=J,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(J){this._keepScrollPosition=J}get itemActivation(){return this._itemActivation}set itemActivation(J){this._itemActivation=J}get activeItems(){return this._activeItems}set activeItems(J){this._activeItems=J,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(J){this._selectedItems=J,this.selectedItemsUpdated=!0,this.update()}get keyMods(){if(this._quickNavigate)return J00;return this.ui.keyMods}set valueSelection(J){this._valueSelection=J,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(J){this._customButton=J,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(J){this._customButtonLabel=J,this.update()}get customHover(){return this._customButtonHover}set customHover(J){this._customButtonHover=J,this.update()}get ok(){return this._ok}set ok(J){this._ok=J,this.update()}get hideInput(){return!!this._hideInput}set hideInput(J){this._hideInput=J,this.update()}trySelectFirst(){if(!this.canSelectMany)this.ui.list.focus(d5.First)}show(){if(!this.visible)this.visibleDisposables.add(this.ui.inputBox.onDidChange((J)=>{this.doSetValue(J,!0)})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((J)=>{switch(J.keyCode){case 18:if(this.ui.list.focus(d5.Next),this.canSelectMany)this.ui.list.domFocus();a0.stop(J,!0);break;case 16:if(this.ui.list.getFocusedElements().length)this.ui.list.focus(d5.Previous);else this.ui.list.focus(d5.Last);if(this.canSelectMany)this.ui.list.domFocus();a0.stop(J,!0);break;case 12:if(this.ui.list.focus(d5.NextPage),this.canSelectMany)this.ui.list.domFocus();a0.stop(J,!0);break;case 11:if(this.ui.list.focus(d5.PreviousPage),this.canSelectMany)this.ui.list.domFocus();a0.stop(J,!0);break;case 17:if(!this._canAcceptInBackground)return;if(!this.ui.inputBox.isSelectionAtEnd())return;if(this.activeItems[0])this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0);break;case 14:if((J.ctrlKey||J.metaKey)&&!J.shiftKey&&!J.altKey)this.ui.list.focus(d5.First),a0.stop(J,!0);break;case 13:if((J.ctrlKey||J.metaKey)&&!J.shiftKey&&!J.altKey)this.ui.list.focus(d5.Last),a0.stop(J,!0);break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{if(this.canSelectMany){if(!this.ui.list.getCheckedElements().length)this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)}else if(this.activeItems[0])this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems);this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((J)=>{if(this.activeItemsUpdated)return;if(this.activeItemsToConfirm!==this._activeItems&&B6(J,this._activeItems,($,X)=>$===X))return;this._activeItems=J,this.onDidChangeActiveEmitter.fire(J)})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:J,event:$})=>{if(this.canSelectMany){if(J.length)this.ui.list.setSelectedElements([]);return}if(this.selectedItemsToConfirm!==this._selectedItems&&B6(J,this._selectedItems,(X,Y)=>X===Y))return;if(this._selectedItems=J,this.onDidChangeSelectionEmitter.fire(J),J.length)this.handleAccept(ZU($)&&$.button===1)})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((J)=>{if(!this.canSelectMany)return;if(this.selectedItemsToConfirm!==this._selectedItems&&B6(J,this._selectedItems,($,X)=>$===X))return;this._selectedItems=J,this.onDidChangeSelectionEmitter.fire(J)})),this.visibleDisposables.add(this.ui.list.onButtonTriggered((J)=>this.onDidTriggerItemButtonEmitter.fire(J))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((J)=>this.onDidTriggerSeparatorButtonEmitter.fire(J))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0;super.show()}handleAccept(J){let $=!1;if(this.onWillAcceptEmitter.fire({veto:()=>$=!0}),!$)this.onDidAcceptEmitter.fire({inBackground:J})}registerQuickNavigation(){return r(this.ui.container,U0.KEY_UP,(J)=>{if(this.canSelectMany||!this._quickNavigate)return;let $=new R1(J),X=$.keyCode;if(this._quickNavigate.keybindings.some((Q)=>{let G=Q.getChords();if(G.length>1)return!1;if(G[0].shiftKey&&X===4){if($.ctrlKey||$.altKey||$.metaKey)return!1;return!0}if(G[0].altKey&&X===6)return!0;if(G[0].ctrlKey&&X===5)return!0;if(G[0].metaKey&&X===57)return!0;return!1})){if(this.activeItems[0])this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1);this._quickNavigate=void 0}})}update(){if(!this.visible)return;let J=this.keepScrollPosition?this.scrollTop:0,$=!!this.description,X={title:!!this.title||!!this.step||!!this.buttons.length,description:$,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||$,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};if(this.ui.setVisibilities(X),super.update(),this.ui.inputBox.value!==this.value)this.ui.inputBox.value=this.value;if(this.valueSelectionUpdated)this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]});if(this.ui.inputBox.placeholder!==(this.placeholder||""))this.ui.inputBox.placeholder=this.placeholder||"";let Y=this.ariaLabel;if(!Y&&X.inputBox){if(Y=this.placeholder||JH.DEFAULT_ARIA_LABEL,this.title)Y+=` - ${this.title}`}if(this.ui.list.ariaLabel!==Y)this.ui.list.ariaLabel=Y!==null&&Y!==void 0?Y:null;if(this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case CJ.NONE:this._itemActivation=CJ.FIRST;break;case CJ.SECOND:this.ui.list.focus(d5.Second),this._itemActivation=CJ.FIRST;break;case CJ.LAST:this.ui.list.focus(d5.Last),this._itemActivation=CJ.FIRST;break;default:this.trySelectFirst();break}if(this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany)if(this.canSelectMany)this.ui.list.clearFocus();else this.trySelectFirst();if(this.activeItemsUpdated){if(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems)this.activeItemsToConfirm=null}if(this.selectedItemsUpdated){if(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany)this.ui.list.setCheckedElements(this.selectedItems);else this.ui.list.setSelectedElements(this.selectedItems);if(this.selectedItemsToConfirm===this._selectedItems)this.selectedItemsToConfirm=null}if(this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",!X.inputBox){if(this.ui.list.domFocus(),this.canSelectMany)this.ui.list.focus(d5.First)}if(this.keepScrollPosition)this.scrollTop=J}};JH.DEFAULT_ARIA_LABEL=F("quickInputBox.ariaLabel","Type to narrow down results.");wb=class wb extends PB{constructor(){super(...arguments);this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new x),this.onDidAcceptEmitter=this._register(new x),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(J){this._value=J||"",this.update()}get placeholder(){return this._placeholder}set placeholder(J){this._placeholder=J,this.update()}get password(){return this._password}set password(J){this._password=J,this.update()}show(){if(!this.visible)this.visibleDisposables.add(this.ui.inputBox.onDidChange((J)=>{if(J===this.value)return;this._value=J,this.onDidValueChangeEmitter.fire(J)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0;super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");let J={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};if(this.ui.setVisibilities(J),super.update(),this.ui.inputBox.value!==this.value)this.ui.inputBox.value=this.value;if(this.valueSelectionUpdated)this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]});if(this.ui.inputBox.placeholder!==(this.placeholder||""))this.ui.inputBox.placeholder=this.placeholder||"";if(this.ui.inputBox.password!==this.password)this.ui.inputBox.password=this.password}}});var M00=w(()=>{K0(".monaco-text-button{box-sizing:border-box;text-align:center;cursor:pointer;border:1px solid var(--vscode-button-border,transparent);border-radius:2px;justify-content:center;align-items:center;width:100%;padding:4px;line-height:18px;display:flex}.monaco-text-button:focus{outline-offset:2px!important}.monaco-text-button:hover{text-decoration:none!important}.monaco-button.disabled:focus,.monaco-button.disabled{cursor:default;opacity:.4!important}.monaco-text-button .codicon{margin:0 .2em;color:inherit!important}.monaco-text-button.monaco-text-button-with-short-label{flex-flow:wrap;height:28px;padding:0 4px;overflow:hidden}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label{flex-basis:100%}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{flex-grow:1;width:0;overflow:hidden}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label,.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{font-weight:400;font-style:inherit;justify-content:center;align-items:center;padding:4px 0;display:flex}.monaco-button-dropdown{cursor:pointer;display:flex}.monaco-button-dropdown.disabled{cursor:default}.monaco-button-dropdown>.monaco-button:focus{outline-offset:-1px!important}.monaco-button-dropdown.disabled>.monaco-button.disabled,.monaco-button-dropdown.disabled>.monaco-button.disabled:focus,.monaco-button-dropdown.disabled>.monaco-button-dropdown-separator{opacity:.4!important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-right-width:0!important}.monaco-button-dropdown .monaco-button-dropdown-separator{cursor:default;padding:4px 0}.monaco-button-dropdown .monaco-button-dropdown-separator>div{width:1px;height:100%}.monaco-button-dropdown>.monaco-button.monaco-dropdown-button{border:1px solid var(--vscode-button-border,transparent);border-radius:0 2px 2px 0;align-items:center;display:flex;border-left-width:0!important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-radius:2px 0 0 2px}.monaco-description-button{flex-direction:column;align-items:center;margin:4px 5px;display:flex}.monaco-description-button .monaco-button-description{padding:4px 20px;font-size:11px;font-style:italic}.monaco-description-button .monaco-button-label,.monaco-description-button .monaco-button-description{justify-content:center;align-items:center;display:flex}.monaco-description-button .monaco-button-label>.codicon,.monaco-description-button .monaco-button-description>.codicon{margin:0 .2em;color:inherit!important}.monaco-button.default-colors,.monaco-button-dropdown.default-colors>.monaco-button{color:var(--vscode-button-foreground);background-color:var(--vscode-button-background)}.monaco-button.default-colors:hover,.monaco-button-dropdown.default-colors>.monaco-button:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-button.default-colors.secondary,.monaco-button-dropdown.default-colors>.monaco-button.secondary{color:var(--vscode-button-secondaryForeground);background-color:var(--vscode-button-secondaryBackground)}.monaco-button.default-colors.secondary:hover,.monaco-button-dropdown.default-colors>.monaco-button.secondary:hover{background-color:var(--vscode-button-secondaryHoverBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator{background-color:var(--vscode-button-background);border-top:1px solid var(--vscode-button-border);border-bottom:1px solid var(--vscode-button-border)}.monaco-button-dropdown.default-colors .monaco-button.secondary+.monaco-button-dropdown-separator{background-color:var(--vscode-button-secondaryBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator>div{background-color:var(--vscode-button-separator)}")});var N91,$H;var Eb=w(()=>{T0();$P();d8();nR();g4();x3();T9();_0();S3();z0();I5();M00();N91={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:n.white.toString(),buttonForeground:n.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0};$H=class $H extends m{get onDidClick(){return this._onDidClick.event}constructor(J,$){super();this._label="",this._onDidClick=this._register(new x),this.options=$,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!$.secondary);let X=$.secondary?$.buttonSecondaryBackground:$.buttonBackground,Y=$.secondary?$.buttonSecondaryForeground:$.buttonForeground;if(this._element.style.color=Y||"",this._element.style.backgroundColor=X||"",$.supportShortLabel)this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label");if(typeof $.ariaLabel==="string")this._element.setAttribute("aria-label",$.ariaLabel);J.appendChild(this._element),this._register(b1.addTarget(this._element)),[U0.CLICK,f1.Tap].forEach((Z)=>{this._register(r(this._element,Z,(Q)=>{if(!this.enabled){a0.stop(Q);return}this._onDidClick.fire(Q)}))}),this._register(r(this._element,U0.KEY_DOWN,(Z)=>{let Q=new R1(Z),G=!1;if(this.enabled&&(Q.equals(3)||Q.equals(10)))this._onDidClick.fire(Z),G=!0;else if(Q.equals(9))this._element.blur(),G=!0;if(G)a0.stop(Q,!0)})),this._register(r(this._element,U0.MOUSE_OVER,(Z)=>{if(!this._element.classList.contains("disabled"))this.updateBackground(!0)})),this._register(r(this._element,U0.MOUSE_OUT,(Z)=>{this.updateBackground(!1)})),this.focusTracker=this._register(lY(this._element)),this._register(this.focusTracker.onDidFocus(()=>{if(this.enabled)this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{if(this.enabled)this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(J){let $=[];for(let X of xJ(J))if(typeof X==="string"){if(X=X.trim(),X==="")continue;let Y=document.createElement("span");Y.textContent=X,$.push(Y)}else $.push(X);return $}updateBackground(J){let $;if(this.options.secondary)$=J?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground;else $=J?this.options.buttonHoverBackground:this.options.buttonBackground;if($)this._element.style.backgroundColor=$}get element(){return this._element}set label(J){var $;if(this._label===J)return;if(yZ(this._label)&&yZ(J)&&yn(this._label,J))return;this._element.classList.add("monaco-text-button");let X=this.options.supportShortLabel?this._labelElement:this._element;if(yZ(J)){let Y=wz(J,{inline:!0});Y.dispose();let Z=($=Y.element.querySelector("p"))===null||$===void 0?void 0:$.innerHTML;if(Z){let Q=eA(Z,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});X.innerHTML=Q}else x5(X)}else if(this.options.supportIcons)x5(X,...this.getContentElements(J));else X.textContent=J;if(typeof this.options.title==="string")this._element.title=this.options.title;else if(this.options.title)this._element.title=vn(J);if(typeof this.options.ariaLabel==="string")this._element.setAttribute("aria-label",this.options.ariaLabel);else if(this.options.ariaLabel)this._element.setAttribute("aria-label",this._element.title);this._label=J}get label(){return this._label}set icon(J){this._element.classList.add(...h0.asClassNameArray(J))}set enabled(J){if(J)this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0;else this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0))}get enabled(){return!this._element.classList.contains("disabled")}}});var O00=w(()=>{K0(".monaco-count-badge{text-align:center;box-sizing:border-box;border-radius:11px;min-width:18px;min-height:18px;padding:3px 6px;font-size:11px;font-weight:400;line-height:11px;display:inline-block}.monaco-count-badge.long{border-radius:2px;min-height:auto;padding:2px 3px;line-height:normal}")});class GO{constructor(J,$,X){this.options=$,this.styles=X,this.count=0,this.element=j0(J,B0(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(J){this.count=J,this.render()}setTitleFormat(J){this.titleFormat=J,this.render()}render(){var J,$;if(this.element.textContent=MQ(this.countFormat,this.count),this.element.title=MQ(this.titleFormat,this.count),this.element.style.backgroundColor=(J=this.styles.badgeBackground)!==null&&J!==void 0?J:"",this.element.style.color=($=this.styles.badgeForeground)!==null&&$!==void 0?$:"",this.styles.badgeBorder)this.element.style.border=`1px solid ${this.styles.badgeBorder}`}}var _00=w(()=>{T0();X1();O00()});var N00=w(()=>{K0(".monaco-progress-container{width:100%;height:2px;overflow:hidden}.monaco-progress-container .progress-bit{width:2%;height:2px;display:none;position:absolute;left:0}.monaco-progress-container.active .progress-bit{display:inherit}.monaco-progress-container.discrete .progress-bit{transition:width .1s linear;left:0}.monaco-progress-container.discrete.done .progress-bit{width:100%}.monaco-progress-container.infinite .progress-bit{animation-name:progress;animation-duration:4s;animation-timing-function:linear;animation-iteration-count:infinite;transform:translate(0,0)}.monaco-progress-container.infinite.infinite-long-running .progress-bit{animation-timing-function:steps(100,end)}@keyframes progress{0%{transform:translate(0%)scaleX(1)}50%{transform:translate(2500%)scaleX(3)}to{transform:translate(4900%)scaleX(1)}}")});var T00="done",w00="active",Ib="infinite",yb="infinite-long-running",L00="discrete",DB;var k00=w(()=>{T0();e1();z0();N00();DB=class DB extends m{constructor(J,$){super();this.workedVal=0,this.showDelayedScheduler=this._register(new H6(()=>P9(this.element),0)),this.longRunningScheduler=this._register(new H6(()=>this.infiniteLongRunning(),DB.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(J,$)}create(J,$){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),J.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=($===null||$===void 0?void 0:$.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(w00,Ib,yb,L00),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(J){if(this.element.classList.add(T00),!this.element.classList.contains(Ib))if(this.bit.style.width="inherit",J)setTimeout(()=>this.off(),200);else this.off();else if(this.bit.style.opacity="0",J)setTimeout(()=>this.off(),200);else this.off();return this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(L00,T00,yb),this.element.classList.add(w00,Ib),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(yb)}getContainer(){return this.element}};DB.LONG_RUNNING_INFINITE_THRESHOLD=1e4});var s30,xb;var E00=w(()=>{T0();bM();z0();q2();BB();s30=B0;xb=class xb extends m{constructor(J,$,X){super();this.parent=J,this.onKeyDown=(Z)=>{return q6(this.findInput.inputBox.inputElement,U0.KEY_DOWN,Z)},this.onDidChange=(Z)=>{return this.findInput.onDidChange(Z)},this.container=j0(this.parent,s30(".quick-input-box")),this.findInput=this._register(new rz(this.container,void 0,{label:"",inputBoxStyles:$,toggleStyles:X}));let Y=this.findInput.inputBox.inputElement;Y.role="combobox",Y.ariaHasPopup="menu",Y.ariaAutoComplete="list",Y.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(J){this.findInput.setValue(J)}select(J=null){this.findInput.inputBox.select(J)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(J){this.findInput.inputBox.setPlaceHolder(J)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(J){this.findInput.inputBox.inputElement.type=J?"password":"text"}set enabled(J){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!J)}set toggles(J){this.findInput.setAdditionalToggles(J)}setAttribute(J,$){this.findInput.inputBox.inputElement.setAttribute(J,$)}showDecoration(J){if(J===E6.Ignore)this.findInput.clearMessage();else this.findInput.showMessage({type:J===E6.Info?1:J===E6.Warning?2:3,content:""})}stylesForType(J){return this.findInput.inputBox.stylesForType(J===E6.Info?1:J===E6.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}});var v9,RB;var I00=w(()=>{T0();$Y();Eb();_00();k00();_8();_0();z0();q2();c0();WB();E00();Tb();kb();N8();v9=B0;RB=class RB extends m{constructor(J,$,X){super();this.options=J,this.themeService=$,this.layoutService=X,this.enabled=!0,this.onDidAcceptEmitter=this._register(new x),this.onDidCustomEmitter=this._register(new x),this.onDidTriggerButtonEmitter=this._register(new x),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new x),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new x),this.onHide=this.onHideEmitter.event,this.idPrefix=J.idPrefix,this.parentElement=J.container,this.styles=J.styles,this._register(q0.runAndSubscribe(CG,({window:Y,disposables:Z})=>this.registerKeyModsListeners(Y,Z),{window:W1,disposables:this._store})),this._register(Ap((Y)=>{if(this.ui&&O0(this.ui.container)===Y)this.reparentUI(this.layoutService.mainContainer)}))}registerKeyModsListeners(J,$){let X=(Y)=>{this.keyMods.ctrlCmd=Y.ctrlKey||Y.metaKey,this.keyMods.alt=Y.altKey};for(let Y of[U0.KEY_DOWN,U0.KEY_UP,U0.MOUSE_DOWN])$.add(r(J,Y,X,!0))}getUI(J){if(this.ui){if(J){if(this.parentElement.ownerDocument!==this.layoutService.activeContainer.ownerDocument)this.reparentUI(this.layoutService.activeContainer)}return this.ui}let $=j0(this.parentElement,v9(".quick-input-widget.show-file-icons"));$.tabIndex=-1,$.style.display="none";let X=p5($),Y=j0($,v9(".quick-input-titlebar")),Z=this._register(new S8(Y,{hoverDelegate:this.options.hoverDelegate}));Z.domNode.classList.add("quick-input-left-action-bar");let Q=j0(Y,v9(".quick-input-title")),G=this._register(new S8(Y,{hoverDelegate:this.options.hoverDelegate}));G.domNode.classList.add("quick-input-right-action-bar");let q=j0($,v9(".quick-input-header")),U=j0(q,v9("input.quick-input-check-all"));U.type="checkbox",U.setAttribute("aria-label",F("quickInput.checkAll","Toggle all checkboxes")),this._register(q6(U,U0.CHANGE,(h)=>{let L=U.checked;l.setAllVisibleChecked(L)})),this._register(r(U,U0.CLICK,(h)=>{if(h.x||h.y)V.setFocus()}));let z=j0(q,v9(".quick-input-description")),H=j0(q,v9(".quick-input-and-message")),j=j0(H,v9(".quick-input-filter")),V=this._register(new xb(j,this.styles.inputBox,this.styles.toggle));V.setAttribute("aria-describedby",`${this.idPrefix}message`);let W=j0(j,v9(".quick-input-visible-count"));W.setAttribute("aria-live","polite"),W.setAttribute("aria-atomic","true");let B=new GO(W,{countFormat:F({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),K=j0(j,v9(".quick-input-count"));K.setAttribute("aria-live","polite");let P=new GO(K,{countFormat:F({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),A=j0(q,v9(".quick-input-action")),D=this._register(new $H(A,this.styles.button));D.label=F("ok","OK"),this._register(D.onDidClick((h)=>{this.onDidAcceptEmitter.fire()}));let M=j0(q,v9(".quick-input-action")),R=this._register(new $H(M,{...this.styles.button,supportIcons:!0}));R.label=F("custom","Custom"),this._register(R.onDidClick((h)=>{this.onDidCustomEmitter.fire()}));let O=j0(H,v9(`#${this.idPrefix}message.quick-input-message`)),N=this._register(new DB($,this.styles.progressBar));N.getContainer().classList.add("quick-input-progress");let T=j0($,v9(".quick-input-html-widget"));T.tabIndex=-1;let S=j0($,v9(".quick-input-description")),v=this.idPrefix+"list",l=this._register(new AB($,v,this.options,this.themeService));V.setAttribute("aria-controls",v),this._register(l.onDidChangeFocus(()=>{var h;V.setAttribute("aria-activedescendant",(h=l.getActiveDescendant())!==null&&h!==void 0?h:"")})),this._register(l.onChangedAllVisibleChecked((h)=>{U.checked=h})),this._register(l.onChangedVisibleCount((h)=>{B.setCount(h)})),this._register(l.onChangedCheckedCount((h)=>{P.setCount(h)})),this._register(l.onLeave(()=>{setTimeout(()=>{if(V.setFocus(),this.controller instanceof JH&&this.controller.canSelectMany)l.clearFocus()},0)}));let f=lY($);return this._register(f),this._register(r($,U0.FOCUS,(h)=>{if(e6(h.relatedTarget,$))return;this.previousFocusElement=h.relatedTarget instanceof HTMLElement?h.relatedTarget:void 0},!0)),this._register(f.onDidBlur(()=>{if(!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut())this.hide(Jq.Blur);this.previousFocusElement=void 0})),this._register(r($,U0.FOCUS,(h)=>{V.setFocus()})),this._register(q6($,U0.KEY_DOWN,(h)=>{if(e6(h.target,T))return;switch(h.keyCode){case 3:if(a0.stop(h,!0),this.enabled)this.onDidAcceptEmitter.fire();break;case 9:a0.stop(h,!0),this.hide(Jq.Gesture);break;case 2:if(!h.altKey&&!h.ctrlKey&&!h.metaKey){let L=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if($.classList.contains("show-checkboxes"))L.push("input");else L.push("input[type=text]");if(this.getUI().list.isDisplayed())L.push(".monaco-list");if(this.getUI().message)L.push(".quick-input-message a");if(this.getUI().widget){if(e6(h.target,this.getUI().widget))break;L.push(".quick-input-html-widget")}let b=$.querySelectorAll(L.join(", "));if(h.shiftKey&&h.target===b[0])a0.stop(h,!0),l.clearFocus();else if(!h.shiftKey&&e6(h.target,b[b.length-1]))a0.stop(h,!0),b[0].focus()}break;case 10:if(h.ctrlKey)a0.stop(h,!0),this.getUI().list.toggleHover();break}})),this.ui={container:$,styleSheet:X,leftActionBar:Z,titleBar:Y,title:Q,description1:S,description2:z,widget:T,rightActionBar:G,checkAll:U,inputContainer:H,filterContainer:j,inputBox:V,visibleCountContainer:W,visibleCount:B,countContainer:K,count:P,okContainer:A,ok:D,message:O,customButtonContainer:M,customButton:R,list:l,progressBar:N,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:(h)=>this.show(h),hide:()=>this.hide(),setVisibilities:(h)=>this.setVisibilities(h),setEnabled:(h)=>this.setEnabled(h),setContextKey:(h)=>this.options.setContextKey(h),linkOpenerDelegate:(h)=>this.options.linkOpenerDelegate(h)},this.updateStyles(),this.ui}reparentUI(J){if(this.ui)this.parentElement=J,j0(this.parentElement,this.ui.container)}pick(J,$={},X=j5.None){return new Promise((Y,Z)=>{let Q=(z)=>{var H;Q=Y,(H=$.onKeyMods)===null||H===void 0||H.call($,G.keyMods),Y(z)};if(X.isCancellationRequested){Q(void 0);return}let G=this.createQuickPick(),q,U=[G,G.onDidAccept(()=>{if(G.canSelectMany)Q(G.selectedItems.slice()),G.hide();else{let z=G.activeItems[0];if(z)Q(z),G.hide()}}),G.onDidChangeActive((z)=>{let H=z[0];if(H&&$.onDidFocus)$.onDidFocus(H)}),G.onDidChangeSelection((z)=>{if(!G.canSelectMany){let H=z[0];if(H)Q(H),G.hide()}}),G.onDidTriggerItemButton((z)=>$.onDidTriggerItemButton&&$.onDidTriggerItemButton({...z,removeItem:()=>{let H=G.items.indexOf(z.item);if(H!==-1){let j=G.items.slice(),V=j.splice(H,1),W=G.activeItems.filter((K)=>K!==V[0]),B=G.keepScrollPosition;if(G.keepScrollPosition=!0,G.items=j,W)G.activeItems=W;G.keepScrollPosition=B}}})),G.onDidTriggerSeparatorButton((z)=>{var H;return(H=$.onDidTriggerSeparatorButton)===null||H===void 0?void 0:H.call($,z)}),G.onDidChangeValue((z)=>{if(q&&!z&&(G.activeItems.length!==1||G.activeItems[0]!==q))G.activeItems=[q]}),X.onCancellationRequested(()=>{G.hide()}),G.onDidHide(()=>{h1(U),Q(void 0)})];G.title=$.title,G.canSelectMany=!!$.canPickMany,G.placeholder=$.placeHolder,G.ignoreFocusOut=!!$.ignoreFocusLost,G.matchOnDescription=!!$.matchOnDescription,G.matchOnDetail=!!$.matchOnDetail,G.matchOnLabel=$.matchOnLabel===void 0||$.matchOnLabel,G.quickNavigate=$.quickNavigate,G.hideInput=!!$.hideInput,G.contextKey=$.contextKey,G.busy=!0,Promise.all([J,$.activeItem]).then(([z,H])=>{if(q=H,G.busy=!1,G.items=z,G.canSelectMany)G.selectedItems=z.filter((j)=>j.type!=="separator"&&j.picked);if(q)G.activeItems=[q]}),G.show(),Promise.resolve(J).then(void 0,(z)=>{Z(z),G.hide()})})}createQuickPick(){let J=this.getUI(!0);return new JH(J)}createInputBox(){let J=this.getUI(!0);return new wb(J)}show(J){let $=this.getUI(!0);this.onShowEmitter.fire();let X=this.controller;this.controller=J,X===null||X===void 0||X.didHide(),this.setEnabled(!0),$.leftActionBar.clear(),$.title.textContent="",$.description1.textContent="",$.description2.textContent="",x5($.widget),$.rightActionBar.clear(),$.checkAll.checked=!1,$.inputBox.placeholder="",$.inputBox.password=!1,$.inputBox.showDecoration(E6.Ignore),$.visibleCount.setCount(0),$.count.setCount(0),x5($.message),$.progressBar.stop(),$.list.setElements([]),$.list.matchOnDescription=!1,$.list.matchOnDetail=!1,$.list.matchOnLabel=!0,$.list.sortByLabel=!0,$.ignoreFocusOut=!1,$.inputBox.toggles=void 0;let Y=this.options.backKeybindingLabel();QO.tooltip=Y?F("quickInput.backWithKeybinding","Back ({0})",Y):F("quickInput.back","Back"),$.container.style.display="",this.updateLayout(),$.inputBox.setFocus()}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(J){let $=this.getUI();$.title.style.display=J.title?"":"none",$.description1.style.display=J.description&&(J.inputBox||J.checkAll)?"":"none",$.description2.style.display=J.description&&!(J.inputBox||J.checkAll)?"":"none",$.checkAll.style.display=J.checkAll?"":"none",$.inputContainer.style.display=J.inputBox?"":"none",$.filterContainer.style.display=J.inputBox?"":"none",$.visibleCountContainer.style.display=J.visibleCount?"":"none",$.countContainer.style.display=J.count?"":"none",$.okContainer.style.display=J.ok?"":"none",$.customButtonContainer.style.display=J.customButton?"":"none",$.message.style.display=J.message?"":"none",$.progressBar.getContainer().style.display=J.progressBar?"":"none",$.list.display(!!J.list),$.container.classList.toggle("show-checkboxes",!!J.checkBox),$.container.classList.toggle("hidden-input",!J.inputBox&&!J.description),this.updateLayout()}setEnabled(J){if(J!==this.enabled){this.enabled=J;for(let $ of this.getUI().leftActionBar.viewItems)$.action.enabled=J;for(let $ of this.getUI().rightActionBar.viewItems)$.action.enabled=J;this.getUI().checkAll.disabled=!J,this.getUI().inputBox.enabled=J,this.getUI().ok.enabled=J,this.getUI().list.enabled=J}}hide(J){var $,X;let Y=this.controller;if(!Y)return;let Z=($=this.ui)===null||$===void 0?void 0:$.container,Q=Z&&!zP(Z);if(this.controller=null,this.onHideEmitter.fire(),Z)Z.style.display="none";if(!Q){let G=this.previousFocusElement;while(G&&!G.offsetParent)G=(X=G.parentElement)!==null&&X!==void 0?X:void 0;if(G===null||G===void 0?void 0:G.offsetParent)G.focus(),this.previousFocusElement=void 0;else this.options.returnFocus()}Y.didHide(J)}layout(J,$){this.dimension=J,this.titleBarOffset=$,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;let J=this.ui.container.style,$=Math.min(this.dimension.width*0.62,RB.MAX_WIDTH);J.width=$+"px",J.marginLeft="-"+$/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*0.4)}}applyStyles(J){this.styles=J,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:J,quickInputBackground:$,quickInputForeground:X,widgetBorder:Y,widgetShadow:Z}=this.styles.widget;this.ui.titleBar.style.backgroundColor=J!==null&&J!==void 0?J:"",this.ui.container.style.backgroundColor=$!==null&&$!==void 0?$:"",this.ui.container.style.color=X!==null&&X!==void 0?X:"",this.ui.container.style.border=Y?`1px solid ${Y}`:"",this.ui.container.style.boxShadow=Z?`0 0 8px 2px ${Z}`:"",this.ui.list.style(this.styles.list);let Q=[];if(this.styles.pickerGroup.pickerGroupBorder)Q.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`);if(this.styles.pickerGroup.pickerGroupForeground)Q.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`);if(this.styles.pickerGroup.pickerGroupForeground)Q.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }");if(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground){if(Q.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground)Q.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`);if(this.styles.keybindingLabel.keybindingLabelBorder)Q.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`);if(this.styles.keybindingLabel.keybindingLabelBottomBorder)Q.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`);if(this.styles.keybindingLabel.keybindingLabelShadow)Q.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`);if(this.styles.keybindingLabel.keybindingLabelForeground)Q.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`);Q.push("}")}let G=Q.join(`
`);if(G!==this.ui.styleSheet.textContent)this.ui.styleSheet.textContent=G}}};RB.MAX_WIDTH=600});var a30=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},XH=function(J,$){return function(X,Y){$(X,Y,J)}},qO;var y00=w(()=>{_8();_0();t1();s0();z2();Db();y3();Y00();mz();i8();G5();kb();I00();H7();fR();qO=class extends tL{get controller(){if(!this._controller)this._controller=this._register(this.createController());return this._controller}get hasController(){return!!this._controller}get quickAccess(){if(!this._quickAccess)this._quickAccess=this._register(this.instantiationService.createInstance(XO));return this._quickAccess}constructor($,X,Y,Z,Q,G){super(Y);this.instantiationService=$,this.contextKeyService=X,this.layoutService=Z,this.configurationService=Q,this.hoverService=G,this._onShow=this._register(new x),this._onHide=this._register(new x),this.contexts=new Map}createController($=this.layoutService,X){let Y={idPrefix:"quickInput_",container:$.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{return},setContextKey:(Q)=>this.setContextKey(Q),linkOpenerDelegate:(Q)=>{this.instantiationService.invokeFunction((G)=>{G.get(oX).open(Q,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>$.focus(),createList:(Q,G,q,U,z)=>this.instantiationService.createInstance(aM,Q,G,q,U,z),styles:this.computeStyles(),hoverDelegate:new Lb(this.configurationService,this.hoverService)},Z=this._register(new RB({...Y,...X},this.themeService,this.layoutService));return Z.layout($.activeContainerDimension,$.activeContainerOffset.quickPickTop),this._register($.onDidLayoutActiveContainer((Q)=>Z.layout(Q,$.activeContainerOffset.quickPickTop))),this._register($.onDidChangeActiveContainer(()=>{if(Z.isVisible())return;Z.layout($.activeContainerDimension,$.activeContainerOffset.quickPickTop)})),this._register(Z.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(Z.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),Z}setContextKey($){let X;if($){if(X=this.contexts.get($),!X)X=new A0($,!1).bindTo(this.contextKeyService),this.contexts.set($,X)}if(X&&X.get())return;this.resetContextKeys(),X===null||X===void 0||X.set(!0)}resetContextKeys(){this.contexts.forEach(($)=>{if($.get())$.reset()})}pick($,X={},Y=j5.None){return this.controller.pick($,X,Y)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){if(this.hasController)this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:P0(AL),quickInputForeground:P0(bc),quickInputTitleBackground:P0(Sc),widgetBorder:P0(Uc),widgetShadow:P0(TX)},inputBox:Lx,toggle:wx,countBadge:Pt,button:Ft,progressBar:Kt,keybindingLabel:Bt,list:hZ({listBackground:AL,listFocusBackground:xX,listFocusForeground:yX,listInactiveFocusForeground:yX,listInactiveSelectionIconForeground:GZ,listInactiveFocusBackground:xX,listFocusOutline:O6,listInactiveFocusOutline:O6}),pickerGroup:{pickerGroupBorder:P0(Cc),pickerGroupForeground:P0(ZD)}}}};qO=a30([XH(0,l0),XH(1,m0),XH(2,Q5),XH(3,G4),XH(4,g1),XH(5,Mz)],qO)});class YH{static get(J){return J.getContribution(YH.ID)}constructor(J){this.editor=J,this.widget=new zO(this.editor)}dispose(){this.widget.dispose()}}class zO{constructor(J){this.codeEditor=J,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return zO.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}var x00=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},M2=function(J,$){return function(X,Y){$(X,Y,J)}},bb,UO=class{get activeService(){let $=this.codeEditorService.getFocusedCodeEditor();if(!$)throw Error("Quick input service needs a focused editor to work.");let X=this.mapEditorToService.get($);if(!X){let Y=X=this.instantiationService.createInstance(bb,$);this.mapEditorToService.set($,X),Y$($.onDidDispose)(()=>{Y.dispose(),this.mapEditorToService.delete($)})}return X}get quickAccess(){return this.activeService.quickAccess}constructor($,X){this.instantiationService=$,this.codeEditorService=X,this.mapEditorToService=new Map}pick($,X={},Y=j5.None){return this.activeService.pick($,X,Y)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};var b00=w(()=>{ut();_0();L4();G5();_8();s0();t1();Yy();i9();y00();H7();fR();bb=class extends qO{constructor($,X,Y,Z,Q,G,q){super(X,Y,Z,new LR($.getContainerDomNode(),Q),G,q);this.host=void 0;let U=YH.get($);if(U){let z=U.widget;this.host={_serviceBrand:void 0,get mainContainer(){return z.getDomNode()},getContainer(){return z.getDomNode()},get containers(){return[z.getDomNode()]},get activeContainer(){return z.getDomNode()},get mainContainerDimension(){return $.getLayoutInfo()},get activeContainerDimension(){return $.getLayoutInfo()},get onDidLayoutMainContainer(){return $.onDidLayoutChange},get onDidLayoutActiveContainer(){return $.onDidLayoutChange},get onDidLayoutContainer(){return q0.map($.onDidLayoutChange,(H)=>({container:z.getDomNode(),dimension:H}))},get onDidChangeActiveContainer(){return q0.None},get onDidAddContainer(){return q0.None},get whenActiveContainerStylesLoaded(){return Promise.resolve()},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>$.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};bb=x00([M2(1,l0),M2(2,m0),M2(3,Q5),M2(4,X6),M2(5,g1),M2(6,Mz)],bb);UO=x00([M2(0,l0),M2(1,X6)],UO);YH.ID="editor.controller.quickInput";zO.ID="editor.contrib.quickInputWidget";w4(YH.ID,YH,4)});class S00{constructor(J,$,X,Y,Z){this._parsedThemeRuleBrand=void 0,this.token=J,this.index=$,this.fontStyle=X,this.foreground=Y,this.background=Z}}function r30(J){if(!J||!Array.isArray(J))return[];let $=[],X=0;for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y],G=-1;if(typeof Q.fontStyle==="string"){G=0;let z=Q.fontStyle.split(" ");for(let H=0,j=z.length;H<j;H++)switch(z[H]){case"italic":G=G|1;break;case"bold":G=G|2;break;case"underline":G=G|4;break;case"strikethrough":G=G|8;break}}let q=null;if(typeof Q.foreground==="string")q=Q.foreground;let U=null;if(typeof Q.background==="string")U=Q.background;$[X++]=new S00(Q.token||"",Y,G,q,U)}return $}function i30(J,$){J.sort((H,j)=>{let V=e30(H.token,j.token);if(V!==0)return V;return H.index-j.index});let X=0,Y="000000",Z="ffffff";while(J.length>=1&&J[0].token===""){let H=J.shift();if(H.fontStyle!==-1)X=H.fontStyle;if(H.foreground!==null)Y=H.foreground;if(H.background!==null)Z=H.background}let Q=new C00;for(let H of $)Q.getId(H);let G=Q.getId(Y),q=Q.getId(Z),U=new Sb(X,G,q),z=new Cb(U);for(let H=0,j=J.length;H<j;H++){let V=J[H];z.insert(V.token,V.fontStyle,Q.getId(V.foreground),Q.getId(V.background))}return new HO(Q,z)}class C00{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(J){if(J===null)return 0;let $=J.match(n30);if(!$)throw Error("Illegal value for token color: "+J);J=$[1].toUpperCase();let X=this._color2id.get(J);if(X)return X;return X=++this._lastColorId,this._color2id.set(J,X),this._id2color[X]=n.fromHex("#"+J),X}getColorMap(){return this._id2color.slice(0)}}class HO{static createFromRawTokenTheme(J,$){return this.createFromParsedTokenTheme(r30(J),$)}static createFromParsedTokenTheme(J,$){return i30(J,$)}constructor(J,$){this._colorMap=J,this._root=$,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(J){return this._root.match(J)}match(J,$){let X=this._cache.get($);if(typeof X>"u"){let Y=this._match($),Z=t30($);X=(Y.metadata|Z<<8)>>>0,this._cache.set($,X)}return(X|J<<0)>>>0}}function t30(J){let $=J.match(o30);if(!$)return 0;switch($[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw Error("Unexpected match for standard token type!")}function e30(J,$){if(J<$)return-1;if(J>$)return 1;return 0}class Sb{constructor(J,$,X){this._themeTrieElementRuleBrand=void 0,this._fontStyle=J,this._foreground=$,this._background=X,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new Sb(this._fontStyle,this._foreground,this._background)}acceptOverwrite(J,$,X){if(J!==-1)this._fontStyle=J;if($!==0)this._foreground=$;if(X!==0)this._background=X;this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class Cb{constructor(J){this._themeTrieElementBrand=void 0,this._mainRule=J,this._children=new Map}match(J){if(J==="")return this._mainRule;let $=J.indexOf("."),X,Y;if($===-1)X=J,Y="";else X=J.substring(0,$),Y=J.substring($+1);let Z=this._children.get(X);if(typeof Z<"u")return Z.match(Y);return this._mainRule}insert(J,$,X,Y){if(J===""){this._mainRule.acceptOverwrite($,X,Y);return}let Z=J.indexOf("."),Q,G;if(Z===-1)Q=J,G="";else Q=J.substring(0,Z),G=J.substring(Z+1);let q=this._children.get(Q);if(typeof q>"u")q=new Cb(this._mainRule.clone()),this._children.set(Q,q);q.insert(G,$,X,Y)}}function v00(J){let $=[];for(let X=1,Y=J.length;X<Y;X++){let Z=J[X];$[X]=`.mtk${X} { color: ${Z}; }`}return $.push(".mtki { font-style: italic; }"),$.push(".mtkb { font-weight: bold; }"),$.push(".mtku { text-decoration: underline; text-underline-position: under; }"),$.push(".mtks { text-decoration: line-through; }"),$.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),$.join(`
`)}var n30,o30;var h00=w(()=>{T9();n30=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;o30=/\b(comment|string|regex|regexp)\b/});var f00,g00,p00,m00;var u00=w(()=>{E$();i8();f00={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[V8]:"#FFFFFE",[IX]:"#000000",[PL]:"#E5EBF1",[K3]:"#D3D3D3",[A3]:"#939393",[DL]:"#ADD6FF4D"}},g00={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[V8]:"#1E1E1E",[IX]:"#D4D4D4",[PL]:"#3A3D41",[K3]:"#404040",[A3]:"#707070",[DL]:"#ADD6FF26"}},p00={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[V8]:"#000000",[IX]:"#FFFFFF",[K3]:"#FFFFFF",[A3]:"#FFFFFF"}},m00={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[V8]:"#FFFFFF",[IX]:"#292929",[K3]:"#292929",[A3]:"#292929"}}});class s00{constructor(){this._onDidChange=new x,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:F("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:F("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${h0.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(J,$,X,Y){let Z=this.iconsById[J];if(Z){if(X&&!Z.description){Z.description=X,this.iconSchema.properties[J].markdownDescription=`${X} $(${J})`;let q=this.iconReferenceSchema.enum.indexOf(J);if(q!==-1)this.iconReferenceSchema.enumDescriptions[q]=X;this._onDidChange.fire()}return Z}let Q={id:J,description:X,defaults:$,deprecationMessage:Y};this.iconsById[J]=Q;let G={$ref:"#/definitions/icons"};if(Y)G.deprecationMessage=Y;if(X)G.markdownDescription=`${X}: $(${J})`;return this.iconSchema.properties[J]=G,this.iconReferenceSchema.enum.push(J),this.iconReferenceSchema.enumDescriptions.push(X||""),this._onDidChange.fire(),{id:J}}getIcons(){return Object.keys(this.iconsById).map((J)=>this.iconsById[J])}getIcon(J){return this.iconsById[J]}getIconSchema(){return this.iconSchema}toString(){let J=(Z,Q)=>{return Z.id.localeCompare(Q.id)},$=(Z)=>{while(h0.isThemeIcon(Z.defaults))Z=this.iconsById[Z.defaults.id];return`codicon codicon-${Z?Z.id:""}`},X=[];X.push("| preview     | identifier                        | default codicon ID                | description"),X.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let Y=Object.keys(this.iconsById).map((Z)=>this.iconsById[Z]);for(let Z of Y.filter((Q)=>!!Q.description).sort(J))X.push(`|<i class="${$(Z)}"></i>|${Z.id}|${h0.isThemeIcon(Z.defaults)?Z.defaults.id:Z.id}|${Z.description||""}|`);X.push("| preview     | identifier                        "),X.push("| ----------- | --------------------------------- |");for(let Z of Y.filter((Q)=>!h0.isThemeIcon(Q.defaults)).sort(J))X.push(`|<i class="${$(Z)}"></i>|${Z.id}|`);return X.join(`
`)}}function m7(J,$,X,Y){return $q.registerIcon(J,$,X,Y)}function vb(){return $q}function $q0(){let J=LK();for(let $ in J){let X="\\"+J[$].toString(16);$q.registerIcon($,{fontCharacter:X})}}var Jq0,c00,l00,$q,a00="vscode://schemas/icons",r00,d00,s41,a41,r41,i41,n41;var ZH=w(()=>{e1();k5();I5();_0();V5();c0();MP();h7();Jq0={IconContribution:"base.contributions.icons"};(function(J){function $(X,Y){let Z=X.defaults;while(h0.isThemeIcon(Z)){let Q=$q.getIcon(Z.id);if(!Q)return;Z=Q.defaults}return Z}J.getDefinition=$})(c00||(c00={}));(function(J){function $(Y){return{weight:Y.weight,style:Y.style,src:Y.src.map((Z)=>({format:Z.format,location:Z.location.toString()}))}}J.toJSONObject=$;function X(Y){let Z=(Q)=>N5(Q)?Q:void 0;if(Y&&Array.isArray(Y.src)&&Y.src.every((Q)=>N5(Q.format)&&N5(Q.location)))return{weight:Z(Y.weight),style:Z(Y.style),src:Y.src.map((Q)=>({format:Q.format,location:C0.parse(Q.location)}))};return}J.fromJSONObject=X})(l00||(l00={}));$q=new s00;G6.add(Jq0.IconContribution,$q);$q0();r00=G6.as(cG.JSONContribution);r00.registerSchema(a00,$q.getIconSchema());d00=new H6(()=>r00.notifySchemaChanged(a00),200);$q.onDidChange(()=>{if(!d00.isScheduled())d00.schedule()});s41=m7("widget-close",F0.close,F("widgetClose","Icon for the close action in widgets.")),a41=m7("goto-previous-location",F0.arrowUp,F("previousChangeIcon","Icon for goto previous editor location.")),r41=m7("goto-next-location",F0.arrowDown,F("nextChangeIcon","Icon for goto next editor location.")),i41=h0.modify(F0.sync,"spin"),n41=h0.modify(F0.loading,"spin")});function i00(J){let $=new $0,X=$.add(new x),Y=vb();if($.add(Y.onDidChange(()=>X.fire())),J)$.add(J.onDidProductIconThemeChange(()=>X.fire()));return{dispose:()=>$.dispose(),onDidChange:X.event,getCSS(){let Z=J?J.getProductIconTheme():new jO,Q={},G=(U)=>{let z=Z.getIcon(U);if(!z)return;let H=z.font;if(H)return Q[H.id]=H.definition,`.codicon-${U.id}:before { content: '${z.fontCharacter}'; font-family: ${fT(H.id)}; }`;return`.codicon-${U.id}:before { content: '${z.fontCharacter}'; }`},q=[];for(let U of Y.getIcons()){let z=G(U);if(z)q.push(z)}for(let U in Q){let z=Q[U],H=z.weight?`font-weight: ${z.weight};`:"",j=z.style?`font-style: ${z.style};`:"",V=z.src.map((W)=>`${DJ(W.location)} format('${W.format}')`).join(", ");q.push(`@font-face { src: ${V}; font-family: ${fT(U)};${H}${j} font-display: block; }`)}return q.join(`
`)}}}class jO{getIcon(J){let $=vb(),X=J.defaults;while(h0.isThemeIcon(X)){let Y=$.getIcon(X.id);if(!Y)return;X=Y.defaults}return X}}var n00=w(()=>{T0();_0();z0();I5();ZH()});class fb{constructor(J,$){this.semanticHighlighting=!1,this.themeData=$;let X=$.base;if(J.length>0){if(WO(J))this.id=J;else this.id=X+" "+J;this.themeName=J}else this.id=X,this.themeName=X;this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){if(this.themeData.inherit)this.colors=null,this._tokenTheme=null}getColors(){if(!this.colors){let J=new Map;for(let $ in this.themeData.colors)J.set($,n.fromHex(this.themeData.colors[$]));if(this.themeData.inherit){let $=hb(this.themeData.base);for(let X in $.colors)if(!J.has(X))J.set(X,n.fromHex($.colors[X]))}this.colors=J}return this.colors}getColor(J,$){let X=this.getColors().get(J);if(X)return X;if($!==!1)return this.getDefault(J);return}getDefault(J){let $=this.defaultColors[J];if($)return $;return $=o00.resolveDefaultColor(J,this),this.defaultColors[J]=$,$}defines(J){return this.getColors().has(J)}get type(){switch(this.base){case O2:return E9.LIGHT;case QH:return E9.HIGH_CONTRAST_DARK;case GH:return E9.HIGH_CONTRAST_LIGHT;default:return E9.DARK}}get tokenTheme(){if(!this._tokenTheme){let J=[],$=[];if(this.themeData.inherit){let Z=hb(this.themeData.base);if(J=Z.rules,Z.encodedTokensColors)$=Z.encodedTokensColors}let X=this.themeData.colors["editor.foreground"],Y=this.themeData.colors["editor.background"];if(X||Y){let Z={token:""};if(X)Z.foreground=X;if(Y)Z.background=Y;J.push(Z)}if(J=J.concat(this.themeData.rules),this.themeData.encodedTokensColors)$=this.themeData.encodedTokensColors;this._tokenTheme=HO.createFromRawTokenTheme(J,$)}return this._tokenTheme}getTokenStyleMetadata(J,$,X){let Z=this.tokenTheme._match([J].concat($).join(".")).metadata,Q=j8.getForeground(Z),G=j8.getFontStyle(Z);return{foreground:Q,italic:Boolean(G&1),bold:Boolean(G&2),underline:Boolean(G&4),strikethrough:Boolean(G&8)}}}function WO(J){return J===O2||J===MB||J===QH||J===GH}function hb(J){switch(J){case O2:return f00;case MB:return g00;case QH:return p00;case GH:return m00}}function VO(J){let $=hb(J);return new fb(J,$)}var O2="vs",MB="vs-dark",QH="hc-black",GH="hc-light",o00,Xq0,gb;var t00=w(()=>{T0();e7();T9();_0();c8();h00();u00();h7();i8();G5();z0();qZ();n00();N8();o00=G6.as(KL.ColorContribution),Xq0=G6.as(oL.ThemingContribution);gb=class gb extends m{constructor(){super();this._onColorThemeChange=this._register(new x),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new x),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new jO,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(O2,VO(O2)),this._knownThemes.set(MB,VO(MB)),this._knownThemes.set(QH,VO(QH)),this._knownThemes.set(GH,VO(GH));let J=this._register(i00(this));this._codiconCSS=J.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(O2),this._onOSSchemeChanged(),this._register(J.onDidChange(()=>{this._codiconCSS=J.getCSS(),this._updateCSS()})),ZT(W1,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(J){if(hG(J))return this._registerShadowDomContainer(J);return this._registerRegularEditorContainer()}_registerRegularEditorContainer(){if(!this._globalStyleElement)this._globalStyleElement=p5(void 0,(J)=>{J.className="monaco-colors",J.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement);return m.None}_registerShadowDomContainer(J){let $=p5(J,(X)=>{X.className="monaco-colors",X.textContent=this._allCSS});return this._styleElements.push($),{dispose:()=>{for(let X=0;X<this._styleElements.length;X++)if(this._styleElements[X]===$){this._styleElements.splice(X,1);return}}}}defineTheme(J,$){if(!/^[a-z0-9\-]+$/i.test(J))throw Error("Illegal theme name!");if(!WO($.base)&&!WO(J))throw Error("Illegal theme base!");if(this._knownThemes.set(J,new fb(J,$)),WO(J))this._knownThemes.forEach((X)=>{if(X.base===J)X.notifyBaseUpdated()});if(this._theme.themeName===J)this.setTheme(J)}getColorTheme(){return this._theme}setColorMapOverride(J){this._colorMapOverride=J,this._updateThemeOrColorMap()}setTheme(J){let $;if(this._knownThemes.has(J))$=this._knownThemes.get(J);else $=this._knownThemes.get(O2);this._updateActualTheme($)}_updateActualTheme(J){if(!J||this._theme===J)return;this._theme=J,this._updateThemeOrColorMap()}_onOSSchemeChanged(){if(this._autoDetectHighContrast){let J=W1.matchMedia("(forced-colors: active)").matches;if(J!==wJ(this._theme.type)){let $;if(H3(this._theme.type))$=J?QH:MB;else $=J?GH:O2;this._updateActualTheme(this._knownThemes.get($))}}}setAutoDetectHighContrast(J){this._autoDetectHighContrast=J,this._onOSSchemeChanged()}_updateThemeOrColorMap(){let J=[],$={},X={addRule:(Q)=>{if(!$[Q])J.push(Q),$[Q]=!0}};Xq0.getThemingParticipants().forEach((Q)=>Q(this._theme,X,this._environment));let Y=[];for(let Q of o00.getColors()){let G=this._theme.getColor(Q.id,!0);if(G)Y.push(`${XD(Q.id)}: ${G.toString()};`)}X.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${Y.join(`
`)} }`);let Z=this._colorMapOverride||this._theme.tokenTheme.getColorMap();X.addRule(v00(Z)),this._themeCSS=J.join(`
`),this._updateCSS(),$6.setColorMap(Z),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach((J)=>J.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}});var U9;var OB=w(()=>{s0();U9=w0("themeService")});var Yq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},pb=function(J,$){return function(X,Y){$(X,Y,J)}},BO;var e00=w(()=>{T0();N8();_0();z0();P$();H7();t1();z2();BO=class extends m{constructor($,X,Y){super();this._contextKeyService=$,this._layoutService=X,this._configurationService=Y,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new x,this._onDidChangeReducedMotion=new x,this._accessibilityModeEnabledContext=du.bindTo(this._contextKeyService);let Z=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((G)=>{if(G.affectsConfiguration("editor.accessibilitySupport"))Z(),this._onDidChangeScreenReaderOptimized.fire();if(G.affectsConfiguration("workbench.reduceMotion"))this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire()})),Z(),this._register(this.onDidChangeScreenReaderOptimized(()=>Z()));let Q=W1.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=Q.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(Q)}initReducedMotionListeners($){this._register(r($,"change",()=>{if(this._systemMotionReduced=$.matches,this._configMotionReduced==="auto")this._onDidChangeReducedMotion.fire()}));let X=()=>{let Y=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",Y),this._layoutService.mainContainer.classList.toggle("enable-motion",!Y)};X(),this._register(this.onDidChangeReducedMotion(()=>X()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let $=this._configurationService.getValue("editor.accessibilitySupport");return $==="on"||$==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){let $=this._configMotionReduced;return $==="on"||$==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};BO=Yq0([pb(0,m0),pb(1,G4),pb(2,g1)],BO)});function Zq0(J,$,X){let Y=rg($)?$.submenu.id:$.id,Z=typeof $.title==="string"?$.title:$.title.value,Q=TG({id:`hide/${J.id}/${Y}`,label:F("hide.label","Hide '{0}'",Z),run(){X.updateHidden(J,Y,!0)}}),G=TG({id:`toggle/${J.id}/${Y}`,label:Z,get checked(){return!X.isHidden(J,Y)},run(){X.updateHidden(J,Y,!!this.checked)}});return{hide:Q,toggle:G,get isHidden(){return!G.checked}}}var AO=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},Xq=function(J,$){return function(X,Y){$(X,Y,J)}},qH,_2,FO=class{constructor($,X){this._commandService=$,this._hiddenStates=new KO(X)}createMenu($,X,Y){return new ub($,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...Y},this._commandService,X)}resetHiddenStates($){this._hiddenStates.reset($)}},KO,mb,ub=class{constructor($,X,Y,Z,Q){this._disposables=new $0,this._menuInfo=new mb($,X,Y.emitEventsForSubmenuChanges,Z,Q);let G=new H6(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},Y.eventDebounceDelay);this._disposables.add(G),this._disposables.add(BX.onDidChangeMenu((H)=>{if(H.has($))G.schedule()}));let q=this._disposables.add(new $0),U=(H)=>{let j=!1,V=!1,W=!1;for(let B of H)if(j=j||B.isStructuralChange,V=V||B.isEnablementChange,W=W||B.isToggleChange,j&&V&&W)break;return{menu:this,isStructuralChange:j,isEnablementChange:V,isToggleChange:W}},z=()=>{q.add(Q.onDidChangeContext((H)=>{let j=H.affectsSome(this._menuInfo.structureContextKeys),V=H.affectsSome(this._menuInfo.preconditionContextKeys),W=H.affectsSome(this._menuInfo.toggledContextKeys);if(j||V||W)this._onDidChange.fire({menu:this,isStructuralChange:j,isEnablementChange:V,isToggleChange:W})})),q.add(X.onDidChange((H)=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Zj({onWillAddFirstListener:z,onDidRemoveLastListener:q.clear.bind(q),delay:Y.eventDebounceDelay,merge:U}),this.onDidChange=this._onDidChange.event}getActions($){return this._menuInfo.createActionGroups($)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};var J10=w(()=>{e1();_0();z0();FJ();C7();t1();S7();pz();V1();c0();FO=AO([Xq(0,y5),Xq(1,h$)],FO);KO=qH=class{constructor($){this._storageService=$,this._disposables=new $0,this._onDidChange=new x,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{let X=$.get(qH._key,0,"{}");this._data=JSON.parse(X)}catch(X){this._data=Object.create(null)}this._disposables.add($.onDidChangeValue(0,qH._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{let X=$.get(qH._key,0,"{}");this._data=JSON.parse(X)}catch(X){console.log("FAILED to read storage after UPDATE",X)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault($,X){var Y;return(Y=this._hiddenByDefaultCache.get(`${$.id}/${X}`))!==null&&Y!==void 0?Y:!1}setDefaultState($,X,Y){this._hiddenByDefaultCache.set(`${$.id}/${X}`,Y)}isHidden($,X){var Y,Z;let Q=this._isHiddenByDefault($,X),G=(Z=(Y=this._data[$.id])===null||Y===void 0?void 0:Y.includes(X))!==null&&Z!==void 0?Z:!1;return Q?!G:G}updateHidden($,X,Y){if(this._isHiddenByDefault($,X))Y=!Y;let Q=this._data[$.id];if(!Y){if(Q){let G=Q.indexOf(X);if(G>=0)mh(Q,G);if(Q.length===0)delete this._data[$.id]}}else if(!Q)this._data[$.id]=[X];else if(Q.indexOf(X)<0)Q.push(X);this._persist()}reset($){if($===void 0)this._data=Object.create(null),this._persist();else{for(let{id:X}of $)if(this._data[X])delete this._data[X];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let $=JSON.stringify(this._data);this._storageService.store(qH._key,$,0,0)}finally{this._ignoreChangeEvent=!1}}};KO._key="menu.hiddenCommands";KO=qH=AO([Xq(0,h$)],KO);mb=_2=class{constructor($,X,Y,Z,Q){this._id=$,this._hiddenStates=X,this._collectContextKeysForSubmenus=Y,this._commandService=Z,this._contextKeyService=Q,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let $=BX.getMenuItems(this._id),X;$.sort(_2._compareMenuItems);for(let Y of $){let Z=Y.group||"";if(!X||X[0]!==Z)X=[Z,[]],this._menuGroups.push(X);X[1].push(Y),this._collectContextKeys(Y)}}_collectContextKeys($){if(_2._fillInKbExprKeys($.when,this._structureContextKeys),tq($)){if($.command.precondition)_2._fillInKbExprKeys($.command.precondition,this._preconditionContextKeys);if($.command.toggled){let X=$.command.toggled.condition||$.command.toggled;_2._fillInKbExprKeys(X,this._toggledContextKeys)}}else if(this._collectContextKeysForSubmenus)BX.getMenuItems($.submenu).forEach(this._collectContextKeys,this)}createActionGroups($){let X=[];for(let Y of this._menuGroups){let[Z,Q]=Y,G=[];for(let q of Q)if(this._contextKeyService.contextMatchesRules(q.when)){let U=tq(q);if(U)this._hiddenStates.setDefaultState(this._id,q.command.id,!!q.isHiddenByDefault);let z=Zq0(this._id,U?q.command:q,this._hiddenStates);if(U)G.push(new WJ(q.command,q.alt,$,z,this._contextKeyService,this._commandService));else{let H=new _2(q.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups($),j=Z5.join(...H.map((V)=>V[1]));if(j.length>0)G.push(new xG(q,z,j))}}if(G.length>0)X.push([Z,G])}return X}static _fillInKbExprKeys($,X){if($)for(let Y of $.keys())X.add(Y)}static _compareMenuItems($,X){let Y=$.group,Z=X.group;if(Y!==Z){if(!Y)return 1;else if(!Z)return-1;if(Y==="navigation")return-1;else if(Z==="navigation")return 1;let q=Y.localeCompare(Z);if(q!==0)return q}let Q=$.order||0,G=X.order||0;if(Q<G)return-1;else if(Q>G)return 1;return _2._compareTitles(tq($)?$.command.title:$.title,tq(X)?X.command.title:X.title)}static _compareTitles($,X){let Y=typeof $==="string"?$:$.original,Z=typeof X==="string"?X:X.original;return Y.localeCompare(Z)}};mb=_2=AO([Xq(3,y5),Xq(4,m0)],mb);ub=AO([Xq(3,y5),Xq(4,m0)],ub)});var Qq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},$10=function(J,$){return function(X,Y){$(X,Y,J)}},cb,_B;var X10=w(()=>{e7();T0();N8();e1();_0();wQ();z0();z2();o9();_B=cb=class extends m{constructor($,X){super();if(this.layoutService=$,this.logService=X,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,K9||LA)this.installWebKitWriteTextWorkaround();this._register(q0.runAndSubscribe(CG,({window:Y,disposables:Z})=>{Z.add(r(Y.document,"copy",()=>this.clearResources()))},{window:W1,disposables:this._store}))}installWebKitWriteTextWorkaround(){let $=()=>{let X=new Nj;if(this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled)this.webKitPendingClipboardWritePromise.cancel();this.webKitPendingClipboardWritePromise=X,navigator.clipboard.write([new ClipboardItem({"text/plain":X.p})]).catch(async(Y)=>{if(!(Y instanceof Error)||Y.name!=="NotAllowedError"||!X.isRejected)this.logService.error(Y)})};this._register(q0.runAndSubscribe(this.layoutService.onDidAddContainer,({container:X,disposables:Y})=>{Y.add(r(X,"click",$)),Y.add(r(X,"keydown",$))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText($,X){if(this.writeResources([]),X){this.mapTextToType.set(X,$);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete($);try{return await navigator.clipboard.writeText($)}catch(Y){console.error(Y)}this.fallbackWriteText($)}fallbackWriteText($){let X=HP(),Y=X.activeElement,Z=X.body.appendChild(B0("textarea",{"aria-hidden":!0}));if(Z.style.height="1px",Z.style.width="1px",Z.style.position="absolute",Z.value=$,Z.focus(),Z.select(),X.execCommand("copy"),Y instanceof HTMLElement)Y.focus();X.body.removeChild(Z)}async readText($){if($)return this.mapTextToType.get($)||"";try{return await navigator.clipboard.readText()}catch(X){console.error(X)}return""}async readFindText(){return this.findText}async writeFindText($){this.findText=$}async writeResources($){if($.length===0)this.clearResources();else this.resources=$,this.resourcesStateHash=await this.computeResourcesStateHash()}async readResources(){let $=await this.computeResourcesStateHash();if(this.resourcesStateHash!==$)this.clearResources();return this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;let $=await this.readText();return TQ($.substring(0,cb.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};_B.MAX_RESOURCE_STATE_SOURCE_LENGTH=1000;_B=cb=Qq0([$10(0,G4),$10(1,P5)],_B)});var N2;var NB=w(()=>{s0();N2=w0("clipboardService")});class DO{constructor(J,$){this._id=J,this._parent=$,this._value=Object.create(null),this._value._contextId=J}get value(){return{...this._value}}setValue(J,$){if(this._value[J]!==$)return this._value[J]=$,!0;return!1}removeValue(J){if(J in this._value)return delete this._value[J],!0;return!1}getValue(J){let $=this._value[J];if(typeof $>"u"&&this._parent)return this._parent.getValue(J);return $}}class Y10{constructor(J,$,X){this._service=J,this._key=$,this._defaultValue=X,this.reset()}set(J){this._service.setContext(this._key,J)}reset(){if(typeof this._defaultValue>"u")this._service.removeContext(this._key);else this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class lb{constructor(J){this.key=J}affectsSome(J){return J.has(this.key)}allKeysContainedIn(J){return this.affectsSome(J)}}class db{constructor(J){this.keys=J}affectsSome(J){for(let $ of this.keys)if(J.has($))return!0;return!1}allKeysContainedIn(J){return this.keys.every(($)=>J.has($))}}class Z10{constructor(J){this.events=J}affectsSome(J){for(let $ of this.events)if($.affectsSome(J))return!0;return!1}allKeysContainedIn(J){return this.events.every(($)=>$.allKeysContainedIn(J))}}function Uq0(J,$){return J.allKeysContainedIn(new Set(Object.keys($)))}function zq0(J){while(J){if(J.hasAttribute(TB)){let $=J.getAttribute(TB);if($)return parseInt($,10);return NaN}J=J.parentElement}return 0}function Hq0(J,$,X){J.get(m0).createKey(String($),jq0(X))}function jq0(J){return HK(J,($)=>{if(typeof $==="object"&&$.$mid===1)return C0.revive($).toString();if($ instanceof C0)return $.toString();return})}var Gq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},qq0=function(J,$){return function(X,Y){$(X,Y,J)}},TB="data-keybinding-context",Yq,wB,sb,PO,Q10;var G10=w(()=>{_0();P4();z0();n7();YM();V5();c0();C7();H7();t1();Yq=class Yq extends DO{constructor(){super(-1,null)}setValue(J,$){return!1}removeValue(J){return!1}getValue(J){return}};Yq.INSTANCE=new Yq;wB=class wB extends DO{constructor(J,$,X){super(J,null);this._configurationService=$,this._values=bZ.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((Y)=>{if(Y.source===7){let Z=Array.from(this._values,([Q])=>Q);this._values.clear(),X.fire(new db(Z))}else{let Z=[];for(let Q of Y.affectedKeys){let G=`config.${Q}`,q=this._values.findSuperstr(G);if(q!==void 0)Z.push(...A1.map(q,([U])=>U)),this._values.deleteSuperstr(G);if(this._values.has(G))Z.push(G),this._values.delete(G)}X.fire(new db(Z))}})}dispose(){this._listener.dispose()}getValue(J){if(J.indexOf(wB._keyPrefix)!==0)return super.getValue(J);if(this._values.has(J))return this._values.get(J);let $=J.substr(wB._keyPrefix.length),X=this._configurationService.getValue($),Y=void 0;switch(typeof X){case"number":case"boolean":case"string":Y=X;break;default:if(Array.isArray(X))Y=JSON.stringify(X);else Y=X}return this._values.set(J,Y),Y}setValue(J,$){return super.setValue(J,$)}removeValue(J){return super.removeValue(J)}};wB._keyPrefix="config.";sb=class sb extends m{constructor(J){super();this._onDidChangeContext=this._register(new qJ({merge:($)=>new Z10($)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=J}createKey(J,$){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new Y10(this,J,$)}bufferChangeEvents(J){this._onDidChangeContext.pause();try{J()}finally{this._onDidChangeContext.resume()}}createScoped(J){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new Q10(this,J)}contextMatchesRules(J){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");let $=this.getContextValuesContainer(this._myContextId);return J?J.evaluate($):!0}getContextKeyValue(J){if(this._isDisposed)return;return this.getContextValuesContainer(this._myContextId).getValue(J)}setContext(J,$){if(this._isDisposed)return;let X=this.getContextValuesContainer(this._myContextId);if(!X)return;if(X.setValue(J,$))this._onDidChangeContext.fire(new lb(J))}removeContext(J){if(this._isDisposed)return;if(this.getContextValuesContainer(this._myContextId).removeValue(J))this._onDidChangeContext.fire(new lb(J))}getContext(J){if(this._isDisposed)return Yq.INSTANCE;return this.getContextValuesContainer(zq0(J))}dispose(){super.dispose(),this._isDisposed=!0}};PO=class extends sb{constructor($){super(0);this._contexts=new Map,this._lastContextId=0;let X=this._register(new wB(this._myContextId,$,this._onDidChangeContext));this._contexts.set(this._myContextId,X)}getContextValuesContainer($){if(this._isDisposed)return Yq.INSTANCE;return this._contexts.get($)||Yq.INSTANCE}createChildContext($=this._myContextId){if(this._isDisposed)throw Error("ContextKeyService has been disposed");let X=++this._lastContextId;return this._contexts.set(X,new DO(X,this.getContextValuesContainer($))),X}disposeContext($){if(!this._isDisposed)this._contexts.delete($)}};PO=Gq0([qq0(0,g1)],PO);Q10=class Q10 extends sb{constructor(J,$){super(J.createChildContext());if(this._parentChangeListener=this._register(new q8),this._parent=J,this._updateParentChangeListener(),this._domNode=$,this._domNode.hasAttribute(TB)){let X="";if(this._domNode.classList)X=Array.from(this._domNode.classList.values()).join(", ");console.error(`Element already has context attribute${X?": "+X:""}`)}this._domNode.setAttribute(TB,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext((J)=>{let X=this._parent.getContextValuesContainer(this._myContextId).value;if(!Uq0(J,X))this._onDidChangeContext.fire(J)})}dispose(){if(this._isDisposed)return;this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(TB),super.dispose()}getContextValuesContainer(J){if(this._isDisposed)return Yq.INSTANCE;return this._parent.getContextValuesContainer(J)}createChildContext(J=this._myContextId){if(this._isDisposed)throw Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(J)}disposeContext(J){if(this._isDisposed)return;this._parent.disposeContext(J)}};M6.registerCommand("_setContext",Hq0);M6.registerCommand({id:"getContextKeyInfo",handler(){return[...A0.all()].sort((J,$)=>J.key.localeCompare($.key))},metadata:{description:F("getContextKeyInfo","A command that returns information about context keys"),args:[]}});M6.registerCommand("_generateContextKeyInfo",function(){let J=[],$=new Set;for(let X of A0.all())if(!$.has(X.key))$.add(X.key),J.push(X);J.sort((X,Y)=>X.key.localeCompare(Y.key)),console.log(JSON.stringify(J,void 0,2))})});class q10{constructor(J,$){this.key=J,this.data=$,this.incoming=new Map,this.outgoing=new Map}}class RO{constructor(J){this._hashFn=J,this._nodes=new Map}roots(){let J=[];for(let $ of this._nodes.values())if($.outgoing.size===0)J.push($);return J}insertEdge(J,$){let X=this.lookupOrInsertNode(J),Y=this.lookupOrInsertNode($);X.outgoing.set(Y.key,Y),Y.incoming.set(X.key,X)}removeNode(J){let $=this._hashFn(J);this._nodes.delete($);for(let X of this._nodes.values())X.outgoing.delete($),X.incoming.delete($)}lookupOrInsertNode(J){let $=this._hashFn(J),X=this._nodes.get($);if(!X)X=new q10($,J),this._nodes.set($,X);return X}isEmpty(){return this._nodes.size===0}toString(){let J=[];for(let[$,X]of this._nodes)J.push(`${$}
	(-> incoming)[${[...X.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...X.outgoing.keys()].join(",")}]
`);return J.join(`
`)}findCycleSlow(){for(let[J,$]of this._nodes){let X=new Set([J]),Y=this._findCycle($,X);if(Y)return Y}return}_findCycle(J,$){for(let[X,Y]of J.outgoing){if($.has(X))return[...$,X].join(" -> ");$.add(X);let Z=this._findCycle(Y,$);if(Z)return Z;$.delete(X)}return}}class LB{constructor(J=new b$,$=!1,X,Y=Vq0){var Z;this._services=J,this._strict=$,this._parent=X,this._enableTracing=Y,this._activeInstantiations=new Set,this._services.set(l0,this),this._globalGraph=Y?(Z=X===null||X===void 0?void 0:X._globalGraph)!==null&&Z!==void 0?Z:new RO((Q)=>Q):void 0}createChild(J){return new LB(J,this._strict,this,this._enableTracing)}invokeFunction(J,...$){let X=z9.traceInvocation(this._enableTracing,J),Y=!1;try{return J({get:(Q)=>{if(Y)throw vq("service accessor is only valid during the invocation of its target method");let G=this._getOrCreateServiceInstance(Q,X);if(!G)throw Error(`[invokeFunction] unknown service '${Q}'`);return G}},...$)}finally{Y=!0,X.stop()}}createInstance(J,...$){let X,Y;if(J instanceof $4)X=z9.traceCreation(this._enableTracing,J.ctor),Y=this._createInstance(J.ctor,J.staticArguments.concat($),X);else X=z9.traceCreation(this._enableTracing,J),Y=this._createInstance(J,$,X);return X.stop(),Y}_createInstance(J,$=[],X){let Y=VJ.getServiceDependencies(J).sort((G,q)=>G.index-q.index),Z=[];for(let G of Y){let q=this._getOrCreateServiceInstance(G.id,X);if(!q)this._throwIfStrict(`[createInstance] ${J.name} depends on UNKNOWN service ${G.id}.`,!1);Z.push(q)}let Q=Y.length>0?Y[0].index:$.length;if($.length!==Q){console.trace(`[createInstance] First service dependency of ${J.name} at position ${Q+1} conflicts with ${$.length} static arguments`);let G=Q-$.length;if(G>0)$=$.concat(Array(G));else $=$.slice(0,Q)}return Reflect.construct(J,$.concat(Z))}_setServiceInstance(J,$){if(this._services.get(J)instanceof $4)this._services.set(J,$);else if(this._parent)this._parent._setServiceInstance(J,$);else throw Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(J){let $=this._services.get(J);if(!$&&this._parent)return this._parent._getServiceInstanceOrDescriptor(J);else return $}_getOrCreateServiceInstance(J,$){if(this._globalGraph&&this._globalGraphImplicitDependency)this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(J));let X=this._getServiceInstanceOrDescriptor(J);if(X instanceof $4)return this._safeCreateAndCacheServiceInstance(J,X,$.branch(J,!0));else return $.branch(J,!1),X}_safeCreateAndCacheServiceInstance(J,$,X){if(this._activeInstantiations.has(J))throw Error(`illegal state - RECURSIVELY instantiating service '${J}'`);this._activeInstantiations.add(J);try{return this._createAndCacheServiceInstance(J,$,X)}finally{this._activeInstantiations.delete(J)}}_createAndCacheServiceInstance(J,$,X){var Y;let Z=new RO((q)=>q.id.toString()),Q=0,G=[{id:J,desc:$,_trace:X}];while(G.length){let q=G.pop();if(Z.lookupOrInsertNode(q),Q++>1000)throw new ab(Z);for(let U of VJ.getServiceDependencies(q.desc.ctor)){let z=this._getServiceInstanceOrDescriptor(U.id);if(!z)this._throwIfStrict(`[createInstance] ${J} depends on ${U.id} which is NOT registered.`,!0);if((Y=this._globalGraph)===null||Y===void 0||Y.insertEdge(String(q.id),String(U.id)),z instanceof $4){let H={id:U.id,desc:z,_trace:q._trace.branch(U.id,!0)};Z.insertEdge(q,H),G.push(H)}}}while(!0){let q=Z.roots();if(q.length===0){if(!Z.isEmpty())throw new ab(Z);break}for(let{data:U}of q){if(this._getServiceInstanceOrDescriptor(U.id)instanceof $4){let H=this._createServiceInstanceWithOwner(U.id,U.desc.ctor,U.desc.staticArguments,U.desc.supportsDelayedInstantiation,U._trace);this._setServiceInstance(U.id,H)}Z.removeNode(U)}}return this._getServiceInstanceOrDescriptor(J)}_createServiceInstanceWithOwner(J,$,X=[],Y,Z){if(this._services.get(J)instanceof $4)return this._createServiceInstance(J,$,X,Y,Z);else if(this._parent)return this._parent._createServiceInstanceWithOwner(J,$,X,Y,Z);else throw Error(`illegalState - creating UNKNOWN service instance ${$.name}`)}_createServiceInstance(J,$,X=[],Y,Z){if(!Y)return this._createInstance($,X,Z);else{let Q=new LB(void 0,this._strict,this,this._enableTracing);Q._globalGraphImplicitDependency=String(J);let G=new Map,q=new NT(()=>{let U=Q._createInstance($,X,Z);for(let[z,H]of G){let j=U[z];if(typeof j==="function")for(let V of H)V.disposable=j.apply(U,V.listener)}return G.clear(),U});return new Proxy(Object.create(null),{get(U,z){if(!q.isInitialized){if(typeof z==="string"&&(z.startsWith("onDid")||z.startsWith("onWill"))){let V=G.get(z);if(!V)V=new m6,G.set(z,V);return(B,K,P)=>{if(q.isInitialized)return q.value[z](B,K,P);else{let A={listener:[B,K,P],disposable:void 0},D=V.push(A);return N0(()=>{var R;D(),(R=A.disposable)===null||R===void 0||R.dispose()})}}}}if(z in U)return U[z];let H=q.value,j=H[z];if(typeof j!=="function")return j;return j=j.bind(H),U[z]=j,j},set(U,z,H){return q.value[z]=H,!0},getPrototypeOf(U){return $.prototype}})}}_throwIfStrict(J,$){if($)console.warn(J);if(this._strict)throw Error(J)}}class z9{static traceInvocation(J,$){return!J?z9._None:new z9(2,$.name||Error().stack.split(`
`).slice(3,4).join(`
`))}static traceCreation(J,$){return!J?z9._None:new z9(1,$.name)}constructor(J,$){this.type=J,this.name=$,this._start=Date.now(),this._dep=[]}branch(J,$){let X=new z9(3,J.toString());return this._dep.push([J,$,X]),X}stop(){let J=Date.now()-this._start;z9._totals+=J;let $=!1;function X(Z,Q){let G=[],q=Array(Z+1).join("\t");for(let[U,z,H]of Q._dep)if(z&&H){$=!0,G.push(`${q}CREATES -> ${U}`);let j=X(Z+1,H);if(j)G.push(j)}else G.push(`${q}uses -> ${U}`);return G.join(`
`)}let Y=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${X(1,this)}`,`DONE, took ${J.toFixed(2)}ms (grand total ${z9._totals.toFixed(2)}ms)`];if(J>2||$)z9.all.add(Y.join(`
`))}}var Vq0=!1,ab;var U10=w(()=>{e1();O1();z0();s0();D4();ab=class ab extends Error{constructor(J){var $;super("cyclic dependency between services");this.message=($=J.findCycleSlow())!==null&&$!==void 0?$:`UNABLE to detect cycle, dumping graph: 
${J.toString()}`}};z9.all=new Set;z9._None=new class extends z9{constructor(){super(0,null)}stop(){}branch(){return this}};z9._totals=0});class z10{constructor(){this._byResource=new e5,this._byOwner=new Map}set(J,$,X){let Y=this._byResource.get(J);if(!Y)Y=new Map,this._byResource.set(J,Y);Y.set($,X);let Z=this._byOwner.get($);if(!Z)Z=new e5,this._byOwner.set($,Z);Z.set(J,X)}get(J,$){let X=this._byResource.get(J);return X===null||X===void 0?void 0:X.get($)}delete(J,$){let X=!1,Y=!1,Z=this._byResource.get(J);if(Z)X=Z.delete($);let Q=this._byOwner.get($);if(Q)Y=Q.delete(J);if(X!==Y)throw Error("illegal state");return X&&Y}values(J){var $,X,Y,Z;if(typeof J==="string")return(X=($=this._byOwner.get(J))===null||$===void 0?void 0:$.values())!==null&&X!==void 0?X:A1.empty();if(C0.isUri(J))return(Z=(Y=this._byResource.get(J))===null||Y===void 0?void 0:Y.values())!==null&&Z!==void 0?Z:A1.empty();return A1.map(A1.concat(...this._byOwner.values()),(Q)=>Q[1])}}class H10{constructor(J){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new e5,this._service=J,this._subscription=J.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(J){for(let $ of J){let X=this._data.get($);if(X)this._substract(X);let Y=this._resourceStats($);this._add(Y),this._data.set($,Y)}}_resourceStats(J){let $={errors:0,warnings:0,infos:0,unknowns:0};if(Wq0.has(J.scheme))return $;for(let{severity:X}of this._service.read({resource:J}))if(X===C9.Error)$.errors+=1;else if(X===C9.Warning)$.warnings+=1;else if(X===C9.Info)$.infos+=1;else $.unknowns+=1;return $}_substract(J){this.errors-=J.errors,this.warnings-=J.warnings,this.infos-=J.infos,this.unknowns-=J.unknowns}_add(J){this.errors+=J.errors,this.warnings+=J.warnings,this.infos+=J.infos,this.unknowns+=J.unknowns}}class pZ{constructor(){this._onMarkerChanged=new Zj({delay:0,merge:pZ._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new z10,this._stats=new H10(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(J,$){for(let X of $||[])this.changeOne(J,X,[])}changeOne(J,$,X){if(GK(X)){if(this._data.delete($,J))this._onMarkerChanged.fire([$])}else{let Y=[];for(let Z of X){let Q=pZ._toMarker(J,$,Z);if(Q)Y.push(Q)}this._data.set($,J,Y),this._onMarkerChanged.fire([$])}}static _toMarker(J,$,X){let{code:Y,severity:Z,message:Q,source:G,startLineNumber:q,startColumn:U,endLineNumber:z,endColumn:H,relatedInformation:j,tags:V}=X;if(!Q)return;return q=q>0?q:1,U=U>0?U:1,z=z>=q?z:q,H=H>0?H:U,{resource:$,owner:J,code:Y,severity:Z,message:Q,source:G,startLineNumber:q,startColumn:U,endLineNumber:z,endColumn:H,relatedInformation:j,tags:V}}changeAll(J,$){let X=[],Y=this._data.values(J);if(Y)for(let Z of Y){let Q=A1.first(Z);if(Q)X.push(Q.resource),this._data.delete(Q.resource,J)}if(K4($)){let Z=new e5;for(let{resource:Q,marker:G}of $){let q=pZ._toMarker(J,Q,G);if(!q)continue;let U=Z.get(Q);if(!U)Z.set(Q,[q]),X.push(Q);else U.push(q)}for(let[Q,G]of Z)this._data.set(Q,J,G)}if(X.length>0)this._onMarkerChanged.fire(X)}read(J=Object.create(null)){let{owner:$,resource:X,severities:Y,take:Z}=J;if(!Z||Z<0)Z=-1;if($&&X){let Q=this._data.get(X,$);if(!Q)return[];else{let G=[];for(let q of Q)if(pZ._accept(q,Y)){let U=G.push(q);if(Z>0&&U===Z)break}return G}}else if(!$&&!X){let Q=[];for(let G of this._data.values())for(let q of G)if(pZ._accept(q,Y)){let U=Q.push(q);if(Z>0&&U===Z)return Q}return Q}else{let Q=this._data.values(X!==null&&X!==void 0?X:$),G=[];for(let q of Q)for(let U of q)if(pZ._accept(U,Y)){let z=G.push(U);if(Z>0&&z===Z)return G}return G}}static _accept(J,$){return $===void 0||($&J.severity)===J.severity}static _merge(J){let $=new e5;for(let X of J)for(let Y of X)$.set(Y,!0);return Array.from($.keys())}}var Wq0;var j10=w(()=>{V1();_0();P4();F$();e9();V5();dz();Wq0=new Set([G1.inMemory,G1.vscodeSourceControl,G1.walkThrough,G1.walkThroughSnippet])});var rb;var V10=w(()=>{z0();ty();dG();h7();rb=class rb extends m{constructor(){super(...arguments);this._configurationModel=new P8}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new P8;let J=G6.as(b4.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(J),J)}updateConfigurationModel(J,$){let X=this.getConfigurationDefaultOverrides();for(let Y of J){let Z=X[Y],Q=$[Y];if(Z!==void 0)this._configurationModel.addValue(Y,Z);else if(Q)this._configurationModel.addValue(Y,Q.default);else this._configurationModel.removeValue(Y)}}}});class e0{static register(J){return new e0(J.fileName)}constructor(J){this.fileName=J}}class W10{constructor(J){this.randomOneOf=J}}class q1{static register(J){let $=new W10("randomOneOf"in J.sound?J.sound.randomOneOf:[J.sound]),X=new q1($,J.name,J.settingsKey,J.alertSettingsKey,J.alertMessage);return q1._audioCues.add(X),X}constructor(J,$,X,Y,Z){this.sound=J,this.name=$,this.settingsKey=X,this.alertSettingsKey=Y,this.alertMessage=Z}}var l4;var Zq=w(()=>{s0();c0();l4=w0("audioCue");e0.error=e0.register({fileName:"error.mp3"});e0.warning=e0.register({fileName:"warning.mp3"});e0.foldedArea=e0.register({fileName:"foldedAreas.mp3"});e0.break=e0.register({fileName:"break.mp3"});e0.quickFixes=e0.register({fileName:"quickFixes.mp3"});e0.taskCompleted=e0.register({fileName:"taskCompleted.mp3"});e0.taskFailed=e0.register({fileName:"taskFailed.mp3"});e0.terminalBell=e0.register({fileName:"terminalBell.mp3"});e0.diffLineInserted=e0.register({fileName:"diffLineInserted.mp3"});e0.diffLineDeleted=e0.register({fileName:"diffLineDeleted.mp3"});e0.diffLineModified=e0.register({fileName:"diffLineModified.mp3"});e0.chatRequestSent=e0.register({fileName:"chatRequestSent.mp3"});e0.chatResponsePending=e0.register({fileName:"chatResponsePending.mp3"});e0.chatResponseReceived1=e0.register({fileName:"chatResponseReceived1.mp3"});e0.chatResponseReceived2=e0.register({fileName:"chatResponseReceived2.mp3"});e0.chatResponseReceived3=e0.register({fileName:"chatResponseReceived3.mp3"});e0.chatResponseReceived4=e0.register({fileName:"chatResponseReceived4.mp3"});e0.clear=e0.register({fileName:"clear.mp3"});e0.save=e0.register({fileName:"save.mp3"});e0.format=e0.register({fileName:"format.mp3"});q1._audioCues=new Set;q1.error=q1.register({name:F("audioCues.lineHasError.name","Error on Line"),sound:e0.error,settingsKey:"audioCues.lineHasError",alertSettingsKey:"accessibility.alert.error",alertMessage:F("audioCues.lineHasError.alertMessage","Error")});q1.warning=q1.register({name:F("audioCues.lineHasWarning.name","Warning on Line"),sound:e0.warning,settingsKey:"audioCues.lineHasWarning",alertSettingsKey:"accessibility.alert.warning",alertMessage:F("audioCues.lineHasWarning.alertMessage","Warning")});q1.foldedArea=q1.register({name:F("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:e0.foldedArea,settingsKey:"audioCues.lineHasFoldedArea",alertSettingsKey:"accessibility.alert.foldedArea",alertMessage:F("audioCues.lineHasFoldedArea.alertMessage","Folded")});q1.break=q1.register({name:F("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:e0.break,settingsKey:"audioCues.lineHasBreakpoint",alertSettingsKey:"accessibility.alert.breakpoint",alertMessage:F("audioCues.lineHasBreakpoint.alertMessage","Breakpoint")});q1.inlineSuggestion=q1.register({name:F("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:e0.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"});q1.terminalQuickFix=q1.register({name:F("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:e0.quickFixes,settingsKey:"audioCues.terminalQuickFix",alertSettingsKey:"accessibility.alert.terminalQuickFix",alertMessage:F("audioCues.terminalQuickFix.alertMessage","Quick Fix")});q1.onDebugBreak=q1.register({name:F("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:e0.break,settingsKey:"audioCues.onDebugBreak",alertSettingsKey:"accessibility.alert.onDebugBreak",alertMessage:F("audioCues.onDebugBreak.alertMessage","Breakpoint")});q1.noInlayHints=q1.register({name:F("audioCues.noInlayHints","No Inlay Hints on Line"),sound:e0.error,settingsKey:"audioCues.noInlayHints",alertSettingsKey:"accessibility.alert.noInlayHints",alertMessage:F("audioCues.noInlayHints.alertMessage","No Inlay Hints")});q1.taskCompleted=q1.register({name:F("audioCues.taskCompleted","Task Completed"),sound:e0.taskCompleted,settingsKey:"audioCues.taskCompleted",alertSettingsKey:"accessibility.alert.taskCompleted",alertMessage:F("audioCues.taskCompleted.alertMessage","Task Completed")});q1.taskFailed=q1.register({name:F("audioCues.taskFailed","Task Failed"),sound:e0.taskFailed,settingsKey:"audioCues.taskFailed",alertSettingsKey:"accessibility.alert.taskFailed",alertMessage:F("audioCues.taskFailed.alertMessage","Task Failed")});q1.terminalCommandFailed=q1.register({name:F("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:e0.error,settingsKey:"audioCues.terminalCommandFailed",alertSettingsKey:"accessibility.alert.terminalCommandFailed",alertMessage:F("audioCues.terminalCommandFailed.alertMessage","Command Failed")});q1.terminalBell=q1.register({name:F("audioCues.terminalBell","Terminal Bell"),sound:e0.terminalBell,settingsKey:"audioCues.terminalBell",alertSettingsKey:"accessibility.alert.terminalBell",alertMessage:F("audioCues.terminalBell.alertMessage","Terminal Bell")});q1.notebookCellCompleted=q1.register({name:F("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:e0.taskCompleted,settingsKey:"audioCues.notebookCellCompleted",alertSettingsKey:"accessibility.alert.notebookCellCompleted",alertMessage:F("audioCues.notebookCellCompleted.alertMessage","Notebook Cell Completed")});q1.notebookCellFailed=q1.register({name:F("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:e0.taskFailed,settingsKey:"audioCues.notebookCellFailed",alertSettingsKey:"accessibility.alert.notebookCellFailed",alertMessage:F("audioCues.notebookCellFailed.alertMessage","Notebook Cell Failed")});q1.diffLineInserted=q1.register({name:F("audioCues.diffLineInserted","Diff Line Inserted"),sound:e0.diffLineInserted,settingsKey:"audioCues.diffLineInserted"});q1.diffLineDeleted=q1.register({name:F("audioCues.diffLineDeleted","Diff Line Deleted"),sound:e0.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"});q1.diffLineModified=q1.register({name:F("audioCues.diffLineModified","Diff Line Modified"),sound:e0.diffLineModified,settingsKey:"audioCues.diffLineModified"});q1.chatRequestSent=q1.register({name:F("audioCues.chatRequestSent","Chat Request Sent"),sound:e0.chatRequestSent,settingsKey:"audioCues.chatRequestSent",alertSettingsKey:"accessibility.alert.chatRequestSent",alertMessage:F("audioCues.chatRequestSent.alertMessage","Chat Request Sent")});q1.chatResponseReceived=q1.register({name:F("audioCues.chatResponseReceived","Chat Response Received"),settingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[e0.chatResponseReceived1,e0.chatResponseReceived2,e0.chatResponseReceived3,e0.chatResponseReceived4]}});q1.chatResponsePending=q1.register({name:F("audioCues.chatResponsePending","Chat Response Pending"),sound:e0.chatResponsePending,settingsKey:"audioCues.chatResponsePending",alertSettingsKey:"accessibility.alert.chatResponsePending",alertMessage:F("audioCues.chatResponsePending.alertMessage","Chat Response Pending")});q1.clear=q1.register({name:F("audioCues.clear","Clear"),sound:e0.clear,settingsKey:"audioCues.clear",alertSettingsKey:"accessibility.alert.clear",alertMessage:F("audioCues.clear.alertMessage","Clear")});q1.save=q1.register({name:F("audioCues.save","Save"),sound:e0.save,settingsKey:"audioCues.save",alertSettingsKey:"accessibility.alert.save",alertMessage:F("audioCues.save.alertMessage","Save")});q1.format=q1.register({name:F("audioCues.format","Format"),sound:e0.format,settingsKey:"audioCues.format",alertSettingsKey:"accessibility.alert.format",alertMessage:F("audioCues.format.alertMessage","Format")})});var ib;var B10=w(()=>{z0();o9();ib=class ib extends m{constructor(J,$=[]){super();this.logger=new RT([J,...$]),this._register(J.onDidChangeLogLevel((X)=>this.setLevel(X)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(J){this.logger.setLevel(J)}getLevel(){return this.logger.getLevel()}trace(J,...$){this.logger.trace(J,...$)}debug(J,...$){this.logger.debug(J,...$)}info(J,...$){this.logger.info(J,...$)}warn(J,...$){this.logger.warn(J,...$)}error(J,...$){this.logger.error(J,...$)}}});function F10(){return Bq0.slice(0)}var Bq0;var K10=w(()=>{Bq0=[]});class P10{constructor(J){this.disposed=!1,this.model=J,this._onWillDispose=new x}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}class MO{show(){return MO.NULL_PROGRESS_RUNNER}async showWhile(J,$){await J}}class D10{withProgress(J,$,X){return $({report:()=>{}})}}class R10{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class M10{async confirm(J){return{confirmed:this.doConfirm(J.message,J.detail),checkboxChecked:!1}}doConfirm(J,$){let X=J;if($)X=X+`

`+$;return W1.confirm(X)}async prompt(J){var $,X;let Y=void 0;if(this.doConfirm(J.message,J.detail)){let Q=[...($=J.buttons)!==null&&$!==void 0?$:[]];if(J.cancelButton&&typeof J.cancelButton!=="string"&&typeof J.cancelButton!=="boolean")Q.push(J.cancelButton);Y=await((X=Q[0])===null||X===void 0?void 0:X.run({checkboxChecked:!1}))}return{result:Y}}async error(J,$){await this.prompt({type:E6.Error,message:J,detail:$})}}class kB{info(J){return this.notify({severity:E6.Info,message:J})}warn(J){return this.notify({severity:E6.Warning,message:J})}error(J){return this.notify({severity:E6.Error,message:J})}notify(J){switch(J.severity){case E6.Error:console.error(J.message);break;case E6.Warning:console.warn(J.message);break;default:console.log(J.message);break}return kB.NO_OP}prompt(J,$,X,Y){return kB.NO_OP}status(J,$){return m.None}}function A10(J){return J&&typeof J==="object"&&(!J.overrideIdentifier||typeof J.overrideIdentifier==="string")&&(!J.resource||J.resource instanceof C0)}class YS{constructor(){this._onDidChangeConfiguration=new x,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;let J=new rb;this._configuration=new xW(J.reload(),new P8,new P8,new P8),J.dispose()}getValue(J,$){let X=typeof J==="string"?J:void 0,Y=A10(J)?J:A10($)?$:{};return this._configuration.getValue(X,Y,void 0)}updateValues(J){let $={data:this._configuration.toData()},X=[];for(let Y of J){let[Z,Q]=Y;if(this.getValue(Z)===Q)continue;this._configuration.updateValue(Z,Q),X.push(Z)}if(X.length>0){let Y=new oy({keys:X,overrides:[]},$,this._configuration);Y.source=8,this._onDidChangeConfiguration.fire(Y)}return Promise.resolve()}updateValue(J,$,X,Y){return this.updateValues([[J,$]])}inspect(J,$={}){return this._configuration.inspect(J,$,void 0)}}class _10{publicLog2(){}}class EB{constructor(){let J=C0.from({scheme:EB.SCHEME,authority:"model",path:"/"});this.workspace={id:Bo,folders:[new Yx({uri:J,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(J){return J&&J.scheme===EB.SCHEME?this.workspace.folders[0]:null}}function IB(J,$,X){if(!$)return;if(!(J instanceof YS))return;let Y=[];if(Object.keys($).forEach((Z)=>{if(an(Z))Y.push([`editor.${Z}`,$[Z]]);if(X&&rn(Z))Y.push([`diffEditor.${Z}`,$[Z]])}),Y.length>0)J.updateValues(Y)}class N10{getUriLabel(J,$){if(J.scheme==="file")return J.fsPath;return J.path}getUriBasenameLabel(J){return N3(J)}}class T10{constructor(){this._neverEmitter=new x,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class k10{async playAudioCue(J,$){}}var w2=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},D8=function(J,$){return function(X,Y){$(X,Y,J)}},nb=class{constructor($){this.modelService=$}createModelReference($){let X=this.modelService.getModel($);if(!X)return Promise.reject(Error("Model not found"));return Promise.resolve(new bN(new P10(X)))}},ob=class{constructor($){this._onWillExecuteCommand=new x,this._onDidExecuteCommand=new x,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=$}executeCommand($,...X){let Y=M6.getCommand($);if(!Y)return Promise.reject(Error(`command '${$}' not found`));try{this._onWillExecuteCommand.fire({commandId:$,args:X});let Z=this._instantiationService.invokeFunction.apply(this._instantiationService,[Y.handler,...X]);return this._onDidExecuteCommand.fire({commandId:$,args:X}),Promise.resolve(Z)}catch(Z){return Promise.reject(Z)}}},T2,O10,tb=class{constructor($,X,Y){this.configurationService=$,this.modelService=X,this.languageService=Y,this._onDidChangeConfiguration=new x,this.configurationService.onDidChangeConfiguration((Z)=>{this._onDidChangeConfiguration.fire({affectedKeys:Z.affectedKeys,affectsConfiguration:(Q,G)=>Z.affectsConfiguration(G)})})}getValue($,X,Y){let Z=g.isIPosition(X)?X:null,Q=Z?typeof Y==="string"?Y:void 0:typeof X==="string"?X:void 0,G=$?this.getLanguage($,Z):void 0;if(typeof Q>"u")return this.configurationService.getValue({resource:$,overrideIdentifier:G});return this.configurationService.getValue(Q,{resource:$,overrideIdentifier:G})}getLanguage($,X){let Y=this.modelService.getModel($);if(Y)return X?Y.getLanguageIdAtPosition(X.lineNumber,X.column):Y.getLanguageId();return this.languageService.guessLanguageIdByFilepathOrFirstLine($)}},eb=class{constructor($){this.configurationService=$}getEOL($,X){let Y=this.configurationService.getValue("files.eol",{overrideIdentifier:X,resource:$});if(Y&&typeof Y==="string"&&Y!=="auto")return Y;return N6||t0?`
`:`\r
`}},JS=class{constructor($){this._modelService=$}hasPreviewHandler(){return!1}async apply($,X){let Y=Array.isArray($)?$:IW.convert($),Z=new Map;for(let q of Y){if(!(q instanceof F2))throw Error("bad edit - only text edits are supported");let U=this._modelService.getModel(q.resource);if(!U)throw Error("bad edit - model not found");if(typeof q.versionId==="number"&&U.getVersionId()!==q.versionId)throw Error("bad state - model changed in the meantime");let z=Z.get(U);if(!z)z=[],Z.set(U,z);z.push(u4.replaceMove(k.lift(q.textEdit.range),q.textEdit.text))}let Q=0,G=0;for(let[q,U]of Z)q.pushStackElement(),q.pushEditOperations([],U,()=>[]),q.pushStackElement(),G+=1,Q+=U.length;return{ariaSummary:MQ(qM.bulkEditServiceSummary,Q,G),isApplied:Q>0}}},$S,w10,L10,XS,v0;var OO=w(()=>{j7();Xy();Yy();Si();Vy();ci();Zn();cn();X1();T0();d8();_0();yG();z0();L1();q2();V5();dn();nn();yW();i0();vY();Aj();CP();C7();H7();ty();t1();Zy();s0();$o();EJ();ey();oq();Go();Xx();wZ();vW();_Q();GM();z2();Zx();cX();i9();o9();Oo();IZ();No();bo();It();y4();xt();lz();tw();I4();ft();VL();mt();b00();t00();OB();e00();P$();FJ();J10();X10();NB();G10();U10();Db();dz();j10();y3();WB();pz();V10();Zq();B10();K10();O1();xR();N8();nb=w2([D8(0,E5)],nb);MO.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};kB.NO_OP=new dI;ob=w2([D8(0,l0)],ob);T2=class extends Jx{constructor($,X,Y,Z,Q,G){super($,X,Y,Z,Q);this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];let q=(W)=>{let B=new $0;B.add(r(W,U0.KEY_DOWN,(K)=>{let P=new R1(K);if(this._dispatch(P,P.target))P.preventDefault(),P.stopPropagation()})),B.add(r(W,U0.KEY_UP,(K)=>{let P=new R1(K);if(this._singleModifierDispatch(P,P.target))P.preventDefault()})),this._domNodeListeners.push(new O10(W,B))},U=(W)=>{for(let B=0;B<this._domNodeListeners.length;B++){let K=this._domNodeListeners[B];if(K.domNode===W)this._domNodeListeners.splice(B,1),K.dispose()}},z=(W)=>{if(W.getOption(61))return;q(W.getContainerDomNode())},H=(W)=>{if(W.getOption(61))return;U(W.getContainerDomNode())};this._register(G.onCodeEditorAdd(z)),this._register(G.onCodeEditorRemove(H)),G.listCodeEditors().forEach(z);let j=(W)=>{q(W.getContainerDomNode())},V=(W)=>{U(W.getContainerDomNode())};this._register(G.onDiffEditorAdd(j)),this._register(G.onDiffEditorRemove(V)),G.listDiffEditors().forEach(j)}addDynamicKeybinding($,X,Y,Z){return G7(M6.registerCommand($,Y),this.addDynamicKeybindings([{keybinding:X,command:$,when:Z}]))}addDynamicKeybindings($){let X=$.map((Y)=>{var Z;return{keybinding:Oj(Y.keybinding,Z7),command:(Z=Y.command)!==null&&Z!==void 0?Z:null,commandArgs:Y.commandArgs,when:Y.when,weight1:1000,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(X),this.updateResolver(),N0(()=>{for(let Y=0;Y<this._dynamicKeybindings.length;Y++)if(this._dynamicKeybindings[Y]===X[0]){this._dynamicKeybindings.splice(Y,X.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){let $=this._toNormalizedKeybindingItems(z$.getDefaultKeybindings(),!0),X=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Ez($,X,(Y)=>this._log(Y))}return this._cachedResolver}_documentHasFocus(){return W1.document.hasFocus()}_toNormalizedKeybindingItems($,X){let Y=[],Z=0;for(let Q of $){let G=Q.when||void 0,q=Q.keybinding;if(!q)Y[Z++]=new $M(void 0,Q.command,Q.commandArgs,G,X,null,!1);else{let U=yz.resolveKeybinding(q,Z7);for(let z of U)Y[Z++]=new $M(z,Q.command,Q.commandArgs,G,X,null,!1)}}return Y}resolveKeyboardEvent($){let X=new M4($.ctrlKey,$.shiftKey,$.altKey,$.metaKey,$.keyCode);return new yz([X],Z7)}};T2=w2([D8(0,m0),D8(1,y5),D8(2,f7),D8(3,K8),D8(4,P5),D8(5,X6)],T2);O10=class O10 extends m{constructor(J,$){super();this.domNode=J,this._register($)}};tb=w2([D8(0,g1),D8(1,E5),D8(2,j6)],tb);eb=w2([D8(0,g1)],eb);EB.SCHEME="inmemory";JS=w2([D8(0,E5)],JS);$S=class extends UM{constructor($,X){super($);this._codeEditorService=X}showContextView($,X,Y){if(!X){let Z=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();if(Z)X=Z.getContainerDomNode()}return super.showContextView($,X,Y)}};$S=w2([D8(0,G4),D8(1,X6)],$S);w10=class w10 extends Cz{constructor(){super()}};L10=class L10 extends ib{constructor(){super(new DT)}};XS=class extends NM{constructor($,X,Y,Z,Q,G){super($,X,Y,Z,Q,G);this.configure({blockMouse:!1})}};XS=w2([D8(0,f7),D8(1,K8),D8(2,S$),D8(3,$5),D8(4,BJ),D8(5,m0)],XS);B1(g1,YS,0);B1(bP,tb,0);B1(SP,eb,0);B1(fW,EB,0);B1(CW,N10,0);B1(f7,_10,0);B1(kR,M10,0);B1(Rz,R10,0);B1(K8,kB,0);B1(f$,pZ,0);B1(j6,w10,0);B1(U9,gb,0);B1(P5,L10,0);B1(E5,iW,0);B1(iP,LM,0);B1(m0,PO,0);B1(qo,D10,0);B1(xZ,MO,0);B1(h$,Tx,0);B1(U4,hP,0);B1(ln,JS,0);B1(Mo,T10,0);B1(hY,nb,0);B1(a8,BO,0);B1(m$,jb,0);B1(y5,ob,0);B1($5,T2,0);B1($O,UO,0);B1(S$,$S,0);B1(oX,wM,0);B1(N2,_B,0);B1(S9,XS,0);B1(BJ,FO,0);B1(l4,k10,0);(function(J){let $=new b$;for(let[U,z]of Hw())$.set(U,z);let X=new LB($,!0);$.set(l0,X);function Y(U){if(!Z)G({});let z=$.get(U);if(!z)throw Error("Missing service "+U);if(z instanceof $4)return X.invokeFunction((H)=>H.get(U));else return z}J.get=Y;let Z=!1,Q=new x;function G(U){if(Z)return X;Z=!0;for(let[H,j]of Hw())if(!$.get(H))$.set(H,j);for(let H in U)if(U.hasOwnProperty(H)){let j=w0(H);if($.get(j)instanceof $4)$.set(j,U[H])}let z=F10();for(let H of z)try{X.createInstance(H)}catch(j){$1(j)}return Q.fire(),X}J.initialize=G;function q(U){if(Z)return U();let z=new $0,H=z.add(Q.event(()=>{H.dispose(),z.add(U())}));return z}J.withServices=q})(v0||(v0={}))});function I10(J){E10=J}function z4(){return E10}class ZS{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}textToConsoleArgs(J){return Fq0([UH(Pq0("|  ",this.indentation)),J])}formatInfo(J){if(!J.hadValue)return[UH(" "),c$(xB(J.newValue,60),{color:"green"}),UH(" (initial)")];return J.didChange?[UH(" "),c$(xB(J.oldValue,70),{color:"red",strikeThrough:!0}),UH(" "),c$(xB(J.newValue,60),{color:"green"})]:[UH(" (unchanged)")]}handleObservableChanged(J,$){console.log(...this.textToConsoleArgs([yB("observable value changed"),c$(J.debugName,{color:"BlueViolet"}),...this.formatInfo($)]))}formatChanges(J){if(J.size===0)return;return c$(" (changed deps: "+[...J].map(($)=>$.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(J){let $=J.handleChange;this.changedObservablesSets.set(J,new Set),J.handleChange=(X,Y)=>{return this.changedObservablesSets.get(J).add(X),$.apply(J,[X,Y])}}handleDerivedRecomputed(J,$){let X=this.changedObservablesSets.get(J);console.log(...this.textToConsoleArgs([yB("derived recomputed"),c$(J.debugName,{color:"BlueViolet"}),...this.formatInfo($),this.formatChanges(X),{data:[{fn:J._computeFn}]}])),X.clear()}handleFromEventObservableTriggered(J,$){console.log(...this.textToConsoleArgs([yB("observable from event triggered"),c$(J.debugName,{color:"BlueViolet"}),...this.formatInfo($),{data:[{fn:J._getValue}]}]))}handleAutorunCreated(J){let $=J.handleChange;this.changedObservablesSets.set(J,new Set),J.handleChange=(X,Y)=>{return this.changedObservablesSets.get(J).add(X),$.apply(J,[X,Y])}}handleAutorunTriggered(J){let $=this.changedObservablesSets.get(J);console.log(...this.textToConsoleArgs([yB("autorun"),c$(J.debugName,{color:"BlueViolet"}),this.formatChanges($),{data:[{fn:J._runFn}]}])),$.clear(),this.indentation++}handleAutorunFinished(J){this.indentation--}handleBeginTransaction(J){let $=J.getDebugName();if($===void 0)$="";console.log(...this.textToConsoleArgs([yB("transaction"),c$($,{color:"BlueViolet"}),{data:[{fn:J._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}}function Fq0(J){let $=[],X=[],Y="";function Z(G){if("length"in G){for(let q of G)if(q)Z(q)}else if("text"in G){if(Y+=`%c${G.text}`,$.push(G.style),G.data)X.push(...G.data)}else if("data"in G)X.push(...G.data)}Z(J);let Q=[Y,...$];return Q.push(...X),Q}function UH(J){return c$(J,{color:"black"})}function yB(J){return c$(Dq0(`${J}: `,10),{color:"black",bold:!0})}function c$(J,$={color:"black"}){function X(Z){return Object.entries(Z).reduce((Q,[G,q])=>{return`${Q}${G}:${q};`},"")}let Y={color:$.color};if($.strikeThrough)Y["text-decoration"]="line-through";if($.bold)Y["font-weight"]="bold";return{text:J,style:X(Y)}}function xB(J,$){switch(typeof J){case"number":return""+J;case"string":if(J.length+2<=$)return`"${J}"`;return`"${J.substr(0,$-7)}"+...`;case"boolean":return J?"true":"false";case"undefined":return"undefined";case"object":if(J===null)return"null";if(Array.isArray(J))return Kq0(J,$);return Aq0(J,$);case"symbol":return J.toString();case"function":return`[[Function${J.name?" "+J.name:""}]]`;default:return""+J}}function Kq0(J,$){let X="[ ",Y=!0;for(let Z of J){if(!Y)X+=", ";if(X.length-5>$){X+="...";break}Y=!1,X+=`${xB(Z,$-X.length)}`}return X+=" ]",X}function Aq0(J,$){let X="{ ",Y=!0;for(let[Z,Q]of Object.entries(J)){if(!Y)X+=", ";if(X.length-5>$){X+="...";break}Y=!1,X+=`${Z}: ${xB(Q,$-X.length)}`}return X+=" }",X}function Pq0(J,$){let X="";for(let Y=1;Y<=$;Y++)X+=J;return X}function Dq0(J,$){while(J.length<$)J+=" ";return J}var E10;function C10(J){S10=J}function v10(J){Rq0=J}function f10(J){h10=J}class TO{get TChange(){return null}reportChanges(){this.get()}read(J){if(J)return J.readObservable(this);else return this.get()}map(J,$){let X=$===void 0?void 0:J,Y=$===void 0?J:$;return h10({owner:X,debugName:()=>{let Z=l$(Y);if(Z!==void 0)return Z;let G=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(Y.toString());if(G)return`${this.debugName}.${G[2]}`;if(!X)return`${this.debugName} (mapped)`;return}},(Z)=>Y(this.read(Z),Z))}recomputeInitiallyAndOnChange(J,$){return J.add(S10(this,$)),this}}function y6(J,$){let X=new wO(J,$);try{J(X)}finally{X.finish()}}function zH(J){if(_O)J(_O);else{let $=new wO(J,void 0);_O=$;try{J($)}finally{$.finish(),_O=void 0}}}function Qq(J,$,X){if(!J)y6($,X);else $(J)}class wO{constructor(J,$){var X;this._fn=J,this._getDebugName=$,this.updatingObservers=[],(X=z4())===null||X===void 0||X.handleBeginTransaction(this)}getDebugName(){if(this._getDebugName)return this._getDebugName();return l$(this._fn)}updateObserver(J,$){this.updatingObservers.push({observer:J,observable:$}),J.beginUpdate($)}finish(){var J;let $=this.updatingObservers;for(let X=0;X<$.length;X++){let{observer:Y,observable:Z}=$[X];Y.endUpdate(Z)}this.updatingObservers=null,(J=z4())===null||J===void 0||J.handleEndTransaction()}}function bB(J,$,X,Y){var Z;let Q=QS.get(J);if(Q)return Q;let G=Mq0(J,$,X,Y);if(G){let q=(Z=y10.get(G))!==null&&Z!==void 0?Z:0;q++,y10.set(G,q);let U=q===1?G:`${G}#${q}`;return QS.set(J,U),U}return}function Mq0(J,$,X,Y){let Z=QS.get(J);if(Z)return Z;let Q=Y?Oq0(Y)+".":"",G;if($!==void 0)if(typeof $==="function"){if(G=$(),G!==void 0)return Q+G}else return Q+$;if(X!==void 0){if(G=l$(X),G!==void 0)return Q+G}if(Y!==void 0){for(let q in Y)if(Y[q]===J)return Q+q}return}function Oq0(J){var $;let X=b10.get(J);if(X)return X;let Y=_q0(J),Z=($=x10.get(Y))!==null&&$!==void 0?$:0;Z++,x10.set(Y,Z);let Q=Z===1?Y:`${Y}#${Z}`;return b10.set(J,Q),Q}function _q0(J){let $=J.constructor;if($)return $.name;return"Object"}function l$(J){let $=J.toString(),Y=/\/\*\*\s*@description\s*([^*]*)\*\//.exec($),Z=Y?Y[1]:void 0;return Z===null||Z===void 0?void 0:Z.trim()}function M1(J,$){if(typeof J==="string")return new NO(void 0,J,$);else return new NO(J,void 0,$)}function qS(J,$){if(typeof J==="string")return new GS(void 0,J,$);else return new GS(J,void 0,$)}var S10,Rq0,h10,L2,_O=void 0,y10,QS,x10,b10,NO,GS;var Gq=w(()=>{L2=class L2 extends TO{constructor(){super(...arguments);this.observers=new Set}addObserver(J){let $=this.observers.size;if(this.observers.add(J),$===0)this.onFirstObserverAdded()}removeObserver(J){if(this.observers.delete(J)&&this.observers.size===0)this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};y10=new Map,QS=new WeakMap;x10=new Map,b10=new WeakMap;NO=class NO extends L2{get debugName(){var J;return(J=bB(this,this._debugName,void 0,this._owner))!==null&&J!==void 0?J:"ObservableValue"}constructor(J,$,X){super();this._owner=J,this._debugName=$,this._value=X}get(){return this._value}set(J,$,X){var Y;if(this._value===J)return;let Z;if(!$)$=Z=new wO(()=>{},()=>`Setting ${this.debugName}`);try{let Q=this._value;this._setValue(J),(Y=z4())===null||Y===void 0||Y.handleObservableChanged(this,{oldValue:Q,newValue:J,change:X,didChange:!0,hadValue:!0});for(let G of this.observers)$.updateObserver(G,this),G.handleChange(this,X)}finally{if(Z)Z.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(J){this._value=J}};GS=class GS extends NO{_setValue(J){if(this._value===J)return;if(this._value)this._value.dispose();this._value=J}dispose(){var J;(J=this._value)===null||J===void 0||J.dispose()}}});function J1(J,$){if($!==void 0)return new HH(J,void 0,$,void 0,void 0,void 0,SB);return new HH(void 0,void 0,J,void 0,void 0,void 0,SB)}function US(J,$){var X;return new HH(J.owner,J.debugName,$,void 0,void 0,J.onLastObserverRemoved,(X=J.equalityComparer)!==null&&X!==void 0?X:SB)}function d4(J,$){let X,Y;if($===void 0)X=J,Y=void 0;else Y=J,X=$;let Z=new $0;return new HH(Y,()=>{var Q;return(Q=l$(X))!==null&&Q!==void 0?Q:"(anonymous)"},(Q)=>{return Z.clear(),X(Q,Z)},void 0,void 0,()=>Z.dispose(),SB)}function qY(J,$){let X,Y;if($===void 0)X=J,Y=void 0;else Y=J,X=$;let Z=new $0;return new HH(Y,()=>{var Q;return(Q=l$(X))!==null&&Q!==void 0?Q:"(anonymous)"},(Q)=>{Z.clear();let G=X(Q);if(G)Z.add(G);return G},void 0,void 0,()=>Z.dispose(),SB)}var SB=(J,$)=>J===$,HH;var CB=w(()=>{WX();z0();Gq();f10(US);HH=class HH extends L2{get debugName(){var J;return(J=bB(this,this._debugName,this._computeFn,this._owner))!==null&&J!==void 0?J:"(anonymous)"}constructor(J,$,X,Y,Z,Q=void 0,G){var q,U;super();this._owner=J,this._debugName=$,this._computeFn=X,this.createChangeSummary=Y,this._handleChange=Z,this._handleLastObserverRemoved=Q,this._equalityComparator=G,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(q=this.createChangeSummary)===null||q===void 0?void 0:q.call(this),(U=z4())===null||U===void 0||U.handleDerivedCreated(this)}onLastObserverRemoved(){var J;this.state=0,this.value=void 0;for(let $ of this.dependencies)$.removeObserver(this);this.dependencies.clear(),(J=this._handleLastObserverRemoved)===null||J===void 0||J.call(this)}get(){var J;if(this.observers.size===0){let $=this._computeFn(this,(J=this.createChangeSummary)===null||J===void 0?void 0:J.call(this));return this.onLastObserverRemoved(),$}else{do{if(this.state===1){for(let $ of this.dependencies)if($.reportChanges(),this.state===2)break}if(this.state===1)this.state=3;this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var J,$;if(this.state===3)return;let X=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=X;let Y=this.state!==0,Z=this.value;this.state=3;let Q=this.changeSummary;this.changeSummary=(J=this.createChangeSummary)===null||J===void 0?void 0:J.call(this);try{this.value=this._computeFn(this,Q)}finally{for(let q of this.dependenciesToBeRemoved)q.removeObserver(this);this.dependenciesToBeRemoved.clear()}let G=Y&&!this._equalityComparator(Z,this.value);if(($=z4())===null||$===void 0||$.handleDerivedRecomputed(this,{oldValue:Z,newValue:this.value,change:void 0,didChange:G,hadValue:Y}),G)for(let q of this.observers)q.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(J){this.updateCount++;let $=this.updateCount===1;if(this.state===3){if(this.state=1,!$)for(let X of this.observers)X.handlePossibleChange(this)}if($)for(let X of this.observers)X.beginUpdate(this)}endUpdate(J){if(this.updateCount--,this.updateCount===0){let $=[...this.observers];for(let X of $)X.endUpdate(this)}VX(()=>this.updateCount>=0)}handlePossibleChange(J){if(this.state===3&&this.dependencies.has(J)&&!this.dependenciesToBeRemoved.has(J)){this.state=1;for(let $ of this.observers)$.handlePossibleChange(this)}}handleChange(J,$){if(this.dependencies.has(J)&&!this.dependenciesToBeRemoved.has(J)){let X=this._handleChange?this._handleChange({changedObservable:J,change:$,didChange:(Z)=>Z===J},this.changeSummary):!0,Y=this.state===3;if(X&&(this.state===1||Y)){if(this.state=2,Y)for(let Z of this.observers)Z.handlePossibleChange(this)}}}readObservable(J){J.addObserver(this);let $=J.get();return this.dependencies.add(J),this.dependenciesToBeRemoved.delete(J),$}addObserver(J){let $=!this.observers.has(J)&&this.updateCount>0;if(super.addObserver(J),$)J.beginUpdate(this)}removeObserver(J){let $=this.observers.has(J)&&this.updateCount>0;if(super.removeObserver(J),$)J.endUpdate(this)}}});function w1(J){return new hB(void 0,J,void 0,void 0)}function vB(J,$){return new hB(J.debugName,$,void 0,void 0)}function k2(J,$){return new hB(J.debugName,$,J.createEmptyChangeSummary,J.handleChange)}function u7(J){let $=new $0,X=vB({debugName:()=>l$(J)||"(anonymous)"},(Y)=>{$.clear(),J(Y,$)});return N0(()=>{X.dispose(),$.dispose()})}class hB{get debugName(){if(typeof this._debugName==="string")return this._debugName;if(typeof this._debugName==="function"){let $=this._debugName();if($!==void 0)return $}let J=l$(this._runFn);if(J!==void 0)return J;return"(anonymous)"}constructor(J,$,X,Y){var Z,Q;this._debugName=J,this._runFn=$,this.createChangeSummary=X,this._handleChange=Y,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(Z=this.createChangeSummary)===null||Z===void 0?void 0:Z.call(this),(Q=z4())===null||Q===void 0||Q.handleAutorunCreated(this),this._runIfNeeded(),WG(this)}dispose(){this.disposed=!0;for(let J of this.dependencies)J.removeObserver(this);this.dependencies.clear(),BG(this)}_runIfNeeded(){var J,$,X;if(this.state===3)return;let Y=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=Y,this.state=3;let Z=this.disposed;try{if(!Z){(J=z4())===null||J===void 0||J.handleAutorunTriggered(this);let Q=this.changeSummary;this.changeSummary=($=this.createChangeSummary)===null||$===void 0?void 0:$.call(this),this._runFn(this,Q)}}finally{if(!Z)(X=z4())===null||X===void 0||X.handleAutorunFinished(this);for(let Q of this.dependenciesToBeRemoved)Q.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){if(this.state===3)this.state=1;this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let J of this.dependencies)if(J.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,VX(()=>this.updateCount>=0)}handlePossibleChange(J){if(this.state===3&&this.dependencies.has(J)&&!this.dependenciesToBeRemoved.has(J))this.state=1}handleChange(J,$){if(this.dependencies.has(J)&&!this.dependenciesToBeRemoved.has(J)){if(this._handleChange?this._handleChange({changedObservable:J,change:$,didChange:(Y)=>Y===J},this.changeSummary):!0)this.state=2}}readObservable(J){if(this.disposed)return J.get();J.addObserver(this);let $=J.get();return this.dependencies.add(J),this.dependenciesToBeRemoved.delete(J),$}}var zS=w(()=>{WX();z0();Gq();(function(J){J.Observer=hB})(w1||(w1={}))});function LO(J){return new g10(J)}function jS(J,$){return new Promise((X)=>{let Y=!1,Z=!1,Q=J.map((q)=>({isFinished:$(q),state:q})),G=w1((q)=>{let{isFinished:U,state:z}=Q.read(q);if(U){if(!Y)Z=!0;else G.dispose();X(z)}});if(Y=!0,Z)G.dispose()})}function g6(J,$){return new qq(J,$)}function H9(J,$){return new p10(J,$)}function VS(J){if(typeof J==="string")return new HS(J);else return new HS(void 0,J)}function m10(J){let $=new WS(!1,void 0);return J.addObserver($),N0(()=>{J.removeObserver($)})}function E2(J,$){let X=new WS(!0,$);if(J.addObserver(X),$)$(J.get());else J.reportChanges();return N0(()=>{J.removeObserver(X)})}class WS{constructor(J,$){this._forceRecompute=J,this._handleValue=$,this._counter=0}beginUpdate(J){this._counter++}endUpdate(J){if(this._counter--,this._counter===0&&this._forceRecompute)if(this._handleValue)this._handleValue(J.get());else J.reportChanges()}handlePossibleChange(J){}handleChange(J,$){}}function BS(J){let $=void 0;return J1((Y)=>{return $=J(Y,$),$})}var g10,qq,p10,HS;var u10=w(()=>{z0();zS();Gq();CB();g10=class g10 extends TO{constructor(J){super();this.value=J}get debugName(){return this.toString()}get(){return this.value}addObserver(J){}removeObserver(J){}toString(){return`Const: ${this.value}`}};qq=class qq extends L2{constructor(J,$){super();this.event=J,this._getValue=$,this.hasValue=!1,this.handleEvent=(X)=>{var Y;let Z=this._getValue(X),Q=this.value,G=!this.hasValue||Q!==Z,q=!1;if(G){if(this.value=Z,this.hasValue)q=!0,Qq(qq.globalTransaction,(U)=>{var z;(z=z4())===null||z===void 0||z.handleFromEventObservableTriggered(this,{oldValue:Q,newValue:Z,change:void 0,didChange:G,hadValue:this.hasValue});for(let H of this.observers)U.updateObserver(H,this),H.handleChange(this,void 0)},()=>{let U=this.getDebugName();return"Event fired"+(U?`: ${U}`:"")});this.hasValue=!0}if(!q)(Y=z4())===null||Y===void 0||Y.handleFromEventObservableTriggered(this,{oldValue:Q,newValue:Z,change:void 0,didChange:G,hadValue:this.hasValue})}}getDebugName(){return l$(this._getValue)}get debugName(){let J=this.getDebugName();return"From Event"+(J?`: ${J}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){if(this.subscription){if(!this.hasValue)this.handleEvent(void 0);return this.value}else return this._getValue(void 0)}};(function(J){J.Observer=qq;function $(X,Y){let Z=!1;if(qq.globalTransaction===void 0)qq.globalTransaction=X,Z=!0;try{Y()}finally{if(Z)qq.globalTransaction=void 0}}J.batchEventsGlobally=$})(g6||(g6={}));p10=class p10 extends L2{constructor(J,$){super();this.debugName=J,this.event=$,this.handleEvent=()=>{y6((X)=>{for(let Y of this.observers)X.updateObserver(Y,this),Y.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}};HS=class HS extends L2{get debugName(){var J;return(J=bB(this,this._debugName,void 0,this._owner))!==null&&J!==void 0?J:"Observable Signal"}constructor(J,$){super();this._debugName=J,this._owner=$}trigger(J,$){if(!J){y6((X)=>{this.trigger(X,$)},()=>`Trigger signal ${this.debugName}`);return}for(let X of this.observers)J.updateObserver(X,this),X.handleChange(this,$)}get(){}};v10(m10);C10(E2)});var Nq0=!1;var P7=w(()=>{Gq();CB();zS();u10();if(Nq0)I10(new ZS)});var c10=w(()=>{K0(".monaco-editor .diff-hidden-lines-widget{width:100%}.monaco-editor .diff-hidden-lines{height:0;font-size:13px;line-height:14px;transform:translateY(-10px)}.monaco-editor .diff-hidden-lines:not(.dragging) .top:hover,.monaco-editor .diff-hidden-lines:not(.dragging) .bottom:hover,.monaco-editor .diff-hidden-lines .top.dragging,.monaco-editor .diff-hidden-lines .bottom.dragging{background-color:var(--vscode-focusBorder)}.monaco-editor .diff-hidden-lines .top,.monaco-editor .diff-hidden-lines .bottom{background-color:#0000;background-clip:padding-box;border-top:4px solid #0000;border-bottom:2px solid #0000;height:4px;transition:background-color .1s ease-out}.monaco-editor.draggingUnchangedRegion.canMoveTop:not(.canMoveBottom) *,.monaco-editor .diff-hidden-lines .top.canMoveTop:not(.canMoveBottom),.monaco-editor .diff-hidden-lines .bottom.canMoveTop:not(.canMoveBottom){cursor:n-resize!important}.monaco-editor.draggingUnchangedRegion:not(.canMoveTop).canMoveBottom *,.monaco-editor .diff-hidden-lines .top:not(.canMoveTop).canMoveBottom,.monaco-editor .diff-hidden-lines .bottom:not(.canMoveTop).canMoveBottom{cursor:s-resize!important}.monaco-editor.draggingUnchangedRegion.canMoveTop.canMoveBottom *,.monaco-editor .diff-hidden-lines .top.canMoveTop.canMoveBottom,.monaco-editor .diff-hidden-lines .bottom.canMoveTop.canMoveBottom{cursor:ns-resize!important}.monaco-editor .diff-hidden-lines .top{transform:translateY(4px)}.monaco-editor .diff-hidden-lines .bottom{transform:translateY(-6px)}.monaco-editor .diff-unchanged-lines{background:var(--vscode-diffEditor-unchangedCodeBackground)}.monaco-editor .noModificationsOverlay{z-index:1;background:var(--vscode-editor-background);justify-content:center;align-items:center;display:flex}.monaco-editor .diff-hidden-lines .center{background:var(--vscode-diffEditor-unchangedRegionBackground);color:var(--vscode-diffEditor-unchangedRegionForeground);text-overflow:ellipsis;white-space:nowrap;height:24px;box-shadow:inset 0 -5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow),inset 0 5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow);display:block;overflow:hidden}.monaco-editor .diff-hidden-lines .center span.codicon{vertical-align:middle}.monaco-editor .diff-hidden-lines .center a:hover .codicon{cursor:pointer;color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .diff-hidden-lines div.breadcrumb-item{cursor:pointer}.monaco-editor .diff-hidden-lines div.breadcrumb-item:hover{color:var(--vscode-editorLink-activeForeground)}.monaco-editor .movedOriginal,.monaco-editor .movedModified{border:2px solid var(--vscode-diffEditor-move-border)}.monaco-editor .movedOriginal.currentMove,.monaco-editor .movedModified.currentMove{border:2px solid var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines path.currentMove{stroke:var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines path{pointer-events:visiblestroke}.monaco-diff-editor .moved-blocks-lines .arrow{fill:var(--vscode-diffEditor-move-border)}.monaco-diff-editor .moved-blocks-lines .arrow.currentMove{fill:var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines .arrow-rectangle{fill:var(--vscode-editor-background)}.monaco-diff-editor .moved-blocks-lines{pointer-events:none;position:absolute}.monaco-diff-editor .moved-blocks-lines path{fill:none;stroke:var(--vscode-diffEditor-move-border);stroke-width:2px}.monaco-editor .char-delete.diff-range-empty{border-left:solid var(--vscode-diffEditor-removedTextBackground)3px;margin-left:-1px}.monaco-editor .char-insert.diff-range-empty{border-left:solid var(--vscode-diffEditor-insertedTextBackground)3px}.monaco-editor .fold-unchanged{cursor:pointer}.monaco-diff-editor .diff-moved-code-block{justify-content:flex-end;margin-top:-4px;display:flex}.monaco-diff-editor .diff-moved-code-block .action-bar .action-label.codicon{width:12px;height:12px;font-size:12px}.monaco-diff-editor .diffOverview{z-index:9}.monaco-diff-editor .diffOverview .diffViewport{z-index:10}.monaco-diff-editor.vs .diffOverview{background:#00000008}.monaco-diff-editor.vs-dark .diffOverview{background:#ffffff03}.monaco-scrollable-element.modified-in-monaco-diff-editor.vs .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.vs-dark .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-black .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-light .scrollbar{background:0 0}.monaco-scrollable-element.modified-in-monaco-diff-editor .slider{z-index:10}.modified-in-monaco-diff-editor .slider.active{background:#ababab66}.modified-in-monaco-diff-editor.hc-black .slider.active,.modified-in-monaco-diff-editor.hc-light .slider.active{background:0 0}.monaco-editor .insert-sign,.monaco-diff-editor .insert-sign,.monaco-editor .delete-sign,.monaco-diff-editor .delete-sign{align-items:center;opacity:.7!important;font-size:11px!important;display:flex!important}.monaco-editor.hc-black .insert-sign,.monaco-diff-editor.hc-black .insert-sign,.monaco-editor.hc-black .delete-sign,.monaco-diff-editor.hc-black .delete-sign,.monaco-editor.hc-light .insert-sign,.monaco-diff-editor.hc-light .insert-sign,.monaco-editor.hc-light .delete-sign,.monaco-diff-editor.hc-light .delete-sign{opacity:1}.monaco-editor .inline-deleted-margin-view-zone,.monaco-editor .inline-added-margin-view-zone{text-align:right}.monaco-editor .arrow-revert-change{z-index:10;position:absolute}.monaco-editor .arrow-revert-change:hover{cursor:pointer}.monaco-editor .view-zones .view-lines .view-line span{display:inline-block}.monaco-editor .margin-view-zones .lightbulb-glyph:hover{cursor:pointer}.monaco-editor .char-insert,.monaco-diff-editor .char-insert{background-color:var(--vscode-diffEditor-insertedTextBackground)}.monaco-editor .line-insert,.monaco-diff-editor .line-insert{background-color:var(--vscode-diffEditor-insertedLineBackground,var(--vscode-diffEditor-insertedTextBackground))}.monaco-editor .line-insert,.monaco-editor .char-insert{box-sizing:border-box;border:1px solid var(--vscode-diffEditor-insertedTextBorder)}.monaco-editor.hc-black .line-insert,.monaco-editor.hc-light .line-insert,.monaco-editor.hc-black .char-insert,.monaco-editor.hc-light .char-insert{border-style:dashed}.monaco-editor .line-delete,.monaco-editor .char-delete{box-sizing:border-box;border:1px solid var(--vscode-diffEditor-removedTextBorder)}.monaco-editor.hc-black .line-delete,.monaco-editor.hc-light .line-delete,.monaco-editor.hc-black .char-delete,.monaco-editor.hc-light .char-delete{border-style:dashed}.monaco-editor .inline-added-margin-view-zone,.monaco-editor .gutter-insert,.monaco-diff-editor .gutter-insert{background-color:var(--vscode-diffEditorGutter-insertedLineBackground,var(--vscode-diffEditor-insertedLineBackground),var(--vscode-diffEditor-insertedTextBackground))}.monaco-editor .char-delete,.monaco-diff-editor .char-delete{background-color:var(--vscode-diffEditor-removedTextBackground)}.monaco-editor .line-delete,.monaco-diff-editor .line-delete{background-color:var(--vscode-diffEditor-removedLineBackground,var(--vscode-diffEditor-removedTextBackground))}.monaco-editor .inline-deleted-margin-view-zone,.monaco-editor .gutter-delete,.monaco-diff-editor .gutter-delete{background-color:var(--vscode-diffEditorGutter-removedLineBackground,var(--vscode-diffEditor-removedLineBackground),var(--vscode-diffEditor-removedTextBackground))}.monaco-diff-editor.side-by-side .editor.modified{box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow);border-left:1px solid var(--vscode-diffEditor-border)}.monaco-diff-editor .diffViewport{background:var(--vscode-scrollbarSlider-background)}.monaco-diff-editor .diffViewport:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-diff-editor .diffViewport:active{background:var(--vscode-scrollbarSlider-activeBackground)}.monaco-editor .diagonal-fill{background-image:linear-gradient(-45deg,var(--vscode-diffEditor-diagonalFill)12.5%,#0000 12.5%,#0000 50%,var(--vscode-diffEditor-diagonalFill)50%,var(--vscode-diffEditor-diagonalFill)62.5%,#0000 62.5%,#0000 100%);background-size:8px 8px}")});class vJ{static capture(J){if(J.getScrollTop()===0||J.hasPendingScrollAnimation())return new vJ(J.getScrollTop(),J.getContentHeight(),null,0,null);let $=null,X=0,Y=J.getVisibleRanges();if(Y.length>0){$=Y[0].getStartPosition();let Z=J.getTopForPosition($.lineNumber,$.column);X=J.getScrollTop()-Z}return new vJ(J.getScrollTop(),J.getContentHeight(),$,X,J.getPosition())}constructor(J,$,X,Y,Z){this._initialScrollTop=J,this._initialContentHeight=$,this._visiblePosition=X,this._visiblePositionScrollDelta=Y,this._cursorPosition=Z}restore(J){if(this._initialContentHeight===J.getContentHeight()&&this._initialScrollTop===J.getScrollTop())return;if(this._visiblePosition){let $=J.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);J.setScrollTop($+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(J){if(this._initialContentHeight===J.getContentHeight()&&this._initialScrollTop===J.getScrollTop())return;let $=J.getPosition();if(!this._cursorPosition||!$)return;let X=J.getTopForLineNumber($.lineNumber)-J.getTopForLineNumber(this._cursorPosition.lineNumber);J.setScrollTop(J.getScrollTop()+X)}}function EO(){return qj&&!!qj.VSCODE_DEV}function FS(J){if(!EO())return{dispose(){}};else{let $=Tq0();return $.add(J),{dispose(){$.delete(J)}}}}function Tq0(){if(!kO)kO=new Set;let J=globalThis;if(!J.$hotReload_applyNewExports)J.$hotReload_applyNewExports=($)=>{for(let X of kO){let Y=X($);if(Y)return Y}return};return kO}var kO=void 0;var l10=w(()=>{uN();if(EO())FS(({oldExports:J,newSrc:$})=>{if($.indexOf("/* hot-reload:patch-prototype-methods */")===-1)return;return(X)=>{var Y,Z;for(let Q in X){let G=X[Q];if(console.log(`[hot-reload] Patching prototype methods of '${Q}'`,{exportedItem:G}),typeof G==="function"&&G.prototype){let q=J[Q];if(q){for(let U of Object.getOwnPropertyNames(G.prototype)){let z=Object.getOwnPropertyDescriptor(G.prototype,U),H=Object.getOwnPropertyDescriptor(q.prototype,U);if(((Y=z===null||z===void 0?void 0:z.value)===null||Y===void 0?void 0:Y.toString())!==((Z=H===null||H===void 0?void 0:H.value)===null||Z===void 0?void 0:Z.toString()))console.log(`[hot-reload] Patching prototype method '${Q}.${U}'`);Object.defineProperty(q.prototype,U,z)}X[Q]=q}}}return!0}})});function d10(J,$,X,Y){if(J.length===0)return $;if($.length===0)return J;let Z=[],Q=0,G=0;while(Q<J.length&&G<$.length){let q=J[Q],U=$[G],z=X(q),H=X(U);if(z<H)Z.push(q),Q++;else if(z>H)Z.push(U),G++;else Z.push(Y(q,U)),Q++,G++}while(Q<J.length)Z.push(J[Q]),Q++;while(G<$.length)Z.push($[G]),G++;return Z}function jH(J,$){let X=new $0,Y=J.createDecorationsCollection();return X.add(vB({debugName:()=>`Apply decorations from ${$.debugName}`},(Z)=>{let Q=$.read(Z);Y.set(Q)})),X.add({dispose:()=>{Y.clear()}}),X}function fB(J,$){return J.appendChild($),N0(()=>{J.removeChild($)})}function KS(J,$,X){let Y=$.get(),Z=Y,Q=Y,G=M1("animatedValue",Y),q=-1,U=300,z=void 0;X.add(k2({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(j,V)=>{if(j.didChange($))V.animate=V.animate||j.change;return!0}},(j,V)=>{if(z!==void 0)J.cancelAnimationFrame(z),z=void 0;Z=Q,Y=$.read(j),q=Date.now()-(V.animate?0:U),H()}));function H(){let j=Date.now()-q;if(Q=Math.floor(wq0(j,Z,Y-Z,U)),j<U)z=J.requestAnimationFrame(H);else Q=Y;G.set(Q,void 0)}return G}function wq0(J,$,X,Y){return J===Y?$+X:X*(-Math.pow(2,-10*J/Y)+1)+$}class Uq{get afterLineNumber(){return this._afterLineNumber.get()}constructor(J,$){this._afterLineNumber=J,this.heightInPx=$,this.domNode=document.createElement("div"),this._actualTop=M1(this,void 0),this._actualHeight=M1(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=(X)=>{this._actualTop.set(X,void 0)},this.onComputedHeight=(X)=>{this._actualHeight.set(X,void 0)}}}class IO{constructor(J,$){this._editor=J,this._domElement=$,this._overlayWidgetId=`managedOverlayWidget-${IO._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function hJ(J,$){return w1((X)=>{for(let[Y,Z]of Object.entries($)){if(Z&&typeof Z==="object"&&"read"in Z)Z=Z.read(X);if(typeof Z==="number")Z=`${Z}px`;Y=Y.replace(/[A-Z]/g,(Q)=>"-"+Q.toLowerCase()),J.style[Y]=Z}})}function s4(J,$){return Lq0([J],$),J}function Lq0(J,$){if(EO())H9("reload",(Y)=>FS(({oldExports:Z})=>{if(![...Object.values(Z)].some((Q)=>J.includes(Q)))return;return(Q)=>{return Y(void 0),!0}})).read($)}function VH(J,$,X,Y){let Z=new $0,Q=[];return Z.add(u7((G,q)=>{let U=$.read(G),z=new Map,H=new Map;if(X)X(!0);if(J.changeViewZones((j)=>{for(let V of Q)j.removeZone(V),Y===null||Y===void 0||Y.delete(V);Q.length=0;for(let V of U){let W=j.addZone(V);if(V.setZoneId)V.setZoneId(W);Q.push(W),Y===null||Y===void 0||Y.add(W),z.set(V,W)}}),X)X(!1);q.add(k2({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(j,V){let W=H.get(j.changedObservable);if(W!==void 0)V.zoneIds.push(W);return!0}},(j,V)=>{for(let W of U)if(W.onChange)H.set(W.onChange,z.get(W)),W.onChange.read(j);if(X)X(!0);if(J.changeViewZones((W)=>{for(let B of V.zoneIds)W.layoutZone(B)}),X)X(!1)}))})),Z.add({dispose(){if(X)X(!0);if(J.changeViewZones((G)=>{for(let q of Q)G.removeZone(q)}),Y===null||Y===void 0||Y.clear(),X)X(!1)}}),Z}function AS(J,$){let X=eG($,(Z)=>Z.original.startLineNumber<=J.lineNumber);if(!X)return k.fromPositions(J);if(X.original.endLineNumberExclusive<=J.lineNumber){let Z=J.lineNumber-X.original.endLineNumberExclusive+X.modified.endLineNumberExclusive;return k.fromPositions(new g(Z,J.column))}if(!X.innerChanges)return k.fromPositions(new g(X.modified.startLineNumber,1));let Y=eG(X.innerChanges,(Z)=>Z.originalRange.getStartPosition().isBeforeOrEqual(J));if(!Y){let Z=J.lineNumber-X.original.startLineNumber+X.modified.startLineNumber;return k.fromPositions(new g(Z,J.column))}if(Y.originalRange.containsPosition(J))return Y.modifiedRange;else{let Z=kq0(Y.originalRange.getEndPosition(),J);return k.fromPositions(Eq0(Y.modifiedRange.getEndPosition(),Z))}}function kq0(J,$){if(J.lineNumber===$.lineNumber)return new O3(0,$.column-J.column);else return new O3($.lineNumber-J.lineNumber,$.column-1)}function Eq0(J,$){if($.lineCount===0)return new g(J.lineNumber,J.column+$.columnCount);else return new g(J.lineNumber+$.lineCount,$.columnCount+1)}function mB(J,$,X){let Y=J.bindTo($);return vB({debugName:()=>`Update ${J.key}`},(Z)=>{Y.set(X(Z))})}function s10(J,$){let X;return J.filter((Y)=>{let Z=$(Y,X);return X=Y,Z})}var gB,pB;var d$=w(()=>{W$();_8();l10();z0();P7();WL();i0();fX();gB=class gB extends m{get width(){return this._width}get height(){return this._height}constructor(J,$){super();this.elementSizeObserver=this._register(new AV(J,$)),this._width=M1(this,this.elementSizeObserver.getWidth()),this._height=M1(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((X)=>y6((Y)=>{this._width.set(this.elementSizeObserver.getWidth(),Y),this._height.set(this.elementSizeObserver.getHeight(),Y)})))}observe(J){this.elementSizeObserver.observe(J)}setAutomaticLayout(J){if(J)this.elementSizeObserver.startObserving();else this.elementSizeObserver.stopObserving()}};pB=class pB extends m{constructor(J,$,X){super();this._register(new IO(J,X)),this._register(hJ(X,{height:$.actualHeight,top:$.actualTop}))}};IO._counter=0});var a10=w(()=>{K0(".monaco-diff-editor .diff-review-line-number{text-align:right;color:var(--vscode-editorLineNumber-foreground);display:inline-block}.monaco-diff-editor .diff-review{-webkit-user-select:none;user-select:none;z-index:99;position:absolute}.monaco-diff-editor .diff-review-summary{padding-left:10px}.monaco-diff-editor .diff-review-shadow{box-shadow:var(--vscode-scrollbar-shadow)0 -6px 6px -6px inset;position:absolute}.monaco-diff-editor .diff-review-row{white-space:pre}.monaco-diff-editor .diff-review-table{min-width:100%;display:table}.monaco-diff-editor .diff-review-row{width:100%;display:table-row}.monaco-diff-editor .diff-review-spacer{vertical-align:middle;width:10px;display:inline-block}.monaco-diff-editor .diff-review-spacer>.codicon{font-size:9px!important}.monaco-diff-editor .diff-review-actions{z-index:100;display:inline-block;position:absolute;top:2px;right:10px}.monaco-diff-editor .diff-review-actions .action-label{width:16px;height:16px;margin:2px 0}.monaco-diff-editor .revertButton{cursor:pointer}")});function bq0(J,$,X){let Y=[];for(let Z of kq(J,(Q,G)=>G.modified.startLineNumber-Q.modified.endLineNumberExclusive<2*uB)){let Q=[];Q.push(new i10);let G=new f0(Math.max(1,Z[0].original.startLineNumber-uB),Math.min(Z[Z.length-1].original.endLineNumberExclusive+uB,$+1)),q=new f0(Math.max(1,Z[0].modified.startLineNumber-uB),Math.min(Z[Z.length-1].modified.endLineNumberExclusive+uB,X+1));ZK(Z,(H,j)=>{let V=new f0(H?H.original.endLineNumberExclusive:G.startLineNumber,j?j.original.startLineNumber:G.endLineNumberExclusive),W=new f0(H?H.modified.endLineNumberExclusive:q.startLineNumber,j?j.modified.startLineNumber:q.endLineNumberExclusive);if(V.forEach((B)=>{Q.push(new t10(B,W.startLineNumber+(B-V.startLineNumber)))}),j)j.original.forEach((B)=>{Q.push(new n10(j,B))}),j.modified.forEach((B)=>{Q.push(new o10(j,B))})});let U=Z[0].modified.join(Z[Z.length-1].modified),z=Z[0].original.join(Z[Z.length-1].original);Y.push(new r10(new w8(U,z),Q))}return Y}class r10{constructor(J,$){this.range=J,this.lines=$}}class i10{constructor(){this.type=c7.Header}}class n10{constructor(J,$){this.diff=J,this.originalLineNumber=$,this.type=c7.Deleted,this.modifiedLineNumber=void 0}}class o10{constructor(J,$){this.diff=J,this.modifiedLineNumber=$,this.type=c7.Added,this.originalLineNumber=void 0}}class t10{constructor(J,$){this.originalLineNumber=J,this.modifiedLineNumber=$,this.type=c7.Unchanged}}var RS=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},MS=function(J,$){return function(X,Y){$(X,Y,J)}},Iq0,yq0,xq0,mZ,PS,uB=3,c7,DS;var e10=w(()=>{T0();kQ();$Y();L$();S7();V1();k5();z0();P7();I5();HJ();d$();O8();N9();C4();i0();SQ();I4();JZ();DU();NJ();c0();Zq();s0();ZH();a10();Iq0=m7("diff-review-insert",F0.add,F("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),yq0=m7("diff-review-remove",F0.remove,F("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),xq0=m7("diff-review-close",F0.close,F("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer.")),mZ=class extends m{constructor($,X,Y,Z,Q,G,q,U,z){super();this._parentNode=$,this._visible=X,this._setVisible=Y,this._canClose=Z,this._width=Q,this._height=G,this._diffs=q,this._editors=U,this._instantiationService=z,this._state=d4(this,(H,j)=>{let V=this._visible.read(H);if(this._parentNode.style.visibility=V?"visible":"hidden",!V)return null;let W=j.add(this._instantiationService.createInstance(PS,this._diffs,this._editors,this._setVisible,this._canClose)),B=j.add(this._instantiationService.createInstance(DS,this._parentNode,W,this._width,this._height,this._editors));return{model:W,view:B}}).recomputeInitiallyAndOnChange(this._store)}next(){y6(($)=>{let X=this._visible.get();if(this._setVisible(!0,$),X)this._state.get().model.nextGroup($)})}prev(){y6(($)=>{this._setVisible(!0,$),this._state.get().model.previousGroup($)})}close(){y6(($)=>{this._setVisible(!1,$)})}};mZ._ttPolicy=J4("diffReview",{createHTML:(J)=>J});mZ=RS([MS(8,l0)],mZ);PS=class extends m{constructor($,X,Y,Z,Q){super();this._diffs=$,this._editors=X,this._setVisible=Y,this.canClose=Z,this._audioCueService=Q,this._groups=M1(this,[]),this._currentGroupIdx=M1(this,0),this._currentElementIdx=M1(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((G,q)=>this._groups.read(q)[G]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((G,q)=>{var U;return(U=this.currentGroup.read(q))===null||U===void 0?void 0:U.lines[G]}),this._register(w1((G)=>{let q=this._diffs.read(G);if(!q){this._groups.set([],void 0);return}let U=bq0(q,this._editors.original.getModel().getLineCount(),this._editors.modified.getModel().getLineCount());y6((z)=>{let H=this._editors.modified.getPosition();if(H){let j=U.findIndex((V)=>(H===null||H===void 0?void 0:H.lineNumber)<V.range.modified.endLineNumberExclusive);if(j!==-1)this._currentGroupIdx.set(j,z)}this._groups.set(U,z)})})),this._register(w1((G)=>{let q=this.currentElement.read(G);if((q===null||q===void 0?void 0:q.type)===c7.Deleted)this._audioCueService.playAudioCue(q1.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"});else if((q===null||q===void 0?void 0:q.type)===c7.Added)this._audioCueService.playAudioCue(q1.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(w1((G)=>{var q;let U=this.currentElement.read(G);if(U&&U.type!==c7.Header){let z=(q=U.modifiedLineNumber)!==null&&q!==void 0?q:U.diff.modified.startLineNumber;this._editors.modified.setSelection(k.fromPositions(new g(z,1)))}}))}_goToGroupDelta($,X){let Y=this.groups.get();if(!Y||Y.length<=1)return;Qq(X,(Z)=>{this._currentGroupIdx.set(n0.ofLength(Y.length).clipCyclic(this._currentGroupIdx.get()+$),Z),this._currentElementIdx.set(0,Z)})}nextGroup($){this._goToGroupDelta(1,$)}previousGroup($){this._goToGroupDelta(-1,$)}_goToLineDelta($){let X=this.currentGroup.get();if(!X||X.lines.length<=1)return;y6((Y)=>{this._currentElementIdx.set(n0.ofLength(X.lines.length).clip(this._currentElementIdx.get()+$),Y)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine($){let X=this.currentGroup.get();if(!X)return;let Y=X.lines.indexOf($);if(Y===-1)return;y6((Z)=>{this._currentElementIdx.set(Y,Z)})}revealCurrentElementInEditor(){this._setVisible(!1,void 0);let $=this.currentElement.get();if($)if($.type===c7.Deleted)this._editors.original.setSelection(k.fromPositions(new g($.originalLineNumber,1))),this._editors.original.revealLine($.originalLineNumber),this._editors.original.focus();else{if($.type!==c7.Header)this._editors.modified.setSelection(k.fromPositions(new g($.modifiedLineNumber,1))),this._editors.modified.revealLine($.modifiedLineNumber);this._editors.modified.focus()}}close(){this._setVisible(!1,void 0),this._editors.modified.focus()}};PS=RS([MS(4,l4)],PS);(function(J){J[J.Header=0]="Header",J[J.Unchanged=1]="Unchanged",J[J.Deleted=2]="Deleted",J[J.Added=3]="Added"})(c7||(c7={}));DS=class extends m{constructor($,X,Y,Z,Q,G){super();this._element=$,this._model=X,this._width=Y,this._height=Z,this._editors=Q,this._languageService=G,this.domNode=this._element,this.domNode.className="diff-review monaco-editor-background";let q=document.createElement("div");q.className="diff-review-actions",this._actionBar=this._register(new S8(q)),this._register(w1((U)=>{if(this._actionBar.clear(),this._model.canClose.read(U))this._actionBar.push(new J9("diffreview.close",F("label.close","Close"),"close-diff-review "+h0.asClassName(xq0),!0,async()=>X.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new jZ(this._content,{})),x5(this.domNode,this._scrollbar.getDomNode(),q),this._register(N0(()=>{x5(this.domNode)})),this._register(hJ(this.domNode,{width:this._width,height:this._height})),this._register(hJ(this._content,{width:this._width,height:this._height})),this._register(u7((U,z)=>{this._model.currentGroup.read(U),this._render(z)})),this._register(q6(this.domNode,"keydown",(U)=>{if(U.equals(18)||U.equals(2066)||U.equals(530))U.preventDefault(),this._model.goToNextLine();if(U.equals(16)||U.equals(2064)||U.equals(528))U.preventDefault(),this._model.goToPreviousLine();if(U.equals(9)||U.equals(2057)||U.equals(521)||U.equals(1033))U.preventDefault(),this._model.close();if(U.equals(10)||U.equals(3))U.preventDefault(),this._model.revealCurrentElementInEditor()}))}_render($){let X=this._editors.original.getOptions(),Y=this._editors.modified.getOptions(),Z=document.createElement("div");Z.className="diff-review-table",Z.setAttribute("role","list"),Z.setAttribute("aria-label",F("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),S6(Z,Y.get(50)),x5(this._content,Z);let Q=this._editors.original.getModel(),G=this._editors.modified.getModel();if(!Q||!G)return;let q=Q.getOptions(),U=G.getOptions(),z=Y.get(66),H=this._model.currentGroup.get();for(let j of(H===null||H===void 0?void 0:H.lines)||[]){if(!H)break;let V;if(j.type===c7.Header){let B=document.createElement("div");B.className="diff-review-row",B.setAttribute("role","listitem");let K=H.range,P=this._model.currentGroupIndex.get(),A=this._model.groups.get().length,D=(N)=>N===0?F("no_lines_changed","no lines changed"):N===1?F("one_line_changed","1 line changed"):F("more_lines_changed","{0} lines changed",N),M=D(K.original.length),R=D(K.modified.length);B.setAttribute("aria-label",F({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",P+1,A,K.original.startLineNumber,M,K.modified.startLineNumber,R));let O=document.createElement("div");O.className="diff-review-cell diff-review-summary",O.appendChild(document.createTextNode(`${P+1}/${A}: @@ -${K.original.startLineNumber},${K.original.length} +${K.modified.startLineNumber},${K.modified.length} @@`)),B.appendChild(O),V=B}else V=this._createRow(j,z,this._width.get(),X,Q,q,Y,G,U);Z.appendChild(V);let W=J1((B)=>this._model.currentElement.read(B)===j);$.add(w1((B)=>{let K=W.read(B);if(V.tabIndex=K?0:-1,K)V.focus()})),$.add(r(V,"focus",()=>{this._model.goToLine(j)}))}this._scrollbar.scanDomNode()}_createRow($,X,Y,Z,Q,G,q,U,z){let H=Z.get(143),j=H.glyphMarginWidth+H.lineNumbersWidth,V=q.get(143),W=10+V.glyphMarginWidth+V.lineNumbersWidth,B="diff-review-row",K="",P="diff-review-spacer",A=null;switch($.type){case c7.Added:B="diff-review-row line-insert",K=" char-insert",A=Iq0;break;case c7.Deleted:B="diff-review-row line-delete",K=" char-delete",A=yq0;break}let D=document.createElement("div");D.style.minWidth=Y+"px",D.className=B,D.setAttribute("role","listitem"),D.ariaLevel="";let M=document.createElement("div");M.className="diff-review-cell",M.style.height=`${X}px`,D.appendChild(M);let R=document.createElement("span");if(R.style.width=j+"px",R.style.minWidth=j+"px",R.className="diff-review-line-number"+K,$.originalLineNumber!==void 0)R.appendChild(document.createTextNode(String($.originalLineNumber)));else R.innerText=" ";M.appendChild(R);let O=document.createElement("span");if(O.style.width=W+"px",O.style.minWidth=W+"px",O.style.paddingRight="10px",O.className="diff-review-line-number"+K,$.modifiedLineNumber!==void 0)O.appendChild(document.createTextNode(String($.modifiedLineNumber)));else O.innerText=" ";M.appendChild(O);let N=document.createElement("span");if(N.className=P,A){let v=document.createElement("span");v.className=h0.asClassName(A),v.innerText="  ",N.appendChild(v)}else N.innerText="  ";M.appendChild(N);let T;if($.modifiedLineNumber!==void 0){let v=this._getLineHtml(U,q,z.tabSize,$.modifiedLineNumber,this._languageService.languageIdCodec);if(mZ._ttPolicy)v=mZ._ttPolicy.createHTML(v);M.insertAdjacentHTML("beforeend",v),T=U.getLineContent($.modifiedLineNumber)}else{let v=this._getLineHtml(Q,Z,G.tabSize,$.originalLineNumber,this._languageService.languageIdCodec);if(mZ._ttPolicy)v=mZ._ttPolicy.createHTML(v);M.insertAdjacentHTML("beforeend",v),T=Q.getLineContent($.originalLineNumber)}if(T.length===0)T=F("blankLine","blank");let S="";switch($.type){case c7.Unchanged:if($.originalLineNumber===$.modifiedLineNumber)S=F({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",T,$.originalLineNumber);else S=F("equalLine","{0} original line {1} modified line {2}",T,$.originalLineNumber,$.modifiedLineNumber);break;case c7.Added:S=F("insertLine","+ {0} modified line {1}",T,$.modifiedLineNumber);break;case c7.Deleted:S=F("deleteLine","- {0} original line {1}",T,$.originalLineNumber);break}return D.setAttribute("aria-label",S),D}_getLineHtml($,X,Y,Z,Q){let G=$.getLineContent(Z),q=X.get(50),U=v6.createEmpty(G,Q),z=V7.isBasicASCII(G,$.mightContainNonBasicASCII()),H=V7.containsRTL(G,z,$.mightContainRTL());return PU(new K$(q.isMonospace&&!X.get(33),q.canUseHalfwidthRightwardsArrow,G,!1,z,H,0,U,[],Y,0,q.spaceWidth,q.middotWidth,q.wsmiddotWidth,X.get(116),X.get(98),X.get(93),X.get(51)!==x7.OFF,null)).html}};DS=RS([MS(5,j6)],DS)});class _S{static compute(J){let $=[],X=[];for(let Y of J){let Z=$.findIndex((Q)=>!Q.intersectsStrict(Y));if(Z===-1)if($.length>=6)Z=vm($,B9((G)=>G.intersectWithRangeLength(Y),MY));else Z=$.length,$.push(new IP);$[Z].addRange(Y),X.push(Z)}return new _S($.length,X)}constructor(J,$){this._trackCount=J,this.trackPerLineIdx=$}getTrack(J){return this.trackPerLineIdx[J]}getTrackCount(){return this._trackCount}}var UY,OS;var NS=w(()=>{T0();$Y();S7();V1();W$();k5();z0();P7();I5();d$();C4();c0();UY=class UY extends m{constructor(J,$,X,Y,Z){super();this._rootElement=J,this._diffModel=$,this._originalEditorLayoutInfo=X,this._modifiedEditorLayoutInfo=Y,this._editors=Z,this._originalScrollTop=g6(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=g6(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=H9("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=M1(this,0),this._modifiedViewZonesChangedSignal=H9("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=H9("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=d4(this,(j,V)=>{var W;this._element.replaceChildren();let B=this._diffModel.read(j),K=(W=B===null||B===void 0?void 0:B.diff.read(j))===null||W===void 0?void 0:W.movedTexts;if(!K||K.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(j);let P=this._originalEditorLayoutInfo.read(j),A=this._modifiedEditorLayoutInfo.read(j);if(!P||!A){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(j),this._originalViewZonesChangedSignal.read(j);let D=K.map((v)=>{function l(i,J0){let W0=J0.getTopForLineNumber(i.startLineNumber,!0),M0=J0.getTopForLineNumber(i.endLineNumberExclusive,!0);return(W0+M0)/2}let f=l(v.lineRangeMapping.original,this._editors.original),h=this._originalScrollTop.read(j),L=l(v.lineRangeMapping.modified,this._editors.modified),b=this._modifiedScrollTop.read(j),p=f-h,d=L-b,s=Math.min(f,L),c=Math.max(f,L);return{range:new n0(s,c),from:p,to:d,fromWithoutScroll:f,toWithoutScroll:L,move:v}});D.sort(dh(B9((v)=>v.fromWithoutScroll>v.toWithoutScroll,sh),B9((v)=>v.fromWithoutScroll>v.toWithoutScroll?v.fromWithoutScroll:-v.toWithoutScroll,MY)));let M=_S.compute(D.map((v)=>v.range)),R=10,O=P.verticalScrollbarWidth,N=(M.getTrackCount()-1)*10+R*2,T=O+N+(A.contentLeft-UY.movedCodeBlockPadding),S=0;for(let v of D){let l=M.getTrack(S),f=O+R+l*10,h=15,L=15,b=T,p=A.glyphMarginWidth+A.lineNumbersWidth,d=18,s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.classList.add("arrow-rectangle"),s.setAttribute("x",`${b-p}`),s.setAttribute("y",`${v.to-9}`),s.setAttribute("width",`${p}`),s.setAttribute("height","18"),this._element.appendChild(s);let c=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",`M 0 ${v.from} L ${f} ${v.from} L ${f} ${v.to} L ${b-15} ${v.to}`),i.setAttribute("fill","none"),c.appendChild(i);let J0=document.createElementNS("http://www.w3.org/2000/svg","polygon");J0.classList.add("arrow"),V.add(w1((W0)=>{i.classList.toggle("currentMove",v.move===B.activeMovedText.read(W0)),J0.classList.toggle("currentMove",v.move===B.activeMovedText.read(W0))})),J0.setAttribute("points",`${b-15},${v.to-7.5} ${b},${v.to} ${b-15},${v.to+7.5}`),c.appendChild(J0),this._element.appendChild(c),S++}this.width.set(N,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(N0(()=>this._element.remove())),this._register(w1((j)=>{let V=this._originalEditorLayoutInfo.read(j),W=this._modifiedEditorLayoutInfo.read(j);if(!V||!W)return;this._element.style.left=`${V.width-V.verticalScrollbarWidth}px`,this._element.style.height=`${V.height}px`,this._element.style.width=`${V.verticalScrollbarWidth+V.contentLeft-UY.movedCodeBlockPadding+this.width.read(j)}px`})),this._register(E2(this._state));let Q=J1((j)=>{let V=this._diffModel.read(j),W=V===null||V===void 0?void 0:V.diff.read(j);if(!W)return[];return W.movedTexts.map((B)=>({move:B,original:new Uq(LO(B.lineRangeMapping.original.startLineNumber-1),18),modified:new Uq(LO(B.lineRangeMapping.modified.startLineNumber-1),18)}))});this._register(VH(this._editors.original,Q.map((j)=>j.map((V)=>V.original)))),this._register(VH(this._editors.modified,Q.map((j)=>j.map((V)=>V.modified)))),this._register(u7((j,V)=>{let W=Q.read(j);for(let B of W)V.add(new OS(this._editors.original,B.original,B.move,"original",this._diffModel.get())),V.add(new OS(this._editors.modified,B.modified,B.move,"modified",this._diffModel.get()))}));let G=g6(this._editors.original.onDidChangeCursorPosition,()=>this._editors.original.getPosition()),q=g6(this._editors.modified.onDidChangeCursorPosition,()=>this._editors.modified.getPosition()),U=H9("original.onDidFocusEditorWidget",(j)=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>j(void 0),0))),z=H9("modified.onDidFocusEditorWidget",(j)=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>j(void 0),0))),H="modified";this._register(k2({createEmptyChangeSummary:()=>{return},handleChange:(j,V)=>{if(j.didChange(U))H="original";if(j.didChange(z))H="modified";return!0}},(j)=>{U.read(j),z.read(j);let V=this._diffModel.read(j);if(!V)return;let W=V.diff.read(j),B=void 0;if(W&&H==="original"){let K=G.read(j);if(K)B=W.movedTexts.find((P)=>P.lineRangeMapping.original.contains(K.lineNumber))}if(W&&H==="modified"){let K=q.read(j);if(K)B=W.movedTexts.find((P)=>P.lineRangeMapping.modified.contains(K.lineNumber))}if(B!==V.movedTextToCompare.get())V.movedTextToCompare.set(void 0,void 0);V.setActiveMovedText(B)}))}};UY.movedCodeBlockPadding=4;OS=class OS extends pB{constructor(J,$,X,Y,Z){let Q=n1("div.diff-hidden-lines-widget");super(J,$,Q.root);this._editor=J,this._move=X,this._kind=Y,this._diffModel=Z,this._nodes=n1("div.diff-moved-code-block",{style:{marginRight:"4px"}},[n1("div.text-content@textContent"),n1("div.action-bar@actionBar")]),Q.root.appendChild(this._nodes.root);let G=g6(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(hJ(this._nodes.root,{paddingRight:G.map((j)=>j.verticalScrollbarWidth)}));let q;if(X.changes.length>0)q=this._kind==="original"?F("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):F("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);else q=this._kind==="original"?F("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):F("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);let U=this._register(new S8(this._nodes.actionBar,{highlightToggledItems:!0})),z=new J9("",q,"",!1);U.push(z,{icon:!1,label:!0});let H=new J9("","Compare",h0.asClassName(F0.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===X?void 0:this._move,void 0)});this._register(w1((j)=>{let V=this._diffModel.movedTextToCompare.read(j)===X;H.checked=V})),U.push(H,{icon:!1,label:!0})}}});var tZ1,eZ1,JQ1,Sq0,TS,wS,LS,kS,ES,IS,J60,$60,cB,X60,Y60;var yS=w(()=>{k5();I5();G2();c0();i8();ZH();tZ1=I("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},F("diffEditor.move.border","The border color for text that got moved in the diff editor.")),eZ1=I("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},F("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),JQ1=I("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},F("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets.")),Sq0=m7("diff-insert",F0.add,F("diffInsertIcon","Line decoration for inserts in the diff editor.")),TS=m7("diff-remove",F0.remove,F("diffRemoveIcon","Line decoration for removals in the diff editor.")),wS=C1.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+h0.asClassName(Sq0),marginClassName:"gutter-insert"}),LS=C1.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+h0.asClassName(TS),marginClassName:"gutter-delete"}),kS=C1.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),ES=C1.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),IS=C1.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),J60=C1.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),$60=C1.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),cB=C1.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),X60=C1.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),Y60=C1.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})});var xS;var Z60=w(()=>{z0();P7();NS();yS();d$();xS=class xS extends m{constructor(J,$,X,Y){super();this._editors=J,this._diffModel=$,this._options=X,this._decorations=J1(this,(Z)=>{var Q;let G=(Q=this._diffModel.read(Z))===null||Q===void 0?void 0:Q.diff.read(Z);if(!G)return null;let q=this._diffModel.read(Z).movedTextToCompare.read(Z),U=this._options.renderIndicators.read(Z),z=this._options.showEmptyDecorations.read(Z),H=[],j=[];if(!q)for(let W of G.mappings){if(!W.lineRangeMapping.original.isEmpty)H.push({range:W.lineRangeMapping.original.toInclusiveRange(),options:U?LS:ES});if(!W.lineRangeMapping.modified.isEmpty)j.push({range:W.lineRangeMapping.modified.toInclusiveRange(),options:U?wS:kS});if(W.lineRangeMapping.modified.isEmpty||W.lineRangeMapping.original.isEmpty){if(!W.lineRangeMapping.original.isEmpty)H.push({range:W.lineRangeMapping.original.toInclusiveRange(),options:X60});if(!W.lineRangeMapping.modified.isEmpty)j.push({range:W.lineRangeMapping.modified.toInclusiveRange(),options:J60})}else for(let B of W.lineRangeMapping.innerChanges||[]){if(W.lineRangeMapping.original.contains(B.originalRange.startLineNumber))H.push({range:B.originalRange,options:B.originalRange.isEmpty()&&z?Y60:cB});if(W.lineRangeMapping.modified.contains(B.modifiedRange.startLineNumber))j.push({range:B.modifiedRange,options:B.modifiedRange.isEmpty()&&z?$60:IS})}}if(q)for(let W of q.changes){let B=W.original.toInclusiveRange();if(B)H.push({range:B,options:U?LS:ES});let K=W.modified.toInclusiveRange();if(K)j.push({range:K,options:U?wS:kS});for(let P of W.innerChanges||[])H.push({range:P.originalRange,options:cB}),j.push({range:P.modifiedRange,options:IS})}let V=this._diffModel.read(Z).activeMovedText.read(Z);for(let W of G.movedTexts)H.push({range:W.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(W===V?" currentMove":""),blockPadding:[UY.movedCodeBlockPadding,0,UY.movedCodeBlockPadding,UY.movedCodeBlockPadding]}}),j.push({range:W.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(W===V?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:H,modifiedDecorations:j}}),this._register(jH(this._editors.original,this._decorations.map((Z)=>(Z===null||Z===void 0?void 0:Z.originalDecorations)||[]))),this._register(jH(this._editors.modified,this._decorations.map((Z)=>(Z===null||Z===void 0?void 0:Z.modifiedDecorations)||[])))}}});var bS;var Q60=w(()=>{yM();z0();P7();bS=class bS extends m{constructor(J,$,X,Y){super();this._options=J,this._domNode=$,this._dimensions=X,this._sashes=Y,this._sashRatio=M1(this,void 0),this.sashLeft=J1(this,(Z)=>{var Q;let G=(Q=this._sashRatio.read(Z))!==null&&Q!==void 0?Q:this._options.splitViewDefaultRatio.read(Z);return this._computeSashLeft(G,Z)}),this._sash=this._register(new C8(this._domNode,{getVerticalSashTop:(Z)=>0,getVerticalSashLeft:(Z)=>this.sashLeft.get(),getVerticalSashHeight:(Z)=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange((Z)=>{let Q=this._dimensions.width.get(),G=this._computeSashLeft((this._startSashPosition+(Z.currentX-Z.startX))/Q,void 0);this._sashRatio.set(G/Q,void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._sashRatio.set(void 0,void 0))),this._register(w1((Z)=>{let Q=this._sashes.read(Z);if(Q)this._sash.orthogonalEndSash=Q.bottom})),this._register(w1((Z)=>{let Q=this._options.enableSplitViewResizing.read(Z);this._sash.state=Q?3:0,this.sashLeft.read(Z),this._dimensions.height.read(Z),this._sash.layout()}))}_computeSashLeft(J,$){let X=this._dimensions.width.read($),Y=Math.floor(this._options.splitViewDefaultRatio.read($)*X),Z=this._options.enableSplitViewResizing.read($)?Math.floor(J*X):Y,Q=100;if(X<=200)return Y;if(Z<100)return 100;if(Z>X-100)return X-100;return Z}}});var Cq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},vq0=function(J,$){return function(X,Y){$(X,Y,J)}},SS,lB,CS;var G60=w(()=>{T0();x3();k5();S3();z0();P7();CB();I5();d$();N9();i0();c8();c0();s0();lB=SS=class extends m{static setBreadcrumbsSourceFactory($){this._breadcrumbsSourceFactory.set($,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor($,X,Y,Z){super();this._editors=$,this._diffModel=X,this._options=Y,this._instantiationService=Z,this._modifiedOutlineSource=qY(this,(U)=>{let z=this._editors.modifiedModel.read(U),H=SS._breadcrumbsSourceFactory.read(U);return!z||!H?void 0:H(z,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition((U)=>{if(U.reason===3){let z=this._diffModel.get();y6((H)=>{for(let j of this._editors.original.getSelections()||[])z===null||z===void 0||z.ensureOriginalLineIsVisible(j.getStartPosition().lineNumber,0,H),z===null||z===void 0||z.ensureOriginalLineIsVisible(j.getEndPosition().lineNumber,0,H)})}})),this._register(this._editors.modified.onDidChangeCursorPosition((U)=>{if(U.reason===3){let z=this._diffModel.get();y6((H)=>{for(let j of this._editors.modified.getSelections()||[])z===null||z===void 0||z.ensureModifiedLineIsVisible(j.getStartPosition().lineNumber,0,H),z===null||z===void 0||z.ensureModifiedLineIsVisible(j.getEndPosition().lineNumber,0,H)})}}));let Q=this._diffModel.map((U,z)=>{var H,j;let V=(H=U===null||U===void 0?void 0:U.unchangedRegions.read(z))!==null&&H!==void 0?H:[];if(V.length===1&&V[0].modifiedLineNumber===1&&V[0].lineCount===((j=this._editors.modifiedModel.read(z))===null||j===void 0?void 0:j.getLineCount()))return[];return V});this.viewZones=d4(this,(U,z)=>{let H=this._modifiedOutlineSource.read(U);if(!H)return{origViewZones:[],modViewZones:[]};let j=[],V=[],W=this._options.renderSideBySide.read(U),B=Q.read(U);for(let K of B){if(K.shouldHideControls(U))continue;{let P=J1(this,(D)=>K.getHiddenOriginalRange(D).startLineNumber-1),A=new Uq(P,24);j.push(A),z.add(new CS(this._editors.original,A,K,K.originalUnchangedRange,!W,H,(D)=>this._diffModel.get().ensureModifiedLineIsVisible(D,2,void 0),this._options))}{let P=J1(this,(D)=>K.getHiddenModifiedRange(D).startLineNumber-1),A=new Uq(P,24);V.push(A),z.add(new CS(this._editors.modified,A,K,K.modifiedUnchangedRange,!1,H,(D)=>this._diffModel.get().ensureModifiedLineIsVisible(D,2,void 0),this._options))}}return{origViewZones:j,modViewZones:V}});let G={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},q={description:"Fold Unchanged",glyphMarginHoverMessage:new Tz(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(F("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+h0.asClassName(F0.fold),zIndex:10001};this._register(jH(this._editors.original,J1(this,(U)=>{let z=Q.read(U),H=z.map((j)=>({range:j.originalUnchangedRange.toInclusiveRange(),options:G}));for(let j of z)if(j.shouldHideControls(U))H.push({range:k.fromPositions(new g(j.originalLineNumber,1)),options:q});return H}))),this._register(jH(this._editors.modified,J1(this,(U)=>{let z=Q.read(U),H=z.map((j)=>({range:j.modifiedUnchangedRange.toInclusiveRange(),options:G}));for(let j of z)if(j.shouldHideControls(U))H.push({range:f0.ofLength(j.modifiedLineNumber,1).toInclusiveRange(),options:q});return H}))),this._register(w1((U)=>{let z=Q.read(U);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(z.map((H)=>H.getHiddenOriginalRange(U).toInclusiveRange()).filter(OY)),this._editors.modified.setHiddenAreas(z.map((H)=>H.getHiddenModifiedRange(U).toInclusiveRange()).filter(OY))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp((U)=>{var z;if(!U.event.rightButton&&U.target.position&&((z=U.target.element)===null||z===void 0?void 0:z.className.includes("fold-unchanged"))){let H=U.target.position.lineNumber,j=this._diffModel.get();if(!j)return;let V=j.unchangedRegions.get().find((W)=>W.modifiedUnchangedRange.includes(H));if(!V)return;V.collapseAll(void 0),U.event.stopPropagation(),U.event.preventDefault()}})),this._register(this._editors.original.onMouseUp((U)=>{var z;if(!U.event.rightButton&&U.target.position&&((z=U.target.element)===null||z===void 0?void 0:z.className.includes("fold-unchanged"))){let H=U.target.position.lineNumber,j=this._diffModel.get();if(!j)return;let V=j.unchangedRegions.get().find((W)=>W.originalUnchangedRange.includes(H));if(!V)return;V.collapseAll(void 0),U.event.stopPropagation(),U.event.preventDefault()}}))}};lB._breadcrumbsSourceFactory=M1("breadcrumbsSourceFactory",void 0);lB=SS=Cq0([vq0(3,l0)],lB);CS=class CS extends pB{constructor(J,$,X,Y,Z,Q,G,q){let U=n1("div.diff-hidden-lines-widget");super(J,$,U.root);this._editor=J,this._unchangedRegion=X,this._unchangedRegionRange=Y,this._hide=Z,this._modifiedOutlineSource=Q,this._revealModifiedHiddenLine=G,this._options=q,this._nodes=n1("div.diff-hidden-lines",[n1("div.top@top",{title:F("diff.hiddenLines.top","Click or drag to show more above")}),n1("div.center@content",{style:{display:"flex"}},[n1("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[B0("a",{title:F("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...xJ("$(unfold)"))]),n1("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),n1("div.bottom@bottom",{title:F("diff.bottom","Click or drag to show more below"),role:"button"})]),U.root.appendChild(this._nodes.root);let z=g6(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());if(!this._hide)this._register(hJ(this._nodes.first,{width:z.map((j)=>j.contentLeft)}));else x5(this._nodes.first);this._register(w1((j)=>{let V=this._unchangedRegion.visibleLineCountTop.read(j)+this._unchangedRegion.visibleLineCountBottom.read(j)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!V),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(j)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(j)>0),this._nodes.top.classList.toggle("canMoveBottom",!V);let W=this._unchangedRegion.isDragged.read(j),B=this._editor.getDomNode();if(B)if(B.classList.toggle("draggingUnchangedRegion",!!W),W==="top")B.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(j)>0),B.classList.toggle("canMoveBottom",!V);else if(W==="bottom")B.classList.toggle("canMoveTop",!V),B.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(j)>0);else B.classList.toggle("canMoveTop",!1),B.classList.toggle("canMoveBottom",!1)}));let H=this._editor;this._register(r(this._nodes.top,"mousedown",(j)=>{if(j.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),j.preventDefault();let V=j.clientY,W=!1,B=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);let K=O0(this._nodes.top),P=r(K,"mousemove",(D)=>{let R=D.clientY-V;W=W||Math.abs(R)>2;let O=Math.round(R/H.getOption(66)),N=Math.max(0,Math.min(B+O,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(N,void 0)}),A=r(K,"mouseup",(D)=>{if(!W)this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),P.dispose(),A.dispose()})})),this._register(r(this._nodes.bottom,"mousedown",(j)=>{if(j.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),j.preventDefault();let V=j.clientY,W=!1,B=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);let K=O0(this._nodes.bottom),P=r(K,"mousemove",(D)=>{let R=D.clientY-V;W=W||Math.abs(R)>2;let O=Math.round(R/H.getOption(66)),N=Math.max(0,Math.min(B-O,this._unchangedRegion.getMaxVisibleLineCountBottom())),T=H.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(N,void 0);let S=H.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);H.setScrollTop(H.getScrollTop()+(S-T))}),A=r(K,"mouseup",(D)=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!W){let M=H.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);let R=H.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);H.setScrollTop(H.getScrollTop()+(R-M))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),P.dispose(),A.dispose()})})),this._register(w1((j)=>{let V=[];if(!this._hide){let W=X.getHiddenModifiedRange(j).length,B=F("hiddenLines","{0} hidden lines",W),K=B0("span",{title:F("diff.hiddenLines.expandAll","Double click to unfold")},B);K.addEventListener("dblclick",(D)=>{if(D.button!==0)return;D.preventDefault(),this._unchangedRegion.showAll(void 0)}),V.push(K);let P=this._unchangedRegion.getHiddenModifiedRange(j),A=this._modifiedOutlineSource.getBreadcrumbItems(P,j);if(A.length>0){V.push(B0("span",void 0,"  |  "));for(let D=0;D<A.length;D++){let M=A[D],R=kK.toIcon(M.kind),O=n1("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[Oz(R)," ",M.name,...D===A.length-1?[]:[Oz(F0.chevronRight)]]).root;V.push(O),O.onclick=()=>{this._revealModifiedHiddenLine(M.startLineNumber)}}}}x5(this._nodes.others,...V)}))}}});var q60=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},vS=function(J,$){return function(X,Y){$(X,Y,J)}},zq,fS,hS=class{constructor($){this.instantiationService=$}createDiffProvider($){return this.instantiationService.createInstance(yO,$)}},yO;var U60=w(()=>{y4();s0();_0();qX();N9();SQ();lz();_Q();fS=w0("diffProviderFactoryService");hS=q60([vS(0,l0)],hS);B1(fS,hS,1);yO=zq=class{constructor($,X,Y){this.editorWorkerService=X,this.telemetryService=Y,this.onDidChangeEventEmitter=new x,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions($)}dispose(){var $;($=this.diffAlgorithmOnDidChangeSubscription)===null||$===void 0||$.dispose()}async computeDiff($,X,Y,Z){var Q,G;if(typeof this.diffAlgorithm!=="string")return this.diffAlgorithm.computeDiff($,X,Y,Z);if($.getLineCount()===1&&$.getLineMaxColumn(1)===1){if(X.getLineCount()===1&&X.getLineMaxColumn(1)===1)return{changes:[],identical:!0,quitEarly:!1,moves:[]};return{changes:[new $9(new f0(1,2),new f0(1,X.getLineCount()+1),[new v4($.getFullModelRange(),X.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]}}let q=JSON.stringify([$.uri.toString(),X.uri.toString()]),U=JSON.stringify([$.id,X.id,$.getAlternativeVersionId(),X.getAlternativeVersionId(),JSON.stringify(Y)]),z=zq.diffCache.get(q);if(z&&z.context===U)return z.result;let H=w5.create(),j=await this.editorWorkerService.computeDiff($.uri,X.uri,Y,this.diffAlgorithm),V=H.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:V,timedOut:(Q=j===null||j===void 0?void 0:j.quitEarly)!==null&&Q!==void 0?Q:!0,detectedMoves:Y.computeMoves?(G=j===null||j===void 0?void 0:j.moves.length)!==null&&G!==void 0?G:0:-1}),Z.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!j)throw Error("no diff result available");if(zq.diffCache.size>10)zq.diffCache.delete(zq.diffCache.keys().next().value);return zq.diffCache.set(q,{result:j,context:U}),j}setOptions($){var X;let Y=!1;if($.diffAlgorithm){if(this.diffAlgorithm!==$.diffAlgorithm){if((X=this.diffAlgorithmOnDidChangeSubscription)===null||X===void 0||X.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=$.diffAlgorithm,typeof $.diffAlgorithm!=="string")this.diffAlgorithmOnDidChangeSubscription=$.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire());Y=!0}}if(Y)this.onDidChangeEventEmitter.fire()}};yO.diffCache=new Map;yO=zq=q60([vS(1,U4),vS(2,f7)],yO)});function gq0(J,$,X){return{changes:J.changes.map((Y)=>new $9(Y.original,Y.modified,Y.innerChanges?Y.innerChanges.map((Z)=>pq0(Z,$,X)):void 0)),moves:J.moves,identical:J.identical,quitEarly:J.quitEarly}}function pq0(J,$,X){let{originalRange:Y,modifiedRange:Z}=J;if((Y.endColumn!==1||Z.endColumn!==1)&&Y.endColumn===$.getLineMaxColumn(Y.endLineNumber)&&Z.endColumn===X.getLineMaxColumn(Z.endLineNumber)&&Y.endLineNumber<$.getLineCount()&&Z.endLineNumber<X.getLineCount())Y=Y.setEndPosition(Y.endLineNumber+1,1),Z=Z.setEndPosition(Z.endLineNumber+1,1);return new v4(Y,Z)}class dB{static fromDiffResult(J){return new dB(J.changes.map(($)=>new bO($)),J.moves||[],J.identical,J.quitEarly)}constructor(J,$,X,Y){this.mappings=J,this.movedTexts=$,this.identical=X,this.quitEarly=Y}}class bO{constructor(J){this.lineRangeMapping=J}}class I2{static fromDiffs(J,$,X,Y,Z){let Q=$9.inverse(J,$,X),G=[];for(let q of Q){let U=q.original.startLineNumber,z=q.modified.startLineNumber,H=q.original.length,j=U===1&&z===1,V=U+H===$+1&&z+H===X+1;if((j||V)&&H>=Z+Y){if(j&&!V)H-=Z;if(V&&!j)U+=Z,z+=Z,H-=Z;G.push(new I2(U,z,H,0,0))}else if(H>=Z*2+Y)U+=Z,z+=Z,H-=Z*2,G.push(new I2(U,z,H,0,0))}return G}get originalUnchangedRange(){return f0.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return f0.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(J,$,X,Y,Z){this.originalLineNumber=J,this.modifiedLineNumber=$,this.lineCount=X,this._visibleLineCountTop=M1(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=M1(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=J1(this,(q)=>this.visibleLineCountTop.read(q)+this.visibleLineCountBottom.read(q)===this.lineCount&&!this.isDragged.read(q)),this.isDragged=M1(this,void 0);let Q=Math.max(Math.min(Y,this.lineCount),0),G=Math.max(Math.min(Z,this.lineCount-Y),0);KT(Y===Q),KT(Z===G),this._visibleLineCountTop.set(Q,void 0),this._visibleLineCountBottom.set(G,void 0)}setVisibleRanges(J,$){let X=[],Y=new _9(J.map((q)=>q.modified)).subtractFrom(this.modifiedUnchangedRange),Z=this.originalLineNumber,Q=this.modifiedLineNumber,G=this.modifiedLineNumber+this.lineCount;if(Y.ranges.length===0)this.showAll($),X.push(this);else{let q=0;for(let U of Y.ranges){let z=q===Y.ranges.length-1;q++;let H=(z?G:U.endLineNumberExclusive)-Q,j=new I2(Z,Q,H,0,0);j.setHiddenModifiedRange(U,$),X.push(j),Z=j.originalUnchangedRange.endLineNumberExclusive,Q=j.modifiedUnchangedRange.endLineNumberExclusive}}return X}shouldHideControls(J){return this._shouldHideControls.read(J)}getHiddenOriginalRange(J){return f0.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(J),this.lineCount-this._visibleLineCountTop.read(J)-this._visibleLineCountBottom.read(J))}getHiddenModifiedRange(J){return f0.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(J),this.lineCount-this._visibleLineCountTop.read(J)-this._visibleLineCountBottom.read(J))}setHiddenModifiedRange(J,$){let X=J.startLineNumber-this.modifiedLineNumber,Y=this.modifiedLineNumber+this.lineCount-J.endLineNumberExclusive;this.setState(X,Y,$)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(J=10,$){let X=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+J,X),$)}showMoreBelow(J=10,$){let X=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+J,X),$)}showAll(J){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),J)}showModifiedLine(J,$,X){let Y=J+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),Z=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-J;if($===0&&Y<Z||$===1)this._visibleLineCountTop.set(this._visibleLineCountTop.get()+Y,X);else this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+Z,X)}showOriginalLine(J,$,X){let Y=J-this.originalLineNumber,Z=this.originalLineNumber+this.lineCount-J;if($===0&&Y<Z||$===1)this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+Z-Y,this.getMaxVisibleLineCountTop()),X);else this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+Y-Z,this.getMaxVisibleLineCountBottom()),X)}collapseAll(J){this._visibleLineCountTop.set(0,J),this._visibleLineCountBottom.set(0,J)}setState(J,$,X){J=Math.max(Math.min(J,this.lineCount),0),$=Math.max(Math.min($,this.lineCount-J),0),this._visibleLineCountTop.set(J,X),this._visibleLineCountBottom.set($,X)}}function z60(J,$,X,Y){return}function H60(J,$,X,Y){return}var hq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},fq0=function(J,$){return function(X,Y){$(X,Y,J)}},xO;var gS=w(()=>{e1();_8();z0();P7();U60();d$();N9();rw();SQ();lV();wE();aw();V1();WX();xO=class extends m{setActiveMovedText($){this._activeMovedText.set($,void 0)}constructor($,X,Y){super();this.model=$,this._options=X,this._diffProviderFactoryService=Y,this._isDiffUpToDate=M1(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=M1(this,void 0),this.diff=this._diff,this._unchangedRegions=M1(this,void 0),this.unchangedRegions=J1(this,(q)=>{var U,z;if(this._options.hideUnchangedRegions.read(q))return(z=(U=this._unchangedRegions.read(q))===null||U===void 0?void 0:U.regions)!==null&&z!==void 0?z:[];else return y6((H)=>{var j;for(let V of((j=this._unchangedRegions.get())===null||j===void 0?void 0:j.regions)||[])V.collapseAll(H)}),[]}),this.movedTextToCompare=M1(this,void 0),this._activeMovedText=M1(this,void 0),this._hoveredMovedText=M1(this,void 0),this.activeMovedText=J1(this,(q)=>{var U,z;return(z=(U=this.movedTextToCompare.read(q))!==null&&U!==void 0?U:this._hoveredMovedText.read(q))!==null&&z!==void 0?z:this._activeMovedText.read(q)}),this._cancellationTokenSource=new L5,this._diffProvider=J1(this,(q)=>{let U=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(q)}),z=H9("onDidChange",U.onDidChange);return{diffProvider:U,onChangeSignal:z}}),this._register(N0(()=>this._cancellationTokenSource.cancel()));let Z=VS("contentChangedSignal"),Q=this._register(new H6(()=>Z.trigger(void 0),200));this._register(w1((q)=>{let U=this._unchangedRegions.read(q);if(!U||U.regions.some((B)=>B.isDragged.read(q)))return;let z=U.originalDecorationIds.map((B)=>$.original.getDecorationRange(B)).map((B)=>B?f0.fromRangeInclusive(B):void 0),H=U.modifiedDecorationIds.map((B)=>$.modified.getDecorationRange(B)).map((B)=>B?f0.fromRangeInclusive(B):void 0),j=U.regions.map((B,K)=>!z[K]||!H[K]?void 0:new I2(z[K].startLineNumber,H[K].startLineNumber,z[K].length,B.visibleLineCountTop.read(q),B.visibleLineCountBottom.read(q))).filter(OY),V=[],W=!1;for(let B of kq(j,(K,P)=>K.getHiddenModifiedRange(q).endLineNumberExclusive===P.getHiddenModifiedRange(q).startLineNumber))if(B.length>1){W=!0;let K=B.reduce((A,D)=>A+D.lineCount,0),P=new I2(B[0].originalLineNumber,B[0].modifiedLineNumber,K,B[0].visibleLineCountTop.get(),B[B.length-1].visibleLineCountBottom.get());V.push(P)}else V.push(B[0]);if(W){let B=$.original.deltaDecorations(U.originalDecorationIds,V.map((P)=>({range:P.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),K=$.modified.deltaDecorations(U.modifiedDecorationIds,V.map((P)=>({range:P.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));y6((P)=>{this._unchangedRegions.set({regions:V,originalDecorationIds:B,modifiedDecorationIds:K},P)})}}));let G=(q,U,z)=>{let H=I2.fromDiffs(q.changes,$.original.getLineCount(),$.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(z),this._options.hideUnchangedRegionsContextLineCount.read(z)),j=void 0,V=this._unchangedRegions.get();if(V){let P=V.originalDecorationIds.map((R)=>$.original.getDecorationRange(R)).map((R)=>R?f0.fromRangeInclusive(R):void 0),A=V.modifiedDecorationIds.map((R)=>$.modified.getDecorationRange(R)).map((R)=>R?f0.fromRangeInclusive(R):void 0),M=s10(V.regions.map((R,O)=>{if(!P[O]||!A[O])return;let N=P[O].length;return new I2(P[O].startLineNumber,A[O].startLineNumber,N,Math.min(R.visibleLineCountTop.get(),N),Math.min(R.visibleLineCountBottom.get(),N-R.visibleLineCountTop.get()))}).filter(OY),(R,O)=>!O||R.modifiedLineNumber>=O.modifiedLineNumber+O.lineCount&&R.originalLineNumber>=O.originalLineNumber+O.lineCount).map((R)=>new w8(R.getHiddenOriginalRange(z),R.getHiddenModifiedRange(z)));M=w8.clip(M,f0.ofLength(1,$.original.getLineCount()),f0.ofLength(1,$.modified.getLineCount())),j=w8.inverse(M,$.original.getLineCount(),$.modified.getLineCount())}let W=[];if(j)for(let P of H){let A=j.filter((D)=>D.original.intersectsStrict(P.originalUnchangedRange)&&D.modified.intersectsStrict(P.modifiedUnchangedRange));W.push(...P.setVisibleRanges(A,U))}else W.push(...H);let B=$.original.deltaDecorations((V===null||V===void 0?void 0:V.originalDecorationIds)||[],W.map((P)=>({range:P.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),K=$.modified.deltaDecorations((V===null||V===void 0?void 0:V.modifiedDecorationIds)||[],W.map((P)=>({range:P.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:W,originalDecorationIds:B,modifiedDecorationIds:K},U)};this._register($.modified.onDidChangeContent((q)=>{if(this._diff.get()){let z=yJ.fromModelContentChanges(q.changes),H=H60(this._lastDiff,z,$.original,$.modified);if(H)this._lastDiff=H,y6((j)=>{this._diff.set(dB.fromDiffResult(this._lastDiff),j),G(H,j);let V=this.movedTextToCompare.get();this.movedTextToCompare.set(V?this._lastDiff.moves.find((W)=>W.lineRangeMapping.modified.intersect(V.lineRangeMapping.modified)):void 0,j)})}this._isDiffUpToDate.set(!1,void 0),Q.schedule()})),this._register($.original.onDidChangeContent((q)=>{if(this._diff.get()){let z=yJ.fromModelContentChanges(q.changes),H=z60(this._lastDiff,z,$.original,$.modified);if(H)this._lastDiff=H,y6((j)=>{this._diff.set(dB.fromDiffResult(this._lastDiff),j),G(H,j);let V=this.movedTextToCompare.get();this.movedTextToCompare.set(V?this._lastDiff.moves.find((W)=>W.lineRangeMapping.modified.intersect(V.lineRangeMapping.modified)):void 0,j)})}this._isDiffUpToDate.set(!1,void 0),Q.schedule()})),this._register(u7(async(q,U)=>{var z,H;this._options.hideUnchangedRegionsMinimumLineCount.read(q),this._options.hideUnchangedRegionsContextLineCount.read(q),Q.cancel(),Z.read(q);let j=this._diffProvider.read(q);j.onChangeSignal.read(q),s4(ZV,q),s4(YV,q),this._isDiffUpToDate.set(!1,void 0);let V=[];U.add($.original.onDidChangeContent((K)=>{let P=yJ.fromModelContentChanges(K.changes);V=zz(V,P)}));let W=[];U.add($.modified.onDidChangeContent((K)=>{let P=yJ.fromModelContentChanges(K.changes);W=zz(W,P)}));let B=await j.diffProvider.computeDiff($.original,$.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(q),maxComputationTimeMs:this._options.maxComputationTimeMs.read(q),computeMoves:this._options.showMoves.read(q)},this._cancellationTokenSource.token);if(this._cancellationTokenSource.token.isCancellationRequested)return;B=gq0(B,$.original,$.modified),B=(z=z60(B,V,$.original,$.modified))!==null&&z!==void 0?z:B,B=(H=H60(B,W,$.original,$.modified))!==null&&H!==void 0?H:B,y6((K)=>{G(B,K),this._lastDiff=B;let P=dB.fromDiffResult(B);this._diff.set(P,K),this._isDiffUpToDate.set(!0,K);let A=this.movedTextToCompare.get();this.movedTextToCompare.set(A?this._lastDiff.moves.find((D)=>D.lineRangeMapping.modified.intersect(A.lineRangeMapping.modified)):void 0,K)})}))}ensureModifiedLineIsVisible($,X,Y){var Z,Q;if(((Z=this.diff.get())===null||Z===void 0?void 0:Z.mappings.length)===0)return;let G=((Q=this._unchangedRegions.get())===null||Q===void 0?void 0:Q.regions)||[];for(let q of G)if(q.getHiddenModifiedRange(void 0).contains($)){q.showModifiedLine($,X,Y);return}}ensureOriginalLineIsVisible($,X,Y){var Z,Q;if(((Z=this.diff.get())===null||Z===void 0?void 0:Z.mappings.length)===0)return;let G=((Q=this._unchangedRegions.get())===null||Q===void 0?void 0:Q.regions)||[];for(let q of G)if(q.getHiddenOriginalRange(void 0).contains($)){q.showOriginalLine($,X,Y);return}}async waitForDiff(){await jS(this.isDiffUpToDate,($)=>$)}serializeState(){let $=this._unchangedRegions.get();return{collapsedRegions:$===null||$===void 0?void 0:$.regions.map((X)=>({range:X.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState($){var X;let Y=(X=$.collapsedRegions)===null||X===void 0?void 0:X.map((Q)=>f0.deserialize(Q.range)),Z=this._unchangedRegions.get();if(!Z||!Y)return;y6((Q)=>{for(let G of Z.regions)for(let q of Y)if(G.modifiedUnchangedRange.intersect(q)){G.setHiddenModifiedRange(q,Q);break}})}};xO=hq0([fq0(2,fS)],xO)});var pS;var j60=w(()=>{T0();S7();k5();z0();L1();I5();c0();pS=class pS extends m{get visibility(){return this._visibility}set visibility(J){if(this._visibility!==J)this._visibility=J,this._diffActions.style.visibility=J?"visible":"hidden"}constructor(J,$,X,Y,Z,Q,G,q,U){super();this._getViewZoneId=J,this._marginDomNode=$,this._modifiedEditor=X,this._diff=Y,this._editor=Z,this._viewLineCounts=Q,this._originalTextModel=G,this._contextMenuService=q,this._clipboardService=U,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=h0.asClassName(F0.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";let z=this._modifiedEditor.getOption(66);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${z}px`,this._diffActions.style.lineHeight=`${z}px`,this._marginDomNode.appendChild(this._diffActions);let H=0,j=X.getOption(126)&&!A4,V=(W,B)=>{var K;this._contextMenuService.showContextMenu({domForShadowRoot:j?(K=X.getDomNode())!==null&&K!==void 0?K:void 0:void 0,getAnchor:()=>({x:W,y:B}),getActions:()=>{let P=[],A=Y.modified.isEmpty;if(P.push(new J9("diff.clipboard.copyDeletedContent",A?Y.original.length>1?F("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):F("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):Y.original.length>1?F("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):F("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{let M=this._originalTextModel.getValueInRange(Y.original.toExclusiveRange());await this._clipboardService.writeText(M)})),Y.original.length>1)P.push(new J9("diff.clipboard.copyDeletedLineContent",A?F("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",Y.original.startLineNumber+H):F("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",Y.original.startLineNumber+H),void 0,!0,async()=>{let M=this._originalTextModel.getLineContent(Y.original.startLineNumber+H);if(M==="")M=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`;await this._clipboardService.writeText(M)}));if(!X.getOption(90))P.push(new J9("diff.inline.revertChange",F("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)}));return P},autoSelectFirstItem:!0})};this._register(q6(this._diffActions,"mousedown",(W)=>{if(!W.leftButton)return;let{top:B,height:K}=g5(this._diffActions),P=Math.floor(z/3);W.preventDefault(),V(W.posx,B+K+P)})),this._register(X.onMouseMove((W)=>{if((W.target.type===8||W.target.type===5)&&W.target.detail.viewZoneId===this._getViewZoneId())H=this._updateLightBulbPosition(this._marginDomNode,W.event.browserEvent.y,z),this.visibility=!0;else this.visibility=!1})),this._register(X.onMouseDown((W)=>{if(!W.event.leftButton)return;if(W.target.type===8||W.target.type===5){if(W.target.detail.viewZoneId===this._getViewZoneId())W.event.preventDefault(),H=this._updateLightBulbPosition(this._marginDomNode,W.event.browserEvent.y,z),V(W.event.posx,W.event.posy+z)}}))}_updateLightBulbPosition(J,$,X){let{top:Y}=g5(J),Z=$-Y,Q=Math.floor(Z/X),G=Q*X;if(this._diffActions.style.top=`${G}px`,this._viewLineCounts){let q=0;for(let U=0;U<this._viewLineCounts.length;U++)if(q+=this._viewLineCounts[U],Q<q)return U}return Q}}});function B60(J,$,X,Y){S6(Y,$.fontInfo);let Z=X.length>0,Q=new dY(1e4),G=0,q=0,U=[];for(let V=0;V<J.lineTokens.length;V++){let W=V+1,B=J.lineTokens[V],K=J.lineBreakData[V],P=w9.filter(X,W,1,Number.MAX_SAFE_INTEGER);if(K){let A=0;for(let D of K.breakOffsets){let M=B.sliceAndInflate(A,D,0);G=Math.max(G,W60(q,M,w9.extractWrapped(P,A,D),Z,J.mightContainNonBasicASCII,J.mightContainRTL,$,Q)),q++,A=D}U.push(K.breakOffsets.length)}else U.push(1),G=Math.max(G,W60(q,B,P,Z,J.mightContainNonBasicASCII,J.mightContainRTL,$,Q)),q++}G+=$.scrollBeyondLastColumn;let z=Q.build(),H=V60?V60.createHTML(z):z;Y.innerHTML=H;let j=G*$.typicalHalfwidthCharacterWidth;return{heightInLines:q,minWidthInPx:j,viewLineCounts:U}}class mS{constructor(J,$,X,Y){this.lineTokens=J,this.lineBreakData=$,this.mightContainNonBasicASCII=X,this.mightContainRTL=Y}}class SO{static fromEditor(J){var $;let X=J.getOptions(),Y=X.get(50),Z=X.get(143);return new SO((($=J.getModel())===null||$===void 0?void 0:$.getOptions().tabSize)||0,Y,X.get(33),Y.typicalHalfwidthCharacterWidth,X.get(103),X.get(66),Z.decorationsWidth,X.get(116),X.get(98),X.get(93),X.get(51))}constructor(J,$,X,Y,Z,Q,G,q,U,z,H){this.tabSize=J,this.fontInfo=$,this.disableMonospaceOptimizations=X,this.typicalHalfwidthCharacterWidth=Y,this.scrollBeyondLastColumn=Z,this.lineHeight=Q,this.lineDecorationsWidth=G,this.stopRenderingLineAfter=q,this.renderWhitespace=U,this.renderControlCharacters=z,this.fontLigatures=H}}function W60(J,$,X,Y,Z,Q,G,q){if(q.appendString('<div class="view-line'),!Y)q.appendString(" char-delete");q.appendString('" style="top:'),q.appendString(String(J*G.lineHeight)),q.appendString('px;width:1000000px;">');let U=$.getLineContent(),z=V7.isBasicASCII(U,Z),H=V7.containsRTL(U,z,Q),j=jV(new K$(G.fontInfo.isMonospace&&!G.disableMonospaceOptimizations,G.fontInfo.canUseHalfwidthRightwardsArrow,U,!1,z,H,0,$,X,G.tabSize,0,G.fontInfo.spaceWidth,G.fontInfo.middotWidth,G.fontInfo.wsmiddotWidth,G.stopRenderingLineAfter,G.renderWhitespace,G.renderControlCharacters,G.fontLigatures!==x7.OFF,null),q);return q.appendString("</div>"),j.characterMapping.getHorizontalOffset(j.characterMapping.length)}var V60;var F60=w(()=>{kQ();HJ();O8();mG();mP();DU();NJ();V60=J4("diffEditorWidget",{createHTML:(J)=>J})});function A60(J,$,X,Y,Z,Q){let G=new I7(P60(J,Y)),q=new I7(P60($,Z)),U=J.getOption(66),z=$.getOption(66),H=[],j=0,V=0;function W(B,K){while(!0){let P=G.peek(),A=q.peek();if(P&&P.lineNumber>=B)P=void 0;if(A&&A.lineNumber>=K)A=void 0;if(!P&&!A)break;let D=P?P.lineNumber-j:Number.MAX_VALUE,M=A?A.lineNumber-V:Number.MAX_VALUE;if(D<M)G.dequeue(),A={lineNumber:P.lineNumber-j+V,heightInPx:0};else if(D>M)q.dequeue(),P={lineNumber:A.lineNumber-V+j,heightInPx:0};else G.dequeue(),q.dequeue();H.push({originalRange:f0.ofLength(P.lineNumber,1),modifiedRange:f0.ofLength(A.lineNumber,1),originalHeightInPx:U+P.heightInPx,modifiedHeightInPx:z+A.heightInPx,diff:void 0})}}for(let B of X){let M=function(R,O){var N,T,S,v;if(R<D||O<A)return;if(P)P=!1;else if(R===D||O===A)return;let l=new f0(D,R),f=new f0(A,O);if(l.isEmpty&&f.isEmpty)return;let h=(T=(N=G.takeWhile((b)=>b.lineNumber<R))===null||N===void 0?void 0:N.reduce((b,p)=>b+p.heightInPx,0))!==null&&T!==void 0?T:0,L=(v=(S=q.takeWhile((b)=>b.lineNumber<O))===null||S===void 0?void 0:S.reduce((b,p)=>b+p.heightInPx,0))!==null&&v!==void 0?v:0;H.push({originalRange:l,modifiedRange:f,originalHeightInPx:l.length*U+h,modifiedHeightInPx:f.length*z+L,diff:B.lineRangeMapping}),D=R,A=O},K=B.lineRangeMapping;W(K.original.startLineNumber,K.modified.startLineNumber);let P=!0,A=K.modified.startLineNumber,D=K.original.startLineNumber;if(Q)for(let R of K.innerChanges||[]){if(R.originalRange.startColumn>1&&R.modifiedRange.startColumn>1)M(R.originalRange.startLineNumber,R.modifiedRange.startLineNumber);let O=J.getModel(),N=R.originalRange.endLineNumber<=O.getLineCount()?O.getLineMaxColumn(R.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;if(R.originalRange.endColumn<N)M(R.originalRange.endLineNumber,R.modifiedRange.endLineNumber)}M(K.original.endLineNumberExclusive,K.modified.endLineNumberExclusive),j=K.original.endLineNumberExclusive,V=K.modified.endLineNumberExclusive}return W(Number.MAX_VALUE,Number.MAX_VALUE),H}function P60(J,$){let X=[],Y=[],Z=J.getOption(144).wrappingColumn!==-1,Q=J._getViewModel().coordinatesConverter,G=J.getOption(66);if(Z)for(let U=1;U<=J.getModel().getLineCount();U++){let z=Q.getModelLineViewLineCount(U);if(z>1)Y.push({lineNumber:U,heightInPx:G*(z-1)})}for(let U of J.getWhitespaces()){if($.has(U.id))continue;let z=U.afterLineNumber===0?0:Q.convertViewPositionToModelPosition(new g(U.afterLineNumber,1)).lineNumber;X.push({lineNumber:z,heightInPx:U.height})}return d10(X,Y,(U)=>U.lineNumber,(U,z)=>({lineNumber:U.lineNumber,heightInPx:U.heightInPx+z.heightInPx}))}var mq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},K60=function(J,$){return function(X,Y){$(X,Y,J)}},CO;var D60=w(()=>{T0();V1();e1();k5();z0();P7();I5();HJ();yS();gS();j60();F60();d$();N9();NJ();NB();IZ();CO=class extends m{constructor($,X,Y,Z,Q,G,q,U,z,H){super();this._targetWindow=$,this._editors=X,this._diffModel=Y,this._options=Z,this._diffEditorWidget=Q,this._canIgnoreViewZoneUpdateEvent=G,this._origViewZonesToIgnore=q,this._modViewZonesToIgnore=U,this._clipboardService=z,this._contextMenuService=H,this._originalTopPadding=M1(this,0),this._originalScrollOffset=M1(this,0),this._originalScrollOffsetAnimated=KS(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=M1(this,0),this._modifiedScrollOffset=M1(this,0),this._modifiedScrollOffsetAnimated=KS(this._targetWindow,this._modifiedScrollOffset,this._store);let j=M1("invalidateAlignmentsState",0),V=this._register(new H6(()=>{j.set(j.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones((M)=>{if(!this._canIgnoreViewZoneUpdateEvent())V.schedule()})),this._register(this._editors.modified.onDidChangeViewZones((M)=>{if(!this._canIgnoreViewZoneUpdateEvent())V.schedule()})),this._register(this._editors.original.onDidChangeConfiguration((M)=>{if(M.hasChanged(144)||M.hasChanged(66))V.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration((M)=>{if(M.hasChanged(144)||M.hasChanged(66))V.schedule()}));let W=this._diffModel.map((M)=>M?g6(M.model.original.onDidChangeTokens,()=>M.model.original.tokenization.backgroundTokenizationState===2):void 0).map((M,R)=>M===null||M===void 0?void 0:M.read(R)),B=J1((M)=>{let R=this._diffModel.read(M),O=R===null||R===void 0?void 0:R.diff.read(M);if(!R||!O)return null;j.read(M);let T=this._options.renderSideBySide.read(M);return A60(this._editors.original,this._editors.modified,O.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,T)}),K=J1((M)=>{var R;let O=(R=this._diffModel.read(M))===null||R===void 0?void 0:R.movedTextToCompare.read(M);if(!O)return null;j.read(M);let N=O.changes.map((T)=>new bO(T));return A60(this._editors.original,this._editors.modified,N,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function P(){let M=document.createElement("div");return M.className="diagonal-fill",M}let A=this._register(new $0);this.viewZones=d4(this,(M,R)=>{var O,N,T,S,v,l,f,h;A.clear();let L=B.read(M)||[],b=[],p=[],d=this._modifiedTopPadding.read(M);if(d>0)p.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:d,showInHiddenAreas:!0,suppressMouseDown:!0});let s=this._originalTopPadding.read(M);if(s>0)b.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:s,showInHiddenAreas:!0,suppressMouseDown:!0});let c=this._options.renderSideBySide.read(M),i=!c?(O=this._editors.modified._getViewModel())===null||O===void 0?void 0:O.createLineBreaksComputer():void 0;if(i){let Q1=this._editors.original.getModel();for(let T1 of L)if(T1.diff)for(let r1=T1.originalRange.startLineNumber;r1<T1.originalRange.endLineNumberExclusive;r1++){if(r1>Q1.getLineCount())return{orig:b,mod:p};i===null||i===void 0||i.addRequest(Q1.getLineContent(r1),null,null)}}let J0=(N=i===null||i===void 0?void 0:i.finalize())!==null&&N!==void 0?N:[],W0=0,M0=this._editors.modified.getOption(66),X0=(T=this._diffModel.read(M))===null||T===void 0?void 0:T.movedTextToCompare.read(M),N1=(v=(S=this._editors.original.getModel())===null||S===void 0?void 0:S.mightContainNonBasicASCII())!==null&&v!==void 0?v:!1,o1=(f=(l=this._editors.original.getModel())===null||l===void 0?void 0:l.mightContainRTL())!==null&&f!==void 0?f:!1,E1=SO.fromEditor(this._editors.modified);for(let Q1 of L)if(Q1.diff&&!c){if(!Q1.originalRange.isEmpty){W.read(M);let r1=document.createElement("div");r1.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");let x6=this._editors.original.getModel();if(Q1.originalRange.endLineNumberExclusive-1>x6.getLineCount())return{orig:b,mod:p};let u0=new mS(Q1.originalRange.mapToLineArray((O5)=>x6.tokenization.getLineTokens(O5)),Q1.originalRange.mapToLineArray((O5)=>J0[W0++]),N1,o1),U5=[];for(let O5 of Q1.diff.innerChanges||[])U5.push(new fQ(O5.originalRange.delta(-(Q1.diff.original.startLineNumber-1)),cB.className,0));let v1=B60(u0,E1,U5,r1),S5=document.createElement("div");if(S5.className="inline-deleted-margin-view-zone",S6(S5,E1.fontInfo),this._options.renderIndicators.read(M))for(let O5=0;O5<v1.heightInLines;O5++){let W9=document.createElement("div");W9.className=`delete-sign ${h0.asClassName(TS)}`,W9.setAttribute("style",`position:absolute;top:${O5*M0}px;width:${E1.lineDecorationsWidth}px;height:${M0}px;right:0;`),S5.appendChild(W9)}let nJ=void 0;A.add(new pS(()=>zK(nJ),S5,this._editors.modified,Q1.diff,this._diffEditorWidget,v1.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let O5=0;O5<v1.viewLineCounts.length;O5++){let W9=v1.viewLineCounts[O5];if(W9>1)b.push({afterLineNumber:Q1.originalRange.startLineNumber+O5,domNode:P(),heightInPx:(W9-1)*M0,showInHiddenAreas:!0,suppressMouseDown:!0})}p.push({afterLineNumber:Q1.modifiedRange.startLineNumber-1,domNode:r1,heightInPx:v1.heightInLines*M0,minWidthInPx:v1.minWidthInPx,marginDomNode:S5,setZoneId(O5){nJ=O5},showInHiddenAreas:!0,suppressMouseDown:!0})}let T1=document.createElement("div");T1.className="gutter-delete",b.push({afterLineNumber:Q1.originalRange.endLineNumberExclusive-1,domNode:P(),heightInPx:Q1.modifiedHeightInPx,marginDomNode:T1,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let T1=Q1.modifiedHeightInPx-Q1.originalHeightInPx;if(T1>0){if(X0===null||X0===void 0?void 0:X0.lineRangeMapping.original.delta(-1).deltaLength(2).contains(Q1.originalRange.endLineNumberExclusive-1))continue;b.push({afterLineNumber:Q1.originalRange.endLineNumberExclusive-1,domNode:P(),heightInPx:T1,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let r1=function(){let u0=document.createElement("div");return u0.className="arrow-revert-change "+h0.asClassName(F0.arrowRight),R.add(r(u0,"mousedown",(U5)=>U5.stopPropagation())),R.add(r(u0,"click",(U5)=>{U5.stopPropagation(),Q.revert(Q1.diff)})),B0("div",{},u0)};if(X0===null||X0===void 0?void 0:X0.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(Q1.modifiedRange.endLineNumberExclusive-1))continue;let x6=void 0;if(Q1.diff&&Q1.diff.modified.isEmpty&&this._options.shouldRenderRevertArrows.read(M))x6=r1();p.push({afterLineNumber:Q1.modifiedRange.endLineNumberExclusive-1,domNode:P(),heightInPx:-T1,marginDomNode:x6,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(let Q1 of(h=K.read(M))!==null&&h!==void 0?h:[]){if(!(X0===null||X0===void 0?void 0:X0.lineRangeMapping.original.intersect(Q1.originalRange))||!(X0===null||X0===void 0?void 0:X0.lineRangeMapping.modified.intersect(Q1.modifiedRange)))continue;let T1=Q1.modifiedHeightInPx-Q1.originalHeightInPx;if(T1>0)b.push({afterLineNumber:Q1.originalRange.endLineNumberExclusive-1,domNode:P(),heightInPx:T1,showInHiddenAreas:!0,suppressMouseDown:!0});else p.push({afterLineNumber:Q1.modifiedRange.endLineNumberExclusive-1,domNode:P(),heightInPx:-T1,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:b,mod:p}});let D=!1;this._register(this._editors.original.onDidScrollChange((M)=>{if(M.scrollLeftChanged&&!D)D=!0,this._editors.modified.setScrollLeft(M.scrollLeft),D=!1})),this._register(this._editors.modified.onDidScrollChange((M)=>{if(M.scrollLeftChanged&&!D)D=!0,this._editors.original.setScrollLeft(M.scrollLeft),D=!1})),this._originalScrollTop=g6(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=g6(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(w1((M)=>{let R=this._originalScrollTop.read(M)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(M))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(M));if(R!==this._editors.modified.getScrollTop())this._editors.modified.setScrollTop(R,1)})),this._register(w1((M)=>{let R=this._modifiedScrollTop.read(M)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(M))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(M));if(R!==this._editors.original.getScrollTop())this._editors.original.setScrollTop(R,1)})),this._register(w1((M)=>{var R;let O=(R=this._diffModel.read(M))===null||R===void 0?void 0:R.movedTextToCompare.read(M),N=0;if(O){let T=this._editors.original.getTopForLineNumber(O.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();N=this._editors.modified.getTopForLineNumber(O.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-T}if(N>0)this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(N,void 0);else if(N<0)this._modifiedTopPadding.set(-N,void 0),this._originalTopPadding.set(0,void 0);else setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400);if(this._editors.modified.hasTextFocus())this._originalScrollOffset.set(this._modifiedScrollOffset.get()-N,void 0,!0);else this._modifiedScrollOffset.set(this._originalScrollOffset.get()+N,void 0,!0)}))}};CO=mq0([K60(8,N2),K60(9,S9)],CO)});var uq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},cq0=function(J,$){return function(X,Y){$(X,Y,J)}},fJ,uZ;var uS=w(()=>{T0();z0();P7();d$();i8();G5();uZ=fJ=class extends m{constructor($,X,Y,Z,Q,G,q){super();this._editors=$,this._rootElement=X,this._diffModel=Y,this._rootWidth=Z,this._rootHeight=Q,this._modifiedEditorLayoutInfo=G,this._themeService=q,this.width=fJ.ENTIRE_DIFF_OVERVIEW_WIDTH;let U=g6(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),z=J1((V)=>{let W=U.read(V),B=W.getColor(lc)||(W.getColor(uc)||JD).transparent(2),K=W.getColor(dc)||(W.getColor(cc)||$D).transparent(2);return{insertColor:B,removeColor:K}}),H=Y1(document.createElement("div"));H.setClassName("diffViewport"),H.setPosition("absolute");let j=n1("div.diffOverview",{style:{position:"absolute",top:"0px",width:fJ.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(fB(j,H.domNode)),this._register(q6(j,U0.POINTER_DOWN,(V)=>{this._editors.modified.delegateVerticalScrollbarPointerDown(V)})),this._register(r(j,U0.MOUSE_WHEEL,(V)=>{this._editors.modified.delegateScrollFromMouseWheelEvent(V)},{passive:!1})),this._register(fB(this._rootElement,j)),this._register(u7((V,W)=>{let B=this._diffModel.read(V),K=this._editors.original.createOverviewRuler("original diffOverviewRuler");if(K)W.add(K),W.add(fB(j,K.getDomNode()));let P=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(P)W.add(P),W.add(fB(j,P.getDomNode()));if(!K||!P)return;let A=H9("viewZoneChanged",this._editors.original.onDidChangeViewZones),D=H9("viewZoneChanged",this._editors.modified.onDidChangeViewZones),M=H9("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),R=H9("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);W.add(w1((O)=>{var N;A.read(O),D.read(O),M.read(O),R.read(O);let T=z.read(O),S=(N=B===null||B===void 0?void 0:B.diff.read(O))===null||N===void 0?void 0:N.mappings;function v(h,L,b){let p=b._getViewModel();if(!p)return[];return h.filter((d)=>d.length>0).map((d)=>{let s=p.coordinatesConverter.convertModelPositionToViewPosition(new g(d.startLineNumber,1)),c=p.coordinatesConverter.convertModelPositionToViewPosition(new g(d.endLineNumberExclusive,1)),i=c.lineNumber-s.lineNumber;return new cD(s.lineNumber,c.lineNumber,i,L.toString())})}let l=v((S||[]).map((h)=>h.lineRangeMapping.original),T.removeColor,this._editors.original),f=v((S||[]).map((h)=>h.lineRangeMapping.modified),T.insertColor,this._editors.modified);K===null||K===void 0||K.setZones(l),P===null||P===void 0||P.setZones(f)})),W.add(w1((O)=>{let N=this._rootHeight.read(O),T=this._rootWidth.read(O),S=this._modifiedEditorLayoutInfo.read(O);if(S){let v=fJ.ENTIRE_DIFF_OVERVIEW_WIDTH-2*fJ.ONE_OVERVIEW_WIDTH;K.setLayout({top:0,height:N,right:v+fJ.ONE_OVERVIEW_WIDTH,width:fJ.ONE_OVERVIEW_WIDTH}),P.setLayout({top:0,height:N,right:0,width:fJ.ONE_OVERVIEW_WIDTH});let l=this._editors.modifiedScrollTop.read(O),f=this._editors.modifiedScrollHeight.read(O),h=this._editors.modified.getOption(102),L=new zZ(h.verticalHasArrows?h.arrowSize:0,h.verticalScrollbarSize,0,S.height,f,l);H.setTop(L.getSliderPosition()),H.setHeight(L.getSliderSize())}else H.setTop(0),H.setHeight(0);j.style.height=N+"px",j.style.left=T-fJ.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",H.setWidth(fJ.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}};uZ.ONE_OVERVIEW_WIDTH=15;uZ.ENTIRE_DIFF_OVERVIEW_WIDTH=fJ.ONE_OVERVIEW_WIDTH*2;uZ=fJ=uq0([cq0(6,Q5)],uZ)});var sB;var R60=w(()=>{_0();z0();sB=class sB extends m{constructor(){super(...arguments);this._id=++sB.idCounter,this._onDidDispose=this._register(new x),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(J){return this._targetEditor.getVisibleColumnFromPosition(J)}getPosition(){return this._targetEditor.getPosition()}setPosition(J,$="api"){this._targetEditor.setPosition(J,$)}revealLine(J,$=0){this._targetEditor.revealLine(J,$)}revealLineInCenter(J,$=0){this._targetEditor.revealLineInCenter(J,$)}revealLineInCenterIfOutsideViewport(J,$=0){this._targetEditor.revealLineInCenterIfOutsideViewport(J,$)}revealLineNearTop(J,$=0){this._targetEditor.revealLineNearTop(J,$)}revealPosition(J,$=0){this._targetEditor.revealPosition(J,$)}revealPositionInCenter(J,$=0){this._targetEditor.revealPositionInCenter(J,$)}revealPositionInCenterIfOutsideViewport(J,$=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(J,$)}revealPositionNearTop(J,$=0){this._targetEditor.revealPositionNearTop(J,$)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(J,$="api"){this._targetEditor.setSelection(J,$)}setSelections(J,$="api"){this._targetEditor.setSelections(J,$)}revealLines(J,$,X=0){this._targetEditor.revealLines(J,$,X)}revealLinesInCenter(J,$,X=0){this._targetEditor.revealLinesInCenter(J,$,X)}revealLinesInCenterIfOutsideViewport(J,$,X=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(J,$,X)}revealLinesNearTop(J,$,X=0){this._targetEditor.revealLinesNearTop(J,$,X)}revealRange(J,$=0,X=!1,Y=!0){this._targetEditor.revealRange(J,$,X,Y)}revealRangeInCenter(J,$=0){this._targetEditor.revealRangeInCenter(J,$)}revealRangeInCenterIfOutsideViewport(J,$=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(J,$)}revealRangeNearTop(J,$=0){this._targetEditor.revealRangeNearTop(J,$)}revealRangeNearTopIfOutsideViewport(J,$=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(J,$)}revealRangeAtTop(J,$=0){this._targetEditor.revealRangeAtTop(J,$)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(J,$,X){this._targetEditor.trigger(J,$,X)}createDecorationsCollection(J){return this._targetEditor.createDecorationsCollection(J)}changeDecorations(J){return this._targetEditor.changeDecorations(J)}};sB.idCounter=0});var lq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},M60=function(J,$){return function(X,Y){$(X,Y,J)}},vO;var O60=w(()=>{_0();z0();P7();uS();O8();c0();s0();EJ();vO=class extends m{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor($,X,Y,Z,Q,G,q){super();this.originalEditorElement=$,this.modifiedEditorElement=X,this._options=Y,this._createInnerEditor=Q,this._instantiationService=G,this._keybindingService=q,this._onDidContentSizeChange=this._register(new x),this.original=this._register(this._createLeftHandSideEditor(Y.editorOptions.get(),Z.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(Y.editorOptions.get(),Z.modifiedEditor||{})),this.modifiedModel=g6(this.modified.onDidChangeModel,()=>this.modified.getModel()),this.modifiedScrollTop=g6(this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=g6(this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedSelections=g6(this.modified.onDidChangeCursorSelection,()=>{var U;return(U=this.modified.getSelections())!==null&&U!==void 0?U:[]}),this.modifiedCursor=g6(this.modified.onDidChangeCursorPosition,()=>{var U;return(U=this.modified.getPosition())!==null&&U!==void 0?U:new g(1,1)}),this._register(k2({createEmptyChangeSummary:()=>({}),handleChange:(U,z)=>{if(U.didChange(Y.editorOptions))Object.assign(z,U.change.changedOptions);return!0}},(U,z)=>{Y.editorOptions.read(U),this._options.renderSideBySide.read(U),this.modified.updateOptions(this._adjustOptionsForRightHandSide(U,z)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(U,z))}))}_createLeftHandSideEditor($,X){let Y=this._adjustOptionsForLeftHandSide(void 0,$),Z=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,Y,X);return Z.setContextValue("isInDiffLeftEditor",!0),Z}_createRightHandSideEditor($,X){let Y=this._adjustOptionsForRightHandSide(void 0,$),Z=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,Y,X);return Z.setContextValue("isInDiffRightEditor",!0),Z}_constructInnerEditor($,X,Y,Z){let Q=this._createInnerEditor($,X,Y,Z);return this._register(Q.onDidContentSizeChange((G)=>{let q=this.original.getContentWidth()+this.modified.getContentWidth()+uZ.ENTIRE_DIFF_OVERVIEW_WIDTH,U=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:U,contentWidth:q,contentHeightChanged:G.contentHeightChanged,contentWidthChanged:G.contentWidthChanged})})),Q}_adjustOptionsForLeftHandSide($,X){let Y=this._adjustOptionsForSubEditor(X);if(!this._options.renderSideBySide.get())Y.wordWrapOverride1="off",Y.wordWrapOverride2="off",Y.stickyScroll={enabled:!1},Y.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1};else Y.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},Y.wordWrapOverride1=this._options.diffWordWrap.get();if(Y.glyphMargin=this._options.renderSideBySide.get(),X.originalAriaLabel)Y.ariaLabel=X.originalAriaLabel;return Y.ariaLabel=this._updateAriaLabel(Y.ariaLabel),Y.readOnly=!this._options.originalEditable.get(),Y.dropIntoEditor={enabled:!Y.readOnly},Y.extraEditorClassName="original-in-monaco-diff-editor",Y}_adjustOptionsForRightHandSide($,X){let Y=this._adjustOptionsForSubEditor(X);if(X.modifiedAriaLabel)Y.ariaLabel=X.modifiedAriaLabel;return Y.ariaLabel=this._updateAriaLabel(Y.ariaLabel),Y.wordWrapOverride1=this._options.diffWordWrap.get(),Y.revealHorizontalRightPadding=$$.revealHorizontalRightPadding.defaultValue+uZ.ENTIRE_DIFF_OVERVIEW_WIDTH,Y.scrollbar.verticalHasArrows=!1,Y.extraEditorClassName="modified-in-monaco-diff-editor",Y}_adjustOptionsForSubEditor($){let X={...$,dimension:{height:0,width:0}};if(X.inDiffEditor=!0,X.automaticLayout=!1,X.scrollbar={...X.scrollbar||{}},X.folding=!1,X.codeLens=this._options.diffCodeLens.get(),X.fixedOverflowWidgets=!0,X.minimap={...X.minimap||{}},X.minimap.enabled=!1,this._options.hideUnchangedRegions.get())X.stickyScroll={enabled:!1};else X.stickyScroll=this._options.editorOptions.get().stickyScroll;return X}_updateAriaLabel($){var X;if(!$)$="";let Y=F("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(X=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||X===void 0?void 0:X.getAriaLabel());if(this._options.accessibilityVerbose.get())return $+Y;else if($)return $.replaceAll(Y,"");return""}};vO=lq0([M60(5,l0),M60(6,$5)],vO)});class cS{get editorOptions(){return this._options}constructor(J){this._diffEditorWidth=M1(this,0),this.couldShowInlineViewBecauseOfSize=J1(this,(X)=>this._options.read(X).renderSideBySide&&this._diffEditorWidth.read(X)<=this._options.read(X).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=J1(this,(X)=>this._options.read(X).renderOverviewRuler),this.renderSideBySide=J1(this,(X)=>this._options.read(X).renderSideBySide&&!(this._options.read(X).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(X))),this.readOnly=J1(this,(X)=>this._options.read(X).readOnly),this.shouldRenderRevertArrows=J1(this,(X)=>{if(!this._options.read(X).renderMarginRevertIcon)return!1;if(!this.renderSideBySide.read(X))return!1;if(this.readOnly.read(X))return!1;return!0}),this.renderIndicators=J1(this,(X)=>this._options.read(X).renderIndicators),this.enableSplitViewResizing=J1(this,(X)=>this._options.read(X).enableSplitViewResizing),this.splitViewDefaultRatio=J1(this,(X)=>this._options.read(X).splitViewDefaultRatio),this.ignoreTrimWhitespace=J1(this,(X)=>this._options.read(X).ignoreTrimWhitespace),this.maxComputationTimeMs=J1(this,(X)=>this._options.read(X).maxComputationTime),this.showMoves=J1(this,(X)=>this._options.read(X).experimental.showMoves&&this.renderSideBySide.read(X)),this.isInEmbeddedEditor=J1(this,(X)=>this._options.read(X).isInEmbeddedEditor),this.diffWordWrap=J1(this,(X)=>this._options.read(X).diffWordWrap),this.originalEditable=J1(this,(X)=>this._options.read(X).originalEditable),this.diffCodeLens=J1(this,(X)=>this._options.read(X).diffCodeLens),this.accessibilityVerbose=J1(this,(X)=>this._options.read(X).accessibilityVerbose),this.diffAlgorithm=J1(this,(X)=>this._options.read(X).diffAlgorithm),this.showEmptyDecorations=J1(this,(X)=>this._options.read(X).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=J1(this,(X)=>this._options.read(X).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=J1(this,(X)=>this._options.read(X).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=J1(this,(X)=>this._options.read(X).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=J1(this,(X)=>this._options.read(X).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=J1(this,(X)=>this._options.read(X).hideUnchangedRegions.minimumLineCount);let $={...J,..._60(J,b8)};this._options=M1(this,$)}updateOptions(J){let $=_60(J,this._options.get()),X={...this._options.get(),...J,...$};this._options.set(X,void 0,{changedOptions:J})}setWidth(J){this._diffEditorWidth.set(J,void 0)}}function _60(J,$){var X,Y,Z,Q,G,q,U,z;return{enableSplitViewResizing:k0(J.enableSplitViewResizing,$.enableSplitViewResizing),splitViewDefaultRatio:Bf(J.splitViewDefaultRatio,0.5,0.1,0.9),renderSideBySide:k0(J.renderSideBySide,$.renderSideBySide),renderMarginRevertIcon:k0(J.renderMarginRevertIcon,$.renderMarginRevertIcon),maxComputationTime:WQ(J.maxComputationTime,$.maxComputationTime,0,1073741824),maxFileSize:WQ(J.maxFileSize,$.maxFileSize,0,1073741824),ignoreTrimWhitespace:k0(J.ignoreTrimWhitespace,$.ignoreTrimWhitespace),renderIndicators:k0(J.renderIndicators,$.renderIndicators),originalEditable:k0(J.originalEditable,$.originalEditable),diffCodeLens:k0(J.diffCodeLens,$.diffCodeLens),renderOverviewRuler:k0(J.renderOverviewRuler,$.renderOverviewRuler),diffWordWrap:u6(J.diffWordWrap,$.diffWordWrap,["off","on","inherit"]),diffAlgorithm:u6(J.diffAlgorithm,$.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:k0(J.accessibilityVerbose,$.accessibilityVerbose),experimental:{showMoves:k0((X=J.experimental)===null||X===void 0?void 0:X.showMoves,$.experimental.showMoves),showEmptyDecorations:k0((Y=J.experimental)===null||Y===void 0?void 0:Y.showEmptyDecorations,$.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:k0((Q=(Z=J.hideUnchangedRegions)===null||Z===void 0?void 0:Z.enabled)!==null&&Q!==void 0?Q:(G=J.experimental)===null||G===void 0?void 0:G.collapseUnchangedRegions,$.hideUnchangedRegions.enabled),contextLineCount:WQ((q=J.hideUnchangedRegions)===null||q===void 0?void 0:q.contextLineCount,$.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:WQ((U=J.hideUnchangedRegions)===null||U===void 0?void 0:U.minimumLineCount,$.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:WQ((z=J.hideUnchangedRegions)===null||z===void 0?void 0:z.revealLineCount,$.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:k0(J.isInEmbeddedEditor,$.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:k0(J.onlyShowAccessibleDiffViewer,$.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:WQ(J.renderSideBySideInlineBreakpoint,$.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:k0(J.useInlineViewWhenSpaceIsLimited,$.useInlineViewWhenSpaceIsLimited)}}var N60=w(()=>{P7();iy();O8()});var lS,aB;var T60=w(()=>{T0();x3();k5();z0();P7();N9();i0();O9();c0();lS=class lS extends m{constructor(J,$,X,Y){super();this._editors=J,this._diffModel=$,this._options=X,this._widget=Y;let Z=[],Q=J1(this,(G)=>{let q=this._diffModel.read(G),U=q===null||q===void 0?void 0:q.diff.read(G);if(!U)return Z;let z=this._editors.modifiedSelections.read(G);if(z.every((W)=>W.isEmpty()))return Z;let H=new _9(z.map((W)=>f0.fromRangeInclusive(W))),V=U.mappings.filter((W)=>W.lineRangeMapping.innerChanges&&H.intersects(W.lineRangeMapping.modified)).map((W)=>({mapping:W,rangeMappings:W.lineRangeMapping.innerChanges.filter((B)=>z.some((K)=>k.areIntersecting(B.modifiedRange,K)))}));if(V.length===0||V.every((W)=>W.rangeMappings.length===0))return Z;return V});this._register(u7((G,q)=>{let U=this._diffModel.read(G),z=U===null||U===void 0?void 0:U.diff.read(G);if(!U||!z)return;if(this._diffModel.read(G).movedTextToCompare.read(G))return;if(!this._options.shouldRenderRevertArrows.read(G))return;let j=[],V=Q.read(G),W=new Set(V.map((B)=>B.mapping));if(V.length>0){let B=this._editors.modifiedSelections.read(G),K=q.add(new aB(B[B.length-1].positionLineNumber,this._widget,V.flatMap((P)=>P.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(K),j.push(K)}for(let B of z.mappings){if(W.has(B))continue;if(!B.lineRangeMapping.modified.isEmpty&&B.lineRangeMapping.innerChanges){let K=q.add(new aB(B.lineRangeMapping.modified.startLineNumber,this._widget,B.lineRangeMapping.innerChanges,!1));this._editors.modified.addGlyphMarginWidget(K),j.push(K)}}q.add(N0(()=>{for(let B of j)this._editors.modified.removeGlyphMarginWidget(B)}))}))}};aB=class aB extends m{getId(){return this._id}constructor(J,$,X,Y){super();this._lineNumber=J,this._widget=$,this._diffs=X,this._selection=Y,this._id=`revertButton${aB.counter++}`,this._domNode=n1("div.revertButton",{title:this._selection?F("revertSelectedChanges","Revert Selected Changes"):F("revertChange","Revert Change")},[Oz(F0.arrowRight)]).root,this._register(r(this._domNode,U0.MOUSE_DOWN,(Z)=>{if(Z.button!==2)Z.stopPropagation(),Z.preventDefault()})),this._register(r(this._domNode,U0.MOUSE_UP,(Z)=>{Z.stopPropagation(),Z.preventDefault()})),this._register(r(this._domNode,U0.CLICK,(Z)=>{this._widget.revertRangeMappings(this._diffs),Z.stopPropagation(),Z.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:S4.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};aB.counter=0});function sq0(J){return J.mappings.map(($)=>{let X=$.lineRangeMapping,Y,Z,Q,G,q=X.innerChanges;if(X.original.isEmpty)Y=X.original.startLineNumber-1,Z=0,q=void 0;else Y=X.original.startLineNumber,Z=X.original.endLineNumberExclusive-1;if(X.modified.isEmpty)Q=X.modified.startLineNumber-1,G=0,q=void 0;else Q=X.modified.startLineNumber,G=X.modified.endLineNumberExclusive-1;return{originalStartLineNumber:Y,originalEndLineNumber:Z,modifiedStartLineNumber:Q,modifiedEndLineNumber:G,charChanges:q===null||q===void 0?void 0:q.map((U)=>({originalStartLineNumber:U.originalRange.startLineNumber,originalStartColumn:U.originalRange.startColumn,originalEndLineNumber:U.originalRange.endLineNumber,originalEndColumn:U.originalRange.endColumn,modifiedStartLineNumber:U.modifiedRange.startLineNumber,modifiedStartColumn:U.modifiedRange.startColumn,modifiedEndLineNumber:U.modifiedRange.endLineNumber,modifiedEndColumn:U.modifiedRange.endColumn}))}})}var dq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},rB=function(J,$){return function(X,Y){$(X,Y,J)}},WH;var dS=w(()=>{T0();W$();O1();_0();z0();P7();CB();c10();L4();i9();NR();e10();Z60();Q60();G60();D60();NS();uS();d$();i0();UV();FZ();Zq();t1();s0();vW();R60();O60();N60();gS();T60();WH=class extends sB{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor($,X,Y,Z,Q,G,q,U){var z;super();this._domElement=$,this._parentContextKeyService=Z,this._parentInstantiationService=Q,this._audioCueService=q,this._editorProgressService=U,this.elements=n1("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[n1("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[B0("span",{},"No Changes")]),n1("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),n1("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),n1("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=M1(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=q0.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new b$([m0,this._contextKeyService])),this._boundarySashes=M1(this,void 0),this._accessibleDiffViewerShouldBeVisible=M1(this,!1),this._accessibleDiffViewerVisible=J1(this,(R)=>this._options.onlyShowAccessibleDiffViewer.read(R)?!0:this._accessibleDiffViewerShouldBeVisible.read(R)),this._movedBlocksLinesPart=M1(this,void 0),this._layoutInfo=J1(this,(R)=>{var O,N,T,S,v;let l=this._rootSizeObserver.width.read(R),f=this._rootSizeObserver.height.read(R),h=(O=this._sash.read(R))===null||O===void 0?void 0:O.sashLeft.read(R),L=h!==null&&h!==void 0?h:Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),b=l-L-((T=(N=this._overviewRulerPart.read(R))===null||N===void 0?void 0:N.width)!==null&&T!==void 0?T:0),p=(v=(S=this._movedBlocksLinesPart.read(R))===null||S===void 0?void 0:S.width.read(R))!==null&&v!==void 0?v:0,d=L-p;return this.elements.original.style.width=d+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=b+"px",this.elements.modified.style.left=L+"px",this._editors.original.layout({width:d,height:f},!0),this._editors.modified.layout({width:b,height:f},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((R,O)=>R===null||R===void 0?void 0:R.diff.read(O)),this.onDidUpdateDiff=q0.fromObservableLight(this._diffValue),G.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(N0(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new gB(this.elements.root,X.dimension)),this._rootSizeObserver.setAutomaticLayout((z=X.automaticLayout)!==null&&z!==void 0?z:!1),this._options=new cS(X),this._register(w1((R)=>{this._options.setWidth(this._rootSizeObserver.width.read(R))})),this._contextKeyService.createKey(Z0.isEmbeddedDiffEditor.key,!1),this._register(mB(Z0.isEmbeddedDiffEditor,this._contextKeyService,(R)=>this._options.isInEmbeddedEditor.read(R))),this._register(mB(Z0.comparingMovedCode,this._contextKeyService,(R)=>{var O;return!!((O=this._diffModel.read(R))===null||O===void 0?void 0:O.movedTextToCompare.read(R))})),this._register(mB(Z0.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,(R)=>this._options.couldShowInlineViewBecauseOfSize.read(R))),this._register(mB(Z0.hasChanges,this._contextKeyService,(R)=>{var O,N,T;return((T=(N=(O=this._diffModel.read(R))===null||O===void 0?void 0:O.diff.read(R))===null||N===void 0?void 0:N.mappings.length)!==null&&T!==void 0?T:0)>0})),this._editors=this._register(this._instantiationService.createInstance(vO,this.elements.original,this.elements.modified,this._options,Y,(R,O,N,T)=>this._createInnerEditor(R,O,N,T))),this._overviewRulerPart=qY(this,(R)=>!this._options.renderOverviewRuler.read(R)?void 0:this._instantiationService.createInstance(s4(uZ,R),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((O)=>O.modifiedEditor))).recomputeInitiallyAndOnChange(this._store),this._sash=qY(this,(R)=>{let O=this._options.renderSideBySide.read(R);return this.elements.root.classList.toggle("side-by-side",O),!O?void 0:new bS(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((N,T)=>{var S,v;return N-((v=(S=this._overviewRulerPart.read(T))===null||S===void 0?void 0:S.width)!==null&&v!==void 0?v:0)})},this._boundarySashes)}).recomputeInitiallyAndOnChange(this._store);let H=qY(this,(R)=>this._instantiationService.createInstance(s4(lB,R),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);qY(this,(R)=>this._instantiationService.createInstance(s4(xS,R),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);let j=new Set,V=new Set,W=!1,B=qY(this,(R)=>this._instantiationService.createInstance(s4(CO,R),O0(this._domElement),this._editors,this._diffModel,this._options,this,()=>W||H.get().isUpdatingHiddenAreas,j,V)).recomputeInitiallyAndOnChange(this._store),K=J1(this,(R)=>{let O=B.read(R).viewZones.read(R).orig,N=H.read(R).viewZones.read(R).origViewZones;return O.concat(N)}),P=J1(this,(R)=>{let O=B.read(R).viewZones.read(R).mod,N=H.read(R).viewZones.read(R).modViewZones;return O.concat(N)});this._register(VH(this._editors.original,K,(R)=>{W=R},j));let A;this._register(VH(this._editors.modified,P,(R)=>{if(W=R,W)A=vJ.capture(this._editors.modified);else A===null||A===void 0||A.restore(this._editors.modified),A=void 0},V)),this._accessibleDiffViewer=qY(this,(R)=>this._instantiationService.createInstance(s4(mZ,R),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(O,N)=>this._accessibleDiffViewerShouldBeVisible.set(O,N),this._options.onlyShowAccessibleDiffViewer.map((O)=>!O),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((O,N)=>{var T;return(T=O===null||O===void 0?void 0:O.diff.read(N))===null||T===void 0?void 0:T.mappings.map((S)=>S.lineRangeMapping)}),this._editors)).recomputeInitiallyAndOnChange(this._store);let D=this._accessibleDiffViewerVisible.map((R)=>R?"hidden":"visible");this._register(hJ(this.elements.modified,{visibility:D})),this._register(hJ(this.elements.original,{visibility:D})),this._createDiffEditorContributions(),G.addDiffEditor(this),this._register(E2(this._layoutInfo)),qY(this,(R)=>new(s4(UY,R))(this.elements.root,this._diffModel,this._layoutInfo.map((O)=>O.originalEditor),this._layoutInfo.map((O)=>O.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,(R)=>{this._movedBlocksLinesPart.set(R,void 0)}),this._register(hJ(this.elements.overlay,{width:this._layoutInfo.map((R,O)=>R.originalEditor.width+(this._options.renderSideBySide.read(O)?0:R.modifiedEditor.width)),visibility:J1((R)=>{var O,N;return this._options.hideUnchangedRegions.read(R)&&((N=(O=this._diffModel.read(R))===null||O===void 0?void 0:O.diff.read(R))===null||N===void 0?void 0:N.mappings.length)===0?"visible":"hidden"})})),this._register(q0.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(R)=>{var O,N;if((R===null||R===void 0?void 0:R.reason)===3){let T=(N=(O=this._diffModel.get())===null||O===void 0?void 0:O.diff.get())===null||N===void 0?void 0:N.mappings.find((S)=>S.lineRangeMapping.modified.contains(R.position.lineNumber));if(T===null||T===void 0?void 0:T.lineRangeMapping.modified.isEmpty)this._audioCueService.playAudioCue(q1.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"});else if(T===null||T===void 0?void 0:T.lineRangeMapping.original.isEmpty)this._audioCueService.playAudioCue(q1.diffLineInserted,{source:"diffEditor.cursorPositionChanged"});else if(T)this._audioCueService.playAudioCue(q1.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}));let M=this._diffModel.map(this,(R,O)=>{if(!R)return;return R.diff.read(O)===void 0&&!R.isDiffUpToDate.read(O)});this._register(u7((R,O)=>{if(M.read(R)===!0){let N=this._editorProgressService.show(!0,1000);O.add(N0(()=>N.done()))}})),this._register(N0(()=>{var R;if(this._shouldDisposeDiffModel)(R=this._diffModel.get())===null||R===void 0||R.dispose()})),this._register(new lS(this._editors,this._diffModel,this._options,this))}_createInnerEditor($,X,Y,Z){return $.createInstance(kZ,X,Y,Z)}_createDiffEditorContributions(){let $=LQ.getDiffEditorContributions();for(let X of $)try{this._register(this._instantiationService.createInstance(X.ctor,this))}catch(Y){$1(Y)}}get _targetEditor(){return this._editors.modified}getEditorType(){return vQ.IDiffEditor}layout($){this._rootSizeObserver.observe($)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var $;let X=this._editors.original.saveViewState(),Y=this._editors.modified.saveViewState();return{original:X,modified:Y,modelState:($=this._diffModel.get())===null||$===void 0?void 0:$.serializeState()}}restoreViewState($){var X;if($&&$.original&&$.modified){let Y=$;if(this._editors.original.restoreViewState(Y.original),this._editors.modified.restoreViewState(Y.modified),Y.modelState)(X=this._diffModel.get())===null||X===void 0||X.restoreSerializedState(Y.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel($){return this._instantiationService.createInstance(xO,$,this._options)}getModel(){var $,X;return(X=($=this._diffModel.get())===null||$===void 0?void 0:$.model)!==null&&X!==void 0?X:null}setModel($,X){if(!$&&this._diffModel.get())this._accessibleDiffViewer.get().close();let Y=$?"model"in $?{model:$,shouldDispose:!1}:{model:this.createViewModel($),shouldDispose:!0}:void 0;if(this._diffModel.get()!==(Y===null||Y===void 0?void 0:Y.model))Qq(X,(Z)=>{var Q;g6.batchEventsGlobally(Z,()=>{this._editors.original.setModel(Y?Y.model.model.original:null),this._editors.modified.setModel(Y?Y.model.model.modified:null)});let G=this._diffModel.get(),q=this._shouldDisposeDiffModel;if(this._shouldDisposeDiffModel=(Q=Y===null||Y===void 0?void 0:Y.shouldDispose)!==null&&Q!==void 0?Q:!1,this._diffModel.set(Y===null||Y===void 0?void 0:Y.model,Z),q)G===null||G===void 0||G.dispose()})}updateOptions($){this._options.updateOptions($)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var $;let X=($=this._diffModel.get())===null||$===void 0?void 0:$.diff.get();if(!X)return null;return sq0(X)}revert($){if($.innerChanges){this.revertRangeMappings($.innerChanges);return}let X=this._diffModel.get();if(!X||!X.isDiffUpToDate.get())return;this._editors.modified.executeEdits("diffEditor",[{range:$.modified.toExclusiveRange(),text:X.model.original.getValueInRange($.original.toExclusiveRange())}])}revertRangeMappings($){let X=this._diffModel.get();if(!X||!X.isDiffUpToDate.get())return;let Y=$.map((Z)=>({range:Z.modifiedRange,text:X.model.original.getValueInRange(Z.originalRange)}));this._editors.modified.executeEdits("diffEditor",Y)}_goTo($){this._editors.modified.setPosition(new g($.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter($.lineRangeMapping.modified.toExclusiveRange())}goToDiff($){var X,Y,Z,Q;let G=(Y=(X=this._diffModel.get())===null||X===void 0?void 0:X.diff.get())===null||Y===void 0?void 0:Y.mappings;if(!G||G.length===0)return;let q=this._editors.modified.getPosition().lineNumber,U;if($==="next")U=(Z=G.find((z)=>z.lineRangeMapping.modified.startLineNumber>q))!==null&&Z!==void 0?Z:G[0];else U=(Q=eG(G,(z)=>z.lineRangeMapping.modified.startLineNumber<q))!==null&&Q!==void 0?Q:G[G.length-1];if(this._goTo(U),U.lineRangeMapping.modified.isEmpty)this._audioCueService.playAudioCue(q1.diffLineDeleted,{source:"diffEditor.goToDiff"});else if(U.lineRangeMapping.original.isEmpty)this._audioCueService.playAudioCue(q1.diffLineInserted,{source:"diffEditor.goToDiff"});else if(U)this._audioCueService.playAudioCue(q1.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){let $=this._diffModel.get();if(!$)return;this.waitForDiff().then(()=>{var X;let Y=(X=$.diff.get())===null||X===void 0?void 0:X.mappings;if(!Y||Y.length===0)return;this._goTo(Y[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){let $=this._diffModel.get();if(!$)return;await $.waitForDiff()}mapToOtherSide(){var $,X;let Y=this._editors.modified.hasWidgetFocus(),Z=Y?this._editors.modified:this._editors.original,Q=Y?this._editors.original:this._editors.modified,G,q=Z.getSelection();if(q){let U=(X=($=this._diffModel.get())===null||$===void 0?void 0:$.diff.get())===null||X===void 0?void 0:X.mappings.map((z)=>Y?z.lineRangeMapping.flip():z.lineRangeMapping);if(U){let z=AS(q.getStartPosition(),U),H=AS(q.getEndPosition(),U);G=k.plusRange(z,H)}}return{destination:Q,destinationSelection:G}}switchSide(){let{destination:$,destinationSelection:X}=this.mapToOtherSide();if($.focus(),X)$.setSelection(X)}exitCompareMove(){let $=this._diffModel.get();if(!$)return;$.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var $;let X=($=this._diffModel.get())===null||$===void 0?void 0:$.unchangedRegions.get();if(!X)return;y6((Y)=>{for(let Z of X)Z.collapseAll(Y)})}showAllUnchangedRegions(){var $;let X=($=this._diffModel.get())===null||$===void 0?void 0:$.unchangedRegions.get();if(!X)return;y6((Y)=>{for(let Z of X)Z.showAll(Y)})}};WH=dq0([rB(3,m0),rB(4,l0),rB(5,X6),rB(6,l4),rB(7,xZ)],WH)});function rq0(J){if(!J){if(w60)return;w60=!0}fu(J||W1.document.body)}function aS(J,$,X,Y,Z){if(X=X||"",!Y){let Q=X.indexOf(`
`),G=X;if(Q!==-1)G=X.substring(0,Q);return L60(J,X,$.createByFilepathOrFirstLine(Z||null,G),Z)}return L60(J,X,$.createById(Y),Z)}function L60(J,$,X,Y){return J.createModel($,X,Y)}var sS=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},D6=function(J,$){return function(X,Y){$(X,Y,J)}},aq0=0,w60=!1,hO,fO,gO;var k60=w(()=>{gQ();z0();i9();NR();OO();OB();FJ();C7();H7();t1();IZ();s0();EJ();wZ();G5();P$();Zx();NB();vW();vY();I4();Xy();OJ();j7();f4();dS();Zq();N8();hO=class extends kZ{constructor($,X,Y,Z,Q,G,q,U,z,H,j,V){let W={...X};W.ariaLabel=W.ariaLabel||gW.editorViewAccessibleLabel,W.ariaLabel=W.ariaLabel+";"+gW.accessibilityHelpMessage;super($,W,{},Y,Z,Q,G,U,z,H,j,V);if(q instanceof T2)this._standaloneKeybindingService=q;else this._standaloneKeybindingService=null;rq0(W.ariaContainerElement)}addCommand($,X,Y){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let Z="DYNAMIC_"+ ++aq0,Q=E0.deserialize(Y);return this._standaloneKeybindingService.addDynamicKeybinding(Z,$,X,Q),Z}createContextKey($,X){return this._contextKeyService.createKey($,X)}addAction($){if(typeof $.id!=="string"||typeof $.label!=="string"||typeof $.run!=="function")throw Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),m.None;let{id:X,label:Y}=$,Z=E0.and(E0.equals("editorId",this.getId()),E0.deserialize($.precondition)),Q=$.keybindings,G=E0.and(Z,E0.deserialize($.keybindingContext)),q=$.contextMenuGroupId||null,U=$.contextMenuOrder||0,z=(W,...B)=>{return Promise.resolve($.run(this,...B))},H=new $0,j=this.getId()+":"+X;if(H.add(M6.registerCommand(j,z)),q){let W={command:{id:j,title:Y},when:Z,group:q,order:U};H.add(BX.appendMenuItem(y.EditorContext,W))}if(Array.isArray(Q))for(let W of Q)H.add(this._standaloneKeybindingService.addDynamicKeybinding(j,W,z,G));let V=new cV(j,Y,Y,void 0,Z,(...W)=>Promise.resolve($.run(this,...W)),this._contextKeyService);return this._actions.set(X,V),H.add(N0(()=>{this._actions.delete(X)})),H}_triggerCommand($,X){if(this._codeEditorService instanceof MW)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand($,X)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand($,X)}};hO=sS([D6(2,l0),D6(3,X6),D6(4,y5),D6(5,m0),D6(6,$5),D6(7,Q5),D6(8,K8),D6(9,a8),D6(10,C6),D6(11,D1)],hO);fO=class extends hO{constructor($,X,Y,Z,Q,G,q,U,z,H,j,V,W,B,K){let P={...X};IB(H,P,!1);let A=U.registerEditorContainer($);if(typeof P.theme==="string")U.setTheme(P.theme);if(typeof P.autoDetectHighContrast<"u")U.setAutoDetectHighContrast(Boolean(P.autoDetectHighContrast));let D=P.model;delete P.model;super($,P,Y,Z,Q,G,q,U,z,j,B,K);this._configurationService=H,this._standaloneThemeService=U,this._register(A);let M;if(typeof D>"u"){let R=W.getLanguageIdByMimeType(P.language)||P.language||m5;M=aS(V,W,P.value||"",R,void 0),this._ownsModel=!0}else M=D,this._ownsModel=!1;if(this._attachModel(M),M){let R={oldModelUrl:null,newModelUrl:M.uri};this._onDidChangeModel.fire(R)}}dispose(){super.dispose()}updateOptions($){if(IB(this._configurationService,$,!1),typeof $.theme==="string")this._standaloneThemeService.setTheme($.theme);if(typeof $.autoDetectHighContrast<"u")this._standaloneThemeService.setAutoDetectHighContrast(Boolean($.autoDetectHighContrast));super.updateOptions($)}_postDetachModelCleanup($){if(super._postDetachModelCleanup($),$&&this._ownsModel)$.dispose(),this._ownsModel=!1}};fO=sS([D6(2,l0),D6(3,X6),D6(4,y5),D6(5,m0),D6(6,$5),D6(7,U9),D6(8,K8),D6(9,g1),D6(10,a8),D6(11,E5),D6(12,j6),D6(13,C6),D6(14,D1)],fO);gO=class extends WH{constructor($,X,Y,Z,Q,G,q,U,z,H,j,V){let W={...X};IB(U,W,!0);let B=G.registerEditorContainer($);if(typeof W.theme==="string")G.setTheme(W.theme);if(typeof W.autoDetectHighContrast<"u")G.setAutoDetectHighContrast(Boolean(W.autoDetectHighContrast));super($,W,{},Z,Y,Q,V,H);this._configurationService=U,this._standaloneThemeService=G,this._register(B)}dispose(){super.dispose()}updateOptions($){if(IB(this._configurationService,$,!0),typeof $.theme==="string")this._standaloneThemeService.setTheme($.theme);if(typeof $.autoDetectHighContrast<"u")this._standaloneThemeService.setAutoDetectHighContrast(Boolean($.autoDetectHighContrast));super.updateOptions($)}_createInnerEditor($,X,Y){return $.createInstance(hO,X,Y)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand($,X,Y){return this.getModifiedEditor().addCommand($,X,Y)}createContextKey($,X){return this.getModifiedEditor().createContextKey($,X)}addAction($){return this.getModifiedEditor().addAction($)}};gO=sS([D6(2,l0),D6(3,m0),D6(4,X6),D6(5,U9),D6(6,K8),D6(7,g1),D6(8,S9),D6(9,xZ),D6(10,N2),D6(11,l4)],gO)});var E60=w(()=>{K0(".monaco-component.multiDiffEditor{background:var(--vscode-multiDiffEditor-background);overflow-y:hidden}.monaco-component .multiDiffEntry{border-bottom:1px solid var(--vscode-multiDiffEditor-border);flex-direction:column;flex:1;display:flex;overflow:hidden}.monaco-component .multiDiffEntry .collapse-button{cursor:pointer;margin:0 5px}.monaco-component .multiDiffEntry .collapse-button a{display:block}.monaco-component .multiDiffEntry .header{color:var(--vscode-foreground);background:var(--vscode-editor-background);z-index:1000;border-top:1px solid var(--vscode-multiDiffEditor-border);border-bottom:1px solid var(--vscode-sideBarSectionHeader-border);align-items:center;padding:8px 5px;display:flex}.monaco-component .multiDiffEntry .header.shadow{box-shadow:var(--vscode-scrollbar-shadow)0px 6px 6px -6px}.monaco-component .multiDiffEntry .header .file-path{flex:1;min-width:0;display:flex}.monaco-component .multiDiffEntry .header .file-path .title{font-size:14px;line-height:22px}.monaco-component .multiDiffEntry .header .file-path .status{opacity:.75;margin:0 10px;font-weight:600;line-height:22px}.monaco-component .multiDiffEntry .header .file-path .title.original{text-overflow:ellipsis;flex:1;min-width:0}.monaco-component .multiDiffEntry .header .actions{padding:0 8px}.monaco-component .multiDiffEntry .editorParent{flex-direction:column;flex:1;display:flex}.monaco-component .multiDiffEntry .editorContainer{flex:1}")});var I60=w(()=>{K0(".monaco-toolbar{height:100%}.monaco-toolbar .toolbar-toggle-more{padding:0;display:inline-block}")});var rS,iB;var y60=w(()=>{$Y();Nx();S7();k5();I5();_0();z0();I60();c0();rS=class rS extends m{constructor(J,$,X={orientation:0}){super();this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new vN),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new $0),this.options=X,this.lookupKeybindings=typeof this.options.getKeyBinding==="function",this.toggleMenuAction=this._register(new iB(()=>{var Y;return(Y=this.toggleMenuActionViewItem)===null||Y===void 0?void 0:Y.show()},X.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",J.appendChild(this.element),this.actionBar=this._register(new S8(this.element,{orientation:X.orientation,ariaLabel:X.ariaLabel,actionRunner:X.actionRunner,allowContextMenu:X.allowContextMenu,highlightToggledItems:X.highlightToggledItems,actionViewItemProvider:(Y,Z)=>{var Q;if(Y.id===iB.ID)return this.toggleMenuActionViewItem=new l3(Y,Y.menuActions,$,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:h0.asClassNameArray((Q=X.moreIcon)!==null&&Q!==void 0?Q:F0.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(X.actionViewItemProvider){let G=X.actionViewItemProvider(Y,Z);if(G)return G}if(Y instanceof fY){let G=new l3(Y,Y.actions,$,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Y.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry});return G.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(G),this.disposables.add(this._onDidChangeDropdownVisibility.add(G.onDidChangeVisibility)),G}return}}))}set actionRunner(J){this.actionBar.actionRunner=J}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(J){return this.actionBar.getAction(J)}setActions(J,$){this.clear();let X=J?J.slice(0):[];if(this.hasSecondaryActions=!!($&&$.length>0),this.hasSecondaryActions&&$)this.toggleMenuAction.menuActions=$.slice(0),X.push(this.toggleMenuAction);X.forEach((Y)=>{this.actionBar.push(Y,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(Y)})})}getKeybindingLabel(J){var $,X,Y;let Z=this.lookupKeybindings?(X=($=this.options).getKeyBinding)===null||X===void 0?void 0:X.call($,J):void 0;return(Y=Z===null||Z===void 0?void 0:Z.getLabel())!==null&&Y!==void 0?Y:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}};iB=class iB extends J9{constructor(J,$){$=$||F("moreActions","More Actions...");super(iB.ID,$,void 0,!0);this._menuActions=[],this.toggleDropdownMenu=J}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(J){this._menuActions=J}};iB.ID="toolbar.toggle.more"});var x60=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},zY=function(J,$){return function(X,Y){$(X,Y,J)}},iS,pO;var b60=w(()=>{T0();O4();y60();S7();V1();O1();_0();P4();z0();c0();OM();FJ();t1();IZ();EJ();_Q();iS=class extends rS{constructor($,X,Y,Z,Q,G,q){super($,Q,{getKeyBinding:(z)=>{var H;return(H=G.lookupKeybinding(z.id))!==null&&H!==void 0?H:void 0},...X,allowContextMenu:!0,skipTelemetry:typeof(X===null||X===void 0?void 0:X.telemetrySource)==="string"});this._options=X,this._menuService=Y,this._contextKeyService=Z,this._contextMenuService=Q,this._sessionDisposables=this._store.add(new $0);let U=X===null||X===void 0?void 0:X.telemetrySource;if(U)this._store.add(this.actionBar.onDidRun((z)=>q.publicLog2("workbenchActionExecuted",{id:z.action.id,from:U})))}setActions($,X=[],Y){var Z,Q,G;this._sessionDisposables.clear();let q=$.slice(),U=X.slice(),z=[],H=0,j=[],V=!1;if(((Z=this._options)===null||Z===void 0?void 0:Z.hiddenItemStrategy)!==-1)for(let W=0;W<q.length;W++){let B=q[W];if(!(B instanceof WJ)&&!(B instanceof xG))continue;if(!B.hideActions)continue;if(z.push(B.hideActions.toggle),B.hideActions.toggle.checked)H++;if(B.hideActions.isHidden){if(V=!0,q[W]=void 0,((Q=this._options)===null||Q===void 0?void 0:Q.hiddenItemStrategy)!==0)j[W]=B}}if(((G=this._options)===null||G===void 0?void 0:G.overflowBehavior)!==void 0){let W=Ct(new Set(this._options.overflowBehavior.exempted),A1.map(q,(P)=>P===null||P===void 0?void 0:P.id)),B=this._options.overflowBehavior.maxItems-W.size,K=0;for(let P=0;P<q.length;P++){let A=q[P];if(!A)continue;if(K++,W.has(A.id))continue;if(K>=B)q[P]=void 0,j[P]=A}}if(DN(q),DN(j),super.setActions(q,Z5.join(j,U)),z.length>0)this._sessionDisposables.add(r(this.getElement(),"contextmenu",(W)=>{var B,K,P,A,D;let M=new T8(O0(this.getElement()),W),R=this.getItemAction(M.target);if(!R)return;M.preventDefault(),M.stopPropagation();let O=!1;if(H===1&&((B=this._options)===null||B===void 0?void 0:B.hiddenItemStrategy)===0){O=!0;for(let S=0;S<z.length;S++)if(z[S].checked){z[S]=TG({id:R.id,label:R.label,checked:!0,enabled:!1,run(){}});break}}let N;if(!O&&(R instanceof WJ||R instanceof xG)){if(!R.hideActions)return;N=R.hideActions.hide}else N=TG({id:"label",label:F("hide","Hide"),enabled:!1,run(){}});let T=Z5.join([N],z);if(((K=this._options)===null||K===void 0?void 0:K.resetMenu)&&!Y)Y=[this._options.resetMenu];if(V&&Y)T.push(new Z5),T.push(TG({id:"resetThisMenu",label:F("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(Y)}));this._contextMenuService.showContextMenu({getAnchor:()=>M,getActions:()=>T,menuId:(P=this._options)===null||P===void 0?void 0:P.contextMenu,menuActionOptions:{renderShortTitle:!0,...(A=this._options)===null||A===void 0?void 0:A.menuOptions},skipTelemetry:typeof((D=this._options)===null||D===void 0?void 0:D.telemetrySource)==="string",contextKeyService:this._contextKeyService})}))}};iS=x60([zY(2,BJ),zY(3,m0),zY(4,S9),zY(5,$5),zY(6,f7)],iS);pO=class extends iS{constructor($,X,Y,Z,Q,G,q,U){super($,{resetMenu:X,...Y},Z,Q,G,q,U);this._onDidChangeMenuItems=this._store.add(new x);let z=this._store.add(Z.createMenu(X,Q,{emitEventsForSubmenuChanges:!0})),H=()=>{var j,V,W;let B=[],K=[];Tt(z,Y===null||Y===void 0?void 0:Y.menuOptions,{primary:B,secondary:K},(j=Y===null||Y===void 0?void 0:Y.toolbarOptions)===null||j===void 0?void 0:j.primaryGroup,(V=Y===null||Y===void 0?void 0:Y.toolbarOptions)===null||V===void 0?void 0:V.shouldInlineSubmenu,(W=Y===null||Y===void 0?void 0:Y.toolbarOptions)===null||W===void 0?void 0:W.useSeparatorsInPrimaryActions),$.classList.toggle("has-no-actions",B.length===0&&K.length===0),super.setActions(B,K)};this._store.add(z.onDidChange(()=>{H(),this._onDidChangeMenuItems.fire(this)})),H()}setActions(){throw new u1("This toolbar is populated from a menu.")}};pO=x60([zY(3,BJ),zY(4,m0),zY(5,S9),zY(6,$5),zY(7,f7)],pO)});var nS;var S60=w(()=>{S7();nS=class nS extends n9{constructor(J){super();this._getContext=J}runAction(J,$){return super.runAction(J,this._getContext())}}});class oS{constructor(J){this.viewModel=J}getId(){return this.viewModel}}function C60(J){return g6(($)=>{let X=new $0;return X.add(J.onDidFocusEditorWidget(()=>$(!0))),X.add(J.onDidBlurEditorWidget(()=>$(!1))),X},()=>J.hasWidgetFocus())}var iq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},nq0=function(J,$){return function(X,Y){$(X,Y,J)}},BH;var tS=w(()=>{T0();Eb();k5();z0();P7();Gq();dS();b60();FJ();s0();S60();BH=class extends m{constructor($,X,Y,Z){super();this._container=$,this._overflowWidgetsDomNode=X,this._workbenchUIElementFactory=Y,this._instantiationService=Z,this._viewModel=M1(this,void 0),this._collapsed=J1(this,(G)=>{var q;return(q=this._viewModel.read(G))===null||q===void 0?void 0:q.collapsed.read(G)}),this._editorContentHeight=M1(this,500),this.contentHeight=J1(this,(G)=>{return(this._collapsed.read(G)?0:this._editorContentHeight.read(G))+this._outerEditorHeight}),this._modifiedContentWidth=M1(this,0),this._modifiedWidth=M1(this,0),this._originalContentWidth=M1(this,0),this._originalWidth=M1(this,0),this.maxScroll=J1(this,(G)=>{let q=this._modifiedContentWidth.read(G)-this._modifiedWidth.read(G),U=this._originalContentWidth.read(G)-this._originalWidth.read(G);if(q>U)return{maxScroll:q,width:this._modifiedWidth.read(G)};else return{maxScroll:U,width:this._originalWidth.read(G)}}),this._elements=n1("div.multiDiffEntry",[n1("div.header@header",[n1("div.collapse-button@collapseButton"),n1("div.file-path",[n1("div.title.modified.show-file-icons@primaryPath",[]),n1("div.status.deleted@status",["R"]),n1("div.title.original.show-file-icons@secondaryPath",[])]),n1("div.actions@actions")]),n1("div.editorParent",[n1("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(WH,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=C60(this.editor.getModifiedEditor()),this.isOriginalFocused=C60(this.editor.getOriginalEditor()),this.isFocused=J1(this,(G)=>this.isModifedFocused.read(G)||this.isOriginalFocused.read(G)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new $0,this._headerHeight=38;let Q=new $H(this._elements.collapseButton,{});this._register(w1((G)=>{Q.element.className="",Q.icon=this._collapsed.read(G)?F0.chevronRight:F0.chevronDown})),this._register(Q.onDidClick(()=>{var G;(G=this._viewModel.get())===null||G===void 0||G.collapsed.set(!this._collapsed.get(),void 0)})),this._register(w1((G)=>{this._elements.editor.style.display=this._collapsed.read(G)?"none":"block"})),this.editor.getModifiedEditor().onDidLayoutChange((G)=>{let q=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(q,void 0)}),this.editor.getOriginalEditor().onDidLayoutChange((G)=>{let q=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(q,void 0)}),this._register(this.editor.onDidContentSizeChange((G)=>{zH((q)=>{this._editorContentHeight.set(G.contentHeight,q),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),q),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),q)})})),this._register(w1((G)=>{let q=this.isFocused.read(G);this._elements.root.classList.toggle("focused",q)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=38,this._register(this._instantiationService.createInstance(pO,this._elements.actions,y.MultiDiffEditorFileToolbar,{actionRunner:this._register(new nS(()=>{var G;return(G=this._viewModel.get())===null||G===void 0?void 0:G.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:(G)=>G.startsWith("navigation")}}))}setScrollLeft($){if(this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get())this.editor.getModifiedEditor().setScrollLeft($);else this.editor.getOriginalEditor().setScrollLeft($)}setData($){function X(Z){return{...Z,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}let Y=$.viewModel.entry.value;if(Y.onOptionsDidChange)this._dataStore.add(Y.onOptionsDidChange(()=>{var Z;this.editor.updateOptions(X((Z=Y.options)!==null&&Z!==void 0?Z:{}))}));zH((Z)=>{var Q,G,q,U;(Q=this._resourceLabel)===null||Q===void 0||Q.setUri((G=$.viewModel.modifiedUri)!==null&&G!==void 0?G:$.viewModel.originalUri,{strikethrough:$.viewModel.modifiedUri===void 0});let z=!1,H=!1,j=!1,V="";if($.viewModel.modifiedUri&&$.viewModel.originalUri&&$.viewModel.modifiedUri.path!==$.viewModel.originalUri.path)V="R",z=!0;else if(!$.viewModel.modifiedUri)V="D",H=!0;else if(!$.viewModel.originalUri)V="A",j=!0;this._elements.status.classList.toggle("renamed",z),this._elements.status.classList.toggle("deleted",H),this._elements.status.classList.toggle("added",j),this._elements.status.innerText=V,(q=this._resourceLabel2)===null||q===void 0||q.setUri(z?$.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set($.viewModel,Z),this.editor.setModel($.viewModel.diffEditorViewModel,Z),this.editor.updateOptions(X((U=Y.options)!==null&&U!==void 0?U:{}))})}render($,X,Y,Z){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${$.start}px`,this._elements.root.style.height=`${$.length}px`,this._elements.root.style.width=`${X}px`,this._elements.root.style.position="absolute";let Q=Math.max(0,Math.min($.length-this._headerHeight,Z.start-$.start));this._elements.header.style.transform=`translateY(${Q}px)`,zH((G)=>{this.editor.layout({width:X,height:$.length-this._outerEditorHeight})}),this.editor.getOriginalEditor().setScrollTop(Y),this._elements.header.classList.toggle("shadow",Q>0||Y>0)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};BH=iq0([nq0(3,l0)],BH)});class eS{constructor(J){this._create=J,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(J){var $;let X;if(this._unused.size===0)X=this._create(J),this._itemData.set(X,J);else{let Y=[...this._unused.values()];X=($=Y.find((Z)=>this._itemData.get(Z).getId()===J.getId()))!==null&&$!==void 0?$:Y[0],this._unused.delete(X),this._itemData.set(X,J),X.setData(J)}return this._used.add(X),{object:X,dispose:()=>{if(this._used.delete(X),this._unused.size>5)X.dispose();else this._unused.add(X)}}}dispose(){for(let J of this._used)J.dispose();for(let J of this._unused)J.dispose();this._used.clear(),this._unused.clear()}}var oq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},v60=function(J,$){return function(X,Y){$(X,Y,J)}},mO,h60;var f60=w(()=>{T0();L$();W$();z0();P7();Gq();dU();E60();d$();C4();s0();tS();t1();FZ();o5();mO=class extends m{constructor($,X,Y,Z,Q,G){super();this._element=$,this._dimension=X,this._viewModel=Y,this._workbenchUIElementFactory=Z,this._parentContextKeyService=Q,this._parentInstantiationService=G,this._elements=n1("div.monaco-component.multiDiffEditor",[n1("div@content",{style:{overflow:"hidden"}}),n1("div.monaco-editor@overflowWidgetsDomNode",{})]),this._sizeObserver=this._register(new gB(this._element,void 0)),this._objectPool=this._register(new eS((U)=>{let z=this._instantiationService.createInstance(BH,this._elements.content,this._elements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return z.setData(U),z})),this._scrollable=this._register(new kJ({forceIntegerValues:!1,scheduleAtNextAnimationFrame:(U)=>f5(O0(this._element),U),smoothScrollDuration:100})),this._scrollableElement=this._register(new HZ(this._elements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this.scrollTop=g6(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=g6(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItems=d4(this,(U,z)=>{let H=this._viewModel.read(U);if(!H)return[];return H.items.read(U).map((V)=>{var W;let B=z.add(new h60(V,this._objectPool,this.scrollLeft)),K=(W=this._lastDocStates)===null||W===void 0?void 0:W[B.getKey()];if(K)y6((P)=>{B.setViewState(K,P)});return B})}),this._spaceBetweenPx=10,this._totalHeight=this._viewItems.map(this,(U,z)=>U.reduce((H,j)=>H+j.contentHeight.read(z)+this._spaceBetweenPx,0)),this.activeDiffItem=J1(this,(U)=>this._viewItems.read(U).find((z)=>{var H;return(H=z.template.read(U))===null||H===void 0?void 0:H.isFocused.read(U)})),this.lastActiveDiffItem=BS((U,z)=>{var H;return(H=this.activeDiffItem.read(U))!==null&&H!==void 0?H:z}),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._parentInstantiationService.createChild(new b$([m0,this._contextKeyService])),this._lastDocStates={},this._contextKeyService.createKey(Z0.inMultiDiffEditor.key,!0),this._register(u7((U,z)=>{let H=this._viewModel.read(U);if(H&&H.contextKeys)for(let[j,V]of Object.entries(H.contextKeys)){let W=this._contextKeyService.createKey(j,void 0);W.set(V),z.add(N0(()=>W.reset()))}}));let q=this._parentContextKeyService.createKey(Z0.multiDiffEditorAllCollapsed.key,!1);this._register(w1((U)=>{let z=this._viewModel.read(U);if(z){let H=z.items.read(U).every((j)=>j.collapsed.read(U));q.set(H)}})),this._register(w1((U)=>{let z=this.lastActiveDiffItem.read(U);y6((H)=>{var j;(j=this._viewModel.read(U))===null||j===void 0||j.activeDiffItem.set(z===null||z===void 0?void 0:z.viewModel,H)})})),this._register(w1((U)=>{let z=this._dimension.read(U);this._sizeObserver.observe(z)})),this._elements.content.style.position="relative",this._register(w1((U)=>{let z=this._sizeObserver.height.read(U);this._elements.root.style.height=`${z}px`;let H=this._totalHeight.read(U);this._elements.content.style.height=`${H}px`;let j=this._sizeObserver.width.read(U),V=j,W=this._viewItems.read(U),B=Cw(W,(K)=>K.maxScroll.read(U).maxScroll);if(B){let K=B.maxScroll.read(U);V=j+K.maxScroll}this._scrollableElement.setScrollDimensions({width:j,height:z,scrollHeight:H,scrollWidth:V})})),$.replaceChildren(this._scrollableElement.getDomNode()),this._register(N0(()=>{$.replaceChildren()})),this._register(this._register(w1((U)=>{zH((z)=>{this.render(U)})})))}render($){let X=this.scrollTop.read($),Y=0,Z=0,Q=0,G=this._sizeObserver.height.read($),q=n0.ofStartAndLength(X,G),U=this._sizeObserver.width.read($);for(let z of this._viewItems.read($)){let H=z.contentHeight.read($),j=Math.min(H,G),V=n0.ofStartAndLength(Z,j),W=n0.ofStartAndLength(Q,H);if(W.isBefore(q))Y-=H-j,z.hide();else if(W.isAfter(q))z.hide();else{let B=Math.max(0,Math.min(q.start-W.start,H-j));Y-=B;let K=n0.ofStartAndLength(X+Y,G);z.render(V,B,U,K)}Z+=j+this._spaceBetweenPx,Q+=H+this._spaceBetweenPx}this._elements.content.style.transform=`translateY(${-(X+Y)}px)`}};mO=oq0([v60(4,m0),v60(5,l0)],mO);h60=class h60 extends m{constructor(J,$,X){super();this.viewModel=J,this._objectPool=$,this._scrollLeft=X,this._templateRef=this._register(qS(this,void 0)),this.contentHeight=J1(this,(Y)=>{var Z,Q,G;return(G=(Q=(Z=this._templateRef.read(Y))===null||Z===void 0?void 0:Z.object.contentHeight)===null||Q===void 0?void 0:Q.read(Y))!==null&&G!==void 0?G:this.viewModel.lastTemplateData.read(Y).contentHeight}),this.maxScroll=J1(this,(Y)=>{var Z,Q;return(Q=(Z=this._templateRef.read(Y))===null||Z===void 0?void 0:Z.object.maxScroll.read(Y))!==null&&Q!==void 0?Q:{maxScroll:0,scrollWidth:0}}),this.template=J1(this,(Y)=>{var Z;return(Z=this._templateRef.read(Y))===null||Z===void 0?void 0:Z.object}),this._isHidden=M1(this,!1),this._register(w1((Y)=>{var Z;let Q=this._scrollLeft.read(Y);(Z=this._templateRef.read(Y))===null||Z===void 0||Z.object.setScrollLeft(Q)})),this._register(w1((Y)=>{let Z=this._templateRef.read(Y);if(!Z)return;if(!this._isHidden.read(Y))return;if(Z.object.isFocused.read(Y))return;this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var J;return`VirtualViewItem(${(J=this.viewModel.entry.value.modified)===null||J===void 0?void 0:J.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(J,$){var X;this.viewModel.collapsed.set(J.collapsed,$),this._updateTemplateData($);let Y=this.viewModel.lastTemplateData.get(),Z=(X=J.selections)===null||X===void 0?void 0:X.map(p0.liftSelection);this.viewModel.lastTemplateData.set({...Y,selections:Z},$);let Q=this._templateRef.get();if(Q){if(Z)Q.object.editor.setSelections(Z)}}_updateTemplateData(J){var $;let X=this._templateRef.get();if(!X)return;this.viewModel.lastTemplateData.set({contentHeight:X.object.contentHeight.get(),selections:($=X.object.editor.getSelections())!==null&&$!==void 0?$:void 0},J)}_clear(){let J=this._templateRef.get();if(!J)return;y6(($)=>{this._updateTemplateData($),J.object.hide(),this._templateRef.set(void 0,$)})}hide(){this._isHidden.set(!0,void 0)}render(J,$,X,Y){this._isHidden.set(!1,void 0);let Z=this._templateRef.get();if(!Z){Z=this._objectPool.getUnusedObj(new oS(this.viewModel)),this._templateRef.set(Z,void 0);let Q=this.viewModel.lastTemplateData.get().selections;if(Q)Z.object.editor.setSelections(Q)}Z.object.render(J,X,$,Y)}}});var pq1,mq1,uq1;var g60=w(()=>{c0();i8();pq1=I("multiDiffEditor.headerBackground",{dark:"#808080",light:"#b4b4b4",hcDark:"#808080",hcLight:"#b4b4b4"},F("multiDiffEditor.headerBackground","The background color of the diff editor's header")),mq1=I("multiDiffEditor.background",{dark:"#000000",light:"#e5e5e5",hcDark:"#000000",hcLight:"#e5e5e5"},F("multiDiffEditor.background","The background color of the multi file diff editor")),uq1=I("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},F("multiDiffEditor.border","The border color of the multi file diff editor"))});var tq0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},eq0=function(J,$){return function(X,Y){$(X,Y,J)}},uO;var p60=w(()=>{z0();P7();d$();f60();s0();g60();tS();uO=class extends m{constructor($,X,Y){super();this._element=$,this._workbenchUIElementFactory=X,this._instantiationService=Y,this._dimension=M1(this,void 0),this._viewModel=M1(this,void 0),this._widgetImpl=d4(this,(Z,Q)=>{return s4(BH,Z),Q.add(this._instantiationService.createInstance(s4(mO,Z),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))}),this._register(E2(this._widgetImpl))}};uO=tq0([eq0(2,l0)],uO)});function JU0(J,$,X){return v0.initialize(X||{}).createInstance(fO,J,$)}function $U0(J){return v0.get(X6).onCodeEditorAdd((X)=>{J(X)})}function XU0(J){return v0.get(X6).onDiffEditorAdd((X)=>{J(X)})}function YU0(){return v0.get(X6).listCodeEditors()}function ZU0(){return v0.get(X6).listDiffEditors()}function QU0(J,$,X){return v0.initialize(X||{}).createInstance(gO,J,$)}function GU0(J,$){let X=v0.initialize($||{});return new uO(J,{},X)}function qU0(J){if(typeof J.id!=="string"||typeof J.run!=="function")throw Error("Invalid command descriptor, `id` and `run` are required properties!");return M6.registerCommand(J.id,J.run)}function UU0(J){if(typeof J.id!=="string"||typeof J.label!=="string"||typeof J.run!=="function")throw Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");let $=E0.deserialize(J.precondition),X=(Z,...Q)=>{return R9.runEditorCommand(Z,Q,$,(G,q,U)=>Promise.resolve(J.run(q,...U)))},Y=new $0;if(Y.add(M6.registerCommand(J.id,X)),J.contextMenuGroupId){let Z={command:{id:J.id,title:J.label},when:$,group:J.contextMenuGroupId,order:J.contextMenuOrder||0};Y.add(BX.appendMenuItem(y.EditorContext,Z))}if(Array.isArray(J.keybindings)){let Z=v0.get($5);if(!(Z instanceof T2))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{let Q=E0.and($,E0.deserialize(J.keybindingContext));Y.add(Z.addDynamicKeybindings(J.keybindings.map((G)=>{return{keybinding:G,command:J.id,when:Q}})))}}return Y}function zU0(J){return m60([J])}function m60(J){let $=v0.get($5);if(!($ instanceof T2))return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),m.None;return $.addDynamicKeybindings(J.map((X)=>{return{keybinding:X.keybinding,command:X.command,commandArgs:X.commandArgs,when:E0.deserialize(X.when)}}))}function HU0(J,$,X){let Y=v0.get(j6),Z=Y.getLanguageIdByMimeType($)||$;return aS(v0.get(E5),Y,J,Z,X)}function jU0(J,$){let X=v0.get(j6),Y=X.getLanguageIdByMimeType($)||$||m5;J.setLanguage(X.createById(Y))}function VU0(J,$,X){if(J)v0.get(f$).changeOne($,J.uri,X)}function WU0(J){v0.get(f$).changeAll(J,[])}function BU0(J){return v0.get(f$).read(J)}function FU0(J){return v0.get(f$).onMarkerChanged(J)}function KU0(J){return v0.get(E5).getModel(J)}function AU0(){return v0.get(E5).getModels()}function PU0(J){return v0.get(E5).onModelAdded(J)}function DU0(J){return v0.get(E5).onModelRemoved(J)}function RU0(J){return v0.get(E5).onModelLanguageChanged((X)=>{J({model:X.model,oldLanguage:X.oldLanguageId})})}function MU0(J){return Mu(v0.get(E5),v0.get(C6),J)}function OU0(J,$){let X=v0.get(j6),Y=v0.get(U9);return FV.colorizeElement(Y,X,J,$).then(()=>{Y.registerEditorContainer(J)})}function _U0(J,$,X){let Y=v0.get(j6);return v0.get(U9).registerEditorContainer(W1.document.body),FV.colorize(Y,J,$,X)}function NU0(J,$,X=4){return v0.get(U9).registerEditorContainer(W1.document.body),FV.colorizeModelLine(J,$,X)}function TU0(J){let $=$6.get(J);if($)return $;return{getInitialState:()=>hQ,tokenize:(X,Y,Z)=>gP(J,Z)}}function wU0(J,$){$6.getOrCreate($);let X=TU0($),Y=a9(J),Z=[],Q=X.getInitialState();for(let G=0,q=Y.length;G<q;G++){let U=Y[G],z=X.tokenize(U,!0,Q);Z[G]=z.tokens,Q=z.endState}return Z}function LU0(J,$){v0.get(U9).defineTheme(J,$)}function kU0(J){v0.get(U9).setTheme(J)}function EU0(){Kj.clearAllFontInfos()}function IU0(J,$){return M6.registerCommand({id:J,handler:$})}function yU0(J){return v0.get(oX).registerOpener({async open(X){if(typeof X==="string")X=C0.parse(X);return J.open(X)}})}function xU0(J){return v0.get(X6).registerCodeEditorOpenHandler(async(X,Y,Z)=>{var Q;if(!Y)return null;let G=(Q=X.options)===null||Q===void 0?void 0:Q.selection,q;if(G&&typeof G.endLineNumber==="number"&&typeof G.endColumn==="number")q=G;else if(G)q={lineNumber:G.startLineNumber,column:G.startColumn};if(await J.openCodeEditor(Y,X.resource,q))return Y;return null})}function u60(){return{create:JU0,getEditors:YU0,getDiffEditors:ZU0,onDidCreateEditor:$U0,onDidCreateDiffEditor:XU0,createDiffEditor:QU0,addCommand:qU0,addEditorAction:UU0,addKeybindingRule:zU0,addKeybindingRules:m60,createModel:HU0,setModelLanguage:jU0,setModelMarkers:VU0,getModelMarkers:BU0,removeAllMarkers:WU0,onDidChangeMarkers:FU0,getModels:AU0,getModel:KU0,onDidCreateModel:PU0,onWillDisposeModel:DU0,onDidChangeModelLanguage:RU0,createWebWorker:MU0,colorizeElement:OU0,colorize:_U0,colorizeModelLine:NU0,tokenize:wU0,defineTheme:LU0,setTheme:kU0,remeasureFonts:EU0,registerCommand:IU0,registerLinkOpener:yU0,registerEditorOpener:xU0,AccessibilitySupport:EK,ContentWidgetPositionPreference:CK,CursorChangeReason:vK,DefaultEndOfLine:hK,EditorAutoIndentStrategy:gK,EditorOption:pK,EndOfLinePreference:mK,EndOfLineSequence:uK,MinimapPosition:oK,MouseTargetType:tK,OverlayWidgetPositionPreference:eK,OverviewRulerLane:JA,GlyphMarginLane:cK,RenderLineNumbersType:XA,RenderMinimap:YA,ScrollbarVisibility:QA,ScrollType:ZA,TextEditorCursorBlinkingStyle:jA,TextEditorCursorStyle:VA,TrackedRangeStickiness:WA,WrappingIndent:BA,InjectedTextCursorStops:dK,PositionAffinity:$A,ShowLightbulbIconMode:qA,ConfigurationChangedEvent:$j,BareFontInfo:CY,FontInfo:iq,TextModelResolvedOptions:oG,FindMatch:rY,ApplyUpdateResult:zG,EditorZoom:jJ,createMultiFileDiffEditor:GU0,EditorType:vQ,EditorOptions:$$}}var c60=w(()=>{N8();z0();X1();V5();Ig();HT();L4();i9();_u();O8();Fj();EA();UV();c8();I4();j7();OJ();zV();O9();vY();FA();Cu();k60();OO();OB();FJ();C7();t1();EJ();dz();y3();p60()});function bU0(J,$){if(!$)return!1;if(!Array.isArray($))return!1;for(let X of $)if(!J(X))return!1;return!0}function cO(J,$){if(typeof J==="boolean")return J;return $}function l60(J,$){if(typeof J==="string")return J;return $}function SU0(J){let $={};for(let X of J)$[X]=!0;return $}function d60(J,$=!1){if($)J=J.map(function(Y){return Y.toLowerCase()});let X=SU0(J);if($)return function(Y){return X[Y.toLowerCase()]!==void 0&&X.hasOwnProperty(Y.toLowerCase())};else return function(Y){return X[Y]!==void 0&&X.hasOwnProperty(Y)}}function JC(J,$){$=$.replace(/@@/g,"\x01");let X=0,Y;do Y=!1,$=$.replace(/@(\w+)/g,function(Q,G){Y=!0;let q="";if(typeof J[G]==="string")q=J[G];else if(J[G]&&J[G]instanceof RegExp)q=J[G].source;else if(J[G]===void 0)throw U6(J,"language definition does not contain attribute '"+G+"', used at: "+$);else throw U6(J,"attribute reference '"+G+"' must be a string, used at: "+$);return Q3(q)?"":"(?:"+q+")"}),X++;while(Y&&X<5);$=$.replace(/\x01/g,"@");let Z=(J.ignoreCase?"i":"")+(J.unicode?"u":"");return new RegExp($,Z)}function CU0(J,$,X,Y){if(Y<0)return J;if(Y<$.length)return $[Y];if(Y>=100){Y=Y-100;let Z=X.split(".");if(Z.unshift(X),Y<Z.length)return Z[Y]}return null}function vU0(J,$,X,Y){let Z=-1,Q=X,G=X.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);if(G){if(G[3]){if(Z=parseInt(G[3]),G[2])Z=Z+100}Q=G[4]}let q="~",U=Q;if(!Q||Q.length===0)q="!=",U="";else if(/^\w*$/.test(U))q="==";else if(G=Q.match(/^(@|!@|~|!~|==|!=)(.*)$/),G)q=G[1],U=G[2];let z;if((q==="~"||q==="!~")&&/^(\w|\|)*$/.test(U)){let H=d60(U.split("|"),J.ignoreCase);z=function(j){return q==="~"?H(j):!H(j)}}else if(q==="@"||q==="!@"){let H=J[U];if(!H)throw U6(J,"the @ match target '"+U+"' is not defined, in rule: "+$);if(!bU0(function(V){return typeof V==="string"},H))throw U6(J,"the @ match target '"+U+"' must be an array of strings, in rule: "+$);let j=d60(H,J.ignoreCase);z=function(V){return q==="@"?j(V):!j(V)}}else if(q==="~"||q==="!~")if(U.indexOf("$")<0){let H=JC(J,"^"+U+"$");z=function(j){return q==="~"?H.test(j):!H.test(j)}}else z=function(H,j,V,W){return JC(J,"^"+OX(J,U,j,V,W)+"$").test(H)};else if(U.indexOf("$")<0){let H=MX(J,U);z=function(j){return q==="=="?j===H:j!==H}}else{let H=MX(J,U);z=function(j,V,W,B,K){let P=OX(J,H,V,W,B);return q==="=="?j===P:j!==P}}if(Z===-1)return{name:X,value:Y,test:function(H,j,V,W){return z(H,H,j,V,W)}};else return{name:X,value:Y,test:function(H,j,V,W){let B=CU0(H,j,V,Z);return z(!B?"":B,H,j,V,W)}}}function $C(J,$,X){if(!X)return{token:""};else if(typeof X==="string")return X;else if(X.token||X.token==="")if(typeof X.token!=="string")throw U6(J,"a 'token' attribute must be of type string, in rule: "+$);else{let Y={token:X.token};if(X.token.indexOf("$")>=0)Y.tokenSubst=!0;if(typeof X.bracket==="string")if(X.bracket==="@open")Y.bracket=1;else if(X.bracket==="@close")Y.bracket=-1;else throw U6(J,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+$);if(X.next)if(typeof X.next!=="string")throw U6(J,"the next state must be a string value in rule: "+$);else{let Z=X.next;if(!/^(@pop|@push|@popall)$/.test(Z)){if(Z[0]==="@")Z=Z.substr(1);if(Z.indexOf("$")<0){if(!Iu(J,OX(J,Z,"",[],"")))throw U6(J,"the next state '"+X.next+"' is not defined in rule: "+$)}}Y.next=Z}if(typeof X.goBack==="number")Y.goBack=X.goBack;if(typeof X.switchTo==="string")Y.switchTo=X.switchTo;if(typeof X.log==="string")Y.log=X.log;if(typeof X.nextEmbedded==="string")Y.nextEmbedded=X.nextEmbedded,J.usesEmbedded=!0;return Y}else if(Array.isArray(X)){let Y=[];for(let Z=0,Q=X.length;Z<Q;Z++)Y[Z]=$C(J,$,X[Z]);return{group:Y}}else if(X.cases){let Y=[];for(let Q in X.cases)if(X.cases.hasOwnProperty(Q)){let G=$C(J,$,X.cases[Q]);if(Q==="@default"||Q==="@"||Q==="")Y.push({test:void 0,value:G,name:Q});else if(Q==="@eos")Y.push({test:function(q,U,z,H){return H},value:G,name:Q});else Y.push(vU0(J,$,Q,G))}let Z=J.defaultToken;return{test:function(Q,G,q,U){for(let z of Y)if(!z.test||z.test(Q,G,q,U))return z.value;return Z}}}else throw U6(J,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+$)}class s60{constructor(J){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=J}setRegex(J,$){let X;if(typeof $==="string")X=$;else if($ instanceof RegExp)X=$.source;else throw U6(J,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=X.length>0&&X[0]==="^",this.name=this.name+": "+X,this.regex=JC(J,"^(?:"+(this.matchOnlyAtLineStart?X.substr(1):X)+")")}setAction(J,$){this.action=$C(J,this.name,$)}}function XC(J,$){if(!$||typeof $!=="object")throw Error("Monarch: expecting a language definition object");let X={};X.languageId=J,X.includeLF=cO($.includeLF,!1),X.noThrow=!1,X.maxStack=100,X.start=typeof $.start==="string"?$.start:null,X.ignoreCase=cO($.ignoreCase,!1),X.unicode=cO($.unicode,!1),X.tokenPostfix=l60($.tokenPostfix,"."+X.languageId),X.defaultToken=l60($.defaultToken,"source"),X.usesEmbedded=!1;let Y=$;Y.languageId=J,Y.includeLF=X.includeLF,Y.ignoreCase=X.ignoreCase,Y.unicode=X.unicode,Y.noThrow=X.noThrow,Y.usesEmbedded=X.usesEmbedded,Y.stateNames=$.tokenizer,Y.defaultToken=X.defaultToken;function Z(G,q,U){for(let z of U){let H=z.include;if(H){if(typeof H!=="string")throw U6(X,"an 'include' attribute must be a string at: "+G);if(H[0]==="@")H=H.substr(1);if(!$.tokenizer[H])throw U6(X,"include target '"+H+"' is not defined at: "+G);Z(G+"."+H,q,$.tokenizer[H])}else{let j=new s60(G);if(Array.isArray(z)&&z.length>=1&&z.length<=3)if(j.setRegex(Y,z[0]),z.length>=3)if(typeof z[1]==="string")j.setAction(Y,{token:z[1],next:z[2]});else if(typeof z[1]==="object"){let V=z[1];V.next=z[2],j.setAction(Y,V)}else throw U6(X,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+G);else j.setAction(Y,z[1]);else{if(!z.regex)throw U6(X,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+G);if(z.name){if(typeof z.name==="string")j.name=z.name}if(z.matchOnlyAtStart)j.matchOnlyAtLineStart=cO(z.matchOnlyAtLineStart,!1);j.setRegex(Y,z.regex),j.setAction(Y,z.action)}q.push(j)}}}if(!$.tokenizer||typeof $.tokenizer!=="object")throw U6(X,"a language definition must define the 'tokenizer' attribute as an object");X.tokenizer=[];for(let G in $.tokenizer)if($.tokenizer.hasOwnProperty(G)){if(!X.start)X.start=G;let q=$.tokenizer[G];X.tokenizer[G]=[],Z("tokenizer."+G,X.tokenizer[G],q)}if(X.usesEmbedded=Y.usesEmbedded,$.brackets){if(!Array.isArray($.brackets))throw U6(X,"the 'brackets' attribute must be defined as an array")}else $.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let Q=[];for(let G of $.brackets){let q=G;if(q&&Array.isArray(q)&&q.length===3)q={token:q[2],open:q[0],close:q[1]};if(q.open===q.close)throw U6(X,"open and close brackets in a 'brackets' attribute must be different: "+q.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof q.open==="string"&&typeof q.token==="string"&&typeof q.close==="string")Q.push({token:q.token+X.tokenPostfix,open:MX(X,q.open),close:MX(X,q.close)});else throw U6(X,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return X.brackets=Q,X.noThrow=!0,X}var a60=()=>{};function hU0(J){IQ.registerLanguage(J)}function fU0(){let J=[];return J=J.concat(IQ.getLanguages()),J}function gU0(J){return v0.get(j6).languageIdCodec.encodeLanguageId(J)}function pU0(J,$){return v0.withServices(()=>{let Y=v0.get(j6).onDidRequestRichLanguageFeatures((Z)=>{if(Z===J)Y.dispose(),$()});return Y})}function mU0(J,$){return v0.withServices(()=>{let Y=v0.get(j6).onDidRequestBasicLanguageFeatures((Z)=>{if(Z===J)Y.dispose(),$()});return Y})}function uU0(J,$){if(!v0.get(j6).isRegisteredLanguageId(J))throw Error(`Cannot set configuration for unknown language ${J}`);return v0.get(C6).register(J,$,100)}class r60{constructor(J,$){this._languageId=J,this._actual=$}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(J,$,X){if(typeof this._actual.tokenize==="function")return nB.adaptTokenize(this._languageId,this._actual,J,X);throw Error("Not supported!")}tokenizeEncoded(J,$,X){let Y=this._actual.tokenizeEncoded(J,X);return new DQ(Y.tokens,Y.endState)}}class nB{constructor(J,$,X,Y){this._languageId=J,this._actual=$,this._languageService=X,this._standaloneThemeService=Y}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(J,$){let X=[],Y=0;for(let Z=0,Q=J.length;Z<Q;Z++){let G=J[Z],q=G.startIndex;if(Z===0)q=0;else if(q<Y)q=Y;X[Z]=new UX(q,G.scopes,$),Y=q}return X}static adaptTokenize(J,$,X,Y){let Z=$.tokenize(X,Y),Q=nB._toClassicTokens(Z.tokens,J),G;if(Z.endState.equals(Y))G=Y;else G=Z.endState;return new MG(Q,G)}tokenize(J,$,X){return nB.adaptTokenize(this._languageId,this._actual,J,X)}_toBinaryTokens(J,$){let X=J.encodeLanguageId(this._languageId),Y=this._standaloneThemeService.getColorTheme().tokenTheme,Z=[],Q=0,G=0;for(let U=0,z=$.length;U<z;U++){let H=$[U],j=Y.match(X,H.scopes)|1024;if(Q>0&&Z[Q-1]===j)continue;let V=H.startIndex;if(U===0)V=0;else if(V<G)V=G;Z[Q++]=V,Z[Q++]=j,G=V}let q=new Uint32Array(Q);for(let U=0;U<Q;U++)q[U]=Z[U];return q}tokenizeEncoded(J,$,X){let Y=this._actual.tokenize(J,X),Z=this._toBinaryTokens(this._languageService.languageIdCodec,Y.tokens),Q;if(Y.endState.equals(X))Q=X;else Q=Y.endState;return new DQ(Z,Q)}}function cU0(J){return typeof J.getInitialState==="function"}function lU0(J){return"tokenizeEncoded"in J}function i60(J){return J&&typeof J.then==="function"}function dU0(J){let $=v0.get(U9);if(J){let X=[null];for(let Y=1,Z=J.length;Y<Z;Y++)X[Y]=n.fromHex(J[Y]);$.setColorMapOverride(X)}else $.setColorMapOverride(null)}function n60(J,$){if(lU0($))return new r60(J,$);else return new nB(J,$,v0.get(j6),v0.get(U9))}function YC(J,$){let X=new nN(async()=>{let Y=await Promise.resolve($.create());if(!Y)return null;if(cU0(Y))return n60(J,Y);return new G3(v0.get(j6),v0.get(U9),J,XC(J,Y),v0.get(g1))});return $6.registerFactory(J,X)}function sU0(J,$){if(!v0.get(j6).isRegisteredLanguageId(J))throw Error(`Cannot set tokens provider for unknown language ${J}`);if(i60($))return YC(J,{create:()=>$});return $6.register(J,n60(J,$))}function aU0(J,$){let X=(Y)=>{return new G3(v0.get(j6),v0.get(U9),J,XC(J,Y),v0.get(g1))};if(i60($))return YC(J,{create:()=>$});return $6.register(J,X($))}function rU0(J,$){return v0.get(D1).referenceProvider.register(J,$)}function iU0(J,$){return v0.get(D1).renameProvider.register(J,$)}function nU0(J,$){return v0.get(D1).signatureHelpProvider.register(J,$)}function oU0(J,$){return v0.get(D1).hoverProvider.register(J,{provideHover:(Y,Z,Q)=>{let G=Y.getWordAtPosition(Z);return Promise.resolve($.provideHover(Y,Z,Q)).then((q)=>{if(!q)return;if(!q.range&&G)q.range=new k(Z.lineNumber,G.startColumn,Z.lineNumber,G.endColumn);if(!q.range)q.range=new k(Z.lineNumber,Z.column,Z.lineNumber,Z.column);return q})}})}function tU0(J,$){return v0.get(D1).documentSymbolProvider.register(J,$)}function eU0(J,$){return v0.get(D1).documentHighlightProvider.register(J,$)}function Jz0(J,$){return v0.get(D1).linkedEditingRangeProvider.register(J,$)}function $z0(J,$){return v0.get(D1).definitionProvider.register(J,$)}function Xz0(J,$){return v0.get(D1).implementationProvider.register(J,$)}function Yz0(J,$){return v0.get(D1).typeDefinitionProvider.register(J,$)}function Zz0(J,$){return v0.get(D1).codeLensProvider.register(J,$)}function Qz0(J,$,X){return v0.get(D1).codeActionProvider.register(J,{providedCodeActionKinds:X===null||X===void 0?void 0:X.providedCodeActionKinds,documentation:X===null||X===void 0?void 0:X.documentation,provideCodeActions:(Z,Q,G,q)=>{let z=v0.get(f$).read({resource:Z.uri}).filter((H)=>{return k.areIntersectingOrTouching(H,Q)});return $.provideCodeActions(Z,Q,{markers:z,only:G.only,trigger:G.trigger},q)},resolveCodeAction:$.resolveCodeAction})}function Gz0(J,$){return v0.get(D1).documentFormattingEditProvider.register(J,$)}function qz0(J,$){return v0.get(D1).documentRangeFormattingEditProvider.register(J,$)}function Uz0(J,$){return v0.get(D1).onTypeFormattingEditProvider.register(J,$)}function zz0(J,$){return v0.get(D1).linkProvider.register(J,$)}function Hz0(J,$){return v0.get(D1).completionProvider.register(J,$)}function jz0(J,$){return v0.get(D1).colorProvider.register(J,$)}function Vz0(J,$){return v0.get(D1).foldingRangeProvider.register(J,$)}function Wz0(J,$){return v0.get(D1).declarationProvider.register(J,$)}function Bz0(J,$){return v0.get(D1).selectionRangeProvider.register(J,$)}function Fz0(J,$){return v0.get(D1).documentSemanticTokensProvider.register(J,$)}function Kz0(J,$){return v0.get(D1).documentRangeSemanticTokensProvider.register(J,$)}function Az0(J,$){return v0.get(D1).inlineCompletionsProvider.register(J,$)}function Pz0(J,$){return v0.get(D1).inlayHintsProvider.register(J,$)}function o60(){return{register:hU0,getLanguages:fU0,onLanguage:pU0,onLanguageEncountered:mU0,getEncodedLanguageId:gU0,setLanguageConfiguration:uU0,setColorMap:dU0,registerTokensProviderFactory:YC,setTokensProvider:sU0,setMonarchTokensProvider:aU0,registerReferenceProvider:rU0,registerRenameProvider:iU0,registerCompletionItemProvider:Hz0,registerSignatureHelpProvider:nU0,registerHoverProvider:oU0,registerDocumentSymbolProvider:tU0,registerDocumentHighlightProvider:eU0,registerLinkedEditingRangeProvider:Jz0,registerDefinitionProvider:$z0,registerImplementationProvider:Xz0,registerTypeDefinitionProvider:Yz0,registerCodeLensProvider:Zz0,registerCodeActionProvider:Qz0,registerDocumentFormattingEditProvider:Gz0,registerDocumentRangeFormattingEditProvider:qz0,registerOnTypeFormattingEditProvider:Uz0,registerLinkProvider:zz0,registerColorProvider:jz0,registerFoldingRangeProvider:Vz0,registerDeclarationProvider:Wz0,registerSelectionRangeProvider:Bz0,registerDocumentSemanticTokensProvider:Fz0,registerDocumentRangeSemanticTokensProvider:Kz0,registerInlineCompletionsProvider:Az0,registerInlayHintsProvider:Pz0,DocumentHighlightKind:fK,CompletionItemKind:xK,CompletionItemTag:bK,CompletionItemInsertTextRule:yK,SymbolKind:zA,SymbolTag:HA,IndentAction:lK,CompletionTriggerKind:SK,SignatureHelpTriggerKind:UA,InlayHintKind:sK,InlineCompletionTriggerKind:aK,CodeActionTriggerType:IK,FoldingRangeKind:u8,SelectedSuggestionInfo:iN}}var t60=w(()=>{T9();i0();c8();j7();OJ();I4();FA();OO();a60();UL();OB();dz();f4();H7()});var ZC,e60,QC;var J50=w(()=>{L4();t1();_8();D4();s0();y4();c0();ZC=w0("IEditorCancelService"),e60=new A0("cancellableOperation",!1,F("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));B1(ZC,class{constructor(){this._tokens=new WeakMap}add(J,$){let X=this._tokens.get(J);if(!X)X=J.invokeWithinContext((Z)=>{let Q=e60.bindTo(Z.get(m0)),G=new m6;return{key:Q,tokens:G}}),this._tokens.set(J,X);let Y;return X.key.set(!0),Y=X.tokens.push($),()=>{if(Y)Y(),X.key.set(!X.tokens.isEmpty()),Y=void 0}}cancel(J){let $=this._tokens.get(J);if(!$)return;let X=$.tokens.pop();if(X)X.cancel(),$.key.set(!$.tokens.isEmpty())}},1);QC=class QC extends L5{constructor(J,$){super($);this.editor=J,this._unregister=J.invokeWithinContext((X)=>X.get(ZC).add(J,this))}dispose(){this._unregister(),super.dispose()}};I0(new class extends R9{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:e60})}runEditorCommand(J,$){J.get(ZC).cancel($)}})});var lO,dO;var $50=w(()=>{X1();i0();_8();z0();J50();lO=class lO extends QC{constructor(J,$,X,Y){super(J,Y);if(this._listener=new $0,$&4)this._listener.add(J.onDidChangeCursorPosition((Z)=>{if(!X||!k.containsPosition(X,Z.position))this.cancel()}));if($&2)this._listener.add(J.onDidChangeCursorSelection((Z)=>{if(!X||!k.containsRange(X,Z.selection))this.cancel()}));if($&8)this._listener.add(J.onDidScrollChange((Z)=>this.cancel()));if($&1)this._listener.add(J.onDidChangeModel((Z)=>this.cancel())),this._listener.add(J.onDidChangeModelContent((Z)=>this.cancel()))}dispose(){this._listener.dispose(),super.dispose()}};dO=class dO extends L5{constructor(J,$){super($);this._listener=J.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}});function Hq(J){if(J&&typeof J.getEditorType==="function")return J.getEditorType()===vQ.ICodeEditor;else return!1}var X50=w(()=>{UV()});class y2{static _handleEolEdits(J,$){let X=void 0,Y=[];for(let Z of $){if(typeof Z.eol==="number")X=Z.eol;if(Z.range&&typeof Z.text==="string")Y.push(Z)}if(typeof X==="number"){if(J.hasModel())J.getModel().pushEOL(X)}return Y}static _isFullModelReplaceEdit(J,$){if(!J.hasModel())return!1;let X=J.getModel(),Y=X.validateRange($.range);return X.getFullModelRange().equalsRange(Y)}static execute(J,$,X){if(X)J.pushUndoStop();let Y=vJ.capture(J),Z=y2._handleEolEdits(J,$);if(Z.length===1&&y2._isFullModelReplaceEdit(J,Z[0]))J.executeEdits("formatEditsCommand",Z.map((Q)=>u4.replace(k.lift(Q.range),Q.text)));else J.executeEdits("formatEditsCommand",Z.map((Q)=>u4.replaceMove(k.lift(Q.range),Q.text)));if(X)J.pushUndoStop();Y.restoreRelativeVerticalPositionOfCursor(J)}}var GC=w(()=>{yW();i0()});class qC{constructor(J){this.value=J,this._lower=J.toLowerCase()}static toKey(J){if(typeof J==="string")return J.toLowerCase();return J._lower}}class UC{constructor(J){if(this._set=new Set,J)for(let $ of J)this.add($)}add(J){this._set.add(qC.toKey(J))}has(J){return this._set.has(qC.toKey(J))}}function Y50(J,$,X){let Y=[],Z=new UC,Q=J.ordered(X);for(let q of Q)if(Y.push(q),q.extensionId)Z.add(q.extensionId);let G=$.ordered(X);for(let q of G){if(q.extensionId){if(Z.has(q.extensionId))continue;Z.add(q.extensionId)}Y.push({displayName:q.displayName,extensionId:q.extensionId,provideDocumentFormattingEdits(U,z,H){return q.provideDocumentRangeFormattingEdits(U,U.getFullModelRange(),z,H)}})}return Y}class x2{static setFormatterSelector(J){return{dispose:x2._selectors.unshift(J)}}static async select(J,$,X,Y){if(J.length===0)return;let Z=A1.first(x2._selectors);if(Z)return await Z(J,$,X,Y);return}}async function zC(J,$,X,Y,Z,Q,G){let q=J.get(l0),{documentRangeFormattingEditProvider:U}=J.get(D1),z=Hq($)?$.getModel():$,H=U.ordered(z),j=await x2.select(H,z,Y,2);if(j)Z.report(j),await q.invokeFunction(Dz0,j,$,X,Q,G)}async function Dz0(J,$,X,Y,Z,Q){var G,q;let U=J.get(U4),z=J.get(P5),H=J.get(l4),j,V;if(Hq(X))j=X.getModel(),V=new lO(X,5,void 0,Z);else j=X,V=new dO(X,Z);let W=[],B=0;for(let M of ch(Y).sort(k.compareRangesUsingStarts))if(B>0&&k.areIntersectingOrTouching(W[B-1],M))W[B-1]=k.fromPositions(W[B-1].getStartPosition(),M.getEndPosition());else B=W.push(M);let K=async(M)=>{var R,O;z.trace("[format][provideDocumentRangeFormattingEdits] (request)",(R=$.extensionId)===null||R===void 0?void 0:R.value,M);let N=await $.provideDocumentRangeFormattingEdits(j,M,j.getFormattingOptions(),V.token)||[];return z.trace("[format][provideDocumentRangeFormattingEdits] (response)",(O=$.extensionId)===null||O===void 0?void 0:O.value,N),N},P=(M,R)=>{if(!M.length||!R.length)return!1;let O=M.reduce((N,T)=>{return k.plusRange(N,T.range)},M[0].range);if(!R.some((N)=>{return k.intersectRanges(O,N.range)}))return!1;for(let N of M)for(let T of R)if(k.intersectRanges(N.range,T.range))return!0;return!1},A=[],D=[];try{if(typeof $.provideDocumentRangesFormattingEdits==="function"){z.trace("[format][provideDocumentRangeFormattingEdits] (request)",(G=$.extensionId)===null||G===void 0?void 0:G.value,W);let M=await $.provideDocumentRangesFormattingEdits(j,W,j.getFormattingOptions(),V.token)||[];z.trace("[format][provideDocumentRangeFormattingEdits] (response)",(q=$.extensionId)===null||q===void 0?void 0:q.value,M),D.push(M)}else{for(let M of W){if(V.token.isCancellationRequested)return!0;D.push(await K(M))}for(let M=0;M<W.length;++M)for(let R=M+1;R<W.length;++R){if(V.token.isCancellationRequested)return!0;if(P(D[M],D[R])){let O=k.plusRange(W[M],W[R]),N=await K(O);W.splice(R,1),W.splice(M,1),W.push(O),D.splice(R,1),D.splice(M,1),D.push(N),M=0,R=0}}}for(let M of D){if(V.token.isCancellationRequested)return!0;let R=await U.computeMoreMinimalEdits(j.uri,M);if(R)A.push(...R)}}finally{V.dispose()}if(A.length===0)return!1;if(Hq(X))y2.execute(X,A,!0),X.revealPositionInCenterIfOutsideViewport(X.getPosition(),1);else{let[{range:M}]=A,R=new p0(M.startLineNumber,M.startColumn,M.endLineNumber,M.endColumn);j.pushEditOperations([R],A.map((O)=>{return{text:O.text,range:k.lift(O.range),forceMoveMarkers:!0}}),(O)=>{for(let{range:N}of O)if(k.areIntersectingOrTouching(N,R))return[new p0(N.startLineNumber,N.startColumn,N.endLineNumber,N.endColumn)];return null})}return H.playAudioCue(q1.format,{userGesture:Q}),!0}async function Z50(J,$,X,Y,Z,Q){let G=J.get(l0),q=J.get(D1),U=Hq($)?$.getModel():$,z=Y50(q.documentFormattingEditProvider,q.documentRangeFormattingEditProvider,U),H=await x2.select(z,U,X,1);if(H)Y.report(H),await G.invokeFunction(Rz0,H,$,X,Z,Q)}async function Rz0(J,$,X,Y,Z,Q){let G=J.get(U4),q=J.get(l4),U,z;if(Hq(X))U=X.getModel(),z=new lO(X,5,void 0,Z);else U=X,z=new dO(X,Z);let H;try{let j=await $.provideDocumentFormattingEdits(U,U.getFormattingOptions(),z.token);if(H=await G.computeMoreMinimalEdits(U.uri,j),z.token.isCancellationRequested)return!0}finally{z.dispose()}if(!H||H.length===0)return!1;if(Hq(X)){if(y2.execute(X,H,Y!==2),Y!==2)X.revealPositionInCenterIfOutsideViewport(X.getPosition(),1)}else{let[{range:j}]=H,V=new p0(j.startLineNumber,j.startColumn,j.endLineNumber,j.endColumn);U.pushEditOperations([V],H.map((W)=>{return{text:W.text,range:k.lift(W.range),forceMoveMarkers:!0}}),(W)=>{for(let{range:B}of W)if(k.areIntersectingOrTouching(B,V))return[new p0(B.startLineNumber,B.startColumn,B.endLineNumber,B.endColumn)];return null})}return q.playAudioCue(q1.format,{userGesture:Q}),!0}async function Mz0(J,$,X,Y,Z,Q){let G=$.documentRangeFormattingEditProvider.ordered(X);for(let q of G){let U=await Promise.resolve(q.provideDocumentRangeFormattingEdits(X,Y,Z,Q)).catch(QX);if(K4(U))return await J.computeMoreMinimalEdits(X.uri,U)}return}async function Oz0(J,$,X,Y,Z){let Q=Y50($.documentFormattingEditProvider,$.documentRangeFormattingEditProvider,X);for(let G of Q){let q=await Promise.resolve(G.provideDocumentFormattingEdits(X,Y,Z)).catch(QX);if(K4(q))return await J.computeMoreMinimalEdits(X.uri,q)}return}function HC(J,$,X,Y,Z,Q,G){let q=$.onTypeFormattingEditProvider.ordered(X);if(q.length===0)return Promise.resolve(void 0);if(q[0].autoFormatTriggerCharacters.indexOf(Z)<0)return Promise.resolve(void 0);return Promise.resolve(q[0].provideOnTypeFormattingEdits(X,Y,Z,Q,G)).catch(QX).then((U)=>{return J.computeMoreMinimalEdits(X.uri,U)})}var jC=w(()=>{V1();_8();O1();P4();D4();V5();$50();X50();i0();o5();lz();Aj();GC();C7();s0();f4();o9();Zq();x2._selectors=new m6;M6.registerCommand("_executeFormatRangeProvider",async function(J,...$){let[X,Y,Z]=$;T5(C0.isUri(X)),T5(k.isIRange(Y));let Q=J.get(hY),G=J.get(U4),q=J.get(D1),U=await Q.createModelReference(X);try{return Mz0(G,q,U.object.textEditorModel,k.lift(Y),Z,j5.None)}finally{U.dispose()}});M6.registerCommand("_executeFormatDocumentProvider",async function(J,...$){let[X,Y]=$;T5(C0.isUri(X));let Z=J.get(hY),Q=J.get(U4),G=J.get(D1),q=await Z.createModelReference(X);try{return Oz0(Q,G,q.object.textEditorModel,Y,j5.None)}finally{q.dispose()}});M6.registerCommand("_executeFormatOnTypeProvider",async function(J,...$){let[X,Y,Z,Q]=$;T5(C0.isUri(X)),T5(g.isIPosition(Y)),T5(typeof Z==="string");let G=J.get(hY),q=J.get(U4),U=J.get(D1),z=await G.createModelReference(X);try{return HC(q,U,z.object.textEditorModel,g.lift(Y),Z,Q,j5.None)}finally{z.dispose()}})});var H4={};UQ(H4,{languages:()=>cZ,editor:()=>b2,Uri:()=>BC,Token:()=>xz0,SelectionDirection:()=>Ez0,Selection:()=>kz0,Range:()=>Lz0,Position:()=>wz0,MarkerTag:()=>yz0,MarkerSeverity:()=>Iz0,KeyMod:()=>Tz0,KeyCode:()=>Nz0,Emitter:()=>WC,CancellationTokenSource:()=>_z0});var l7,_z0,WC,Nz0,Tz0,wz0,Lz0,kz0,Ez0,Iz0,yz0,BC,xz0,b2,cZ,VC;var gJ=w(()=>{O8();eN();c60();t60();jC();$$.wrappingIndent.defaultValue=0;$$.glyphMargin.defaultValue=!1;$$.autoIndent.defaultValue=3;$$.overviewRulerLanes.defaultValue=2;x2.setFormatterSelector((J,$,X)=>Promise.resolve(J[0]));l7=KA();l7.editor=u60();l7.languages=o60();_z0=l7.CancellationTokenSource,WC=l7.Emitter,Nz0=l7.KeyCode,Tz0=l7.KeyMod,wz0=l7.Position,Lz0=l7.Range,kz0=l7.Selection,Ez0=l7.SelectionDirection,Iz0=l7.MarkerSeverity,yz0=l7.MarkerTag,BC=l7.Uri,xz0=l7.Token,b2=l7.editor,cZ=l7.languages,VC=globalThis.MonacoEnvironment;if((VC===null||VC===void 0?void 0:VC.globalAPI)||typeof define==="function"&&define.amd)globalThis.monaco=l7;if(typeof globalThis.require<"u"&&typeof globalThis.require.config==="function")globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})});var U70={};UQ(U70,{toTextEdit:()=>IH,toRange:()=>V9,setupMode:()=>Gj0,getWorker:()=>Zj0,fromRange:()=>rC,fromPosition:()=>c2,WorkerManager:()=>s80,SelectionRangeAdapter:()=>Q70,RenameAdapter:()=>pH0,ReferenceAdapter:()=>gH0,HoverAdapter:()=>i80,FoldingRangeAdapter:()=>Z70,DocumentSymbolAdapter:()=>o80,DocumentRangeFormattingEditProvider:()=>$70,DocumentLinkAdapter:()=>cH0,DocumentHighlightAdapter:()=>vH0,DocumentFormattingEditProvider:()=>J70,DocumentColorAdapter:()=>Y70,DiagnosticsAdapter:()=>a80,DefinitionAdapter:()=>fH0,CompletionAdapter:()=>r80});function EH0(J){switch(J){case kH.Error:return l1.MarkerSeverity.Error;case kH.Warning:return l1.MarkerSeverity.Warning;case kH.Information:return l1.MarkerSeverity.Info;case kH.Hint:return l1.MarkerSeverity.Hint;default:return l1.MarkerSeverity.Info}}function IH0(J,$){let X=typeof $.code==="number"?String($.code):$.code;return{severity:EH0($.severity),startLineNumber:$.range.start.line+1,startColumn:$.range.start.character+1,endLineNumber:$.range.end.line+1,endColumn:$.range.end.character+1,message:$.message,code:X,source:$.source}}function c2(J){if(!J)return;return{character:J.column-1,line:J.lineNumber-1}}function rC(J){if(!J)return;return{start:{line:J.startLineNumber-1,character:J.startColumn-1},end:{line:J.endLineNumber-1,character:J.endColumn-1}}}function V9(J){if(!J)return;return new l1.Range(J.start.line+1,J.start.character+1,J.end.line+1,J.end.character+1)}function yH0(J){return typeof J.insert<"u"&&typeof J.replace<"u"}function xH0(J){let $=l1.languages.CompletionItemKind;switch(J){case v8.Text:return $.Text;case v8.Method:return $.Method;case v8.Function:return $.Function;case v8.Constructor:return $.Constructor;case v8.Field:return $.Field;case v8.Variable:return $.Variable;case v8.Class:return $.Class;case v8.Interface:return $.Interface;case v8.Module:return $.Module;case v8.Property:return $.Property;case v8.Unit:return $.Unit;case v8.Value:return $.Value;case v8.Enum:return $.Enum;case v8.Keyword:return $.Keyword;case v8.Snippet:return $.Snippet;case v8.Color:return $.Color;case v8.File:return $.File;case v8.Reference:return $.Reference}return $.Property}function IH(J){if(!J)return;return{range:V9(J.range),text:J.newText}}function bH0(J){return J&&J.command==="editor.action.triggerSuggest"?{id:J.command,title:J.title,arguments:J.arguments}:void 0}function SH0(J){return J&&typeof J==="object"&&typeof J.kind==="string"}function m80(J){if(typeof J==="string")return{value:J};if(SH0(J)){if(J.kind==="plaintext")return{value:J.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")};return{value:J.value}}return{value:"```"+J.language+`
`+J.value+"\n```\n"}}function CH0(J){if(!J)return;if(Array.isArray(J))return J.map(m80);return[m80(J)]}function hH0(J){switch(J){case BF.Read:return l1.languages.DocumentHighlightKind.Read;case BF.Write:return l1.languages.DocumentHighlightKind.Write;case BF.Text:return l1.languages.DocumentHighlightKind.Text}return l1.languages.DocumentHighlightKind.Text}function n80(J){return{uri:l1.Uri.parse(J.uri),range:V9(J.range)}}function mH0(J){if(!J||!J.changes)return;let $=[];for(let X in J.changes){let Y=l1.Uri.parse(X);for(let Z of J.changes[X])$.push({resource:Y,versionId:void 0,textEdit:{range:V9(Z.range),text:Z.newText}})}return{edits:$}}function uH0(J){return"children"in J}function t80(J){return{name:J.name,detail:J.detail??"",kind:e80(J.kind),range:V9(J.range),selectionRange:V9(J.selectionRange),tags:J.tags??[],children:(J.children??[]).map(($)=>t80($))}}function e80(J){let $=l1.languages.SymbolKind;switch(J){case h8.File:return $.File;case h8.Module:return $.Module;case h8.Namespace:return $.Namespace;case h8.Package:return $.Package;case h8.Class:return $.Class;case h8.Method:return $.Method;case h8.Property:return $.Property;case h8.Field:return $.Field;case h8.Constructor:return $.Constructor;case h8.Enum:return $.Enum;case h8.Interface:return $.Interface;case h8.Function:return $.Function;case h8.Variable:return $.Variable;case h8.Constant:return $.Constant;case h8.String:return $.String;case h8.Number:return $.Number;case h8.Boolean:return $.Boolean;case h8.Array:return $.Array}return $.Function}function X70(J){return{tabSize:J.tabSize,insertSpaces:J.insertSpaces}}function lH0(J){switch(J){case WF.Comment:return l1.languages.FoldingRangeKind.Comment;case WF.Imports:return l1.languages.FoldingRangeKind.Imports;case WF.Region:return l1.languages.FoldingRangeKind.Region}return}function dH0(J,$){if($===void 0)$=!1;var X=J.length,Y=0,Z="",Q=0,G=16,q=0,U=0,z=0,H=0,j=0;function V(M,R){var O=0,N=0;while(O<M||!R){var T=J.charCodeAt(Y);if(T>=48&&T<=57)N=N*16+T-48;else if(T>=65&&T<=70)N=N*16+T-65+10;else if(T>=97&&T<=102)N=N*16+T-97+10;else break;Y++,O++}if(O<M)N=-1;return N}function W(M){Y=M,Z="",Q=0,G=16,j=0}function B(){var M=Y;if(J.charCodeAt(Y)===48)Y++;else{Y++;while(Y<J.length&&LH(J.charCodeAt(Y)))Y++}if(Y<J.length&&J.charCodeAt(Y)===46)if(Y++,Y<J.length&&LH(J.charCodeAt(Y))){Y++;while(Y<J.length&&LH(J.charCodeAt(Y)))Y++}else return j=3,J.substring(M,Y);var R=Y;if(Y<J.length&&(J.charCodeAt(Y)===69||J.charCodeAt(Y)===101)){if(Y++,Y<J.length&&J.charCodeAt(Y)===43||J.charCodeAt(Y)===45)Y++;if(Y<J.length&&LH(J.charCodeAt(Y))){Y++;while(Y<J.length&&LH(J.charCodeAt(Y)))Y++;R=Y}else j=3}return J.substring(M,R)}function K(){var M="",R=Y;while(!0){if(Y>=X){M+=J.substring(R,Y),j=2;break}var O=J.charCodeAt(Y);if(O===34){M+=J.substring(R,Y),Y++;break}if(O===92){if(M+=J.substring(R,Y),Y++,Y>=X){j=2;break}var N=J.charCodeAt(Y++);switch(N){case 34:M+='"';break;case 92:M+="\\";break;case 47:M+="/";break;case 98:M+="\b";break;case 102:M+="\f";break;case 110:M+=`
`;break;case 114:M+="\r";break;case 116:M+="\t";break;case 117:var T=V(4,!0);if(T>=0)M+=String.fromCharCode(T);else j=4;break;default:j=5}R=Y;continue}if(O>=0&&O<=31)if(jF(O)){M+=J.substring(R,Y),j=2;break}else j=6;Y++}return M}function P(){if(Z="",j=0,Q=Y,U=q,H=z,Y>=X)return Q=X,G=17;var M=J.charCodeAt(Y);if(mC(M)){do Y++,Z+=String.fromCharCode(M),M=J.charCodeAt(Y);while(mC(M));return G=15}if(jF(M)){if(Y++,Z+=String.fromCharCode(M),M===13&&J.charCodeAt(Y)===10)Y++,Z+=`
`;return q++,z=Y,G=14}switch(M){case 123:return Y++,G=1;case 125:return Y++,G=2;case 91:return Y++,G=3;case 93:return Y++,G=4;case 58:return Y++,G=6;case 44:return Y++,G=5;case 34:return Y++,Z=K(),G=10;case 47:var R=Y-1;if(J.charCodeAt(Y+1)===47){Y+=2;while(Y<X){if(jF(J.charCodeAt(Y)))break;Y++}return Z=J.substring(R,Y),G=12}if(J.charCodeAt(Y+1)===42){Y+=2;var O=X-1,N=!1;while(Y<O){var T=J.charCodeAt(Y);if(T===42&&J.charCodeAt(Y+1)===47){Y+=2,N=!0;break}if(Y++,jF(T)){if(T===13&&J.charCodeAt(Y)===10)Y++;q++,z=Y}}if(!N)Y++,j=1;return Z=J.substring(R,Y),G=13}return Z+=String.fromCharCode(M),Y++,G=16;case 45:if(Z+=String.fromCharCode(M),Y++,Y===X||!LH(J.charCodeAt(Y)))return G=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Z+=B(),G=11;default:while(Y<X&&A(M))Y++,M=J.charCodeAt(Y);if(Q!==Y){switch(Z=J.substring(Q,Y),Z){case"true":return G=8;case"false":return G=9;case"null":return G=7}return G=16}return Z+=String.fromCharCode(M),Y++,G=16}}function A(M){if(mC(M)||jF(M))return!1;switch(M){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function D(){var M;do M=P();while(M>=12&&M<=15);return M}return{setPosition:W,getPosition:function(){return Y},scan:$?D:P,getToken:function(){return G},getTokenValue:function(){return Z},getTokenOffset:function(){return Q},getTokenLength:function(){return Y-Q},getTokenStartLine:function(){return U},getTokenStartCharacter:function(){return Q-H},getTokenError:function(){return j}}}function mC(J){return J===32||J===9||J===11||J===12||J===160||J===5760||J>=8192&&J<=8203||J===8239||J===8287||J===12288||J===65279}function jF(J){return J===10||J===13||J===8232||J===8233}function LH(J){return J>=48&&J<=57}function aH0(J){return{getInitialState:()=>new G70(null,null,!1,null),tokenize:($,X)=>Yj0(J,$,X)}}function Yj0(J,$,X,Y=0){let Z=0,Q=!1;switch(X.scanError){case 2:$='"'+$,Z=1;break;case 1:$="/*"+$,Z=2;break}let G=sH0($),q=X.lastWasColon,U=X.parents,z={tokens:[],endState:X.clone()};while(!0){let H=Y+G.getPosition(),j="",V=G.scan();if(V===17)break;if(H===Y+G.getPosition())throw Error("Scanner did not advance, next 3 characters are: "+$.substr(G.getPosition(),3));if(Q)H-=Z;switch(Q=Z>0,V){case 1:U=VF.push(U,0),j=c80,q=!1;break;case 2:U=VF.pop(U),j=c80,q=!1;break;case 3:U=VF.push(U,1),j=l80,q=!1;break;case 4:U=VF.pop(U),j=l80,q=!1;break;case 6:j=rH0,q=!0;break;case 5:j=iH0,q=!1;break;case 8:case 9:j=nH0,q=!1;break;case 7:j=oH0,q=!1;break;case 10:let B=(U?U.type:0)===1;j=q||B?tH0:Jj0,q=!1;break;case 11:j=eH0,q=!1;break}if(J)switch(V){case 12:j=Xj0;break;case 13:j=$j0;break}z.endState=new G70(X.getStateData(),G.getTokenError(),q,U),z.tokens.push({startIndex:H,scopes:j})}return z}function Zj0(){return new Promise((J,$)=>{if(!cJ)return $("JSON not registered!");J(cJ)})}function Gj0(J){let $=[],X=[],Y=new s80(J);$.push(Y),cJ=(...G)=>{return Y.getLanguageServiceWorker(...G)};function Z(){let{languageId:G,modeConfiguration:q}=J;if(q70(X),q.documentFormattingEdits)X.push(l1.languages.registerDocumentFormattingEditProvider(G,new J70(cJ)));if(q.documentRangeFormattingEdits)X.push(l1.languages.registerDocumentRangeFormattingEditProvider(G,new $70(cJ)));if(q.completionItems)X.push(l1.languages.registerCompletionItemProvider(G,new r80(cJ,[" ",":",'"'])));if(q.hovers)X.push(l1.languages.registerHoverProvider(G,new i80(cJ)));if(q.documentSymbols)X.push(l1.languages.registerDocumentSymbolProvider(G,new o80(cJ)));if(q.tokens)X.push(l1.languages.setTokensProvider(G,aH0(!0)));if(q.colors)X.push(l1.languages.registerColorProvider(G,new Y70(cJ)));if(q.foldingRanges)X.push(l1.languages.registerFoldingRangeProvider(G,new Z70(cJ)));if(q.diagnostics)X.push(new Qj0(G,cJ,J));if(q.selectionRanges)X.push(l1.languages.registerSelectionRangeProvider(G,new Q70(cJ)))}Z(),$.push(l1.languages.setLanguageConfiguration(J.languageId,qj0));let Q=J.modeConfiguration;return J.onDidChange((G)=>{if(G.modeConfiguration!==Q)Q=G.modeConfiguration,Z()}),$.push(d80(X)),d80($)}function d80(J){return{dispose:()=>q70(J)}}function q70(J){while(J.length)J.pop().dispose()}var OH0,_H0,NH0,TH0,z80=(J,$,X,Y)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Z of NH0($))if(!TH0.call(J,Z)&&Z!==X)OH0(J,Z,{get:()=>$[Z],enumerable:!(Y=_H0($,Z))||Y.enumerable})}return J},wH0=(J,$,X)=>(z80(J,$,"default"),X&&z80(X,$,"default")),l1,LH0=120000,s80=class{constructor(J){this._defaults=J,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30000),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){if(this._worker)this._worker.dispose(),this._worker=null;this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;if(Date.now()-this._lastUsedTime>LH0)this._stopWorker()}_getClient(){if(this._lastUsedTime=Date.now(),!this._client)this._worker=l1.editor.createWebWorker({moduleId:"vs/language/json/jsonWorker",label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId,enableSchemaRequest:this._defaults.diagnosticsOptions.enableSchemaRequest}}),this._client=this._worker.getProxy();return this._client}getLanguageServiceWorker(...J){let $;return this._getClient().then((X)=>{$=X}).then((X)=>{if(this._worker)return this._worker.withSyncedResources(J)}).then((X)=>$)}},H80,R_,jY,s7,uC,j80,cC,V80,W80,WF,B80,lC,kH,F80,K80,M_,FF,u2,EH,j9,m2,O_,KF,AF,PF,dC,D_,A80,bK1,P80,D80,__,R80,DF,sC,v8,aC,M80,O80,_80,N80,T80,N_,w80,L80,k80,BF,E80,h8,I80,y80,x80,b80,S80,C80,v80,h80,f80,g80,p80,kH0,V0,a80=class{constructor(J,$,X){this._languageId=J,this._worker=$,this._disposables=[],this._listener=Object.create(null);let Y=(Q)=>{let G=Q.getLanguageId();if(G!==this._languageId)return;let q;this._listener[Q.uri.toString()]=Q.onDidChangeContent(()=>{window.clearTimeout(q),q=window.setTimeout(()=>this._doValidate(Q.uri,G),500)}),this._doValidate(Q.uri,G)},Z=(Q)=>{l1.editor.setModelMarkers(Q,this._languageId,[]);let G=Q.uri.toString(),q=this._listener[G];if(q)q.dispose(),delete this._listener[G]};this._disposables.push(l1.editor.onDidCreateModel(Y)),this._disposables.push(l1.editor.onWillDisposeModel(Z)),this._disposables.push(l1.editor.onDidChangeModelLanguage((Q)=>{Z(Q.model),Y(Q.model)})),this._disposables.push(X((Q)=>{l1.editor.getModels().forEach((G)=>{if(G.getLanguageId()===this._languageId)Z(G),Y(G)})})),this._disposables.push({dispose:()=>{l1.editor.getModels().forEach(Z);for(let Q in this._listener)this._listener[Q].dispose()}}),l1.editor.getModels().forEach(Y)}dispose(){this._disposables.forEach((J)=>J&&J.dispose()),this._disposables.length=0}_doValidate(J,$){this._worker(J).then((X)=>{return X.doValidation(J.toString())}).then((X)=>{let Y=X.map((Q)=>IH0(J,Q)),Z=l1.editor.getModel(J);if(Z&&Z.getLanguageId()===$)l1.editor.setModelMarkers(Z,$,Y)}).then(void 0,(X)=>{console.error(X)})}},r80=class{constructor(J,$){this._worker=J,this._triggerCharacters=$}get triggerCharacters(){return this._triggerCharacters}provideCompletionItems(J,$,X,Y){let Z=J.uri;return this._worker(Z).then((Q)=>{return Q.doComplete(Z.toString(),c2($))}).then((Q)=>{if(!Q)return;let G=J.getWordUntilPosition($),q=new l1.Range($.lineNumber,G.startColumn,$.lineNumber,G.endColumn),U=Q.items.map((z)=>{let H={label:z.label,insertText:z.insertText||z.label,sortText:z.sortText,filterText:z.filterText,documentation:z.documentation,detail:z.detail,command:bH0(z.command),range:q,kind:xH0(z.kind)};if(z.textEdit){if(yH0(z.textEdit))H.range={insert:V9(z.textEdit.insert),replace:V9(z.textEdit.replace)};else H.range=V9(z.textEdit.range);H.insertText=z.textEdit.newText}if(z.additionalTextEdits)H.additionalTextEdits=z.additionalTextEdits.map(IH);if(z.insertTextFormat===aC.Snippet)H.insertTextRules=l1.languages.CompletionItemInsertTextRule.InsertAsSnippet;return H});return{isIncomplete:Q.isIncomplete,suggestions:U}})}},i80=class{constructor(J){this._worker=J}provideHover(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>{return Z.doHover(Y.toString(),c2($))}).then((Z)=>{if(!Z)return;return{range:V9(Z.range),contents:CH0(Z.contents)}})}},vH0=class{constructor(J){this._worker=J}provideDocumentHighlights(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>Z.findDocumentHighlights(Y.toString(),c2($))).then((Z)=>{if(!Z)return;return Z.map((Q)=>{return{range:V9(Q.range),kind:hH0(Q.kind)}})})}},fH0=class{constructor(J){this._worker=J}provideDefinition(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>{return Z.findDefinition(Y.toString(),c2($))}).then((Z)=>{if(!Z)return;return[n80(Z)]})}},gH0=class{constructor(J){this._worker=J}provideReferences(J,$,X,Y){let Z=J.uri;return this._worker(Z).then((Q)=>{return Q.findReferences(Z.toString(),c2($))}).then((Q)=>{if(!Q)return;return Q.map(n80)})}},pH0=class{constructor(J){this._worker=J}provideRenameEdits(J,$,X,Y){let Z=J.uri;return this._worker(Z).then((Q)=>{return Q.doRename(Z.toString(),c2($),X)}).then((Q)=>{return mH0(Q)})}},o80=class{constructor(J){this._worker=J}provideDocumentSymbols(J,$){let X=J.uri;return this._worker(X).then((Y)=>Y.findDocumentSymbols(X.toString())).then((Y)=>{if(!Y)return;return Y.map((Z)=>{if(uH0(Z))return t80(Z);return{name:Z.name,detail:"",containerName:Z.containerName,kind:e80(Z.kind),range:V9(Z.location.range),selectionRange:V9(Z.location.range),tags:[]}})})}},cH0=class{constructor(J){this._worker=J}provideLinks(J,$){let X=J.uri;return this._worker(X).then((Y)=>Y.findDocumentLinks(X.toString())).then((Y)=>{if(!Y)return;return{links:Y.map((Z)=>({range:V9(Z.range),url:Z.target}))}})}},J70=class{constructor(J){this._worker=J}provideDocumentFormattingEdits(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>{return Z.format(Y.toString(),null,X70($)).then((Q)=>{if(!Q||Q.length===0)return;return Q.map(IH)})})}},$70=class{constructor(J){this._worker=J,this.canFormatMultipleRanges=!1}provideDocumentRangeFormattingEdits(J,$,X,Y){let Z=J.uri;return this._worker(Z).then((Q)=>{return Q.format(Z.toString(),rC($),X70(X)).then((G)=>{if(!G||G.length===0)return;return G.map(IH)})})}},Y70=class{constructor(J){this._worker=J}provideDocumentColors(J,$){let X=J.uri;return this._worker(X).then((Y)=>Y.findDocumentColors(X.toString())).then((Y)=>{if(!Y)return;return Y.map((Z)=>({color:Z.color,range:V9(Z.range)}))})}provideColorPresentations(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>Z.getColorPresentations(Y.toString(),$.color,rC($.range))).then((Z)=>{if(!Z)return;return Z.map((Q)=>{let G={label:Q.label};if(Q.textEdit)G.textEdit=IH(Q.textEdit);if(Q.additionalTextEdits)G.additionalTextEdits=Q.additionalTextEdits.map(IH);return G})})}},Z70=class{constructor(J){this._worker=J}provideFoldingRanges(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>Z.getFoldingRanges(Y.toString(),$)).then((Z)=>{if(!Z)return;return Z.map((Q)=>{let G={start:Q.startLine+1,end:Q.endLine+1};if(typeof Q.kind<"u")G.kind=lH0(Q.kind);return G})})}},Q70=class{constructor(J){this._worker=J}provideSelectionRanges(J,$,X){let Y=J.uri;return this._worker(Y).then((Z)=>Z.getSelectionRanges(Y.toString(),$.map(c2))).then((Z)=>{if(!Z)return;return Z.map((Q)=>{let G=[];while(Q)G.push({range:V9(Q.range)}),Q=Q.parent;return G})})}},u80,sH0,c80="delimiter.bracket.json",l80="delimiter.array.json",rH0="delimiter.colon.json",iH0="delimiter.comma.json",nH0="keyword.json",oH0="keyword.json",tH0="string.value.json",eH0="number.json",Jj0="string.key.json",$j0="comment.block.json",Xj0="comment.line.json",VF=class J{constructor($,X){this.parent=$,this.type=X}static pop($){if($)return $.parent;return null}static push($,X){return new J($,X)}static equals($,X){if(!$&&!X)return!0;if(!$||!X)return!1;while($&&X){if($===X)return!0;if($.type!==X.type)return!1;$=$.parent,X=X.parent}return!0}},G70=class J{constructor($,X,Y,Z){this._state=$,this.scanError=X,this.lastWasColon=Y,this.parents=Z}clone(){return new J(this._state,this.scanError,this.lastWasColon,this.parents)}equals($){if($===this)return!0;if(!$||!($ instanceof J))return!1;return this.scanError===$.scanError&&this.lastWasColon===$.lastWasColon&&VF.equals(this.parents,$.parents)}getStateData(){return this._state}setStateData($){this._state=$}},cJ,Qj0,qj0;var z70=w(()=>{gJ();/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/OH0=Object.defineProperty,_H0=Object.getOwnPropertyDescriptor,NH0=Object.getOwnPropertyNames,TH0=Object.prototype.hasOwnProperty,l1={};wH0(l1,H4);(function(J){J.MIN_VALUE=-2147483648,J.MAX_VALUE=2147483647})(H80||(H80={}));(function(J){J.MIN_VALUE=0,J.MAX_VALUE=2147483647})(R_||(R_={}));(function(J){function $(Y,Z){if(Y===Number.MAX_VALUE)Y=R_.MAX_VALUE;if(Z===Number.MAX_VALUE)Z=R_.MAX_VALUE;return{line:Y,character:Z}}J.create=$;function X(Y){var Z=Y;return V0.objectLiteral(Z)&&V0.uinteger(Z.line)&&V0.uinteger(Z.character)}J.is=X})(jY||(jY={}));(function(J){function $(Y,Z,Q,G){if(V0.uinteger(Y)&&V0.uinteger(Z)&&V0.uinteger(Q)&&V0.uinteger(G))return{start:jY.create(Y,Z),end:jY.create(Q,G)};else if(jY.is(Y)&&jY.is(Z))return{start:Y,end:Z};else throw Error("Range#create called with invalid arguments["+Y+", "+Z+", "+Q+", "+G+"]")}J.create=$;function X(Y){var Z=Y;return V0.objectLiteral(Z)&&jY.is(Z.start)&&jY.is(Z.end)}J.is=X})(s7||(s7={}));(function(J){function $(Y,Z){return{uri:Y,range:Z}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&s7.is(Z.range)&&(V0.string(Z.uri)||V0.undefined(Z.uri))}J.is=X})(uC||(uC={}));(function(J){function $(Y,Z,Q,G){return{targetUri:Y,targetRange:Z,targetSelectionRange:Q,originSelectionRange:G}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&s7.is(Z.targetRange)&&V0.string(Z.targetUri)&&(s7.is(Z.targetSelectionRange)||V0.undefined(Z.targetSelectionRange))&&(s7.is(Z.originSelectionRange)||V0.undefined(Z.originSelectionRange))}J.is=X})(j80||(j80={}));(function(J){function $(Y,Z,Q,G){return{red:Y,green:Z,blue:Q,alpha:G}}J.create=$;function X(Y){var Z=Y;return V0.numberRange(Z.red,0,1)&&V0.numberRange(Z.green,0,1)&&V0.numberRange(Z.blue,0,1)&&V0.numberRange(Z.alpha,0,1)}J.is=X})(cC||(cC={}));(function(J){function $(Y,Z){return{range:Y,color:Z}}J.create=$;function X(Y){var Z=Y;return s7.is(Z.range)&&cC.is(Z.color)}J.is=X})(V80||(V80={}));(function(J){function $(Y,Z,Q){return{label:Y,textEdit:Z,additionalTextEdits:Q}}J.create=$;function X(Y){var Z=Y;return V0.string(Z.label)&&(V0.undefined(Z.textEdit)||u2.is(Z))&&(V0.undefined(Z.additionalTextEdits)||V0.typedArray(Z.additionalTextEdits,u2.is))}J.is=X})(W80||(W80={}));(function(J){J.Comment="comment",J.Imports="imports",J.Region="region"})(WF||(WF={}));(function(J){function $(Y,Z,Q,G,q){var U={startLine:Y,endLine:Z};if(V0.defined(Q))U.startCharacter=Q;if(V0.defined(G))U.endCharacter=G;if(V0.defined(q))U.kind=q;return U}J.create=$;function X(Y){var Z=Y;return V0.uinteger(Z.startLine)&&V0.uinteger(Z.startLine)&&(V0.undefined(Z.startCharacter)||V0.uinteger(Z.startCharacter))&&(V0.undefined(Z.endCharacter)||V0.uinteger(Z.endCharacter))&&(V0.undefined(Z.kind)||V0.string(Z.kind))}J.is=X})(B80||(B80={}));(function(J){function $(Y,Z){return{location:Y,message:Z}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&uC.is(Z.location)&&V0.string(Z.message)}J.is=X})(lC||(lC={}));(function(J){J.Error=1,J.Warning=2,J.Information=3,J.Hint=4})(kH||(kH={}));(function(J){J.Unnecessary=1,J.Deprecated=2})(F80||(F80={}));(function(J){function $(X){var Y=X;return Y!==void 0&&Y!==null&&V0.string(Y.href)}J.is=$})(K80||(K80={}));(function(J){function $(Y,Z,Q,G,q,U){var z={range:Y,message:Z};if(V0.defined(Q))z.severity=Q;if(V0.defined(G))z.code=G;if(V0.defined(q))z.source=q;if(V0.defined(U))z.relatedInformation=U;return z}J.create=$;function X(Y){var Z,Q=Y;return V0.defined(Q)&&s7.is(Q.range)&&V0.string(Q.message)&&(V0.number(Q.severity)||V0.undefined(Q.severity))&&(V0.integer(Q.code)||V0.string(Q.code)||V0.undefined(Q.code))&&(V0.undefined(Q.codeDescription)||V0.string((Z=Q.codeDescription)===null||Z===void 0?void 0:Z.href))&&(V0.string(Q.source)||V0.undefined(Q.source))&&(V0.undefined(Q.relatedInformation)||V0.typedArray(Q.relatedInformation,lC.is))}J.is=X})(M_||(M_={}));(function(J){function $(Y,Z){var Q=[];for(var G=2;G<arguments.length;G++)Q[G-2]=arguments[G];var q={title:Y,command:Z};if(V0.defined(Q)&&Q.length>0)q.arguments=Q;return q}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.string(Z.title)&&V0.string(Z.command)}J.is=X})(FF||(FF={}));(function(J){function $(Q,G){return{range:Q,newText:G}}J.replace=$;function X(Q,G){return{range:{start:Q,end:Q},newText:G}}J.insert=X;function Y(Q){return{range:Q,newText:""}}J.del=Y;function Z(Q){var G=Q;return V0.objectLiteral(G)&&V0.string(G.newText)&&s7.is(G.range)}J.is=Z})(u2||(u2={}));(function(J){function $(Y,Z,Q){var G={label:Y};if(Z!==void 0)G.needsConfirmation=Z;if(Q!==void 0)G.description=Q;return G}J.create=$;function X(Y){var Z=Y;return Z!==void 0&&V0.objectLiteral(Z)&&V0.string(Z.label)&&(V0.boolean(Z.needsConfirmation)||Z.needsConfirmation===void 0)&&(V0.string(Z.description)||Z.description===void 0)}J.is=X})(EH||(EH={}));(function(J){function $(X){var Y=X;return typeof Y==="string"}J.is=$})(j9||(j9={}));(function(J){function $(Q,G,q){return{range:Q,newText:G,annotationId:q}}J.replace=$;function X(Q,G,q){return{range:{start:Q,end:Q},newText:G,annotationId:q}}J.insert=X;function Y(Q,G){return{range:Q,newText:"",annotationId:G}}J.del=Y;function Z(Q){var G=Q;return u2.is(G)&&(EH.is(G.annotationId)||j9.is(G.annotationId))}J.is=Z})(m2||(m2={}));(function(J){function $(Y,Z){return{textDocument:Y,edits:Z}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&__.is(Z.textDocument)&&Array.isArray(Z.edits)}J.is=X})(O_||(O_={}));(function(J){function $(Y,Z,Q){var G={kind:"create",uri:Y};if(Z!==void 0&&(Z.overwrite!==void 0||Z.ignoreIfExists!==void 0))G.options=Z;if(Q!==void 0)G.annotationId=Q;return G}J.create=$;function X(Y){var Z=Y;return Z&&Z.kind==="create"&&V0.string(Z.uri)&&(Z.options===void 0||(Z.options.overwrite===void 0||V0.boolean(Z.options.overwrite))&&(Z.options.ignoreIfExists===void 0||V0.boolean(Z.options.ignoreIfExists)))&&(Z.annotationId===void 0||j9.is(Z.annotationId))}J.is=X})(KF||(KF={}));(function(J){function $(Y,Z,Q,G){var q={kind:"rename",oldUri:Y,newUri:Z};if(Q!==void 0&&(Q.overwrite!==void 0||Q.ignoreIfExists!==void 0))q.options=Q;if(G!==void 0)q.annotationId=G;return q}J.create=$;function X(Y){var Z=Y;return Z&&Z.kind==="rename"&&V0.string(Z.oldUri)&&V0.string(Z.newUri)&&(Z.options===void 0||(Z.options.overwrite===void 0||V0.boolean(Z.options.overwrite))&&(Z.options.ignoreIfExists===void 0||V0.boolean(Z.options.ignoreIfExists)))&&(Z.annotationId===void 0||j9.is(Z.annotationId))}J.is=X})(AF||(AF={}));(function(J){function $(Y,Z,Q){var G={kind:"delete",uri:Y};if(Z!==void 0&&(Z.recursive!==void 0||Z.ignoreIfNotExists!==void 0))G.options=Z;if(Q!==void 0)G.annotationId=Q;return G}J.create=$;function X(Y){var Z=Y;return Z&&Z.kind==="delete"&&V0.string(Z.uri)&&(Z.options===void 0||(Z.options.recursive===void 0||V0.boolean(Z.options.recursive))&&(Z.options.ignoreIfNotExists===void 0||V0.boolean(Z.options.ignoreIfNotExists)))&&(Z.annotationId===void 0||j9.is(Z.annotationId))}J.is=X})(PF||(PF={}));(function(J){function $(X){var Y=X;return Y&&(Y.changes!==void 0||Y.documentChanges!==void 0)&&(Y.documentChanges===void 0||Y.documentChanges.every(function(Z){if(V0.string(Z.kind))return KF.is(Z)||AF.is(Z)||PF.is(Z);else return O_.is(Z)}))}J.is=$})(dC||(dC={}));D_=function(){function J($,X){this.edits=$,this.changeAnnotations=X}return J.prototype.insert=function($,X,Y){var Z,Q;if(Y===void 0)Z=u2.insert($,X);else if(j9.is(Y))Q=Y,Z=m2.insert($,X,Y);else this.assertChangeAnnotations(this.changeAnnotations),Q=this.changeAnnotations.manage(Y),Z=m2.insert($,X,Q);if(this.edits.push(Z),Q!==void 0)return Q},J.prototype.replace=function($,X,Y){var Z,Q;if(Y===void 0)Z=u2.replace($,X);else if(j9.is(Y))Q=Y,Z=m2.replace($,X,Y);else this.assertChangeAnnotations(this.changeAnnotations),Q=this.changeAnnotations.manage(Y),Z=m2.replace($,X,Q);if(this.edits.push(Z),Q!==void 0)return Q},J.prototype.delete=function($,X){var Y,Z;if(X===void 0)Y=u2.del($);else if(j9.is(X))Z=X,Y=m2.del($,X);else this.assertChangeAnnotations(this.changeAnnotations),Z=this.changeAnnotations.manage(X),Y=m2.del($,Z);if(this.edits.push(Y),Z!==void 0)return Z},J.prototype.add=function($){this.edits.push($)},J.prototype.all=function(){return this.edits},J.prototype.clear=function(){this.edits.splice(0,this.edits.length)},J.prototype.assertChangeAnnotations=function($){if($===void 0)throw Error("Text edit change is not configured to manage change annotations.")},J}(),A80=function(){function J($){this._annotations=$===void 0?Object.create(null):$,this._counter=0,this._size=0}return J.prototype.all=function(){return this._annotations},Object.defineProperty(J.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),J.prototype.manage=function($,X){var Y;if(j9.is($))Y=$;else Y=this.nextId(),X=$;if(this._annotations[Y]!==void 0)throw Error("Id "+Y+" is already in use.");if(X===void 0)throw Error("No annotation provided for id "+Y);return this._annotations[Y]=X,this._size++,Y},J.prototype.nextId=function(){return this._counter++,this._counter.toString()},J}(),bK1=function(){function J($){var X=this;if(this._textEditChanges=Object.create(null),$!==void 0){if(this._workspaceEdit=$,$.documentChanges)this._changeAnnotations=new A80($.changeAnnotations),$.changeAnnotations=this._changeAnnotations.all(),$.documentChanges.forEach(function(Y){if(O_.is(Y)){var Z=new D_(Y.edits,X._changeAnnotations);X._textEditChanges[Y.textDocument.uri]=Z}});else if($.changes)Object.keys($.changes).forEach(function(Y){var Z=new D_($.changes[Y]);X._textEditChanges[Y]=Z})}else this._workspaceEdit={}}return Object.defineProperty(J.prototype,"edit",{get:function(){if(this.initDocumentChanges(),this._changeAnnotations!==void 0)if(this._changeAnnotations.size===0)this._workspaceEdit.changeAnnotations=void 0;else this._workspaceEdit.changeAnnotations=this._changeAnnotations.all();return this._workspaceEdit},enumerable:!1,configurable:!0}),J.prototype.getTextEditChange=function($){if(__.is($)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var X={uri:$.uri,version:$.version},Y=this._textEditChanges[X.uri];if(!Y){var Z=[],Q={textDocument:X,edits:Z};this._workspaceEdit.documentChanges.push(Q),Y=new D_(Z,this._changeAnnotations),this._textEditChanges[X.uri]=Y}return Y}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw Error("Workspace edit is not configured for normal text edit changes.");var Y=this._textEditChanges[$];if(!Y){var Z=[];this._workspaceEdit.changes[$]=Z,Y=new D_(Z),this._textEditChanges[$]=Y}return Y}},J.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._changeAnnotations=new A80,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()},J.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._workspaceEdit.changes=Object.create(null)},J.prototype.createFile=function($,X,Y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var Z;if(EH.is(X)||j9.is(X))Z=X;else Y=X;var Q,G;if(Z===void 0)Q=KF.create($,Y);else G=j9.is(Z)?Z:this._changeAnnotations.manage(Z),Q=KF.create($,Y,G);if(this._workspaceEdit.documentChanges.push(Q),G!==void 0)return G},J.prototype.renameFile=function($,X,Y,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var Q;if(EH.is(Y)||j9.is(Y))Q=Y;else Z=Y;var G,q;if(Q===void 0)G=AF.create($,X,Z);else q=j9.is(Q)?Q:this._changeAnnotations.manage(Q),G=AF.create($,X,Z,q);if(this._workspaceEdit.documentChanges.push(G),q!==void 0)return q},J.prototype.deleteFile=function($,X,Y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var Z;if(EH.is(X)||j9.is(X))Z=X;else Y=X;var Q,G;if(Z===void 0)Q=PF.create($,Y);else G=j9.is(Z)?Z:this._changeAnnotations.manage(Z),Q=PF.create($,Y,G);if(this._workspaceEdit.documentChanges.push(Q),G!==void 0)return G},J}();(function(J){function $(Y){return{uri:Y}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.string(Z.uri)}J.is=X})(P80||(P80={}));(function(J){function $(Y,Z){return{uri:Y,version:Z}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.string(Z.uri)&&V0.integer(Z.version)}J.is=X})(D80||(D80={}));(function(J){function $(Y,Z){return{uri:Y,version:Z}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.string(Z.uri)&&(Z.version===null||V0.integer(Z.version))}J.is=X})(__||(__={}));(function(J){function $(Y,Z,Q,G){return{uri:Y,languageId:Z,version:Q,text:G}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.string(Z.uri)&&V0.string(Z.languageId)&&V0.integer(Z.version)&&V0.string(Z.text)}J.is=X})(R80||(R80={}));(function(J){J.PlainText="plaintext",J.Markdown="markdown"})(DF||(DF={}));(function(J){function $(X){var Y=X;return Y===J.PlainText||Y===J.Markdown}J.is=$})(DF||(DF={}));(function(J){function $(X){var Y=X;return V0.objectLiteral(X)&&DF.is(Y.kind)&&V0.string(Y.value)}J.is=$})(sC||(sC={}));(function(J){J.Text=1,J.Method=2,J.Function=3,J.Constructor=4,J.Field=5,J.Variable=6,J.Class=7,J.Interface=8,J.Module=9,J.Property=10,J.Unit=11,J.Value=12,J.Enum=13,J.Keyword=14,J.Snippet=15,J.Color=16,J.File=17,J.Reference=18,J.Folder=19,J.EnumMember=20,J.Constant=21,J.Struct=22,J.Event=23,J.Operator=24,J.TypeParameter=25})(v8||(v8={}));(function(J){J.PlainText=1,J.Snippet=2})(aC||(aC={}));(function(J){J.Deprecated=1})(M80||(M80={}));(function(J){function $(Y,Z,Q){return{newText:Y,insert:Z,replace:Q}}J.create=$;function X(Y){var Z=Y;return Z&&V0.string(Z.newText)&&s7.is(Z.insert)&&s7.is(Z.replace)}J.is=X})(O80||(O80={}));(function(J){J.asIs=1,J.adjustIndentation=2})(_80||(_80={}));(function(J){function $(X){return{label:X}}J.create=$})(N80||(N80={}));(function(J){function $(X,Y){return{items:X?X:[],isIncomplete:!!Y}}J.create=$})(T80||(T80={}));(function(J){function $(Y){return Y.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}J.fromPlainText=$;function X(Y){var Z=Y;return V0.string(Z)||V0.objectLiteral(Z)&&V0.string(Z.language)&&V0.string(Z.value)}J.is=X})(N_||(N_={}));(function(J){function $(X){var Y=X;return!!Y&&V0.objectLiteral(Y)&&(sC.is(Y.contents)||N_.is(Y.contents)||V0.typedArray(Y.contents,N_.is))&&(X.range===void 0||s7.is(X.range))}J.is=$})(w80||(w80={}));(function(J){function $(X,Y){return Y?{label:X,documentation:Y}:{label:X}}J.create=$})(L80||(L80={}));(function(J){function $(X,Y){var Z=[];for(var Q=2;Q<arguments.length;Q++)Z[Q-2]=arguments[Q];var G={label:X};if(V0.defined(Y))G.documentation=Y;if(V0.defined(Z))G.parameters=Z;else G.parameters=[];return G}J.create=$})(k80||(k80={}));(function(J){J.Text=1,J.Read=2,J.Write=3})(BF||(BF={}));(function(J){function $(X,Y){var Z={range:X};if(V0.number(Y))Z.kind=Y;return Z}J.create=$})(E80||(E80={}));(function(J){J.File=1,J.Module=2,J.Namespace=3,J.Package=4,J.Class=5,J.Method=6,J.Property=7,J.Field=8,J.Constructor=9,J.Enum=10,J.Interface=11,J.Function=12,J.Variable=13,J.Constant=14,J.String=15,J.Number=16,J.Boolean=17,J.Array=18,J.Object=19,J.Key=20,J.Null=21,J.EnumMember=22,J.Struct=23,J.Event=24,J.Operator=25,J.TypeParameter=26})(h8||(h8={}));(function(J){J.Deprecated=1})(I80||(I80={}));(function(J){function $(X,Y,Z,Q,G){var q={name:X,kind:Y,location:{uri:Q,range:Z}};if(G)q.containerName=G;return q}J.create=$})(y80||(y80={}));(function(J){function $(Y,Z,Q,G,q,U){var z={name:Y,detail:Z,kind:Q,range:G,selectionRange:q};if(U!==void 0)z.children=U;return z}J.create=$;function X(Y){var Z=Y;return Z&&V0.string(Z.name)&&V0.number(Z.kind)&&s7.is(Z.range)&&s7.is(Z.selectionRange)&&(Z.detail===void 0||V0.string(Z.detail))&&(Z.deprecated===void 0||V0.boolean(Z.deprecated))&&(Z.children===void 0||Array.isArray(Z.children))&&(Z.tags===void 0||Array.isArray(Z.tags))}J.is=X})(x80||(x80={}));(function(J){J.Empty="",J.QuickFix="quickfix",J.Refactor="refactor",J.RefactorExtract="refactor.extract",J.RefactorInline="refactor.inline",J.RefactorRewrite="refactor.rewrite",J.Source="source",J.SourceOrganizeImports="source.organizeImports",J.SourceFixAll="source.fixAll"})(b80||(b80={}));(function(J){function $(Y,Z){var Q={diagnostics:Y};if(Z!==void 0&&Z!==null)Q.only=Z;return Q}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.typedArray(Z.diagnostics,M_.is)&&(Z.only===void 0||V0.typedArray(Z.only,V0.string))}J.is=X})(S80||(S80={}));(function(J){function $(Y,Z,Q){var G={title:Y},q=!0;if(typeof Z==="string")q=!1,G.kind=Z;else if(FF.is(Z))G.command=Z;else G.edit=Z;if(q&&Q!==void 0)G.kind=Q;return G}J.create=$;function X(Y){var Z=Y;return Z&&V0.string(Z.title)&&(Z.diagnostics===void 0||V0.typedArray(Z.diagnostics,M_.is))&&(Z.kind===void 0||V0.string(Z.kind))&&(Z.edit!==void 0||Z.command!==void 0)&&(Z.command===void 0||FF.is(Z.command))&&(Z.isPreferred===void 0||V0.boolean(Z.isPreferred))&&(Z.edit===void 0||dC.is(Z.edit))}J.is=X})(C80||(C80={}));(function(J){function $(Y,Z){var Q={range:Y};if(V0.defined(Z))Q.data=Z;return Q}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&s7.is(Z.range)&&(V0.undefined(Z.command)||FF.is(Z.command))}J.is=X})(v80||(v80={}));(function(J){function $(Y,Z){return{tabSize:Y,insertSpaces:Z}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&V0.uinteger(Z.tabSize)&&V0.boolean(Z.insertSpaces)}J.is=X})(h80||(h80={}));(function(J){function $(Y,Z,Q){return{range:Y,target:Z,data:Q}}J.create=$;function X(Y){var Z=Y;return V0.defined(Z)&&s7.is(Z.range)&&(V0.undefined(Z.target)||V0.string(Z.target))}J.is=X})(f80||(f80={}));(function(J){function $(Y,Z){return{range:Y,parent:Z}}J.create=$;function X(Y){var Z=Y;return Z!==void 0&&s7.is(Z.range)&&(Z.parent===void 0||J.is(Z.parent))}J.is=X})(g80||(g80={}));(function(J){function $(Q,G,q,U){return new kH0(Q,G,q,U)}J.create=$;function X(Q){var G=Q;return V0.defined(G)&&V0.string(G.uri)&&(V0.undefined(G.languageId)||V0.string(G.languageId))&&V0.uinteger(G.lineCount)&&V0.func(G.getText)&&V0.func(G.positionAt)&&V0.func(G.offsetAt)?!0:!1}J.is=X;function Y(Q,G){var q=Q.getText(),U=Z(G,function(B,K){var P=B.range.start.line-K.range.start.line;if(P===0)return B.range.start.character-K.range.start.character;return P}),z=q.length;for(var H=U.length-1;H>=0;H--){var j=U[H],V=Q.offsetAt(j.range.start),W=Q.offsetAt(j.range.end);if(W<=z)q=q.substring(0,V)+j.newText+q.substring(W,q.length);else throw Error("Overlapping edit");z=V}return q}J.applyEdits=Y;function Z(Q,G){if(Q.length<=1)return Q;var q=Q.length/2|0,U=Q.slice(0,q),z=Q.slice(q);Z(U,G),Z(z,G);var H=0,j=0,V=0;while(H<U.length&&j<z.length){var W=G(U[H],z[j]);if(W<=0)Q[V++]=U[H++];else Q[V++]=z[j++]}while(H<U.length)Q[V++]=U[H++];while(j<z.length)Q[V++]=z[j++];return Q}})(p80||(p80={}));kH0=function(){function J($,X,Y,Z){this._uri=$,this._languageId=X,this._version=Y,this._content=Z,this._lineOffsets=void 0}return Object.defineProperty(J.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(J.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(J.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),J.prototype.getText=function($){if($){var X=this.offsetAt($.start),Y=this.offsetAt($.end);return this._content.substring(X,Y)}return this._content},J.prototype.update=function($,X){this._content=$.text,this._version=X,this._lineOffsets=void 0},J.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){var $=[],X=this._content,Y=!0;for(var Z=0;Z<X.length;Z++){if(Y)$.push(Z),Y=!1;var Q=X.charAt(Z);if(Y=Q==="\r"||Q===`
`,Q==="\r"&&Z+1<X.length&&X.charAt(Z+1)===`
`)Z++}if(Y&&X.length>0)$.push(X.length);this._lineOffsets=$}return this._lineOffsets},J.prototype.positionAt=function($){$=Math.max(Math.min($,this._content.length),0);var X=this.getLineOffsets(),Y=0,Z=X.length;if(Z===0)return jY.create(0,$);while(Y<Z){var Q=Math.floor((Y+Z)/2);if(X[Q]>$)Z=Q;else Y=Q+1}var G=Y-1;return jY.create(G,$-X[G])},J.prototype.offsetAt=function($){var X=this.getLineOffsets();if($.line>=X.length)return this._content.length;else if($.line<0)return 0;var Y=X[$.line],Z=$.line+1<X.length?X[$.line+1]:this._content.length;return Math.max(Math.min(Y+$.character,Z),Y)},Object.defineProperty(J.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),J}();(function(J){var $=Object.prototype.toString;function X(W){return typeof W<"u"}J.defined=X;function Y(W){return typeof W>"u"}J.undefined=Y;function Z(W){return W===!0||W===!1}J.boolean=Z;function Q(W){return $.call(W)==="[object String]"}J.string=Q;function G(W){return $.call(W)==="[object Number]"}J.number=G;function q(W,B,K){return $.call(W)==="[object Number]"&&B<=W&&W<=K}J.numberRange=q;function U(W){return $.call(W)==="[object Number]"&&-2147483648<=W&&W<=2147483647}J.integer=U;function z(W){return $.call(W)==="[object Number]"&&0<=W&&W<=2147483647}J.uinteger=z;function H(W){return $.call(W)==="[object Function]"}J.func=H;function j(W){return W!==null&&typeof W==="object"}J.objectLiteral=j;function V(W,B){return Array.isArray(W)&&W.every(B)}J.typedArray=V})(V0||(V0={}));(function(J){J.DEFAULT={allowTrailingComma:!1}})(u80||(u80={}));sH0=dH0;Qj0=class extends a80{constructor(J,$,X){super(J,$,X.onDidChange);this._disposables.push(l1.editor.onWillDisposeModel((Y)=>{this._resetSchema(Y.uri)})),this._disposables.push(l1.editor.onDidChangeModelLanguage((Y)=>{this._resetSchema(Y.model.uri)}))}_resetSchema(J){this._worker().then(($)=>{$.resetSchema(J.toString())})}};qj0={wordPattern:/(-?\d*\.\d\w*)|([^\[\{\]\}\:\"\,\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]}});var B70={};UQ(B70,{language:()=>Dj0,conf:()=>Pj0});var Pj0,Dj0;var F70=w(()=>{/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/Pj0={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},Dj0={defaultToken:"",tokenPostfix:".ini",escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/^\[[^\]]*\]/,"metatag"],[/(^\w+)(\s*)(\=)/,["key","","delimiter"]],{include:"@whitespace"},[/\d+/,"number"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"]],whitespace:[[/[ \t\r\n]+/,""],[/^\s*[#;].*$/,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]]}}});var K70={};UQ(K70,{language:()=>Mj0,conf:()=>Rj0});var Rj0,Mj0;var A70=w(()=>{/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/Rj0={comments:{blockComment:["<!--","-->"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">",notIn:["string"]}],surroundingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"`",close:"`"}],folding:{markers:{start:new RegExp("^\\s*<!--\\s*#?region\\b.*-->"),end:new RegExp("^\\s*<!--\\s*#?endregion\\b.*-->")}}},Mj0={defaultToken:"",tokenPostfix:".md",control:/[\\`*_\[\]{}()#+\-\.!]/,noncontrol:/[^\\`*_\[\]{}()#+\-\.!]/,escapes:/\\(?:@control)/,jsescapes:/\\(?:[btnfr\\"']|[0-7][0-7]?|[0-3][0-7]{2})/,empty:["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param"],tokenizer:{root:[[/^\s*\|/,"@rematch","@table_header"],[/^(\s{0,3})(#+)((?:[^\\#]|@escapes)+)((?:#+)?)/,["white","keyword","keyword","keyword"]],[/^\s*(=+|\-+)\s*$/,"keyword"],[/^\s*((\*[ ]?)+)\s*$/,"meta.separator"],[/^\s*>+/,"comment"],[/^\s*([\*\-+:]|\d+\.)\s/,"keyword"],[/^(\t|[ ]{4})[^ ].*$/,"string"],[/^\s*~~~\s*((?:\w|[\/\-#])+)?\s*$/,{token:"string",next:"@codeblock"}],[/^\s*```\s*((?:\w|[\/\-#])+).*$/,{token:"string",next:"@codeblockgh",nextEmbedded:"$1"}],[/^\s*```\s*$/,{token:"string",next:"@codeblock"}],{include:"@linecontent"}],table_header:[{include:"@table_common"},[/[^\|]+/,"keyword.table.header"]],table_body:[{include:"@table_common"},{include:"@linecontent"}],table_common:[[/\s*[\-:]+\s*/,{token:"keyword",switchTo:"table_body"}],[/^\s*\|/,"keyword.table.left"],[/^\s*[^\|]/,"@rematch","@pop"],[/^\s*$/,"@rematch","@pop"],[/\|/,{cases:{"@eos":"keyword.table.right","@default":"keyword.table.middle"}}]],codeblock:[[/^\s*~~~\s*$/,{token:"string",next:"@pop"}],[/^\s*```\s*$/,{token:"string",next:"@pop"}],[/.*$/,"variable.source"]],codeblockgh:[[/```\s*$/,{token:"string",next:"@pop",nextEmbedded:"@pop"}],[/[^`]+/,"variable.source"]],linecontent:[[/&\w+;/,"string.escape"],[/@escapes/,"escape"],[/\b__([^\\_]|@escapes|_(?!_))+__\b/,"strong"],[/\*\*([^\\*]|@escapes|\*(?!\*))+\*\*/,"strong"],[/\b_[^_]+_\b/,"emphasis"],[/\*([^\\*]|@escapes)+\*/,"emphasis"],[/`([^\\`]|@escapes)+`/,"variable"],[/\{+[^}]+\}+/,"string.target"],[/(!?\[)((?:[^\]\\]|@escapes)*)(\]\([^\)]+\))/,["string.link","","string.link"]],[/(!?\[)((?:[^\]\\]|@escapes)*)(\])/,"string.link"],{include:"html"}],html:[[/<(\w+)\/>/,"tag"],[/<(\w+)(\-|\w)*/,{cases:{"@empty":{token:"tag",next:"@tag.$1"},"@default":{token:"tag",next:"@tag.$1"}}}],[/<\/(\w+)(\-|\w)*\s*>/,{token:"tag"}],[/<!--/,"comment","@comment"]],comment:[[/[^<\-]+/,"comment.content"],[/-->/,"comment","@pop"],[/<!--/,"comment.content.invalid"],[/[<\-]/,"comment.content"]],tag:[[/[ \t\r\n]+/,"white"],[/(type)(\s*=\s*)(")([^"]+)(")/,["attribute.name.html","delimiter.html","string.html",{token:"string.html",switchTo:"@tag.$S2.$4"},"string.html"]],[/(type)(\s*=\s*)(')([^']+)(')/,["attribute.name.html","delimiter.html","string.html",{token:"string.html",switchTo:"@tag.$S2.$4"},"string.html"]],[/(\w+)(\s*=\s*)("[^"]*"|'[^']*')/,["attribute.name.html","delimiter.html","string.html"]],[/\w+/,"attribute.name.html"],[/\/>/,"tag","@pop"],[/>/,{cases:{"$S2==style":{token:"tag",switchTo:"embeddedStyle",nextEmbedded:"text/css"},"$S2==script":{cases:{$S3:{token:"tag",switchTo:"embeddedScript",nextEmbedded:"$S3"},"@default":{token:"tag",switchTo:"embeddedScript",nextEmbedded:"text/javascript"}}},"@default":{token:"tag",next:"@pop"}}}]],embeddedStyle:[[/[^<]+/,""],[/<\/style\s*>/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/</,""]],embeddedScript:[[/[^<]+/,""],[/<\/script\s*>/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/</,""]]}}});var R70={};UQ(R70,{language:()=>kj0,conf:()=>Lj0});var Oj0,_j0,Nj0,Tj0,P70=(J,$,X,Y)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Z of Nj0($))if(!Tj0.call(J,Z)&&Z!==X)Oj0(J,Z,{get:()=>$[Z],enumerable:!(Y=_j0($,Z))||Y.enumerable})}return J},wj0=(J,$,X)=>(P70(J,$,"default"),X&&P70(X,$,"default")),D70,Lj0,kj0;var M70=w(()=>{gJ();/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/Oj0=Object.defineProperty,_j0=Object.getOwnPropertyDescriptor,Nj0=Object.getOwnPropertyNames,Tj0=Object.prototype.hasOwnProperty,D70={};wj0(D70,H4);Lj0={comments:{lineComment:"#",blockComment:["'''","'''"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:new RegExp("^\\s*(?:def|class|for|if|elif|else|while|try|with|finally|except|async|match|case).*?:\\s*$"),action:{indentAction:D70.languages.IndentAction.Indent}}],folding:{offSide:!0,markers:{start:new RegExp("^\\s*#region\\b"),end:new RegExp("^\\s*#endregion\\b")}}},kj0={defaultToken:"",tokenPostfix:".python",keywords:["False","None","True","_","and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","exec","finally","for","from","global","if","import","in","is","lambda","match","nonlocal","not","or","pass","print","raise","return","try","type","while","with","yield","int","float","long","complex","hex","abs","all","any","apply","basestring","bin","bool","buffer","bytearray","callable","chr","classmethod","cmp","coerce","compile","complex","delattr","dict","dir","divmod","enumerate","eval","execfile","file","filter","format","frozenset","getattr","globals","hasattr","hash","help","id","input","intern","isinstance","issubclass","iter","len","locals","list","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","reversed","range","raw_input","reduce","reload","repr","reversed","round","self","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","unichr","unicode","vars","xrange","zip","__dict__","__methods__","__members__","__class__","__bases__","__name__","__mro__","__subclasses__","__init__","__import__"],brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/[,:;]/,"delimiter"],[/[{}\[\]()]/,"@brackets"],[/@[a-zA-Z_]\w*/,"tag"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"keyword","@default":"identifier"}}]],whitespace:[[/\s+/,"white"],[/(^#.*$)/,"comment"],[/'''/,"string","@endDocString"],[/"""/,"string","@endDblDocString"]],endDocString:[[/[^']+/,"string"],[/\\'/,"string"],[/'''/,"string","@popall"],[/'/,"string"]],endDblDocString:[[/[^"]+/,"string"],[/\\"/,"string"],[/"""/,"string","@popall"],[/"/,"string"]],numbers:[[/-?0x([abcdef]|[ABCDEF]|\d)+[lL]?/,"number.hex"],[/-?(\d*\.)?\d+([eE][+\-]?\d+)?[jJ]?[lL]?/,"number"]],strings:[[/'$/,"string.escape","@popall"],[/'/,"string.escape","@stringBody"],[/"$/,"string.escape","@popall"],[/"/,"string.escape","@dblStringBody"]],stringBody:[[/[^\\']+$/,"string","@popall"],[/[^\\']+/,"string"],[/\\./,"string"],[/'/,"string.escape","@popall"],[/\\$/,"string"]],dblStringBody:[[/[^\\"]+$/,"string","@popall"],[/[^\\"]+/,"string"],[/\\./,"string"],[/"/,"string.escape","@popall"],[/\\$/,"string"]]}}});var _70={};UQ(_70,{language:()=>Cj0,conf:()=>Sj0});var Ej0,Ij0,yj0,xj0,O70=(J,$,X,Y)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Z of yj0($))if(!xj0.call(J,Z)&&Z!==X)Ej0(J,Z,{get:()=>$[Z],enumerable:!(Y=Ij0($,Z))||Y.enumerable})}return J},bj0=(J,$,X)=>(O70(J,$,"default"),X&&O70(X,$,"default")),nC,Sj0,Cj0;var N70=w(()=>{gJ();/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/Ej0=Object.defineProperty,Ij0=Object.getOwnPropertyDescriptor,yj0=Object.getOwnPropertyNames,xj0=Object.prototype.hasOwnProperty,nC={};bj0(nC,H4);Sj0={comments:{blockComment:["<!--","-->"]},brackets:[["<",">"]],autoClosingPairs:[{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'}],surroundingPairs:[{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'}],onEnterRules:[{beforeText:new RegExp("<([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$","i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>$/i,action:{indentAction:nC.languages.IndentAction.IndentOutdent}},{beforeText:new RegExp("<(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$","i"),action:{indentAction:nC.languages.IndentAction.Indent}}]},Cj0={defaultToken:"",tokenPostfix:".xml",ignoreCase:!0,qualifiedName:/(?:[\w\.\-]+:)?[\w\.\-]+/,tokenizer:{root:[[/[^<&]+/,""],{include:"@whitespace"},[/(<)(@qualifiedName)/,[{token:"delimiter"},{token:"tag",next:"@tag"}]],[/(<\/)(@qualifiedName)(\s*)(>)/,[{token:"delimiter"},{token:"tag"},"",{token:"delimiter"}]],[/(<\?)(@qualifiedName)/,[{token:"delimiter"},{token:"metatag",next:"@tag"}]],[/(<\!)(@qualifiedName)/,[{token:"delimiter"},{token:"metatag",next:"@tag"}]],[/<\!\[CDATA\[/,{token:"delimiter.cdata",next:"@cdata"}],[/&\w+;/,"string.escape"]],cdata:[[/[^\]]+/,""],[/\]\]>/,{token:"delimiter.cdata",next:"@pop"}],[/\]/,""]],tag:[[/[ \t\r\n]+/,""],[/(@qualifiedName)(\s*=\s*)("[^"]*"|'[^']*')/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">?\/]*|'[^'>?\/]*)(?=[\?\/]\>)/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">]*|'[^'>]*)/,["attribute.name","","attribute.value"]],[/@qualifiedName/,"attribute.name"],[/\?>/,{token:"delimiter",next:"@pop"}],[/(\/)(>)/,[{token:"tag"},{token:"delimiter",next:"@pop"}]],[/>/,{token:"delimiter",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,""],[/<!--/,{token:"comment",next:"@comment"}]],comment:[[/[^<\-]+/,"comment.content"],[/-->/,{token:"comment",next:"@pop"}],[/<!--/,"comment.content.invalid"],[/[<\-]/,"comment.content"]]}}});var oC={};UQ(oC,{language:()=>hj0,conf:()=>vj0});var vj0,hj0;var tC=w(()=>{/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/vj0={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"[",close:"]"},{open:"{",close:"}"},{open:"(",close:")"},{open:"'",close:"'",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{markers:{start:new RegExp("^\\s*#pragma\\s+region\\b"),end:new RegExp("^\\s*#pragma\\s+endregion\\b")}}},hj0={defaultToken:"",tokenPostfix:".cpp",brackets:[{token:"delimiter.curly",open:"{",close:"}"},{token:"delimiter.parenthesis",open:"(",close:")"},{token:"delimiter.square",open:"[",close:"]"},{token:"delimiter.angle",open:"<",close:">"}],keywords:["abstract","amp","array","auto","bool","break","case","catch","char","class","const","constexpr","const_cast","continue","cpu","decltype","default","delegate","delete","do","double","dynamic_cast","each","else","enum","event","explicit","export","extern","false","final","finally","float","for","friend","gcnew","generic","goto","if","in","initonly","inline","int","interface","interior_ptr","internal","literal","long","mutable","namespace","new","noexcept","nullptr","__nullptr","operator","override","partial","pascal","pin_ptr","private","property","protected","public","ref","register","reinterpret_cast","restrict","return","safe_cast","sealed","short","signed","sizeof","static","static_assert","static_cast","struct","switch","template","this","thread_local","throw","tile_static","true","try","typedef","typeid","typename","union","unsigned","using","virtual","void","volatile","wchar_t","where","while","_asm","_based","_cdecl","_declspec","_fastcall","_if_exists","_if_not_exists","_inline","_multiple_inheritance","_pascal","_single_inheritance","_stdcall","_virtual_inheritance","_w64","__abstract","__alignof","__asm","__assume","__based","__box","__builtin_alignof","__cdecl","__clrcall","__declspec","__delegate","__event","__except","__fastcall","__finally","__forceinline","__gc","__hook","__identifier","__if_exists","__if_not_exists","__inline","__int128","__int16","__int32","__int64","__int8","__interface","__leave","__m128","__m128d","__m128i","__m256","__m256d","__m256i","__m512","__m512d","__m512i","__m64","__multiple_inheritance","__newslot","__nogc","__noop","__nounwind","__novtordisp","__pascal","__pin","__pragma","__property","__ptr32","__ptr64","__raise","__restrict","__resume","__sealed","__single_inheritance","__stdcall","__super","__thiscall","__try","__try_cast","__typeof","__unaligned","__unhook","__uuidof","__value","__virtual_inheritance","__w64","__wchar_t"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[0abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,integersuffix:/([uU](ll|LL|l|L)|(ll|LL|l|L)?[uU]?)/,floatsuffix:/[fFlL]?/,encoding:/u|u8|U|L/,tokenizer:{root:[[/@encoding?R\"(?:([^ ()\\\t]*))\(/,{token:"string.raw.begin",next:"@raw.$1"}],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword.$0"},"@default":"identifier"}}],[/^\s*#\s*include/,{token:"keyword.directive.include",next:"@include"}],[/^\s*#\s*\w+/,"keyword.directive"],{include:"@whitespace"},[/\[\s*\[/,{token:"annotation",next:"@annotation"}],[/[{}()<>\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/\d*\d+[eE]([\-+]?\d+)?(@floatsuffix)/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?(@floatsuffix)/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F](@integersuffix)/,"number.hex"],[/0[0-7']*[0-7](@integersuffix)/,"number.octal"],[/0[bB][0-1']*[0-1](@integersuffix)/,"number.binary"],[/\d[\d']*\d(@integersuffix)/,"number"],[/\d(@integersuffix)/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@doccomment"],[/\/\*/,"comment","@comment"],[/\/\/.*\\$/,"comment","@linecomment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],linecomment:[[/.*[^\\]$/,"comment","@pop"],[/[^]+/,"comment"]],doccomment:[[/[^\/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],raw:[[/(.*)(\))(?:([^ ()\\\t"]*))(\")/,{cases:{"$3==$S2":["string.raw","string.raw.end","string.raw.end",{token:"string.raw.end",next:"@pop"}],"@default":["string.raw","string.raw","string.raw","string.raw"]}}],[/.*/,"string.raw"]],annotation:[{include:"@whitespace"},[/using|alignas/,"keyword"],[/[a-zA-Z0-9_]+/,"annotation"],[/[,:]/,"delimiter"],[/[()]/,"@brackets"],[/\]\s*\]/,{token:"annotation",next:"@pop"}]],include:[[/(\s*)(<)([^<>]*)(>)/,["","keyword.directive.include.begin","string.include.identifier",{token:"keyword.directive.include.end",next:"@pop"}]],[/(\s*)(")([^"]*)(")/,["","keyword.directive.include.begin","string.include.identifier",{token:"keyword.directive.include.end",next:"@pop"}]]]}}});import{addLocalesMessages as dJ0}from"@blockcode/core";var hh={"code.tabs.code":"Code","code.tabs.terminal":"Terminal","code.terminalMode.repl":"REPL","code.terminalMode.hex":"HEX","code.terminalMode.text":"Text","code.terminalSend":"Send","code.terminalSendChar":"Send {char}","code.terminalSendEnter":"Send with Enter","code.terminalHexError":"HEX data format error.","code.terminalWaitforConnect":"Waiting for device connection...","code.terminalClean":"Clean"};var fh={"code.tabs.code":"代码","code.tabs.terminal":"终端","code.terminalMode.repl":"REPL","code.terminalMode.hex":"HEX","code.terminalMode.text":"文本","code.terminalSend":"发送","code.terminalSendChar":"发送 {char}","code.terminalSendEnter":"末尾加回车发送","code.terminalHexError":"HEX 格式错误。","code.terminalWaitforConnect":"正在等待连接设备…","code.terminalClean":"清除"};var gh={"code.tabs.code":"程式","code.tabs.terminal":"終端","code.terminalMode.repl":"REPL","code.terminalMode.hex":"HEX","code.terminalMode.text":"文本","code.terminalSend":"發送","code.terminalSendChar":"發送 {char}","code.terminalSendEnter":"末尾加回車發送","code.terminalHexError":"HEX 格式錯誤。","code.terminalWaitforConnect":"正在等待連接設備…","code.terminalClean":"清除"};dJ0({en:hh,"zh-Hans":fh,"zh-Hant":gh});K0('@font-face{font-family:codicon;font-display:block;src:url(./codicon.ttf)format("truetype")}.codicon[class*=codicon-]{text-rendering:auto;text-align:center;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;user-select:none;font:16px/1 codicon;text-decoration:none;display:inline-block}');K0(".codicon-wrench-subaction{opacity:.5}@keyframes codicon-spin{to{transform:rotate(360deg)}}.codicon-sync.codicon-modifier-spin,.codicon-loading.codicon-modifier-spin,.codicon-gear.codicon-modifier-spin,.codicon-notebook-state-executing.codicon-modifier-spin{animation:1.5s steps(30,end) infinite codicon-spin}.codicon-modifier-disabled{opacity:.4}.codicon-loading,.codicon-tree-item-loading:before{animation-duration:1s!important;animation-timing-function:cubic-bezier(.53,.21,.29,.67)!important}");gJ();gJ();import{useRef as uj0,useEffect as MF}from"preact/hooks";import{useSignal as k70}from"@preact/signals";import{mime as I70,classNames as cj0}from"@blockcode/utils";import{useLocalesContext as lj0,useProjectContext as dj0,setFile as sj0}from"@blockcode/core";gJ();e1();_8();O1();PG();z0();X1();K0(".monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,.monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-editor .margin-view-overlays .codicon-folding-collapsed{cursor:pointer;opacity:0;justify-content:center;align-items:center;margin-left:2px;font-size:140%;transition:opacity .5s;display:flex}.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-collapsed{transition:initial}.monaco-editor .margin-view-overlays:hover .codicon,.monaco-editor .margin-view-overlays .codicon.codicon-folding-collapsed,.monaco-editor .margin-view-overlays .codicon.codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon.alwaysShowFoldIcons{opacity:1}.monaco-editor .inline-folded:after{color:gray;content:\"⋯\";cursor:pointer;margin:.1em .2em 0;line-height:1em;display:inline}.monaco-editor .folded-background{background-color:var(--vscode-editor-foldBackground)}.monaco-editor .cldr.codicon.codicon-folding-expanded,.monaco-editor .cldr.codicon.codicon-folding-collapsed,.monaco-editor .cldr.codicon.codicon-folding-manual-expanded,.monaco-editor .cldr.codicon.codicon-folding-manual-collapsed{color:var(--vscode-editorGutter-foldingControlForeground)!important}");L4();FZ();c8();j7();_0();var bz0={[0]:" ",[1]:"u",[2]:"r"};var FH=16777215;class sO{constructor(J){let $=Math.ceil(J/32);this._states=new Uint32Array($)}get(J){let $=J/32|0,X=J%32;return(this._states[$]&1<<X)!==0}set(J,$){let X=J/32|0,Y=J%32,Z=this._states[X];if($)this._states[X]=Z|1<<Y;else this._states[X]=Z&~(1<<Y)}}class D7{constructor(J,$,X){if(J.length!==$.length||J.length>65535)throw Error("invalid startIndexes or endIndexes size");this._startIndexes=J,this._endIndexes=$,this._collapseStates=new sO(J.length),this._userDefinedStates=new sO(J.length),this._recoveredStates=new sO(J.length),this._types=X,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let J=[],$=(X,Y)=>{let Z=J[J.length-1];return this.getStartLineNumber(Z)<=X&&this.getEndLineNumber(Z)>=Y};for(let X=0,Y=this._startIndexes.length;X<Y;X++){let Z=this._startIndexes[X],Q=this._endIndexes[X];if(Z>16777215||Q>16777215)throw Error("startLineNumber or endLineNumber must not exceed 16777215");while(J.length>0&&!$(Z,Q))J.pop();let G=J.length>0?J[J.length-1]:-1;J.push(X),this._startIndexes[X]=Z+((G&255)<<24),this._endIndexes[X]=Q+((G&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(J){return this._startIndexes[J]&16777215}getEndLineNumber(J){return this._endIndexes[J]&16777215}getType(J){return this._types?this._types[J]:void 0}hasTypes(){return!!this._types}isCollapsed(J){return this._collapseStates.get(J)}setCollapsed(J,$){this._collapseStates.set(J,$)}isUserDefined(J){return this._userDefinedStates.get(J)}setUserDefined(J,$){return this._userDefinedStates.set(J,$)}isRecovered(J){return this._recoveredStates.get(J)}setRecovered(J,$){return this._recoveredStates.set(J,$)}getSource(J){if(this.isUserDefined(J))return 1;else if(this.isRecovered(J))return 2;return 0}setSource(J,$){if($===1)this.setUserDefined(J,!0),this.setRecovered(J,!1);else if($===2)this.setUserDefined(J,!1),this.setRecovered(J,!0);else this.setUserDefined(J,!1),this.setRecovered(J,!1)}setCollapsedAllOfType(J,$){let X=!1;if(this._types){for(let Y=0;Y<this._types.length;Y++)if(this._types[Y]===J)this.setCollapsed(Y,$),X=!0}return X}toRegion(J){return new Q50(this,J)}getParentIndex(J){this.ensureParentIndices();let $=((this._startIndexes[J]&4278190080)>>>24)+((this._endIndexes[J]&4278190080)>>>16);if($===65535)return-1;return $}contains(J,$){return this.getStartLineNumber(J)<=$&&this.getEndLineNumber(J)>=$}findIndex(J){let $=0,X=this._startIndexes.length;if(X===0)return-1;while($<X){let Y=Math.floor(($+X)/2);if(J<this.getStartLineNumber(Y))X=Y;else $=Y+1}return $-1}findRange(J){let $=this.findIndex(J);if($>=0){if(this.getEndLineNumber($)>=J)return $;$=this.getParentIndex($);while($!==-1){if(this.contains($,J))return $;$=this.getParentIndex($)}}return-1}toString(){let J=[];for(let $=0;$<this.length;$++)J[$]=`[${bz0[this.getSource($)]}${this.isCollapsed($)?"+":"-"}] ${this.getStartLineNumber($)}/${this.getEndLineNumber($)}`;return J.join(", ")}toFoldRange(J){return{startLineNumber:this._startIndexes[J]&16777215,endLineNumber:this._endIndexes[J]&16777215,type:this._types?this._types[J]:void 0,isCollapsed:this.isCollapsed(J),source:this.getSource(J)}}static fromFoldRanges(J){let $=J.length,X=new Uint32Array($),Y=new Uint32Array($),Z=[],Q=!1;for(let q=0;q<$;q++){let U=J[q];if(X[q]=U.startLineNumber,Y[q]=U.endLineNumber,Z.push(U.type),U.type)Q=!0}if(!Q)Z=void 0;let G=new D7(X,Y,Z);for(let q=0;q<$;q++){if(J[q].isCollapsed)G.setCollapsed(q,!0);G.setSource(q,J[q].source)}return G}static sanitizeAndMerge(J,$,X){X=X!==null&&X!==void 0?X:Number.MAX_VALUE;let Y=(B,K)=>{return Array.isArray(B)?(P)=>{return P<K?B[P]:void 0}:(P)=>{return P<K?B.toFoldRange(P):void 0}},Z=Y(J,J.length),Q=Y($,$.length),G=0,q=0,U=Z(0),z=Q(0),H=[],j,V=0,W=[];while(U||z){let B=void 0;if(z&&(!U||U.startLineNumber>=z.startLineNumber)){if(U&&U.startLineNumber===z.startLineNumber){if(z.source===1)B=z;else B=U,B.isCollapsed=z.isCollapsed&&U.endLineNumber===z.endLineNumber,B.source=0;U=Z(++G)}else if(B=z,z.isCollapsed&&z.source===0)B.source=2;z=Q(++q)}else{let K=q,P=z;while(!0){if(!P||P.startLineNumber>U.endLineNumber){B=U;break}if(P.source===1&&P.endLineNumber>U.endLineNumber)break;P=Q(++K)}U=Z(++G)}if(B){while(j&&j.endLineNumber<B.startLineNumber)j=H.pop();if(B.endLineNumber>B.startLineNumber&&B.startLineNumber>V&&B.endLineNumber<=X&&(!j||j.endLineNumber>=B.endLineNumber)){if(W.push(B),V=B.startLineNumber,j)H.push(j);j=B}}}return W}}class Q50{constructor(J,$){this.ranges=J,this.index=$}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(J){return J.startLineNumber<=this.startLineNumber&&J.endLineNumber>=this.endLineNumber}containsLine(J){return this.startLineNumber<=J&&J<=this.endLineNumber}}wQ();class FC{get regions(){return this._regions}get textModel(){return this._textModel}constructor(J,$){this._updateEventEmitter=new x,this.onDidChange=this._updateEventEmitter.event,this._textModel=J,this._decorationProvider=$,this._regions=new D7(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(J){if(!J.length)return;J=J.sort((X,Y)=>X.regionIndex-Y.regionIndex);let $={};this._decorationProvider.changeDecorations((X)=>{let Y=0,Z=-1,Q=-1,G=(q)=>{while(Y<q){let U=this._regions.getEndLineNumber(Y),z=this._regions.isCollapsed(Y);if(U<=Z){let H=this.regions.getSource(Y)!==0;X.changeDecorationOptions(this._editorDecorationIds[Y],this._decorationProvider.getDecorationOption(z,U<=Q,H))}if(z&&U>Q)Q=U;Y++}};for(let q of J){let U=q.regionIndex,z=this._editorDecorationIds[U];if(z&&!$[z]){$[z]=!0,G(U);let H=!this._regions.isCollapsed(U);this._regions.setCollapsed(U,H),Z=Math.max(Z,this._regions.getEndLineNumber(U))}}G(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:J})}removeManualRanges(J){let $=[],X=(Y)=>{for(let Z of J)if(!(Z.startLineNumber>Y.endLineNumber||Y.startLineNumber>Z.endLineNumber))return!0;return!1};for(let Y=0;Y<this._regions.length;Y++){let Z=this._regions.toFoldRange(Y);if(Z.source===0||!X(Z))$.push(Z)}this.updatePost(D7.fromFoldRanges($))}update(J,$=[]){let X=this._currentFoldedOrManualRanges($),Y=D7.sanitizeAndMerge(J,X,this._textModel.getLineCount());this.updatePost(D7.fromFoldRanges(Y))}updatePost(J){let $=[],X=-1;for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J.getStartLineNumber(Y),G=J.getEndLineNumber(Y),q=J.isCollapsed(Y),U=J.getSource(Y)!==0,z={startLineNumber:Q,startColumn:this._textModel.getLineMaxColumn(Q),endLineNumber:G,endColumn:this._textModel.getLineMaxColumn(G)+1};if($.push({range:z,options:this._decorationProvider.getDecorationOption(q,G<=X,U)}),q&&G>X)X=G}this._decorationProvider.changeDecorations((Y)=>this._editorDecorationIds=Y.deltaDecorations(this._editorDecorationIds,$)),this._regions=J,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(J=[]){let $=(Y,Z)=>{for(let Q of J)if(Y<Q&&Q<=Z)return!0;return!1},X=[];for(let Y=0,Z=this._regions.length;Y<Z;Y++){let Q=this.regions.isCollapsed(Y),G=this.regions.getSource(Y);if(Q||G!==0){let q=this._regions.toFoldRange(Y),U=this._textModel.getDecorationRange(this._editorDecorationIds[Y]);if(U){if(Q&&$(U.startLineNumber,U.endLineNumber))Q=!1;X.push({startLineNumber:U.startLineNumber,endLineNumber:U.endLineNumber,type:q.type,isCollapsed:Q,source:G})}}}return X}getMemento(){let J=this._currentFoldedOrManualRanges(),$=[],X=this._textModel.getLineCount();for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y];if(Q.startLineNumber>=Q.endLineNumber||Q.startLineNumber<1||Q.endLineNumber>X)continue;let G=this._getLinesChecksum(Q.startLineNumber+1,Q.endLineNumber);$.push({startLineNumber:Q.startLineNumber,endLineNumber:Q.endLineNumber,isCollapsed:Q.isCollapsed,source:Q.source,checksum:G})}return $.length>0?$:void 0}applyMemento(J){var $,X;if(!Array.isArray(J))return;let Y=[],Z=this._textModel.getLineCount();for(let G of J){if(G.startLineNumber>=G.endLineNumber||G.startLineNumber<1||G.endLineNumber>Z)continue;let q=this._getLinesChecksum(G.startLineNumber+1,G.endLineNumber);if(!G.checksum||q===G.checksum)Y.push({startLineNumber:G.startLineNumber,endLineNumber:G.endLineNumber,type:void 0,isCollapsed:($=G.isCollapsed)!==null&&$!==void 0?$:!0,source:(X=G.source)!==null&&X!==void 0?X:0})}let Q=D7.sanitizeAndMerge(this._regions,Y,Z);this.updatePost(D7.fromFoldRanges(Q))}_getLinesChecksum(J,$){return TQ(this._textModel.getLineContent(J)+this._textModel.getLineContent($))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(J,$){let X=[];if(this._regions){let Y=this._regions.findRange(J),Z=1;while(Y>=0){let Q=this._regions.toRegion(Y);if(!$||$(Q,Z))X.push(Q);Z++,Y=Q.parentIndex}}return X}getRegionAtLine(J){if(this._regions){let $=this._regions.findRange(J);if($>=0)return this._regions.toRegion($)}return null}getRegionsInside(J,$){let X=[],Y=J?J.regionIndex+1:0,Z=J?J.endLineNumber:Number.MAX_VALUE;if($&&$.length===2){let Q=[];for(let G=Y,q=this._regions.length;G<q;G++){let U=this._regions.toRegion(G);if(this._regions.getStartLineNumber(G)<Z){while(Q.length>0&&!U.containedBy(Q[Q.length-1]))Q.pop();if(Q.push(U),$(U,Q.length))X.push(U)}else break}}else for(let Q=Y,G=this._regions.length;Q<G;Q++){let q=this._regions.toRegion(Q);if(this._regions.getStartLineNumber(Q)<Z){if(!$||$(q))X.push(q)}else break}return X}}function G50(J,$,X){let Y=[];for(let Z of X){let Q=J.getRegionAtLine(Z);if(Q){let G=!Q.isCollapsed;if(Y.push(Q),$>1){let q=J.getRegionsInside(Q,(U,z)=>U.isCollapsed!==G&&z<$);Y.push(...q)}}}J.toggleCollapseState(Y)}function jq(J,$,X=Number.MAX_VALUE,Y){let Z=[];if(Y&&Y.length>0)for(let Q of Y){let G=J.getRegionAtLine(Q);if(G){if(G.isCollapsed!==$)Z.push(G);if(X>1){let q=J.getRegionsInside(G,(U,z)=>U.isCollapsed!==$&&z<X);Z.push(...q)}}}else{let Q=J.getRegionsInside(null,(G,q)=>G.isCollapsed!==$&&q<X);Z.push(...Q)}J.toggleCollapseState(Z)}function KC(J,$,X,Y){let Z=[];for(let Q of Y){let G=J.getAllRegionsAtLine(Q,(q,U)=>q.isCollapsed!==$&&U<=X);Z.push(...G)}J.toggleCollapseState(Z)}function q50(J,$,X){let Y=[];for(let Z of X){let Q=J.getAllRegionsAtLine(Z,(G)=>G.isCollapsed!==$);if(Q.length>0)Y.push(Q[0])}J.toggleCollapseState(Y)}function U50(J,$,X,Y){let Z=(G,q)=>q===$&&G.isCollapsed!==X&&!Y.some((U)=>G.containsLine(U)),Q=J.getRegionsInside(null,Z);J.toggleCollapseState(Q)}function AC(J,$,X){let Y=[];for(let G of X){let q=J.getAllRegionsAtLine(G,void 0);if(q.length>0)Y.push(q[0])}let Z=(G)=>Y.every((q)=>!q.containedBy(G)&&!G.containedBy(q))&&G.isCollapsed!==$,Q=J.getRegionsInside(null,Z);J.toggleCollapseState(Q)}function aO(J,$,X){let{textModel:Y,regions:Z}=J,Q=[];for(let G=Z.length-1;G>=0;G--)if(X!==Z.isCollapsed(G)){let q=Z.getStartLineNumber(G);if($.test(Y.getLineContent(q)))Q.push(Z.toRegion(G))}J.toggleCollapseState(Q)}function rO(J,$,X){let Y=J.regions,Z=[];for(let Q=Y.length-1;Q>=0;Q--)if(X!==Y.isCollapsed(Q)&&$===Y.getType(Q))Z.push(Y.toRegion(Q));J.toggleCollapseState(Z)}function z50(J,$){let X=null,Y=$.getRegionAtLine(J);if(Y!==null){if(X=Y.startLineNumber,J===X){let Z=Y.parentIndex;if(Z!==-1)X=$.regions.getStartLineNumber(Z);else X=null}}return X}function H50(J,$){let X=$.getRegionAtLine(J);if(X!==null&&X.startLineNumber===J)if(J!==X.startLineNumber)return X.startLineNumber;else{let Y=X.parentIndex,Z=0;if(Y!==-1)Z=$.regions.getStartLineNumber(X.parentIndex);while(X!==null)if(X.regionIndex>0){if(X=$.regions.toRegion(X.regionIndex-1),X.startLineNumber<=Z)return null;else if(X.parentIndex===Y)return X.startLineNumber}else return null}else if($.regions.length>0){X=$.regions.toRegion($.regions.length-1);while(X!==null){if(X.startLineNumber<J)return X.startLineNumber;if(X.regionIndex>0)X=$.regions.toRegion(X.regionIndex-1);else X=null}}return null}function j50(J,$){let X=$.getRegionAtLine(J);if(X!==null&&X.startLineNumber===J){let Y=X.parentIndex,Z=0;if(Y!==-1)Z=$.regions.getEndLineNumber(X.parentIndex);else if($.regions.length===0)return null;else Z=$.regions.getEndLineNumber($.regions.length-1);while(X!==null)if(X.regionIndex<$.regions.length){if(X=$.regions.toRegion(X.regionIndex+1),X.startLineNumber>=Z)return null;else if(X.parentIndex===Y)return X.startLineNumber}else return null}else if($.regions.length>0){X=$.regions.toRegion(0);while(X!==null){if(X.startLineNumber>J)return X.startLineNumber;if(X.regionIndex<$.regions.length)X=$.regions.toRegion(X.regionIndex+1);else X=null}}return null}W$();_0();i0();class PC{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(J){if(this._updateEventEmitter=new x,this._hasLineChanges=!1,this._foldingModel=J,this._foldingModelListener=J.onDidChange(($)=>this.updateHiddenRanges()),this._hiddenRanges=[],J.regions.length)this.updateHiddenRanges()}notifyChangeModelContent(J){if(this._hiddenRanges.length&&!this._hasLineChanges)this._hasLineChanges=J.changes.some(($)=>{return $.range.endLineNumber!==$.range.startLineNumber||p4($.text)[0]!==0})}updateHiddenRanges(){let J=!1,$=[],X=0,Y=0,Z=Number.MAX_VALUE,Q=-1,G=this._foldingModel.regions;for(;X<G.length;X++){if(!G.isCollapsed(X))continue;let q=G.getStartLineNumber(X)+1,U=G.getEndLineNumber(X);if(Z<=q&&U<=Q)continue;if(!J&&Y<this._hiddenRanges.length&&this._hiddenRanges[Y].startLineNumber===q&&this._hiddenRanges[Y].endLineNumber===U)$.push(this._hiddenRanges[Y]),Y++;else J=!0,$.push(new k(q,1,U,1));Z=q,Q=U}if(this._hasLineChanges||J||Y<this._hiddenRanges.length)this.applyHiddenRanges($)}applyHiddenRanges(J){this._hiddenRanges=J,this._hasLineChanges=!1,this._updateEventEmitter.fire(J)}hasRanges(){return this._hiddenRanges.length>0}isHidden(J){return V50(this._hiddenRanges,J)!==null}adjustSelections(J){let $=!1,X=this._foldingModel.textModel,Y=null,Z=(Q)=>{if(!Y||!Sz0(Q,Y))Y=V50(this._hiddenRanges,Q);if(Y)return Y.startLineNumber-1;return null};for(let Q=0,G=J.length;Q<G;Q++){let q=J[Q],U=Z(q.startLineNumber);if(U)q=q.setStartPosition(U,X.getLineMaxColumn(U)),$=!0;let z=Z(q.endLineNumber);if(z)q=q.setEndPosition(z,X.getLineMaxColumn(z)),$=!0;J[Q]=q}return $}dispose(){if(this.hiddenRanges.length>0)this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges);if(this._foldingModelListener)this._foldingModelListener.dispose(),this._foldingModelListener=null}}function Sz0(J,$){return J>=$.startLineNumber&&J<=$.endLineNumber}function V50(J,$){let X=VU(J,(Y)=>$<Y.startLineNumber)-1;if(X>=0&&J[X].endLineNumber>=$)return J[X];return null}var Cz0=5000,vz0="indent";class iO{constructor(J,$,X){this.editorModel=J,this.languageConfigurationService=$,this.foldingRangesLimit=X,this.id=vz0}dispose(){}compute(J){let $=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,X=$&&!!$.offSide,Y=$&&$.markers;return Promise.resolve(fz0(this.editorModel,X,Y,this.foldingRangesLimit))}}class W50{constructor(J){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=J}insertFirst(J,$,X){if(J>FH||$>FH)return;let Y=this._length;if(this._startIndexes[Y]=J,this._endIndexes[Y]=$,this._length++,X<1000)this._indentOccurrences[X]=(this._indentOccurrences[X]||0)+1}toIndentRanges(J){let $=this._foldingRangesLimit.limit;if(this._length<=$){this._foldingRangesLimit.update(this._length,!1);let X=new Uint32Array(this._length),Y=new Uint32Array(this._length);for(let Z=this._length-1,Q=0;Z>=0;Z--,Q++)X[Q]=this._startIndexes[Z],Y[Q]=this._endIndexes[Z];return new D7(X,Y)}else{this._foldingRangesLimit.update(this._length,$);let X=0,Y=this._indentOccurrences.length;for(let q=0;q<this._indentOccurrences.length;q++){let U=this._indentOccurrences[q];if(U){if(U+X>$){Y=q;break}X+=U}}let Z=J.getOptions().tabSize,Q=new Uint32Array($),G=new Uint32Array($);for(let q=this._length-1,U=0;q>=0;q--){let z=this._startIndexes[q],H=J.getLineContent(z),j=vV(H,Z);if(j<Y||j===Y&&X++<$)Q[U]=z,G[U]=this._endIndexes[q],U++}return new D7(Q,G)}}}var hz0={limit:Cz0,update:()=>{}};function fz0(J,$,X,Y=hz0){let Z=J.getOptions().tabSize,Q=new W50(Y),G=void 0;if(X)G=new RegExp(`(${X.start.source})|(?:${X.end.source})`);let q=[],U=J.getLineCount()+1;q.push({indent:-1,endAbove:U,line:U});for(let z=J.getLineCount();z>0;z--){let H=J.getLineContent(z),j=vV(H,Z),V=q[q.length-1];if(j===-1){if($)V.endAbove=z;continue}let W;if(G&&(W=H.match(G)))if(W[1]){let B=q.length-1;while(B>0&&q[B].indent!==-2)B--;if(B>0){q.length=B+1,V=q[B],Q.insertFirst(z,V.line,j),V.line=z,V.indent=j,V.endAbove=z;continue}}else{q.push({indent:-2,endAbove:z,line:z});continue}if(V.indent>j){do q.pop(),V=q[q.length-1];while(V.indent>j);let B=V.endAbove-1;if(B-z>=1)Q.insertFirst(z,B,j)}if(V.indent===j)V.endAbove=z;else q.push({indent:j,endAbove:z,line:z})}return Q.toIndentRanges(J)}c0();t1();k5();O9();G2();c0();i8();ZH();G5();I5();var gz0=I("editor.foldBackground",{light:y0(YZ,0.3),dark:y0(YZ,0.3),hcDark:null,hcLight:null},F("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);I("editorGutter.foldingControlForeground",{dark:R$,light:R$,hcDark:R$,hcLight:R$},F("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));var DC=m7("folding-expanded",F0.chevronDown,F("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),RC=m7("folding-collapsed",F0.chevronRight,F("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),B50=m7("folding-manual-collapsed",RC,F("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),F50=m7("folding-manual-expanded",DC,F("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),MC={color:VZ(gz0),position:_J.Inline},KH=F("linesCollapsed","Click to expand the range."),nO=F("linesExpanded","Click to collapse the range.");class q5{constructor(J){this.editor=J,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(J,$,X){if($)return q5.HIDDEN_RANGE_DECORATION;if(this.showFoldingControls==="never"){if(J)return this.showFoldingHighlights?q5.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:q5.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;return q5.NO_CONTROLS_EXPANDED_RANGE_DECORATION}if(J)return X?this.showFoldingHighlights?q5.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:q5.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?q5.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:q5.COLLAPSED_VISUAL_DECORATION;else if(this.showFoldingControls==="mouseover")return X?q5.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:q5.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;else return X?q5.MANUALLY_EXPANDED_VISUAL_DECORATION:q5.EXPANDED_VISUAL_DECORATION}changeDecorations(J){return this.editor.changeDecorations(J)}removeDecorations(J){this.editor.removeDecorations(J)}}q5.COLLAPSED_VISUAL_DECORATION=C1.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:KH,firstLineDecorationClassName:h0.asClassName(RC)});q5.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=C1.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:MC,isWholeLine:!0,linesDecorationsTooltip:KH,firstLineDecorationClassName:h0.asClassName(RC)});q5.MANUALLY_COLLAPSED_VISUAL_DECORATION=C1.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:KH,firstLineDecorationClassName:h0.asClassName(B50)});q5.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=C1.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:MC,isWholeLine:!0,linesDecorationsTooltip:KH,firstLineDecorationClassName:h0.asClassName(B50)});q5.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=C1.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:KH});q5.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=C1.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:MC,isWholeLine:!0,linesDecorationsTooltip:KH});q5.EXPANDED_VISUAL_DECORATION=C1.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+h0.asClassName(DC),linesDecorationsTooltip:nO});q5.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=C1.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:h0.asClassName(DC),linesDecorationsTooltip:nO});q5.MANUALLY_EXPANDED_VISUAL_DECORATION=C1.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+h0.asClassName(F50),linesDecorationsTooltip:nO});q5.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=C1.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:h0.asClassName(F50),linesDecorationsTooltip:nO});q5.NO_CONTROLS_EXPANDED_RANGE_DECORATION=C1.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});q5.HIDDEN_RANGE_DECORATION=C1.register({description:"folding-hidden-range-decoration",stickiness:1});O1();z0();var pz0={},mz0="syntax";class oO{constructor(J,$,X,Y,Z){if(this.editorModel=J,this.providers=$,this.handleFoldingRangesChange=X,this.foldingRangesLimit=Y,this.fallbackRangeProvider=Z,this.id=mz0,this.disposables=new $0,Z)this.disposables.add(Z);for(let Q of $)if(typeof Q.onDidChange==="function")this.disposables.add(Q.onDidChange(X))}compute(J){return uz0(this.providers,this.editorModel,J).then(($)=>{var X,Y;if($)return cz0($,this.foldingRangesLimit);return(Y=(X=this.fallbackRangeProvider)===null||X===void 0?void 0:X.compute(J))!==null&&Y!==void 0?Y:null})}dispose(){this.disposables.dispose()}}function uz0(J,$,X){let Y=null,Z=J.map((Q,G)=>{return Promise.resolve(Q.provideFoldingRanges($,pz0,X)).then((q)=>{if(X.isCancellationRequested)return;if(Array.isArray(q)){if(!Array.isArray(Y))Y=[];let U=$.getLineCount();for(let z of q)if(z.start>0&&z.end>z.start&&z.end<=U)Y.push({start:z.start,end:z.end,rank:G,kind:z.kind})}},QX)});return Promise.all(Z).then((Q)=>{return Y})}class K50{constructor(J){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=J}add(J,$,X,Y){if(J>FH||$>FH)return;let Z=this._length;if(this._startIndexes[Z]=J,this._endIndexes[Z]=$,this._nestingLevels[Z]=Y,this._types[Z]=X,this._length++,Y<30)this._nestingLevelCounts[Y]=(this._nestingLevelCounts[Y]||0)+1}toIndentRanges(){let J=this._foldingRangesLimit.limit;if(this._length<=J){this._foldingRangesLimit.update(this._length,!1);let $=new Uint32Array(this._length),X=new Uint32Array(this._length);for(let Y=0;Y<this._length;Y++)$[Y]=this._startIndexes[Y],X[Y]=this._endIndexes[Y];return new D7($,X,this._types)}else{this._foldingRangesLimit.update(this._length,J);let $=0,X=this._nestingLevelCounts.length;for(let G=0;G<this._nestingLevelCounts.length;G++){let q=this._nestingLevelCounts[G];if(q){if(q+$>J){X=G;break}$+=q}}let Y=new Uint32Array(J),Z=new Uint32Array(J),Q=[];for(let G=0,q=0;G<this._length;G++){let U=this._nestingLevels[G];if(U<X||U===X&&$++<J)Y[q]=this._startIndexes[G],Z[q]=this._endIndexes[G],Q[q]=this._types[G],q++}return new D7(Y,Z,Q)}}}function cz0(J,$){let X=J.sort((G,q)=>{let U=G.start-q.start;if(U===0)U=G.rank-q.rank;return U}),Y=new K50($),Z=void 0,Q=[];for(let G of X)if(!Z)Z=G,Y.add(G.start,G.end,G.kind&&G.kind.value,Q.length);else if(G.start>Z.start)if(G.end<=Z.end)Q.push(Z),Z=G,Y.add(G.start,G.end,G.kind&&G.kind.value,Q.length);else{if(G.start>Z.end){do Z=Q.pop();while(Z&&G.start>Z.end);if(Z)Q.push(Z);Z=G}Y.add(G.start,G.end,G.kind&&G.kind.value,Q.length)}return Y.toIndentRanges()}wZ();Vy();qX();f4();_0();C7();V5();vY();H7();var lz0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},oB=function(J,$){return function(X,Y){$(X,Y,J)}},AH,t8=new A0("foldingEnabled",!1),Vq=AH=class extends m{static get($){return $.getContribution(AH.ID)}static getFoldingRangeProviders($,X){var Y,Z;let Q=$.foldingRangeProvider.ordered(X);return(Z=(Y=AH._foldingRangeSelector)===null||Y===void 0?void 0:Y.call(AH,Q,X))!==null&&Z!==void 0?Z:Q}constructor($,X,Y,Z,Q,G){super();this.contextKeyService=X,this.languageConfigurationService=Y,this.languageFeaturesService=G,this.localToDispose=this._register(new $0),this.editor=$,this._foldingLimitReporter=new A50($);let q=this.editor.getOptions();this._isEnabled=q.get(43),this._useFoldingProviders=q.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=q.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=q.get(46),this.updateDebounceInfo=Q.for(G.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new q5($),this.foldingDecorationProvider.showFoldingControls=q.get(109),this.foldingDecorationProvider.showFoldingHighlights=q.get(45),this.foldingEnabled=t8.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration((U)=>{if(U.hasChanged(43))this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged();if(U.hasChanged(47))this.onModelChanged();if(U.hasChanged(109)||U.hasChanged(45)){let z=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=z.get(109),this.foldingDecorationProvider.showFoldingHighlights=z.get(45),this.triggerFoldingModelChanged()}if(U.hasChanged(44))this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged();if(U.hasChanged(48))this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48);if(U.hasChanged(46))this._foldingImportsByDefault=this.editor.getOptions().get(46)})),this.onModelChanged()}saveViewState(){let $=this.editor.getModel();if(!$||!this._isEnabled||$.isTooLargeForTokenization())return{};if(this.foldingModel){let X=this.foldingModel.getMemento(),Y=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:X,lineCount:$.getLineCount(),provider:Y,foldedImports:this._currentModelHasFoldedImports}}return}restoreViewState($){let X=this.editor.getModel();if(!X||!this._isEnabled||X.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!$)return;if(this._currentModelHasFoldedImports=!!$.foldedImports,$.collapsedRegions&&$.collapsedRegions.length>0&&this.foldingModel){this._restoringViewState=!0;try{this.foldingModel.applyMemento($.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();let $=this.editor.getModel();if(!this._isEnabled||!$||$.isTooLargeForTokenization())return;this._currentModelHasFoldedImports=!1,this.foldingModel=new FC($,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new PC(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((X)=>this.onHiddenRangesChanges(X))),this.updateScheduler=new AJ(this.updateDebounceInfo.get($)),this.cursorChangedScheduler=new H6(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent((X)=>this.onDidChangeModelContent(X))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown((X)=>this.onEditorMouseDown(X))),this.localToDispose.add(this.editor.onMouseUp((X)=>this.onEditorMouseUp(X))),this.localToDispose.add({dispose:()=>{var X,Y;if(this.foldingRegionPromise)this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null;(X=this.updateScheduler)===null||X===void 0||X.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(Y=this.rangeProvider)===null||Y===void 0||Y.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged()}onFoldingStrategyChanged(){var $;($=this.rangeProvider)===null||$===void 0||$.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider($){if(this.rangeProvider)return this.rangeProvider;let X=new iO($,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=X,this._useFoldingProviders&&this.foldingModel){let Y=AH.getFoldingRangeProviders(this.languageFeaturesService,$);if(Y.length>0)this.rangeProvider=new oO($,Y,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,X)}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent($){var X;(X=this.hiddenRangeModel)===null||X===void 0||X.notifyChangeModelContent($),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){if(this.updateScheduler){if(this.foldingRegionPromise)this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null;this.foldingModelPromise=this.updateScheduler.trigger(()=>{let $=this.foldingModel;if(!$)return null;let X=new w5,Y=this.getRangeProvider($.textModel),Z=this.foldingRegionPromise=bG((Q)=>Y.compute(Q));return Z.then((Q)=>{if(Q&&Z===this.foldingRegionPromise){let G;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let H=Q.setCollapsedAllOfType(u8.Imports.value,!0);if(H)G=vJ.capture(this.editor),this._currentModelHasFoldedImports=H}let q=this.editor.getSelections(),U=q?q.map((H)=>H.startLineNumber):[];$.update(Q,U),G===null||G===void 0||G.restore(this.editor);let z=this.updateDebounceInfo.update($.textModel,X.elapsed());if(this.updateScheduler)this.updateScheduler.defaultDelay=z}return $})}).then(void 0,($)=>{return $1($),null})}}onHiddenRangesChanges($){if(this.hiddenRangeModel&&$.length&&!this._restoringViewState){let X=this.editor.getSelections();if(X){if(this.hiddenRangeModel.adjustSelections(X))this.editor.setSelections(X)}}this.editor.setHiddenAreas($,this)}onCursorPositionChanged(){if(this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges())this.cursorChangedScheduler.schedule()}revealCursor(){let $=this.getFoldingModel();if(!$)return;$.then((X)=>{if(X){let Y=this.editor.getSelections();if(Y&&Y.length>0){let Z=[];for(let Q of Y){let G=Q.selectionStartLineNumber;if(this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(G))Z.push(...X.getAllRegionsAtLine(G,(q)=>q.isCollapsed&&G>q.startLineNumber))}if(Z.length)X.toggleCollapseState(Z),this.reveal(Y[0].getPosition())}}}).then(void 0,$1)}onEditorMouseDown($){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!$.target||!$.target.range)return;if(!$.event.leftButton&&!$.event.middleButton)return;let X=$.target.range,Y=!1;switch($.target.type){case 4:{let Z=$.target.detail,Q=$.target.element.offsetLeft;if(Z.offsetX-Q<4)return;Y=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){if(!$.target.detail.isAfterLines)break}return}case 6:{if(this.hiddenRangeModel.hasRanges()){let Z=this.editor.getModel();if(Z&&X.startColumn===Z.getLineMaxColumn(X.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:X.startLineNumber,iconClicked:Y}}onEditorMouseUp($){let X=this.foldingModel;if(!X||!this.mouseDownInfo||!$.target)return;let Y=this.mouseDownInfo.lineNumber,Z=this.mouseDownInfo.iconClicked,Q=$.target.range;if(!Q||Q.startLineNumber!==Y)return;if(Z){if($.target.type!==4)return}else{let q=this.editor.getModel();if(!q||Q.startColumn!==q.getLineMaxColumn(Y))return}let G=X.getRegionAtLine(Y);if(G&&G.startLineNumber===Y){let q=G.isCollapsed;if(Z||q){let U=$.event.altKey,z=[];if(U){let H=(V)=>!V.containedBy(G)&&!G.containedBy(V),j=X.getRegionsInside(null,H);for(let V of j)if(V.isCollapsed)z.push(V);if(z.length===0)z=j}else{let H=$.event.middleButton||$.event.shiftKey;if(H){for(let j of X.getRegionsInside(G))if(j.isCollapsed===q)z.push(j)}if(q||!H||z.length===0)z.push(G)}X.toggleCollapseState(z),this.reveal({lineNumber:Y,column:1})}}}reveal($){this.editor.revealPositionInCenterIfOutsideViewport($,0)}};Vq.ID="editor.contrib.folding";Vq=AH=lz0([oB(1,m0),oB(2,C6),oB(3,K8),oB(4,jy),oB(5,D1)],Vq);class A50{constructor(J){this.editor=J,this._onDidChange=new x,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(J,$){if(J!==this._computed||$!==this._limited)this._computed=J,this._limited=$,this._onDidChange.fire()}}class e8 extends RJ{runEditorCommand(J,$,X){let Y=J.get(C6),Z=Vq.get($);if(!Z)return;let Q=Z.getFoldingModel();if(Q)return this.reportTelemetry(J,$),Q.then((G)=>{if(G){this.invoke(Z,G,$,X,Y);let q=$.getSelection();if(q)Z.reveal(q.getStartPosition())}})}getSelectedLines(J){let $=J.getSelections();return $?$.map((X)=>X.startLineNumber):[]}getLineNumbers(J,$){if(J&&J.selectionLines)return J.selectionLines.map((X)=>X+1);return this.getSelectedLines($)}run(J,$){}}function P50(J){if(!M8(J)){if(!z5(J))return!1;let $=J;if(!M8($.levels)&&!l9($.levels))return!1;if(!M8($.direction)&&!N5($.direction))return!1;if(!M8($.selectionLines)&&(!Array.isArray($.selectionLines)||!$.selectionLines.every(l9)))return!1}return!0}class D50 extends e8{constructor(){super({id:"editor.unfold",label:F("unfoldAction.label","Unfold"),alias:"Unfold",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:P50,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(J,$,X,Y){let Z=Y&&Y.levels||1,Q=this.getLineNumbers(Y,X);if(Y&&Y.direction==="up")KC($,!1,Z,Q);else jq($,!1,Z,Q)}}class R50 extends e8{constructor(){super({id:"editor.unfoldRecursively",label:F("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2142),weight:100}})}invoke(J,$,X,Y){jq($,!1,Number.MAX_VALUE,this.getSelectedLines(X))}}class M50 extends e8{constructor(){super({id:"editor.fold",label:F("foldAction.label","Fold"),alias:"Fold",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:P50,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(J,$,X,Y){let Z=this.getLineNumbers(Y,X),Q=Y&&Y.levels,G=Y&&Y.direction;if(typeof Q!=="number"&&typeof G!=="string")q50($,!0,Z);else if(G==="up")KC($,!0,Q||1,Z);else jq($,!0,Q||1,Z)}}class O50 extends e8{constructor(){super({id:"editor.toggleFold",label:F("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2090),weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);G50($,1,Y)}}class _50 extends e8{constructor(){super({id:"editor.foldRecursively",label:F("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2140),weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);jq($,!0,Number.MAX_VALUE,Y)}}class N50 extends e8{constructor(){super({id:"editor.foldAllBlockComments",label:F("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2138),weight:100}})}invoke(J,$,X,Y,Z){if($.regions.hasTypes())rO($,u8.Comment.value,!0);else{let Q=X.getModel();if(!Q)return;let G=Z.getLanguageConfiguration(Q.getLanguageId()).comments;if(G&&G.blockCommentStartToken){let q=new RegExp("^\\s*"+b7(G.blockCommentStartToken));aO($,q,!0)}}}}class T50 extends e8{constructor(){super({id:"editor.foldAllMarkerRegions",label:F("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2077),weight:100}})}invoke(J,$,X,Y,Z){if($.regions.hasTypes())rO($,u8.Region.value,!0);else{let Q=X.getModel();if(!Q)return;let G=Z.getLanguageConfiguration(Q.getLanguageId()).foldingRules;if(G&&G.markers&&G.markers.start){let q=new RegExp(G.markers.start);aO($,q,!0)}}}}class w50 extends e8{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:F("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2078),weight:100}})}invoke(J,$,X,Y,Z){if($.regions.hasTypes())rO($,u8.Region.value,!1);else{let Q=X.getModel();if(!Q)return;let G=Z.getLanguageConfiguration(Q.getLanguageId()).foldingRules;if(G&&G.markers&&G.markers.start){let q=new RegExp(G.markers.start);aO($,q,!1)}}}}class L50 extends e8{constructor(){super({id:"editor.foldAllExcept",label:F("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2136),weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);AC($,!0,Y)}}class k50 extends e8{constructor(){super({id:"editor.unfoldAllExcept",label:F("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2134),weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);AC($,!1,Y)}}class E50 extends e8{constructor(){super({id:"editor.foldAll",label:F("foldAllAction.label","Fold All"),alias:"Fold All",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2069),weight:100}})}invoke(J,$,X){jq($,!0)}}class I50 extends e8{constructor(){super({id:"editor.unfoldAll",label:F("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2088),weight:100}})}invoke(J,$,X){jq($,!1)}}class Wq extends e8{getFoldingLevel(){return parseInt(this.id.substr(Wq.ID_PREFIX.length))}invoke(J,$,X){U50($,this.getFoldingLevel(),!0,this.getSelectedLines(X))}}Wq.ID_PREFIX="editor.foldLevel";Wq.ID=(J)=>Wq.ID_PREFIX+J;class y50 extends e8{constructor(){super({id:"editor.gotoParentFold",label:F("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);if(Y.length>0){let Z=z50(Y[0],$);if(Z!==null)X.setSelection({startLineNumber:Z,startColumn:1,endLineNumber:Z,endColumn:1})}}}class x50 extends e8{constructor(){super({id:"editor.gotoPreviousFold",label:F("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);if(Y.length>0){let Z=H50(Y[0],$);if(Z!==null)X.setSelection({startLineNumber:Z,startColumn:1,endLineNumber:Z,endColumn:1})}}}class b50 extends e8{constructor(){super({id:"editor.gotoNextFold",label:F("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,weight:100}})}invoke(J,$,X){let Y=this.getSelectedLines(X);if(Y.length>0){let Z=j50(Y[0],$);if(Z!==null)X.setSelection({startLineNumber:Z,startColumn:1,endLineNumber:Z,endColumn:1})}}}class S50 extends e8{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:F("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2135),weight:100}})}invoke(J,$,X){var Y;let Z=[],Q=X.getSelections();if(Q){for(let G of Q){let q=G.endLineNumber;if(G.endColumn===1)--q;if(q>G.startLineNumber)Z.push({startLineNumber:G.startLineNumber,endLineNumber:q,type:void 0,isCollapsed:!0,source:1}),X.setSelection({startLineNumber:G.startLineNumber,startColumn:1,endLineNumber:G.startLineNumber,endColumn:1})}if(Z.length>0){Z.sort((q,U)=>{return q.startLineNumber-U.startLineNumber});let G=D7.sanitizeAndMerge($.regions,Z,(Y=X.getModel())===null||Y===void 0?void 0:Y.getLineCount());$.updatePost(D7.fromFoldRanges(G))}}}}class C50 extends e8{constructor(){super({id:"editor.removeManualFoldingRanges",label:F("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2137),weight:100}})}invoke(J,$,X){let Y=X.getSelections();if(Y){let Z=[];for(let Q of Y){let{startLineNumber:G,endLineNumber:q}=Q;Z.push(q>=G?{startLineNumber:G,endLineNumber:q}:{endLineNumber:q,startLineNumber:G})}$.removeManualRanges(Z),J.triggerFoldingModelChanged()}}}w4(Vq.ID,Vq,0);F5(D50);F5(R50);F5(M50);F5(_50);F5(E50);F5(I50);F5(N50);F5(T50);F5(w50);F5(L50);F5(k50);F5(O50);F5(y50);F5(x50);F5(b50);F5(S50);F5(C50);for(let J=1;J<=7;J++)bp(new Wq({id:Wq.ID(J),label:F("foldLevelAction.label","Fold Level {0}",J),alias:`Fold Level ${J}`,precondition:t8,kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2048|21+J),weight:100}}));M6.registerCommand("_executeFoldingRangeProvider",async function(J,...$){let[X]=$;if(!(X instanceof C0))throw X$();let Y=J.get(D1),Z=J.get(E5).getModel(X);if(!Z)throw X$();let Q=J.get(g1);if(!Q.getValue("editor.folding",{resource:X}))return[];let G=J.get(C6),q=Q.getValue("editor.foldingStrategy",{resource:X}),U={get limit(){return Q.getValue("editor.foldingMaximumRegions",{resource:X})},update:(W,B)=>{}},z=new iO(Z,G,U),H=z;if(q!=="indentation"){let W=Vq.getFoldingRangeProviders(Y,Z);if(W.length)H=new oO(Z,W,()=>{},U,z)}let j=await H.compute(j5.None),V=[];try{if(j)for(let W=0;W<j.length;W++){let B=j.getType(W);V.push({start:j.getStartLineNumber(W),end:j.getEndLineNumber(W),kind:B?u8.fromValue(B):void 0})}return V}finally{H.dispose()}});V1();_8();O1();PG();z0();L4();i9();zU();i0();FZ();lz();f4();jC();GC();c0();Zq();C7();t1();s0();vW();var v50=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},tB=function(J,$){return function(X,Y){$(X,Y,J)}},eB=class{constructor($,X,Y,Z){this._editor=$,this._languageFeaturesService=X,this._workerService=Y,this._audioCueService=Z,this._disposables=new $0,this._sessionDisposables=new $0,this._disposables.add(X.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add($.onDidChangeModel(()=>this._update())),this._disposables.add($.onDidChangeModelLanguage(()=>this._update())),this._disposables.add($.onDidChangeConfiguration((Q)=>{if(Q.hasChanged(56))this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56))return;if(!this._editor.hasModel())return;let $=this._editor.getModel(),[X]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered($);if(!X||!X.autoFormatTriggerCharacters)return;let Y=new sj;for(let Z of X.autoFormatTriggerCharacters)Y.add(Z.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType((Z)=>{let Q=Z.charCodeAt(Z.length-1);if(Y.has(Q))this._trigger(String.fromCharCode(Q))}))}_trigger($){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let X=this._editor.getModel(),Y=this._editor.getPosition(),Z=new L5,Q=this._editor.onDidChangeModelContent((G)=>{if(G.isFlush){Z.cancel(),Q.dispose();return}for(let q=0,U=G.changes.length;q<U;q++)if(G.changes[q].range.endLineNumber<=Y.lineNumber){Z.cancel(),Q.dispose();return}});HC(this._workerService,this._languageFeaturesService,X,Y,$,X.getFormattingOptions(),Z.token).then((G)=>{if(Z.token.isCancellationRequested)return;if(K4(G))this._audioCueService.playAudioCue(q1.format,{userGesture:!1}),y2.execute(this._editor,G,!0)}).finally(()=>{Q.dispose()})}};eB.ID="editor.contrib.autoFormat";eB=v50([tB(1,D1),tB(2,U4),tB(3,l4)],eB);var JF=class{constructor($,X,Y){this.editor=$,this._languageFeaturesService=X,this._instantiationService=Y,this._callOnDispose=new $0,this._callOnModel=new $0,this._callOnDispose.add($.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add($.onDidChangeModel(()=>this._update())),this._callOnDispose.add($.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(X.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this.editor.getOption(55))return;if(!this.editor.hasModel())return;if(!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel()))return;this._callOnModel.add(this.editor.onDidPaste(({range:$})=>this._trigger($)))}_trigger($){if(!this.editor.hasModel())return;if(this.editor.getSelections().length>1)return;this._instantiationService.invokeFunction(zC,this.editor,$,2,xz.None,j5.None,!1).catch($1)}};JF.ID="editor.contrib.formatOnPaste";JF=v50([tB(1,D1),tB(2,l0)],JF);class h50 extends RJ{constructor(){super({id:"editor.action.formatDocument",label:F("formatDocument.label","Format Document"),alias:"Format Document",precondition:E0.and(Z0.notInCompositeEditor,Z0.writable,Z0.hasDocumentFormattingProvider),kbOpts:{kbExpr:Z0.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(J,$){if($.hasModel()){let X=J.get(l0);await J.get(xZ).showWhile(X.invokeFunction(Z50,$,1,xz.None,j5.None,!0),250)}}}class f50 extends RJ{constructor(){super({id:"editor.action.formatSelection",label:F("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:E0.and(Z0.writable,Z0.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:Z0.editorTextFocus,primary:q7(2089,2084),weight:100},contextMenuOpts:{when:Z0.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(J,$){if(!$.hasModel())return;let X=J.get(l0),Y=$.getModel(),Z=$.getSelections().map((G)=>{return G.isEmpty()?new k(G.startLineNumber,1,G.startLineNumber,Y.getLineMaxColumn(G.startLineNumber)):G});await J.get(xZ).showWhile(X.invokeFunction(zC,$,Z,1,xz.None,j5.None,!0),250)}}w4(eB.ID,eB,2);w4(JF.ID,JF,2);F5(h50);F5(f50);M6.registerCommand("editor.action.format",async(J)=>{let $=J.get(X6).getFocusedCodeEditor();if(!$||!$.hasModel())return;let X=J.get(y5);if($.getSelection().isEmpty())await X.executeCommand("editor.action.formatDocument");else await X.executeCommand("editor.action.formatSelection")});gQ();V1();_8();O1();_0();yG();z0();L1();qX();L4();yW();i0();FZ();z0();L4();FZ();j7();f4();_8();O1();W2();z0();qX();V5();i0();Aj();class pJ{constructor(){this.value="",this.pos=0}static isDigitCharacter(J){return J>=48&&J<=57}static isVariableCharacter(J){return J===95||J>=97&&J<=122||J>=65&&J<=90}text(J){this.value=J,this.pos=0}tokenText(J){return this.value.substr(J.pos,J.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let J=this.pos,$=0,X=this.value.charCodeAt(J),Y;if(Y=pJ._table[X],typeof Y==="number")return this.pos+=1,{type:Y,pos:J,len:1};if(pJ.isDigitCharacter(X)){Y=8;do $+=1,X=this.value.charCodeAt(J+$);while(pJ.isDigitCharacter(X));return this.pos+=$,{type:Y,pos:J,len:$}}if(pJ.isVariableCharacter(X)){Y=9;do X=this.value.charCodeAt(J+ ++$);while(pJ.isVariableCharacter(X)||pJ.isDigitCharacter(X));return this.pos+=$,{type:Y,pos:J,len:$}}Y=10;do $+=1,X=this.value.charCodeAt(J+$);while(!isNaN(X)&&typeof pJ._table[X]>"u"&&!pJ.isDigitCharacter(X)&&!pJ.isVariableCharacter(X));return this.pos+=$,{type:Y,pos:J,len:$}}}pJ._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class Bq{constructor(){this._children=[]}appendChild(J){if(J instanceof R7&&this._children[this._children.length-1]instanceof R7)this._children[this._children.length-1].value+=J.value;else J.parent=this,this._children.push(J);return this}replace(J,$){let{parent:X}=J,Y=X.children.indexOf(J),Z=X.children.slice(0);Z.splice(Y,1,...$),X._children=Z,function Q(G,q){for(let U of G)U.parent=q,Q(U.children,U)}($,X)}get children(){return this._children}get rightMostDescendant(){if(this._children.length>0)return this._children[this._children.length-1].rightMostDescendant;return this}get snippet(){let J=this;while(!0){if(!J)return;if(J instanceof PH)return J;J=J.parent}}toString(){return this.children.reduce((J,$)=>J+$.toString(),"")}len(){return 0}}class R7 extends Bq{constructor(J){super();this.value=J}toString(){return this.value}len(){return this.value.length}clone(){return new R7(this.value)}}class OC extends Bq{}class j4 extends OC{static compareByIndex(J,$){if(J.index===$.index)return 0;else if(J.isFinalTabstop)return 1;else if($.isFinalTabstop)return-1;else if(J.index<$.index)return-1;else if(J.index>$.index)return 1;else return 0}constructor(J){super();this.index=J}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Fq?this._children[0]:void 0}clone(){let J=new j4(this.index);if(this.transform)J.transform=this.transform.clone();return J._children=this.children.map(($)=>$.clone()),J}}class Fq extends Bq{constructor(){super(...arguments);this.options=[]}appendChild(J){if(J instanceof R7)J.parent=this,this.options.push(J);return this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let J=new Fq;return this.options.forEach(J.appendChild,J),J}}class _C extends Bq{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(J){let $=this,X=!1,Y=J.replace(this.regexp,function(){return X=!0,$._replace(Array.prototype.slice.call(arguments,0,-2))});if(!X&&this._children.some((Z)=>Z instanceof s$&&Boolean(Z.elseValue)))Y=this._replace([]);return Y}_replace(J){let $="";for(let X of this._children)if(X instanceof s$){let Y=J[X.index]||"";Y=X.resolve(Y),$+=Y}else $+=X.toString();return $}toString(){return""}clone(){let J=new _C;return J.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),J._children=this.children.map(($)=>$.clone()),J}}class s$ extends Bq{constructor(J,$,X,Y){super();this.index=J,this.shorthandName=$,this.ifValue=X,this.elseValue=Y}resolve(J){if(this.shorthandName==="upcase")return!J?"":J.toLocaleUpperCase();else if(this.shorthandName==="downcase")return!J?"":J.toLocaleLowerCase();else if(this.shorthandName==="capitalize")return!J?"":J[0].toLocaleUpperCase()+J.substr(1);else if(this.shorthandName==="pascalcase")return!J?"":this._toPascalCase(J);else if(this.shorthandName==="camelcase")return!J?"":this._toCamelCase(J);else if(Boolean(J)&&typeof this.ifValue==="string")return this.ifValue;else if(!Boolean(J)&&typeof this.elseValue==="string")return this.elseValue;else return J||""}_toPascalCase(J){let $=J.match(/[a-z0-9]+/gi);if(!$)return J;return $.map((X)=>{return X.charAt(0).toUpperCase()+X.substr(1)}).join("")}_toCamelCase(J){let $=J.match(/[a-z0-9]+/gi);if(!$)return J;return $.map((X,Y)=>{if(Y===0)return X.charAt(0).toLowerCase()+X.substr(1);return X.charAt(0).toUpperCase()+X.substr(1)}).join("")}clone(){return new s$(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class $F extends OC{constructor(J){super();this.name=J}resolve(J){let $=J.resolve(this);if(this.transform)$=this.transform.resolve($||"");if($!==void 0)return this._children=[new R7($)],!0;return!1}clone(){let J=new $F(this.name);if(this.transform)J.transform=this.transform.clone();return J._children=this.children.map(($)=>$.clone()),J}}function g50(J,$){let X=[...J];while(X.length>0){let Y=X.shift();if(!$(Y))break;X.unshift(...Y.children)}}class PH extends Bq{get placeholderInfo(){if(!this._placeholders){let J=[],$;this.walk(function(X){if(X instanceof j4)J.push(X),$=!$||$.index<X.index?X:$;return!0}),this._placeholders={all:J,last:$}}return this._placeholders}get placeholders(){let{all:J}=this.placeholderInfo;return J}offset(J){let $=0,X=!1;if(this.walk((Y)=>{if(Y===J)return X=!0,!1;return $+=Y.len(),!0}),!X)return-1;return $}fullLen(J){let $=0;return g50([J],(X)=>{return $+=X.len(),!0}),$}enclosingPlaceholders(J){let $=[],{parent:X}=J;while(X){if(X instanceof j4)$.push(X);X=X.parent}return $}resolveVariables(J){return this.walk(($)=>{if($ instanceof $F){if($.resolve(J))this._placeholders=void 0}return!0}),this}appendChild(J){return this._placeholders=void 0,super.appendChild(J)}replace(J,$){return this._placeholders=void 0,super.replace(J,$)}clone(){let J=new PH;return this._children=this.children.map(($)=>$.clone()),J}walk(J){g50(this.children,J)}}class S2{constructor(){this._scanner=new pJ,this._token={type:14,pos:0,len:0}}static escape(J){return J.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(J){return/\${?CLIPBOARD/.test(J)}parse(J,$,X){let Y=new PH;return this.parseFragment(J,Y),this.ensureFinalTabstop(Y,X!==null&&X!==void 0?X:!1,$!==null&&$!==void 0?$:!1),Y}parseFragment(J,$){let X=$.children.length;this._scanner.text(J),this._token=this._scanner.next();while(this._parse($));let Y=new Map,Z=[];$.walk((q)=>{if(q instanceof j4)if(q.isFinalTabstop)Y.set(0,void 0);else if(!Y.has(q.index)&&q.children.length>0)Y.set(q.index,q.children);else Z.push(q);return!0});let Q=(q,U)=>{let z=Y.get(q.index);if(!z)return;let H=new j4(q.index);H.transform=q.transform;for(let j of z){let V=j.clone();if(H.appendChild(V),V instanceof j4&&Y.has(V.index)&&!U.has(V.index))U.add(V.index),Q(V,U),U.delete(V.index)}$.replace(q,[H])},G=new Set;for(let q of Z)Q(q,G);return $.children.slice(X)}ensureFinalTabstop(J,$,X){if($||X&&J.placeholders.length>0){if(!J.placeholders.find((Z)=>Z.index===0))J.appendChild(new j4(0))}}_accept(J,$){if(J===void 0||this._token.type===J){let X=!$?!0:this._scanner.tokenText(this._token);return this._token=this._scanner.next(),X}return!1}_backTo(J){return this._scanner.pos=J.pos+J.len,this._token=J,!1}_until(J){let $=this._token;while(this._token.type!==J){if(this._token.type===14)return!1;else if(this._token.type===5){let Y=this._scanner.next();if(Y.type!==0&&Y.type!==4&&Y.type!==5)return!1}this._token=this._scanner.next()}let X=this._scanner.value.substring($.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),X}_parse(J){return this._parseEscaped(J)||this._parseTabstopOrVariableName(J)||this._parseComplexPlaceholder(J)||this._parseComplexVariable(J)||this._parseAnything(J)}_parseEscaped(J){let $;if($=this._accept(5,!0))return $=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||$,J.appendChild(new R7($)),!0;return!1}_parseTabstopOrVariableName(J){let $,X=this._token;if(!(this._accept(0)&&($=this._accept(9,!0)||this._accept(8,!0))))return this._backTo(X);return J.appendChild(/^\d+$/.test($)?new j4(Number($)):new $F($)),!0}_parseComplexPlaceholder(J){let $,X=this._token;if(!(this._accept(0)&&this._accept(3)&&($=this._accept(8,!0))))return this._backTo(X);let Z=new j4(Number($));if(this._accept(1))while(!0){if(this._accept(4))return J.appendChild(Z),!0;if(this._parse(Z))continue;return J.appendChild(new R7("${"+$+":")),Z.children.forEach(J.appendChild,J),!0}else if(Z.index>0&&this._accept(7)){let Q=new Fq;while(!0){if(this._parseChoiceElement(Q)){if(this._accept(2))continue;if(this._accept(7)){if(Z.appendChild(Q),this._accept(4))return J.appendChild(Z),!0}}return this._backTo(X),!1}}else if(this._accept(6)){if(this._parseTransform(Z))return J.appendChild(Z),!0;return this._backTo(X),!1}else if(this._accept(4))return J.appendChild(Z),!0;else return this._backTo(X)}_parseChoiceElement(J){let $=this._token,X=[];while(!0){if(this._token.type===2||this._token.type===7)break;let Y;if(Y=this._accept(5,!0))Y=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||Y;else Y=this._accept(void 0,!0);if(!Y)return this._backTo($),!1;X.push(Y)}if(X.length===0)return this._backTo($),!1;return J.appendChild(new R7(X.join(""))),!0}_parseComplexVariable(J){let $,X=this._token;if(!(this._accept(0)&&this._accept(3)&&($=this._accept(9,!0))))return this._backTo(X);let Z=new $F($);if(this._accept(1))while(!0){if(this._accept(4))return J.appendChild(Z),!0;if(this._parse(Z))continue;return J.appendChild(new R7("${"+$+":")),Z.children.forEach(J.appendChild,J),!0}else if(this._accept(6)){if(this._parseTransform(Z))return J.appendChild(Z),!0;return this._backTo(X),!1}else if(this._accept(4))return J.appendChild(Z),!0;else return this._backTo(X)}_parseTransform(J){let $=new _C,X="",Y="";while(!0){if(this._accept(6))break;let Z;if(Z=this._accept(5,!0)){Z=this._accept(6,!0)||Z,X+=Z;continue}if(this._token.type!==14){X+=this._accept(void 0,!0);continue}return!1}while(!0){if(this._accept(6))break;let Z;if(Z=this._accept(5,!0)){Z=this._accept(5,!0)||this._accept(6,!0)||Z,$.appendChild(new R7(Z));continue}if(this._parseFormatString($)||this._parseAnything($))continue;return!1}while(!0){if(this._accept(4))break;if(this._token.type!==14){Y+=this._accept(void 0,!0);continue}return!1}try{$.regexp=new RegExp(X,Y)}catch(Z){return!1}return J.transform=$,!0}_parseFormatString(J){let $=this._token;if(!this._accept(0))return!1;let X=!1;if(this._accept(3))X=!0;let Y=this._accept(8,!0);if(!Y)return this._backTo($),!1;else if(!X)return J.appendChild(new s$(Number(Y))),!0;else if(this._accept(4))return J.appendChild(new s$(Number(Y))),!0;else if(!this._accept(1))return this._backTo($),!1;if(this._accept(6)){let Z=this._accept(9,!0);if(!Z||!this._accept(4))return this._backTo($),!1;else return J.appendChild(new s$(Number(Y),Z)),!0}else if(this._accept(11)){let Z=this._until(4);if(Z)return J.appendChild(new s$(Number(Y),void 0,Z,void 0)),!0}else if(this._accept(12)){let Z=this._until(4);if(Z)return J.appendChild(new s$(Number(Y),void 0,void 0,Z)),!0}else if(this._accept(13)){let Z=this._until(1);if(Z){let Q=this._until(4);if(Q)return J.appendChild(new s$(Number(Y),void 0,Z,Q)),!0}}else{let Z=this._until(4);if(Z)return J.appendChild(new s$(Number(Y),void 0,void 0,Z)),!0}return this._backTo($),!1}_parseAnything(J){if(this._token.type!==14)return J.appendChild(new R7(this._scanner.tokenText(this._token))),this._accept(void 0),!0;return!1}}c0();FJ();C7();t1();f4();bM();T0();JB();xM();SX();k5();_0();sx();c0();var dz0=F("defaultLabel","input"),sz0=F("label.preserveCaseToggle","Preserve Case");class p50 extends XY{constructor(J){super({icon:F0.preserveCase,title:sz0+J.appendTitle,isChecked:J.isChecked,inputActiveOptionBorder:J.inputActiveOptionBorder,inputActiveOptionForeground:J.inputActiveOptionForeground,inputActiveOptionBackground:J.inputActiveOptionBackground})}}class NC extends E8{constructor(J,$,X,Y){super();this._showOptionButtons=X,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new x),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new x),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new x),this._onInput=this._register(new x),this._onKeyUp=this._register(new x),this._onPreserveCaseKeyDown=this._register(new x),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=$,this.placeholder=Y.placeholder||"",this.validation=Y.validation,this.label=Y.label||dz0;let Z=Y.appendPreserveCaseLabel||"",Q=Y.history||[],G=!!Y.flexibleHeight,q=!!Y.flexibleWidth,U=Y.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new XB(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:Q,showHistoryHint:Y.showHistoryHint,flexibleHeight:G,flexibleWidth:q,flexibleMaxHeight:U,inputBoxStyles:Y.inputBoxStyles})),this.preserveCase=this._register(new p50({appendTitle:Z,isChecked:!1,...Y.toggleStyles})),this._register(this.preserveCase.onChange((j)=>{if(this._onDidOptionChange.fire(j),!j&&this.fixFocusOnOptionClickEnabled)this.inputBox.focus();this.validate()})),this._register(this.preserveCase.onKeyDown((j)=>{this._onPreserveCaseKeyDown.fire(j)})),this._showOptionButtons)this.cachedOptionsWidth=this.preserveCase.width();else this.cachedOptionsWidth=0;let z=[this.preserveCase.domNode];this.onkeydown(this.domNode,(j)=>{if(j.equals(15)||j.equals(17)||j.equals(9)){let V=z.indexOf(this.domNode.ownerDocument.activeElement);if(V>=0){let W=-1;if(j.equals(17))W=(V+1)%z.length;else if(j.equals(15))if(V===0)W=z.length-1;else W=V-1;if(j.equals(9))z[V].blur(),this.inputBox.focus();else if(W>=0)z[W].focus();a0.stop(j,!0)}}});let H=document.createElement("div");H.className="controls",H.style.display=this._showOptionButtons?"block":"none",H.appendChild(this.preserveCase.domNode),this.domNode.appendChild(H),J===null||J===void 0||J.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,(j)=>this._onKeyDown.fire(j)),this.onkeyup(this.inputBox.inputElement,(j)=>this._onKeyUp.fire(j)),this.oninput(this.inputBox.inputElement,(j)=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,(j)=>this._onMouseDown.fire(j))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(J){if(J)this.enable();else this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(J){this.preserveCase.checked=J}focusOnPreserve(){this.preserveCase.focus()}validate(){var J;(J=this.inputBox)===null||J===void 0||J.validate()}set width(J){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=J+"px"}dispose(){super.dispose()}}t1();oq();c0();z0();T0();var c50=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},l50=function(J,$){return function(X,Y){$(X,Y,J)}},eO=new A0("suggestWidgetVisible",!1,F("suggestWidgetVisible","Whether suggestion are visible")),TC="historyNavigationWidgetFocus",d50="historyNavigationForwardsEnabled",s50="historyNavigationBackwardsEnabled",lZ=void 0,tO=[];function a50(J,$){if(tO.includes($))throw Error("Cannot register the same widget multiple times");tO.push($);let X=new $0,Y=new A0(TC,!1).bindTo(J),Z=new A0(d50,!0).bindTo(J),Q=new A0(s50,!0).bindTo(J),G=()=>{Y.set(!0),lZ=$},q=()=>{if(Y.set(!1),lZ===$)lZ=void 0};if(fG($.element))G();return X.add($.onDidFocus(()=>G())),X.add($.onDidBlur(()=>q())),X.add(N0(()=>{tO.splice(tO.indexOf($),1),q()})),{historyNavigationForwardsEnablement:Z,historyNavigationBackwardsEnablement:Q,dispose(){X.dispose()}}}var m50=class extends rz{constructor($,X,Y,Z){super($,X,Y);let Q=this._register(Z.createScoped(this.inputBox.element));this._register(a50(Q,this.inputBox))}};m50=c50([l50(3,m0)],m50);var u50=class extends NC{constructor($,X,Y,Z,Q=!1){super($,X,Q,Y);let G=this._register(Z.createScoped(this.inputBox.element));this._register(a50(G,this.inputBox))}};u50=c50([l50(3,m0)],u50);z$.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:E0.and(E0.has(TC),E0.equals(s50,!0),E0.not("isComposing"),eO.isEqualTo(!1)),primary:16,secondary:[528],handler:(J)=>{lZ===null||lZ===void 0||lZ.showPreviousValue()}});z$.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:E0.and(E0.has(TC),E0.equals(d50,!0),E0.not("isComposing"),eO.isEqualTo(!1)),primary:18,secondary:[530],handler:(J)=>{lZ===null||lZ===void 0||lZ.showNextValue()}});var U1={Visible:eO,HasFocusedSuggestion:new A0("suggestWidgetHasFocusedSuggestion",!1,F("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new A0("suggestWidgetDetailsVisible",!1,F("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new A0("suggestWidgetMultipleSuggestions",!1,F("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new A0("suggestionMakesTextEdit",!0,F("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new A0("acceptSuggestionOnEnter",!0,F("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new A0("suggestionHasInsertAndReplaceRange",!1,F("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new A0("suggestionInsertMode",void 0,{type:"string",description:F("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new A0("suggestionCanResolve",!1,F("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},HY=new y("suggestWidgetStatusBar");class r50{constructor(J,$,X,Y){var Z;if(this.position=J,this.completion=$,this.container=X,this.provider=Y,this.isInvalid=!1,this.score=bJ.Default,this.distance=0,this.textLabel=typeof $.label==="string"?$.label:(Z=$.label)===null||Z===void 0?void 0:Z.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=$.sortText&&$.sortText.toLowerCase(),this.filterTextLow=$.filterText&&$.filterText.toLowerCase(),this.extensionId=$.extensionId,k.isIRange($.range))this.editStart=new g($.range.startLineNumber,$.range.startColumn),this.editInsertEnd=new g($.range.endLineNumber,$.range.endColumn),this.editReplaceEnd=new g($.range.endLineNumber,$.range.endColumn),this.isInvalid=this.isInvalid||k.spansMultipleLines($.range)||$.range.startLineNumber!==J.lineNumber;else this.editStart=new g($.range.insert.startLineNumber,$.range.insert.startColumn),this.editInsertEnd=new g($.range.insert.endLineNumber,$.range.insert.endColumn),this.editReplaceEnd=new g($.range.replace.endLineNumber,$.range.replace.endColumn),this.isInvalid=this.isInvalid||k.spansMultipleLines($.range.insert)||k.spansMultipleLines($.range.replace)||$.range.insert.startLineNumber!==J.lineNumber||$.range.replace.startLineNumber!==J.lineNumber||$.range.insert.startColumn!==$.range.replace.startColumn;if(typeof Y.resolveCompletionItem!=="function")this._resolveCache=Promise.resolve(),this._resolveDuration=0}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(J){if(!this._resolveCache){let $=J.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),X=new w5(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,J)).then((Y)=>{Object.assign(this.completion,Y),this._resolveDuration=X.elapsed()},(Y)=>{if(GX(Y))this._resolveCache=void 0,this._resolveDuration=void 0}).finally(()=>{$.dispose()})}return this._resolveCache}}class RH{constructor(J=2,$=new Set,X=new Set,Y=new Map,Z=!0){this.snippetSortOrder=J,this.kindFilter=$,this.providerFilter=X,this.providerItemsToReuse=Y,this.showDeprecated=Z}}RH.default=new RH;var DH;function i50(){return DH}class n50{constructor(J,$,X,Y){this.items=J,this.needsClipboard=$,this.durations=X,this.disposable=Y}}async function wC(J,$,X,Y=RH.default,Z={triggerKind:0},Q=j5.None){let G=new w5;X=X.clone();let q=$.getWordAtPosition(X),U=q?new k(X.lineNumber,q.startColumn,X.lineNumber,q.endColumn):k.fromPositions(X),z={replace:U,insert:U.setEndPosition(X.lineNumber,X.column)},H=[],j=new $0,V=[],W=!1,B=(P,A,D)=>{var M,R,O;let N=!1;if(!A)return N;for(let T of A.suggestions)if(!Y.kindFilter.has(T.kind)){if(!Y.showDeprecated&&((M=T===null||T===void 0?void 0:T.tags)===null||M===void 0?void 0:M.includes(1)))continue;if(!T.range)T.range=z;if(!T.sortText)T.sortText=typeof T.label==="string"?T.label:T.label.label;if(!W&&T.insertTextRules&&T.insertTextRules&4)W=S2.guessNeedsClipboard(T.insertText);H.push(new r50(X,T,A,P)),N=!0}if(PK(A))j.add(A);return V.push({providerName:(R=P._debugDisplayName)!==null&&R!==void 0?R:"unknown_provider",elapsedProvider:(O=A.duration)!==null&&O!==void 0?O:-1,elapsedOverall:D.elapsed()}),N},K=(async()=>{if(!DH||Y.kindFilter.has(27))return;let P=Y.providerItemsToReuse.get(DH);if(P){P.forEach((M)=>H.push(M));return}if(Y.providerFilter.size>0&&!Y.providerFilter.has(DH))return;let A=new w5,D=await DH.provideCompletionItems($,X,Z,Q);B(DH,D,A)})();for(let P of J.orderedGroups($)){let A=!1;if(await Promise.all(P.map(async(D)=>{if(Y.providerItemsToReuse.has(D)){let M=Y.providerItemsToReuse.get(D);M.forEach((R)=>H.push(R)),A=A||M.length>0;return}if(Y.providerFilter.size>0&&!Y.providerFilter.has(D))return;try{let M=new w5,R=await D.provideCompletionItems($,X,Z,Q);A=B(D,R,M)||A}catch(M){QX(M)}})),A||Q.isCancellationRequested)break}if(await K,Q.isCancellationRequested)return j.dispose(),Promise.reject(new LY);return new n50(H.sort(iz0(Y.snippetSortOrder)),W,{entries:V,elapsed:G.elapsed()},j)}function LC(J,$){if(J.sortTextLow&&$.sortTextLow){if(J.sortTextLow<$.sortTextLow)return-1;else if(J.sortTextLow>$.sortTextLow)return 1}if(J.textLabel<$.textLabel)return-1;else if(J.textLabel>$.textLabel)return 1;return J.completion.kind-$.completion.kind}function az0(J,$){if(J.completion.kind!==$.completion.kind){if(J.completion.kind===27)return-1;else if($.completion.kind===27)return 1}return LC(J,$)}function rz0(J,$){if(J.completion.kind!==$.completion.kind){if(J.completion.kind===27)return 1;else if($.completion.kind===27)return-1}return LC(J,$)}var J_=new Map;J_.set(0,az0);J_.set(2,rz0);J_.set(1,LC);function iz0(J){return J_.get(J)}M6.registerCommand("_executeCompletionItemProvider",async(J,...$)=>{let[X,Y,Z,Q]=$;T5(C0.isUri(X)),T5(g.isIPosition(Y)),T5(typeof Z==="string"||!Z),T5(typeof Q==="number"||!Q);let{completionProvider:G}=J.get(D1),q=await J.get(hY).createModelReference(X);try{let U={incomplete:!1,suggestions:[]},z=[],H=q.object.textEditorModel.validatePosition(Y),j=await wC(G,q.object.textEditorModel,H,void 0,{triggerCharacter:Z!==null&&Z!==void 0?Z:void 0,triggerKind:Z?1:0});for(let V of j.items){if(z.length<(Q!==null&&Q!==void 0?Q:0))z.push(V.resolve(j5.None));U.incomplete=U.incomplete||V.container.incomplete,U.suggestions.push(V.completion)}try{return await Promise.all(z),U}finally{setTimeout(()=>j.disposable.dispose(),100)}}finally{q.dispose()}});function o50(J,$){var X;(X=J.getContribution("editor.contrib.suggestController"))===null||X===void 0||X.triggerSuggest(new Set().add($),void 0,!0)}class MH{static isAllOff(J){return J.other==="off"&&J.comments==="off"&&J.strings==="off"}static isAllOn(J){return J.other==="on"&&J.comments==="on"&&J.strings==="on"}static valueFor(J,$){switch($){case 1:return J.comments;case 2:return J.strings;default:return J.other}}}c0();t1();o9();V1();z0();X1();K0(".monaco-editor .snippet-placeholder{background-color:var(--vscode-editor-snippetTabstopHighlightBackground,transparent);outline-width:1px;outline-style:solid;outline-color:var(--vscode-editor-snippetTabstopHighlightBorder,transparent);min-width:2px}.monaco-editor .finish-snippet-placeholder{background-color:var(--vscode-editor-snippetFinalTabstopHighlightBackground,transparent);outline-width:1px;outline-style:solid;outline-color:var(--vscode-editor-snippetFinalTabstopHighlightBorder,transparent)}");yW();i0();o5();j7();G2();Xx();GM();$R();L1();function kC(J,$=p6){if(ua(J,$))return J.charAt(0).toUpperCase()+J.slice(1);return J}var uj1=Object.create(null);kY();cX();X1();var t50=function(){if(typeof crypto==="object"&&typeof crypto.randomUUID==="function")return crypto.randomUUID.bind(crypto);let J;if(typeof crypto==="object"&&typeof crypto.getRandomValues==="function")J=crypto.getRandomValues.bind(crypto);else J=function(Y){for(let Z=0;Z<Y.length;Z++)Y[Z]=Math.floor(Math.random()*256);return Y};let $=new Uint8Array(16),X=[];for(let Y=0;Y<256;Y++)X.push(Y.toString(16).padStart(2,"0"));return function(){J($),$[6]=$[6]&15|64,$[8]=$[8]&63|128;let Z=0,Q="";return Q+=X[$[Z++]],Q+=X[$[Z++]],Q+=X[$[Z++]],Q+=X[$[Z++]],Q+="-",Q+=X[$[Z++]],Q+=X[$[Z++]],Q+="-",Q+=X[$[Z++]],Q+=X[$[Z++]],Q+="-",Q+=X[$[Z++]],Q+=X[$[Z++]],Q+="-",Q+=X[$[Z++]],Q+=X[$[Z++]],Q+=X[$[Z++]],Q+=X[$[Z++]],Q+=X[$[Z++]],Q+=X[$[Z++]],Q}}();j7();c0();GM();var nz0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},oz0=function(J,$){return function(X,Y){$(X,Y,J)}},tj1=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class $_{constructor(J){this._delegates=J}resolve(J){for(let $ of this._delegates){let X=$.resolve(J);if(X!==void 0)return X}return}}class X_{constructor(J,$,X,Y){this._model=J,this._selection=$,this._selectionIdx=X,this._overtypingCapturer=Y}resolve(J){let{name:$}=J;if($==="SELECTION"||$==="TM_SELECTED_TEXT"){let X=this._model.getValueInRange(this._selection)||void 0,Y=this._selection.startLineNumber!==this._selection.endLineNumber;if(!X&&this._overtypingCapturer){let Z=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);if(Z)X=Z.value,Y=Z.multiline}if(X&&Y&&J.snippet){let Z=this._model.getLineContent(this._selection.startLineNumber),Q=W5(Z,0,this._selection.startColumn-1),G=Q;J.snippet.walk((U)=>{if(U===J)return!1;if(U instanceof R7)G=W5(a9(U.value).pop());return!0});let q=NG(G,Q);X=X.replace(/(\r\n|\r|\n)(.*)/g,(U,z,H)=>`${z}${G.substr(q)}${H}`)}return X}else if($==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);else if($==="TM_CURRENT_WORD"){let X=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return X&&X.word||void 0}else if($==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);else if($==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);else if($==="CURSOR_INDEX")return String(this._selectionIdx);else if($==="CURSOR_NUMBER")return String(this._selectionIdx+1);return}}class Y_{constructor(J,$){this._labelService=J,this._model=$}resolve(J){let{name:$}=J;if($==="TM_FILENAME")return zJ(this._model.uri.fsPath);else if($==="TM_FILENAME_BASE"){let X=zJ(this._model.uri.fsPath),Y=X.lastIndexOf(".");if(Y<=0)return X;else return X.slice(0,Y)}else if($==="TM_DIRECTORY"){if(TK(this._model.uri.fsPath)===".")return"";return this._labelService.getUriLabel(YR(this._model.uri))}else if($==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);else if($==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0});return}}class Z_{constructor(J,$,X,Y){this._readClipboardText=J,this._selectionIdx=$,this._selectionCount=X,this._spread=Y}resolve(J){if(J.name!=="CLIPBOARD")return;let $=this._readClipboardText();if(!$)return;if(this._spread){let X=$.split(/\r\n|\n|\r/).filter((Y)=>!PA(Y));if(X.length===this._selectionCount)return X[this._selectionIdx]}return $}}var XF=class{constructor($,X,Y){this._model=$,this._selection=X,this._languageConfigurationService=Y}resolve($){let{name:X}=$,Y=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),Z=this._languageConfigurationService.getLanguageConfiguration(Y).comments;if(!Z)return;if(X==="LINE_COMMENT")return Z.lineCommentToken||void 0;else if(X==="BLOCK_COMMENT_START")return Z.blockCommentStartToken||void 0;else if(X==="BLOCK_COMMENT_END")return Z.blockCommentEndToken||void 0;return}};XF=nz0([oz0(2,C6)],XF);class mJ{constructor(){this._date=new Date}resolve(J){let{name:$}=J;if($==="CURRENT_YEAR")return String(this._date.getFullYear());else if($==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);else if($==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");else if($==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");else if($==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");else if($==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");else if($==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");else if($==="CURRENT_DAY_NAME")return mJ.dayNames[this._date.getDay()];else if($==="CURRENT_DAY_NAME_SHORT")return mJ.dayNamesShort[this._date.getDay()];else if($==="CURRENT_MONTH_NAME")return mJ.monthNames[this._date.getMonth()];else if($==="CURRENT_MONTH_NAME_SHORT")return mJ.monthNamesShort[this._date.getMonth()];else if($==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1000));else if($==="CURRENT_TIMEZONE_OFFSET"){let X=this._date.getTimezoneOffset(),Y=X>0?"-":"+",Z=Math.trunc(Math.abs(X/60)),Q=Z<10?"0"+Z:Z,G=Math.abs(X)-Z*60,q=G<10?"0"+G:G;return Y+Q+":"+q}return}}mJ.dayNames=[F("Sunday","Sunday"),F("Monday","Monday"),F("Tuesday","Tuesday"),F("Wednesday","Wednesday"),F("Thursday","Thursday"),F("Friday","Friday"),F("Saturday","Saturday")];mJ.dayNamesShort=[F("SundayShort","Sun"),F("MondayShort","Mon"),F("TuesdayShort","Tue"),F("WednesdayShort","Wed"),F("ThursdayShort","Thu"),F("FridayShort","Fri"),F("SaturdayShort","Sat")];mJ.monthNames=[F("January","January"),F("February","February"),F("March","March"),F("April","April"),F("May","May"),F("June","June"),F("July","July"),F("August","August"),F("September","September"),F("October","October"),F("November","November"),F("December","December")];mJ.monthNamesShort=[F("JanuaryShort","Jan"),F("FebruaryShort","Feb"),F("MarchShort","Mar"),F("AprilShort","Apr"),F("MayShort","May"),F("JuneShort","Jun"),F("JulyShort","Jul"),F("AugustShort","Aug"),F("SeptemberShort","Sep"),F("OctoberShort","Oct"),F("NovemberShort","Nov"),F("DecemberShort","Dec")];class Q_{constructor(J){this._workspaceService=J}resolve(J){if(!this._workspaceService)return;let $=Wo(this._workspaceService.getWorkspace());if(Vo($))return;if(J.name==="WORKSPACE_NAME")return this._resolveWorkspaceName($);else if(J.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath($);return}_resolveWorkspaceName(J){if(ZM(J))return zJ(J.uri.path);let $=zJ(J.configPath.path);if($.endsWith(QM))$=$.substr(0,$.length-QM.length-1);return $}_resoveWorkspacePath(J){if(ZM(J))return kC(J.uri.fsPath);let $=zJ(J.configPath.path),X=J.configPath.fsPath;if(X.endsWith($))X=X.substr(0,X.length-$.length-1);return X?kC(X):"/"}}class G_{resolve(J){let{name:$}=J;if($==="RANDOM")return Math.random().toString().slice(-6);else if($==="RANDOM_HEX")return Math.random().toString(16).slice(-6);else if($==="UUID")return t50();return}}var tz0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},ez0=function(J,$){return function(X,Y){$(X,Y,J)}},a$;class a4{constructor(J,$,X){this._editor=J,this._snippet=$,this._snippetLineLeadingWhitespace=X,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=PN($.placeholders,j4.compareByIndex),this._placeholderGroupsIdx=-1}initialize(J){this._offset=J.newPosition}dispose(){if(this._placeholderDecorations)this._editor.removeDecorations([...this._placeholderDecorations.values()]);this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let J=this._editor.getModel();this._editor.changeDecorations(($)=>{for(let X of this._snippet.placeholders){let Y=this._snippet.offset(X),Z=this._snippet.fullLen(X),Q=k.fromPositions(J.getPositionAt(this._offset+Y),J.getPositionAt(this._offset+Y+Z)),G=X.isFinalTabstop?a4._decor.inactiveFinal:a4._decor.inactive,q=$.addDecoration(Q,G);this._placeholderDecorations.set(X,q)}})}move(J){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let Y=[];for(let Z of this._placeholderGroups[this._placeholderGroupsIdx])if(Z.transform){let Q=this._placeholderDecorations.get(Z),G=this._editor.getModel().getDecorationRange(Q),q=this._editor.getModel().getValueInRange(G),U=Z.transform.resolve(q).split(/\r\n|\r|\n/);for(let z=1;z<U.length;z++)U[z]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+U[z]);Y.push(u4.replace(G,U.join(this._editor.getModel().getEOL())))}if(Y.length>0)this._editor.executeEdits("snippet.placeholderTransform",Y)}let $=!1;if(J===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1)this._placeholderGroupsIdx+=1,$=!0;else if(J===!1&&this._placeholderGroupsIdx>0)this._placeholderGroupsIdx-=1,$=!0;let X=this._editor.getModel().changeDecorations((Y)=>{let Z=new Set,Q=[];for(let G of this._placeholderGroups[this._placeholderGroupsIdx]){let q=this._placeholderDecorations.get(G),U=this._editor.getModel().getDecorationRange(q);Q.push(new p0(U.startLineNumber,U.startColumn,U.endLineNumber,U.endColumn)),$=$&&this._hasPlaceholderBeenCollapsed(G),Y.changeDecorationOptions(q,G.isFinalTabstop?a4._decor.activeFinal:a4._decor.active),Z.add(G);for(let z of this._snippet.enclosingPlaceholders(G)){let H=this._placeholderDecorations.get(z);Y.changeDecorationOptions(H,z.isFinalTabstop?a4._decor.activeFinal:a4._decor.active),Z.add(z)}}for(let[G,q]of this._placeholderDecorations)if(!Z.has(G))Y.changeDecorationOptions(q,G.isFinalTabstop?a4._decor.inactiveFinal:a4._decor.inactive);return Q});return!$?X!==null&&X!==void 0?X:[]:this.move(J)}_hasPlaceholderBeenCollapsed(J){let $=J;while($){if($ instanceof j4){let X=this._placeholderDecorations.get($);if(this._editor.getModel().getDecorationRange(X).isEmpty()&&$.toString().length>0)return!0}$=$.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){let[J]=this._snippet.placeholders;if(J.isFinalTabstop){if(this._snippet.rightMostDescendant===J)return!0}}return!1}computePossibleSelections(){let J=new Map;for(let $ of this._placeholderGroups){let X;for(let Y of $){if(Y.isFinalTabstop)break;if(!X)X=[],J.set(Y.index,X);let Z=this._placeholderDecorations.get(Y),Q=this._editor.getModel().getDecorationRange(Z);if(!Q){J.delete(Y.index);break}X.push(Q)}}return J}get activeChoice(){if(!this._placeholderDecorations)return;let J=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(J===null||J===void 0?void 0:J.choice))return;let $=this._placeholderDecorations.get(J);if(!$)return;let X=this._editor.getModel().getDecorationRange($);if(!X)return;return{range:X,choice:J.choice}}get hasChoice(){let J=!1;return this._snippet.walk(($)=>{return J=$ instanceof Fq,!J}),J}merge(J){let $=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((X)=>{for(let Y of this._placeholderGroups[this._placeholderGroupsIdx]){let Z=J.shift();console.assert(Z._offset!==-1),console.assert(!Z._placeholderDecorations);let Q=Z._snippet.placeholderInfo.last.index;for(let q of Z._snippet.placeholderInfo.all)if(q.isFinalTabstop)q.index=Y.index+(Q+1)/this._nestingLevel;else q.index=Y.index+q.index/this._nestingLevel;this._snippet.replace(Y,Z._snippet.children);let G=this._placeholderDecorations.get(Y);X.removeDecoration(G),this._placeholderDecorations.delete(Y);for(let q of Z._snippet.placeholders){let U=Z._snippet.offset(q),z=Z._snippet.fullLen(q),H=k.fromPositions($.getPositionAt(Z._offset+U),$.getPositionAt(Z._offset+U+z)),j=X.addDecoration(H,a4._decor.inactive);this._placeholderDecorations.set(q,j)}}this._placeholderGroups=PN(this._snippet.placeholders,j4.compareByIndex)})}}a4._decor={active:C1.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:C1.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:C1.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:C1.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var e50={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},q_=a$=class{static adjustWhitespace($,X,Y,Z,Q){let G=$.getLineContent(X.lineNumber),q=W5(G,0,X.column-1),U;return Z.walk((z)=>{if(!(z instanceof R7)||z.parent instanceof Fq)return!0;if(Q&&!Q.has(z))return!0;let H=z.value.split(/\r\n|\r|\n/);if(Y){let V=Z.offset(z);if(V===0)H[0]=$.normalizeIndentation(H[0]);else{U=U!==null&&U!==void 0?U:Z.toString();let W=U.charCodeAt(V-1);if(W===10||W===13)H[0]=$.normalizeIndentation(q+H[0])}for(let W=1;W<H.length;W++)H[W]=$.normalizeIndentation(q+H[W])}let j=H.join($.getEOL());if(j!==z.value)z.parent.replace(z,[new R7(j)]),U=void 0;return!0}),q}static adjustSelection($,X,Y,Z){if(Y!==0||Z!==0){let{positionLineNumber:Q,positionColumn:G}=X,q=G-Y,U=G+Z,z=$.validateRange({startLineNumber:Q,startColumn:q,endLineNumber:Q,endColumn:U});X=p0.createWithDirection(z.startLineNumber,z.startColumn,z.endLineNumber,z.endColumn,X.getDirection())}return X}static createEditsAndSnippetsFromSelections($,X,Y,Z,Q,G,q,U,z){let H=[],j=[];if(!$.hasModel())return{edits:H,snippets:j};let V=$.getModel(),W=$.invokeWithinContext((R)=>R.get(fW)),B=$.invokeWithinContext((R)=>new Y_(R.get(CW),V)),K=()=>q,P=V.getValueInRange(a$.adjustSelection(V,$.getSelection(),Y,0)),A=V.getValueInRange(a$.adjustSelection(V,$.getSelection(),0,Z)),D=V.getLineFirstNonWhitespaceColumn($.getSelection().positionLineNumber),M=$.getSelections().map((R,O)=>({selection:R,idx:O})).sort((R,O)=>k.compareRangesUsingStarts(R.selection,O.selection));for(let{selection:R,idx:O}of M){let N=a$.adjustSelection(V,R,Y,0),T=a$.adjustSelection(V,R,0,Z);if(P!==V.getValueInRange(N))N=R;if(A!==V.getValueInRange(T))T=R;let S=R.setStartPosition(N.startLineNumber,N.startColumn).setEndPosition(T.endLineNumber,T.endColumn),v=new S2().parse(X,!0,Q),l=S.getStartPosition(),f=a$.adjustWhitespace(V,l,G||O>0&&D!==V.getLineFirstNonWhitespaceColumn(R.positionLineNumber),v);v.resolveVariables(new $_([B,new Z_(K,O,M.length,$.getOption(78)==="spread"),new X_(V,R,O,U),new XF(V,R,z),new mJ,new Q_(W),new G_])),H[O]=u4.replace(S,v.toString()),H[O].identifier={major:O,minor:0},H[O]._isTracked=!0,j[O]=new a4($,v,f)}return{edits:H,snippets:j}}static createEditsAndSnippetsFromEdits($,X,Y,Z,Q,G,q){if(!$.hasModel()||X.length===0)return{edits:[],snippets:[]};let U=[],z=$.getModel(),H=new S2,j=new PH,V=new $_([$.invokeWithinContext((B)=>new Y_(B.get(CW),z)),new Z_(()=>Q,0,$.getSelections().length,$.getOption(78)==="spread"),new X_(z,$.getSelection(),0,G),new XF(z,$.getSelection(),q),new mJ,new Q_($.invokeWithinContext((B)=>B.get(fW))),new G_]);X=X.sort((B,K)=>k.compareRangesUsingStarts(B.range,K.range));let W=0;for(let B=0;B<X.length;B++){let{range:K,template:P}=X[B];if(B>0){let O=X[B-1].range,N=k.fromPositions(O.getEndPosition(),K.getStartPosition()),T=new R7(z.getValueInRange(N));j.appendChild(T),W+=T.value.length}let A=H.parseFragment(P,j);a$.adjustWhitespace(z,K.getStartPosition(),!0,j,new Set(A)),j.resolveVariables(V);let D=j.toString(),M=D.slice(W);W=D.length;let R=u4.replace(K,M);R.identifier={major:B,minor:0},R._isTracked=!0,U.push(R)}return H.ensureFinalTabstop(j,Y,!0),{edits:U,snippets:[new a4($,j,"")]}}constructor($,X,Y=e50,Z){this._editor=$,this._template=X,this._options=Y,this._languageConfigurationService=Z,this._templateMerges=[],this._snippets=[]}dispose(){h1(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:$,snippets:X}=typeof this._template==="string"?a$.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):a$.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=X,this._editor.executeEdits("snippet",$,(Y)=>{let Z=Y.filter((Q)=>!!Q.identifier);for(let Q=0;Q<X.length;Q++)X[Q].initialize(Z[Q].textChange);if(this._snippets[0].hasPlaceholder)return this._move(!0);else return Z.map((Q)=>p0.fromPositions(Q.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge($,X=e50){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,$]);let{edits:Y,snippets:Z}=a$.createEditsAndSnippetsFromSelections(this._editor,$,X.overwriteBefore,X.overwriteAfter,!0,X.adjustWhitespace,X.clipboardText,X.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",Y,(Q)=>{let G=Q.filter((U)=>!!U.identifier);for(let U=0;U<Z.length;U++)Z[U].initialize(G[U].textChange);let q=Z[0].isTrivialSnippet;if(!q){for(let U of this._snippets)U.merge(Z);console.assert(Z.length===0)}if(this._snippets[0].hasPlaceholder&&!q)return this._move(void 0);else return G.map((U)=>p0.fromPositions(U.range.getEndPosition()))})}next(){let $=this._move(!0);this._editor.setSelections($),this._editor.revealPositionInCenterIfOutsideViewport($[0].getPosition())}prev(){let $=this._move(!1);this._editor.setSelections($),this._editor.revealPositionInCenterIfOutsideViewport($[0].getPosition())}_move($){let X=[];for(let Y of this._snippets){let Z=Y.move($);X.push(...Z)}return X}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let $=this._editor.getSelections();if($.length<this._snippets.length)return!1;let X=new Map;for(let Y of this._snippets){let Z=Y.computePossibleSelections();if(X.size===0)for(let[Q,G]of Z){G.sort(k.compareRangesUsingStarts);for(let q of $)if(G[0].containsRange(q)){X.set(Q,[]);break}}if(X.size===0)return!1;X.forEach((Q,G)=>{Q.push(...Z.get(G))})}$.sort(k.compareRangesUsingStarts);for(let[Y,Z]of X){if(Z.length!==$.length){X.delete(Y);continue}Z.sort(k.compareRangesUsingStarts);for(let Q=0;Q<Z.length;Q++)if(!Z[Q].containsRange($[Q])){X.delete(Y);continue}}return X.size>0}};q_=a$=tz0([ez0(3,C6)],q_);var JH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},U_=function(J,$){return function(X,Y){$(X,Y,J)}},OH,J80={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},X8=OH=class{static get($){return $.getContribution(OH.ID)}constructor($,X,Y,Z,Q){this._editor=$,this._logService=X,this._languageFeaturesService=Y,this._languageConfigurationService=Q,this._snippetListener=new $0,this._modelVersionId=-1,this._inSnippet=OH.InSnippetMode.bindTo(Z),this._hasNextTabstop=OH.HasNextTabstop.bindTo(Z),this._hasPrevTabstop=OH.HasPrevTabstop.bindTo(Z)}dispose(){var $;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),($=this._session)===null||$===void 0||$.dispose(),this._snippetListener.dispose()}insert($,X){try{this._doInsert($,typeof X>"u"?J80:{...J80,...X})}catch(Y){this.cancel(),this._logService.error(Y),this._logService.error("snippet_error"),this._logService.error("insert_template=",$),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert($,X){var Y;if(!this._editor.hasModel())return;if(this._snippetListener.clear(),X.undoStopBefore)this._editor.getModel().pushStackElement();if(this._session&&typeof $!=="string")this.cancel();if(!this._session)this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new q_(this._editor,$,X,this._languageConfigurationService),this._session.insert();else T5(typeof $==="string"),this._session.merge($,X);if(X.undoStopAfter)this._editor.getModel().pushStackElement();if((Y=this._session)===null||Y===void 0?void 0:Y.hasChoice){let Z={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(H,j)=>{if(!this._session||H!==this._editor.getModel()||!g.equals(this._editor.getPosition(),j))return;let{activeChoice:V}=this._session;if(!V||V.choice.options.length===0)return;let W=H.getValueInRange(V.range),B=Boolean(V.choice.options.find((P)=>P.value===W)),K=[];for(let P=0;P<V.choice.options.length;P++){let A=V.choice.options[P];K.push({kind:13,label:A.value,insertText:A.value,sortText:"a".repeat(P+1),range:V.range,filterText:B?`${W}_${A.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:F("next","Go to next placeholder...")}})}return{suggestions:K}}},Q=this._editor.getModel(),G,q=!1,U=()=>{G===null||G===void 0||G.dispose(),q=!1},z=()=>{if(!q)G=this._languageFeaturesService.completionProvider.register({language:Q.getLanguageId(),pattern:Q.uri.fsPath,scheme:Q.uri.scheme,exclusive:!0},Z),this._snippetListener.add(G),q=!0};this._choiceCompletions={provider:Z,enable:z,disable:U}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((Z)=>Z.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}_updateState(){if(!this._session||!this._editor.hasModel())return;if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}_handleChoice(){var $;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{activeChoice:X}=this._session;if(!X||!this._choiceCompletions){($=this._choiceCompletions)===null||$===void 0||$.disable(),this._currentChoice=void 0;return}if(this._currentChoice!==X.choice)this._currentChoice=X.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{o50(this._editor,this._choiceCompletions.provider)})}finish(){while(this._inSnippet.get())this.next()}cancel($=!1){var X;if(this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(X=this._session)===null||X===void 0||X.dispose(),this._session=void 0,this._modelVersionId=-1,$)this._editor.setSelections([this._editor.getSelection()])}prev(){var $;($=this._session)===null||$===void 0||$.prev(),this._updateState()}next(){var $;($=this._session)===null||$===void 0||$.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};X8.ID="snippetController2";X8.InSnippetMode=new A0("inSnippetMode",!1,F("inSnippetMode","Whether the editor in current in snippet mode"));X8.HasNextTabstop=new A0("hasNextTabstop",!1,F("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));X8.HasPrevTabstop=new A0("hasPrevTabstop",!1,F("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));X8=OH=JH0([U_(1,P5),U_(2,D1),U_(3,m0),U_(4,C6)],X8);w4(X8.ID,X8,4);var z_=R9.bindToContribution(X8.get);I0(new z_({id:"jumpToNextSnippetPlaceholder",precondition:E0.and(X8.InSnippetMode,X8.HasNextTabstop),handler:(J)=>J.next(),kbOpts:{weight:130,kbExpr:Z0.editorTextFocus,primary:2}}));I0(new z_({id:"jumpToPrevSnippetPlaceholder",precondition:E0.and(X8.InSnippetMode,X8.HasPrevTabstop),handler:(J)=>J.prev(),kbOpts:{weight:130,kbExpr:Z0.editorTextFocus,primary:1026}}));I0(new z_({id:"leaveSnippet",precondition:X8.InSnippetMode,handler:(J)=>J.cancel(!0),kbOpts:{weight:130,kbExpr:Z0.editorTextFocus,primary:9,secondary:[1033]}}));I0(new z_({id:"acceptSnippet",precondition:X8.InSnippetMode,handler:(J)=>J.finish()}));e1();z0();F$();YM();c8();H7();y4();s0();pz();var $H0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},$80=function(J,$){return function(X,Y){$(X,Y,J)}},YF;class H_{constructor(J){this.name=J}select(J,$,X){if(X.length===0)return 0;let Y=X[0].score[0];for(let Z=0;Z<X.length;Z++){let{score:Q,completion:G}=X[Z];if(Q[0]!==Y)break;if(G.preselect)return Z}return 0}}class EC extends H_{constructor(){super("first")}memorize(J,$,X){}toJSON(){return}fromJSON(){}}class X80 extends H_{constructor(){super("recentlyUsed");this._cache=new tY(300,0.66),this._seq=0}memorize(J,$,X){let Y=`${J.getLanguageId()}/${X.textLabel}`;this._cache.set(Y,{touch:this._seq++,type:X.completion.kind,insertText:X.completion.insertText})}select(J,$,X){if(X.length===0)return 0;let Y=J.getLineContent($.lineNumber).substr($.column-10,$.column-1);if(/\s$/.test(Y))return super.select(J,$,X);let Z=X[0].score[0],Q=-1,G=-1,q=-1;for(let U=0;U<X.length;U++){if(X[U].score[0]!==Z)break;let z=`${J.getLanguageId()}/${X[U].textLabel}`,H=this._cache.peek(z);if(H&&H.touch>q&&H.type===X[U].completion.kind&&H.insertText===X[U].completion.insertText)q=H.touch,G=U;if(X[U].completion.preselect&&Q===-1)return Q=U}if(G!==-1)return G;else if(Q!==-1)return Q;else return 0}toJSON(){return this._cache.toJSON()}fromJSON(J){this._cache.clear();let $=0;for(let[X,Y]of J)Y.touch=$,Y.type=typeof Y.type==="number"?Y.type:RG.fromString(Y.type),this._cache.set(X,Y);this._seq=this._cache.size}}class Y80 extends H_{constructor(){super("recentlyUsedByPrefix");this._trie=bZ.forStrings(),this._seq=0}memorize(J,$,X){let{word:Y}=J.getWordUntilPosition($),Z=`${J.getLanguageId()}/${Y}`;this._trie.set(Z,{type:X.completion.kind,insertText:X.completion.insertText,touch:this._seq++})}select(J,$,X){let{word:Y}=J.getWordUntilPosition($);if(!Y)return super.select(J,$,X);let Z=`${J.getLanguageId()}/${Y}`,Q=this._trie.get(Z);if(!Q)Q=this._trie.findSubstr(Z);if(Q)for(let G=0;G<X.length;G++){let{kind:q,insertText:U}=X[G].completion;if(q===Q.type&&U===Q.insertText)return G}return super.select(J,$,X)}toJSON(){let J=[];return this._trie.forEach(($,X)=>J.push([X,$])),J.sort(($,X)=>-($[1].touch-X[1].touch)).forEach(($,X)=>$[1].touch=X),J.slice(0,200)}fromJSON(J){if(this._trie.clear(),J.length>0){this._seq=J[0][1].touch+1;for(let[$,X]of J)X.type=typeof X.type==="number"?X.type:RG.fromString(X.type),this._trie.set($,X)}}}var ZF=YF=class{constructor($,X){this._storageService=$,this._configService=X,this._disposables=new $0,this._persistSoon=new H6(()=>this._saveState(),500),this._disposables.add($.onWillSaveState((Y)=>{if(Y.reason===DM.SHUTDOWN)this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize($,X,Y){this._withStrategy($,X).memorize($,X,Y),this._persistSoon.schedule()}select($,X,Y){return this._withStrategy($,X).select($,X,Y)}_withStrategy($,X){var Y;let Z=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:$.getLanguageIdAtPosition(X.lineNumber,X.column),resource:$.uri});if(((Y=this._strategy)===null||Y===void 0?void 0:Y.name)!==Z){this._saveState();let Q=YF._strategyCtors.get(Z)||EC;this._strategy=new Q;try{let q=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,U=this._storageService.get(`${YF._storagePrefix}/${Z}`,q);if(U)this._strategy.fromJSON(JSON.parse(U))}catch(G){}}return this._strategy}_saveState(){if(this._strategy){let X=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,Y=JSON.stringify(this._strategy);this._storageService.store(`${YF._storagePrefix}/${this._strategy.name}`,Y,X,1)}}};ZF._strategyCtors=new Map([["recentlyUsedByPrefix",Y80],["recentlyUsed",X80],["first",EC]]);ZF._storagePrefix="suggest/memories";ZF=YF=$H0([$80(0,h$),$80(1,g1)],ZF);var IC=w0("ISuggestMemories");B1(IC,ZF,1);t1();var XH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},YH0=function(J,$){return function(X,Y){$(X,Y,J)}},yC,_H=yC=class{constructor($,X){this._editor=$,this._enabled=!1,this._ckAtEnd=yC.AtEnd.bindTo(X),this._configListener=this._editor.onDidChangeConfiguration((Y)=>Y.hasChanged(122)&&this._update()),this._update()}dispose(){var $;this._configListener.dispose(),($=this._selectionListener)===null||$===void 0||$.dispose(),this._ckAtEnd.reset()}_update(){let $=this._editor.getOption(122)==="on";if(this._enabled===$)return;if(this._enabled=$,this._enabled){let X=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let Y=this._editor.getModel(),Z=this._editor.getSelection(),Q=Y.getWordAtPosition(Z.getStartPosition());if(!Q){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(Q.endColumn===Z.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(X),X()}else if(this._selectionListener)this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0}};_H.AtEnd=new A0("atEndOfWord",!1);_H=yC=XH0([YH0(1,m0)],_H);c0();C7();t1();s0();o9();t1();var ZH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},QH0=function(J,$){return function(X,Y){$(X,Y,J)}},QF,C2=QF=class{constructor($,X){this._editor=$,this._index=0,this._ckOtherSuggestions=QF.OtherSuggestions.bindTo(X)}dispose(){this.reset()}reset(){var $;this._ckOtherSuggestions.reset(),($=this._listener)===null||$===void 0||$.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:$,index:X},Y){if($.items.length===0){this.reset();return}if(QF._moveIndex(!0,$,X)===X){this.reset();return}this._acceptNext=Y,this._model=$,this._index=X,this._listener=this._editor.onDidChangeCursorPosition(()=>{if(!this._ignore)this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex($,X,Y){let Z=Y;for(let Q=X.items.length;Q>0;Q--){if(Z=(Z+X.items.length+($?1:-1))%X.items.length,Z===Y)break;if(!X.items[Z].completion.additionalTextEdits)break}return Z}next(){this._move(!0)}prev(){this._move(!1)}_move($){if(!this._model)return;try{this._ignore=!0,this._index=QF._moveIndex($,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};C2.OtherSuggestions=new A0("hasOtherSuggestions",!1);C2=QF=ZH0([QH0(1,m0)],C2);V1();z0();zU();class xC{constructor(J,$,X,Y){this._disposables=new $0,this._disposables.add(X.onDidSuggest((Z)=>{if(Z.completionModel.items.length===0)this.reset()})),this._disposables.add(X.onDidCancel((Z)=>{this.reset()})),this._disposables.add($.onDidShow(()=>this._onItem($.getFocusedItem()))),this._disposables.add($.onDidFocus(this._onItem,this)),this._disposables.add($.onDidHide(this.reset,this)),this._disposables.add(J.onWillType((Z)=>{if(this._active&&!$.isFrozen()&&X.state!==0){let Q=Z.charCodeAt(Z.length-1);if(this._active.acceptCharacters.has(Q)&&J.getOption(0))Y(this._active.item)}}))}_onItem(J){if(!J||!K4(J.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===J.item)return;let $=new sj;for(let X of J.item.completion.commitCharacters)if(X.length>0)$.add(X.charCodeAt(0));this._active={acceptCharacters:$,item:J}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}e1();_8();O1();_0();z0();X1();o5();lz();V1();i0();D4();i0();class V4{async provideSelectionRanges(J,$){let X=[];for(let Y of $){let Z=[];X.push(Z);let Q=new Map;await new Promise((G)=>V4._bracketsRightYield(G,0,J,Y,Q)),await new Promise((G)=>V4._bracketsLeftYield(G,0,J,Y,Q,Z))}return X}static _bracketsRightYield(J,$,X,Y,Z){let Q=new Map,G=Date.now();while(!0){if($>=V4._maxRounds){J();break}if(!Y){J();break}let q=X.bracketPairs.findNextBracket(Y);if(!q){J();break}if(Date.now()-G>V4._maxDuration){setTimeout(()=>V4._bracketsRightYield(J,$+1,X,Y,Z));break}if(q.bracketInfo.isOpeningBracket){let z=q.bracketInfo.bracketText,H=Q.has(z)?Q.get(z):0;Q.set(z,H+1)}else{let z=q.bracketInfo.getOpeningBrackets()[0].bracketText,H=Q.has(z)?Q.get(z):0;if(H-=1,Q.set(z,Math.max(0,H)),H<0){let j=Z.get(z);if(!j)j=new m6,Z.set(z,j);j.push(q.range)}}Y=q.range.getEndPosition()}}static _bracketsLeftYield(J,$,X,Y,Z,Q){let G=new Map,q=Date.now();while(!0){if($>=V4._maxRounds&&Z.size===0){J();break}if(!Y){J();break}let U=X.bracketPairs.findPrevBracket(Y);if(!U){J();break}if(Date.now()-q>V4._maxDuration){setTimeout(()=>V4._bracketsLeftYield(J,$+1,X,Y,Z,Q));break}if(!U.bracketInfo.isOpeningBracket){let H=U.bracketInfo.getOpeningBrackets()[0].bracketText,j=G.has(H)?G.get(H):0;G.set(H,j+1)}else{let H=U.bracketInfo.bracketText,j=G.has(H)?G.get(H):0;if(j-=1,G.set(H,Math.max(0,j)),j<0){let V=Z.get(H);if(V){let W=V.shift();if(V.size===0)Z.delete(H);let B=k.fromPositions(U.range.getEndPosition(),W.getStartPosition()),K=k.fromPositions(U.range.getStartPosition(),W.getEndPosition());Q.push({range:B}),Q.push({range:K}),V4._addBracketLeading(X,K,Q)}}}Y=U.range.getStartPosition()}}static _addBracketLeading(J,$,X){if($.startLineNumber===$.endLineNumber)return;let Y=$.startLineNumber,Z=J.getLineFirstNonWhitespaceColumn(Y);if(Z!==0&&Z!==$.startColumn)X.push({range:k.fromPositions(new g(Y,Z),$.getEndPosition())}),X.push({range:k.fromPositions(new g(Y,1),$.getEndPosition())});let Q=Y-1;if(Q>0){let G=J.getLineFirstNonWhitespaceColumn(Q);if(G===$.startColumn&&G!==J.getLineLastNonWhitespaceColumn(Q))X.push({range:k.fromPositions(new g(Q,G),$.getEndPosition())}),X.push({range:k.fromPositions(new g(Q,1),$.getEndPosition())})}}}V4._maxDuration=30;V4._maxRounds=2;class r${static async create(J,$){if(!$.getOption(117).localityBonus)return r$.None;if(!$.hasModel())return r$.None;let X=$.getModel(),Y=$.getPosition();if(!J.canComputeWordRanges(X.uri))return r$.None;let[Z]=await new V4().provideSelectionRanges(X,[Y]);if(Z.length===0)return r$.None;let Q=await J.computeWordRanges(X.uri,Z[0].range);if(!Q)return r$.None;let G=X.getWordUntilPosition(Y);return delete Q[G.word],new class extends r${distance(q,U){if(!Y.equals($.getPosition()))return 0;if(U.kind===17)return 2097152;let z=typeof U.label==="string"?U.label:U.label.label,H=Q[z];if(GK(H))return 2097152;let j=YK(H,k.fromPositions(q),k.compareRangesUsingStarts),V=j>=0?H[j]:H[Math.max(0,~j-1)],W=Z.length;for(let B of Z){if(!k.containsRange(B.range,V))break;W-=1}return W}}}}r$.None=new class extends r${distance(){return 0}};NB();H7();t1();o9();_Q();V1();W2();X1();class v2{constructor(J,$,X,Y,Z,Q,G=b3.default,q=void 0){if(this.clipboardText=q,this._snippetCompareFn=v2._compareCompletionItems,this._items=J,this._column=$,this._wordDistance=Y,this._options=Z,this._refilterKind=1,this._lineContext=X,this._fuzzyScoreOptions=G,Q==="top")this._snippetCompareFn=v2._compareCompletionItemsSnippetsUp;else if(Q==="bottom")this._snippetCompareFn=v2._compareCompletionItemsSnippetsDown}get lineContext(){return this._lineContext}set lineContext(J){if(this._lineContext.leadingLineContent!==J.leadingLineContent||this._lineContext.characterCountDelta!==J.characterCountDelta)this._refilterKind=this._lineContext.characterCountDelta<J.characterCountDelta&&this._filteredItems?2:1,this._lineContext=J}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();let J=new Set;for(let[$,X]of this.getItemsByProvider())if(X.length>0&&X[0].container.incomplete)J.add($);return J}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){if(this._refilterKind!==0)this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;let J=[],{leadingLineContent:$,characterCountDelta:X}=this._lineContext,Y="",Z="",Q=this._refilterKind===1?this._items:this._filteredItems,G=[],q=!this._options.filterGraceful||Q.length>2000?V2:Ln;for(let U=0;U<Q.length;U++){let z=Q[U];if(z.isInvalid)continue;let H=this._itemsByProvider.get(z.provider);if(H)H.push(z);else this._itemsByProvider.set(z.provider,[z]);let j=z.position.column-z.editStart.column,V=j+X-(z.position.column-this._column);if(Y.length!==V)Y=V===0?"":$.slice(-V),Z=Y.toLowerCase();if(z.word=Y,V===0)z.score=bJ.Default;else{let W=0;while(W<j){let B=Y.charCodeAt(W);if(B===32||B===9)W+=1;else break}if(W>=V)z.score=bJ.Default;else if(typeof z.completion.filterText==="string"){let B=q(Y,Z,W,z.completion.filterText,z.filterTextLow,0,this._fuzzyScoreOptions);if(!B)continue;if(Hj(z.completion.filterText,z.textLabel)===0)z.score=B;else z.score=Nn(Y,Z,W,z.textLabel,z.labelLow,0),z.score[0]=B[0]}else{let B=q(Y,Z,W,z.textLabel,z.labelLow,0,this._fuzzyScoreOptions);if(!B)continue;z.score=B}}z.idx=U,z.distance=this._wordDistance.distance(z.position,z.completion),G.push(z),J.push(z.textLabel.length)}this._filteredItems=G.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:J.length?XK(J.length-0.85,J,(U,z)=>U-z):0}}static _compareCompletionItems(J,$){if(J.score[0]>$.score[0])return-1;else if(J.score[0]<$.score[0])return 1;else if(J.distance<$.distance)return-1;else if(J.distance>$.distance)return 1;else if(J.idx<$.idx)return-1;else if(J.idx>$.idx)return 1;else return 0}static _compareCompletionItemsSnippetsDown(J,$){if(J.completion.kind!==$.completion.kind){if(J.completion.kind===27)return 1;else if($.completion.kind===27)return-1}return v2._compareCompletionItems(J,$)}static _compareCompletionItemsSnippetsUp(J,$){if(J.completion.kind!==$.completion.kind){if(J.completion.kind===27)return-1;else if($.completion.kind===27)return 1}return v2._compareCompletionItems(J,$)}}f4();W2();P7();X1();LJ();t1();z0();c0();class r4 extends m{constructor(J,$){super();this.contextKeyService=J,this.model=$,this.inlineCompletionVisible=r4.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=r4.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=r4.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=r4.suppressSuggestions.bindTo(this.contextKeyService),this._register(w1((X)=>{let Y=this.model.read(X),Z=Y===null||Y===void 0?void 0:Y.state.read(X),Q=!!(Z===null||Z===void 0?void 0:Z.inlineCompletion)&&(Z===null||Z===void 0?void 0:Z.ghostText)!==void 0&&!(Z===null||Z===void 0?void 0:Z.ghostText.isEmpty());if(this.inlineCompletionVisible.set(Q),(Z===null||Z===void 0?void 0:Z.ghostText)&&(Z===null||Z===void 0?void 0:Z.inlineCompletion))this.suppressSuggestions.set(Z.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(w1((X)=>{let Y=this.model.read(X),Z=!1,Q=!0,G=Y===null||Y===void 0?void 0:Y.ghostText.read(X);if(!!(Y===null||Y===void 0?void 0:Y.selectedSuggestItem)&&G&&G.parts.length>0){let{column:q,lines:U}=G.parts[0],z=U[0],H=Y.textModel.getLineIndentColumn(G.lineNumber);if(q<=H){let V=c6(z);if(V===-1)V=z.length-1;Z=V>0;let W=Y.textModel.getOptions().tabSize;Q=s1.visibleColumnFromColumn(z,V+1,W)<W}}this.inlineCompletionSuggestsIndentation.set(Z),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(Q)}))}}r4.inlineSuggestionVisible=new A0("inlineSuggestionVisible",!1,F("inlineSuggestionVisible","Whether an inline suggestion is visible"));r4.inlineSuggestionHasIndentation=new A0("inlineSuggestionHasIndentation",!1,F("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));r4.inlineSuggestionHasIndentationLessThanTabSize=new A0("inlineSuggestionHasIndentationLessThanTabSize",!0,F("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));r4.suppressSuggestions=new A0("inlineSuggestionSuppressSuggestions",void 0,F("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));xR();var GH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},h2=function(J,$){return function(X,Y){$(X,Y,J)}},bC;class f2{static shouldAutoTrigger(J){if(!J.hasModel())return!1;let $=J.getModel(),X=J.getPosition();$.tokenization.tokenizeIfCheap(X.lineNumber);let Y=$.getWordAtPosition(X);if(!Y)return!1;if(Y.endColumn!==X.column&&Y.startColumn+1!==X.column)return!1;if(!isNaN(Number(Y.word)))return!1;return!0}constructor(J,$,X){this.leadingLineContent=J.getLineContent($.lineNumber).substr(0,$.column-1),this.leadingWord=J.getWordUntilPosition($),this.lineNumber=$.lineNumber,this.column=$.column,this.triggerOptions=X}}function qH0(J,$,X){if(!Boolean($.getContextKeyValue(r4.inlineSuggestionVisible.key)))return!0;let Y=$.getContextKeyValue(r4.suppressSuggestions.key);if(Y!==void 0)return!Y;return!J.getOption(62).suppressSuggestions}function UH0(J,$,X){if(!Boolean($.getContextKeyValue("inlineSuggestionVisible")))return!0;let Y=$.getContextKeyValue(r4.suppressSuggestions.key);if(Y!==void 0)return!Y;return!J.getOption(62).suppressSuggestions}var j_=bC=class{constructor($,X,Y,Z,Q,G,q,U,z){this._editor=$,this._editorWorkerService=X,this._clipboardService=Y,this._telemetryService=Z,this._logService=Q,this._contextKeyService=G,this._configurationService=q,this._languageFeaturesService=U,this._envService=z,this._toDispose=new $0,this._triggerCharacterListener=new $0,this._triggerQuickSuggest=new s8,this._triggerState=void 0,this._completionDisposables=new $0,this._onDidCancel=new x,this._onDidTrigger=new x,this._onDidSuggest=new x,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new p0(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let H=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{H=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{H=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection((j)=>{if(!H)this._onCursorChange(j)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{if(!H&&this._triggerState!==void 0)this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){h1(this._triggerCharacterListener),h1([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(90)||!this._editor.hasModel()||!this._editor.getOption(120))return;let $=new Map;for(let Y of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let Z of Y.triggerCharacters||[]){let Q=$.get(Z);if(!Q)Q=new Set,Q.add(i50()),$.set(Z,Q);Q.add(Y)}let X=(Y)=>{var Z;if(!UH0(this._editor,this._contextKeyService,this._configurationService))return;if(f2.shouldAutoTrigger(this._editor))return;if(!Y){let q=this._editor.getPosition();Y=this._editor.getModel().getLineContent(q.lineNumber).substr(0,q.column-1)}let Q="";if(HX(Y.charCodeAt(Y.length-1))){if(P6(Y.charCodeAt(Y.length-2)))Q=Y.substr(Y.length-2)}else Q=Y.charAt(Y.length-1);let G=$.get(Q);if(G){let q=new Map;if(this._completionModel){for(let[U,z]of this._completionModel.getItemsByProvider())if(!G.has(U))q.set(U,z)}this.trigger({auto:!0,triggerKind:1,triggerCharacter:Q,retrigger:Boolean(this._completionModel),clipboardText:(Z=this._completionModel)===null||Z===void 0?void 0:Z.clipboardText,completionOptions:{providerFilter:G,providerItemsToReuse:q}})}};this._triggerCharacterListener.add(this._editor.onDidType(X)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>X()))}get state(){if(!this._triggerState)return 0;else if(!this._triggerState.auto)return 1;else return 2}cancel($=!1){var X;if(this._triggerState!==void 0)this._triggerQuickSuggest.cancel(),(X=this._requestToken)===null||X===void 0||X.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:$})}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){if(this._triggerState!==void 0)if(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel()))this.cancel();else this.trigger({auto:this._triggerState.auto,retrigger:!0})}_onCursorChange($){if(!this._editor.hasModel())return;let X=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!$.selection.isEmpty()||$.reason!==0&&$.reason!==3||$.source!=="keyboard"&&$.source!=="deleteLeft"){this.cancel();return}if(this._triggerState===void 0&&$.reason===0){if(X.containsRange(this._currentSelection)||X.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))this._doTriggerQuickSuggest()}else if(this._triggerState!==void 0&&$.reason===3)this._refilterCompletionItems()}_onCompositionEnd(){if(this._triggerState===void 0)this._doTriggerQuickSuggest();else this._refilterCompletionItems()}_doTriggerQuickSuggest(){var $;if(MH.isAllOff(this._editor.getOption(88)))return;if(this._editor.getOption(117).snippetsPreventQuickSuggestions&&(($=X8.get(this._editor))===null||$===void 0?void 0:$.isInSnippet()))return;this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0)return;if(!f2.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let X=this._editor.getModel(),Y=this._editor.getPosition(),Z=this._editor.getOption(88);if(MH.isAllOff(Z))return;if(!MH.isAllOn(Z)){X.tokenization.tokenizeIfCheap(Y.lineNumber);let Q=X.tokenization.getLineTokens(Y.lineNumber),G=Q.getStandardTokenType(Q.findTokenIndexAtOffset(Math.max(Y.column-1-1,0)));if(MH.valueFor(Z,G)!=="on")return}if(!qH0(this._editor,this._contextKeyService,this._configurationService))return;if(!this._languageFeaturesService.completionProvider.has(X))return;this.trigger({auto:!0})},this._editor.getOption(89))}_refilterCompletionItems(){T5(this._editor.hasModel()),T5(this._triggerState!==void 0);let $=this._editor.getModel(),X=this._editor.getPosition(),Y=new f2($,X,{...this._triggerState,refilter:!0});this._onNewContext(Y)}trigger($){var X,Y,Z,Q,G,q;if(!this._editor.hasModel())return;let U=this._editor.getModel(),z=new f2(U,this._editor.getPosition(),$);this.cancel($.retrigger),this._triggerState=$,this._onDidTrigger.fire({auto:$.auto,shy:(X=$.shy)!==null&&X!==void 0?X:!1,position:this._editor.getPosition()}),this._context=z;let H={triggerKind:(Y=$.triggerKind)!==null&&Y!==void 0?Y:0};if($.triggerCharacter)H={triggerKind:1,triggerCharacter:$.triggerCharacter};this._requestToken=new L5;let j=this._editor.getOption(111),V=1;switch(j){case"top":V=0;break;case"bottom":V=2;break}let{itemKind:W,showDeprecated:B}=bC.createSuggestFilter(this._editor),K=new RH(V,(Q=(Z=$.completionOptions)===null||Z===void 0?void 0:Z.kindFilter)!==null&&Q!==void 0?Q:W,(G=$.completionOptions)===null||G===void 0?void 0:G.providerFilter,(q=$.completionOptions)===null||q===void 0?void 0:q.providerItemsToReuse,B),P=r$.create(this._editorWorkerService,this._editor),A=wC(this._languageFeaturesService.completionProvider,U,this._editor.getPosition(),K,H,this._requestToken.token);Promise.all([A,P]).then(async([D,M])=>{var R;if((R=this._requestToken)===null||R===void 0||R.dispose(),!this._editor.hasModel())return;let O=$===null||$===void 0?void 0:$.clipboardText;if(!O&&D.needsClipboard)O=await this._clipboardService.readText();if(this._triggerState===void 0)return;let N=this._editor.getModel(),T=new f2(N,this._editor.getPosition(),$),S={...b3.default,firstMatchCanBeWeak:!this._editor.getOption(117).matchOnWordStartOnly};if(this._completionModel=new v2(D.items,this._context.column,{leadingLineContent:T.leadingLineContent,characterCountDelta:T.column-this._context.column},M,this._editor.getOption(117),this._editor.getOption(111),S,O),this._completionDisposables.add(D.disposable),this._onNewContext(T),this._reportDurationsTelemetry(D.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment){for(let v of D.items)if(v.isInvalid)this._logService.warn(`[suggest] did IGNORE invalid completion item from ${v.provider._debugDisplayName}`,v.completion)}}).catch($1)}_reportDurationsTelemetry($){if(this._telemetryGate++%230!==0)return;setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify($)}),this._logService.debug("suggest.durations.json",$)})}static createSuggestFilter($){let X=new Set;if($.getOption(111)==="none")X.add(27);let Z=$.getOption(117);if(!Z.showMethods)X.add(0);if(!Z.showFunctions)X.add(1);if(!Z.showConstructors)X.add(2);if(!Z.showFields)X.add(3);if(!Z.showVariables)X.add(4);if(!Z.showClasses)X.add(5);if(!Z.showStructs)X.add(6);if(!Z.showInterfaces)X.add(7);if(!Z.showModules)X.add(8);if(!Z.showProperties)X.add(9);if(!Z.showEvents)X.add(10);if(!Z.showOperators)X.add(11);if(!Z.showUnits)X.add(12);if(!Z.showValues)X.add(13);if(!Z.showConstants)X.add(14);if(!Z.showEnums)X.add(15);if(!Z.showEnumMembers)X.add(16);if(!Z.showKeywords)X.add(17);if(!Z.showWords)X.add(18);if(!Z.showColors)X.add(19);if(!Z.showFiles)X.add(20);if(!Z.showReferences)X.add(21);if(!Z.showColors)X.add(22);if(!Z.showFolders)X.add(23);if(!Z.showTypeParameters)X.add(24);if(!Z.showSnippets)X.add(27);if(!Z.showUsers)X.add(25);if(!Z.showIssues)X.add(26);return{itemKind:X,showDeprecated:Z.showDeprecated}}_onNewContext($){if(!this._context)return;if($.lineNumber!==this._context.lineNumber){this.cancel();return}if(W5($.leadingLineContent)!==W5(this._context.leadingLineContent)){this.cancel();return}if($.column<this._context.column){if($.leadingWord.word)this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});else this.cancel();return}if(!this._completionModel)return;if($.leadingWord.word.length!==0&&$.leadingWord.startColumn>this._context.leadingWord.startColumn){if(f2.shouldAutoTrigger(this._editor)&&this._context){let Y=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:Y}})}return}if($.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&$.leadingWord.word.length!==0){let X=new Map,Y=new Set;for(let[Z,Q]of this._completionModel.getItemsByProvider())if(Q.length>0&&Q[0].container.incomplete)Y.add(Z);else X.set(Z,Q);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:Y,providerItemsToReuse:X}})}else{let X=this._completionModel.lineContext,Y=!1;if(this._completionModel.lineContext={leadingLineContent:$.leadingLineContent,characterCountDelta:$.column-this._context.column},this._completionModel.items.length===0){let Z=f2.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(Z&&this._context.leadingWord.endColumn<$.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(!this._context.triggerOptions.auto){if(this._completionModel.lineContext=X,Y=this._completionModel.items.length>0,Y&&$.leadingWord.word.length===0){this.cancel();return}}else{this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:$.triggerOptions,isFrozen:Y})}}};j_=bC=GH0([h2(1,U4),h2(2,N2),h2(3,f7),h2(4,P5),h2(5,m0),h2(6,g1),h2(7,D1),h2(8,Rz)],j_);z0();class GF{constructor(J,$){this._disposables=new $0,this._lastOvertyped=[],this._locked=!1,this._disposables.add(J.onWillType(()=>{if(this._locked||!J.hasModel())return;let X=J.getSelections(),Y=X.length,Z=!1;for(let G=0;G<Y;G++)if(!X[G].isEmpty()){Z=!0;break}if(!Z){if(this._lastOvertyped.length!==0)this._lastOvertyped.length=0;return}this._lastOvertyped=[];let Q=J.getModel();for(let G=0;G<Y;G++){let q=X[G];if(Q.getValueLengthInRange(q)>GF._maxSelectionLength)return;this._lastOvertyped[G]={value:Q.getValueInRange(q),multiline:q.startLineNumber!==q.endLineNumber}}})),this._disposables.add($.onDidTrigger((X)=>{this._locked=!0})),this._disposables.add($.onDidCancel((X)=>{this._locked=!1}))}getLastOvertypedInfo(J){if(J>=0&&J<this._lastOvertyped.length)return this._lastOvertyped[J];return}dispose(){this._disposables.dispose()}}GF._maxSelectionLength=51200;T0();m3();e1();O1();_0();z0();X1();K0(".monaco-editor .suggest-widget{z-index:40;border-radius:3px;flex-direction:column;width:430px;display:flex}.monaco-editor .suggest-widget.message{flex-direction:row;align-items:center}.monaco-editor .suggest-widget,.monaco-editor .suggest-details{border-style:solid;border-width:1px;border-color:var(--vscode-editorSuggestWidget-border);background-color:var(--vscode-editorSuggestWidget-background);flex:0 auto;width:100%}.monaco-editor.hc-black .suggest-widget,.monaco-editor.hc-black .suggest-details,.monaco-editor.hc-light .suggest-widget,.monaco-editor.hc-light .suggest-details{border-width:2px}.monaco-editor .suggest-widget .suggest-status-bar{box-sizing:border-box;border-top:1px solid var(--vscode-editorSuggestWidget-border);flex-flow:row;justify-content:space-between;width:100%;padding:0 4px;font-size:80%;display:none;overflow:hidden}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar{display:flex}.monaco-editor .suggest-widget .suggest-status-bar .left{padding-right:8px}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-label{color:var(--vscode-editorSuggestWidgetStatus-foreground)}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label{margin-right:0}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label:after{content:\", \";margin-right:.3em}.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row>.contents>.main>.right>.readMore,.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget.with-status-bar:not(.docs-side) .monaco-list .monaco-list-row:hover>.contents>.main>.right.can-expand-details>.details-label{width:100%}.monaco-editor .suggest-widget>.message{padding-left:22px}.monaco-editor .suggest-widget>.tree{width:100%;height:100%}.monaco-editor .suggest-widget .monaco-list{-webkit-user-select:none;user-select:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row{-mox-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;cursor:pointer;touch-action:none;background-position:2px 2px;background-repeat:no-repeat;padding-right:10px;display:flex}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused{color:var(--vscode-editorSuggestWidget-selectedForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon{color:var(--vscode-editorSuggestWidget-selectedIconForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents{flex:1;height:100%;padding-left:2px;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main{text-overflow:ellipsis;white-space:pre;justify-content:space-between;display:flex;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{display:flex}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.focused)>.contents>.main .monaco-icon-label{color:var(--vscode-editorSuggestWidget-foreground)}.monaco-editor .suggest-widget:not(.frozen) .monaco-highlighted-label .highlight{font-weight:700}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-highlightForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-focusHighlightForeground)}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:before{color:inherit;opacity:1;cursor:pointer;font-size:14px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close{position:absolute;top:6px;right:2px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close:hover,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:hover{opacity:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{opacity:.7}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.signature-label{text-overflow:ellipsis;opacity:.6;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.qualifier-label{opacity:.4;font-size:85%;line-height:initial;text-overflow:ellipsis;align-self:center;margin-left:12px;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{text-overflow:ellipsis;white-space:nowrap;margin-left:1.1em;font-size:85%;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label>.monaco-tokenized-source{display:inline}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{display:none}.monaco-editor .suggest-widget:not(.shows-details) .monaco-list .monaco-list-row.focused>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row.focused:not(.string-label)>.contents>.main>.right>.details-label{display:inline}.monaco-editor .suggest-widget:not(.docs-side) .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right.can-expand-details>.details-label{width:calc(100% - 26px)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left{flex-grow:1;flex-shrink:1;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.monaco-icon-label{flex-shrink:0}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.left>.monaco-icon-label{max-width:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.left>.monaco-icon-label{flex-shrink:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{flex-shrink:4;max-width:70%;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{visibility:hidden;width:18px;height:18px;display:inline-block;position:absolute;right:10px}.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:none!important}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:inline-block}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right>.readMore{visibility:visible}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated{opacity:.66;text-decoration:unset}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated>.monaco-icon-label-container>.monaco-icon-name-container{text-decoration:line-through}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label:before{height:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon{background-position:50%;background-repeat:no-repeat;background-size:80%;width:16px;height:16px;margin-left:2px;display:block}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.hide{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .suggest-icon{align-items:center;margin-right:4px;display:flex}.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .icon,.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .suggest-icon:before{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.customcolor .colorspan{border:.1em solid #000;width:.7em;height:.7em;margin:0 0 0 .3em;display:inline-block}.monaco-editor .suggest-details-container{z-index:41}.monaco-editor .suggest-details{cursor:default;color:var(--vscode-editorSuggestWidget-foreground);flex-direction:column;display:flex}.monaco-editor .suggest-details.focused{border-color:var(--vscode-focusBorder)}.monaco-editor .suggest-details a{color:var(--vscode-textLink-foreground)}.monaco-editor .suggest-details a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .suggest-details code{background-color:var(--vscode-textCodeBlock-background)}.monaco-editor .suggest-details.no-docs{display:none}.monaco-editor .suggest-details>.monaco-scrollable-element{flex:1}.monaco-editor .suggest-details>.monaco-scrollable-element>.body{box-sizing:border-box;width:100%;height:100%}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type{text-overflow:ellipsis;opacity:.7;white-space:pre;flex:2;margin:0 24px 0 0;padding:4px 0 12px 5px;overflow:hidden}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type.auto-wrap{white-space:normal;word-break:break-all}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs{white-space:pre-wrap;margin:0;padding:4px 5px}.monaco-editor .suggest-details.no-type>.monaco-scrollable-element>.body>.docs{margin-right:24px;overflow:hidden}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs{white-space:initial;min-height:calc(1rem + 8px);padding:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div,.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>span:not(:empty){padding:4px 5px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:first-child{margin-top:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:last-child{margin-bottom:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .monaco-tokenized-source{white-space:pre}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs .code{white-space:pre-wrap;word-wrap:break-word}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .codicon{vertical-align:sub}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>p:empty{display:none}.monaco-editor .suggest-details code{border-radius:3px;padding:0 .4em}.monaco-editor .suggest-details ul,.monaco-editor .suggest-details ol{padding-left:20px}.monaco-editor .suggest-details p code{font-family:var(--monaco-monospace-font)}");n7();i9();NR();j7();f4();P$();C7();t1();s0();wZ();G5();var zH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},dZ=function(J,$){return function(X,Y){$(X,Y,J)}},V_=class extends kZ{constructor($,X,Y,Z,Q,G,q,U,z,H,j,V,W){super($,{...Z.getRawOptions(),overflowWidgetsDomNode:Z.getOverflowWidgetsDomNode()},Y,Q,G,q,U,z,H,j,V,W);this._parentEditor=Z,this._overwriteOptions=X,super.updateOptions(this._overwriteOptions),this._register(Z.onDidChangeConfiguration((B)=>this._onParentConfigurationChanged(B)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged($){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions($){_N(this._overwriteOptions,$,!0),super.updateOptions(this._overwriteOptions)}};V_=zH0([dZ(4,l0),dZ(5,X6),dZ(6,y5),dZ(7,m0),dZ(8,Q5),dZ(9,K8),dZ(10,a8),dZ(11,C6),dZ(12,D1)],V_);T0();$Y();z0();c0();OM();FJ();t1();s0();var HH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},SC=function(J,$){return function(X,Y){$(X,Y,J)}};class CC extends uz{updateLabel(){let J=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!J)return super.updateLabel();if(this.label)this.label.textContent=F({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,CC.symbolPrintEnter(J))}static symbolPrintEnter(J){var $;return($=J.getLabel())===null||$===void 0?void 0:$.replace(/\benter\b/gi,"⏎")}}var W_=class{constructor($,X,Y,Z,Q){this._menuId=X,this._menuService=Z,this._contextKeyService=Q,this._menuDisposables=new $0,this.element=j0($,B0(".suggest-status-bar"));let G=(q)=>{return q instanceof WJ?Y.createInstance(CC,q,void 0):void 0};this._leftActions=new S8(this.element,{actionViewItemProvider:G}),this._rightActions=new S8(this.element,{actionViewItemProvider:G}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){let $=this._menuService.createMenu(this._menuId,this._contextKeyService),X=()=>{let Y=[],Z=[];for(let[Q,G]of $.getActions())if(Q==="left")Y.push(...G);else Z.push(...G);this._leftActions.clear(),this._leftActions.push(Y),this._rightActions.clear(),this._rightActions.push(Z)};this._menuDisposables.add($.onDidChange(()=>X())),this._menuDisposables.add($)}hide(){this._menuDisposables.clear()}};W_=HH0([SC(2,l0),SC(3,BJ),SC(4,m0)],W_);K0(".monaco-editor .codicon.codicon-symbol-array,.monaco-workbench .codicon.codicon-symbol-array{color:var(--vscode-symbolIcon-arrayForeground)}.monaco-editor .codicon.codicon-symbol-boolean,.monaco-workbench .codicon.codicon-symbol-boolean{color:var(--vscode-symbolIcon-booleanForeground)}.monaco-editor .codicon.codicon-symbol-class,.monaco-workbench .codicon.codicon-symbol-class{color:var(--vscode-symbolIcon-classForeground)}.monaco-editor .codicon.codicon-symbol-method,.monaco-workbench .codicon.codicon-symbol-method{color:var(--vscode-symbolIcon-methodForeground)}.monaco-editor .codicon.codicon-symbol-color,.monaco-workbench .codicon.codicon-symbol-color{color:var(--vscode-symbolIcon-colorForeground)}.monaco-editor .codicon.codicon-symbol-constant,.monaco-workbench .codicon.codicon-symbol-constant{color:var(--vscode-symbolIcon-constantForeground)}.monaco-editor .codicon.codicon-symbol-constructor,.monaco-workbench .codicon.codicon-symbol-constructor{color:var(--vscode-symbolIcon-constructorForeground)}.monaco-editor .codicon.codicon-symbol-value,.monaco-workbench .codicon.codicon-symbol-value,.monaco-editor .codicon.codicon-symbol-enum,.monaco-workbench .codicon.codicon-symbol-enum{color:var(--vscode-symbolIcon-enumeratorForeground)}.monaco-editor .codicon.codicon-symbol-enum-member,.monaco-workbench .codicon.codicon-symbol-enum-member{color:var(--vscode-symbolIcon-enumeratorMemberForeground)}.monaco-editor .codicon.codicon-symbol-event,.monaco-workbench .codicon.codicon-symbol-event{color:var(--vscode-symbolIcon-eventForeground)}.monaco-editor .codicon.codicon-symbol-field,.monaco-workbench .codicon.codicon-symbol-field{color:var(--vscode-symbolIcon-fieldForeground)}.monaco-editor .codicon.codicon-symbol-file,.monaco-workbench .codicon.codicon-symbol-file{color:var(--vscode-symbolIcon-fileForeground)}.monaco-editor .codicon.codicon-symbol-folder,.monaco-workbench .codicon.codicon-symbol-folder{color:var(--vscode-symbolIcon-folderForeground)}.monaco-editor .codicon.codicon-symbol-function,.monaco-workbench .codicon.codicon-symbol-function{color:var(--vscode-symbolIcon-functionForeground)}.monaco-editor .codicon.codicon-symbol-interface,.monaco-workbench .codicon.codicon-symbol-interface{color:var(--vscode-symbolIcon-interfaceForeground)}.monaco-editor .codicon.codicon-symbol-key,.monaco-workbench .codicon.codicon-symbol-key{color:var(--vscode-symbolIcon-keyForeground)}.monaco-editor .codicon.codicon-symbol-keyword,.monaco-workbench .codicon.codicon-symbol-keyword{color:var(--vscode-symbolIcon-keywordForeground)}.monaco-editor .codicon.codicon-symbol-module,.monaco-workbench .codicon.codicon-symbol-module{color:var(--vscode-symbolIcon-moduleForeground)}.monaco-editor .codicon.codicon-symbol-namespace,.monaco-workbench .codicon.codicon-symbol-namespace{color:var(--vscode-symbolIcon-namespaceForeground)}.monaco-editor .codicon.codicon-symbol-null,.monaco-workbench .codicon.codicon-symbol-null{color:var(--vscode-symbolIcon-nullForeground)}.monaco-editor .codicon.codicon-symbol-number,.monaco-workbench .codicon.codicon-symbol-number{color:var(--vscode-symbolIcon-numberForeground)}.monaco-editor .codicon.codicon-symbol-object,.monaco-workbench .codicon.codicon-symbol-object{color:var(--vscode-symbolIcon-objectForeground)}.monaco-editor .codicon.codicon-symbol-operator,.monaco-workbench .codicon.codicon-symbol-operator{color:var(--vscode-symbolIcon-operatorForeground)}.monaco-editor .codicon.codicon-symbol-package,.monaco-workbench .codicon.codicon-symbol-package{color:var(--vscode-symbolIcon-packageForeground)}.monaco-editor .codicon.codicon-symbol-property,.monaco-workbench .codicon.codicon-symbol-property{color:var(--vscode-symbolIcon-propertyForeground)}.monaco-editor .codicon.codicon-symbol-reference,.monaco-workbench .codicon.codicon-symbol-reference{color:var(--vscode-symbolIcon-referenceForeground)}.monaco-editor .codicon.codicon-symbol-snippet,.monaco-workbench .codicon.codicon-symbol-snippet{color:var(--vscode-symbolIcon-snippetForeground)}.monaco-editor .codicon.codicon-symbol-string,.monaco-workbench .codicon.codicon-symbol-string{color:var(--vscode-symbolIcon-stringForeground)}.monaco-editor .codicon.codicon-symbol-struct,.monaco-workbench .codicon.codicon-symbol-struct{color:var(--vscode-symbolIcon-structForeground)}.monaco-editor .codicon.codicon-symbol-text,.monaco-workbench .codicon.codicon-symbol-text{color:var(--vscode-symbolIcon-textForeground)}.monaco-editor .codicon.codicon-symbol-type-parameter,.monaco-workbench .codicon.codicon-symbol-type-parameter{color:var(--vscode-symbolIcon-typeParameterForeground)}.monaco-editor .codicon.codicon-symbol-unit,.monaco-workbench .codicon.codicon-symbol-unit{color:var(--vscode-symbolIcon-unitForeground)}.monaco-editor .codicon.codicon-symbol-variable,.monaco-workbench .codicon.codicon-symbol-variable{color:var(--vscode-symbolIcon-variableForeground)}");c0();i8();var qB1=I("symbolIcon.arrayForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),UB1=I("symbolIcon.booleanForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zB1=I("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},F("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),HB1=I("symbolIcon.colorForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jB1=I("symbolIcon.constantForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),VB1=I("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},F("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),WB1=I("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},F("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),BB1=I("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},F("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),FB1=I("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},F("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),KB1=I("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},F("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),AB1=I("symbolIcon.fileForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),PB1=I("symbolIcon.folderForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),DB1=I("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},F("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),RB1=I("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},F("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),MB1=I("symbolIcon.keyForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),OB1=I("symbolIcon.keywordForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_B1=I("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},F("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),NB1=I("symbolIcon.moduleForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TB1=I("symbolIcon.namespaceForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wB1=I("symbolIcon.nullForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),LB1=I("symbolIcon.numberForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kB1=I("symbolIcon.objectForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),EB1=I("symbolIcon.operatorForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),IB1=I("symbolIcon.packageForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yB1=I("symbolIcon.propertyForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xB1=I("symbolIcon.referenceForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),bB1=I("symbolIcon.snippetForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SB1=I("symbolIcon.stringForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),CB1=I("symbolIcon.structForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),vB1=I("symbolIcon.textForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hB1=I("symbolIcon.typeParameterForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fB1=I("symbolIcon.unitForeground",{dark:H0,light:H0,hcDark:H0,hcLight:H0},F("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gB1=I("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},F("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));c0();t1();s0();pz();i8();qZ();G5();T0();yM();_0();z0();class qF{constructor(){this._onDidWillResize=new x,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new x,this.onDidResize=this._onDidResize.event,this._sashListener=new $0,this._size=new Y6(0,0),this._minSize=new Y6(0,0),this._maxSize=new Y6(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new C8(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new C8(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new C8(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:nW.North}),this._southSash=new C8(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:nW.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let J,$=0,X=0;this._sashListener.add(q0.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{if(J===void 0)this._onDidWillResize.fire(),J=this._size,$=0,X=0})),this._sashListener.add(q0.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{if(J!==void 0)J=void 0,$=0,X=0,this._onDidResize.fire({dimension:this._size,done:!0})})),this._sashListener.add(this._eastSash.onDidChange((Y)=>{if(J)X=Y.currentX-Y.startX,this.layout(J.height+$,J.width+X),this._onDidResize.fire({dimension:this._size,done:!1,east:!0})})),this._sashListener.add(this._westSash.onDidChange((Y)=>{if(J)X=-(Y.currentX-Y.startX),this.layout(J.height+$,J.width+X),this._onDidResize.fire({dimension:this._size,done:!1,west:!0})})),this._sashListener.add(this._northSash.onDidChange((Y)=>{if(J)$=-(Y.currentY-Y.startY),this.layout(J.height+$,J.width+X),this._onDidResize.fire({dimension:this._size,done:!1,north:!0})})),this._sashListener.add(this._southSash.onDidChange((Y)=>{if(J)$=Y.currentY-Y.startY,this.layout(J.height+$,J.width+X),this._onDidResize.fire({dimension:this._size,done:!1,south:!0})})),this._sashListener.add(q0.any(this._eastSash.onDidReset,this._westSash.onDidReset)((Y)=>{if(this._preferredSize)this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0})})),this._sashListener.add(q0.any(this._northSash.onDidReset,this._southSash.onDidReset)((Y)=>{if(this._preferredSize)this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0})}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(J,$,X,Y){this._northSash.state=J?3:0,this._eastSash.state=$?3:0,this._southSash.state=X?3:0,this._westSash.state=Y?3:0}layout(J=this.size.height,$=this.size.width){let{height:X,width:Y}=this._minSize,{height:Z,width:Q}=this._maxSize;J=Math.max(X,Math.min(Z,J)),$=Math.max(Y,Math.min(Q,$));let G=new Y6($,J);if(!Y6.equals(G,this._size))this.domNode.style.height=J+"px",this.domNode.style.width=$+"px",this._size=G,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout()}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(J){this._maxSize=J}get maxSize(){return this._maxSize}set minSize(J){this._minSize=J}get minSize(){return this._minSize}set preferredSize(J){this._preferredSize=J}get preferredSize(){return this._preferredSize}}T0();L$();k5();I5();_0();S3();z0();sy();c0();s0();var jH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},VH0=function(J,$){return function(X,Y){$(X,Y,J)}};function UF(J){return!!J&&Boolean(J.completion.documentation||J.completion.detail&&J.completion.detail!==J.completion.label)}var B_=class{constructor($,X){this._editor=$,this._onDidClose=new x,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new x,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new $0,this._renderDisposeable=new $0,this._borderWidth=1,this._size=new Y6(330,0),this.domNode=B0(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=X.createInstance(C3,{editor:$}),this._body=B0(".body"),this._scrollbar=new jZ(this._body,{alwaysConsumeMouseWheel:!0}),j0(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=j0(this._body,B0(".header")),this._close=j0(this._header,B0("span"+h0.asCSSSelector(F0.close))),this._close.title=F("details.close","Close"),this._type=j0(this._header,B0("p.type")),this._docs=j0(this._body,B0("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((Y)=>{if(Y.hasChanged(50))this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let $=this._editor.getOptions(),X=$.get(50),Y=X.getMassagedFontFamily(),Z=$.get(118)||X.fontSize,Q=$.get(119)||X.lineHeight,G=X.fontWeight,q=`${Z}px`,U=`${Q}px`;this.domNode.style.fontSize=q,this.domNode.style.lineHeight=`${Q/Z}`,this.domNode.style.fontWeight=G,this.domNode.style.fontFeatureSettings=X.fontFeatureSettings,this._type.style.fontFamily=Y,this._close.style.height=U,this._close.style.width=U}getLayoutInfo(){let $=this._editor.getOption(119)||this._editor.getOption(50).lineHeight,X=this._borderWidth,Y=X*2;return{lineHeight:$,borderWidth:X,borderHeight:Y,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=F("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem($,X){var Y,Z;this._renderDisposeable.clear();let{detail:Q,documentation:G}=$.completion;if(X){let q="";q+=`score: ${$.score[0]}
`,q+=`prefix: ${(Y=$.word)!==null&&Y!==void 0?Y:"(no prefix)"}
`,q+=`word: ${$.completion.filterText?$.completion.filterText+" (filterText)":$.textLabel}
`,q+=`distance: ${$.distance} (localityBonus-setting)
`,q+=`index: ${$.idx}, based on ${$.completion.sortText&&`sortText: "${$.completion.sortText}"`||"label"}
`,q+=`commit_chars: ${(Z=$.completion.commitCharacters)===null||Z===void 0?void 0:Z.join("")}
`,G=new Tz().appendCodeblock("empty",q),Q=`Provider: ${$.provider._debugDisplayName}`}if(!X&&!UF($)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),Q){let q=Q.length>1e5?`${Q.substr(0,1e5)}…`:Q;this._type.textContent=q,this._type.title=q,P9(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(q))}else t5(this._type),this._type.title="",D9(this._type),this.domNode.classList.add("no-type");if(t5(this._docs),typeof G==="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=G;else if(G){this._docs.classList.add("markdown-docs"),t5(this._docs);let q=this._markdownRenderer.render(G);this._docs.appendChild(q.element),this._renderDisposeable.add(q),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=(q)=>{q.preventDefault(),q.stopPropagation()},this._close.onclick=(q)=>{q.preventDefault(),q.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout($,X){let Y=new Y6($,X);if(!Y6.equals(Y,this._size))this._size=Y,Rp(this.domNode,$,X);this._scrollbar.scanDomNode()}scrollDown($=8){this._body.scrollTop+=$}scrollUp($=8){this._body.scrollTop-=$}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth($){this._borderWidth=$}get borderWidth(){return this._borderWidth}};B_=jH0([VH0(1,l0)],B_);class vC{constructor(J,$){this.widget=J,this._editor=$,this.allowEditorOverflow=!0,this._disposables=new $0,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new qF,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(J.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let X,Y,Z=0,Q=0;this._disposables.add(this._resizable.onDidWillResize(()=>{X=this._topLeft,Y=this._resizable.size})),this._disposables.add(this._resizable.onDidResize((G)=>{if(X&&Y){this.widget.layout(G.dimension.width,G.dimension.height);let q=!1;if(G.west)Q=Y.width-G.dimension.width,q=!0;if(G.north)Z=Y.height-G.dimension.height,q=!0;if(q)this._applyTopLeft({top:X.top+Z,left:X.left+Q})}if(G.done)X=void 0,Y=void 0,Z=0,Q=0,this._userSize=G.dimension})),this._disposables.add(this.widget.onDidChangeContents(()=>{var G;if(this._anchorBox)this._placeAtAnchor(this._anchorBox,(G=this._userSize)!==null&&G!==void 0?G:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){if(!this._added)this._editor.addOverlayWidget(this),this._added=!0}hide(J=!1){if(this._resizable.clearSashHoverState(),this._added)this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0;if(J)this._userSize=void 0,this.widget.clearContents()}placeAtAnchor(J,$){var X;let Y=J.getBoundingClientRect();this._anchorBox=Y,this._preferAlignAtTop=$,this._placeAtAnchor(this._anchorBox,(X=this._userSize)!==null&&X!==void 0?X:this.widget.size,$)}_placeAtAnchor(J,$,X){var Y;let Z=AX(this.getDomNode().ownerDocument.body),Q=this.widget.getLayoutInfo(),G=new Y6(220,2*Q.lineHeight),q=J.top,U=function(){let O=Z.width-(J.left+J.width+Q.borderWidth+Q.horizontalPadding),N=-Q.borderWidth+J.left+J.width,T=new Y6(O,Z.height-J.top-Q.borderHeight-Q.verticalPadding),S=T.with(void 0,J.top+J.height-Q.borderHeight-Q.verticalPadding);return{top:q,left:N,fit:O-$.width,maxSizeTop:T,maxSizeBottom:S,minSize:G.with(Math.min(O,G.width))}}(),z=function(){let O=J.left-Q.borderWidth-Q.horizontalPadding,N=Math.max(Q.horizontalPadding,J.left-$.width-Q.borderWidth),T=new Y6(O,Z.height-J.top-Q.borderHeight-Q.verticalPadding),S=T.with(void 0,J.top+J.height-Q.borderHeight-Q.verticalPadding);return{top:q,left:N,fit:O-$.width,maxSizeTop:T,maxSizeBottom:S,minSize:G.with(Math.min(O,G.width))}}(),H=function(){let O=J.left,N=-Q.borderWidth+J.top+J.height,T=new Y6(J.width-Q.borderHeight,Z.height-J.top-J.height-Q.verticalPadding);return{top:N,left:O,fit:T.height-$.height,maxSizeBottom:T,maxSizeTop:T,minSize:G.with(T.width)}}(),j=[U,z,H],V=(Y=j.find((O)=>O.fit>=0))!==null&&Y!==void 0?Y:j.sort((O,N)=>N.fit-O.fit)[0],W=J.top+J.height-Q.borderHeight,B,K=$.height,P=Math.max(V.maxSizeTop.height,V.maxSizeBottom.height);if(K>P)K=P;let A;if(X)if(K<=V.maxSizeTop.height)B=!0,A=V.maxSizeTop;else B=!1,A=V.maxSizeBottom;else if(K<=V.maxSizeBottom.height)B=!1,A=V.maxSizeBottom;else B=!0,A=V.maxSizeTop;let{top:D,left:M}=V;if(!B&&K>J.height)D=W-K;let R=this._editor.getDomNode();if(R){let O=R.getBoundingClientRect();D-=O.top,M-=O.left}this._applyTopLeft({left:M,top:D}),this._resizable.enableSashes(!B,V===U,B,V!==U),this._resizable.minSize=V.minSize,this._resizable.maxSize=A,this._resizable.layout(K,Math.min(A.width,$.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(J){this._topLeft=J,this._editor.layoutOverlayWidget(this)}}T0();Mb();k5();I5();_0();W2();z0();V5();c8();e9();cX();OJ();var uJ;(function(J){J[J.FILE=0]="FILE",J[J.FOLDER=1]="FOLDER",J[J.ROOT_FOLDER=2]="ROOT_FOLDER"})(uJ||(uJ={}));var WH0=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function zF(J,$,X,Y,Z){if(Z)return[`codicon-${Z.id}`,"predefined-file-icon"];let Q=Y===uJ.ROOT_FOLDER?["rootfolder-icon"]:Y===uJ.FOLDER?["folder-icon"]:["file-icon"];if(X){let G;if(X.scheme===G1.data)G=Q4.parseMetaData(X).get(Q4.META_DATA_LABEL);else{let q=X.path.match(WH0);if(q){if(G=F_(q[2].toLowerCase()),q[1])Q.push(`${F_(q[1].toLowerCase())}-name-dir-icon`)}else G=F_(X.authority.toLowerCase())}if(Y===uJ.ROOT_FOLDER)Q.push(`${G}-root-name-folder-icon`);else if(Y===uJ.FOLDER)Q.push(`${G}-name-folder-icon`);else{if(G){if(Q.push(`${G}-name-file-icon`),Q.push("name-file-icon"),G.length<=255){let U=G.split(".");for(let z=1;z<U.length;z++)Q.push(`${U.slice(z).join(".")}-ext-file-icon`)}Q.push("ext-file-icon")}let q=BH0(J,$,X);if(q)Q.push(`${F_(q)}-lang-file-icon`)}}return Q}function BH0(J,$,X){if(!X)return null;let Y=null;if(X.scheme===G1.data){let Q=Q4.parseMetaData(X).get(Q4.META_DATA_MIME);if(Q)Y=$.getLanguageIdByMimeType(Q)}else{let Z=J.getModel(X);if(Z)Y=Z.getLanguageId()}if(Y&&Y!==m5)return Y;return $.guessLanguageIdByFilepathOrFirstLine(X)}function F_(J){return J.replace(/[\11\12\14\15\40]/g,"/")}vY();I4();c0();ZH();G5();var FH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},hC=function(J,$){return function(X,Y){$(X,Y,J)}},g2;function gC(J){return`suggest-aria-id:${J}`}var KH0=m7("suggest-more-info",F0.chevronRight,F("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),AH0=new(g2=class{extract($,X){if($.textLabel.match(g2._regexStrict))return X[0]=$.textLabel,!0;if($.completion.detail&&$.completion.detail.match(g2._regexStrict))return X[0]=$.completion.detail,!0;if($.completion.documentation){let Y=typeof $.completion.documentation==="string"?$.completion.documentation:$.completion.documentation.value,Z=g2._regexRelaxed.exec(Y);if(Z&&(Z.index===0||Z.index+Z[0].length===Y.length))return X[0]=Z[0],!0}return!1}},g2._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,g2._regexStrict=new RegExp(`^${g2._regexRelaxed.source}$`,"i"),g2),K_=class{constructor($,X,Y,Z){this._editor=$,this._modelService=X,this._languageService=Y,this._themeService=Z,this._onDidToggleDetails=new x,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate($){let X=new $0,Y=$;Y.classList.add("show-file-icons");let Z=j0($,B0(".icon")),Q=j0(Z,B0("span.colorspan")),G=j0($,B0(".contents")),q=j0(G,B0(".main")),U=j0(q,B0(".icon-label.codicon")),z=j0(q,B0("span.left")),H=j0(q,B0("span.right")),j=new ez(z,{supportHighlights:!0,supportIcons:!0});X.add(j);let V=j0(z,B0("span.signature-label")),W=j0(z,B0("span.qualifier-label")),B=j0(H,B0("span.details-label")),K=j0(H,B0("span.readMore"+h0.asCSSSelector(KH0)));return K.title=F("readMore","Read More"),{root:Y,left:z,right:H,icon:Z,colorspan:Q,iconLabel:j,iconContainer:U,parametersLabel:V,qualifierLabel:W,detailsLabel:B,readMore:K,disposables:X,configureFont:()=>{let A=this._editor.getOptions(),D=A.get(50),M=D.getMassagedFontFamily(),R=D.fontFeatureSettings,O=A.get(118)||D.fontSize,N=A.get(119)||D.lineHeight,T=D.fontWeight,S=D.letterSpacing,v=`${O}px`,l=`${N}px`,f=`${S}px`;Y.style.fontSize=v,Y.style.fontWeight=T,Y.style.letterSpacing=f,q.style.fontFamily=M,q.style.fontFeatureSettings=R,q.style.lineHeight=l,Z.style.height=l,Z.style.width=l,K.style.height=l,K.style.width=l}}}renderElement($,X,Y){Y.configureFont();let{completion:Z}=$;Y.root.id=gC(X),Y.colorspan.style.backgroundColor="";let Q={labelEscapeNewLines:!0,matches:xy($.score)},G=[];if(Z.kind===19&&AH0.extract($,G))Y.icon.className="icon customcolor",Y.iconContainer.className="icon hide",Y.colorspan.style.backgroundColor=G[0];else if(Z.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){Y.icon.className="icon hide",Y.iconContainer.className="icon hide";let q=zF(this._modelService,this._languageService,C0.from({scheme:"fake",path:$.textLabel}),uJ.FILE),U=zF(this._modelService,this._languageService,C0.from({scheme:"fake",path:Z.detail}),uJ.FILE);Q.extraClasses=q.length>U.length?q:U}else if(Z.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons)Y.icon.className="icon hide",Y.iconContainer.className="icon hide",Q.extraClasses=[zF(this._modelService,this._languageService,C0.from({scheme:"fake",path:$.textLabel}),uJ.FOLDER),zF(this._modelService,this._languageService,C0.from({scheme:"fake",path:Z.detail}),uJ.FOLDER)].flat();else Y.icon.className="icon hide",Y.iconContainer.className="",Y.iconContainer.classList.add("suggest-icon",...h0.asClassNameArray(RG.toIcon(Z.kind)));if(Z.tags&&Z.tags.indexOf(1)>=0)Q.extraClasses=(Q.extraClasses||[]).concat(["deprecated"]),Q.matches=[];if(Y.iconLabel.setLabel($.textLabel,void 0,Q),typeof Z.label==="string")Y.parametersLabel.textContent="",Y.detailsLabel.textContent=fC(Z.detail||""),Y.root.classList.add("string-label");else Y.parametersLabel.textContent=fC(Z.label.detail||""),Y.detailsLabel.textContent=fC(Z.label.description||""),Y.root.classList.remove("string-label");if(this._editor.getOption(117).showInlineDetails)P9(Y.detailsLabel);else D9(Y.detailsLabel);if(UF($))Y.right.classList.add("can-expand-details"),P9(Y.readMore),Y.readMore.onmousedown=(q)=>{q.stopPropagation(),q.preventDefault()},Y.readMore.onclick=(q)=>{q.stopPropagation(),q.preventDefault(),this._onDidToggleDetails.fire()};else Y.right.classList.remove("can-expand-details"),D9(Y.readMore),Y.readMore.onmousedown=null,Y.readMore.onclick=null}disposeTemplate($){$.disposables.dispose()}};K_=FH0([hC(1,E5),hC(2,j6),hC(3,Q5)],K_);function fC(J){return J.replace(/\r\n|\r|\n/g,"")}mz();gQ();var PH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},A_=function(J,$){return function(X,Y){$(X,Y,J)}},NH;I("editorSuggestWidget.background",{dark:l6,light:l6,hcDark:l6,hcLight:l6},F("editorSuggestWidgetBackground","Background color of the suggest widget."));I("editorSuggestWidget.border",{dark:O$,light:O$,hcDark:O$,hcLight:O$},F("editorSuggestWidgetBorder","Border color of the suggest widget."));var P_=I("editorSuggestWidget.foreground",{dark:IX,light:IX,hcDark:IX,hcLight:IX},F("editorSuggestWidgetForeground","Foreground color of the suggest widget."));I("editorSuggestWidget.selectedForeground",{dark:yX,light:yX,hcDark:yX,hcLight:yX},F("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));I("editorSuggestWidget.selectedIconForeground",{dark:GZ,light:GZ,hcDark:GZ,hcLight:GZ},F("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var DH0=I("editorSuggestWidget.selectedBackground",{dark:xX,light:xX,hcDark:xX,hcLight:xX},F("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));I("editorSuggestWidget.highlightForeground",{dark:QZ,light:QZ,hcDark:QZ,hcLight:QZ},F("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));I("editorSuggestWidget.focusHighlightForeground",{dark:_V,light:_V,hcDark:_V,hcLight:_V},F("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));I("editorSuggestWidgetStatus.foreground",{dark:y0(P_,0.5),light:y0(P_,0.5),hcDark:y0(P_,0.5),hcLight:y0(P_,0.5)},F("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class Z80{constructor(J,$){this._service=J,this._key=`suggestWidget.size/${$.getEditorType()}/${$ instanceof V_}`}restore(){var J;let $=(J=this._service.get(this._key,0))!==null&&J!==void 0?J:"";try{let X=JSON.parse($);if(Y6.is(X))return Y6.lift(X)}catch(X){}return}store(J){this._service.store(this._key,JSON.stringify(J),0,1)}reset(){this._service.remove(this._key,0)}}var TH=NH=class{constructor($,X,Y,Z,Q){this.editor=$,this._storageService=X,this._state=0,this._isAuto=!1,this._pendingLayout=new q8,this._pendingShowDetails=new q8,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new s8,this._disposables=new $0,this._onDidSelect=new qJ,this._onDidFocus=new qJ,this._onDidHide=new x,this._onDidShow=new x,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new x,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new qF,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Q80(this,$),this._persistedSize=new Z80(X,$);class G{constructor(V,W,B=!1,K=!1){this.persistedSize=V,this.currentSize=W,this.persistHeight=B,this.persistWidth=K}}let q;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),q=new G(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize((V)=>{var W,B,K,P;if(this._resize(V.dimension.width,V.dimension.height),q)q.persistHeight=q.persistHeight||!!V.north||!!V.south,q.persistWidth=q.persistWidth||!!V.east||!!V.west;if(!V.done)return;if(q){let{itemHeight:A,defaultSize:D}=this.getLayoutInfo(),M=Math.round(A/2),{width:R,height:O}=this.element.size;if(!q.persistHeight||Math.abs(q.currentSize.height-O)<=M)O=(B=(W=q.persistedSize)===null||W===void 0?void 0:W.height)!==null&&B!==void 0?B:D.height;if(!q.persistWidth||Math.abs(q.currentSize.width-R)<=M)R=(P=(K=q.persistedSize)===null||K===void 0?void 0:K.width)!==null&&P!==void 0?P:D.width;this._persistedSize.store(new Y6(R,O))}this._contentWidget.unlockPreference(),q=void 0})),this._messageElement=j0(this.element.domNode,B0(".message")),this._listElement=j0(this.element.domNode,B0(".tree"));let U=this._disposables.add(Q.createInstance(B_,this.editor));U.onDidClose(this.toggleDetails,this,this._disposables),this._details=new vC(U,this.editor);let z=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(117).showIcons);z();let H=Q.createInstance(K_,this.editor);this._disposables.add(H),this._disposables.add(H.onDidToggleDetails(()=>this.toggleDetails())),this._list=new A7("SuggestWidget",this._listElement,{getHeight:(V)=>this.getLayoutInfo().itemHeight,getTemplateId:(V)=>"suggestion"},[H],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>F("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:(V)=>{let W=V.textLabel;if(typeof V.completion.label!=="string"){let{detail:A,description:D}=V.completion.label;if(A&&D)W=F("label.full","{0} {1}, {2}",W,A,D);else if(A)W=F("label.detail","{0} {1}",W,A);else if(D)W=F("label.desc","{0}, {1}",W,D)}if(!V.isResolved||!this._isDetailsVisible())return W;let{documentation:B,detail:K}=V.completion,P=MQ("{0}{1}",K||"",B?typeof B==="string"?B:B.value:"");return F("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",W,P)}}}),this._list.style(hZ({listInactiveFocusBackground:DH0,listInactiveFocusOutline:O6})),this._status=Q.createInstance(W_,this.element.domNode,HY);let j=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(117).showStatusBar);j(),this._disposables.add(Z.onDidColorThemeChange((V)=>this._onThemeChange(V))),this._onThemeChange(Z.getColorTheme()),this._disposables.add(this._list.onMouseDown((V)=>this._onListMouseDownOrTap(V))),this._disposables.add(this._list.onTap((V)=>this._onListMouseDownOrTap(V))),this._disposables.add(this._list.onDidChangeSelection((V)=>this._onListSelection(V))),this._disposables.add(this._list.onDidChangeFocus((V)=>this._onListFocus(V))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration((V)=>{if(V.hasChanged(117))j(),z();if(this._completionModel&&(V.hasChanged(50)||V.hasChanged(118)||V.hasChanged(119)))this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=U1.Visible.bindTo(Y),this._ctxSuggestWidgetDetailsVisible=U1.DetailsVisible.bindTo(Y),this._ctxSuggestWidgetMultipleSuggestions=U1.MultipleSuggestions.bindTo(Y),this._ctxSuggestWidgetHasFocusedSuggestion=U1.HasFocusedSuggestion.bindTo(Y),this._disposables.add(q6(this._details.widget.domNode,"keydown",(V)=>{this._onDetailsKeydown.fire(V)})),this._disposables.add(this.editor.onMouseDown((V)=>this._onEditorMouseDown(V)))}dispose(){var $;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),($=this._loadingTimeout)===null||$===void 0||$.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown($){if(this._details.widget.domNode.contains($.target.element))this._details.widget.domNode.focus();else if(this.element.domNode.contains($.target.element))this.editor.focus()}_onCursorSelectionChanged(){if(this._state!==0)this._contentWidget.layout()}_onListMouseDownOrTap($){if(typeof $.element>"u"||typeof $.index>"u")return;$.browserEvent.preventDefault(),$.browserEvent.stopPropagation(),this._select($.element,$.index)}_onListSelection($){if($.elements.length)this._select($.elements[0],$.indexes[0])}_select($,X){let Y=this._completionModel;if(Y)this._onDidSelect.fire({item:$,index:X,model:Y}),this.editor.focus()}_onThemeChange($){this._details.widget.borderWidth=wJ($.type)?2:1}_onListFocus($){var X;if(this._ignoreFocusEvents)return;if(!$.elements.length){if(this._currentSuggestionDetails)this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0;this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let Y=$.elements[0],Z=$.indexes[0];if(Y!==this._focusedItem)(X=this._currentSuggestionDetails)===null||X===void 0||X.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=Y,this._list.reveal(Z),this._currentSuggestionDetails=bG(async(Q)=>{let G=NQ(()=>{if(this._isDetailsVisible())this.showDetails(!0)},250),q=Q.onCancellationRequested(()=>G.dispose());try{return await Y.resolve(Q)}finally{G.dispose(),q.dispose()}}),this._currentSuggestionDetails.then(()=>{if(Z>=this._list.length||Y!==this._list.element(Z))return;if(this._ignoreFocusEvents=!0,this._list.splice(Z,1,[Y]),this._list.setFocus([Z]),this._ignoreFocusEvents=!1,this._isDetailsVisible())this.showDetails(!1);else this.element.domNode.classList.remove("docs-side");this.editor.setAriaOptions({activeDescendant:gC(Z)})}).catch($1);this._onDidFocus.fire({item:Y,index:Z,model:this._completionModel})}_setState($){if(this._state===$)return;switch(this._state=$,this.element.domNode.classList.toggle("frozen",$===4),this.element.domNode.classList.remove("message"),$){case 0:D9(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=NH.LOADING_MESSAGE,D9(this._listElement,this._status.element),P9(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,_X(NH.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=NH.NO_SUGGESTIONS_MESSAGE,D9(this._listElement,this._status.element),P9(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,_X(NH.NO_SUGGESTIONS_MESSAGE);break;case 3:D9(this._messageElement),P9(this._listElement,this._status.element),this._show();break;case 4:D9(this._messageElement),P9(this._listElement,this._status.element),this._show();break;case 5:D9(this._messageElement),P9(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered($,X){if(this._state!==0)return;if(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!$,!this._isAuto)this._loadingTimeout=NQ(()=>this._setState(1),X)}showSuggestions($,X,Y,Z,Q){var G,q;if(this._contentWidget.setPosition(this.editor.getPosition()),(G=this._loadingTimeout)===null||G===void 0||G.dispose(),(q=this._currentSuggestionDetails)===null||q===void 0||q.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==$)this._completionModel=$;if(Y&&this._state!==2&&this._state!==0){this._setState(4);return}let U=this._completionModel.items.length,z=U===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(U>1),z){this._setState(Z?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(Y?4:3),this._list.reveal(X,0),this._list.setFocus(Q?[]:[X])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=XU(O0(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){if(this._list.length>0)this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel};return}toggleDetailsFocus(){if(this._state===5)this._setState(3),this._details.widget.domNode.classList.remove("focused");else if(this._state===3&&this._isDetailsVisible())this._setState(5),this._details.widget.domNode.classList.add("focused")}toggleDetails(){if(this._isDetailsVisible())this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details");else if((UF(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4))this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1)}showDetails($){this._pendingShowDetails.value=XU(O0(this.element.domNode),()=>{if(this._pendingShowDetails.clear(),this._details.show(),$)this._details.widget.renderLoading();else this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode);if(!this._details.widget.isEmpty)this._positionDetails(),this.element.domNode.classList.add("shows-details");else this._details.hide();this.editor.focus()})}toggleExplainMode(){if(this._list.getFocusedElements()[0])if(this._explainMode=!this._explainMode,!this._isDetailsVisible())this.toggleDetails();else this.showDetails(!1)}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var $;this._pendingLayout.clear(),this._pendingShowDetails.clear(),($=this._loadingTimeout)===null||$===void 0||$.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let X=this._persistedSize.restore(),Y=Math.ceil(this.getLayoutInfo().itemHeight*4.3);if(X&&X.height<Y)this._persistedSize.store(X.with(void 0,Y))}isFrozen(){return this._state===4}_afterRender($){if($===null){if(this._isDetailsVisible())this._details.hide();return}if(this._state===2||this._state===1)return;if(this._isDetailsVisible()&&!this._details.widget.isEmpty)this._details.show();this._positionDetails()}_layout($){var X,Y,Z;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())return;let Q=AX(this.element.domNode.ownerDocument.body),G=this.getLayoutInfo();if(!$)$=G.defaultSize;let{height:q,width:U}=$;if(this._status.element.style.height=`${G.itemHeight}px`,this._state===2||this._state===1)q=G.itemHeight+G.borderHeight,U=G.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Y6(U,q),this._contentWidget.setPreference(2);else{let z=Q.width-G.borderHeight-2*G.horizontalPadding;if(U>z)U=z;let H=this._completionModel?this._completionModel.stats.pLabelLen*G.typicalHalfwidthCharacterWidth:U,j=G.statusBarHeight+this._list.contentHeight+G.borderHeight,V=G.itemHeight+G.statusBarHeight,W=g5(this.editor.getDomNode()),B=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),K=W.top+B.top+B.height,P=Math.min(Q.height-K-G.verticalPadding,j),A=W.top+B.top-G.verticalPadding,D=Math.min(A,j),M=Math.min(Math.max(D,P)+G.borderHeight,j);if(q===((X=this._cappedHeight)===null||X===void 0?void 0:X.capped))q=this._cappedHeight.wanted;if(q<V)q=V;if(q>M)q=M;let R=150;if(q>P||this._forceRenderingAbove&&A>R)this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),M=D;else this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),M=P;this.element.preferredSize=new Y6(H,G.defaultSize.height),this.element.maxSize=new Y6(z,M),this.element.minSize=new Y6(220,V),this._cappedHeight=q===j?{wanted:(Z=(Y=this._cappedHeight)===null||Y===void 0?void 0:Y.wanted)!==null&&Z!==void 0?Z:$.height,capped:q}:void 0}this._resize(U,q)}_resize($,X){let{width:Y,height:Z}=this.element.maxSize;$=Math.min(Y,$),X=Math.min(Z,X);let{statusBarHeight:Q}=this.getLayoutInfo();this._list.layout(X-Q,$),this._listElement.style.height=`${X-Q}px`,this.element.layout(X,$),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var $;if(this._isDetailsVisible())this._details.placeAtAnchor(this.element.domNode,(($=this._contentWidget.getPosition())===null||$===void 0?void 0:$.preference[0])===2)}getLayoutInfo(){let $=this.editor.getOption(50),X=A8(this.editor.getOption(119)||$.lineHeight,8,1000),Y=!this.editor.getOption(117).showStatusBar||this._state===2||this._state===1?0:X,Z=this._details.widget.borderWidth,Q=2*Z;return{itemHeight:X,statusBarHeight:Y,borderWidth:Z,borderHeight:Q,typicalHalfwidthCharacterWidth:$.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Y6(430,Y+12*X+Q)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible($){this._storageService.store("expandSuggestionDocs",$,0,0)}forceRenderingAbove(){if(!this._forceRenderingAbove)this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore())}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};TH.LOADING_MESSAGE=F("suggestWidget.loading","Loading...");TH.NO_SUGGESTIONS_MESSAGE=F("suggestWidget.noSuggestions","No suggestions.");TH=NH=PH0([A_(1,h$),A_(2,m0),A_(3,Q5),A_(4,l0)],TH);class Q80{constructor(J,$){this._widget=J,this._editor=$,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){if(this._added)this._added=!1,this._editor.removeContentWidget(this)}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){if(this._hidden=!1,!this._added)this._added=!0,this._editor.addContentWidget(this)}hide(){if(!this._hidden)this._hidden=!0,this.layout()}layout(){this._editor.layoutContentWidget(this)}getPosition(){if(this._hidden||!this._position||!this._preference)return null;return{position:this._position,preference:[this._preference]}}beforeRender(){let{height:J,width:$}=this._widget.element.size,{borderWidth:X,horizontalPadding:Y}=this._widget.getLayoutInfo();return new Y6($+2*X+Y,J+2*X)}afterRender(J){this._widget._afterRender(J)}setPreference(J){if(!this._preferenceLocked)this._preference=J}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(J){this._position=J}}_Q();cX();wQ();T0();G2();var RH0=function(J,$,X,Y){var Z=arguments.length,Q=Z<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,X):Y,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Q=Reflect.decorate(J,$,X,Y);else for(var q=J.length-1;q>=0;q--)if(G=J[q])Q=(Z<3?G(Q):Z>3?G($,X,Q):G($,X))||Q;return Z>3&&Q&&Object.defineProperty($,X,Q),Q},wH=function(J,$){return function(X,Y){$(X,Y,J)}},pC,MH0=!1;class G80{constructor(J,$){if(this._model=J,this._position=$,this._decorationOptions=C1.register({description:"suggest-line-suffix",stickiness:1}),J.getLineMaxColumn($.lineNumber)!==$.column){let Y=J.getOffsetAt($),Z=J.getPositionAt(Y+1);J.changeDecorations((Q)=>{if(this._marker)Q.removeDecoration(this._marker);this._marker=Q.addDecoration(k.fromPositions($,Z),this._decorationOptions)})}}dispose(){if(this._marker&&!this._model.isDisposed())this._model.changeDecorations((J)=>{J.removeDecoration(this._marker),this._marker=void 0})}delta(J){if(this._model.isDisposed()||this._position.lineNumber!==J.lineNumber)return 0;if(this._marker){let $=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt($.getStartPosition())-this._model.getOffsetAt(J)}else return this._model.getLineMaxColumn(J.lineNumber)-J.column}}var p2=pC=class{static get($){return $.getContribution(pC.ID)}constructor($,X,Y,Z,Q,G,q){this._memoryService=X,this._commandService=Y,this._contextKeyService=Z,this._instantiationService=Q,this._logService=G,this._telemetryService=q,this._lineSuffix=new q8,this._toDispose=new $0,this._selectors=new q80((j)=>j.priority),this._onWillInsertSuggestItem=new x,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=$,this.model=Q.createInstance(j_,this.editor),this._selectors.register({priority:0,select:(j,V,W)=>this._memoryService.select(j,V,W)});let U=U1.InsertMode.bindTo(Z);U.set($.getOption(117).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>U.set($.getOption(117).insertMode))),this.widget=this._toDispose.add(new Cj(O0($.getDomNode()),()=>{let j=this._instantiationService.createInstance(TH,this.editor);this._toDispose.add(j),this._toDispose.add(j.onDidSelect((P)=>this._insertSuggestion(P,0),this));let V=new xC(this.editor,j,this.model,(P)=>this._insertSuggestion(P,2));this._toDispose.add(V);let W=U1.MakesTextEdit.bindTo(this._contextKeyService),B=U1.HasInsertAndReplaceRange.bindTo(this._contextKeyService),K=U1.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(N0(()=>{W.reset(),B.reset(),K.reset()})),this._toDispose.add(j.onDidFocus(({item:P})=>{let A=this.editor.getPosition(),D=P.editStart.column,M=A.column,R=!0;if(this.editor.getOption(1)==="smart"&&this.model.state===2&&!P.completion.additionalTextEdits&&!(P.completion.insertTextRules&4)&&M-D===P.completion.insertText.length)R=this.editor.getModel().getValueInRange({startLineNumber:A.lineNumber,startColumn:D,endLineNumber:A.lineNumber,endColumn:M})!==P.completion.insertText;W.set(R),B.set(!g.equals(P.editInsertEnd,P.editReplaceEnd)),K.set(Boolean(P.provider.resolveCompletionItem)||Boolean(P.completion.documentation)||P.completion.detail!==P.completion.label)})),this._toDispose.add(j.onDetailsKeyDown((P)=>{if(P.toKeyCodeChord().equals(new M4(!0,!1,!1,!1,33))||t0&&P.toKeyCodeChord().equals(new M4(!1,!1,!1,!0,33))){P.stopPropagation();return}if(!P.toKeyCodeChord().isModifierKey())this.editor.focus()})),j})),this._overtypingCapturer=this._toDispose.add(new Cj(O0($.getDomNode()),()=>{return this._toDispose.add(new GF(this.editor,this.model))})),this._alternatives=this._toDispose.add(new Cj(O0($.getDomNode()),()=>{return this._toDispose.add(new C2(this.editor,this._contextKeyService))})),this._toDispose.add(Q.createInstance(_H,$)),this._toDispose.add(this.model.onDidTrigger((j)=>{this.widget.value.showTriggered(j.auto,j.shy?250:50),this._lineSuffix.value=new G80(this.editor.getModel(),j.position)})),this._toDispose.add(this.model.onDidSuggest((j)=>{if(j.triggerOptions.shy)return;let V=-1;for(let B of this._selectors.itemsOrderedByPriorityDesc)if(V=B.select(this.editor.getModel(),this.editor.getPosition(),j.completionModel.items),V!==-1)break;if(V===-1)V=0;if(this.model.state===0)return;let W=!1;if(j.triggerOptions.auto){let B=this.editor.getOption(117);if(B.selectionMode==="never"||B.selectionMode==="always")W=B.selectionMode==="never";else if(B.selectionMode==="whenTriggerCharacter")W=j.triggerOptions.triggerKind!==1;else if(B.selectionMode==="whenQuickSuggestion")W=j.triggerOptions.triggerKind===1&&!j.triggerOptions.refilter}this.widget.value.showSuggestions(j.completionModel,V,j.isFrozen,j.triggerOptions.auto,W)})),this._toDispose.add(this.model.onDidCancel((j)=>{if(!j.retrigger)this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{if(!MH0)this.model.cancel(),this.model.clear()}));let z=U1.AcceptSuggestionsOnEnter.bindTo(Z),H=()=>{let j=this.editor.getOption(1);z.set(j==="on"||j==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>H())),H()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion($,X){if(!$||!$.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let Y=X8.get(this.editor);if(!Y)return;this._onWillInsertSuggestItem.fire({item:$.item});let Z=this.editor.getModel(),Q=Z.getAlternativeVersionId(),{item:G}=$,q=[],U=new L5;if(!(X&1))this.editor.pushUndoStop();let z=this.getOverwriteInfo(G,Boolean(X&8));this._memoryService.memorize(Z,this.editor.getPosition(),G);let H=G.isResolved,j=-1,V=-1;if(Array.isArray(G.completion.additionalTextEdits)){this.model.cancel();let B=vJ.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",G.completion.additionalTextEdits.map((K)=>{let P=k.lift(K.range);if(P.startLineNumber===G.position.lineNumber&&P.startColumn>G.position.column){let A=this.editor.getPosition().column-G.position.column,D=A,M=k.spansMultipleLines(P)?0:A;P=new k(P.startLineNumber,P.startColumn+D,P.endLineNumber,P.endColumn+M)}return u4.replaceMove(P,K.text)})),B.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!H){let B=new w5,K,P=Z.onDidChangeContent((R)=>{if(R.isFlush){U.cancel(),P.dispose();return}for(let O of R.changes){let N=k.getEndPosition(O.range);if(!K||g.isBefore(N,K))K=N}}),A=X;X|=2;let D=!1,M=this.editor.onWillType(()=>{if(M.dispose(),D=!0,!(A&2))this.editor.pushUndoStop()});q.push(G.resolve(U.token).then(()=>{if(!G.completion.additionalTextEdits||U.token.isCancellationRequested)return;if(K&&G.completion.additionalTextEdits.some((O)=>g.isBefore(K,k.getStartPosition(O.range))))return!1;if(D)this.editor.pushUndoStop();let R=vJ.capture(this.editor);if(this.editor.executeEdits("suggestController.additionalTextEdits.async",G.completion.additionalTextEdits.map((O)=>u4.replaceMove(k.lift(O.range),O.text))),R.restoreRelativeVerticalPositionOfCursor(this.editor),D||!(A&2))this.editor.pushUndoStop();return!0}).then((R)=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",B.elapsed(),R),V=R===!0?1:R===!1?0:-2}).finally(()=>{P.dispose(),M.dispose()}))}let{insertText:W}=G.completion;if(!(G.completion.insertTextRules&4))W=S2.escape(W);if(this.model.cancel(),Y.insert(W,{overwriteBefore:z.overwriteBefore,overwriteAfter:z.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(G.completion.insertTextRules&1),clipboardText:$.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),!(X&2))this.editor.pushUndoStop();if(G.completion.command)if(G.completion.command.id===HF.id)this.model.trigger({auto:!0,retrigger:!0});else{let B=new w5;q.push(this._commandService.executeCommand(G.completion.command.id,...G.completion.command.arguments?[...G.completion.command.arguments]:[]).catch((K)=>{if(G.completion.extensionId)QX(K);else $1(K)}).finally(()=>{j=B.elapsed()}))}if(X&4)this._alternatives.value.set($,(B)=>{U.cancel();while(Z.canUndo()){if(Q!==Z.getAlternativeVersionId())Z.undo();this._insertSuggestion(B,3|(X&8?8:0));break}});this._alertCompletionItem(G),Promise.all(q).finally(()=>{this._reportSuggestionAcceptedTelemetry(G,Z,H,j,V),this.model.clear(),U.dispose()})}_reportSuggestionAcceptedTelemetry($,X,Y,Z,Q){var G,q,U;if(Math.floor(Math.random()*100)===0)return;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(q=(G=$.extensionId)===null||G===void 0?void 0:G.value)!==null&&q!==void 0?q:"unknown",providerId:(U=$.provider._debugDisplayName)!==null&&U!==void 0?U:"unknown",kind:$.completion.kind,basenameHash:TQ(N3(X.uri)).toString(16),languageId:X.getLanguageId(),fileExtension:sa(X.uri),resolveInfo:!$.provider.resolveCompletionItem?-1:Y?1:0,resolveDuration:$.resolveDuration,commandDuration:Z,additionalEditsAsync:Q})}getOverwriteInfo($,X){T5(this.editor.hasModel());let Y=this.editor.getOption(117).insertMode==="replace";if(X)Y=!Y;let Z=$.position.column-$.editStart.column,Q=(Y?$.editReplaceEnd.column:$.editInsertEnd.column)-$.position.column,G=this.editor.getPosition().column-$.position.column,q=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:Z+G,overwriteAfter:Q+q}}_alertCompletionItem($){if(K4($.completion.additionalTextEdits)){let X=F("aria.alert.snippet","Accepting '{0}' made {1} additional edits",$.textLabel,$.completion.additionalTextEdits.length);NU(X)}}triggerSuggest($,X,Y){if(this.editor.hasModel())this.model.trigger({auto:X!==null&&X!==void 0?X:!1,completionOptions:{providerFilter:$,kindFilter:Y?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus()}triggerSuggestAndAcceptBest($){if(!this.editor.hasModel())return;let X=this.editor.getPosition(),Y=()=>{if(X.equals(this.editor.getPosition()))this._commandService.executeCommand($.fallback)},Z=(Q)=>{if(Q.completion.insertTextRules&4||Q.completion.additionalTextEdits)return!0;let G=this.editor.getPosition(),q=Q.editStart.column,U=G.column;if(U-q!==Q.completion.insertText.length)return!0;return this.editor.getModel().getValueInRange({startLineNumber:G.lineNumber,startColumn:q,endLineNumber:G.lineNumber,endColumn:U})!==Q.completion.insertText};q0.once(this.model.onDidTrigger)((Q)=>{let G=[];q0.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{h1(G),Y()},void 0,G),this.model.onDidSuggest(({completionModel:q})=>{if(h1(G),q.items.length===0){Y();return}let U=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),q.items),z=q.items[U];if(!Z(z)){Y();return}this.editor.pushUndoStop(),this._insertSuggestion({index:U,item:z,model:q},7)},void 0,G)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(X,0),this.editor.focus()}acceptSelectedSuggestion($,X){let Y=this.widget.value.getFocusedItem(),Z=0;if($)Z|=4;if(X)Z|=8;this._insertSuggestion(Y,Z)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){if(!this.widget.isInitialized)return;this.widget.value.stopForceRenderingAbove()}registerSelector($){return this._selectors.register($)}};p2.ID="editor.contrib.suggestController";p2=pC=RH0([wH(1,IC),wH(2,y5),wH(3,m0),wH(4,l0),wH(5,P5),wH(6,f7)],p2);class q80{constructor(J){this.prioritySelector=J,this._items=[]}register(J){if(this._items.indexOf(J)!==-1)throw Error("Value is already registered");return this._items.push(J),this._items.sort(($,X)=>this.prioritySelector(X)-this.prioritySelector($)),{dispose:()=>{let $=this._items.indexOf(J);if($>=0)this._items.splice($,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class HF extends RJ{constructor(){super({id:HF.id,label:F("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:E0.and(Z0.writable,Z0.hasCompletionItemProvider,U1.Visible.toNegated()),kbOpts:{kbExpr:Z0.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(J,$,X){let Y=p2.get($);if(!Y)return;let Z;if(X&&typeof X==="object"){if(X.auto===!0)Z=!0}Y.triggerSuggest(void 0,Z,void 0)}}HF.id="editor.action.triggerSuggest";w4(p2.ID,p2,2);F5(HF);var W4=190,d7=R9.bindToContribution(p2.get);I0(new d7({id:"acceptSelectedSuggestion",precondition:E0.and(U1.Visible,U1.HasFocusedSuggestion),handler(J){J.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:E0.and(U1.Visible,Z0.textInputFocus),weight:W4},{primary:3,kbExpr:E0.and(U1.Visible,Z0.textInputFocus,U1.AcceptSuggestionsOnEnter,U1.MakesTextEdit),weight:W4}],menuOpts:[{menuId:HY,title:F("accept.insert","Insert"),group:"left",order:1,when:U1.HasInsertAndReplaceRange.toNegated()},{menuId:HY,title:F("accept.insert","Insert"),group:"left",order:1,when:E0.and(U1.HasInsertAndReplaceRange,U1.InsertMode.isEqualTo("insert"))},{menuId:HY,title:F("accept.replace","Replace"),group:"left",order:1,when:E0.and(U1.HasInsertAndReplaceRange,U1.InsertMode.isEqualTo("replace"))}]}));I0(new d7({id:"acceptAlternativeSelectedSuggestion",precondition:E0.and(U1.Visible,Z0.textInputFocus,U1.HasFocusedSuggestion),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:1027,secondary:[1026]},handler(J){J.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:HY,group:"left",order:2,when:E0.and(U1.HasInsertAndReplaceRange,U1.InsertMode.isEqualTo("insert")),title:F("accept.replace","Replace")},{menuId:HY,group:"left",order:2,when:E0.and(U1.HasInsertAndReplaceRange,U1.InsertMode.isEqualTo("replace")),title:F("accept.insert","Insert")}]}));M6.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");I0(new d7({id:"hideSuggestWidget",precondition:U1.Visible,handler:(J)=>J.cancelSuggestWidget(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:9,secondary:[1033]}}));I0(new d7({id:"selectNextSuggestion",precondition:E0.and(U1.Visible,E0.or(U1.MultipleSuggestions,U1.HasFocusedSuggestion.negate())),handler:(J)=>J.selectNextSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));I0(new d7({id:"selectNextPageSuggestion",precondition:E0.and(U1.Visible,E0.or(U1.MultipleSuggestions,U1.HasFocusedSuggestion.negate())),handler:(J)=>J.selectNextPageSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:12,secondary:[2060]}}));I0(new d7({id:"selectLastSuggestion",precondition:E0.and(U1.Visible,E0.or(U1.MultipleSuggestions,U1.HasFocusedSuggestion.negate())),handler:(J)=>J.selectLastSuggestion()}));I0(new d7({id:"selectPrevSuggestion",precondition:E0.and(U1.Visible,E0.or(U1.MultipleSuggestions,U1.HasFocusedSuggestion.negate())),handler:(J)=>J.selectPrevSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));I0(new d7({id:"selectPrevPageSuggestion",precondition:E0.and(U1.Visible,E0.or(U1.MultipleSuggestions,U1.HasFocusedSuggestion.negate())),handler:(J)=>J.selectPrevPageSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:11,secondary:[2059]}}));I0(new d7({id:"selectFirstSuggestion",precondition:E0.and(U1.Visible,E0.or(U1.MultipleSuggestions,U1.HasFocusedSuggestion.negate())),handler:(J)=>J.selectFirstSuggestion()}));I0(new d7({id:"focusSuggestion",precondition:E0.and(U1.Visible,U1.HasFocusedSuggestion.negate()),handler:(J)=>J.focusSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));I0(new d7({id:"focusAndAcceptSuggestion",precondition:E0.and(U1.Visible,U1.HasFocusedSuggestion.negate()),handler:(J)=>{J.focusSuggestion(),J.acceptSelectedSuggestion(!0,!1)}}));I0(new d7({id:"toggleSuggestionDetails",precondition:E0.and(U1.Visible,U1.HasFocusedSuggestion),handler:(J)=>J.toggleSuggestionDetails(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:HY,group:"right",order:1,when:E0.and(U1.DetailsVisible,U1.CanResolve),title:F("detail.more","show less")},{menuId:HY,group:"right",order:1,when:E0.and(U1.DetailsVisible.toNegated(),U1.CanResolve),title:F("detail.less","show more")}]}));I0(new d7({id:"toggleExplainMode",precondition:U1.Visible,handler:(J)=>J.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));I0(new d7({id:"toggleSuggestionFocus",precondition:U1.Visible,handler:(J)=>J.toggleSuggestionFocus(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:2570,mac:{primary:778}}}));I0(new d7({id:"insertBestCompletion",precondition:E0.and(Z0.textInputFocus,E0.equals("config.editor.tabCompletion","on"),_H.AtEnd,U1.Visible.toNegated(),C2.OtherSuggestions.toNegated(),X8.InSnippetMode.toNegated()),handler:(J,$)=>{J.triggerSuggestAndAcceptBest(z5($)?{fallback:"tab",...$}:{fallback:"tab"})},kbOpts:{weight:W4,primary:2}}));I0(new d7({id:"insertNextSuggestion",precondition:E0.and(Z0.textInputFocus,E0.equals("config.editor.tabCompletion","on"),C2.OtherSuggestions,U1.Visible.toNegated(),X8.InSnippetMode.toNegated()),handler:(J)=>J.acceptNextSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:2}}));I0(new d7({id:"insertPrevSuggestion",precondition:E0.and(Z0.textInputFocus,E0.equals("config.editor.tabCompletion","on"),C2.OtherSuggestions,U1.Visible.toNegated(),X8.InSnippetMode.toNegated()),handler:(J)=>J.acceptPrevSuggestion(),kbOpts:{weight:W4,kbExpr:Z0.textInputFocus,primary:1026}}));F5(class extends RJ{constructor(){super({id:"editor.action.resetSuggestSize",label:F("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(J,$){var X;(X=p2.get($))===null||X===void 0||X.resetWidgetSize()}});qX();L4();c0();class U80 extends RJ{constructor(){super({id:"editor.action.forceRetokenize",label:F("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(J,$){if(!$.hasModel())return;let X=$.getModel();X.tokenization.resetTokenization();let Y=new w5;X.tokenization.forceTokenization(X.getLineCount()),Y.stop(),console.log(`tokenization took ${Y.elapsed()}`)}}F5(U80);gJ();gJ();/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Uj0=class{constructor(J,$,X){this._onDidChange=new WC,this._languageId=J,this.setDiagnosticsOptions($),this.setModeConfiguration(X)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(J){this._diagnosticsOptions=J||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(J){this._modeConfiguration=J||Object.create(null),this._onDidChange.fire(this)}},zj0={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},Hj0={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},H70=new Uj0("json",zj0,Hj0),jj0=()=>j70().then((J)=>J.getWorker());cZ.json={jsonDefaults:H70,getWorker:jj0};function j70(){return Promise.resolve().then(() => (z70(),U70))}cZ.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});cZ.onLanguage("json",()=>{j70().then((J)=>J.setupMode(H70))});gJ();/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var{defineProperty:Vj0,getOwnPropertyDescriptor:Wj0,getOwnPropertyNames:Bj0}=Object,Fj0=Object.prototype.hasOwnProperty,V70=(J,$,X,Y)=>{if($&&typeof $==="object"||typeof $==="function"){for(let Z of Bj0($))if(!Fj0.call(J,Z)&&Z!==X)Vj0(J,Z,{get:()=>$[Z],enumerable:!(Y=Wj0($,Z))||Y.enumerable})}return J},Kj0=(J,$,X)=>(V70(J,$,"default"),X&&V70(X,$,"default")),RF={};Kj0(RF,H4);var W70={},iC={},Aj0=class J{static getOrCreate($){if(!iC[$])iC[$]=new J($);return iC[$]}constructor($){this._languageId=$,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((X,Y)=>{this._lazyLoadPromiseResolve=X,this._lazyLoadPromiseReject=Y})}load(){if(!this._loadingTriggered)this._loadingTriggered=!0,W70[this._languageId].loader().then(($)=>this._lazyLoadPromiseResolve($),($)=>this._lazyLoadPromiseReject($));return this._lazyLoadPromise}};function i$(J){let $=J.id;W70[$]=J,RF.languages.register(J);let X=Aj0.getOrCreate($);RF.languages.registerTokensProviderFactory($,{create:async()=>{return(await X.load()).language}}),RF.languages.onLanguageEncountered($,async()=>{let Y=await X.load();RF.languages.setLanguageConfiguration($,Y.conf)})}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/i$({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>{return Promise.resolve().then(() => (F70(),B70))}});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/i$({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>{return Promise.resolve().then(() => (A70(),K70))}});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/i$({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>{return Promise.resolve().then(() => (M70(),R70))}});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/i$({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>{return Promise.resolve().then(() => (N70(),_70))}});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.46.0(21007360cad28648bdf46282a2592cb47c3a7a6f)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/i$({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>{return Promise.resolve().then(() => (tC(),oC))}});i$({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>{return Promise.resolve().then(() => (tC(),oC))}});gJ();b2.defineTheme("bc",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#F9F9F9","editor.foreground":"#575E75","editor.lineHighlightBackground":"#E5F0FF","editor.lineHighlightBorder":"#E5F0FF","scrollbarSlider.background":"#CECDCE","scrollbarSlider.hoverBackground":"#CECDCE","scrollbarSlider.activeBackground":"#CECDCE"}});window.MonacoEnvironment={getWorker:(J,$)=>{switch($){case"json":return new Worker("/monaco-editor/workers/json-worker.js",{type:"module"});default:return new Worker("/monaco-editor/workers/editor-worker.js",{type:"module"})}}};var fj0={theme:"bc",autoClosingBrackets:"languageDefined",autoClosingDelete:"auto",autoClosingQuotes:"languageDefined",autoSurround:"languageDefined",automaticLayout:!0,bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},contextmenu:!1,copyWithSyntaxHighlighting:!0,fontSize:16,formatOnPaste:!0,inlineSuggest:{enabled:!0},minimap:{enabled:!1},hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{horizontal:"visible",horizontalScrollbarSize:6,vertical:"visible",verticalScrollbarSize:6},showDeprecated:!0,smoothScrolling:!0};async function T70(J,$){return b2.create(J,Object.assign({},fj0,$))}gJ();var eC=cZ.CompletionItemKind,gj0=cZ.getLanguages(),pj0=new RegExp("([a-zA-Z_]\\w*)","g");function mj0(J){let $,X=[];while(($=pj0.exec(J))!==null)X.push($[0]);return Array.from(new Set(X))}async function w70(J,$){let X=await gj0.find((Z)=>Z.id===J)?.loader();return cZ.registerCompletionItemProvider(J,{provideCompletionItems(Z,Q){let G=Z.getWordUntilPosition(Q),q={startLineNumber:Q.lineNumber,endLineNumber:Q.lineNumber,startColumn:G.startColumn,endColumn:G.endColumn},U=$.map((j)=>{if(typeof j==="string")j=[j];if(Array.isArray(j))j={label:{label:j[0],description:j[2]},kind:j[1]??eC.Keyword,insertText:j[0],range:q};if(typeof j.label==="string")j.label={label:j.label,description:j.description??j.documentation};if(!j.insertText)j.insertText=j.label.label;return j.range=q,j}),z=[];if(X?.language.keywords)z=X.language.keywords.filter((j)=>j!==G.word&&!U.find((V)=>V.label.label===j)).map((j)=>({label:j,kind:eC.Keyword,insertText:j,range:q}));let H=mj0(Z.getValue()).filter((j)=>j!==G.word&&!U.find((V)=>V.label.label===j)).map((j)=>({label:j,kind:eC.Text,insertText:j,range:q}));return{suggestions:z.concat(U,H)}}})}K0(".iWfOpa_editor-wrapper{width:100%;height:100%;position:relative}.iWfOpa_editor-wrapper .scrollbar.horizontal{bottom:1px!important}.iWfOpa_editor-wrapper .scrollbar.vertical{right:1px!important}.iWfOpa_editor-wrapper .slider{border-radius:3px;overflow:hidden}");var L70={editorWrapper:"iWfOpa_editor-wrapper"};import{jsx as aj0}from"preact/jsx-runtime";var y70=(J,$,X="content")=>{let Y=I70.getExtension($.type??"text/plain"),Z=BC.file(`${J.getId()}/${$.id}.${Y}`),Q=Z.toString(),G=b2.getModel(Q);if(!G)G=b2.createModel($[X],void 0,Z),G.onDidChangeContent(()=>{if(J.getRawOptions().readOnly)return;let U=G.getValue();sj0({[X]:U})});let q=J.getModel();return J.setModel(G),q.dispose(),Y},E70=(J,$,X,Y="content")=>{if(!J||!X)return;let Z=I70.getExtension(X.type??"text/plain");if(Z&&$!==Z)$=y70(J,X,Y);if(X[Y])J.getModel().setValue(X[Y]);return $};function Jv({className:J,keyName:$,options:X,readOnly:Y,onLoad:Z,onRegisterCompletionItems:Q}){let{language:G}=lj0(),{file:q,modified:U}=dj0(),z=uj0(null),H=k70(null),j=k70(null);return MF(()=>{if(!z.editor)return;z.editor.updateOptions({readOnly:Y})},[z.editor,Y]),MF(async()=>{if(!z.editor)return;let V=z.editor.getModel().getLanguageId(),W=Q?.(V);if(!W)return;j.value?.dispose(),j.value=await w70(V,W)},[z.editor,H.value,G.value,Q]),MF(()=>{H.value=E70(z.editor,H.value,q.value,$)},[$,q.value]),MF(()=>{if(!Y)return;H.value=E70(z.editor,H.value,q.value,$)},[Y,$,U.value]),MF(async()=>{if(z.current){if(z.editor=await T70(z.current,X),q.value)H.value=y70(z.editor,q.value,$);if(Z)Z(z.editor)}return()=>{if(z.editor)z.editor.dispose(),z.editor=null}},[]),aj0("div",{ref:z,className:cj0(L70.editorWrapper,J)})}K0(".xterm{cursor:text;-webkit-user-select:none;-ms-user-select:none;user-select:none;position:relative}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{z-index:5;position:absolute;top:0}.xterm .xterm-helper-textarea{opacity:0;z-index:-5;white-space:nowrap;resize:none;border:0;width:0;height:0;margin:0;padding:0;position:absolute;top:0;left:-9999em;overflow:hidden}.xterm .composition-view{color:#fff;white-space:nowrap;z-index:1;background:#000;display:none;position:absolute}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{cursor:default;background-color:#000;position:absolute;inset:0;overflow-y:scroll}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;top:0;left:0}.xterm-char-measure-element{visibility:hidden;line-height:normal;display:inline-block;position:absolute;top:0;left:-9999em}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{z-index:10;color:#0000;pointer-events:none;position:absolute;inset:0}.xterm .xterm-accessibility-tree:not(.debug) ::selection{color:#0000}.xterm .xterm-accessibility-tree{user-select:text;white-space:pre;font-family:monospace}.xterm .xterm-accessibility-tree>div{transform-origin:0;width:fit-content}.xterm .live-region{width:1px;height:1px;position:absolute;left:-9999px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{text-decoration:underline double}.xterm-underline-3{text-decoration:underline wavy}.xterm-underline-4{text-decoration:underline dotted}.xterm-underline-5{text-decoration:underline dashed}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:underline overline}.xterm-overline.xterm-underline-2{text-decoration:overline double underline}.xterm-overline.xterm-underline-3{text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;pointer-events:none;position:absolute;top:0;right:0}.xterm-decoration-top{z-index:2;position:relative}.xterm .xterm-scrollable-element>.scrollbar{cursor:default}.xterm .xterm-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px!important}.xterm .xterm-scrollable-element>.visible{opacity:1;z-index:11;background:0 0;transition:opacity .1s linear}.xterm .xterm-scrollable-element>.invisible{opacity:0;pointer-events:none}.xterm .xterm-scrollable-element>.invisible.fade{transition:opacity .8s linear}.xterm .xterm-scrollable-element>.shadow{display:none;position:absolute}.xterm .xterm-scrollable-element>.shadow.top{width:100%;height:3px;box-shadow:var(--vscode-scrollbar-shadow,#000)0 6px 6px -6px inset;display:block;top:0;left:3px}.xterm .xterm-scrollable-element>.shadow.left{width:3px;height:100%;box-shadow:var(--vscode-scrollbar-shadow,#000)6px 0 6px -6px inset;display:block;top:3px;left:0}.xterm .xterm-scrollable-element>.shadow.top-left-corner{width:3px;height:3px;display:block;top:0;left:0}.xterm .xterm-scrollable-element>.shadow.top.left{box-shadow:var(--vscode-scrollbar-shadow,#000)6px 0 6px -6px inset}");import{useRef as bJ0,useEffect as BN,useCallback as GQ}from"preact/hooks";import{useSignal as SJ0}from"@preact/signals";import{keyMirror as dA0}from"@blockcode/utils";import{useAppContext as sA0,translate as iJ,setAlert as aA0,setAppState as Ih}from"@blockcode/core";import{Text as CJ0,ToggleButtons as rA0,BufferedInput as iA0,Button as vJ0,Dropdown as nA0,Keys as hJ0}from"@blockcode/core";var{defineProperty:C90,getOwnPropertyDescriptor:rj0}=Object,ij0=(J,$)=>{for(var X in $)C90(J,X,{get:$[X],enumerable:!0})},Z8=(J,$,X,Y)=>{for(var Z=Y>1?void 0:Y?rj0($,X):$,Q=J.length-1,G;Q>=0;Q--)(G=J[Q])&&(Z=(Y?G($,X,Z):G(Z))||Z);return Y&&Z&&C90($,X,Z),Z},r0=(J,$)=>(X,Y)=>$(X,Y,J),x70="Terminal input",Av={get:()=>x70,set:(J)=>x70=J},b70="Too much output to announce, navigate to rows manually to read",Pv={get:()=>b70,set:(J)=>b70=J};function nj0(J){return J.replace(/\r?\n/g,"\r")}function oj0(J,$){return $?"\x1B[200~"+J+"\x1B[201~":J}function tj0(J,$){J.clipboardData&&J.clipboardData.setData("text/plain",$.selectionText),J.preventDefault()}function ej0(J,$,X,Y){if(J.stopPropagation(),J.clipboardData){let Z=J.clipboardData.getData("text/plain");v90(Z,$,X,Y)}}function v90(J,$,X,Y){J=nj0(J),J=oj0(J,X.decPrivateModes.bracketedPasteMode&&Y.rawOptions.ignoreBracketedPasteMode!==!0),X.triggerDataEvent(J,!0),$.value=""}function h90(J,$,X){let Y=X.getBoundingClientRect(),Z=J.clientX-Y.left-10,Q=J.clientY-Y.top-10;$.style.width="20px",$.style.height="20px",$.style.left=`${Z}px`,$.style.top=`${Q}px`,$.style.zIndex="1000",$.focus()}function S70(J,$,X,Y,Z){h90(J,$,X),Z&&Y.rightClickSelect(J),$.value=Y.selectionText,$.select()}function r2(J){return J>65535?(J-=65536,String.fromCharCode((J>>10)+55296)+String.fromCharCode(J%1024+56320)):String.fromCharCode(J)}function a_(J,$=0,X=J.length){let Y="";for(let Z=$;Z<X;++Z){let Q=J[Z];Q>65535?(Q-=65536,Y+=String.fromCharCode((Q>>10)+55296)+String.fromCharCode(Q%1024+56320)):Y+=String.fromCharCode(Q)}return Y}var JV0=class{constructor(){this._interim=0}clear(){this._interim=0}decode(J,$){let X=J.length;if(!X)return 0;let Y=0,Z=0;if(this._interim){let Q=J.charCodeAt(Z++);56320<=Q&&Q<=57343?$[Y++]=(this._interim-55296)*1024+Q-56320+65536:($[Y++]=this._interim,$[Y++]=Q),this._interim=0}for(let Q=Z;Q<X;++Q){let G=J.charCodeAt(Q);if(55296<=G&&G<=56319){if(++Q>=X)return this._interim=G,Y;let q=J.charCodeAt(Q);56320<=q&&q<=57343?$[Y++]=(G-55296)*1024+q-56320+65536:($[Y++]=G,$[Y++]=q);continue}G!==65279&&($[Y++]=G)}return Y}},$V0=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(J,$){let X=J.length;if(!X)return 0;let Y=0,Z,Q,G,q,U=0,z=0;if(this.interim[0]){let V=!1,W=this.interim[0];W&=(W&224)===192?31:(W&240)===224?15:7;let B=0,K;for(;(K=this.interim[++B]&63)&&B<4;)W<<=6,W|=K;let P=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,A=P-B;for(;z<A;){if(z>=X)return 0;if(K=J[z++],(K&192)!==128){z--,V=!0;break}else this.interim[B++]=K,W<<=6,W|=K&63}V||(P===2?W<128?z--:$[Y++]=W:P===3?W<2048||W>=55296&&W<=57343||W===65279||($[Y++]=W):W<65536||W>1114111||($[Y++]=W)),this.interim.fill(0)}let H=X-4,j=z;for(;j<X;){for(;j<H&&!((Z=J[j])&128)&&!((Q=J[j+1])&128)&&!((G=J[j+2])&128)&&!((q=J[j+3])&128);)$[Y++]=Z,$[Y++]=Q,$[Y++]=G,$[Y++]=q,j+=4;if(Z=J[j++],Z<128)$[Y++]=Z;else if((Z&224)===192){if(j>=X)return this.interim[0]=Z,Y;if(Q=J[j++],(Q&192)!==128){j--;continue}if(U=(Z&31)<<6|Q&63,U<128){j--;continue}$[Y++]=U}else if((Z&240)===224){if(j>=X)return this.interim[0]=Z,Y;if(Q=J[j++],(Q&192)!==128){j--;continue}if(j>=X)return this.interim[0]=Z,this.interim[1]=Q,Y;if(G=J[j++],(G&192)!==128){j--;continue}if(U=(Z&15)<<12|(Q&63)<<6|G&63,U<2048||U>=55296&&U<=57343||U===65279)continue;$[Y++]=U}else if((Z&248)===240){if(j>=X)return this.interim[0]=Z,Y;if(Q=J[j++],(Q&192)!==128){j--;continue}if(j>=X)return this.interim[0]=Z,this.interim[1]=Q,Y;if(G=J[j++],(G&192)!==128){j--;continue}if(j>=X)return this.interim[0]=Z,this.interim[1]=Q,this.interim[2]=G,Y;if(q=J[j++],(q&192)!==128){j--;continue}if(U=(Z&7)<<18|(Q&63)<<12|(G&63)<<6|q&63,U<65536||U>1114111)continue;$[Y++]=U}}return Y}},f90="",i2=" ",mF=class J{constructor(){this.fg=0,this.bg=0,this.extended=new f_}static toColorRGB($){return[$>>>16&255,$>>>8&255,$&255]}static fromColorRGB($){return($[0]&255)<<16|($[1]&255)<<8|$[2]&255}clone(){let $=new J;return $.fg=this.fg,$.bg=this.bg,$.extended=this.extended.clone(),$}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},f_=class J{constructor($=0,X=0){this._ext=0,this._urlId=0,this._ext=$,this._urlId=X}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext($){this._ext=$}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle($){this._ext&=-469762049,this._ext|=$<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor($){this._ext&=-67108864,this._ext|=$&67108863}get urlId(){return this._urlId}set urlId($){this._urlId=$}get underlineVariantOffset(){let $=(this._ext&3758096384)>>29;return $<0?$^4294967288:$}set underlineVariantOffset($){this._ext&=536870911,this._ext|=$<<29&3758096384}clone(){return new J(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},sJ=class J extends mF{constructor(){super(...arguments);this.content=0,this.fg=0,this.bg=0,this.extended=new f_,this.combinedData=""}static fromCharData($){let X=new J;return X.setFromCharData($),X}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?r2(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData($){this.fg=$[0],this.bg=0;let X=!1;if($[1].length>2)X=!0;else if($[1].length===2){let Y=$[1].charCodeAt(0);if(55296<=Y&&Y<=56319){let Z=$[1].charCodeAt(1);56320<=Z&&Z<=57343?this.content=(Y-55296)*1024+Z-56320+65536|$[2]<<22:X=!0}else X=!0}else this.content=$[1].charCodeAt(0)|$[2]<<22;X&&(this.combinedData=$[1],this.content=2097152|$[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},C70="di$target",Dv="di$dependencies",$v=new Map;function XV0(J){return J[Dv]||[]}function T7(J){if($v.has(J))return $v.get(J);let $=function(X,Y,Z){if(arguments.length!==3)throw Error("@IServiceName-decorator can only be used to decorate a parameter");YV0($,X,Z)};return $._id=J,$v.set(J,$),$}function YV0(J,$,X){$[C70]===$?$[Dv].push({id:J,index:X}):($[Dv]=[{id:J,index:X}],$[C70]=$)}var f9=T7("BufferService"),g90=T7("CoreMouseService"),_q=T7("CoreService"),ZV0=T7("CharsetService"),av=T7("InstantiationService"),p90=T7("LogService"),g9=T7("OptionsService"),m90=T7("OscLinkService"),QV0=T7("UnicodeService"),uF=T7("DecorationService"),Rv=class{constructor(J,$,X){this._bufferService=J,this._optionsService=$,this._oscLinkService=X}provideLinks(J,$){let X=this._bufferService.buffer.lines.get(J-1);if(!X){$(void 0);return}let Y=[],Z=this._optionsService.rawOptions.linkHandler,Q=new sJ,G=X.getTrimmedLength(),q=-1,U=-1,z=!1;for(let H=0;H<G;H++)if(!(U===-1&&!X.hasContent(H))){if(X.loadCell(H,Q),Q.hasExtendedAttrs()&&Q.extended.urlId)if(U===-1){U=H,q=Q.extended.urlId;continue}else z=Q.extended.urlId!==q;else U!==-1&&(z=!0);if(z||U!==-1&&H===G-1){let j=this._oscLinkService.getLinkData(q)?.uri;if(j){let V={start:{x:U+1,y:J},end:{x:H+(!z&&H===G-1?1:0),y:J}},W=!1;if(!Z?.allowNonHttpProtocols)try{let B=new URL(j);["http:","https:"].includes(B.protocol)||(W=!0)}catch{W=!0}W||Y.push({text:j,range:V,activate:(B,K)=>Z?Z.activate(B,K,V):GV0(B,K),hover:(B,K)=>Z?.hover?.(B,K,V),leave:(B,K)=>Z?.leave?.(B,K,V)})}z=!1,Q.hasExtendedAttrs()&&Q.extended.urlId?(U=H,q=Q.extended.urlId):(U=-1,q=-1)}}$(Y)}};Rv=Z8([r0(0,f9),r0(1,g9),r0(2,m90)],Rv);function GV0(J,$){if(confirm(`Do you want to navigate to ${$}?

WARNING: This link could potentially be dangerous`)){let X=window.open();if(X){try{X.opener=null}catch{}X.location.href=$}else console.warn("Opening link blocked as opener could not be cleared")}}var r_=T7("CharSizeService"),nZ=T7("CoreBrowserService"),rv=T7("MouseService"),oZ=T7("RenderService"),qV0=T7("SelectionService"),u90=T7("CharacterJoinerService"),SH=T7("ThemeService"),c90=T7("LinkProviderService"),UV0=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(J){setTimeout(()=>{throw J.stack?v70.isErrorNoTelemetry(J)?new v70(J.message+`

`+J.stack):Error(J.message+`

`+J.stack):J},0)}}addListener(J){return this.listeners.push(J),()=>{this._removeListener(J)}}emit(J){this.listeners.forEach(($)=>{$(J)})}_removeListener(J){this.listeners.splice(this.listeners.indexOf(J),1)}setUnexpectedErrorHandler(J){this.unexpectedErrorHandler=J}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(J){this.unexpectedErrorHandler(J),this.emit(J)}onUnexpectedExternalError(J){this.unexpectedErrorHandler(J)}},zV0=new UV0;function I_(J){HV0(J)||zV0.onUnexpectedError(J)}var Mv="Canceled";function HV0(J){return J instanceof jV0?!0:J instanceof Error&&J.name===Mv&&J.message===Mv}var jV0=class extends Error{constructor(){super(Mv),this.name=this.message}};function VV0(J){return J?Error(`Illegal argument: ${J}`):Error("Illegal argument")}var v70=class J extends Error{constructor($){super($),this.name="CodeExpectedError"}static fromError($){if($ instanceof J)return $;let X=new J;return X.message=$.message,X.stack=$.stack,X}static isErrorNoTelemetry($){return $.name==="CodeExpectedError"}},Ov=class J extends Error{constructor($){super($||"An unexpected bug occurred."),Object.setPrototypeOf(this,J.prototype)}};function WV0(J,$,X=0,Y=J.length){let Z=X,Q=Y;for(;Z<Q;){let G=Math.floor((Z+Q)/2);$(J[G])?Z=G+1:Q=G}return Z-1}var BV0=class J{constructor($){this._array=$,this._findLastMonotonousLastIdx=0}findLastMonotonous($){if(J.assertInvariants){if(this._prevFindLastPredicate){for(let Y of this._array)if(this._prevFindLastPredicate(Y)&&!$(Y))throw Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=$}let X=WV0(this._array,$,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=X+1,X===-1?void 0:this._array[X]}};BV0.assertInvariants=!1;function i4(J,$=0){return J[J.length-(1+$)]}var l90;((J)=>{function $(Q){return Q<0}J.isLessThan=$;function X(Q){return Q<=0}J.isLessThanOrEqual=X;function Y(Q){return Q>0}J.isGreaterThan=Y;function Z(Q){return Q===0}J.isNeitherLessOrGreaterThan=Z,J.greaterThan=1,J.lessThan=-1,J.neitherLessOrGreaterThan=0})(l90||={});function FV0(J,$){return(X,Y)=>$(J(X),J(Y))}var KV0=(J,$)=>J-$,h70=class J{constructor($){this.iterate=$}forEach($){this.iterate((X)=>($(X),!0))}toArray(){let $=[];return this.iterate((X)=>($.push(X),!0)),$}filter($){return new J((X)=>this.iterate((Y)=>$(Y)?X(Y):!0))}map($){return new J((X)=>this.iterate((Y)=>X($(Y))))}some($){let X=!1;return this.iterate((Y)=>(X=$(Y),!X)),X}findFirst($){let X;return this.iterate((Y)=>$(Y)?(X=Y,!1):!0),X}findLast($){let X;return this.iterate((Y)=>($(Y)&&(X=Y),!0)),X}findLastMaxBy($){let X,Y=!0;return this.iterate((Z)=>((Y||l90.isGreaterThan($(Z,X)))&&(Y=!1,X=Z),!0)),X}};h70.empty=new h70((J)=>{});function AV0(J,$){let X=Object.create(null);for(let Y of J){let Z=$(Y),Q=X[Z];Q||(Q=X[Z]=[]),Q.push(Y)}return X}var f70,g70,yA1=class{constructor(J,$){this.toKey=$,this._map=new Map,this[f70]="SetWithKey";for(let X of J)this.add(X)}get size(){return this._map.size}add(J){let $=this.toKey(J);return this._map.set($,J),this}delete(J){return this._map.delete(this.toKey(J))}has(J){return this._map.has(this.toKey(J))}*entries(){for(let J of this._map.values())yield[J,J]}keys(){return this.values()}*values(){for(let J of this._map.values())yield J}clear(){this._map.clear()}forEach(J,$){this._map.forEach((X)=>J.call($,X,X,this))}[(g70=Symbol.iterator,f70=Symbol.toStringTag,g70)](){return this.values()}},PV0=class{constructor(){this.map=new Map}add(J,$){let X=this.map.get(J);X||(X=new Set,this.map.set(J,X)),X.add($)}delete(J,$){let X=this.map.get(J);X&&(X.delete($),X.size===0&&this.map.delete(J))}forEach(J,$){let X=this.map.get(J);X&&X.forEach($)}get(J){return this.map.get(J)||new Set}};function DV0(J,$){let X=this,Y=!1,Z;return function(){if(Y)return Z;if(Y=!0,$)try{Z=J.apply(X,arguments)}finally{$()}else Z=J.apply(X,arguments);return Z}}var d90;((J)=>{function $(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}J.is=$;let X=Object.freeze([]);function Y(){return X}J.empty=Y;function*Z(R){yield R}J.single=Z;function Q(R){return $(R)?R:Z(R)}J.wrap=Q;function G(R){return R||X}J.from=G;function*q(R){for(let O=R.length-1;O>=0;O--)yield R[O]}J.reverse=q;function U(R){return!R||R[Symbol.iterator]().next().done===!0}J.isEmpty=U;function z(R){return R[Symbol.iterator]().next().value}J.first=z;function H(R,O){let N=0;for(let T of R)if(O(T,N++))return!0;return!1}J.some=H;function j(R,O){for(let N of R)if(O(N))return N}J.find=j;function*V(R,O){for(let N of R)O(N)&&(yield N)}J.filter=V;function*W(R,O){let N=0;for(let T of R)yield O(T,N++)}J.map=W;function*B(R,O){let N=0;for(let T of R)yield*O(T,N++)}J.flatMap=B;function*K(...R){for(let O of R)yield*O}J.concat=K;function P(R,O,N){let T=N;for(let S of R)T=O(T,S);return T}J.reduce=P;function*A(R,O,N=R.length){for(O<0&&(O+=R.length),N<0?N+=R.length:N>R.length&&(N=R.length);O<N;O++)yield R[O]}J.slice=A;function D(R,O=Number.POSITIVE_INFINITY){let N=[];if(O===0)return[N,R];let T=R[Symbol.iterator]();for(let S=0;S<O;S++){let v=T.next();if(v.done)return[N,J.empty()];N.push(v.value)}return[N,{[Symbol.iterator](){return T}}]}J.consume=D;async function M(R){let O=[];for await(let N of R)O.push(N);return Promise.resolve(O)}J.asyncToArray=M})(d90||={});var RV0=!1,Rq=null,MV0=class J{constructor(){this.livingDisposables=new Map}getDisposableData($){let X=this.livingDisposables.get($);return X||(X={parent:null,source:null,isSingleton:!1,value:$,idx:J.idx++},this.livingDisposables.set($,X)),X}trackDisposable($){let X=this.getDisposableData($);X.source||(X.source=Error().stack)}setParent($,X){let Y=this.getDisposableData($);Y.parent=X}markAsDisposed($){this.livingDisposables.delete($)}markAsSingleton($){this.getDisposableData($).isSingleton=!0}getRootParent($,X){let Y=X.get($);if(Y)return Y;let Z=$.parent?this.getRootParent(this.getDisposableData($.parent),X):$;return X.set($,Z),Z}getTrackedDisposables(){let $=new Map;return[...this.livingDisposables.entries()].filter(([,X])=>X.source!==null&&!this.getRootParent(X,$).isSingleton).flatMap(([X])=>X)}computeLeakingDisposables($=10,X){let Y;if(X)Y=X;else{let U=new Map,z=[...this.livingDisposables.values()].filter((j)=>j.source!==null&&!this.getRootParent(j,U).isSingleton);if(z.length===0)return;let H=new Set(z.map((j)=>j.value));if(Y=z.filter((j)=>!(j.parent&&H.has(j.parent))),Y.length===0)throw Error("There are cyclic diposable chains!")}if(!Y)return;function Z(U){function z(j,V){for(;j.length>0&&V.some((W)=>typeof W=="string"?W===j[0]:j[0].match(W));)j.shift()}let H=U.source.split(`
`).map((j)=>j.trim().replace("at ","")).filter((j)=>j!=="");return z(H,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),H.reverse()}let Q=new PV0;for(let U of Y){let z=Z(U);for(let H=0;H<=z.length;H++)Q.add(z.slice(0,H).join(`
`),U)}Y.sort(FV0((U)=>U.idx,KV0));let G="",q=0;for(let U of Y.slice(0,$)){q++;let z=Z(U),H=[];for(let j=0;j<z.length;j++){let V=z[j];V=`(shared with ${Q.get(z.slice(0,j+1).join(`
`)).size}/${Y.length} leaks) at ${V}`;let W=Q.get(z.slice(0,j).join(`
`)),B=AV0([...W].map((K)=>Z(K)[j]),(K)=>K);delete B[z[j]];for(let[K,P]of Object.entries(B))H.unshift(`    - stacktraces of ${P.length} other leaks continue with ${K}`);H.unshift(V)}G+=`


==================== Leaking disposable ${q}/${Y.length}: ${U.value.constructor.name} ====================
${H.join(`
`)}
============================================================

`}return Y.length>$&&(G+=`


... and ${Y.length-$} more leaking disposables

`),{leaks:Y,details:G}}};MV0.idx=0;function OV0(J){Rq=J}if(RV0){let J="__is_disposable_tracked__";OV0(new class{trackDisposable($){let X=Error("Potentially leaked disposable").stack;setTimeout(()=>{$[J]||console.log(X)},3000)}setParent($,X){if($&&$!==a1.None)try{$[J]=!0}catch{}}markAsDisposed($){if($&&$!==a1.None)try{$[J]=!0}catch{}}markAsSingleton($){}})}function i_(J){return Rq?.trackDisposable(J),J}function n_(J){Rq?.markAsDisposed(J)}function hF(J,$){Rq?.setParent(J,$)}function _V0(J,$){if(Rq)for(let X of J)Rq.setParent(X,$)}function p70(J){return Rq?.markAsSingleton(J),J}function Mq(J){if(d90.is(J)){let $=[];for(let X of J)if(X)try{X.dispose()}catch(Y){$.push(Y)}if($.length===1)throw $[0];if($.length>1)throw AggregateError($,"Encountered errors while disposing of store");return Array.isArray(J)?[]:J}else if(J)return J.dispose(),J}function NV0(...J){let $=R5(()=>Mq(J));return _V0(J,$),$}function R5(J){let $=i_({dispose:DV0(()=>{n_($),J()})});return $}var s90=class J{constructor(){this._toDispose=new Set,this._isDisposed=!1,i_(this)}dispose(){this._isDisposed||(n_(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Mq(this._toDispose)}finally{this._toDispose.clear()}}add($){if(!$)return $;if($===this)throw Error("Cannot register a disposable on itself!");return hF($,this),this._isDisposed?J.DISABLE_DISPOSED_WARNING||console.warn(Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add($),$}delete($){if($){if($===this)throw Error("Cannot dispose a disposable on itself!");this._toDispose.delete($),$.dispose()}}deleteAndLeak($){$&&this._toDispose.has($)&&(this._toDispose.delete($),hF($,null))}};s90.DISABLE_DISPOSED_WARNING=!1;var n2=s90,a1=class{constructor(){this._store=new n2,i_(this),hF(this._store,this)}dispose(){n_(this),this._store.dispose()}_register(J){if(J===this)throw Error("Cannot register a disposable on itself!");return this._store.add(J)}};a1.None=Object.freeze({dispose(){}});var bH=class{constructor(){this._isDisposed=!1,i_(this)}get value(){return this._isDisposed?void 0:this._value}set value(J){this._isDisposed||J===this._value||(this._value?.dispose(),J&&hF(J,this),this._value=J)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,n_(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let J=this._value;return this._value=void 0,J&&hF(J,null),J}},t4=typeof window=="object"?window:globalThis,_v=class J{constructor($){this.element=$,this.next=J.Undefined,this.prev=J.Undefined}};_v.Undefined=new _v(void 0);var s5=_v,m70=class{constructor(){this._first=s5.Undefined,this._last=s5.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===s5.Undefined}clear(){let J=this._first;for(;J!==s5.Undefined;){let $=J.next;J.prev=s5.Undefined,J.next=s5.Undefined,J=$}this._first=s5.Undefined,this._last=s5.Undefined,this._size=0}unshift(J){return this._insert(J,!1)}push(J){return this._insert(J,!0)}_insert(J,$){let X=new s5(J);if(this._first===s5.Undefined)this._first=X,this._last=X;else if($){let Z=this._last;this._last=X,X.prev=Z,Z.next=X}else{let Z=this._first;this._first=X,X.next=Z,Z.prev=X}this._size+=1;let Y=!1;return()=>{Y||(Y=!0,this._remove(X))}}shift(){if(this._first!==s5.Undefined){let J=this._first.element;return this._remove(this._first),J}}pop(){if(this._last!==s5.Undefined){let J=this._last.element;return this._remove(this._last),J}}_remove(J){if(J.prev!==s5.Undefined&&J.next!==s5.Undefined){let $=J.prev;$.next=J.next,J.next.prev=$}else J.prev===s5.Undefined&&J.next===s5.Undefined?(this._first=s5.Undefined,this._last=s5.Undefined):J.next===s5.Undefined?(this._last=this._last.prev,this._last.next=s5.Undefined):J.prev===s5.Undefined&&(this._first=this._first.next,this._first.prev=s5.Undefined);this._size-=1}*[Symbol.iterator](){let J=this._first;for(;J!==s5.Undefined;)yield J.element,J=J.next}},TV0=globalThis.performance&&typeof globalThis.performance.now=="function",wV0=class J{static create($){return new J($)}constructor($){this._now=TV0&&$===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},LV0=!1,u70=!1,kV0=!1,a7;((J)=>{J.None=()=>a1.None;function $(L){if(kV0){let{onDidAddListener:b}=L,p=Tv.create(),d=0;L.onDidAddListener=()=>{++d===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),p.print()),b?.()}}}function X(L,b){return V(L,()=>{},0,void 0,!0,void 0,b)}J.defer=X;function Y(L){return(b,p=null,d)=>{let s=!1,c;return c=L((i)=>{if(!s)return c?c.dispose():s=!0,b.call(p,i)},null,d),s&&c.dispose(),c}}J.once=Y;function Z(L,b,p){return H((d,s=null,c)=>L((i)=>d.call(s,b(i)),null,c),p)}J.map=Z;function Q(L,b,p){return H((d,s=null,c)=>L((i)=>{b(i),d.call(s,i)},null,c),p)}J.forEach=Q;function G(L,b,p){return H((d,s=null,c)=>L((i)=>b(i)&&d.call(s,i),null,c),p)}J.filter=G;function q(L){return L}J.signal=q;function U(...L){return(b,p=null,d)=>{let s=NV0(...L.map((c)=>c((i)=>b.call(p,i))));return j(s,d)}}J.any=U;function z(L,b,p,d){let s=p;return Z(L,(c)=>(s=b(s,c),s),d)}J.reduce=z;function H(L,b){let p,d={onWillAddFirstListener(){p=L(s.fire,s)},onDidRemoveLastListener(){p?.dispose()}};b||$(d);let s=new x0(d);return b?.add(s),s.event}function j(L,b){return b instanceof Array?b.push(L):b&&b.add(L),L}function V(L,b,p=100,d=!1,s=!1,c,i){let J0,W0,M0,X0=0,N1,o1={leakWarningThreshold:c,onWillAddFirstListener(){J0=L((Q1)=>{X0++,W0=b(W0,Q1),d&&!M0&&(E1.fire(W0),W0=void 0),N1=()=>{let T1=W0;W0=void 0,M0=void 0,(!d||X0>1)&&E1.fire(T1),X0=0},typeof p=="number"?(clearTimeout(M0),M0=setTimeout(N1,p)):M0===void 0&&(M0=0,queueMicrotask(N1))})},onWillRemoveListener(){s&&X0>0&&N1?.()},onDidRemoveLastListener(){N1=void 0,J0.dispose()}};i||$(o1);let E1=new x0(o1);return i?.add(E1),E1.event}J.debounce=V;function W(L,b=0,p){return J.debounce(L,(d,s)=>d?(d.push(s),d):[s],b,void 0,!0,void 0,p)}J.accumulate=W;function B(L,b=(d,s)=>d===s,p){let d=!0,s;return G(L,(c)=>{let i=d||!b(c,s);return d=!1,s=c,i},p)}J.latch=B;function K(L,b,p){return[J.filter(L,b,p),J.filter(L,(d)=>!b(d),p)]}J.split=K;function P(L,b=!1,p=[],d){let s=p.slice(),c=L((W0)=>{s?s.push(W0):J0.fire(W0)});d&&d.add(c);let i=()=>{s?.forEach((W0)=>J0.fire(W0)),s=null},J0=new x0({onWillAddFirstListener(){c||(c=L((W0)=>J0.fire(W0)),d&&d.add(c))},onDidAddFirstListener(){s&&(b?setTimeout(i):i())},onDidRemoveLastListener(){c&&c.dispose(),c=null}});return d&&d.add(J0),J0.event}J.buffer=P;function A(L,b){return(p,d,s)=>{let c=b(new M);return L(function(i){let J0=c.evaluate(i);J0!==D&&p.call(d,J0)},void 0,s)}}J.chain=A;let D=Symbol("HaltChainable");class M{constructor(){this.steps=[]}map(L){return this.steps.push(L),this}forEach(L){return this.steps.push((b)=>(L(b),b)),this}filter(L){return this.steps.push((b)=>L(b)?b:D),this}reduce(L,b){let p=b;return this.steps.push((d)=>(p=L(p,d),p)),this}latch(L=(b,p)=>b===p){let b=!0,p;return this.steps.push((d)=>{let s=b||!L(d,p);return b=!1,p=d,s?d:D}),this}evaluate(L){for(let b of this.steps)if(L=b(L),L===D)break;return L}}function R(L,b,p=(d)=>d){let d=(...J0)=>i.fire(p(...J0)),s=()=>L.on(b,d),c=()=>L.removeListener(b,d),i=new x0({onWillAddFirstListener:s,onDidRemoveLastListener:c});return i.event}J.fromNodeEventEmitter=R;function O(L,b,p=(d)=>d){let d=(...J0)=>i.fire(p(...J0)),s=()=>L.addEventListener(b,d),c=()=>L.removeEventListener(b,d),i=new x0({onWillAddFirstListener:s,onDidRemoveLastListener:c});return i.event}J.fromDOMEventEmitter=O;function N(L){return new Promise((b)=>Y(L)(b))}J.toPromise=N;function T(L){let b=new x0;return L.then((p)=>{b.fire(p)},()=>{b.fire(void 0)}).finally(()=>{b.dispose()}),b.event}J.fromPromise=T;function S(L,b){return L((p)=>b.fire(p))}J.forward=S;function v(L,b,p){return b(p),L((d)=>b(d))}J.runAndSubscribe=v;class l{constructor(L,b){this._observable=L,this._counter=0,this._hasChanged=!1;let p={onWillAddFirstListener:()=>{L.addObserver(this)},onDidRemoveLastListener:()=>{L.removeObserver(this)}};b||$(p),this.emitter=new x0(p),b&&b.add(this.emitter)}beginUpdate(L){this._counter++}handlePossibleChange(L){}handleChange(L,b){this._hasChanged=!0}endUpdate(L){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function f(L,b){return new l(L,b).emitter.event}J.fromObservable=f;function h(L){return(b,p,d)=>{let s=0,c=!1,i={beginUpdate(){s++},endUpdate(){s--,s===0&&(L.reportChanges(),c&&(c=!1,b.call(p)))},handlePossibleChange(){},handleChange(){c=!0}};L.addObserver(i),L.reportChanges();let J0={dispose(){L.removeObserver(i)}};return d instanceof n2?d.add(J0):Array.isArray(d)&&d.push(J0),J0}}J.fromObservableLight=h})(a7||={});var Nv=class J{constructor($){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${$}_${J._idPool++}`,J.all.add(this)}start($){this._stopWatch=new wV0,this.listenerCount=$}stop(){if(this._stopWatch){let $=this._stopWatch.elapsed();this.durations.push($),this.elapsedOverall+=$,this.invocationCount+=1,this._stopWatch=void 0}}};Nv.all=new Set,Nv._idPool=0;var EV0=Nv,c70=-1,a90=class J{constructor($,X,Y=(J._idPool++).toString(16).padStart(3,"0")){this._errorHandler=$,this.threshold=X,this.name=Y,this._warnCountdown=0}dispose(){this._stacks?.clear()}check($,X){let Y=this.threshold;if(Y<=0||X<Y)return;this._stacks||(this._stacks=new Map);let Z=this._stacks.get($.value)||0;if(this._stacks.set($.value,Z+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=Y*0.5;let[Q,G]=this.getMostFrequentStack(),q=`[${this.name}] potential listener LEAK detected, having ${X} listeners already. MOST frequent listener (${G}):`;console.warn(q),console.warn(Q);let U=new yV0(q,Q);this._errorHandler(U)}return()=>{let Q=this._stacks.get($.value)||0;this._stacks.set($.value,Q-1)}}getMostFrequentStack(){if(!this._stacks)return;let $,X=0;for(let[Y,Z]of this._stacks)(!$||X<Z)&&($=[Y,Z],X=Z);return $}};a90._idPool=1;var IV0=a90,Tv=class J{constructor($){this.value=$}static create(){let $=Error();return new J($.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},yV0=class extends Error{constructor(J,$){super(J),this.name="ListenerLeakError",this.stack=$}},xV0=class extends Error{constructor(J,$){super(J),this.name="ListenerRefusalError",this.stack=$}},bV0=0,y_=class{constructor(J){this.value=J,this.id=bV0++}},SV0=2,CV0=(J,$)=>{if(J instanceof y_)$(J);else for(let X=0;X<J.length;X++){let Y=J[X];Y&&$(Y)}},x_;if(LV0){let J=[];setInterval(()=>{J.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(J.join(`
`)),J.length=0)},3000),x_=new FinalizationRegistry(($)=>{typeof $=="string"&&J.push($)})}var x0=class{constructor(J){this._size=0,this._options=J,this._leakageMon=c70>0||this._options?.leakWarningThreshold?new IV0(J?.onListenerError??I_,this._options?.leakWarningThreshold??c70):void 0,this._perfMon=this._options?._profName?new EV0(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(u70){let J=this._listeners;queueMicrotask(()=>{CV0(J,($)=>$.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(J,$,X)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let q=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(q);let U=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],z=new xV0(`${q}. HINT: Stack shows most frequent listener (${U[1]}-times)`,U[0]);return(this._options?.onListenerError||I_)(z),a1.None}if(this._disposed)return a1.None;$&&(J=J.bind($));let Y=new y_(J),Z,Q;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*0.2)&&(Y.stack=Tv.create(),Z=this._leakageMon.check(Y.stack,this._size+1)),u70&&(Y.stack=Q??Tv.create()),this._listeners?this._listeners instanceof y_?(this._deliveryQueue??=new vV0,this._listeners=[this._listeners,Y]):this._listeners.push(Y):(this._options?.onWillAddFirstListener?.(this),this._listeners=Y,this._options?.onDidAddFirstListener?.(this)),this._size++;let G=R5(()=>{x_?.unregister(G),Z?.(),this._removeListener(Y)});if(X instanceof n2?X.add(G):Array.isArray(X)&&X.push(G),x_){let q=Error().stack.split(`
`).slice(2,3).join(`
`).trim(),U=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(q);x_.register(G,U?.[2]??q,G)}return G},this._event}_removeListener(J){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let $=this._listeners,X=$.indexOf(J);if(X===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),Error("Attempted to dispose unknown listener");this._size--,$[X]=void 0;let Y=this._deliveryQueue.current===this;if(this._size*SV0<=$.length){let Z=0;for(let Q=0;Q<$.length;Q++)$[Q]?$[Z++]=$[Q]:Y&&(this._deliveryQueue.end--,Z<this._deliveryQueue.i&&this._deliveryQueue.i--);$.length=Z}}_deliver(J,$){if(!J)return;let X=this._options?.onListenerError||I_;if(!X){J.value($);return}try{J.value($)}catch(Y){X(Y)}}_deliverQueue(J){let $=J.current._listeners;for(;J.i<J.end;)this._deliver($[J.i++],J.value);J.reset()}fire(J){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof y_)this._deliver(this._listeners,J);else{let $=this._deliveryQueue;$.enqueue(this,J,this._listeners.length),this._deliverQueue($)}this._perfMon?.stop()}hasListeners(){return this._size>0}},vV0=class{constructor(){this.i=-1,this.end=0}enqueue(J,$,X){this.i=0,this.end=X,this.current=J,this.value=$}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},wv=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new x0,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new x0,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel($){return this.mapWindowIdToZoomLevel.get(this.getWindowId($))??0}setZoomLevel($,X){if(this.getZoomLevel(X)===$)return;let Y=this.getWindowId(X);this.mapWindowIdToZoomLevel.set(Y,$),this._onDidChangeZoomLevel.fire(Y)}getZoomFactor($){return this.mapWindowIdToZoomFactor.get(this.getWindowId($))??1}setZoomFactor($,X){this.mapWindowIdToZoomFactor.set(this.getWindowId(X),$)}setFullscreen($,X){if(this.isFullscreen(X)===$)return;let Y=this.getWindowId(X);this.mapWindowIdToFullScreen.set(Y,$),this._onDidChangeFullscreen.fire(Y)}isFullscreen($){return!!this.mapWindowIdToFullScreen.get(this.getWindowId($))}getWindowId($){return $.vscodeWindowId}};wv.INSTANCE=new wv;var iv=wv;function hV0(J,$,X){typeof $=="string"&&($=J.matchMedia($)),$.addEventListener("change",X)}var xA1=iv.INSTANCE.onDidChangeZoomLevel;function fV0(J){return iv.INSTANCE.getZoomFactor(J)}var bA1=iv.INSTANCE.onDidChangeFullscreen,CH=typeof navigator=="object"?navigator.userAgent:"",Lv=CH.indexOf("Firefox")>=0,b_=CH.indexOf("AppleWebKit")>=0,nv=CH.indexOf("Chrome")>=0,r90=!nv&&CH.indexOf("Safari")>=0,SA1=CH.indexOf("Electron/")>=0,CA1=CH.indexOf("Android")>=0,S_=!1;if(typeof t4.matchMedia=="function"){let J=t4.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),$=t4.matchMedia("(display-mode: fullscreen)");S_=J.matches,hV0(t4,J,({matches:X})=>{S_&&$.matches||(S_=X)})}function gV0(){return S_}var xH="en",g_=!1,p_=!1,CF=!1,pV0=!1,i90=!1,n90=!1,mV0=!1,uV0=!1,cV0=!1,lV0=!1,T_,C_=xH,l70=xH,dV0,aZ,iZ=globalThis,o4;typeof iZ.vscode<"u"&&typeof iZ.vscode.process<"u"?o4=iZ.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(o4=process);var o90=typeof o4?.versions?.electron=="string",sV0=o90&&o4?.type==="renderer";if(typeof o4=="object"){g_=o4.platform==="win32",p_=o4.platform==="darwin",CF=o4.platform==="linux",pV0=CF&&!!o4.env.SNAP&&!!o4.env.SNAP_REVISION,mV0=o90,cV0=!!o4.env.CI||!!o4.env.BUILD_ARTIFACTSTAGINGDIRECTORY,T_=xH,C_=xH;let J=o4.env.VSCODE_NLS_CONFIG;if(J)try{let $=JSON.parse(J);T_=$.userLocale,l70=$.osLocale,C_=$.resolvedLanguage||xH,dV0=$.languagePack?.translationsConfigFile}catch{}i90=!0}else typeof navigator=="object"&&!sV0?(aZ=navigator.userAgent,g_=aZ.indexOf("Windows")>=0,p_=aZ.indexOf("Macintosh")>=0,uV0=(aZ.indexOf("Macintosh")>=0||aZ.indexOf("iPad")>=0||aZ.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,CF=aZ.indexOf("Linux")>=0,lV0=aZ?.indexOf("Mobi")>=0,n90=!0,C_=globalThis._VSCODE_NLS_LANGUAGE||xH,T_=navigator.language.toLowerCase(),l70=T_):console.error("Unable to resolve platform.");var Xv=0;p_?Xv=1:g_?Xv=3:CF&&(Xv=2);var t90=g_,FY=p_,aV0=CF,Yv=i90,rV0=n90&&typeof iZ.importScripts=="function",vA1=rV0?iZ.origin:void 0,KY=aZ,l2=C_,iV0;((J)=>{function $(){return l2}J.value=$;function X(){return l2.length===2?l2==="en":l2.length>=3?l2[0]==="e"&&l2[1]==="n"&&l2[2]==="-":!1}J.isDefaultVariant=X;function Y(){return l2==="en"}J.isDefault=Y})(iV0||={});var nV0=typeof iZ.postMessage=="function"&&!iZ.importScripts,oV0=(()=>{if(nV0){let J=[];iZ.addEventListener("message",(X)=>{if(X.data&&X.data.vscodeScheduleAsyncWork)for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y];if(Q.id===X.data.vscodeScheduleAsyncWork){J.splice(Y,1),Q.callback();return}}});let $=0;return(X)=>{let Y=++$;J.push({id:Y,callback:X}),iZ.postMessage({vscodeScheduleAsyncWork:Y},"*")}}return(J)=>setTimeout(J)})(),tV0=!!(KY&&KY.indexOf("Chrome")>=0),hA1=!!(KY&&KY.indexOf("Firefox")>=0),fA1=!!(!tV0&&KY&&KY.indexOf("Safari")>=0),gA1=!!(KY&&KY.indexOf("Edg/")>=0),pA1=!!(KY&&KY.indexOf("Android")>=0),d2=typeof navigator=="object"?navigator:{},mA1={clipboard:{writeText:Yv||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(d2&&d2.clipboard&&d2.clipboard.writeText),readText:Yv||!!(d2&&d2.clipboard&&d2.clipboard.readText)},keyboard:Yv||gV0()?0:d2.keyboard||r90?1:2,touch:"ontouchstart"in t4||d2.maxTouchPoints>0,pointerEvents:t4.PointerEvent&&(("ontouchstart"in t4)||navigator.maxTouchPoints>0)},ov=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(J,$){this._keyCodeToStr[J]=$,this._strToKeyCode[$.toLowerCase()]=J}keyCodeToStr(J){return this._keyCodeToStr[J]}strToKeyCode(J){return this._strToKeyCode[J.toLowerCase()]||0}},Zv=new ov,d70=new ov,s70=new ov,eV0=Array(230),e90;((J)=>{function $(q){return Zv.keyCodeToStr(q)}J.toString=$;function X(q){return Zv.strToKeyCode(q)}J.fromString=X;function Y(q){return d70.keyCodeToStr(q)}J.toUserSettingsUS=Y;function Z(q){return s70.keyCodeToStr(q)}J.toUserSettingsGeneral=Z;function Q(q){return d70.strToKeyCode(q)||s70.strToKeyCode(q)}J.fromUserSettings=Q;function G(q){if(q>=98&&q<=113)return null;switch(q){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Zv.keyCodeToStr(q)}J.toElectronAccelerator=G})(e90||={});var JW0=class J{constructor($,X,Y,Z,Q){this.ctrlKey=$,this.shiftKey=X,this.altKey=Y,this.metaKey=Z,this.keyCode=Q}equals($){return $ instanceof J&&this.ctrlKey===$.ctrlKey&&this.shiftKey===$.shiftKey&&this.altKey===$.altKey&&this.metaKey===$.metaKey&&this.keyCode===$.keyCode}getHashCode(){let $=this.ctrlKey?"1":"0",X=this.shiftKey?"1":"0",Y=this.altKey?"1":"0",Z=this.metaKey?"1":"0";return`K${$}${X}${Y}${Z}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new $W0([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},$W0=class{constructor(J){if(J.length===0)throw VV0("chords");this.chords=J}getHashCode(){let J="";for(let $=0,X=this.chords.length;$<X;$++)$!==0&&(J+=";"),J+=this.chords[$].getHashCode();return J}equals(J){if(J===null||this.chords.length!==J.chords.length)return!1;for(let $=0;$<this.chords.length;$++)if(!this.chords[$].equals(J.chords[$]))return!1;return!0}};function XW0(J){if(J.charCode){let X=String.fromCharCode(J.charCode).toUpperCase();return e90.fromString(X)}let $=J.keyCode;if($===3)return 7;if(Lv)switch($){case 59:return 85;case 60:if(aV0)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(FY)return 57;break}else if(b_){if(FY&&$===93)return 57;if(!FY&&$===92)return 57}return eV0[$]||0}var YW0=FY?256:2048,ZW0=512,QW0=1024,GW0=FY?2048:256,kv=class{constructor(J){this._standardKeyboardEventBrand=!0;let $=J;this.browserEvent=$,this.target=$.target,this.ctrlKey=$.ctrlKey,this.shiftKey=$.shiftKey,this.altKey=$.altKey,this.metaKey=$.metaKey,this.altGraphKey=$.getModifierState?.("AltGraph"),this.keyCode=XW0($),this.code=$.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(J){return this._asKeybinding===J}_computeKeybinding(){let J=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(J=this.keyCode);let $=0;return this.ctrlKey&&($|=YW0),this.altKey&&($|=ZW0),this.shiftKey&&($|=QW0),this.metaKey&&($|=GW0),$|=J,$}_computeKeyCodeChord(){let J=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(J=this.keyCode),new JW0(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,J)}},a70=new WeakMap;function qW0(J){if(!J.parent||J.parent===J)return null;try{let $=J.location,X=J.parent.location;if($.origin!=="null"&&X.origin!=="null"&&$.origin!==X.origin)return null}catch{return null}return J.parent}var UW0=class{static getSameOriginWindowChain(J){let $=a70.get(J);if(!$){$=[],a70.set(J,$);let X=J,Y;do Y=qW0(X),Y?$.push({window:new WeakRef(X),iframeElement:X.frameElement||null}):$.push({window:new WeakRef(X),iframeElement:null}),X=Y;while(X)}return $.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(J,$){if(!$||J===$)return{top:0,left:0};let X=0,Y=0,Z=this.getSameOriginWindowChain(J);for(let Q of Z){let G=Q.window.deref();if(X+=G?.scrollY??0,Y+=G?.scrollX??0,G===$||!Q.iframeElement)break;let q=Q.iframeElement.getBoundingClientRect();X+=q.top,Y+=q.left}return{top:X,left:Y}}},EF=class{constructor(J,$){this.timestamp=Date.now(),this.browserEvent=$,this.leftButton=$.button===0,this.middleButton=$.button===1,this.rightButton=$.button===2,this.buttons=$.buttons,this.target=$.target,this.detail=$.detail||1,$.type==="dblclick"&&(this.detail=2),this.ctrlKey=$.ctrlKey,this.shiftKey=$.shiftKey,this.altKey=$.altKey,this.metaKey=$.metaKey,typeof $.pageX=="number"?(this.posx=$.pageX,this.posy=$.pageY):(this.posx=$.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=$.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let X=UW0.getPositionOfChildWindowRelativeToAncestorWindow(J,$.view);this.posx-=X.left,this.posy-=X.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},r70=class{constructor(J,$=0,X=0){this.browserEvent=J||null,this.target=J?J.target||J.targetNode||J.srcElement:null,this.deltaY=X,this.deltaX=$;let Y=!1;if(nv){let Z=navigator.userAgent.match(/Chrome\/(\d+)/);Y=(Z?parseInt(Z[1]):123)<=122}if(J){let Z=J,Q=J,G=J.view?.devicePixelRatio||1;if(typeof Z.wheelDeltaY<"u")Y?this.deltaY=Z.wheelDeltaY/(120*G):this.deltaY=Z.wheelDeltaY/120;else if(typeof Q.VERTICAL_AXIS<"u"&&Q.axis===Q.VERTICAL_AXIS)this.deltaY=-Q.detail/3;else if(J.type==="wheel"){let q=J;q.deltaMode===q.DOM_DELTA_LINE?Lv&&!FY?this.deltaY=-J.deltaY/3:this.deltaY=-J.deltaY:this.deltaY=-J.deltaY/40}if(typeof Z.wheelDeltaX<"u")r90&&t90?this.deltaX=-(Z.wheelDeltaX/120):Y?this.deltaX=Z.wheelDeltaX/(120*G):this.deltaX=Z.wheelDeltaX/120;else if(typeof Q.HORIZONTAL_AXIS<"u"&&Q.axis===Q.HORIZONTAL_AXIS)this.deltaX=-J.detail/3;else if(J.type==="wheel"){let q=J;q.deltaMode===q.DOM_DELTA_LINE?Lv&&!FY?this.deltaX=-J.deltaX/3:this.deltaX=-J.deltaX:this.deltaX=-J.deltaX/40}this.deltaY===0&&this.deltaX===0&&J.wheelDelta&&(Y?this.deltaY=J.wheelDelta/(120*G):this.deltaY=J.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},J40=Object.freeze(function(J,$){let X=setTimeout(J.bind($),0);return{dispose(){clearTimeout(X)}}}),zW0;((J)=>{function $(X){return X===J.None||X===J.Cancelled||X instanceof HW0?!0:!X||typeof X!="object"?!1:typeof X.isCancellationRequested=="boolean"&&typeof X.onCancellationRequested=="function"}J.isCancellationToken=$,J.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:a7.None}),J.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:J40})})(zW0||={});var HW0=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?J40:(this._emitter||(this._emitter=new x0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},uA1=Symbol("MicrotaskDelay"),tv=class{constructor(J,$){this._isDisposed=!1,this._token=-1,typeof J=="function"&&typeof $=="number"&&this.setIfNotSet(J,$)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(J,$){if(this._isDisposed)throw new Ov("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,J()},$)}setIfNotSet(J,$){if(this._isDisposed)throw new Ov("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,J()},$))}},jW0=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(J,$,X=globalThis){if(this.isDisposed)throw new Ov("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let Y=X.setInterval(()=>{J()},$);this.disposable=R5(()=>{X.clearInterval(Y),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},VW0,Qv;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Qv=(J,$)=>{oV0(()=>{if(X)return;let Y=Date.now()+15;$(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,Y-Date.now())}}))});let X=!1;return{dispose(){X||(X=!0)}}}:Qv=(J,$,X)=>{let Y=J.requestIdleCallback($,typeof X=="number"?{timeout:X}:void 0),Z=!1;return{dispose(){Z||(Z=!0,J.cancelIdleCallback(Y))}}},VW0=(J)=>Qv(globalThis,J)})();var WW0;((J)=>{async function $(Y){let Z,Q=await Promise.all(Y.map((G)=>G.then((q)=>q,(q)=>{Z||(Z=q)})));if(typeof Z<"u")throw Z;return Q}J.settled=$;function X(Y){return new Promise(async(Z,Q)=>{try{await Y(Z,Q)}catch(G){Q(G)}})}J.withAsyncBody=X})(WW0||={});var i70=class J{static fromArray($){return new J((X)=>{X.emitMany($)})}static fromPromise($){return new J(async(X)=>{X.emitMany(await $)})}static fromPromises($){return new J(async(X)=>{await Promise.all($.map(async(Y)=>X.emitOne(await Y)))})}static merge($){return new J(async(X)=>{await Promise.all($.map(async(Y)=>{for await(let Z of Y)X.emitOne(Z)}))})}constructor($,X){this._state=0,this._results=[],this._error=null,this._onReturn=X,this._onStateChanged=new x0,queueMicrotask(async()=>{let Y={emitOne:(Z)=>this.emitOne(Z),emitMany:(Z)=>this.emitMany(Z),reject:(Z)=>this.reject(Z)};try{await Promise.resolve($(Y)),this.resolve()}catch(Z){this.reject(Z)}finally{Y.emitOne=void 0,Y.emitMany=void 0,Y.reject=void 0}})}[Symbol.asyncIterator](){let $=0;return{next:async()=>{do{if(this._state===2)throw this._error;if($<this._results.length)return{done:!1,value:this._results[$++]};if(this._state===1)return{done:!0,value:void 0};await a7.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map($,X){return new J(async(Y)=>{for await(let Z of $)Y.emitOne(X(Z))})}map($){return J.map(this,$)}static filter($,X){return new J(async(Y)=>{for await(let Z of $)X(Z)&&Y.emitOne(Z)})}filter($){return J.filter(this,$)}static coalesce($){return J.filter($,(X)=>!!X)}coalesce(){return J.coalesce(this)}static async toPromise($){let X=[];for await(let Y of $)X.push(Y);return X}toPromise(){return J.toPromise(this)}emitOne($){this._state===0&&(this._results.push($),this._onStateChanged.fire())}emitMany($){this._state===0&&(this._results=this._results.concat($),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject($){this._state===0&&(this._state=2,this._error=$,this._onStateChanged.fire())}};i70.EMPTY=i70.fromArray([]);function BW0(J){return 55296<=J&&J<=56319}function n70(J){return 56320<=J&&J<=57343}function FW0(J,$){return(J-55296<<10)+($-56320)+65536}function KW0(J){return ev(J,0)}function ev(J,$){switch(typeof J){case"object":return J===null?rZ(349,$):Array.isArray(J)?PW0(J,$):DW0(J,$);case"string":return $40(J,$);case"boolean":return AW0(J,$);case"number":return rZ(J,$);case"undefined":return rZ(937,$);default:return rZ(617,$)}}function rZ(J,$){return($<<5)-$+J|0}function AW0(J,$){return rZ(J?433:863,$)}function $40(J,$){$=rZ(149417,$);for(let X=0,Y=J.length;X<Y;X++)$=rZ(J.charCodeAt(X),$);return $}function PW0(J,$){return $=rZ(104579,$),J.reduce((X,Y)=>ev(Y,X),$)}function DW0(J,$){return $=rZ(181387,$),Object.keys(J).sort().reduce((X,Y)=>(X=$40(Y,X),ev(J[Y],X)),$)}function Gv(J,$,X=32){let Y=X-$,Z=~((1<<Y)-1);return(J<<$|(Z&J)>>>Y)>>>0}function o70(J,$=0,X=J.byteLength,Y=0){for(let Z=0;Z<X;Z++)J[$+Z]=Y}function RW0(J,$,X="0"){for(;J.length<$;)J=X+J;return J}function OF(J,$=32){return J instanceof ArrayBuffer?Array.from(new Uint8Array(J)).map((X)=>X.toString(16).padStart(2,"0")).join(""):RW0((J>>>0).toString(16),$/4)}var MW0=class J{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update($){let X=$.length;if(X===0)return;let Y=this._buff,Z=this._buffLen,Q=this._leftoverHighSurrogate,G,q;for(Q!==0?(G=Q,q=-1,Q=0):(G=$.charCodeAt(0),q=0);;){let U=G;if(BW0(G))if(q+1<X){let z=$.charCodeAt(q+1);n70(z)?(q++,U=FW0(G,z)):U=65533}else{Q=G;break}else n70(G)&&(U=65533);if(Z=this._push(Y,Z,U),q++,q<X)G=$.charCodeAt(q);else break}this._buffLen=Z,this._leftoverHighSurrogate=Q}_push($,X,Y){return Y<128?$[X++]=Y:Y<2048?($[X++]=192|(Y&1984)>>>6,$[X++]=128|(Y&63)>>>0):Y<65536?($[X++]=224|(Y&61440)>>>12,$[X++]=128|(Y&4032)>>>6,$[X++]=128|(Y&63)>>>0):($[X++]=240|(Y&1835008)>>>18,$[X++]=128|(Y&258048)>>>12,$[X++]=128|(Y&4032)>>>6,$[X++]=128|(Y&63)>>>0),X>=64&&(this._step(),X-=64,this._totalLen+=64,$[0]=$[64],$[1]=$[65],$[2]=$[66]),X}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),OF(this._h0)+OF(this._h1)+OF(this._h2)+OF(this._h3)+OF(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,o70(this._buff,this._buffLen),this._buffLen>56&&(this._step(),o70(this._buff));let $=8*this._totalLen;this._buffDV.setUint32(56,Math.floor($/4294967296),!1),this._buffDV.setUint32(60,$%4294967296,!1),this._step()}_step(){let $=J._bigBlock32,X=this._buffDV;for(let j=0;j<64;j+=4)$.setUint32(j,X.getUint32(j,!1),!1);for(let j=64;j<320;j+=4)$.setUint32(j,Gv($.getUint32(j-12,!1)^$.getUint32(j-32,!1)^$.getUint32(j-56,!1)^$.getUint32(j-64,!1),1),!1);let Y=this._h0,Z=this._h1,Q=this._h2,G=this._h3,q=this._h4,U,z,H;for(let j=0;j<80;j++)j<20?(U=Z&Q|~Z&G,z=1518500249):j<40?(U=Z^Q^G,z=1859775393):j<60?(U=Z&Q|Z&G|Q&G,z=2400959708):(U=Z^Q^G,z=3395469782),H=Gv(Y,5)+U+q+z+$.getUint32(j*4,!1)&4294967295,q=G,G=Q,Q=Gv(Z,30),Z=Y,Y=H;this._h0=this._h0+Y&4294967295,this._h1=this._h1+Z&4294967295,this._h2=this._h2+Q&4294967295,this._h3=this._h3+G&4294967295,this._h4=this._h4+q&4294967295}};MW0._bigBlock32=new DataView(new ArrayBuffer(320));var{registerWindow:cA1,getWindow:n$,getDocument:lA1,getWindows:dA1,getWindowsCount:sA1,getWindowId:t70,getWindowById:aA1,hasWindow:rA1,onDidRegisterWindow:OW0,onWillUnregisterWindow:iA1,onDidUnregisterWindow:nA1}=function(){let J=new Map,$={window:t4,disposables:new n2};J.set(t4.vscodeWindowId,$);let X=new x0,Y=new x0,Z=new x0;function Q(G,q){return(typeof G=="number"?J.get(G):void 0)??(q?$:void 0)}return{onDidRegisterWindow:X.event,onWillUnregisterWindow:Z.event,onDidUnregisterWindow:Y.event,registerWindow(G){if(J.has(G.vscodeWindowId))return a1.None;let q=new n2,U={window:G,disposables:q.add(new n2)};return J.set(G.vscodeWindowId,U),q.add(R5(()=>{J.delete(G.vscodeWindowId),Y.fire(G)})),q.add(x1(G,M7.BEFORE_UNLOAD,()=>{Z.fire(G)})),X.fire(U),q},getWindows(){return J.values()},getWindowsCount(){return J.size},getWindowId(G){return G.vscodeWindowId},hasWindow(G){return J.has(G)},getWindowById:Q,getWindow(G){let q=G;if(q?.ownerDocument?.defaultView)return q.ownerDocument.defaultView.window;let U=G;return U?.view?U.view.window:t4},getDocument(G){return n$(G).document}}}(),_W0=class{constructor(J,$,X,Y){this._node=J,this._type=$,this._handler=X,this._options=Y||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function x1(J,$,X,Y){return new _W0(J,$,X,Y)}function NW0(J,$){return function(X){return $(new EF(J,X))}}function TW0(J){return function($){return J(new kv($))}}var e70=function(J,$,X,Y){let Z=X;return $==="click"||$==="mousedown"||$==="contextmenu"?Z=NW0(n$(J),X):($==="keydown"||$==="keypress"||$==="keyup")&&(Z=TW0(X)),x1(J,$,Z,Y)},wW0,m_,LW0=class extends jW0{constructor(J){super(),this.defaultTarget=J&&n$(J)}cancelAndSet(J,$,X){return super.cancelAndSet(J,$,X??this.defaultTarget)}},qv=class{constructor(J,$=0){this._runner=J,this.priority=$,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(J){I_(J)}}static sort(J,$){return $.priority-J.priority}};(function(){let J=new Map,$=new Map,X=new Map,Y=new Map,Z=(Q)=>{X.set(Q,!1);let G=J.get(Q)??[];for($.set(Q,G),J.set(Q,[]),Y.set(Q,!0);G.length>0;)G.sort(qv.sort),G.shift().execute();Y.set(Q,!1)};m_=(Q,G,q=0)=>{let U=t70(Q),z=new qv(G,q),H=J.get(U);return H||(H=[],J.set(U,H)),H.push(z),X.get(U)||(X.set(U,!0),Q.requestAnimationFrame(()=>Z(U))),z},wW0=(Q,G,q)=>{let U=t70(Q);if(Y.get(U)){let z=new qv(G,q),H=$.get(U);return H||(H=[],$.set(U,H)),H.push(z),z}else return m_(Q,G,q)}})();var J90=class J{constructor($,X){this.width=$,this.height=X}with($=this.width,X=this.height){return $!==this.width||X!==this.height?new J($,X):this}static is($){return typeof $=="object"&&typeof $.height=="number"&&typeof $.width=="number"}static lift($){return $ instanceof J?$:new J($.width,$.height)}static equals($,X){return $===X?!0:!$||!X?!1:$.width===X.width&&$.height===X.height}};J90.None=new J90(0,0);function kW0(J){let $=J.getBoundingClientRect(),X=n$(J);return{left:$.left+X.scrollX,top:$.top+X.scrollY,width:$.width,height:$.height}}var oA1=new class{constructor(){this.mutationObservers=new Map}observe(J,$,X){let Y=this.mutationObservers.get(J);Y||(Y=new Map,this.mutationObservers.set(J,Y));let Z=KW0(X),Q=Y.get(Z);if(Q)Q.users+=1;else{let G=new x0,q=new MutationObserver((z)=>G.fire(z));q.observe(J,X);let U=Q={users:1,observer:q,onDidMutate:G.event};$.add(R5(()=>{U.users-=1,U.users===0&&(G.dispose(),q.disconnect(),Y?.delete(Z),Y?.size===0&&this.mutationObservers.delete(J))})),Y.set(Z,Q)}return Q.onDidMutate}},M7={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:b_?"webkitAnimationStart":"animationstart",ANIMATION_END:b_?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:b_?"webkitAnimationIteration":"animationiteration"},EW0=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function X40(J,$,X,...Y){let Z=EW0.exec($);if(!Z)throw Error("Bad use of emmet");let Q=Z[1]||"div",G;return J!=="http://www.w3.org/1999/xhtml"?G=document.createElementNS(J,Q):G=document.createElement(Q),Z[3]&&(G.id=Z[3]),Z[4]&&(G.className=Z[4].replace(/\./g," ").trim()),X&&Object.entries(X).forEach(([q,U])=>{typeof U>"u"||(/^on\w+$/.test(q)?G[q]=U:q==="selected"?U&&G.setAttribute(q,"true"):G.setAttribute(q,U))}),G.append(...Y),G}function IW0(J,$,...X){return X40("http://www.w3.org/1999/xhtml",J,$,...X)}IW0.SVG=function(J,$,...X){return X40("http://www.w3.org/2000/svg",J,$,...X)};var yW0=class{constructor(J){this.domNode=J,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(J){let $=B4(J);this._maxWidth!==$&&(this._maxWidth=$,this.domNode.style.maxWidth=this._maxWidth)}setWidth(J){let $=B4(J);this._width!==$&&(this._width=$,this.domNode.style.width=this._width)}setHeight(J){let $=B4(J);this._height!==$&&(this._height=$,this.domNode.style.height=this._height)}setTop(J){let $=B4(J);this._top!==$&&(this._top=$,this.domNode.style.top=this._top)}setLeft(J){let $=B4(J);this._left!==$&&(this._left=$,this.domNode.style.left=this._left)}setBottom(J){let $=B4(J);this._bottom!==$&&(this._bottom=$,this.domNode.style.bottom=this._bottom)}setRight(J){let $=B4(J);this._right!==$&&(this._right=$,this.domNode.style.right=this._right)}setPaddingTop(J){let $=B4(J);this._paddingTop!==$&&(this._paddingTop=$,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(J){let $=B4(J);this._paddingLeft!==$&&(this._paddingLeft=$,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(J){let $=B4(J);this._paddingBottom!==$&&(this._paddingBottom=$,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(J){let $=B4(J);this._paddingRight!==$&&(this._paddingRight=$,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(J){this._fontFamily!==J&&(this._fontFamily=J,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(J){this._fontWeight!==J&&(this._fontWeight=J,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(J){let $=B4(J);this._fontSize!==$&&(this._fontSize=$,this.domNode.style.fontSize=this._fontSize)}setFontStyle(J){this._fontStyle!==J&&(this._fontStyle=J,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(J){this._fontFeatureSettings!==J&&(this._fontFeatureSettings=J,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(J){this._fontVariationSettings!==J&&(this._fontVariationSettings=J,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(J){this._textDecoration!==J&&(this._textDecoration=J,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(J){let $=B4(J);this._lineHeight!==$&&(this._lineHeight=$,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(J){let $=B4(J);this._letterSpacing!==$&&(this._letterSpacing=$,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(J){this._className!==J&&(this._className=J,this.domNode.className=this._className)}toggleClassName(J,$){this.domNode.classList.toggle(J,$),this._className=this.domNode.className}setDisplay(J){this._display!==J&&(this._display=J,this.domNode.style.display=this._display)}setPosition(J){this._position!==J&&(this._position=J,this.domNode.style.position=this._position)}setVisibility(J){this._visibility!==J&&(this._visibility=J,this.domNode.style.visibility=this._visibility)}setColor(J){this._color!==J&&(this._color=J,this.domNode.style.color=this._color)}setBackgroundColor(J){this._backgroundColor!==J&&(this._backgroundColor=J,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(J){this._layerHint!==J&&(this._layerHint=J,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(J){this._boxShadow!==J&&(this._boxShadow=J,this.domNode.style.boxShadow=J)}setContain(J){this._contain!==J&&(this._contain=J,this.domNode.style.contain=this._contain)}setAttribute(J,$){this.domNode.setAttribute(J,$)}removeAttribute(J){this.domNode.removeAttribute(J)}appendChild(J){this.domNode.appendChild(J.domNode)}removeChild(J){this.domNode.removeChild(J.domNode)}};function B4(J){return typeof J=="number"?`${J}px`:J}function vF(J){return new yW0(J)}var Y40=class{constructor(){this._hooks=new n2,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(J,$){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let X=this._onStopCallback;this._onStopCallback=null,J&&X&&X($)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(J,$,X,Y,Z){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=Y,this._onStopCallback=Z;let Q=J;try{J.setPointerCapture($),this._hooks.add(R5(()=>{try{J.releasePointerCapture($)}catch{}}))}catch{Q=n$(J)}this._hooks.add(x1(Q,M7.POINTER_MOVE,(G)=>{if(G.buttons!==X){this.stopMonitoring(!0);return}G.preventDefault(),this._pointerMoveCallback(G)})),this._hooks.add(x1(Q,M7.POINTER_UP,(G)=>this.stopMonitoring(!0)))}};function xW0(J,$,X){let Y=null,Z=null;if(typeof X.value=="function"?(Y="value",Z=X.value,Z.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof X.get=="function"&&(Y="get",Z=X.get),!Z)throw Error("not supported");let Q=`$memoize$${$}`;X[Y]=function(...G){return this.hasOwnProperty(Q)||Object.defineProperty(this,Q,{configurable:!1,enumerable:!1,writable:!1,value:Z.apply(this,G)}),this[Q]}}var BY;((J)=>(J.Tap="-xterm-gesturetap",J.Change="-xterm-gesturechange",J.Start="-xterm-gesturestart",J.End="-xterm-gesturesend",J.Contextmenu="-xterm-gesturecontextmenu"))(BY||={});var IF=class J extends a1{constructor(){super();this.dispatched=!1,this.targets=new m70,this.ignoreTargets=new m70,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(a7.runAndSubscribe(OW0,({window:$,disposables:X})=>{X.add(x1($.document,"touchstart",(Y)=>this.onTouchStart(Y),{passive:!1})),X.add(x1($.document,"touchend",(Y)=>this.onTouchEnd($,Y))),X.add(x1($.document,"touchmove",(Y)=>this.onTouchMove(Y),{passive:!1}))},{window:t4,disposables:this._store}))}static addTarget($){if(!J.isTouchDevice())return a1.None;J.INSTANCE||(J.INSTANCE=p70(new J));let X=J.INSTANCE.targets.push($);return R5(X)}static ignoreTarget($){if(!J.isTouchDevice())return a1.None;J.INSTANCE||(J.INSTANCE=p70(new J));let X=J.INSTANCE.ignoreTargets.push($);return R5(X)}static isTouchDevice(){return"ontouchstart"in t4||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart($){let X=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let Y=0,Z=$.targetTouches.length;Y<Z;Y++){let Q=$.targetTouches.item(Y);this.activeTouches[Q.identifier]={id:Q.identifier,initialTarget:Q.target,initialTimeStamp:X,initialPageX:Q.pageX,initialPageY:Q.pageY,rollingTimestamps:[X],rollingPageX:[Q.pageX],rollingPageY:[Q.pageY]};let G=this.newGestureEvent(BY.Start,Q.target);G.pageX=Q.pageX,G.pageY=Q.pageY,this.dispatchEvent(G)}this.dispatched&&($.preventDefault(),$.stopPropagation(),this.dispatched=!1)}onTouchEnd($,X){let Y=Date.now(),Z=Object.keys(this.activeTouches).length;for(let Q=0,G=X.changedTouches.length;Q<G;Q++){let q=X.changedTouches.item(Q);if(!this.activeTouches.hasOwnProperty(String(q.identifier))){console.warn("move of an UNKNOWN touch",q);continue}let U=this.activeTouches[q.identifier],z=Date.now()-U.initialTimeStamp;if(z<J.HOLD_DELAY&&Math.abs(U.initialPageX-i4(U.rollingPageX))<30&&Math.abs(U.initialPageY-i4(U.rollingPageY))<30){let H=this.newGestureEvent(BY.Tap,U.initialTarget);H.pageX=i4(U.rollingPageX),H.pageY=i4(U.rollingPageY),this.dispatchEvent(H)}else if(z>=J.HOLD_DELAY&&Math.abs(U.initialPageX-i4(U.rollingPageX))<30&&Math.abs(U.initialPageY-i4(U.rollingPageY))<30){let H=this.newGestureEvent(BY.Contextmenu,U.initialTarget);H.pageX=i4(U.rollingPageX),H.pageY=i4(U.rollingPageY),this.dispatchEvent(H)}else if(Z===1){let H=i4(U.rollingPageX),j=i4(U.rollingPageY),V=i4(U.rollingTimestamps)-U.rollingTimestamps[0],W=H-U.rollingPageX[0],B=j-U.rollingPageY[0],K=[...this.targets].filter((P)=>U.initialTarget instanceof Node&&P.contains(U.initialTarget));this.inertia($,K,Y,Math.abs(W)/V,W>0?1:-1,H,Math.abs(B)/V,B>0?1:-1,j)}this.dispatchEvent(this.newGestureEvent(BY.End,U.initialTarget)),delete this.activeTouches[q.identifier]}this.dispatched&&(X.preventDefault(),X.stopPropagation(),this.dispatched=!1)}newGestureEvent($,X){let Y=document.createEvent("CustomEvent");return Y.initEvent($,!1,!0),Y.initialTarget=X,Y.tapCount=0,Y}dispatchEvent($){if($.type===BY.Tap){let X=new Date().getTime(),Y=0;X-this._lastSetTapCountTime>J.CLEAR_TAP_COUNT_TIME?Y=1:Y=2,this._lastSetTapCountTime=X,$.tapCount=Y}else($.type===BY.Change||$.type===BY.Contextmenu)&&(this._lastSetTapCountTime=0);if($.initialTarget instanceof Node){for(let Y of this.ignoreTargets)if(Y.contains($.initialTarget))return;let X=[];for(let Y of this.targets)if(Y.contains($.initialTarget)){let Z=0,Q=$.initialTarget;for(;Q&&Q!==Y;)Z++,Q=Q.parentElement;X.push([Z,Y])}X.sort((Y,Z)=>Y[0]-Z[0]);for(let[Y,Z]of X)Z.dispatchEvent($),this.dispatched=!0}}inertia($,X,Y,Z,Q,G,q,U,z){this.handle=m_($,()=>{let H=Date.now(),j=H-Y,V=0,W=0,B=!0;Z+=J.SCROLL_FRICTION*j,q+=J.SCROLL_FRICTION*j,Z>0&&(B=!1,V=Q*Z*j),q>0&&(B=!1,W=U*q*j);let K=this.newGestureEvent(BY.Change);K.translationX=V,K.translationY=W,X.forEach((P)=>P.dispatchEvent(K)),B||this.inertia($,X,H,Z,Q,G+V,q,U,z+W)})}onTouchMove($){let X=Date.now();for(let Y=0,Z=$.changedTouches.length;Y<Z;Y++){let Q=$.changedTouches.item(Y);if(!this.activeTouches.hasOwnProperty(String(Q.identifier))){console.warn("end of an UNKNOWN touch",Q);continue}let G=this.activeTouches[Q.identifier],q=this.newGestureEvent(BY.Change,G.initialTarget);q.translationX=Q.pageX-i4(G.rollingPageX),q.translationY=Q.pageY-i4(G.rollingPageY),q.pageX=Q.pageX,q.pageY=Q.pageY,this.dispatchEvent(q),G.rollingPageX.length>3&&(G.rollingPageX.shift(),G.rollingPageY.shift(),G.rollingTimestamps.shift()),G.rollingPageX.push(Q.pageX),G.rollingPageY.push(Q.pageY),G.rollingTimestamps.push(X)}this.dispatched&&($.preventDefault(),$.stopPropagation(),this.dispatched=!1)}};IF.SCROLL_FRICTION=-0.005,IF.HOLD_DELAY=700,IF.CLEAR_TAP_COUNT_TIME=400,Z8([xW0],IF,"isTouchDevice",1);var bW0=IF,Jh=class extends a1{onclick(J,$){this._register(x1(J,M7.CLICK,(X)=>$(new EF(n$(J),X))))}onmousedown(J,$){this._register(x1(J,M7.MOUSE_DOWN,(X)=>$(new EF(n$(J),X))))}onmouseover(J,$){this._register(x1(J,M7.MOUSE_OVER,(X)=>$(new EF(n$(J),X))))}onmouseleave(J,$){this._register(x1(J,M7.MOUSE_LEAVE,(X)=>$(new EF(n$(J),X))))}onkeydown(J,$){this._register(x1(J,M7.KEY_DOWN,(X)=>$(new kv(X))))}onkeyup(J,$){this._register(x1(J,M7.KEY_UP,(X)=>$(new kv(X))))}oninput(J,$){this._register(x1(J,M7.INPUT,$))}onblur(J,$){this._register(x1(J,M7.BLUR,$))}onfocus(J,$){this._register(x1(J,M7.FOCUS,$))}onchange(J,$){this._register(x1(J,M7.CHANGE,$))}ignoreGesture(J){return bW0.ignoreTarget(J)}},$90=11,SW0=class extends Jh{constructor(J){super(),this._onActivate=J.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=J.bgWidth+"px",this.bgDomNode.style.height=J.bgHeight+"px",typeof J.top<"u"&&(this.bgDomNode.style.top="0px"),typeof J.left<"u"&&(this.bgDomNode.style.left="0px"),typeof J.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof J.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=J.className,this.domNode.style.position="absolute",this.domNode.style.width=$90+"px",this.domNode.style.height=$90+"px",typeof J.top<"u"&&(this.domNode.style.top=J.top+"px"),typeof J.left<"u"&&(this.domNode.style.left=J.left+"px"),typeof J.bottom<"u"&&(this.domNode.style.bottom=J.bottom+"px"),typeof J.right<"u"&&(this.domNode.style.right=J.right+"px"),this._pointerMoveMonitor=this._register(new Y40),this._register(e70(this.bgDomNode,M7.POINTER_DOWN,($)=>this._arrowPointerDown($))),this._register(e70(this.domNode,M7.POINTER_DOWN,($)=>this._arrowPointerDown($))),this._pointerdownRepeatTimer=this._register(new LW0),this._pointerdownScheduleRepeatTimer=this._register(new tv)}_arrowPointerDown(J){if(!J.target||!(J.target instanceof Element))return;let $=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664,n$(J))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet($,200),this._pointerMoveMonitor.startMonitoring(J.target,J.pointerId,J.buttons,(X)=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),J.preventDefault()}},CW0=class J{constructor($,X,Y,Z,Q,G,q){this._forceIntegerValues=$,this._scrollStateBrand=void 0,this._forceIntegerValues&&(X=X|0,Y=Y|0,Z=Z|0,Q=Q|0,G=G|0,q=q|0),this.rawScrollLeft=Z,this.rawScrollTop=q,X<0&&(X=0),Z+X>Y&&(Z=Y-X),Z<0&&(Z=0),Q<0&&(Q=0),q+Q>G&&(q=G-Q),q<0&&(q=0),this.width=X,this.scrollWidth=Y,this.scrollLeft=Z,this.height=Q,this.scrollHeight=G,this.scrollTop=q}equals($){return this.rawScrollLeft===$.rawScrollLeft&&this.rawScrollTop===$.rawScrollTop&&this.width===$.width&&this.scrollWidth===$.scrollWidth&&this.scrollLeft===$.scrollLeft&&this.height===$.height&&this.scrollHeight===$.scrollHeight&&this.scrollTop===$.scrollTop}withScrollDimensions($,X){return new J(this._forceIntegerValues,typeof $.width<"u"?$.width:this.width,typeof $.scrollWidth<"u"?$.scrollWidth:this.scrollWidth,X?this.rawScrollLeft:this.scrollLeft,typeof $.height<"u"?$.height:this.height,typeof $.scrollHeight<"u"?$.scrollHeight:this.scrollHeight,X?this.rawScrollTop:this.scrollTop)}withScrollPosition($){return new J(this._forceIntegerValues,this.width,this.scrollWidth,typeof $.scrollLeft<"u"?$.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof $.scrollTop<"u"?$.scrollTop:this.rawScrollTop)}createScrollEvent($,X){let Y=this.width!==$.width,Z=this.scrollWidth!==$.scrollWidth,Q=this.scrollLeft!==$.scrollLeft,G=this.height!==$.height,q=this.scrollHeight!==$.scrollHeight,U=this.scrollTop!==$.scrollTop;return{inSmoothScrolling:X,oldWidth:$.width,oldScrollWidth:$.scrollWidth,oldScrollLeft:$.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:$.height,oldScrollHeight:$.scrollHeight,oldScrollTop:$.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:Y,scrollWidthChanged:Z,scrollLeftChanged:Q,heightChanged:G,scrollHeightChanged:q,scrollTopChanged:U}}},vW0=class extends a1{constructor(J){super();this._scrollableBrand=void 0,this._onScroll=this._register(new x0),this.onScroll=this._onScroll.event,this._smoothScrollDuration=J.smoothScrollDuration,this._scheduleAtNextAnimationFrame=J.scheduleAtNextAnimationFrame,this._state=new CW0(J.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(J){this._smoothScrollDuration=J}validateScrollPosition(J){return this._state.withScrollPosition(J)}getScrollDimensions(){return this._state}setScrollDimensions(J,$){let X=this._state.withScrollDimensions(J,$);this._setState(X,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(J){let $=this._state.withScrollPosition(J);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState($,!1)}setScrollPositionSmooth(J,$){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(J);if(this._smoothScrolling){J={scrollLeft:typeof J.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:J.scrollLeft,scrollTop:typeof J.scrollTop>"u"?this._smoothScrolling.to.scrollTop:J.scrollTop};let X=this._state.withScrollPosition(J);if(this._smoothScrolling.to.scrollLeft===X.scrollLeft&&this._smoothScrolling.to.scrollTop===X.scrollTop)return;let Y;$?Y=new Y90(this._smoothScrolling.from,X,this._smoothScrolling.startTime,this._smoothScrolling.duration):Y=this._smoothScrolling.combine(this._state,X,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=Y}else{let X=this._state.withScrollPosition(J);this._smoothScrolling=Y90.start(this._state,X,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let J=this._smoothScrolling.tick(),$=this._state.withScrollPosition(J);if(this._setState($,!0),!!this._smoothScrolling){if(J.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(J,$){let X=this._state;X.equals(J)||(this._state=J,this._onScroll.fire(this._state.createScrollEvent(X,$)))}},X90=class{constructor(J,$,X){this.scrollLeft=J,this.scrollTop=$,this.isDone=X}};function Uv(J,$){let X=$-J;return function(Y){return J+X*gW0(Y)}}function hW0(J,$,X){return function(Y){return Y<X?J(Y/X):$((Y-X)/(1-X))}}var Y90=class J{constructor($,X,Y,Z){this.from=$,this.to=X,this.duration=Z,this.startTime=Y,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation($,X,Y){if(Math.abs($-X)>2.5*Y){let Z,Q;return $<X?(Z=$+0.75*Y,Q=X-0.75*Y):(Z=$-0.75*Y,Q=X+0.75*Y),hW0(Uv($,Z),Uv(Q,X),0.33)}return Uv($,X)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions($){this.to=$.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick($){let X=($-this.startTime)/this.duration;if(X<1){let Y=this.scrollLeft(X),Z=this.scrollTop(X);return new X90(Y,Z,!1)}return new X90(this.to.scrollLeft,this.to.scrollTop,!0)}combine($,X,Y){return J.start($,X,Y)}static start($,X,Y){Y=Y+10;let Z=Date.now()-10;return new J($,X,Z,Y)}};function fW0(J){return Math.pow(J,3)}function gW0(J){return 1-fW0(1-J)}var pW0=class extends a1{constructor(J,$,X){super(),this._visibility=J,this._visibleClassName=$,this._invisibleClassName=X,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new tv)}setVisibility(J){this._visibility!==J&&(this._visibility=J,this._updateShouldBeVisible())}setShouldBeVisible(J){this._rawShouldBeVisible=J,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let J=this._applyVisibilitySetting();this._shouldBeVisible!==J&&(this._shouldBeVisible=J,this.ensureVisibility())}setIsNeeded(J){this._isNeeded!==J&&(this._isNeeded=J,this.ensureVisibility())}setDomNode(J){this._domNode=J,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(J){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(J?" fade":"")))}},mW0=140,Z40=class extends Jh{constructor(J){super(),this._lazyRender=J.lazyRender,this._host=J.host,this._scrollable=J.scrollable,this._scrollByPage=J.scrollByPage,this._scrollbarState=J.scrollbarState,this._visibilityController=this._register(new pW0(J.visibility,"visible scrollbar "+J.extraScrollbarClassName,"invisible scrollbar "+J.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Y40),this._shouldRender=!0,this.domNode=vF(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(x1(this.domNode.domNode,M7.POINTER_DOWN,($)=>this._domNodePointerDown($)))}_createArrow(J){let $=this._register(new SW0(J));this.domNode.domNode.appendChild($.bgDomNode),this.domNode.domNode.appendChild($.domNode)}_createSlider(J,$,X,Y){this.slider=vF(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(J),this.slider.setLeft($),typeof X=="number"&&this.slider.setWidth(X),typeof Y=="number"&&this.slider.setHeight(Y),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(x1(this.slider.domNode,M7.POINTER_DOWN,(Z)=>{Z.button===0&&(Z.preventDefault(),this._sliderPointerDown(Z))})),this.onclick(this.slider.domNode,(Z)=>{Z.leftButton&&Z.stopPropagation()})}_onElementSize(J){return this._scrollbarState.setVisibleSize(J)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(J){return this._scrollbarState.setScrollSize(J)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(J){return this._scrollbarState.setScrollPosition(J)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(J){J.target===this.domNode.domNode&&this._onPointerDown(J)}delegatePointerDown(J){let $=this.domNode.domNode.getClientRects()[0].top,X=$+this._scrollbarState.getSliderPosition(),Y=$+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),Z=this._sliderPointerPosition(J);X<=Z&&Z<=Y?J.button===0&&(J.preventDefault(),this._sliderPointerDown(J)):this._onPointerDown(J)}_onPointerDown(J){let $,X;if(J.target===this.domNode.domNode&&typeof J.offsetX=="number"&&typeof J.offsetY=="number")$=J.offsetX,X=J.offsetY;else{let Z=kW0(this.domNode.domNode);$=J.pageX-Z.left,X=J.pageY-Z.top}let Y=this._pointerDownRelativePosition($,X);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(Y):this._scrollbarState.getDesiredScrollPositionFromOffset(Y)),J.button===0&&(J.preventDefault(),this._sliderPointerDown(J))}_sliderPointerDown(J){if(!J.target||!(J.target instanceof Element))return;let $=this._sliderPointerPosition(J),X=this._sliderOrthogonalPointerPosition(J),Y=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(J.target,J.pointerId,J.buttons,(Z)=>{let Q=this._sliderOrthogonalPointerPosition(Z),G=Math.abs(Q-X);if(t90&&G>mW0){this._setDesiredScrollPositionNow(Y.getScrollPosition());return}let q=this._sliderPointerPosition(Z)-$;this._setDesiredScrollPositionNow(Y.getDesiredScrollPositionFromDelta(q))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(J){let $={};this.writeScrollPosition($,J),this._scrollable.setScrollPositionNow($)}updateScrollbarSize(J){this._updateScrollbarSize(J),this._scrollbarState.setScrollbarSize(J),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Q40=class J{constructor($,X,Y,Z,Q,G){this._scrollbarSize=Math.round(X),this._oppositeScrollbarSize=Math.round(Y),this._arrowSize=Math.round($),this._visibleSize=Z,this._scrollSize=Q,this._scrollPosition=G,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new J(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize($){let X=Math.round($);return this._visibleSize!==X?(this._visibleSize=X,this._refreshComputedValues(),!0):!1}setScrollSize($){let X=Math.round($);return this._scrollSize!==X?(this._scrollSize=X,this._refreshComputedValues(),!0):!1}setScrollPosition($){let X=Math.round($);return this._scrollPosition!==X?(this._scrollPosition=X,this._refreshComputedValues(),!0):!1}setScrollbarSize($){this._scrollbarSize=Math.round($)}setOppositeScrollbarSize($){this._oppositeScrollbarSize=Math.round($)}static _computeValues($,X,Y,Z,Q){let G=Math.max(0,Y-$),q=Math.max(0,G-2*X),U=Z>0&&Z>Y;if(!U)return{computedAvailableSize:Math.round(G),computedIsNeeded:U,computedSliderSize:Math.round(q),computedSliderRatio:0,computedSliderPosition:0};let z=Math.round(Math.max(20,Math.floor(Y*q/Z))),H=(q-z)/(Z-Y),j=Q*H;return{computedAvailableSize:Math.round(G),computedIsNeeded:U,computedSliderSize:Math.round(z),computedSliderRatio:H,computedSliderPosition:Math.round(j)}}_refreshComputedValues(){let $=J._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=$.computedAvailableSize,this._computedIsNeeded=$.computedIsNeeded,this._computedSliderSize=$.computedSliderSize,this._computedSliderRatio=$.computedSliderRatio,this._computedSliderPosition=$.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset($){if(!this._computedIsNeeded)return 0;let X=$-this._arrowSize-this._computedSliderSize/2;return Math.round(X/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged($){if(!this._computedIsNeeded)return 0;let X=$-this._arrowSize,Y=this._scrollPosition;return X<this._computedSliderPosition?Y-=this._visibleSize:Y+=this._visibleSize,Y}getDesiredScrollPositionFromDelta($){if(!this._computedIsNeeded)return 0;let X=this._computedSliderPosition+$;return Math.round(X/this._computedSliderRatio)}},uW0=class extends Z40{constructor(J,$,X){let Y=J.getScrollDimensions(),Z=J.getCurrentScrollPosition();if(super({lazyRender:$.lazyRender,host:X,scrollbarState:new Q40($.horizontalHasArrows?$.arrowSize:0,$.horizontal===2?0:$.horizontalScrollbarSize,$.vertical===2?0:$.verticalScrollbarSize,Y.width,Y.scrollWidth,Z.scrollLeft),visibility:$.horizontal,extraScrollbarClassName:"horizontal",scrollable:J,scrollByPage:$.scrollByPage}),$.horizontalHasArrows)throw Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor(($.horizontalScrollbarSize-$.horizontalSliderSize)/2),0,void 0,$.horizontalSliderSize)}_updateSlider(J,$){this.slider.setWidth(J),this.slider.setLeft($)}_renderDomNode(J,$){this.domNode.setWidth(J),this.domNode.setHeight($),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(J){return this._shouldRender=this._onElementScrollSize(J.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(J.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(J.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(J,$){return J}_sliderPointerPosition(J){return J.pageX}_sliderOrthogonalPointerPosition(J){return J.pageY}_updateScrollbarSize(J){this.slider.setHeight(J)}writeScrollPosition(J,$){J.scrollLeft=$}updateOptions(J){this.updateScrollbarSize(J.horizontal===2?0:J.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(J.vertical===2?0:J.verticalScrollbarSize),this._visibilityController.setVisibility(J.horizontal),this._scrollByPage=J.scrollByPage}},cW0=class extends Z40{constructor(J,$,X){let Y=J.getScrollDimensions(),Z=J.getCurrentScrollPosition();if(super({lazyRender:$.lazyRender,host:X,scrollbarState:new Q40($.verticalHasArrows?$.arrowSize:0,$.vertical===2?0:$.verticalScrollbarSize,0,Y.height,Y.scrollHeight,Z.scrollTop),visibility:$.vertical,extraScrollbarClassName:"vertical",scrollable:J,scrollByPage:$.scrollByPage}),$.verticalHasArrows)throw Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor(($.verticalScrollbarSize-$.verticalSliderSize)/2),$.verticalSliderSize,void 0)}_updateSlider(J,$){this.slider.setHeight(J),this.slider.setTop($)}_renderDomNode(J,$){this.domNode.setWidth($),this.domNode.setHeight(J),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(J){return this._shouldRender=this._onElementScrollSize(J.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(J.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(J.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(J,$){return $}_sliderPointerPosition(J){return J.pageY}_sliderOrthogonalPointerPosition(J){return J.pageX}_updateScrollbarSize(J){this.slider.setWidth(J)}writeScrollPosition(J,$){J.scrollTop=$}updateOptions(J){this.updateScrollbarSize(J.vertical===2?0:J.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(J.vertical),this._scrollByPage=J.scrollByPage}},lW0=500,Z90=50,Q90=!0,dW0=class{constructor(J,$,X){this.timestamp=J,this.deltaX=$,this.deltaY=X,this.score=0}},Ev=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let $=1,X=0,Y=1,Z=this._rear;do{let Q=Z===this._front?$:Math.pow(2,-Y);if($-=Q,X+=this._memory[Z].score*Q,Z===this._front)break;Z=(this._capacity+Z-1)%this._capacity,Y++}while(!0);return X<=0.5}acceptStandardWheelEvent($){if(nv){let X=n$($.browserEvent),Y=fV0(X);this.accept(Date.now(),$.deltaX*Y,$.deltaY*Y)}else this.accept(Date.now(),$.deltaX,$.deltaY)}accept($,X,Y){let Z=null,Q=new dW0($,X,Y);this._front===-1&&this._rear===-1?(this._memory[0]=Q,this._front=0,this._rear=0):(Z=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=Q),Q.score=this._computeScore(Q,Z)}_computeScore($,X){if(Math.abs($.deltaX)>0&&Math.abs($.deltaY)>0)return 1;let Y=0.5;if((!this._isAlmostInt($.deltaX)||!this._isAlmostInt($.deltaY))&&(Y+=0.25),X){let Z=Math.abs($.deltaX),Q=Math.abs($.deltaY),G=Math.abs(X.deltaX),q=Math.abs(X.deltaY),U=Math.max(Math.min(Z,G),1),z=Math.max(Math.min(Q,q),1),H=Math.max(Z,G),j=Math.max(Q,q);H%U===0&&j%z===0&&(Y-=0.5)}return Math.min(Math.max(Y,0),1)}_isAlmostInt($){return Math.abs(Math.round($)-$)<0.01}};Ev.INSTANCE=new Ev;var sW0=Ev,aW0=class extends Jh{constructor(J,$,X){super();this._onScroll=this._register(new x0),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new x0),this.onWillScroll=this._onWillScroll.event,this._options=iW0($),this._scrollable=X,this._register(this._scrollable.onScroll((Z)=>{this._onWillScroll.fire(Z),this._onDidScroll(Z),this._onScroll.fire(Z)}));let Y={onMouseWheel:(Z)=>this._onMouseWheel(Z),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new cW0(this._scrollable,this._options,Y)),this._horizontalScrollbar=this._register(new uW0(this._scrollable,this._options,Y)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(J),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=vF(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=vF(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=vF(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(Z)=>this._onMouseOver(Z)),this.onmouseleave(this._listenOnDomNode,(Z)=>this._onMouseLeave(Z)),this._hideTimeout=this._register(new tv),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Mq(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(J){this._verticalScrollbar.delegatePointerDown(J)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(J){this._scrollable.setScrollDimensions(J,!1)}updateClassName(J){this._options.className=J,FY&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(J){typeof J.handleMouseWheel<"u"&&(this._options.handleMouseWheel=J.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof J.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=J.mouseWheelScrollSensitivity),typeof J.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=J.fastScrollSensitivity),typeof J.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=J.scrollPredominantAxis),typeof J.horizontal<"u"&&(this._options.horizontal=J.horizontal),typeof J.vertical<"u"&&(this._options.vertical=J.vertical),typeof J.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=J.horizontalScrollbarSize),typeof J.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=J.verticalScrollbarSize),typeof J.scrollByPage<"u"&&(this._options.scrollByPage=J.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(J){this._revealOnScroll=J}delegateScrollFromMouseWheelEvent(J){this._onMouseWheel(new r70(J))}_setListeningToMouseWheel(J){if(this._mouseWheelToDispose.length>0!==J&&(this._mouseWheelToDispose=Mq(this._mouseWheelToDispose),J)){let $=(X)=>{this._onMouseWheel(new r70(X))};this._mouseWheelToDispose.push(x1(this._listenOnDomNode,M7.MOUSE_WHEEL,$,{passive:!1}))}}_onMouseWheel(J){if(J.browserEvent?.defaultPrevented)return;let $=sW0.INSTANCE;Q90&&$.acceptStandardWheelEvent(J);let X=!1;if(J.deltaY||J.deltaX){let Z=J.deltaY*this._options.mouseWheelScrollSensitivity,Q=J.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&Q+Z===0?Q=Z=0:Math.abs(Z)>=Math.abs(Q)?Q=0:Z=0),this._options.flipAxes&&([Z,Q]=[Q,Z]);let G=!FY&&J.browserEvent&&J.browserEvent.shiftKey;(this._options.scrollYToX||G)&&!Q&&(Q=Z,Z=0),J.browserEvent&&J.browserEvent.altKey&&(Q=Q*this._options.fastScrollSensitivity,Z=Z*this._options.fastScrollSensitivity);let q=this._scrollable.getFutureScrollPosition(),U={};if(Z){let z=Z90*Z,H=q.scrollTop-(z<0?Math.floor(z):Math.ceil(z));this._verticalScrollbar.writeScrollPosition(U,H)}if(Q){let z=Z90*Q,H=q.scrollLeft-(z<0?Math.floor(z):Math.ceil(z));this._horizontalScrollbar.writeScrollPosition(U,H)}U=this._scrollable.validateScrollPosition(U),(q.scrollLeft!==U.scrollLeft||q.scrollTop!==U.scrollTop)&&(Q90&&this._options.mouseWheelSmoothScroll&&$.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(U):this._scrollable.setScrollPositionNow(U),X=!0)}let Y=X;!Y&&this._options.alwaysConsumeMouseWheel&&(Y=!0),!Y&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(Y=!0),Y&&(J.preventDefault(),J.stopPropagation())}_onDidScroll(J){this._shouldRender=this._horizontalScrollbar.onDidScroll(J)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(J)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let J=this._scrollable.getCurrentScrollPosition(),$=J.scrollTop>0,X=J.scrollLeft>0,Y=X?" left":"",Z=$?" top":"",Q=X||$?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${Y}`),this._topShadowDomNode.setClassName(`shadow${Z}`),this._topLeftShadowDomNode.setClassName(`shadow${Q}${Z}${Y}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(J){this._mouseIsOver=!1,this._hide()}_onMouseOver(J){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),lW0)}},rW0=class extends aW0{constructor(J,$,X){super(J,$,X)}setScrollPosition(J){J.reuseAnimation?this._scrollable.setScrollPositionSmooth(J,J.reuseAnimation):this._scrollable.setScrollPositionNow(J)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function iW0(J){let $={lazyRender:typeof J.lazyRender<"u"?J.lazyRender:!1,className:typeof J.className<"u"?J.className:"",useShadows:typeof J.useShadows<"u"?J.useShadows:!0,handleMouseWheel:typeof J.handleMouseWheel<"u"?J.handleMouseWheel:!0,flipAxes:typeof J.flipAxes<"u"?J.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof J.consumeMouseWheelIfScrollbarIsNeeded<"u"?J.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof J.alwaysConsumeMouseWheel<"u"?J.alwaysConsumeMouseWheel:!1,scrollYToX:typeof J.scrollYToX<"u"?J.scrollYToX:!1,mouseWheelScrollSensitivity:typeof J.mouseWheelScrollSensitivity<"u"?J.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof J.fastScrollSensitivity<"u"?J.fastScrollSensitivity:5,scrollPredominantAxis:typeof J.scrollPredominantAxis<"u"?J.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof J.mouseWheelSmoothScroll<"u"?J.mouseWheelSmoothScroll:!0,arrowSize:typeof J.arrowSize<"u"?J.arrowSize:11,listenOnDomNode:typeof J.listenOnDomNode<"u"?J.listenOnDomNode:null,horizontal:typeof J.horizontal<"u"?J.horizontal:1,horizontalScrollbarSize:typeof J.horizontalScrollbarSize<"u"?J.horizontalScrollbarSize:10,horizontalSliderSize:typeof J.horizontalSliderSize<"u"?J.horizontalSliderSize:0,horizontalHasArrows:typeof J.horizontalHasArrows<"u"?J.horizontalHasArrows:!1,vertical:typeof J.vertical<"u"?J.vertical:1,verticalScrollbarSize:typeof J.verticalScrollbarSize<"u"?J.verticalScrollbarSize:10,verticalHasArrows:typeof J.verticalHasArrows<"u"?J.verticalHasArrows:!1,verticalSliderSize:typeof J.verticalSliderSize<"u"?J.verticalSliderSize:0,scrollByPage:typeof J.scrollByPage<"u"?J.scrollByPage:!1};return $.horizontalSliderSize=typeof J.horizontalSliderSize<"u"?J.horizontalSliderSize:$.horizontalScrollbarSize,$.verticalSliderSize=typeof J.verticalSliderSize<"u"?J.verticalSliderSize:$.verticalScrollbarSize,FY&&($.className+=" mac"),$}var Iv=class extends a1{constructor(J,$,X,Y,Z,Q,G,q){super();this._bufferService=X,this._optionsService=G,this._renderService=q,this._onRequestScrollLines=this._register(new x0),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let U=this._register(new vW0({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:(z)=>m_(Y.window,z)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{U.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new rW0($,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},U)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(Z.onProtocolChange((z)=>{this._scrollableElement.updateOptions({handleMouseWheel:!(z&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(a7.runAndSubscribe(Q.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=Q.colors.background.css})),J.appendChild(this._scrollableElement.getDomNode()),this._register(R5(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=Y.mainDocument.createElement("style"),$.appendChild(this._styleElement),this._register(R5(()=>this._styleElement.remove())),this._register(a7.runAndSubscribe(Q.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${Q.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${Q.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${Q.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll((z)=>this._handleScroll(z)))}scrollLines(J){let $=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:$.scrollTop+J*this._renderService.dimensions.css.cell.height})}scrollToLine(J,$){$&&(this._latestYDisp=J),this._scrollableElement.setScrollPosition({reuseAnimation:!$,scrollTop:J*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(J){J!==void 0&&(this._latestYDisp=J),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(J=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,J!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:J*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(J){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let $=Math.round(J.scrollTop/this._renderService.dimensions.css.cell.height),X=$-this._bufferService.buffer.ydisp;X!==0&&(this._latestYDisp=$,this._onRequestScrollLines.fire(X)),this._isHandlingScroll=!1}};Iv=Z8([r0(2,f9),r0(3,nZ),r0(4,g90),r0(5,SH),r0(6,g9),r0(7,oZ)],Iv);var yv=class extends a1{constructor(J,$,X,Y,Z){super();this._screenElement=J,this._bufferService=$,this._coreBrowserService=X,this._decorationService=Y,this._renderService=Z,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved((Q)=>this._removeDecoration(Q))),this._register(R5(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let J of this._decorationService.decorations)this._renderDecoration(J);this._dimensionsChanged=!1}_renderDecoration(J){this._refreshStyle(J),this._dimensionsChanged&&this._refreshXPosition(J)}_createElement(J){let $=this._coreBrowserService.mainDocument.createElement("div");$.classList.add("xterm-decoration"),$.classList.toggle("xterm-decoration-top-layer",J?.options?.layer==="top"),$.style.width=`${Math.round((J.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,$.style.height=`${(J.options.height||1)*this._renderService.dimensions.css.cell.height}px`,$.style.top=`${(J.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,$.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let X=J.options.x??0;return X&&X>this._bufferService.cols&&($.style.display="none"),this._refreshXPosition(J,$),$}_refreshStyle(J){let $=J.marker.line-this._bufferService.buffers.active.ydisp;if($<0||$>=this._bufferService.rows)J.element&&(J.element.style.display="none",J.onRenderEmitter.fire(J.element));else{let X=this._decorationElements.get(J);X||(X=this._createElement(J),J.element=X,this._decorationElements.set(J,X),this._container.appendChild(X),J.onDispose(()=>{this._decorationElements.delete(J),X.remove()})),X.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(X.style.width=`${Math.round((J.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,X.style.height=`${(J.options.height||1)*this._renderService.dimensions.css.cell.height}px`,X.style.top=`${$*this._renderService.dimensions.css.cell.height}px`,X.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),J.onRenderEmitter.fire(X)}}_refreshXPosition(J,$=J.element){if(!$)return;let X=J.options.x??0;(J.options.anchor||"left")==="right"?$.style.right=X?`${X*this._renderService.dimensions.css.cell.width}px`:"":$.style.left=X?`${X*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(J){this._decorationElements.get(J)?.remove(),this._decorationElements.delete(J),J.dispose()}};yv=Z8([r0(1,f9),r0(2,nZ),r0(3,uF),r0(4,oZ)],yv);var nW0=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(J){if(J.options.overviewRulerOptions){for(let $ of this._zones)if($.color===J.options.overviewRulerOptions.color&&$.position===J.options.overviewRulerOptions.position){if(this._lineIntersectsZone($,J.marker.line))return;if(this._lineAdjacentToZone($,J.marker.line,J.options.overviewRulerOptions.position)){this._addLineToZone($,J.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=J.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=J.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=J.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=J.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:J.options.overviewRulerOptions.color,position:J.options.overviewRulerOptions.position,startBufferLine:J.marker.line,endBufferLine:J.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(J){this._linePadding=J}_lineIntersectsZone(J,$){return $>=J.startBufferLine&&$<=J.endBufferLine}_lineAdjacentToZone(J,$,X){return $>=J.startBufferLine-this._linePadding[X||"full"]&&$<=J.endBufferLine+this._linePadding[X||"full"]}_addLineToZone(J,$){J.startBufferLine=Math.min(J.startBufferLine,$),J.endBufferLine=Math.max(J.endBufferLine,$)}},VY={full:0,left:0,center:0,right:0},s2={full:0,left:0,center:0,right:0},_F={full:0,left:0,center:0,right:0},u_=class extends a1{constructor(J,$,X,Y,Z,Q,G,q){super();this._viewportElement=J,this._screenElement=$,this._bufferService=X,this._decorationService=Y,this._renderService=Z,this._optionsService=Q,this._themeService=G,this._coreBrowserService=q,this._colorZoneStore=new nW0,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(R5(()=>this._canvas?.remove()));let U=this._canvas.getContext("2d");if(U)this._ctx=U;else throw Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let J=Math.floor((this._canvas.width-1)/3),$=Math.ceil((this._canvas.width-1)/3);s2.full=this._canvas.width,s2.left=J,s2.center=$,s2.right=J,this._refreshDrawHeightConstants(),_F.full=1,_F.left=1,_F.center=1+s2.left,_F.right=1+s2.left+s2.center}_refreshDrawHeightConstants(){VY.full=Math.round(2*this._coreBrowserService.dpr);let J=this._canvas.height/this._bufferService.buffer.lines.length,$=Math.round(Math.max(Math.min(J,12),6)*this._coreBrowserService.dpr);VY.left=$,VY.center=$,VY.right=$}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*VY.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*VY.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*VY.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*VY.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let $ of this._decorationService.decorations)this._colorZoneStore.addDecoration($);this._ctx.lineWidth=1,this._renderRulerOutline();let J=this._colorZoneStore.zones;for(let $ of J)$.position!=="full"&&this._renderColorZone($);for(let $ of J)$.position==="full"&&this._renderColorZone($);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(J){this._ctx.fillStyle=J.color,this._ctx.fillRect(_F[J.position||"full"],Math.round((this._canvas.height-1)*(J.startBufferLine/this._bufferService.buffers.active.lines.length)-VY[J.position||"full"]/2),s2[J.position||"full"],Math.round((this._canvas.height-1)*((J.endBufferLine-J.startBufferLine)/this._bufferService.buffers.active.lines.length)+VY[J.position||"full"]))}_queueRefresh(J,$){this._shouldUpdateDimensions=J||this._shouldUpdateDimensions,this._shouldUpdateAnchor=$||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};u_=Z8([r0(2,f9),r0(3,uF),r0(4,oZ),r0(5,g9),r0(6,SH),r0(7,nZ)],u_);var D0;((J)=>(J.NUL="\x00",J.SOH="\x01",J.STX="\x02",J.ETX="\x03",J.EOT="\x04",J.ENQ="\x05",J.ACK="\x06",J.BEL="\x07",J.BS="\b",J.HT="\t",J.LF=`
`,J.VT="\v",J.FF="\f",J.CR="\r",J.SO="\x0E",J.SI="\x0F",J.DLE="\x10",J.DC1="\x11",J.DC2="\x12",J.DC3="\x13",J.DC4="\x14",J.NAK="\x15",J.SYN="\x16",J.ETB="\x17",J.CAN="\x18",J.EM="\x19",J.SUB="\x1A",J.ESC="\x1B",J.FS="\x1C",J.GS="\x1D",J.RS="\x1E",J.US="\x1F",J.SP=" ",J.DEL=""))(D0||={});var v_;((J)=>(J.PAD="",J.HOP="",J.BPH="",J.NBH="",J.IND="",J.NEL="",J.SSA="",J.ESA="",J.HTS="",J.HTJ="",J.VTS="",J.PLD="",J.PLU="",J.RI="",J.SS2="",J.SS3="",J.DCS="",J.PU1="",J.PU2="",J.STS="",J.CCH="",J.MW="",J.SPA="",J.EPA="",J.SOS="",J.SGCI="",J.SCI="",J.CSI="",J.ST="",J.OSC="",J.PM="",J.APC=""))(v_||={});var G40;((J)=>J.ST=`${D0.ESC}\\`)(G40||={});var xv=class{constructor(J,$,X,Y,Z,Q){this._textarea=J,this._compositionView=$,this._bufferService=X,this._optionsService=Y,this._coreService=Z,this._renderService=Q,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(J){this._compositionView.textContent=J.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(J){if(this._isComposing||this._isSendingComposition){if(J.keyCode===20||J.keyCode===229||J.keyCode===16||J.keyCode===17||J.keyCode===18)return!1;this._finalizeComposition(!1)}return J.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(J){if(this._compositionView.classList.remove("active"),this._isComposing=!1,J){let $={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let X;$.start+=this._dataAlreadySent.length,this._isComposing?X=this._textarea.value.substring($.start,this._compositionPosition.start):X=this._textarea.value.substring($.start),X.length>0&&this._coreService.triggerDataEvent(X,!0)}},0)}else{this._isSendingComposition=!1;let $=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent($,!0)}}_handleAnyTextareaChanges(){let J=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let $=this._textarea.value,X=$.replace(J,"");this._dataAlreadySent=X,$.length>J.length?this._coreService.triggerDataEvent(X,!0):$.length<J.length?this._coreService.triggerDataEvent(`${D0.DEL}`,!0):$.length===J.length&&$!==J&&this._coreService.triggerDataEvent($,!0)}},0)}updateCompositionElements(J){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let $=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),X=this._renderService.dimensions.css.cell.height,Y=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,Z=$*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=Z+"px",this._compositionView.style.top=Y+"px",this._compositionView.style.height=X+"px",this._compositionView.style.lineHeight=X+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let Q=this._compositionView.getBoundingClientRect();this._textarea.style.left=Z+"px",this._textarea.style.top=Y+"px",this._textarea.style.width=Math.max(Q.width,1)+"px",this._textarea.style.height=Math.max(Q.height,1)+"px",this._textarea.style.lineHeight=Q.height+"px"}J||setTimeout(()=>this.updateCompositionElements(!0),0)}}};xv=Z8([r0(2,f9),r0(3,g9),r0(4,_q),r0(5,oZ)],xv);var O7=0,_7=0,N7=0,Y8=0,G90={css:"#00000000",rgba:0},g8;((J)=>{function $(Z,Q,G,q){return q!==void 0?`#${Kq(Z)}${Kq(Q)}${Kq(G)}${Kq(q)}`:`#${Kq(Z)}${Kq(Q)}${Kq(G)}`}J.toCss=$;function X(Z,Q,G,q=255){return(Z<<24|Q<<16|G<<8|q)>>>0}J.toRgba=X;function Y(Z,Q,G,q){return{css:J.toCss(Z,Q,G,q),rgba:J.toRgba(Z,Q,G,q)}}J.toColor=Y})(g8||={});var D5;((J)=>{function $(U,z){if(Y8=(z.rgba&255)/255,Y8===1)return{css:z.css,rgba:z.rgba};let H=z.rgba>>24&255,j=z.rgba>>16&255,V=z.rgba>>8&255,W=U.rgba>>24&255,B=U.rgba>>16&255,K=U.rgba>>8&255;O7=W+Math.round((H-W)*Y8),_7=B+Math.round((j-B)*Y8),N7=K+Math.round((V-K)*Y8);let P=g8.toCss(O7,_7,N7),A=g8.toRgba(O7,_7,N7);return{css:P,rgba:A}}J.blend=$;function X(U){return(U.rgba&255)===255}J.isOpaque=X;function Y(U,z,H){let j=h_.ensureContrastRatio(U.rgba,z.rgba,H);if(j)return g8.toColor(j>>24&255,j>>16&255,j>>8&255)}J.ensureContrastRatio=Y;function Z(U){let z=(U.rgba|255)>>>0;return[O7,_7,N7]=h_.toChannels(z),{css:g8.toCss(O7,_7,N7),rgba:z}}J.opaque=Z;function Q(U,z){return Y8=Math.round(z*255),[O7,_7,N7]=h_.toChannels(U.rgba),{css:g8.toCss(O7,_7,N7,Y8),rgba:g8.toRgba(O7,_7,N7,Y8)}}J.opacity=Q;function G(U,z){return Y8=U.rgba&255,Q(U,Y8*z/255)}J.multiplyOpacity=G;function q(U){return[U.rgba>>24&255,U.rgba>>16&255,U.rgba>>8&255]}J.toColorRGB=q})(D5||={});var a5;((J)=>{let $,X;try{let Z=document.createElement("canvas");Z.width=1,Z.height=1;let Q=Z.getContext("2d",{willReadFrequently:!0});Q&&($=Q,$.globalCompositeOperation="copy",X=$.createLinearGradient(0,0,1,1))}catch{}function Y(Z){if(Z.match(/#[\da-f]{3,8}/i))switch(Z.length){case 4:return O7=parseInt(Z.slice(1,2).repeat(2),16),_7=parseInt(Z.slice(2,3).repeat(2),16),N7=parseInt(Z.slice(3,4).repeat(2),16),g8.toColor(O7,_7,N7);case 5:return O7=parseInt(Z.slice(1,2).repeat(2),16),_7=parseInt(Z.slice(2,3).repeat(2),16),N7=parseInt(Z.slice(3,4).repeat(2),16),Y8=parseInt(Z.slice(4,5).repeat(2),16),g8.toColor(O7,_7,N7,Y8);case 7:return{css:Z,rgba:(parseInt(Z.slice(1),16)<<8|255)>>>0};case 9:return{css:Z,rgba:parseInt(Z.slice(1),16)>>>0}}let Q=Z.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(Q)return O7=parseInt(Q[1]),_7=parseInt(Q[2]),N7=parseInt(Q[3]),Y8=Math.round((Q[5]===void 0?1:parseFloat(Q[5]))*255),g8.toColor(O7,_7,N7,Y8);if(!$||!X)throw Error("css.toColor: Unsupported css format");if($.fillStyle=X,$.fillStyle=Z,typeof $.fillStyle!="string")throw Error("css.toColor: Unsupported css format");if($.fillRect(0,0,1,1),[O7,_7,N7,Y8]=$.getImageData(0,0,1,1).data,Y8!==255)throw Error("css.toColor: Unsupported css format");return{rgba:g8.toRgba(O7,_7,N7,Y8),css:Z}}J.toColor=Y})(a5||={});var h9;((J)=>{function $(Y){return X(Y>>16&255,Y>>8&255,Y&255)}J.relativeLuminance=$;function X(Y,Z,Q){let G=Y/255,q=Z/255,U=Q/255,z=G<=0.03928?G/12.92:Math.pow((G+0.055)/1.055,2.4),H=q<=0.03928?q/12.92:Math.pow((q+0.055)/1.055,2.4),j=U<=0.03928?U/12.92:Math.pow((U+0.055)/1.055,2.4);return z*0.2126+H*0.7152+j*0.0722}J.relativeLuminance2=X})(h9||={});var h_;((J)=>{function $(G,q){if(Y8=(q&255)/255,Y8===1)return q;let U=q>>24&255,z=q>>16&255,H=q>>8&255,j=G>>24&255,V=G>>16&255,W=G>>8&255;return O7=j+Math.round((U-j)*Y8),_7=V+Math.round((z-V)*Y8),N7=W+Math.round((H-W)*Y8),g8.toRgba(O7,_7,N7)}J.blend=$;function X(G,q,U){let z=h9.relativeLuminance(G>>8),H=h9.relativeLuminance(q>>8);if(sZ(z,H)<U){if(H<z){let W=Y(G,q,U),B=sZ(z,h9.relativeLuminance(W>>8));if(B<U){let K=Z(G,q,U),P=sZ(z,h9.relativeLuminance(K>>8));return B>P?W:K}return W}let j=Z(G,q,U),V=sZ(z,h9.relativeLuminance(j>>8));if(V<U){let W=Y(G,q,U),B=sZ(z,h9.relativeLuminance(W>>8));return V>B?j:W}return j}}J.ensureContrastRatio=X;function Y(G,q,U){let z=G>>24&255,H=G>>16&255,j=G>>8&255,V=q>>24&255,W=q>>16&255,B=q>>8&255,K=sZ(h9.relativeLuminance2(V,W,B),h9.relativeLuminance2(z,H,j));for(;K<U&&(V>0||W>0||B>0);)V-=Math.max(0,Math.ceil(V*0.1)),W-=Math.max(0,Math.ceil(W*0.1)),B-=Math.max(0,Math.ceil(B*0.1)),K=sZ(h9.relativeLuminance2(V,W,B),h9.relativeLuminance2(z,H,j));return(V<<24|W<<16|B<<8|255)>>>0}J.reduceLuminance=Y;function Z(G,q,U){let z=G>>24&255,H=G>>16&255,j=G>>8&255,V=q>>24&255,W=q>>16&255,B=q>>8&255,K=sZ(h9.relativeLuminance2(V,W,B),h9.relativeLuminance2(z,H,j));for(;K<U&&(V<255||W<255||B<255);)V=Math.min(255,V+Math.ceil((255-V)*0.1)),W=Math.min(255,W+Math.ceil((255-W)*0.1)),B=Math.min(255,B+Math.ceil((255-B)*0.1)),K=sZ(h9.relativeLuminance2(V,W,B),h9.relativeLuminance2(z,H,j));return(V<<24|W<<16|B<<8|255)>>>0}J.increaseLuminance=Z;function Q(G){return[G>>24&255,G>>16&255,G>>8&255,G&255]}J.toChannels=Q})(h_||={});function Kq(J){let $=J.toString(16);return $.length<2?"0"+$:$}function sZ(J,$){return J<$?($+0.05)/(J+0.05):(J+0.05)/($+0.05)}var oW0=class extends mF{constructor(J,$,X){super();this.content=0,this.combinedData="",this.fg=J.fg,this.bg=J.bg,this.combinedData=$,this._width=X}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(J){throw Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},c_=class{constructor(J){this._bufferService=J,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new sJ}register(J){let $={id:this._nextCharacterJoinerId++,handler:J};return this._characterJoiners.push($),$.id}deregister(J){for(let $=0;$<this._characterJoiners.length;$++)if(this._characterJoiners[$].id===J)return this._characterJoiners.splice($,1),!0;return!1}getJoinedCharacters(J){if(this._characterJoiners.length===0)return[];let $=this._bufferService.buffer.lines.get(J);if(!$||$.length===0)return[];let X=[],Y=$.translateToString(!0),Z=0,Q=0,G=0,q=$.getFg(0),U=$.getBg(0);for(let z=0;z<$.getTrimmedLength();z++)if($.loadCell(z,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==q||this._workCell.bg!==U){if(z-Z>1){let H=this._getJoinedRanges(Y,G,Q,$,Z);for(let j=0;j<H.length;j++)X.push(H[j])}Z=z,G=Q,q=this._workCell.fg,U=this._workCell.bg}Q+=this._workCell.getChars().length||i2.length}if(this._bufferService.cols-Z>1){let z=this._getJoinedRanges(Y,G,Q,$,Z);for(let H=0;H<z.length;H++)X.push(z[H])}return X}_getJoinedRanges(J,$,X,Y,Z){let Q=J.substring($,X),G=[];try{G=this._characterJoiners[0].handler(Q)}catch(q){console.error(q)}for(let q=1;q<this._characterJoiners.length;q++)try{let U=this._characterJoiners[q].handler(Q);for(let z=0;z<U.length;z++)c_._mergeRanges(G,U[z])}catch(U){console.error(U)}return this._stringRangesToCellRanges(G,Y,Z),G}_stringRangesToCellRanges(J,$,X){let Y=0,Z=!1,Q=0,G=J[Y];if(G){for(let q=X;q<this._bufferService.cols;q++){let U=$.getWidth(q),z=$.getString(q).length||i2.length;if(U!==0){if(!Z&&G[0]<=Q&&(G[0]=q,Z=!0),G[1]<=Q){if(G[1]=q,G=J[++Y],!G)break;G[0]<=Q?(G[0]=q,Z=!0):Z=!1}Q+=z}}G&&(G[1]=this._bufferService.cols)}}static _mergeRanges(J,$){let X=!1;for(let Y=0;Y<J.length;Y++){let Z=J[Y];if(X){if($[1]<=Z[0])return J[Y-1][1]=$[1],J;if($[1]<=Z[1])return J[Y-1][1]=Math.max($[1],Z[1]),J.splice(Y,1),J;J.splice(Y,1),Y--}else{if($[1]<=Z[0])return J.splice(Y,0,$),J;if($[1]<=Z[1])return Z[0]=Math.min($[0],Z[0]),J;$[0]<Z[1]&&(Z[0]=Math.min($[0],Z[0]),X=!0);continue}}return X?J[J.length-1][1]=$[1]:J.push($),J}};c_=Z8([r0(0,f9)],c_);function tW0(J){return 57508<=J&&J<=57558}function eW0(J){return 9472<=J&&J<=9631}function JB0(J){return tW0(J)||eW0(J)}function $B0(){return{css:{canvas:w_(),cell:w_()},device:{canvas:w_(),cell:w_(),char:{width:0,height:0,left:0,top:0}}}}function w_(){return{width:0,height:0}}var bv=class{constructor(J,$,X,Y,Z,Q,G){this._document=J,this._characterJoinerService=$,this._optionsService=X,this._coreBrowserService=Y,this._coreService=Z,this._decorationService=Q,this._themeService=G,this._workCell=new sJ,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(J,$,X){this._selectionStart=J,this._selectionEnd=$,this._columnSelectMode=X}createRow(J,$,X,Y,Z,Q,G,q,U,z,H){let j=[],V=this._characterJoinerService.getJoinedCharacters($),W=this._themeService.colors,B=J.getNoBgTrimmedLength();X&&B<Q+1&&(B=Q+1);let K,P=0,A="",D=0,M=0,R=0,O=0,N=!1,T=0,S=!1,v=0,l=0,f=[],h=z!==-1&&H!==-1;for(let L=0;L<B;L++){J.loadCell(L,this._workCell);let b=this._workCell.getWidth();if(b===0)continue;let p=!1,d=L>=l,s=L,c=this._workCell;if(V.length>0&&L===V[0][0]&&d){let v1=V.shift(),S5=this._isCellInSelection(v1[0],$);for(D=v1[0]+1;D<v1[1];D++)d&&=S5===this._isCellInSelection(D,$);d&&=!X||Q<v1[0]||Q>=v1[1],d?(p=!0,c=new oW0(this._workCell,J.translateToString(!0,v1[0],v1[1]),v1[1]-v1[0]),s=v1[1]-1,b=c.getWidth()):l=v1[1]}let i=this._isCellInSelection(L,$),J0=X&&L===Q,W0=h&&L>=z&&L<=H,M0=!1;this._decorationService.forEachDecorationAtCell(L,$,void 0,(v1)=>{M0=!0});let X0=c.getChars()||i2;if(X0===" "&&(c.isUnderline()||c.isOverline())&&(X0=" "),v=b*q-U.get(X0,c.isBold(),c.isItalic()),!K)K=this._document.createElement("span");else if(P&&(i&&S||!i&&!S&&c.bg===M)&&(i&&S&&W.selectionForeground||c.fg===R)&&c.extended.ext===O&&W0===N&&v===T&&!J0&&!p&&!M0&&d){c.isInvisible()?A+=i2:A+=X0,P++;continue}else P&&(K.textContent=A),K=this._document.createElement("span"),P=0,A="";if(M=c.bg,R=c.fg,O=c.extended.ext,N=W0,T=v,S=i,p&&Q>=L&&Q<=s&&(Q=L),!this._coreService.isCursorHidden&&J0&&this._coreService.isCursorInitialized){if(f.push("xterm-cursor"),this._coreBrowserService.isFocused)G&&f.push("xterm-cursor-blink"),f.push(Y==="bar"?"xterm-cursor-bar":Y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(Z)switch(Z){case"outline":f.push("xterm-cursor-outline");break;case"block":f.push("xterm-cursor-block");break;case"bar":f.push("xterm-cursor-bar");break;case"underline":f.push("xterm-cursor-underline");break;default:break}}if(c.isBold()&&f.push("xterm-bold"),c.isItalic()&&f.push("xterm-italic"),c.isDim()&&f.push("xterm-dim"),c.isInvisible()?A=i2:A=c.getChars()||i2,c.isUnderline()&&(f.push(`xterm-underline-${c.extended.underlineStyle}`),A===" "&&(A=" "),!c.isUnderlineColorDefault()))if(c.isUnderlineColorRGB())K.style.textDecorationColor=`rgb(${mF.toColorRGB(c.getUnderlineColor()).join(",")})`;else{let v1=c.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&c.isBold()&&v1<8&&(v1+=8),K.style.textDecorationColor=W.ansi[v1].css}c.isOverline()&&(f.push("xterm-overline"),A===" "&&(A=" ")),c.isStrikethrough()&&f.push("xterm-strikethrough"),W0&&(K.style.textDecoration="underline");let N1=c.getFgColor(),o1=c.getFgColorMode(),E1=c.getBgColor(),Q1=c.getBgColorMode(),T1=!!c.isInverse();if(T1){let v1=N1;N1=E1,E1=v1;let S5=o1;o1=Q1,Q1=S5}let r1,x6,u0=!1;this._decorationService.forEachDecorationAtCell(L,$,void 0,(v1)=>{v1.options.layer!=="top"&&u0||(v1.backgroundColorRGB&&(Q1=50331648,E1=v1.backgroundColorRGB.rgba>>8&16777215,r1=v1.backgroundColorRGB),v1.foregroundColorRGB&&(o1=50331648,N1=v1.foregroundColorRGB.rgba>>8&16777215,x6=v1.foregroundColorRGB),u0=v1.options.layer==="top")}),!u0&&i&&(r1=this._coreBrowserService.isFocused?W.selectionBackgroundOpaque:W.selectionInactiveBackgroundOpaque,E1=r1.rgba>>8&16777215,Q1=50331648,u0=!0,W.selectionForeground&&(o1=50331648,N1=W.selectionForeground.rgba>>8&16777215,x6=W.selectionForeground)),u0&&f.push("xterm-decoration-top");let U5;switch(Q1){case 16777216:case 33554432:U5=W.ansi[E1],f.push(`xterm-bg-${E1}`);break;case 50331648:U5=g8.toColor(E1>>16,E1>>8&255,E1&255),this._addStyle(K,`background-color:#${q90((E1>>>0).toString(16),"0",6)}`);break;case 0:default:T1?(U5=W.foreground,f.push("xterm-bg-257")):U5=W.background}switch(r1||c.isDim()&&(r1=D5.multiplyOpacity(U5,0.5)),o1){case 16777216:case 33554432:c.isBold()&&N1<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(N1+=8),this._applyMinimumContrast(K,U5,W.ansi[N1],c,r1,void 0)||f.push(`xterm-fg-${N1}`);break;case 50331648:let v1=g8.toColor(N1>>16&255,N1>>8&255,N1&255);this._applyMinimumContrast(K,U5,v1,c,r1,x6)||this._addStyle(K,`color:#${q90(N1.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(K,U5,W.foreground,c,r1,x6)||T1&&f.push("xterm-fg-257")}f.length&&(K.className=f.join(" "),f.length=0),!J0&&!p&&!M0&&d?P++:K.textContent=A,v!==this.defaultSpacing&&(K.style.letterSpacing=`${v}px`),j.push(K),L=s}return K&&P&&(K.textContent=A),j}_applyMinimumContrast(J,$,X,Y,Z,Q){if(this._optionsService.rawOptions.minimumContrastRatio===1||JB0(Y.getCode()))return!1;let G=this._getContrastCache(Y),q;if(!Z&&!Q&&(q=G.getColor($.rgba,X.rgba)),q===void 0){let U=this._optionsService.rawOptions.minimumContrastRatio/(Y.isDim()?2:1);q=D5.ensureContrastRatio(Z||$,Q||X,U),G.setColor((Z||$).rgba,(Q||X).rgba,q??null)}return q?(this._addStyle(J,`color:${q.css}`),!0):!1}_getContrastCache(J){return J.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(J,$){J.setAttribute("style",`${J.getAttribute("style")||""}${$};`)}_isCellInSelection(J,$){let X=this._selectionStart,Y=this._selectionEnd;return!X||!Y?!1:this._columnSelectMode?X[0]<=Y[0]?J>=X[0]&&$>=X[1]&&J<Y[0]&&$<=Y[1]:J<X[0]&&$>=X[1]&&J>=Y[0]&&$<=Y[1]:$>X[1]&&$<Y[1]||X[1]===Y[1]&&$===X[1]&&J>=X[0]&&J<Y[0]||X[1]<Y[1]&&$===Y[1]&&J<Y[0]||X[1]<Y[1]&&$===X[1]&&J>=X[0]}};bv=Z8([r0(1,u90),r0(2,g9),r0(3,nZ),r0(4,_q),r0(5,uF),r0(6,SH)],bv);function q90(J,$,X){for(;J.length<X;)J=$+J;return J}var XB0=class{constructor(J,$){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=J.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let X=J.createElement("span");X.classList.add("xterm-char-measure-element");let Y=J.createElement("span");Y.classList.add("xterm-char-measure-element"),Y.style.fontWeight="bold";let Z=J.createElement("span");Z.classList.add("xterm-char-measure-element"),Z.style.fontStyle="italic";let Q=J.createElement("span");Q.classList.add("xterm-char-measure-element"),Q.style.fontWeight="bold",Q.style.fontStyle="italic",this._measureElements=[X,Y,Z,Q],this._container.appendChild(X),this._container.appendChild(Y),this._container.appendChild(Z),this._container.appendChild(Q),$.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(J,$,X,Y){J===this._font&&$===this._fontSize&&X===this._weight&&Y===this._weightBold||(this._font=J,this._fontSize=$,this._weight=X,this._weightBold=Y,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${X}`,this._measureElements[1].style.fontWeight=`${Y}`,this._measureElements[2].style.fontWeight=`${X}`,this._measureElements[3].style.fontWeight=`${Y}`,this.clear())}get(J,$,X){let Y=0;if(!$&&!X&&J.length===1&&(Y=J.charCodeAt(0))<256){if(this._flat[Y]!==-9999)return this._flat[Y];let G=this._measure(J,0);return G>0&&(this._flat[Y]=G),G}let Z=J;$&&(Z+="B"),X&&(Z+="I");let Q=this._holey.get(Z);if(Q===void 0){let G=0;$&&(G|=1),X&&(G|=2),Q=this._measure(J,G),Q>0&&this._holey.set(Z,Q)}return Q}_measure(J,$){let X=this._measureElements[$];return X.textContent=J.repeat(32),X.offsetWidth/32}},YB0=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(J,$,X,Y=!1){if(this.selectionStart=$,this.selectionEnd=X,!$||!X||$[0]===X[0]&&$[1]===X[1]){this.clear();return}let Z=J.buffers.active.ydisp,Q=$[1]-Z,G=X[1]-Z,q=Math.max(Q,0),U=Math.min(G,J.rows-1);if(q>=J.rows||U<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=Y,this.viewportStartRow=Q,this.viewportEndRow=G,this.viewportCappedStartRow=q,this.viewportCappedEndRow=U,this.startCol=$[0],this.endCol=X[0]}isCellSelected(J,$,X){return this.hasSelection?(X-=J.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?$>=this.startCol&&X>=this.viewportCappedStartRow&&$<this.endCol&&X<=this.viewportCappedEndRow:$<this.startCol&&X>=this.viewportCappedStartRow&&$>=this.endCol&&X<=this.viewportCappedEndRow:X>this.viewportStartRow&&X<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&X===this.viewportStartRow&&$>=this.startCol&&$<this.endCol||this.viewportStartRow<this.viewportEndRow&&X===this.viewportEndRow&&$<this.endCol||this.viewportStartRow<this.viewportEndRow&&X===this.viewportStartRow&&$>=this.startCol):!1}};function ZB0(){return new YB0}var zv="xterm-dom-renderer-owner-",lJ="xterm-rows",L_="xterm-fg-",U90="xterm-bg-",NF="xterm-focus",k_="xterm-selection",QB0=1,Sv=class extends a1{constructor(J,$,X,Y,Z,Q,G,q,U,z,H,j,V,W){super();this._terminal=J,this._document=$,this._element=X,this._screenElement=Y,this._viewportElement=Z,this._helperContainer=Q,this._linkifier2=G,this._charSizeService=U,this._optionsService=z,this._bufferService=H,this._coreService=j,this._coreBrowserService=V,this._themeService=W,this._terminalClass=QB0++,this._rowElements=[],this._selectionRenderModel=ZB0(),this.onRequestRedraw=this._register(new x0).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(lJ),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(k_),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=$B0(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors((B)=>this._injectCss(B))),this._injectCss(this._themeService.colors),this._rowFactory=q.createInstance(bv,document),this._element.classList.add(zv+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline((B)=>this._handleLinkHover(B))),this._register(this._linkifier2.onHideLinkUnderline((B)=>this._handleLinkLeave(B))),this._register(R5(()=>{this._element.classList.remove(zv+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new XB0(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let J=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*J,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*J),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/J),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/J),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let X of this._rowElements)X.style.width=`${this.dimensions.css.canvas.width}px`,X.style.height=`${this.dimensions.css.cell.height}px`,X.style.lineHeight=`${this.dimensions.css.cell.height}px`,X.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let $=`${this._terminalSelector} .${lJ} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(J){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let $=`${this._terminalSelector} .${lJ} { pointer-events: none; color: ${J.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;$+=`${this._terminalSelector} .${lJ} .xterm-dim { color: ${D5.multiplyOpacity(J.foreground,0.5).css};}`,$+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let X=`blink_underline_${this._terminalClass}`,Y=`blink_bar_${this._terminalClass}`,Z=`blink_block_${this._terminalClass}`;$+=`@keyframes ${X} { 50% {  border-bottom-style: hidden; }}`,$+=`@keyframes ${Y} { 50% {  box-shadow: none; }}`,$+=`@keyframes ${Z} { 0% {  background-color: ${J.cursor.css};  color: ${J.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${J.cursor.css}; }}`,$+=`${this._terminalSelector} .${lJ}.${NF} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${lJ}.${NF} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${lJ}.${NF} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Z} 1s step-end infinite;}${this._terminalSelector} .${lJ} .xterm-cursor.xterm-cursor-block { background-color: ${J.cursor.css}; color: ${J.cursorAccent.css};}${this._terminalSelector} .${lJ} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${J.cursor.css} !important; color: ${J.cursorAccent.css} !important;}${this._terminalSelector} .${lJ} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${J.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${lJ} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${J.cursor.css} inset;}${this._terminalSelector} .${lJ} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${J.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,$+=`${this._terminalSelector} .${k_} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k_} div { position: absolute; background-color: ${J.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k_} div { position: absolute; background-color: ${J.selectionInactiveBackgroundOpaque.css};}`;for(let[Q,G]of J.ansi.entries())$+=`${this._terminalSelector} .${L_}${Q} { color: ${G.css}; }${this._terminalSelector} .${L_}${Q}.xterm-dim { color: ${D5.multiplyOpacity(G,0.5).css}; }${this._terminalSelector} .${U90}${Q} { background-color: ${G.css}; }`;$+=`${this._terminalSelector} .${L_}257 { color: ${D5.opaque(J.background).css}; }${this._terminalSelector} .${L_}257.xterm-dim { color: ${D5.multiplyOpacity(D5.opaque(J.background),0.5).css}; }${this._terminalSelector} .${U90}257 { background-color: ${J.foreground.css}; }`,this._themeStyleElement.textContent=$}_setDefaultSpacing(){let J=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${J}px`,this._rowFactory.defaultSpacing=J}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(J,$){for(let X=this._rowElements.length;X<=$;X++){let Y=this._document.createElement("div");this._rowContainer.appendChild(Y),this._rowElements.push(Y)}for(;this._rowElements.length>$;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(J,$){this._refreshRowElements(J,$),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(NF),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(NF),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(J,$,X){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(J,$,X),this.renderRows(0,this._bufferService.rows-1),!J||!$||(this._selectionRenderModel.update(this._terminal,J,$,X),!this._selectionRenderModel.hasSelection))return;let Y=this._selectionRenderModel.viewportStartRow,Z=this._selectionRenderModel.viewportEndRow,Q=this._selectionRenderModel.viewportCappedStartRow,G=this._selectionRenderModel.viewportCappedEndRow,q=this._document.createDocumentFragment();if(X){let U=J[0]>$[0];q.appendChild(this._createSelectionElement(Q,U?$[0]:J[0],U?J[0]:$[0],G-Q+1))}else{let U=Y===Q?J[0]:0,z=Q===Z?$[0]:this._bufferService.cols;q.appendChild(this._createSelectionElement(Q,U,z));let H=G-Q-1;if(q.appendChild(this._createSelectionElement(Q+1,0,this._bufferService.cols,H)),Q!==G){let j=Z===G?$[0]:this._bufferService.cols;q.appendChild(this._createSelectionElement(G,0,j))}}this._selectionContainer.appendChild(q)}_createSelectionElement(J,$,X,Y=1){let Z=this._document.createElement("div"),Q=$*this.dimensions.css.cell.width,G=this.dimensions.css.cell.width*(X-$);return Q+G>this.dimensions.css.canvas.width&&(G=this.dimensions.css.canvas.width-Q),Z.style.height=`${Y*this.dimensions.css.cell.height}px`,Z.style.top=`${J*this.dimensions.css.cell.height}px`,Z.style.left=`${Q}px`,Z.style.width=`${G}px`,Z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let J of this._rowElements)J.replaceChildren()}renderRows(J,$){let X=this._bufferService.buffer,Y=X.ybase+X.y,Z=Math.min(X.x,this._bufferService.cols-1),Q=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,G=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let U=J;U<=$;U++){let z=U+X.ydisp,H=this._rowElements[U],j=X.lines.get(z);if(!H||!j)break;H.replaceChildren(...this._rowFactory.createRow(j,z,z===Y,G,q,Z,Q,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${zv}${this._terminalClass}`}_handleLinkHover(J){this._setCellUnderline(J.x1,J.x2,J.y1,J.y2,J.cols,!0)}_handleLinkLeave(J){this._setCellUnderline(J.x1,J.x2,J.y1,J.y2,J.cols,!1)}_setCellUnderline(J,$,X,Y,Z,Q){X<0&&(J=0),Y<0&&($=0);let G=this._bufferService.rows-1;X=Math.max(Math.min(X,G),0),Y=Math.max(Math.min(Y,G),0),Z=Math.min(Z,this._bufferService.cols);let q=this._bufferService.buffer,U=q.ybase+q.y,z=Math.min(q.x,Z-1),H=this._optionsService.rawOptions.cursorBlink,j=this._optionsService.rawOptions.cursorStyle,V=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=X;W<=Y;++W){let B=W+q.ydisp,K=this._rowElements[W],P=q.lines.get(B);if(!K||!P)break;K.replaceChildren(...this._rowFactory.createRow(P,B,B===U,j,V,z,H,this.dimensions.css.cell.width,this._widthCache,Q?W===X?J:0:-1,Q?(W===Y?$:Z)-1:-1))}}};Sv=Z8([r0(7,av),r0(8,r_),r0(9,g9),r0(10,f9),r0(11,_q),r0(12,nZ),r0(13,SH)],Sv);var Cv=class extends a1{constructor(J,$,X){super();this._optionsService=X,this.width=0,this.height=0,this._onCharSizeChange=this._register(new x0),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new qB0(this._optionsService))}catch{this._measureStrategy=this._register(new GB0(J,$,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let J=this._measureStrategy.measure();(J.width!==this.width||J.height!==this.height)&&(this.width=J.width,this.height=J.height,this._onCharSizeChange.fire())}};Cv=Z8([r0(2,g9)],Cv);var q40=class extends a1{constructor(){super(...arguments);this._result={width:0,height:0}}_validateAndSet(J,$){J!==void 0&&J>0&&$!==void 0&&$>0&&(this._result.width=J,this._result.height=$)}},GB0=class extends q40{constructor(J,$,X){super();this._document=J,this._parentElement=$,this._optionsService=X,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},qB0=class extends q40{constructor(J){super();this._optionsService=J,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let $=this._ctx.measureText("W");if(!(("width"in $)&&("fontBoundingBoxAscent"in $)&&("fontBoundingBoxDescent"in $)))throw Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let J=this._ctx.measureText("W");return this._validateAndSet(J.width,J.fontBoundingBoxAscent+J.fontBoundingBoxDescent),this._result}},UB0=class extends a1{constructor(J,$,X){super();this._textarea=J,this._window=$,this.mainDocument=X,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new zB0(this._window)),this._onDprChange=this._register(new x0),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new x0),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange((Y)=>this._screenDprMonitor.setWindow(Y))),this._register(a7.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(x1(this._textarea,"focus",()=>this._isFocused=!0)),this._register(x1(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(J){this._window!==J&&(this._window=J,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},zB0=class extends a1{constructor(J){super();this._parentWindow=J,this._windowResizeListener=this._register(new bH),this._onDprChange=this._register(new x0),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(R5(()=>this.clearListener()))}setWindow(J){this._parentWindow=J,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=x1(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},HB0=class extends a1{constructor(){super();this.linkProviders=[],this._register(R5(()=>this.linkProviders.length=0))}registerLinkProvider(J){return this.linkProviders.push(J),{dispose:()=>{let $=this.linkProviders.indexOf(J);$!==-1&&this.linkProviders.splice($,1)}}}};function $h(J,$,X){let Y=X.getBoundingClientRect(),Z=J.getComputedStyle(X),Q=parseInt(Z.getPropertyValue("padding-left")),G=parseInt(Z.getPropertyValue("padding-top"));return[$.clientX-Y.left-Q,$.clientY-Y.top-G]}function jB0(J,$,X,Y,Z,Q,G,q,U){if(!Q)return;let z=$h(J,$,X);if(z)return z[0]=Math.ceil((z[0]+(U?G/2:0))/G),z[1]=Math.ceil(z[1]/q),z[0]=Math.min(Math.max(z[0],1),Y+(U?1:0)),z[1]=Math.min(Math.max(z[1],1),Z),z}var vv=class{constructor(J,$){this._renderService=J,this._charSizeService=$}getCoords(J,$,X,Y,Z){return jB0(window,J,$,X,Y,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,Z)}getMouseReportCoords(J,$){let X=$h(window,J,$);if(this._charSizeService.hasValidSize)return X[0]=Math.min(Math.max(X[0],0),this._renderService.dimensions.css.canvas.width-1),X[1]=Math.min(Math.max(X[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(X[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(X[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(X[0]),y:Math.floor(X[1])}}};vv=Z8([r0(0,oZ),r0(1,r_)],vv);var VB0=class{constructor(J,$){this._renderCallback=J,this._coreBrowserService=$,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(J){return this._refreshCallbacks.push(J),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(J,$,X){this._rowCount=X,J=J!==void 0?J:0,$=$!==void 0?$:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,J):J,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,$):$,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let J=Math.max(this._rowStart,0),$=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(J,$),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let J of this._refreshCallbacks)J(0);this._refreshCallbacks=[]}},U40={};ij0(U40,{getSafariVersion:()=>BB0,isChromeOS:()=>V40,isFirefox:()=>z40,isIpad:()=>FB0,isIphone:()=>KB0,isLegacyEdge:()=>WB0,isLinux:()=>Xh,isMac:()=>l_,isNode:()=>o_,isSafari:()=>H40,isWindows:()=>j40});var o_=typeof process<"u"&&"title"in process,cF=o_?"node":navigator.userAgent,lF=o_?"node":navigator.platform,z40=cF.includes("Firefox"),WB0=cF.includes("Edge"),H40=/^((?!chrome|android).)*safari/i.test(cF);function BB0(){if(!H40)return 0;let J=cF.match(/Version\/(\d+)/);return J===null||J.length<2?0:parseInt(J[1])}var l_=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(lF),FB0=lF==="iPad",KB0=lF==="iPhone",j40=["Windows","Win16","Win32","WinCE"].includes(lF),Xh=lF.indexOf("Linux")>=0,V40=/\bCrOS\b/.test(cF),W40=class{constructor(){this._tasks=[],this._i=0}enqueue(J){this._tasks.push(J),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(J){this._idleCallback=void 0;let $=0,X=0,Y=J.timeRemaining(),Z=0;for(;this._i<this._tasks.length;){if($=performance.now(),this._tasks[this._i]()||this._i++,$=Math.max(1,performance.now()-$),X=Math.max($,X),Z=J.timeRemaining(),X*1.5>Z){Y-$<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(Y-$))}ms`),this._start();return}Y=Z}this.clear()}},AB0=class extends W40{_requestCallback(J){return setTimeout(()=>J(this._createDeadline(16)))}_cancelCallback(J){clearTimeout(J)}_createDeadline(J){let $=performance.now()+J;return{timeRemaining:()=>Math.max(0,$-performance.now())}}},PB0=class extends W40{_requestCallback(J){return requestIdleCallback(J)}_cancelCallback(J){cancelIdleCallback(J)}},d_=!o_&&"requestIdleCallback"in window?PB0:AB0,DB0=class{constructor(){this._queue=new d_}set(J){this._queue.clear(),this._queue.enqueue(J)}flush(){this._queue.flush()}},hv=class extends a1{constructor(J,$,X,Y,Z,Q,G,q,U){super();this._rowCount=J,this._optionsService=X,this._charSizeService=Y,this._coreService=Z,this._coreBrowserService=q,this._renderer=this._register(new bH),this._pausedResizeTask=new DB0,this._observerDisposable=this._register(new bH),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new x0),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new x0),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new x0),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new x0),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new VB0((z,H)=>this._renderRows(z,H),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new RB0(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(R5(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(G.onResize(()=>this._fullRefresh())),this._register(G.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(Q.onDecorationRegistered(()=>this._fullRefresh())),this._register(Q.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(G.cols,G.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(G.buffer.y,G.buffer.y,!0))),this._register(U.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,$),this._register(this._coreBrowserService.onWindowChange((z)=>this._registerIntersectionObserver(z,$)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(J,$){if("IntersectionObserver"in J){let X=new J.IntersectionObserver((Y)=>this._handleIntersectionChange(Y[Y.length-1]),{threshold:0});X.observe($),this._observerDisposable.value=R5(()=>X.disconnect())}}_handleIntersectionChange(J){this._isPaused=J.isIntersecting===void 0?J.intersectionRatio===0:!J.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(J,$,X=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(J,$);return}let Y=this._syncOutputHandler.flush();Y&&(J=Math.min(J,Y.start),$=Math.max($,Y.end)),X||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(J,$,this._rowCount)}_renderRows(J,$){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(J,$);return}J=Math.min(J,this._rowCount-1),$=Math.min($,this._rowCount-1),this._renderer.value.renderRows(J,$),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:J,end:$}),this._onRender.fire({start:J,end:$}),this._isNextRenderRedrawOnly=!0}}resize(J,$){this._rowCount=$,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(J){this._renderer.value=J,this._renderer.value&&(this._renderer.value.onRequestRedraw(($)=>this.refreshRows($.start,$.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(J){return this._renderDebouncer.addRefreshCallback(J)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(J,$){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(J,$)):this._renderer.value.handleResize(J,$),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(J,$,X){this._selectionState.start=J,this._selectionState.end=$,this._selectionState.columnSelectMode=X,this._renderer.value?.handleSelectionChanged(J,$,X)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};hv=Z8([r0(2,g9),r0(3,r_),r0(4,_q),r0(5,uF),r0(6,f9),r0(7,nZ),r0(8,SH)],hv);var RB0=class{constructor(J,$,X){this._coreBrowserService=J,this._coreService=$,this._onTimeout=X,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(J,$){this._isBuffering?(this._start=Math.min(this._start,J),this._end=Math.max(this._end,$)):(this._start=J,this._end=$,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1000))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let J={start:this._start,end:this._end};return this._isBuffering=!1,J}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function MB0(J,$,X,Y){let Z=X.buffer.x,Q=X.buffer.y;if(!X.buffer.hasScrollback)return NB0(Z,Q,J,$,X,Y)+t_(Q,$,X,Y)+TB0(Z,Q,J,$,X,Y);let G;if(Q===$)return G=Z>J?"D":"C",gF(Math.abs(Z-J),fF(G,Y));G=Q>$?"D":"C";let q=Math.abs(Q-$),U=_B0(Q>$?J:Z,X)+(q-1)*X.cols+1+OB0(Q>$?Z:J,X);return gF(U,fF(G,Y))}function OB0(J,$){return J-1}function _B0(J,$){return $.cols-J}function NB0(J,$,X,Y,Z,Q){return t_($,Y,Z,Q).length===0?"":gF(F40(J,$,J,$-Oq($,Z),!1,Z).length,fF("D",Q))}function t_(J,$,X,Y){let Z=J-Oq(J,X),Q=$-Oq($,X),G=Math.abs(Z-Q)-wB0(J,$,X);return gF(G,fF(B40(J,$),Y))}function TB0(J,$,X,Y,Z,Q){let G;t_($,Y,Z,Q).length>0?G=Y-Oq(Y,Z):G=$;let q=Y,U=LB0(J,$,X,Y,Z,Q);return gF(F40(J,G,X,q,U==="C",Z).length,fF(U,Q))}function wB0(J,$,X){let Y=0,Z=J-Oq(J,X),Q=$-Oq($,X);for(let G=0;G<Math.abs(Z-Q);G++){let q=B40(J,$)==="A"?-1:1;X.buffer.lines.get(Z+q*G)?.isWrapped&&Y++}return Y}function Oq(J,$){let X=0,Y=$.buffer.lines.get(J),Z=Y?.isWrapped;for(;Z&&J>=0&&J<$.rows;)X++,Y=$.buffer.lines.get(--J),Z=Y?.isWrapped;return X}function LB0(J,$,X,Y,Z,Q){let G;return t_(X,Y,Z,Q).length>0?G=Y-Oq(Y,Z):G=$,J<X&&G<=Y||J>=X&&G<Y?"C":"D"}function B40(J,$){return J>$?"A":"B"}function F40(J,$,X,Y,Z,Q){let G=J,q=$,U="";for(;(G!==X||q!==Y)&&q>=0&&q<Q.buffer.lines.length;)G+=Z?1:-1,Z&&G>Q.cols-1?(U+=Q.buffer.translateBufferLineToString(q,!1,J,G),G=0,J=0,q++):!Z&&G<0&&(U+=Q.buffer.translateBufferLineToString(q,!1,0,J+1),G=Q.cols-1,J=G,q--);return U+Q.buffer.translateBufferLineToString(q,!1,J,G)}function fF(J,$){let X=$?"O":"[";return D0.ESC+X+J}function gF(J,$){J=Math.floor(J);let X="";for(let Y=0;Y<J;Y++)X+=$;return X}var kB0=class{constructor(J){this._bufferService=J,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let J=this.selectionStart[0]+this.selectionStartLength;return J>this._bufferService.cols?J%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(J/this._bufferService.cols)-1]:[J%this._bufferService.cols,this.selectionStart[1]+Math.floor(J/this._bufferService.cols)]:[J,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let J=this.selectionStart[0]+this.selectionStartLength;return J>this._bufferService.cols?[J%this._bufferService.cols,this.selectionStart[1]+Math.floor(J/this._bufferService.cols)]:[Math.max(J,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let J=this.selectionStart,$=this.selectionEnd;return!J||!$?!1:J[1]>$[1]||J[1]===$[1]&&J[0]>$[0]}handleTrim(J){return this.selectionStart&&(this.selectionStart[1]-=J),this.selectionEnd&&(this.selectionEnd[1]-=J),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function z90(J,$){if(J.start.y>J.end.y)throw Error(`Buffer range end (${J.end.x}, ${J.end.y}) cannot be before start (${J.start.x}, ${J.start.y})`);return $*(J.end.y-J.start.y)+(J.end.x-J.start.x+1)}var Hv=50,EB0=15,IB0=50,yB0=500,xB0=" ",bB0=new RegExp(xB0,"g"),fv=class extends a1{constructor(J,$,X,Y,Z,Q,G,q,U){super();this._element=J,this._screenElement=$,this._linkifier=X,this._bufferService=Y,this._coreService=Z,this._mouseService=Q,this._optionsService=G,this._renderService=q,this._coreBrowserService=U,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new sJ,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new x0),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new x0),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new x0),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new x0),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=(z)=>this._handleMouseMove(z),this._mouseUpListener=(z)=>this._handleMouseUp(z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim((z)=>this._handleTrim(z)),this._register(this._bufferService.buffers.onBufferActivate((z)=>this._handleBufferActivate(z))),this.enable(),this._model=new kB0(this._bufferService),this._activeSelectionMode=0,this._register(R5(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize((z)=>{z.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let J=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!J||!$?!1:J[0]!==$[0]||J[1]!==$[1]}get selectionText(){let J=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;if(!J||!$)return"";let X=this._bufferService.buffer,Y=[];if(this._activeSelectionMode===3){if(J[0]===$[0])return"";let Z=J[0]<$[0]?J[0]:$[0],Q=J[0]<$[0]?$[0]:J[0];for(let G=J[1];G<=$[1];G++){let q=X.translateBufferLineToString(G,!0,Z,Q);Y.push(q)}}else{let Z=J[1]===$[1]?$[0]:void 0;Y.push(X.translateBufferLineToString(J[1],!0,J[0],Z));for(let Q=J[1]+1;Q<=$[1]-1;Q++){let G=X.lines.get(Q),q=X.translateBufferLineToString(Q,!0);G?.isWrapped?Y[Y.length-1]+=q:Y.push(q)}if(J[1]!==$[1]){let Q=X.lines.get($[1]),G=X.translateBufferLineToString($[1],!0,0,$[0]);Q&&Q.isWrapped?Y[Y.length-1]+=G:Y.push(G)}}return Y.map((Z)=>Z.replace(bB0," ")).join(j40?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(J){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),Xh&&J&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(J){let $=this._getMouseBufferCoords(J),X=this._model.finalSelectionStart,Y=this._model.finalSelectionEnd;return!X||!Y||!$?!1:this._areCoordsInSelection($,X,Y)}isCellInSelection(J,$){let X=this._model.finalSelectionStart,Y=this._model.finalSelectionEnd;return!X||!Y?!1:this._areCoordsInSelection([J,$],X,Y)}_areCoordsInSelection(J,$,X){return J[1]>$[1]&&J[1]<X[1]||$[1]===X[1]&&J[1]===$[1]&&J[0]>=$[0]&&J[0]<X[0]||$[1]<X[1]&&J[1]===X[1]&&J[0]<X[0]||$[1]<X[1]&&J[1]===$[1]&&J[0]>=$[0]}_selectWordAtCursor(J,$){let X=this._linkifier.currentLink?.link?.range;if(X)return this._model.selectionStart=[X.start.x-1,X.start.y-1],this._model.selectionStartLength=z90(X,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let Y=this._getMouseBufferCoords(J);return Y?(this._selectWordAt(Y,$),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(J,$){this._model.clearSelection(),J=Math.max(J,0),$=Math.min($,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,J],this._model.selectionEnd=[this._bufferService.cols,$],this.refresh(),this._onSelectionChange.fire()}_handleTrim(J){this._model.handleTrim(J)&&this.refresh()}_getMouseBufferCoords(J){let $=this._mouseService.getCoords(J,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if($)return $[0]--,$[1]--,$[1]+=this._bufferService.buffer.ydisp,$}_getMouseEventScrollAmount(J){let $=$h(this._coreBrowserService.window,J,this._screenElement)[1],X=this._renderService.dimensions.css.canvas.height;return $>=0&&$<=X?0:($>X&&($-=X),$=Math.min(Math.max($,-Hv),Hv),$/=Hv,$/Math.abs($)+Math.round($*(EB0-1)))}shouldForceSelection(J){return l_?J.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:J.shiftKey}handleMouseDown(J){if(this._mouseDownTimeStamp=J.timeStamp,!(J.button===2&&this.hasSelection)&&J.button===0){if(!this._enabled){if(!this.shouldForceSelection(J))return;J.stopPropagation()}J.preventDefault(),this._dragScrollAmount=0,this._enabled&&J.shiftKey?this._handleIncrementalClick(J):J.detail===1?this._handleSingleClick(J):J.detail===2?this._handleDoubleClick(J):J.detail===3&&this._handleTripleClick(J),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),IB0)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(J){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(J))}_handleSingleClick(J){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(J)?3:0,this._model.selectionStart=this._getMouseBufferCoords(J),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let $=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);$&&$.length!==this._model.selectionStart[0]&&$.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(J){this._selectWordAtCursor(J,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(J){let $=this._getMouseBufferCoords(J);$&&(this._activeSelectionMode=2,this._selectLineAt($[1]))}shouldColumnSelect(J){return J.altKey&&!(l_&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(J){if(J.stopImmediatePropagation(),!this._model.selectionStart)return;let $=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(J),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(J),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let X=this._bufferService.buffer;if(this._model.selectionEnd[1]<X.lines.length){let Y=X.lines.get(this._model.selectionEnd[1]);Y&&Y.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!$||$[0]!==this._model.selectionEnd[0]||$[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let J=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(J.ydisp+this._bufferService.rows,J.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=J.ydisp),this.refresh()}}_handleMouseUp(J){let $=J.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&$<yB0&&J.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let X=this._mouseService.getCoords(J,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(X&&X[0]!==void 0&&X[1]!==void 0){let Y=MB0(X[0]-1,X[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(Y,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let J=this._model.finalSelectionStart,$=this._model.finalSelectionEnd,X=!!J&&!!$&&(J[0]!==$[0]||J[1]!==$[1]);if(!X){this._oldHasSelection&&this._fireOnSelectionChange(J,$,X);return}!J||!$||(!this._oldSelectionStart||!this._oldSelectionEnd||J[0]!==this._oldSelectionStart[0]||J[1]!==this._oldSelectionStart[1]||$[0]!==this._oldSelectionEnd[0]||$[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(J,$,X)}_fireOnSelectionChange(J,$,X){this._oldSelectionStart=J,this._oldSelectionEnd=$,this._oldHasSelection=X,this._onSelectionChange.fire()}_handleBufferActivate(J){this.clearSelection(),this._trimListener.dispose(),this._trimListener=J.activeBuffer.lines.onTrim(($)=>this._handleTrim($))}_convertViewportColToCharacterIndex(J,$){let X=$;for(let Y=0;$>=Y;Y++){let Z=J.loadCell(Y,this._workCell).getChars().length;this._workCell.getWidth()===0?X--:Z>1&&$!==Y&&(X+=Z-1)}return X}setSelection(J,$,X){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[J,$],this._model.selectionStartLength=X,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(J){this._isClickInSelection(J)||(this._selectWordAtCursor(J,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(J,$,X=!0,Y=!0){if(J[0]>=this._bufferService.cols)return;let Z=this._bufferService.buffer,Q=Z.lines.get(J[1]);if(!Q)return;let G=Z.translateBufferLineToString(J[1],!1),q=this._convertViewportColToCharacterIndex(Q,J[0]),U=q,z=J[0]-q,H=0,j=0,V=0,W=0;if(G.charAt(q)===" "){for(;q>0&&G.charAt(q-1)===" ";)q--;for(;U<G.length&&G.charAt(U+1)===" ";)U++}else{let P=J[0],A=J[0];Q.getWidth(P)===0&&(H++,P--),Q.getWidth(A)===2&&(j++,A++);let D=Q.getString(A).length;for(D>1&&(W+=D-1,U+=D-1);P>0&&q>0&&!this._isCharWordSeparator(Q.loadCell(P-1,this._workCell));){Q.loadCell(P-1,this._workCell);let M=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,P--):M>1&&(V+=M-1,q-=M-1),q--,P--}for(;A<Q.length&&U+1<G.length&&!this._isCharWordSeparator(Q.loadCell(A+1,this._workCell));){Q.loadCell(A+1,this._workCell);let M=this._workCell.getChars().length;this._workCell.getWidth()===2?(j++,A++):M>1&&(W+=M-1,U+=M-1),U++,A++}}U++;let B=q+z-H+V,K=Math.min(this._bufferService.cols,U-q+H+j-V-W);if(!(!$&&G.slice(q,U).trim()==="")){if(X&&B===0&&Q.getCodePoint(0)!==32){let P=Z.lines.get(J[1]-1);if(P&&Q.isWrapped&&P.getCodePoint(this._bufferService.cols-1)!==32){let A=this._getWordAt([this._bufferService.cols-1,J[1]-1],!1,!0,!1);if(A){let D=this._bufferService.cols-A.start;B-=D,K+=D}}}if(Y&&B+K===this._bufferService.cols&&Q.getCodePoint(this._bufferService.cols-1)!==32){let P=Z.lines.get(J[1]+1);if(P?.isWrapped&&P.getCodePoint(0)!==32){let A=this._getWordAt([0,J[1]+1],!1,!1,!0);A&&(K+=A.length)}}return{start:B,length:K}}}_selectWordAt(J,$){let X=this._getWordAt(J,$);if(X){for(;X.start<0;)X.start+=this._bufferService.cols,J[1]--;this._model.selectionStart=[X.start,J[1]],this._model.selectionStartLength=X.length}}_selectToWordAt(J){let $=this._getWordAt(J,!0);if($){let X=J[1];for(;$.start<0;)$.start+=this._bufferService.cols,X--;if(!this._model.areSelectionValuesReversed())for(;$.start+$.length>this._bufferService.cols;)$.length-=this._bufferService.cols,X++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?$.start:$.start+$.length,X]}}_isCharWordSeparator(J){return J.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(J.getChars())>=0}_selectLineAt(J){let $=this._bufferService.buffer.getWrappedRangeForLine(J),X={start:{x:0,y:$.first},end:{x:this._bufferService.cols-1,y:$.last}};this._model.selectionStart=[0,$.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=z90(X,this._bufferService.cols)}};fv=Z8([r0(3,f9),r0(4,_q),r0(5,rv),r0(6,g9),r0(7,oZ),r0(8,nZ)],fv);var H90=class{constructor(){this._data={}}set(J,$,X){this._data[J]||(this._data[J]={}),this._data[J][$]=X}get(J,$){return this._data[J]?this._data[J][$]:void 0}clear(){this._data={}}},j90=class{constructor(){this._color=new H90,this._css=new H90}setCss(J,$,X){this._css.set(J,$,X)}getCss(J,$){return this._css.get(J,$)}setColor(J,$,X){this._color.set(J,$,X)}getColor(J,$){return this._color.get(J,$)}clear(){this._color.clear(),this._css.clear()}},J7=Object.freeze((()=>{let J=[a5.toColor("#2e3436"),a5.toColor("#cc0000"),a5.toColor("#4e9a06"),a5.toColor("#c4a000"),a5.toColor("#3465a4"),a5.toColor("#75507b"),a5.toColor("#06989a"),a5.toColor("#d3d7cf"),a5.toColor("#555753"),a5.toColor("#ef2929"),a5.toColor("#8ae234"),a5.toColor("#fce94f"),a5.toColor("#729fcf"),a5.toColor("#ad7fa8"),a5.toColor("#34e2e2"),a5.toColor("#eeeeec")],$=[0,95,135,175,215,255];for(let X=0;X<216;X++){let Y=$[X/36%6|0],Z=$[X/6%6|0],Q=$[X%6];J.push({css:g8.toCss(Y,Z,Q),rgba:g8.toRgba(Y,Z,Q)})}for(let X=0;X<24;X++){let Y=8+X*10;J.push({css:g8.toCss(Y,Y,Y),rgba:g8.toRgba(Y,Y,Y)})}return J})()),Aq=a5.toColor("#ffffff"),yF=a5.toColor("#000000"),V90=a5.toColor("#ffffff"),W90=yF,TF={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},SB0=Aq,gv=class extends a1{constructor(J){super();this._optionsService=J,this._contrastCache=new j90,this._halfContrastCache=new j90,this._onChangeColors=this._register(new x0),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Aq,background:yF,cursor:V90,cursorAccent:W90,selectionForeground:void 0,selectionBackgroundTransparent:TF,selectionBackgroundOpaque:D5.blend(yF,TF),selectionInactiveBackgroundTransparent:TF,selectionInactiveBackgroundOpaque:D5.blend(yF,TF),scrollbarSliderBackground:D5.opacity(Aq,0.2),scrollbarSliderHoverBackground:D5.opacity(Aq,0.4),scrollbarSliderActiveBackground:D5.opacity(Aq,0.5),overviewRulerBorder:Aq,ansi:J7.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(J={}){let $=this._colors;if($.foreground=X5(J.foreground,Aq),$.background=X5(J.background,yF),$.cursor=D5.blend($.background,X5(J.cursor,V90)),$.cursorAccent=D5.blend($.background,X5(J.cursorAccent,W90)),$.selectionBackgroundTransparent=X5(J.selectionBackground,TF),$.selectionBackgroundOpaque=D5.blend($.background,$.selectionBackgroundTransparent),$.selectionInactiveBackgroundTransparent=X5(J.selectionInactiveBackground,$.selectionBackgroundTransparent),$.selectionInactiveBackgroundOpaque=D5.blend($.background,$.selectionInactiveBackgroundTransparent),$.selectionForeground=J.selectionForeground?X5(J.selectionForeground,G90):void 0,$.selectionForeground===G90&&($.selectionForeground=void 0),D5.isOpaque($.selectionBackgroundTransparent)&&($.selectionBackgroundTransparent=D5.opacity($.selectionBackgroundTransparent,0.3)),D5.isOpaque($.selectionInactiveBackgroundTransparent)&&($.selectionInactiveBackgroundTransparent=D5.opacity($.selectionInactiveBackgroundTransparent,0.3)),$.scrollbarSliderBackground=X5(J.scrollbarSliderBackground,D5.opacity($.foreground,0.2)),$.scrollbarSliderHoverBackground=X5(J.scrollbarSliderHoverBackground,D5.opacity($.foreground,0.4)),$.scrollbarSliderActiveBackground=X5(J.scrollbarSliderActiveBackground,D5.opacity($.foreground,0.5)),$.overviewRulerBorder=X5(J.overviewRulerBorder,SB0),$.ansi=J7.slice(),$.ansi[0]=X5(J.black,J7[0]),$.ansi[1]=X5(J.red,J7[1]),$.ansi[2]=X5(J.green,J7[2]),$.ansi[3]=X5(J.yellow,J7[3]),$.ansi[4]=X5(J.blue,J7[4]),$.ansi[5]=X5(J.magenta,J7[5]),$.ansi[6]=X5(J.cyan,J7[6]),$.ansi[7]=X5(J.white,J7[7]),$.ansi[8]=X5(J.brightBlack,J7[8]),$.ansi[9]=X5(J.brightRed,J7[9]),$.ansi[10]=X5(J.brightGreen,J7[10]),$.ansi[11]=X5(J.brightYellow,J7[11]),$.ansi[12]=X5(J.brightBlue,J7[12]),$.ansi[13]=X5(J.brightMagenta,J7[13]),$.ansi[14]=X5(J.brightCyan,J7[14]),$.ansi[15]=X5(J.brightWhite,J7[15]),J.extendedAnsi){let X=Math.min($.ansi.length-16,J.extendedAnsi.length);for(let Y=0;Y<X;Y++)$.ansi[Y+16]=X5(J.extendedAnsi[Y],J7[Y+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(J){this._restoreColor(J),this._onChangeColors.fire(this.colors)}_restoreColor(J){if(J===void 0){for(let $=0;$<this._restoreColors.ansi.length;++$)this._colors.ansi[$]=this._restoreColors.ansi[$];return}switch(J){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[J]=this._restoreColors.ansi[J]}}modifyColors(J){J(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};gv=Z8([r0(0,g9)],gv);function X5(J,$){if(J!==void 0)try{return a5.toColor(J)}catch{}return $}var CB0=class{constructor(...J){this._entries=new Map;for(let[$,X]of J)this.set($,X)}set(J,$){let X=this._entries.get(J);return this._entries.set(J,$),X}forEach(J){for(let[$,X]of this._entries.entries())J($,X)}has(J){return this._entries.has(J)}get(J){return this._entries.get(J)}},vB0=class{constructor(){this._services=new CB0,this._services.set(av,this)}setService(J,$){this._services.set(J,$)}getService(J){return this._services.get(J)}createInstance(J,...$){let X=XV0(J).sort((Q,G)=>Q.index-G.index),Y=[];for(let Q of X){let G=this._services.get(Q.id);if(!G)throw Error(`[createInstance] ${J.name} depends on UNKNOWN service ${Q.id._id}.`);Y.push(G)}let Z=X.length>0?X[0].index:$.length;if($.length!==Z)throw Error(`[createInstance] First service dependency of ${J.name} at position ${Z+1} conflicts with ${$.length} static arguments`);return new J(...$,...Y)}},hB0={trace:0,debug:1,info:2,warn:3,error:4,off:5},fB0="xterm.js: ",pv=class extends a1{constructor(J){super();this._optionsService=J,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),gB0=this}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=hB0[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(J){for(let $=0;$<J.length;$++)typeof J[$]=="function"&&(J[$]=J[$]())}_log(J,$,X){this._evalLazyOptionalParams(X),J.call(console,(this._optionsService.options.logger?"":fB0)+$,...X)}trace(J,...$){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,J,$)}debug(J,...$){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,J,$)}info(J,...$){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,J,$)}warn(J,...$){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,J,$)}error(J,...$){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,J,$)}};pv=Z8([r0(0,g9)],pv);var gB0,B90=class extends a1{constructor(J){super();this._maxLength=J,this.onDeleteEmitter=this._register(new x0),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new x0),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new x0),this.onTrim=this.onTrimEmitter.event,this._array=Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(J){if(this._maxLength===J)return;let $=Array(J);for(let X=0;X<Math.min(J,this.length);X++)$[X]=this._array[this._getCyclicIndex(X)];this._array=$,this._maxLength=J,this._startIndex=0}get length(){return this._length}set length(J){if(J>this._length)for(let $=this._length;$<J;$++)this._array[$]=void 0;this._length=J}get(J){return this._array[this._getCyclicIndex(J)]}set(J,$){this._array[this._getCyclicIndex(J)]=$}push(J){this._array[this._getCyclicIndex(this._length)]=J,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(J,$,...X){if($){for(let Y=J;Y<this._length-$;Y++)this._array[this._getCyclicIndex(Y)]=this._array[this._getCyclicIndex(Y+$)];this._length-=$,this.onDeleteEmitter.fire({index:J,amount:$})}for(let Y=this._length-1;Y>=J;Y--)this._array[this._getCyclicIndex(Y+X.length)]=this._array[this._getCyclicIndex(Y)];for(let Y=0;Y<X.length;Y++)this._array[this._getCyclicIndex(J+Y)]=X[Y];if(X.length&&this.onInsertEmitter.fire({index:J,amount:X.length}),this._length+X.length>this._maxLength){let Y=this._length+X.length-this._maxLength;this._startIndex+=Y,this._length=this._maxLength,this.onTrimEmitter.fire(Y)}else this._length+=X.length}trimStart(J){J>this._length&&(J=this._length),this._startIndex+=J,this._length-=J,this.onTrimEmitter.fire(J)}shiftElements(J,$,X){if(!($<=0)){if(J<0||J>=this._length)throw Error("start argument out of range");if(J+X<0)throw Error("Cannot shift elements in list beyond index 0");if(X>0){for(let Z=$-1;Z>=0;Z--)this.set(J+Z+X,this.get(J+Z));let Y=J+$+X-this._length;if(Y>0)for(this._length+=Y;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let Y=0;Y<$;Y++)this.set(J+Y+X,this.get(J+Y))}}_getCyclicIndex(J){return(this._startIndex+J)%this._maxLength}},J6=3,f8=Object.freeze(new mF),E_=0,jv=2,xF=class J{constructor($,X,Y=!1){this.isWrapped=Y,this._combined={},this._extendedAttrs={},this._data=new Uint32Array($*J6);let Z=X||sJ.fromCharData([0,f90,1,0]);for(let Q=0;Q<$;++Q)this.setCell(Q,Z);this.length=$}get($){let X=this._data[$*J6+0],Y=X&2097151;return[this._data[$*J6+1],X&2097152?this._combined[$]:Y?r2(Y):"",X>>22,X&2097152?this._combined[$].charCodeAt(this._combined[$].length-1):Y]}set($,X){this._data[$*J6+1]=X[0],X[1].length>1?(this._combined[$]=X[1],this._data[$*J6+0]=$|2097152|X[2]<<22):this._data[$*J6+0]=X[1].charCodeAt(0)|X[2]<<22}getWidth($){return this._data[$*J6+0]>>22}hasWidth($){return this._data[$*J6+0]&12582912}getFg($){return this._data[$*J6+1]}getBg($){return this._data[$*J6+2]}hasContent($){return this._data[$*J6+0]&4194303}getCodePoint($){let X=this._data[$*J6+0];return X&2097152?this._combined[$].charCodeAt(this._combined[$].length-1):X&2097151}isCombined($){return this._data[$*J6+0]&2097152}getString($){let X=this._data[$*J6+0];return X&2097152?this._combined[$]:X&2097151?r2(X&2097151):""}isProtected($){return this._data[$*J6+2]&536870912}loadCell($,X){return E_=$*J6,X.content=this._data[E_+0],X.fg=this._data[E_+1],X.bg=this._data[E_+2],X.content&2097152&&(X.combinedData=this._combined[$]),X.bg&268435456&&(X.extended=this._extendedAttrs[$]),X}setCell($,X){X.content&2097152&&(this._combined[$]=X.combinedData),X.bg&268435456&&(this._extendedAttrs[$]=X.extended),this._data[$*J6+0]=X.content,this._data[$*J6+1]=X.fg,this._data[$*J6+2]=X.bg}setCellFromCodepoint($,X,Y,Z){Z.bg&268435456&&(this._extendedAttrs[$]=Z.extended),this._data[$*J6+0]=X|Y<<22,this._data[$*J6+1]=Z.fg,this._data[$*J6+2]=Z.bg}addCodepointToCell($,X,Y){let Z=this._data[$*J6+0];Z&2097152?this._combined[$]+=r2(X):Z&2097151?(this._combined[$]=r2(Z&2097151)+r2(X),Z&=-2097152,Z|=2097152):Z=X|4194304,Y&&(Z&=-12582913,Z|=Y<<22),this._data[$*J6+0]=Z}insertCells($,X,Y){if($%=this.length,$&&this.getWidth($-1)===2&&this.setCellFromCodepoint($-1,0,1,Y),X<this.length-$){let Z=new sJ;for(let Q=this.length-$-X-1;Q>=0;--Q)this.setCell($+X+Q,this.loadCell($+Q,Z));for(let Q=0;Q<X;++Q)this.setCell($+Q,Y)}else for(let Z=$;Z<this.length;++Z)this.setCell(Z,Y);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,Y)}deleteCells($,X,Y){if($%=this.length,X<this.length-$){let Z=new sJ;for(let Q=0;Q<this.length-$-X;++Q)this.setCell($+Q,this.loadCell($+X+Q,Z));for(let Q=this.length-X;Q<this.length;++Q)this.setCell(Q,Y)}else for(let Z=$;Z<this.length;++Z)this.setCell(Z,Y);$&&this.getWidth($-1)===2&&this.setCellFromCodepoint($-1,0,1,Y),this.getWidth($)===0&&!this.hasContent($)&&this.setCellFromCodepoint($,0,1,Y)}replaceCells($,X,Y,Z=!1){if(Z){for($&&this.getWidth($-1)===2&&!this.isProtected($-1)&&this.setCellFromCodepoint($-1,0,1,Y),X<this.length&&this.getWidth(X-1)===2&&!this.isProtected(X)&&this.setCellFromCodepoint(X,0,1,Y);$<X&&$<this.length;)this.isProtected($)||this.setCell($,Y),$++;return}for($&&this.getWidth($-1)===2&&this.setCellFromCodepoint($-1,0,1,Y),X<this.length&&this.getWidth(X-1)===2&&this.setCellFromCodepoint(X,0,1,Y);$<X&&$<this.length;)this.setCell($++,Y)}resize($,X){if($===this.length)return this._data.length*4*jv<this._data.buffer.byteLength;let Y=$*J6;if($>this.length){if(this._data.buffer.byteLength>=Y*4)this._data=new Uint32Array(this._data.buffer,0,Y);else{let Z=new Uint32Array(Y);Z.set(this._data),this._data=Z}for(let Z=this.length;Z<$;++Z)this.setCell(Z,X)}else{this._data=this._data.subarray(0,Y);let Z=Object.keys(this._combined);for(let G=0;G<Z.length;G++){let q=parseInt(Z[G],10);q>=$&&delete this._combined[q]}let Q=Object.keys(this._extendedAttrs);for(let G=0;G<Q.length;G++){let q=parseInt(Q[G],10);q>=$&&delete this._extendedAttrs[q]}}return this.length=$,Y*4*jv<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*jv<this._data.buffer.byteLength){let $=new Uint32Array(this._data.length);return $.set(this._data),this._data=$,1}return 0}fill($,X=!1){if(X){for(let Y=0;Y<this.length;++Y)this.isProtected(Y)||this.setCell(Y,$);return}this._combined={},this._extendedAttrs={};for(let Y=0;Y<this.length;++Y)this.setCell(Y,$)}copyFrom($){this.length!==$.length?this._data=new Uint32Array($._data):this._data.set($._data),this.length=$.length,this._combined={};for(let X in $._combined)this._combined[X]=$._combined[X];this._extendedAttrs={};for(let X in $._extendedAttrs)this._extendedAttrs[X]=$._extendedAttrs[X];this.isWrapped=$.isWrapped}clone(){let $=new J(0);$._data=new Uint32Array(this._data),$.length=this.length;for(let X in this._combined)$._combined[X]=this._combined[X];for(let X in this._extendedAttrs)$._extendedAttrs[X]=this._extendedAttrs[X];return $.isWrapped=this.isWrapped,$}getTrimmedLength(){for(let $=this.length-1;$>=0;--$)if(this._data[$*J6+0]&4194303)return $+(this._data[$*J6+0]>>22);return 0}getNoBgTrimmedLength(){for(let $=this.length-1;$>=0;--$)if(this._data[$*J6+0]&4194303||this._data[$*J6+2]&50331648)return $+(this._data[$*J6+0]>>22);return 0}copyCellsFrom($,X,Y,Z,Q){let G=$._data;if(Q)for(let U=Z-1;U>=0;U--){for(let z=0;z<J6;z++)this._data[(Y+U)*J6+z]=G[(X+U)*J6+z];G[(X+U)*J6+2]&268435456&&(this._extendedAttrs[Y+U]=$._extendedAttrs[X+U])}else for(let U=0;U<Z;U++){for(let z=0;z<J6;z++)this._data[(Y+U)*J6+z]=G[(X+U)*J6+z];G[(X+U)*J6+2]&268435456&&(this._extendedAttrs[Y+U]=$._extendedAttrs[X+U])}let q=Object.keys($._combined);for(let U=0;U<q.length;U++){let z=parseInt(q[U],10);z>=X&&(this._combined[z-X+Y]=$._combined[z])}}translateToString($,X,Y,Z){X=X??0,Y=Y??this.length,$&&(Y=Math.min(Y,this.getTrimmedLength())),Z&&(Z.length=0);let Q="";for(;X<Y;){let G=this._data[X*J6+0],q=G&2097151,U=G&2097152?this._combined[X]:q?r2(q):i2;if(Q+=U,Z)for(let z=0;z<U.length;++z)Z.push(X);X+=G>>22||1}return Z&&Z.push(X),Q}};function pB0(J,$,X,Y,Z,Q){let G=[];for(let q=0;q<J.length-1;q++){let U=q,z=J.get(++U);if(!z.isWrapped)continue;let H=[J.get(q)];for(;U<J.length&&z.isWrapped;)H.push(z),z=J.get(++U);if(!Q&&Y>=q&&Y<U){q+=H.length-1;continue}let j=0,V=pF(H,j,$),W=1,B=0;for(;W<H.length;){let P=pF(H,W,$),A=P-B,D=X-V,M=Math.min(A,D);H[j].copyCellsFrom(H[W],B,V,M,!1),V+=M,V===X&&(j++,V=0),B+=M,B===P&&(W++,B=0),V===0&&j!==0&&H[j-1].getWidth(X-1)===2&&(H[j].copyCellsFrom(H[j-1],X-1,V++,1,!1),H[j-1].setCell(X-1,Z))}H[j].replaceCells(V,X,Z);let K=0;for(let P=H.length-1;P>0&&(P>j||H[P].getTrimmedLength()===0);P--)K++;K>0&&(G.push(q+H.length-K),G.push(K)),q+=H.length-1}return G}function mB0(J,$){let X=[],Y=0,Z=$[Y],Q=0;for(let G=0;G<J.length;G++)if(Z===G){let q=$[++Y];J.onDeleteEmitter.fire({index:G-Q,amount:q}),G+=q-1,Q+=q,Z=$[++Y]}else X.push(G);return{layout:X,countRemoved:Q}}function uB0(J,$){let X=[];for(let Y=0;Y<$.length;Y++)X.push(J.get($[Y]));for(let Y=0;Y<X.length;Y++)J.set(Y,X[Y]);J.length=$.length}function cB0(J,$,X){let Y=[],Z=J.map((U,z)=>pF(J,z,$)).reduce((U,z)=>U+z),Q=0,G=0,q=0;for(;q<Z;){if(Z-q<X){Y.push(Z-q);break}Q+=X;let U=pF(J,G,$);Q>U&&(Q-=U,G++);let z=J[G].getWidth(Q-1)===2;z&&Q--;let H=z?X-1:X;Y.push(H),q+=H}return Y}function pF(J,$,X){if($===J.length-1)return J[$].getTrimmedLength();let Y=!J[$].hasContent(X-1)&&J[$].getWidth(X-1)===1,Z=J[$+1].getWidth(0)===2;return Y&&Z?X-1:X}var K40=class J{constructor($){this.line=$,this.isDisposed=!1,this._disposables=[],this._id=J._nextId++,this._onDispose=this.register(new x0),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Mq(this._disposables),this._disposables.length=0)}register($){return this._disposables.push($),$}};K40._nextId=1;var lB0=K40,X7={},Pq=X7.B;X7[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"};X7.A={"#":"£"};X7.B=void 0;X7[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"};X7.C=X7[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"};X7.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"};X7.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"};X7.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"};X7.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"};X7.E=X7[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"};X7.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"};X7.H=X7[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"};X7["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"};var F90=4294967295,K90=class{constructor(J,$,X){this._hasScrollback=J,this._optionsService=$,this._bufferService=X,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f8.clone(),this.savedCharset=Pq,this.markers=[],this._nullCell=sJ.fromCharData([0,f90,1,0]),this._whitespaceCell=sJ.fromCharData([0,i2,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new d_,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new B90(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(J){return J?(this._nullCell.fg=J.fg,this._nullCell.bg=J.bg,this._nullCell.extended=J.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f_),this._nullCell}getWhitespaceCell(J){return J?(this._whitespaceCell.fg=J.fg,this._whitespaceCell.bg=J.bg,this._whitespaceCell.extended=J.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f_),this._whitespaceCell}getBlankLine(J,$){return new xF(this._bufferService.cols,this.getNullCell(J),$)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let J=this.ybase+this.y-this.ydisp;return J>=0&&J<this._rows}_getCorrectBufferLength(J){if(!this._hasScrollback)return J;let $=J+this._optionsService.rawOptions.scrollback;return $>F90?F90:$}fillViewportRows(J){if(this.lines.length===0){J===void 0&&(J=f8);let $=this._rows;for(;$--;)this.lines.push(this.getBlankLine(J))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new B90(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(J,$){let X=this.getNullCell(f8),Y=0,Z=this._getCorrectBufferLength($);if(Z>this.lines.maxLength&&(this.lines.maxLength=Z),this.lines.length>0){if(this._cols<J)for(let G=0;G<this.lines.length;G++)Y+=+this.lines.get(G).resize(J,X);let Q=0;if(this._rows<$)for(let G=this._rows;G<$;G++)this.lines.length<$+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new xF(J,X)):this.ybase>0&&this.lines.length<=this.ybase+this.y+Q+1?(this.ybase--,Q++,this.ydisp>0&&this.ydisp--):this.lines.push(new xF(J,X)));else for(let G=this._rows;G>$;G--)this.lines.length>$+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(Z<this.lines.maxLength){let G=this.lines.length-Z;G>0&&(this.lines.trimStart(G),this.ybase=Math.max(this.ybase-G,0),this.ydisp=Math.max(this.ydisp-G,0),this.savedY=Math.max(this.savedY-G,0)),this.lines.maxLength=Z}this.x=Math.min(this.x,J-1),this.y=Math.min(this.y,$-1),Q&&(this.y+=Q),this.savedX=Math.min(this.savedX,J-1),this.scrollTop=0}if(this.scrollBottom=$-1,this._isReflowEnabled&&(this._reflow(J,$),this._cols>J))for(let Q=0;Q<this.lines.length;Q++)Y+=+this.lines.get(Q).resize(J,X);this._cols=J,this._rows=$,this._memoryCleanupQueue.clear(),Y>0.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let J=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,J=!1);let $=0;for(;this._memoryCleanupPosition<this.lines.length;)if($+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),$>100)return!0;return J}get _isReflowEnabled(){let J=this._optionsService.rawOptions.windowsPty;return J&&J.buildNumber?this._hasScrollback&&J.backend==="conpty"&&J.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(J,$){this._cols!==J&&(J>this._cols?this._reflowLarger(J,$):this._reflowSmaller(J,$))}_reflowLarger(J,$){let X=this._optionsService.rawOptions.reflowCursorLine,Y=pB0(this.lines,this._cols,J,this.ybase+this.y,this.getNullCell(f8),X);if(Y.length>0){let Z=mB0(this.lines,Y);uB0(this.lines,Z.layout),this._reflowLargerAdjustViewport(J,$,Z.countRemoved)}}_reflowLargerAdjustViewport(J,$,X){let Y=this.getNullCell(f8),Z=X;for(;Z-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<$&&this.lines.push(new xF(J,Y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-X,0)}_reflowSmaller(J,$){let X=this._optionsService.rawOptions.reflowCursorLine,Y=this.getNullCell(f8),Z=[],Q=0;for(let G=this.lines.length-1;G>=0;G--){let q=this.lines.get(G);if(!q||!q.isWrapped&&q.getTrimmedLength()<=J)continue;let U=[q];for(;q.isWrapped&&G>0;)q=this.lines.get(--G),U.unshift(q);if(!X){let M=this.ybase+this.y;if(M>=G&&M<G+U.length)continue}let z=U[U.length-1].getTrimmedLength(),H=cB0(U,this._cols,J),j=H.length-U.length,V;this.ybase===0&&this.y!==this.lines.length-1?V=Math.max(0,this.y-this.lines.maxLength+j):V=Math.max(0,this.lines.length-this.lines.maxLength+j);let W=[];for(let M=0;M<j;M++){let R=this.getBlankLine(f8,!0);W.push(R)}W.length>0&&(Z.push({start:G+U.length+Q,newLines:W}),Q+=W.length),U.push(...W);let B=H.length-1,K=H[B];K===0&&(B--,K=H[B]);let P=U.length-j-1,A=z;for(;P>=0;){let M=Math.min(A,K);if(U[B]===void 0)break;if(U[B].copyCellsFrom(U[P],A-M,K-M,M,!0),K-=M,K===0&&(B--,K=H[B]),A-=M,A===0){P--;let R=Math.max(P,0);A=pF(U,R,this._cols)}}for(let M=0;M<U.length;M++)H[M]<J&&U[M].setCell(H[M],Y);let D=j-V;for(;D-- >0;)this.ybase===0?this.y<$-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+Q)-$&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+j,this.ybase+$-1)}if(Z.length>0){let G=[],q=[];for(let K=0;K<this.lines.length;K++)q.push(this.lines.get(K));let U=this.lines.length,z=U-1,H=0,j=Z[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+Q);let V=0;for(let K=Math.min(this.lines.maxLength-1,U+Q-1);K>=0;K--)if(j&&j.start>z+V){for(let P=j.newLines.length-1;P>=0;P--)this.lines.set(K--,j.newLines[P]);K++,G.push({index:z+1,amount:j.newLines.length}),V+=j.newLines.length,j=Z[++H]}else this.lines.set(K,q[z--]);let W=0;for(let K=G.length-1;K>=0;K--)G[K].index+=W,this.lines.onInsertEmitter.fire(G[K]),W+=G[K].amount;let B=Math.max(0,U+Q-this.lines.maxLength);B>0&&this.lines.onTrimEmitter.fire(B)}}translateBufferLineToString(J,$,X=0,Y){let Z=this.lines.get(J);return Z?Z.translateToString($,X,Y):""}getWrappedRangeForLine(J){let $=J,X=J;for(;$>0&&this.lines.get($).isWrapped;)$--;for(;X+1<this.lines.length&&this.lines.get(X+1).isWrapped;)X++;return{first:$,last:X}}setupTabStops(J){for(J!=null?this.tabs[J]||(J=this.prevStop(J)):(this.tabs={},J=0);J<this._cols;J+=this._optionsService.rawOptions.tabStopWidth)this.tabs[J]=!0}prevStop(J){for(J==null&&(J=this.x);!this.tabs[--J]&&J>0;);return J>=this._cols?this._cols-1:J<0?0:J}nextStop(J){for(J==null&&(J=this.x);!this.tabs[++J]&&J<this._cols;);return J>=this._cols?this._cols-1:J<0?0:J}clearMarkers(J){this._isClearing=!0;for(let $=0;$<this.markers.length;$++)this.markers[$].line===J&&(this.markers[$].dispose(),this.markers.splice($--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let J=0;J<this.markers.length;J++)this.markers[J].dispose();this.markers.length=0,this._isClearing=!1}addMarker(J){let $=new lB0(J);return this.markers.push($),$.register(this.lines.onTrim((X)=>{$.line-=X,$.line<0&&$.dispose()})),$.register(this.lines.onInsert((X)=>{$.line>=X.index&&($.line+=X.amount)})),$.register(this.lines.onDelete((X)=>{$.line>=X.index&&$.line<X.index+X.amount&&$.dispose(),$.line>X.index&&($.line-=X.amount)})),$.register($.onDispose(()=>this._removeMarker($))),$}_removeMarker(J){this._isClearing||this.markers.splice(this.markers.indexOf(J),1)}},dB0=class extends a1{constructor(J,$){super();this._optionsService=J,this._bufferService=$,this._onBufferActivate=this._register(new x0),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new K90(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new K90(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(J){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(J),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(J,$){this._normal.resize(J,$),this._alt.resize(J,$),this.setupTabStops(J)}setupTabStops(J){this._normal.setupTabStops(J),this._alt.setupTabStops(J)}},A40=2,P40=1,mv=class extends a1{constructor(J){super();this.isUserScrolling=!1,this._onResize=this._register(new x0),this.onResize=this._onResize.event,this._onScroll=this._register(new x0),this.onScroll=this._onScroll.event,this.cols=Math.max(J.rawOptions.cols||0,A40),this.rows=Math.max(J.rawOptions.rows||0,P40),this.buffers=this._register(new dB0(J,this)),this._register(this.buffers.onBufferActivate(($)=>{this._onScroll.fire($.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(J,$){let X=this.cols!==J,Y=this.rows!==$;this.cols=J,this.rows=$,this.buffers.resize(J,$),this._onResize.fire({cols:J,rows:$,colsChanged:X,rowsChanged:Y})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(J,$=!1){let X=this.buffer,Y;Y=this._cachedBlankLine,(!Y||Y.length!==this.cols||Y.getFg(0)!==J.fg||Y.getBg(0)!==J.bg)&&(Y=X.getBlankLine(J,$),this._cachedBlankLine=Y),Y.isWrapped=$;let Z=X.ybase+X.scrollTop,Q=X.ybase+X.scrollBottom;if(X.scrollTop===0){let G=X.lines.isFull;Q===X.lines.length-1?G?X.lines.recycle().copyFrom(Y):X.lines.push(Y.clone()):X.lines.splice(Q+1,0,Y.clone()),G?this.isUserScrolling&&(X.ydisp=Math.max(X.ydisp-1,0)):(X.ybase++,this.isUserScrolling||X.ydisp++)}else{let G=Q-Z+1;X.lines.shiftElements(Z+1,G-1,-1),X.lines.set(Q,Y.clone())}this.isUserScrolling||(X.ydisp=X.ybase),this._onScroll.fire(X.ydisp)}scrollLines(J,$){let X=this.buffer;if(J<0){if(X.ydisp===0)return;this.isUserScrolling=!0}else J+X.ydisp>=X.ybase&&(this.isUserScrolling=!1);let Y=X.ydisp;X.ydisp=Math.max(Math.min(X.ydisp+J,X.ybase),0),Y!==X.ydisp&&($||this._onScroll.fire(X.ydisp))}};mv=Z8([r0(0,g9)],mv);var yH={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1000,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l_,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},sB0=["normal","bold","100","200","300","400","500","600","700","800","900"],aB0=class extends a1{constructor(J){super();this._onOptionChange=this._register(new x0),this.onOptionChange=this._onOptionChange.event;let $={...yH};for(let X in J)if(X in $)try{let Y=J[X];$[X]=this._sanitizeAndValidateOption(X,Y)}catch(Y){console.error(Y)}this.rawOptions=$,this.options={...$},this._setupOptions(),this._register(R5(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(J,$){return this.onOptionChange((X)=>{X===J&&$(this.rawOptions[J])})}onMultipleOptionChange(J,$){return this.onOptionChange((X)=>{J.indexOf(X)!==-1&&$()})}_setupOptions(){let J=(X)=>{if(!(X in yH))throw Error(`No option with key "${X}"`);return this.rawOptions[X]},$=(X,Y)=>{if(!(X in yH))throw Error(`No option with key "${X}"`);Y=this._sanitizeAndValidateOption(X,Y),this.rawOptions[X]!==Y&&(this.rawOptions[X]=Y,this._onOptionChange.fire(X))};for(let X in this.rawOptions){let Y={get:J.bind(this,X),set:$.bind(this,X)};Object.defineProperty(this.options,X,Y)}}_sanitizeAndValidateOption(J,$){switch(J){case"cursorStyle":if($||($=yH[J]),!rB0($))throw Error(`"${$}" is not a valid value for ${J}`);break;case"wordSeparator":$||($=yH[J]);break;case"fontWeight":case"fontWeightBold":if(typeof $=="number"&&1<=$&&$<=1000)break;$=sB0.includes($)?$:yH[J];break;case"cursorWidth":$=Math.floor($);case"lineHeight":case"tabStopWidth":if($<1)throw Error(`${J} cannot be less than 1, value: ${$}`);break;case"minimumContrastRatio":$=Math.max(1,Math.min(21,Math.round($*10)/10));break;case"scrollback":if($=Math.min($,4294967295),$<0)throw Error(`${J} cannot be less than 0, value: ${$}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if($<=0)throw Error(`${J} cannot be less than or equal to 0, value: ${$}`);break;case"rows":case"cols":if(!$&&$!==0)throw Error(`${J} must be numeric, value: ${$}`);break;case"windowsPty":$=$??{};break}return $}};function rB0(J){return J==="block"||J==="underline"||J==="bar"}function bF(J,$=5){if(typeof J!="object")return J;let X=Array.isArray(J)?[]:{};for(let Y in J)X[Y]=$<=1?J[Y]:J[Y]&&bF(J[Y],$-1);return X}var A90=Object.freeze({insertMode:!1}),P90=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),uv=class extends a1{constructor(J,$,X){super();this._bufferService=J,this._logService=$,this._optionsService=X,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new x0),this.onData=this._onData.event,this._onUserInput=this._register(new x0),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new x0),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new x0),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=bF(A90),this.decPrivateModes=bF(P90)}reset(){this.modes=bF(A90),this.decPrivateModes=bF(P90)}triggerDataEvent(J,$=!1){if(this._optionsService.rawOptions.disableStdin)return;let X=this._bufferService.buffer;$&&this._optionsService.rawOptions.scrollOnUserInput&&X.ybase!==X.ydisp&&this._onRequestScrollToBottom.fire(),$&&this._onUserInput.fire(),this._logService.debug(`sending data "${J}"`),this._logService.trace("sending data (codes)",()=>J.split("").map((Y)=>Y.charCodeAt(0))),this._onData.fire(J)}triggerBinaryEvent(J){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${J}"`),this._logService.trace("sending binary (codes)",()=>J.split("").map(($)=>$.charCodeAt(0))),this._onBinary.fire(J))}};uv=Z8([r0(0,f9),r0(1,p90),r0(2,g9)],uv);var D90={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:(J)=>J.button===4||J.action!==1?!1:(J.ctrl=!1,J.alt=!1,J.shift=!1,!0)},VT200:{events:19,restrict:(J)=>J.action!==32},DRAG:{events:23,restrict:(J)=>!(J.action===32&&J.button===3)},ANY:{events:31,restrict:(J)=>!0}};function Vv(J,$){let X=(J.ctrl?16:0)|(J.shift?4:0)|(J.alt?8:0);return J.button===4?(X|=64,X|=J.action):(X|=J.button&3,J.button&4&&(X|=64),J.button&8&&(X|=128),J.action===32?X|=32:J.action===0&&!$&&(X|=3)),X}var Wv=String.fromCharCode,R90={DEFAULT:(J)=>{let $=[Vv(J,!1)+32,J.col+32,J.row+32];return $[0]>255||$[1]>255||$[2]>255?"":`\x1B[M${Wv($[0])}${Wv($[1])}${Wv($[2])}`},SGR:(J)=>{let $=J.action===0&&J.button!==4?"m":"M";return`\x1B[<${Vv(J,!0)};${J.col};${J.row}${$}`},SGR_PIXELS:(J)=>{let $=J.action===0&&J.button!==4?"m":"M";return`\x1B[<${Vv(J,!0)};${J.x};${J.y}${$}`}},cv=class extends a1{constructor(J,$,X){super();this._bufferService=J,this._coreService=$,this._optionsService=X,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new x0),this.onProtocolChange=this._onProtocolChange.event;for(let Y of Object.keys(D90))this.addProtocol(Y,D90[Y]);for(let Y of Object.keys(R90))this.addEncoding(Y,R90[Y]);this.reset()}addProtocol(J,$){this._protocols[J]=$}addEncoding(J,$){this._encodings[J]=$}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(J){if(!this._protocols[J])throw Error(`unknown protocol "${J}"`);this._activeProtocol=J,this._onProtocolChange.fire(this._protocols[J].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(J){if(!this._encodings[J])throw Error(`unknown encoding "${J}"`);this._activeEncoding=J}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(J,$,X){if(J.deltaY===0||J.shiftKey||$===void 0||X===void 0)return 0;let Y=$/X,Z=this._applyScrollModifier(J.deltaY,J);return J.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(Z/=Y+0,Math.abs(J.deltaY)<50&&(Z*=0.3),this._wheelPartialScroll+=Z,Z=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):J.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(Z*=this._bufferService.rows),Z}_applyScrollModifier(J,$){return $.altKey||$.ctrlKey||$.shiftKey?J*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:J*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(J){if(J.col<0||J.col>=this._bufferService.cols||J.row<0||J.row>=this._bufferService.rows||J.button===4&&J.action===32||J.button===3&&J.action!==32||J.button!==4&&(J.action===2||J.action===3)||(J.col++,J.row++,J.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,J,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(J))return!1;let $=this._encodings[this._activeEncoding](J);return $&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent($):this._coreService.triggerDataEvent($,!0)),this._lastEvent=J,!0}explainEvents(J){return{down:!!(J&1),up:!!(J&2),drag:!!(J&4),move:!!(J&8),wheel:!!(J&16)}}_equalEvents(J,$,X){if(X){if(J.x!==$.x||J.y!==$.y)return!1}else if(J.col!==$.col||J.row!==$.row)return!1;return!(J.button!==$.button||J.action!==$.action||J.ctrl!==$.ctrl||J.alt!==$.alt||J.shift!==$.shift)}};cv=Z8([r0(0,f9),r0(1,_q),r0(2,g9)],cv);var Bv=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],iB0=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],$7;function nB0(J,$){let X=0,Y=$.length-1,Z;if(J<$[0][0]||J>$[Y][1])return!1;for(;Y>=X;)if(Z=X+Y>>1,J>$[Z][1])X=Z+1;else if(J<$[Z][0])Y=Z-1;else return!0;return!1}var oB0=class{constructor(){if(this.version="6",!$7){$7=new Uint8Array(65536),$7.fill(1),$7[0]=0,$7.fill(0,1,32),$7.fill(0,127,160),$7.fill(2,4352,4448),$7[9001]=2,$7[9002]=2,$7.fill(2,11904,42192),$7[12351]=1,$7.fill(2,44032,55204),$7.fill(2,63744,64256),$7.fill(2,65040,65050),$7.fill(2,65072,65136),$7.fill(2,65280,65377),$7.fill(2,65504,65511);for(let J=0;J<Bv.length;++J)$7.fill(0,Bv[J][0],Bv[J][1]+1)}}wcwidth(J){return J<32?0:J<127?1:J<65536?$7[J]:nB0(J,iB0)?0:J>=131072&&J<=196605||J>=196608&&J<=262141?2:1}charProperties(J,$){let X=this.wcwidth(J),Y=X===0&&$!==0;if(Y){let Z=Dq.extractWidth($);Z===0?Y=!1:Z>X&&(X=Z)}return Dq.createPropertyValue(0,X,Y)}},Dq=class J{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new x0,this.onChange=this._onChange.event;let $=new oB0;this.register($),this._active=$.version,this._activeProvider=$}static extractShouldJoin($){return($&1)!==0}static extractWidth($){return $>>1&3}static extractCharKind($){return $>>3}static createPropertyValue($,X,Y=!1){return($&16777215)<<3|(X&3)<<1|(Y?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion($){if(!this._providers[$])throw Error(`unknown Unicode version "${$}"`);this._active=$,this._activeProvider=this._providers[$],this._onChange.fire($)}register($){this._providers[$.version]=$}wcwidth($){return this._activeProvider.wcwidth($)}getStringCellWidth($){let X=0,Y=0,Z=$.length;for(let Q=0;Q<Z;++Q){let G=$.charCodeAt(Q);if(55296<=G&&G<=56319){if(++Q>=Z)return X+this.wcwidth(G);let z=$.charCodeAt(Q);56320<=z&&z<=57343?G=(G-55296)*1024+z-56320+65536:X+=this.wcwidth(z)}let q=this.charProperties(G,Y),U=J.extractWidth(q);J.extractShouldJoin(q)&&(U-=J.extractWidth(Y)),X+=U,Y=q}return X}charProperties($,X){return this._activeProvider.charProperties($,X)}},tB0=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(J){this.glevel=J,this.charset=this._charsets[J]}setgCharset(J,$){this._charsets[J]=$,this.glevel===J&&(this.charset=$)}};function M90(J){let $=J.buffer.lines.get(J.buffer.ybase+J.buffer.y-1)?.get(J.cols-1),X=J.buffer.lines.get(J.buffer.ybase+J.buffer.y);X&&$&&(X.isWrapped=$[3]!==0&&$[3]!==32)}var wF=2147483647,eB0=256,D40=class J{constructor($=32,X=32){if(this.maxLength=$,this.maxSubParamsLength=X,X>eB0)throw Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array($),this.length=0,this._subParams=new Int32Array(X),this._subParamsLength=0,this._subParamsIdx=new Uint16Array($),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray($){let X=new J;if(!$.length)return X;for(let Y=Array.isArray($[0])?1:0;Y<$.length;++Y){let Z=$[Y];if(Array.isArray(Z))for(let Q=0;Q<Z.length;++Q)X.addSubParam(Z[Q]);else X.addParam(Z)}return X}clone(){let $=new J(this.maxLength,this.maxSubParamsLength);return $.params.set(this.params),$.length=this.length,$._subParams.set(this._subParams),$._subParamsLength=this._subParamsLength,$._subParamsIdx.set(this._subParamsIdx),$._rejectDigits=this._rejectDigits,$._rejectSubDigits=this._rejectSubDigits,$._digitIsSub=this._digitIsSub,$}toArray(){let $=[];for(let X=0;X<this.length;++X){$.push(this.params[X]);let Y=this._subParamsIdx[X]>>8,Z=this._subParamsIdx[X]&255;Z-Y>0&&$.push(Array.prototype.slice.call(this._subParams,Y,Z))}return $}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam($){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if($<-1)throw Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=$>wF?wF:$}addSubParam($){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if($<-1)throw Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=$>wF?wF:$,this._subParamsIdx[this.length-1]++}}hasSubParams($){return(this._subParamsIdx[$]&255)-(this._subParamsIdx[$]>>8)>0}getSubParams($){let X=this._subParamsIdx[$]>>8,Y=this._subParamsIdx[$]&255;return Y-X>0?this._subParams.subarray(X,Y):null}getSubParamsAll(){let $={};for(let X=0;X<this.length;++X){let Y=this._subParamsIdx[X]>>8,Z=this._subParamsIdx[X]&255;Z-Y>0&&($[X]=this._subParams.slice(Y,Z))}return $}addDigit($){let X;if(this._rejectDigits||!(X=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let Y=this._digitIsSub?this._subParams:this.params,Z=Y[X-1];Y[X-1]=~Z?Math.min(Z*10+$,wF):$}},LF=[],JF0=class{constructor(){this._state=0,this._active=LF,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(J,$){this._handlers[J]===void 0&&(this._handlers[J]=[]);let X=this._handlers[J];return X.push($),{dispose:()=>{let Y=X.indexOf($);Y!==-1&&X.splice(Y,1)}}}clearHandler(J){this._handlers[J]&&delete this._handlers[J]}setHandlerFallback(J){this._handlerFb=J}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=LF}reset(){if(this._state===2)for(let J=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;J>=0;--J)this._active[J].end(!1);this._stack.paused=!1,this._active=LF,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||LF,!this._active.length)this._handlerFb(this._id,"START");else for(let J=this._active.length-1;J>=0;J--)this._active[J].start()}_put(J,$,X){if(!this._active.length)this._handlerFb(this._id,"PUT",a_(J,$,X));else for(let Y=this._active.length-1;Y>=0;Y--)this._active[Y].put(J,$,X)}start(){this.reset(),this._state=1}put(J,$,X){if(this._state!==3){if(this._state===1)for(;$<X;){let Y=J[$++];if(Y===59){this._state=2,this._start();break}if(Y<48||57<Y){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+Y-48}this._state===2&&X-$>0&&this._put(J,$,X)}}end(J,$=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",J);else{let X=!1,Y=this._active.length-1,Z=!1;if(this._stack.paused&&(Y=this._stack.loopPosition-1,X=$,Z=this._stack.fallThrough,this._stack.paused=!1),!Z&&X===!1){for(;Y>=0&&(X=this._active[Y].end(J),X!==!0);Y--)if(X instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=Y,this._stack.fallThrough=!1,X;Y--}for(;Y>=0;Y--)if(X=this._active[Y].end(!1),X instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=Y,this._stack.fallThrough=!0,X}this._active=LF,this._id=-1,this._state=0}}},n4=class{constructor(J){this._handler=J,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(J,$,X){this._hitLimit||(this._data+=a_(J,$,X),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(J){let $=!1;if(this._hitLimit)$=!1;else if(J&&($=this._handler(this._data),$ instanceof Promise))return $.then((X)=>(this._data="",this._hitLimit=!1,X));return this._data="",this._hitLimit=!1,$}},kF=[],$F0=class{constructor(){this._handlers=Object.create(null),this._active=kF,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=kF}registerHandler(J,$){this._handlers[J]===void 0&&(this._handlers[J]=[]);let X=this._handlers[J];return X.push($),{dispose:()=>{let Y=X.indexOf($);Y!==-1&&X.splice(Y,1)}}}clearHandler(J){this._handlers[J]&&delete this._handlers[J]}setHandlerFallback(J){this._handlerFb=J}reset(){if(this._active.length)for(let J=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;J>=0;--J)this._active[J].unhook(!1);this._stack.paused=!1,this._active=kF,this._ident=0}hook(J,$){if(this.reset(),this._ident=J,this._active=this._handlers[J]||kF,!this._active.length)this._handlerFb(this._ident,"HOOK",$);else for(let X=this._active.length-1;X>=0;X--)this._active[X].hook($)}put(J,$,X){if(!this._active.length)this._handlerFb(this._ident,"PUT",a_(J,$,X));else for(let Y=this._active.length-1;Y>=0;Y--)this._active[Y].put(J,$,X)}unhook(J,$=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",J);else{let X=!1,Y=this._active.length-1,Z=!1;if(this._stack.paused&&(Y=this._stack.loopPosition-1,X=$,Z=this._stack.fallThrough,this._stack.paused=!1),!Z&&X===!1){for(;Y>=0&&(X=this._active[Y].unhook(J),X!==!0);Y--)if(X instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=Y,this._stack.fallThrough=!1,X;Y--}for(;Y>=0;Y--)if(X=this._active[Y].unhook(!1),X instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=Y,this._stack.fallThrough=!0,X}this._active=kF,this._ident=0}},SF=new D40;SF.addParam(0);var O90=class{constructor(J){this._handler=J,this._data="",this._params=SF,this._hitLimit=!1}hook(J){this._params=J.length>1||J.params[0]?J.clone():SF,this._data="",this._hitLimit=!1}put(J,$,X){this._hitLimit||(this._data+=a_(J,$,X),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(J){let $=!1;if(this._hitLimit)$=!1;else if(J&&($=this._handler(this._data,this._params),$ instanceof Promise))return $.then((X)=>(this._params=SF,this._data="",this._hitLimit=!1,X));return this._params=SF,this._data="",this._hitLimit=!1,$}},XF0=class{constructor(J){this.table=new Uint8Array(J)}setDefault(J,$){this.table.fill(J<<4|$)}add(J,$,X,Y){this.table[$<<8|J]=X<<4|Y}addMany(J,$,X,Y){for(let Z=0;Z<J.length;Z++)this.table[$<<8|J[Z]]=X<<4|Y}},dJ=160,YF0=function(){let J=new XF0(4095),$=Array.apply(null,Array(256)).map((q,U)=>U),X=(q,U)=>$.slice(q,U),Y=X(32,127),Z=X(0,24);Z.push(25),Z.push.apply(Z,X(28,32));let Q=X(0,14),G;J.setDefault(1,0),J.addMany(Y,0,2,0);for(G in Q)J.addMany([24,26,153,154],G,3,0),J.addMany(X(128,144),G,3,0),J.addMany(X(144,152),G,3,0),J.add(156,G,0,0),J.add(27,G,11,1),J.add(157,G,4,8),J.addMany([152,158,159],G,0,7),J.add(155,G,11,3),J.add(144,G,11,9);return J.addMany(Z,0,3,0),J.addMany(Z,1,3,1),J.add(127,1,0,1),J.addMany(Z,8,0,8),J.addMany(Z,3,3,3),J.add(127,3,0,3),J.addMany(Z,4,3,4),J.add(127,4,0,4),J.addMany(Z,6,3,6),J.addMany(Z,5,3,5),J.add(127,5,0,5),J.addMany(Z,2,3,2),J.add(127,2,0,2),J.add(93,1,4,8),J.addMany(Y,8,5,8),J.add(127,8,5,8),J.addMany([156,27,24,26,7],8,6,0),J.addMany(X(28,32),8,0,8),J.addMany([88,94,95],1,0,7),J.addMany(Y,7,0,7),J.addMany(Z,7,0,7),J.add(156,7,0,0),J.add(127,7,0,7),J.add(91,1,11,3),J.addMany(X(64,127),3,7,0),J.addMany(X(48,60),3,8,4),J.addMany([60,61,62,63],3,9,4),J.addMany(X(48,60),4,8,4),J.addMany(X(64,127),4,7,0),J.addMany([60,61,62,63],4,0,6),J.addMany(X(32,64),6,0,6),J.add(127,6,0,6),J.addMany(X(64,127),6,0,0),J.addMany(X(32,48),3,9,5),J.addMany(X(32,48),5,9,5),J.addMany(X(48,64),5,0,6),J.addMany(X(64,127),5,7,0),J.addMany(X(32,48),4,9,5),J.addMany(X(32,48),1,9,2),J.addMany(X(32,48),2,9,2),J.addMany(X(48,127),2,10,0),J.addMany(X(48,80),1,10,0),J.addMany(X(81,88),1,10,0),J.addMany([89,90,92],1,10,0),J.addMany(X(96,127),1,10,0),J.add(80,1,11,9),J.addMany(Z,9,0,9),J.add(127,9,0,9),J.addMany(X(28,32),9,0,9),J.addMany(X(32,48),9,9,12),J.addMany(X(48,60),9,8,10),J.addMany([60,61,62,63],9,9,10),J.addMany(Z,11,0,11),J.addMany(X(32,128),11,0,11),J.addMany(X(28,32),11,0,11),J.addMany(Z,10,0,10),J.add(127,10,0,10),J.addMany(X(28,32),10,0,10),J.addMany(X(48,60),10,8,10),J.addMany([60,61,62,63],10,0,11),J.addMany(X(32,48),10,9,12),J.addMany(Z,12,0,12),J.add(127,12,0,12),J.addMany(X(28,32),12,0,12),J.addMany(X(32,48),12,9,12),J.addMany(X(48,64),12,0,11),J.addMany(X(64,127),12,12,13),J.addMany(X(64,127),10,12,13),J.addMany(X(64,127),9,12,13),J.addMany(Z,13,13,13),J.addMany(Y,13,13,13),J.add(127,13,0,13),J.addMany([27,156,24,26],13,14,0),J.add(dJ,0,2,0),J.add(dJ,8,5,8),J.add(dJ,6,0,6),J.add(dJ,11,0,11),J.add(dJ,13,13,13),J}(),ZF0=class extends a1{constructor(J=YF0){super();this._transitions=J,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new D40,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=($,X,Y)=>{},this._executeHandlerFb=($)=>{},this._csiHandlerFb=($,X)=>{},this._escHandlerFb=($)=>{},this._errorHandlerFb=($)=>$,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(R5(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new JF0),this._dcsParser=this._register(new $F0),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(J,$=[64,126]){let X=0;if(J.prefix){if(J.prefix.length>1)throw Error("only one byte as prefix supported");if(X=J.prefix.charCodeAt(0),X&&60>X||X>63)throw Error("prefix must be in range 0x3c .. 0x3f")}if(J.intermediates){if(J.intermediates.length>2)throw Error("only two bytes as intermediates are supported");for(let Z=0;Z<J.intermediates.length;++Z){let Q=J.intermediates.charCodeAt(Z);if(32>Q||Q>47)throw Error("intermediate must be in range 0x20 .. 0x2f");X<<=8,X|=Q}}if(J.final.length!==1)throw Error("final must be a single byte");let Y=J.final.charCodeAt(0);if($[0]>Y||Y>$[1])throw Error(`final must be in range ${$[0]} .. ${$[1]}`);return X<<=8,X|=Y,X}identToString(J){let $=[];for(;J;)$.push(String.fromCharCode(J&255)),J>>=8;return $.reverse().join("")}setPrintHandler(J){this._printHandler=J}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(J,$){let X=this._identifier(J,[48,126]);this._escHandlers[X]===void 0&&(this._escHandlers[X]=[]);let Y=this._escHandlers[X];return Y.push($),{dispose:()=>{let Z=Y.indexOf($);Z!==-1&&Y.splice(Z,1)}}}clearEscHandler(J){this._escHandlers[this._identifier(J,[48,126])]&&delete this._escHandlers[this._identifier(J,[48,126])]}setEscHandlerFallback(J){this._escHandlerFb=J}setExecuteHandler(J,$){this._executeHandlers[J.charCodeAt(0)]=$}clearExecuteHandler(J){this._executeHandlers[J.charCodeAt(0)]&&delete this._executeHandlers[J.charCodeAt(0)]}setExecuteHandlerFallback(J){this._executeHandlerFb=J}registerCsiHandler(J,$){let X=this._identifier(J);this._csiHandlers[X]===void 0&&(this._csiHandlers[X]=[]);let Y=this._csiHandlers[X];return Y.push($),{dispose:()=>{let Z=Y.indexOf($);Z!==-1&&Y.splice(Z,1)}}}clearCsiHandler(J){this._csiHandlers[this._identifier(J)]&&delete this._csiHandlers[this._identifier(J)]}setCsiHandlerFallback(J){this._csiHandlerFb=J}registerDcsHandler(J,$){return this._dcsParser.registerHandler(this._identifier(J),$)}clearDcsHandler(J){this._dcsParser.clearHandler(this._identifier(J))}setDcsHandlerFallback(J){this._dcsParser.setHandlerFallback(J)}registerOscHandler(J,$){return this._oscParser.registerHandler(J,$)}clearOscHandler(J){this._oscParser.clearHandler(J)}setOscHandlerFallback(J){this._oscParser.setHandlerFallback(J)}setErrorHandler(J){this._errorHandler=J}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(J,$,X,Y,Z){this._parseStack.state=J,this._parseStack.handlers=$,this._parseStack.handlerPos=X,this._parseStack.transition=Y,this._parseStack.chunkPos=Z}parse(J,$,X){let Y=0,Z=0,Q=0,G;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,Q=this._parseStack.chunkPos+1;else{if(X===void 0||this._parseStack.state===1)throw this._parseStack.state=1,Error("improper continuation due to previous async handler, giving up parsing");let q=this._parseStack.handlers,U=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(X===!1&&U>-1){for(;U>=0&&(G=q[U](this._params),G!==!0);U--)if(G instanceof Promise)return this._parseStack.handlerPos=U,G}this._parseStack.handlers=[];break;case 4:if(X===!1&&U>-1){for(;U>=0&&(G=q[U](),G!==!0);U--)if(G instanceof Promise)return this._parseStack.handlerPos=U,G}this._parseStack.handlers=[];break;case 6:if(Y=J[this._parseStack.chunkPos],G=this._dcsParser.unhook(Y!==24&&Y!==26,X),G)return G;Y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(Y=J[this._parseStack.chunkPos],G=this._oscParser.end(Y!==24&&Y!==26,X),G)return G;Y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,Q=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let q=Q;q<$;++q){switch(Y=J[q],Z=this._transitions.table[this.currentState<<8|(Y<160?Y:dJ)],Z>>4){case 2:for(let V=q+1;;++V){if(V>=$||(Y=J[V])<32||Y>126&&Y<dJ){this._printHandler(J,q,V),q=V-1;break}if(++V>=$||(Y=J[V])<32||Y>126&&Y<dJ){this._printHandler(J,q,V),q=V-1;break}if(++V>=$||(Y=J[V])<32||Y>126&&Y<dJ){this._printHandler(J,q,V),q=V-1;break}if(++V>=$||(Y=J[V])<32||Y>126&&Y<dJ){this._printHandler(J,q,V),q=V-1;break}}break;case 3:this._executeHandlers[Y]?this._executeHandlers[Y]():this._executeHandlerFb(Y),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:q,code:Y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let U=this._csiHandlers[this._collect<<8|Y],z=U?U.length-1:-1;for(;z>=0&&(G=U[z](this._params),G!==!0);z--)if(G instanceof Promise)return this._preserveStack(3,U,z,Z,q),G;z<0&&this._csiHandlerFb(this._collect<<8|Y,this._params),this.precedingJoinState=0;break;case 8:do switch(Y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(Y-48)}while(++q<$&&(Y=J[q])>47&&Y<60);q--;break;case 9:this._collect<<=8,this._collect|=Y;break;case 10:let H=this._escHandlers[this._collect<<8|Y],j=H?H.length-1:-1;for(;j>=0&&(G=H[j](),G!==!0);j--)if(G instanceof Promise)return this._preserveStack(4,H,j,Z,q),G;j<0&&this._escHandlerFb(this._collect<<8|Y),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|Y,this._params);break;case 13:for(let V=q+1;;++V)if(V>=$||(Y=J[V])===24||Y===26||Y===27||Y>127&&Y<dJ){this._dcsParser.put(J,q,V),q=V-1;break}break;case 14:if(G=this._dcsParser.unhook(Y!==24&&Y!==26),G)return this._preserveStack(6,[],0,Z,q),G;Y===27&&(Z|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let V=q+1;;V++)if(V>=$||(Y=J[V])<32||Y>127&&Y<dJ){this._oscParser.put(J,q,V),q=V-1;break}break;case 6:if(G=this._oscParser.end(Y!==24&&Y!==26),G)return this._preserveStack(5,[],0,Z,q),G;Y===27&&(Z|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=Z&15}}},QF0=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,GF0=/^[\da-f]+$/;function _90(J){if(!J)return;let $=J.toLowerCase();if($.indexOf("rgb:")===0){$=$.slice(4);let X=QF0.exec($);if(X){let Y=X[1]?15:X[4]?255:X[7]?4095:65535;return[Math.round(parseInt(X[1]||X[4]||X[7]||X[10],16)/Y*255),Math.round(parseInt(X[2]||X[5]||X[8]||X[11],16)/Y*255),Math.round(parseInt(X[3]||X[6]||X[9]||X[12],16)/Y*255)]}}else if($.indexOf("#")===0&&($=$.slice(1),GF0.exec($)&&[3,6,9,12].includes($.length))){let X=$.length/3,Y=[0,0,0];for(let Z=0;Z<3;++Z){let Q=parseInt($.slice(X*Z,X*Z+X),16);Y[Z]=X===1?Q<<4:X===2?Q:X===3?Q>>4:Q>>8}return Y}}function Fv(J,$){let X=J.toString(16),Y=X.length<2?"0"+X:X;switch($){case 4:return X[0];case 8:return Y;case 12:return(Y+Y).slice(0,3);default:return Y+Y}}function qF0(J,$=16){let[X,Y,Z]=J;return`rgb:${Fv(X,$)}/${Fv(Y,$)}/${Fv(Z,$)}`}var UF0={"(":0,")":1,"*":2,"+":3,"-":1,".":2},a2=131072,N90=10;function T90(J,$){if(J>24)return $.setWinLines||!1;switch(J){case 1:return!!$.restoreWin;case 2:return!!$.minimizeWin;case 3:return!!$.setWinPosition;case 4:return!!$.setWinSizePixels;case 5:return!!$.raiseWin;case 6:return!!$.lowerWin;case 7:return!!$.refreshWin;case 8:return!!$.setWinSizeChars;case 9:return!!$.maximizeWin;case 10:return!!$.fullscreenWin;case 11:return!!$.getWinState;case 13:return!!$.getWinPosition;case 14:return!!$.getWinSizePixels;case 15:return!!$.getScreenSizePixels;case 16:return!!$.getCellSizePixels;case 18:return!!$.getWinSizeChars;case 19:return!!$.getScreenSizeChars;case 20:return!!$.getIconTitle;case 21:return!!$.getWinTitle;case 22:return!!$.pushTitle;case 23:return!!$.popTitle;case 24:return!!$.setWinLines}return!1}var w90=5000,L90=0,zF0=class extends a1{constructor(J,$,X,Y,Z,Q,G,q,U=new ZF0){super();this._bufferService=J,this._charsetService=$,this._coreService=X,this._logService=Y,this._optionsService=Z,this._oscLinkService=Q,this._coreMouseService=G,this._unicodeService=q,this._parser=U,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new JV0,this._utf8Decoder=new $V0,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=f8.clone(),this._eraseAttrDataInternal=f8.clone(),this._onRequestBell=this._register(new x0),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new x0),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new x0),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new x0),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new x0),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new x0),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new x0),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new x0),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new x0),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new x0),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new x0),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new x0),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new x0),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new lv(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate((z)=>this._activeBuffer=z.activeBuffer)),this._parser.setCsiHandlerFallback((z,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(z),params:H.toArray()})}),this._parser.setEscHandlerFallback((z)=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(z)})}),this._parser.setExecuteHandlerFallback((z)=>{this._logService.debug("Unknown EXECUTE code: ",{code:z})}),this._parser.setOscHandlerFallback((z,H,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:z,action:H,data:j})}),this._parser.setDcsHandlerFallback((z,H,j)=>{H==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(z),action:H,payload:j})}),this._parser.setPrintHandler((z,H,j)=>this.print(z,H,j)),this._parser.registerCsiHandler({final:"@"},(z)=>this.insertChars(z)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(z)=>this.scrollLeft(z)),this._parser.registerCsiHandler({final:"A"},(z)=>this.cursorUp(z)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(z)=>this.scrollRight(z)),this._parser.registerCsiHandler({final:"B"},(z)=>this.cursorDown(z)),this._parser.registerCsiHandler({final:"C"},(z)=>this.cursorForward(z)),this._parser.registerCsiHandler({final:"D"},(z)=>this.cursorBackward(z)),this._parser.registerCsiHandler({final:"E"},(z)=>this.cursorNextLine(z)),this._parser.registerCsiHandler({final:"F"},(z)=>this.cursorPrecedingLine(z)),this._parser.registerCsiHandler({final:"G"},(z)=>this.cursorCharAbsolute(z)),this._parser.registerCsiHandler({final:"H"},(z)=>this.cursorPosition(z)),this._parser.registerCsiHandler({final:"I"},(z)=>this.cursorForwardTab(z)),this._parser.registerCsiHandler({final:"J"},(z)=>this.eraseInDisplay(z,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},(z)=>this.eraseInDisplay(z,!0)),this._parser.registerCsiHandler({final:"K"},(z)=>this.eraseInLine(z,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},(z)=>this.eraseInLine(z,!0)),this._parser.registerCsiHandler({final:"L"},(z)=>this.insertLines(z)),this._parser.registerCsiHandler({final:"M"},(z)=>this.deleteLines(z)),this._parser.registerCsiHandler({final:"P"},(z)=>this.deleteChars(z)),this._parser.registerCsiHandler({final:"S"},(z)=>this.scrollUp(z)),this._parser.registerCsiHandler({final:"T"},(z)=>this.scrollDown(z)),this._parser.registerCsiHandler({final:"X"},(z)=>this.eraseChars(z)),this._parser.registerCsiHandler({final:"Z"},(z)=>this.cursorBackwardTab(z)),this._parser.registerCsiHandler({final:"`"},(z)=>this.charPosAbsolute(z)),this._parser.registerCsiHandler({final:"a"},(z)=>this.hPositionRelative(z)),this._parser.registerCsiHandler({final:"b"},(z)=>this.repeatPrecedingCharacter(z)),this._parser.registerCsiHandler({final:"c"},(z)=>this.sendDeviceAttributesPrimary(z)),this._parser.registerCsiHandler({prefix:">",final:"c"},(z)=>this.sendDeviceAttributesSecondary(z)),this._parser.registerCsiHandler({final:"d"},(z)=>this.linePosAbsolute(z)),this._parser.registerCsiHandler({final:"e"},(z)=>this.vPositionRelative(z)),this._parser.registerCsiHandler({final:"f"},(z)=>this.hVPosition(z)),this._parser.registerCsiHandler({final:"g"},(z)=>this.tabClear(z)),this._parser.registerCsiHandler({final:"h"},(z)=>this.setMode(z)),this._parser.registerCsiHandler({prefix:"?",final:"h"},(z)=>this.setModePrivate(z)),this._parser.registerCsiHandler({final:"l"},(z)=>this.resetMode(z)),this._parser.registerCsiHandler({prefix:"?",final:"l"},(z)=>this.resetModePrivate(z)),this._parser.registerCsiHandler({final:"m"},(z)=>this.charAttributes(z)),this._parser.registerCsiHandler({final:"n"},(z)=>this.deviceStatus(z)),this._parser.registerCsiHandler({prefix:"?",final:"n"},(z)=>this.deviceStatusPrivate(z)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(z)=>this.softReset(z)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(z)=>this.setCursorStyle(z)),this._parser.registerCsiHandler({final:"r"},(z)=>this.setScrollRegion(z)),this._parser.registerCsiHandler({final:"s"},(z)=>this.saveCursor(z)),this._parser.registerCsiHandler({final:"t"},(z)=>this.windowOptions(z)),this._parser.registerCsiHandler({final:"u"},(z)=>this.restoreCursor(z)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(z)=>this.insertColumns(z)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(z)=>this.deleteColumns(z)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(z)=>this.selectProtected(z)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(z)=>this.requestMode(z,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(z)=>this.requestMode(z,!1)),this._parser.setExecuteHandler(D0.BEL,()=>this.bell()),this._parser.setExecuteHandler(D0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(D0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(D0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(D0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(D0.BS,()=>this.backspace()),this._parser.setExecuteHandler(D0.HT,()=>this.tab()),this._parser.setExecuteHandler(D0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(D0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(v_.IND,()=>this.index()),this._parser.setExecuteHandler(v_.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(v_.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new n4((z)=>(this.setTitle(z),this.setIconName(z),!0))),this._parser.registerOscHandler(1,new n4((z)=>this.setIconName(z))),this._parser.registerOscHandler(2,new n4((z)=>this.setTitle(z))),this._parser.registerOscHandler(4,new n4((z)=>this.setOrReportIndexedColor(z))),this._parser.registerOscHandler(8,new n4((z)=>this.setHyperlink(z))),this._parser.registerOscHandler(10,new n4((z)=>this.setOrReportFgColor(z))),this._parser.registerOscHandler(11,new n4((z)=>this.setOrReportBgColor(z))),this._parser.registerOscHandler(12,new n4((z)=>this.setOrReportCursorColor(z))),this._parser.registerOscHandler(104,new n4((z)=>this.restoreIndexedColor(z))),this._parser.registerOscHandler(110,new n4((z)=>this.restoreFgColor(z))),this._parser.registerOscHandler(111,new n4((z)=>this.restoreBgColor(z))),this._parser.registerOscHandler(112,new n4((z)=>this.restoreCursorColor(z))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let z in X7)this._parser.registerEscHandler({intermediates:"(",final:z},()=>this.selectCharset("("+z)),this._parser.registerEscHandler({intermediates:")",final:z},()=>this.selectCharset(")"+z)),this._parser.registerEscHandler({intermediates:"*",final:z},()=>this.selectCharset("*"+z)),this._parser.registerEscHandler({intermediates:"+",final:z},()=>this.selectCharset("+"+z)),this._parser.registerEscHandler({intermediates:"-",final:z},()=>this.selectCharset("-"+z)),this._parser.registerEscHandler({intermediates:".",final:z},()=>this.selectCharset("."+z)),this._parser.registerEscHandler({intermediates:"/",final:z},()=>this.selectCharset("/"+z));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler((z)=>(this._logService.error("Parsing error: ",z),z)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new O90((z,H)=>this.requestStatusString(z,H)))}getAttrData(){return this._curAttrData}_preserveStack(J,$,X,Y){this._parseStack.paused=!0,this._parseStack.cursorStartX=J,this._parseStack.cursorStartY=$,this._parseStack.decodedLength=X,this._parseStack.position=Y}_logSlowResolvingAsync(J){this._logService.logLevel<=3&&Promise.race([J,new Promise(($,X)=>setTimeout(()=>X("#SLOW_TIMEOUT"),w90))]).catch(($)=>{if($!=="#SLOW_TIMEOUT")throw $;console.warn(`async parser handler taking longer than ${w90} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(J,$){let X,Y=this._activeBuffer.x,Z=this._activeBuffer.y,Q=0,G=this._parseStack.paused;if(G){if(X=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,$))return this._logSlowResolvingAsync(X),X;Y=this._parseStack.cursorStartX,Z=this._parseStack.cursorStartY,this._parseStack.paused=!1,J.length>a2&&(Q=this._parseStack.position+a2)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof J=="string"?` "${J}"`:` "${Array.prototype.map.call(J,(z)=>String.fromCharCode(z)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof J=="string"?J.split("").map((z)=>z.charCodeAt(0)):J),this._parseBuffer.length<J.length&&this._parseBuffer.length<a2&&(this._parseBuffer=new Uint32Array(Math.min(J.length,a2))),G||this._dirtyRowTracker.clearRange(),J.length>a2)for(let z=Q;z<J.length;z+=a2){let H=z+a2<J.length?z+a2:J.length,j=typeof J=="string"?this._stringDecoder.decode(J.substring(z,H),this._parseBuffer):this._utf8Decoder.decode(J.subarray(z,H),this._parseBuffer);if(X=this._parser.parse(this._parseBuffer,j))return this._preserveStack(Y,Z,j,z),this._logSlowResolvingAsync(X),X}else if(!G){let z=typeof J=="string"?this._stringDecoder.decode(J,this._parseBuffer):this._utf8Decoder.decode(J,this._parseBuffer);if(X=this._parser.parse(this._parseBuffer,z))return this._preserveStack(Y,Z,z,0),this._logSlowResolvingAsync(X),X}(this._activeBuffer.x!==Y||this._activeBuffer.y!==Z)&&this._onCursorMove.fire();let q=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),U=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);U<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(U,this._bufferService.rows-1),end:Math.min(q,this._bufferService.rows-1)})}print(J,$,X){let Y,Z,Q=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,q=this._bufferService.cols,U=this._coreService.decPrivateModes.wraparound,z=this._coreService.modes.insertMode,H=this._curAttrData,j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&X-$>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodepoint(this._activeBuffer.x-1,0,1,H);let V=this._parser.precedingJoinState;for(let W=$;W<X;++W){if(Y=J[W],Y<127&&Q){let A=Q[String.fromCharCode(Y)];A&&(Y=A.charCodeAt(0))}let B=this._unicodeService.charProperties(Y,V);Z=Dq.extractWidth(B);let K=Dq.extractShouldJoin(B),P=K?Dq.extractWidth(V):0;if(V=B,G&&this._onA11yChar.fire(r2(Y)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+Z-P>q){if(U){let A=j,D=this._activeBuffer.x-P;for(this._activeBuffer.x=P,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),P>0&&j instanceof xF&&j.copyCellsFrom(A,D,0,P,!1);D<q;)A.setCellFromCodepoint(D++,0,1,H)}else if(this._activeBuffer.x=q-1,Z===2)continue}if(K&&this._activeBuffer.x){let A=j.getWidth(this._activeBuffer.x-1)?1:2;j.addCodepointToCell(this._activeBuffer.x-A,Y,Z);for(let D=Z-P;--D>=0;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,H);continue}if(z&&(j.insertCells(this._activeBuffer.x,Z-P,this._activeBuffer.getNullCell(H)),j.getWidth(q-1)===2&&j.setCellFromCodepoint(q-1,0,1,H)),j.setCellFromCodepoint(this._activeBuffer.x++,Y,Z,H),Z>0)for(;--Z;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,H)}this._parser.precedingJoinState=V,this._activeBuffer.x<q&&X-$>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodepoint(this._activeBuffer.x,0,1,H),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(J,$){return J.final==="t"&&!J.prefix&&!J.intermediates?this._parser.registerCsiHandler(J,(X)=>T90(X.params[0],this._optionsService.rawOptions.windowOptions)?$(X):!0):this._parser.registerCsiHandler(J,$)}registerDcsHandler(J,$){return this._parser.registerDcsHandler(J,new O90($))}registerEscHandler(J,$){return this._parser.registerEscHandler(J,$)}registerOscHandler(J,$){return this._parser.registerOscHandler(J,new n4($))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);J.hasWidth(this._activeBuffer.x)&&!J.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let J=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-J),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(J=this._bufferService.cols-1){this._activeBuffer.x=Math.min(J,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(J,$){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=J,this._activeBuffer.y=this._activeBuffer.scrollTop+$):(this._activeBuffer.x=J,this._activeBuffer.y=$),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(J,$){this._restrictCursor(),this._setCursor(this._activeBuffer.x+J,this._activeBuffer.y+$)}cursorUp(J){let $=this._activeBuffer.y-this._activeBuffer.scrollTop;return $>=0?this._moveCursor(0,-Math.min($,J.params[0]||1)):this._moveCursor(0,-(J.params[0]||1)),!0}cursorDown(J){let $=this._activeBuffer.scrollBottom-this._activeBuffer.y;return $>=0?this._moveCursor(0,Math.min($,J.params[0]||1)):this._moveCursor(0,J.params[0]||1),!0}cursorForward(J){return this._moveCursor(J.params[0]||1,0),!0}cursorBackward(J){return this._moveCursor(-(J.params[0]||1),0),!0}cursorNextLine(J){return this.cursorDown(J),this._activeBuffer.x=0,!0}cursorPrecedingLine(J){return this.cursorUp(J),this._activeBuffer.x=0,!0}cursorCharAbsolute(J){return this._setCursor((J.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(J){return this._setCursor(J.length>=2?(J.params[1]||1)-1:0,(J.params[0]||1)-1),!0}charPosAbsolute(J){return this._setCursor((J.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(J){return this._moveCursor(J.params[0]||1,0),!0}linePosAbsolute(J){return this._setCursor(this._activeBuffer.x,(J.params[0]||1)-1),!0}vPositionRelative(J){return this._moveCursor(0,J.params[0]||1),!0}hVPosition(J){return this.cursorPosition(J),!0}tabClear(J){let $=J.params[0];return $===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:$===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(J){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let $=J.params[0]||1;for(;$--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(J){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let $=J.params[0]||1;for(;$--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(J){let $=J.params[0];return $===1&&(this._curAttrData.bg|=536870912),($===2||$===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(J,$,X,Y=!1,Z=!1){let Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+J);Q.replaceCells($,X,this._activeBuffer.getNullCell(this._eraseAttrData()),Z),Y&&(Q.isWrapped=!1)}_resetBufferLine(J,$=!1){let X=this._activeBuffer.lines.get(this._activeBuffer.ybase+J);X&&(X.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),$),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+J),X.isWrapped=!1)}eraseInDisplay(J,$=!1){this._restrictCursor(this._bufferService.cols);let X;switch(J.params[0]){case 0:for(X=this._activeBuffer.y,this._dirtyRowTracker.markDirty(X),this._eraseInBufferLine(X++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,$);X<this._bufferService.rows;X++)this._resetBufferLine(X,$);this._dirtyRowTracker.markDirty(X);break;case 1:for(X=this._activeBuffer.y,this._dirtyRowTracker.markDirty(X),this._eraseInBufferLine(X,0,this._activeBuffer.x+1,!0,$),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(X+1).isWrapped=!1);X--;)this._resetBufferLine(X,$);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(X=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,X-1);X--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+X)?.getTrimmedLength(););for(;X>=0;X--)this._bufferService.scroll(this._eraseAttrData())}else{for(X=this._bufferService.rows,this._dirtyRowTracker.markDirty(X-1);X--;)this._resetBufferLine(X,$);this._dirtyRowTracker.markDirty(0)}break;case 3:let Y=this._activeBuffer.lines.length-this._bufferService.rows;Y>0&&(this._activeBuffer.lines.trimStart(Y),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-Y,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-Y,0),this._onScroll.fire(0));break}return!0}eraseInLine(J,$=!1){switch(this._restrictCursor(this._bufferService.cols),J.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,$);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,$);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,$);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(J){this._restrictCursor();let $=J.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let X=this._activeBuffer.ybase+this._activeBuffer.y,Y=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Z=this._bufferService.rows-1+this._activeBuffer.ybase-Y+1;for(;$--;)this._activeBuffer.lines.splice(Z-1,1),this._activeBuffer.lines.splice(X,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(J){this._restrictCursor();let $=J.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let X=this._activeBuffer.ybase+this._activeBuffer.y,Y;for(Y=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Y=this._bufferService.rows-1+this._activeBuffer.ybase-Y;$--;)this._activeBuffer.lines.splice(X,1),this._activeBuffer.lines.splice(Y,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(J){this._restrictCursor();let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return $&&($.insertCells(this._activeBuffer.x,J.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(J){this._restrictCursor();let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return $&&($.deleteCells(this._activeBuffer.x,J.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(J){let $=J.params[0]||1;for(;$--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(J){let $=J.params[0]||1;for(;$--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(f8));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(J){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=J.params[0]||1;for(let X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){let Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Y.deleteCells(0,$,this._activeBuffer.getNullCell(this._eraseAttrData())),Y.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(J){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=J.params[0]||1;for(let X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){let Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Y.insertCells(0,$,this._activeBuffer.getNullCell(this._eraseAttrData())),Y.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(J){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=J.params[0]||1;for(let X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){let Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Y.insertCells(this._activeBuffer.x,$,this._activeBuffer.getNullCell(this._eraseAttrData())),Y.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(J){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=J.params[0]||1;for(let X=this._activeBuffer.scrollTop;X<=this._activeBuffer.scrollBottom;++X){let Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+X);Y.deleteCells(this._activeBuffer.x,$,this._activeBuffer.getNullCell(this._eraseAttrData())),Y.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(J){this._restrictCursor();let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return $&&($.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(J.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(J){let $=this._parser.precedingJoinState;if(!$)return!0;let X=J.params[0]||1,Y=Dq.extractWidth($),Z=this._activeBuffer.x-Y,Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(Z),G=new Uint32Array(Q.length*X),q=0;for(let z=0;z<Q.length;){let H=Q.codePointAt(z)||0;G[q++]=H,z+=H>65535?2:1}let U=q;for(let z=1;z<X;++z)G.copyWithin(U,0,q),U+=q;return this.print(G,0,U),!0}sendDeviceAttributesPrimary(J){return J.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(D0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(D0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(J){return J.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(D0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(D0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(J.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(D0.ESC+"[>83;40003;0c")),!0}_is(J){return(this._optionsService.rawOptions.termName+"").indexOf(J)===0}setMode(J){for(let $=0;$<J.length;$++)switch(J.params[$]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(J){for(let $=0;$<J.length;$++)switch(J.params[$]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Pq),this._charsetService.setgCharset(1,Pq),this._charsetService.setgCharset(2,Pq),this._charsetService.setgCharset(3,Pq);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1000:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(J){for(let $=0;$<J.length;$++)switch(J.params[$]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(J){for(let $=0;$<J.length;$++)switch(J.params[$]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1000:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),J.params[$]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(J,$){let X;((K)=>(K[K.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",K[K.SET=1]="SET",K[K.RESET=2]="RESET",K[K.PERMANENTLY_SET=3]="PERMANENTLY_SET",K[K.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(X||={});let Y=this._coreService.decPrivateModes,{activeProtocol:Z,activeEncoding:Q}=this._coreMouseService,G=this._coreService,{buffers:q,cols:U}=this._bufferService,{active:z,alt:H}=q,j=this._optionsService.rawOptions,V=(K,P)=>(G.triggerDataEvent(`${D0.ESC}[${$?"":"?"}${K};${P}$y`),!0),W=(K)=>K?1:2,B=J.params[0];return $?B===2?V(B,4):B===4?V(B,W(G.modes.insertMode)):B===12?V(B,3):B===20?V(B,W(j.convertEol)):V(B,0):B===1?V(B,W(Y.applicationCursorKeys)):B===3?V(B,j.windowOptions.setWinLines?U===80?2:U===132?1:0:0):B===6?V(B,W(Y.origin)):B===7?V(B,W(Y.wraparound)):B===8?V(B,3):B===9?V(B,W(Z==="X10")):B===12?V(B,W(j.cursorBlink)):B===25?V(B,W(!G.isCursorHidden)):B===45?V(B,W(Y.reverseWraparound)):B===66?V(B,W(Y.applicationKeypad)):B===67?V(B,4):B===1000?V(B,W(Z==="VT200")):B===1002?V(B,W(Z==="DRAG")):B===1003?V(B,W(Z==="ANY")):B===1004?V(B,W(Y.sendFocus)):B===1005?V(B,4):B===1006?V(B,W(Q==="SGR")):B===1015?V(B,4):B===1016?V(B,W(Q==="SGR_PIXELS")):B===1048?V(B,1):B===47||B===1047||B===1049?V(B,W(z===H)):B===2004?V(B,W(Y.bracketedPasteMode)):B===2026?V(B,W(Y.synchronizedOutput)):V(B,0)}_updateAttrColor(J,$,X,Y,Z){return $===2?(J|=50331648,J&=-16777216,J|=mF.fromColorRGB([X,Y,Z])):$===5&&(J&=-50331904,J|=33554432|X&255),J}_extractColor(J,$,X){let Y=[0,0,-1,0,0,0],Z=0,Q=0;do{if(Y[Q+Z]=J.params[$+Q],J.hasSubParams($+Q)){let G=J.getSubParams($+Q),q=0;do Y[1]===5&&(Z=1),Y[Q+q+1+Z]=G[q];while(++q<G.length&&q+Q+1+Z<Y.length);break}if(Y[1]===5&&Q+Z>=2||Y[1]===2&&Q+Z>=5)break;Y[1]&&(Z=1)}while(++Q+$<J.length&&Q+Z<Y.length);for(let G=2;G<Y.length;++G)Y[G]===-1&&(Y[G]=0);switch(Y[0]){case 38:X.fg=this._updateAttrColor(X.fg,Y[1],Y[3],Y[4],Y[5]);break;case 48:X.bg=this._updateAttrColor(X.bg,Y[1],Y[3],Y[4],Y[5]);break;case 58:X.extended=X.extended.clone(),X.extended.underlineColor=this._updateAttrColor(X.extended.underlineColor,Y[1],Y[3],Y[4],Y[5])}return Q}_processUnderline(J,$){$.extended=$.extended.clone(),(!~J||J>5)&&(J=1),$.extended.underlineStyle=J,$.fg|=268435456,J===0&&($.fg&=-268435457),$.updateExtended()}_processSGR0(J){J.fg=f8.fg,J.bg=f8.bg,J.extended=J.extended.clone(),J.extended.underlineStyle=0,J.extended.underlineColor&=-67108864,J.updateExtended()}charAttributes(J){if(J.length===1&&J.params[0]===0)return this._processSGR0(this._curAttrData),!0;let $=J.length,X,Y=this._curAttrData;for(let Z=0;Z<$;Z++)X=J.params[Z],X>=30&&X<=37?(Y.fg&=-50331904,Y.fg|=16777216|X-30):X>=40&&X<=47?(Y.bg&=-50331904,Y.bg|=16777216|X-40):X>=90&&X<=97?(Y.fg&=-50331904,Y.fg|=16777216|X-90|8):X>=100&&X<=107?(Y.bg&=-50331904,Y.bg|=16777216|X-100|8):X===0?this._processSGR0(Y):X===1?Y.fg|=134217728:X===3?Y.bg|=67108864:X===4?(Y.fg|=268435456,this._processUnderline(J.hasSubParams(Z)?J.getSubParams(Z)[0]:1,Y)):X===5?Y.fg|=536870912:X===7?Y.fg|=67108864:X===8?Y.fg|=1073741824:X===9?Y.fg|=2147483648:X===2?Y.bg|=134217728:X===21?this._processUnderline(2,Y):X===22?(Y.fg&=-134217729,Y.bg&=-134217729):X===23?Y.bg&=-67108865:X===24?(Y.fg&=-268435457,this._processUnderline(0,Y)):X===25?Y.fg&=-536870913:X===27?Y.fg&=-67108865:X===28?Y.fg&=-1073741825:X===29?Y.fg&=2147483647:X===39?(Y.fg&=-67108864,Y.fg|=f8.fg&16777215):X===49?(Y.bg&=-67108864,Y.bg|=f8.bg&16777215):X===38||X===48||X===58?Z+=this._extractColor(J,Z,Y):X===53?Y.bg|=1073741824:X===55?Y.bg&=-1073741825:X===59?(Y.extended=Y.extended.clone(),Y.extended.underlineColor=-1,Y.updateExtended()):X===100?(Y.fg&=-67108864,Y.fg|=f8.fg&16777215,Y.bg&=-67108864,Y.bg|=f8.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",X);return!0}deviceStatus(J){switch(J.params[0]){case 5:this._coreService.triggerDataEvent(`${D0.ESC}[0n`);break;case 6:let $=this._activeBuffer.y+1,X=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${D0.ESC}[${$};${X}R`);break}return!0}deviceStatusPrivate(J){switch(J.params[0]){case 6:let $=this._activeBuffer.y+1,X=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${D0.ESC}[?${$};${X}R`);break;case 15:break;case 25:break;case 26:break;case 53:break}return!0}softReset(J){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=f8.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(J){let $=J.length===0?1:J.params[0];if($===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch($){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let X=$%2===1;this._coreService.decPrivateModes.cursorBlink=X}return!0}setScrollRegion(J){let $=J.params[0]||1,X;return(J.length<2||(X=J.params[1])>this._bufferService.rows||X===0)&&(X=this._bufferService.rows),X>$&&(this._activeBuffer.scrollTop=$-1,this._activeBuffer.scrollBottom=X-1,this._setCursor(0,0)),!0}windowOptions(J){if(!T90(J.params[0],this._optionsService.rawOptions.windowOptions))return!0;let $=J.length>1?J.params[1]:0;switch(J.params[0]){case 14:$!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${D0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:($===0||$===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>N90&&this._windowTitleStack.shift()),($===0||$===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>N90&&this._iconNameStack.shift());break;case 23:($===0||$===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),($===0||$===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(J){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(J){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(J){return this._windowTitle=J,this._onTitleChange.fire(J),!0}setIconName(J){return this._iconName=J,!0}setOrReportIndexedColor(J){let $=[],X=J.split(";");for(;X.length>1;){let Y=X.shift(),Z=X.shift();if(/^\d+$/.exec(Y)){let Q=parseInt(Y);if(k90(Q))if(Z==="?")$.push({type:0,index:Q});else{let G=_90(Z);G&&$.push({type:1,index:Q,color:G})}}}return $.length&&this._onColor.fire($),!0}setHyperlink(J){let $=J.indexOf(";");if($===-1)return!0;let X=J.slice(0,$).trim(),Y=J.slice($+1);return Y?this._createHyperlink(X,Y):X.trim()?!1:this._finishHyperlink()}_createHyperlink(J,$){this._getCurrentLinkId()&&this._finishHyperlink();let X=J.split(":"),Y,Z=X.findIndex((Q)=>Q.startsWith("id="));return Z!==-1&&(Y=X[Z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:Y,uri:$}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(J,$){let X=J.split(";");for(let Y=0;Y<X.length&&!($>=this._specialColors.length);++Y,++$)if(X[Y]==="?")this._onColor.fire([{type:0,index:this._specialColors[$]}]);else{let Z=_90(X[Y]);Z&&this._onColor.fire([{type:1,index:this._specialColors[$],color:Z}])}return!0}setOrReportFgColor(J){return this._setOrReportSpecialColor(J,0)}setOrReportBgColor(J){return this._setOrReportSpecialColor(J,1)}setOrReportCursorColor(J){return this._setOrReportSpecialColor(J,2)}restoreIndexedColor(J){if(!J)return this._onColor.fire([{type:2}]),!0;let $=[],X=J.split(";");for(let Y=0;Y<X.length;++Y)if(/^\d+$/.exec(X[Y])){let Z=parseInt(X[Y]);k90(Z)&&$.push({type:2,index:Z})}return $.length&&this._onColor.fire($),!0}restoreFgColor(J){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(J){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(J){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Pq),!0}selectCharset(J){return J.length!==2?(this.selectDefaultCharset(),!0):(J[0]==="/"||this._charsetService.setgCharset(UF0[J[0]],X7[J[1]]||Pq),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let J=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,J,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=f8.clone(),this._eraseAttrDataInternal=f8.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(J){return this._charsetService.setgLevel(J),!0}screenAlignmentPattern(){let J=new sJ;J.content=4194373,J.fg=this._curAttrData.fg,J.bg=this._curAttrData.bg,this._setCursor(0,0);for(let $=0;$<this._bufferService.rows;++$){let X=this._activeBuffer.ybase+this._activeBuffer.y+$,Y=this._activeBuffer.lines.get(X);Y&&(Y.fill(J),Y.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(J,$){let X=(G)=>(this._coreService.triggerDataEvent(`${D0.ESC}${G}${D0.ESC}\\`),!0),Y=this._bufferService.buffer,Z=this._optionsService.rawOptions;return X(J==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:J==='"p'?'P1$r61;1"p':J==="r"?`P1$r${Y.scrollTop+1};${Y.scrollBottom+1}r`:J==="m"?"P1$r0m":J===" q"?`P1$r${{block:2,underline:4,bar:6}[Z.cursorStyle]-(Z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(J,$){this._dirtyRowTracker.markRangeDirty(J,$)}},lv=class{constructor(J){this._bufferService=J,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(J){J<this.start?this.start=J:J>this.end&&(this.end=J)}markRangeDirty(J,$){J>$&&(L90=J,J=$,$=L90),J<this.start&&(this.start=J),$>this.end&&(this.end=$)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};lv=Z8([r0(0,f9)],lv);function k90(J){return 0<=J&&J<256}var HF0=50000000,E90=12,jF0=50,VF0=class extends a1{constructor(J){super();this._action=J,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new x0),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(J,$){if($!==void 0&&this._syncCalls>$){this._syncCalls=0;return}if(this._pendingData+=J.length,this._writeBuffer.push(J),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let X;for(;X=this._writeBuffer.shift();){this._action(X);let Y=this._callbacks.shift();Y&&Y()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(J,$){if(this._pendingData>HF0)throw Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=J.length,this._writeBuffer.push(J),this._callbacks.push($),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=J.length,this._writeBuffer.push(J),this._callbacks.push($)}_innerWrite(J=0,$=!0){let X=J||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let Y=this._writeBuffer[this._bufferOffset],Z=this._action(Y,$);if(Z){let G=(q)=>performance.now()-X>=E90?setTimeout(()=>this._innerWrite(0,q)):this._innerWrite(X,q);Z.catch((q)=>(queueMicrotask(()=>{throw q}),Promise.resolve(!1))).then(G);return}let Q=this._callbacks[this._bufferOffset];if(Q&&Q(),this._bufferOffset++,this._pendingData-=Y.length,performance.now()-X>=E90)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>jF0&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},dv=class{constructor(J){this._bufferService=J,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(J){let $=this._bufferService.buffer;if(J.id===void 0){let q=$.addMarker($.ybase+$.y),U={data:J,id:this._nextId++,lines:[q]};return q.onDispose(()=>this._removeMarkerFromLink(U,q)),this._dataByLinkId.set(U.id,U),U.id}let X=J,Y=this._getEntryIdKey(X),Z=this._entriesWithId.get(Y);if(Z)return this.addLineToLink(Z.id,$.ybase+$.y),Z.id;let Q=$.addMarker($.ybase+$.y),G={id:this._nextId++,key:this._getEntryIdKey(X),data:X,lines:[Q]};return Q.onDispose(()=>this._removeMarkerFromLink(G,Q)),this._entriesWithId.set(G.key,G),this._dataByLinkId.set(G.id,G),G.id}addLineToLink(J,$){let X=this._dataByLinkId.get(J);if(X&&X.lines.every((Y)=>Y.line!==$)){let Y=this._bufferService.buffer.addMarker($);X.lines.push(Y),Y.onDispose(()=>this._removeMarkerFromLink(X,Y))}}getLinkData(J){return this._dataByLinkId.get(J)?.data}_getEntryIdKey(J){return`${J.id};;${J.uri}`}_removeMarkerFromLink(J,$){let X=J.lines.indexOf($);X!==-1&&(J.lines.splice(X,1),J.lines.length===0&&(J.data.id!==void 0&&this._entriesWithId.delete(J.key),this._dataByLinkId.delete(J.id)))}};dv=Z8([r0(0,f9)],dv);var I90=!1,WF0=class extends a1{constructor(J){super();this._windowsWrappingHeuristics=this._register(new bH),this._onBinary=this._register(new x0),this.onBinary=this._onBinary.event,this._onData=this._register(new x0),this.onData=this._onData.event,this._onLineFeed=this._register(new x0),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new x0),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new x0),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new x0),this._instantiationService=new vB0,this.optionsService=this._register(new aB0(J)),this._instantiationService.setService(g9,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(mv)),this._instantiationService.setService(f9,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(pv)),this._instantiationService.setService(p90,this._logService),this.coreService=this._register(this._instantiationService.createInstance(uv)),this._instantiationService.setService(_q,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(cv)),this._instantiationService.setService(g90,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Dq)),this._instantiationService.setService(QV0,this.unicodeService),this._charsetService=this._instantiationService.createInstance(tB0),this._instantiationService.setService(ZV0,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(dv),this._instantiationService.setService(m90,this._oscLinkService),this._inputHandler=this._register(new zF0(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(a7.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(a7.forward(this._bufferService.onResize,this._onResize)),this._register(a7.forward(this.coreService.onData,this._onData)),this._register(a7.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new VF0(($,X)=>this._inputHandler.parse($,X))),this._register(a7.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new x0),this._onScroll.event((J)=>{this._onScrollApi?.fire(J.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(J){for(let $ in J)this.optionsService.options[$]=J[$]}write(J,$){this._writeBuffer.write(J,$)}writeSync(J,$){this._logService.logLevel<=3&&!I90&&(this._logService.warn("writeSync is unreliable and will be removed soon."),I90=!0),this._writeBuffer.writeSync(J,$)}input(J,$=!0){this.coreService.triggerDataEvent(J,$)}resize(J,$){isNaN(J)||isNaN($)||(J=Math.max(J,A40),$=Math.max($,P40),this._bufferService.resize(J,$))}scroll(J,$=!1){this._bufferService.scroll(J,$)}scrollLines(J,$){this._bufferService.scrollLines(J,$)}scrollPages(J){this.scrollLines(J*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(J){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(J){let $=J-this._bufferService.buffer.ydisp;$!==0&&this.scrollLines($)}registerEscHandler(J,$){return this._inputHandler.registerEscHandler(J,$)}registerDcsHandler(J,$){return this._inputHandler.registerDcsHandler(J,$)}registerCsiHandler(J,$){return this._inputHandler.registerCsiHandler(J,$)}registerOscHandler(J,$){return this._inputHandler.registerOscHandler(J,$)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let J=!1,$=this.optionsService.rawOptions.windowsPty;$&&$.buildNumber!==void 0&&$.buildNumber!==void 0?J=$.backend==="conpty"&&$.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(J=!0),J?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let J=[];J.push(this.onLineFeed(M90.bind(null,this._bufferService))),J.push(this.registerCsiHandler({final:"H"},()=>(M90(this._bufferService),!1))),this._windowsWrappingHeuristics.value=R5(()=>{for(let $ of J)$.dispose()})}}},BF0={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function FF0(J,$,X,Y){let Z={type:0,cancel:!1,key:void 0},Q=(J.shiftKey?1:0)|(J.altKey?2:0)|(J.ctrlKey?4:0)|(J.metaKey?8:0);switch(J.keyCode){case 0:J.key==="UIKeyInputUpArrow"?$?Z.key=D0.ESC+"OA":Z.key=D0.ESC+"[A":J.key==="UIKeyInputLeftArrow"?$?Z.key=D0.ESC+"OD":Z.key=D0.ESC+"[D":J.key==="UIKeyInputRightArrow"?$?Z.key=D0.ESC+"OC":Z.key=D0.ESC+"[C":J.key==="UIKeyInputDownArrow"&&($?Z.key=D0.ESC+"OB":Z.key=D0.ESC+"[B");break;case 8:Z.key=J.ctrlKey?"\b":D0.DEL,J.altKey&&(Z.key=D0.ESC+Z.key);break;case 9:if(J.shiftKey){Z.key=D0.ESC+"[Z";break}Z.key=D0.HT,Z.cancel=!0;break;case 13:Z.key=J.altKey?D0.ESC+D0.CR:D0.CR,Z.cancel=!0;break;case 27:Z.key=D0.ESC,J.altKey&&(Z.key=D0.ESC+D0.ESC),Z.cancel=!0;break;case 37:if(J.metaKey)break;Q?Z.key=D0.ESC+"[1;"+(Q+1)+"D":$?Z.key=D0.ESC+"OD":Z.key=D0.ESC+"[D";break;case 39:if(J.metaKey)break;Q?Z.key=D0.ESC+"[1;"+(Q+1)+"C":$?Z.key=D0.ESC+"OC":Z.key=D0.ESC+"[C";break;case 38:if(J.metaKey)break;Q?Z.key=D0.ESC+"[1;"+(Q+1)+"A":$?Z.key=D0.ESC+"OA":Z.key=D0.ESC+"[A";break;case 40:if(J.metaKey)break;Q?Z.key=D0.ESC+"[1;"+(Q+1)+"B":$?Z.key=D0.ESC+"OB":Z.key=D0.ESC+"[B";break;case 45:!J.shiftKey&&!J.ctrlKey&&(Z.key=D0.ESC+"[2~");break;case 46:Q?Z.key=D0.ESC+"[3;"+(Q+1)+"~":Z.key=D0.ESC+"[3~";break;case 36:Q?Z.key=D0.ESC+"[1;"+(Q+1)+"H":$?Z.key=D0.ESC+"OH":Z.key=D0.ESC+"[H";break;case 35:Q?Z.key=D0.ESC+"[1;"+(Q+1)+"F":$?Z.key=D0.ESC+"OF":Z.key=D0.ESC+"[F";break;case 33:J.shiftKey?Z.type=2:J.ctrlKey?Z.key=D0.ESC+"[5;"+(Q+1)+"~":Z.key=D0.ESC+"[5~";break;case 34:J.shiftKey?Z.type=3:J.ctrlKey?Z.key=D0.ESC+"[6;"+(Q+1)+"~":Z.key=D0.ESC+"[6~";break;case 112:Q?Z.key=D0.ESC+"[1;"+(Q+1)+"P":Z.key=D0.ESC+"OP";break;case 113:Q?Z.key=D0.ESC+"[1;"+(Q+1)+"Q":Z.key=D0.ESC+"OQ";break;case 114:Q?Z.key=D0.ESC+"[1;"+(Q+1)+"R":Z.key=D0.ESC+"OR";break;case 115:Q?Z.key=D0.ESC+"[1;"+(Q+1)+"S":Z.key=D0.ESC+"OS";break;case 116:Q?Z.key=D0.ESC+"[15;"+(Q+1)+"~":Z.key=D0.ESC+"[15~";break;case 117:Q?Z.key=D0.ESC+"[17;"+(Q+1)+"~":Z.key=D0.ESC+"[17~";break;case 118:Q?Z.key=D0.ESC+"[18;"+(Q+1)+"~":Z.key=D0.ESC+"[18~";break;case 119:Q?Z.key=D0.ESC+"[19;"+(Q+1)+"~":Z.key=D0.ESC+"[19~";break;case 120:Q?Z.key=D0.ESC+"[20;"+(Q+1)+"~":Z.key=D0.ESC+"[20~";break;case 121:Q?Z.key=D0.ESC+"[21;"+(Q+1)+"~":Z.key=D0.ESC+"[21~";break;case 122:Q?Z.key=D0.ESC+"[23;"+(Q+1)+"~":Z.key=D0.ESC+"[23~";break;case 123:Q?Z.key=D0.ESC+"[24;"+(Q+1)+"~":Z.key=D0.ESC+"[24~";break;default:if(J.ctrlKey&&!J.shiftKey&&!J.altKey&&!J.metaKey)J.keyCode>=65&&J.keyCode<=90?Z.key=String.fromCharCode(J.keyCode-64):J.keyCode===32?Z.key=D0.NUL:J.keyCode>=51&&J.keyCode<=55?Z.key=String.fromCharCode(J.keyCode-51+27):J.keyCode===56?Z.key=D0.DEL:J.keyCode===219?Z.key=D0.ESC:J.keyCode===220?Z.key=D0.FS:J.keyCode===221&&(Z.key=D0.GS);else if((!X||Y)&&J.altKey&&!J.metaKey){let G=BF0[J.keyCode]?.[J.shiftKey?1:0];if(G)Z.key=D0.ESC+G;else if(J.keyCode>=65&&J.keyCode<=90){let q=J.ctrlKey?J.keyCode-64:J.keyCode+32,U=String.fromCharCode(q);J.shiftKey&&(U=U.toUpperCase()),Z.key=D0.ESC+U}else if(J.keyCode===32)Z.key=D0.ESC+(J.ctrlKey?D0.NUL:" ");else if(J.key==="Dead"&&J.code.startsWith("Key")){let q=J.code.slice(3,4);J.shiftKey||(q=q.toLowerCase()),Z.key=D0.ESC+q,Z.cancel=!0}}else X&&!J.altKey&&!J.ctrlKey&&!J.shiftKey&&J.metaKey?J.keyCode===65&&(Z.type=1):J.key&&!J.ctrlKey&&!J.altKey&&!J.metaKey&&J.keyCode>=48&&J.key.length===1?Z.key=J.key:J.key&&J.ctrlKey&&(J.key==="_"&&(Z.key=D0.US),J.key==="@"&&(Z.key=D0.NUL));break}return Z}var R8=0,KF0=class{constructor(J){this._getKey=J,this._array=[],this._insertedValues=[],this._flushInsertedTask=new d_,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new d_,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(J){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(J)}_flushInserted(){let J=this._insertedValues.sort((Z,Q)=>this._getKey(Z)-this._getKey(Q)),$=0,X=0,Y=Array(this._array.length+this._insertedValues.length);for(let Z=0;Z<Y.length;Z++)X>=this._array.length||this._getKey(J[$])<=this._getKey(this._array[X])?(Y[Z]=J[$],$++):Y[Z]=this._array[X++];this._array=Y,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(J){if(this._flushCleanupInserted(),this._array.length===0)return!1;let $=this._getKey(J);if($===void 0||(R8=this._search($),R8===-1)||this._getKey(this._array[R8])!==$)return!1;do if(this._array[R8]===J)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(R8),!0;while(++R8<this._array.length&&this._getKey(this._array[R8])===$);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let J=this._deletedIndices.sort((Z,Q)=>Z-Q),$=0,X=Array(this._array.length-J.length),Y=0;for(let Z=0;Z<this._array.length;Z++)J[$]===Z?$++:X[Y++]=this._array[Z];this._array=X,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(J){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(R8=this._search(J),!(R8<0||R8>=this._array.length)&&this._getKey(this._array[R8])===J))do yield this._array[R8];while(++R8<this._array.length&&this._getKey(this._array[R8])===J)}forEachByKey(J,$){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(R8=this._search(J),!(R8<0||R8>=this._array.length)&&this._getKey(this._array[R8])===J))do $(this._array[R8]);while(++R8<this._array.length&&this._getKey(this._array[R8])===J)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(J){let $=0,X=this._array.length-1;for(;X>=$;){let Y=$+X>>1,Z=this._getKey(this._array[Y]);if(Z>J)X=Y-1;else if(Z<J)$=Y+1;else{for(;Y>0&&this._getKey(this._array[Y-1])===J;)Y--;return Y}}return $}},Kv=0,y90=0,AF0=class extends a1{constructor(){super();this._decorations=new KF0((J)=>J?.marker.line),this._onDecorationRegistered=this._register(new x0),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new x0),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(R5(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(J){if(J.marker.isDisposed)return;let $=new PF0(J);if($){let X=$.marker.onDispose(()=>$.dispose()),Y=$.onDispose(()=>{Y.dispose(),$&&(this._decorations.delete($)&&this._onDecorationRemoved.fire($),X.dispose())});this._decorations.insert($),this._onDecorationRegistered.fire($)}return $}reset(){for(let J of this._decorations.values())J.dispose();this._decorations.clear()}*getDecorationsAtCell(J,$,X){let Y=0,Z=0;for(let Q of this._decorations.getKeyIterator($))Y=Q.options.x??0,Z=Y+(Q.options.width??1),J>=Y&&J<Z&&(!X||(Q.options.layer??"bottom")===X)&&(yield Q)}forEachDecorationAtCell(J,$,X,Y){this._decorations.forEachByKey($,(Z)=>{Kv=Z.options.x??0,y90=Kv+(Z.options.width??1),J>=Kv&&J<y90&&(!X||(Z.options.layer??"bottom")===X)&&Y(Z)})}},PF0=class extends n2{constructor(J){super();this.options=J,this.onRenderEmitter=this.add(new x0),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new x0),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=J.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a5.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a5.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},DF0=1000,RF0=class{constructor(J,$=DF0){this._renderCallback=J,this._debounceThresholdMS=$,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(J,$,X){this._rowCount=X,J=J!==void 0?J:0,$=$!==void 0?$:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,J):J,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,$):$;let Y=performance.now();if(Y-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=Y,this._innerRefresh();else if(!this._additionalRefreshRequested){let Z=Y-this._lastRefreshMs,Q=this._debounceThresholdMS-Z;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},Q)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let J=Math.max(this._rowStart,0),$=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(J,$)}},x90=20,b90=!1,s_=class extends a1{constructor(J,$,X,Y){super();this._terminal=J,this._coreBrowserService=X,this._renderService=Y,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let Z=this._coreBrowserService.mainDocument;this._accessibilityContainer=Z.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=Z.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let Q=0;Q<this._terminal.rows;Q++)this._rowElements[Q]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[Q]);if(this._topBoundaryFocusListener=(Q)=>this._handleBoundaryFocus(Q,0),this._bottomBoundaryFocusListener=(Q)=>this._handleBoundaryFocus(Q,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=Z.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new RF0(this._renderRows.bind(this))),!this._terminal.element)throw Error("Cannot enable accessibility before Terminal.open");b90?(this._accessibilityContainer.classList.add("debug"),this._rowContainer.classList.add("debug"),this._debugRootContainer=Z.createElement("div"),this._debugRootContainer.classList.add("xterm"),this._debugRootContainer.appendChild(Z.createTextNode("------start a11y------")),this._debugRootContainer.appendChild(this._accessibilityContainer),this._debugRootContainer.appendChild(Z.createTextNode("------end a11y------")),this._terminal.element.insertAdjacentElement("afterend",this._debugRootContainer)):this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize((Q)=>this._handleResize(Q.rows))),this._register(this._terminal.onRender((Q)=>this._refreshRows(Q.start,Q.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar((Q)=>this._handleChar(Q))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab((Q)=>this._handleTab(Q))),this._register(this._terminal.onKey((Q)=>this._handleKey(Q.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(x1(Z,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(R5(()=>{b90?this._debugRootContainer.remove():this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(J){for(let $=0;$<J;$++)this._handleChar(" ")}_handleChar(J){this._liveRegionLineCount<x90+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==J&&(this._charsToAnnounce+=J):this._charsToAnnounce+=J,J===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===x90+1&&(this._liveRegion.textContent+=Pv.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(J){this._clearLiveRegion(),/\p{Control}/u.test(J)||this._charsToConsume.push(J)}_refreshRows(J,$){this._liveRegionDebouncer.refresh(J,$,this._terminal.rows)}_renderRows(J,$){let X=this._terminal.buffer,Y=X.lines.length.toString();for(let Z=J;Z<=$;Z++){let Q=X.lines.get(X.ydisp+Z),G=[],q=Q?.translateToString(!0,void 0,void 0,G)||"",U=(X.ydisp+Z+1).toString(),z=this._rowElements[Z];z&&(q.length===0?(z.textContent=" ",this._rowColumns.set(z,[0,1])):(z.textContent=q,this._rowColumns.set(z,G)),z.setAttribute("aria-posinset",U),z.setAttribute("aria-setsize",Y),this._alignRowWidth(z))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(J,$){let X=J.target,Y=this._rowElements[$===0?1:this._rowElements.length-2],Z=X.getAttribute("aria-posinset"),Q=$===0?"1":`${this._terminal.buffer.lines.length}`;if(Z===Q||J.relatedTarget!==Y)return;let G,q;if($===0?(G=X,q=this._rowElements.pop(),this._rowContainer.removeChild(q)):(G=this._rowElements.shift(),q=X,this._rowContainer.removeChild(G)),G.removeEventListener("focus",this._topBoundaryFocusListener),q.removeEventListener("focus",this._bottomBoundaryFocusListener),$===0){let U=this._createAccessibilityTreeNode();this._rowElements.unshift(U),this._rowContainer.insertAdjacentElement("afterbegin",U)}else{let U=this._createAccessibilityTreeNode();this._rowElements.push(U),this._rowContainer.appendChild(U)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines($===0?-1:1),this._rowElements[$===0?1:this._rowElements.length-2].focus(),J.preventDefault(),J.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let J=this._coreBrowserService.mainDocument.getSelection();if(!J)return;if(J.isCollapsed){this._rowContainer.contains(J.anchorNode)&&this._terminal.clearSelection();return}if(!J.anchorNode||!J.focusNode){console.error("anchorNode and/or focusNode are null");return}let $={node:J.anchorNode,offset:J.anchorOffset},X={node:J.focusNode,offset:J.focusOffset};if(($.node.compareDocumentPosition(X.node)&Node.DOCUMENT_POSITION_PRECEDING||$.node===X.node&&$.offset>X.offset)&&([$,X]=[X,$]),$.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&($={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains($.node))return;let Y=this._rowElements.slice(-1)[0];if(X.node.compareDocumentPosition(Y)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(X={node:Y,offset:Y.textContent?.length??0}),!this._rowContainer.contains(X.node))return;let Z=({node:q,offset:U})=>{let z=q instanceof Text?q.parentNode:q,H=parseInt(z?.getAttribute("aria-posinset"),10)-1;if(isNaN(H))return console.warn("row is invalid. Race condition?"),null;let j=this._rowColumns.get(z);if(!j)return console.warn("columns is null. Race condition?"),null;let V=U<j.length?j[U]:j.slice(-1)[0]+1;return V>=this._terminal.cols&&(++H,V=0),{row:H,column:V}},Q=Z($),G=Z(X);if(!(!Q||!G)){if(Q.row>G.row||Q.row===G.row&&Q.column>=G.column)throw Error("invalid range");this._terminal.select(Q.column,Q.row,(G.row-Q.row)*this._terminal.cols-Q.column+G.column)}}_handleResize(J){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let $=this._rowContainer.children.length;$<this._terminal.rows;$++)this._rowElements[$]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[$]);for(;this._rowElements.length>J;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let J=this._coreBrowserService.mainDocument.createElement("div");return J.setAttribute("role","listitem"),J.tabIndex=-1,this._refreshRowDimensions(J),J}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let J=0;J<this._terminal.rows;J++)this._refreshRowDimensions(this._rowElements[J]),this._alignRowWidth(this._rowElements[J])}}_refreshRowDimensions(J){J.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(J){J.style.transform="";let $=J.getBoundingClientRect().width,X=this._rowColumns.get(J)?.slice(-1)?.[0];if(!X)return;let Y=X*this._renderService.dimensions.css.cell.width;J.style.transform=`scaleX(${Y/$})`}};s_=Z8([r0(1,av),r0(2,nZ),r0(3,oZ)],s_);var sv=class extends a1{constructor(J,$,X,Y,Z){super();this._element=J,this._mouseService=$,this._renderService=X,this._bufferService=Y,this._linkProviderService=Z,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new x0),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new x0),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(R5(()=>{Mq(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(x1(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(x1(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(x1(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(x1(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(J){this._lastMouseEvent=J;let $=this._positionFromMouseEvent(J,this._element,this._mouseService);if(!$)return;this._isMouseOut=!1;let X=J.composedPath();for(let Y=0;Y<X.length;Y++){let Z=X[Y];if(Z.classList.contains("xterm"))break;if(Z.classList.contains("xterm-hover"))return}(!this._lastBufferCell||$.x!==this._lastBufferCell.x||$.y!==this._lastBufferCell.y)&&(this._handleHover($),this._lastBufferCell=$)}_handleHover(J){if(this._activeLine!==J.y||this._wasResized){this._clearCurrentLink(),this._askForLink(J,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,J)||(this._clearCurrentLink(),this._askForLink(J,!0))}_askForLink(J,$){(!this._activeProviderReplies||!$)&&(this._activeProviderReplies?.forEach((Y)=>{Y?.forEach((Z)=>{Z.link.dispose&&Z.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=J.y);let X=!1;for(let[Y,Z]of this._linkProviderService.linkProviders.entries())$?this._activeProviderReplies?.get(Y)&&(X=this._checkLinkProviderResult(Y,J,X)):Z.provideLinks(J.y,(Q)=>{if(this._isMouseOut)return;let G=Q?.map((q)=>({link:q}));this._activeProviderReplies?.set(Y,G),X=this._checkLinkProviderResult(Y,J,X),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(J.y,this._activeProviderReplies)})}_removeIntersectingLinks(J,$){let X=new Set;for(let Y=0;Y<$.size;Y++){let Z=$.get(Y);if(Z)for(let Q=0;Q<Z.length;Q++){let G=Z[Q],q=G.link.range.start.y<J?0:G.link.range.start.x,U=G.link.range.end.y>J?this._bufferService.cols:G.link.range.end.x;for(let z=q;z<=U;z++){if(X.has(z)){Z.splice(Q--,1);break}X.add(z)}}}}_checkLinkProviderResult(J,$,X){if(!this._activeProviderReplies)return X;let Y=this._activeProviderReplies.get(J),Z=!1;for(let Q=0;Q<J;Q++)(!this._activeProviderReplies.has(Q)||this._activeProviderReplies.get(Q))&&(Z=!0);if(!Z&&Y){let Q=Y.find((G)=>this._linkAtPosition(G.link,$));Q&&(X=!0,this._handleNewLink(Q))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!X)for(let Q=0;Q<this._activeProviderReplies.size;Q++){let G=this._activeProviderReplies.get(Q)?.find((q)=>this._linkAtPosition(q.link,$));if(G){X=!0,this._handleNewLink(G);break}}return X}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(J){if(!this._currentLink)return;let $=this._positionFromMouseEvent(J,this._element,this._mouseService);$&&this._mouseDownLink&&MF0(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,$)&&this._currentLink.link.activate(J,this._currentLink.link.text)}_clearCurrentLink(J,$){!this._currentLink||!this._lastMouseEvent||(!J||!$||this._currentLink.link.range.start.y>=J&&this._currentLink.link.range.end.y<=$)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Mq(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(J){if(!this._lastMouseEvent)return;let $=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);$&&this._linkAtPosition(J.link,$)&&(this._currentLink=J,this._currentLink.state={decorations:{underline:J.link.decorations===void 0?!0:J.link.decorations.underline,pointerCursor:J.link.decorations===void 0?!0:J.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,J.link,this._lastMouseEvent),J.link.decorations={},Object.defineProperties(J.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:(X)=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==X&&(this._currentLink.state.decorations.pointerCursor=X,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",X))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:(X)=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==X&&(this._currentLink.state.decorations.underline=X,this._currentLink.state.isHovered&&this._fireUnderlineEvent(J.link,X))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((X)=>{if(!this._currentLink)return;let Y=X.start===0?0:X.start+1+this._bufferService.buffer.ydisp,Z=this._bufferService.buffer.ydisp+1+X.end;if(this._currentLink.link.range.start.y>=Y&&this._currentLink.link.range.end.y<=Z&&(this._clearCurrentLink(Y,Z),this._lastMouseEvent)){let Q=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);Q&&this._askForLink(Q,!1)}})))}_linkHover(J,$,X){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent($,!0),this._currentLink.state.decorations.pointerCursor&&J.classList.add("xterm-cursor-pointer")),$.hover&&$.hover(X,$.text)}_fireUnderlineEvent(J,$){let X=J.range,Y=this._bufferService.buffer.ydisp,Z=this._createLinkUnderlineEvent(X.start.x-1,X.start.y-Y-1,X.end.x,X.end.y-Y-1,void 0);($?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(Z)}_linkLeave(J,$,X){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent($,!1),this._currentLink.state.decorations.pointerCursor&&J.classList.remove("xterm-cursor-pointer")),$.leave&&$.leave(X,$.text)}_linkAtPosition(J,$){let X=J.range.start.y*this._bufferService.cols+J.range.start.x,Y=J.range.end.y*this._bufferService.cols+J.range.end.x,Z=$.y*this._bufferService.cols+$.x;return X<=Z&&Z<=Y}_positionFromMouseEvent(J,$,X){let Y=X.getCoords(J,$,this._bufferService.cols,this._bufferService.rows);if(Y)return{x:Y[0],y:Y[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(J,$,X,Y,Z){return{x1:J,y1:$,x2:X,y2:Y,cols:this._bufferService.cols,fg:Z}}};sv=Z8([r0(1,rv),r0(2,oZ),r0(3,f9),r0(4,c90)],sv);function MF0(J,$){return J.text===$.text&&J.range.start.x===$.range.start.x&&J.range.start.y===$.range.start.y&&J.range.end.x===$.range.end.x&&J.range.end.y===$.range.end.y}var OF0=class extends WF0{constructor(J={}){super(J);this._linkifier=this._register(new bH),this.browser=U40,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new bH),this._onCursorMove=this._register(new x0),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new x0),this.onKey=this._onKey.event,this._onRender=this._register(new x0),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new x0),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new x0),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new x0),this.onBell=this._onBell.event,this._onFocus=this._register(new x0),this._onBlur=this._register(new x0),this._onA11yCharEmitter=this._register(new x0),this._onA11yTabEmitter=this._register(new x0),this._onWillOpen=this._register(new x0),this._setup(),this._decorationService=this._instantiationService.createInstance(AF0),this._instantiationService.setService(uF,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(HB0),this._instantiationService.setService(c90,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Rv)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(($)=>this.refresh($?.start??0,$?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(($)=>this._reportWindowsOptions($))),this._register(this._inputHandler.onColor(($)=>this._handleColorEvent($))),this._register(a7.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(a7.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(a7.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(a7.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(($)=>this._afterResize($.cols,$.rows))),this._register(R5(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(J){if(this._themeService)for(let $ of J){let X,Y="";switch($.index){case 256:X="foreground",Y="10";break;case 257:X="background",Y="11";break;case 258:X="cursor",Y="12";break;default:X="ansi",Y="4;"+$.index}switch($.type){case 0:let Z=D5.toColorRGB(X==="ansi"?this._themeService.colors.ansi[$.index]:this._themeService.colors[X]);this.coreService.triggerDataEvent(`${D0.ESC}]${Y};${qF0(Z)}${G40.ST}`);break;case 1:if(X==="ansi")this._themeService.modifyColors((Q)=>Q.ansi[$.index]=g8.toColor(...$.color));else{let Q=X;this._themeService.modifyColors((G)=>G[Q]=g8.toColor(...$.color))}break;case 2:this._themeService.restoreColor($.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(J){J?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(s_,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(J){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let J=this.buffer.ybase+this.buffer.y,$=this.buffer.lines.get(J);if(!$)return;let X=Math.min(this.buffer.x,this.cols-1),Y=this._renderService.dimensions.css.cell.height,Z=$.getWidth(X),Q=this._renderService.dimensions.css.cell.width*Z,G=this.buffer.y*this._renderService.dimensions.css.cell.height,q=X*this._renderService.dimensions.css.cell.width;this.textarea.style.left=q+"px",this.textarea.style.top=G+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=Y+"px",this.textarea.style.lineHeight=Y+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(x1(this.element,"copy",($)=>{this.hasSelection()&&tj0($,this._selectionService)}));let J=($)=>ej0($,this.textarea,this.coreService,this.optionsService);this._register(x1(this.textarea,"paste",J)),this._register(x1(this.element,"paste",J)),z40?this._register(x1(this.element,"mousedown",($)=>{$.button===2&&S70($,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(x1(this.element,"contextmenu",($)=>{S70($,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Xh&&this._register(x1(this.element,"auxclick",($)=>{$.button===1&&h90($,this.textarea,this.screenElement)}))}_bindKeys(){this._register(x1(this.textarea,"keyup",(J)=>this._keyUp(J),!0)),this._register(x1(this.textarea,"keydown",(J)=>this._keyDown(J),!0)),this._register(x1(this.textarea,"keypress",(J)=>this._keyPress(J),!0)),this._register(x1(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(x1(this.textarea,"compositionupdate",(J)=>this._compositionHelper.compositionupdate(J))),this._register(x1(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(x1(this.textarea,"input",(J)=>this._inputEvent(J),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(J){if(!J)throw Error("Terminal requires a parent element.");if(J.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=J.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),J.appendChild(this.element);let $=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),$.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(x1(this.screenElement,"mousemove",(Z)=>this.updateCursorStyle(Z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),$.appendChild(this.screenElement);let X=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Av.get()),V40||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>X.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(UB0,this.textarea,J.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(nZ,this._coreBrowserService),this._register(x1(this.textarea,"focus",(Z)=>this._handleTextAreaFocus(Z))),this._register(x1(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Cv,this._document,this._helperContainer),this._instantiationService.setService(r_,this._charSizeService),this._themeService=this._instantiationService.createInstance(gv),this._instantiationService.setService(SH,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(c_),this._instantiationService.setService(u90,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(hv,this.rows,this.screenElement)),this._instantiationService.setService(oZ,this._renderService),this._register(this._renderService.onRenderedViewportChange((Z)=>this._onRender.fire(Z))),this.onResize((Z)=>this._renderService.resize(Z.cols,Z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(xv,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(vv),this._instantiationService.setService(rv,this._mouseService);let Y=this._linkifier.value=this._register(this._instantiationService.createInstance(sv,this.screenElement));this.element.appendChild($);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Iv,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines((Z)=>{super.scrollLines(Z,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(fv,this.element,this.screenElement,Y)),this._instantiationService.setService(qV0,this._selectionService),this._register(this._selectionService.onRequestScrollLines((Z)=>this.scrollLines(Z.amount,Z.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw((Z)=>this._renderService.handleSelectionChanged(Z.start,Z.end,Z.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection((Z)=>{this.textarea.value=Z,this.textarea.focus(),this.textarea.select()})),this._register(a7.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(yv,this.screenElement)),this._register(x1(this.element,"mousedown",(Z)=>this._selectionService.handleMouseDown(Z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(s_,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",(Z)=>this._handleScreenReaderModeOptionChange(Z))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(u_,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",(Z)=>{!this._overviewRulerRenderer&&Z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(u_,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(Sv,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let J=this,$=this.element;function X(Q){let G=J._mouseService.getMouseReportCoords(Q,J.screenElement);if(!G)return!1;let q,U;switch(Q.overrideType||Q.type){case"mousemove":U=32,Q.buttons===void 0?(q=3,Q.button!==void 0&&(q=Q.button<3?Q.button:3)):q=Q.buttons&1?0:Q.buttons&4?1:Q.buttons&2?2:3;break;case"mouseup":U=0,q=Q.button<3?Q.button:3;break;case"mousedown":U=1,q=Q.button<3?Q.button:3;break;case"wheel":if(J._customWheelEventHandler&&J._customWheelEventHandler(Q)===!1)return!1;let z=Q.deltaY;if(z===0||J.coreMouseService.consumeWheelEvent(Q,J._renderService?.dimensions?.device?.cell?.height,J._coreBrowserService?.dpr)===0)return!1;U=z<0?0:1,q=4;break;default:return!1}return U===void 0||q===void 0||q>4?!1:J.coreMouseService.triggerMouseEvent({col:G.col,row:G.row,x:G.x,y:G.y,button:q,action:U,ctrl:Q.ctrlKey,alt:Q.altKey,shift:Q.shiftKey})}let Y={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Z={mouseup:(Q)=>(X(Q),Q.buttons||(this._document.removeEventListener("mouseup",Y.mouseup),Y.mousedrag&&this._document.removeEventListener("mousemove",Y.mousedrag)),this.cancel(Q)),wheel:(Q)=>(X(Q),this.cancel(Q,!0)),mousedrag:(Q)=>{Q.buttons&&X(Q)},mousemove:(Q)=>{Q.buttons||X(Q)}};this._register(this.coreMouseService.onProtocolChange((Q)=>{Q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),Q&8?Y.mousemove||($.addEventListener("mousemove",Z.mousemove),Y.mousemove=Z.mousemove):($.removeEventListener("mousemove",Y.mousemove),Y.mousemove=null),Q&16?Y.wheel||($.addEventListener("wheel",Z.wheel,{passive:!1}),Y.wheel=Z.wheel):($.removeEventListener("wheel",Y.wheel),Y.wheel=null),Q&2?Y.mouseup||(Y.mouseup=Z.mouseup):(this._document.removeEventListener("mouseup",Y.mouseup),Y.mouseup=null),Q&4?Y.mousedrag||(Y.mousedrag=Z.mousedrag):(this._document.removeEventListener("mousemove",Y.mousedrag),Y.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(x1($,"mousedown",(Q)=>{if(Q.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(Q)))return X(Q),Y.mouseup&&this._document.addEventListener("mouseup",Y.mouseup),Y.mousedrag&&this._document.addEventListener("mousemove",Y.mousedrag),this.cancel(Q)})),this._register(x1($,"wheel",(Q)=>{if(!Y.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Q)===!1)return!1;if(!this.buffer.hasScrollback){if(Q.deltaY===0)return!1;if(J.coreMouseService.consumeWheelEvent(Q,J._renderService?.dimensions?.device?.cell?.height,J._coreBrowserService?.dpr)===0)return this.cancel(Q,!0);let G=D0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Q.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(G,!0),this.cancel(Q,!0)}}},{passive:!1}))}refresh(J,$){this._renderService?.refreshRows(J,$)}updateCursorStyle(J){this._selectionService?.shouldColumnSelect(J)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(J,$){this._viewport?this._viewport.scrollLines(J):super.scrollLines(J,$),this.refresh(0,this.rows-1)}scrollPages(J){this.scrollLines(J*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(J){J&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(J){let $=J-this._bufferService.buffer.ydisp;$!==0&&this.scrollLines($)}paste(J){v90(J,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(J){this._customKeyEventHandler=J}attachCustomWheelEventHandler(J){this._customWheelEventHandler=J}registerLinkProvider(J){return this._linkProviderService.registerLinkProvider(J)}registerCharacterJoiner(J){if(!this._characterJoinerService)throw Error("Terminal must be opened first");let $=this._characterJoinerService.register(J);return this.refresh(0,this.rows-1),$}deregisterCharacterJoiner(J){if(!this._characterJoinerService)throw Error("Terminal must be opened first");this._characterJoinerService.deregister(J)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(J){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+J)}registerDecoration(J){return this._decorationService.registerDecoration(J)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(J,$,X){this._selectionService.setSelection(J,$,X)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(J,$){this._selectionService?.selectLines(J,$)}_keyDown(J){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)return!1;let $=this.browser.isMac&&this.options.macOptionIsMeta&&J.altKey;if(!$&&!this._compositionHelper.keydown(J))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!$&&(J.key==="Dead"||J.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let X=FF0(J,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(J),X.type===3||X.type===2){let Y=this.rows-1;return this.scrollLines(X.type===2?-Y:Y),this.cancel(J,!0)}if(X.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,J)||(X.cancel&&this.cancel(J,!0),!X.key)||J.key&&!J.ctrlKey&&!J.altKey&&!J.metaKey&&J.key.length===1&&J.key.charCodeAt(0)>=65&&J.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((X.key===D0.ETX||X.key===D0.CR)&&(this.textarea.value=""),this._onKey.fire({key:X.key,domEvent:J}),this._showCursor(),this.coreService.triggerDataEvent(X.key,!0),!this.optionsService.rawOptions.screenReaderMode||J.altKey||J.ctrlKey)return this.cancel(J,!0);this._keyDownHandled=!0}_isThirdLevelShift(J,$){let X=J.isMac&&!this.options.macOptionIsMeta&&$.altKey&&!$.ctrlKey&&!$.metaKey||J.isWindows&&$.altKey&&$.ctrlKey&&!$.metaKey||J.isWindows&&$.getModifierState("AltGraph");return $.type==="keypress"?X:X&&(!$.keyCode||$.keyCode>47)}_keyUp(J){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)&&(_F0(J)||this.focus(),this.updateCursorStyle(J),this._keyPressHandled=!1)}_keyPress(J){let $;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)return!1;if(this.cancel(J),J.charCode)$=J.charCode;else if(J.which===null||J.which===void 0)$=J.keyCode;else if(J.which!==0&&J.charCode!==0)$=J.which;else return!1;return!$||(J.altKey||J.ctrlKey||J.metaKey)&&!this._isThirdLevelShift(this.browser,J)?!1:($=String.fromCharCode($),this._onKey.fire({key:$,domEvent:J}),this._showCursor(),this.coreService.triggerDataEvent($,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(J){if(J.data&&J.inputType==="insertText"&&(!J.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let $=J.data;return this.coreService.triggerDataEvent($,!0),this.cancel(J),!0}return!1}resize(J,$){if(J===this.cols&&$===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(J,$)}_afterResize(J,$){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let J=1;J<this.rows;J++)this.buffer.lines.push(this.buffer.getBlankLine(f8));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let J=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=J,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(D0.ESC+"[I"):this.coreService.triggerDataEvent(D0.ESC+"[O")}_reportWindowsOptions(J){if(this._renderService)switch(J){case 0:let $=this._renderService.dimensions.css.canvas.width.toFixed(0),X=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${D0.ESC}[4;${X};${$}t`);break;case 1:let Y=this._renderService.dimensions.css.cell.width.toFixed(0),Z=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${D0.ESC}[6;${Z};${Y}t`);break}}cancel(J,$){if(!(!this.options.cancelEvents&&!$))return J.preventDefault(),J.stopPropagation(),!1}};function _F0(J){return J.keyCode===16||J.keyCode===17||J.keyCode===18}var NF0=class{constructor(){this._addons=[]}dispose(){for(let J=this._addons.length-1;J>=0;J--)this._addons[J].instance.dispose()}loadAddon(J,$){let X={instance:$,dispose:$.dispose,isDisposed:!1};this._addons.push(X),$.dispose=()=>this._wrappedAddonDispose(X),$.activate(J)}_wrappedAddonDispose(J){if(J.isDisposed)return;let $=-1;for(let X=0;X<this._addons.length;X++)if(this._addons[X]===J){$=X;break}if($===-1)throw Error("Could not dispose an addon that has not been loaded");J.isDisposed=!0,J.dispose.apply(J.instance),this._addons.splice($,1)}},TF0=class{constructor(J){this._line=J}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(J,$){if(!(J<0||J>=this._line.length))return $?(this._line.loadCell(J,$),$):this._line.loadCell(J,new sJ)}translateToString(J,$,X){return this._line.translateToString(J,$,X)}},S90=class{constructor(J,$){this._buffer=J,this.type=$}init(J){return this._buffer=J,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(J){let $=this._buffer.lines.get(J);if($)return new TF0($)}getNullCell(){return new sJ}},wF0=class extends a1{constructor(J){super();this._core=J,this._onBufferChange=this._register(new x0),this.onBufferChange=this._onBufferChange.event,this._normal=new S90(this._core.buffers.normal,"normal"),this._alternate=new S90(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},LF0=class{constructor(J){this._core=J}registerCsiHandler(J,$){return this._core.registerCsiHandler(J,(X)=>$(X.toArray()))}addCsiHandler(J,$){return this.registerCsiHandler(J,$)}registerDcsHandler(J,$){return this._core.registerDcsHandler(J,(X,Y)=>$(X,Y.toArray()))}addDcsHandler(J,$){return this.registerDcsHandler(J,$)}registerEscHandler(J,$){return this._core.registerEscHandler(J,$)}addEscHandler(J,$){return this.registerEscHandler(J,$)}registerOscHandler(J,$){return this._core.registerOscHandler(J,$)}addOscHandler(J,$){return this.registerOscHandler(J,$)}},kF0=class{constructor(J){this._core=J}register(J){this._core.unicodeService.register(J)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(J){this._core.unicodeService.activeVersion=J}},EF0=["cols","rows"],WY=0,R40=class extends a1{constructor(J){super(),this._core=this._register(new OF0(J)),this._addonManager=this._register(new NF0),this._publicOptions={...this._core.options};let $=(Y)=>this._core.options[Y],X=(Y,Z)=>{this._checkReadonlyOptions(Y),this._core.options[Y]=Z};for(let Y in this._core.options){let Z={get:$.bind(this,Y),set:X.bind(this,Y)};Object.defineProperty(this._publicOptions,Y,Z)}}_checkReadonlyOptions(J){if(EF0.includes(J))throw Error(`Option "${J}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new LF0(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new kF0(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new wF0(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let J=this._core.coreService.decPrivateModes,$="none";switch(this._core.coreMouseService.activeProtocol){case"X10":$="x10";break;case"VT200":$="vt200";break;case"DRAG":$="drag";break;case"ANY":$="any";break}return{applicationCursorKeysMode:J.applicationCursorKeys,applicationKeypadMode:J.applicationKeypad,bracketedPasteMode:J.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:$,originMode:J.origin,reverseWraparoundMode:J.reverseWraparound,sendFocusMode:J.sendFocus,synchronizedOutputMode:J.synchronizedOutput,wraparoundMode:J.wraparound}}get options(){return this._publicOptions}set options(J){for(let $ in J)this._publicOptions[$]=J[$]}blur(){this._core.blur()}focus(){this._core.focus()}input(J,$=!0){this._core.input(J,$)}resize(J,$){this._verifyIntegers(J,$),this._core.resize(J,$)}open(J){this._core.open(J)}attachCustomKeyEventHandler(J){this._core.attachCustomKeyEventHandler(J)}attachCustomWheelEventHandler(J){this._core.attachCustomWheelEventHandler(J)}registerLinkProvider(J){return this._core.registerLinkProvider(J)}registerCharacterJoiner(J){return this._checkProposedApi(),this._core.registerCharacterJoiner(J)}deregisterCharacterJoiner(J){this._checkProposedApi(),this._core.deregisterCharacterJoiner(J)}registerMarker(J=0){return this._verifyIntegers(J),this._core.registerMarker(J)}registerDecoration(J){return this._checkProposedApi(),this._verifyPositiveIntegers(J.x??0,J.width??0,J.height??0),this._core.registerDecoration(J)}hasSelection(){return this._core.hasSelection()}select(J,$,X){this._verifyIntegers(J,$,X),this._core.select(J,$,X)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(J,$){this._verifyIntegers(J,$),this._core.selectLines(J,$)}dispose(){super.dispose()}scrollLines(J){this._verifyIntegers(J),this._core.scrollLines(J)}scrollPages(J){this._verifyIntegers(J),this._core.scrollPages(J)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(J){this._verifyIntegers(J),this._core.scrollToLine(J)}clear(){this._core.clear()}write(J,$){this._core.write(J,$)}writeln(J,$){this._core.write(J),this._core.write(`\r
`,$)}paste(J){this._core.paste(J)}refresh(J,$){this._verifyIntegers(J,$),this._core.refresh(J,$)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(J){this._addonManager.loadAddon(this,J)}static get strings(){return{get promptLabel(){return Av.get()},set promptLabel(J){Av.set(J)},get tooMuchOutput(){return Pv.get()},set tooMuchOutput(J){Pv.set(J)}}}_verifyIntegers(...J){for(WY of J)if(WY===1/0||isNaN(WY)||WY%1!==0)throw Error("This API only accepts integers")}_verifyPositiveIntegers(...J){for(WY of J)if(WY&&(WY===1/0||isNaN(WY)||WY%1!==0||WY<0))throw Error("This API only accepts positive integers")}};var{defineProperty:IF0,getOwnPropertyDescriptor:yF0}=Object,xF0=(J,$,X,Y)=>{for(var Z=Y>1?void 0:Y?yF0($,X):$,Q=J.length-1,G;Q>=0;Q--)(G=J[Q])&&(Z=(Y?G($,X,Z):G(Z))||Z);return Y&&Z&&IF0($,X,Z),Z},bF0=(J,$)=>(X,Y)=>$(X,Y,J),SF0=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(J){setTimeout(()=>{throw J.stack?M40.isErrorNoTelemetry(J)?new M40(J.message+`

`+J.stack):Error(J.message+`

`+J.stack):J},0)}}addListener(J){return this.listeners.push(J),()=>{this._removeListener(J)}}emit(J){this.listeners.forEach(($)=>{$(J)})}_removeListener(J){this.listeners.splice(this.listeners.indexOf(J),1)}setUnexpectedErrorHandler(J){this.unexpectedErrorHandler=J}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(J){this.unexpectedErrorHandler(J),this.emit(J)}onUnexpectedExternalError(J){this.unexpectedErrorHandler(J)}},CF0=new SF0;function YN(J){vF0(J)||CF0.onUnexpectedError(J)}var Ah="Canceled";function vF0(J){return J instanceof hF0?!0:J instanceof Error&&J.name===Ah&&J.message===Ah}var hF0=class extends Error{constructor(){super(Ah),this.name=this.message}},M40=class J extends Error{constructor($){super($),this.name="CodeExpectedError"}static fromError($){if($ instanceof J)return $;let X=new J;return X.message=$.message,X.stack=$.stack,X}static isErrorNoTelemetry($){return $.name==="CodeExpectedError"}};function fF0(J,$,X=0,Y=J.length){let Z=X,Q=Y;for(;Z<Q;){let G=Math.floor((Z+Q)/2);$(J[G])?Z=G+1:Q=G}return Z-1}var gF0=class J{constructor($){this._array=$,this._findLastMonotonousLastIdx=0}findLastMonotonous($){if(J.assertInvariants){if(this._prevFindLastPredicate){for(let Y of this._array)if(this._prevFindLastPredicate(Y)&&!$(Y))throw Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=$}let X=fF0(this._array,$,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=X+1,X===-1?void 0:this._array[X]}};gF0.assertInvariants=!1;var ZJ0;((J)=>{function $(Q){return Q<0}J.isLessThan=$;function X(Q){return Q<=0}J.isLessThanOrEqual=X;function Y(Q){return Q>0}J.isGreaterThan=Y;function Z(Q){return Q===0}J.isNeitherLessOrGreaterThan=Z,J.greaterThan=1,J.lessThan=-1,J.neitherLessOrGreaterThan=0})(ZJ0||={});function pF0(J,$){return(X,Y)=>$(J(X),J(Y))}var mF0=(J,$)=>J-$,O40=class J{constructor($){this.iterate=$}forEach($){this.iterate((X)=>($(X),!0))}toArray(){let $=[];return this.iterate((X)=>($.push(X),!0)),$}filter($){return new J((X)=>this.iterate((Y)=>$(Y)?X(Y):!0))}map($){return new J((X)=>this.iterate((Y)=>X($(Y))))}some($){let X=!1;return this.iterate((Y)=>(X=$(Y),!X)),X}findFirst($){let X;return this.iterate((Y)=>$(Y)?(X=Y,!1):!0),X}findLast($){let X;return this.iterate((Y)=>($(Y)&&(X=Y),!0)),X}findLastMaxBy($){let X,Y=!0;return this.iterate((Z)=>((Y||ZJ0.isGreaterThan($(Z,X)))&&(Y=!1,X=Z),!0)),X}};O40.empty=new O40((J)=>{});function uF0(J,$){let X=Object.create(null);for(let Y of J){let Z=$(Y),Q=X[Z];Q||(Q=X[Z]=[]),Q.push(Y)}return X}var _40,N40,$R1=class{constructor(J,$){this.toKey=$,this._map=new Map,this[_40]="SetWithKey";for(let X of J)this.add(X)}get size(){return this._map.size}add(J){let $=this.toKey(J);return this._map.set($,J),this}delete(J){return this._map.delete(this.toKey(J))}has(J){return this._map.has(this.toKey(J))}*entries(){for(let J of this._map.values())yield[J,J]}keys(){return this.values()}*values(){for(let J of this._map.values())yield J}clear(){this._map.clear()}forEach(J,$){this._map.forEach((X)=>J.call($,X,X,this))}[(N40=Symbol.iterator,_40=Symbol.toStringTag,N40)](){return this.values()}},cF0=class{constructor(){this.map=new Map}add(J,$){let X=this.map.get(J);X||(X=new Set,this.map.set(J,X)),X.add($)}delete(J,$){let X=this.map.get(J);X&&(X.delete($),X.size===0&&this.map.delete(J))}forEach(J,$){let X=this.map.get(J);X&&X.forEach($)}get(J){return this.map.get(J)||new Set}};function lF0(J,$){let X=this,Y=!1,Z;return function(){if(Y)return Z;if(Y=!0,$)try{Z=J.apply(X,arguments)}finally{$()}else Z=J.apply(X,arguments);return Z}}var QJ0;((J)=>{function $(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}J.is=$;let X=Object.freeze([]);function Y(){return X}J.empty=Y;function*Z(R){yield R}J.single=Z;function Q(R){return $(R)?R:Z(R)}J.wrap=Q;function G(R){return R||X}J.from=G;function*q(R){for(let O=R.length-1;O>=0;O--)yield R[O]}J.reverse=q;function U(R){return!R||R[Symbol.iterator]().next().done===!0}J.isEmpty=U;function z(R){return R[Symbol.iterator]().next().value}J.first=z;function H(R,O){let N=0;for(let T of R)if(O(T,N++))return!0;return!1}J.some=H;function j(R,O){for(let N of R)if(O(N))return N}J.find=j;function*V(R,O){for(let N of R)O(N)&&(yield N)}J.filter=V;function*W(R,O){let N=0;for(let T of R)yield O(T,N++)}J.map=W;function*B(R,O){let N=0;for(let T of R)yield*O(T,N++)}J.flatMap=B;function*K(...R){for(let O of R)yield*O}J.concat=K;function P(R,O,N){let T=N;for(let S of R)T=O(T,S);return T}J.reduce=P;function*A(R,O,N=R.length){for(O<0&&(O+=R.length),N<0?N+=R.length:N>R.length&&(N=R.length);O<N;O++)yield R[O]}J.slice=A;function D(R,O=Number.POSITIVE_INFINITY){let N=[];if(O===0)return[N,R];let T=R[Symbol.iterator]();for(let S=0;S<O;S++){let v=T.next();if(v.done)return[N,J.empty()];N.push(v.value)}return[N,{[Symbol.iterator](){return T}}]}J.consume=D;async function M(R){let O=[];for await(let N of R)O.push(N);return Promise.resolve(O)}J.asyncToArray=M})(QJ0||={});var dF0=!1,pH=null,sF0=class J{constructor(){this.livingDisposables=new Map}getDisposableData($){let X=this.livingDisposables.get($);return X||(X={parent:null,source:null,isSingleton:!1,value:$,idx:J.idx++},this.livingDisposables.set($,X)),X}trackDisposable($){let X=this.getDisposableData($);X.source||(X.source=Error().stack)}setParent($,X){let Y=this.getDisposableData($);Y.parent=X}markAsDisposed($){this.livingDisposables.delete($)}markAsSingleton($){this.getDisposableData($).isSingleton=!0}getRootParent($,X){let Y=X.get($);if(Y)return Y;let Z=$.parent?this.getRootParent(this.getDisposableData($.parent),X):$;return X.set($,Z),Z}getTrackedDisposables(){let $=new Map;return[...this.livingDisposables.entries()].filter(([,X])=>X.source!==null&&!this.getRootParent(X,$).isSingleton).flatMap(([X])=>X)}computeLeakingDisposables($=10,X){let Y;if(X)Y=X;else{let U=new Map,z=[...this.livingDisposables.values()].filter((j)=>j.source!==null&&!this.getRootParent(j,U).isSingleton);if(z.length===0)return;let H=new Set(z.map((j)=>j.value));if(Y=z.filter((j)=>!(j.parent&&H.has(j.parent))),Y.length===0)throw Error("There are cyclic diposable chains!")}if(!Y)return;function Z(U){function z(j,V){for(;j.length>0&&V.some((W)=>typeof W=="string"?W===j[0]:j[0].match(W));)j.shift()}let H=U.source.split(`
`).map((j)=>j.trim().replace("at ","")).filter((j)=>j!=="");return z(H,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),H.reverse()}let Q=new cF0;for(let U of Y){let z=Z(U);for(let H=0;H<=z.length;H++)Q.add(z.slice(0,H).join(`
`),U)}Y.sort(pF0((U)=>U.idx,mF0));let G="",q=0;for(let U of Y.slice(0,$)){q++;let z=Z(U),H=[];for(let j=0;j<z.length;j++){let V=z[j];V=`(shared with ${Q.get(z.slice(0,j+1).join(`
`)).size}/${Y.length} leaks) at ${V}`;let W=Q.get(z.slice(0,j).join(`
`)),B=uF0([...W].map((K)=>Z(K)[j]),(K)=>K);delete B[z[j]];for(let[K,P]of Object.entries(B))H.unshift(`    - stacktraces of ${P.length} other leaks continue with ${K}`);H.unshift(V)}G+=`


==================== Leaking disposable ${q}/${Y.length}: ${U.value.constructor.name} ====================
${H.join(`
`)}
============================================================

`}return Y.length>$&&(G+=`


... and ${Y.length-$} more leaking disposables

`),{leaks:Y,details:G}}};sF0.idx=0;function aF0(J){pH=J}if(dF0){let J="__is_disposable_tracked__";aF0(new class{trackDisposable($){let X=Error("Potentially leaked disposable").stack;setTimeout(()=>{$[J]||console.log(X)},3000)}setParent($,X){if($&&$!==JJ.None)try{$[J]=!0}catch{}}markAsDisposed($){if($&&$!==JJ.None)try{$[J]=!0}catch{}}markAsSingleton($){}})}function VN(J){return pH?.trackDisposable(J),J}function WN(J){pH?.markAsDisposed(J)}function oF(J,$){pH?.setParent(J,$)}function rF0(J,$){if(pH)for(let X of J)pH.setParent(X,$)}function GJ0(J){if(QJ0.is(J)){let $=[];for(let X of J)if(X)try{X.dispose()}catch(Y){$.push(Y)}if($.length===1)throw $[0];if($.length>1)throw AggregateError($,"Encountered errors while disposing of store");return Array.isArray(J)?[]:J}else if(J)return J.dispose(),J}function qJ0(...J){let $=i7(()=>GJ0(J));return rF0(J,$),$}function i7(J){let $=VN({dispose:lF0(()=>{WN($),J()})});return $}var UJ0=class J{constructor(){this._toDispose=new Set,this._isDisposed=!1,VN(this)}dispose(){this._isDisposed||(WN(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{GJ0(this._toDispose)}finally{this._toDispose.clear()}}add($){if(!$)return $;if($===this)throw Error("Cannot register a disposable on itself!");return oF($,this),this._isDisposed?J.DISABLE_DISPOSED_WARNING||console.warn(Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add($),$}delete($){if($){if($===this)throw Error("Cannot dispose a disposable on itself!");this._toDispose.delete($),$.dispose()}}deleteAndLeak($){$&&this._toDispose.has($)&&(this._toDispose.delete($),oF($,null))}};UJ0.DISABLE_DISPOSED_WARNING=!1;var gH=UJ0,JJ=class{constructor(){this._store=new gH,VN(this),oF(this._store,this)}dispose(){WN(this),this._store.dispose()}_register(J){if(J===this)throw Error("Cannot register a disposable on itself!");return this._store.add(J)}};JJ.None=Object.freeze({dispose(){}});var dF=class{constructor(){this._isDisposed=!1,VN(this)}get value(){return this._isDisposed?void 0:this._value}set value(J){this._isDisposed||J===this._value||(this._value?.dispose(),J&&oF(J,this),this._value=J)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,WN(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let J=this._value;return this._value=void 0,J&&oF(J,null),J}},Nh=typeof process<"u"&&"title"in process,eF=Nh?"node":navigator.userAgent,Th=Nh?"node":navigator.platform,iF0=eF.includes("Firefox"),nF0=eF.includes("Edge"),zJ0=/^((?!chrome|android).)*safari/i.test(eF);function oF0(){if(!zJ0)return 0;let J=eF.match(/Version\/(\d+)/);return J===null||J.length<2?0:parseInt(J[1])}var XR1=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Th),YR1=["Windows","Win16","Win32","WinCE"].includes(Th),ZR1=Th.indexOf("Linux")>=0,QR1=/\bCrOS\b/.test(eF),tF0="",L7=0,k7=0,E7=0,G8=0,aJ={css:"#00000000",rgba:0},m9;((J)=>{function $(Z,Q,G,q){return q!==void 0?`#${Nq(Z)}${Nq(Q)}${Nq(G)}${Nq(q)}`:`#${Nq(Z)}${Nq(Q)}${Nq(G)}`}J.toCss=$;function X(Z,Q,G,q=255){return(Z<<24|Q<<16|G<<8|q)>>>0}J.toRgba=X;function Y(Z,Q,G,q){return{css:J.toCss(Z,Q,G,q),rgba:J.toRgba(Z,Q,G,q)}}J.toColor=Y})(m9||={});var nF;((J)=>{function $(U,z){if(G8=(z.rgba&255)/255,G8===1)return{css:z.css,rgba:z.rgba};let H=z.rgba>>24&255,j=z.rgba>>16&255,V=z.rgba>>8&255,W=U.rgba>>24&255,B=U.rgba>>16&255,K=U.rgba>>8&255;L7=W+Math.round((H-W)*G8),k7=B+Math.round((j-B)*G8),E7=K+Math.round((V-K)*G8);let P=m9.toCss(L7,k7,E7),A=m9.toRgba(L7,k7,E7);return{css:P,rgba:A}}J.blend=$;function X(U){return(U.rgba&255)===255}J.isOpaque=X;function Y(U,z,H){let j=Tq.ensureContrastRatio(U.rgba,z.rgba,H);if(j)return m9.toColor(j>>24&255,j>>16&255,j>>8&255)}J.ensureContrastRatio=Y;function Z(U){let z=(U.rgba|255)>>>0;return[L7,k7,E7]=Tq.toChannels(z),{css:m9.toCss(L7,k7,E7),rgba:z}}J.opaque=Z;function Q(U,z){return G8=Math.round(z*255),[L7,k7,E7]=Tq.toChannels(U.rgba),{css:m9.toCss(L7,k7,E7,G8),rgba:m9.toRgba(L7,k7,E7,G8)}}J.opacity=Q;function G(U,z){return G8=U.rgba&255,Q(U,G8*z/255)}J.multiplyOpacity=G;function q(U){return[U.rgba>>24&255,U.rgba>>16&255,U.rgba>>8&255]}J.toColorRGB=q})(nF||={});var eF0;((J)=>{let $,X;try{let Z=document.createElement("canvas");Z.width=1,Z.height=1;let Q=Z.getContext("2d",{willReadFrequently:!0});Q&&($=Q,$.globalCompositeOperation="copy",X=$.createLinearGradient(0,0,1,1))}catch{}function Y(Z){if(Z.match(/#[\da-f]{3,8}/i))switch(Z.length){case 4:return L7=parseInt(Z.slice(1,2).repeat(2),16),k7=parseInt(Z.slice(2,3).repeat(2),16),E7=parseInt(Z.slice(3,4).repeat(2),16),m9.toColor(L7,k7,E7);case 5:return L7=parseInt(Z.slice(1,2).repeat(2),16),k7=parseInt(Z.slice(2,3).repeat(2),16),E7=parseInt(Z.slice(3,4).repeat(2),16),G8=parseInt(Z.slice(4,5).repeat(2),16),m9.toColor(L7,k7,E7,G8);case 7:return{css:Z,rgba:(parseInt(Z.slice(1),16)<<8|255)>>>0};case 9:return{css:Z,rgba:parseInt(Z.slice(1),16)>>>0}}let Q=Z.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(Q)return L7=parseInt(Q[1]),k7=parseInt(Q[2]),E7=parseInt(Q[3]),G8=Math.round((Q[5]===void 0?1:parseFloat(Q[5]))*255),m9.toColor(L7,k7,E7,G8);if(!$||!X)throw Error("css.toColor: Unsupported css format");if($.fillStyle=X,$.fillStyle=Z,typeof $.fillStyle!="string")throw Error("css.toColor: Unsupported css format");if($.fillRect(0,0,1,1),[L7,k7,E7,G8]=$.getImageData(0,0,1,1).data,G8!==255)throw Error("css.toColor: Unsupported css format");return{rgba:m9.toRgba(L7,k7,E7,G8),css:Z}}J.toColor=Y})(eF0||={});var p9;((J)=>{function $(Y){return X(Y>>16&255,Y>>8&255,Y&255)}J.relativeLuminance=$;function X(Y,Z,Q){let G=Y/255,q=Z/255,U=Q/255,z=G<=0.03928?G/12.92:Math.pow((G+0.055)/1.055,2.4),H=q<=0.03928?q/12.92:Math.pow((q+0.055)/1.055,2.4),j=U<=0.03928?U/12.92:Math.pow((U+0.055)/1.055,2.4);return z*0.2126+H*0.7152+j*0.0722}J.relativeLuminance2=X})(p9||={});var Tq;((J)=>{function $(G,q){if(G8=(q&255)/255,G8===1)return q;let U=q>>24&255,z=q>>16&255,H=q>>8&255,j=G>>24&255,V=G>>16&255,W=G>>8&255;return L7=j+Math.round((U-j)*G8),k7=V+Math.round((z-V)*G8),E7=W+Math.round((H-W)*G8),m9.toRgba(L7,k7,E7)}J.blend=$;function X(G,q,U){let z=p9.relativeLuminance(G>>8),H=p9.relativeLuminance(q>>8);if(tZ(z,H)<U){if(H<z){let W=Y(G,q,U),B=tZ(z,p9.relativeLuminance(W>>8));if(B<U){let K=Z(G,q,U),P=tZ(z,p9.relativeLuminance(K>>8));return B>P?W:K}return W}let j=Z(G,q,U),V=tZ(z,p9.relativeLuminance(j>>8));if(V<U){let W=Y(G,q,U),B=tZ(z,p9.relativeLuminance(W>>8));return V>B?j:W}return j}}J.ensureContrastRatio=X;function Y(G,q,U){let z=G>>24&255,H=G>>16&255,j=G>>8&255,V=q>>24&255,W=q>>16&255,B=q>>8&255,K=tZ(p9.relativeLuminance2(V,W,B),p9.relativeLuminance2(z,H,j));for(;K<U&&(V>0||W>0||B>0);)V-=Math.max(0,Math.ceil(V*0.1)),W-=Math.max(0,Math.ceil(W*0.1)),B-=Math.max(0,Math.ceil(B*0.1)),K=tZ(p9.relativeLuminance2(V,W,B),p9.relativeLuminance2(z,H,j));return(V<<24|W<<16|B<<8|255)>>>0}J.reduceLuminance=Y;function Z(G,q,U){let z=G>>24&255,H=G>>16&255,j=G>>8&255,V=q>>24&255,W=q>>16&255,B=q>>8&255,K=tZ(p9.relativeLuminance2(V,W,B),p9.relativeLuminance2(z,H,j));for(;K<U&&(V<255||W<255||B<255);)V=Math.min(255,V+Math.ceil((255-V)*0.1)),W=Math.min(255,W+Math.ceil((255-W)*0.1)),B=Math.min(255,B+Math.ceil((255-B)*0.1)),K=tZ(p9.relativeLuminance2(V,W,B),p9.relativeLuminance2(z,H,j));return(V<<24|W<<16|B<<8|255)>>>0}J.increaseLuminance=Z;function Q(G){return[G>>24&255,G>>16&255,G>>8&255,G&255]}J.toChannels=Q})(Tq||={});function Nq(J){let $=J.toString(16);return $.length<2?"0"+$:$}function tZ(J,$){return J<$?($+0.05)/(J+0.05):(J+0.05)/($+0.05)}function p8(J){if(!J)throw Error("value must not be falsy");return J}function wh(J){return 57508<=J&&J<=57558}function JK0(J){return 57520<=J&&J<=57527}function $K0(J){return 57344<=J&&J<=63743}function XK0(J){return 9472<=J&&J<=9631}function YK0(J){return J>=128512&&J<=128591||J>=127744&&J<=128511||J>=128640&&J<=128767||J>=9728&&J<=9983||J>=9984&&J<=10175||J>=65024&&J<=65039||J>=129280&&J<=129535||J>=127462&&J<=127487}function ZK0(J,$,X,Y){return $===1&&X>Math.ceil(Y*1.5)&&J!==void 0&&J>255&&!YK0(J)&&!wh(J)&&!$K0(J)}function HJ0(J){return wh(J)||XK0(J)}function QK0(){return{css:{canvas:e_(),cell:e_()},device:{canvas:e_(),cell:e_(),char:{width:0,height:0,left:0,top:0}}}}function e_(){return{width:0,height:0}}function GK0(J,$,X=0){return(J-(Math.round($)*2-X))%(Math.round($)*2)}var r7=0,w7=0,AY=!1,eZ=!1,JN=!1,F4,Yh=0,qK0=class{constructor(J,$,X,Y,Z,Q){this._terminal=J,this._optionService=$,this._selectionRenderModel=X,this._decorationService=Y,this._coreBrowserService=Z,this._themeService=Q,this.result={fg:0,bg:0,ext:0}}resolve(J,$,X,Y){if(this.result.bg=J.bg,this.result.fg=J.fg,this.result.ext=J.bg&268435456?J.extended.ext:0,w7=0,r7=0,eZ=!1,AY=!1,JN=!1,F4=this._themeService.colors,Yh=0,J.getCode()!==0&&J.extended.underlineStyle===4){let Z=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));Yh=$*Y%(Math.round(Z)*2)}if(this._decorationService.forEachDecorationAtCell($,X,"bottom",(Z)=>{Z.backgroundColorRGB&&(w7=Z.backgroundColorRGB.rgba>>8&16777215,eZ=!0),Z.foregroundColorRGB&&(r7=Z.foregroundColorRGB.rgba>>8&16777215,AY=!0)}),JN=this._selectionRenderModel.isCellSelected(this._terminal,$,X),JN){if(this.result.fg&67108864||(this.result.bg&50331648)!==0){if(this.result.fg&67108864)switch(this.result.fg&50331648){case 16777216:case 33554432:w7=this._themeService.colors.ansi[this.result.fg&255].rgba;break;case 50331648:w7=(this.result.fg&16777215)<<8|255;break;case 0:default:w7=this._themeService.colors.foreground.rgba}else switch(this.result.bg&50331648){case 16777216:case 33554432:w7=this._themeService.colors.ansi[this.result.bg&255].rgba;break;case 50331648:w7=(this.result.bg&16777215)<<8|255;break}w7=Tq.blend(w7,(this._coreBrowserService.isFocused?F4.selectionBackgroundOpaque:F4.selectionInactiveBackgroundOpaque).rgba&4294967040|128)>>8&16777215}else w7=(this._coreBrowserService.isFocused?F4.selectionBackgroundOpaque:F4.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(eZ=!0,F4.selectionForeground&&(r7=F4.selectionForeground.rgba>>8&16777215,AY=!0),HJ0(J.getCode())){if(this.result.fg&67108864&&(this.result.bg&50331648)===0)r7=(this._coreBrowserService.isFocused?F4.selectionBackgroundOpaque:F4.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(this.result.fg&67108864)switch(this.result.bg&50331648){case 16777216:case 33554432:r7=this._themeService.colors.ansi[this.result.bg&255].rgba;break;case 50331648:r7=(this.result.bg&16777215)<<8|255;break}else switch(this.result.fg&50331648){case 16777216:case 33554432:r7=this._themeService.colors.ansi[this.result.fg&255].rgba;break;case 50331648:r7=(this.result.fg&16777215)<<8|255;break;case 0:default:r7=this._themeService.colors.foreground.rgba}r7=Tq.blend(r7,(this._coreBrowserService.isFocused?F4.selectionBackgroundOpaque:F4.selectionInactiveBackgroundOpaque).rgba&4294967040|128)>>8&16777215}AY=!0}}this._decorationService.forEachDecorationAtCell($,X,"top",(Z)=>{Z.backgroundColorRGB&&(w7=Z.backgroundColorRGB.rgba>>8&16777215,eZ=!0),Z.foregroundColorRGB&&(r7=Z.foregroundColorRGB.rgba>>8&16777215,AY=!0)}),eZ&&(JN?w7=J.bg&-16777216&-134217729|w7|50331648:w7=J.bg&-16777216|w7|50331648),AY&&(r7=J.fg&-16777216&-67108865|r7|50331648),this.result.fg&67108864&&(eZ&&!AY&&((this.result.bg&50331648)===0?r7=this.result.fg&-134217728|F4.background.rgba>>8&16777215&16777215|50331648:r7=this.result.fg&-134217728|this.result.bg&67108863,AY=!0),!eZ&&AY&&((this.result.fg&50331648)===0?w7=this.result.bg&-67108864|F4.foreground.rgba>>8&16777215&16777215|50331648:w7=this.result.bg&-67108864|this.result.fg&67108863,eZ=!0)),F4=void 0,this.result.bg=eZ?w7:this.result.bg,this.result.fg=AY?r7:this.result.fg,this.result.ext&=536870911,this.result.ext|=Yh<<29&3758096384}},UK0=0.5,jJ0=iF0||nF0?"bottom":"ideographic",zK0={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\uD83E\uDF70":[{x:1,y:0,w:1,h:8}],"\uD83E\uDF71":[{x:2,y:0,w:1,h:8}],"\uD83E\uDF72":[{x:3,y:0,w:1,h:8}],"\uD83E\uDF73":[{x:4,y:0,w:1,h:8}],"\uD83E\uDF74":[{x:5,y:0,w:1,h:8}],"\uD83E\uDF75":[{x:6,y:0,w:1,h:8}],"\uD83E\uDF76":[{x:0,y:1,w:8,h:1}],"\uD83E\uDF77":[{x:0,y:2,w:8,h:1}],"\uD83E\uDF78":[{x:0,y:3,w:8,h:1}],"\uD83E\uDF79":[{x:0,y:4,w:8,h:1}],"\uD83E\uDF7A":[{x:0,y:5,w:8,h:1}],"\uD83E\uDF7B":[{x:0,y:6,w:8,h:1}],"\uD83E\uDF7C":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\uD83E\uDF7D":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\uD83E\uDF7E":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\uD83E\uDF7F":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\uD83E\uDF80":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\uD83E\uDF81":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\uD83E\uDF82":[{x:0,y:0,w:8,h:2}],"\uD83E\uDF83":[{x:0,y:0,w:8,h:3}],"\uD83E\uDF84":[{x:0,y:0,w:8,h:5}],"\uD83E\uDF85":[{x:0,y:0,w:8,h:6}],"\uD83E\uDF86":[{x:0,y:0,w:8,h:7}],"\uD83E\uDF87":[{x:6,y:0,w:2,h:8}],"\uD83E\uDF88":[{x:5,y:0,w:3,h:8}],"\uD83E\uDF89":[{x:3,y:0,w:5,h:8}],"\uD83E\uDF8A":[{x:2,y:0,w:6,h:8}],"\uD83E\uDF8B":[{x:1,y:0,w:7,h:8}],"\uD83E\uDF95":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\uD83E\uDF96":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\uD83E\uDF97":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]},HK0={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]},jK0={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(J,$)=>`M0,${0.5-$} L1,${0.5-$} M0,${0.5+$} L1,${0.5+$}`},"║":{1:(J,$)=>`M${0.5-J},0 L${0.5-J},1 M${0.5+J},0 L${0.5+J},1`},"╒":{1:(J,$)=>`M.5,1 L.5,${0.5-$} L1,${0.5-$} M.5,${0.5+$} L1,${0.5+$}`},"╓":{1:(J,$)=>`M${0.5-J},1 L${0.5-J},.5 L1,.5 M${0.5+J},.5 L${0.5+J},1`},"╔":{1:(J,$)=>`M1,${0.5-$} L${0.5-J},${0.5-$} L${0.5-J},1 M1,${0.5+$} L${0.5+J},${0.5+$} L${0.5+J},1`},"╕":{1:(J,$)=>`M0,${0.5-$} L.5,${0.5-$} L.5,1 M0,${0.5+$} L.5,${0.5+$}`},"╖":{1:(J,$)=>`M${0.5+J},1 L${0.5+J},.5 L0,.5 M${0.5-J},.5 L${0.5-J},1`},"╗":{1:(J,$)=>`M0,${0.5+$} L${0.5-J},${0.5+$} L${0.5-J},1 M0,${0.5-$} L${0.5+J},${0.5-$} L${0.5+J},1`},"╘":{1:(J,$)=>`M.5,0 L.5,${0.5+$} L1,${0.5+$} M.5,${0.5-$} L1,${0.5-$}`},"╙":{1:(J,$)=>`M1,.5 L${0.5-J},.5 L${0.5-J},0 M${0.5+J},.5 L${0.5+J},0`},"╚":{1:(J,$)=>`M1,${0.5-$} L${0.5+J},${0.5-$} L${0.5+J},0 M1,${0.5+$} L${0.5-J},${0.5+$} L${0.5-J},0`},"╛":{1:(J,$)=>`M0,${0.5+$} L.5,${0.5+$} L.5,0 M0,${0.5-$} L.5,${0.5-$}`},"╜":{1:(J,$)=>`M0,.5 L${0.5+J},.5 L${0.5+J},0 M${0.5-J},.5 L${0.5-J},0`},"╝":{1:(J,$)=>`M0,${0.5-$} L${0.5-J},${0.5-$} L${0.5-J},0 M0,${0.5+$} L${0.5+J},${0.5+$} L${0.5+J},0`},"╞":{1:(J,$)=>`M.5,0 L.5,1 M.5,${0.5-$} L1,${0.5-$} M.5,${0.5+$} L1,${0.5+$}`},"╟":{1:(J,$)=>`M${0.5-J},0 L${0.5-J},1 M${0.5+J},0 L${0.5+J},1 M${0.5+J},.5 L1,.5`},"╠":{1:(J,$)=>`M${0.5-J},0 L${0.5-J},1 M1,${0.5+$} L${0.5+J},${0.5+$} L${0.5+J},1 M1,${0.5-$} L${0.5+J},${0.5-$} L${0.5+J},0`},"╡":{1:(J,$)=>`M.5,0 L.5,1 M0,${0.5-$} L.5,${0.5-$} M0,${0.5+$} L.5,${0.5+$}`},"╢":{1:(J,$)=>`M0,.5 L${0.5-J},.5 M${0.5-J},0 L${0.5-J},1 M${0.5+J},0 L${0.5+J},1`},"╣":{1:(J,$)=>`M${0.5+J},0 L${0.5+J},1 M0,${0.5+$} L${0.5-J},${0.5+$} L${0.5-J},1 M0,${0.5-$} L${0.5-J},${0.5-$} L${0.5-J},0`},"╤":{1:(J,$)=>`M0,${0.5-$} L1,${0.5-$} M0,${0.5+$} L1,${0.5+$} M.5,${0.5+$} L.5,1`},"╥":{1:(J,$)=>`M0,.5 L1,.5 M${0.5-J},.5 L${0.5-J},1 M${0.5+J},.5 L${0.5+J},1`},"╦":{1:(J,$)=>`M0,${0.5-$} L1,${0.5-$} M0,${0.5+$} L${0.5-J},${0.5+$} L${0.5-J},1 M1,${0.5+$} L${0.5+J},${0.5+$} L${0.5+J},1`},"╧":{1:(J,$)=>`M.5,0 L.5,${0.5-$} M0,${0.5-$} L1,${0.5-$} M0,${0.5+$} L1,${0.5+$}`},"╨":{1:(J,$)=>`M0,.5 L1,.5 M${0.5-J},.5 L${0.5-J},0 M${0.5+J},.5 L${0.5+J},0`},"╩":{1:(J,$)=>`M0,${0.5+$} L1,${0.5+$} M0,${0.5-$} L${0.5-J},${0.5-$} L${0.5-J},0 M1,${0.5-$} L${0.5+J},${0.5-$} L${0.5+J},0`},"╪":{1:(J,$)=>`M.5,0 L.5,1 M0,${0.5-$} L1,${0.5-$} M0,${0.5+$} L1,${0.5+$}`},"╫":{1:(J,$)=>`M0,.5 L1,.5 M${0.5-J},0 L${0.5-J},1 M${0.5+J},0 L${0.5+J},1`},"╬":{1:(J,$)=>`M0,${0.5+$} L${0.5-J},${0.5+$} L${0.5-J},1 M1,${0.5+$} L${0.5+J},${0.5+$} L${0.5+J},1 M0,${0.5-$} L${0.5-J},${0.5-$} L${0.5-J},0 M1,${0.5-$} L${0.5+J},${0.5-$} L${0.5+J},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(J,$)=>`M.5,1 L.5,${0.5+$/0.15*0.5} C.5,${0.5+$/0.15*0.5},.5,.5,1,.5`},"╮":{1:(J,$)=>`M.5,1 L.5,${0.5+$/0.15*0.5} C.5,${0.5+$/0.15*0.5},.5,.5,0,.5`},"╯":{1:(J,$)=>`M.5,0 L.5,${0.5-$/0.15*0.5} C.5,${0.5-$/0.15*0.5},.5,.5,0,.5`},"╰":{1:(J,$)=>`M.5,0 L.5,${0.5-$/0.15*0.5} C.5,${0.5-$/0.15*0.5},.5,.5,1,.5`}},tF={"":{d:"M.3,1 L.03,1 L.03,.88 C.03,.82,.06,.78,.11,.73 C.15,.7,.2,.68,.28,.65 L.43,.6 C.49,.58,.53,.56,.56,.53 C.59,.5,.6,.47,.6,.43 L.6,.27 L.4,.27 L.69,.1 L.98,.27 L.78,.27 L.78,.46 C.78,.52,.76,.56,.72,.61 C.68,.66,.63,.67,.56,.7 L.48,.72 C.42,.74,.38,.76,.35,.78 C.32,.8,.31,.84,.31,.88 L.31,1 M.3,.5 L.03,.59 L.03,.09 L.3,.09 L.3,.655",type:0},"":{d:"M.7,.4 L.7,.47 L.2,.47 L.2,.03 L.355,.03 L.355,.4 L.705,.4 M.7,.5 L.86,.5 L.86,.95 L.69,.95 L.44,.66 L.46,.86 L.46,.95 L.3,.95 L.3,.49 L.46,.49 L.71,.78 L.69,.565 L.69,.5",type:0},"":{d:"M.25,.94 C.16,.94,.11,.92,.11,.87 L.11,.53 C.11,.48,.15,.455,.23,.45 L.23,.3 C.23,.25,.26,.22,.31,.19 C.36,.16,.43,.15,.51,.15 C.59,.15,.66,.16,.71,.19 C.77,.22,.79,.26,.79,.3 L.79,.45 C.87,.45,.91,.48,.91,.53 L.91,.87 C.91,.92,.86,.94,.77,.94 L.24,.94 M.53,.2 C.49,.2,.45,.21,.42,.23 C.39,.25,.38,.27,.38,.3 L.38,.45 L.68,.45 L.68,.3 C.68,.27,.67,.25,.64,.23 C.61,.21,.58,.2,.53,.2 M.58,.82 L.58,.66 C.63,.65,.65,.63,.65,.6 C.65,.58,.64,.57,.61,.56 C.58,.55,.56,.54,.52,.54 C.48,.54,.46,.55,.43,.56 C.4,.57,.39,.59,.39,.6 C.39,.63,.41,.64,.46,.66 L.46,.82 L.57,.82",type:0},"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}};tF[""]=tF[""];tF[""]=tF[""];function VK0(J,$,X,Y,Z,Q,G,q){let U=zK0[$];if(U)return WK0(J,U,X,Y,Z,Q),!0;let z=HK0[$];if(z)return BK0(J,z,X,Y,Z,Q),!0;let H=jK0[$];if(H)return FK0(J,H,X,Y,Z,Q,q),!0;let j=tF[$];return j?(KK0(J,j,X,Y,Z,Q,G,q),!0):!1}function WK0(J,$,X,Y,Z,Q){for(let G=0;G<$.length;G++){let q=$[G],U=Z/8,z=Q/8;J.fillRect(X+q.x*U,Y+q.y*z,q.w*U,q.h*z)}}var T40=new Map;function BK0(J,$,X,Y,Z,Q){let G=T40.get($);G||(G=new Map,T40.set($,G));let q=J.fillStyle;if(typeof q!="string")throw Error(`Unexpected fillStyle type "${q}"`);let U=G.get(q);if(!U){let z=$[0].length,H=$.length,j=J.canvas.ownerDocument.createElement("canvas");j.width=z,j.height=H;let V=p8(j.getContext("2d")),W=new ImageData(z,H),B,K,P,A;if(q.startsWith("#"))B=parseInt(q.slice(1,3),16),K=parseInt(q.slice(3,5),16),P=parseInt(q.slice(5,7),16),A=q.length>7&&parseInt(q.slice(7,9),16)||1;else if(q.startsWith("rgba"))[B,K,P,A]=q.substring(5,q.length-1).split(",").map((D)=>parseFloat(D));else throw Error(`Unexpected fillStyle color format "${q}" when drawing pattern glyph`);for(let D=0;D<H;D++)for(let M=0;M<z;M++)W.data[(D*z+M)*4]=B,W.data[(D*z+M)*4+1]=K,W.data[(D*z+M)*4+2]=P,W.data[(D*z+M)*4+3]=$[D][M]*(A*255);V.putImageData(W,0,0),U=p8(J.createPattern(j,null)),G.set(q,U)}J.fillStyle=U,J.fillRect(X,Y,Z,Q)}function FK0(J,$,X,Y,Z,Q,G){J.strokeStyle=J.fillStyle;for(let[q,U]of Object.entries($)){J.beginPath(),J.lineWidth=G*Number.parseInt(q);let z;if(typeof U=="function"){let H=0.15/Q*Z;z=U(0.15,H)}else z=U;for(let H of z.split(" ")){let j=H[0],V=VJ0[j];if(!V){console.error(`Could not find drawing instructions for "${j}"`);continue}let W=H.substring(1).split(",");!W[0]||!W[1]||V(J,WJ0(W,Z,Q,X,Y,!0,G))}J.stroke(),J.closePath()}}function KK0(J,$,X,Y,Z,Q,G,q){let U=new Path2D;U.rect(X,Y,Z,Q),J.clip(U),J.beginPath();let z=G/12;J.lineWidth=q*z;for(let H of $.d.split(" ")){let j=H[0],V=VJ0[j];if(!V){console.error(`Could not find drawing instructions for "${j}"`);continue}let W=H.substring(1).split(",");!W[0]||!W[1]||V(J,WJ0(W,Z,Q,X,Y,!1,q,($.leftPadding??0)*(z/2),($.rightPadding??0)*(z/2)))}$.type===1?(J.strokeStyle=J.fillStyle,J.stroke()):J.fill(),J.closePath()}function w40(J,$,X=0){return Math.max(Math.min(J,$),X)}var VJ0={C:(J,$)=>J.bezierCurveTo($[0],$[1],$[2],$[3],$[4],$[5]),L:(J,$)=>J.lineTo($[0],$[1]),M:(J,$)=>J.moveTo($[0],$[1])};function WJ0(J,$,X,Y,Z,Q,G,q=0,U=0){let z=J.map((H)=>parseFloat(H)||parseInt(H));if(z.length<2)throw Error("Too few arguments for instruction");for(let H=0;H<z.length;H+=2)z[H]*=$-q*G-U*G,Q&&z[H]!==0&&(z[H]=w40(Math.round(z[H]+0.5)-0.5,$,0)),z[H]+=Y+q*G;for(let H=1;H<z.length;H+=2)z[H]*=X,Q&&z[H]!==0&&(z[H]=w40(Math.round(z[H]+0.5)-0.5,X,0)),z[H]+=Z;return z}var L40=class{constructor(){this._data={}}set(J,$,X){this._data[J]||(this._data[J]={}),this._data[J][$]=X}get(J,$){return this._data[J]?this._data[J][$]:void 0}clear(){this._data={}}},k40=class{constructor(){this._data=new L40}set(J,$,X,Y,Z){this._data.get(J,$)||this._data.set(J,$,new L40),this._data.get(J,$).set(X,Y,Z)}get(J,$,X,Y){return this._data.get(J,$)?.get(X,Y)}clear(){this._data.clear()}},BJ0=class{constructor(){this._tasks=[],this._i=0}enqueue(J){this._tasks.push(J),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(J){this._idleCallback=void 0;let $=0,X=0,Y=J.timeRemaining(),Z=0;for(;this._i<this._tasks.length;){if($=performance.now(),this._tasks[this._i]()||this._i++,$=Math.max(1,performance.now()-$),X=Math.max($,X),Z=J.timeRemaining(),X*1.5>Z){Y-$<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(Y-$))}ms`),this._start();return}Y=Z}this.clear()}},AK0=class extends BJ0{_requestCallback(J){return setTimeout(()=>J(this._createDeadline(16)))}_cancelCallback(J){clearTimeout(J)}_createDeadline(J){let $=performance.now()+J;return{timeRemaining:()=>Math.max(0,$-performance.now())}}},PK0=class extends BJ0{_requestCallback(J){return requestIdleCallback(J)}_cancelCallback(J){cancelIdleCallback(J)}},DK0=!Nh&&"requestIdleCallback"in window?PK0:AK0,hH=class J{constructor(){this.fg=0,this.bg=0,this.extended=new FJ0}static toColorRGB($){return[$>>>16&255,$>>>8&255,$&255]}static fromColorRGB($){return($[0]&255)<<16|($[1]&255)<<8|$[2]&255}clone(){let $=new J;return $.fg=this.fg,$.bg=this.bg,$.extended=this.extended.clone(),$}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},FJ0=class J{constructor($=0,X=0){this._ext=0,this._urlId=0,this._ext=$,this._urlId=X}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext($){this._ext=$}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle($){this._ext&=-469762049,this._ext|=$<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor($){this._ext&=-67108864,this._ext|=$&67108863}get urlId(){return this._urlId}set urlId($){this._urlId=$}get underlineVariantOffset(){let $=(this._ext&3758096384)>>29;return $<0?$^4294967288:$}set underlineVariantOffset($){this._ext&=536870911,this._ext|=$<<29&3758096384}clone(){return new J(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},E40=class J{constructor($){this.element=$,this.next=J.Undefined,this.prev=J.Undefined}};E40.Undefined=new E40(void 0);var RK0=globalThis.performance&&typeof globalThis.performance.now=="function",MK0=class J{static create($){return new J($)}constructor($){this._now=RK0&&$===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},OK0=!1,I40=!1,_K0=!1,YQ;((J)=>{J.None=()=>JJ.None;function $(L){if(_K0){let{onDidAddListener:b}=L,p=Dh.create(),d=0;L.onDidAddListener=()=>{++d===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),p.print()),b?.()}}}function X(L,b){return V(L,()=>{},0,void 0,!0,void 0,b)}J.defer=X;function Y(L){return(b,p=null,d)=>{let s=!1,c;return c=L((i)=>{if(!s)return c?c.dispose():s=!0,b.call(p,i)},null,d),s&&c.dispose(),c}}J.once=Y;function Z(L,b,p){return H((d,s=null,c)=>L((i)=>d.call(s,b(i)),null,c),p)}J.map=Z;function Q(L,b,p){return H((d,s=null,c)=>L((i)=>{b(i),d.call(s,i)},null,c),p)}J.forEach=Q;function G(L,b,p){return H((d,s=null,c)=>L((i)=>b(i)&&d.call(s,i),null,c),p)}J.filter=G;function q(L){return L}J.signal=q;function U(...L){return(b,p=null,d)=>{let s=qJ0(...L.map((c)=>c((i)=>b.call(p,i))));return j(s,d)}}J.any=U;function z(L,b,p,d){let s=p;return Z(L,(c)=>(s=b(s,c),s),d)}J.reduce=z;function H(L,b){let p,d={onWillAddFirstListener(){p=L(s.fire,s)},onDidRemoveLastListener(){p?.dispose()}};b||$(d);let s=new A5(d);return b?.add(s),s.event}function j(L,b){return b instanceof Array?b.push(L):b&&b.add(L),L}function V(L,b,p=100,d=!1,s=!1,c,i){let J0,W0,M0,X0=0,N1,o1={leakWarningThreshold:c,onWillAddFirstListener(){J0=L((Q1)=>{X0++,W0=b(W0,Q1),d&&!M0&&(E1.fire(W0),W0=void 0),N1=()=>{let T1=W0;W0=void 0,M0=void 0,(!d||X0>1)&&E1.fire(T1),X0=0},typeof p=="number"?(clearTimeout(M0),M0=setTimeout(N1,p)):M0===void 0&&(M0=0,queueMicrotask(N1))})},onWillRemoveListener(){s&&X0>0&&N1?.()},onDidRemoveLastListener(){N1=void 0,J0.dispose()}};i||$(o1);let E1=new A5(o1);return i?.add(E1),E1.event}J.debounce=V;function W(L,b=0,p){return J.debounce(L,(d,s)=>d?(d.push(s),d):[s],b,void 0,!0,void 0,p)}J.accumulate=W;function B(L,b=(d,s)=>d===s,p){let d=!0,s;return G(L,(c)=>{let i=d||!b(c,s);return d=!1,s=c,i},p)}J.latch=B;function K(L,b,p){return[J.filter(L,b,p),J.filter(L,(d)=>!b(d),p)]}J.split=K;function P(L,b=!1,p=[],d){let s=p.slice(),c=L((W0)=>{s?s.push(W0):J0.fire(W0)});d&&d.add(c);let i=()=>{s?.forEach((W0)=>J0.fire(W0)),s=null},J0=new A5({onWillAddFirstListener(){c||(c=L((W0)=>J0.fire(W0)),d&&d.add(c))},onDidAddFirstListener(){s&&(b?setTimeout(i):i())},onDidRemoveLastListener(){c&&c.dispose(),c=null}});return d&&d.add(J0),J0.event}J.buffer=P;function A(L,b){return(p,d,s)=>{let c=b(new M);return L(function(i){let J0=c.evaluate(i);J0!==D&&p.call(d,J0)},void 0,s)}}J.chain=A;let D=Symbol("HaltChainable");class M{constructor(){this.steps=[]}map(L){return this.steps.push(L),this}forEach(L){return this.steps.push((b)=>(L(b),b)),this}filter(L){return this.steps.push((b)=>L(b)?b:D),this}reduce(L,b){let p=b;return this.steps.push((d)=>(p=L(p,d),p)),this}latch(L=(b,p)=>b===p){let b=!0,p;return this.steps.push((d)=>{let s=b||!L(d,p);return b=!1,p=d,s?d:D}),this}evaluate(L){for(let b of this.steps)if(L=b(L),L===D)break;return L}}function R(L,b,p=(d)=>d){let d=(...J0)=>i.fire(p(...J0)),s=()=>L.on(b,d),c=()=>L.removeListener(b,d),i=new A5({onWillAddFirstListener:s,onDidRemoveLastListener:c});return i.event}J.fromNodeEventEmitter=R;function O(L,b,p=(d)=>d){let d=(...J0)=>i.fire(p(...J0)),s=()=>L.addEventListener(b,d),c=()=>L.removeEventListener(b,d),i=new A5({onWillAddFirstListener:s,onDidRemoveLastListener:c});return i.event}J.fromDOMEventEmitter=O;function N(L){return new Promise((b)=>Y(L)(b))}J.toPromise=N;function T(L){let b=new A5;return L.then((p)=>{b.fire(p)},()=>{b.fire(void 0)}).finally(()=>{b.dispose()}),b.event}J.fromPromise=T;function S(L,b){return L((p)=>b.fire(p))}J.forward=S;function v(L,b,p){return b(p),L((d)=>b(d))}J.runAndSubscribe=v;class l{constructor(L,b){this._observable=L,this._counter=0,this._hasChanged=!1;let p={onWillAddFirstListener:()=>{L.addObserver(this)},onDidRemoveLastListener:()=>{L.removeObserver(this)}};b||$(p),this.emitter=new A5(p),b&&b.add(this.emitter)}beginUpdate(L){this._counter++}handlePossibleChange(L){}handleChange(L,b){this._hasChanged=!0}endUpdate(L){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function f(L,b){return new l(L,b).emitter.event}J.fromObservable=f;function h(L){return(b,p,d)=>{let s=0,c=!1,i={beginUpdate(){s++},endUpdate(){s--,s===0&&(L.reportChanges(),c&&(c=!1,b.call(p)))},handlePossibleChange(){},handleChange(){c=!0}};L.addObserver(i),L.reportChanges();let J0={dispose(){L.removeObserver(i)}};return d instanceof gH?d.add(J0):Array.isArray(d)&&d.push(J0),J0}}J.fromObservableLight=h})(YQ||={});var Ph=class J{constructor($){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${$}_${J._idPool++}`,J.all.add(this)}start($){this._stopWatch=new MK0,this.listenerCount=$}stop(){if(this._stopWatch){let $=this._stopWatch.elapsed();this.durations.push($),this.elapsedOverall+=$,this.invocationCount+=1,this._stopWatch=void 0}}};Ph.all=new Set,Ph._idPool=0;var NK0=Ph,y40=-1,KJ0=class J{constructor($,X,Y=(J._idPool++).toString(16).padStart(3,"0")){this._errorHandler=$,this.threshold=X,this.name=Y,this._warnCountdown=0}dispose(){this._stacks?.clear()}check($,X){let Y=this.threshold;if(Y<=0||X<Y)return;this._stacks||(this._stacks=new Map);let Z=this._stacks.get($.value)||0;if(this._stacks.set($.value,Z+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=Y*0.5;let[Q,G]=this.getMostFrequentStack(),q=`[${this.name}] potential listener LEAK detected, having ${X} listeners already. MOST frequent listener (${G}):`;console.warn(q),console.warn(Q);let U=new wK0(q,Q);this._errorHandler(U)}return()=>{let Q=this._stacks.get($.value)||0;this._stacks.set($.value,Q-1)}}getMostFrequentStack(){if(!this._stacks)return;let $,X=0;for(let[Y,Z]of this._stacks)(!$||X<Z)&&($=[Y,Z],X=Z);return $}};KJ0._idPool=1;var TK0=KJ0,Dh=class J{constructor($){this.value=$}static create(){let $=Error();return new J($.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},wK0=class extends Error{constructor(J,$){super(J),this.name="ListenerLeakError",this.stack=$}},LK0=class extends Error{constructor(J,$){super(J),this.name="ListenerRefusalError",this.stack=$}},kK0=0,ZN=class{constructor(J){this.value=J,this.id=kK0++}},EK0=2,IK0=(J,$)=>{if(J instanceof ZN)$(J);else for(let X=0;X<J.length;X++){let Y=J[X];Y&&$(Y)}},QN;if(OK0){let J=[];setInterval(()=>{J.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(J.join(`
`)),J.length=0)},3000),QN=new FinalizationRegistry(($)=>{typeof $=="string"&&J.push($)})}var A5=class{constructor(J){this._size=0,this._options=J,this._leakageMon=y40>0||this._options?.leakWarningThreshold?new TK0(J?.onListenerError??YN,this._options?.leakWarningThreshold??y40):void 0,this._perfMon=this._options?._profName?new NK0(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(I40){let J=this._listeners;queueMicrotask(()=>{IK0(J,($)=>$.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(J,$,X)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let q=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(q);let U=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],z=new LK0(`${q}. HINT: Stack shows most frequent listener (${U[1]}-times)`,U[0]);return(this._options?.onListenerError||YN)(z),JJ.None}if(this._disposed)return JJ.None;$&&(J=J.bind($));let Y=new ZN(J),Z,Q;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*0.2)&&(Y.stack=Dh.create(),Z=this._leakageMon.check(Y.stack,this._size+1)),I40&&(Y.stack=Q??Dh.create()),this._listeners?this._listeners instanceof ZN?(this._deliveryQueue??=new yK0,this._listeners=[this._listeners,Y]):this._listeners.push(Y):(this._options?.onWillAddFirstListener?.(this),this._listeners=Y,this._options?.onDidAddFirstListener?.(this)),this._size++;let G=i7(()=>{QN?.unregister(G),Z?.(),this._removeListener(Y)});if(X instanceof gH?X.add(G):Array.isArray(X)&&X.push(G),QN){let q=Error().stack.split(`
`).slice(2,3).join(`
`).trim(),U=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(q);QN.register(G,U?.[2]??q,G)}return G},this._event}_removeListener(J){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let $=this._listeners,X=$.indexOf(J);if(X===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),Error("Attempted to dispose unknown listener");this._size--,$[X]=void 0;let Y=this._deliveryQueue.current===this;if(this._size*EK0<=$.length){let Z=0;for(let Q=0;Q<$.length;Q++)$[Q]?$[Z++]=$[Q]:Y&&(this._deliveryQueue.end--,Z<this._deliveryQueue.i&&this._deliveryQueue.i--);$.length=Z}}_deliver(J,$){if(!J)return;let X=this._options?.onListenerError||YN;if(!X){J.value($);return}try{J.value($)}catch(Y){X(Y)}}_deliverQueue(J){let $=J.current._listeners;for(;J.i<J.end;)this._deliver($[J.i++],J.value);J.reset()}fire(J){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof ZN)this._deliver(this._listeners,J);else{let $=this._deliveryQueue;$.enqueue(this,J,this._listeners.length),this._deliverQueue($)}this._perfMon?.stop()}hasListeners(){return this._size>0}},yK0=class{constructor(){this.i=-1,this.end=0}enqueue(J,$,X){this.i=0,this.end=X,this.current=J,this.value=$}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},x40={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},sF=2,aF,e2=class J{constructor($,X,Y){this._document=$,this._config=X,this._unicodeService=Y,this._didWarmUp=!1,this._cacheMap=new k40,this._cacheMapCombined=new k40,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new hH,this._textureSize=512,this._onAddTextureAtlasCanvas=new A5,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new A5,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=AJ0($,this._config.deviceCellWidth*4+sF*2,this._config.deviceCellHeight+sF*2),this._tmpCtx=p8(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){this._tmpCanvas.remove();for(let $ of this.pages)$.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let $=new DK0;for(let X=33;X<126;X++)$.enqueue(()=>{if(!this._cacheMap.get(X,0,0,0)){let Y=this._drawToCache(X,0,0,0,!1,void 0);this._cacheMap.set(X,0,0,0,Y)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(!(this._pages[0].currentRow.x===0&&this._pages[0].currentRow.y===0)){for(let $ of this._pages)$.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(J.maxAtlasPages&&this._pages.length>=Math.max(4,J.maxAtlasPages)){let X=this._pages.filter((z)=>z.canvas.width*2<=(J.maxTextureSize||4096)).sort((z,H)=>H.canvas.width!==z.canvas.width?H.canvas.width-z.canvas.width:H.percentageUsed-z.percentageUsed),Y=-1,Z=0;for(let z=0;z<X.length;z++)if(X[z].canvas.width!==Z)Y=z,Z=X[z].canvas.width;else if(z-Y===3)break;let Q=X.slice(Y,Y+4),G=Q.map((z)=>z.glyphs[0].texturePage).sort((z,H)=>z>H?1:-1),q=this.pages.length-Q.length,U=this._mergePages(Q,q);U.version++;for(let z=G.length-1;z>=0;z--)this._deletePage(G[z]);this.pages.push(U),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(U.canvas)}let $=new Zh(this._document,this._textureSize);return this._pages.push($),this._activePages.push($),this._onAddTextureAtlasCanvas.fire($.canvas),$}_mergePages($,X){let Y=$[0].canvas.width*2,Z=new Zh(this._document,Y,$);for(let[Q,G]of $.entries()){let q=Q*G.canvas.width%Y,U=Math.floor(Q/2)*G.canvas.height;Z.ctx.drawImage(G.canvas,q,U);for(let H of G.glyphs)H.texturePage=X,H.sizeClipSpace.x=H.size.x/Y,H.sizeClipSpace.y=H.size.y/Y,H.texturePosition.x+=q,H.texturePosition.y+=U,H.texturePositionClipSpace.x=H.texturePosition.x/Y,H.texturePositionClipSpace.y=H.texturePosition.y/Y;this._onRemoveTextureAtlasCanvas.fire(G.canvas);let z=this._activePages.indexOf(G);z!==-1&&this._activePages.splice(z,1)}return Z}_deletePage($){this._pages.splice($,1);for(let X=$;X<this._pages.length;X++){let Y=this._pages[X];for(let Z of Y.glyphs)Z.texturePage--;Y.version++}}getRasterizedGlyphCombinedChar($,X,Y,Z,Q,G){return this._getFromCacheMap(this._cacheMapCombined,$,X,Y,Z,Q,G)}getRasterizedGlyph($,X,Y,Z,Q,G){return this._getFromCacheMap(this._cacheMap,$,X,Y,Z,Q,G)}_getFromCacheMap($,X,Y,Z,Q,G,q){return aF=$.get(X,Y,Z,Q),aF||(aF=this._drawToCache(X,Y,Z,Q,G,q),$.set(X,Y,Z,Q,aF)),aF}_getColorFromAnsiIndex($){if($>=this._config.colors.ansi.length)throw Error("No color found for idx "+$);return this._config.colors.ansi[$]}_getBackgroundColor($,X,Y,Z){if(this._config.allowTransparency)return aJ;let Q;switch($){case 16777216:case 33554432:Q=this._getColorFromAnsiIndex(X);break;case 50331648:let G=hH.toColorRGB(X);Q=m9.toColor(G[0],G[1],G[2]);break;case 0:default:Y?Q=nF.opaque(this._config.colors.foreground):Q=this._config.colors.background;break}return this._config.allowTransparency||(Q=nF.opaque(Q)),Q}_getForegroundColor($,X,Y,Z,Q,G,q,U,z,H){let j=this._getMinimumContrastColor($,X,Y,Z,Q,G,q,z,U,H);if(j)return j;let V;switch(Q){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&z&&G<8&&(G+=8),V=this._getColorFromAnsiIndex(G);break;case 50331648:let W=hH.toColorRGB(G);V=m9.toColor(W[0],W[1],W[2]);break;case 0:default:q?V=this._config.colors.background:V=this._config.colors.foreground}return this._config.allowTransparency&&(V=nF.opaque(V)),U&&(V=nF.multiplyOpacity(V,UK0)),V}_resolveBackgroundRgba($,X,Y){switch($){case 16777216:case 33554432:return this._getColorFromAnsiIndex(X).rgba;case 50331648:return X<<8;case 0:default:return Y?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba($,X,Y,Z){switch($){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&Z&&X<8&&(X+=8),this._getColorFromAnsiIndex(X).rgba;case 50331648:return X<<8;case 0:default:return Y?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor($,X,Y,Z,Q,G,q,U,z,H){if(this._config.minimumContrastRatio===1||H)return;let j=this._getContrastCache(z),V=j.getColor($,Z);if(V!==void 0)return V||void 0;let W=this._resolveBackgroundRgba(X,Y,q),B=this._resolveForegroundRgba(Q,G,q,U),K=Tq.ensureContrastRatio(W,B,this._config.minimumContrastRatio/(z?2:1));if(!K){j.setColor($,Z,null);return}let P=m9.toColor(K>>24&255,K>>16&255,K>>8&255);return j.setColor($,Z,P),P}_getContrastCache($){return $?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache($,X,Y,Z,Q,G){let q=typeof $=="number"?String.fromCharCode($):$;G&&this._tmpCanvas.parentElement!==G&&(this._tmpCanvas.style.display="none",G.append(this._tmpCanvas));let U=Math.min(this._config.deviceCellWidth*Math.max(q.length,2)+sF*2,this._config.deviceMaxTextureSize);this._tmpCanvas.width<U&&(this._tmpCanvas.width=U);let z=Math.min(this._config.deviceCellHeight+sF*4,this._textureSize);if(this._tmpCanvas.height<z&&(this._tmpCanvas.height=z),this._tmpCtx.save(),this._workAttributeData.fg=Y,this._workAttributeData.bg=X,this._workAttributeData.extended.ext=Z,!!this._workAttributeData.isInvisible())return x40;let H=!!this._workAttributeData.isBold(),j=!!this._workAttributeData.isInverse(),V=!!this._workAttributeData.isDim(),W=!!this._workAttributeData.isItalic(),B=!!this._workAttributeData.isUnderline(),K=!!this._workAttributeData.isStrikethrough(),P=!!this._workAttributeData.isOverline(),A=this._workAttributeData.getFgColor(),D=this._workAttributeData.getFgColorMode(),M=this._workAttributeData.getBgColor(),R=this._workAttributeData.getBgColorMode();if(j){let J0=A;A=M,M=J0;let W0=D;D=R,R=W0}let O=this._getBackgroundColor(R,M,j,V);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let N=H?this._config.fontWeightBold:this._config.fontWeight,T=W?"italic":"";this._tmpCtx.font=`${T} ${N} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=jJ0;let S=q.length===1&&wh(q.charCodeAt(0)),v=q.length===1&&JK0(q.charCodeAt(0)),l=this._getForegroundColor(X,R,M,Y,D,A,j,V,H,HJ0(q.charCodeAt(0)));this._tmpCtx.fillStyle=l.css;let f=v?0:sF*2,h=!1;this._config.customGlyphs!==!1&&(h=VK0(this._tmpCtx,q,f,f,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let L=!S,b;if(typeof $=="number"?b=this._unicodeService.wcwidth($):b=this._unicodeService.getStringCellWidth($),B){this._tmpCtx.save();let J0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),W0=J0%2===1?0.5:0;if(this._tmpCtx.lineWidth=J0,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())L=!1,this._tmpCtx.strokeStyle=`rgb(${hH.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{L=!1;let Q1=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Q1<8&&(Q1+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Q1).css}this._tmpCtx.beginPath();let M0=f,X0=Math.ceil(f+this._config.deviceCharHeight)-W0-(Q?J0*2:0),N1=X0+J0,o1=X0+J0*2,E1=this._workAttributeData.getUnderlineVariantOffset();for(let Q1=0;Q1<b;Q1++){this._tmpCtx.save();let T1=M0+Q1*this._config.deviceCellWidth,r1=M0+(Q1+1)*this._config.deviceCellWidth,x6=T1+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(T1,X0),this._tmpCtx.lineTo(r1,X0),this._tmpCtx.moveTo(T1,o1),this._tmpCtx.lineTo(r1,o1);break;case 3:let u0=J0<=1?o1:Math.ceil(f+this._config.deviceCharHeight-J0/2)-W0,U5=J0<=1?X0:Math.ceil(f+this._config.deviceCharHeight+J0/2)-W0,v1=new Path2D;v1.rect(T1,X0,this._config.deviceCellWidth,o1-X0),this._tmpCtx.clip(v1),this._tmpCtx.moveTo(T1-this._config.deviceCellWidth/2,N1),this._tmpCtx.bezierCurveTo(T1-this._config.deviceCellWidth/2,U5,T1,U5,T1,N1),this._tmpCtx.bezierCurveTo(T1,u0,x6,u0,x6,N1),this._tmpCtx.bezierCurveTo(x6,U5,r1,U5,r1,N1),this._tmpCtx.bezierCurveTo(r1,u0,r1+this._config.deviceCellWidth/2,u0,r1+this._config.deviceCellWidth/2,N1);break;case 4:let S5=E1===0?0:E1>=J0?J0*2-E1:J0-E1;!(E1>=J0)===!1||S5===0?(this._tmpCtx.setLineDash([Math.round(J0),Math.round(J0)]),this._tmpCtx.moveTo(T1+S5,X0),this._tmpCtx.lineTo(r1,X0)):(this._tmpCtx.setLineDash([Math.round(J0),Math.round(J0)]),this._tmpCtx.moveTo(T1,X0),this._tmpCtx.lineTo(T1+S5,X0),this._tmpCtx.moveTo(T1+S5+J0,X0),this._tmpCtx.lineTo(r1,X0)),E1=GK0(r1-T1,J0,E1);break;case 5:let nJ=0.6,O5=0.3,W9=r1-T1,XG=Math.floor(nJ*W9),wq=Math.floor(O5*W9),Y0=W9-XG-wq;this._tmpCtx.setLineDash([XG,wq,Y0]),this._tmpCtx.moveTo(T1,X0),this._tmpCtx.lineTo(r1,X0);break;case 1:default:this._tmpCtx.moveTo(T1,X0),this._tmpCtx.lineTo(r1,X0);break}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!h&&this._config.fontSize>=12&&!this._config.allowTransparency&&q!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let Q1=this._tmpCtx.measureText(q);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Q1&&Q1.actualBoundingBoxDescent>0){this._tmpCtx.save();let T1=new Path2D;T1.rect(M0,X0-Math.ceil(J0/2),this._config.deviceCellWidth*b,o1-X0+Math.ceil(J0/2)),this._tmpCtx.clip(T1),this._tmpCtx.lineWidth=this._config.devicePixelRatio*3,this._tmpCtx.strokeStyle=O.css,this._tmpCtx.strokeText(q,f,f+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(P){let J0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),W0=J0%2===1?0.5:0;this._tmpCtx.lineWidth=J0,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(f,f+W0),this._tmpCtx.lineTo(f+this._config.deviceCharWidth*b,f+W0),this._tmpCtx.stroke()}if(h||this._tmpCtx.fillText(q,f,f+this._config.deviceCharHeight),q==="_"&&!this._config.allowTransparency){let J0=Qh(this._tmpCtx.getImageData(f,f,this._config.deviceCellWidth,this._config.deviceCellHeight),O,l,L);if(J0)for(let W0=1;W0<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=O.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(q,f,f+this._config.deviceCharHeight-W0),J0=Qh(this._tmpCtx.getImageData(f,f,this._config.deviceCellWidth,this._config.deviceCellHeight),O,l,L),!!J0);W0++);}if(K){let J0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),W0=this._tmpCtx.lineWidth%2===1?0.5:0;this._tmpCtx.lineWidth=J0,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(f,f+Math.floor(this._config.deviceCharHeight/2)-W0),this._tmpCtx.lineTo(f+this._config.deviceCharWidth*b,f+Math.floor(this._config.deviceCharHeight/2)-W0),this._tmpCtx.stroke()}this._tmpCtx.restore();let p=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),d;if(this._config.allowTransparency?d=xK0(p):d=Qh(p,O,l,L),d)return x40;let s=this._findGlyphBoundingBox(p,this._workBoundingBox,U,v,h,f),c,i;for(;;){if(this._activePages.length===0){let J0=this._createNewPage();c=J0,i=J0.currentRow,i.height=s.size.y;break}c=this._activePages[this._activePages.length-1],i=c.currentRow;for(let J0 of this._activePages)s.size.y<=J0.currentRow.height&&(c=J0,i=J0.currentRow);for(let J0=this._activePages.length-1;J0>=0;J0--)for(let W0 of this._activePages[J0].fixedRows)W0.height<=i.height&&s.size.y<=W0.height&&(c=this._activePages[J0],i=W0);if(s.size.x>this._textureSize){this._overflowSizePage||(this._overflowSizePage=new Zh(this._document,this._config.deviceMaxTextureSize),this.pages.push(this._overflowSizePage),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(this._overflowSizePage.canvas)),c=this._overflowSizePage,i=this._overflowSizePage.currentRow,i.x+s.size.x>=c.canvas.width&&(i.x=0,i.y+=i.height,i.height=0);break}if(i.y+s.size.y>=c.canvas.height||i.height>s.size.y+2){let J0=!1;if(c.currentRow.y+c.currentRow.height+s.size.y>=c.canvas.height){let W0;for(let M0 of this._activePages)if(M0.currentRow.y+M0.currentRow.height+s.size.y<M0.canvas.height){W0=M0;break}if(W0)c=W0;else if(J.maxAtlasPages&&this._pages.length>=J.maxAtlasPages&&i.y+s.size.y<=c.canvas.height&&i.height>=s.size.y&&i.x+s.size.x<=c.canvas.width)J0=!0;else{let M0=this._createNewPage();c=M0,i=M0.currentRow,i.height=s.size.y,J0=!0}}J0||(c.currentRow.height>0&&c.fixedRows.push(c.currentRow),i={x:0,y:c.currentRow.y+c.currentRow.height,height:s.size.y},c.fixedRows.push(i),c.currentRow={x:0,y:i.y+i.height,height:0})}if(i.x+s.size.x<=c.canvas.width)break;i===c.currentRow?(i.x=0,i.y+=i.height,i.height=0):c.fixedRows.splice(c.fixedRows.indexOf(i),1)}return s.texturePage=this._pages.indexOf(c),s.texturePosition.x=i.x,s.texturePosition.y=i.y,s.texturePositionClipSpace.x=i.x/c.canvas.width,s.texturePositionClipSpace.y=i.y/c.canvas.height,s.sizeClipSpace.x/=c.canvas.width,s.sizeClipSpace.y/=c.canvas.height,i.height=Math.max(i.height,s.size.y),i.x+=s.size.x,c.ctx.putImageData(p,s.texturePosition.x-this._workBoundingBox.left,s.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,s.size.x,s.size.y),c.addGlyph(s),c.version++,s}_findGlyphBoundingBox($,X,Y,Z,Q,G){X.top=0;let q=Z?this._config.deviceCellHeight:this._tmpCanvas.height,U=Z?this._config.deviceCellWidth:Y,z=!1;for(let H=0;H<q;H++){for(let j=0;j<U;j++){let V=H*this._tmpCanvas.width*4+j*4+3;if($.data[V]!==0){X.top=H,z=!0;break}}if(z)break}X.left=0,z=!1;for(let H=0;H<G+U;H++){for(let j=0;j<q;j++){let V=j*this._tmpCanvas.width*4+H*4+3;if($.data[V]!==0){X.left=H,z=!0;break}}if(z)break}X.right=U,z=!1;for(let H=G+U-1;H>=G;H--){for(let j=0;j<q;j++){let V=j*this._tmpCanvas.width*4+H*4+3;if($.data[V]!==0){X.right=H,z=!0;break}}if(z)break}X.bottom=q,z=!1;for(let H=q-1;H>=0;H--){for(let j=0;j<U;j++){let V=H*this._tmpCanvas.width*4+j*4+3;if($.data[V]!==0){X.bottom=H,z=!0;break}}if(z)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:X.right-X.left+1,y:X.bottom-X.top+1},sizeClipSpace:{x:X.right-X.left+1,y:X.bottom-X.top+1},offset:{x:-X.left+G+(Z||Q?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-X.top+G+(Z||Q?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}},Zh=class{constructor(J,$,X){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],X)for(let Y of X)this._glyphs.push(...Y.glyphs),this._usedPixels+=Y._usedPixels;this.canvas=AJ0(J,$,$),this.ctx=p8(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(J){this._glyphs.push(J),this._usedPixels+=J.size.x*J.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}};function Qh(J,$,X,Y){let Z=$.rgba>>>24,Q=$.rgba>>>16&255,G=$.rgba>>>8&255,q=X.rgba>>>24,U=X.rgba>>>16&255,z=X.rgba>>>8&255,H=Math.floor((Math.abs(Z-q)+Math.abs(Q-U)+Math.abs(G-z))/12),j=!0;for(let V=0;V<J.data.length;V+=4)J.data[V]===Z&&J.data[V+1]===Q&&J.data[V+2]===G||Y&&Math.abs(J.data[V]-Z)+Math.abs(J.data[V+1]-Q)+Math.abs(J.data[V+2]-G)<H?J.data[V+3]=0:j=!1;return j}function xK0(J){for(let $=0;$<J.data.length;$+=4)if(J.data[$+3]>0)return!1;return!0}function AJ0(J,$,X){let Y=J.createElement("canvas");return Y.width=$,Y.height=X,Y}function bK0(J,$,X,Y,Z,Q,G,q){let U={foreground:Q.foreground,background:Q.background,cursor:aJ,cursorAccent:aJ,selectionForeground:aJ,selectionBackgroundTransparent:aJ,selectionBackgroundOpaque:aJ,selectionInactiveBackgroundTransparent:aJ,selectionInactiveBackgroundOpaque:aJ,overviewRulerBorder:aJ,scrollbarSliderBackground:aJ,scrollbarSliderHoverBackground:aJ,scrollbarSliderActiveBackground:aJ,ansi:Q.ansi.slice(),contrastCache:Q.contrastCache,halfContrastCache:Q.halfContrastCache};return{customGlyphs:Z.customGlyphs,devicePixelRatio:G,deviceMaxTextureSize:q,letterSpacing:Z.letterSpacing,lineHeight:Z.lineHeight,deviceCellWidth:J,deviceCellHeight:$,deviceCharWidth:X,deviceCharHeight:Y,fontFamily:Z.fontFamily,fontSize:Z.fontSize,fontWeight:Z.fontWeight,fontWeightBold:Z.fontWeightBold,allowTransparency:Z.allowTransparency,drawBoldTextInBrightColors:Z.drawBoldTextInBrightColors,minimumContrastRatio:Z.minimumContrastRatio,colors:U}}function b40(J,$){for(let X=0;X<J.colors.ansi.length;X++)if(J.colors.ansi[X].rgba!==$.colors.ansi[X].rgba)return!1;return J.devicePixelRatio===$.devicePixelRatio&&J.customGlyphs===$.customGlyphs&&J.lineHeight===$.lineHeight&&J.letterSpacing===$.letterSpacing&&J.fontFamily===$.fontFamily&&J.fontSize===$.fontSize&&J.fontWeight===$.fontWeight&&J.fontWeightBold===$.fontWeightBold&&J.allowTransparency===$.allowTransparency&&J.deviceCharWidth===$.deviceCharWidth&&J.deviceCharHeight===$.deviceCharHeight&&J.drawBoldTextInBrightColors===$.drawBoldTextInBrightColors&&J.minimumContrastRatio===$.minimumContrastRatio&&J.colors.foreground.rgba===$.colors.foreground.rgba&&J.colors.background.rgba===$.colors.background.rgba}function SK0(J){return(J&50331648)===16777216||(J&50331648)===33554432}var rJ=[];function PJ0(J,$,X,Y,Z,Q,G,q,U){let z=bK0(Y,Z,Q,G,$,X,q,U);for(let V=0;V<rJ.length;V++){let W=rJ[V],B=W.ownedBy.indexOf(J);if(B>=0){if(b40(W.config,z))return W.atlas;W.ownedBy.length===1?(W.atlas.dispose(),rJ.splice(V,1)):W.ownedBy.splice(B,1);break}}for(let V=0;V<rJ.length;V++){let W=rJ[V];if(b40(W.config,z))return W.ownedBy.push(J),W.atlas}let H=J._core,j={atlas:new e2(document,z,H.unicodeService),config:z,ownedBy:[J]};return rJ.push(j),j.atlas}function S40(J){for(let $=0;$<rJ.length;$++){let X=rJ[$].ownedBy.indexOf(J);if(X!==-1){rJ[$].ownedBy.length===1?(rJ[$].atlas.dispose(),rJ.splice($,1)):rJ[$].ownedBy.splice(X,1);break}}}var $N=600,CK0=class{constructor(J,$){this._renderCallback=J,this._coreBrowserService=$,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(J=$N){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let $=$N-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,$>0){this._restartInterval($);return}}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let $=$N-(Date.now()-this._animationTimeRestarted);this._animationTimeRestarted=void 0,this._restartInterval($);return}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},$N)},J)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}};function C40(J,$,X){let Y=new $.ResizeObserver((Z)=>{let Q=Z.find((U)=>U.target===J);if(!Q)return;if(!("devicePixelContentBoxSize"in Q)){Y?.disconnect(),Y=void 0;return}let G=Q.devicePixelContentBoxSize[0].inlineSize,q=Q.devicePixelContentBoxSize[0].blockSize;G>0&&q>0&&X(G,q)});try{Y.observe(J,{box:["device-pixel-content-box"]})}catch{Y.disconnect(),Y=void 0}return i7(()=>Y?.disconnect())}function vK0(J){return J>65535?(J-=65536,String.fromCharCode((J>>10)+55296)+String.fromCharCode(J%1024+56320)):String.fromCharCode(J)}var v40=class J extends hH{constructor(){super(...arguments);this.content=0,this.fg=0,this.bg=0,this.extended=new FJ0,this.combinedData=""}static fromCharData($){let X=new J;return X.setFromCharData($),X}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?vK0(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData($){this.fg=$[0],this.bg=0;let X=!1;if($[1].length>2)X=!0;else if($[1].length===2){let Y=$[1].charCodeAt(0);if(55296<=Y&&Y<=56319){let Z=$[1].charCodeAt(1);56320<=Z&&Z<=57343?this.content=(Y-55296)*1024+Z-56320+65536|$[2]<<22:X=!0}else X=!0}else this.content=$[1].charCodeAt(0)|$[2]<<22;X&&(this.combinedData=$[1],this.content=2097152|$[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},DJ0=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]);function RJ0(J,$,X){let Y=p8(J.createProgram());if(J.attachShader(Y,p8(h40(J,J.VERTEX_SHADER,$))),J.attachShader(Y,p8(h40(J,J.FRAGMENT_SHADER,X))),J.linkProgram(Y),J.getProgramParameter(Y,J.LINK_STATUS))return Y;console.error(J.getProgramInfoLog(Y)),J.deleteProgram(Y)}function h40(J,$,X){let Y=p8(J.createShader($));if(J.shaderSource(Y,X),J.compileShader(Y),J.getShaderParameter(Y,J.COMPILE_STATUS))return Y;console.error(J.getShaderInfoLog(Y)),J.deleteShader(Y)}function hK0(J,$){let X=Math.min(J.length*2,$),Y=new Float32Array(X);for(let Z=0;Z<J.length;Z++)Y[Z]=J[Z];return Y}var fK0=class{constructor(J){this.texture=J,this.version=-1}},gK0=`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`;function pK0(J){let $="";for(let X=1;X<J;X++)$+=` else if (v_texpage == ${X}) { outColor = texture(u_texture[${X}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${J}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${$}
}`}var JG=11,vH=JG*Float32Array.BYTES_PER_ELEMENT,mK0=2,Q8=0,M5,Gh=0,rF=0,uK0=class extends JJ{constructor(J,$,X,Y){super();this._terminal=J,this._gl=$,this._dimensions=X,this._optionsService=Y,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let Z=this._gl;e2.maxAtlasPages===void 0&&(e2.maxAtlasPages=Math.min(32,p8(Z.getParameter(Z.MAX_TEXTURE_IMAGE_UNITS))),e2.maxTextureSize=p8(Z.getParameter(Z.MAX_TEXTURE_SIZE))),this._program=p8(RJ0(Z,gK0,pK0(e2.maxAtlasPages))),this._register(i7(()=>Z.deleteProgram(this._program))),this._projectionLocation=p8(Z.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=p8(Z.getUniformLocation(this._program,"u_resolution")),this._textureLocation=p8(Z.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=Z.createVertexArray(),Z.bindVertexArray(this._vertexArrayObject);let Q=new Float32Array([0,0,1,0,0,1,1,1]),G=Z.createBuffer();this._register(i7(()=>Z.deleteBuffer(G))),Z.bindBuffer(Z.ARRAY_BUFFER,G),Z.bufferData(Z.ARRAY_BUFFER,Q,Z.STATIC_DRAW),Z.enableVertexAttribArray(0),Z.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let q=new Uint8Array([0,1,2,3]),U=Z.createBuffer();this._register(i7(()=>Z.deleteBuffer(U))),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,U),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,q,Z.STATIC_DRAW),this._attributesBuffer=p8(Z.createBuffer()),this._register(i7(()=>Z.deleteBuffer(this._attributesBuffer))),Z.bindBuffer(Z.ARRAY_BUFFER,this._attributesBuffer),Z.enableVertexAttribArray(2),Z.vertexAttribPointer(2,2,Z.FLOAT,!1,vH,0),Z.vertexAttribDivisor(2,1),Z.enableVertexAttribArray(3),Z.vertexAttribPointer(3,2,Z.FLOAT,!1,vH,2*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(3,1),Z.enableVertexAttribArray(4),Z.vertexAttribPointer(4,1,Z.FLOAT,!1,vH,4*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(4,1),Z.enableVertexAttribArray(5),Z.vertexAttribPointer(5,2,Z.FLOAT,!1,vH,5*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(5,1),Z.enableVertexAttribArray(6),Z.vertexAttribPointer(6,2,Z.FLOAT,!1,vH,7*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(6,1),Z.enableVertexAttribArray(1),Z.vertexAttribPointer(1,2,Z.FLOAT,!1,vH,9*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(1,1),Z.useProgram(this._program);let z=new Int32Array(e2.maxAtlasPages);for(let H=0;H<e2.maxAtlasPages;H++)z[H]=H;Z.uniform1iv(this._textureLocation,z),Z.uniformMatrix4fv(this._projectionLocation,!1,DJ0),this._atlasTextures=[];for(let H=0;H<e2.maxAtlasPages;H++){let j=new fK0(p8(Z.createTexture()));this._register(i7(()=>Z.deleteTexture(j.texture))),Z.activeTexture(Z.TEXTURE0+H),Z.bindTexture(Z.TEXTURE_2D,j.texture),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,1,1,0,Z.RGBA,Z.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[H]=j}Z.enable(Z.BLEND),Z.blendFunc(Z.SRC_ALPHA,Z.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return this._atlas?this._atlas.beginFrame():!0}updateCell(J,$,X,Y,Z,Q,G,q,U){this._updateCell(this._vertices.attributes,J,$,X,Y,Z,Q,G,q,U)}_updateCell(J,$,X,Y,Z,Q,G,q,U,z){if(Q8=(X*this._terminal.cols+$)*JG,Y===0||Y===void 0){J.fill(0,Q8,Q8+JG-1-mK0);return}this._atlas&&(q&&q.length>1?M5=this._atlas.getRasterizedGlyphCombinedChar(q,Z,Q,G,!1,this._terminal.element):M5=this._atlas.getRasterizedGlyph(Y,Z,Q,G,!1,this._terminal.element),Gh=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),Z!==z&&M5.offset.x>Gh?(rF=M5.offset.x-Gh,J[Q8]=-(M5.offset.x-rF)+this._dimensions.device.char.left,J[Q8+1]=-M5.offset.y+this._dimensions.device.char.top,J[Q8+2]=(M5.size.x-rF)/this._dimensions.device.canvas.width,J[Q8+3]=M5.size.y/this._dimensions.device.canvas.height,J[Q8+4]=M5.texturePage,J[Q8+5]=M5.texturePositionClipSpace.x+rF/this._atlas.pages[M5.texturePage].canvas.width,J[Q8+6]=M5.texturePositionClipSpace.y,J[Q8+7]=M5.sizeClipSpace.x-rF/this._atlas.pages[M5.texturePage].canvas.width,J[Q8+8]=M5.sizeClipSpace.y):(J[Q8]=-M5.offset.x+this._dimensions.device.char.left,J[Q8+1]=-M5.offset.y+this._dimensions.device.char.top,J[Q8+2]=M5.size.x/this._dimensions.device.canvas.width,J[Q8+3]=M5.size.y/this._dimensions.device.canvas.height,J[Q8+4]=M5.texturePage,J[Q8+5]=M5.texturePositionClipSpace.x,J[Q8+6]=M5.texturePositionClipSpace.y,J[Q8+7]=M5.sizeClipSpace.x,J[Q8+8]=M5.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&ZK0(Y,U,M5.size.x,this._dimensions.device.cell.width)&&(J[Q8+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width))}clear(){let J=this._terminal,$=J.cols*J.rows*JG;this._vertices.count!==$?this._vertices.attributes=new Float32Array($):this._vertices.attributes.fill(0);let X=0;for(;X<this._vertices.attributesBuffers.length;X++)this._vertices.count!==$?this._vertices.attributesBuffers[X]=new Float32Array($):this._vertices.attributesBuffers[X].fill(0);this._vertices.count=$,X=0;for(let Y=0;Y<J.rows;Y++)for(let Z=0;Z<J.cols;Z++)this._vertices.attributes[X+9]=Z/J.cols,this._vertices.attributes[X+10]=Y/J.rows,X+=JG}handleResize(){let J=this._gl;J.useProgram(this._program),J.viewport(0,0,J.canvas.width,J.canvas.height),J.uniform2f(this._resolutionLocation,J.canvas.width,J.canvas.height),this.clear()}render(J){if(!this._atlas)return;let $=this._gl;$.useProgram(this._program),$.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let X=this._vertices.attributesBuffers[this._activeBuffer],Y=0;for(let Z=0;Z<J.lineLengths.length;Z++){let Q=Z*this._terminal.cols*JG,G=this._vertices.attributes.subarray(Q,Q+J.lineLengths[Z]*JG);X.set(G,Y),Y+=G.length}$.bindBuffer($.ARRAY_BUFFER,this._attributesBuffer),$.bufferData($.ARRAY_BUFFER,X.subarray(0,Y),$.STREAM_DRAW);for(let Z=0;Z<this._atlas.pages.length;Z++)this._atlas.pages[Z].version!==this._atlasTextures[Z].version&&this._bindAtlasPageTexture($,this._atlas,Z);$.drawElementsInstanced($.TRIANGLE_STRIP,4,$.UNSIGNED_BYTE,0,Y/JG)}setAtlas(J){this._atlas=J;for(let $ of this._atlasTextures)$.version=-1}_bindAtlasPageTexture(J,$,X){J.activeTexture(J.TEXTURE0+X),J.bindTexture(J.TEXTURE_2D,this._atlasTextures[X].texture),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,$.pages[X].canvas),J.generateMipmap(J.TEXTURE_2D),this._atlasTextures[X].version=$.pages[X].version}setDimensions(J){this._dimensions=J}},cK0=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(J,$,X,Y=!1){if(this.selectionStart=$,this.selectionEnd=X,!$||!X||$[0]===X[0]&&$[1]===X[1]){this.clear();return}let Z=J.buffers.active.ydisp,Q=$[1]-Z,G=X[1]-Z,q=Math.max(Q,0),U=Math.min(G,J.rows-1);if(q>=J.rows||U<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=Y,this.viewportStartRow=Q,this.viewportEndRow=G,this.viewportCappedStartRow=q,this.viewportCappedEndRow=U,this.startCol=$[0],this.endCol=X[0]}isCellSelected(J,$,X){return this.hasSelection?(X-=J.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?$>=this.startCol&&X>=this.viewportCappedStartRow&&$<this.endCol&&X<=this.viewportCappedEndRow:$<this.startCol&&X>=this.viewportCappedStartRow&&$>=this.endCol&&X<=this.viewportCappedEndRow:X>this.viewportStartRow&&X<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&X===this.viewportStartRow&&$>=this.startCol&&$<this.endCol||this.viewportStartRow<this.viewportEndRow&&X===this.viewportEndRow&&$<this.endCol||this.viewportStartRow<this.viewportEndRow&&X===this.viewportStartRow&&$>=this.startCol):!1}};function lK0(){return new cK0}var jN=4,GN=1,qN=2,qh=3,dK0=2147483648,sK0=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=lK0()}resize(J,$){let X=J*$*jN;X!==this.cells.length&&(this.cells=new Uint32Array(X),this.lineLengths=new Uint32Array($))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}},aK0=`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,rK0=`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`,XQ=8,Uh=XQ*Float32Array.BYTES_PER_ELEMENT,iK0=20*XQ,f40=class{constructor(){this.attributes=new Float32Array(iK0),this.count=0}},JQ=0,g40=0,p40=0,m40=0,u40=0,c40=0,l40=0,nK0=class extends JJ{constructor(J,$,X,Y){super();this._terminal=J,this._gl=$,this._dimensions=X,this._themeService=Y,this._vertices=new f40,this._verticesCursor=new f40;let Z=this._gl;this._program=p8(RJ0(Z,aK0,rK0)),this._register(i7(()=>Z.deleteProgram(this._program))),this._projectionLocation=p8(Z.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=Z.createVertexArray(),Z.bindVertexArray(this._vertexArrayObject);let Q=new Float32Array([0,0,1,0,0,1,1,1]),G=Z.createBuffer();this._register(i7(()=>Z.deleteBuffer(G))),Z.bindBuffer(Z.ARRAY_BUFFER,G),Z.bufferData(Z.ARRAY_BUFFER,Q,Z.STATIC_DRAW),Z.enableVertexAttribArray(3),Z.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let q=new Uint8Array([0,1,2,3]),U=Z.createBuffer();this._register(i7(()=>Z.deleteBuffer(U))),Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,U),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,q,Z.STATIC_DRAW),this._attributesBuffer=p8(Z.createBuffer()),this._register(i7(()=>Z.deleteBuffer(this._attributesBuffer))),Z.bindBuffer(Z.ARRAY_BUFFER,this._attributesBuffer),Z.enableVertexAttribArray(0),Z.vertexAttribPointer(0,2,Z.FLOAT,!1,Uh,0),Z.vertexAttribDivisor(0,1),Z.enableVertexAttribArray(1),Z.vertexAttribPointer(1,2,Z.FLOAT,!1,Uh,2*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(1,1),Z.enableVertexAttribArray(2),Z.vertexAttribPointer(2,4,Z.FLOAT,!1,Uh,4*Float32Array.BYTES_PER_ELEMENT),Z.vertexAttribDivisor(2,1),this._updateCachedColors(Y.colors),this._register(this._themeService.onChangeColors((z)=>{this._updateCachedColors(z),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(J){let $=this._gl;$.useProgram(this._program),$.bindVertexArray(this._vertexArrayObject),$.uniformMatrix4fv(this._projectionLocation,!1,DJ0),$.bindBuffer($.ARRAY_BUFFER,this._attributesBuffer),$.bufferData($.ARRAY_BUFFER,J.attributes,$.DYNAMIC_DRAW),$.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,$.UNSIGNED_BYTE,0,J.count)}handleResize(){this._updateViewportRectangle()}setDimensions(J){this._dimensions=J}_updateCachedColors(J){this._bgFloat=this._colorToFloat32Array(J.background),this._cursorFloat=this._colorToFloat32Array(J.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(J){let $=this._terminal,X=this._vertices,Y=1,Z,Q,G,q,U,z,H,j,V,W,B;for(Z=0;Z<$.rows;Z++){for(G=-1,q=0,U=0,z=!1,Q=0;Q<$.cols;Q++)H=(Z*$.cols+Q)*jN,j=J.cells[H+GN],V=J.cells[H+qN],W=!!(V&67108864),(j!==q||V!==U&&(z||W))&&((q!==0||z&&U!==0)&&(B=Y++*XQ,this._updateRectangle(X,B,U,q,G,Q,Z)),G=Q,q=j,U=V,z=W);(q!==0||z&&U!==0)&&(B=Y++*XQ,this._updateRectangle(X,B,U,q,G,$.cols,Z))}X.count=Y}updateCursor(J){let $=this._verticesCursor,X=J.cursor;if(!X||X.style==="block"){$.count=0;return}let Y,Z=0;(X.style==="bar"||X.style==="outline")&&(Y=Z++*XQ,this._addRectangleFloat($.attributes,Y,X.x*this._dimensions.device.cell.width,X.y*this._dimensions.device.cell.height,X.style==="bar"?X.dpr*X.cursorWidth:X.dpr,this._dimensions.device.cell.height,this._cursorFloat)),(X.style==="underline"||X.style==="outline")&&(Y=Z++*XQ,this._addRectangleFloat($.attributes,Y,X.x*this._dimensions.device.cell.width,(X.y+1)*this._dimensions.device.cell.height-X.dpr,X.width*this._dimensions.device.cell.width,X.dpr,this._cursorFloat)),X.style==="outline"&&(Y=Z++*XQ,this._addRectangleFloat($.attributes,Y,X.x*this._dimensions.device.cell.width,X.y*this._dimensions.device.cell.height,X.width*this._dimensions.device.cell.width,X.dpr,this._cursorFloat),Y=Z++*XQ,this._addRectangleFloat($.attributes,Y,(X.x+X.width)*this._dimensions.device.cell.width-X.dpr,X.y*this._dimensions.device.cell.height,X.dpr,this._dimensions.device.cell.height,this._cursorFloat)),$.count=Z}_updateRectangle(J,$,X,Y,Z,Q,G){if(X&67108864)switch(X&50331648){case 16777216:case 33554432:JQ=this._themeService.colors.ansi[X&255].rgba;break;case 50331648:JQ=(X&16777215)<<8;break;case 0:default:JQ=this._themeService.colors.foreground.rgba}else switch(Y&50331648){case 16777216:case 33554432:JQ=this._themeService.colors.ansi[Y&255].rgba;break;case 50331648:JQ=(Y&16777215)<<8;break;case 0:default:JQ=this._themeService.colors.background.rgba}J.attributes.length<$+4&&(J.attributes=hK0(J.attributes,this._terminal.rows*this._terminal.cols*XQ)),g40=Z*this._dimensions.device.cell.width,p40=G*this._dimensions.device.cell.height,m40=(JQ>>24&255)/255,u40=(JQ>>16&255)/255,c40=(JQ>>8&255)/255,l40=1,this._addRectangle(J.attributes,$,g40,p40,(Q-Z)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,m40,u40,c40,l40)}_addRectangle(J,$,X,Y,Z,Q,G,q,U,z){J[$]=X/this._dimensions.device.canvas.width,J[$+1]=Y/this._dimensions.device.canvas.height,J[$+2]=Z/this._dimensions.device.canvas.width,J[$+3]=Q/this._dimensions.device.canvas.height,J[$+4]=G,J[$+5]=q,J[$+6]=U,J[$+7]=z}_addRectangleFloat(J,$,X,Y,Z,Q,G){J[$]=X/this._dimensions.device.canvas.width,J[$+1]=Y/this._dimensions.device.canvas.height,J[$+2]=Z/this._dimensions.device.canvas.width,J[$+3]=Q/this._dimensions.device.canvas.height,J[$+4]=G[0],J[$+5]=G[1],J[$+6]=G[2],J[$+7]=G[3]}_colorToFloat32Array(J){return new Float32Array([(J.rgba>>24&255)/255,(J.rgba>>16&255)/255,(J.rgba>>8&255)/255,(J.rgba&255)/255])}},oK0=class extends JJ{constructor(J,$,X,Y,Z,Q,G,q){super();this._container=$,this._alpha=Z,this._coreBrowserService=Q,this._optionsService=G,this._themeService=q,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${X}-layer`),this._canvas.style.zIndex=Y.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._register(this._themeService.onChangeColors((U)=>{this._refreshCharAtlas(J,U),this.reset(J)})),this._register(i7(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=p8(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(J){}handleFocus(J){}handleCursorMove(J){}handleGridChanged(J,$,X){}handleSelectionChanged(J,$,X,Y=!1){}_setTransparency(J,$){if($===this._alpha)return;let X=this._canvas;this._alpha=$,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,X),this._refreshCharAtlas(J,this._themeService.colors),this.handleGridChanged(J,0,J.rows-1)}_refreshCharAtlas(J,$){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=PJ0(J,this._optionsService.rawOptions,$,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr,2048),this._charAtlas.warmUp())}resize(J,$){this._deviceCellWidth=$.device.cell.width,this._deviceCellHeight=$.device.cell.height,this._deviceCharWidth=$.device.char.width,this._deviceCharHeight=$.device.char.height,this._deviceCharLeft=$.device.char.left,this._deviceCharTop=$.device.char.top,this._canvas.width=$.device.canvas.width,this._canvas.height=$.device.canvas.height,this._canvas.style.width=`${$.css.canvas.width}px`,this._canvas.style.height=`${$.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(J,this._themeService.colors)}_fillBottomLineAtCells(J,$,X=1){this._ctx.fillRect(J*this._deviceCellWidth,($+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,X*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(J,$,X,Y){this._alpha?this._ctx.clearRect(J*this._deviceCellWidth,$*this._deviceCellHeight,X*this._deviceCellWidth,Y*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(J*this._deviceCellWidth,$*this._deviceCellHeight,X*this._deviceCellWidth,Y*this._deviceCellHeight))}_fillCharTrueColor(J,$,X,Y){this._ctx.font=this._getFont(J,!1,!1),this._ctx.textBaseline=jJ0,this._clipCell(X,Y,$.getWidth()),this._ctx.fillText($.getChars(),X*this._deviceCellWidth+this._deviceCharLeft,Y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(J,$,X){this._ctx.beginPath(),this._ctx.rect(J*this._deviceCellWidth,$*this._deviceCellHeight,X*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(J,$,X){let Y=$?J.options.fontWeightBold:J.options.fontWeight;return`${X?"italic":""} ${Y} ${J.options.fontSize*this._coreBrowserService.dpr}px ${J.options.fontFamily}`}},tK0=class extends oK0{constructor(J,$,X,Y,Z,Q,G){super(X,J,"link",$,!0,Z,Q,G),this._register(Y.onShowLinkUnderline((q)=>this._handleShowLinkUnderline(q))),this._register(Y.onHideLinkUnderline((q)=>this._handleHideLinkUnderline(q)))}resize(J,$){super.resize(J,$),this._state=void 0}reset(J){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let J=this._state.y2-this._state.y1-1;J>0&&this._clearCells(0,this._state.y1+1,this._state.cols,J),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(J){if(J.fg===257?this._ctx.fillStyle=this._themeService.colors.background.css:J.fg!==void 0&&SK0(J.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[J.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,J.y1===J.y2)this._fillBottomLineAtCells(J.x1,J.y1,J.x2-J.x1);else{this._fillBottomLineAtCells(J.x1,J.y1,J.cols-J.x1);for(let $=J.y1+1;$<J.y2;$++)this._fillBottomLineAtCells(0,$,J.cols);this._fillBottomLineAtCells(0,J.y2,J.x2)}this._state=J}_handleHideLinkUnderline(J){this._clearCurrentLink()}},o$=typeof window=="object"?window:globalThis,Rh=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new A5,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new A5,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel($){return this.mapWindowIdToZoomLevel.get(this.getWindowId($))??0}setZoomLevel($,X){if(this.getZoomLevel(X)===$)return;let Y=this.getWindowId(X);this.mapWindowIdToZoomLevel.set(Y,$),this._onDidChangeZoomLevel.fire(Y)}getZoomFactor($){return this.mapWindowIdToZoomFactor.get(this.getWindowId($))??1}setZoomFactor($,X){this.mapWindowIdToZoomFactor.set(this.getWindowId(X),$)}setFullscreen($,X){if(this.isFullscreen(X)===$)return;let Y=this.getWindowId(X);this.mapWindowIdToFullScreen.set(Y,$),this._onDidChangeFullscreen.fire(Y)}isFullscreen($){return!!this.mapWindowIdToFullScreen.get(this.getWindowId($))}getWindowId($){return $.vscodeWindowId}};Rh.INSTANCE=new Rh;var MJ0=Rh;function eK0(J,$,X){typeof $=="string"&&($=J.matchMedia($)),$.addEventListener("change",X)}var GR1=MJ0.INSTANCE.onDidChangeZoomLevel,qR1=MJ0.INSTANCE.onDidChangeFullscreen,mH=typeof navigator=="object"?navigator.userAgent:"",UR1=mH.indexOf("Firefox")>=0,zh=mH.indexOf("AppleWebKit")>=0,JA0=mH.indexOf("Chrome")>=0,$A0=!JA0&&mH.indexOf("Safari")>=0,zR1=mH.indexOf("Electron/")>=0,HR1=mH.indexOf("Android")>=0,UN=!1;if(typeof o$.matchMedia=="function"){let J=o$.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),$=o$.matchMedia("(display-mode: fullscreen)");UN=J.matches,eK0(o$,J,({matches:X})=>{UN&&$.matches||(UN=X)})}function XA0(){return UN}var fH="en",Mh=!1,Oh=!1,zN=!1,YA0=!1,OJ0=!1,_J0=!1,ZA0=!1,QA0=!1,GA0=!1,qA0=!1,XN,HN=fH,d40=fH,UA0,$Q,QQ=globalThis,e4;typeof QQ.vscode<"u"&&typeof QQ.vscode.process<"u"?e4=QQ.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(e4=process);var NJ0=typeof e4?.versions?.electron=="string",zA0=NJ0&&e4?.type==="renderer";if(typeof e4=="object"){Mh=e4.platform==="win32",Oh=e4.platform==="darwin",zN=e4.platform==="linux",YA0=zN&&!!e4.env.SNAP&&!!e4.env.SNAP_REVISION,ZA0=NJ0,GA0=!!e4.env.CI||!!e4.env.BUILD_ARTIFACTSTAGINGDIRECTORY,XN=fH,HN=fH;let J=e4.env.VSCODE_NLS_CONFIG;if(J)try{let $=JSON.parse(J);XN=$.userLocale,d40=$.osLocale,HN=$.resolvedLanguage||fH,UA0=$.languagePack?.translationsConfigFile}catch{}OJ0=!0}else typeof navigator=="object"&&!zA0?($Q=navigator.userAgent,Mh=$Q.indexOf("Windows")>=0,Oh=$Q.indexOf("Macintosh")>=0,QA0=($Q.indexOf("Macintosh")>=0||$Q.indexOf("iPad")>=0||$Q.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,zN=$Q.indexOf("Linux")>=0,qA0=$Q?.indexOf("Mobi")>=0,_J0=!0,HN=globalThis._VSCODE_NLS_LANGUAGE||fH,XN=navigator.language.toLowerCase(),d40=XN):console.error("Unable to resolve platform.");var Hh=0;Oh?Hh=1:Mh?Hh=3:zN&&(Hh=2);var jh=OJ0,HA0=_J0&&typeof QQ.importScripts=="function",jR1=HA0?QQ.origin:void 0,PY=$Q,o2=HN,jA0;((J)=>{function $(){return o2}J.value=$;function X(){return o2.length===2?o2==="en":o2.length>=3?o2[0]==="e"&&o2[1]==="n"&&o2[2]==="-":!1}J.isDefaultVariant=X;function Y(){return o2==="en"}J.isDefault=Y})(jA0||={});var VA0=typeof QQ.postMessage=="function"&&!QQ.importScripts,WA0=(()=>{if(VA0){let J=[];QQ.addEventListener("message",(X)=>{if(X.data&&X.data.vscodeScheduleAsyncWork)for(let Y=0,Z=J.length;Y<Z;Y++){let Q=J[Y];if(Q.id===X.data.vscodeScheduleAsyncWork){J.splice(Y,1),Q.callback();return}}});let $=0;return(X)=>{let Y=++$;J.push({id:Y,callback:X}),QQ.postMessage({vscodeScheduleAsyncWork:Y},"*")}}return(J)=>setTimeout(J)})(),BA0=!!(PY&&PY.indexOf("Chrome")>=0),VR1=!!(PY&&PY.indexOf("Firefox")>=0),WR1=!!(!BA0&&PY&&PY.indexOf("Safari")>=0),BR1=!!(PY&&PY.indexOf("Edg/")>=0),FR1=!!(PY&&PY.indexOf("Android")>=0),t2=typeof navigator=="object"?navigator:{},KR1={clipboard:{writeText:jh||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(t2&&t2.clipboard&&t2.clipboard.writeText),readText:jh||!!(t2&&t2.clipboard&&t2.clipboard.readText)},keyboard:jh||XA0()?0:t2.keyboard||$A0?1:2,touch:"ontouchstart"in o$||t2.maxTouchPoints>0,pointerEvents:o$.PointerEvent&&(("ontouchstart"in o$)||navigator.maxTouchPoints>0)},Lh=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(J,$){this._keyCodeToStr[J]=$,this._strToKeyCode[$.toLowerCase()]=J}keyCodeToStr(J){return this._keyCodeToStr[J]}strToKeyCode(J){return this._strToKeyCode[J.toLowerCase()]||0}},Vh=new Lh,s40=new Lh,a40=new Lh,AR1=Array(230),FA0;((J)=>{function $(q){return Vh.keyCodeToStr(q)}J.toString=$;function X(q){return Vh.strToKeyCode(q)}J.fromString=X;function Y(q){return s40.keyCodeToStr(q)}J.toUserSettingsUS=Y;function Z(q){return a40.keyCodeToStr(q)}J.toUserSettingsGeneral=Z;function Q(q){return s40.strToKeyCode(q)||a40.strToKeyCode(q)}J.fromUserSettings=Q;function G(q){if(q>=98&&q<=113)return null;switch(q){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Vh.keyCodeToStr(q)}J.toElectronAccelerator=G})(FA0||={});var TJ0=Object.freeze(function(J,$){let X=setTimeout(J.bind($),0);return{dispose(){clearTimeout(X)}}}),KA0;((J)=>{function $(X){return X===J.None||X===J.Cancelled||X instanceof AA0?!0:!X||typeof X!="object"?!1:typeof X.isCancellationRequested=="boolean"&&typeof X.onCancellationRequested=="function"}J.isCancellationToken=$,J.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:YQ.None}),J.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:TJ0})})(KA0||={});var AA0=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?TJ0:(this._emitter||(this._emitter=new A5),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},PR1=Symbol("MicrotaskDelay"),PA0,Wh;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Wh=(J,$)=>{WA0(()=>{if(X)return;let Y=Date.now()+15;$(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,Y-Date.now())}}))});let X=!1;return{dispose(){X||(X=!0)}}}:Wh=(J,$,X)=>{let Y=J.requestIdleCallback($,typeof X=="number"?{timeout:X}:void 0),Z=!1;return{dispose(){Z||(Z=!0,J.cancelIdleCallback(Y))}}},PA0=(J)=>Wh(globalThis,J)})();var DA0;((J)=>{async function $(Y){let Z,Q=await Promise.all(Y.map((G)=>G.then((q)=>q,(q)=>{Z||(Z=q)})));if(typeof Z<"u")throw Z;return Q}J.settled=$;function X(Y){return new Promise(async(Z,Q)=>{try{await Y(Z,Q)}catch(G){Q(G)}})}J.withAsyncBody=X})(DA0||={});var r40=class J{static fromArray($){return new J((X)=>{X.emitMany($)})}static fromPromise($){return new J(async(X)=>{X.emitMany(await $)})}static fromPromises($){return new J(async(X)=>{await Promise.all($.map(async(Y)=>X.emitOne(await Y)))})}static merge($){return new J(async(X)=>{await Promise.all($.map(async(Y)=>{for await(let Z of Y)X.emitOne(Z)}))})}constructor($,X){this._state=0,this._results=[],this._error=null,this._onReturn=X,this._onStateChanged=new A5,queueMicrotask(async()=>{let Y={emitOne:(Z)=>this.emitOne(Z),emitMany:(Z)=>this.emitMany(Z),reject:(Z)=>this.reject(Z)};try{await Promise.resolve($(Y)),this.resolve()}catch(Z){this.reject(Z)}finally{Y.emitOne=void 0,Y.emitMany=void 0,Y.reject=void 0}})}[Symbol.asyncIterator](){let $=0;return{next:async()=>{do{if(this._state===2)throw this._error;if($<this._results.length)return{done:!1,value:this._results[$++]};if(this._state===1)return{done:!0,value:void 0};await YQ.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map($,X){return new J(async(Y)=>{for await(let Z of $)Y.emitOne(X(Z))})}map($){return J.map(this,$)}static filter($,X){return new J(async(Y)=>{for await(let Z of $)X(Z)&&Y.emitOne(Z)})}filter($){return J.filter(this,$)}static coalesce($){return J.filter($,(X)=>!!X)}coalesce(){return J.coalesce(this)}static async toPromise($){let X=[];for await(let Y of $)X.push(Y);return X}toPromise(){return J.toPromise(this)}emitOne($){this._state===0&&(this._results.push($),this._onStateChanged.fire())}emitMany($){this._state===0&&(this._results=this._results.concat($),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject($){this._state===0&&(this._state=2,this._error=$,this._onStateChanged.fire())}};r40.EMPTY=r40.fromArray([]);function RA0(J){return 55296<=J&&J<=56319}function i40(J){return 56320<=J&&J<=57343}function MA0(J,$){return(J-55296<<10)+($-56320)+65536}function OA0(J){return kh(J,0)}function kh(J,$){switch(typeof J){case"object":return J===null?ZQ(349,$):Array.isArray(J)?NA0(J,$):TA0(J,$);case"string":return wJ0(J,$);case"boolean":return _A0(J,$);case"number":return ZQ(J,$);case"undefined":return ZQ(937,$);default:return ZQ(617,$)}}function ZQ(J,$){return($<<5)-$+J|0}function _A0(J,$){return ZQ(J?433:863,$)}function wJ0(J,$){$=ZQ(149417,$);for(let X=0,Y=J.length;X<Y;X++)$=ZQ(J.charCodeAt(X),$);return $}function NA0(J,$){return $=ZQ(104579,$),J.reduce((X,Y)=>kh(Y,X),$)}function TA0(J,$){return $=ZQ(181387,$),Object.keys(J).sort().reduce((X,Y)=>(X=wJ0(Y,X),kh(J[Y],X)),$)}function Bh(J,$,X=32){let Y=X-$,Z=~((1<<Y)-1);return(J<<$|(Z&J)>>>Y)>>>0}function n40(J,$=0,X=J.byteLength,Y=0){for(let Z=0;Z<X;Z++)J[$+Z]=Y}function wA0(J,$,X="0"){for(;J.length<$;)J=X+J;return J}function iF(J,$=32){return J instanceof ArrayBuffer?Array.from(new Uint8Array(J)).map((X)=>X.toString(16).padStart(2,"0")).join(""):wA0((J>>>0).toString(16),$/4)}var LA0=class J{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update($){let X=$.length;if(X===0)return;let Y=this._buff,Z=this._buffLen,Q=this._leftoverHighSurrogate,G,q;for(Q!==0?(G=Q,q=-1,Q=0):(G=$.charCodeAt(0),q=0);;){let U=G;if(RA0(G))if(q+1<X){let z=$.charCodeAt(q+1);i40(z)?(q++,U=MA0(G,z)):U=65533}else{Q=G;break}else i40(G)&&(U=65533);if(Z=this._push(Y,Z,U),q++,q<X)G=$.charCodeAt(q);else break}this._buffLen=Z,this._leftoverHighSurrogate=Q}_push($,X,Y){return Y<128?$[X++]=Y:Y<2048?($[X++]=192|(Y&1984)>>>6,$[X++]=128|(Y&63)>>>0):Y<65536?($[X++]=224|(Y&61440)>>>12,$[X++]=128|(Y&4032)>>>6,$[X++]=128|(Y&63)>>>0):($[X++]=240|(Y&1835008)>>>18,$[X++]=128|(Y&258048)>>>12,$[X++]=128|(Y&4032)>>>6,$[X++]=128|(Y&63)>>>0),X>=64&&(this._step(),X-=64,this._totalLen+=64,$[0]=$[64],$[1]=$[65],$[2]=$[66]),X}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),iF(this._h0)+iF(this._h1)+iF(this._h2)+iF(this._h3)+iF(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,n40(this._buff,this._buffLen),this._buffLen>56&&(this._step(),n40(this._buff));let $=8*this._totalLen;this._buffDV.setUint32(56,Math.floor($/4294967296),!1),this._buffDV.setUint32(60,$%4294967296,!1),this._step()}_step(){let $=J._bigBlock32,X=this._buffDV;for(let j=0;j<64;j+=4)$.setUint32(j,X.getUint32(j,!1),!1);for(let j=64;j<320;j+=4)$.setUint32(j,Bh($.getUint32(j-12,!1)^$.getUint32(j-32,!1)^$.getUint32(j-56,!1)^$.getUint32(j-64,!1),1),!1);let Y=this._h0,Z=this._h1,Q=this._h2,G=this._h3,q=this._h4,U,z,H;for(let j=0;j<80;j++)j<20?(U=Z&Q|~Z&G,z=1518500249):j<40?(U=Z^Q^G,z=1859775393):j<60?(U=Z&Q|Z&G|Q&G,z=2400959708):(U=Z^Q^G,z=3395469782),H=Bh(Y,5)+U+q+z+$.getUint32(j*4,!1)&4294967295,q=G,G=Q,Q=Bh(Z,30),Z=Y,Y=H;this._h0=this._h0+Y&4294967295,this._h1=this._h1+Z&4294967295,this._h2=this._h2+Q&4294967295,this._h3=this._h3+G&4294967295,this._h4=this._h4+q&4294967295}};LA0._bigBlock32=new DataView(new ArrayBuffer(320));var{registerWindow:DR1,getWindow:kA0,getDocument:RR1,getWindows:MR1,getWindowsCount:OR1,getWindowId:o40,getWindowById:_R1,hasWindow:NR1,onDidRegisterWindow:TR1,onWillUnregisterWindow:wR1,onDidUnregisterWindow:LR1}=function(){let J=new Map,$={window:o$,disposables:new gH};J.set(o$.vscodeWindowId,$);let X=new A5,Y=new A5,Z=new A5;function Q(G,q){return(typeof G=="number"?J.get(G):void 0)??(q?$:void 0)}return{onDidRegisterWindow:X.event,onWillUnregisterWindow:Z.event,onDidUnregisterWindow:Y.event,registerWindow(G){if(J.has(G.vscodeWindowId))return JJ.None;let q=new gH,U={window:G,disposables:q.add(new gH)};return J.set(G.vscodeWindowId,U),q.add(i7(()=>{J.delete(G.vscodeWindowId),Y.fire(G)})),q.add(_h(G,yA0.BEFORE_UNLOAD,()=>{Z.fire(G)})),X.fire(U),q},getWindows(){return J.values()},getWindowsCount(){return J.size},getWindowId(G){return G.vscodeWindowId},hasWindow(G){return J.has(G)},getWindowById:Q,getWindow(G){let q=G;if(q?.ownerDocument?.defaultView)return q.ownerDocument.defaultView.window;let U=G;return U?.view?U.view.window:o$},getDocument(G){return kA0(G).document}}}(),EA0=class{constructor(J,$,X,Y){this._node=J,this._type=$,this._handler=X,this._options=Y||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function _h(J,$,X,Y){return new EA0(J,$,X,Y)}var IA0,t40,Fh=class{constructor(J,$=0){this._runner=J,this.priority=$,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(J){YN(J)}}static sort(J,$){return $.priority-J.priority}};(function(){let J=new Map,$=new Map,X=new Map,Y=new Map,Z=(Q)=>{X.set(Q,!1);let G=J.get(Q)??[];for($.set(Q,G),J.set(Q,[]),Y.set(Q,!0);G.length>0;)G.sort(Fh.sort),G.shift().execute();Y.set(Q,!1)};t40=(Q,G,q=0)=>{let U=o40(Q),z=new Fh(G,q),H=J.get(U);return H||(H=[],J.set(U,H)),H.push(z),X.get(U)||(X.set(U,!0),Q.requestAnimationFrame(()=>Z(U))),z},IA0=(Q,G,q)=>{let U=o40(Q);if(Y.get(U)){let z=new Fh(G,q),H=$.get(U);return H||(H=[],$.set(U,H)),H.push(z),z}else return t40(Q,G,q)}})();var e40=class J{constructor($,X){this.width=$,this.height=X}with($=this.width,X=this.height){return $!==this.width||X!==this.height?new J($,X):this}static is($){return typeof $=="object"&&typeof $.height=="number"&&typeof $.width=="number"}static lift($){return $ instanceof J?$:new J($.width,$.height)}static equals($,X){return $===X?!0:!$||!X?!1:$.width===X.width&&$.height===X.height}};e40.None=new e40(0,0);var kR1=new class{constructor(){this.mutationObservers=new Map}observe(J,$,X){let Y=this.mutationObservers.get(J);Y||(Y=new Map,this.mutationObservers.set(J,Y));let Z=OA0(X),Q=Y.get(Z);if(Q)Q.users+=1;else{let G=new A5,q=new MutationObserver((z)=>G.fire(z));q.observe(J,X);let U=Q={users:1,observer:q,onDidMutate:G.event};$.add(i7(()=>{U.users-=1,U.users===0&&(G.dispose(),q.disconnect(),Y?.delete(Z),Y?.size===0&&this.mutationObservers.delete(J))})),Y.set(Z,Q)}return Q.onDidMutate}},yA0={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:zh?"webkitAnimationStart":"animationstart",ANIMATION_END:zh?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:zh?"webkitAnimationIteration":"animationiteration"},xA0=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function LJ0(J,$,X,...Y){let Z=xA0.exec($);if(!Z)throw Error("Bad use of emmet");let Q=Z[1]||"div",G;return J!=="http://www.w3.org/1999/xhtml"?G=document.createElementNS(J,Q):G=document.createElement(Q),Z[3]&&(G.id=Z[3]),Z[4]&&(G.className=Z[4].replace(/\./g," ").trim()),X&&Object.entries(X).forEach(([q,U])=>{typeof U>"u"||(/^on\w+$/.test(q)?G[q]=U:q==="selected"?U&&G.setAttribute(q,"true"):G.setAttribute(q,U))}),G.append(...Y),G}function bA0(J,$,...X){return LJ0("http://www.w3.org/1999/xhtml",J,$,...X)}bA0.SVG=function(J,$,...X){return LJ0("http://www.w3.org/2000/svg",J,$,...X)};var SA0=class extends JJ{constructor(J,$,X,Y,Z,Q,G,q,U){super();this._terminal=J,this._characterJoinerService=$,this._charSizeService=X,this._coreBrowserService=Y,this._coreService=Z,this._decorationService=Q,this._optionsService=G,this._themeService=q,this._cursorBlinkStateManager=new dF,this._charAtlasDisposable=this._register(new dF),this._observerDisposable=this._register(new dF),this._model=new sK0,this._workCell=new v40,this._workCell2=new v40,this._rectangleRenderer=this._register(new dF),this._glyphRenderer=this._register(new dF),this._onChangeTextureAtlas=this._register(new A5),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this._register(new A5),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this._register(new A5),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this._register(new A5),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this._register(new A5),this.onContextLoss=this._onContextLoss.event,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");let z={antialias:!1,depth:!1,preserveDrawingBuffer:U};if(this._gl=this._canvas.getContext("webgl2",z),!this._gl)throw Error("WebGL2 not supported "+this._gl);this._register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new qK0(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new tK0(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,G,this._themeService)],this.dimensions=QK0(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this._register(G.onOptionChange(()=>this._handleOptionsChanged())),this._deviceMaxTextureSize=this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),this._register(_h(this._canvas,"webglcontextlost",(H)=>{console.log("webglcontextlost event received"),H.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(H)},3000)})),this._register(_h(this._canvas,"webglcontextrestored",(H)=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,S40(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=C40(this._canvas,this._coreBrowserService.window,(H,j)=>this._setCanvasDevicePixelDimensions(H,j)),this._register(this._coreBrowserService.onWindowChange((H)=>{this._observerDisposable.value=C40(this._canvas,H,(j,V)=>this._setCanvasDevicePixelDimensions(j,V))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._core.screenElement.isConnected,this._register(i7(()=>{for(let H of this._renderLayers)H.dispose();this._canvas.parentElement?.removeChild(this._canvas),S40(this._terminal)}))}get textureAtlas(){return this._charAtlas?.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(J,$){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let X of this._renderLayers)X.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.value?.setDimensions(this.dimensions),this._rectangleRenderer.value?.handleResize(),this._glyphRenderer.value?.setDimensions(this.dimensions),this._glyphRenderer.value?.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(let J of this._renderLayers)J.handleBlur(this._terminal);this._cursorBlinkStateManager.value?.pause(),this._requestRedrawViewport()}handleFocus(){for(let J of this._renderLayers)J.handleFocus(this._terminal);this._cursorBlinkStateManager.value?.resume(),this._requestRedrawViewport()}handleSelectionChanged(J,$,X){for(let Y of this._renderLayers)Y.handleSelectionChanged(this._terminal,J,$,X);this._model.selection.update(this._core,J,$,X),this._requestRedrawViewport()}handleCursorMove(){for(let J of this._renderLayers)J.handleCursorMove(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new nK0(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new uK0(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0){this._isAttached=!1;return}let J=PJ0(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr,this._deviceMaxTextureSize);this._charAtlas!==J&&(this._onChangeTextureAtlas.fire(J.pages[0].canvas),this._charAtlasDisposable.value=qJ0(YQ.forward(J.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),YQ.forward(J.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas))),this._charAtlas=J,this._charAtlas.warmUp(),this._glyphRenderer.value?.setAtlas(this._charAtlas)}_clearModel(J){this._model.clear(),J&&this._glyphRenderer.value?.clear()}clearTextureAtlas(){this._charAtlas?.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(let J of this._renderLayers)J.reset(this._terminal);this._cursorBlinkStateManager.value?.restartBlinkAnimation(),this._updateCursorBlink()}renderRows(J,$){if(!this._isAttached)if(this._core.screenElement?.isConnected&&this._charSizeService.width&&this._charSizeService.height)this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0;else return;for(let X of this._renderLayers)X.handleGridChanged(this._terminal,J,$);!this._glyphRenderer.value||!this._rectangleRenderer.value||(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(J,$),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible)&&this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._coreService.decPrivateModes.cursorBlink??this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new CK0(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(J,$){let X=this._core,Y=this._workCell,Z,Q,G,q,U,z,H=0,j=!0,V,W,B,K,P,A,D,M,R;J=JJ0(J,X.rows-1,0),$=JJ0($,X.rows-1,0);let O=this._coreService.decPrivateModes.cursorStyle??X.options.cursorStyle??"block",N=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,T=N-X.buffer.ydisp,S=Math.min(this._terminal.buffer.active.cursorX,X.cols-1),v=-1,l=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let f=!1;for(Q=J;Q<=$;Q++)for(G=Q+X.buffer.ydisp,q=X.buffer.lines.get(G),this._model.lineLengths[Q]=0,B=N===G,H=0,U=this._characterJoinerService.getJoinedCharacters(G),M=0;M<X.cols;M++){if(Z=this._cellColorResolver.result.bg,q.loadCell(M,Y),M===0&&(Z=this._cellColorResolver.result.bg),z=!1,j=M>=H,V=M,U.length>0&&M===U[0][0]&&j){W=U.shift();let h=this._model.selection.isCellSelected(this._terminal,W[0],G);for(D=W[0]+1;D<W[1];D++)j&&=h===this._model.selection.isCellSelected(this._terminal,D,G);j&&=!B||S<W[0]||S>=W[1],j?(z=!0,Y=new CA0(Y,q.translateToString(!0,W[0],W[1]),W[1]-W[0]),V=W[1]-1):H=W[1]}if(K=Y.getChars(),P=Y.getCode(),D=(Q*X.cols+M)*jN,this._cellColorResolver.resolve(Y,M,G,this.dimensions.device.cell.width),l&&G===N&&(M===S&&(this._model.cursor={x:S,y:T,width:Y.getWidth(),style:this._coreBrowserService.isFocused?O:X.options.cursorInactiveStyle,cursorWidth:X.options.cursorWidth,dpr:this._devicePixelRatio},v=S+Y.getWidth()-1),M>=S&&M<=v&&(this._coreBrowserService.isFocused&&O==="block"||this._coreBrowserService.isFocused===!1&&X.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),P!==0&&(this._model.lineLengths[Q]=M+1),!(this._model.cells[D]===P&&this._model.cells[D+GN]===this._cellColorResolver.result.bg&&this._model.cells[D+qN]===this._cellColorResolver.result.fg&&this._model.cells[D+qh]===this._cellColorResolver.result.ext)&&(f=!0,K.length>1&&(P|=dK0),this._model.cells[D]=P,this._model.cells[D+GN]=this._cellColorResolver.result.bg,this._model.cells[D+qN]=this._cellColorResolver.result.fg,this._model.cells[D+qh]=this._cellColorResolver.result.ext,A=Y.getWidth(),this._glyphRenderer.value.updateCell(M,Q,P,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,K,A,Z),z)){for(Y=this._workCell,M++;M<=V;M++)R=(Q*X.cols+M)*jN,this._glyphRenderer.value.updateCell(M,Q,0,0,0,0,tF0,0,0),this._model.cells[R]=0,this._model.cells[R+GN]=this._cellColorResolver.result.bg,this._model.cells[R+qN]=this._cellColorResolver.result.fg,this._model.cells[R+qh]=this._cellColorResolver.result.ext;M--}}f&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){!this._charSizeService.width||!this._charSizeService.height||(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(J,$){this._canvas.width===J&&this._canvas.height===$||(this._canvas.width=J,this._canvas.height=$,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let J=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:J,end:J})}},CA0=class extends hH{constructor(J,$,X){super();this.content=0,this.combinedData="",this.fg=J.fg,this.bg=J.bg,this.combinedData=$,this._width=X}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(J){throw Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}};function JJ0(J,$,X=0){return Math.max(Math.min(J,$),X)}var $J0="di$target",XJ0="di$dependencies",Kh=new Map;function DY(J){if(Kh.has(J))return Kh.get(J);let $=function(X,Y,Z){if(arguments.length!==3)throw Error("@IServiceName-decorator can only be used to decorate a parameter");vA0($,X,Z)};return $._id=J,Kh.set(J,$),$}function vA0(J,$,X){$[$J0]===$?$[XJ0].push({id:J,index:X}):($[XJ0]=[{id:J,index:X}],$[$J0]=$)}var ER1=DY("BufferService"),IR1=DY("CoreMouseService"),yR1=DY("CoreService"),xR1=DY("CharsetService"),bR1=DY("InstantiationService"),SR1=DY("LogService"),hA0=DY("OptionsService"),CR1=DY("OscLinkService"),vR1=DY("UnicodeService"),hR1=DY("DecorationService"),fA0={trace:0,debug:1,info:2,warn:3,error:4,off:5},gA0="xterm.js: ",YJ0=class extends JJ{constructor(J){super();this._optionsService=J,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),kJ0=this}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=fA0[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(J){for(let $=0;$<J.length;$++)typeof J[$]=="function"&&(J[$]=J[$]())}_log(J,$,X){this._evalLazyOptionalParams(X),J.call(console,(this._optionsService.options.logger?"":gA0)+$,...X)}trace(J,...$){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,J,$)}debug(J,...$){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,J,$)}info(J,...$){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,J,$)}warn(J,...$){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,J,$)}error(J,...$){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,J,$)}};YJ0=xF0([bF0(0,hA0)],YJ0);var kJ0;function pA0(J){kJ0=J}var EJ0=class extends JJ{constructor(J){if(zJ0&&oF0()<16){let $={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",$))throw Error("Webgl2 is only supported on Safari 16 and above")}super();this._preserveDrawingBuffer=J,this._onChangeTextureAtlas=this._register(new A5),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this._register(new A5),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this._register(new A5),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this._register(new A5),this.onContextLoss=this._onContextLoss.event}activate(J){let $=J._core;if(!J.element){this._register($.onWillOpen(()=>this.activate(J)));return}this._terminal=J;let{coreService:X,optionsService:Y}=$,Z=$,Q=Z._renderService,G=Z._characterJoinerService,q=Z._charSizeService,U=Z._coreBrowserService,z=Z._decorationService,H=Z._logService,j=Z._themeService;pA0(H),this._renderer=this._register(new SA0(J,G,q,U,X,z,Y,j,this._preserveDrawingBuffer)),this._register(YQ.forward(this._renderer.onContextLoss,this._onContextLoss)),this._register(YQ.forward(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this._register(YQ.forward(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this._register(YQ.forward(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),Q.setRenderer(this._renderer),this._register(i7(()=>{if(this._terminal._core._store._isDisposed)return;let V=this._terminal._core._renderService;V.setRenderer(this._terminal._core._createRenderer()),V.handleResize(J.cols,J.rows)}))}get textureAtlas(){return this._renderer?.textureAtlas}clearTextureAtlas(){this._renderer?.clearTextureAtlas()}};var mA0=2,uA0=1,IJ0=class{activate(J){this._terminal=J}dispose(){}fit(){let J=this.proposeDimensions();if(!J||!this._terminal||isNaN(J.cols)||isNaN(J.rows))return;let $=this._terminal._core;(this._terminal.rows!==J.rows||this._terminal.cols!==J.cols)&&($._renderService.clear(),this._terminal.resize(J.cols,J.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let J=this._terminal._core._renderService.dimensions;if(J.css.cell.width===0||J.css.cell.height===0)return;let $=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,X=window.getComputedStyle(this._terminal.element.parentElement),Y=parseInt(X.getPropertyValue("height")),Z=Math.max(0,parseInt(X.getPropertyValue("width"))),Q=window.getComputedStyle(this._terminal.element),G={top:parseInt(Q.getPropertyValue("padding-top")),bottom:parseInt(Q.getPropertyValue("padding-bottom")),right:parseInt(Q.getPropertyValue("padding-right")),left:parseInt(Q.getPropertyValue("padding-left"))},q=G.top+G.bottom,U=G.right+G.left,z=Y-q,H=Z-U-$;return{cols:Math.max(mA0,Math.floor(H/J.css.cell.width)),rows:Math.max(uA0,Math.floor(z/J.css.cell.height))}}};import{isMac as yJ0,isWin32 as cA0}from"@blockcode/utils";var Eh={cols:20,rows:10,disableStdin:!0,convertEol:!0,cursorBlink:!1,cursorInactiveStyle:"none",cursorStyle:"bar",cursorWidth:1,fontFamily:'"Cascadia Code", Menlo, monospace',fontSize:12,lineHeight:1.2,windowsMode:cA0,macOptionIsMeta:yJ0,macOptionClickForcesSelection:yJ0,theme:{cursor:"#f8f8f8",foreground:"#f8f8f8",background:"#2d2e2c",selectionBackground:"#8abbff",black:"#1e1e1d",brightblack:"#262625",red:"#ce5c5c",brightred:"#ff7272",green:"#5bcc5b",brightgreen:"#72ff72",yellow:"#cccc5b",brightyellow:"#ffff72",blue:"#5d5dd3",brightblue:"#7279ff",magenta:"#bc5ed1",brightmagenta:"#e572ff",cyan:"#5da5d5",brightcyan:"#72f0ff",white:"#f8f8f8",brightwhite:"#ffffff"}};K0(".WwGKeG_terminal-wrapper{flex-direction:column;flex:1;display:flex}.WwGKeG_terminal{flex:1;padding:4px}.WwGKeG_terminal .xterm-viewport{scrollbar-width:none}.WwGKeG_terminal .xterm-scrollable-element .scrollbar,.WwGKeG_terminal .xterm-scrollable-element .slider{border-radius:3px!important;width:6px!important}.WwGKeG_input-wrapper{padding:var(--space);align-items:center;width:100%;display:flex}.WwGKeG_input{margin:0 var(--space);border-radius:calc(var(--space)/2);flex:1}.WwGKeG_button-wrapper{align-items:stretch;display:flex}.WwGKeG_send-button,.WwGKeG_dropdown-button{background:var(--theme-primary);border:var(--theme-primary);color:var(--ui-white)}.WwGKeG_send-button{border-radius:calc(var(--space)/2)0 0 calc(var(--space)/2)}.WwGKeG_dropdown-button{border-radius:0 calc(var(--space)/2)calc(var(--space)/2)0;border-left:1px solid var(--ui-black-transparent);padding:var(--space)}.WwGKeG_dropdown-icon{filter:brightness(100)}.WwGKeG_icon{width:20px}.WwGKeG_clean-button{margin-left:var(--space)}");var t$={cleanButton:"WwGKeG_clean-button",dropdownButton:"WwGKeG_dropdown-button",dropdownIcon:"WwGKeG_dropdown-icon",terminalWrapper:"WwGKeG_terminal-wrapper",input:"WwGKeG_input",inputWrapper:"WwGKeG_input-wrapper",terminal:"WwGKeG_terminal",sendButton:"WwGKeG_send-button",buttonWrapper:"WwGKeG_button-wrapper",icon:"WwGKeG_icon"};var xJ0="./assets/icon-send-rhxrgr30.svg";import{jsx as $G,jsxs as FN}from"preact/jsx-runtime";var u9=dA0({REPL:null,Text:null,HEX:null});function yh({compactMode:J,textValue:$,disabledREPL:X,options:Y}){let Z=bJ0(null),Q=bJ0(null),{appState:G}=sA0(),q=SJ0($),U=SJ0(typeof q.value==="string"||J||X?u9.Text:u9.REPL);BN(()=>{if(Z.xterm&&typeof q.value==="string")Z.xterm.write($.replace(q.value,"")),q.value=$},[$]),BN(()=>{if(Z.xterm&&!G.value?.terminalCache)Z.xterm.writeln(""),setTimeout(()=>Z.xterm.clear(),0)},[G.value?.terminalCache]);let z=GQ((D)=>{if(U.value=D,Z.xterm)if(D===u9.REPL)Z.xterm.focus(),Z.xterm.options.cursorStyle="block",Z.xterm.options.cursorBlink=!!G.value?.device,Z.xterm.options.disableStdin=!1,Q.current.base.value="";else Z.xterm.blur(),Z.xterm.options.cursorStyle="bar",Z.xterm.options.cursorBlink=!1,Z.xterm.options.disableStdin=!0},[]),H=GQ((D)=>{let M=G.value?.terminalCache??Uint8Array.from([]),R=new Uint8Array(M.length+D.length);R.set(M),R.set(D,M.length),Ih("terminalCache",R)},[]),j=GQ((D)=>{Z.xterm?.write(D)},[]),V=GQ(()=>{if(typeof q.value==="string")return;let D=G.value?.device,M=Z.xterm;if(D&&M){let R=M.onData((O)=>D.serial.write(O));if(D.on("data",j),D.on("disconnect",()=>{R.dispose(),D.off("data",j)}),!G.value?.terminalCache)D.on("data",H),D.on("disconnect",()=>{Ih("terminalCache",null),D.off("data",H)})}},[$]),W=GQ((D)=>()=>{if(G.value.device?.serial.write(D),U.value===u9.REPL)Z.xterm.focus()},[]),B=GQ((D,M)=>{if(!D)return;if(U.value===u9.REPL)M=!0;if(U.value===u9.HEX){let R=D.replace(/\s+/g,"");if(/^[0-9A-Fa-f]+$/.test(R)&&R.length%2===0){let O=[];for(let N=0;N<R.length;N=N+2)O.push(parseInt(R.substring(N,N+2),16));if(M===!0)O.push(13,10);D=Uint8Array.from(O)}else{aA0({mode:"warn",message:iJ("code.terminalHexError","HEX data format error.")},2000);return}}else if(M===!0)D+=`\r
`;G.value?.device?.serial.write(D,typeof D==="string"?"text":"binary")},[]),K=GQ((D)=>{Q.current.base.blur(),B(Q.current.base.value),Q.current.base.focus()},[]),P=GQ(()=>{Q.current.base.blur(),B(Q.current.base.value,!0),Q.current.base.focus()},[]),A=GQ(()=>{Ih("terminalCache",null)},[]);return BN(()=>{if(typeof q.value==="string")return;if(!Z.xterm)return;if(Z.xterm.reset(),!G.value?.device){Z.xterm.write(iJ("code.terminalWaitforConnect","Waiting for device connection..."));return}if(U.value===u9.REPL)Z.xterm.focus(),Z.xterm.options.cursorStyle="block",Z.xterm.options.cursorBlink=!0;V()},[G.value?.device]),BN(()=>{if(Z.current){let D=Object.assign({},Eh.theme,Y?.theme),M=new R40(Object.assign({},Eh,Y,{theme:D}));M.open(Z.current);let R=new EJ0,O=new IJ0;if(M.loadAddon(R),M.loadAddon(O),typeof q.value==="string")M.write($);else if(!G.value?.device)M.write(iJ("code.terminalWaitforConnect","Waiting for device connection..."));else if(G.value?.terminalCache)M.write(G.value.terminalCache);if(O.fit(),Z.xterm=M,Z.current.style.backgroundColor=M.options.theme.background,Z.resizeObserver=new ResizeObserver(()=>O.fit()),Z.resizeObserver.observe(Z.current),U.value===u9.REPL)Z.xterm.focus(),Z.xterm.options.cursorStyle="block",Z.xterm.options.cursorBlink=!!G.value?.device,Z.xterm.options.disableStdin=!1;V()}return()=>{if(Z.xterm)Z.xterm.clear(),Z.xterm.dispose(),Z.xterm=null}},[]),FN("div",{className:t$.terminalWrapper,children:[$G("div",{ref:Z,className:t$.terminal}),typeof q.value!=="string"&&FN("div",{className:t$.inputWrapper,children:[J!==!0&&$G(rA0,{items:[!X&&{title:iJ("code.terminalMode.repl","REPL"),value:u9.REPL},{title:iJ("code.terminalMode.hex","HEX"),value:u9.HEX},{title:iJ("code.terminalMode.text","Text"),value:u9.Text}].filter(Boolean),value:U.value,onChange:z}),$G(iA0,{autoClear:!0,enterSubmit:!0,ref:Q,disabled:U.value===u9.REPL||!G.value?.device,forceFocus:U.value!==u9.REPL,className:t$.input,onSubmit:B}),FN("div",{className:t$.buttonWrapper,children:[FN(vJ0,{disabled:U.value===u9.REPL||!G.value?.device,className:t$.sendButton,onClick:K,children:[$G("img",{className:t$.icon,src:xJ0}),$G(CJ0,{id:"code.terminalSend",defaultMessage:"Send"})]}),$G(nA0,{placement:"top-end",className:t$.dropdownButton,iconClassName:t$.dropdownIcon,items:[J!==!0&&[{label:iJ("code.terminalSendChar","Send {char}",{char:"Ctrl+A"}),disabled:!G.value?.device,onClick:W(String.fromCharCode(1))},{label:iJ("code.terminalSendChar","Send {char}",{char:"Ctrl+B"}),disabled:!G.value?.device,onClick:W(String.fromCharCode(2))},{label:iJ("code.terminalSendChar","Send {char}",{char:"Ctrl+C"}),disabled:!G.value?.device,onClick:W(String.fromCharCode(3))},{label:iJ("code.terminalSendChar","Send {char}",{char:"Ctrl+D"}),disabled:!G.value?.device,onClick:W(String.fromCharCode(4))},{label:iJ("code.terminalSendChar","Send {char}",{char:"Ctrl+E"}),disabled:!G.value?.device,onClick:W(String.fromCharCode(5))}],[{label:iJ("code.terminalSendEnter","Send with Enter"),hotkey:[hJ0.CONTROL,hJ0.ENTER],disabled:U.value===u9.REPL||!G.value?.device,onClick:P}]].filter(Boolean)}),$G(vJ0,{disabled:!G.value?.device,className:t$.cleanButton,onClick:A,children:$G(CJ0,{id:"code.terminalClean",defaultMessage:"Clean"})})]})]})]})}import{Text as tA0}from"@blockcode/core";var fJ0="./assets/icon-code-ts3t3bsf.svg";import{jsx as JP0}from"preact/jsx-runtime";var eA0={icon:fJ0,label:JP0(tA0,{id:"code.tabs.code",defaultMessage:"Code"}),Content:Jv};import{useEffect as XP0}from"preact/hooks";import{useSignal as YP0}from"@preact/signals";import{useAppContext as ZP0,setAppState as pJ0,Text as QP0}from"@blockcode/core";var gJ0="./assets/icon-terminal-92ztq850.svg";import{jsx as mJ0}from"preact/jsx-runtime";var GP0={icon:gJ0,label:mJ0(QP0,{id:"code.tabs.terminal",defaultMessage:"Terminal"}),Content:(J)=>{let{appState:$}=ZP0(),X=YP0(null);if($.value?.panelBoxId==="Serial")X.value="Serial",pJ0("panelBoxId",null);else if($.value?.panelBoxId)X.value=$.value?.panelBoxId;return XP0(()=>{return()=>{if(X.value==="Serial")pJ0("panelBoxId","Serial")}},[]),mJ0(yh,{...J})}};export{GP0 as terminalTab,H4 as monaco,eA0 as codeTab,yh as Terminal,Jv as CodeEditor};
