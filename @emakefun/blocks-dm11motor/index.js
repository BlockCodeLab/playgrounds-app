import{addLocalesMessages as P,Text as b}from"@blockcode/core";import{Text as r}from"@blockcode/core";import{jsx as d}from"preact/jsx-runtime";var a=(n)=>[{id:"addr",text:d(r,{id:"blocks.dm11motor.addr",defaultMessage:"set I2C address [ADDR]"}),inputs:{ADDR:{menu:[["0×15","0x15"],["0×16","0x16"],["0×17","0x17"],["0×19","0x19"]]}},ino(t){let e=t.getFieldValue("ADDR");return this.definitions_.variable_dm11motor="Dm11 dm11Motor;",this.definitions_.setup_dm11motor=`dm11Motor.Init(${e});`,""}},{id:"run",text:d(r,{id:"blocks.dm11motor.run",defaultMessage:"set [MOTOR] motor to [SPEED]% [DIR] speed"}),inputs:{MOTOR:{menu:[["M0","m0"],["M1","m1"],[d(r,{id:"blocks.dm11motor.all",defaultMessage:"all"}),"all"]]},DIR:{inputMode:!0,defaultValue:"1",type:"number",menu:[[d(r,{id:"blocks.dm11motor.forward",defaultMessage:"forward"}),"1"],[d(r,{id:"blocks.dm11motor.reverse",defaultMessage:"reverse"}),"-1"]]},SPEED:{shadow:"speed",defaultValue:100}},ino(t){let e=t.getFieldValue("MOTOR"),o=this.valueToCode(t,"DIR",this.ORDER_NONE),m=this.valueToCode(t,"SPEED",this.ORDER_NONE);if(this.definitions_.variable_dm11motor="Dm11 dm11Motor;",!this.definitions_.setup_dm11motor)this.definitions_.setup_dm11motor="dm11Motor.Init();";let s=o>0?0:`(int)(((float)${m} * 4095) / 100)`,l=o>0?`(int)(((float)${m} * 4095) / 100)`:0,i="";if(e==="m0"||e==="all")i+=`dm11Motor.PwmDuty(Dm11::kPwmChannel0, ${s});
`,i+=`dm11Motor.PwmDuty(Dm11::kPwmChannel1, ${l});
`;if(e==="m1"||e==="all")i+=`dm11Motor.PwmDuty(Dm11::kPwmChannel2, ${s});
`,i+=`dm11Motor.PwmDuty(Dm11::kPwmChannel3, ${l});
`;return i}},{id:"stop",text:d(r,{id:"blocks.dm11motor.stop",defaultMessage:"stop [MOTOR] motor"}),inputs:{MOTOR:{menu:[[d(r,{id:"blocks.dm11motor.all",defaultMessage:"all"}),"all"],["M0","m0"],["M1","m1"]]}},ino(t){let e=t.getFieldValue("MOTOR");if(this.definitions_.variable_dm11motor="Dm11 dm11Motor;",!this.definitions_.setup_dm11motor)this.definitions_.setup_dm11motor="dm11Motor.Init();";let o="";if(e==="m0"||e==="all")o+=`dm11Motor.PwmDuty(Dm11::kPwmChannel0, 4095);
`,o+=`dm11Motor.PwmDuty(Dm11::kPwmChannel1, 4095);
`;if(e==="m1"||e==="all")o+=`dm11Motor.PwmDuty(Dm11::kPwmChannel2, 4095);
`,o+=`dm11Motor.PwmDuty(Dm11::kPwmChannel3, 4095);
`;return o}},{id:"speed",shadow:!0,output:"number",inputs:{SPEED:{type:"slider",defaultValue:100,min:0,max:100}},mpy(t){return[t.getFieldValue("SPEED")||0,this.ORDER_NONE]},ino(t){return[t.getFieldValue("SPEED")||0,this.ORDER_NONE]}}],u={Motors:{menu:[["M0","m0"],["M1","m1"],[d(r,{id:"blocks.dm11motor.all",defaultMessage:"all"}),"all"]]}};var c="./assets/dm11-1vpg26my.cpp";var C="./assets/dm11-grqxdfh7.h";var f=(n)=>{if(n.editor==="@blockcode/gui-arduino")return[{header:!0,name:"dm11.h",type:"text/x-c",uri:C},{name:"dm11.cpp",type:"text/x-c",uri:c}];return[]};var p="///docs.emakefun.com/#/zh-cn/ph2.0_sensors/actuators/dm11/dm11";var k={en:{"blocks.dm11motor.name":"DM11 Motor Board","blocks.dm11motor.addr":"set I2C address [ADDR]","blocks.dm11motor.run":"set [MOTOR] motor to [SPEED]% [DIR] speed","blocks.dm11motor.all":"all","blocks.dm11motor.forward":"forward","blocks.dm11motor.reverse":"reverse","blocks.dm11motor.stop":"stop [MOTOR] motor"},"zh-Hans":{"blocks.dm11motor.name":"DM11 电机驱动板","blocks.dm11motor.addr":"初始 I2C 地址 [ADDR]","blocks.dm11motor.run":"将 [MOTOR] 电机 [DIR] 速度设为 [SPEED]%","blocks.dm11motor.all":"全部","blocks.dm11motor.forward":"正转","blocks.dm11motor.reverse":"反转","blocks.dm11motor.stop":"停止 [MOTOR] 电机"},"zh-Hant":{"blocks.dm11motor.name":"DM11 電機驅動板","blocks.dm11motor.addr":"初始 I2C 地址 [ADDR]","blocks.dm11motor.run":"將 [MOTOR] 電機 [DIR] 速度設為 [SPEED]%","blocks.dm11motor.all":"全部","blocks.dm11motor.forward":"正轉","blocks.dm11motor.reverse":"反轉","blocks.dm11motor.stop":"停止 [MOTOR] 電機"}};var h="./assets/icon-rfpz5yvd.svg";import{jsx as y}from"preact/jsx-runtime";P(k);var W={icon:h,name:y(b,{id:"blocks.dm11motor.name",defaultMessage:"DM11 Motor"}),readme:p,files:f,blocks:a,menus:u};export{W as default};
